function initMailMerge(){if(!window.slxmm)if("undefined"!=typeof ActiveXObject||window.navigator.userAgent.toLowerCase().indexOf("trident")>=0)try{window.slxmm=new ActiveXObject("bho.slxmm")}catch(a){window.slxmm={}}else window.slxmm={active:!1}}function initGears(){if(!window.slx)if("undefined"!=typeof ActiveXObject||window.navigator.userAgent.toLowerCase().indexOf("trident")>=0)try{window.slx=new ActiveXObject("bho.slx")}catch(a){window.slx={}}else window.slx={}}function toggleSmartPartVisiblity(a,b){var c=document.getElementById(a);"none"==c.style.display?c.style.display="block":c.style.display="none",b.src==imgCollapse.src?b.src=imgExpand.src:b.src=imgCollapse.src}function isIntegrationContractEnabled(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.isIntegrationEnabled}function isLocalCRMPricingEnabled(a){var b=Sage.Services.getService("IntegrationContractService");if(b)switch(a){case"Quote":return b.isQuoteCRMPricingEnabled;case"Opportunity":return b.isOpportunityCRMPricingEnabled;case"SalesOrder":return b.isSalesOrderCRMPricingEnabled;default:return""}return!1}function isMultiCurrencyEnabled(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.isMultiCurrencyEnabled}function accountingSystemHandlesSO(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.accountingSystemHandlesSO}function currentUserEndpoints(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.currentUserEndpoints}function hasUserDefinedEndpoints(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.hasUserDefinedEndpoints}function isCPQIntegrationEnabled(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.isCPQIntegrationEnabled}function isBackOfficeIntegrationEnabled(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.isBackOfficeIntegrationEnabled}function isWorkflowIntegrationEnabled(){var a=Sage.Services.getService("IntegrationContractService");return null!=a&&void 0!==a&&a.isWorkflowIntegrationEnabled}function Timeline_onResize(){null==resizeTimerID&&(resizeTimerID=window.setTimeout(function(){resizeTimerID=null,tl.layout()},500))}function Timeline_init(a,b){var c=a.onLoad,d=750;$("#show_"+b).click(function(){window.setTimeout(c,d)}),$("#more_"+b).click(function(){window.setTimeout(c,d)}),$("#more_"+b).length>0&&$("#show_More").click(function(){window.setTimeout(c,d)}),$(".tws-main-tab-buttons").click(function(){closeTimelineBubble()}),$(".tws-more-tab-buttons-container").click(function(){closeTimelineBubble()}),document.body.addEventListener?document.body.addEventListener("onresize",Timeline_onResize,!1):document.body.attachEvent&&document.body.attachEvent("onresize",Timeline_onResize),dojo.subscribe("/group/context/changed",a,a.onLoad),null!=document.getElementById(a.ParentElement)&&(document.getElementById(a.ParentElement).hasChildNodes()?c():window.setTimeout(c,d))}function closeTimelineBubble(){SimileAjax.WindowManager.popAllLayers()}function Timeline_RecalculateHeight(){$("div.timeline-container").each(function(a,b){var c=b;if(c.hasChildNodes()&&c.clientHeight>0){for(var d=c.clientHeight>0?c.clientHeight-55:245,e=!1,f=$(".timeline-band-0 .timeline-band-events .timeline-band-layer-inner"),a=0;a<f.length;a++){var g=f[a];if(g&&g.lastChild)for(var h=0;h<g.childNodes.length;h++)g.childNodes[h].offsetTop>d&&(d=g.childNodes[h].offsetTop,e=!0)}if(e){var i=$(".timeline-band-1")[0].style.height;c.style.height=parseInt(d+parseInt(i,10)+30,10)+"px",$(".timeline-band-0")[0].style.height=parseInt(d+30,10)+"px",$(".timeline-band-1")[0].style.top=parseInt(d+30,10)+"px",$(".timeline-band-1")[0].style.height=i,c.parent&&(c.parent.style.height=c.style.height)}window.setTimeout(function(){Timeline_RecalculateHeight()},2e3)}})}function Timeline_IEFix(){var a=$(".timeline-band-layer-inner div");a&&a.each(function(a,b){""!==b.innerHTML&&$(b).width("auto")})}function Timeline_GetMashupData(a,b,c,d,e,f,g){f=f||500,e=e||1,dojo.require("Sage.Utility");var h=Sage.Utility.getSDataService("mashups"),i=new Sage.SData.Client.SDataNamedQueryRequest(h),j=Sage.Services.getService("ClientEntityContext"),k=j.getContext(),l=k.EntityId;i.setApplicationName("$app"),i.setResourceKind("mashups"),i.uri.setCollectionPredicate("'"+a+"'"),i.setQueryName("execute"),i.setQueryArg("_resultName",b),i.setQueryArg("_EntityId",l),i.setQueryArg("startIndex",e),i.setQueryArg("count",f),i.read({success:function(h){var i=h.$totalResults;if(i>500&&i>e+f)e=1==e?e+f-1:e+f,Timeline_GetMashupData(a,b,c,d,e,i-e,h.$resources);else{g?g.push.apply(g,h.$resources):g=h.$resources;for(var j,k={events:[]},l=g.length,m=0;m<l;m++)j=g[m],k.events.push({start:Sage.Utility.Convert.toDateFromString(j.Start),end:Sage.Utility.Convert.toDateFromString(j.End),title:j.Title,description:j.Description,isDuration:!0,link:j.Link,icon:j.Icon,color:j.Color,image:j.Thumbnail});d.loadJSON(k,document.location.href),9===dojo.isIE&&(Timeline_IEFix(),$(".timeline-container").mousedown(function(){Timeline_IEFix()}),$(".timeline-container").mouseup(function(){Timeline_IEFix()}))}},failure:function(){}})}function dtmlXMLLoaderObject(a,b,c,d){return this.xmlDoc="",this.async=void 0===c||c,this.onloadAction=a||null,this.mainObject=b||null,this.waitCall=null,this.rSeed=d||!1,this}function callerFunction(a,b){return this.handler=function(c){return c||(c=window.event),a(c,b),!0}}function getAbsoluteLeft(a){return getOffset(a).left}function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}function getOffsetRect(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}}function getOffset(a){return a.getBoundingClientRect&&!_isChrome?getOffsetRect(a):getOffsetSum(a)}function convertStringToBoolean(a){switch("string"==typeof a&&(a=a.toLowerCase()),a){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(a){return-1!=a.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0,this.tempDOMM=this.tempDOMU=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function z(){return this.catches||(this.catches=[]),this}function dhtmlXHeir(a,b){for(var c in b)"function"==typeof b[c]&&(a[c]=b[c]);return a}function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function dataProcessor(a){return this.serverProcessor=a,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this}require({cache:{"dijit/main":function(){define(["dojo/_base/kernel"],function(a){return a.dijit})},"dijit/_base":function(){define(["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(a){return a._base})},"dijit/a11y":function(){define(["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(a,b,c,d,e,f,g){var h,i={_isElementShown:function(a){var b=d.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=c.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case"a":return c.has(a,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var b;try{var d=a.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;b=d.body}catch(c){try{b=a.contentWindow.document.body}catch(a){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){return c.get(a,"disabled")?h:c.has(a,"tabIndex")?+c.get(a,"tabIndex"):i.hasDefaultTabStop(a)?0:h},isTabNavigable:function(a){return i.effectiveTabIndex(a)>=0},isFocusable:function(a){return i.effectiveTabIndex(a)>=-1},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function d(a){return m[b(a)]||a}var e,g,h,j,k,l,m={},n=i._isElementShown,o=i.effectiveTabIndex,p=function(a){for(var d=a.firstChild;d;d=d.nextSibling)if(!(1!=d.nodeType||f("ie")<=9&&"HTML"!==d.scopeName)&&n(d)){var i=o(d);if(i>=0){0==i?(e||(e=d),g=d):i>0&&((!h||i<j)&&(j=i,h=d),(!k||i>=l)&&(l=i,k=d));var q=b(d);c.get(d,"checked")&&q&&(m[q]=d)}"SELECT"!=d.nodeName.toUpperCase()&&p(d)}};return n(a)&&p(a),{first:d(e),last:d(g),lowest:d(h),highest:d(k)}},getFirstInTabbingOrder:function(a,c){var d=i._getTabNavigable(b.byId(a,c));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(a,c){var d=i._getTabNavigable(b.byId(a,c));return d.last?d.last:d.highest}};return e.mixin(g,i),i})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(a,b,c,d){var e=b("dijit.WidgetSet",null,{constructor:function(){this._hash={},this.length=0},add:function(a){if(this._hash[a.id])throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered");this._hash[a.id]=a,this.length++},remove:function(a){this._hash[a]&&(delete this._hash[a],this.length--)},forEach:function(a,b){b=b||c.global;var d,e=0;for(d in this._hash)a.call(b,this._hash[d],e++,this._hash);return this},filter:function(a,b){b=b||c.global;var d,f=new e,g=0;for(d in this._hash){var h=this._hash[d];a.call(b,h,g++,this._hash)&&f.add(h)}return f},byId:function(a){return this._hash[a]},byClass:function(a){var b,c,d=new e;for(b in this._hash)c=this._hash[b],c.declaredClass==a&&d.add(c);return d},toArray:function(){var a=[];for(var b in this._hash)a.push(this._hash[b]);return a},map:function(b,c){return a.map(this.toArray(),b,c)},every:function(a,b){b=b||c.global;var d,e=0;for(d in this._hash)if(!a.call(b,this._hash[d],e++,this._hash))return!1;return!0},some:function(a,b){b=b||c.global;var d,e=0;for(d in this._hash)if(a.call(b,this._hash[d],e++,this._hash))return!0;return!1}});return a.forEach(["forEach","filter","byClass","map","every","some"],function(a){d[a]=e.prototype[a]}),e})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(a,b,c){var d={},e={},f={length:0,add:function(a){if(e[a.id])throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered");e[a.id]=a,this.length++},remove:function(a){e[a]&&(delete e[a],this.length--)},byId:function(a){return"string"==typeof a?e[a]:a},byNode:function(a){return e[a.getAttribute("widgetId")]},toArray:function(){var a=[];for(var b in e)a.push(e[b]);return a},getUniqueId:function(a){var b;do{b=a+"_"+(a in d?++d[a]:d[a]=0)}while(e[b]);return"dijit"==c._scopeName?b:c._scopeName+"_"+b},findWidgets:function(a,b){function c(a){for(var f=a.firstChild;f;f=f.nextSibling)if(1==f.nodeType){var g=f.getAttribute("widgetId");if(g){var h=e[g];h&&d.push(h)}else f!==b&&c(f)}}var d=[];return c(a),d},_destroyAll:function(){c._curFocus=null,c._prevFocus=null,c._activeStack=[],a.forEach(f.findWidgets(b.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var b=1==a.nodeType&&a.getAttribute("widgetId");if(b)return e[b];a=a.parentNode}return null},_hash:e};return c.registry=f,f})},"dijit/_base/focus":function(){define(["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../selection","../main"],function(a,b,c,d,e,f,g,h){var i={_curFocus:null,_prevFocus:null,isCollapsed:function(){return h.getBookmark().isCollapsed},getBookmark:function(){return(e.global==window?g:new g.SelectionManager(e.global)).getBookmark()},moveToBookmark:function(a){return(e.global==window?g:new g.SelectionManager(e.global)).moveToBookmark(a)},getFocus:function(a,c){var d=!f.curNode||a&&b.isDescendant(f.curNode,a.domNode)?h._prevFocus:f.curNode;return{node:d,bookmark:d&&d==f.curNode&&e.withGlobal(c||e.global,h.getBookmark),openedForWindow:c}},_activeStack:[],registerIframe:function(a){return f.registerIframe(a)},unregisterIframe:function(a){a&&a.remove()},registerWin:function(a,b){return f.registerWin(a,b)},unregisterWin:function(a){a&&a.remove()}};return f.focus=function(a){if(a){var b="node"in a?a.node:a,c=a.bookmark,d=a.openedForWindow,g=!!c&&c.isCollapsed;if(b){var i="iframe"==b.tagName.toLowerCase()?b.contentWindow:b;if(i&&i.focus)try{i.focus()}catch(a){}f._onFocusNode(b)}if(c&&e.withGlobal(d||e.global,h.isCollapsed)&&!g){d&&d.focus();try{e.withGlobal(d||e.global,h.moveToBookmark,null,[c])}catch(a){}}}},f.watch("curNode",function(a,b,c){h._curFocus=c,h._prevFocus=b,c&&d.publish("focusNode",c)}),f.watch("activeStack",function(a,b,c){h._activeStack=c}),f.on("widget-blur",function(a,b){d.publish("widgetBlur",a,b)}),f.on("widget-focus",function(a,b){d.publish("widgetFocus",a,b)}),c.mixin(h,i),h})},"dijit/focus":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s,t=b([l,g],{curNode:null,activeStack:[],constructor:function(){var b=h.hitch(this,function(a){c.isDescendant(this.curNode,a)&&this.set("curNode",null),c.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});a.before(f,"empty",b),a.before(f,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var e=k("pointer-events")?"pointerdown":k("MSPointer")?"MSPointerDown":k("touch-events")?"mousedown, touchstart":"mousedown",f=i(a.document,e,function(a){a&&a.target&&null==a.target.parentNode||c._onTouchNode(b||a.target,"mouse")}),g=i(d,"focusin",function(a){if(a.target.tagName){var d=a.target.tagName.toLowerCase();"#document"!=d&&"body"!=d&&(o.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),h=i(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){f.remove(),g.remove(),h.remove(),f=g=h=null,d=null}}}},_onBlurNode:function(a){var b=(new Date).getTime();b<r+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(h.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),b<s+100||(this._clearActiveWidgetsTimer=setTimeout(h.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0)))},_onTouchNode:function(a,b){s=(new Date).getTime(),this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),e.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var f=d.get(a,"dijitPopupParent");if(f)a=p.byId(f).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===m.body())break;a=n.get(a.ownerDocument).frameElement}else{var g=a.getAttribute&&a.getAttribute("widgetId"),h=g&&p.byId(g);!h||"mouse"==b&&h.get("disabled")||c.unshift(g),a=a.parentNode}}}catch(a){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(r=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,e=a.length-1;if(a[e]!=c[d]){this.set("activeStack",a);var f,g;for(g=d;g>=0&&c[g]!=a[g];g--)(f=p.byId(c[g]))&&(f._hasBeenBlurred=!0,f.set("focused",!1),f._focusManager==this&&f._onBlur(b),this.emit("widget-blur",f,b));for(g++;g<=e;g++)(f=p.byId(a[g]))&&(f.set("focused",!0),f._focusManager==this&&f._onFocus(b),this.emit("widget-focus",f,b))}},focus:function(a){if(a)try{a.focus()}catch(a){}}}),u=new t;j(function(){var a=u.registerWin(n.get(document));k("ie")&&i(window,"unload",function(){a&&(a.remove(),a=null)})}),q.focus=function(a){u.focus(a)};for(var v in u)/^_/.test(v)||(q.focus[v]="function"==typeof u[v]?h.hitch(u,v):u[v]);return u.watch(function(a,b,c){q.focus[a]=c}),u})},"dijit/selection":function(){define(["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","dijit/focus"],function(a,b,c,d,e,f){var g=function(g){var h=g.document;this.getType=function(){if(h.getSelection){var a,b="text";try{a=g.getSelection()}catch(a){}if(a&&1==a.rangeCount){var c=a.getRangeAt(0);c.startContainer==c.endContainer&&c.endOffset-c.startOffset==1&&3!=c.startContainer.nodeType&&(b="control")}return b}return h.selection.type.toLowerCase()},this.getSelectedText=function(){if(h.getSelection){var a=g.getSelection();return a?a.toString():""}return"control"==this.getType()?null:h.selection.createRange().text},this.getSelectedHtml=function(){if(h.getSelection){var a=g.getSelection();if(a&&a.rangeCount){var b,c="";for(b=0;b<a.rangeCount;b++){var d=a.getRangeAt(b).cloneContents(),e=h.createElement("div");e.appendChild(d),c+=e.innerHTML}return c}return null}return"control"==this.getType()?null:h.selection.createRange().htmlText},this.getSelectedElement=function(){if("control"==this.getType()){if(h.getSelection){var a=g.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}var b=h.selection.createRange();if(b&&b.item)return h.selection.createRange().item(0)}return null},this.getParentElement=function(){if("control"==this.getType()){var a=this.getSelectedElement();if(a)return a.parentNode}else{if(!h.getSelection){var b=h.selection.createRange();return b.collapse(!0),b.parentElement()}var c=h.getSelection();if(c){for(var d=c.anchorNode;d&&1!=d.nodeType;)d=d.parentNode;return d}}return null},this.hasAncestorElement=function(a){return null!=this.getAncestorElement.apply(this,arguments)},this.getAncestorElement=function(a){var b=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)},this.isTag=function(a,b){if(a&&a.tagName)for(var c=a.tagName.toLowerCase(),d=0;d<b.length;d++){var e=String(b[d]).toLowerCase();if(c==e)return e}return""},this.getParentOfType=function(a,b){for(;a;){if(this.isTag(a,b).length)return a;a=a.parentNode}return null},this.collapse=function(a){if(h.getSelection){var b=g.getSelection();b.removeAllRanges?a?b.collapseToStart():b.collapseToEnd():b.collapse(a)}else{var c=h.selection.createRange();c.collapse(a),c.select()}},this.remove=function(){var a=h.selection;return h.getSelection?(a=g.getSelection(),a.deleteFromDocument(),a):("none"!=a.type.toLowerCase()&&a.clear(),a)},this.selectElementChildren=function(a,c){var e;if(a=b.byId(a),h.getSelection){var f=g.getSelection();d("opera")?(e=f.rangeCount?f.getRangeAt(0):h.createRange(),e.setStart(a,0),e.setEnd(a,3==a.nodeType?a.length:a.childNodes.length),f.addRange(e)):f.selectAllChildren(a)}else if(e=a.ownerDocument.body.createTextRange(),e.moveToElementText(a),!c)try{e.select()}catch(a){}},this.selectElement=function(a,c){var f;if(a=b.byId(a),h.getSelection){var g=h.getSelection();f=h.createRange(),g.removeAllRanges&&(d("opera")&&g.getRangeAt(0)&&(f=g.getRangeAt(0)),f.selectNode(a),g.removeAllRanges(),g.addRange(f))}else try{var i=a.tagName?a.tagName.toLowerCase():"";f="img"===i||"table"===i?e.body(h).createControlRange():e.body(h).createRange(),f.addElement(a),c||f.select()}catch(b){this.selectElementChildren(a,c)}},this.inSelection=function(a){if(a){var b,c;if(h.getSelection){var d=g.getSelection();if(d&&d.rangeCount>0&&(c=d.getRangeAt(0)),c&&c.compareBoundaryPoints&&h.createRange)try{if(b=h.createRange(),b.setStart(a,0),1===c.compareBoundaryPoints(c.START_TO_END,b))return!0}catch(a){}}else{c=h.selection.createRange();try{b=a.ownerDocument.body.createTextRange(),b.moveToElementText(a)}catch(a){}if(c&&b&&1===c.compareEndPoints("EndToStart",b))return!0}}return!1},this.getBookmark=function(){var a,b,c,d=h.selection,e=f.curNode;if(h.getSelection){if(d=g.getSelection())if(d.isCollapsed){if((c=e?e.tagName:"")&&("textarea"==(c=c.toLowerCase())||"input"==c&&(!e.type||"text"==e.type.toLowerCase())))return d={start:e.selectionStart,end:e.selectionEnd,node:e,pRange:!0},{isCollapsed:d.end<=d.start,mark:d};a={isCollapsed:!0},d.rangeCount&&(a.mark=d.getRangeAt(0).cloneRange())}else b=d.getRangeAt(0),a={isCollapsed:!1,mark:b.cloneRange()}}else if(d){if(c=e?e.tagName:"",c=c.toLowerCase(),e&&c&&("button"==c||"textarea"==c||"input"==c))return d.type&&"none"==d.type.toLowerCase()?{isCollapsed:!0,mark:null}:(b=d.createRange(),{isCollapsed:!b.text||!b.text.length,mark:{range:b,pRange:!0}});a={};try{b=d.createRange(),a.isCollapsed=!("Text"==d.type?b.htmlText.length:b.length)}catch(b){return a.isCollapsed=!0,a}if("CONTROL"==d.type.toUpperCase())if(b.length){a.mark=[];for(var i=0,j=b.length;i<j;)a.mark.push(b.item(i++))}else a.isCollapsed=!0,a.mark=null;else a.mark=b.getBookmark()}return a},this.moveToBookmark=function(b){var d=b.mark;if(d)if(h.getSelection){var e=g.getSelection();if(e&&e.removeAllRanges)if(d.pRange){var f=d.node;f.selectionStart=d.start,f.selectionEnd=d.end}else e.removeAllRanges(),e.addRange(d)}else if(h.selection&&d){var i;d.pRange?i=d.range:c.isArray(d)?(i=h.body.createControlRange(),a.forEach(d,function(a){i.addElement(a)})):(i=h.body.createTextRange(),i.moveToBookmark(d)),i.select()}},this.isCollapsed=function(){return this.getBookmark().isCollapsed}},h=new g(window);return h.SelectionManager=g,h})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,b,c,d,e){var f={};return a.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(a){f[a]=d[a]}),c.mixin(f,{defaultDuration:b.defaultDuration||200}),c.mixin(e,f),e})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(a,b,c,d,e){var f={};return f.getViewport=function(){return c.getBox()},f.placeOnScreen=d.at,f.placeOnScreenAroundElement=function(a,c,e,f){var g;if(b.isArray(e))g=e;else{g=[];for(var h in e)g.push({aroundCorner:h,corner:e[h]})}return d.around(a,c,g,!0,f)},f.placeOnScreenAroundNode=f.placeOnScreenAroundElement,f.placeOnScreenAroundRectangle=f.placeOnScreenAroundElement,f.getPopupAroundAlignment=function(b,c){var d={};return a.forEach(b,function(a){var b=c;switch(a){case"after":d[c?"BR":"BL"]=c?"BL":"BR";break;case"before":d[c?"BL":"BR"]=c?"BR":"BL";break;case"below-alt":b=!b;case"below":d[b?"BL":"BR"]=b?"TL":"TR",d[b?"BR":"BL"]=b?"TR":"TL";break;case"above-alt":b=!b;case"above":default:d[b?"TL":"TR"]=b?"BL":"BR",d[b?"TR":"TL"]=b?"BR":"BL"}}),d},b.mixin(e,f),e})},"dijit/place":function(){define(["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(a,b,c,d,e,f,g){function h(d,g,h,i){var j=f.getEffectiveBox(d.ownerDocument);d.parentNode&&"body"==String(d.parentNode.tagName).toLowerCase()||e.body(d.ownerDocument).appendChild(d);var k=null;a.some(g,function(a){var c=a.corner,e=a.pos,f=0,g={w:{L:j.l+j.w-e.x,R:e.x-j.l,M:j.w}[c.charAt(1)],h:{T:j.t+j.h-e.y,B:e.y-j.t,M:j.h}[c.charAt(0)]},l=d.style;if(l.left=l.right="auto",h){var m=h(d,a.aroundCorner,c,g,i);f=void 0===m?0:m}var n=d.style,o=n.display,p=n.visibility;"none"==n.display&&(n.visibility="hidden",n.display="");var q=b.position(d);n.display=o,n.visibility=p;var r={L:e.x,R:e.x-q.w,M:Math.max(j.l,Math.min(j.l+j.w,e.x+(q.w>>1))-q.w)}[c.charAt(1)],s={T:e.y,B:e.y-q.h,M:Math.max(j.t,Math.min(j.t+j.h,e.y+(q.h>>1))-q.h)}[c.charAt(0)],t=Math.max(j.l,r),u=Math.max(j.t,s),v=Math.min(j.l+j.w,r+q.w),w=Math.min(j.t+j.h,s+q.h),x=v-t,y=w-u;return f+=q.w-x+(q.h-y),(null==k||f<k.overflow)&&(k={corner:c,aroundCorner:a.aroundCorner,x:t,y:u,w:x,h:y,overflow:f,spaceAvailable:g}),!f}),k.overflow&&h&&h(d,k.aroundCorner,k.corner,k.spaceAvailable,i);var l=k.y,m=k.x,n=e.body(d.ownerDocument);/relative|absolute/.test(c.get(n,"position"))&&(l-=c.get(n,"marginTop"),m-=c.get(n,"marginLeft"));var o=d.style;return o.top=l+"px",o.left=m+"px",o.right="auto",k}var i={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},j={at:function(b,c,d,e,f){return h(b,a.map(d,function(a){var b={corner:a,aroundCorner:i[a],pos:{x:c.x,y:c.y}};return e&&(b.pos.x+="L"==a.charAt(1)?e.x:-e.x,b.pos.y+="T"==a.charAt(0)?e.y:-e.y),b}),f)},around:function(e,f,g,i,j){function k(a,b){A.push({aroundCorner:a,corner:b,pos:{x:{L:w,R:w+y,M:w+(y>>1)}[a.charAt(1)],y:{T:x,B:x+z,M:x+(z>>1)}[a.charAt(0)]}})}var l;if("string"==typeof f||"offsetWidth"in f||"ownerSVGElement"in f){if(l=b.position(f,!0),/^(above|below)/.test(g[0])){var m=b.getBorderExtents(f),n=f.firstChild?b.getBorderExtents(f.firstChild):{t:0,l:0,b:0,r:0},o=b.getBorderExtents(e),p=e.firstChild?b.getBorderExtents(e.firstChild):{t:0,l:0,b:0,r:0};l.y+=Math.min(m.t+n.t,o.t+p.t),l.h-=Math.min(m.t+n.t,o.t+p.t)+Math.min(m.b+n.b,o.b+p.b)}}else l=f;if(f.parentNode)for(var q="absolute"==c.getComputedStyle(f).position,r=f.parentNode;r&&1==r.nodeType&&"BODY"!=r.nodeName;){var s=b.position(r,!0),t=c.getComputedStyle(r);if(/relative|absolute/.test(t.position)&&(q=!1),!q&&/hidden|auto|scroll/.test(t.overflow)){var u=Math.min(l.y+l.h,s.y+s.h),v=Math.min(l.x+l.w,s.x+s.w);l.x=Math.max(l.x,s.x),l.y=Math.max(l.y,s.y),l.h=u-l.y,l.w=v-l.x}"absolute"==t.position&&(q=!0),r=r.parentNode}var w=l.x,x=l.y,y="w"in l?l.w:l.w=l.width,z="h"in l?l.h:(d.deprecated("place.around: dijit/place.__Rectangle: { x:"+w+", y:"+x+", height:"+l.height+", width:"+y+" } has been deprecated.  Please use { x:"+w+", y:"+x+", h:"+l.height+", w:"+y+" }","","2.0"),l.h=l.height),A=[];a.forEach(g,function(a){var b=i;switch(a){case"above-centered":k("TM","BM");break;case"below-centered":k("BM","TM");break;case"after-centered":b=!b;case"before-centered":k(b?"ML":"MR",b?"MR":"ML");break;case"after":b=!b;case"before":k(b?"TL":"TR",b?"TR":"TL"),k(b?"BL":"BR",b?"BR":"BL");break;case"below-alt":b=!b;case"below":k(b?"BL":"BR",b?"TL":"TR"),k(b?"BR":"BL",b?"TR":"TL");break;case"above-alt":b=!b;case"above":k(b?"TL":"TR",b?"BL":"BR"),k(b?"TR":"TL",b?"BR":"BL");break;default:k(a.aroundCorner,a.corner)}});var B=h(e,A,j,{w:y,h:z});return B.aroundNodePos=l,B}};return g.place=j})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,b,c,d,e){var f,g=new a;return c(function(){var a=e.getBox();if(g._rlh=b(window,"resize",function(){var b=e.getBox();a.h==b.h&&a.w==b.w||(a=b,g.emit("resize"))}),8==d("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,g.emit("resize"))},500)}d("ios")&&(b(document,"focusin",function(a){f=a.target}),b(document,"focusout",function(a){f=null}))}),g.getEffectiveBox=function(a){var b=e.getBox(a),c=f&&f.tagName&&f.tagName.toLowerCase();if(d("ios")&&f&&!f.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(f.type))){b.h*=0==orientation||180==orientation?.66:.4;var g=f.getBoundingClientRect();b.h=Math.max(b.h,g.top+g.height)}return b},g})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(a,b,c){var d=c._createWrapper;c._createWrapper=function(c){return c.declaredClass||(c={_popupWrapper:c.parentNode&&a.contains(c.parentNode,"dijitPopup")?c.parentNode:null,domNode:c,destroy:function(){},ownerDocument:c.ownerDocument,ownerDocumentBody:b.body(c.ownerDocument)}),d.call(this,c)};var e=c.open;return c.open=function(a){if(a.orient&&"string"!=typeof a.orient&&!("length"in a.orient)){var b=[];for(var c in a.orient)b.push({aroundCorner:c,corner:a.orient[c]});a.orient=b}return e.call(this,a)},c})},"dijit/popup":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){this._popupWrapper&&(f.destroy(this._popupWrapper),delete this._popupWrapper)}var r=c(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=g.position(this._firstAroundNode,!0),c=b.x-a.x,d=b.y-a.y;if(c||d){this._firstAroundPosition=b;for(var e=0;e<this._stack.length;e++){var f=this._stack[e].wrapper.style;f.top=parseFloat(f.top)+d+"px","auto"==f.right?f.left=parseFloat(f.left)+c+"px":f.right=parseFloat(f.right)-c+"px"}}this._aroundMoveListener=setTimeout(k.hitch(this,"_repositionAll"),c||d?10:50)}},_createWrapper:function(a){var c=a._popupWrapper,d=a.domNode;if(!c){c=f.create("div",{class:"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),c.appendChild(d);var e=d.style;e.display="",e.visibility="",e.position="",e.top="0px",a._popupWrapper=c,b.after(a,"destroy",q,!0),"ontouchend"in document&&l(c,"touchend",function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()})}return c},moveOffScreen:function(a){var b=this._createWrapper(a),c=g.isBodyLtr(a.ownerDocument),d={visibility:"hidden",top:"-9999px",display:""};return d[c?"left":"right"]="-9999px",d[c?"right":"left"]="auto",h.set(b,d),b},hide:function(a){var b=this._createWrapper(a);h.set(b,{display:"none",height:"auto",overflow:"visible",border:""});var c=a.domNode;"_originalStyle"in c&&(c.style.cssText=c._originalStyle)},getTopPopup:function(){for(var a=this._stack,b=a.length-1;b>0&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var b=this._stack,c=a.popup,f=c.domNode,p=a.orient||["below","below-alt","above","above-alt"],q=a.parent?a.parent.isLeftToRight():g.isBodyLtr(c.ownerDocument),r=a.around,s=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;b.length&&(!a.parent||!d.isDescendant(a.parent.domNode,b[b.length-1].widget.domNode));)this.close(b[b.length-1].widget);var t=this.moveOffScreen(c);c.startup&&!c._started&&c.startup();var u,v=g.position(f);if("maxHeight"in a&&-1!=a.maxHeight)u=a.maxHeight||1/0;else{var w=o.getEffectiveBox(this.ownerDocument),x=r?g.position(r,!1):{y:a.y-(a.padding||0),h:2*(a.padding||0)};u=Math.floor(Math.max(x.y,w.h-(x.y+x.h)))}if(v.h>u){var y=h.getComputedStyle(f),z=y.borderLeftWidth+" "+y.borderLeftStyle+" "+y.borderLeftColor;h.set(t,{overflowY:"scroll",height:u+"px",border:z}),f._originalStyle=f.style.cssText,f.style.border="none"}e.set(t,{id:s,style:{zIndex:this._beginZIndex+b.length},class:"dijitPopup "+(c.baseClass||c.class||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""}),0==b.length&&r&&(this._firstAroundNode=r,this._firstAroundPosition=g.position(r,!0),this._aroundMoveListener=setTimeout(k.hitch(this,"_repositionAll"),50)),i("config-bgIframe")&&!c.bgIframe&&(c.bgIframe=new n(t));var A=c.orient?k.hitch(c,"orient"):null,B=r?m.around(t,r,p,q,A):m.at(t,a,"R"==p?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding,A)
;t.style.visibility="visible",f.style.visibility="visible";var C=[];return C.push(l(t,"keydown",k.hitch(this,function(b){if(b.keyCode==j.ESCAPE&&a.onCancel)b.stopPropagation(),b.preventDefault(),a.onCancel();else if(b.keyCode==j.TAB){b.stopPropagation(),b.preventDefault();var c=this.getTopPopup();c&&c.onCancel&&c.onCancel()}}))),c.onCancel&&a.onCancel&&C.push(c.on("cancel",a.onCancel)),C.push(c.on(c.onExecute?"execute":"change",k.hitch(this,function(){var a=this.getTopPopup();a&&a.onExecute&&a.onExecute()}))),b.push({widget:c,wrapper:t,parent:a.parent,onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:C}),c.onOpen&&c.onOpen(B),B},close:function(b){for(var c=this._stack;b&&a.some(c,function(a){return a.widget==b})||!b&&c.length;){var d=c.pop(),e=d.widget,f=d.onClose;e.bgIframe&&(e.bgIframe.destroy(),delete e.bgIframe),e.onClose&&e.onClose();for(var g;g=d.handlers.pop();)g.remove();e&&e.domNode&&this.hide(e),f&&f()}0==c.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return p.popup=new r})},"dijit/BackgroundIframe":function(){define(["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(a,b,c,d,e,f,g,h){h.add("config-bgIframe",h("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||h("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var i=new function(){var b=[];this.pop=function(){var f;if(b.length)f=b.pop(),f.style.display="";else{if(h("ie")<9){var g=c.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""',i="<iframe src='"+g+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";f=document.createElement(i)}else f=d.create("iframe"),f.src='javascript:""',f.className="dijitBackgroundIframe",f.setAttribute("role","presentation"),e.set(f,"opacity",.1);f.tabIndex=-1}return f},this.push=function(a){a.style.display="none",b.push(a)}};return b.BackgroundIframe=function(a){if(!a.id)throw new Error("no id");if(h("config-bgIframe")){var b=this.iframe=i.pop();a.appendChild(b),h("ie")<7||h("quirks")?(this.resize(a),this._conn=g(a,"resize",f.hitch(this,"resize",a))):e.set(b,{width:"100%",height:"100%"})}},f.extend(b.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),i.push(this.iframe),delete this.iframe)}}),b.BackgroundIframe})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(a,b){b.scrollIntoView=function(b,c){a.scrollIntoView(b,c)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(a,b,c,d,e){var f=e.doc.documentElement,g=d("ie"),h=d("opera"),i=Math.floor,j=d("ff"),k=a.boxModel.replace(/-/,""),l={dj_quirks:d("quirks"),dj_opera:h,dj_khtml:d("khtml"),dj_webkit:d("webkit"),dj_safari:d("safari"),dj_chrome:d("chrome"),dj_gecko:d("mozilla"),dj_ios:d("ios"),dj_android:d("android")};g&&(l.dj_ie=!0,l["dj_ie"+i(g)]=!0,l.dj_iequirks=d("quirks")),j&&(l["dj_ff"+i(j)]=!0),l["dj_"+k]=!0;var m="";for(var n in l)l[n]&&(m+=n+" ");return f.className=b.trim(f.className+" "+m),c(function(){if(!a.isBodyLtr()){var c="dj_rtl dijitRtl "+m.replace(/ /g,"-rtl ");f.className=b.trim(f.className+" "+c+"dj_rtl dijitRtl "+m.replace(/ /g,"-rtl "))}}),d})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/typematic":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(a,b,c,d,e,f){var g=f.typematic={_fireEventAndReload:function(){this._timer=null,this._callback(++this._count,this._node,this._evt),this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay),this._timer=setTimeout(c.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,d,e,f,g,h,i){if(f!=this._obj){this.stop(),this._initialDelay=h||500,this._subsequentDelay=g||.9,this._minDelay=i||10,this._obj=f,this._node=d,this._currentTimeout=-1,this._count=-1,this._callback=c.hitch(b,e),this._evt={faux:!0};for(var j in a)if("layerX"!=j&&"layerY"!=j){var k=a[j];"function"!=typeof k&&void 0!==k&&(this._evt[j]=k)}this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(e,f,h,i,j,k,l){var m="keyCode"in f?"keydown":"charCode"in f?"keypress":b._keypress,n="keyCode"in f?"keyCode":"charCode"in f?"charCode":"charOrCode",o=[d(e,m,c.hitch(this,function(a){a[n]!=f[n]||void 0!==f.ctrlKey&&f.ctrlKey!=a.ctrlKey||void 0!==f.altKey&&f.altKey!=a.altKey||void 0!==f.metaKey&&f.metaKey!=(a.metaKey||!1)||void 0!==f.shiftKey&&f.shiftKey!=a.shiftKey?g._obj==f&&g.stop():(a.stopPropagation(),a.preventDefault(),g.trigger(a,h,e,i,f,j,k,l))})),d(e,"keyup",c.hitch(this,function(){g._obj==f&&g.stop()}))];return{remove:function(){a.forEach(o,function(a){a.remove()})}}},addMouseListener:function(b,f,h,i,j,k){var l=[d(b,"mousedown",c.hitch(this,function(a){a.preventDefault(),g.trigger(a,f,b,h,b,i,j,k)})),d(b,"mouseup",c.hitch(this,function(a){this._obj&&a.preventDefault(),g.stop()})),d(b,"mouseout",c.hitch(this,function(a){this._obj&&a.preventDefault(),g.stop()})),d(b,"dblclick",c.hitch(this,function(a){a.preventDefault(),e("ie")<9&&(g.trigger(a,f,b,h,b,i,j,k),setTimeout(c.hitch(this,g.stop),50))}))];return{remove:function(){a.forEach(l,function(a){a.remove()})}}},addListener:function(b,c,d,e,f,g,h,i){var j=[this.addKeyListener(c,d,e,f,g,h,i),this.addMouseListener(b,e,f,g,h,i)];return{remove:function(){a.forEach(j,function(a){a.remove()})}}}};return g})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(a,b,c){var d={hasWaiRole:function(a,b){var c=this.getWaiRole(a);return b?c.indexOf(b)>-1:c.length>0},getWaiRole:function(c){return b.trim((a.get(c,"role")||"").replace("wairole:",""))},setWaiRole:function(b,c){a.set(b,"role",c)},removeWaiRole:function(c,d){var e=a.get(c,"role");if(e)if(d){var f=b.trim((" "+e+" ").replace(" "+d+" "," "));a.set(c,"role",f)}else c.removeAttribute("role")},hasWaiState:function(a,b){return a.hasAttribute?a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)},getWaiState:function(a,b){return a.getAttribute("aria-"+b)||""},setWaiState:function(a,b,c){a.setAttribute("aria-"+b,c)},removeWaiState:function(a,b){a.removeAttribute("aria-"+b)}};return b.mixin(c,d),c})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,b,c,d){return c(function(){b("highcontrast")&&a.add(d.body(),"dijit_a11y")}),b})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(a,b){b.getDocumentWindow=function(b){return a.get(b)}})},"dijit/_Widget":function(){define(["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){}function o(a){return function(b,d,e,f){return b&&"string"==typeof d&&b[d]==n?b.on(d.substring(2).toLowerCase(),g.hitch(e,f)):a.apply(c,arguments)}}a.around(c,"connect",o),f.connect&&a.around(f,"connect",o);var p=d("dijit._Widget",[k,l,m],{onClick:n,onDblClick:n,onKeyDown:n,onKeyPress:n,onKeyUp:n,onMouseDown:n,onMouseMove:n,onMouseOut:n,onMouseOver:n,onMouseLeave:n,onMouseEnter:n,onMouseUp:n,constructor:function(a){this._toConnect={};for(var b in a)this[b]===n&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===n?c.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a,this._set("focused",a)},setAttribute:function(a,b){f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(a,b)},attr:function(a,b){return arguments.length>=2||"object"==typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){return f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?h("[widgetId]",this.containerNode).map(j.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return e("dijit-legacy-requires")&&i(0,function(){var a=["dijit/_base"];require(a)}),p})},"dijit/_WidgetBase":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(a){var b={};for(var c in a)b[c.toLowerCase()]=!0;return b}function y(a){return function(b){h[b?"set":"remove"](this.domNode,a,b),this._set(a,b)}}function z(a,b){return a===b||a!==a&&b!==b}m.add("dijit-legacy-requires",!n.isAsync),m.add("dojo-bidi",!1),m("dijit-legacy-requires")&&q(0,function(){a(["dijit/_base/manager"])});var A={},B=f("dijit._WidgetBase",[r,u],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:y("lang"),dir:"",_setDirAttr:y("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:d.blankGif||a.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],d=a._onMap={};for(var e in b.attributeMap)c.push(e);for(e in b)/^on/.test(e)&&(d[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,e.length-9),b.attributeMap&&e in b.attributeMap||c.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect(),this.srcNodeRef=g.byId(b),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),a&&(this.params=a,o.mixin(this,a)),this.postMixInProperties(),this.id||(this.id=w.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=t.body(this.ownerDocument),w.add(this),this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&d.parentNode&&this.domNode!==d&&(d.parentNode.replaceChild(this.domNode,d),c=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),c&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var a={};for(var c in this.params||{})a[c]=this._get(c);b.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(c in a)this.set(c,a[c])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(b.map(a,function(a){return a+"Rtl"}))),i.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,b.forEach(this.getChildren(),function(a){a._started||a._destroyed||!o.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0,this.destroyDescendants(a),this.destroy(a)},destroy:function(a){function c(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0,this.uninitialize(),b.forEach(this._connects,o.hitch(this,"disconnect")),b.forEach(this._supportingWidgets,c),this.domNode&&b.forEach(w.findWidgets(this.domNode,this.containerNode),c),this.destroyRendering(a),w.remove(this.id),this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe),this.domNode&&(a?h.remove(this.domNode,"widgetId"):j.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(a||j.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){b.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;o.isObject(a)?l.set(b,a):b.style.cssText?b.style.cssText+="; "+a:b.style.cssText=a,this._set("style",a)},_attrToDom:function(a,c,d){d=arguments.length>=3?d:this.attributeMap[a],b.forEach(o.isArray(d)?d:[d],function(b){var d=this[b.node||b||"domNode"];switch(b.type||"attribute"){case"attribute":o.isFunction(c)&&(c=o.hitch(this,c));var e=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?h.set(d,e,c):d.set(e,c);break;case"innerText":d.innerHTML="",d.appendChild(this.ownerDocument.createTextNode(c));break;case"innerHTML":d.innerHTML=c;break;case"class":i.replace(d,c,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"==typeof a){for(var c in a)this.set(c,a[c]);return this}var d=this._getAttrNames(a),e=this[d.s];if(o.isFunction(e))var f=e.apply(this,Array.prototype.slice.call(arguments,1));else{var g=this.focusNode&&!o.isFunction(this.focusNode)?"focusNode":"domNode",h=this[g]&&this[g].tagName,i=h&&(A[h]||(A[h]=x(this[g]))),j=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:i&&d.l in i&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?g:null;null!=j&&this._attrToDom(a,b,j),this._set(a,b)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b,this._created&&!z(c,b)&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{},void 0===b.bubbles&&(b.bubbles=!0),void 0===b.cancelable&&(b.cancelable=!0),b.detail||(b.detail={}),b.detail.widget=this;var d,e=this["on"+a];return e&&(d=e.apply(this,c||[b])),this._started&&!this._beingDestroyed&&p.emit(this.domNode,a.toLowerCase(),b),d},on:function(a,b){var d=this._onMap(a);return d?c.after(this,d,b,!0):this.own(p(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){c=b._onMap={};for(var d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?w.findWidgets(this.containerNode):[]},getParent:function(){return w.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(e.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(s.subscribe(a,o.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=l.get(this.domNode,"display")},placeAt:function(a,b){var c=!a.tagName&&w.byId(a);if(!c||!c.addChild||b&&"number"!=typeof b){var d=c&&"domNode"in c?c.containerNode&&!/after|before|replace/.test(b||"")?c.containerNode:c.domNode:g.byId(a,this.ownerDocument);j.place(this.domNode,d,b),!this._started&&(this.getParent()||{})._started&&this.startup()}else c.addChild(this,b);return this},defer:function(a,b){var c=setTimeout(o.hitch(this,function(){c&&(c=null,this._destroyed||o.hitch(this,a)())}),b||0);return{remove:function(){return c&&(clearTimeout(c),c=null),null}}}});return m("dojo-bidi")&&B.extend(v),B})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(a,b,c){return c("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var c=["destroyRecursive","destroy","remove"];return a.forEach(arguments,function(d){function e(){g.remove(),a.forEach(h,function(a){a.remove()})}var f,g=b.before(this,"destroy",function(a){d[f](a)}),h=[];d.then?(f="cancel",d.then(e,e)):a.forEach(c,function(a){"function"==typeof d[a]&&(f||(f=a),h.push(b.after(d,a,e,!0)))})},this),arguments}})})},"dijit/_OnDijitClickMixin":function(){define(["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(a,b,c,d,e,f){var g=d("dijit._OnDijitClickMixin",null,{connect:function(a,b,c){return this.inherited(arguments,[a,"ondijitclick"==b?f:b,c])}});return g.a11yclick=f,g})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(a,b,c,d){function e(b){if((b.keyCode===a.ENTER||b.keyCode===a.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(var c=b.target;c;c=c.parentNode)if(c.dojoClick)return!0}var f;c(document,"keydown",function(a){e(a)?(f=a.target,a.preventDefault()):f=null}),c(document,"keyup",function(a){e(a)&&a.target==f&&(f=null,c.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var g=function(a,b){return a.dojoClick=!0,c(a,"click",b)};return g.click=g,g.press=function(e,f){var g=c(e,d.press,function(a){("mousedown"!=a.type||b.isLeft(a))&&f(a)}),h=c(e,"keydown",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||f(b)});return{remove:function(){g.remove(),h.remove()}}},g.release=function(e,f){var g=c(e,d.release,function(a){("mouseup"!=a.type||b.isLeft(a))&&f(a)}),h=c(e,"keyup",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||f(b)});return{remove:function(){g.remove(),h.remove()}}},g.move=d.move,g})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return d.extend(b,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),c("dijit._FocusMixin",null,{_focusManager:a})})},"dijit/_TemplatedMixin":function(){define(["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(a,b,c,d,e,f,g,h){var i=b("dijit._TemplatedMixin",h,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return g.substitute(a,this,function(a,e){if("!"==e.charAt(0)&&(a=d.getObject(e.substr(1),!1,c)),void 0===a)throw new Error(b+" template:"+e);return null==a?"":"!"==e.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=a(this.templatePath,{sanitize:!0}));var b,e=i.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(d.isString(e)){if(b=c.toDom(this._stringRepl(e),this.ownerDocument),1!=b.nodeType)throw new Error("Invalid template: "+e)}else b=e.cloneNode(!0);this.domNode=b}this.inherited(arguments),this._rendered||this._fillContent(this.srcNodeRef),this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});return i._templateCache={},i.getCachedTemplate=function(a,b,d){var e=i._templateCache,f=a,h=e[f];if(h){try{if(!h.ownerDocument||h.ownerDocument==(d||document))return h}catch(a){}c.destroy(h)}if(a=g.trim(a),b||a.match(/\$\{([^\}]+)\}/g))return e[f]=a;var j=c.toDom(a,d);if(1!=j.nodeType)throw new Error("Invalid template: "+a);return e[f]=j},f("ie")&&e(window,"unload",function(){var a=i._templateCache;for(var b in a){var d=a[b];"object"==typeof d&&c.destroy(d),delete a[b]}}),i})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(a){return a.cache})},"dijit/_AttachMixin":function(){define(["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(a,b,c,d,e,f,g,h,i){var j,k=e.delegate(h,{mouseenter:f.enter,mouseleave:f.leave,keypress:c._keypress}),l=d("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){this.inherited(arguments),this._attachTemplateNodes(this.domNode),this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)return;for(;!b.nextSibling;)if((b=b.parentNode)==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var d=!0,f=this.attachScope||this,g=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(g)for(var h,i=g.split(/\s*,\s*/);h=i.shift();)e.isArray(f[h])?f[h].push(a):f[h]=a,d="containerNode"!=h,this._attachPoints.push(h);var j=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event");if(j)for(var k,l=j.split(/\s*,\s*/),m=e.trim;k=l.shift();)if(k){var n=null;if(-1!=k.indexOf(":")){var o=k.split(":");k=m(o[0]),n=m(o[1])}else k=m(k);n||(n=k),this._attachEvents.push(c(a,k,e.hitch(f,n)))}return d},_attach:function(b,c,d){return c=c.replace(/^on/,"").toLowerCase(),c="dijitclick"==c?j||(j=a("./a11yclick")):k[c]||c,g(b,c,d)},_detachTemplateNodes:function(){var a=this.attachScope||this;b.forEach(this._attachPoints,function(b){delete a[b]}),this._attachPoints=[],b.forEach(this._attachEvents,function(a){a.remove()}),this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes(),this.inherited(arguments)}});return e.extend(i,{dojoAttachEvent:"",dojoAttachPoint:""}),l})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(a,b,c,d){return b("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,b){var d=this.containerNode;if(b>0){for(d=d.firstChild;b>0&&null!==d;)1==d.nodeType&&b--,d=d.nextSibling;d?b="before":(d=this.containerNode,b="last")}c.place(a.domNode,d,b),this._started&&!a._started&&a.startup()},removeChild:function(a){if("number"==typeof a&&(a=this.getChildren()[a]),a){var b=a.domNode;b&&b.parentNode&&b.parentNode.removeChild(b)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(b,c){d.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var e=this.getChildren();return e[a.indexOf(e,b)+c]},getIndexOfChild:function(b){return a.indexOf(this.getChildren(),b)}})})},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(a,b,c,d,e,f,g,h,i){return f("dijit.layout._LayoutWidget",[b,c,d],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments),g.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(e.on("resize",a.hitch(this,"resize"))))}},resize:function(b,c){var d=this.domNode;b&&h.setMarginBox(d,b);var e=c||{};a.mixin(e,b||{}),"h"in e&&"w"in e||(e=a.mixin(h.getMarginBox(d),e));var f=i.getComputedStyle(d),g=h.getMarginExtents(d,f),j=h.getBorderExtents(d,f),k=this._borderBox={w:e.w-(g.w+j.w),h:e.h-(g.h+j.h)},l=h.getPadExtents(d,f);this._contentBox={l:i.toPixelValue(d,f.paddingLeft),t:i.toPixelValue(d,f.paddingTop),w:k.w-l.w,h:k.h-l.h},this.layout()},layout:function(){},_setupChild:function(a){var b=this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:"");g.add(a.domNode,b)},addChild:function(a,b){this.inherited(arguments),this._started&&this._setupChild(a)},removeChild:function(a){var b=this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:"");g.remove(a.domNode,b),this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(a,b){return a("dijit._Contained",null,{_getSibling:function(a){var c=this.domNode;do{c=c[a+"Sibling"]}while(c&&1!=c.nodeType);return c&&b.byNode(c)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var a=this.getParent();return a&&a.getIndexOfChild?a.getIndexOfChild(this):-1}})})},"dijit/form/_FormWidget":function(){define(["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(a,b,c,d,e,f,g,h){return b("dijit-legacy-requires")&&d(0,function(){var a=["dijit/form/_FormValueWidget"];require(a)}),a("dijit.form._FormWidget",[e,g,f,h],{setDisabled:function(a){c.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0"),this.set("disabled",a)},setValue:function(a){c.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0"),this.set("value",a)},getValue:function(){return c.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!b("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)}})})},"dijit/_CssStateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments),a.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(a){this.watch(a,f.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){function b(b){c=c.concat(a.map(c,function(a){return a+b}),"dijit"+b)}var c=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d),this.state&&b(this.state),this.selected&&b("Selected"),this._opened&&b("Opened"),this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover"),this.focused&&b("Focused");var e=this.stateNode||this.domNode,f={};a.forEach(e.className.split(" "),function(a){f[a]=!0}),"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete f[a]}),a.forEach(c,function(a){f[a]=!0});var g=[];for(var h in f)g.push(h);e.className=g.join(" "),this._stateClasses=c},_subnodeCssMouseEvent:function(a,b,c){function e(c){d.toggle(a,b+"Hover",c)}function f(c){d.toggle(a,b+"Active",c)}function g(c){d.toggle(a,b+"Focused",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case"mouseover":case"MSPointerOver":case"pointerover":e(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":e(!1),f(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":f(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":f(!1);break;case"focus":case"focusin":g(!0);break;case"blur":case"focusout":g(!1)}},_trackMouseState:function(a,b){a._cssState=b}});return h(function(){function a(a,b,d){if(!d||!c.isDescendant(d,b))for(var e=b;e&&e!=d;e=e.parentNode)if(e._cssState){var f=l.getEnclosingWidget(e);f&&(e==f.domNode?f._cssMouseEvent(a):f._subnodeCssMouseEvent(e,e._cssState,a))}}var b,d=j.body();g(d,i.over,function(b){a(b,b.target,b.relatedTarget)}),g(d,i.out,function(b){a(b,b.target,b.relatedTarget)}),g(d,k.press,function(c){b=c.target,a(c,b)}),g(d,k.release,function(c){a(c,b),b=null}),g(d,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=l.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})}),m})},"dijit/form/_FormWidgetMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(a,b,c,d,e,f,g,h,i,j){return b("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){if(this._set("disabled",b),c.set(this.focusNode,"disabled",b),this.valueNode&&c.set(this.valueNode,"disabled",b),this.focusNode.setAttribute("aria-disabled",b?"true":"false"),b){this._set("hovering",!1),this._set("active",!1);var d="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";a.forEach(e.isArray(d)?d:[d],function(a){var b=this[a];h("webkit")||j.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)}else""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(g(this.focusNode,"focus",function(){d.remove(),b.remove()}))[0],c=h("pointer-events")?"pointerup":h("MSPointer")?"MSPointerUp":h("touch-events")?"touchend, mouseup":"mouseup",d=this.own(g(this.ownerDocumentBody,c,e.hitch(this,function(a){d.remove(),b.remove(),this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){i.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=d.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a),this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported),
(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(a)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,b,c,d){return a("dijit.form._FormValueWidget",[c,d],{_layoutHackIE7:function(){if(7==b("ie"))for(var a=this.domNode,c=a.parentNode,d=a.firstChild||a,e=d.style.filter,f=this;c&&0==c.clientHeight;)!function(){var a=f.connect(c,"onscroll",function(){f.disconnect(a),d.style.filter=(new Date).getMilliseconds(),f.defer(function(){d.style.filter=e})})}(),c=c.parentNode}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","./_FormWidgetMixin"],function(a,b,c,d,e,f){return a("dijit.form._FormValueMixin",f,{readOnly:!1,_setReadOnlyAttr:function(a){b.set(this.focusNode,"readOnly",a),this._set("readOnly",a)},postCreate:function(){this.inherited(arguments),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})})},"dijit/Calendar":function(){define(["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=d("dijit.Calendar",[m,n,o],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){h.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",a)},_createMonthWidget:function(){return new r._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:j.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments),this.own(k(this.domNode,"keydown",j.hitch(this,"_onKeyDown")),k(this.dateRowsNode,"mouseover",j.hitch(this,"_onDayMouseOver")),k(this.dateRowsNode,"mouseout",j.hitch(this,"_onDayMouseOut")),k(this.dateRowsNode,"mousedown",j.hitch(this,"_onDayMouseDown")),k(this.dateRowsNode,"mouseup",j.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1),b.setMonth(a);var c=this.dateModule.getDaysInMonth(b),d=this.currentFocus.getDate();b.setDate(Math.min(d,c)),this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){var b=f.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target;b&&(b.dijitDateValue&&!f.contains(b,"dijitCalendarDisabledDate")||b==this.previousYearLabelNode||b==this.nextYearLabelNode)&&(f.add(b,"dijitCalendarHoveredDate"),this._currentNode=b)},_onDayMouseOut:function(a){if(this._currentNode&&(!a.relatedTarget||a.relatedTarget.parentNode!=this._currentNode)){var b="dijitCalendarHoveredDate";f.contains(this._currentNode,"dijitCalendarActiveDate")&&(b+=" dijitCalendarActiveDate"),f.remove(this._currentNode,b),this._currentNode=null}},_onDayMouseDown:function(a){var b=a.target.parentNode;b&&b.dijitDateValue&&!f.contains(b,"dijitCalendarDisabledDate")&&(f.add(b,"dijitCalendarActiveDate"),this._currentNode=b)},_onDayMouseUp:function(a){var b=a.target.parentNode;b&&b.dijitDateValue&&f.remove(b,"dijitCalendarActiveDate")},handleKey:function(a){var b,c=-1,d=this.currentFocus;switch(a.keyCode){case i.RIGHT_ARROW:c=1;case i.LEFT_ARROW:b="day",this.isLeftToRight()||(c*=-1);break;case i.DOWN_ARROW:c=1;case i.UP_ARROW:b="week";break;case i.PAGE_DOWN:c=1;case i.PAGE_UP:b=a.ctrlKey||a.altKey?"year":"month";break;case i.END:d=this.dateModule.add(d,"month",1),b="day";case i.HOME:d=new this.dateClassObj(d),d.setDate(1);break;default:return!0}return b&&(d=this.dateModule.add(d,b,c)),this._setCurrentFocusAttr(d),!1},_onKeyDown:function(a){this.handleKey(a)||(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});return r._MonthDropDownButton=d("dijit.Calendar._MonthDropDownButton",q,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments),this.dropDown=new r._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b),this.containerNode.innerHTML=(6==l("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}}),r._MonthDropDown=d("dijit.Calendar._MonthDropDown",[n,p,o],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"<div data-dojo-attach-event='ondijitclick:_onClick'></div>",_setMonthsAttr:function(b){this.domNode.innerHTML="",a.forEach(b,function(a,b){g.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(e.get(a.target,"month"))},onChange:function(){}}),r})},"dijit/CalendarLite":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b("dijit.CalendarLite",[m,n],{templateString:o,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);return b.setHours(0,0,0,0),b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1)),b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=f.fromISOString(a)),a=this._patchDate(a),this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)?(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||void 0===b)&&this.onChange(this.get("value"))):(this._set("value",null),this._markSelectedDates([]))},_patchDate:function(a){return a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0)),a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1),b=this._patchDate(b);var d=b.getDay(),e=this.dateModule.getDaysInMonth(b),f=this.dateModule.getDaysInMonth(this.dateModule.add(b,"month",-1)),g=new this.dateClassObj,h=c.getFirstDayOfWeek(this.lang);if(h>d&&(h-=7),!this.summary){var i=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.gridNode.setAttribute("summary",i[b.getMonth()])}this._date2cell={},a.forEach(this.dateCells,function(a,c){var i,j=c+h,k=new this.dateClassObj(b),l="dijitCalendar",m=0;j<d?(i=f-d+j+1,m=-1,l+="Previous"):j>=d+e?(i=j-d-e+1,m=1,l+="Next"):(i=j-d+1,l+="Current"),m&&(k=this.dateModule.add(k,"month",m)),k.setDate(i),this.dateModule.compare(k,g,"date")||(l="dijitCalendarCurrentDate "+l),this.isDisabledDate(k,this.lang)?(l="dijitCalendarDisabledDate "+l,a.setAttribute("aria-disabled","true")):(l="dijitCalendarEnabledDate "+l,a.removeAttribute("aria-disabled"),a.setAttribute("aria-selected","false"));var n=this.getClassForDate(k,this.lang);n&&(l=n+" "+l),a.className=l+"Month dijitCalendarDateTemplate";var o=k.valueOf();this._date2cell[o]=a,a.dijitDateValue=o,this._setText(this.dateLabels[c],k.getDateLocalized?k.getDateLocalized(this.lang):k.getDate())},this)},_populateControls:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1),this.monthWidget.set("month",b);var c=b.getFullYear()-1,d=new this.dateClassObj;a.forEach(["previous","current","next"],function(a){d.setFullYear(c++),this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?i.getObject(a.datePackage,!1):d,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=a.datePackage?i.getObject(a.datePackage+".locale",!1):e},_createMonthWidget:function(){return p._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=c.getFirstDayOfWeek(this.lang);this.dayCellsHtml=l.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[d++%7]});var e=l.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[e,e,e,e,e,e].join(""),this.dateCells=[],this.dateLabels=[],this.inherited(arguments),g.setSelectable(this.domNode,!1);var f=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget(),this.set("currentFocus",f,!1)},postCreate:function(){this.inherited(arguments),this._connectControls()},_connectControls:function(){var a=i.hitch(this,function(a,b,c){return this[a].dojoClick=!0,j(this[a],"click",i.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a),this._set("currentFocus",a),this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));var e=this._getNodeByDate(a);e.setAttribute("tabIndex",this.tabIndex),(this.focused||b)&&e.focus(),d&&d!=e&&(k("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation(),a.preventDefault();for(var b=a.target;b&&!b.dijitDateValue;b=b.parentNode);b&&!h.contains(b,"dijitCalendarDisabledDate")&&this.set("value",b.dijitDateValue)},_getNodeByDate:function(a){return a=this._patchDate(a),a&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function c(a,b){h.toggle(b,"dijitCalendarSelectedDate",a),b.setAttribute("aria-selected",a?"true":"false")}a.forEach(this._selectedCells||[],i.partial(c,!1)),this._selectedCells=a.filter(a.map(b,this._getNodeByDate,this),function(a){return a}),a.forEach(this._selectedCells,i.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});return p._MonthWidget=b("dijit.CalendarLite._MonthWidget",m,{_setMonthAttr:function(b){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b),d=6==k("ie")?"":"<div class='dijitSpacer'>"+a.map(c,function(a){return"<div>"+a+"</div>"}).join("")+"</div>";this.domNode.innerHTML=d+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+c[b.getMonth()]+"</div>"}}),p})},"dijit/form/DropDownButton":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(a,b,c,d,e,f,g,h,i){return a("dijit.form.DropDownButton",[f,g,h],{baseClass:"dijitDropDownButton",templateString:i,_fillContent:function(){if(this.srcNodeRef){var a=c("*",this.srcNodeRef);this.inherited(arguments,[a[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var a=c("[widgetId]",this.dropDownContainer)[0];a&&(this.dropDown=d.byNode(a)),delete this.dropDownContainer}this.dropDown&&e.hide(this.dropDown),this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var c=this.dropDown,d=c.on("load",b.hitch(this,function(){d.remove(),a()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/Button":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick"],function(a,b,c,d,e,f,g,h,i,j){d("dijit-legacy-requires")&&g(0,function(){a(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});var k=b("dijit.form.Button"+(d("dojo-bidi")?"_NoBidi":""),[h,i],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:j,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params))){var b=f.trim(a.innerHTML);b&&(this.label=b)}},_setShowLabelAttr:function(a){this.containerNode&&c.toggle(this.containerNode,"dijitDisplayNone",!a),this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments),this.showLabel||"title"in this.params||(this.titleNode.title=f.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});return d("dojo-bidi")&&(k=b("dijit.form.Button",k,{_setLabelAttr:function(a){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}})),k})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(a,b,c,d){var e=a("dijit.form._ButtonMixin"+(c("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){return a.stopPropagation(),a.preventDefault(),this.disabled||this.valueNode.click(a),!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var b=a.defaultPrevented;if(!b&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var c=this.domNode;c.parentNode;c=c.parentNode){var e=d.byNode(c);if(e&&"function"==typeof e._onSubmit){e._onSubmit(a),a.preventDefault(),b=!0;break}}return!b},postCreate:function(){this.inherited(arguments),b.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a),(this.containerNode||this.focusNode).innerHTML=a}});return c("dojo-bidi")&&(e=a("dijit.form._ButtonMixin",e,{_setLabelAttr:function(){this.inherited(arguments);var a=this.containerNode||this.focusNode;this.applyTextDir(a)}})),e})},"dijit/_HasDropDown":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return a("dijit._HasDropDown",p,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(k.once(this.ownerDocument,l.release,j.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=this.dropDown,c=!1;if(a&&this._opened){var d=f.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w&&a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(var g=a.target;g&&!c;)e.contains(g,"dijitPopup")?c=!0:g=g.parentNode;if(c){if(g=a.target,b.onItemClick){for(var h;g&&!(h=m.byNode(g));)g=g.parentNode;h&&h.onClick&&h.getParent&&h.getParent().onItemClick(h,a)}return}}}this._opened?b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){b.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";e.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(k(this._buttonNode,l.press,j.hitch(this,"_onDropDownMouseDown")),k(this._buttonNode,"click",j.hitch(this,"_onDropDownClick")),k(a,"keydown",j.hitch(this,"_onKey")),k(a,"keyup",j.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0),this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&this._opened&&b.handleKey&&!1===b.handleKey(a))return a.stopPropagation(),void a.preventDefault();b&&this._opened&&a.keyCode==i.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==i.DOWN_ARROW||(a.keyCode==i.ENTER||a.keyCode==i.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(j.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new b,c=j.hitch(this,function(){this.openDropDown(),a.resolve(this.dropDown)});return this.isLoaded()?c():this.loadDropDown(c),a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this._aroundNode||this.domNode,g=this,h=o.open({parent:this,popup:a,around:c,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},onClose:function(){d.set(g._popupStateNode,"popupActive",!1),e.remove(g._popupStateNode,"dijitHasDropDownOpen"),g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&c.offsetWidth>a._popupWrapper.offsetWidth){var i=c.offsetWidth-a._popupWrapper.offsetWidth,k={w:a.domNode.offsetWidth+i};j.isFunction(a.resize)?a.resize(k):f.setMarginBox(b,k),"R"==h.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-i+"px")}return d.set(this._popupStateNode,"popupActive","true"),e.add(this._popupStateNode,"dijitHasDropDownOpen"),this._set("_opened",!0),this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",a.id),"presentation"===b.getAttribute("role")||b.getAttribute("aria-labelledby")||b.setAttribute("aria-labelledby",this.id),h},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),o.close(this.dropDown),this._opened=!1)}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(a,b,c,d){return a("dijit.CheckedMenuItem",c,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:d,checked:!1,_setCheckedAttr:function(a){this.domNode.setAttribute("aria-checked",a?"true":"false"),this._set("checked",a)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(a){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked)),this.onClick(a)}})})},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a("dijit.MenuItem"+(f("dojo-bidi")?"_NoBidi":""),[h,i,j,k],{templateString:l,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var b,c="",d=a.search(/{\S}/);if(d>=0){c=a.charAt(d+1);var e=a.substr(0,d),f=a.substr(d+3);b=e+c+f,a=e+'<span class="dijitMenuItemShortcutKey">'+c+"</span>"+f}else b=a;this.domNode.setAttribute("aria-label",b+" "+this.accelKey),this.containerNode.innerHTML=a,this._set("shortcutKey",c)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){!a||"label"in this.params||this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";c.set(this.containerNode,"id",a),this.accelKeyNode&&c.set(this.accelKeyNode,"id",this.id+"_accel"),b.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==f("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){d.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){e.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",a)},setDisabled:function(a){e.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false"),this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,c.set(this.containerNode,"colSpan",a?"1":"2")),this._set("accelKey",a)}});return f("dojo-bidi")&&(m=a("dijit.MenuItem",m,{_setLabelAttr:function(a){this.inherited(arguments),"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}})),m})},"dijit/Dialog":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","./layout/utils","dojo/text!./templates/Dialog.html","./a11yclick","dojo/i18n!./nls/common"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){var E=new e;E.resolve(!0);var F=d("dijit._DialogBase"+(p("dojo-bidi")?"_NoBidi":""),[w,y,z,x],{templateString:D,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:u.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none",this._set("closable",a)},postMixInProperties:function(){var a=k.getLocalization("dijit","common");m.mixin(this,a),this.inherited(arguments)},postCreate:function(){i.set(this.domNode,{display:"none",position:"absolute"}),this.ownerDocumentBody.appendChild(this.domNode),this.inherited(arguments),c.after(this,"onExecute",m.hitch(this,"hide"),!0),c.after(this,"onCancel",m.hitch(this,"hide"),!0),this._modalconnects=[]},onLoad:function(){this.resize(),this._position(),this.autofocus&&H.isTop(this)&&(this._getFocusItems(),t.focus(this._firstFocusItem)),this.inherited(arguments)},focus:function(){this._getFocusItems(),t.focus(this._firstFocusItem)},_endDrag:function(){var a=h.position(this.domNode),b=q.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h),a.x=Math.min(Math.max(a.x,0),b.w-a.w),this._relativePosition=a,this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new(6==p("ie")?s:r)(a,{handle:this.titleBar}),c.after(this._moveable,"onMoveStop",m.hitch(this,"_endDrag"),!0)):g.add(a,"dijitDialogFixed"),this.underlayAttrs={dialogId:this.id,class:b.map(this.class.split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:m.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!g.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=q.getBox(this.ownerDocument),c=this._relativePosition,d=c?null:h.position(a),e=Math.floor(b.l+(c?c.x:(b.w-d.w)/2)),f=Math.floor(b.t+(c?c.y:(b.h-d.h)/2));i.set(a,{left:e+"px",top:f+"px"})}},_onKey:function(a){if(a.keyCode==l.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(t.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey||(t.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==l.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return E.promise;this._started||this.startup(),this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0),this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),H.hide(this));var a=q.get(this.ownerDocument);this._modalconnects.push(n(a,"scroll",m.hitch(this,"resize",null))),this._modalconnects.push(n(this.domNode,"keydown",m.hitch(this,"_onKey"))),i.set(this.domNode,{opacity:0,display:""}),this._set("open",!0),this._onShow(),this.resize(),this._position();var b;this._fadeInDeferred=new e(m.hitch(this,function(){b.stop(),delete this._fadeInDeferred}));var c=this._fadeInDeferred.promise;return b=j.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:m.hitch(this,function(){H.show(this,this.underlayAttrs)}),onEnd:m.hitch(this,function(){this.autofocus&&H.isTop(this)&&(this._getFocusItems(),t.focus(this._firstFocusItem)),this._fadeInDeferred.resolve(!0),delete this._fadeInDeferred})}).play(),c},hide:function(){if(!this._alreadyInitialized||!this.open)return E.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new e(m.hitch(this,function(){a.stop(),delete this._fadeOutDeferred})),this._fadeOutDeferred.then(m.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=j.fadeOut({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,function(){this.domNode.style.display="none",H.hide(this),this._fadeOutDeferred.resolve(!0),delete this._fadeOutDeferred})}).play(),this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();return this._relativePosition&&delete this._relativePosition,this._set("open",!1),b},resize:function(a){if("none"!=this.domNode.style.display){if(this._checkIfSingleChild(),!a){this._shrunk&&(this._singleChild&&void 0!==this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),b.forEach([this.domNode,this.containerNode,this.titleBar],function(a){i.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var c=q.getBox(this.ownerDocument);c.w*=this.maxRatio,c.h*=this.maxRatio;var d=h.position(this.domNode);d.w>=c.w||d.h>=c.h?(a={w:Math.min(d.w,c.w),h:Math.min(d.h,c.h)},this._shrunk=!0):this._shrunk=!1}if(a){h.setMarginBox(this.domNode,a);var e=C.marginBox2contentBox(this.domNode,a),f={domNode:this.containerNode,region:"center"};if(C.layoutChildren(this.domNode,e,[{domNode:this.titleBar,region:"top"},f]),this._singleChild){var g=C.marginBox2contentBox(this.containerNode,f);this._singleChild.resize({w:g.w,h:g.h})}else this.containerNode.style.overflow="auto",this._layoutChildren()}else this._layoutChildren();p("touch")||a||this._position()}},_layoutChildren:function(){b.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred&&this._fadeOutDeferred.cancel(),this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();H.hide(this),this.inherited(arguments)}});p("dojo-bidi")&&(F=d("dijit._DialogBase",F,{_setTitleAttr:function(a){this._set("title",a),this.titleNode.innerHTML=a,this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var G=d("dijit.Dialog",[B,F],{});G._DialogBase=F;var H=G._DialogLevelManager={_beginZIndex:950,show:function(a,b){I[I.length-1].focus=t.curNode;var c=I[I.length-1].dialog?I[I.length-1].zIndex+2:G._DialogLevelManager._beginZIndex;i.set(a.domNode,"zIndex",c),A.show(b,c-1),I.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(I[I.length-1].dialog==a){I.pop();var c=I[I.length-1];if(1==I.length?A.hide():A.show(c.underlayAttrs,c.zIndex-1),a.refocus){var d=c.focus;if(!c.dialog||d&&f.isDescendant(d,c.dialog.domNode)||(c.dialog._getFocusItems(),d=c.dialog._firstFocusItem),d)try{d.focus()}catch(a){}}}else{var e=b.indexOf(b.map(I,function(a){return a.dialog}),a);-1!=e&&I.splice(e,1)}},isTop:function(a){return I[I.length-1].dialog==a}},I=G._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];return t.watch("curNode",function(a,b,c){var d=I[I.length-1].dialog;if(c&&d&&!d._fadeOutDeferred&&c.ownerDocument==d.ownerDocument){do{if(c==d.domNode||g.contains(c,"dijitPopup"))return}while(c=c.parentNode);d.focus()}}),p("dijit-legacy-requires")&&o(0,function(){a(["dijit/TooltipDialog"])}),G})},"dijit/form/_FormMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(a,b,c,d,e,f){return b("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var c=[];return a.forEach(b||this.getChildren(),function(a){"value"in a?c.push(a):c=c.concat(this._getDescendantFormWidgets(a.getChildren()))},this),c},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){
a.reset&&a.reset()})},validate:function(){var b=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var c=a.disabled||!a.validate||a.validate();return c||b||(f.scrollIntoView(a.containerNode||a.domNode),a.focus(),b=!0),c}),function(a){return a})},setValues:function(a){return c.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0"),this.set("value",a)},_setValueAttr:function(b){var c={};a.forEach(this._getDescendantFormWidgets(),function(a){if(a.name){(c[a.name]||(c[a.name]=[])).push(a)}});for(var e in c)if(c.hasOwnProperty(e)){var f=c[e],g=d.getObject(e,!1,b);void 0!==g&&(g=[].concat(g),"boolean"==typeof f[0].checked?a.forEach(f,function(b){b.set("value",-1!=a.indexOf(g,b._get("value")))}):f[0].multiple?f[0].set("value",g):a.forEach(f,function(a,b){a.set("value",g[b])}))}},getValues:function(){return c.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},_getValueAttr:function(){var b={};return a.forEach(this._getDescendantFormWidgets(),function(a){var c=a.name;if(c&&!a.disabled){var e=a.get("value");if("boolean"==typeof a.checked)if(/Radio/.test(a.declaredClass))!1!==e?d.setObject(c,e,b):void 0===(e=d.getObject(c,!1,b))&&d.setObject(c,null,b);else{var f=d.getObject(c,!1,b);f||(f=[],d.setObject(c,f,b)),!1!==e&&f.push(e)}else{var g=d.getObject(c,!1,b);void 0!==g?d.isArray(g)?g.push(e):d.setObject(c,[g,e],b):d.setObject(c,e,b)}}}),b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=a.map(this._descendants,function(a){return a.get("state")||""});return a.indexOf(b,"Error")>=0?"Error":a.indexOf(b,"Incomplete")>=0?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets(),a.forEach(this._descendants,function(a){a._started||a.startup()}),b||this._onChildChange()},_onChildChange:function(a){a&&"state"!=a&&"disabled"!=a||this._set("state",this._getState()),a&&"value"!=a&&"disabled"!=a&&"checked"!=a||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer,this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments),this._descendants=this._getDescendantFormWidgets(),this.value=this.get("value"),this.state=this._getState();var a=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))})),this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,b){return a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute(),this.execute(this.get("value"))},_getFocusItems:function(){var a=b._getTabNavigable(this.containerNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode,this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a("dijit.DialogUnderlay",[h,i],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"",class:"",_modalConnects:[],_setDialogIdAttr:function(a){d.set(this.node,"id",a+"_underlay"),this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a,this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.own(f(this.domNode,"keydown",b.hitch(this,"_onKeyDown"))),this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=g.getBox(this.ownerDocument);b.top=c.t+"px",b.left=c.l+"px",a.width=c.w+"px",a.height=c.h+"px",b.display="block"},show:function(){this.domNode.style.display="block",this.open=!0,this.layout(),this.bgIframe=new j(this.domNode);var a=g.get(this.ownerDocument);this._modalConnects=[k.on("resize",b.hitch(this,"layout")),f(a,"scroll",b.hitch(this,"layout"))]},hide:function(){for(this.bgIframe.destroy(),delete this.bgIframe,this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});return m.show=function(a,b){var c=m._singleton;!c||c._destroyed?c=l._underlay=m._singleton=new m(a):a&&c.set(a),e.set(c.domNode,"zIndex",b),c.open||c.show()},m.hide=function(){var a=m._singleton;a&&!a._destroyed&&a.hide()},m})},"dijit/layout/ContentPane":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return j("dijit.layout.ContentPane",[c,d,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,c){if((!a||!a.template)&&c&&!("href"in a)&&!("content"in a)){c=l.byId(c);for(var d=c.ownerDocument.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);a=b.delegate(a,{content:d})}this.inherited(arguments,[a,c])},postMixInProperties:function(){this.inherited(arguments);var a=p.getLocalization("dijit","loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,a),this.errorMessage=f.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&i.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!b.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){i.forEach(this.getChildren(),function(a){a._started||a._destroyed||!b.isFunction(a.startup)||(a.startup(),a._started=!0)}),this._contentSetter&&i.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!b.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(b){return a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",b)},_setHrefAttr:function(a){return this.cancel(),this.onLoadDeferred=new k(b.hitch(this,"cancel")),this.onLoadDeferred.then(b.hitch(this,"onLoad")),this._set("href",a),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",b)},_setContentAttr:function(a){return this._set("href",""),this.cancel(),this.onLoadDeferred=new k(b.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(b.hitch(this,"onLoad")),this._setContent(a||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){if(this.inherited(arguments),this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new k(b.hitch(this,"cancel")),this.onLoadDeferred.then(b.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,c={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};b.isObject(this.ioArgs)&&b.mixin(c,this.ioArgs);var d,e=this._xhrDfd=(this.ioMethod||o.get)(c);e.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(b){a._onError("Content",b)}},function(b){return e.canceled||a._onError("Download",b),delete a._xhrDfd,b}).then(function(){return a.onDownloadEnd(),delete a._xhrDfd,d}),delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(a){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;i.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),b&&(i.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults),a||n.empty(this.containerNode),delete this._singleChild},_setContent:function(a,c){this.destroyDescendants();var d=this._contentSetter;d&&d instanceof g._ContentSetter||(d=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:b.hitch(this,this._onError),onContentError:b.hitch(this,function(a){var b=this.onContentError(a);try{this.containerNode.innerHTML=b}catch(a){}})}));var e=b.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),f=d.set(b.isObject(a)&&a.domNode?a.domNode:a,e),h=this;return q(f&&f.then?f:d.parseDeferred,function(){delete h._contentSetterParams,c||(h._started&&(h._startChildren(),h._scheduleLayout()),h._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);var d=this["on"+a+"Error"].call(this,b);c||d&&this._setContent(d,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","../registry","../Viewport","./utils"],function(a,b,c,d,e,f,g,h,i,j){return b("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer,this._needLayout=!this._childOfLayoutWidget,this.inherited(arguments),this._isShown()&&this._onShow(),this._childOfLayoutWidget||this.own(i.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;g("> *",this.containerNode).some(function(c){var d=h.byNode(c);d&&d.resize?a.push(d):!/script|link|style/i.test(c.nodeName)&&c.offsetHeight&&(b=!0)}),this._singleChild=1!=a.length||b?null:a[0],c.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0,this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout,this._wasShown||!1===this.open||this._onShow(),a&&d.setMarginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var e=b||{};f.mixin(e,a||{}),"h"in e&&"w"in e||(e=f.mixin(d.getMarginBox(c),e)),this._contentBox=j.marginBox2contentBox(c,e)}else this._contentBox=d.getContentBox(c);this._layoutChildren()},_layoutChildren:function(){if(this._checkIfSingleChild(),this._singleChild&&this._singleChild.resize){var a=this._contentBox||d.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var b,c=this.getChildren(),e=0;b=c[e++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!c.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0,this._needLayout&&this._layout(this._changeSize,this._resultSize),this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(a,b,c,d,e){function f(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function g(a,b){var d=a.resize?a.resize(b):c.setMarginBox(a.domNode,b);d?e.mixin(a,d):(e.mixin(a,c.getMarginBox(a.domNode)),e.mixin(a,b))}var h={marginBox2contentBox:function(a,b){var e=d.getComputedStyle(a),f=c.getMarginExtents(a,e),g=c.getPadBorderExtents(a,e);return{l:d.toPixelValue(a,e.paddingLeft),t:d.toPixelValue(a,e.paddingTop),w:b.w-(f.w+g.w),h:b.h-(f.h+g.h)}},layoutChildren:function(c,d,h,i,j){d=e.mixin({},d),b.add(c,"dijitLayoutContainer"),h=a.filter(h,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(a.filter(h,function(a){return"center"==a.region||"client"==a.layoutAlign})),a.forEach(h,function(a){var c=a.domNode,e=a.region||a.layoutAlign;if(!e)throw new Error("No region setting for "+a.id);var h=c.style;h.left=d.l+"px",h.top=d.t+"px",h.position="absolute",b.add(c,"dijitAlign"+f(e));var k={};i&&i==a.id&&(k["top"==a.region||"bottom"==a.region?"h":"w"]=j),"leading"==e&&(e=a.isLeftToRight()?"left":"right"),"trailing"==e&&(e=a.isLeftToRight()?"right":"left"),"top"==e||"bottom"==e?(k.w=d.w,g(a,k),d.h-=a.h,"top"==e?d.t+=a.h:h.top=d.t+d.h+"px"):"left"==e||"right"==e?(k.h=d.h,g(a,k),d.w-=a.w,"left"==e?d.l+=a.w:h.left=d.l+d.w+"px"):"client"!=e&&"center"!=e||g(a,d)})}};return e.setObject("dijit.layout.utils",h),h})},"dijit/Editor":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(a){return new t({command:a.name})}function A(a){return new t({buttonClass:s,command:a.name})}var B=c("dijit.Editor",x,{plugins:null,extraPlugins:null,constructor:function(){k.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",u]),this._plugins=[],this._editInterval=1e3*this.editActionInterval,(l("ie")||l("trident"))&&(this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate"))},postMixInProperties:function(){this.setValueDeferred=new d,this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this._steps=this._steps.slice(0),this._undoedSteps=this._undoedSteps.slice(0),k.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins)),this.commands=e.getLocalization("dijit._editor","commands",this.lang),l("webkit")&&i.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments),this.toolbar||(this.toolbar=new p({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode)),b.forEach(this.plugins,this.addPlugin,this),this.setValueDeferred.resolve(!0),g.add(this.iframe.parentNode,"dijitEditorIFrameContainer"),g.add(this.iframe,"dijitEditorIFrame"),f.set(this.iframe,"allowTransparency",!0),this.toolbar.startup(),this.onNormalizedDisplayChanged()},destroy:function(){b.forEach(this._plugins,function(a){a&&a.destroy&&a.destroy()}),this._plugins=[],this.toolbar.destroyRecursive(),delete this.toolbar,this.inherited(arguments)},addPlugin:function(b,c){var d=k.isString(b)?{name:b}:k.isFunction(b)?{ctor:b}:b;if(!d.setEditor){var e={args:d,plugin:null,editor:this};if(d.name&&(t.registry[d.name]?e.plugin=t.registry[d.name](d):n.publish(y._scopeName+".Editor.getPlugin",e)),!e.plugin)try{var f=d.ctor||k.getObject(d.name)||a(d.name);f&&(e.plugin=new f(d))}catch(a){throw new Error(this.id+": cannot find plugin ["+d.name+"]")}if(!e.plugin)throw new Error(this.id+": cannot find plugin ["+d.name+"]");b=e.plugin}arguments.length>1?this._plugins[c]=b:this._plugins.push(b),b.setEditor(this),k.isFunction(b.setToolbar)&&b.setToolbar(this.toolbar)},resize:function(a){a&&r.prototype.resize.apply(this,arguments)},layout:function(){var a=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+h.getPadBorderExtents(this.iframe.parentNode).h+h.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=a+"px",this.iframe&&(this.iframe.style.height="100%"),this._layoutMode=!0},_onIEMouseDown:function(a){var b,c=this.document.body,d=c.clientWidth,e=c.clientHeight,f=c.clientLeft,g=c.offsetWidth,h=c.offsetHeight,i=c.offsetLeft;/^rtl$/i.test(c.dir||"")?d<g&&a.x>d&&a.x<g&&(b=!0):a.x<f&&a.x>i&&(b=!0),b||e<h&&a.y>e&&a.y<h&&(b=!0),b||(delete this._cursorToStart,delete this._savedSelection,"BODY"==a.target.tagName&&this.defer("placeCursorAtEnd"),this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(a){this.customUndo&&this.endEditing(!0),"BODY"!=a.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(a){this._inEditing||(this._inEditing=!0,this._beginEditing(a)),this.editActionInterval>0&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(a){if(!this.customUndo||"undo"!=a&&"redo"!=a){this.customUndo&&(this.endEditing(),this._beginEditing());var b=this.inherited(arguments);return this.customUndo&&this._endEditing(),b}return this[a]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(a){var b;try{if(b=this.document.execCommand(a,!1,null),l("webkit")&&!b)throw{code:1011}}catch(e){if(1011==e.code||9==e.code&&l("opera")){var c=m.substitute,d={cut:"X",copy:"C",paste:"V"};alert(c(this.commands.systemShortcut,[this.commands[a],c(this.commands[l("mac")?"appleKey":"ctrlKey"],[d[a]])]))}b=!1}return b},queryCommandEnabled:function(a){return!this.customUndo||"undo"!=a&&"redo"!=a?this.inherited(arguments):"undo"==a?this._steps.length>1:this._undoedSteps.length>0},_moveToBookmark:function(a){var c,d,e,f,g=a.mark,h=a.mark,i=a.isCollapsed;h&&(l("ie")<9||9===l("ie")&&l("quirks")?k.isArray(h)?(g=[],b.forEach(h,function(a){g.push(w.getNode(a,this.editNode))},this),this.selection.moveToBookmark({mark:g,isCollapsed:i})):h.startContainer&&h.endContainer&&(f=w.getSelection(this.window))&&f.removeAllRanges&&(f.removeAllRanges(),c=w.create(this.window),d=w.getNode(h.startContainer,this.editNode),e=w.getNode(h.endContainer,this.editNode),d&&e&&(c.setStart(d,h.startOffset),c.setEnd(e,h.endOffset),f.addRange(c))):(f=w.getSelection(this.window))&&f.removeAllRanges&&(f.removeAllRanges(),c=w.create(this.window),d=w.getNode(h.startContainer,this.editNode),e=w.getNode(h.endContainer,this.editNode),d&&e&&(c.setStart(d,h.startOffset),c.setEnd(e,h.endOffset),f.addRange(c))))},_changeToStep:function(a,b){this.setValue(b.text);var c=b.bookmark;c&&this._moveToBookmark(c)},undo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0,this.endEditing(!0);var b=this._steps.pop();b&&this._steps.length>0&&(this.focus(),this._changeToStep(b,this._steps[this._steps.length-1]),this._undoedSteps.push(b),this.onDisplayChanged(),delete this._undoRedoActive,a=!0),delete this._undoRedoActive}return a},redo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0,this.endEditing(!0);var b=this._undoedSteps.pop();b&&this._steps.length>0&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],b),this._steps.push(b),this.onDisplayChanged(),a=!0),delete this._undoRedoActive}return a},endEditing:function(a){this._editTimer&&(this._editTimer=this._editTimer.remove()),this._inEditing&&(this._endEditing(a),this._inEditing=!1)},_getBookmark:function(){var a=this.selection.getBookmark(),c=[];if(a&&a.mark){var d=a.mark;if(l("ie")<9||9===l("ie")&&l("quirks")){var e=w.getSelection(this.window);if(k.isArray(d))b.forEach(a.mark,function(a){c.push(w.getIndex(a,this.editNode).o)},this),a.mark=c;else if(e){var f;e.rangeCount&&(f=e.getRangeAt(0)),a.mark=f?f.cloneRange():this.selection.getBookmark()}}try{a.mark&&a.mark.startContainer&&(c=w.getIndex(a.mark.startContainer,this.editNode).o,a.mark={startContainer:c,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?c:w.getIndex(a.mark.endContainer,this.editNode).o,endOffset:a.mark.endOffset})}catch(b){a.mark=null}}return a},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:v.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=v.getChildrenHtml(this.editNode);this._undoedSteps=[],this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(a){if(l("ie")||this.iframe||a.keyCode!=j.TAB||this.tabIndent||this._saveSelection(),!this.customUndo)return void this.inherited(arguments);var b=a.keyCode;if(a.ctrlKey&&!a.shiftKey&&!a.altKey){if(90==b||122==b)return a.stopPropagation(),a.preventDefault(),void this.undo();if(89==b||121==b)return a.stopPropagation(),a.preventDefault(),void this.redo()}switch(this.inherited(arguments),b){case j.ENTER:case j.BACKSPACE:case j.DELETE:this.beginEditing();break;case 88:case 86:if(a.ctrlKey&&!a.altKey&&!a.metaKey){this.endEditing(),88==a.keyCode?this.beginEditing("cut"):this.beginEditing("paste"),this.defer("endEditing",1);break}default:if(!a.ctrlKey&&!a.altKey&&!a.metaKey&&(a.keyCode<j.F1||a.keyCode>j.F15)){this.beginEditing();break}case j.ALT:this.endEditing();break;case j.UP_ARROW:case j.DOWN_ARROW:case j.LEFT_ARROW:case j.RIGHT_ARROW:case j.HOME:case j.END:case j.PAGE_UP:case j.PAGE_DOWN:this.endEditing(!0);break;case j.CTRL:case j.SHIFT:case j.TAB:}},_onBlur:function(){this.inherited(arguments),this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(a){}},_restoreSelection:function(){this._savedSelection&&(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0),this.inherited(arguments)},replaceValue:function(a){this.customUndo?this.isClosed?this.setValue(a):(this.beginEditing(),a||(a="&#160;"),this.setValue(a),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(a){this.setValueDeferred.then(k.hitch(this,function(){!this.disabled&&a||!this._buttonEnabledPlugins&&a?b.forEach(this._plugins,function(a){a.set("disabled",!0)}):this.disabled&&!a&&b.forEach(this._plugins,function(a){a.set("disabled",!1)})})),this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&i.set(this.document.body,"color",i.get(this.iframe,"color"))}catch(a){}}});return k.mixin(t.registry,{undo:z,redo:z,cut:z,copy:z,paste:z,insertOrderedList:z,insertUnorderedList:z,indent:z,outdent:z,justifyCenter:z,justifyFull:z,justifyLeft:z,justifyRight:z,delete:z,selectAll:z,removeFormat:z,unlink:z,insertHorizontalRule:z,bold:A,italic:A,underline:A,strikethrough:A,subscript:A,superscript:A,"|":function(){return new t({setEditor:function(a){this.editor=a,this.button=new q({ownerDocument:a.ownerDocument})}})}}),B})},"dijit/Toolbar":function(){define(["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(a,b,c,d,e,f,g,h){return c("dijit-legacy-requires")&&e(0,function(){a(["dijit/ToolbarSeparator"])}),b("dijit.Toolbar",[f,h,g],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(a,b,c,d,e,f,g,h,i,j){return b("dijit._KeyNavContainer",[i,j,h],{connectKeyNavHandlers:function(b,c){var d=this._keyNavCodes={},g=f.hitch(this,"focusPrev"),h=f.hitch(this,"focusNext");a.forEach(b,function(a){d[a]=g}),a.forEach(c,function(a){d[a]=h}),d[e.HOME]=f.hitch(this,"focusFirstChild"),d[e.END]=f.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){d.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments),a.forEach(this.getChildren(),f.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments),this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){var a=g.byNode(a);return a&&a.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(a,b,c,d,e,f,g,h){return b("dijit._KeyNavMixin",h,{tabIndex:"0",childSelector:null,postCreate:function(){if(this.inherited(arguments),c.set(this.domNode,"tabIndex",this.tabIndex),!this._keyNavCodes){var a=this._keyNavCodes={};a[d.HOME]=e.hitch(this,"focusFirstChild"),a[d.END]=e.hitch(this,"focusLastChild"),a[this.isLeftToRight()?d.LEFT_ARROW:d.RIGHT_ARROW]=e.hitch(this,"_onLeftArrow"),a[this.isLeftToRight()?d.RIGHT_ARROW:d.LEFT_ARROW]=e.hitch(this,"_onRightArrow"),a[d.UP_ARROW]=e.hitch(this,"_onUpArrow"),a[d.DOWN_ARROW]=e.hitch(this,"_onDownArrow")}var b=this,h="string"==typeof this.childSelector?this.childSelector:e.hitch(this,"childSelector");this.own(f(this.domNode,"keypress",e.hitch(this,"_onContainerKeypress")),f(this.domNode,"keydown",e.hitch(this,"_onContainerKeydown")),f(this.domNode,"focus",e.hitch(this,"_onContainerFocus")),f(this.containerNode,f.selector(h,"focusin"),function(a){b._onChildFocus(g.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){c.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(a){c.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var c=a.domNode,d=a.label||(c.focusNode?c.focusNode.label:"")||c.innerText||c.textContent||"",e=d.replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&e==b?-1:0},_onContainerKeydown:function(a){var b=this._keyNavCodes[a.keyCode];b?(b(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode==d.SPACE&&this._searchTimer&&!(a.ctrlKey||a.altKey||a.metaKey)&&(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))},_onContainerKeypress:function(a){a.charCode<=d.SPACE||a.ctrlKey||a.altKey||a.metaKey||(a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase()))},_keyboardSearch:function(a,b){var c,d=null,f=0;e.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=b;var a=/^(.)\1*$/.test(this._searchString),e=a?1:this._searchString.length;c=this._searchString.substr(0,e),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var g=this.focusedChild||null;if(1!=e&&g||(g=this._getNextFocusableChild(g,1))){var h=g;do{var i=this._keyboardSearchCompare(g,c);if(i&&0==f++&&(d=g),-1==i){f=-1;break}g=this._getNextFocusableChild(g,1)}while(g!=h)}})(),this.onKeyboardSearch(d,a,c,f)},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var c=a;do{if(a)a=this._getNext(a,b);else if(!(a=this[b>0?"_getFirst":"_getLast"]()))break;if(null!=a&&a!=c&&a.isFocusable())return a}while(a!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,b){if(a)for(a=a.domNode;a;)if((a=a[b<0?"previousSibling":"nextSibling"])&&"getAttribute"in a){var c=g.byNode(a);if(c)return c}return null}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(a,b,c,d){return a("dijit.ToolbarSeparator",[c,d],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments),b.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(a,b,c,d){return a("dijit.form.ToggleButton",[c,d],{baseClass:"dijitToggleButton",setChecked:function(a){b.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+a+") instead.","","2.0"),this.set("checked",a)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(a,b){return a("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(a){var b=this.checked;this._set("checked",!b)
;var c=this.inherited(arguments);return this.set("checked",c?this.checked:b),c},_setCheckedAttr:function(a,c){this._set("checked",a);var d=this.focusNode||this.domNode;this._created&&b.get(d,"checked")!=!!a&&b.set(d,"checked",!!a),d.setAttribute(this._aria_attr,String(a)),this._handleOnChange(a,c)},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.checked&&a.setAttribute("checked","checked"),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(a,b,c,d,e){var f=b("dijit._editor._Plugin",d,{constructor:function(a){this.params=a||{},c.mixin(this,this.params),this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:e,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),b=this.editor,d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var e=c.mixin({label:a,ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,showLabel:!1,iconClass:d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});delete e.name,this.button=new this.buttonClass(e)}}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive(),this.inherited(arguments)},connect:function(b,c,d){this.own(a.connect(b,c,this,d))},updateState:function(){var a,b,c=this.editor,d=this.command;if(c&&c.isLoaded&&d.length){var e=this.get("disabled");if(this.button)try{b=!e&&c.queryCommandEnabled(d),this.enabled!==b&&(this.enabled=b,this.button.set("disabled",!b)),b&&"boolean"==typeof this.button.checked&&(a=c.queryCommandState(d),this.checked!==a&&(this.checked=a,this.button.set("checked",c.queryCommandState(d))))}catch(c){}}},setEditor:function(a){this.editor=a,this._initButton(),this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",c.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none"),this.own(this.editor.on("NormalizedDisplayChanged",c.hitch(this,"updateState")))},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,b){if("object"==typeof a){for(var c in a)this.set(c,a[c]);return this}var d=this._getAttrNames(a);if(this[d.s])var e=this[d.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,b);return e||this},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},_setDisabledAttr:function(a){this._set("disabled",a),this.updateState()},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.charAt(0).toUpperCase()+a.substr(1);return b[a]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(a,b){this[a]=b}});return f.registry={},f})},"dijit/_editor/plugins/EnterKeyHandling":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range"],function(a,b,c,d,e,f,g,h,i,j,k){return a("dijit._editor.plugins.EnterKeyHandling",i,{blockNodeForEnter:"BR",constructor:function(a){a&&("blockNodeForEnter"in a&&(a.blockNodeForEnter=a.blockNodeForEnter.toUpperCase()),d.mixin(this,a))},setEditor:function(a){if(this.editor!==a)if(this.editor=a,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,a.onLoadDeferred.then(d.hitch(this,function(b){return this.own(e(a.document,"keydown",d.hitch(this,function(a){if(a.keyCode==c.ENTER){var b=d.mixin({},a);b.shiftKey=!0,this.handleEnterKey(b)||(a.stopPropagation(),a.preventDefault())}}))),f("ie")>=9&&f("ie")<=10&&this.own(e(a.document,"paste",d.hitch(this,function(a){setTimeout(d.hitch(this,function(){var a=this.editor.document.selection.createRange();a.move("character",-1),a.select(),a.move("character",1),a.select()}),0)}))),b}));else if(this.blockNodeForEnter){var b=d.hitch(this,"handleEnterKey");a.addKeyHandler(13,0,0,b),a.addKeyHandler(13,0,1,b),this.own(this.editor.on("KeyPressed",d.hitch(this,"onKeyPressed")))}},onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var a=this.editor.selection.getAncestorElement("LI");if(a){f("mozilla")&&"LI"==a.parentNode.parentNode.nodeName&&(a=a.parentNode.parentNode);var b=a.firstChild;if(b&&1==b.nodeType&&("UL"==b.nodeName||"OL"==b.nodeName)){a.insertBefore(b.ownerDocument.createTextNode("\xa0"),b);var c=k.create(this.editor.window);c.setStart(a.firstChild,0);var d=k.getSelection(this.editor.window,!0);d.removeAllRanges(),d.addRange(c)}}else{j.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var e=this.editor.selection.getAncestorElement(this.blockNodeForEnter);if(e&&(e.innerHTML=this.bogusHtmlContent,f("ie")<=9)){var g=this.editor.document.selection.createRange();g.move("character",-1),g.select()}}}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(a){var c,d,e,g,i,l,m,n,o,p=this.editor.document;if(a.shiftKey){var q=this.editor.selection.getParentElement(),r=k.getAncestor(q,this.blockNodes);if(r){if("LI"==r.tagName)return!0;if(c=k.getSelection(this.editor.window),d=c.getRangeAt(0),d.collapsed||(d.deleteContents(),c=k.getSelection(this.editor.window),d=c.getRangeAt(0)),k.atBeginningOfContainer(r,d.startContainer,d.startOffset))m=p.createElement("br"),e=k.create(this.editor.window),r.insertBefore(m,r.firstChild),e.setStartAfter(m),c.removeAllRanges(),c.addRange(e);else{if(!k.atEndOfContainer(r,d.startContainer,d.startOffset))return!(n=d.startContainer)||3!=n.nodeType||(o=n.nodeValue,g=p.createTextNode(o.substring(0,d.startOffset)),i=p.createTextNode(o.substring(d.startOffset)),l=p.createElement("br"),""==i.nodeValue&&f("webkit")&&(i=p.createTextNode("\xa0")),b.place(g,n,"after"),b.place(l,g,"after"),b.place(i,l,"after"),b.destroy(n),e=k.create(this.editor.window),e.setStart(i,0),c.removeAllRanges(),c.addRange(e),!1);e=k.create(this.editor.window),m=p.createElement("br"),r.appendChild(m),r.appendChild(p.createTextNode("\xa0")),e.setStart(r.lastChild,0),c.removeAllRanges(),c.addRange(e)}}else if(c=k.getSelection(this.editor.window),c.rangeCount){if((d=c.getRangeAt(0))&&d.startContainer)if(d.collapsed||(d.deleteContents(),c=k.getSelection(this.editor.window),d=c.getRangeAt(0)),(n=d.startContainer)&&3==n.nodeType){var s=d.startOffset;n.length<s&&(A=this._adjustNodeAndOffset(n,s),n=A.node,s=A.offset),o=n.nodeValue,g=p.createTextNode(o.substring(0,s)),i=p.createTextNode(o.substring(s)),l=p.createElement("br"),i.length||(i=p.createTextNode("\xa0")),g.length?b.place(g,n,"after"):g=n,b.place(l,g,"after"),b.place(i,l,"after"),b.destroy(n),e=k.create(this.editor.window),e.setStart(i,0),e.setEnd(i,i.length),c.removeAllRanges(),c.addRange(e),this.editor.selection.collapse(!0)}else{var t;d.startOffset>=0&&(t=n.childNodes[d.startOffset]);var l=p.createElement("br"),i=p.createTextNode("\xa0");t?(b.place(l,t,"before"),b.place(i,l,"after")):(n.appendChild(l),n.appendChild(i)),e=k.create(this.editor.window),e.setStart(i,0),e.setEnd(i,i.length),c.removeAllRanges(),c.addRange(e),this.editor.selection.collapse(!0)}}else j.prototype.execCommand.call(this.editor,"inserthtml","<br>");return!1}var u=!0;c=k.getSelection(this.editor.window),d=c.getRangeAt(0),d.collapsed||(d.deleteContents(),c=k.getSelection(this.editor.window),d=c.getRangeAt(0));var v=k.getBlockAncestor(d.endContainer,null,this.editor.editNode),w=v.blockNode;if(this._checkListLater=w&&("LI"==w.nodeName||"LI"==w.parentNode.nodeName))return f("mozilla")&&(this._pressedEnterInBlock=w),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(w.innerHTML)&&(w.innerHTML="",f("webkit")&&(e=k.create(this.editor.window),e.setStart(w,0),c.removeAllRanges(),c.addRange(e)),this._checkListLater=!1),!0;if(!v.blockNode||v.blockNode===this.editor.editNode){try{j.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(a){}if(v={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),blockContainer:this.editor.editNode},v.blockNode){if(v.blockNode!=this.editor.editNode&&!(v.blockNode.textContent||v.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(v.blockNode),!1}else v.blockNode=this.editor.editNode;c=k.getSelection(this.editor.window),d=c.getRangeAt(0)}var x=p.createElement(this.blockNodeForEnter);x.innerHTML=this.bogusHtmlContent,this.removeTrailingBr(v.blockNode);var y=d.endOffset,z=d.endContainer;if(z.length<y){var A=this._adjustNodeAndOffset(z,y);z=A.node,y=A.offset}if(k.atEndOfContainer(v.blockNode,z,y))v.blockNode===v.blockContainer?v.blockNode.appendChild(x):b.place(x,v.blockNode,"after"),u=!1,e=k.create(this.editor.window),e.setStart(x,0),c.removeAllRanges(),c.addRange(e),this.editor.height&&h.scrollIntoView(x);else if(k.atBeginningOfContainer(v.blockNode,d.startContainer,d.startOffset))b.place(x,v.blockNode,v.blockNode===v.blockContainer?"first":"before"),x.nextSibling&&this.editor.height&&(e=k.create(this.editor.window),e.setStart(x.nextSibling,0),c.removeAllRanges(),c.addRange(e),h.scrollIntoView(x.nextSibling)),u=!1;else{v.blockNode===v.blockContainer?v.blockNode.appendChild(x):b.place(x,v.blockNode,"after"),u=!1,v.blockNode.style&&x.style&&v.blockNode.style.cssText&&(x.style.cssText=v.blockNode.style.cssText),n=d.startContainer;var B;if(n&&3==n.nodeType){var C,D;y=d.endOffset,n.length<y&&(A=this._adjustNodeAndOffset(n,y),n=A.node,y=A.offset),o=n.nodeValue,g=p.createTextNode(o.substring(0,y)),i=p.createTextNode(o.substring(y,o.length)),b.place(g,n,"before"),b.place(i,n,"after"),b.destroy(n);for(var E=g.parentNode;E!==v.blockNode;){var F=E.tagName,G=p.createElement(F);for(E.style&&G.style&&E.style.cssText&&(G.style.cssText=E.style.cssText),"FONT"===E.tagName&&(E.color&&(G.color=E.color),E.face&&(G.face=E.face),E.size&&(G.size=E.size)),C=i;C;)D=C.nextSibling,G.appendChild(C),C=D;b.place(G,E,"after"),g=E,i=G,E=E.parentNode}for(C=i,(1==C.nodeType||3==C.nodeType&&C.nodeValue)&&(x.innerHTML=""),B=C;C;)D=C.nextSibling,x.appendChild(C),C=D}e=k.create(this.editor.window);var H,I=B;if("BR"!==this.blockNodeForEnter){for(;I;)H=I,D=I.firstChild,I=D;H&&H.parentNode?(x=H.parentNode,e.setStart(x,0),c.removeAllRanges(),c.addRange(e),this.editor.height&&h.scrollIntoView(x),f("mozilla")&&(this._pressedEnterInBlock=v.blockNode)):u=!0}else e.setStart(x,0),c.removeAllRanges(),c.addRange(e),this.editor.height&&h.scrollIntoView(x),f("mozilla")&&(this._pressedEnterInBlock=v.blockNode)}return u},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3==a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,offset:b}},removeTrailingBr:function(a){var c=/P|DIV|LI/i.test(a.tagName)?a:this.editor.selection.getParentOfType(a,["P","DIV","LI"]);c&&(c.lastChild&&(c.childNodes.length>1&&3==c.lastChild.nodeType&&/^[\s\xAD]*$/.test(c.lastChild.nodeValue)||"BR"==c.lastChild.tagName)&&b.destroy(c.lastChild),c.childNodes.length||(c.innerHTML=this.bogusHtmlContent))}})})},"dijit/_editor/RichText":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/domReady","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/window","../_Widget","../_CssStateMixin","../selection","./range","./html","../focus","../main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){var C=c("dijit._editor.RichText",[v,w],{constructor:function(a){this.contentPreFilters=[],this.contentPostFilters=[],this.contentDomPreFilters=[],this.contentDomPostFilters=[],this.editingAreaStyleSheets=[],this.events=[].concat(this.events),this._keyHandlers={},a&&m.isString(a.value)&&(this.value=a.value),this.onLoadDeferred=new d},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){this.domNode.tagName.toLowerCase(),this.contentPreFilters=[m.trim,m.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters),q("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters)),q("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters)),(q("ie")||q("trident"))&&(this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[m.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters)),this.contentDomPostFilters=[m.hitch(this,"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters),this.inherited(arguments),r.publish(B._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments),this.open(),this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=m.hitch(this,function(a,b){return function(){return!this.execCommand(a,b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock","h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};q("ie")||(b.Z=a("redo"));var c;for(c in b)this.addKeyHandler(c,!0,!1,b[c])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(C._editorCommandsLocalized)return this._local2NativeFormatNames=C._local2NativeFormatNames,void(this._native2LocalFormatNames=C._native2LocalFormatNames);C._editorCommandsLocalized=!0,C._local2NativeFormatNames={},C._native2LocalFormatNames={},this._local2NativeFormatNames=C._local2NativeFormatNames,this._native2LocalFormatNames=C._native2LocalFormatNames;for(var a,b=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"],c="",d=0;a=b[d++];)"l"!==a.charAt(1)?c+="<"+a+"><span>content</span></"+a+"><br/>":c+="<"+a+"><li>content</li></"+a+"><br/>";var e={position:"absolute",top:"0px",zIndex:10,opacity:.01},f=h.create("div",{style:e,innerHTML:c});this.ownerDocumentBody.appendChild(f);var g=m.hitch(this,function(){for(var a=f.firstChild;a;)try{this.selection.selectElement(a.firstChild);var b=a.tagName.toLowerCase();this._local2NativeFormatNames[b]=document.queryCommandValue("formatblock"),this._native2LocalFormatNames[this._local2NativeFormatNames[b]]=b,a=a.nextSibling.nextSibling}catch(a){}h.destroy(f)});this.defer(g)},open:function(a){(!this.onLoadDeferred||this.onLoadDeferred.fired>=0)&&(this.onLoadDeferred=new d),this.isClosed||this.close(),r.publish(B._scopeName+"._editor.RichText::open",this),1===arguments.length&&a.nodeName&&(this.domNode=a);var c,i=this.domNode;if(m.isString(this.value))c=this.value,i.innerHTML="";else if(i.nodeName&&"textarea"==i.nodeName.toLowerCase()){var k=this.textarea=i;this.name=k.name,c=k.value,i=this.domNode=this.ownerDocument.createElement("div"),i.setAttribute("widgetId",this.id),k.removeAttribute("widgetId"),i.cssText=k.cssText,i.className+=" "+k.className,h.place(i,k,"before");var l=m.hitch(this,function(){if(j.set(k,{display:"block",position:"absolute",top:"-1000px"}),q("ie")){var a=k.style;this.__overflow=a.overflow,a.overflow="hidden"}});if(q("ie")?this.defer(l,10):l(),k.form){var o=k.value;this.reset=function(){this.getValue()!==o&&this.replaceValue(o)},n(k.form,"submit",m.hitch(this,function(){f.set(k,"disabled",this.disabled),k.value=this.getValue()}))}}else c=z.getChildrenHtml(i),i.innerHTML="";if(this.value=c,i.nodeName&&"LI"===i.nodeName&&(i.innerHTML=" <br>"),this.header=i.ownerDocument.createElement("div"),i.appendChild(this.header),this.editingArea=i.ownerDocument.createElement("div"),i.appendChild(this.editingArea),this.footer=i.ownerDocument.createElement("div"),i.appendChild(this.footer),this.name||(this.name=this.id+"_AUTOGEN"),""!==this.name&&(!b.useXDomain||b.allowXdRichTextSave)){var p=e.byId(B._scopeName+"._editor.RichText.value");if(p&&""!==p.value)for(var t,u=p.value.split(this._SEPARATOR),v=0;t=u[v++];){var w=t.split(this._NAME_CONTENT_SEP);if(w[0]===this.name){this.value=w[1],u=u.splice(v,1),p.value=u.join(this._SEPARATOR);break}}C._globalSaveHandler||(C._globalSaveHandler={},s.addOnUnload(function(){var a;for(a in C._globalSaveHandler){var b=C._globalSaveHandler[a];m.isFunction(b)&&b()}})),C._globalSaveHandler[this.id]=m.hitch(this,"_saveContent")}this.isClosed=!1;var y=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");y.id=this.id+"_iframe",y.style.border="none",y.style.width="100%",this._layoutMode?y.style.height="100%":q("ie")>=7?(this.height&&(y.style.height=this.height),this.minHeight&&(y.style.minHeight=this.minHeight)):y.style.height=this.height?this.height:this.minHeight,y.frameBorder=0,y._loadFunc=m.hitch(this,function(a){this.window=a,this.document=a.document,this.selection=new x.SelectionManager(a),q("ie")&&this._localizeEditorCommands(),this.onLoad(this.get("value"))});var A,D=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");A=q("ie")<11?'javascript:document.open();try{parent.window;}catch(e){document.domain="'+document.domain+"\";}document.write('"+D+"');document.close()":"javascript: '"+D+"'",9==q("ie")?(this.editingArea.appendChild(y),y.src=A):(y.setAttribute("src",A),this.editingArea.appendChild(y)),"LI"===i.nodeName&&(i.lastChild.style.marginTop="-1.2em"),g.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var a=j.getComputedStyle(this.domNode),b="<div id='dijitEditorBody'></div>",c=[a.fontWeight,a.fontSize,a.fontFamily].join(" "),d=a.lineHeight;d=d.indexOf("px")>=0?parseFloat(d)/parseFloat(a.fontSize):d.indexOf("em")>=0?parseFloat(d):"normal";var f="",g=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/gi,function(a){a=a.replace(/^;/gi,"")+";";var b=a.split(":")[0];if(b){b=m.trim(b),b=b.toLowerCase();var c,d="";for(c=0;c<b.length;c++){var e=b.charAt(c);switch(e){case"-":c++,e=b.charAt(c).toUpperCase();default:d+=e}}j.set(g.domNode,d,"")}f+=a+";"});var h=o('label[for="'+this.id+'"]'),i="";return h.length?i=h[0].innerHTML:this["aria-label"]?i=this["aria-label"]:this["aria-labelledby"]&&(i=e.byId(this["aria-labelledby"]).innerHTML),this.iframe.setAttribute("title",i),["<!DOCTYPE html>",this.isLeftToRight()?"<html lang='"+this.lang+"'>\n<head>\n":"<html dir='rtl' lang='"+this.lang+"'>\n<head>\n",i?"<title>"+i+"</title>":"","<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n","\t}\n","\tbody,html,#dijitEditorBody { outline: none; }","html { height: 100%; width: 100%; overflow: hidden; }\n",this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",c,";\n",this.height||q("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",d,";\n","\t}\n","\tp{ margin: 1em 0; }\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",q("ie")||q("trident")?"":"\tli{ min-height:1.2em; }\n","</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body role='main' ","onload='try{frameElement && frameElement._loadFunc(window,document)}catch(e){document.domain=\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style='"+f+"'>",b,"</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];this.styleSheets&&(a=this.styleSheets.split(";"),this.styleSheets=""),a=a.concat(this.editingAreaStyleSheets),this.editingAreaStyleSheets=[];for(var b,c="",d=0,e=u.get(this.ownerDocument);b=a[d++];){var f=new t(e.location,b).toString();this.editingAreaStyleSheets.push(f),c+='<link rel="stylesheet" type="text/css" href="'+f+'"/>'}return c},addStyleSheet:function(b){var c=b.toString(),d=u.get(this.ownerDocument);("."===c.charAt(0)||"/"!==c.charAt(0)&&!b.host)&&(c=new t(d.location,c).toString()),a.indexOf(this.editingAreaStyleSheets,c)>-1||(this.editingAreaStyleSheets.push(c),this.onLoadDeferred.then(m.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(c);else{var a=this.document.getElementsByTagName("head")[0],b=this.document.createElement("link");b.rel="stylesheet",b.type="text/css",b.href=c,a.appendChild(b)}})))},removeStyleSheet:function(b){var c=b.toString(),d=u.get(this.ownerDocument);("."===c.charAt(0)||"/"!==c.charAt(0)&&!b.host)&&(c=new t(d.location,c).toString());var e=a.indexOf(this.editingAreaStyleSheets,c);-1!==e&&(delete this.editingAreaStyleSheets[e],o('link[href="'+c+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){if(a=!!a,this._set("disabled",a),this.isLoaded){var b=q("ie")&&(this.isLoaded||!this.focusOnLoad);if(b&&(this.editNode.unselectable="on"),this.editNode.contentEditable=!a,this.editNode.tabIndex=a?"-1":this.tabIndex,b&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")}),q("mozilla")&&!a&&this._mozSettingProps){var c,d=this._mozSettingProps;for(c in d)if(d.hasOwnProperty(c))try{this.document.execCommand(c,!1,d[c])}catch(a){}}this._disabledOK=!0}},onLoad:function(b){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=A.registerIframe(this.iframe)),this.editNode=this.document.body.firstChild;var c=this;this.beforeIframeNode=h.place("<div tabIndex=-1></div>",this.iframe,"before"),this.afterIframeNode=h.place("<div tabIndex=-1></div>",this.iframe,"after"),this.iframe.onfocus=this.document.onfocus=function(){c.editNode.focus()},this.focusNode=this.editNode;var d=this.events.concat(this.captureEvents),e=this.iframe?this.document:this.editNode;if(this.own.apply(this,a.map(d,function(a){var b=a.toLowerCase().replace(/^on/,"");return n(e,b,m.hitch(this,a))},this)),this.own(n(e,"mouseup",m.hitch(this,"onClick"))),q("ie")&&(this.own(n(this.document,"mousedown",m.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1),q("webkit")&&(this._webkitListener=this.own(n(this.document,"mouseup",m.hitch(this,"onDisplayChanged")))[0],this.own(n(this.document,"mousedown",m.hitch(this,function(a){var b=a.target;!b||b!==this.document.body&&b!==this.document||this.defer("placeCursorAtEnd")})))),q("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(a){}this.isLoaded=!0,this.set("disabled",this.disabled);var f=m.hitch(this,function(){this.setValue(b),this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0),this.onDisplayChanged(),this.focusOnLoad&&p(m.hitch(this,"defer","focus",this.updateInterval)),this.value=this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(f):f()},onKeyDown:function(b){if(b.keyCode===l.SHIFT||b.keyCode===l.ALT||b.keyCode===l.META||b.keyCode===l.CTRL)return!0;if(b.keyCode===l.TAB&&this.isTabIndent&&(b.stopPropagation(),b.preventDefault(),this.queryCommandEnabled(b.shiftKey?"outdent":"indent")&&this.execCommand(b.shiftKey?"outdent":"indent")),b.keyCode==l.TAB&&!this.isTabIndent&&!b.ctrlKey&&!b.altKey)return b.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),!0;q("ie")<9&&b.keyCode===l.BACKSPACE&&"Control"===this.document.selection.type&&(b.stopPropagation(),b.preventDefault(),this.execCommand("delete")),q("ff")&&(b.keyCode!==l.PAGE_UP&&b.keyCode!==l.PAGE_DOWN||this.editNode.clientHeight>=this.editNode.scrollHeight&&b.preventDefault());var c=this._keyHandlers[b.keyCode],d=arguments;return c&&!b.altKey&&a.some(c,function(a){if(!(a.shift^b.shiftKey||a.ctrl^(b.ctrlKey||b.metaKey)))return a.handler.apply(this,d)||b.preventDefault(),!0},this),this.defer("onKeyPressed",1),!0},onKeyUp:function(){},setDisabled:function(a){k.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2),this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?f.set(this.document.body,"spellcheck",!a):this.onLoadDeferred.then(m.hitch(this,function(){f.set(this.document.body,"spellcheck",!a)})),this._set("disableSpellCheck",a)},addKeyHandler:function(a,b,c,d){"string"==typeof a&&(a=a.toUpperCase().charCodeAt(0)),m.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]),this._keyHandlers[a].push({shift:c||!1,ctrl:b||!1,handler:d})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(a){(q("ie")||q("trident"))&&this.defer(function(){A.curNode||this.ownerDocumentBody.focus()}),this.inherited(arguments);var b=this.getValue(!0);b!==this.value&&this.onChange(b),this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!q("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){if(!this.isLoaded)return void(this.focusOnLoad=!0);q("ie")<9?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus()},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove(),this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,b){var c=a.toLowerCase();return"formatblock"===c?q("safari")&&void 0===b&&(c="heading"):"hilitecolor"!==c||q("mozilla")||(c="backcolor"),c},_qcaCache:{},queryCommandAvailable:function(a){var b=this._qcaCache[a];return void 0!==b?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){function b(a){return{ie:Boolean(a&c),mozilla:Boolean(a&d),webkit:Boolean(a&e),opera:Boolean(a&f)}}var c=1,d=2,e=4,f=8,g=null;switch(a.toLowerCase()){case"bold":case"italic":case"underline":case"subscript":case"superscript":case"fontname":case"fontsize":case"forecolor":case"hilitecolor":case"justifycenter":case"justifyfull":case"justifyleft":case"justifyright":case"delete":case"selectall":case"toggledir":g=b(d|c|e|f);break;case"createlink":case"unlink":case"removeformat":case"inserthorizontalrule":case"insertimage":case"insertorderedlist":case"insertunorderedlist":case"indent":case"outdent":case"formatblock":case"inserthtml":case"undo":case"redo":case"strikethrough":case"tabindent":g=b(d|c|f|e);break;case"blockdirltr":case"blockdirrtl":case"dirltr":case"dirrtl":case"inlinedirltr":case"inlinedirrtl":g=b(c);break;case"cut":case"copy":case"paste":g=b(c|d|e|f);break;case"inserttable":g=b(d|c);break;case"insertcell":case"insertcol":case"insertrow":case"deletecells":case"deletecols":case"deleterows":case"mergecells":case"splitcell":g=b(c|d);break;default:return!1}return(q("ie")||q("trident"))&&g.ie||q("mozilla")&&g.mozilla||q("webkit")&&g.webkit||q("opera")&&g.opera},execCommand:function(a,b){var c;if(this.focused&&this.focus(),a=this._normalizeCommand(a,b),void 0!==b){if("heading"===a)throw new Error("unimplemented");"formatblock"===a&&(q("ie")||q("trident"))&&(b="<"+b+">")}var d="_"+a+"Impl";return this[d]?c=this[d](b):((b=arguments.length>1?b:null)||"createlink"!==a)&&(c=this.document.execCommand(a,!1,b)),this.onDisplayChanged(),c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);var b="_"+a+"EnabledImpl";return this[b]?this[b](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);try{return this.document.queryCommandState(a)}catch(a){return!1}},queryCommandValue:function(a){if(this.disabled||!this._disabledOK)return!1;var b;if(a=this._normalizeCommand(a),(q("ie")||q("trident"))&&"formatblock"===a)b=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(q("mozilla")&&"hilitecolor"===a){var c;try{c=this.document.queryCommandValue("styleWithCSS")}catch(a){c=!1}this.document.execCommand("styleWithCSS",!1,!0),b=this.document.queryCommandValue(a),this.document.execCommand("styleWithCSS",!1,c)}else b=this.document.queryCommandValue(a);return b},_sCall:function(a,b){return this.selection[a].apply(this.selection,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(q("mozilla"))for(var b=this.editNode.firstChild;b;){if(3===b.nodeType){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=!0,this.selection.selectElement(b);break}}else if(1===b.nodeType){a=!0;var c=b.tagName?b.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(c)?this.selection.selectElement(b):this.selection.selectElementChildren(b);break}b=b.nextSibling}else a=!0,this.selection.selectElementChildren(this.editNode);a&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var a=!1;if(q("mozilla"))for(var b=this.editNode.lastChild;b;){if(3===b.nodeType){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=!0,this.selection.selectElement(b);break}}else if(1===b.nodeType){a=!0,this.selection.selectElement(b.lastChild||b);break}b=b.previousSibling}else a=!0,this.selection.selectElementChildren(this.editNode);a&&this.selection.collapse(!1)},getValue:function(a){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,a):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(!this.isLoaded)return void this.onLoadDeferred.then(m.hitch(this,function(){this.setValue(a)}));if(!this.textarea||!this.isClosed&&this.isLoaded){a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;b.innerHTML=a,this._preDomFilterContent(b)}else this.textarea.value=a;this.onDisplayChanged(),this._set("value",this.getValue(!0))},replaceValue:function(a){this.isClosed?this.setValue(a):this.window&&this.window.getSelection&&!q("mozilla")?this.setValue(a):this.window&&this.window.getSelection?(a=this._preFilterContent(a),this.execCommand("selectall"),this.execCommand("inserthtml",a),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(a),this._set("value",this.getValue(!0))},_preFilterContent:function(b){var c=b;return a.forEach(this.contentPreFilters,function(a){a&&(c=a(c))}),c},_preDomFilterContent:function(b){b=b||this.editNode,a.forEach(this.contentDomPreFilters,function(a){a&&m.isFunction(a)&&a(b)},this)},_postFilterContent:function(b,c){var d;return m.isString(b)?d=b:(b=b||this.editNode,this.contentDomPostFilters.length&&(c&&(b=m.clone(b)),a.forEach(this.contentDomPostFilters,function(a){b=a(b)})),d=z.getChildrenHtml(b)),m.trim(d.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(d=""),a.forEach(this.contentPostFilters,function(a){d=a(d)}),d},_saveContent:function(){var a=e.byId(B._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),
a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,b){return a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),b||(a=a.replace(/'/gm,"&#39;")),a},getNodeHtml:function(a){return k.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2),z.getNodeHtml(a)},getNodeChildrenHtml:function(a){return k.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2),z.getChildrenHtml(a)},close:function(a){if(!this.isClosed){if(arguments.length||(a=!0),a&&this._set("value",this.getValue(!0)),this.interval&&clearInterval(this.interval),this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener),q("ie")&&(this.iframe.onfocus=null),this.iframe._loadFunc=null,this._iframeRegHandle&&(this._iframeRegHandle.remove(),delete this._iframeRegHandle),this.textarea){var b=this.textarea.style;b.position="",b.left=b.top="",q("ie")&&(b.overflow=this.__overflow,this.__overflow=null),this.textarea.value=this.value,h.destroy(this.domNode),this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe,g.remove(this.domNode,this.baseClass),this.isClosed=!0,this.isLoaded=!1,delete this.editNode,delete this.focusNode,this.window&&this.window._frameElement&&(this.window._frameElement=null),this.window=null,this.document=null,this.editingArea=null,this.editorObject=null}},destroy:function(){this.isClosed||this.close(!1),this._updateTimer&&this._updateTimer.remove(),this.inherited(arguments),C._globalSaveHandler&&delete C._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){return a=a.replace(/\sclass="webkit-block-placeholder"/gi,""),a=a.replace(/\sclass="apple-style-span"/gi,""),a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},_browserQueryCommandEnabled:function(a){if(!a)return!1;var b=q("ie")<9?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(a){return!1}},_createlinkEnabledImpl:function(){var a=!0;if(q("opera")){a=!!this.window.getSelection().isCollapsed||this.document.queryCommandEnabled("createlink")}else a=this._browserQueryCommandEnabled("createlink");return a},_unlinkEnabledImpl:function(){return q("mozilla")||q("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){return!(!q("mozilla")&&!q("webkit"))||this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;if(q("webkit")){var b=this.window.getSelection();b&&(b=b.toString()),a=!!b}else a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;if(q("webkit")){var b=this.window.getSelection();b&&(b=b.toString()),a=!!b}else a=this._browserQueryCommandEnabled("copy");return a},_pasteEnabledImpl:function(){return!!q("webkit")||this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(a){return q("ie")?this._inserthtmlImpl("<hr>"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){if(this.queryCommandEnabled("unlink")&&(q("mozilla")||q("webkit"))){var b=this.selection.getAncestorElement("a");return this.selection.selectElement(b),this.document.execCommand("unlink",!1,null)}return this.document.execCommand("unlink",!1,a)},_hilitecolorImpl:function(a){var b;return this._handleTextColorOrProperties("hilitecolor",a)||(q("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),b=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):b=this.document.execCommand("hilitecolor",!1,a)),b},_backcolorImpl:function(a){q("ie")&&(a=a||null);var b=this._handleTextColorOrProperties("backcolor",a);return b||(b=this.document.execCommand("backcolor",!1,a)),b},_forecolorImpl:function(a){q("ie")&&(a=a||null);var b=!1;return b=this._handleTextColorOrProperties("forecolor",a),b||(b=this.document.execCommand("forecolor",!1,a)),b},_inserthtmlImpl:function(a){a=this._preFilterContent(a);var b=!0;if(q("ie")<9){var c=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var d=c.item(0);c.length;)c.remove(c.item(0));d.outerHTML=a}else c.pasteHTML(a);c.select()}else if(q("trident")<8){var c,e=y.getSelection(this.window);if(e&&e.rangeCount&&e.getRangeAt){c=e.getRangeAt(0),c.deleteContents();var f=h.create("div");f.innerHTML=a;for(var g,i,d=this.document.createDocumentFragment();g=f.firstChild;)i=d.appendChild(g);c.insertNode(d),i&&(c=c.cloneRange(),c.setStartAfter(i),c.collapse(!1),e.removeAllRanges(),e.addRange(c))}}else q("mozilla")&&!a.length?this.selection.remove():b=this.document.execCommand("inserthtml",!1,a);return b},_boldImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("bold")),b||(b=this.document.execCommand("bold",!1,a)),b},_italicImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("italic")),b||(b=this.document.execCommand("italic",!1,a)),b},_underlineImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("underline")),b||(b=this.document.execCommand("underline",!1,a)),b},_strikethroughImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("strikethrough")),b||(b=this.document.execCommand("strikethrough",!1,a)),b},_superscriptImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("superscript")),b||(b=this.document.execCommand("superscript",!1,a)),b},_subscriptImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("subscript")),b||(b=this.document.execCommand("subscript",!1,a)),b},_fontnameImpl:function(a){var b;return(q("ie")||q("trident"))&&(b=this._handleTextColorOrProperties("fontname",a)),b||(b=this.document.execCommand("fontname",!1,a)),b},_fontsizeImpl:function(a){var b;return(q("ie")||q("trident"))&&(b=this._handleTextColorOrProperties("fontsize",a)),b||(b=this.document.execCommand("fontsize",!1,a)),b},_insertorderedlistImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(b=this._adaptIEList("insertorderedlist",a)),b||(b=this.document.execCommand("insertorderedlist",!1,a)),b},_insertunorderedlistImpl:function(a){var b=!1;return(q("ie")||q("trident"))&&(b=this._adaptIEList("insertunorderedlist",a)),b||(b=this.document.execCommand("insertunorderedlist",!1,a)),b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var c;for(c=0;c<a.childNodes.length;c++){b+=i.position(a.childNodes[c]).h}}return b},_isNodeEmpty:function(a,b){return 1===a.nodeType?!(a.childNodes.length>0)||this._isNodeEmpty(a.childNodes[0],b):3===a.nodeType&&""===a.nodeValue.substring(b)},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(var c=a.parentNode;c&&null==c.nextSibling;)c=c.parentNode;c&&b.setStart(c.nextSibling,0)}return b},_adaptIESelection:function(){var a=y.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),c=b.startContainer,d=b.startOffset;3===c.nodeType&&d>=c.length&&c.nextSibling;)d-=c.length,c=c.nextSibling;for(var e=null;this._isNodeEmpty(c,d)&&c!==e;)e=c,b=this._removeStartingRangeFromRange(c,b),c=b.startContainer,d=0;a.removeAllRanges(),a.addRange(b)}},_adaptIEFormatAreaAndExec:function(b){var c,d,e,f,g,i,j,k,l=y.getSelection(this.window),m=this.document;if(!(b&&l&&l.isCollapsed))return!1;if(this.queryCommandValue(b)){var n=this._tagNamesForCommand(b);e=l.getRangeAt(0);var o=e.startContainer;if(3===o.nodeType){var p=e.endOffset;o.length<p&&(d=this._adjustNodeAndOffset(c,p),o=d.node,p=d.offset)}for(var q;o&&o!==this.editNode;){var r=o.tagName?o.tagName.toLowerCase():"";if(a.indexOf(n,r)>-1){q=o;break}o=o.parentNode}if(q){c=e.startContainer;var s=m.createElement(q.tagName);if(h.place(s,q,"after"),c&&3===c.nodeType){var t,u,v=e.endOffset;c.length<v&&(d=this._adjustNodeAndOffset(c,v),c=d.node,v=d.offset),f=c.nodeValue,g=m.createTextNode(f.substring(0,v));var w=f.substring(v,f.length);w&&(i=m.createTextNode(w)),h.place(g,c,"before"),i&&(j=m.createElement("span"),j.className="ieFormatBreakerSpan",h.place(j,c,"after"),h.place(i,j,"after"),i=j),h.destroy(c);for(var x,z=g.parentNode,A=[];z!==q;){var B=z.tagName;x={tagName:B},A.push(x);var C=m.createElement(B);if(z.style&&C.style&&z.style.cssText&&(C.style.cssText=z.style.cssText,x.cssText=z.style.cssText),"FONT"===z.tagName&&(z.color&&(C.color=z.color,x.color=z.color),z.face&&(C.face=z.face,x.face=z.face),z.size&&(C.size=z.size,x.size=z.size)),z.className&&(C.className=z.className,x.className=z.className),i)for(t=i;t;)u=t.nextSibling,C.appendChild(t),t=u;C.tagName==z.tagName?(j=m.createElement("span"),j.className="ieFormatBreakerSpan",h.place(j,z,"after"),h.place(C,j,"after")):h.place(C,z,"after"),g=z,i=C,z=z.parentNode}if(i)for(t=i,(1===t.nodeType||3===t.nodeType&&t.nodeValue)&&(s.innerHTML="");t;)u=t.nextSibling,s.appendChild(t),t=u;var D;if(A.length){x=A.pop();var E=m.createElement(x.tagName);for(x.cssText&&E.style&&(E.style.cssText=x.cssText),x.className&&(E.className=x.className),"FONT"===x.tagName&&(x.color&&(E.color=x.color),x.face&&(E.face=x.face),x.size&&(E.size=x.size)),h.place(E,s,"before");A.length;){x=A.pop();var F=m.createElement(x.tagName);x.cssText&&F.style&&(F.style.cssText=x.cssText),x.className&&(F.className=x.className),"FONT"===x.tagName&&(x.color&&(F.color=x.color),x.face&&(F.face=x.face),x.size&&(F.size=x.size)),E.appendChild(F),E=F}k=m.createTextNode("."),j.appendChild(k),E.appendChild(k),D=y.create(this.window),D.setStart(k,0),D.setEnd(k,k.length),l.removeAllRanges(),l.addRange(D),this.selection.collapse(!1),k.parentNode.innerHTML=""}else j=m.createElement("span"),j.className="ieFormatBreakerSpan",k=m.createTextNode("."),j.appendChild(k),h.place(j,s,"before"),D=y.create(this.window),D.setStart(k,0),D.setEnd(k,k.length),l.removeAllRanges(),l.addRange(D),this.selection.collapse(!1),k.parentNode.innerHTML="";return s.firstChild||h.destroy(s),!0}}return!1}if(e=l.getRangeAt(0),(c=e.startContainer)&&3===c.nodeType){var p=e.startOffset;c.length<p&&(d=this._adjustNodeAndOffset(c,p),c=d.node,p=d.offset),f=c.nodeValue,g=m.createTextNode(f.substring(0,p));var w=f.substring(p);""!==w&&(i=m.createTextNode(f.substring(p))),j=m.createElement("span"),k=m.createTextNode("."),j.appendChild(k),g.length?h.place(g,c,"after"):g=c,h.place(j,g,"after"),i&&h.place(i,j,"after"),h.destroy(c);var D=y.create(this.window);return D.setStart(k,0),D.setEnd(k,k.length),l.removeAllRanges(),l.addRange(D),m.execCommand(b),h.place(j.firstChild,j,"before"),h.destroy(j),D.setStart(k,0),D.setEnd(k,k.length),l.removeAllRanges(),l.addRange(D),this.selection.collapse(!1),k.parentNode.innerHTML="",!0}},_adaptIEList:function(a){var b=y.getSelection(this.window);if(b.isCollapsed&&b.rangeCount&&!this.queryCommandValue(a)){var c=b.getRangeAt(0),d=c.startContainer;if(d&&3==d.nodeType&&!c.startOffset){var e="ul";"insertorderedlist"===a&&(e="ol");var f=this.document.createElement(e),g=h.create("li",null,f);h.place(f,d,"before"),g.appendChild(d),h.create("br",null,f,"after");var i=y.create(this.window);return i.setStart(d,0),i.setEnd(d,d.length),b.removeAllRanges(),b.addRange(i),this.selection.collapse(!0),!0}}return!1},_handleTextColorOrProperties:function(a,b){var c,d,e,f,g,i,k,l,m=y.getSelection(this.window),n=this.document;if(b=b||null,a&&m&&m.isCollapsed&&m.rangeCount&&(e=m.getRangeAt(0),(c=e.startContainer)&&3===c.nodeType)){var o=e.startOffset;c.length<o&&(d=this._adjustNodeAndOffset(c,o),c=d.node,o=d.offset),f=c.nodeValue,g=n.createTextNode(f.substring(0,o));""!==f.substring(o)&&(i=n.createTextNode(f.substring(o))),k=n.createElement("span"),l=n.createTextNode("."),k.appendChild(l);var p=n.createElement("span");k.appendChild(p),g.length?h.place(g,c,"after"):g=c,h.place(k,g,"after"),i&&h.place(i,k,"after"),h.destroy(c);var r=y.create(this.window);if(r.setStart(l,0),r.setEnd(l,l.length),m.removeAllRanges(),m.addRange(r),q("webkit")){var s="color";"hilitecolor"!==a&&"backcolor"!==a||(s="backgroundColor"),j.set(k,s,b),this.selection.remove(),h.destroy(p),k.innerHTML="&#160;",this.selection.selectElement(k),this.focus()}else this.execCommand(a,b),h.place(k.firstChild,k,"before"),h.destroy(k),r.setStart(l,0),r.setEnd(l,l.length),m.removeAllRanges(),m.addRange(r),this.selection.collapse(!1),l.parentNode.removeChild(l);return!0}return!1},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3===a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,offset:b}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return o(".ieFormatBreakerSpan",a).forEach(function(a){for(;a.firstChild;)h.place(a.firstChild,a,"before");h.destroy(a)}),a},_stripTrailingEmptyNodes:function(a){function b(a){return/^(p|div|br)$/i.test(a.nodeName)&&0==a.children.length&&/^[\s\xA0]*$/.test(a.textContent||a.innerText||"")||3===a.nodeType&&/^[\s\xA0]*$/.test(a.nodeValue)}for(;a.lastChild&&b(a.lastChild);)h.destroy(a.lastChild);return a},_setTextDirAttr:function(a){this._set("textDir",a),this.onLoadDeferred.then(m.hitch(this,function(){this.editNode.dir=a}))}});return C})},"dijit/_editor/range":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(a,b,c){var d={getIndex:function(a,b){for(var c,d,e=[],f=[],g=a;a!=b;){var h=0;for(c=a.parentNode;d=c.childNodes[h++];)if(d===a){--h;break}e.unshift(h),f.unshift(h-c.childNodes.length),a=c}if(e.length>0&&3==g.nodeType){for(d=g.previousSibling;d&&3==d.nodeType;)e[e.length-1]--,d=d.previousSibling;for(d=g.nextSibling;d&&3==d.nodeType;)f[f.length-1]++,d=d.nextSibling}return{o:e,r:f}},getNode:function(b,d){if(!c.isArray(b)||0==b.length)return d;var e=d;return a.every(b,function(a){return a>=0&&a<e.childNodes.length?(e=e.childNodes[a],!0):(e=null,!1)}),e},getCommonAncestor:function(a,b,c){c=c||a.ownerDocument.body;for(var d=function(a){for(var b=[];a&&(b.unshift(a),a!==c);)a=a.parentNode;return b},e=d(a),f=d(b),g=Math.min(e.length,f.length),h=e[0],i=1;i<g&&e[i]===f[i];i++)h=e[i];return h},getAncestor:function(a,b,c){for(c=c||a.ownerDocument.body;a&&a!==c;){var d=a.nodeName.toUpperCase();if(b.test(d))return a;a=a.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(a,b,c){c=c||a.ownerDocument.body,b=b||d.BlockTagNames;for(var e,f=null;a&&a!==c;){var g=a.nodeName.toUpperCase();!f&&b.test(g)&&(f=a),!e&&/^(?:BODY|TD|TH|CAPTION)$/.test(g)&&(e=a),a=a.parentNode}return{blockNode:f,blockContainer:e||a.ownerDocument.body}},atBeginningOfContainer:function(a,b,c){var d=!1,e=0==c;if(e||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(0,c))&&(e=!0),e){var f=b;for(d=!0;f&&f!==a;){if(f.previousSibling){d=!1;break}f=f.parentNode}}return d},atEndOfContainer:function(a,b,c){var d=!1,e=c==(b.length||b.childNodes.length);if(e||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(c))&&(e=!0),e){var f=b;for(d=!0;f&&f!==a;){if(f.nextSibling){d=!1;break}f=f.parentNode}}return d},adjacentNoneTextNode:function(a,b){for(var c=a,d=0-a.length||0,e=b?"nextSibling":"previousSibling";c&&3==c.nodeType;)d+=c.length,c=c[e];return[c,d]},create:function(a){return a=a||window,a.getSelection?a.document.createRange():new f},getSelection:function(a,b){if(a.getSelection)return a.getSelection();var c=new e.selection(a);return b||c._getCurrentSelection(),c}};if(!window.getSelection)var e=d.ie={cachedSelection:{},selection:function(a){this._ranges=[],this.addRange=function(a,b){this._ranges.push(a),b||a._select(),this.rangeCount=this._ranges.length},this.removeAllRanges=function(){this._ranges=[],this.rangeCount=0};var b=function(){var b=a.document.selection.createRange(),c=a.document.selection.type.toUpperCase();return new f("CONTROL"==c?e.decomposeControlRange(b):e.decomposeTextRange(b))};this.getRangeAt=function(a){return this._ranges[a]},this._getCurrentSelection=function(){this.removeAllRanges();var a=b();a?(this.addRange(a,!0),this.isCollapsed=a.collapsed):this.isCollapsed=!0}},decomposeControlRange:function(a){var b=a.item(0),c=a.item(a.length-1),e=b.parentNode,f=c.parentNode;return[e,d.getIndex(b,e).o[0],f,d.getIndex(c,f).o[0]+1]},getEndPoint:function(b,c){var e=b.duplicate();e.collapse(!c);var f,g,h,i="EndTo"+(c?"End":"Start"),j=e.parentElement();if(j.childNodes.length>0?a.every(j.childNodes,function(a,c){var k;if(3!=a.nodeType){if(e.moveToElementText(a),e.compareEndPoints(i,b)>0){if(!h||3!=h.nodeType)return f=j,g=c,!1;f=h,k=!0}else if(c==j.childNodes.length-1)return f=j,g=j.childNodes.length,!1}else c==j.childNodes.length-1&&(f=a,k=!0);if(k&&f){var l=d.adjacentNoneTextNode(f)[0];f=l?l.nextSibling:j.firstChild;var m=d.adjacentNoneTextNode(f);l=m[0];var n=m[1];return l?(e.moveToElementText(l),e.collapse(!1)):e.moveToElementText(j),e.setEndPoint(i,b),g=e.text.length-n,!1}return h=a,!0}):(f=j,g=0),!c&&1==f.nodeType&&g==f.childNodes.length){var k=f.nextSibling;k&&3==k.nodeType&&(f=k,g=0)}return[f,g]},setEndPoint:function(a,b,c){var e,f,g=a.duplicate();if(3!=b.nodeType)if(c>0){if(e=b.childNodes[c-1])if(3==e.nodeType)b=e,c=e.length;else if(e.nextSibling&&3==e.nextSibling.nodeType)b=e.nextSibling,c=0;else{g.moveToElementText(e.nextSibling?e:b);var h=e.parentNode,i=h.insertBefore(e.ownerDocument.createTextNode(" "),e.nextSibling);g.collapse(!1),h.removeChild(i)}}else g.moveToElementText(b),g.collapse(!0);if(3==b.nodeType){var j=d.adjacentNoneTextNode(b),k=j[0];f=j[1],k?(g.moveToElementText(k),g.collapse(!1),"inherit"!=k.contentEditable&&f++):(g.moveToElementText(b.parentNode),g.collapse(!0),g.move("character",1),g.move("character",-1)),c+=f,c>0&&g.move("character",c)}return g},decomposeTextRange:function(a){var b=e.getEndPoint(a),c=b[0],d=b[1],f=b[0],g=b[1];return a.htmlText.length&&(a.htmlText==a.text?g=d+a.text.length:(b=e.getEndPoint(a,!0),f=b[0],g=b[1])),[c,d,f,g]},setRange:function(a,b,c,d,f,g){var h=e.setEndPoint(a,b,c);if(a.setEndPoint("StartToStart",h),!g)var i=e.setEndPoint(a,d,f);return a.setEndPoint("EndToEnd",i||h),a}},f=d.W3CRange=b(null,{constructor:function(){arguments.length>0?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.commonAncestorContainer=null,this.startContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.startContainer!==this.endContainer?this.commonAncestorContainer=d.getCommonAncestor(this.startContainer,this.endContainer):this.commonAncestorContainer=this.startContainer,this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(a,b){b=parseInt(b),this.startContainer===a&&this.startOffset==b||(delete this._cachedBookmark,this.startContainer=a,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(a,b))},setEnd:function(a,b){b=parseInt(b),this.endContainer===a&&this.endOffset==b||(delete this._cachedBookmark,this.endContainer=a,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(a,b))},setStartAfter:function(a,b){this._setPoint("setStart",a,b,1)},setStartBefore:function(a,b){this._setPoint("setStart",a,b,0)},setEndAfter:function(a,b){this._setPoint("setEnd",a,b,1)},setEndBefore:function(a,b){this._setPoint("setEnd",a,b,0)},_setPoint:function(a,b,c,e){var f=d.getIndex(b,b.parentNode).o;this[a](b.parentNode,f.pop()+e)},_getIERange:function(){var a=(this._body||this.endContainer.ownerDocument.body).createTextRange();return e.setRange(a,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed),a},getBookmark:function(){return this._getIERange(),this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var a=this.startContainer,b=this._getIERange();3!==a.nodeType||this.startOffset||this.setStartBefore(a),b.pasteHTML(""),this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.collapsed=!0},cloneRange:function(){var a=new f([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);return a._body=this._body,a},detach:function(){this._body=null,this.commonAncestorContainer=null,this.startContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0}});return c.setObject("dijit.range",d),d})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(a,b,c){var d={};b.setObject("dijit._editor.html",d);var e=d.escapeXml=function(a,b){return a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),b||(a=a.replace(/'/gm,"&#39;")),a};return d.getNodeHtml=function(a){var b=[];return d.getNodeHtmlHelper(a,b),b.join("")},d.getNodeHtmlHelper=function(b,f){switch(b.nodeType){case 1:var g=b.nodeName.toLowerCase();if(!g||"/"==g.charAt(0))return"";f.push("<",g);var h,i=[],j={};if(c("dom-attributes-explicit")||c("dom-attributes-specified-flag"))for(var k=0;h=b.attributes[k++];){var l=h.name;if("_dj"!==l.substr(0,3)&&(!c("dom-attributes-specified-flag")||h.specified)&&!(l in j)){var m=h.value;"src"!=l&&"href"!=l||b.getAttribute("_djrealurl")&&(m=b.getAttribute("_djrealurl")),8===c("ie")&&"style"===l&&(m=m.replace("HEIGHT:","height:").replace("WIDTH:","width:")),i.push([l,m]),j[l]=m}}else{var n=/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1),o=n.outerHTML,p=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi,q=o.match(p);o=o.substr(0,o.indexOf(">")),a.forEach(q,function(a){if(a){var c=a.indexOf("=");if(c>0){var d=a.substring(0,c);if("_dj"!=d.substr(0,3)){if(("src"==d||"href"==d)&&b.getAttribute("_djrealurl"))return void i.push([d,b.getAttribute("_djrealurl")]);var e,f;switch(d){case"style":e=b.style.cssText.toLowerCase();break;case"class":e=b.className;break;case"width":if("img"===g){f=/width=(\S+)/i.exec(o),f&&(e=f[1]);break}case"height":if("img"===g){f=/height=(\S+)/i.exec(o),f&&(e=f[1]);break}default:e=b.getAttribute(d)}null!=e&&i.push([d,e.toString()])}}}},this)}i.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(var r=0;h=i[r++];)f.push(" ",h[0],'="',"string"==typeof h[1]?e(h[1],!0):h[1],'"');switch(g){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":f.push(" />");break;case"script":f.push(">",b.innerHTML,"</",g,">");break;default:f.push(">"),b.hasChildNodes()&&d.getChildrenHtmlHelper(b,f),f.push("</",g,">")}break;case 4:case 3:f.push(e(b.nodeValue,!0));break;case 8:f.push("\x3c!--",e(b.nodeValue,!0),"--\x3e");break;default:f.push("\x3c!-- Element not recognized - Type: ",b.nodeType," Name: ",b.nodeName,"--\x3e")}},d.getChildrenHtml=function(a){var b=[];return d.getChildrenHtmlHelper(a,b),b.join("")},d.getChildrenHtmlHelper=function(a,b){if(a)for(var e,f=a.childNodes||a,g=!c("ie")||f!==a,h=0;e=f[h++];)g&&e.parentNode!=a||d.getNodeHtmlHelper(e,b)},d})},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return k("dijit-legacy-requires")&&p(0,function(){a(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])}),c("dijit.Menu",o,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):b.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(a){return m.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=d.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var c=a,f=this._iframeContentWindow(c);b=l.body(f.document)}else b=a==l.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var g={node:a,iframe:c};e.set(a,"_dijitMenu"+this.id,this._bindings.push(g));var k=i.hitch(this,function(a){var b=this.selector,d=b?function(a){return j.selector(b,a)}:function(a){return a},e=this;return[j(a,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation(),a.preventDefault(),(new Date).getTime()<this._lastKeyDown+500||e._scheduleOpen(this,c,{x:a.pageX,y:a.pageY},a.target)}),j(a,d("keydown"),function(a){(93==a.keyCode||a.shiftKey&&a.keyCode==h.F10||this.leftClickToOpen&&a.keyCode==h.SPACE)&&(a.stopPropagation(),a.preventDefault(),e._scheduleOpen(this,c,null,a.target),this._lastKeyDown=(new Date).getTime())})]});g.connects=b?k(b):[],c&&(g.onloadHandler=i.hitch(this,function(){var a=this._iframeContentWindow(c),b=l.body(a.document);g.connects=k(b)}),c.addEventListener?c.addEventListener("load",g.onloadHandler,!1):c.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var b;try{b=d.byId(a,this.ownerDocument)}catch(a){return}var c="_dijitMenu"+this.id;if(b&&e.has(b,c)){for(var f,g=e.get(b,c)-1,h=this._bindings[g];f=h.connects.pop();)f.remove();var i=h.iframe;i&&(i.removeEventListener?i.removeEventListener("load",h.onloadHandler,!1):i.detachEvent("onload",h.onloadHandler)),e.remove(b,c),delete this._bindings[g]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function b(){s.refocus&&v&&v.focus(),n.close(s)}var c=a.target,e=a.iframe,h=a.coords,i=!h;if(this.currentTarget=a.delegatedTarget,h){if(e){var j=f.position(e,!0),l=this._iframeContentWindow(e),m=f.docScroll(l.document),o=g.getComputedStyle(e),p=g.toPixelValue,q=(k("ie")&&k("quirks")?0:p(e,o.paddingLeft))+(k("ie")&&k("quirks")?p(e,o.borderLeftWidth):0),r=(k("ie")&&k("quirks")?0:p(e,o.paddingTop))+(k("ie")&&k("quirks")?p(e,o.borderTopWidth):0);h.x+=j.x+q-m.x,h.y+=j.y+r-m.y}}else h=f.position(c,!0),h.x+=10,h.y+=10;var s=this,t=this._focusManager.get("prevNode"),u=this._focusManager.get("curNode"),v=!u||d.isDescendant(u,this.domNode)?t:u;n.open({popup:this,x:h.x,y:h.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"}),this.focus(),i||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),n.close(this)}},destroy:function(){b.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this),this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(a,b,c,d){return a("dijit.DropDownMenu",d,{templateString:c,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a),a.stopPropagation(),a.preventDefault()},_onLeftArrow:function(a){this.parentMenu?this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(!1):(a.stopPropagation(),a.preventDefault())}})})},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return b("dijit._MenuBase",[l,o,n,m],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){e.toggle(this.domNode,"dijitMenuActive",a),e.toggle(this.domNode,"dijitMenuPassive",!a),this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:1/0,autoFocus:!1,childSelector:function(a){var b=k.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,b="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(h(this.containerNode,h.selector(b,g.enter),function(){a.onItemHover(k.byNode(this))}),h(this.containerNode,h.selector(b,g.leave),function(){a.onItemUnhover(k.byNode(this))}),h(this.containerNode,h.selector(b,j),function(b){a.onItemClick(k.byNode(this),b),b.stopPropagation()}),h(this.containerNode,h.selector(b,"focusin"),function(){a._onItemFocus(k.byNode(this))})),this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments),a&&(-1==d||a.popup&&1==d)&&this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else{var b=this._getTopMenu();b&&b._isMenuBar&&b.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem),this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):this.passivePopupDelay<1/0&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay)),this._hoveredChild=a,a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer(),this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null,this.currentPopupItem=null,a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null),this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null),a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){if(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.focusChild(a),a.disabled)return!1;if(a.popup){this.set("selected",a),this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup()),this._stopPopupTimer();var c=a.popup;c.parentMenu=this,this.own(this._mouseoverHandle=h.once(c.domNode,"mouseover",f.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,
orient:this._orient||["after","before"],onCancel:function(){b&&d.focusChild(a),d._cleanUp()},onExecute:f.hitch(this,"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},b),this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0,this.set("activated",!0)},onClose:function(){this.set("activated",!1),this.set("selected",null),this.isShowingNow=!1,this.parentMenu=null},_closeChild:function(){this._stopPopupTimer(),this.currentPopupItem&&(this.focused&&(d.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){this._hoveredChild&&this._hoveredChild!=a&&this.onItemUnhover(this._hoveredChild),this.set("selected",a)},_onBlur:function(){this._cleanUp(!0),this.inherited(arguments)},_cleanUp:function(a){this._closeChild(),void 0===this.isShowingNow&&this.set("activated",!1),a&&this.set("selected",null)}})})},"dijit/MenuBar":function(){define(["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(a,b,c,d){return a("dijit.MenuBar",c,{templateString:d,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:!0,_orient:["below"],_moveToPopup:function(a){this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled&&this.onItemClick(this.focusedChild,a)},focusChild:function(a){this.inherited(arguments),this.activated&&a.popup&&!a.disabled&&this._openItemPopup(a,!0)},_onChildDeselect:function(a){this.currentPopupItem==a&&(this.currentPopupItem=null,a._closePopup()),this.inherited(arguments)},_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(a){this._moveToPopup(a)},_onUpArrow:function(){},onItemClick:function(a,c){!a.popup||!a.popup.isShowingNow||/^key/.test(c.type)&&c.keyCode===b.DOWN_ARROW?this.inherited(arguments):(a.focusNode.focus(),this._cleanUp(!0))}})})},"dijit/MenuBarItem":function(){define(["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(a,b,c){var d=a("dijit._MenuBarItemMixin",null,{templateString:c,_setIconClassAttr:null}),e=a("dijit.MenuBarItem",[b,d],{});return e._MenuBarItemMixin=d,e})},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(a,b,c,d,e,f){return a("dijit.MenuSeparator",[c,d,e],{templateString:f,buildRendering:function(){this.inherited(arguments),b.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(a,b,c,d,e,f,g){return a("dijit.PopupMenuItem",g,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var a=d("*",this.srcNodeRef);this.inherited(arguments,[a[0]]),this.dropDownContainer=this.srcNodeRef}},_openPopup:function(a,b){var d=this.popup;e.open(c.delegate(a,{popup:this.popup,around:this.domNode})),b&&d.focus&&d.focus()},_closePopup:function(){e.close(this.popup),this.popup.parentMenu=null},startup:function(){if(!this._started){if(this.inherited(arguments),!this.popup){var a=d("[widgetId]",this.dropDownContainer)[0];this.popup=f.byNode(a)}this.ownerDocumentBody.appendChild(this.popup.domNode),this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id),this.popup.startup(),this.popup.domNode.style.display="none",this.arrowWrapper&&b.set(this.arrowWrapper,"visibility",""),this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(a){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(a),delete this.popup),this.inherited(arguments)}})})},"dijit/ProgressBar":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(a,b,c,d,e,f,g,h){return b("dijit.ProgressBar",[f,g],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:h,_indeterminateHighContrastImagePath:a.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments),this.params&&"value"in this.params||(this.value=this.indeterminate?1/0:this.progress)},buildRendering:function(){this.inherited(arguments),this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString()),this.update()},_setDirAttr:function(a){var b="rtl"==a.toLowerCase();c.toggle(this.domNode,"dijitProgressBarRtl",b),c.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&b),this.inherited(arguments)},update:function(a){d.mixin(this,a||{});var b=this.internalProgress,e=this.domNode,f=1;this.indeterminate?e.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(f=Math.min(parseFloat(this.progress)/100,1),this.progress=f*this.maximum):(this.progress=Math.min(this.progress,this.maximum),f=this.maximum?this.progress/this.maximum:0),e.setAttribute("aria-valuenow",this.progress)),e.setAttribute("aria-labelledby",this.labelNode.id),e.setAttribute("aria-valuemin",0),e.setAttribute("aria-valuemax",this.maximum),this.labelNode.innerHTML=this.report(f),c.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate),c.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight()),b.style.width=100*f+"%",this.onChange()},_setValueAttr:function(a){this._set("value",a),a==1/0?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:a})},_setLabelAttr:function(a){this._set("label",a),this.update()},_setIndeterminateAttr:function(a){this._set("indeterminate",a),this.update()},report:function(a){return this.label?this.label:this.indeterminate?"&#160;":e.format(a,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dijit/TitlePane":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","./_CssStateMixin","./_TemplatedMixin","./layout/ContentPane","dojo/text!./templates/TitlePane.html","./_base/manager","./a11yclick"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b("dijit.TitlePane",[m,l,k],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:o.defaultDuration,baseClass:"dijitTitlePane",templateString:n,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments),c.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments),this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var a=this.hideNode,b=this.wipeNode;this._wipeIn=g.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}}),this._wipeOut=g.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(b,c){if(a.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()}),c){this[b?"_wipeIn":"_wipeOut"].play()}else this.hideNode.style.display=this.wipeNode.style.display=b?"":"none";this._started&&(b?this._onShow():this.onHide()),this.containerNode.setAttribute("aria-hidden",b?"false":"true"),this.focusNode.setAttribute("aria-pressed",b?"true":"false"),this._set("open",b),this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading"),a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(d.remove(this.focusNode,"aria-controls"),d.remove(this.focusNode,"tabIndex"),d.remove(this.focusNode,"aria-pressed")),this._set("toggleable",a),this._setCss()},_setContentAttr:function(a){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),f.setMarginBox(this.wipeNode,{h:f.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed"),e.replace(a,this._titleBarClass,b||""),e.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(b||"").replace("TitlePaneTitle","")),this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==j.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){i.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0"),this.set("title",a)}});return h("dojo-bidi")&&p.extend({_setTitleAttr:function(a){this._set("title",a),this.titleNode.innerHTML=a,this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a),this.textDir&&(a=this.enforceTextDirWithUcc(null,a)),d.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title),this.set("tooltip",this.tooltip))}}),p})},"dijit/Tooltip":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){}var t=b("dijit._MasterTooltip",[n,o],{duration:l.defaultDuration,templateString:q,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.bgIframe=new p(this.domNode),this.fadeIn=c.fadeIn({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onShow")}),this.fadeOut=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onHide")})},show:function(a,b,c,d,e,f,i){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a){if("playing"==this.fadeOut.status())return void(this._onDeck=arguments);this.containerNode.innerHTML=a,e&&this.set("textDir",e),this.containerNode.align=d?"right":"left";var j=m.around(this.domNode,b,c&&c.length?c:y.defaultPosition,!d,h.hitch(this,"orient")),k=j.aroundNodePos;"M"==j.corner.charAt(0)&&"M"==j.aroundCorner.charAt(0)?(this.connectorNode.style.top=k.y+(k.h-this.connectorNode.offsetHeight>>1)-j.y+"px",this.connectorNode.style.left=""):"M"==j.corner.charAt(1)&&"M"==j.aroundCorner.charAt(1)?this.connectorNode.style.left=k.x+(k.w-this.connectorNode.offsetWidth>>1)-j.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top=""),g.set(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=b,this.onMouseEnter=f||s,this.onMouseLeave=i||s}},orient:function(a,b,c,d,e){this.connectorNode.style.top="";var g=d.h,h=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c],this.domNode.style.width="auto";var i=f.position(this.domNode);(k("ie")||k("trident"))&&(i.w+=2);var j=Math.min(Math.max(h,1),i.w);if(f.setMarginBox(this.domNode,{w:j}),"B"==c.charAt(0)&&"B"==b.charAt(0)){var l=f.position(a),m=this.connectorNode.offsetHeight;if(l.h>g){var n=g-(e.h+m>>1);this.connectorNode.style.top=n+"px",this.connectorNode.style.bottom=""}else this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-m/2,0),l.h-m)+"px",this.connectorNode.style.top=""}else this.connectorNode.style.top="",this.connectorNode.style.bottom="";return Math.max(0,i.w-h)},_onShow:function(){k("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()),this.onMouseEnter=this.onMouseLeave=s},_onHide:function(){this.domNode.style.cssText="",this.containerNode.innerHTML="",this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});k("dojo-bidi")&&t.extend({_setAutoTextDir:function(b){this.applyTextDir(b),a.forEach(b.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a),"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}}),r.showTooltip=function(b,c,d,e,f,g,h){return d&&(d=a.map(d,function(a){return{after:"after-centered",before:"before-centered"}[a]||a})),y._masterTT||(r._masterTT=y._masterTT=new t),y._masterTT.show(b,c,d,e,f,g,h)},r.hideTooltip=function(a){return y._masterTT&&y._masterTT.hide(a)};var u="DORMANT",v="SHOW TIMER",w="SHOWING",x="HIDE TIMER",y=b("dijit.Tooltip",n,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this),this._connectIds=a.filter(h.isArrayLike(b)?b:b?[b]:[],function(a){return d.byId(a,this.ownerDocument)},this),this._connections=a.map(this._connectIds,function(a){var b=d.byId(a,this.ownerDocument),c=this.selector,e=c?function(a){return j.selector(c,a)}:function(a){return a},f=this;return[j(b,e(i.enter),function(){f._onHover(this)}),j(b,e("focusin"),function(){f._onHover(this)}),j(b,e(i.leave),h.hitch(f,"_onUnHover")),j(b,e("focusout"),h.hitch(f,"set","state",u))]},this),this._set("connectId",b)},addTarget:function(b){var c=b.id||b;-1==a.indexOf(this._connectIds,c)&&this.set("connectId",this._connectIds.concat(c))},removeTarget:function(b){var c=b.id||b,d=a.indexOf(this._connectIds,c);d>=0&&(this._connectIds.splice(d,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments),e.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;a.forEach(h.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},state:u,_setStateAttr:function(a){if(!(this.state==a||a==v&&this.state==w||a==x&&this.state==u)){switch(this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer),this._showTimer&&(this._showTimer.remove(),delete this._showTimer),a){case u:this._connectNode&&(y.hide(this._connectNode),delete this._connectNode,this.onHide());break;case v:this.state!=w&&(this._showTimer=this.defer(function(){this.set("state",w)},this.showDelay));break;case w:var b=this.getContent(this._connectNode);if(!b)return void this.set("state",u);y.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,h.hitch(this,"set","state",w),h.hitch(this,"set","state",x)),this.onShow(this._connectNode,this.position);break;case x:this._hideTimer=this.defer(function(){this.set("state",u)},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&this.set("state",u),this._connectNode=a,this.set("state",v)},_onUnHover:function(a){this.set("state",x)},open:function(a){this.set("state",u),this._connectNode=a,this.set("state",w)},close:function(){this.set("state",u)},onShow:function(){},onHide:function(){},destroy:function(){this.set("state",u),a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this),this.inherited(arguments)}});return y._MasterTooltip=t,y.show=r.showTooltip,y.hide=r.hideTooltip,y.defaultPosition=["after-centered","before-centered"],y})},"dijit/TooltipDialog":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a("dijit.TooltipDialog",[h,k,j,i],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:l,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments),this.own(f(this.domNode,"keydown",e.hitch(this,"_onKey")))},orient:function(a,c,d){var e={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[c+"-"+d];b.replace(this.domNode,e,this._currentOrientClass||""),this._currentOrientClass=e},focus:function(){this._getFocusItems(),g.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px"),this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==d.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==d.TAB){var b=a.target;this._getFocusItems(),this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(g.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(g.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}});return c("dojo-bidi")&&n.extend({_setTitleAttr:function(a){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a,this._set("title",a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}}),n})},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I){function J(a){return p.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var K=d("dijit._TreeNode",[y,z,A,B,C],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a,this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:E,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments),this._setExpando(),this._updateItemClasses(this.item),this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded),this.setSelected(!1)},_setIndentAttr:function(b){var c=Math.max(b,0)*this.tree._nodePixelIndent+"px";j.set(this.domNode,"backgroundPosition",c+" 0px"),j.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",c),a.forEach(this.getChildren(),function(a){a.set("indent",b+1)}),this._set("indent",b)},markProcessing:function(){this.state="Loading",this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null),this._applyClassAndStyle(a,"icon","Icon"),this._applyClassAndStyle(a,"label","Label"),this._applyClassAndStyle(a,"row","Row"),this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var d="_"+b+"Class",e=b+"Node",f=this[d];this[d]=this.tree["get"+c+"Class"](a,this.isExpanded),h.replace(this[e],this[d]||"",f||""),j.set(this[e],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),b=!a||!a.rowNode||"none"==a.rowNode.style.display;h.toggle(this.domNode,"dijitTreeIsRoot",b),h.toggle(this.domNode,"dijitTreeIsLast",!b&&!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],c=["*","-","+","*"],d=a?0:this.isExpandable?this.isExpanded?1:2:3;h.replace(this.expandoNode,b[d],b),this.expandoNodeText.innerHTML=c[d]},expand:function(){if(this._expandDeferred)return J(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred),this.isExpanded=!0,this.labelNode.setAttribute("aria-expanded","true"),(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role","group"),h.add(this.contentNode,"dijitTreeContentExpanded"),this._setExpando(),this._updateItemClasses(this.item),this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=l.wipeIn({node:this.containerNode,duration:x.defaultDuration}),c=this._expandDeferred=new e(function(){a.stop()});return b.after(a,"onEnd",function(){c.resolve(!0)},!0),a.play(),J(c)},collapse:function(){if(this._collapseDeferred)return J(this._collapseDeferred);this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred),this.isExpanded=!1,this.labelNode.setAttribute("aria-expanded","false"),this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false"),h.remove(this.contentNode,"dijitTreeContentExpanded"),this._setExpando(),this._updateItemClasses(this.item);var a=l.wipeOut({node:this.containerNode,duration:x.defaultDuration}),c=this._collapseDeferred=new e(function(){a.stop()});return b.after(a,"onEnd",function(){c.resolve(!0)},!0),a.play(),J(c)},indent:0,setChildItems:function(b){var c=this.tree,d=c.model,e=[],h=c.focusedChild,i=this.getChildren();a.forEach(i,function(a){A.prototype.removeChild.call(this,a)},this),this.defer(function(){a.forEach(i,function(b){function e(b){var f=d.getIdentity(b.item),g=c._itemNodesMap[f];if(1==g.length)delete c._itemNodesMap[f];else{var h=a.indexOf(g,b);-1!=h&&g.splice(h,1)}a.forEach(b.getChildren(),e)}if(!b._destroyed&&!b.getParent()){if(c.dndController.removeTreeNode(b),e(b),c.persist){var f=a.map(b.getTreePath(),function(a){return c.model.getIdentity(a)}).join("/");for(var i in c._openedNodes)i.substr(0,f.length)==f&&delete c._openedNodes[i];c._saveExpandedNodes()}c.lastFocusedChild&&!g.isDescendant(c.lastFocusedChild,c.domNode)&&delete c.lastFocusedChild,h&&!g.isDescendant(h,c.domNode)&&c.focus(),b.destroyRecursive()}})}),this.state="Loaded",b&&b.length>0?(this.isExpandable=!0,a.forEach(b,function(a){var b,f=d.getIdentity(a),g=c._itemNodesMap[f];if(g)for(var h=0;h<g.length;h++)if(g[h]&&!g[h].getParent()){b=g[h],b.set("indent",this.indent+1);break}b||(b=this.tree._createTreeNode({item:a,tree:c,isExpandable:d.mayHaveChildren(a),label:c.getLabel(a),labelType:c.model&&c.model.labelType||"text",tooltip:c.getTooltip(a),ownerDocument:c.ownerDocument,dir:c.dir,lang:c.lang,textDir:c.textDir,indent:this.indent+1}),g?g.push(b):c._itemNodesMap[f]=[b]),this.addChild(b),(this.tree.autoExpand||this.tree._state(b))&&e.push(c._expandNode(b))},this),a.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1,this._setExpando&&this._setExpando(!1),this._updateItemClasses(this.item);var j=f(e);return this.tree._startPaint(j),J(j)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();return b.unshift(this.tree.rootNode.item),b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(b){this.inherited(arguments);var c=this.getChildren();0==c.length&&(this.isExpandable=!1,this.collapse()),a.forEach(c,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0,this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false"),h.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){v.focus(this.focusNode)}});m("dojo-bidi")&&K.extend({_setTextDirAttr:function(b){!b||this.textDir==b&&this._created||(this._set("textDir",b),this.applyTextDir(this.labelNode),a.forEach(this.getChildren(),function(a){a.set("textDir",b)},this))}});var L=d("dijit.Tree",[y,D,z,C],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:F,persist:!1,autoExpand:!1,dndController:I,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){r.publish(this.id,p.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this,this.autoExpand&&(this.persist=!1),this._itemNodesMap={},!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie"),this.expandChildrenDeferred=new e,this.pendingCommandsPromise=this.expandChildrenDeferred.promise,this.inherited(arguments)},postCreate:function(){this._initState();var a=this;if(this.own(q(this.containerNode,q.selector(".dijitTreeNode",s.enter),function(b){a._onNodeMouseEnter(w.byNode(this),b)}),q(this.containerNode,q.selector(".dijitTreeNode",s.leave),function(b){a._onNodeMouseLeave(w.byNode(this),b)}),q(this.containerNode,q.selector(".dijitTreeRow",u.press),function(b){a._onNodePress(w.getEnclosingWidget(this),b)}),q(this.containerNode,q.selector(".dijitTreeRow",u),function(b){a._onClick(w.getEnclosingWidget(this),b)}),q(this.containerNode,q.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(w.getEnclosingWidget(this),b)})),this.model||this._store2model(),this.own(b.after(this.model,"onChange",p.hitch(this,"_onItemChange"),!0),b.after(this.model,"onChildrenChange",p.hitch(this,"_onItemChildrenChange"),!0),b.after(this.model,"onDelete",p.hitch(this,"_onItemDelete"),!0)),this.inherited(arguments),this.dndController){p.isString(this.dndController)&&(this.dndController=p.getObject(this.dndController));for(var c={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(c[this.dndParams[d]]=this[this.dndParams[d]]);this.dndController=new this.dndController(this,c)}this._load(),this.onLoadDeferred=J(this.pendingCommandsPromise),this.onLoadDeferred.then(p.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0,n.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=p.hitch(this,"mayHaveChildren")),this.params.getItemChildren&&(a.getChildren=p.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)})),this.model=new H(a),this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(p.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular)),this.containerNode.appendChild(b.domNode);var c=this.model.getIdentity(a);this._itemNodesMap[c]?this._itemNodesMap[c].push(b):this._itemNodesMap[c]=[b],b._updateLayout(),this._expandNode(b).then(p.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),p.hitch(this,function(a){}))},getNodesByItem:function(a){if(!a)return[];var b=p.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[b])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(b){var c=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(p.hitch(this,function(){var d=a.map(b,function(a){return!a||p.isString(a)?a:c.model.getIdentity(a)}),e=[];a.forEach(d,function(a){e=e.concat(c._itemNodesMap[a]||[])}),this.set("selectedNodes",e)}))},_setPathAttr:function(a){return J(a.length?this.set("paths",[a]).then(function(a){return a[0]}):this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(b){function c(b,e){var f=b.shift(),g=a.filter(e,function(a){return a.getIdentity()==f})[0];if(g)return b.length?d._expandNode(g).then(function(){return c(b,g.getChildren())}):g;throw new L.PathError("Could not expand path at "+f)}var d=this;return J(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return f(a.map(b,function(b){if(b=a.map(b,function(a){return p.isString(a)?a:d.model.getIdentity(a)}),b.length)return c(b,[d.rootNode]);throw new L.PathError("Empty path")}))}).then(function(a){return d.set("selectedNodes",a),d.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function b(d){return c._expandNode(d).then(function(){var c=a.filter(d.getChildren()||[],function(a){return a.isExpandable});return f(a.map(c,b))})}var c=this;return J(b(this.rootNode))},collapseAll:function(){function b(d){var e=a.filter(d.getChildren()||[],function(a){return a.isExpandable}),g=f(a.map(e,b));return!d.isExpanded||d==c.rootNode&&!c.showRoot?g:g.then(function(){return c._collapseNode(d)})}var c=this;return J(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();){
var d=b.getChildren();b=d[d.length-1]}else{var e=b.getParent();(this.showRoot||e!==this.rootNode)&&(b=e)}b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return g.isDescendant(a,b.expandoNode)||g.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,d){var e=b.target,f=this.isExpandoNode(e,a);a.isExpandable&&(c||f)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a)),b.stopPropagation(),b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){var b=a.node;this.focusNode(b),b.isExpanded?this._collapseNode(b):this._expandNode(b)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){return n.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0"),this._getNext(a)},_getRootOrFirstNode:function(){return n.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0"),this._getFirst()},_collapseNode:function(a){if(a._expandNodeDeferred&&delete a._expandNodeDeferred,"Loading"!=a.state&&a.isExpanded){var b=a.collapse();return this.onClose(a.item,a),this._state(a,!1),this._startPaint(b),b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new e,b.getChildren(c,function(b){a.unmarkProcessing(),a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){a._loadDeferred.reject(b)}));var d=a._loadDeferred.then(p.hitch(this,function(){var b=a.expand();return this.onOpen(a.item,a),this._state(a,!0),b}));return this._startPaint(d),d},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a),this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(b){var c=this.model,d=c.getIdentity(b),e=this._itemNodesMap[d];if(e){var f=this.getLabel(b),g=this.getTooltip(b);a.forEach(e,function(a){a.set({item:b,label:f,tooltip:g}),a._updateItemClasses(b)})}},_onItemChildrenChange:function(b,c){var d=this.model,e=d.getIdentity(b),f=this._itemNodesMap[e];f&&a.forEach(f,function(a){a.setChildItems(c)})},_onItemDelete:function(b){var c=this.model,d=c.getIdentity(b),e=this._itemNodesMap[d];e&&(a.forEach(e,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a),this.lastFocusedChild&&!g.isDescendant(this.lastFocusedChild,this.domNode)&&delete this.lastFocusedChild,this.focusedChild&&!g.isDescendant(this.focusedChild,this.domNode)&&this.focus(),a.destroyRecursive()},this),delete this._itemNodesMap[d])},_initState:function(){if(this._openedNodes={},this.persist&&this.cookieName){var b=c(this.cookieName);b&&a.forEach(b.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(b,c){if(!this.persist)return!1;var d=a.map(b.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[d];c?this._openedNodes[d]=!0:delete this._openedNodes[d],this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[];for(var b in this._openedNodes)a.push(b);c(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch),this.rootNode&&this.rootNode.destroyRecursive(),this.dndController&&!p.isString(this.dndController)&&this.dndController.destroy(),this.rootNode=null,this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&i.setMarginBox(this.domNode,a),this._nodePixelIndent=i.position(this.tree.indentDetector).w||this._nodePixelIndent,this.expandChildrenDeferred.then(p.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1),this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++,this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=p.hitch(this,function(){--this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});t(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer),this.containerNode.style.width="auto",this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new K(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});return m("dojo-bidi")&&L.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}}),L.PathError=k("TreePathError"),L._TreeNode=K,L})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(a){d.mixin(this,a),this.connects=[];var c=this.store;if(!c.getFeatures()["dojo.data.api.Identity"])throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");c.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([b.after(c,"onNew",d.hitch(this,"onNewItem"),!0),b.after(c,"onDelete",d.hitch(this,"onDeleteItem"),!0),b.after(c,"onSet",d.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var a;a=this.connects.pop();)a.remove()},getRoot:function(a,b){this.root?a(this.root):this.store.fetch({query:this.query,onComplete:d.hitch(this,function(b){if(1!=b.length)throw new Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0],a(this.root)}),onError:b})},mayHaveChildren:function(b){return a.some(this.childrenAttrs,function(a){return this.store.hasAttribute(b,a)},this)},getChildren:function(b,c,e){var f=this.store;if(!f.isItemLoaded(b)){var g=d.hitch(this,arguments.callee);return void f.loadItem({item:b,onItem:function(a){g(a,c,e)},onError:e})}for(var h=[],i=0;i<this.childrenAttrs.length;i++){var j=f.getValues(b,this.childrenAttrs[i]);h=h.concat(j)}var k=0;this.deferItemLoadingUntilExpand||a.forEach(h,function(a){f.isItemLoaded(a)||k++}),0==k?c(h):a.forEach(h,function(a,b){f.isItemLoaded(a)||f.loadItem({item:a,onItem:function(a){h[b]=a,0==--k&&c(h)},onError:e})})},isItem:function(a){return this.store.isItem(a)},fetchItemByIdentity:function(a){this.store.fetchItemByIdentity(a)},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return this.labelAttr?this.store.getValue(a,this.labelAttr):this.store.getLabel(a)},newItem:function(a,b,c){var d,e={parent:b,attribute:this.childrenAttrs[0]};this.newItemIdAttr&&a[this.newItemIdAttr]?this.fetchItemByIdentity({identity:a[this.newItemIdAttr],scope:this,onItem:function(f){f?this.pasteItem(f,null,b,!0,c):(d=this.store.newItem(a,e))&&void 0!=c&&this.pasteItem(d,b,b,!1,c)}}):(d=this.store.newItem(a,e))&&void 0!=c&&this.pasteItem(d,b,b,!1,c)},pasteItem:function(b,c,d,e,f){var g=this.store,h=this.childrenAttrs[0];if(c&&a.forEach(this.childrenAttrs,function(d){if(g.containsValue(c,d,b)){if(!e){var f=a.filter(g.getValues(c,d),function(a){return a!=b});g.setValues(c,d,f)}h=d}}),d)if("number"==typeof f){var i=g.getValues(d,h).slice();i.splice(f,0,b),g.setValues(d,h,i)}else g.setValues(d,h,g.getValues(d,h).concat(b))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(a,b){b&&this.getChildren(b.item,d.hitch(this,function(a){this.onChildrenChange(b.item,a)}))},onDeleteItem:function(a){this.onDelete(a)},onSetItem:function(b,c){-1!=a.indexOf(this.childrenAttrs,c)?this.getChildren(b,d.hitch(this,function(a){this.onChildrenChange(b,a)})):this.onChange(b)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(a,b,c,d,e){return b("dijit.tree.ForestStoreModel",e,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,c){a===this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:d.hitch(this,function(a){this.root.children=a,b(a)}),onError:c}):this.inherited(arguments)},isItem:function(a){return a===this.root||this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope||c.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,c){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,d,e){b===this.root&&(d||this.onLeaveRoot(a)),this.inherited(arguments,[a,b===this.root?null:b,c===this.root?null:c,d,e]),c===this.root&&this.onAddToRoot(a)},onAddToRoot:function(a){},onLeaveRoot:function(a){},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,onComplete:d.hitch(this,function(c){this.root.children=c,(b.length!=c.length||a.some(b,function(a,b){return c[b]!=a}))&&this.onChildrenChange(this.root,c)})})},onNewItem:function(a,b){this._requeryTop(),this.inherited(arguments)},onDeleteItem:function(b){-1!=a.indexOf(this.root.children,b)&&this._requeryTop(),this.inherited(arguments)},onSetItem:function(a,b,c,d){this._requeryTop(),this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dnd/common","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(a,b,c,d,e,f,g,h,i,j,k){return b("dijit.tree._dndSelector",k,{constructor:function(){this.selection={},this.anchor=null,this.events.push(h(this.tree.domNode,i.press,d.hitch(this,"onMouseDown")),h(this.tree.domNode,i.release,d.hitch(this,"onMouseUp")),h(this.tree.domNode,i.move,d.hitch(this,"onMouseMove")),h(this.tree.domNode,j.press,d.hitch(this,"onClickPress")),h(this.tree.domNode,j.release,d.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection;for(var c in b)a.push(b[c]);return a},selectNone:function(){return this.setSelection([]),this},destroy:function(){this.inherited(arguments),this.selection=this.anchor=null},addTreeNode:function(a,b){return this.setSelection(this.getSelectedTreeNodes().concat([a])),b&&(this.anchor=a),a},removeTreeNode:function(b){var c=a.filter(this.getSelectedTreeNodes(),function(a){return!f.isDescendant(a.domNode,b.domNode)});return this.setSelection(c),b},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(b){var c=this.getSelectedTreeNodes();a.forEach(this._setDifference(c,b),d.hitch(this,function(a){a.setSelected(!1),this.anchor==a&&delete this.anchor,delete this.selection[a.id]})),a.forEach(this._setDifference(b,c),d.hitch(this,function(a){a.setSelected(!0),this.selection[a.id]=a})),this._updateSelectionProperties()},_setDifference:function(b,c){a.forEach(c,function(a){a.__exclude__=!0});var d=a.filter(b,function(a){return!a.__exclude__});return a.forEach(c,function(a){delete a.__exclude__}),d},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),c=[],d=[];a.forEach(b,function(a){var b=a.getTreePath();d.push(a),c.push(b)},this);var e=a.map(d,function(a){return a.item});this.tree._set("paths",c),this.tree._set("path",c[0]||[]),this.tree._set("selectedNodes",d),this.tree._set("selectedNode",d[0]||null),this.tree._set("selectedItems",e),this.tree._set("selectedItem",e[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,this.current))){"mousedown"==a.type&&g.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var c=e.getCopyKeyState(a),d=b.id;if(!this.singular&&!a.shiftKey&&this.selection[d])return void(this._doDeselect=!0);this._doDeselect=!1,this.userSelect(b,c,a.shiftKey)}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,e.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return 2&a.compareDocumentPosition(b)?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var d=doc.createRange();return d.setStartBefore(b),c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser")},userSelect:function(a,b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){var d,e,f=this._compareNodes(this.anchor.rowNode,a.rowNode),g=this.anchor;f<0?(d=g,e=a):(d=a,e=g);for(var h=[];d!=e;)h.push(d),d=this.tree._getNext(d);h.push(e),this.setSelection(h)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||c.global;for(var d in this.selection)a.call(b,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(a,b,c,d,e,f){return b("dijit.tree._dndContainer",null,{constructor:function(b,g){this.tree=b,this.node=b.domNode,d.mixin(this,g),this.containerState="",c.add(this.node,"dojoDndContainer"),this.events=[e(this.node,f.enter,d.hitch(this,"onOverEvent")),e(this.node,f.leave,d.hitch(this,"onOutEvent")),a.after(this.tree,"_onNodeMouseEnter",d.hitch(this,"onMouseOver"),!0),a.after(this.tree,"_onNodeMouseLeave",d.hitch(this,"onMouseOut"),!0),e(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,b){var d="dojoDnd"+a,e=a.toLowerCase()+"State";c.replace(this.node,d+b,d+this[e]),this[e]=b},_addItemClass:function(a,b){c.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){c.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/_Templated":function(){define(["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(a,b,c,d,e,f,g){return f.extend(a,{waiRole:"",waiState:""}),e("dijit._Templated",[b,c],{widgetsInTemplate:!1,constructor:function(){g.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(a,b){var c=this.inherited(arguments),e=b(a,"waiRole");e&&a.setAttribute("role",e);var f=b(a,"waiState");return f&&d.forEach(f.split(/\s*,\s*/),function(b){if(-1!=b.indexOf("-")){var c=b.split("-");a.setAttribute("aria-"+c[0],c[1])}}),c}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(a,b,c,d,e){return c("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var a=this.domNode;if(this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),e.parse(a,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(d.hitch(this,function(a){this._startupWidgets=a;for(var b=0;b<a.length;b++)this._processTemplateNode(a[b],function(a,b){return a[b]},function(a,b,c){return b in a?a.connect(a,b,c):a.on(b,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser})),!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(a,b,c){return!(!b(a,"dojoType")&&!b(a,"data-dojo-type"))||this.inherited(arguments)},startup:function(){a.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()}),this._startupWidgets=null,this.inherited(arguments)}})})},"dijit/_TimePicker":function(){define(["dojo/_base/array","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/query","dojo/mouse","dojo/on","./_WidgetBase","./form/_ListMouseMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return e("dijit._TimePicker",[o,p],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:d.toISOString,buildRendering:function(){this.inherited(arguments),this.containerNode=this.domNode,this.timeMenu=this.domNode},setValue:function(a){h.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",a)},_setValueAttr:function(a){this._set("value",a),this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a),this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){for(var e=[],f=0;f<this._maxIncrement;f++){var g=this._createOption(f);g&&e.push(g)}return e},_showText:function(){var b=d.fromISOString;this.domNode.innerHTML="",this._clickableIncrementDate=b(this.clickableIncrement),this._visibleIncrementDate=b(this.visibleIncrement);var c=function(a){return 60*a.getHours()*60+60*a.getMinutes()+a.getSeconds()},e=c(this._clickableIncrementDate),f=c(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=b(this.pickerMin),this._refDate.setFullYear(1970,0,1),this._clickableIncrement=1,this._visibleIncrement=f/e;var g=b(this.pickerMax);g.setFullYear(1970,0,1);var h=.001*(g.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((h+1)/e);var i=this._getFilteredNodes();a.forEach(i,function(a){this.domNode.appendChild(a)},this),!i.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments),this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var d=new Date(this._refDate),e=this._clickableIncrementDate;d.setHours(d.getHours()+e.getHours()*a,d.getMinutes()+e.getMinutes()*a,d.getSeconds()+e.getSeconds()*a),"time"==this.constraints.selector&&d.setFullYear(1970,0,1);var h=c.format(d,this.constraints);if(this.filterString&&0!==h.toLowerCase().indexOf(this.filterString))return null;var i=this.ownerDocument.createElement("div");return i.className=this.baseClass+"Item",i.date=d,i.idx=a,g.create("div",{class:this.baseClass+"ItemInner",innerHTML:h},i),a%this._visibleIncrement<1&&a%this._visibleIncrement>-1?f.add(i,this.baseClass+"Marker"):a%this._clickableIncrement||f.add(i,this.baseClass+"Tick"),this.isDisabledDate(d)&&f.add(i,this.baseClass+"ItemDisabled"),this.value&&!b.compare(this.value,d,this.constraints.selector)&&(i.selected=!0,f.add(i,this.baseClass+"ItemSelected"),this._selectedDiv=i,f.contains(i,this.baseClass+"Marker")?f.add(i,this.baseClass+"MarkerSelected"):f.add(i,this.baseClass+"TickSelected"),this._highlightOption(i,!0)),i},onOpen:function(){this.inherited(arguments),this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){var b=a.target.date||a.target.parentNode.date;b&&!this.isDisabledDate(b)&&(this._highlighted_option=null,this.set("value",b),this.onChange(b))},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}f.toggle(a,this.baseClass+"ItemHover",b),f.contains(a,this.baseClass+"Marker")?f.toggle(a,this.baseClass+"MarkerHover",b):f.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){return a.keyCode==i.DOWN_ARROW?(this.selectNextNode(),a.stopPropagation(),a.preventDefault(),!1):a.keyCode==i.UP_ARROW?(this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1):a.keyCode==i.ENTER||a.keyCode===i.TAB?!this._keyboardSelected&&a.keyCode===i.TAB||(this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option}),a.keyCode===i.TAB):void 0},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(a,b,c,d){return a("dijit.form._ListMouseMixin",d,{postCreate:function(){this.inherited(arguments),this.domNode.dojoClick=!0,this._listConnect("click","_onClick"),this._listConnect("mousedown","_onMouseDown"),this._listConnect("mouseup","_onMouseUp"),this._listConnect("mouseover","_onMouseOver"),this._listConnect("mouseout","_onMouseOut")},_onClick:function(a,b){this._setSelectedAttr(b,!1),this._deferredClick&&this._deferredClick.remove(),this._deferredClick=this.defer(function(){this._deferredClick=null,this.onClick(b)})},_onMouseDown:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging=!0,this._setSelectedAttr(b,!1)},_onMouseUp:function(a,b){this._isDragging=!1;var c=this.selected,d=this._hoveredNode;c&&b==c?this.defer(function(){this._onClick(a,c)}):d&&this.defer(function(){this._onClick(a,d)})},_onMouseOut:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging&&(this._cancelDrag=(new Date).getTime()+1e3)},_onMouseOver:function(a,b){if(this._cancelDrag){(new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null}this._hoveredNode=b,this.onHover(b),this._isDragging&&this._setSelectedAttr(b,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(a,b,c){return a("dijit.form._ListBase",null,{selected:null,_listConnect:function(a,c){var d=this;return d.own(b(d.containerNode,b.selector(function(a,b,c){return a.parentNode==c},a),function(a){d[c](a,this)}))},selectFirstNode:function(){for(var a=this.containerNode.firstChild;a&&"none"==a.style.display;)a=a.nextSibling;this._setSelectedAttr(a,!0)},selectLastNode:function(){for(var a=this.containerNode.lastChild;a&&"none"==a.style.display;)a=a.previousSibling;this._setSelectedAttr(a,!0)},selectNextNode:function(){var a=this.selected;if(a){for(var b=a.nextSibling;b&&"none"==b.style.display;)b=b.nextSibling;b?this._setSelectedAttr(b,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var a=this.selected;if(a){for(var b=a.previousSibling;b&&"none"==b.style.display;)b=b.previousSibling;b?this._setSelectedAttr(b,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(a,b){if(this.selected!=a){var d=this.selected;d&&this.onDeselect(d),a&&(b&&c.scrollIntoView(a),this.onSelect(a)),this._set("selected",a)}else a&&this.onSelect(a)}})})},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(a,b,c,d,e,f,g,h,i){return d("dijit-legacy-requires")&&f(0,function(){a(["dijit/form/RadioButton"])}),b("dijit.form.CheckBox",[g,h],{templateString:i,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0),this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments),this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&e("label[for='"+this.id+"']").addClass("dijitFocusedLabel"),this.inherited(arguments)},_onBlur:function(){this.id&&e("label[for='"+this.id+"']").removeClass("dijitFocusedLabel"),this.inherited(arguments)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(a,b){return a("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(a){this._set("readOnly",a),b.set(this.focusNode,"readOnly",a)},_setLabelAttr:void 0,_getSubmitValue:function(a){return null==a||""===a?"on":a},_setValueAttr:function(a){a=this._getSubmitValue(a),this._set("value",a),b.set(this.focusNode,"value",a)},reset:function(){this.inherited(arguments),this._set("value",this._getSubmitValue(this.params.value)),b.set(this.focusNode,"value",this.value)},_onClick:function(a){return this.readOnly?(a.stopPropagation(),a.preventDefault(),!1):this.inherited(arguments)}})})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(a,b,c){return a("dijit.form.ComboBox",[b,c],{})})},"dijit/form/ValidationTextBox":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(a,b,c,d,e,f,g){var h;return h=a("dijit.form.ValidationTextBox",e,{templateString:g,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,c){c!=h.prototype[a]&&(b.deprecated("ValidationTextBox id="+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",a),this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments),this._refreshState()},validator:function(a,b){return new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();return this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error"),this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false"),"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a)),this.set("message",b),c},displayMessage:function(a){a&&this.focused?f.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):f.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused),this.inherited(arguments)},constructor:function(a){this.constraints=c.clone(this.constraints),this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments),this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang),this._set("constraints",a),this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a),this._refreshState()},_computeRegexp:function(a){var b=this.pattern;if("function"==typeof b&&(b=b.call(this,a)),b!=this._lastRegExp){var c="";this._lastRegExp=b,".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":c+=a;break;case")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(a){c=this.pattern}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments),this.messages=d.getLocalization("dijit.form","validate",this.lang),this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(a){this._set("required",a),this.focusNode.setAttribute("aria-required",a),this._refreshState()},_setMessageAttr:function(a){this._set("message",a),this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0,this.inherited(arguments)},_onBlur:function(){this.displayMessage(""),this.inherited(arguments)},destroy:function(){f.hide(this.domNode),this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(a,b,c,d,e,f,g,h,i,j,k){var l=a("dijit.form.TextBox"+(g("dojo-bidi")?"_NoBidi":""),[h,i],{templateString:j,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:g("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)&&(this.templateString=this._singleNodeTemplate),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),g("ie")<9&&this.defer(function(){try{var a=c.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var d=this.domNode.getElementsByTagName("INPUT");if(d)for(var e=0;e<d.length;e++)d[e].style.fontFamily=b}}}catch(a){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=b.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(f(this._phspan,"mousedown",function(a){a.preventDefault()}),f(this._phspan,"touchend, pointerup, MSPointerUp",e.hitch(this,function(){this.focus()})))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a)),this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return d.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(a){d.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),g("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});return g("ie")<9&&(l.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&a.text.length>0},k._setSelectionRange=i._setSelectionRange=function(a,b,c){if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveStart("character",-99999),d.moveStart("character",b),d.moveEnd("character",c-b),d.select()}}),g("dojo-bidi")&&(l=a("dijit.form.TextBox",l,{_setPlaceHolderAttr:function(a){this.inherited(arguments),this.applyTextDir(this._phspan)}})),l})},"dijit/form/_TextBoxMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(a,b,c,d,e,f,g,h){var i=b("dijit.form._TextBoxMixin"+(d("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null===d||"number"==typeof d&&isNaN(d)?"":this.filter(this.format(d,this.constraints)),0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&(c=null))),null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a)),this.textbox.value=a,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){this._processInput(a),this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(a){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){function a(a){var b;if("keydown"==a.type){switch(b=a.keyCode){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(b>=65&&b<=90||b>=48&&b<=57||b==e.SPACE)return;var c=!1;for(var d in e)if(e[d]===a.keyCode){c=!0;break}if(!c)return}}if(b=a.charCode>=32?String.fromCharCode(a.charCode):a.charCode,b||(b=a.keyCode>=65&&a.keyCode<=90||a.keyCode>=48&&a.keyCode<=57||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode),b||(b=229),"keypress"==a.type){if("string"!=typeof b)return;if((b>="a"&&b<="z"||b>="A"&&b<="Z"||b>="0"&&b<="9"||" "===b)&&(a.ctrlKey||a.metaKey||a.altKey))return}if("input"==a.type){if(this.__skipInputEvent)return void(this.__skipInputEvent=!1)}else this.__skipInputEvent=!0;var g,h={faux:!0};for(g in a)if(!/^(layer[XY]|returnValue|keyLocation)$/.test(g)){var i=a[g];"function"!=typeof i&&void 0!==i&&(h[g]=i)}f.mixin(h,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0,a.preventDefault()},stopPropagation:function(){a.stopPropagation()}}),!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation()),h._wasConsumed||this.defer(function(){this._onInput(h)})}this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(g(this.textbox,"keydown, keypress, paste, cut, input, compositionend",f.hitch(this,a)),g(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){return null===a?this._blankValue:"string"!=typeof a?a:(this.trim&&(a=f.trim(a)),this.uppercase&&(a=a.toUpperCase()),this.lowercase&&(a=a.toLowerCase()),this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)})),a)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=g.once(this.domNode,"mouseup, touchend",f.hitch(this,function(a){this._isTextSelected()||i.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return d("dojo-bidi")&&(i=b("dijit.form._TextBoxMixin",i,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),i._setSelectionRange=h._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)},i.selectInputText=h.selectInputText=function(a,b,d){a=c.byId(a),isNaN(b)&&(b=0),isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),i._setSelectionRange(a,b,d)}catch(a){}},i})},"dijit/form/ComboBoxMixin":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(a,b,c,d,e,f,g,h,i){return a("dijit.form.ComboBoxMixin",[h,f],{dropDownClass:g,hasDownArrow:!0,templateString:i,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a),this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage(""),this.inherited(arguments)},_setStoreAttr:function(a){a.get||d.mixin(a,{_oldAPI:!0,get:function(a){var c=new b;return this.fetchItemByIdentity({identity:a,onItem:function(a){c.resolve(a)},onError:function(a){c.reject(a)}}),c.promise},query:function(a,c){var f=new b(function(){g.abort&&g.abort()});f.total=new b;var g=this.fetch(d.mixin({query:a,onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},c));return e(f)}}),this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;if(a&&this._setStoreAttr(a),this.inherited(arguments),!this.params.store&&this.store&&!this.store._oldAPI){var b=this.declaredClass;d.mixin(this.store,{getValue:function(a,d){return c.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0"),a[d]},getLabel:function(a){return c.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0"),a.name},fetch:function(a){c.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var e=["dojo/data/ObjectStore"];require(e,d.hitch(this,function(b){new b({objectStore:this}).fetch(a)}))}})}},buildRendering:function(){this.inherited(arguments),this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dijit/form/_AutoCompleterMixin":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin","./_SearchMixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b("dijit.form._AutoCompleterMixin",k,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(h("ie")){var c=a.ownerDocument.selection.createRange().duplicate(),d=a.createTextRange();c.move("character",0),d.move("character",0);try{d.setEndPoint("EndToEnd",c),b=String(d.text).replace(/\r/g,"").length}catch(a){}}return b},_setCaretPos:function(a,b){b=parseInt(b),j.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments),this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(a.charCode>=32)){var b=a.charCode||a.keyCode;if(b!=d.ALT&&b!=d.CTRL&&b!=d.META&&b!=d.SHIFT){var c=this.dropDown,e=null;if(this._abortQuery(),this.inherited(arguments),!(a.altKey||a.ctrlKey||a.metaKey))switch(this._opened&&(e=c.getHighlightedOption()),b){case d.PAGE_DOWN:case d.DOWN_ARROW:case d.PAGE_UP:case d.UP_ARROW:this._opened&&this._announceOption(e),a.stopPropagation(),a.preventDefault();break;case d.ENTER:if(e){if(e==c.nextButton){this._nextSearch(1),a.stopPropagation(),a.preventDefault();break}if(e==c.previousButton){this._nextSearch(-1),a.stopPropagation(),a.preventDefault();break}a.stopPropagation(),a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case d.TAB:var f=this.get("displayedValue");if(c&&(f==c._messages.previousMessage||f==c._messages.nextMessage))break;e&&(this._selectOption(e),a.stopPropagation(),a.preventDefault());case d.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=this.focusNode;j.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){var d=this.autoComplete?this._getCaretPos(b):b.value.length;d+1>b.value.length&&(b.value=a,j.selectInputText(b,d))}else b.value=a,j.selectInputText(b)},_openResultList:function(a,b,c){var d=this.dropDown.getHighlightedOption();if(this.dropDown.clearResultList(),!a.length&&0==c.start)return void this.closeDropDown();this._nextSearch=this.dropDown.onPage=e.hitch(this,function(b){a.nextPage(-1!==b),this.focus()}),this.dropDown.createOptions(a,c,e.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),d&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(b[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)},_showResultList:function(){this.closeDropDown(!0),this.openDropDown(),this.dropDown.highlightFirstOption(),this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery(),this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;!b||a!=b._messages.previousMessage&&a!=b._messages.nextMessage?void 0===this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0),this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c),this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var d=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(d,this.searchAttr):d[this.searchAttr]).toString(),this.set("item",d,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length),this.focusNode.setAttribute("aria-activedescendant",c.get(a,"id")),this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown(),a&&this._announceOption(a),this._setCaretPos(this.focusNode,this.focusNode.value.length),this._handleOnChange(this.value,!0),this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0,this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup",c=e.isString(this.dropDownClass)?e.getObject(this.dropDownClass,!1):this.dropDownClass;this.dropDown=new c({onChange:e.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a,this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){if(this.inherited(arguments),!this.store&&this.srcNodeRef){var a=this.srcNodeRef;if(this.store=new i({},a),!("value"in this.params)){var b=this.item=this.store.fetchSelectedItem();if(b){var c=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,c):b[c]}}}},postCreate:function(){var b=f('label[for="'+this.id+'"]');b.length&&(b[0].id||(b[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",b[0].id)),this.inherited(arguments),a.after(this,"onSearch",e.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){var b=this.labelFunc(a,this.store),c=this.labelType;return"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),c="html"),{html:"html"==c,label:b}},doHighlight:function(a,b){var c=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}");return b=g.escapeString(b),this._escapeHtml(a.replace(new RegExp((0==d?"^":"")+"("+b+")"+(d==this.queryExpr.length-4?"$":""),c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null,this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,d){this._set("item",d||null),null==a&&(a=""),this.inherited(arguments)}});return h("dojo-bidi")&&l.extend({_setTextDirAttr:function(a){this.inherited(arguments),this.dropDown&&this.dropDown._set("textDir",a)}}),l})},"dijit/form/DataList":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(a,b,c,d,e,f){function g(a){return{id:a.value,value:a.value,name:c.trim(a.innerText||a.textContent||"")}}return a("dijit.form.DataList",e,{constructor:function(a,e){this.domNode=b.byId(e),c.mixin(this,a),this.id&&f.add(this),this.domNode.style.display="none",this.inherited(arguments,[{data:d("option",this.domNode).map(g)}])},destroy:function(){f.remove(this.id)},fetchSelectedItem:function(){var a=d("> option[selected]",this.domNode)[0]||d("> option",this.domNode)[0];return a&&g(a)}})})},"dijit/form/_SearchMixin":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(a,b,c,d,e,f,g){return a("dijit.form._SearchMixin",null,{pageSize:1/0,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return new RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,d){return c?".*":d?".":b||"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove()),this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove()),this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&!this.readOnly){var c=a.charOrCode;if(!("type"in a&&"key"==a.type.substring(0,3)&&(a.altKey||(a.ctrlKey||a.metaKey)&&"x"!=c&&"v"!=c||c==b.SHIFT))){var d=!1;switch(this._prev_key_backspace=!1,c){case b.DELETE:case b.BACKSPACE:this._prev_key_backspace=!0,this._maskValidSubsetError=!0,d=!0;break;default:d="string"==typeof c||229==c}d&&(this.store?this.searchTimer=this.defer("_startSearchFromInput",1):this.onSearch())}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){this._abortQuery();var b,d=this,g=c.clone(this.query),h={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},i=e.substitute(this.queryExpr,[a.replace(/([\\\*\?])/g,"\\$1")]),j=function(){var a=d._fetchHandle=d.store.query(g,h);d.disabled||d.readOnly||b!==d._lastQuery||f(a,function(c){d._fetchHandle=null,d.disabled||d.readOnly||b!==d._lastQuery||f(a.total,function(a){c.total=a;var b=d.pageSize;(isNaN(b)||b>c.total)&&(b=c.total),c.nextPage=function(a){h.direction=a=!1!==a,h.count=b,a?(h.start+=c.length,h.start>=c.total&&(h.count=0)):(h.start-=b,h.start<0&&(h.count=Math.max(b+h.start,0),h.start=0)),h.count<=0?(c.length=0,d.onSearch(c,g,h)):j()},d.onSearch(c,g,h)})},function(a){d._fetchHandle=null,d._cancelingQuery})};c.mixin(h,this.fetchProperties),this.store._oldAPI?b=i:(b=this._patternToRegExp(i),b.toString=function(){return i}),this._lastQuery=g[this.searchAttr]=b,this._queryDeferHandle=this.defer(j,this.searchDelay)},constructor:function(){this.query={},this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=this.list;a&&(this.store=g.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(a,b,c,d,e,f,g,h){return a("dijit.form._ComboBoxMenu",[e,f,h,g],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments),this.isLeftToRight()||(b.add(this.previousButton,"dijitMenuItemRtl"),b.add(this.nextButton,"dijitMenuItemRtl")),this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");return a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),a.setAttribute("role","option"),a},onHover:function(a){b.add(a,"dijitMenuItemHover")},onUnhover:function(a){b.remove(a,"dijitMenuItemHover")},onSelect:function(a){b.add(a,"dijitMenuItemSelected")},onDeselect:function(a){b.remove(a,"dijitMenuItemSelected")},_page:function(a){var b=0,d=this.domNode.scrollTop,e=c.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<e;){var f=this.getHighlightedOption();if(a){if(!f.previousSibling||"none"==f.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!f.nextSibling||"none"==f.nextSibling.style.display)break;this.selectNextNode()}var g=this.domNode.scrollTop;b+=(g-d)*(a?-1:1),d=g}},handleKey:function(a){switch(a.keyCode){case d.DOWN_ARROW:return this.selectNextNode(),!1;case d.PAGE_DOWN:return this._page(!1),!1;case d.UP_ARROW:return this.selectPreviousNode(),!1;case d.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(a,b,c,d,e){var f=b("dijit.form._ComboBoxMenuMixin"+(d("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments),this._messages=e.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments),this.previousButton.innerHTML=this._messages.previousMessage,this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this._set("value",a),this.onChange(a)},onClick:function(a){a==this.previousButton?(this._setSelectedAttr(null),this.onPage(-1)):a==this.nextButton?(this._setSelectedAttr(null),this.onPage(1)):this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(a,b){var c=this._createMenuItem(),d=b(a);return d.html?c.innerHTML=d.label:c.appendChild(c.ownerDocument.createTextNode(d.label)),""==c.innerHTML&&(c.innerHTML="&#160;"),c},createOptions:function(b,d,e){this.items=b,this.previousButton.style.display=0==d.start?"none":"",c.set(this.previousButton,"id",this.id+"_prev"),a.forEach(b,function(a,b){var d=this._createOption(a,e);d.setAttribute("item",b),c.set(d,"id",this.id+b),this.nextButton.parentNode.insertBefore(d,this.nextButton)},this);var f=!1;b.total&&!b.total.then&&-1!=b.total?d.start+d.count<b.total?f=!0:d.start+d.count>b.total&&d.count==b.length&&(f=!0):d.count==b.length&&(f=!0),this.nextButton.style.display=f?"":"none",c.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var a=this.containerNode;a.childNodes.length>2;)a.removeChild(a.childNodes[a.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});return d("dojo-bidi")&&(f=b("dijit.form._ComboBoxMenuMixin",f,{_createOption:function(){var a=this.inherited(arguments);return this.applyTextDir(a),a}})),f})},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(a,b,c,d,e){return a("dijit.form.ComboButton",d,{templateString:e,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(a){a.keyCode==b[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(c.focus(this._popupStateNode),a.stopPropagation(),a.preventDefault())},_onArrowKeyDown:function(a){a.keyCode==b[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(c.focus(this.titleNode),a.stopPropagation(),a.preventDefault())},focus:function(a){this.disabled||c.focus("start"==a?this.titleNode:this._popupStateNode)}})})},"dijit/form/CurrencyTextBox":function(){define(["dojo/currency","dojo/_base/declare","dojo/_base/lang","./NumberTextBox"],function(a,b,c,d){return b("dijit.form.CurrencyTextBox",d,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",_formatter:a.format,_parser:a.parse,_regExpGenerator:a.regexp,parse:function(a,b){var e=this.inherited(arguments);return isNaN(e)&&/\d+/.test(a)&&(e=c.hitch(c.delegate(this,{_parser:d.prototype._parser}),"inherited")(arguments)),e},_setConstraintsAttr:function(b){!b.currency&&this.currency&&(b.currency=this.currency),this.inherited(arguments,[a._mixInDefaults(c.mixin(b,{exponent:!1}))])}})})},"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(a,b,c,d,e,f){var g=function(a){var b,a=a||{},d=c.getLocalization("dojo.cldr","number",c.normalizeLocale(a.locale)),e=a.pattern?a.pattern:d[(a.type||"decimal")+"Format"];return b="number"==typeof a.places?a.places:"string"==typeof a.places&&a.places.length>0?a.places.replace(/.*,/,""):-1!=e.indexOf(".")?e.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:d.decimal,places:b}},h=a("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(b.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:e.format,_regExpGenerator:e.regexp,_decimalInfo:g(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(a){var b="number"==typeof a.places?a.places:0;b&&b++,"number"!=typeof a.max&&(a.max=9*Math.pow(10,15-b)),"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-b)),this.inherited(arguments,[a]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=g(a)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var a=this.get("value");if("number"==typeof a&&!isNaN(a)){var b=this.format(a,this.constraints);void 0!==b&&(this.textbox.value=b)}this.inherited(arguments)}},format:function(a,c){var d=String(a);return"number"!=typeof a?d:isNaN(a)?"":"rangeCheck"in this&&this.rangeCheck(a,c)||!1===c.exponent||!/\de[-+]?\d/i.test(d)?(this.editOptions&&this.focused&&(c=b.mixin({},c,this.editOptions)),this._formatter(a,c)):d},_parser:e.parse,parse:function(a,c){var d=this._parser(a,b.mixin({},c,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(d)&&(d=this._parser(a,c)),d},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){return null==a||"string"==typeof a&&""==a?NaN:("number"!=typeof a||isNaN(a)||0==a||(a=e.round(a,this._decimalInfo.places)),this.inherited(arguments,[a]))},serialize:function(a,b){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=b.hitch(b.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,b,c){void 0!==a&&void 0===c&&(c=String(a),"number"==typeof a?isNaN(a)?c="":("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))&&(c=void 0):a?a=void 0:(c="",a=NaN)),this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);{if(!isNaN(a)||""===this.textbox.value)return a;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+e._realNumberRegexp(b.delegate(this.constraints))+"$").test(this.textbox.value)){var c=Number(this.textbox.value);return isNaN(c)?void 0:c}}},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!(isNaN(b)||!this.rangeCheck(b,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var a="number"==typeof this.constraints.min,b="number"==typeof this.constraints.max,c=this.get("value");if(isNaN(c)||!a&&!b)return this.inherited(arguments);var e=0|c,f=c<0,g=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),h=this.maxLength||20,i=h-this.textbox.value.length,j=g?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",k=g?e+"."+j:e+"",l=d.rep("9",i),m=c,n=c;return f?m=Number(k+l):n=Number(k+l),!(a&&n<this.constraints.min||b&&m>this.constraints.max)}}),i=a("dijit.form.NumberTextBox",[f,h],{baseClass:"dijitTextBox dijitNumberTextBox"});return i.Mixin=h,i})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(a,b,c){return a("dijit.form.RangeBoundTextBox",c,{rangeMessage:"",rangeCheck:function(a,b){return!("min"in b&&!(this.compare(a,b.min)>=0)||"max"in b&&!(this.compare(a,b.max)<=0))},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var b=!1;if("min"in this.constraints){var c=this.constraints.min;b=this.compare(a,"number"==typeof c&&c>=0&&0!=a?0:c)<0}if(!b&&"max"in this.constraints){var d=this.constraints.max;b=this.compare(a,"number"!=typeof d||d>0?d:0)>0}return b},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var b=this.get("value");return null==b||""===b||"number"==typeof b&&isNaN(b)||this.isInRange(a)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=b.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(a,b,c,d){return a("dijit.form.MappedTextBox",d,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return null!=a?"string"==typeof a?a:this.serialize(a,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=c.place("<input type='hidden'"+(this.name&&!b("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(a,b,c){return a("dijit.form.DateTextBox",c,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:b,_selector:"date",
maxHeight:1/0,value:new Date("")})})},"dijit/form/_DateTimeTextBox":function(){define(["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(a,b,c,d,e,f,g,h){return new Date("X"),d("dijit.form._DateTimeTextBox",[f,g],{templateString:h,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:b.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},compare:function(b,c){var d=this._isInvalidDate(b),e=this._isInvalidDate(c);if(d||e)return d&&e?0:d?-1:1;var f=this.format(b,this._unboundedConstraints),g=this.format(c,this._unboundedConstraints),h=this.parse(f,this._unboundedConstraints),i=this.parse(g,this._unboundedConstraints);return f==g?0:a.compare(h,i,this._selector)},autoWidth:!0,format:function(a,b){return a?this.dateLocaleModule.format(a,b):""},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,b){return a.toGregorian&&(a=a.toGregorian()),c.toISOString(a,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){c=c||{},this.dateModule=c.datePackage?e.getObject(c.datePackage,!1):a,this.dateClassObj=this.dateModule.Date||Date,this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value)),this.dateLocaleModule=c.datePackage?e.getObject(c.datePackage+".locale",!1):b,this._set("pattern",this.dateLocaleModule.regexp),this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none"),this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector,a.fullYear=!0;var b=c.fromISOString;"string"==typeof a.min&&(a.min=b(a.min),this.dateClassObj instanceof Date||(a.min=new this.dateClassObj(a.min))),"string"==typeof a.max&&(a.max=b(a.max),this.dateClassObj instanceof Date||(a.max=new this.dateClassObj(a.max))),this.inherited(arguments),this._unboundedConstraints=e.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,b,d){void 0!==a&&("string"==typeof a&&(a=c.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a))),this.inherited(arguments,[a,b,d]),this.value instanceof Date&&(this.filterString=""),this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){if("value"==a){b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b));var c=this._get("value");if(c instanceof this.dateClassObj&&0==this.compare(b,c))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj),this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var b=e.isString(this.popupClass)?e.getObject(this.popupClass,!1):this.popupClass,c=this,d=this.get("value");this.dropDown=new b({onChange:function(a){c.set("value",a,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:d,textDir:c.textDir,currentFocus:this._isInvalidDate(d)?this.dropDownDefaultValue:d,constraints:c.constraints,filterString:c.filterString,datePackage:c.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(a,b,c,d,e){return a("dijit.form.FilteringSelect",[d,e],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,b,c,d){b&&b[this.searchAttr]!==this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery||(a.length?this.set("item",a[0],d):this.set("value","",d||void 0===d&&!this.focused,this.textbox.value,null))},_openResultList:function(a,b,c){b[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(a,d,e,f){if(this._onChangeActive||(d=null),void 0===f){if((null===a||""===a)&&(a="",!b.isString(e)))return void this._setDisplayedValueAttr(e||"",d);var g=this;this._lastQuery=a,c(this.store.get(a),function(a){g._callbackSetLabel(a?[a]:[],void 0,void 0,d)})}else this.valueNode.value=a,this.inherited(arguments,[a,d,e,f])},_setItemAttr:function(a,b,c){this.inherited(arguments),this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(a,d){if(null==a&&(a=""),!this._created){if(!("displayedValue"in this.params))return;d=!1}if(this.store){this.closeDropDown();var e,f=b.clone(this.query),g=this._getDisplayQueryString(a);this.store._oldAPI?e=g:(e=this._patternToRegExp(g),e.toString=function(){return g}),this._lastQuery=f[this.searchAttr]=e,this.textbox.value=a,this._lastDisplayedValue=a,this._set("displayedValue",a);var h=this,i={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};b.mixin(i,this.fetchProperties),this._fetchHandle=this.store.query(f,i),c(this._fetchHandle,function(a){h._fetchHandle=null,h._callbackSetLabel(a||[],f,i,d)},function(a){h._fetchHandle=null,h._cancelingQuery})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/Form":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/sniff","../_Widget","../_TemplatedMixin","./_FormMixin","../layout/_ContentPaneResizeMixin"],function(a,b,c,d,e,f,g,h){return a("dijit.form.Form",[e,f,g,h],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"",this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){b.set(this.domNode,"encType",a),d("ie")&&(this.domNode.encoding=a),this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){return this.reset(a),a.stopPropagation(),a.preventDefault(),!1},_onSubmit:function(a){var b=this.constructor.prototype;this.execute==b.execute&&this.onExecute==b.onExecute||(c.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues())),!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/HorizontalSlider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=b("dijit.form._SliderMover",k,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=e.position(b.sliderBarContainer,!0),b._setPixelValue_=h.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());var d=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-d:d,c[b._pixelCount],!1)},destroy:function(a){k.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null,b._setValueAttr(b.value,!0)}}),w=b("dijit.form.HorizontalSlider",[s,t],{templateString:u,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:1/0,pageIncrement:2,clickSelect:!0,slideDuration:o.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case g.HOME:this._setValueAttr(this.minimum,!1);break;case g.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?g.RIGHT_ARROW:g.LEFT_ARROW:case!1===this._descending?g.DOWN_ARROW:g.UP_ARROW:case!1===this._descending?g.PAGE_DOWN:g.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?g.LEFT_ARROW:g.RIGHT_ARROW:case!1===this._descending?g.UP_ARROW:g.DOWN_ARROW:case!1===this._descending?g.PAGE_UP:g.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation(),a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(i("ie")||p.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){p.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault();var b=e.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0),this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;(d<=1||d==1/0)&&(d=b),d--;var e=b/d,f=Math.round(a/e);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*f/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a),this.valueNode.value=a,this.focusNode.setAttribute("aria-valuenow",a),this.inherited(arguments);var c=this.maximum>this.minimum?(a-this.minimum)/(this.maximum-this.minimum):0,e=!1===this._descending?this.remainingBar:this.progressBar,f=!1===this._descending?this.progressBar:this.remainingBar;if(this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0),b&&this.slideDuration>0&&e.style[this._progressPixelSize]){var g=this,h={},i=parseFloat(e.style[this._progressPixelSize]),j=this.slideDuration*(c-i/100);if(0==j)return;j<0&&(j=0-j),h[this._progressPixelSize]={start:i,end:100*c,units:"%"},this._inProgressAnim=d.animateProperty({node:e,duration:j,onAnimate:function(a){f.style[g._progressPixelSize]=100-parseFloat(a[g._progressPixelSize])+"%"},onEnd:function(){delete g._inProgressAnim},properties:h}),this._inProgressAnim.play()}else e.style[this._progressPixelSize]=100*c+"%",f.style[this._progressPixelSize]=100*(1-c)+"%"},_bumpValue:function(a,b){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var c=f.getComputedStyle(this.sliderBarContainer),d=e.getContentBox(this.sliderBarContainer,c),g=this.discreteValues;(g<=1||g==1/0)&&(g=d[this._pixelCount]),g--;var h=(this.value-this.minimum)*g/(this.maximum-this.minimum)+a;h<0&&(h=0),h>g&&(h=g),h=h*(this.maximum-this.minimum)/g+this.minimum,this._setValueAttr(h,b)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==g.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==g.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){a.stopPropagation(),a.preventDefault(),this._bumpValue(a.wheelDelta<0?-1:1,!0)},startup:function(){this._started||(a.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){-1==a?this._setValueAttr(this.value,!0):this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments),this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var a=l('label[for="'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id)),this.focusNode.setAttribute("aria-valuemin",this.minimum),this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments),this.showButtons&&this.own(q.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),q.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500)),this.own(n(this.domNode,m.wheel,h.hitch(this,"_mouseWheeled")));var a=b(v,{widget:this});this._movable=new j(this.sliderHandle,{mover:a}),this._layoutHackIE7()},destroy:function(){this._movable.destroy(),this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0),this.inherited(arguments)}});return w._Mover=v,w})},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(a,b,c,d,e,f){var g=a("dojo.dnd.move.constrainedMoveable",f,{constraints:function(){},within:!1,constructor:function(a,b){b||(b={}),this.constraints=b.constraints,this.within=b.within},onFirstMove:function(a){var c=this.constraintBox=this.constraints.call(this,a);if(c.r=c.l+c.w,c.b=c.t+c.h,this.within){var d=b.getMarginSize(a.node);c.r-=d.w,c.b-=d.h}},onMove:function(a,b){var c=this.constraintBox,d=a.node.style;this.onMoving(a,b),b.l=b.l<c.l?c.l:c.r<b.l?c.r:b.l,b.t=b.t<c.t?c.t:c.b<b.t?c.b:b.t,d.left=b.l+"px",d.top=b.t+"px",this.onMoved(a,b)}});return{constrainedMoveable:g,boxConstrainedMoveable:a("dojo.dnd.move.boxConstrainedMoveable",g,{box:{},constructor:function(a,b){var c=b&&b.box;this.constraints=function(){return c}}}),parentConstrainedMoveable:a("dojo.dnd.move.parentConstrainedMoveable",g,{area:"content",constructor:function(a,d){var e=d&&d.area;this.constraints=function(){var a=this.node.parentNode,d=c.getComputedStyle(a),f=b.getMarginBox(a,d);if("margin"==e)return f;var g=b.getMarginExtents(a,d);return f.l+=g.l,f.t+=g.t,f.w-=g.w,f.h-=g.h,"border"==e?f:(g=b.getBorderExtents(a,d),f.l+=g.l,f.t+=g.t,f.w-=g.w,f.h-=g.h,"padding"==e?f:(g=b.getPadExtents(a,d),f.l+=g.l,f.t+=g.t,f.w-=g.w,f.h-=g.h,f))}}})}})},"dijit/form/MultiSelect":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-geometry","dojo/sniff","dojo/query","./_FormValueWidget","dojo/NodeList-dom"],function(a,b,c,d,e,f){var g=b("dijit.form.MultiSelect"+(d("dojo-bidi")?"_NoBidi":""),f,{size:7,baseClass:"dijitMultiSelect",templateString:"<select multiple='multiple' ${!nameAttrSetting} data-dojo-attach-point='containerNode,focusNode' data-dojo-attach-event='onchange: _onChange'></select>",addSelected:function(a){a.getSelected().forEach(function(b){this.containerNode.appendChild(b),this.domNode.scrollTop=this.domNode.offsetHeight;var c=a.domNode.scrollTop;a.domNode.scrollTop=0,a.domNode.scrollTop=c},this),this._set("value",this.get("value"))},getSelected:function(){return e("option",this.containerNode).filter(function(a){return a.selected})},_getValueAttr:function(){return a.map(this.getSelected(),function(a){return a.value})},multiple:!0,_setMultipleAttr:function(a){},_setValueAttr:function(b){d("android")?e("option",this.containerNode).orphan().forEach(function(c){var d=c.ownerDocument.createElement("option");d.value=c.value,d.selected=-1!=a.indexOf(b,c.value),d.text=c.text,d.originalText=c.originalText,this.containerNode.appendChild(d)},this):e("option",this.containerNode).forEach(function(c){c.selected=-1!=a.indexOf(b,c.value)}),this.inherited(arguments)},invertSelection:function(a){var b=[];e("option",this.containerNode).forEach(function(a){a.selected||b.push(a.value)}),this._setValueAttr(b,!(!1===a||null==a))},_onChange:function(){this._handleOnChange(this.get("value"),!0)},resize:function(a){a&&c.setMarginBox(this.domNode,a)},postCreate:function(){this._set("value",this.get("value")),this.inherited(arguments)}});return d("dojo-bidi")&&(g=b("dijit.form.MultiSelect",g,{addSelected:function(a){a.getSelected().forEach(function(a){a.text=this.enforceTextDirWithUcc(this.restoreOriginalText(a),a.text)},this),this.inherited(arguments)},_setTextDirAttr:function(a){this.textDir==a&&this._created||!this.enforceTextDirWithUcc||(this._set("textDir",a),e("option",this.containerNode).forEach(function(a){this._created||a.value!==a.text||(a.value=a.text),a.text=this.enforceTextDirWithUcc(a,a.originalText||a.text)},this))}})),g})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(a,b,c,d){return a("dijit.form.NumberSpinner",[c,d.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(a,b){var c=this.constraints,d=isNaN(a),e=!isNaN(c.max),f=!isNaN(c.min);d&&0!=b&&(a=b>0?f?c.min:e?c.max:0:e?this.constraints.max:f?c.min:0);var g=a+b;return d||isNaN(g)?a:(e&&g>c.max&&(g=c.max),f&&g<c.min&&(g=c.min),g)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.keyCode!=b.HOME&&a.keyCode!=b.END||a.ctrlKey||a.altKey||a.metaKey||void 0===this.get("value"))){var c=this.constraints[a.keyCode==b.HOME?"min":"max"];"number"==typeof c&&this._setValueAttr(c,!1),a.stopPropagation(),a.preventDefault()}}})})},"dijit/form/_Spinner":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","dojo/on","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(a,b,c,d,e,f,g,h,i,j){return a("dijit.form._Spinner",h,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:.9,smallDelta:1,largeDelta:10,templateString:i,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(a,b,c){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),b*c),!1),j.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,c,d){var e=this.smallDelta;if(c==this.textbox){var f=d.keyCode;e=f==b.PAGE_UP||f==b.PAGE_DOWN?this.largeDelta:this.smallDelta,c=f==b.UP_ARROW||f==b.PAGE_UP?this.upArrowNode:this.downArrowNode}-1==a?this._arrowReleased(c):this._arrowPressed(c,c==this.upArrowNode?1:-1,e)},_wheelTimer:null,_mouseWheeled:function(a){a.stopPropagation(),a.preventDefault();var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=a.wheelDelta>0?1:-1);var c=a.detail?-1*a.detail:b;if(0!==c){var d=this[c>0?"upArrowNode":"downArrowNode"];this._arrowPressed(d,c,this.smallDelta),this._wheelTimer&&this._wheelTimer.remove(),this._wheelTimer=this.defer(function(){this._arrowReleased(d)},50)}},_setConstraintsAttr:function(a){this.inherited(arguments),this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,b){this.focusNode.setAttribute("aria-valuenow",a),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.own(f(this.domNode,e.wheel,c.hitch(this,"_mouseWheeled")),g.addListener(this.upArrowNode,this.textbox,{keyCode:b.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),g.addListener(this.downArrowNode,this.textbox,{keyCode:b.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),g.addListener(this.upArrowNode,this.textbox,{keyCode:b.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),g.addListener(this.downArrowNode,this.textbox,{keyCode:b.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(a,b,c){return a("dijit.form.RadioButton",[b,c],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query!css2","../registry"],function(a,b,c,d,e,f){return b("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var a=[];return e("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(d.hitch(this,function(b){if(b.name==this.name&&b.form==this.focusNode.form){var c=f.getEnclosingWidget(b);c&&a.push(c)}})),a},_setCheckedAttr:function(b){this.inherited(arguments),this._created&&b&&a.forEach(this._getRelatedWidgets(),d.hitch(this,function(a){a!=this&&a.checked&&a.set("checked",!1)}))},_getSubmitValue:function(a){return null==a?"on":a},_onClick:function(b){return this.checked||this.disabled?(b.stopPropagation(),b.preventDefault(),!1):this.readOnly?(b.stopPropagation(),b.preventDefault(),a.forEach(this._getRelatedWidgets(),d.hitch(this,function(a){c.set(this.focusNode||this.domNode,"checked",a.checked)})),!1):this.inherited(arguments)}})})},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(h.hitch(this,a,b))}}var u=b("dijit.form._SelectMenu",m,{autoFocus:!0,buildRendering:function(){this.inherited(arguments),this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments),this.own(i(this.domNode,"selectstart",function(a){a.preventDefault(),a.stopPropagation()}))},focus:function(){var b=!1,c=this.parentWidget.value;h.isArray(c)&&(c=c[c.length-1]),c&&a.forEach(this.parentWidget._getChildren(),function(a){a.option&&c===a.option.value&&(b=!0,this.focusChild(a,!1))},this),b||this.inherited(arguments)}}),v=b("dijit.form.Select"+(j("dojo-bidi")?"_NoBidi":""),[k,l,q],{baseClass:"dijitSelect dijitValidationTextBox",templateString:s,_buttonInputDisabled:j("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){if(this.inherited(arguments),this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[a>=0?a:0].value)}this.dropDown=new u({id:this.id+"_menu",parentWidget:this}),d.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var b=h.hitch(this,"_setValueAttr",a),c=new n({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):a.label)||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});return c.focusNode.setAttribute("role","option"),c}return new o({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){var a=r.byNode(a);return a&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(b){if(!0===b)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{a.forEach(this._getChildren(),function(a){a.destroyRecursive()});var c=new n({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(c)}else this._updateSelection();this._isLoaded=!1,this._childrenLoaded=!0,this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments),this._refreshState()},_setValueAttr:function(a){this.inherited(arguments),c.set(this.valueNode,"value",this.get("value")),this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(a){this._set("required",a),this.focusNode.setAttribute("aria-required",a),this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1,this._set("options",a)},_setDisplay:function(a){var b=("text"===this.labelType?(a||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+b+"</span>"},validate:function(a){var b=this.disabled||this.isValid(a);this._set("state",b?"":this._hasBeenBlurred?"Error":"Incomplete"),this.focusNode.setAttribute("aria-invalid",b?"false":"true");var c=b?"":this._missingMsg;return c&&this.focused&&this._hasBeenBlurred?p.show(c,this.domNode,this.tooltipPosition,!this.isLeftToRight()):p.hide(this.domNode),this._set("message",c),b},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments),p.hide(this.domNode),this._refreshState()},postMixInProperties:function(){this.inherited(arguments),this._missingMsg=f.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments),this.own(i(this.domNode,"selectstart",function(a){a.preventDefault(),a.stopPropagation()})),this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[g.LEFT_ARROW],delete a[g.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments),d.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0),this._isLoaded=!0,a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown),p.hide(this.domNode),this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){p.hide(this.domNode),this.inherited(arguments),this.validate(!1)}});return j("dojo-bidi")&&(v=b("dijit.form.Select",v,{_setDisplay:function(a){this.inherited(arguments),this.applyTextDir(this.containerNode)}})),v._Menu=u,v.prototype._onContainerKeydown=t("_onContainerKeydown"),v.prototype._onContainerKeypress=t("_onContainerKeypress"),v})},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return e("dijit.form._FormSelectWidget",m,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(b){var c=this.options||[];return null==b?c:i.isArray(b)?a.map(b,"return this.getOptions(item);",this):(i.isString(b)&&(b={value:b}),i.isObject(b)&&(a.some(c,function(a,c){for(var d in b)if(!(d in a)||a[d]!=b[d])return!1;return b=c,!0})||(b=-1)),b>=0&&b<c.length?c[b]:null)},addOption:function(b){a.forEach(i.isArray(b)?b:[b],function(a){a&&i.isObject(a)&&this.options.push(a)},this),this._loadChildren()},removeOption:function(b){var c=this.getOptions(i.isArray(b)?b:[b]);a.forEach(c,function(b){b&&(this.options=a.filter(this.options,function(a){return a.value!==b.value||a.label!==b.label}),this._removeOptionItem(b))},this),this._loadChildren()},updateOption:function(b){a.forEach(i.isArray(b)?b:[b],function(a){var b,c=this.getOptions({value:a.value});if(c)for(b in a)c[b]=a[b]},this),this._loadChildren()},setStore:function(a,b,c){h.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0"),this._deprecatedSetStore(a,b,c)},_deprecatedSetStore:function(e,f,g){var h=this.store;if(g=g||{},h!==e){for(var j;j=this._notifyConnections.pop();)j.remove();e.get||(i.mixin(e,{_oldAPI:!0,get:function(a){var c=new b;return this.fetchItemByIdentity({identity:a,onItem:function(a){c.resolve(a)},onError:function(a){c.reject(a)}}),c.promise},query:function(a,c){var d=new b(function(){e.abort&&e.abort()});d.total=new b;var e=this.fetch(i.mixin({query:a,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},c));return new l(d)}}),e.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[c.after(e,"onNew",i.hitch(this,"_onNewItem"),!0),c.after(e,"onDelete",i.hitch(this,"_onDeleteItem"),!0),c.after(e,"onSet",i.hitch(this,"_onSetItem"),!0)])),this._set("store",e)}return this.options&&this.options.length&&this.removeOption(this.options),this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),g.query&&this._set("query",g.query),g.queryOptions&&this._set("queryOptions",g.queryOptions),e&&e.query&&(this._loadingStore=!0,this.onLoadDeferred=new b,this._queryRes=e.query(this.query,this.queryOptions),k(this._queryRes,i.hitch(this,function(b){if(this.sortByLabel&&!g.sort&&b.length)if(e.getValue)b.sort(d.createSortFunction([{attribute:e.getLabelAttributes(b[0])[0]}],e));else{var c=this.labelAttr;b.sort(function(a,b){return a[c]>b[c]?1:b[c]>a[c]?-1:0})}g.onFetch&&(b=g.onFetch.call(this,b,g)),a.forEach(b,function(a){this._addOptionForItem(a)},this),this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(i.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0)),this._loadingStore=!1,this.set("value","_pendingValue"in this?this._pendingValue:f),delete this._pendingValue,
this.loadChildrenOnOpen?this._pseudoLoadChildren(b):this._loadChildren(),this.onLoadDeferred.resolve(!0),this.onSetStore()}),function(a){this.onLoadDeferred.reject(a)})),h},_setValueAttr:function(b,c){if(this._onChangeActive||(c=null),this._loadingStore)return void(this._pendingValue=b);if(null!=b){b=i.isArray(b)?a.map(b,function(a){return i.isObject(a)?a:{value:a}}):i.isObject(b)?[b]:[{value:b}],b=a.filter(this.getOptions(b),function(a){return a&&a.value});var d=this.getOptions()||[];this.multiple||b[0]&&b[0].value||!d.length||(b[0]=d[0]),a.forEach(d,function(c){c.selected=a.some(b,function(a){return a.value===c.value})});var e=a.map(b,function(a){return a.value});if(void 0!==e&&void 0!==e[0]){var f=a.map(b,function(a){return a.label});this._setDisplay(this.multiple?f:f[0]),this.inherited(arguments,[this.multiple?e:e[0],c]),this._updateSelection()}}},_getDisplayedValueAttr:function(){var b=a.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?b:b[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(a.forEach(this._getChildren(),function(a){a.destroyRecursive()}),a.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null,this._set("value",this._getValueFromOpts());var b=[].concat(this.value);if(b&&b[0]){var c=this;a.forEach(this._getChildren(),function(d){var e=a.some(b,function(a){return d.option&&a===d.option.value});e&&!c.multiple&&(c.focusedChild=d),g.toggle(d.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),e),d.domNode.setAttribute("aria-selected",e?"true":"false")},this)}},_getValueFromOpts:function(){var b=this.getOptions()||[];if(!this.multiple&&b.length){var c=a.filter(b,function(a){return a.selected})[0];return c&&c.value?c.value:(b[0].selected=!0,b[0].value)}return this.multiple?a.map(a.filter(b,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){var b=this.store;this.removeOption({value:b.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;if(b.isItemLoaded&&!b.isItemLoaded(a))return void b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this});var c=this._getOptionObjForItem(a);this.addOption(c)},constructor:function(a){this._oValue=(a||{}).value||null,this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments),f.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?j("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+h._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]),this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments),c.after(this,"onChange",i.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,{query:this.query,queryOptions:this.queryOptions})),this._storeInitialized=!0},startup:function(){this._loadChildren(),this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(a,b,c,d){return a("dijit.form.SimpleTextarea",d,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),c("ie")&&this.cols&&b.add(this.textbox,"dijitTextAreaCols")},filter:function(a){return a&&(a=a.replace(/\r/g,"")),this.inherited(arguments)},_onInput:function(a){if(this.maxLength){var b=parseInt(this.maxLength),d=this.textbox.value.replace(/\r/g,""),e=d.length-b;if(e>0){var f=this.textbox;if(f.selectionStart){var g=f.selectionStart,h=0;c("opera")&&(h=(this.textbox.value.substring(0,g).match(/\r/g)||[]).length),this.textbox.value=d.substring(0,g-e-h)+d.substring(g-h),f.setSelectionRange(g-e,g-e)}else if(this.ownerDocument.selection){f.focus();var i=this.ownerDocument.selection.createRange();i.moveStart("character",-e),i.text="",i.select()}}}this.inherited(arguments)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(a,b,c,d){return a("dijit.form.Textarea",[d,c],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments),b.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/window","../Viewport"],function(a,b,c,d,e,f,g){return c.add("textarea-needs-help-shrinking",function(){var a=f.body(),c=b.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},a,"last"),d=c.scrollHeight>=c.clientHeight;return a.removeChild(c),d}),a("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments),this.resize()},postCreate:function(){this.inherited(arguments);var a=this.textbox;a.style.overflowY="hidden",this.own(e(a,"focus, resize",d.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments),this.own(g.on("resize",d.hitch(this,"_resizeLater"))),this._resizeLater()},_onInput:function(a){this.inherited(arguments),this.resize()},_estimateHeight:function(){var a=this.textbox;a.rows=(a.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function a(){var a=!1;""===b.value&&(b.value=" ",a=!0);var c=b.scrollHeight;return a&&(b.value=""),c}var b=this.textbox;if("hidden"==b.style.overflowY&&(b.scrollTop=0),!this.busyResizing){if(this.busyResizing=!0,a()||b.offsetHeight){var d=a()+Math.max(b.offsetHeight-b.clientHeight,0),e=d+"px";if(e!=b.style.height&&(b.style.height=e,b.rows=1),c("textarea-needs-help-shrinking")){var f,g=a(),h=g,i=b.style.minHeight,j=4,k=b.scrollTop;for(b.style.minHeight=e,b.style.height="auto";d>0;){b.style.minHeight=Math.max(d-j,4)+"px",f=a();var l=h-f;if(d-=l,l<j)break;h=f,j<<=1}b.style.height=d+"px",b.style.minHeight=i,b.scrollTop=k}b.style.overflowY=a()>b.clientHeight?"auto":"hidden","hidden"==b.style.overflowY&&(b.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(a,b,c,d,e){return a("dijit.form.TimeTextBox",e,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:d,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(a){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),a.keyCode){case b.ENTER:case b.TAB:case b.ESCAPE:case b.DOWN_ARROW:case b.UP_ARROW:break;default:this.defer(function(){var a=this.get("displayedValue");this.filterString=a&&!this.parse(a,this.constraints)?a.toLowerCase():"",this._opened&&this.closeDropDown(),this.openDropDown()})}}})})},"dijit/layout/AccordionContainer":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=c("dijit.layout._AccordionButton",[q,s,t],{templateString:w,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");f.set(this.titleTextNode,"id",a+"_title"),this.focusNode.setAttribute("aria-labelledby",f.get(this.titleTextNode,"id")),e.setSelectable(this.domNode,!1)},getTitleHeight:function(){return i.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0),n.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a),this.focusNode.setAttribute("aria-expanded",a?"true":"false"),this.focusNode.setAttribute("aria-selected",a?"true":"false"),this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});l("dojo-bidi")&&x.extend({_setLabelAttr:function(a){this._set("label",a),f.set(this.titleTextNode,"innerHTML",a),this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a),f.set(this.titleTextNode,"title",a),this.applyTextDir(this.titleTextNode)}});var y=c("dijit.layout._AccordionInnerContainer"+(l("dojo-bidi")?"_NoBidi":""),[q,t],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=h.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var a=this.contentWidget,b=k.isString(this.buttonWidget)?k.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent}).placeAt(this.domNode),this.containerNode=h.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode),this.containerNode.setAttribute("aria-labelledby",this.button.id),h.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",k.hitch(this,function(b,c,d){a.set("label",d)})),b.watch("tooltip",k.hitch(this,function(b,c,d){a.set("title",d)})),b.watch("iconClass",k.hitch(this,function(b,c,d){a.set("iconClass",d)}))]},_setSelectedAttr:function(a){if(this._set("selected",a),this.button.set("selected",a),a){var b=this.contentWidget;b.onSelected&&b.onSelected()}},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive(),b.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()}),delete this.contentWidget._buttonWidget,delete this.contentWidget._wrapperWidget,this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});l("dojo-bidi")&&(y=c("dijit.layout._AccordionInnerContainer",y,{postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,c,d){a.set("textDir",d)}))}}));var z=c("dijit.layout.AccordionContainer",u,{duration:o.defaultDuration,buttonWidget:x,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments),this.domNode.style.overflow="hidden",this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var a=this.selectedChildWidget;if(a){var c=a._wrapperWidget.domNode,d=i.getMarginExtents(c),e=i.getPadBorderExtents(c),f=a._wrapperWidget.containerNode,g=i.getMarginExtents(f),h=i.getPadBorderExtents(f),j=this._contentBox,k=0;b.forEach(this.getChildren(),function(b){b!=a&&(k+=i.getMarginSize(b._wrapperWidget.domNode).h)}),this._verticalSpace=j.h-k-d.h-e.h-g.h-h.h-a._buttonWidget.getTitleHeight(),this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-d.w-e.w-g.w-h.w},a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=y({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this}),this.inherited(arguments),h.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(h.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget),g.remove(a.domNode,"dijitHidden"),this.inherited(arguments)},getChildren:function(){return b.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop(),b.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()}),this.inherited(arguments)},_showChild:function(a){return a._wrapperWidget.containerNode.style.display="block",this.inherited(arguments)},_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none",this.inherited(arguments)},_transition:function(a,b,c){l("ie")<8&&(c=!1),this._animation&&(this._animation.stop(!0),delete this._animation);var e=this;if(a){a._wrapperWidget.set("selected",!0);var f=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}if(b&&(b._wrapperWidget.set("selected",!1),c||this._hideChild(b)),c){var g=a._wrapperWidget.containerNode,h=b._wrapperWidget.containerNode,j=a._wrapperWidget.containerNode,k=i.getMarginExtents(j),m=i.getPadBorderExtents(j),n=k.h+m.h;h.style.height=e._verticalSpace-n+"px",this._animation=new d.Animation({node:g,duration:this.duration,curve:[1,this._verticalSpace-n-1],onAnimate:function(a){a=Math.floor(a),g.style.height=a+"px",h.style.height=e._verticalSpace-n-a+"px"},onEnd:function(){delete e._animation,g.style.height="auto",b._wrapperWidget.containerNode.style.display="none",h.style.height="auto",e._hideChild(b)}}),this._animation.onStop=this._animation.onEnd,this._animation.play()}return f},_onKeyDown:function(a,b){if(!this.disabled&&!a.altKey&&(b||a.ctrlKey)){var c=a.keyCode;b&&(c==j.LEFT_ARROW||c==j.UP_ARROW)||a.ctrlKey&&c==j.PAGE_UP?(this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()):(b&&(c==j.RIGHT_ARROW||c==j.DOWN_ARROW)||a.ctrlKey&&(c==j.PAGE_DOWN||c==j.TAB))&&(this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault())}}});return l("dijit-legacy-requires")&&p(0,function(){a(["dijit/layout/AccordionPane"])}),z._InnerContainer=y,z._Button=x,z})},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){f("dijit-legacy-requires")&&i(0,function(){var a=["dijit/layout/StackController"];require(a)});var o=c("dijit.layout.StackContainer",n,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments),d.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments),this.own(h(this.domNode,"keydown",g.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var c=this.getChildren();a.forEach(c,this._setupChild,this),this.persist?this.selectedChildWidget=l.byId(b(this.id+"_selectedChild")):a.some(c,function(a){return a.selected&&(this.selectedChildWidget=a),a.selected},this);var d=this.selectedChildWidget;!d&&c[0]&&(d=this.selectedChildWidget=c[0],d.selected=!0),j.publish(this.id+"-startup",{children:c,selected:d,textDir:this.textDir}),this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=e.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",a.domNode,"replace"),d=a["aria-label"]||a.title||a.label;d&&c.setAttribute("aria-label",d),e.place(b,c),a._wrapper=c,this.inherited(arguments),"none"==b.style.display&&(b.style.display="block"),a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments),this._started&&(j.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(b){var c=a.indexOf(this.getChildren(),b);if(this.inherited(arguments),e.destroy(b._wrapper),delete b._wrapper,this._started&&j.publish(this.id+"-removeChild",b),!this._descendantsBeingDestroyed){if(this.selectedChildWidget===b&&(this.selectedChildWidget=void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(c-1,0)])}this._started&&this.layout()}},selectChild:function(a,c){var d;return a=l.byId(a),this.selectedChildWidget!=a&&(d=this._transition(a,this.selectedChildWidget,c),this._set("selectedChildWidget",a),j.publish(this.id+"-selectChild",a),this.persist&&b(this.id+"_selectedChild",this.selectedChildWidget.id)),k(d||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);return a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize()),c},_adjacent:function(b){var c=this.getChildren(),d=a.indexOf(c,this.selectedChildWidget);return d+=b?1:c.length-1,c[d%c.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){j.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();return a.isFirstChild=a==b[0],a.isLastChild=a==b[b.length-1],a._set("selected",!0),a._wrapper&&d.replace(a._wrapper,"dijitVisible","dijitHidden"),a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1),a._wrapper&&d.replace(a._wrapper,"dijitHidden","dijitVisible"),a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(b){this._descendantsBeingDestroyed=!0,this.selectedChildWidget=void 0,a.forEach(this.getChildren(),function(a){b||this.removeChild(a),a.destroyRecursive(b)},this),this._descendantsBeingDestroyed=!1}});return o.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0},g.extend(m,o.ChildWidgetProperties),o})},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(a,b,c){return a("dijit.layout.AccordionPane",c,{constructor:function(){b.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})})},"dijit/layout/BorderContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=c("dijit.layout._Splitter",[m,n],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region),this._factor=/top|left/.test(this.region)?1:-1,this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){if(this.inherited(arguments),d.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")),this.container.persist){var a=b(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var b=this.horizontal?"h":"w",c=f.getMarginBox(this.child.domNode)[b],d=a.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],e=f.getContentBox(d.domNode)[b]-10;return Math.min(this.child.maxSize,c+e)},_startDrag:function(a){this.cover||(this.cover=e.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after")),d.add(this.cover,"dijitSplitterCoverActive"),this.fake&&e.destroy(this.fake),(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),d.add(this.domNode,"dijitSplitterShadow"),e.place(this.fake,this.domNode,"after")),d.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active"),this.fake&&d.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var c=this._factor,h=this.horizontal,l=h?"pageY":"pageX",m=a[l],n=this.domNode.style,o=h?"h":"w",p=g.getComputedStyle(this.child.domNode),q=f.getMarginBox(this.child.domNode,p)[o],r=this._computeMaxSize(),s=Math.max(this.child.minSize,f.getPadBorderExtents(this.child.domNode,p)[o]+10),t=this.region,u="top"==t||"bottom"==t?"top":"left",v=parseInt(n[u],10),w=this._resize,x=i.hitch(this.container,"_layoutChildren",this.child.id),y=this.ownerDocument,z=s;this._handlers=this._handlers.concat([j(y,k.move,this._drag=function(a,d){if(this.child&&"0px"===this.child.domNode.style[this.horizontal?"height":"width"]&&this.container&&this.container.persist){var e=b(this._cookieName);e&&(s=e.replace("px",""))}else s=z;var f=a[l]-m,g=c*f+q,h=Math.max(Math.min(g,r),s);(w||d)&&x(h),n[u]=f+v+c*(h-g)+"px"}),j(y,"dragstart",function(a){a.stopPropagation(),a.preventDefault()}),j(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation(),a.preventDefault()}),j(y,k.release,i.hitch(this,"_stopDrag"))]),a.stopPropagation(),a.preventDefault()},_onMouse:function(a){var b="mouseover"==a.type||"mouseenter"==a.type;d.toggle(this.domNode,"dijitSplitterHover",b),d.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",b)},_stopDrag:function(a){try{this.cover&&d.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&e.destroy(this.fake),d.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&b(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var b=this.horizontal,c=1;switch(a.keyCode){case b?h.UP_ARROW:h.LEFT_ARROW:c*=-1;case b?h.DOWN_ARROW:h.RIGHT_ARROW:break;default:return}var d=f.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*c;this.container._layoutChildren(this.child.id,Math.max(Math.min(d,this._computeMaxSize()),this.child.minSize)),a.stopPropagation(),a.preventDefault()},destroy:function(){this._cleanupHandlers(),delete this.child,delete this.container,delete this.cover,delete this.fake,this.inherited(arguments)}}),r=c("dijit.layout._Gutter",[m,n],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments),d.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),s=c("dijit.layout.BorderContainer",o,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:q,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter"),this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,c=a.isLeftToRight();if("leading"==b&&(b=c?"left":"right"),"trailing"==b&&(b=c?"right":"left"),b&&"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget){var d=a.splitter?this._splitterClass:r;i.isString(d)&&(d=i.getObject(d));var f=new d({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters});f.isSplitter=!0,a._splitterWidget=f;var g="bottom"==b||b==(this.isLeftToRight()?"right":"left");e.place(f.domNode,a.domNode,g?"before":"after"),f.startup()}},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget),this.inherited(arguments)},getChildren:function(){return a.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(b){return a.filter(this.getChildren(),function(a){return a.region==b})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var c=this.domNode;this.cs=g.getComputedStyle(c),this.pe=f.getPadExtents(c,this.cs),this.pe.r=g.toPixelValue(c,this.cs.paddingRight),this.pe.b=g.toPixelValue(c,this.cs.paddingBottom),g.set(c,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(b,c){if(this._borderBox&&this._borderBox.h){var d=[];a.forEach(this._getOrderedChildren(),function(a){d.push(a),a._splitterWidget&&d.push(a._splitterWidget)});var e={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};p.layoutChildren(this.domNode,e,d,b,c)}},destroyRecursive:function(){a.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy(),delete a._splitterWidget}),this.inherited(arguments)}});return s.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:1/0},i.mixin(s.ChildWidgetProperties,o.ChildWidgetProperties),i.extend(l,s.ChildWidgetProperties),s._Splitter=q,s._Gutter=r,s})},"dijit/layout/LayoutContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/_base/lang","../_WidgetBase","./_LayoutWidget","./utils"],function(a,b,c,d,e,f,g,h){var i=b("dijit.layout.LayoutContainer",g,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(a.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(a){this.inherited(arguments),a.region&&c.add(a.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=a.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?1/0:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);return b.sort(function(a,b){for(var c=a.weight,d=b.weight,e=0;e<c.length;e++)if(c[e]!=d[e])return c[e]-d[e];return 0}),a.map(b,function(a){return a.pane})},layout:function(){h.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(a,b){this.inherited(arguments),this._started&&this.layout()},removeChild:function(a){this.inherited(arguments),this._started&&this.layout(),c.remove(a.domNode,this.baseClass+"Pane"),d.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"}),d.set(a.domNode,/top|bottom/.test(a.region)?"width":"height","auto")}});return i.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0},e.extend(f,i.ChildWidgetProperties),i})},"dijit/layout/ScrollingTabController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/_base/lang","dojo/on","dojo/query","dojo/sniff","../registry","dojo/text!./templates/ScrollingTabController.html","dojo/text!./templates/_ScrollingTabControllerButton.html","./TabController","./utils","../_WidgetsInTemplateMixin","../Menu","../MenuItem","../form/Button","../_HasDropDown","dojo/NodeList-dom","../a11yclick"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=b("dijit.layout.ScrollingTabController",[n,p],{baseClass:"dijitTabController dijitScrollingTabController",templateString:l,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper,this._initButtons(),this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None",c.add(a,"tabStrip-disabled")),c.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments),e.set(this.domNode,"visibility",""),this._postStartup=!0,this.own(h(this.containerNode,"attrmodified-label, attrmodified-iconclass",g.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments),e.set(this.containerNode,"width",e.get(this.containerNode,"width")+200+"px")},onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null),this.inherited(arguments)},_initButtons:function(){this._btnWidth=0,this._buttons=i("> .tabStripButton",this.domNode).filter(function(a){return this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode)?(this._btnWidth+=d.getMarginSize(a).w,!0):(e.set(a,"display","none"),!1)},this)},_getTabsWidth:function(){var a=this.getChildren();if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,c=a[this.isLeftToRight()?a.length-1:0].domNode;return c.offsetLeft+c.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();return a=a||e.get(this.scrollNode,"width"),b>0&&a<b},resize:function(a){this._dim=a,this.scrollNode.style.height="auto";var b=this._contentBox=o.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight,d.setContentSize(this.domNode,b);var c=this._enableBtn(this._contentBox.w);return this._buttons.style("display",c?"":"none"),this._leftBtn.region="left",this._rightBtn.region="right",this._menuBtn.region=this.isLeftToRight()?"right":"left",o.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]),this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab())),this._setButtonClass(this._getScroll()),this._postResize=!0,{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||j("ie")<8||j("ie")&&j("quirks")||j("webkit")?this.scrollNode.scrollLeft:e.get(this.containerNode,"width")-e.get(this.scrollNode,"width")+(j("ie")>=8?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||j("ie")<8||j("ie")&&j("quirks")||j("webkit"))return a;var b=e.get(this.containerNode,"width")-e.get(this.scrollNode,"width");return(j("ie")>=8?-1:1)*(a-b)},onSelectChild:function(a){var b=this.pane2button(a.id);if(b){var c=b.domNode;if(c!=this._selectedTab&&(this._selectedTab=c,this._postResize)){
var d=this._getScroll();(d>c.offsetLeft||d+e.get(this.scrollNode,"width")<c.offsetLeft+e.get(c,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=e.get(this.scrollNode,"width"),c=e.get(this.containerNode,"width"),d=c-b,f=this._getTabsWidth();if(a.length&&f>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:d};var g=this.isLeftToRight()?0:d;return{min:g,max:g}},_getScrollForSelectedTab:function(){var a=(this.scrollNode,this._selectedTab),b=e.get(this.scrollNode,"width"),c=this._getScrollBounds(),d=a.offsetLeft+e.get(a,"width")/2-b/2;return d=Math.min(Math.max(d,c.min),c.max)},createSmoothScroll:function(a){if(arguments.length>0){var b=this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var c=this,d=this.scrollNode,e=new f.Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=d.scrollLeft,g=c._convertToScrollLeft(a);e.curve=new f._Line(b,g)},onAnimate:function(a){d.scrollLeft=a}});return this._anim=e,this._setButtonClass(a),e},_getBtnNode:function(a){for(var b=a.target;b&&!c.contains(b,"tabStripButton");)b=b.parentNode;return b},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!c.contains(b,"dijitTabDisabled")){var d=e.get(this.scrollNode,"width"),f=.75*d*a,g=this._getScroll()+f;this._setButtonClass(g),this.createSmoothScroll(g).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min),this._rightBtn.set("disabled",a>=b.max)}}),v=b("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:m,tabIndex:"",isFocusable:function(){return!1}});return b("dijit.layout._ScrollingTabControllerButton",[s,v]),b("dijit.layout._ScrollingTabControllerMenuButton",[s,t,v],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(b){this.dropDown=new q({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var c=k.byId(this.containerId);a.forEach(c.getChildren(),function(a){var b=new r({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||c.textDir,onClick:function(){c.selectChild(a)}});this.dropDown.addChild(b)},this),b()},closeDropDown:function(a){this.inherited(arguments),this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}}),u})},"dijit/layout/TabController":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/has","dojo/i18n","dojo/_base/lang","./StackController","../registry","../Menu","../MenuItem","dojo/text!./templates/_TabButton.html","dojo/i18n!../nls/common"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a("dijit.layout._TabButton"+(e("dojo-bidi")?"_NoBidi":""),h.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:l,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments),b.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var a=this.domNode;this.defer(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){if(this._set("closeButton",a),d.toggle(this.domNode,"dijitClosable",a),this.closeNode.style.display=a?"":"none",a){var b=f.getLocalization("dijit","common");this.closeNode&&c.set(this.closeNode,"title",b.itemClose)}},_setDisabledAttr:function(a){if(this.inherited(arguments),this.closeNode)if(a)c.remove(this.closeNode,"title");else{var b=f.getLocalization("dijit","common");c.set(this.closeNode,"title",b.itemClose)}},_setLabelAttr:function(a){this.inherited(arguments),this.showLabel||this.params.title||(this.iconNode.alt=g.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});e("dojo-bidi")&&(m=a("dijit.layout._TabButton",m,{_setLabelAttr:function(a){this.inherited(arguments),this.applyTextDir(this.iconNode,this.iconNode.alt)}}));var n=a("dijit.layout.TabController",h,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:m,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var a=new j({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return d.contains(a,"dijitClosable")&&!d.contains(a,"dijitTabDisabled")}});this.own(a);var b=f.getLocalization("dijit","common"),c=this;a.addChild(new k({label:b.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){var b=i.byNode(this.getParent().currentTarget);c.onCloseButtonClick(b.page)}}))}});return n.TabButton=m,n})},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=b("dijit.layout._StackButton",n,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments),(this.focusNode||this.domNode).setAttribute("role","tab")}}),p=b("dijit.layout.StackController",[k,l,m],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:o,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return j.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments),this.own(h.subscribe(this.containerId+"-startup",f.hitch(this,"onStartup")),h.subscribe(this.containerId+"-addChild",f.hitch(this,"onAddChild")),h.subscribe(this.containerId+"-removeChild",f.hitch(this,"onRemoveChild")),h.subscribe(this.containerId+"-selectChild",f.hitch(this,"onSelectChild")),h.subscribe(this.containerId+"-containerKeyDown",f.hitch(this,"onContainerKeyDown"))),this.containerNode.dojoClick=!0,this.own(g(this.containerNode,"click",f.hitch(this,function(a){var b=j.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(var d=a.target;d!==this.containerNode;d=d.parentNode){if(c.contains(d,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);break}if(d==b.domNode){this.onButtonClick(b.page);break}}})))},onStartup:function(b){this.textDir=b.textDir,a.forEach(b.children,this.onAddChild,this),b.selected&&this.onSelectChild(b.selected);var c=j.byId(this.containerId).containerNode,d=f.hitch(this,"pane2button"),e={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"},h=function(a,b){return g(c,"attrmodified-"+a,function(a){var c=d(a.detail&&a.detail.widget&&a.detail.widget.id);c&&c.set(b,a.detail.newValue)})};for(var i in e)this.own(h(i,e[i]))},destroy:function(a){this.destroyDescendants(a),this.inherited(arguments)},onAddChild:function(a,b){var c=f.isString(this.buttonWidget)?f.getObject(this.buttonWidget):this.buttonWidget,d=new c({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip,page:a});this.addChild(d,b),a.controlButton=d,this._currentChild||this.onSelectChild(a);var e=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+d.id:d.id;a._wrapper.removeAttribute("aria-label"),a._wrapper.setAttribute("aria-labelledby",e)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy()),delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button(this._currentChild.id);b.set("checked",!1),b.focusNode.setAttribute("tabIndex","-1")}var c=this.pane2button(a.id);c.set("checked",!0),this._currentChild=a,c.focusNode.setAttribute("tabIndex","0");j.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);i.focus(b.focusNode),this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0),j.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){if(j.byId(this.containerId).closeChild(a),this._currentChild){var b=this.pane2button(this._currentChild.id);b&&i.focus(b.focusNode||b.domNode)}},adjacent:function(b){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(b=!b);var c,d=this.getChildren(),e=a.indexOf(d,this.pane2button(this._currentChild.id)),f=d[e];do{e=(e+(b?1:d.length-1))%d.length,c=d[e]}while(c.disabled&&c!=f);return c},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case e.LEFT_ARROW:case e.UP_ARROW:a._djpage||(c=!1);break;case e.PAGE_UP:a.ctrlKey&&(c=!1);break;case e.RIGHT_ARROW:case e.DOWN_ARROW:a._djpage||(c=!0);break;case e.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case e.HOME:for(var d=this.getChildren(),f=0;f<d.length;f++){var g=d[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation(),a.preventDefault();break;case e.END:for(var d=this.getChildren(),f=d.length-1;f>=0;f--){var g=d[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation(),a.preventDefault();break;case e.DELETE:case"W".charCodeAt(0):this._currentChild.closable&&(a.keyCode==e.DELETE||a.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault());break;case e.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page,this.onkeydown(a.e)}});return p.StackButton=o,p})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(a,b,c,d,e){return b("dijit.layout.TabContainer",c,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(b){var c=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new("string"==typeof this.controllerWidget?a.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,class:c,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},b)},postMixInProperties:function(){this.inherited(arguments),this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?d:e)}})})},"dijit/layout/_TabContainerBase":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","./StackContainer","./utils","../registry","../_TemplatedMixin","dojo/text!./templates/TabContainer.html"],function(a,b,c,d,e,f,g,h,i){return a("dijit.layout._TabContainerBase",[e,h],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:i,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,""),this.srcNodeRef&&d.set(this.srcNodeRef,"visibility","hidden"),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.tablist=this._makeController(this.tablistNode),this.doLayout||b.add(this.domNode,"dijitTabContainerNoLayout"),this.nested?(b.add(this.domNode,"dijitTabContainerNested"),b.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),b.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),b.add(this.containerNode,"dijitTabPaneWrapperNested")):b.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){b.add(a.domNode,"dijitTabPane"),this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&void 0!==this._contentBox.l){var a=this.selectedChildWidget;if(this.doLayout){var b=this.tabPosition.replace(/-h/,"");this.tablist.region=b;var d=[this.tablist,{domNode:this.tablistSpacer,region:b},{domNode:this.containerNode,region:"center"}];f.layoutChildren(this.domNode,this._contentBox,d),this._containerContentBox=f.marginBox2contentBox(this.containerNode,d[2]),a&&a.resize&&a.resize(this._containerContentBox)}else{if(this.tablist.resize){var e=this.tablist.domNode.style;e.width="0";var g=c.getContentBox(this.domNode).w;e.width="",this.tablist.resize({w:g})}a&&a.resize&&a.resize()}}},destroy:function(a){this.tablist&&this.tablist.destroy(a),this.inherited(arguments)},selectChild:function(a,b){return this._focused&&(a=g.byId(a),this.tablist.pane2button(a.id).focus()),this.inherited(arguments)}})})},"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\r\n\t<thead>\r\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\r\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\r\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\r\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\r\n\t\t\t\t<div data-dojo-attach-point="monthNode">\r\n\t\t\t\t</div>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\r\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\r\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t\t<tr role="row">\r\n\t\t\t${!dayCellsHtml}\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\r\n\t\t\t${!dateRowsHtml}\r\n\t</tbody>\r\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\r\n\t\t<tr>\r\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\r\n\t\t\t\t<div class="dijitCalendarYearLabel">\r\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\r\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\r\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tfoot>\r\n</table>\r\n',"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\r\n\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\tdata-dojo-attach-event="onclick:_onClick"\r\n\t\ttabIndex="-1" role="presentation" aria-hidden="true" data-dojo-attach-point="valueNode"\r\n/></span>\r\n',"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\r\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point="iconNode"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\r\n\t\tdata-dojo-attach-event="onclick:_onClick"\r\n\t\tdata-dojo-attach-point="valueNode" role="presentation" aria-hidden="true"\r\n/></span>\r\n',"url:dijit/templates/MenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\r\n\t\trole="presentation"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\r\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</span>\r\n\t</td>\r\n</tr>\r\n',"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>\r\n\t\t<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${!checkedChar}</span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\r\n</tr>\r\n',"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\r\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\r\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\r\n\t\t\t\trole="heading" level="1"></span>\r\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="-1">\r\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\r\n\t\t</span>\r\n\t</div>\r\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\r\n\t${!actionBarTemplate}\r\n</div>\r\n\r\n',"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\r\n\t   cellspacing="0">\r\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\r\n</table>\r\n',"url:dijit/templates/MenuBar.html":'<div class="dijitMenuBar dijitMenuPassive" data-dojo-attach-point="containerNode" role="menubar" tabIndex="${tabIndex}"\r\n\t ></div>\r\n',"url:dijit/templates/MenuBarItem.html":'<div class="dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point="focusNode"\r\n\t \trole="menuitem" tabIndex="-1">\r\n\t<span data-dojo-attach-point="containerNode,textDirNode"></span>\r\n</div>\r\n',"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\r\n\t<td class="dijitMenuSeparatorIconCell">\r\n\t\t<div class="dijitMenuSeparatorTop"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\r\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n</tr>\r\n',"url:dijit/templates/ProgressBar.html":'<div class="dijitProgressBar dijitProgressBarEmpty" role="progressbar"\r\n\t><div  data-dojo-attach-point="internalProgress" class="dijitProgressBarFull"\r\n\t\t><div class="dijitProgressBarTile" role="presentation"></div\r\n\t\t><span style="visibility:hidden">&#160;</span\r\n\t></div\r\n\t><div data-dojo-attach-point="labelNode" class="dijitProgressBarLabel" id="${id}_label"></div\r\n\t><span data-dojo-attach-point="indeterminateHighContrastImage"\r\n\t\t   class="dijitInline dijitProgressBarIndeterminateHighContrastImage"></span\r\n></div>\r\n',"url:dijit/templates/TitlePane.html":'<div>\r\n\t<div data-dojo-attach-event="ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass="dijitTitlePaneTitle" data-dojo-attach-point="titleBarNode" id="${id}_titleBarNode">\r\n\t\t<div class="dijitTitlePaneTitleFocus" data-dojo-attach-point="focusNode">\r\n\t\t\t<span data-dojo-attach-point="arrowNode" class="dijitInline dijitArrowNode" role="presentation"></span\r\n\t\t\t><span data-dojo-attach-point="arrowNodeInner" class="dijitArrowNodeInner"></span\r\n\t\t\t><span data-dojo-attach-point="titleNode" class="dijitTitlePaneTextNode"></span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="dijitTitlePaneContentOuter" data-dojo-attach-point="hideNode" role="presentation">\r\n\t\t<div class="dijitReset" data-dojo-attach-point="wipeNode" role="presentation">\r\n\t\t\t<div class="dijitTitlePaneContentInner" data-dojo-attach-point="containerNode" role="region" id="${id}_pane" aria-labelledby="${id}_titleBarNode">\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n',"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip" data-dojo-attach-event="mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\r\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\r\n></div>\r\n',"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\r\n\t<div class="dijitTooltipContainer" role="presentation">\r\n\t\t<div data-dojo-attach-point="contentsNode" class="dijitTooltipContents dijitTooltipFocusNode">\r\n\t\t\t<div data-dojo-attach-point="containerNode"></div>\r\n\t\t\t${!actionBarTemplate}\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\r\n</div>\r\n',"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\r\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow" role="presentation"\r\n\t\t><span data-dojo-attach-point="expandoNode" class="dijitInline dijitTreeExpando" role="presentation"></span\r\n\t\t><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"></span\r\n\t\t><span data-dojo-attach-point="contentNode"\r\n\t\t\tclass="dijitTreeContent" role="presentation">\r\n\t\t\t<span role="presentation" class="dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point="iconNode"></span\r\n\t\t\t><span data-dojo-attach-point="labelNode,focusNode" class="dijitTreeLabel" role="treeitem"\r\n\t\t\t\t   tabindex="-1" aria-selected="false" id="${id}_label"></span>\r\n\t\t</span\r\n\t></div>\r\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeNodeContainer" role="presentation"\r\n\t\t style="display: none;" aria-labelledby="${id}_label"></div>\r\n</div>\r\n',"url:dijit/templates/Tree.html":'<div role="tree">\r\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\r\n\t<div class="dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point="rootLoadingIndicator"></div>\r\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation">\r\n\t</div>\r\n</div>\r\n',"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\r\n\t><input\r\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\r\n\t\tclass="dijitReset dijitCheckBoxInput"\r\n\t\tdata-dojo-attach-point="focusNode"\r\n\t \tdata-dojo-attach-event="ondijitclick:_onClick"\r\n/></div>\r\n',"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n',"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\r\n\tid="widget_${id}" role="presentation"\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n',"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\r\n\tid="widget_${id}"\r\n\trole="combobox"\r\n\taria-haspopup="true"\r\n\tdata-dojo-attach-point="_popupStateNode"\r\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\r\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/></div\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\r\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\r\n\t/></div\r\n></div>\r\n',"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\r\n\t><tbody role="presentation"><tr role="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitInline dijitButtonText circleLayout circleTheme" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\r\n\t\t></div\r\n\t\t></td\r\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event="onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle="${optionsTitle}"\r\n\t\t\trole="button" aria-haspopup="true"\r\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\r\n\t\t></td\r\n\t\t><td style="display:none !important;"\r\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode"\r\n\t\t\t\tclass="dijitOffScreen"\r\n\t\t\t\trole="presentation" aria-hidden="true"\r\n\t\t\t\tdata-dojo-attach-event="onclick:_onClick"\r\n\t\t/></td></tr></tbody\r\n></table>\r\n',
"url:dijit/form/templates/HorizontalSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole="presentation"\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t\t><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}\r\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"\r\n\t\t\t\t><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"\r\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t\t><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div\r\n\t\t\t></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div\r\n\t\t></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div\r\n\t\t></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t\t><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t></tr\r\n></table>\r\n',"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\r\n\tid="widget_${id}" role="presentation"\r\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point="upArrowNode"\r\n\t\t\t><div class="dijitArrowButtonInner"\r\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/></div\r\n\t\t></div\r\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point="downArrowNode"\r\n\t\t\t><div class="dijitArrowButtonInner"\r\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/></div\r\n\t\t></div\r\n\t></div\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeydown:_onKeyDown"\r\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\r\n\t/></div\r\n></div>\r\n',"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\r\n\trole="listbox" aria-haspopup="true"\r\n\t><tbody role="presentation"><tr role="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\r\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,textDirNode" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitValidationContainer"\r\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t\t/></div\r\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\r\n\t\t/></td\r\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\r\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/></td\r\n\t></tr></tbody\r\n></table>\r\n',"url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\r\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\r\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\r\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\r\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\r\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\r\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\r\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\r\n\t</div>\r\n</div>\r\n","url:dijit/layout/templates/ScrollingTabController.html":'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_menuBtn"\r\n\t\t data-dojo-props="containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point="_menuBtn" showLabel="false" title="">&#9660;</div>\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_leftBtn"\r\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point="_leftBtn" data-dojo-attach-event="onClick: doSlideLeft">&#9664;</div>\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_rightBtn"\r\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point="_rightBtn" data-dojo-attach-event="onClick: doSlideRight">&#9654;</div>\r\n\t<div class=\'dijitTabListWrapper\' data-dojo-attach-point=\'tablistWrapper\'>\r\n\t\t<div role=\'tablist\' data-dojo-attach-event=\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point=\'containerNode\' class=\'nowrapTabStrip\'></div>\r\n\t</div>\r\n</div>',"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'<div data-dojo-attach-event="ondijitclick:_onClick" class="dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point="focusNode" role="button">\r\n\t<span role="presentation" class="dijitInline dijitTabStripIcon" data-dojo-attach-point="iconNode"></span>\r\n\t<span data-dojo-attach-point="containerNode,titleNode" class="dijitButtonText"></span>\r\n</div>',"url:dijit/layout/templates/_TabButton.html":'<div role="presentation" data-dojo-attach-point="titleNode,innerDiv,tabContent" class="dijitTabInner dijitTabContent">\r\n\t<span role="presentation" class="dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point="iconNode"></span>\r\n\t<span data-dojo-attach-point=\'containerNode,focusNode\' class=\'tabLabel\'></span>\r\n\t<span class="dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point=\'closeNode\'\r\n\t\t  role="presentation">\r\n\t\t<span data-dojo-attach-point=\'closeText\' class=\'dijitTabCloseText\'>[x]</span\r\n\t\t\t\t></span>\r\n</div>\r\n',"url:dijit/layout/templates/TabContainer.html":'<div class="dijitTabContainer">\r\n\t<div class="dijitTabListWrapper" data-dojo-attach-point="tablistNode"></div>\r\n\t<div data-dojo-attach-point="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\r\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point="containerNode"></div>\r\n</div>\r\n',"*now":function(a){a(['dojo/i18n!*preload*dijit/nls/dijit*["ar","ca","cs","da","de-de","el","en-au","en-ca","en-gb","en-us","es-es","fi","fr-ch","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh","zh-cn","zh-hant","zh-hans","zh-hk","zh-tw","af-za","sq-al","gsw-fr","am-et","ar-dz","ar-bh","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ae","ar-ye","hy-am","as-in","az-cyrl-az","az-latn-az","bn-bd","bn-in","ba-ru","eu-es","be-by","bs-cyrl-ba","bs-latn-ba","br-fr","bg-bg","ca-es","zh-cn","zh-sg","zh-hk","zh-mo","zh-tw","co-fr","crm-en-us-de-ch","hr-hr","hr-ba","cs-cz","da-dk","prs-af","dv-mv","nl-be","nl-nl","en-au","en-bz","en-ca","en-029","en-in","en-ie","en-jm","en-my","en-nz","en-ph","en-sg","en-za","en-tt","en-gb","en-us","en-fr","en-kz","en-kg","en-mx","en-ch","en-ye","en-zw","et-ee","fo-fo","fil-ph","fi-fi","fr-be","fr-ca","fr-fr","fr-lu","fr-mc","fr-ch","fy-nl","gl-es","ka-ge","de-at","de-de","de-li","de-lu","de-ch","el-gr","kl-gl","gu-in","ha-latn-ng","he-il","hi-in","hu-hu","is-is","ig-ng","id-id","iu-latn-ca","iu-cans-ca","ga-ie","xh-za","zu-za","it-it","it-ch","ja-jp","kn-in","kk-kz","km-kh","qut-gt","rw-rw","sw-ke","kok-in","ko-kr","ky-kg","lo-la","lv-lv","lt-lt","dsb-de","lb-lu","mk-mk","ms-bn","ms-my","ml-in","mt-mt","mi-nz","arn-cl","mr-in","moh-ca","mn-mn","mn-mong-cn","ne-np","nb-no","nn-no","oc-fr","or-in","ps-af","fa-ir","pl-pl","pt-br","pt-pt","pa-in","quz-bo","quz-ec","quz-pe","ro-ro","rm-ch","ru-ru","sah-ru","smn-fi","smj-no","smj-se","se-fi","se-no","se-se","sms-fi","sma-no","sma-se","sa-in","gd-gb","sr-cyrl-ba","sr-cyrl-me","sr-cyrl-cs","sr-cyrl-rs","sr-latn-ba","sr-latn-me","sr-latn-cs","sr-latn-rs","nso-za","tn-za","si-lk","sk-sk","sl-si","es-ar","es-ve","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-sv","es-gt","es-hn","es-mx","es-ni","es-pa","es-py","es-pe","es-pr","es-es","es-us","es-uy","sv-fi","sv-se","syr-sy","tg-cyrl-tj","tzm-latn-dz","ta-in","tt-ru","te-in","th-th","bo-cn","tr-tr","tk-tm","uk-ua","hsb-de","ur-pk","ug-cn","uz-cyrl-uz","uz-latn-uz","vi-vn","cy-gb","wo-sn","ii-cn","yo-ng","ROOT"]'])}}}),define("dijit/dijit",["./main","./_base","dojo/parser","./_Widget","./_TemplatedMixin","./_Container","./layout/_LayoutWidget","./form/_FormWidget","./form/_FormValueWidget"],function(a){return a}),require({cache:{"dojox/charting/themes/Julie":function(){define(["../Theme","dojox/gfx/gradutils","./common"],function(a,b,c){var d=a.generateGradient,e={type:"linear",space:"shape",x1:0,y1:0,x2:0,y2:100};return c.Julie=new a({seriesThemes:[{fill:d(e,"#59a0bd","#497c91"),stroke:{color:"#22627d"}},{fill:d(e,"#8d88c7","#6c6d8e"),stroke:{color:"#8a84c5"}},{fill:d(e,"#85a54a","#768b4e"),stroke:{color:"#5b6d1f"}},{fill:d(e,"#e8e667","#c6c361"),stroke:{color:"#918e38"}},{fill:d(e,"#e9c756","#c7a223"),stroke:{color:"#947b30"}},{fill:d(e,"#a05a5a","#815454"),stroke:{color:"#572828"}},{fill:d(e,"#b17044","#72543e"),stroke:{color:"#74482e"}},{fill:d(e,"#a5a5a5","#727272"),stroke:{color:"#535353"}},{fill:d(e,"#9dc7d9","#59a0bd"),stroke:{color:"#22627d"}},{fill:d(e,"#b7b3da","#8681b3"),stroke:{color:"#8a84c5"}},{fill:d(e,"#a8c179","#85a54a"),stroke:{color:"#5b6d1f"}},{fill:d(e,"#eeea99","#d6d456"),stroke:{color:"#918e38"}},{fill:d(e,"#ebcf81","#e9c756"),stroke:{color:"#947b30"}},{fill:d(e,"#c99999","#a05a5a"),stroke:{color:"#572828"}},{fill:d(e,"#c28b69","#7d5437"),stroke:{color:"#74482e"}},{fill:d(e,"#bebebe","#8c8c8c"),stroke:{color:"#535353"}},{fill:d(e,"#c7e0e9","#92baca"),stroke:{color:"#22627d"}},{fill:d(e,"#c9c6e4","#ada9d6"),stroke:{color:"#8a84c5"}},{fill:d(e,"#c0d0a0","#98ab74"),stroke:{color:"#5b6d1f"}},{fill:d(e,"#f0eebb","#dcd87c"),stroke:{color:"#918e38"}},{fill:d(e,"#efdeb0","#ebcf81"),stroke:{color:"#947b30"}},{fill:d(e,"#ddc0c0","#c99999"),stroke:{color:"#572828"}},{fill:d(e,"#cfb09b","#c28b69"),stroke:{color:"#74482e"}},{fill:d(e,"#d8d8d8","#bebebe"),stroke:{color:"#535353"}},{fill:d(e,"#ddeff5","#a5c4cd"),stroke:{color:"#22627d"}},{fill:d(e,"#dedcf0","#b3afd3"),stroke:{color:"#8a84c5"}},{fill:d(e,"#dfe9ca","#c0d0a0"),stroke:{color:"#5b6d1f"}},{fill:d(e,"#f8f7db","#e5e28f"),stroke:{color:"#918e38"}},{fill:d(e,"#f7f0d8","#cfbd88"),stroke:{color:"#947b30"}},{fill:d(e,"#eedede","#caafaf"),stroke:{color:"#572828"}},{fill:d(e,"#e3cdbf","#cfb09b"),stroke:{color:"#74482e"}},{fill:d(e,"#efefef","#cacaca"),stroke:{color:"#535353"}}]}),c.Julie.next=function(b,c,d){if("line"==b||"area"==b){var e=this.seriesThemes[this._current%this.seriesThemes.length];e.fill.space="plot";var f=a.prototype.next.apply(this,arguments);return e.fill.space="shape",f}return a.prototype.next.apply(this,arguments)},c.Julie.post=function(c,d){return c=a.prototype.post.apply(this,arguments),"slice"==d&&c.series.fill&&"radial"==c.series.fill.type&&(c.series.fill=b.reverse(c.series.fill)),c},c.Julie})},"dojox/charting/Theme":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/Color","./SimpleTheme","dojox/color/_base","dojox/color/Palette","dojox/gfx/gradutils"],function(a,b,c,d,e,f){var g=b("dojox.charting.Theme",d,{});return a.mixin(g,{defineColors:function(a){a=a||{};var b,c=[],d=a.num||5;if(a.colors){b=a.colors.length;for(var g=0;g<d;g++)c.push(a.colors[g%b]);return c}if(a.hue){var h=a.saturation||100,i=a.low||30;return b=((a.high||90)+i)/2,f.generate(e.fromHsv(a.hue,h,b),"monochromatic").colors}return a.generator?e.Palette.generate(a.base,a.generator).colors:c},generateGradient:function(b,c,d){var e=a.delegate(b);return e.colors=[{offset:0,color:c},{offset:1,color:d}],e},generateHslColor:function(a,b){a=new c(a);var d=a.toHsl(),f=e.fromHsl(d.h,d.s,b);return f.a=a.a,f},generateHslGradient:function(a,b,d,f){a=new c(a);var h=a.toHsl(),i=e.fromHsl(h.h,h.s,d),j=e.fromHsl(h.h,h.s,f);return i.a=j.a=a.a,g.generateGradient(b,i,j)}}),g.defaultMarkers=d.defaultMarkers,g.defaultColors=d.defaultColors,g.defaultTheme=d.defaultTheme,g})},"dojox/charting/SimpleTheme":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/Color","dojox/lang/utils","dojox/gfx/gradutils"],function(a,b,c,d,e,f){var g=c("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(c){c=c||{};var d=g.defaultTheme;b.forEach(["chart","plotarea","axis","grid","series","marker","indicator"],function(b){this[b]=a.delegate(d[b],c[b])},this),c.seriesThemes&&c.seriesThemes.length?(this.colors=null,this.seriesThemes=c.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(c.colors||g.defaultColors).slice(0)),this.markerThemes=null,c.markerThemes&&c.markerThemes.length&&(this.markerThemes=c.markerThemes.slice(0)),this.markers=c.markers?a.clone(c.markers):a.delegate(g.defaultMarkers),this.noGradConv=c.noGradConv,this.noRadialConv=c.noRadialConv,c.reverseFills&&this.reverseFills(),this._current=0,this._buildMarkerArray()},clone:function(){var a=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});return b.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(b){this.hasOwnProperty(b)&&(a[b]=this[b])},this),a},clear:function(){this._current=0},next:function(b,c,f){var g,h,i=e.merge;if(this.colors){g=a.delegate(this.series),h=a.delegate(this.marker);var j,k=new d(this.colors[this._current%this.colors.length]);g.stroke&&g.stroke.color?(g.stroke=a.delegate(g.stroke),j=new d(g.stroke.color),g.stroke.color=new d(k),g.stroke.color.a=j.a):g.stroke={color:k},h.stroke&&h.stroke.color?(h.stroke=a.delegate(h.stroke),j=new d(h.stroke.color),h.stroke.color=new d(k),h.stroke.color.a=j.a):h.stroke={color:k},!g.fill||g.fill.type?g.fill=k:(j=new d(g.fill),g.fill=new d(k),g.fill.a=j.a),!h.fill||h.fill.type?h.fill=k:(j=new d(h.fill),h.fill=new d(k),h.fill.a=j.a)}else g=this.seriesThemes?i(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,h=this.markerThemes?i(this.marker,this.markerThemes[this._current%this.markerThemes.length]):g;var l=h&&h.symbol||this._markers[this._current%this._markers.length],m={series:g,marker:h,symbol:l};return++this._current,c&&(m=this.addMixin(m,b,c)),f&&(m=this.post(m,b)),m},skip:function(){++this._current},addMixin:function(c,d,f,g){if(a.isArray(f))b.forEach(f,function(a){c=this.addMixin(c,d,a)},this);else{var h={};"color"in f&&("line"==d||"area"==d?(a.setObject("series.stroke.color",f.color,h),a.setObject("marker.stroke.color",f.color,h)):a.setObject("series.fill",f.color,h)),b.forEach(["stroke","outline","shadow","fill","filter","font","fontColor","labelWiring"],function(b){var c="marker"+b.charAt(0).toUpperCase()+b.substr(1),d=c in f;b in f&&(a.setObject("series."+b,f[b],h),d||a.setObject("marker."+b,f[b],h)),d&&a.setObject("marker."+b,f[c],h)}),"marker"in f&&(h.symbol=f.marker,h.symbol=f.marker),c=e.merge(c,h)}return g&&(c=this.post(c,d)),c},post:function(a,b){var c,d=a.series.fill;return!this.noGradConv&&this.shapeSpaces[d.space]&&"linear"==d.type&&("bar"==b?c={x1:d.y1,y1:d.x1,x2:d.y2,y2:d.x2}:this.noRadialConv||"shape"!=d.space||"slice"!=b&&"circle"!=b||(c={type:"radial",cx:0,cy:0,r:100}),c)?e.merge(a,{series:{fill:c}}):a},getTick:function(a,b){var c=this.axis.tick,d=a+"Tick",f=e.merge;return c?this.axis[d]&&(c=f(c,this.axis[d])):c=this.axis[d],b&&(c?b[d]&&(c=f(c,b[d])):c=b[d]),c},inspectObjects:function(a){b.forEach(["chart","plotarea","axis","grid","series","marker","indicator"],function(b){a(this[b])},this),this.seriesThemes&&b.forEach(this.seriesThemes,a),this.markerThemes&&b.forEach(this.markerThemes,a)},reverseFills:function(){this.inspectObjects(function(a){a&&a.fill&&(a.fill=f.reverse(a.fill))})},addMarker:function(a,b){this.markers[a]=b,this._buildMarkerArray()},setMarkers:function(a){this.markers=a,this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var a in this.markers)this._markers.push(this.markers[a])}});return a.mixin(g,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}}),g})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(dojox,lang){var du=lang.getObject("lang.utils",!0,dojox),empty={},opts=Object.prototype.toString,clone=function(a){if(a)switch(opts.call(a)){case"[object Array]":return a.slice(0);case"[object Object]":return lang.delegate(a)}return a};return lang.mixin(du,{coerceType:function(target,source){switch(typeof target){case"number":return Number(eval("("+source+")"));case"string":return String(source);case"boolean":return Boolean(eval("("+source+")"))}return eval("("+source+")")},updateWithObject:function(a,b,c){if(!b)return a;for(var d in a)if(d in b&&!(d in empty)){var e=a[d];e&&"object"==typeof e?du.updateWithObject(e,b[d],c):a[d]=c?du.coerceType(e,b[d]):clone(b[d])}return a},updateWithPattern:function(a,b,c,d){if(!b||!c)return a;for(var e in c)e in b&&!(e in empty)&&(a[e]=d?du.coerceType(c[e],b[e]):clone(b[e]));return a},merge:function(a,b){if(b){var c,d,e,f,g=opts.call(a),h=opts.call(b);switch(h){case"[object Array]":if(h==g){for(c=new Array(Math.max(a.length,b.length)),d=0,e=c.length;d<e;++d)c[d]=du.merge(a[d],b[d]);return c}return b.slice(0);case"[object Object]":if(h==g&&a){c=lang.delegate(a);for(d in b)d in a?(e=a[d],(f=b[d])!==e&&(c[d]=du.merge(e,f))):c[d]=lang.clone(b[d]);return c}return lang.clone(b)}}return b}}),du})},"dojox/main":function(){define(["dojo/_base/kernel"],function(a){return a.dojox})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(a,b,c,d){function e(a,b){if(a<=0)return b[0].color;var c=b.length;if(a>=1)return b[c-1].color;for(var e=0;e<c;++e){var f=b[e];if(f.offset>=a){if(e){var g=b[e-1];return d.blendColors(new d(g.color),new d(f.color),(a-g.offset)/(f.offset-g.offset))}return f.color}}return b[c-1].color}var f=a.gradutils={};return f.getColor=function(a,b){var f;if(a){switch(a.type){case"linear":var g=Math.atan2(a.y2-a.y1,a.x2-a.x1),h=c.rotate(-g),i=c.project(a.x2-a.x1,a.y2-a.y1),j=c.multiplyPoint(i,b),k=c.multiplyPoint(i,a.x1,a.y1),l=c.multiplyPoint(i,a.x2,a.y2),m=c.multiplyPoint(h,l.x-k.x,l.y-k.y).x;f=c.multiplyPoint(h,j.x-k.x,j.y-k.y).x/m;break;case"radial":var n=b.x-a.cx,o=b.y-a.cy;f=Math.sqrt(n*n+o*o)/a.r}return e(f,a.colors)}return new d(a||[0,0,0,0])},f.reverse=function(a){if(a)switch(a.type){case"linear":case"radial":if(a=b.delegate(a),a.colors){for(var c,d=a.colors,e=d.length,f=0,g=a.colors=new Array(d.length);f<e;++f)c=d[f],g[f]={offset:1-c.offset,color:c.color};g.sort(function(a,b){return a.offset-b.offset})}}return a},f})},"dojox/gfx/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(a,b,c,d,e,f,g,h,i){var j=b.getObject("dojox.gfx",!0),k=j._base={};j._hasClass=function(a,b){var c=a.getAttribute("className");return c&&(" "+c+" ").indexOf(" "+b+" ")>=0},j._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||(" "+c+" ").indexOf(" "+b+" ")<0)&&a.setAttribute("className",c+(c?" ":"")+b)},j._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))},k._getFontMeasurements=function(){var a,b,c={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};d("ie")&&((b=e.doc.documentElement.style.fontSize||"")||(e.doc.documentElement.style.fontSize="100%"));var f=h.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},e.body());for(a in c)f.style.fontSize=a,c[a]=16*Math.round(12*f.offsetHeight/16)/12/1e3;return d("ie")&&(e.doc.documentElement.style.fontSize=b),e.body().removeChild(f),c};var l=null;k._getCachedFontMeasurements=function(a){return!a&&l||(l=k._getFontMeasurements()),l};var m=null,n={};k._getTextBox=function(a,b,c){var d,f,g,j,k=arguments.length;if(m||(m=h.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},e.body())),d=m,d.className="",f=d.style,f.borderWidth="0",f.margin="0",f.padding="0",f.outline="0",k>1&&b)for(g in b)g in n||(f[g]=b[g]);if(k>2&&c&&(d.className=c),d.innerHTML=a,d.getBoundingClientRect){var l=d.getBoundingClientRect();j={l:l.left,t:l.top,w:l.width||l.right-l.left,h:l.height||l.bottom-l.top}}else j=i.getMarginBox(d);return d.innerHTML="",j},k._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case"end":e.x=a.x-b;break;case"middle":e.x=a.x-b/2;break;default:e.x=a.x}var f=d?.75:1;return e.y=a.y-c*f,e},k._computeTextBoundingBox=function(a){if(!j._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b,c=a.getShape(),d=a.getFont()||j.defaultFont,e=a.getTextWidth(),f=j.normalizedLength(d.size);return b=k._computeTextLocation(c,e,f,!0),{x:b.x,y:b.y,width:e,height:f}},k._isRendered=function(a){for(var b=a.parent;b&&b.getParent;)b=b.parent;return null!==b};var o=0;return k._getUniqueId=function(){var b;do{b=a._scopeName+"xUnique"+ ++o}while(g.byId(b));return b},k._fixMsTouchAction=function(a){var b=a.rawNode;void 0!==b.style.msTouchAction&&(b.style.msTouchAction="none")},b.mixin(j,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];return c?new c:(c=a[b]=new Function,c.prototype=j["default"+b],new c)}}(),normalizeColor:function(a){return a instanceof c?a:new c(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,c){var d=null;if(!c)return b.delegate(a);var e={};for(d in a)d in e||(e[d]=b.clone(d in c?c[d]:a[d]));return e},formatNumber:function(a,b){var c=a.toString();if(c.indexOf("e")>=0)c=a.toFixed(4);else{var d=c.indexOf(".");d>=0&&c.length-d>5&&(c=a.toFixed(4))}return a<0?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=j.getDefault("Font"),c=a.split(/\s+/);do{if(c.length<5)break;b.style=c[0],b.variant=c[1],b.weight=c[2];var d=c[3].indexOf("/");b.size=d<0?c[3]:c[3].substring(0,d);var e=4;d<0&&("/"==c[4]?e=6:"/"==c[4].charAt(0)&&(e=5)),e<c.length&&(b.family=c.slice(e).join(" "))}while(!1);return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return j._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*j.px_in_pt()},px2pt:function(a){return a/j.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(a.length>2){var b=j.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case"px":return c;case"pt":return c*b;case"in":return 72*c*b;case"pc":return 12*c*b;case"mm":return c*j.mm_in_pt*b;case"cm":return c*j.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?j[a]:a;b&&(f.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(a){j[a]=b[a]}),"string"==typeof a?j.renderer=a:f.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return j.renderer=j[a]&&j[a].Surface===j.Surface?a:null}))}}),j})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(a,b){var c=a.matrix={},d={};return c._degToRad=function(a){return d[a]||(d[a]=Math.PI*a/180)},c._radToDeg=function(a){return a/Math.PI*180},c.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(a.length>0){for(var d=c.normalize(a[0]),e=1;e<a.length;++e){var f=d,g=c.normalize(a[e]);d=new c.Matrix2D,d.xx=f.xx*g.xx+f.xy*g.yx,d.xy=f.xx*g.xy+f.xy*g.yy,d.yx=f.yx*g.xx+f.yy*g.yx,d.yy=f.yx*g.xy+f.yy*g.yy,d.dx=f.xx*g.dx+f.xy*g.dy+f.dx,d.dy=f.yx*g.dx+f.yy*g.dy+f.dy}b.mixin(this,d)}}else b.mixin(this,a)},b.extend(c.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),b.mixin(c,{identity:new c.Matrix2D,flipX:new c.Matrix2D({xx:-1}),flipY:new c.Matrix2D({yy:-1}),flipXY:new c.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){return arguments.length>1?new c.Matrix2D({dx:a,dy:b}):new c.Matrix2D({dx:a.x,dy:a.y})},scale:function(a,b){return arguments.length>1?new c.Matrix2D({xx:a,yy:b}):"number"==typeof a?new c.Matrix2D({xx:a,yy:a}):new c.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var b=Math.cos(a),d=Math.sin(a);return new c.Matrix2D({xx:b,xy:-d,yx:d,yy:b})},rotateg:function(a){return c.rotate(c._degToRad(a))},skewX:function(a){return new c.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return c.skewX(c._degToRad(a))},skewY:function(a){return new c.Matrix2D({yx:Math.tan(a)})},skewYg:function(a){return c.skewY(c._degToRad(a))},reflect:function(a,b){1==arguments.length&&(b=a.y,a=a.x);var d=a*a,e=b*b,f=d+e,g=2*a*b/f;return new c.Matrix2D({xx:2*d/f-1,xy:g,yx:g,yy:2*e/f-1})},project:function(a,b){1==arguments.length&&(b=a.y,a=a.x);var d=a*a,e=b*b,f=d+e,g=a*b/f;return new c.Matrix2D({xx:d/f,xy:g,yx:g,yy:e/f})},normalize:function(a){return a instanceof c.Matrix2D?a:new c.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var b=new c.Matrix2D;for(var d in a)"number"==typeof a[d]&&"number"==typeof b[d]&&b[d]!=a[d]&&(b[d]=a[d]);return b},invert:function(a){var b=c.normalize(a),d=b.xx*b.yy-b.xy*b.yx;return b=new c.Matrix2D({xx:b.yy/d,xy:-b.xy/d,yx:-b.yx/d,yy:b.xx/d,dx:(b.xy*b.dy-b.yy*b.dx)/d,dy:(b.yx*b.dx-b.xx*b.dy)/d})},_multiplyPoint:function(a,b,c){return{x:a.xx*b+a.xy*c+a.dx,y:a.yx*b+a.yy*c+a.dy}},
multiplyPoint:function(a,b,d){var e=c.normalize(a);return"number"==typeof b&&"number"==typeof d?c._multiplyPoint(e,b,d):c._multiplyPoint(e,b.x,b.y)},multiplyRectangle:function(a,b){var d=c.normalize(a);if(b=b||{x:0,y:0,width:0,height:0},c.isIdentity(d))return{x:b.x,y:b.y,width:b.width,height:b.height};var e=c.multiplyPoint(d,b.x,b.y),f=c.multiplyPoint(d,b.x,b.y+b.height),g=c.multiplyPoint(d,b.x+b.width,b.y),h=c.multiplyPoint(d,b.x+b.width,b.y+b.height),i=Math.min(e.x,f.x,g.x,h.x),j=Math.min(e.y,f.y,g.y,h.y);return{x:i,y:j,width:Math.max(e.x,f.x,g.x,h.x)-i,height:Math.max(e.y,f.y,g.y,h.y)-j}},multiply:function(a){for(var b=c.normalize(a),d=1;d<arguments.length;++d){var e=b,f=c.normalize(arguments[d]);b=new c.Matrix2D,b.xx=e.xx*f.xx+e.xy*f.yx,b.xy=e.xx*f.xy+e.xy*f.yy,b.yx=e.yx*f.xx+e.yy*f.yx,b.yy=e.yx*f.xy+e.yy*f.yy,b.dx=e.xx*f.dx+e.xy*f.dy+e.dx,b.dy=e.yx*f.dx+e.yy*f.dy+e.dy}return b},_sandwich:function(a,b,d){return c.multiply(c.translate(b,d),a,c.translate(-b,-d))},scaleAt:function(a,b,d,e){switch(arguments.length){case 4:return c._sandwich(c.scale(a,b),d,e);case 3:return"number"==typeof d?c._sandwich(c.scale(a),b,d):c._sandwich(c.scale(a,b),d.x,d.y)}return c._sandwich(c.scale(a),b.x,b.y)},rotateAt:function(a,b,d){return arguments.length>2?c._sandwich(c.rotate(a),b,d):c._sandwich(c.rotate(a),b.x,b.y)},rotategAt:function(a,b,d){return arguments.length>2?c._sandwich(c.rotateg(a),b,d):c._sandwich(c.rotateg(a),b.x,b.y)},skewXAt:function(a,b,d){return arguments.length>2?c._sandwich(c.skewX(a),b,d):c._sandwich(c.skewX(a),b.x,b.y)},skewXgAt:function(a,b,d){return arguments.length>2?c._sandwich(c.skewXg(a),b,d):c._sandwich(c.skewXg(a),b.x,b.y)},skewYAt:function(a,b,d){return arguments.length>2?c._sandwich(c.skewY(a),b,d):c._sandwich(c.skewY(a),b.x,b.y)},skewYgAt:function(a,b,d){return arguments.length>2?c._sandwich(c.skewYg(a),b,d):c._sandwich(c.skewYg(a),b.x,b.y)}}),a.Matrix2D=c.Matrix2D,c})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(a,b,c,d){var e=b.getObject("color",!0,a);return e.Color=c,e.blend=c.blendColors,e.fromRgb=c.fromRgb,e.fromHex=c.fromHex,e.fromArray=c.fromArray,e.fromString=c.fromString,e.greyscale=d.makeGrey,b.mixin(e,{fromCmy:function(a,d,e){b.isArray(a)?(d=a[1],e=a[2],a=a[0]):b.isObject(a)&&(d=a.m,e=a.y,a=a.c),a/=100,d/=100,e/=100;var f=1-a,g=1-d,h=1-e;return new c({r:Math.round(255*f),g:Math.round(255*g),b:Math.round(255*h)})},fromCmyk:function(a,d,e,f){b.isArray(a)?(d=a[1],e=a[2],f=a[3],a=a[0]):b.isObject(a)&&(d=a.m,e=a.y,f=a.b,a=a.c),a/=100,d/=100,e/=100,f/=100;var g,h,i;return g=1-Math.min(1,a*(1-f)+f),h=1-Math.min(1,d*(1-f)+f),i=1-Math.min(1,e*(1-f)+f),new c({r:Math.round(255*g),g:Math.round(255*h),b:Math.round(255*i)})},fromHsl:function(a,d,e){for(b.isArray(a)?(d=a[1],e=a[2],a=a[0]):b.isObject(a)&&(d=a.s,e=a.l,a=a.h),d/=100,e/=100;a<0;)a+=360;for(;a>=360;)a-=360;var f,g,h;return a<120?(f=(120-a)/60,g=a/60,h=0):a<240?(f=0,g=(240-a)/60,h=(a-120)/60):(f=(a-240)/60,g=0,h=(360-a)/60),f=2*d*Math.min(f,1)+(1-d),g=2*d*Math.min(g,1)+(1-d),h=2*d*Math.min(h,1)+(1-d),e<.5?(f*=e,g*=e,h*=e):(f=(1-e)*f+2*e-1,g=(1-e)*g+2*e-1,h=(1-e)*h+2*e-1),new c({r:Math.round(255*f),g:Math.round(255*g),b:Math.round(255*h)})}}),e.fromHsv=function(a,d,e){b.isArray(a)?(d=a[1],e=a[2],a=a[0]):b.isObject(a)&&(d=a.s,e=a.v,a=a.h),360==a&&(a=0),d/=100,e/=100;var f,g,h;if(0==d)f=e,h=e,g=e;else{var i=a/60,j=Math.floor(i),k=i-j,l=e*(1-d),m=e*(1-d*k),n=e*(1-d*(1-k));switch(j){case 0:f=e,g=n,h=l;break;case 1:f=m,g=e,h=l;break;case 2:f=l,g=e,h=n;break;case 3:f=l,g=m,h=e;break;case 4:f=n,g=l,h=e;break;case 5:f=e,g=l,h=m}}return new c({r:Math.round(255*f),g:Math.round(255*g),b:Math.round(255*h)})},b.extend(c,{toCmy:function(){var a=1-this.r/255,b=1-this.g/255,c=1-this.b/255;return{c:Math.round(100*a),m:Math.round(100*b),y:Math.round(100*c)}},toCmyk:function(){var a,b,c,d,e=this.r/255,f=this.g/255,g=this.b/255;return d=Math.min(1-e,1-f,1-g),a=(1-e-d)/(1-d),b=(1-f-d)/(1-d),c=(1-g-d)/(1-d),{c:Math.round(100*a),m:Math.round(100*b),y:Math.round(100*c),b:Math.round(100*d)}},toHsl:function(){var a=this.r/255,b=this.g/255,c=this.b/255,d=Math.min(a,c,b),e=Math.max(a,b,c),f=e-d,g=0,h=0,i=(d+e)/2;return i>0&&i<1&&(h=f/(i<.5?2*i:2-2*i)),f>0&&(e==a&&e!=b&&(g+=(b-c)/f),e==b&&e!=c&&(g+=2+(c-a)/f),e==c&&e!=a&&(g+=4+(a-b)/f),g*=60),{h:g,s:Math.round(100*h),l:Math.round(100*i)}},toHsv:function(){var a=this.r/255,b=this.g/255,c=this.b/255,d=Math.min(a,c,b),e=Math.max(a,b,c),f=e-d,g=null,h=0==e?0:f/e;return 0==h?g=0:(g=a==e?60*(b-c)/f:b==e?120+60*(c-a)/f:240+60*(a-b)/f)<0&&(g+=360),{h:g,s:Math.round(100*h),v:Math.round(100*e)}}}),e})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(a,b,c){function d(a,d,e){var f=new c.Palette;return f.colors=[],b.forEach(a.colors,function(a){var b="dr"==d?a.r+e:a.r,g="dg"==d?a.g+e:a.g,h="db"==d?a.b+e:a.b,i="da"==d?a.a+e:a.a;f.colors.push(new c.Color({r:Math.min(255,Math.max(0,b)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,h)),a:Math.min(1,Math.max(0,i))}))}),f}function e(a,d,e){var f=new c.Palette;return f.colors=[],b.forEach(a.colors,function(a){var b=a.toCmy(),g="dc"==d?b.c+e:b.c,h="dm"==d?b.m+e:b.m,i="dy"==d?b.y+e:b.y;f.colors.push(c.fromCmy(Math.min(100,Math.max(0,g)),Math.min(100,Math.max(0,h)),Math.min(100,Math.max(0,i))))}),f}function f(a,d,e){var f=new c.Palette;return f.colors=[],b.forEach(a.colors,function(a){var b=a.toCmyk(),g="dc"==d?b.c+e:b.c,h="dm"==d?b.m+e:b.m,i="dy"==d?b.y+e:b.y,j="dk"==d?b.b+e:b.b;f.colors.push(c.fromCmyk(Math.min(100,Math.max(0,g)),Math.min(100,Math.max(0,h)),Math.min(100,Math.max(0,i)),Math.min(100,Math.max(0,j))))}),f}function g(a,d,e){var f=new c.Palette;return f.colors=[],b.forEach(a.colors,function(a){var b=a.toHsl(),g="dh"==d?b.h+e:b.h,h="ds"==d?b.s+e:b.s,i="dl"==d?b.l+e:b.l;f.colors.push(c.fromHsl(g%360,Math.min(100,Math.max(0,h)),Math.min(100,Math.max(0,i))))}),f}function h(a,d,e){var f=new c.Palette;return f.colors=[],b.forEach(a.colors,function(a){var b=a.toHsv(),g="dh"==d?b.h+e:b.h,h="ds"==d?b.s+e:b.s,i="dv"==d?b.v+e:b.v;f.colors.push(c.fromHsv(g%360,Math.min(100,Math.max(0,h)),Math.min(100,Math.max(0,i))))}),f}function i(a,b,c){return c-(c-b)/c*(c-a)}return c.Palette=function(d){this.colors=[],d instanceof c.Palette?this.colors=d.colors.slice(0):d instanceof c.Color?this.colors=[null,null,d,null,null]:a.isArray(d)?this.colors=b.map(d.slice(0),function(b){return a.isString(b)?new c.Color(b):b}):a.isString(d)&&(this.colors=[null,null,new c.Color(d),null,null])},a.extend(c.Palette,{transform:function(a){var b=d;if(a.use){var c=a.use.toLowerCase();0==c.indexOf("hs")?b="l"==c.charAt(2)?g:h:0==c.indexOf("cmy")&&(b="k"==c.charAt(3)?f:e)}else"dc"in a||"dm"in a||"dy"in a?b="dk"in a?f:e:("dh"in a||"ds"in a)&&(b="dv"in a?h:g);var i=this;for(var j in a)"use"!=j&&(i=b(i,j,a[j]));return i},clone:function(){return new c.Palette(this)}}),a.mixin(c.Palette,{generators:{analogous:function(d){var e=d.high||60,f=d.low||18,g=a.isString(d.base)?new c.Color(d.base):d.base,h=g.toHsv(),i=[(h.h+f+360)%360,(h.h+Math.round(f/2)+360)%360,h.h,(h.h-Math.round(e/2)+360)%360,(h.h-e+360)%360],j=Math.max(10,h.s<=95?h.s+5:100-(h.s-95)),k=h.s>1?h.s-1:21-h.s,l=h.v>=92?h.v-9:Math.max(h.v+9,20),m=h.v<=90?Math.max(h.v+5,20):95+Math.ceil((h.v-90)/2),n=[j,k,h.s,j,j],o=[l,m,h.v,l,m];return new c.Palette(b.map(i,function(a,b){return c.fromHsv(a,n[b],o[b])}))},monochromatic:function(b){var d=a.isString(b.base)?new c.Color(b.base):b.base,e=d.toHsv(),f=e.s-30>9?e.s-30:e.s+30,g=e.s,h=i(e.v,20,100),j=e.v-20>20?e.v-20:e.v+60,k=e.v-50>20?e.v-50:e.v+30;return new c.Palette([c.fromHsv(e.h,f,h),c.fromHsv(e.h,g,k),d,c.fromHsv(e.h,f,k),c.fromHsv(e.h,g,j)])},triadic:function(b){var d=a.isString(b.base)?new c.Color(b.base):b.base,e=d.toHsv(),f=(e.h+57+360)%360,g=(e.h-157+360)%360,h=e.s>20?e.s-10:e.s+10,i=e.s>90?e.s-10:e.s+10,j=e.s>95?e.s-5:e.s+5,k=e.v-20>20?e.v-20:e.v+20,l=e.v-30>20?e.v-30:e.v+30,m=e.v-30>70?e.v-30:e.v+30;return new c.Palette([c.fromHsv(f,h,e.v),c.fromHsv(e.h,i,l),d,c.fromHsv(g,i,k),c.fromHsv(g,j,m)])},complementary:function(b){var d=a.isString(b.base)?new c.Color(b.base):b.base,e=d.toHsv(),f=2*e.h+137<360?2*e.h+137:Math.floor(e.h/2)-137,g=Math.max(e.s-10,0),h=i(e.s,10,100),j=Math.min(100,e.s+20),k=Math.min(100,e.v+30),l=e.v>20?e.v-30:e.v+30;return new c.Palette([c.fromHsv(e.h,g,k),c.fromHsv(e.h,h,l),d,c.fromHsv(f,j,l),c.fromHsv(f,e.s,e.v)])},splitComplementary:function(b){var d=a.isString(b.base)?new c.Color(b.base):b.base,e=b.da||30,f=d.toHsv(),g=2*f.h+137<360?2*f.h+137:Math.floor(f.h/2)-137,h=(g-e+360)%360,j=(g+e)%360,k=Math.max(f.s-10,0),l=i(f.s,10,100),m=Math.min(100,f.s+20),n=Math.min(100,f.v+30),o=f.v>20?f.v-30:f.v+30;return new c.Palette([c.fromHsv(h,k,n),c.fromHsv(h,l,o),d,c.fromHsv(j,m,o),c.fromHsv(j,f.s,f.v)])},compound:function(b){var d=a.isString(b.base)?new c.Color(b.base):b.base,e=d.toHsv(),f=2*e.h+18<360?2*e.h+18:Math.floor(e.h/2)-18,g=2*e.h+120<360?2*e.h+120:Math.floor(e.h/2)-120,h=2*e.h+99<360?2*e.h+99:Math.floor(e.h/2)-99,i=e.s-40>10?e.s-40:e.s+40,j=e.s-10>80?e.s-10:e.s+10,k=e.s-25>10?e.s-25:e.s+25,l=e.v-40>10?e.v-40:e.v+40,m=e.v-20>80?e.v-20:e.v+20,n=Math.max(e.v,20);return new c.Palette([c.fromHsv(f,i,l),c.fromHsv(f,j,m),d,c.fromHsv(g,k,n),c.fromHsv(h,j,m)])},shades:function(b){var d=a.isString(b.base)?new c.Color(b.base):b.base,e=d.toHsv(),f=100==e.s&&0==e.v?0:e.s,g=e.v-50>20?e.v-50:e.v+30,h=e.v-25>=20?e.v-25:e.v+55,i=e.v-75>=20?e.v-75:e.v+5,j=Math.max(e.v-10,20);return new c.Palette([new c.fromHsv(e.h,f,g),new c.fromHsv(e.h,f,h),d,new c.fromHsv(e.h,f,i),new c.fromHsv(e.h,f,j)])}},generate:function(b,d){if(a.isFunction(d))return d({base:b});if(c.Palette.generators[d])return c.Palette.generators[d]({base:b});throw new Error("dojox.color.Palette.generate: the specified generator ('"+d+"') does not exist.")}}),c.Palette})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],function(a){return a.getObject("dojox.charting.themes",!0)})},"dojox/charting/themes/PlotKit/base":function(){define(["dojo/_base/lang","dojo/_base/Color","../../Theme","../common"],function(a,b,c,d){var e=a.getObject("PlotKit",!0,d);return e.base=new c({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:.5},majorTick:{color:"#fff",width:.5,length:6},minorTick:{color:"#fff",width:.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]}),e.base.next=function(a,d,e){var f=c.prototype.next.apply(this,arguments);return"line"==a?(f.marker.outline={width:2,color:"#fff"},f.series.stroke.width=3.5,f.marker.stroke.width=2):"candlestick"==a?f.series.stroke.width=1:f.series.stroke.color&&f.series.stroke.color.toString()==new b(this.colors[(this._current-1)%this.colors.length]).toString()&&(f.series.stroke.color="#fff"),f},e})},"dojox/charting/themes/PlotKit/green":function(){define(["./base","../../Theme"],function(a,b){return a.green=a.base.clone(),a.green.chart.fill=a.green.plotarea.fill="#eff5e6",a.green.colors=b.defineColors({hue:82,saturation:60,low:40,high:88}),a.green})},"dojox/charting/widget/Chart2D":function(){define(["dojo/_base/kernel","dojo/_base/lang","./Chart","../Chart2D","../action2d/Highlight","../action2d/Magnify","../action2d/MoveSlice","../action2d/Shake","../action2d/Tooltip"],function(a,b,c){return a.deprecated("dojox.charting.widget.Chart2D","Use dojo.charting.widget.Chart instead and require all other components explicitly","2.0"),b.setObject("dojox.charting.widget.Chart2D",c)})},"dojox/charting/widget/Chart":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/dom-attr","dojo/_base/declare","dojo/query","dijit/_WidgetBase","../Chart","dojo/has","dojo/has!dojo-bidi?../bidi/widget/Chart","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/lambda"],function(kernel,lang,arr,domAttr,declare,query,_WidgetBase,ChartBase,has,BidiChart,du,df,dfl){var collectParams,collectAxisParams,collectPlotParams,collectActionParams,collectDataParams,notNull=function(a){return a},dc=lang.getObject("dojox.charting");collectParams=function(node,type,kw){var dp=eval("("+type+".prototype.defaultParams)"),x,attr;for(x in dp)x in kw||(attr=node.getAttribute(x),kw[x]=du.coerceType(dp[x],null==attr||void 0===attr?dp[x]:attr));var op=eval("("+type+".prototype.optionalParams)");for(x in op)x in kw||null!=(attr=node.getAttribute(x))&&(kw[x]=du.coerceType(op[x],attr))},collectAxisParams=function(node){var name=node.getAttribute("name"),type=node.getAttribute("type");if(!name)return null;var o={name:name,kwArgs:{}},kw=o.kwArgs;if(type){dc.axis2d[type]&&(type=kernel._scopeName+"x.charting.axis2d."+type);var axis=eval("("+type+")");axis&&(kw.type=axis)}else type=kernel._scopeName+"x.charting.axis2d.Default";return collectParams(node,type,kw),(kw.font||kw.fontColor)&&(kw.tick||(kw.tick={}),kw.font&&(kw.tick.font=kw.font),kw.fontColor&&(kw.tick.fontColor=kw.fontColor)),o},collectPlotParams=function(node){var name=node.getAttribute("name"),type=node.getAttribute("type");if(!name)return null;var o={name:name,kwArgs:{}},kw=o.kwArgs;if(type){dc.plot2d&&dc.plot2d[type]&&(type=kernel._scopeName+"x.charting.plot2d."+type);var plot=eval("("+type+")");plot&&(kw.type=plot)}else type=kernel._scopeName+"x.charting.plot2d.Default";collectParams(node,type,kw);var dp=eval("("+type+".prototype.baseParams)"),x,attr;for(x in dp)x in kw||(attr=node.getAttribute(x),kw[x]=du.coerceType(dp[x],null==attr||void 0===attr?dp[x]:attr));return o},collectActionParams=function(node){var plot=node.getAttribute("plot"),type=node.getAttribute("type");plot||(plot="default");var o={plot:plot,kwArgs:{}},kw=o.kwArgs;if(!type)return null;dc.action2d[type]&&(type=kernel._scopeName+"x.charting.action2d."+type);var action=eval("("+type+")");return action?(o.action=action,collectParams(node,type,kw),o):null},collectDataParams=function(node){var ga=lang.partial(domAttr.get,node),name=ga("name");if(!name)return null;var o={name:name,kwArgs:{}},kw=o.kwArgs,t;return t=ga("plot"),null!=t&&(kw.plot=t),t=ga("marker"),null!=t&&(kw.marker=t),t=ga("stroke"),null!=t&&(kw.stroke=eval("("+t+")")),t=ga("outline"),null!=t&&(kw.outline=eval("("+t+")")),t=ga("shadow"),null!=t&&(kw.shadow=eval("("+t+")")),t=ga("fill"),null!=t&&(kw.fill=eval("("+t+")")),t=ga("font"),null!=t&&(kw.font=t),t=ga("fontColor"),null!=t&&(kw.fontColor=eval("("+t+")")),t=ga("legend"),null!=t&&(kw.legend=t),null!=(t=ga("data"))?(o.type="data",o.data=t?arr.map(String(t).split(","),Number):[],o):null!=(t=ga("array"))?(o.type="data",o.data=eval("("+t+")"),o):(t=ga("store"),null!=t?(o.type="store",o.data=eval("("+t+")"),t=ga("field"),o.field=null!=t?t:"value",t=ga("query"),t&&(kw.query=t),t=ga("queryOptions"),t&&(kw.queryOptions=eval("("+t+")")),t=ga("start"),t&&(kw.start=Number(t)),t=ga("count"),t&&(kw.count=Number(t)),t=ga("sort"),t&&(kw.sort=eval("("+t+")")),t=ga("valueFn"),t&&(kw.valueFn=dfl.lambda(t)),o):null)};var Chart=declare(has("dojo-bidi")?"dojox.charting.widget.NonBidiChart":"dojox.charting.widget.Chart",_WidgetBase,{theme:null,margins:null,stroke:void 0,fill:void 0,buildRendering:function(){this.inherited(arguments);var a=this.domNode,b=query("> .axis",a).map(collectAxisParams).filter(notNull),c=query("> .plot",a).map(collectPlotParams).filter(notNull),d=query("> .action",a).map(collectActionParams).filter(notNull),e=query("> .series",a).map(collectDataParams).filter(notNull);a.innerHTML="";var f=this.chart=new ChartBase(a,{margins:this.margins,stroke:this.stroke,fill:this.fill,textDir:this.textDir});this.theme&&f.setTheme(this.theme),b.forEach(function(a){f.addAxis(a.name,a.kwArgs)}),c.forEach(function(a){f.addPlot(a.name,a.kwArgs)}),this.actions=d.map(function(a){return new a.action(f,a.plot,a.kwArgs)}),df.foldl(e,function(a,b){if("data"==b.type)f.addSeries(b.name,b.data,b.kwArgs),a=!0;else{f.addSeries(b.name,[0],b.kwArgs);var c={};du.updateWithPattern(c,b.kwArgs,{query:"",queryOptions:null,start:0,count:1},!0),b.kwArgs.sort&&(c.sort=lang.clone(b.kwArgs.sort)),lang.mixin(c,{onComplete:function(a){var c;if("valueFn"in b.kwArgs){var d=b.kwArgs.valueFn;c=arr.map(a,function(a){return d(b.data.getValue(a,b.field,0))})}else c=arr.map(a,function(a){return b.data.getValue(a,b.field,0)});f.addSeries(b.name,c,b.kwArgs).render()}}),b.data.fetch(c)}return a},!1)&&f.render()},destroy:function(){this.chart.destroy(),this.inherited(arguments)},resize:function(a){this.chart.resize.apply(this.chart,arguments)}});return has("dojo-bidi")?declare("dojox.charting.widget.Chart",[Chart,BidiChart]):Chart})},"dojox/charting/Chart":function(){define(["../main","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/dom-style","dojo/dom","dojo/dom-geometry","dojo/dom-construct","dojo/_base/Color","dojo/sniff","./Element","./SimpleTheme","./Series","./axis2d/common","dojox/gfx/shape","dojox/gfx","dojo/has!dojo-bidi?./bidi/Chart","dojox/lang/functional","dojox/lang/functional/fold","dojox/lang/functional/reversed"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a){return{min:a.hmin,max:a.hmax}}function t(a){return{min:a.vmin,max:a.vmax}}function u(a,b){a.hmin=b.min,a.hmax=b.max}function v(a,b){a.vmin=b.min,a.vmax=b.max}function w(a,b){return a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max)),a||b}function x(a,b){var d={},e={};c.forEach(a,function(a){var b=d[a.name]=a.getSeriesStats();a.hAxis&&(e[a.hAxis]=w(e[a.hAxis],s(b))),a.vAxis&&(e[a.vAxis]=w(e[a.vAxis],t(b)))}),c.forEach(a,function(a){var c=d[a.name];a.hAxis&&u(c,e[a.hAxis]),a.vAxis&&v(c,e[a.vAxis]),a.initializeScalers(b,c)})}var y=b.getObject("charting",!0,a),z=r.lambda("item.clear()"),A=r.lambda("item.purgeGroup()"),B=r.lambda("item.destroy()"),C=r.lambda("item.dirty = false"),D=r.lambda("item.dirty = true"),E=r.lambda("item.name"),F=d(j("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,b){b||(b={}),this.margins=b.margins?b.margins:{l:10,t:10,r:10,b:10},this.stroke=b.stroke,this.fill=b.fill,this.delayInMs=b.delayInMs||200,this.title=b.title,this.titleGap=b.titleGap,this.titlePos=b.titlePos,this.titleFont=b.titleFont,this.titleFontColor=b.titleFontColor,this.chartTitle=null,this.htmlLabels=!0,"htmlLabels"in b&&(this.htmlLabels=b.htmlLabels),this.theme=null,this.axes={},this.stack=[],this.plots={},this.series=[],this.runs={},this.dirty=!0,this.node=f.byId(a);var c=g.getMarginBox(a);this.surface=p.createSurface(this.node,c.w||400,c.h||300),-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){c.forEach(this.series,B),c.forEach(this.stack,B),r.forIn(this.axes,B),this.surface.destroy(),this.chartTitle&&this.chartTitle.tagName&&h.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=e.getComputedStyle(a),c=g.getMarginBox(a,b),d=g.position(a,!0);return c.x=d.x,c.y=d.y,c},setTheme:function(a){return this.theme=a.clone(),this.dirty=!0,this},addAxis:function(a,b){var c,d=b&&b.type||"Default";if("string"==typeof d){if(!y.axis2d||!y.axis2d[d])throw Error("Can't find axis: "+d+" - Check require() dependencies.");c=new y.axis2d[d](this,b)}else c=new d(this,b);return c.name=a,c.dirty=!0,a in this.axes&&this.axes[a].destroy(),this.axes[a]=c,this.dirty=!0,this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){return a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0),this},addPlot:function(a,b){var c,d=b&&b.type||"Default";if("string"==typeof d){if(!y.plot2d||!y.plot2d[d])throw Error("Can't find plot: "+d+" - didn't you forget to dojo.require() it?");c=new y.plot2d[d](this,b)}else c=new d(this,b);return c.name=a,c.dirty=!0,a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=this.stack.length,this.stack.push(c)),this.dirty=!0,this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a],this.stack[b].destroy(),this.stack.splice(b,1),r.forIn(this.plots,function(a,c,d){a>b&&(d[c]=a-1)});var d=c.filter(this.series,function(b){return b.plot!=a});d.length<this.series.length&&(c.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},c.forEach(d,function(a,b){this.runs[a.plot]=b},this),this.series=d),this.dirty=!0}return this},getPlotOrder:function(){return r.map(this.stack,E)},setPlotOrder:function(a){var b={},c=r.filter(a,function(a){return a in this.plots&&!(a in b)&&(b[a]=1,!0)},this);c.length<this.stack.length&&r.forEach(this.stack,function(a){var d=a.name;d in b||c.push(d)});var d=r.map(c,function(a){return this.stack[this.plots[a]]},this);return r.forEach(d,function(a,b){this.plots[a.name]=b},this),this.stack=d,this.dirty=!0,this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();return c.splice(b,1),c.unshift(a),this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();return c.splice(b,1),c.push(a),this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){var d=new m(this,b,c);return d.name=a,a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=d):(this.runs[a]=this.series.length,this.series.push(d)),this.dirty=!0,!("ymin"in d)&&"min"in d&&(d.ymin=d.min),!("ymax"in d)&&"max"in d&&(d.ymax=d.max),this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a],this.series[b].destroy(),this.series.splice(b,1),r.forIn(this.runs,function(a,c,d){a>b&&(d[c]=a-1)}),this.dirty=!0}return this},updateSeries:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]];d.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(d.plot,!1),this._invalidateDependentPlots(d.plot,!0))}return this},getSeriesOrder:function(a){return r.map(r.filter(this.series,function(b){return b.plot==a}),E)},setSeriesOrder:function(a){var b,c={},d=r.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=b)return!1}else b=d.plot;return c[a]=1,!0},this);r.forEach(this.series,function(a){var e=a.name;e in c||a.plot!=b||d.push(e)});var e=r.map(d,function(a){return this.series[this.runs[a]]},this);return this.series=e.concat(r.filter(this.series,function(a){return a.plot!=b})),r.forEach(this.series,function(a,b){this.runs[a.name]=b},this),this.dirty=!0,this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:g.setMarginBox(this.node,a);break;case 2:g.setMarginBox(this.node,{w:a,h:b})}var c=g.getMarginBox(this.node),d=this.surface.getDimensions();return d.width!=c.w||d.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};return r.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})}),a},setAxisWindow:function(a,b,d,e){var f=this.axes[a];return f&&(f.setWindow(b,d),c.forEach(this.stack,function(b){b.hAxis!=a&&b.vAxis!=a||(b.zoom=e)})),this},setWindow:function(a,b,d,e,f){return"plotArea"in this||this.calculateGeometry(),r.forIn(this.axes,function(c){var f,g,h=c.getScaler().bounds,i=h.span/(h.upper-h.lower);c.vertical?(f=b,g=e/i/f):(f=a,g=d/i/f),c.setWindow(f,g)}),c.forEach(this.stack,function(a){a.zoom=f}),this},zoomIn:function(a,b,c){var d=this.axes[a];if(d){var e,f,g=d.getScaler().bounds,h=Math.min(b[0],b[1]),i=Math.max(b[0],b[1]);h=b[0]<g.lower?g.lower:h,i=b[1]>g.upper?g.upper:i,e=(g.upper-g.lower)/(i-h),f=h-g.lower,this.setAxisWindow(a,e,f),c?this.delayedRender():this.render()}},calculateGeometry:function(){return this.dirty?this.fullGeometry():(x(c.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this),this.plotArea),this)},fullGeometry:function(){this._makeDirty(),c.forEach(this.stack,z),this.theme||this.setTheme(new l),c.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!y.plot2d||!y.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new y.plot2d.Default(this,{});b.name=a.plot,this.plots[a.plot]=this.stack.length,this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this),c.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var a=this.dim=this.surface.getDimensions();a.width=p.normalizedLength(a.width),a.height=p.normalizedLength(a.height),r.forIn(this.axes,z),x(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0},d=this;if(r.forIn(this.axes,function(a){j("dojo-bidi")&&d._resetLeftBottom(a),r.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})}),this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20,this.titlePos=this.titlePos||this.theme.chart.titlePos||"top",this.titleFont=this.titleFont||this.theme.chart.titleFont,this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var e=p.normalizedLength(p.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=e+this.titleGap}return r.forIn(this.margins,function(a,c){b[c]+=a}),this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b},r.forIn(this.axes,z),x(this.stack,this.plotArea),this},render:function(){return this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null),this.theme&&this.theme.clear(),this.dirty?this.fullRender():(this.calculateGeometry(),r.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this),r.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this),this._makeClean(),this)},fullRender:function(){this.fullGeometry();var a=this.offsets,b=this.dim,d=Math.max(0,b.width-a.l-a.r),e=Math.max(0,b.height-a.t-a.b);c.forEach(this.series,A),r.forIn(this.axes,A),c.forEach(this.stack,A);var f=this.surface.children;if(o.dispose)for(var g=0;g<f.length;++g)o.dispose(f[g]);if(this.chartTitle&&this.chartTitle.tagName&&h.destroy(this.chartTitle),this.surface.clear(),this.chartTitle=null,this._renderChartBackground(b,a),this._nativeClip,this._renderPlotBackground(b,a,d,e),r.foldr(this.stack,function(c,d){return d.render(b,a),0},0),this._nativeClip||this._renderChartBackground(b,a),this.title){var i="canvas"==p.renderer&&this.htmlLabels,k=i||!j("ie")&&!j("opera")&&this.htmlLabels?"html":"gfx",l=p.normalizedLength(p.splitFontString(this.titleFont).size);this.chartTitle=n.createText[k](this,this.surface,b.width/2,"top"==this.titlePos?l+this.margins.t:b.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor)}return r.forIn(this.axes,function(c){c.render(b,a)}),this._makeClean(),this},_renderChartBackground:function(a,b){var c,d=this.theme,f=void 0!==this.fill?this.fill:d.chart&&d.chart.fill,g=void 0!==this.stroke?this.stroke:d.chart&&d.chart.stroke;if("inherit"==f){var h=this.node;for(f=new i(e.get(h,"backgroundColor"));0==f.a&&h!=document.documentElement;)f=new i(e.get(h,"backgroundColor")),h=h.parentNode}f&&(this._nativeClip?(f=k.prototype._shapeFill(k.prototype._plotFill(f,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(f)):(f=k.prototype._plotFill(f,a,b),b.l&&(c={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(c).setFill(k.prototype._shapeFill(f,c))),b.r&&(c={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},this.surface.createRect(c).setFill(k.prototype._shapeFill(f,c))),b.t&&(c={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(c).setFill(k.prototype._shapeFill(f,c))),b.b&&(c={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(c).setFill(k.prototype._shapeFill(f,c))))),g&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(g)},_renderPlotBackground:function(a,b,c,d){var e=this.theme,f=e.plotarea&&e.plotarea.fill,g=e.plotarea&&e.plotarea.stroke,h={x:b.l-1,y:b.t-1,width:c+2,height:d+2};f&&(f=k.prototype._shapeFill(k.prototype._plotFill(f,a,b),h),this.surface.createRect(h).setFill(f)),g&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(g)},delayedRender:function(){return this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(b.hitch(this,function(){this.render()}),this.delayInMs)),this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]].plot;if(d in this.plots){var e=this.stack[this.plots[d]];e&&e.fireEvent(a,b,c)}}return this},_makeClean:function(){c.forEach(this.axes,C),c.forEach(this.stack,C),c.forEach(this.series,C),this.dirty=!1},_makeDirty:function(){c.forEach(this.axes,D),c.forEach(this.stack,D),c.forEach(this.series,D),this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var d,e=this.stack[this.plots[a]],f=b?"vAxis":"hAxis";e[f]?(d=this.axes[e[f]])&&d.dependOnData()&&(d.dirty=!0,c.forEach(this.stack,function(a){a[f]&&a[f]==e[f]&&(a.dirty=!0)})):e.dirty=!0}},setDir:function(a){return this},_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return j("dojo-bidi")?d("dojox.charting.Chart",[F,q]):F})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(a,b,c,d,e){return c("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(a,b){this.chart=a,this.group=null,this.htmlElements=[],this.dirty=!0,this.trailingSymbol="...",this._events=[],b&&b.renderingOptions&&(this.renderingOptions=b.renderingOptions)},purgeGroup:function(){if(this.destroyHtmlElements(),this.group){this.getGroup().removeShape();var c=this.getGroup().children;if(e.dispose)for(var d=0;d<c.length;++d)e.dispose(c[d],!0);this.getGroup().rawNode&&b.empty(this.getGroup().rawNode),this.getGroup().clear(),e.dispose&&e.dispose(this.getGroup(),!0),this.getGroup()!=this.group&&(this.group.rawNode&&b.empty(this.group.rawNode),this.group.clear(),e.dispose&&e.dispose(this.group,!0)),this.group=null}return this.dirty=!0,this._events.length&&(a.forEach(this._events,function(a){a.shape.disconnect(a.handle)}),this._events=[]),this},cleanGroup:function(a){if(this.destroyHtmlElements(),a||(a=this.chart.surface),this.group){var c,d=this.getGroup().children;if(e.dispose)for(var f=0;f<d.length;++f)e.dispose(d[f],!0);this.getGroup().rawNode&&(c=this.getGroup().bgNode,b.empty(this.getGroup().rawNode)),this.getGroup().clear(),c&&this.getGroup().rawNode.appendChild(c)}else if(this.group=a.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(var g in this.renderingOptions)this.group.rawNode.setAttribute(g,this.renderingOptions[g]);return this.dirty=!0,this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(a.forEach(this.htmlElements,b.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},getTextWidth:function(a,b){return d._base._getTextBox(a,{font:b}).w||0},getTextWithLimitLength:function(a,b,c,d){if(!a||a.length<=0)return{text:"",truncated:d||!1};if(!c||c<=0)return{text:a,truncated:d||!1};var e=2,f=.618,g=a.substring(0,1)+this.trailingSymbol;if(c<=this.getTextWidth(g,b))return{text:g,truncated:!0}
;if(this.getTextWidth(a,b)<=c)return{text:a,truncated:d||!1};for(var h=0,i=a.length;h<i;){if(i-h<=e){for(;this.getTextWidth(a.substring(0,h)+this.trailingSymbol,b)>c;)h-=1;return{text:a.substring(0,h)+this.trailingSymbol,truncated:!0}}var j=h+Math.round((i-h)*f);this.getTextWidth(a.substring(0,j),b)<c?(h=j,i=i):(h=h,i=j)}},getTextWithLimitCharCount:function(a,b,c,d){return!a||a.length<=0?{text:"",truncated:d||!1}:!c||c<=0||a.length<=c?{text:a,truncated:d||!1}:{text:a.substring(0,c)+this.trailingSymbol,truncated:!0}},_plotFill:function(a,b,c){if(!a||!a.type||!a.space)return a;var e,f=a.space;switch(a.type){case"linear":"plot"!==f&&"shapeX"!==f&&"shapeY"!==f||(a=d.makeParameters(d.defaultLinearGradient,a),a.space=f,"plot"!==f&&"shapeX"!==f||(e=b.height-c.t-c.b,a.y1=c.t+e*a.y1/100,a.y2=c.t+e*a.y2/100),"plot"!==f&&"shapeY"!==f||(e=b.width-c.l-c.r,a.x1=c.l+e*a.x1/100,a.x2=c.l+e*a.x2/100));break;case"radial":if("plot"===f){a=d.makeParameters(d.defaultRadialGradient,a),a.space=f;var g=b.width-c.l-c.r,h=b.height-c.t-c.b;a.cx=c.l+g*a.cx/100,a.cy=c.t+h*a.cy/100,a.r=a.r*Math.sqrt(g*g+h*h)/200}break;case"pattern":"plot"!==f&&"shapeX"!==f&&"shapeY"!==f||(a=d.makeParameters(d.defaultPattern,a),a.space=f,"plot"!==f&&"shapeX"!==f||(e=b.height-c.t-c.b,a.y=c.t+e*a.y/100,a.height=e*a.height/100),"plot"!==f&&"shapeY"!==f||(e=b.width-c.l-c.r,a.x=c.l+e*a.x/100,a.width=e*a.width/100))}return a},_shapeFill:function(a,b){if(!a||!a.space)return a;var c,e=a.space;switch(a.type){case"linear":"shape"!==e&&"shapeX"!==e&&"shapeY"!==e||(a=d.makeParameters(d.defaultLinearGradient,a),a.space=e,"shape"!==e&&"shapeX"!==e||(c=b.width,a.x1=b.x+c*a.x1/100,a.x2=b.x+c*a.x2/100),"shape"!==e&&"shapeY"!==e||(c=b.height,a.y1=b.y+c*a.y1/100,a.y2=b.y+c*a.y2/100));break;case"radial":"shape"===e&&(a=d.makeParameters(d.defaultRadialGradient,a),a.space=e,a.cx=b.x+b.width/2,a.cy=b.y+b.height/2,a.r=a.r*b.width/200);break;case"pattern":"shape"!==e&&"shapeX"!==e&&"shapeY"!==e||(a=d.makeParameters(d.defaultPattern,a),a.space=e,"shape"!==e&&"shapeX"!==e||(c=b.width,a.x=b.x+c*a.x/100,a.width=c*a.width/100),"shape"!==e&&"shapeY"!==e||(c=b.height,a.y=b.y+c*a.y/100,a.height=c*a.height/100))}return a},_pseudoRadialFill:function(a,b,c,e,f){if(!a||"radial"!==a.type||"shape"!==a.space)return a;var g=a.space;if(a=d.makeParameters(d.defaultRadialGradient,a),a.space=g,arguments.length<4)return a.cx=b.x,a.cy=b.y,a.r=a.r*c/100,a;var h=arguments.length<5?e:(f+e)/2;return{type:"linear",x1:b.x,y1:b.y,x2:b.x+a.r*c*Math.cos(h)/100,y2:b.y+a.r*c*Math.sin(h)/100,colors:a.colors}}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(a,b,c){return b.switchTo(c),b})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(a,b,c,d,e){var f=null;return c.add("vml",function(a,b,c){c.innerHTML='<v:shape adj="1"/>';var d="adj"in c.firstChild;return c.innerHTML="",d}),{load:function(g,h,i){function j(){h(["dojox/gfx/"+m],function(b){a.renderer=m,f=b,i(b)})}if(f&&"force"!=g)return void i(f);for(var k,l,m=e.forceGfxRenderer,n=!m&&(b.isString(e.gfxRenderer)?e.gfxRenderer:"svg,vml,canvas,silverlight").split(",");!m&&n.length;)switch(n.shift()){case"svg":"SVGAngle"in d.global&&(m="svg");break;case"vml":c("vml")&&(m="vml");break;case"silverlight":try{c("ie")?(k=new ActiveXObject("AgControl.AgControl"))&&k.IsVersionSupported("1.0")&&(l=!0):navigator.plugins["Silverlight Plug-In"]&&(l=!0)}catch(a){l=!1}finally{k=null}l&&(m="silverlight");break;case"canvas":d.global.CanvasRenderingContext2D&&(m="canvas")}"canvas"===m&&!1!==e.canvasEvents&&(m="canvasWithEvents"),e.isDebug,"svg"==m&&void 0!==window.svgweb?window.svgweb.addOnLoad(j):j()}}})},"dojox/gfx/shape":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/kernel","dojo/_base/sniff","dojo/on","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(a,b,c,d,e,f,g,h,i,j){var k=a.shape={};return k.Shape=c("dojox.gfx.shape.Shape",null,{constructor:function(){if(this.rawNode=null,this.shape=null,this.matrix=null,this.fillStyle=null,this.strokeStyle=null,this.bbox=null,this.parent=null,this.parentMatrix=null,e("gfxRegistry")){var a=k.register(this);this.getUID=function(){return a}}},destroy:function(){e("gfxRegistry")&&k.dispose(this),this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null),this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix(),c=j;return[c.multiplyPoint(b,a.x,a.y),c.multiplyPoint(b,a.x+a.width,a.y),c.multiplyPoint(b,a.x+a.width,a.y+a.height),c.multiplyPoint(b,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(b){return this.shape=a.makeParameters(this.shape,b),this.bbox=null,this},setFill:function(b){if(!b)return this.fillStyle=null,this;var c=null;if("object"==typeof b&&"type"in b)switch(b.type){case"linear":c=a.makeParameters(a.defaultLinearGradient,b);break;case"radial":c=a.makeParameters(a.defaultRadialGradient,b);break;case"pattern":c=a.makeParameters(a.defaultPattern,b)}else c=a.normalizeColor(b);return this.fillStyle=c,this},setStroke:function(c){if(!c)return this.strokeStyle=null,this;("string"==typeof c||b.isArray(c)||c instanceof i)&&(c={color:c});var d=this.strokeStyle=a.makeParameters(a.defaultStroke,c);return d.color=a.normalizeColor(d.color),this},setTransform:function(a){return this.matrix=j.clone(a?j.normalize(a):j.identity),this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();return a&&(a._moveChildToFront(this),this._moveToFront()),this},moveToBack:function(){var a=this.getParent();return a&&(a._moveChildToBack(this),this._moveToBack()),this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){return this.parent&&this.parent.remove(this,a),this},_setParent:function(a,b){return this.parent=a,this._updateParentMatrix(b)},_updateParentMatrix:function(a){return this.parentMatrix=a?j.clone(a):null,this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=j.multiply(b.matrix,a)),b=b.parent;return a}}),k._eventsProcessing={on:function(b,c){return f(this.getEventSource(),b,k.fixCallback(this,a.fixTarget,c))},connect:function(a,c,d){return"on"==a.substring(0,2)&&(a=a.substring(2)),this.on(a,d?b.hitch(c,d):c)},disconnect:function(a){return a.remove()}},k.fixCallback=function(a,c,e,f){if(f||(f=e,e=null),b.isString(f)){if(e=e||d.global,!e[f])throw['dojox.gfx.shape.fixCallback: scope["',f,'"] is null (scope="',e,'")'].join("");return function(b){return c(b,a)?e[f].apply(e,arguments||[]):void 0}}return e?function(b){return c(b,a)?f.apply(e,arguments||[]):void 0}:function(b){return c(b,a)?f.apply(e,arguments):void 0}},b.extend(k.Shape,k._eventsProcessing),k.Container={_init:function(){this.children=[],this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();return b&&b.remove(a,!0),this.children.push(a),a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null),this.children.splice(c,1);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();return this.children=[],this},getBoundingBox:function(){if(this.children){var a=null;return g.forEach(this.children,function(b){var c=b.getBoundingBox();if(c){var d=b.getTransform();d&&(c=j.multiplyRectangle(d,c)),a?(a.x=Math.min(a.x,c.x),a.y=Math.min(a.y,c.y),a.endX=Math.max(a.endX,c.x+c.width),a.endY=Math.max(a.endY,c.y+c.height)):a={x:c.x,y:c.y,endX:c.x+c.width,endY:c.y+c.height}}}),a&&(a.width=a.endX-a.x,a.height=a.endY-a.y),a}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1),this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1),this.children.unshift(a);break}return this}},k.Surface=c("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null,this._parent=null,this._nodes=[],this._events=[]},destroy:function(){if(g.forEach(this._nodes,h.destroy),this._nodes=[],g.forEach(this._events,function(a){a&&a.remove()}),this._events=[],this.rawNode=null,e("ie"))for(;this._parent.lastChild;)h.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,c){var d=b.hitch(a,c);this.isLoaded?d(this):f.once(this,"load",function(a){d(a)})}}),b.extend(k.Surface,k._eventsProcessing),k.Rect=c("dojox.gfx.shape.Rect",k.Shape,{constructor:function(b){this.shape=a.getDefault("Rect"),this.rawNode=b},getBoundingBox:function(){return this.shape}}),k.Ellipse=c("dojox.gfx.shape.Ellipse",k.Shape,{constructor:function(b){this.shape=a.getDefault("Ellipse"),this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}}),k.Circle=c("dojox.gfx.shape.Circle",k.Shape,{constructor:function(b){this.shape=a.getDefault("Circle"),this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}}),k.Line=c("dojox.gfx.shape.Line",k.Shape,{constructor:function(b){this.shape=a.getDefault("Line"),this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}}),k.Polyline=c("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(b){this.shape=a.getDefault("Polyline"),this.rawNode=b},setShape:function(a,b){return a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]),this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d={l:c.x,t:c.y,r:c.x,b:c.y},e=1;e<b;++e)c=a[e],d.l>c.x&&(d.l=c.x),d.r<c.x&&(d.r=c.x),d.t>c.y&&(d.t=c.y),d.b<c.y&&(d.b=c.y);this.bbox={x:d.l,y:d.t,width:d.r-d.l,height:d.b-d.t}}return this.bbox}}),k.Image=c("dojox.gfx.shape.Image",k.Shape,{constructor:function(b){this.shape=a.getDefault("Image"),this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}}),k.Text=c(k.Shape,{constructor:function(b){this.fontStyle=null,this.shape=a.getDefault("Text"),this.rawNode=b},getFont:function(){return this.fontStyle},setFont:function(b){return this.fontStyle="string"==typeof b?a.splitFontString(b):a.makeParameters(a.defaultFont,b),this._setFont(),this},getBoundingBox:function(){var b=null;return this.getShape().text&&(b=a._base._computeTextBoundingBox(this)),b}}),k.Creator={createShape:function(b){switch(b.type){case a.defaultPath.type:return this.createPath(b);case a.defaultRect.type:return this.createRect(b);case a.defaultCircle.type:return this.createCircle(b);case a.defaultEllipse.type:return this.createEllipse(b);case a.defaultLine.type:return this.createLine(b);case a.defaultPolyline.type:return this.createPolyline(b);case a.defaultImage.type:return this.createImage(b);case a.defaultText.type:return this.createText(b);case a.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(a.Group)},createRect:function(b){return this.createObject(a.Rect,b)},createEllipse:function(b){return this.createObject(a.Ellipse,b)},createCircle:function(b){return this.createObject(a.Circle,b)},createLine:function(b){return this.createObject(a.Line,b)},createPolyline:function(b){return this.createObject(a.Polyline,b)},createImage:function(b){return this.createObject(a.Image,b)},createText:function(b){return this.createObject(a.Text,b)},createPath:function(b){return this.createObject(a.Path,b)},createTextPath:function(b){return this.createObject(a.TextPath,{}).setText(b)},createObject:function(a,b){return null}},k})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(a,b,c){return b("dojox.charting.Series",c,{constructor:function(b,c,d){a.mixin(this,d),"string"!=typeof this.plot&&(this.plot="default"),this.update(c)},clear:function(){this.dyn={}},update:function(b){a.isArray(b)?this.data=b:(this.source=b,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this)),this.dirty=!0,this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(a,b,c,d,e){var f=a.getObject("dojox.charting.axis2d.common",!0),g=function(a){a.marginLeft="0px",a.marginTop="0px",a.marginRight="0px",a.marginBottom="0px",a.paddingLeft="0px",a.paddingTop="0px",a.paddingRight="0px",a.paddingBottom="0px",a.borderLeftWidth="0px",a.borderTopWidth="0px",a.borderRightWidth="0px",a.borderBottomWidth="0px"},h=function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect();return b.width||b.right-b.left}return c.getMarginBox(a).w};return a.mixin(f,{createText:{gfx:function(a,b,c,d,e,f,g,h){return b.createText({x:c,y:d,text:f,align:e}).setFont(g).setFill(h)},html:function(a,c,f,i,j,k,l,m,n){var o,p=b.doc.createElement("div"),q=p.style;a.getTextDir&&(p.dir=a.getTextDir(k)),g(q),q.font=l,p.innerHTML=String(k).replace(/\s/g,"&nbsp;"),q.color=m,q.position="absolute",q.left="-10000px",b.body().appendChild(p);var r=d.normalizedLength(d.splitFontString(l).size);if(n||(o=h(p)),"rtl"==p.dir&&(f+=n||o),b.body().removeChild(p),q.position="relative",n)switch(q.width=n+"px",j){case"middle":q.textAlign="center",q.left=f-n/2+"px";break;case"end":q.textAlign="right",q.left=f-n+"px";break;default:q.left=f+"px",q.textAlign="left"}else switch(j){case"middle":q.left=Math.floor(f-o/2)+"px";break;case"end":q.left=Math.floor(f-o)+"px";break;default:q.left=Math.floor(f)+"px"}q.top=Math.floor(i-r)+"px",q.whiteSpace="nowrap";var s=b.doc.createElement("div"),t=s.style;return g(t),t.width="0px",t.height="0px",s.appendChild(p),a.node.insertBefore(s,a.node.firstChild),e("dojo-bidi")&&a.htmlElementsRegistry.push([s,f,i,j,k,l,m]),s}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(a){return a})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(a,b,c){var d=b.getObject("lang.functional",!0,a),e={},f="ab".split(/a*/).length>1?String.prototype.split:function(a){var b=this.split.call(this,a),c=a.exec(this);return c&&0==c.index&&b.unshift(""),b},g=function(a){var b=[],d=f.call(a,/\s*->\s*/m);if(d.length>1)for(;d.length;)a=d.pop(),b=d.pop().split(/\s*,\s*|\s+/m),d.length&&d.push("(function("+b.join(", ")+"){ return ("+a+"); })");else if(a.match(/\b_\b/))b=["_"];else{var e=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),g=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(e||g)e&&(b.push("$1"),a="$1"+a),g&&(b.push("$2"),a+="$2");else{var h=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],i={};c.forEach(h,function(a){i.hasOwnProperty(a)||(b.push(a),i[a]=1)})}}return{args:b,body:a}},h=function(a){return a.length?function(){var b=a.length-1,c=d.lambda(a[b]).apply(this,arguments);for(--b;b>=0;--b)c=d.lambda(a[b]).call(this,c);return c}:function(a){return a}};return b.mixin(d,{rawLambda:function(a){return g(a)},buildLambda:function(a){var b=g(a);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(a){if("function"==typeof a)return a;if(a instanceof Array)return h(a);if(e.hasOwnProperty(a))return e[a];var b=g(a);return e[a]=new Function(b.args,"return ("+b.body+");")},clearLambdaCache:function(){e={}}}),d})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(a,b,c,d){var e={};return b.mixin(d,{filter:function(c,f,g){"string"==typeof c&&(c=c.split("")),g=g||a.global,f=d.lambda(f);var h,i,j,k=[];if(b.isArray(c))for(i=0,j=c.length;i<j;++i)h=c[i],f.call(g,h,i,c)&&k.push(h);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(i=0;c.hasNext();)h=c.next(),f.call(g,h,i++,c)&&k.push(h);else for(i in c)i in e||(h=c[i],f.call(g,h,i,c)&&k.push(h));return k},forEach:function(c,f,g){"string"==typeof c&&(c=c.split("")),g=g||a.global,f=d.lambda(f);var h,i;if(b.isArray(c))for(h=0,i=c.length;h<i;f.call(g,c[h],h,c),++h);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(h=0;c.hasNext();f.call(g,c.next(),h++,c));else for(h in c)h in e||f.call(g,c[h],h,c);return g},map:function(c,f,g){"string"==typeof c&&(c=c.split("")),g=g||a.global,f=d.lambda(f);var h,i,j;if(b.isArray(c))for(h=new Array(i=c.length),j=0;j<i;h[j]=f.call(g,c[j],j,c),++j);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(h=[],j=0;c.hasNext();h.push(f.call(g,c.next(),j++,c)));else{h=[];for(j in c)j in e||h.push(f.call(g,c[j],j,c))}return h},every:function(c,f,g){"string"==typeof c&&(c=c.split("")),g=g||a.global,f=d.lambda(f);var h,i;if(b.isArray(c)){for(h=0,i=c.length;h<i;++h)if(!f.call(g,c[h],h,c))return!1}else if("function"==typeof c.hasNext&&"function"==typeof c.next){for(h=0;c.hasNext();)if(!f.call(g,c.next(),h++,c))return!1}else for(h in c)if(!(h in e||f.call(g,c[h],h,c)))return!1;return!0},some:function(c,f,g){"string"==typeof c&&(c=c.split("")),g=g||a.global,f=d.lambda(f);var h,i;if(b.isArray(c)){for(h=0,i=c.length;h<i;++h)if(f.call(g,c[h],h,c))return!0}else if("function"==typeof c.hasNext&&"function"==typeof c.next){for(h=0;c.hasNext();)if(f.call(g,c.next(),h++,c))return!0}else for(h in c)if(!(h in e)&&f.call(g,c[h],h,c))return!0;return!1}}),d})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(a,b,c){var d={};return b.mixin(c,{keys:function(a){var b=[];for(var c in a)c in d||b.push(c);return b},values:function(a){var b=[];for(var c in a)c in d||b.push(a[c]);return b},filterIn:function(b,e,f){f=f||a.global,e=c.lambda(e);var g,h,i={};for(h in b)h in d||(g=b[h],e.call(f,g,h,b)&&(i[h]=g));return i},forIn:function(b,e,f){f=f||a.global,e=c.lambda(e);for(var g in b)g in d||e.call(f,b[g],g,b);return f},mapIn:function(b,e,f){f=f||a.global,e=c.lambda(e);var g,h={};for(g in b)g in d||(h[g]=e.call(f,b[g],g,b));return h}}),c})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(a,b,c,d){var e={};a.mixin(d,{foldl:function(b,f,g,h){"string"==typeof b&&(b=b.split("")),h=h||c.global,f=d.lambda(f);var i,j;if(a.isArray(b))for(i=0,j=b.length;i<j;g=f.call(h,g,b[i],i,b),++i);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(i=0;b.hasNext();g=f.call(h,g,b.next(),i++,b));else for(i in b)i in e||(g=f.call(h,g,b[i],i,b));return g},foldl1:function(b,f,g){"string"==typeof b&&(b=b.split("")),g=g||c.global,f=d.lambda(f);var h,i,j;if(a.isArray(b))for(h=b[0],i=1,j=b.length;i<j;h=f.call(g,h,b[i],i,b),++i);else if("function"==typeof b.hasNext&&"function"==typeof b.next){if(b.hasNext())for(h=b.next(),i=1;b.hasNext();h=f.call(g,h,b.next(),i++,b));}else{var k=!0;for(i in b)i in e||(k?(h=b[i],k=!1):h=f.call(g,h,b[i],i,b))}return h},foldr:function(a,b,e,f){"string"==typeof a&&(a=a.split("")),f=f||c.global,b=d.lambda(b);for(var g=a.length;g>0;--g,e=b.call(f,e,a[g],g,a));return e},foldr1:function(a,b,e){"string"==typeof a&&(a=a.split("")),e=e||c.global,b=d.lambda(b);for(var f=a.length,g=a[f-1],h=f-1;h>0;--h,g=b.call(e,g,a[h],h,a));return g},reduce:function(a,b,c){return arguments.length<3?d.foldl1(a,b):d.foldl(a,b,c)},reduceRight:function(a,b,c){return arguments.length<3?d.foldr1(a,b):d.foldr(a,b,c)},unfold:function(a,b,e,f,g){g=g||c.global,b=d.lambda(b),e=d.lambda(e),a=d.lambda(a);for(var h=[];!a.call(g,f);h.push(b.call(g,f)),f=e.call(g,f));return h}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(a,b,c){return a.mixin(c,{filterRev:function(a,d,e){"string"==typeof a&&(a=a.split("")),e=e||b.global,d=c.lambda(d);for(var f,g=[],h=a.length-1;h>=0;--h)f=a[h],d.call(e,f,h,a)&&g.push(f);return g},forEachRev:function(a,d,e){"string"==typeof a&&(a=a.split("")),e=e||b.global,d=c.lambda(d);for(var f=a.length-1;f>=0;d.call(e,a[f],f,a),--f);},mapRev:function(a,d,e){"string"==typeof a&&(a=a.split("")),e=e||b.global,d=c.lambda(d);for(var f=a.length,g=new Array(f),h=f-1,i=0;h>=0;g[i++]=d.call(e,a[h],h,a),--h);return g},everyRev:function(a,d,e){"string"==typeof a&&(a=a.split("")),e=e||b.global,d=c.lambda(d);for(var f=a.length-1;f>=0;--f)if(!d.call(e,a[f],f,a))return!1;return!0},someRev:function(a,d,e){"string"==typeof a&&(a=a.split("")),e=e||b.global,d=c.lambda(d);for(var f=a.length-1;f>=0;--f)if(d.call(e,a[f],f,a))return!0;return!1}}),c})},"dojox/charting/Chart2D":function(){define(["dojo/_base/kernel","dojo/_base/lang","..","./Chart","./axis2d/Default","./axis2d/Invisible","./plot2d/Default","./plot2d/Lines","./plot2d/Areas","./plot2d/Markers","./plot2d/MarkersOnly","./plot2d/Scatter","./plot2d/Stacked","./plot2d/StackedLines","./plot2d/StackedAreas","./plot2d/Columns","./plot2d/StackedColumns","./plot2d/ClusteredColumns","./plot2d/Bars","./plot2d/StackedBars","./plot2d/ClusteredBars","./plot2d/Grid","./plot2d/Pie","./plot2d/Bubble","./plot2d/Candlesticks","./plot2d/OHLC","./plot2d/Spider"],function(a,b,c,d){return a.deprecated("dojox.charting.Chart2D","Use dojox.charting.Chart instead and require all other components explicitly","2.0"),b.setObject("dojox.charting.Chart2D",d)})},"dojox/charting/axis2d/Default":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/sniff","dojo/_base/declare","dojo/_base/connect","dojo/dom-geometry","./Invisible","../scaler/linear","./common","dojox/gfx","dojox/lang/utils","dojox/lang/functional","dojo/has!dojo-bidi?../bidi/axis2d/Default"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=45,o=d(c("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",g,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(b,c){this.opt=a.clone(this.defaultParams),k.updateWithObject(this.opt,c),k.updateWithPattern(this.opt,c,this.optionalParams),this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]),this._invalidMaxLabelSize=!0,c&&"position"in c||(this.opt.position=this.opt.leftBottom?"leftOrBottom":"rightOrTop"),this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(a,b){return a!=this.scale&&(this._invalidMaxLabelSize=!0),this.inherited(arguments)},_groupLabelWidth:function(b,c,d){if(!b.length)return 0;b.length>50&&(b.length=50),a.isObject(b[0])&&(b=l.map(b,function(a){return a.text})),d&&(b=l.map(b,function(b){return 0==a.trim(b).length?"":b.substring(0,d)+this.trailingSymbol},this));var e=b.join("<br>");return j._base._getTextBox(e,{font:c}).w||0},_getMaxLabelSize:function(c,d,e,f,g,i){if(null==this._maxLabelSize&&6==arguments.length){var j=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var k=a.clone(j);delete k.to,delete k.from;var l=h.buildScaler(c,d,e,k,j.to-j.from);l.minMinorStep=0,this._majorStart=l.major.start;var m=h.buildTicks(l,j);if(i&&m){var n=0,o=0,p=function(a){a.label&&this.push(a.label)},q=[];this.opt.majorLabels&&(b.forEach(m.major,p,q),n=this._groupLabelWidth(q,g,k.maxLabelCharCount),k.maxLabelSize&&(n=Math.min(k.maxLabelSize,n))),q=[],this.opt.dropLabels&&this.opt.minorLabels&&(b.forEach(m.minor,p,q),o=this._groupLabelWidth(q,g,k.maxLabelCharCount),k.maxLabelSize&&(o=Math.min(k.maxLabelSize,o))),this._maxLabelSize={majLabelW:n,minLabelW:o,majLabelH:i,minLabelH:i}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,b,c){if(this.inherited(arguments),this.scaler.minMinorStep=this._prevMinMinorStep,(this._invalidMaxLabelSize||c!=this._oldSpan)&&a!=1/0&&b!=-1/0){this._invalidMaxLabelSize=!1,this.opt.labelSizeChange&&(this._maxLabelSize=null),this._oldSpan=c;var d=this.opt,e=this.chart.theme.axis,f=d.rotation%360,g=this.chart.theme.axis.tick.labelGap,i=d.font||e.majorTick&&e.majorTick.font||e.tick&&e.tick.font,k=i?j.normalizedLength(j.splitFontString(i).size):0,l=this._getMaxLabelSize(a,b,c,f,i,k);if("number"!=typeof g&&(g=4),l&&d.dropLabels){var m,n,o=Math.abs(Math.cos(f*Math.PI/180)),p=Math.abs(Math.sin(f*Math.PI/180));switch(f<0&&(f+=360),f){case 0:case 180:this.vertical?m=n=k:(m=l.majLabelW,n=l.minLabelW);break;case 90:case 270:this.vertical?(m=l.majLabelW,n=l.minLabelW):m=n=k;break;default:m=this.vertical?Math.min(l.majLabelW,k/o):Math.min(l.majLabelW,k/p);var q=Math.sqrt(l.minLabelW*l.minLabelW+k*k),r=this.vertical?k*o+l.minLabelW*p:l.minLabelW*o+k*p;n=Math.min(q,r)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(m,n)+g;var s=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale;this._skipInterval=s?0:Math.floor((m+g)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}return this.ticks=h.buildTicks(this.scaler,this.opt),this},getOffsets:function(){var a=this.scaler,b={l:0,r:0,t:0,b:0};if(!a)return b;var c=this.opt,d=this.chart.theme.axis,e=this.chart.theme.axis.tick.labelGap,f=c.titleFont||d.title&&d.title.font,g=0==c.titleGap?0:c.titleGap||d.title&&d.title.gap,h=this.chart.theme.getTick("major",c),i=this.chart.theme.getTick("minor",c),k=f?j.normalizedLength(j.splitFontString(f).size):0,l=c.rotation%360,m=c.position,o="rightOrTop"!==m,p=Math.abs(Math.cos(l*Math.PI/180)),q=Math.abs(Math.sin(l*Math.PI/180));this.trailingSymbol=void 0===c.trailingSymbol||null===c.trailingSymbol?this.trailingSymbol:c.trailingSymbol,"number"!=typeof e&&(e=4),l<0&&(l+=360);var r=this._getMaxLabelSize();if(r){var s,t=Math.ceil(Math.max(r.majLabelW,r.minLabelW))+1,u=Math.ceil(Math.max(r.majLabelH,r.minLabelH))+1;if(this.vertical){switch(s=o?"l":"r",l){case 0:case 180:b[s]="center"===m?0:t,b.t=b.b=u/2;break;case 90:case 270:b[s]=u,b.t=b.b=t/2;break;default:l<=n||180<l&&l<=180+n?(b[s]=u*q/2+t*p,b[o?"t":"b"]=u*p/2+t*q,b[o?"b":"t"]=u*p/2):l>360-n||180>l&&l>180-n?(b[s]=u*q/2+t*p,b[o?"b":"t"]=u*p/2+t*q,b[o?"t":"b"]=u*p/2):l<90||180<l&&l<270?(b[s]=u*q+t*p,b[o?"t":"b"]=u*p+t*q):(b[s]=u*q+t*p,b[o?"b":"t"]=u*p+t*q)}"center"===m?b[s]=0:b[s]+=e+Math.max(h.length>0?h.length:0,i.length>0?i.length:0)+(c.title?k+g:0)}else{switch(s=o?"b":"t",l){case 0:case 180:b[s]="center"===m?0:u,b.l=b.r=t/2;break;case 90:case 270:b[s]=t,b.l=b.r=u/2;break;default:90-n<=l&&l<=90||270-n<=l&&l<=270?(b[s]=u*p/2+t*q,b[o?"r":"l"]=u*q/2+t*p,b[o?"l":"r"]=u*q/2):90<=l&&l<=90+n||270<=l&&l<=270+n?(b[s]=u*p/2+t*q,b[o?"l":"r"]=u*q/2+t*p,b[o?"r":"l"]=u*q/2):l<n||180<l&&l<180+n?(b[s]=u*p+t*q,b[o?"r":"l"]=u*q+t*p):(b[s]=u*p+t*q,b[o?"l":"r"]=u*q+t*p)}"center"===m?b[s]=0:b[s]+=e+Math.max(h.length>0?h.length:0,i.length>0?i.length:0)+(c.title?k+g:0)}}return b},cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]),this.inherited(arguments)},createText:function(a,b,c,d,e,f,g,h,j){if(!this.opt.enableCache||"html"==a)return i.createText[a](this.chart,b,c,d,e,f,g,h,j);var k;return this._textFreePool.length>0?(k=this._textFreePool.pop(),k.setShape({x:c,y:d,text:f,align:e}),b.add(k)):k=i.createText[a](this.chart,b,c,d,e,f,g,h),this._textUsePool.push(k),k},createLine:function(a,b){var c;return this.opt.enableCache&&this._lineFreePool.length>0?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b),this.opt.enableCache&&this._lineUsePool.push(c),c},render:function(a,d){var e=this._isRtl();if(!this.dirty||!this.scaler)return this;var f,g,k,l,m,o,p,q,r,s=this.opt,t=this.chart.theme.axis,u=s.position,v="rightOrTop"!==u,w=s.rotation%360,x=0,y=this.chart.theme.axis.tick.labelGap,z=s.font||t.majorTick&&t.majorTick.font||t.tick&&t.tick.font,A=s.titleFont||t.title&&t.title.font,B=s.fontColor||t.majorTick&&t.majorTick.fontColor||t.tick&&t.tick.fontColor||"black",C=s.titleFontColor||t.title&&t.title.fontColor||"black",D=0==s.titleGap?0:s.titleGap||t.title&&t.title.gap||15,E=s.titleOrientation||t.title&&t.title.orientation||"axis",F=this.chart.theme.getTick("major",s),G=this.chart.theme.getTick("minor",s),H=this.chart.theme.getTick("micro",s),I="stroke"in s?s.stroke:t.stroke,J=z?j.normalizedLength(j.splitFontString(z).size):0,K=Math.abs(Math.cos(w*Math.PI/180)),L=Math.abs(Math.sin(w*Math.PI/180)),M=A?j.normalizedLength(j.splitFontString(A).size):0;"number"!=typeof y&&(y=4),w<0&&(w+=360);var N=this._getMaxLabelSize();if(N=N&&N.majLabelW,this.vertical){switch(f={y:a.height-d.b},g={y:d.t},k={y:(a.height-d.b+d.t)/2},l=J*L+(N||0)*K+y+Math.max(F.length>0?F.length:0,G.length>0?G.length:0)+M+D,m={x:0,y:-1},q={x:0,y:0},o={x:1,y:0},p={x:y,y:0},w){case 0:r="end",q.y=.4*J;break;case 90:r="middle",q.x=-J;break;case 180:r="start",q.y=.4*-J;break;case 270:r="middle";break;default:w<n?(r="end",q.y=.4*J):w<90?(r="end",q.y=.4*J):w<180-n?r="start":w<180+n?(r="start",q.y=.4*-J):w<270?(r="start",q.x=v?0:.4*J):w<360-n?(r="end",q.x=v?0:.4*J):(r="end",q.y=.4*J)}if(v)f.x=g.x="center"===u?a.width/2:d.l,x=E&&"away"==E?90:270,k.x=d.l-l+(270==x?M:0),o.x=-1,p.x=-p.x;else switch(f.x=g.x=a.width-d.r,x=E&&"axis"==E?90:270,k.x=a.width-d.r+l-(270==x?0:M),r){case"start":r="end";break;case"end":r="start";break;case"middle":q.x+=J}}else{switch(f={x:d.l},g={x:a.width-d.r},k={x:(a.width-d.r+d.l)/2},l=J*K+(N||0)*L+y+Math.max(F.length>0?F.length:0,G.length>0?G.length:0)+M+D,m={x:e?-1:1,y:0},q={x:0,y:0},o={x:0,y:1},p={x:0,y:y},w){case 0:r="middle",q.y=J;break;case 90:r="start",q.x=.4*-J;break;case 180:r="middle";break;case 270:r="end",q.x=.4*J;break;default:w<90-n?(r="start",q.y=v?J:0):w<90+n?(r="start",q.x=.4*-J):w<180?(r="start",q.y=v?0:-J):w<270-n?(r="end",q.y=v?0:-J):w<270+n?(r="end",q.y=v?.4*J:0):(r="end",q.y=v?J:0)}if(v)f.y=g.y="center"===u?a.height/2:a.height-d.b,x=E&&"axis"==E?180:0,k.y=a.height-d.b+l-(x?M:0);else switch(f.y=g.y=d.t,x=E&&"away"==E?180:0,k.y=d.t-l+(x?0:M),o.y=-1,p.y=-p.y,r){case"start":r="end"
;break;case"end":r="start";break;case"middle":q.y-=J}}this.cleanGroup();var O=this.group,P=this.scaler,Q=this.ticks,R=h.getTransformerFromModel(this.scaler),S=s.title&&x||w||!this.opt.htmlLabels||c("ie")||c("opera")?"gfx":"html",T=o.x*F.length,U=o.y*F.length,V=this._skipInterval;if(O.createLine({x1:f.x,y1:f.y,x2:g.x,y2:g.y}).setStroke(I),s.title){var W=i.createText[S](this.chart,O,k.x,k.y,"middle",s.title,A,C);"html"==S?this.htmlElements.push(W):W.setTransform(j.matrix.rotategAt(x,k.x,k.y))}if(null==Q)return this.dirty=!1,this;var X=Q.major.length>0?(Q.major[0].value-this._majorStart)/P.major.tick:0,Y=this.opt.majorLabels;return b.forEach(Q.major,function(a,b){var c,d=R(a.value),h=(e?g.x:f.x)+m.x*d,i=f.y+m.y*d;if(b+=X,this.createLine(O,{x1:h,y1:i,x2:h+T,y2:i+U}).setStroke(F),a.label&&(!V||(b-(1+V))%(1+V)==0)){var k=s.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,z,s.maxLabelCharCount):{text:a.label,truncated:!1};k=s.maxLabelSize?this.getTextWithLimitLength(k.text,z,s.maxLabelSize,k.truncated):k,c=this.createText(S,O,h+(F.length>0?T:0)+p.x+(w?0:q.x),i+(F.length>0?U:0)+p.y+(w?0:q.y),r,k.text,z,B),k.truncated&&this.chart.formatTruncatedLabel(c,a.label,S),k.truncated&&this.labelTooltip(c,this.chart,a.label,k.text,z,S),"html"==S?this.htmlElements.push(c):w&&c.setTransform([{dx:q.x,dy:q.y},j.matrix.rotategAt(w,h+(F.length>0?T:0)+p.x,i+(F.length>0?U:0)+p.y)])}},this),T=o.x*G.length,U=o.y*G.length,Y=this.opt.minorLabels&&P.minMinorStep<=P.minor.tick*P.bounds.scale,b.forEach(Q.minor,function(a){var b,c=R(a.value),d=(e?g.x:f.x)+m.x*c,h=f.y+m.y*c;if(this.createLine(O,{x1:d,y1:h,x2:d+T,y2:h+U}).setStroke(G),Y&&a.label){var i=s.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,z,s.maxLabelCharCount):{text:a.label,truncated:!1};i=s.maxLabelSize?this.getTextWithLimitLength(i.text,z,s.maxLabelSize,i.truncated):i,b=this.createText(S,O,d+(G.length>0?T:0)+p.x+(w?0:q.x),h+(G.length>0?U:0)+p.y+(w?0:q.y),r,i.text,z,B),i.truncated&&this.chart.formatTruncatedLabel(b,a.label,S),i.truncated&&this.labelTooltip(b,this.chart,a.label,i.text,z,S),"html"==S?this.htmlElements.push(b):w&&b.setTransform([{dx:q.x,dy:q.y},j.matrix.rotategAt(w,d+(G.length>0?T:0)+p.x,h+(G.length>0?U:0)+p.y)])}},this),T=o.x*H.length,U=o.y*H.length,b.forEach(Q.micro,function(a){var b=R(a.value),c=f.x+m.x*b,d=f.y+m.y*b;this.createLine(O,{x1:c,y1:d,x2:c+T,y2:d+U}).setStroke(H)},this),this.dirty=!1,this},labelTooltip:function(b,c,d,g,h,i){var k=["dijit/Tooltip"],l={type:"rect"},m=["above","below"],n=j._base._getTextBox(g,{font:h}).w||0,o=h?j.normalizedLength(j.splitFontString(h).size):0;if("html"==i)a.mixin(l,f.position(b.firstChild,!0)),l.width=Math.ceil(n),l.height=Math.ceil(o),this._events.push({shape:dojo,handle:e.connect(b.firstChild,"onmouseover",this,function(a){require(k,function(a){a.show(d,l,m)})})}),this._events.push({shape:dojo,handle:e.connect(b.firstChild,"onmouseout",this,function(a){require(k,function(a){a.hide(l)})})});else{var p=b.getShape(),q=c.getCoords();l=a.mixin(l,{x:p.x-n/2,y:p.y}),l.x+=q.x,l.y+=q.y,l.x=Math.round(l.x),l.y=Math.round(l.y),l.width=Math.ceil(n),l.height=Math.ceil(o),this._events.push({shape:b,handle:b.connect("onmouseenter",this,function(a){require(k,function(a){a.show(d,l,m)})})}),this._events.push({shape:b,handle:b.connect("onmouseleave",this,function(a){require(k,function(a){a.hide(l)})})})}},_isRtl:function(){return!1}});return c("dojo-bidi")?d("dojox.charting.axis2d.Default",[o,m]):o})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(a,b,c,d,e){return b("dojox.charting.axis2d.Invisible",c,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(b,c){this.opt=a.clone(this.defaultParams),e.updateWithObject(this.opt,c),e.updateWithPattern(this.opt,c,this.optionalParams)},dependOnData:function(){return!("min"in this.opt&&"max"in this.opt)},clear:function(){return delete this.scaler,delete this.ticks,this.dirty=!0,this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(a,b){return this.scale=a,this.offset=b,this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(a,b,c){if(this.initialized())return this;var e=this.opt;this.labels=e.labels,this.scaler=d.buildScaler(a,b,c,e);var f=this.scaler.bounds;return"scale"in this&&(e.from=f.lower+this.offset,e.to=(f.upper-f.lower)/this.scale+e.from,!isFinite(e.from)||isNaN(e.from)||!isFinite(e.to)||isNaN(e.to)||e.to-e.from>=f.upper-f.lower?(delete e.from,delete e.to,delete this.scale,delete this.offset):(e.from<f.lower?(e.to+=f.lower-e.from,e.from=f.lower):e.to>f.upper&&(e.from+=f.upper-e.to,e.to=f.upper),this.offset=e.from-f.lower),this.scaler=d.buildScaler(a,b,c,e),f=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset)),this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(a,b){return a("dojox.charting.axis2d.Base",b,{constructor:function(a,b){this.vertical=b&&b.vertical,this.opt={},this.opt.min=b&&b.min,this.opt.max=b&&b.max},clear:function(){return this},initialized:function(){return!1},calculate:function(a,b,c){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(a,b){return this.dirty=!1,this}})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(a,b){function c(a,b){a=a.toLowerCase();for(var c=b.length-1;c>=0;--c)if(a===b[c])return!0;return!1}var d=a.getObject("dojox.charting.scaler.linear",!0),e=3,f=b.getNumericLabel,g=function(b,e,f,g,h,i,j){f=a.delegate(f),g||("major"==f.fixUpper&&(f.fixUpper="minor"),"major"==f.fixLower&&(f.fixLower="minor")),h||("minor"==f.fixUpper&&(f.fixUpper="micro"),"minor"==f.fixLower&&(f.fixLower="micro")),i||("micro"==f.fixUpper&&(f.fixUpper="none"),"micro"==f.fixLower&&(f.fixLower="none"));var k=c(f.fixLower,["major"])?Math.floor(f.min/g)*g:c(f.fixLower,["minor"])?Math.floor(f.min/h)*h:c(f.fixLower,["micro"])?Math.floor(f.min/i)*i:f.min,l=c(f.fixUpper,["major"])?Math.ceil(f.max/g)*g:c(f.fixUpper,["minor"])?Math.ceil(f.max/h)*h:c(f.fixUpper,["micro"])?Math.ceil(f.max/i)*i:f.max;f.useMin&&(b=k),f.useMax&&(e=l);var m=!g||f.useMin&&c(f.fixLower,["major"])?b:Math.ceil(b/g)*g,n=!h||f.useMin&&c(f.fixLower,["major","minor"])?b:Math.ceil(b/h)*h,o=!i||f.useMin&&c(f.fixLower,["major","minor","micro"])?b:Math.ceil(b/i)*i,p=g?(f.useMax&&c(f.fixUpper,["major"])?Math.round((e-m)/g):Math.floor((e-m)/g))+1:0,q=h?(f.useMax&&c(f.fixUpper,["major","minor"])?Math.round((e-n)/h):Math.floor((e-n)/h))+1:0,r=i?(f.useMax&&c(f.fixUpper,["major","minor","micro"])?Math.round((e-o)/i):Math.floor((e-o)/i))+1:0,s=h?Math.round(g/h):0,t=i?Math.round(h/i):0,u=g?Math.floor(Math.log(g)/Math.LN10):0,v=h?Math.floor(Math.log(h)/Math.LN10):0,w=j/(e-b);return isFinite(w)||(w=1),{bounds:{lower:k,upper:l,from:b,to:e,scale:w,span:j},major:{tick:g,start:m,count:p,prec:u},minor:{tick:h,start:n,count:q,prec:v},micro:{tick:i,start:o,count:r,prec:0},minorPerMajor:s,microPerMinor:t,scaler:d}};return a.mixin(d,{buildScaler:function(a,b,c,d,f,h){var i={fixUpper:"none",fixLower:"none",natural:!1};if(d&&("fixUpper"in d&&(i.fixUpper=String(d.fixUpper)),"fixLower"in d&&(i.fixLower=String(d.fixLower)),"natural"in d&&(i.natural=Boolean(d.natural))),h=!h||h<e?e:h,"min"in d&&(a=d.min),"max"in d&&(b=d.max),d.includeZero&&(a>0&&(a=0),b<0&&(b=0)),i.min=a,i.useMin=!0,i.max=b,i.useMax=!0,"from"in d&&(a=d.from,i.useMin=!1),"to"in d&&(b=d.to,i.useMax=!1),b<=a)return g(a,b,i,0,0,0,c);f||(f=b-a);var j,k=Math.floor(Math.log(f)/Math.LN10),l=d&&"majorTickStep"in d?d.majorTickStep:Math.pow(10,k),m=0,n=0;if(d&&"minorTickStep"in d)m=d.minorTickStep;else do{if(m=l/10,(!i.natural||m>.9)&&(j=g(a,b,i,l,m,0,c),j.bounds.scale*j.minor.tick>h))break;if(m=l/5,(!i.natural||m>.9)&&(j=g(a,b,i,l,m,0,c),j.bounds.scale*j.minor.tick>h))break;if(m=l/2,(!i.natural||m>.9)&&(j=g(a,b,i,l,m,0,c),j.bounds.scale*j.minor.tick>h))break;return g(a,b,i,l,0,0,c)}while(!1);if(d&&"microTickStep"in d)n=d.microTickStep,j=g(a,b,i,l,m,n,c);else do{if(n=m/10,(!i.natural||n>.9)&&(j=g(a,b,i,l,m,n,c),j.bounds.scale*j.micro.tick>e))break;if(n=m/5,(!i.natural||n>.9)&&(j=g(a,b,i,l,m,n,c),j.bounds.scale*j.micro.tick>e))break;if(n=m/2,(!i.natural||n>.9)&&(j=g(a,b,i,l,m,n,c),j.bounds.scale*j.micro.tick>e))break;n=0}while(!1);return n?j:g(a,b,i,l,m,0,c)},buildTicks:function(a,b){var c,d,e,g=a.major.start,h=a.minor.start,i=a.micro.start;if(b.microTicks&&a.micro.tick)c=a.micro.tick,d=i;else if(b.minorTicks&&a.minor.tick)c=a.minor.tick,d=h;else{if(!a.major.tick)return null;c=a.major.tick,d=g}var j=1/a.bounds.scale;if(a.bounds.to<=a.bounds.from||isNaN(j)||!isFinite(j)||c<=0||isNaN(c)||!isFinite(c))return null;for(var k=[],l=[],m=[];d<=a.bounds.to+j;)Math.abs(g-d)<c/2?(e={value:g},b.majorLabels&&(e.label=f(g,a.major.prec,b)),k.push(e),g+=a.major.tick,h+=a.minor.tick,i+=a.micro.tick):Math.abs(h-d)<c/2?(b.minorTicks&&(e={value:h},b.minorLabels&&a.minMinorStep<=a.minor.tick*a.bounds.scale&&(e.label=f(h,a.minor.prec,b)),l.push(e)),h+=a.minor.tick,i+=a.micro.tick):(b.microTicks&&m.push({value:i}),i+=a.micro.tick),d+=c;return{major:k,minor:l,micro:m}},getTransformerFromModel:function(a){var b=a.bounds.from,c=a.bounds.scale;return function(a){return(a-b)*c}},getTransformerFromPlot:function(a){var b=a.bounds.from,c=a.bounds.scale;return function(a){return a/c+b}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(a){var b=function(a,b){return Math.abs(a-b)<=1e-6*(Math.abs(a)+Math.abs(b))},c=a.getObject("dojox.charting.scaler.common",!0),d={};return a.mixin(c,{doIfLoaded:function(a,b,c){if(void 0==d[a])try{d[a]=require(a)}catch(b){d[a]=null}return d[a]?b(d[a]):c()},getNumericLabel:function(a,d,e){var f="";if(c.doIfLoaded("dojo/number",function(b){f=(e.fixed?b.format(a,{places:d<0?-d:0}):b.format(a))||""},function(){f=e.fixed?a.toFixed(d<0?-d:0):a.toString()}),e.labelFunc){var g=e.labelFunc(f,a,d);if(g)return g}if(e.labels){for(var h=e.labels,i=0,j=h.length;i<j;){var k=Math.floor((i+j)/2);h[k].value<a?i=k+1:j=k}if(i<h.length&&b(h[i].value,a))return h[i].text;if(--i>=0&&i<h.length&&b(h[i].value,a))return h[i].text;if((i+=2)<h.length&&b(h[i].value,a))return h[i].text}return f}})})},"dojox/charting/plot2d/Default":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.lambda("item.purgeGroup()");return b("dojox.charting.plot2d.Default",[e,f],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(b,c){this.opt=a.clone(a.mixin(this.opt,this.defaultParams)),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate},createPath:function(a,b,c){var d;return this.opt.enableCache&&a._pathFreePool.length>0?(d=a._pathFreePool.pop(),d.setShape(c),b.add(d)):d=b.createPath(c),this.opt.enableCache&&a._pathUsePool.push(d),d},buildSegments:function(a,b){for(var c=this.series[a],d=b?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,e=b?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,f=null,g=[],h=d;h<e;h++)null==c.data[h]||!b&&null==c.data[h].y?this.opt.interpolate&&!b||(f=null):(f||(f=[],g.push({index:h,rseg:f})),f.push(b&&c.data[h].hasOwnProperty("y")?c.data[h].y:c.data[h]));return g},render:function(b,e){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,e);this.resetEvents(),this.dirty=this.isDirty();var f;this.dirty&&(c.forEach(this.series,l),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),f=this.getGroup(),h.forEachRev(this.series,function(a){a.cleanGroup(f)}));for(var i,j,m=this.chart.theme,n=this.events(),o=this.series.length-1;o>=0;--o){var p=this.series[o];if(this.dirty||p.dirty)if(p.cleanGroup(),this.opt.enableCache&&(p._pathFreePool=(p._pathFreePool?p._pathFreePool:[]).concat(p._pathUsePool?p._pathUsePool:[]),p._pathUsePool=[]),p.data.length){var q,r=m.next(this.opt.areas?"area":"line",[this.opt,p],!0),s=this._hScaler.scaler.getTransformerFromModel(this._hScaler),t=this._vScaler.scaler.getTransformerFromModel(this._vScaler),u=this._eventSeries[p.name]=new Array(p.data.length);if(f=p.group,p.hidden)this.opt.lines&&(p.dyn.stroke=r.series.stroke),this.opt.markers&&(p.dyn.markerFill=r.marker.fill,p.dyn.markerStroke=r.marker.stroke,p.dyn.marker=r.symbol),this.opt.areas&&(p.dyn.fill=r.series.fill);else{for(var v=c.some(p.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),w=this.buildSegments(o,v),x=0;x<w.length;x++){var y=w[x];if(q=v?c.map(y.rseg,function(a,c){return{x:s(c+y.index+1)+e.l,y:b.height-e.b-t(a),data:a}},this):c.map(y.rseg,function(a){return{x:s(a.x)+e.l,y:b.height-e.b-t(a.y),data:a}},this),v&&this.opt.interpolate)for(;x<w.length;)x++,(y=w[x])&&(q=q.concat(c.map(y.rseg,function(a,c){return{x:s(c+y.index+1)+e.l,y:b.height-e.b-t(a),data:a}},this)));var z=this.opt.tension?g.curve(q,this.opt.tension):"";if(this.opt.areas&&q.length>1){var A=this._plotFill(r.series.fill,b,e),B=a.clone(q);if(this.opt.tension){var C="L"+B[B.length-1].x+","+(b.height-e.b)+" L"+B[0].x+","+(b.height-e.b)+" L"+B[0].x+","+B[0].y;p.dyn.fill=f.createPath(z+" "+C).setFill(A).getFill()}else B.push({x:q[q.length-1].x,y:b.height-e.b}),B.push({x:q[0].x,y:b.height-e.b}),B.push(q[0]),p.dyn.fill=f.createPolyline(B).setFill(A).getFill()}(this.opt.lines||this.opt.markers)&&(i=r.series.stroke,r.series.outline&&(j=p.dyn.outline=g.makeStroke(r.series.outline),j.width=2*j.width+i.width)),this.opt.markers&&(p.dyn.marker=r.symbol);var D=null,E=null,F=null;if(i&&r.series.shadow&&q.length>1){var G=r.series.shadow,H=c.map(q,function(a){return{x:a.x+G.dx,y:a.y+G.dy}});this.opt.lines&&(this.opt.tension?p.dyn.shadow=f.createPath(g.curve(H,this.opt.tension)).setStroke(G).getStroke():p.dyn.shadow=f.createPolyline(H).setStroke(G).getStroke()),this.opt.markers&&r.marker.shadow&&(G=r.marker.shadow,F=c.map(H,function(a){return this.createPath(p,f,"M"+a.x+" "+a.y+" "+r.symbol).setStroke(G).setFill(G.color)},this))}if(this.opt.lines&&q.length>1){var I;j&&(this.opt.tension?p.dyn.outline=f.createPath(z).setStroke(j).getStroke():p.dyn.outline=f.createPolyline(q).setStroke(j).getStroke()),this.opt.tension?p.dyn.stroke=(I=f.createPath(z)).setStroke(i).getStroke():p.dyn.stroke=(I=f.createPolyline(q)).setStroke(i).getStroke(),I.setFilter&&r.series.filter&&I.setFilter(r.series.filter)}var J=null;if(this.opt.markers){var K=r;D=new Array(q.length),E=new Array(q.length),j=null,K.marker.outline&&(j=g.makeStroke(K.marker.outline),j.width=2*j.width+(K.marker.stroke?K.marker.stroke.width:0)),c.forEach(q,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data)),K=m.addMixin(r,"marker",c,!0)}else K=m.post(r,"marker");var d="M"+a.x+" "+a.y+" "+K.symbol;j&&(E[b]=this.createPath(p,f,d).setStroke(j)),D[b]=this.createPath(p,f,d).setStroke(K.marker.stroke).setFill(K.marker.fill)},this),p.dyn.markerFill=K.marker.fill,p.dyn.markerStroke=K.marker.stroke,!J&&this.opt.labels&&(J=D[0].getBoundingBox()),n?c.forEach(D,function(a,b){var c={element:"marker",index:b+y.index,run:p,shape:a,outline:E[b]||null,shadow:F&&F[b]||null,cx:q[b].x,cy:q[b].y};v?(c.x=b+y.index+1,c.y=p.data[b+y.index]):(c.x=y.rseg[b].x,c.y=p.data[b+y.index].y),this._connectEvents(c),u[b+y.index]=c},this):delete this._eventSeries[p.name]}if(this.opt.labels){var L=J?J.width:2,M=J?J.height:2;c.forEach(q,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data)),K=m.addMixin(r,"marker",c,!0)}else K=m.post(r,"marker");this.createLabel(f,y.rseg[b],{x:a.x-L/2,y:a.y-M/2,width:L,height:M},K)},this)}}p.dirty=!1}}else p.dirty=!1,m.skip();else m.skip(),this._reconnectEvents(p.name)}if(d("dojo-bidi")&&this._checkOrientation(this.group,b,e),this.animate){var N=this.getGroup();k.animateTransform(a.delegate({shape:N,duration:1200,transform:[{name:"translate",start:[0,b.height-e.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play()}return this.dirty=!1,this}})})},"dojox/charting/plot2d/CartesianBase":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/has","./Base","../scaler/primitive","dojox/gfx","dojox/gfx/fx","dojox/lang/utils"],function(a,b,c,d,e,f,g,h,i){return b("dojox.charting.plot2d.CartesianBase",e,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(b,c){this.axes=["hAxis","vAxis"],this.zoom=null,this.zoomQueue=[],this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0},this.hAxis=c&&c.hAxis||"x",this.vAxis=c&&c.vAxis||"y",this.series=[],this.opt=a.clone(this.baseParams),i.updateWithObject(this.opt,c)},clear:function(){return this.inherited(arguments),this._hAxis=null,this._vAxis=null,this},cleanGroup:function(a,b){if(this.inherited(arguments),!b&&this.chart._nativeClip){var c=this.chart.offsets,d=this.chart.dim,e=Math.max(0,d.width-c.l-c.r),f=Math.max(0,d.height-c.t-c.b);this.group.setClip({x:c.l,y:c.t,width:e,height:f}),this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments),this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(a){return a&&(this[a.vertical?"_vAxis":"_hAxis"]=a),this},toPage:function(a){var b=this._hAxis,c=this._vAxis,d=b.getScaler(),e=c.getScaler(),f=d.scaler.getTransformerFromModel(d),g=e.scaler.getTransformerFromModel(e),h=this.chart.getCoords(),i=this.chart.offsets,j=this.chart.dim,k=function(a){var d={};return d.x=f(a[b.name])+h.x+i.l,d.y=h.y+j.height-i.b-g(a[c.name]),d};return a?k(a):k},toData:function(a){var b=this._hAxis,c=this._vAxis,d=b.getScaler(),e=c.getScaler(),f=d.scaler.getTransformerFromPlot(d),g=e.scaler.getTransformerFromPlot(e),h=this.chart.getCoords(),i=this.chart.offsets,j=this.chart.dim,k=function(a){var d={};return d[b.name]=f(a.x-h.x-i.l),d[c.name]=g(h.y+j.height-a.y-i.b),d};return a?k(a):k},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(a,b,c,d){if(this.opt.labels){var e,f,h=this.opt.labelFunc?this.opt.labelFunc.apply(this,[b,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(b.y)?b:b.y);if("inside"==this.opt.labelStyle){var i=g._base._getTextBox(h,{font:d.series.font});if(e=c.x+c.width/2,f=c.y+c.height/2+i.h/4,i.w>c.width||i.h>c.height)return}else e=c.x+c.width/2,f=c.y-this.opt.labelOffset;this.renderLabel(a,e,f,h,d,"inside"==this.opt.labelStyle)}},performZoom:function(b,d){var e=this._vAxis.scale||1,f=this._hAxis.scale||1,g=b.height-d.b,i=this._hScaler.bounds,j=(i.from-i.lower)*i.scale,k=this._vScaler.bounds,l=(k.from-k.lower)*k.scale,m=e/this.lastWindow.vscale,n=f/this.lastWindow.hscale,o=(this.lastWindow.xoffset-j)/(1==this.lastWindow.hscale?f:this.lastWindow.hscale),p=(l-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?e:this.lastWindow.vscale),q=this.getGroup(),r=h.animateTransform(a.delegate({shape:q,duration:1200,transform:[{name:"translate",start:[0,0],end:[d.l*(1-n),g*(1-m)]},{name:"scale",start:[1,1],end:[n,m]},{name:"original"},{name:"translate",start:[0,0],end:[o,p]}]},this.zoom));return a.mixin(this.lastWindow,{vscale:e,hscale:f,xoffset:j,yoffset:l}),this.zoomQueue.push(r),c.connect(r,"onEnd",this,function(){this.zoom=null,this.zoomQueue.shift(),this.zoomQueue.length>0&&this.zoomQueue[0].play()}),1==this.zoomQueue.length&&this.zoomQueue[0].play(),this},initializeScalers:function(a,b){return this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(b.hmin,b.hmax,a.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=f.buildScaler(b.hmin,b.hmax,a.width),this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(b.vmin,b.vmax,a.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=f.buildScaler(b.vmin,b.vmax,a.height),this}})})},"dojox/charting/plot2d/Base":function(){define(["dojo/_base/declare","dojo/_base/array","dojox/gfx","../Element","./common","../axis2d/common","dojo/has"],function(a,b,c,d,e,f,g){var h=a("dojox.charting.plot2d.Base",d,{constructor:function(a,b){b&&b.tooltipFunc&&(this.tooltipFunc=b.tooltipFunc)},clear:function(){return this.series=[],this.dirty=!0,this},setAxis:function(a){return this},assignAxes:function(a){b.forEach(this.axes,function(b){this[b]&&this.setAxis(a[this[b]])},this)},addSeries:function(a){return this.series.push(a),this},getSeriesStats:function(){return e.collectSimpleStats(this.series)},calculateAxes:function(a){return this.initializeScalers(a,this.getSeriesStats()),this},initializeScalers:function(){return this},isDataDirty:function(){return b.some(this.series,function(a){return a.dirty})},render:function(a,b){return this},renderLabel:function(a,b,d,e,g,h,i){var j=f.createText[this.opt.htmlLabels&&"vml"!=c.renderer?"html":"gfx"](this.chart,a,b,d,i||"middle",e,g.series.font,g.series.fontColor);return h&&(this.opt.htmlLabels&&"vml"!=c.renderer?j.style.pointerEvents="none":j.rawNode&&(j.rawNode.style.pointerEvents="none")),this.opt.htmlLabels&&"vml"!=c.renderer&&this.htmlElements.push(j),j},getRequiredColors:function(){return this.series.length},_getLabel:function(a){return e.getLabel(a,this.opt.fixed,this.opt.precision)}});return g("dojo-bidi")&&h.extend({_checkOrientation:function(a,b,c){this.chart.applyMirroring(this.group,b,c)}}),h})},"dojox/charting/plot2d/common":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(a,b,c,d,e,f){var g=a.getObject("dojox.charting.plot2d.common",!0);return a.mixin(g,{doIfLoaded:f.doIfLoaded,makeStroke:function(a){return a?(("string"==typeof a||a instanceof c)&&(a={color:a}),d.makeParameters(d.defaultStroke,a)):a},augmentColor:function(a,b){var d=new c(a),e=new c(b);return e.a=d.a,e},augmentStroke:function(a,b){var c=g.makeStroke(a);return c&&(c.color=g.augmentColor(c.color,b)),c},augmentFill:function(a,b){new c(b);return"string"==typeof a||a instanceof c?g.augmentColor(a,b):a},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(c){for(var d=a.delegate(g.defaultStats),e=0;e<c.length;++e)for(var f=c[e],h=0;h<f.data.length;h++)if(null!==f.data[h]){if("number"==typeof f.data[h]){var i=d.vmin,j=d.vmax;b.forEach(f.data,function(a,b){if(null!==a){var c=b+1,e=a;isNaN(e)&&(e=0),d.hmin=Math.min(d.hmin,c),d.hmax=Math.max(d.hmax,c),d.vmin=Math.min(d.vmin,e),d.vmax=Math.max(d.vmax,e)}}),"ymin"in f&&(d.vmin=Math.min(i,f.ymin)),"ymax"in f&&(d.vmax=Math.max(j,f.ymax))}else{var k=d.hmin,l=d.hmax,i=d.vmin,j=d.vmax;"xmin"in f&&"xmax"in f&&"ymin"in f&&"ymax"in f||b.forEach(f.data,function(a,b){if(null!==a){var c="x"in a?a.x:b+1,e=a.y;isNaN(c)&&(c=0),isNaN(e)&&(e=0),d.hmin=Math.min(d.hmin,c),d.hmax=Math.max(d.hmax,c),d.vmin=Math.min(d.vmin,e),d.vmax=Math.max(d.vmax,e)}}),"xmin"in f&&(d.hmin=Math.min(k,f.xmin)),"xmax"in f&&(d.hmax=Math.max(l,f.xmax)),"ymin"in f&&(d.vmin=Math.min(i,f.ymin)),"ymax"in f&&(d.vmax=Math.max(j,f.ymax))}break}return d},calculateBarSize:function(a,b,c){c||(c=1);var d=b.gap,e=(a-2*d)/c;return"minBarSize"in b&&(e=Math.max(e,b.minBarSize)),"maxBarSize"in b&&(e=Math.min(e,b.maxBarSize)),e=Math.max(e,1),d=(a-e*c)/2,{size:e,gap:d}},collectStackedStats:function(b){var c=a.clone(g.defaultStats);if(b.length){c.hmin=Math.min(c.hmin,1),c.hmax=e.foldl(b,"seed, run -> Math.max(seed, run.data.length)",c.hmax);for(var d=0;d<c.hmax;++d){var f=b[0].data[d];f=f&&("number"==typeof f?f:f.y),isNaN(f)&&(f=0),c.vmin=Math.min(c.vmin,f);for(var h=1;h<b.length;++h){var i=b[h].data[d];i=i&&("number"==typeof i?i:i.y),isNaN(i)&&(i=0),f+=i}c.vmax=Math.max(c.vmax,f)}}return c},curve:function(a,c){var d=a.slice(0);return"x"==c&&(d[d.length]=d[0]),b.map(d,function(a,b){if(0==b)return"M"+a.x+","+a.y;if(!isNaN(c)){var e=a.x-d[b-1].x,f=d[b-1].y;return"C"+(a.x-e/c*(c-1))+","+f+" "+(a.x-e/c)+","+a.y+" "+a.x+","+a.y}if("X"==c||"x"==c||"S"==c){var g,h,i,j,k,l,m=d[b-1],n=d[b],o=1/6;1==b?(g="x"==c?d[d.length-2]:m,o=1/3):g=d[b-2],b==d.length-1?(h="x"==c?d[1]:n,o=1/3):h=d[b+1];var p=Math.sqrt((n.x-m.x)*(n.x-m.x)+(n.y-m.y)*(n.y-m.y)),q=Math.sqrt((n.x-g.x)*(n.x-g.x)+(n.y-g.y)*(n.y-g.y)),r=Math.sqrt((h.x-m.x)*(h.x-m.x)+(h.y-m.y)*(h.y-m.y)),s=q*o,t=r*o;s>p/2&&t>p/2?(s=p/2,t=p/2):s>p/2?(s=p/2,t=p/2*r/q):t>p/2&&(t=p/2,s=p/2*q/r),"S"==c&&(g==m&&(s=0),n==h&&(t=0)),i=m.x+s*(n.x-g.x)/q,j=m.y+s*(n.y-g.y)/q,k=n.x-t*(h.x-m.x)/r,l=n.y-t*(h.y-m.y)/r}return"C"+i+","+j+" "+k+","+l+" "+n.x+","+n.y}).join(" ")},getLabel:function(a,b,c){return f.doIfLoaded("dojo/number",function(d){return(b?d.format(a,{places:c}):d.format(a))||""},function(){return b?a.toFixed(c):a.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(a){var b=a.getObject("dojox.charting.scaler.primitive",!0);return a.mixin(b,{buildScaler:function(a,c,d,e){return a==c&&(a-=.5,c+=.5),{bounds:{lower:a,upper:c,from:a,to:c,scale:d/(c-a),span:d},scaler:b}},buildTicks:function(a,b){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(a){var b=a.bounds.from,c=a.bounds.scale;return function(a){return(a-b)*c}},getTransformerFromPlot:function(a){var b=a.bounds.from,c=a.bounds.scale;return function(a){return a/c+b}}})})},"dojox/gfx/fx":function(){define(["dojo/_base/lang","./_base","./matrix","dojo/_base/Color","dojo/_base/array","dojo/_base/fx","dojo/_base/connect","dojo/sniff"],function(a,b,c,d,e,f,g,h){function i(a,b){this.start=a,this.end=b}function j(a,b,c){this.start=a,this.end=b,this.units=c}function k(a,b){this.start=a,this.end=b,this.temp=new d}function l(a){this.values=a,this.length=a.length}function m(a,b){this.values=a,this.def=b||{}}function n(a,b){this.stack=a,this.original=b}function o(a,c,d,e){if(a.values)return new l(a.values);var f,g,h;return g=a.start?b.normalizeColor(a.start):f=c?d?c[d]:c:e,a.end?h=b.normalizeColor(a.end):(f||(f=c?d?c[d]:c:e),h=f),new k(g,h)}function p(a,b,c,d){if(a.values)return new l(a.values);var e,f,g;return f=a.start?a.start:e=b?b[c]:d,a.end?g=a.end:("number"!=typeof e&&(e=b?b[c]:d),g=e),new i(f,g)}var q=b.fx={};i.prototype.getValue=function(a){return(this.end-this.start)*a+this.start},j.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units},k.prototype.getValue=function(a){return d.blendColors(this.start,this.end,a,this.temp)},l.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]},m.prototype.getValue=function(b){var c=a.clone(this.def);for(var d in this.values)c[d]=this.values[d].getValue(b);return c},n.prototype.getValue=function(a){var b=[];return e.forEach(this.stack,function(d){if(d instanceof c.Matrix2D)return void b.push(d);if("original"==d.name&&this.original)return void b.push(this.original);if("matrix"!=d.name){if(d.name in c){var f=c[d.name];if("function"!=typeof f)return void b.push(f);var g=e.map(d.start,function(b,c){return(d.end[c]-b)*a+b}),h=f.apply(c,g);h instanceof c.Matrix2D&&b.push(h)}}else if(d.start instanceof c.Matrix2D&&d.end instanceof c.Matrix2D){var i=new c.Matrix2D;for(var j in d.start)i[j]=(d.end[j]-d.start[j])*a+d.start[j];b.push(i)}},this),b};var r=new d(0,0,0,0);return q.animateStroke=function(a){a.easing||(a.easing=f._defaultEasing);var b,c=new f.Animation(a),d=a.shape;return g.connect(c,"beforeBegin",c,function(){b=d.getStroke();var c,e,f=a.color,g={};f&&(g.color=o(f,b,"color",r)),f=a.style,f&&f.values&&(g.style=new l(f.values)),f=a.width,f&&(g.width=p(f,b,"width",1)),f=a.cap,f&&f.values&&(g.cap=new l(f.values)),f=a.join,f&&(f.values?g.join=new l(f.values):(c=f.start?f.start:b&&b.join||0,e=f.end?f.end:b&&b.join||0,"number"==typeof c&&"number"==typeof e&&(g.join=new i(c,e)))),this.curve=new m(g,b)}),g.connect(c,"onAnimate",d,"setStroke"),c},q.animateFill=function(a){a.easing||(a.easing=f._defaultEasing);var b,c=new f.Animation(a),d=a.shape;return g.connect(c,"beforeBegin",c,function(){b=d.getFill();var c=a.color;c&&(this.curve=o(c,b,"",r))}),g.connect(c,"onAnimate",d,"setFill"),c},q.animateFont=function(a){a.easing||(a.easing=f._defaultEasing);var b,c=new f.Animation(a),d=a.shape;return g.connect(c,"beforeBegin",c,function(){b=d.getFont();var c,e,f=a.style,g={};f&&f.values&&(g.style=new l(f.values)),f=a.variant,f&&f.values&&(g.variant=new l(f.values)),f=a.weight,f&&f.values&&(g.weight=new l(f.values)),f=a.family,f&&f.values&&(g.family=new l(f.values)),f=a.size,f&&f.units&&(c=parseFloat(f.start?f.start:d.font&&d.font.size||"0"),e=parseFloat(f.end?f.end:d.font&&d.font.size||"0"),g.size=new j(c,e,f.units)),this.curve=new m(g,b)}),g.connect(c,"onAnimate",d,"setFont"),c},q.animateTransform=function(a){a.easing||(a.easing=f._defaultEasing);var c,d=new f.Animation(a),i=a.shape;if(g.connect(d,"beforeBegin",d,function(){c=i.getTransform(),this.curve=new n(a.transform,c)}),g.connect(d,"onAnimate",i,"setTransform"),"svg"===b.renderer&&h("ie")>=10)var j=[g.connect(d,"onBegin",d,function(){for(var a=i.getParent();a&&a.getParent;)a=a.getParent();a&&(i.__svgContainer=a.rawNode.parentNode)}),g.connect(d,"onAnimate",d,function(){try{if(i.__svgContainer){var a=i.__svgContainer.style.visibility;i.__svgContainer.style.visibility="visible";i.__svgContainer.offsetHeight;i.__svgContainer.style.visibility=a}}catch(a){}}),g.connect(d,"onEnd",d,function(){if(e.forEach(j,g.disconnect),i.__svgContainer){var a=i.__svgContainer.style.visibility,b=i.__svgContainer;i.__svgContainer.style.visibility="visible",setTimeout(function(){try{b.style.visibility=a,b=null}catch(a){}},100)}delete i.__svgContainer})];return d},q})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(a,b,c,d){return c("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[],this._eventSeries={}},destroy:function(){this.resetEvents(),this.inherited(arguments)},plotEvent:function(a){},raiseEvent:function(c){this.plotEvent(c);var d=a.delegate(c);d.originalEvent=c.type,d.originalPlot=c.plot,d.type="onindirect",b.forEach(this.chart.stack,function(a){a!==this&&a.plotEvent&&(d.plot=a,a.plotEvent(d))},this)},connect:function(a,b){return this.dirty=!0,d.connect(this,"plotEvent",a,b)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(b.forEach(this._shapeEvents,function(a){a.shape.disconnect(a.handle)}),this._shapeEvents=[]),this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(a,b){this._shapeEvents.push({shape:a.eventMask,handle:a.eventMask.connect(b,this,function(c){a.type=b,a.event=c,this.raiseEvent(a),a.event=null})})},_connectEvents:function(a){a&&(a.chart=this.chart,a.plot=this,a.hAxis=this.hAxis||null,a.vAxis=this.vAxis||null,a.eventMask=a.eventMask||a.shape,this._connectSingleEvent(a,"onmouseover"),this._connectSingleEvent(a,"onmouseout"),this._connectSingleEvent(a,"onclick"))},_reconnectEvents:function(a){var c=this._eventSeries[a];c&&b.forEach(c,this._connectEvents,this)},
fireEvent:function(a,b,c,d){var e=this._eventSeries[a];if(e&&e.length&&c<e.length){var f=e[c];f.type=b,f.event=d||null,this.raiseEvent(f),f.event=null}}})})},"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare","./Default"],function(a,b){return a("dojox.charting.plot2d.Lines",b,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/Areas":function(){define(["dojo/_base/declare","./Default"],function(a,b){return a("dojox.charting.plot2d.Areas",b,{constructor:function(){this.opt.lines=!0,this.opt.areas=!0}})})},"dojox/charting/plot2d/Markers":function(){define(["dojo/_base/declare","./Default"],function(a,b){return a("dojox.charting.plot2d.Markers",b,{constructor:function(){this.opt.markers=!0}})})},"dojox/charting/plot2d/MarkersOnly":function(){define(["dojo/_base/declare","./Default"],function(a,b){return a("dojox.charting.plot2d.MarkersOnly",b,{constructor:function(){this.opt.lines=!1,this.opt.markers=!0}})})},"dojox/charting/plot2d/Scatter":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.lambda("item.purgeGroup()");return c("dojox.charting.plot2d.Scatter",[e,f],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(b,c){this.opt=a.clone(a.mixin(this.opt,this.defaultParams)),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate},render:function(a,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents(),this.dirty=this.isDirty();var e;this.dirty&&(b.forEach(this.series,m),this._eventSeries={},this.cleanGroup(),e=this.getGroup(),h.forEachRev(this.series,function(a){a.cleanGroup(e)}));for(var f=this.chart.theme,i=this.events(),j=this.series.length-1;j>=0;--j){var k=this.series[j];if(this.dirty||k.dirty)if(k.cleanGroup(),k.data.length){var n,o=f.next("marker",[this.opt,k]),p=this._hScaler.scaler.getTransformerFromModel(this._hScaler),q=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(k.hidden)k.dyn.marker=o.symbol,k.dyn.markerFill=o.marker.fill,k.dyn.markerStroke=o.marker.stroke;else{e=k.group,n="number"==typeof k.data[0]?b.map(k.data,function(b,d){return{x:p(d+1)+c.l,y:a.height-c.b-q(b)}},this):b.map(k.data,function(b,d){return{x:p(b.x)+c.l,y:a.height-c.b-q(b.y)}},this);var r=new Array(n.length),s=new Array(n.length),t=new Array(n.length);if(b.forEach(n,function(b,d){var h,i=k.data[d];if(this.opt.styleFunc||"number"!=typeof i){var j="number"!=typeof i?[i]:[];this.opt.styleFunc&&j.push(this.opt.styleFunc(i)),h=f.addMixin(o,"marker",j,!0)}else h=f.post(o,"marker");var m="M"+b.x+" "+b.y+" "+h.symbol;if(h.marker.shadow&&(r[d]=e.createPath("M"+(b.x+h.marker.shadow.dx)+" "+(b.y+h.marker.shadow.dy)+" "+h.symbol).setStroke(h.marker.shadow).setFill(h.marker.shadow.color),this.animate&&this._animateScatter(r[d],a.height-c.b)),h.marker.outline){var n=g.makeStroke(h.marker.outline);n.width=2*n.width+h.marker.stroke.width,t[d]=e.createPath(m).setStroke(n),this.animate&&this._animateScatter(t[d],a.height-c.b)}var p=g.makeStroke(h.marker.stroke),q=this._plotFill(h.marker.fill,a,c);if(!q||"linear"!==q.type&&"radial"!=q.type)s[d]=e.createPath(m).setStroke(p).setFill(q);else{var u=l.getColor(q,{x:b.x,y:b.y});p&&(p.color=u),s[d]=e.createPath(m).setStroke(p).setFill(u)}if(this.opt.labels){var v=s[d].getBoundingBox();this.createLabel(e,i,v,h)}this.animate&&this._animateScatter(s[d],a.height-c.b)},this),s.length&&(k.dyn.marker=o.symbol,k.dyn.markerStroke=s[s.length-1].getStroke(),k.dyn.markerFill=s[s.length-1].getFill()),i){var u=new Array(s.length);b.forEach(s,function(a,b){var c={element:"marker",index:b,run:k,shape:a,outline:t&&t[b]||null,shadow:r&&r[b]||null,cx:n[b].x,cy:n[b].y};"number"==typeof k.data[0]?(c.x=b+1,c.y=k.data[b]):(c.x=k.data[b].x,c.y=k.data[b].y),this._connectEvents(c),u[b]=c},this),this._eventSeries[k.name]=u}else delete this._eventSeries[k.name];k.dirty=!1}}else k.dirty=!1,f.skip();else f.skip(),this._reconnectEvents(k.name)}return this.dirty=!1,d("dojo-bidi")&&this._checkOrientation(this.group,a,c),this},_animateScatter:function(b,c){k.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Stacked":function(){define(["dojo/_base/declare","./Default","./commonStacked"],function(a,b,c){return a("dojox.charting.plot2d.Stacked",b,{getSeriesStats:function(){return c.collectStats(this.series)},buildSegments:function(a,b){for(var d=this.series[a],e=b?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,f=b?Math.min(d.data.length-1,Math.ceil(this._hScaler.bounds.to)):d.data.length-1,g=null,h=[],i=e;i<=f;i++){var j=b?c.getIndexValue(this.series,a,i):c.getValue(this.series,a,d.data[i]?d.data[i].x:null);null==j[0]||!b&&null==j[0].y?this.opt.interpolate&&!b||(g=null):(g||(g=[],h.push({index:i,rseg:g})),g.push(j[0]))}return h}})})},"dojox/charting/plot2d/commonStacked":function(){define(["dojo/_base/lang","./common"],function(a,b){var c=a.getObject("dojox.charting.plot2d.commonStacked",!0);return a.mixin(c,{collectStats:function(d){for(var e=a.delegate(b.defaultStats),f=0;f<d.length;++f)for(var g=d[f],h=0;h<g.data.length;h++){var i,j;null!==g.data[h]&&("number"!=typeof g.data[h]&&g.data[h].hasOwnProperty("x")?null!==(i=g.data[h].x)&&(j=c.getValue(d,f,i)[0],j=null!=j&&j.y?j.y:null):(j=c.getIndexValue(d,f,h)[0],i=h+1),e.hmin=Math.min(e.hmin,i),e.hmax=Math.max(e.hmax,i),e.vmin=Math.min(e.vmin,j),e.vmax=Math.max(e.vmax,j))}return e},getIndexValue:function(a,b,c){var d,e,f,g=0;for(e=0;e<=b;++e)a[e].hidden||(f=g,null!=(d=a[e].data[c])&&(isNaN(d)&&(d=d.y||0),g+=d));return[g,f]},getValue:function(a,b,c){var d,e,f,g,h=null;for(d=0;d<=b;++d)if(!a[d].hidden)for(e=0;e<a[d].data.length;e++)if(g=h,null!==(f=a[d].data[e])){if(f.x==c){h||(h={x:c}),null!=f.y&&(null==h.y&&(h.y=0),h.y+=f.y);break}if(f.x>c)break}return[h,g]}})})},"dojox/charting/plot2d/StackedLines":function(){define(["dojo/_base/declare","./Stacked"],function(a,b){return a("dojox.charting.plot2d.StackedLines",b,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/StackedAreas":function(){define(["dojo/_base/declare","./Stacked"],function(a,b){return a("dojox.charting.plot2d.StackedAreas",b,{constructor:function(){this.opt.lines=!0,this.opt.areas=!0}})})},"dojox/charting/plot2d/Columns":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.lambda("item.purgeGroup()");return c("dojox.charting.plot2d.Columns",[e,f],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(b,c){this.opt=a.clone(a.mixin(this.opt,this.defaultParams)),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate,this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var a=g.collectSimpleStats(this.series);return a.hmin-=.5,a.hmax+=.5,a},createRect:function(a,b,c){var d;return this.opt.enableCache&&a._rectFreePool.length>0?(d=a._rectFreePool.pop(),d.setShape(c),b.add(d)):d=b.createRect(c),this.opt.enableCache&&a._rectUsePool.push(d),d},render:function(c,e){if(this.zoom&&!this.isDataDirty())return this.performZoom(c,e);this.resetEvents(),this.dirty=this.isDirty();var f;this.dirty&&(b.forEach(this.series,l),this._eventSeries={},this.cleanGroup(),f=this.getGroup(),h.forEachRev(this.series,function(a){a.cleanGroup(f)}));var g=this.chart.theme,i=this._hScaler.scaler.getTransformerFromModel(this._hScaler),j=this._vScaler.scaler.getTransformerFromModel(this._vScaler),k=Math.max(0,this._vScaler.bounds.lower),m=j(k),n=this.events(),o=this.getBarProperties(),p=this.series.length;b.forEach(this.series,function(a){a.hidden&&p--});for(var q=this.series.length-1;q>=0;--q){var r=this.series[q];if(this.dirty||r.dirty){r.cleanGroup(),this.opt.enableCache&&(r._rectFreePool=(r._rectFreePool?r._rectFreePool:[]).concat(r._rectUsePool?r._rectUsePool:[]),r._rectUsePool=[]);var s=g.next("column",[this.opt,r]),t=new Array(r.data.length);if(r.hidden)r.dyn.fill=s.series.fill;else{p--,f=r.group;for(var u=b.some(r.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),v=u?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,w=u?Math.min(r.data.length,Math.ceil(this._hScaler.bounds.to)):r.data.length,x=v;x<w;++x){var y=r.data[x];if(null!=y){var z,A,B=this.getValue(y,x,q,u),C=j(B.y),D=Math.abs(C-m);if(this.opt.styleFunc||"number"!=typeof y){var E="number"!=typeof y?[y]:[];this.opt.styleFunc&&E.push(this.opt.styleFunc(y)),z=g.addMixin(s,"column",E,!0)}else z=g.post(s,"column");if(o.width>=1&&D>=0){var F={x:e.l+i(B.x+.5)+o.gap+o.thickness*p,y:c.height-e.b-(B.y>k?C:m),width:o.width,height:D};if(z.series.shadow){var G=a.clone(F);G.x+=z.series.shadow.dx,G.y+=z.series.shadow.dy,A=this.createRect(r,f,G).setFill(z.series.shadow.color).setStroke(z.series.shadow),this.animate&&this._animateColumn(A,c.height-e.b+m,D)}var H=this._plotFill(z.series.fill,c,e);H=this._shapeFill(H,F);var I=this.createRect(r,f,F).setFill(H).setStroke(z.series.stroke);if(I.setFilter&&z.series.filter&&I.setFilter(z.series.filter),r.dyn.fill=I.getFill(),r.dyn.stroke=I.getStroke(),n){var J={element:"column",index:x,run:r,shape:I,shadow:A,cx:B.x+.5,cy:B.y,x:u?x:r.data[x].x,y:u?r.data[x]:r.data[x].y};this._connectEvents(J),t[x]=J}!isNaN(B.py)&&B.py>k&&(F.height=C-j(B.py)),this.createLabel(f,y,F,z),this.animate&&this._animateColumn(I,c.height-e.b-m,D)}}}this._eventSeries[r.name]=t,r.dirty=!1}}else g.skip(),this._reconnectEvents(r.name)}return this.dirty=!1,d("dojo-bidi")&&this._checkOrientation(this.group,c,e),this},getValue:function(a,b,c,d){var e,f;return d?(e="number"==typeof a?a:a.y,f=b):(e=a.y,f=a.x-1),{x:f,y:e}},getBarProperties:function(){var a=g.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:a.gap,width:a.size,thickness:0}},_animateColumn:function(b,c,d){0==d&&(d=1),k.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c-c/d],end:[0,0]},{name:"scale",start:[1,1/d],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedColumns":function(){define(["dojo/_base/declare","./Columns","./commonStacked"],function(a,b,c){return a("dojox.charting.plot2d.StackedColumns",b,{getSeriesStats:function(){var a=c.collectStats(this.series);return a.hmin-=.5,a.hmax+=.5,a},getValue:function(a,b,d,e){var f,g;return e?(f=b,g=c.getIndexValue(this.series,d,f)):(f=a.x-1,g=c.getValue(this.series,d,a.x),g=[g[0]?g[0].y:null,g[1]?g[1]:null]),{x:f,y:g[0],py:g[1]}}})})},"dojox/charting/plot2d/ClusteredColumns":function(){define(["dojo/_base/declare","dojo/_base/array","./Columns","./common"],function(a,b,c,d){return a("dojox.charting.plot2d.ClusteredColumns",c,{getBarProperties:function(){var a=this.series.length;b.forEach(this.series,function(b){b.hidden&&a--});var c=d.calculateBarSize(this._hScaler.bounds.scale,this.opt,a);return{gap:c.gap,width:c.size,thickness:c.size,clusterSize:a}}})})},"dojox/charting/plot2d/Bars":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/gfx/fx","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/reversed"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k.lambda("item.purgeGroup()");return c("dojox.charting.plot2d.Bars",[e,f],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(b,c){this.opt=a.clone(a.mixin(this.opt,this.defaultParams)),i.updateWithObject(this.opt,c),i.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate,this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var a,b=g.collectSimpleStats(this.series);return b.hmin-=.5,b.hmax+=.5,a=b.hmin,b.hmin=b.vmin,b.vmin=a,a=b.hmax,b.hmax=b.vmax,b.vmax=a,b},createRect:function(a,b,c){var d;return this.opt.enableCache&&a._rectFreePool.length>0?(d=a._rectFreePool.pop(),d.setShape(c),b.add(d)):d=b.createRect(c),this.opt.enableCache&&a._rectUsePool.push(d),d},createLabel:function(a,b,c,d){if(this.opt.labels&&"outside"==this.opt.labelStyle){var e=c.y+c.height/2,f=c.x+c.width+this.opt.labelOffset;this.renderLabel(a,f,e,this._getLabel(isNaN(b.y)?b:b.y),d,"start")}else this.inherited(arguments)},render:function(c,e){if(this.zoom&&!this.isDataDirty())return this.performZoom(c,e);this.dirty=this.isDirty(),this.resetEvents();var f;this.dirty&&(b.forEach(this.series,l),this._eventSeries={},this.cleanGroup(),f=this.getGroup(),j.forEachRev(this.series,function(a){a.cleanGroup(f)}));var g=this.chart.theme,h=this._hScaler.scaler.getTransformerFromModel(this._hScaler),i=this._vScaler.scaler.getTransformerFromModel(this._vScaler),k=Math.max(0,this._hScaler.bounds.lower),m=h(k),n=this.events(),o=this.getBarProperties(),p=this.series.length;b.forEach(this.series,function(a){a.hidden&&p--});for(var q=p,r=this.series.length-1;r>=0;--r){var s=this.series[r];if(this.dirty||s.dirty){s.cleanGroup(),this.opt.enableCache&&(s._rectFreePool=(s._rectFreePool?s._rectFreePool:[]).concat(s._rectUsePool?s._rectUsePool:[]),s._rectUsePool=[]);var t=g.next("bar",[this.opt,s]);if(s.hidden)s.dyn.fill=t.series.fill,s.dyn.stroke=t.series.stroke;else{q--;var u=new Array(s.data.length);f=s.group;for(var v=b.some(s.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),w=v?Math.max(0,Math.floor(this._vScaler.bounds.from-1)):0,x=v?Math.min(s.data.length,Math.ceil(this._vScaler.bounds.to)):s.data.length,y=w;y<x;++y){var z=s.data[y];if(null!=z){var A,B,C=this.getValue(z,y,r,v),D=h(C.y),E=Math.abs(D-m);if(this.opt.styleFunc||"number"!=typeof z){var F="number"!=typeof z?[z]:[];this.opt.styleFunc&&F.push(this.opt.styleFunc(z)),A=g.addMixin(t,"bar",F,!0)}else A=g.post(t,"bar");if(E>=0&&o.height>=1){var G={x:e.l+(C.y<k?D:m),y:c.height-e.b-i(C.x+1.5)+o.gap+o.thickness*(p-q-1),width:E,height:o.height};if(A.series.shadow){var H=a.clone(G);H.x+=A.series.shadow.dx,H.y+=A.series.shadow.dy,B=this.createRect(s,f,H).setFill(A.series.shadow.color).setStroke(A.series.shadow),this.animate&&this._animateBar(B,e.l+m,-E)}var I=this._plotFill(A.series.fill,c,e);I=this._shapeFill(I,G);var J=this.createRect(s,f,G).setFill(I).setStroke(A.series.stroke);if(J.setFilter&&A.series.filter&&J.setFilter(A.series.filter),s.dyn.fill=J.getFill(),s.dyn.stroke=J.getStroke(),n){var K={element:"bar",index:y,run:s,shape:J,shadow:B,cx:C.y,cy:C.x+1.5,x:v?y:s.data[y].x,y:v?s.data[y]:s.data[y].y};this._connectEvents(K),u[y]=K}!isNaN(C.py)&&C.py>k&&(G.x+=h(C.py),G.width-=h(C.py)),this.createLabel(f,z,G,A),this.animate&&this._animateBar(J,e.l+m,-E)}}}this._eventSeries[s.name]=u,s.dirty=!1}}else g.skip(),this._reconnectEvents(s.name)}return this.dirty=!1,d("dojo-bidi")&&this._checkOrientation(this.group,c,e),this},getValue:function(a,b,c,d){var e,f;return d?(e="number"==typeof a?a:a.y,f=b):(e=a.y,f=a.x-1),{y:e,x:f}},getBarProperties:function(){var a=g.calculateBarSize(this._vScaler.bounds.scale,this.opt);return{gap:a.gap,height:a.size,thickness:0}},_animateBar:function(b,c,d){0==d&&(d=1),h.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[c-c/d,0],end:[0,0]},{name:"scale",start:[1/d,1],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedBars":function(){define(["dojo/_base/declare","./Bars","./commonStacked"],function(a,b,c){return a("dojox.charting.plot2d.StackedBars",b,{getSeriesStats:function(){var a,b=c.collectStats(this.series);return b.hmin-=.5,b.hmax+=.5,a=b.hmin,b.hmin=b.vmin,b.vmin=a,a=b.hmax,b.hmax=b.vmax,b.vmax=a,b},getValue:function(a,b,d,e){var f,g;return e?(g=b,f=c.getIndexValue(this.series,d,g)):(g=a.x-1,f=c.getValue(this.series,d,a.x),f=[f[0]?f[0].y:null,f[1]?f[1]:null]),{x:g,y:f[0],py:f[1]}}})})},"dojox/charting/plot2d/ClusteredBars":function(){define(["dojo/_base/declare","dojo/_base/array","./Bars","./common"],function(a,b,c,d){return a("dojox.charting.plot2d.ClusteredBars",c,{getBarProperties:function(){var a=this.series.length;b.forEach(this.series,function(b){b.hidden&&a--});var c=d.calculateBarSize(this._vScaler.bounds.scale,this.opt,a);return{gap:c.gap,height:c.size,thickness:c.size}}})})},"dojox/charting/plot2d/Grid":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/sniff","./CartesianBase","./common","dojox/lang/utils","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h){var i=function(a,b){return a.value-b.value};return b("dojox.charting.plot2d.Grid",e,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{},hFill:{},vFill:{},hAlternateFill:{},vAlternateFill:{}},constructor:function(b,c){this.opt=a.clone(this.defaultParams),g.updateWithObject(this.opt,c),g.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate,this.opt.enableCache&&(this._lineFreePool=[],this._lineUsePool=[],this._rectFreePool=[],this._rectUsePool=[])},addSeries:function(a){return this},getSeriesStats:function(){return a.delegate(f.defaultStats)},cleanGroup:function(){this.inherited(arguments),this.opt.enableCache&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._rectFreePool=this._rectFreePool.concat(this._rectUsePool),this._rectUsePool=[])},createLine:function(a,b){var c;return this.opt.enableCache&&this._lineFreePool.length>0?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b),this.opt.enableCache&&this._lineUsePool.push(c),c},createRect:function(a,b){var c;return this.opt.enableCache&&this._rectFreePool.length>0?(c=this._rectFreePool.pop(),c.setShape(b),a.add(c)):c=a.createRect(b),this.opt.enableCache&&this._rectUsePool.push(c),c},render:function(a,b){if(this.zoom)return this.performZoom(a,b);if(this.dirty=this.isDirty(),!this.dirty)return this;this.cleanGroup();var c,e,f=this.getGroup(),g=this.chart.theme;if(d("ios")&&d("ios")<6||d("android")||d("safari")&&!d("ios")){var h=Math.max(0,a.width-b.l-b.r),i=Math.max(0,a.height-b.t-b.b);f.createRect({x:b.l,y:b.t,width:h,height:i})}if(this._vAxis){e=this._vAxis.getTicks();var j=this._vAxis.getScaler();if(null!=e&&null!=j){var k=j.scaler.getTransformerFromModel(j);this.opt.hStripes&&this._renderHRect(e,g.grid,a,b,j,k),this.opt.hMinorLines&&(c=this.opt.minorHLine||g.grid&&g.grid.minorLine||g.axis.minorTick,this._renderHLines(e.minor,c,a,b,j,k)),this.opt.hMajorLines&&(c=this.opt.majorHLine||g.grid&&g.grid.majorLine||g.axis.majorTick,this._renderHLines(e.major,c,a,b,j,k))}}if(this._hAxis){e=this._hAxis.getTicks();var l=this._hAxis.getScaler();if(null!=e&&null!=l){var m=l.scaler.getTransformerFromModel(l);this.opt.vStripes&&this._renderVRect(e,g.grid,a,b,l,m),e&&this.opt.vMinorLines&&(c=this.opt.minorVLine||g.grid&&g.grid.minorLine||g.axis.minorTick,this._renderVLines(e.minor,c,a,b,l,m)),e&&this.opt.vMajorLines&&(c=this.opt.majorVLine||g.grid&&g.grid.majorLine||g.axis.majorTick,this._renderVLines(e.major,c,a,b,l,m))}}return this.dirty=!1,this},_renderHLines:function(a,b,d,e,f,g){var h=this.getGroup();c.forEach(a,function(a){if(this.opt.renderOnAxis||a.value!=(this._vAxis.opt.leftBottom?f.bounds.from:f.bounds.to)){var c=d.height-e.b-g(a.value),i=this.createLine(h,{x1:e.l,y1:c,x2:d.width-e.r,y2:c}).setStroke(b);this.animate&&this._animateGrid(i,"h",e.l,e.r+e.l-d.width)}},this)},_renderVLines:function(a,b,d,e,f,g){var h=this.getGroup();c.forEach(a,function(a){if(this.opt.renderOnAxis||a.value!=(this._hAxis.opt.leftBottom?f.bounds.from:f.bounds.to)){var c=e.l+g(a.value),i=this.createLine(h,{x1:c,y1:e.t,x2:c,y2:d.height-e.b}).setStroke(b);this.animate&&this._animateGrid(i,"v",d.height-e.b,d.height-e.b-e.t)}},this)},_renderHRect:function(a,b,c,d,e,f){var g,h,j,k,l,m=a.major.concat(a.minor);m.sort(i),m[0].value>e.bounds.from&&m.splice(0,0,{value:e.bounds.from}),m[m.length-1].value<e.bounds.to&&m.push({value:e.bounds.to});for(var n=this.getGroup(),o=0;o<m.length-1;o++)h=m[o],j=c.height-d.b-f(h.value),k=c.height-d.b-f(m[o+1].value),(g=o%2==0?this.opt.hAlternateFill||b&&b.alternateFill:this.opt.hFill||b&&b.fill)&&(l=this.createRect(n,{x:d.l,y:j,width:c.width-d.r,height:j-k}).setFill(g),this.animate&&this._animateGrid(l,"h",d.l,d.r+d.l-c.width))},_renderVRect:function(a,b,c,d,e,f){var g,h,j,k,l,m=a.major.concat(a.minor);m.sort(i),m[0].value>e.bounds.from&&m.splice(0,0,{value:e.bounds.from}),m[m.length-1].value<e.bounds.to&&m.push({value:e.bounds.to});for(var n=this.getGroup(),o=0;o<m.length-1;o++)h=m[o],j=d.l+f(h.value),k=d.l+f(m[o+1].value),(g=o%2==0?this.opt.vAlternateFill||b&&b.alternateFill:this.opt.vFill||b&&b.fill)&&(l=this.createRect(n,{x:j,y:d.t,width:k-j,height:c.width-d.r}).setFill(g),this.animate&&this._animateGrid(l,"v",c.height-d.b,c.height-d.b-d.t))},_animateGrid:function(b,c,d,e){var f="h"==c?[d,0]:[0,d],g="h"==c?[1/e,1]:[1,1/e];h.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:f,end:[0,0]},{name:"scale",start:g,end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Pie":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./_PlotEvents","./common","dojox/gfx","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/utils","dojo/has"],function(a,b,c,d,e,f,g,h,i,j,k){var l=.2;return c("dojox.charting.plot2d.Pie",[d,e],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(b,c){this.opt=a.clone(this.defaultParams),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.axes=[],this.run=null,this.dyn=[],this.runFilter=[]},clear:function(){return this.inherited(arguments),this.dyn=[],this.run=null,this},setAxis:function(a){return this},addSeries:function(a){return this.run=a,this},getSeriesStats:function(){return a.delegate(f.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(c,d){if(!this.dirty)return this;this.resetEvents(),this.dirty=!1,this._eventSeries={},this.cleanGroup();var e=this.group,f=this.chart.theme;if(!this.run||!this.run.data.length)return this;var j,m,n,o,p,q,r=(c.width-d.l-d.r)/2,s=(c.height-d.t-d.b)/2,t=Math.min(r,s),u="font"in this.opt?this.opt.font:f.series.font,v=h._degToRad(this.opt.startAngle),w=v,x=this.events(),y=b.map(this.run.data,function(a,c){return"number"!=typeof a&&a.hidden&&(this.runFilter.push(c),a.hidden=!1),b.some(this.runFilter,function(a){return a==c})?"number"==typeof a?0:{y:0,text:a.text}:a},this);this.dyn=[],"radius"in this.opt&&(t=this.opt.radius,q=t-this.opt.labelOffset);var z={cx:d.l+r,cy:d.t+s,r:t};if(this.opt.shadow||f.shadow){var A=this.opt.shadow||f.shadow,B=a.clone(z);B.cx+=A.dx,B.cy+=A.dy,e.createCircle(B).setFill(A.color).setStroke(A)}if(e.setFilter&&(this.opt.filter||f.filter)&&e.createCircle(z).setFill(f.series.stroke).setFilter(this.opt.filter||f.filter),"number"==typeof y[0]){if(m=i.map(y,"x ? Math.max(x, 0) : 0"),i.every(m,"<= 0"))return e.createCircle(z).setStroke(f.series.stroke),this.dyn=b.map(m,function(){return{}}),this;n=i.map(m,"/this",i.foldl(m,"+",0)),this.opt.labels&&(o=b.map(n,function(a){return a>0?this._getLabel(100*a)+"%":""},this))}else{if(m=i.map(y,"x ? Math.max(x.y, 0) : 0"),i.every(m,"<= 0"))return e.createCircle(z).setStroke(f.series.stroke),this.dyn=b.map(m,function(){return{}}),this;n=i.map(m,"/this",i.foldl(m,"+",0)),this.opt.labels&&(o=b.map(n,function(a,b){if(a<0)return"";var c=y[b];return"text"in c?c.text:this._getLabel(100*a)+"%"},this))}var C=i.map(y,function(a,b){var c=[this.opt,this.run];return null!==a&&"number"!=typeof a&&c.push(a),this.opt.styleFunc&&c.push(this.opt.styleFunc(a)),f.next("slice",c,!0)},this);this.opt.labels&&(j=u?g.normalizedLength(g.splitFontString(u).size):0,p=i.foldl1(i.map(o,function(a,b){var c=C[b].series.font;return g._base._getTextBox(a,{font:c}).w},this),"Math.max(a, b)")/2,this.opt.labelOffset<0&&(t=Math.min(r-2*p,s-j)+this.opt.labelOffset),q=t-this.opt.labelOffset);var D=new Array(n.length);if(b.some(n,function(a,b){if(a<0)return!1;var f,g,i=y[b],j=C[b];if(0==a)return this.dyn.push({fill:j.series.fill,stroke:j.series.stroke}),!1;if(a>=1){f=this._plotFill(j.series.fill,c,d),f=this._shapeFill(f,{x:z.cx-z.r,y:z.cy-z.r,width:2*z.r,height:2*z.r}),f=this._pseudoRadialFill(f,{x:z.cx,y:z.cy},z.r);var k=e.createCircle(z).setFill(f).setStroke(j.series.stroke);return this.dyn.push({fill:f,stroke:j.series.stroke}),x&&(g={element:"slice",index:b,run:this.run,shape:k,x:b,y:"number"==typeof i?i:i.y,cx:z.cx,cy:z.cy,cr:t},this._connectEvents(g),D[b]=g),!1}var m=w+2*a*Math.PI;b+1==n.length&&(m=v+2*Math.PI);var o=m-w,p=z.cx+t*Math.cos(w),q=z.cy+t*Math.sin(w),r=z.cx+t*Math.cos(m),s=z.cy+t*Math.sin(m),u=h._degToRad(this.opt.fanSize);if(j.series.fill&&"radial"===j.series.fill.type&&"fan"===this.opt.radGrad&&o>u){var A=e.createGroup(),B=Math.ceil(o/u),E=o/B;f=this._shapeFill(j.series.fill,{x:z.cx-z.r,y:z.cy-z.r,width:2*z.r,height:2*z.r});for(var F=0;F<B;++F){var G=0==F?p:z.cx+t*Math.cos(w+(F-l)*E),H=0==F?q:z.cy+t*Math.sin(w+(F-l)*E),I=F==B-1?r:z.cx+t*Math.cos(w+(F+1+l)*E),J=F==B-1?s:z.cy+t*Math.sin(w+(F+1+l)*E);A.createPath().moveTo(z.cx,z.cy).lineTo(G,H).arcTo(t,t,0,E>Math.PI,!0,I,J).lineTo(z.cx,z.cy).closePath().setFill(this._pseudoRadialFill(f,{x:z.cx,y:z.cy},t,w+(F+.5)*E,w+(F+.5)*E))}A.createPath().moveTo(z.cx,z.cy).lineTo(p,q).arcTo(t,t,0,o>Math.PI,!0,r,s).lineTo(z.cx,z.cy).closePath().setStroke(j.series.stroke),k=A}else k=e.createPath().moveTo(z.cx,z.cy).lineTo(p,q).arcTo(t,t,0,o>Math.PI,!0,r,s).lineTo(z.cx,z.cy).closePath().setStroke(j.series.stroke),f=j.series.fill,f&&"radial"===f.type?(f=this._shapeFill(f,{x:z.cx-z.r,y:z.cy-z.r,width:2*z.r,height:2*z.r}),"linear"===this.opt.radGrad&&(f=this._pseudoRadialFill(f,{x:z.cx,y:z.cy},t,w,m))):f&&"linear"===f.type&&(f=this._plotFill(f,c,d),f=this._shapeFill(f,k.getBoundingBox())),k.setFill(f);return this.dyn.push({fill:f,stroke:j.series.stroke}),x&&(g={element:"slice",index:b,run:this.run,shape:k,x:b,y:"number"==typeof i?i:i.y,cx:z.cx,cy:z.cy,cr:t},this._connectEvents(g),D[b]=g),w=m,!1},this),this.opt.labels){var E=k("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)w=v,b.some(n,function(a,b){if(a<=0)return!1;var d=C[b];if(a>=1)return this.renderLabel(e,z.cx,z.cy+j/2,o[b],d,this.opt.labelOffset>0),!0;var f=w+2*a*Math.PI;if(b+1==n.length&&(f=v+2*Math.PI),this.opt.omitLabels&&f-w<.001)return!1;var g=(w+f)/2,h=z.cx+q*Math.cos(g),i=z.cy+q*Math.sin(g)+j/2;return this.renderLabel(e,E?c.width-h:h,i,o[b],d,this.opt.labelOffset>0),w=f,!1},this);else if("columns"==this.opt.labelStyle){w=v;var F=this.opt.omitLabels,G=[];b.forEach(n,function(a,b){var c=w+2*a*Math.PI;b+1==n.length&&(c=v+2*Math.PI);var d=(w+c)/2;G.push({angle:d,left:Math.cos(d)<0,theme:C[b],index:b,omit:!!F&&c-w<.001}),w=c});var H=g._base._getTextBox("a",{font:u}).h;this._getProperLabelRadius(G,H,1.1*z.r),b.forEach(G,function(a,b){if(!a.omit){var d=z.cx-2*z.r,f=z.cx+2*z.r,h=g._base._getTextBox(o[b],{font:a.theme.series.font}).w,i=z.cx+a.labelR*Math.cos(a.angle),j=z.cy+a.labelR*Math.sin(a.angle),k=a.left?d+h:f-h,l=a.left?d:k,m=e.createPath().moveTo(z.cx+z.r*Math.cos(a.angle),z.cy+z.r*Math.sin(a.angle));Math.abs(a.labelR*Math.cos(a.angle))<2*z.r-h&&m.lineTo(i,j),m.lineTo(k,j).setStroke(a.theme.series.labelWiring),this.renderLabel(e,E?c.width-h-l:l,j,o[b],a.theme,!1,"left")}},this)}}var I=0;return this._eventSeries[this.run.name]=i.map(y,function(a){return a<=0?null:D[I++]}),k("dojo-bidi")&&this._checkOrientation(this.group,c,d),this},_getProperLabelRadius:function(a,b,c){var d,e,f=1,g=1;if(1==a.length)return void(a[0].labelR=c);for(var h=0;h<a.length;h++){var i=Math.abs(Math.sin(a[h].angle));a[h].left?f>=i&&(f=i,d=a[h]):g>=i&&(g=i,e=a[h])}d.labelR=e.labelR=c,this._calculateLabelR(d,a,b),this._calculateLabelR(e,a,b)},_calculateLabelR:function(a,b,c){for(var d,e=a.index,f=b.length,g=a.labelR;!(b[e%f].left^b[(e+1)%f].left);)b[(e+1)%f].omit||(d=(Math.sin(b[e%f].angle)*g+(b[e%f].left?-c:c))/Math.sin(b[(e+1)%f].angle),g=d<a.labelR?a.labelR:d,b[(e+1)%f].labelR=g),e++;e=a.index;for(var h=0==e?f-1:e-1;!(b[e].left^b[h].left);)b[h].omit||(d=(Math.sin(b[e].angle)*g+(b[e].left?c:-c))/Math.sin(b[h].angle),g=d<a.labelR?a.labelR:d,b[h].labelR=g),e--,h--,e=e<0?e+b.length:e,h=h<0?h+b.length:h}})})},"dojox/charting/plot2d/Bubble":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.lambda("item.purgeGroup()");return b("dojox.charting.plot2d.Bubble",[e,f],{defaultParams:{animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelFunc:null},constructor:function(b,c){this.opt=a.clone(a.mixin(this.opt,this.defaultParams)),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.opt.labelFunc||(this.opt.labelFunc=function(a,b,c){return this._getLabel(a.size,b,c)}),this.animate=this.opt.animate},render:function(a,b){var e;if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.resetEvents(),this.dirty=this.isDirty(),this.dirty&&(c.forEach(this.series,l),this._eventSeries={},this.cleanGroup(),e=this.getGroup(),h.forEachRev(this.series,function(a){a.cleanGroup(e)}));for(var f=this.chart.theme,i=this._hScaler.scaler.getTransformerFromModel(this._hScaler),j=this._vScaler.scaler.getTransformerFromModel(this._vScaler),k=this.events(),m=this.series.length-1;m>=0;--m){var n=this.series[m];if(this.dirty||n.dirty)if(n.cleanGroup(),n.data.length){if("number"!=typeof n.data[0]){var o=f.next("circle",[this.opt,n]),p=c.map(n.data,function(c){return c?{x:i(c.x)+b.l,y:a.height-b.b-j(c.y),radius:this._vScaler.bounds.scale*(c.size/2)}:null},this);if(n.hidden)n.dyn.fill=o.series.fill,n.dyn.stroke=o.series.stroke;else{e=n.group;var q=null,r=null,s=null,t=this.opt.styleFunc,u=function(a){return t?f.addMixin(o,"circle",[a,t(a)],!0):f.addMixin(o,"circle",a,!0)};if(o.series.shadow&&(s=c.map(p,function(c,d){if(null!==c){var f=u(n.data[d]),g=f.series.shadow,h=e.createCircle({cx:c.x+g.dx,cy:c.y+g.dy,r:c.radius}).setStroke(g).setFill(g.color);return this.animate&&this._animateBubble(h,a.height-b.b,c.radius),h}return null},this),s.length&&(n.dyn.shadow=s[s.length-1].getStroke())),o.series.outline&&(r=c.map(p,function(c,d){if(null!==c){var f=u(n.data[d]),h=g.makeStroke(f.series.outline);h.width=2*h.width+o.series.stroke.width;var i=e.createCircle({cx:c.x,cy:c.y,r:c.radius}).setStroke(h);return this.animate&&this._animateBubble(i,a.height-b.b,c.radius),i}return null},this),r.length&&(n.dyn.outline=r[r.length-1].getStroke())),q=c.map(p,function(c,d){if(null!==c){var f=u(n.data[d]),g={x:c.x-c.radius,y:c.y-c.radius,width:2*c.radius,height:2*c.radius},h=this._plotFill(f.series.fill,a,b);h=this._shapeFill(h,g);var i=e.createCircle({cx:c.x,cy:c.y,r:c.radius}).setFill(h).setStroke(f.series.stroke)
;return i.setFilter&&f.series.filter&&i.setFilter(f.series.filter),this.animate&&this._animateBubble(i,a.height-b.b,c.radius),this.createLabel(e,n.data[d],g,f),i}return null},this),q.length&&(n.dyn.fill=q[q.length-1].getFill(),n.dyn.stroke=q[q.length-1].getStroke()),k){var v=new Array(q.length);c.forEach(q,function(a,b){if(null!==a){var c={element:"circle",index:b,run:n,shape:a,outline:r&&r[b]||null,shadow:s&&s[b]||null,x:n.data[b].x,y:n.data[b].y,r:n.data[b].size/2,cx:p[b].x,cy:p[b].y,cr:p[b].radius};this._connectEvents(c),v[b]=c}},this),this._eventSeries[n.name]=v}else delete this._eventSeries[n.name];n.dirty=!1}}}else n.dirty=!1,f.skip();else f.skip(),this._reconnectEvents(n.name)}return this.dirty=!1,d("dojo-bidi")&&this._checkOrientation(this.group,a,b),this},_animateBubble:function(b,c,d){k.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c],end:[0,0]},{name:"scale",start:[0,1/d],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Candlesticks":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.lambda("item.purgeGroup()");return b("dojox.charting.plot2d.Candlesticks",[e,f],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(b,c){this.opt=a.clone(this.defaultParams),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate},collectStats:function(b){for(var d=a.delegate(g.defaultStats),e=0;e<b.length;e++){var f=b[e];if(f.data.length){var h=d.vmin,i=d.vmax;"ymin"in f&&"ymax"in f||c.forEach(f.data,function(a,b){if(null!==a){var c=a.x||b+1;d.hmin=Math.min(d.hmin,c),d.hmax=Math.max(d.hmax,c),d.vmin=Math.min(d.vmin,a.open,a.close,a.high,a.low),d.vmax=Math.max(d.vmax,a.open,a.close,a.high,a.low)}}),"ymin"in f&&(d.vmin=Math.min(h,f.ymin)),"ymax"in f&&(d.vmax=Math.max(i,f.ymax))}}return d},getSeriesStats:function(){var a=this.collectStats(this.series);return a.hmin-=.5,a.hmax+=.5,a},render:function(a,b){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.resetEvents(),this.dirty=this.isDirty();var e;this.dirty&&(c.forEach(this.series,l),this._eventSeries={},this.cleanGroup(),e=this.getGroup(),h.forEachRev(this.series,function(a){a.cleanGroup(e)}));var f,i,j,k=this.chart.theme,m=this._hScaler.scaler.getTransformerFromModel(this._hScaler),n=this._vScaler.scaler.getTransformerFromModel(this._vScaler),o=this.events();f=g.calculateBarSize(this._hScaler.bounds.scale,this.opt),i=f.gap,j=f.size;for(var p=this.series.length-1;p>=0;--p){var q=this.series[p];if(this.dirty||q.dirty){q.cleanGroup();var r=k.next("candlestick",[this.opt,q]),s=new Array(q.data.length);if(q.hidden)q.dyn.fill=r.series.fill,q.dyn.stroke=r.series.stroke;else{e=q.group;for(var t=0;t<q.data.length;++t){var u=q.data[t];if(null!==u){var v=k.addMixin(r,"candlestick",u,!0),w=m(u.x||t+.5)+b.l+i,x=a.height-b.b,y=n(u.open),z=n(u.close),A=n(u.high),B=n(u.low);if("mid"in u)var C=n(u.mid);if(B>A){var D=A;A=B,B=D}if(j>=1){var E=y>z,F={x1:j/2,x2:j/2,y1:x-A,y2:x-B},G={x:0,y:x-Math.max(y,z),width:j,height:Math.max(E?y-z:z-y,1)},H=e.createGroup();H.setTransform({dx:w,dy:0});var I=H.createGroup();if(I.createLine(F).setStroke(v.series.stroke),I.createRect(G).setStroke(v.series.stroke).setFill(E?v.series.fill:"white"),"mid"in u&&I.createLine({x1:v.series.stroke.width||1,x2:j-(v.series.stroke.width||1),y1:x-C,y2:x-C}).setStroke(E?"white":v.series.stroke),q.dyn.fill=v.series.fill,q.dyn.stroke=v.series.stroke,o){var J={element:"candlestick",index:t,run:q,shape:I,x:w,y:x-Math.max(y,z),cx:j/2,cy:x-Math.max(y,z)+Math.max(E?y-z:z-y,1)/2,width:j,height:Math.max(E?y-z:z-y,1),data:u};this._connectEvents(J),s[t]=J}}this.animate&&this._animateCandlesticks(H,x-B,A-B)}}this._eventSeries[q.name]=s,q.dirty=!1}}else k.skip(),this._reconnectEvents(q.name)}return this.dirty=!1,d("dojo-bidi")&&this._checkOrientation(this.group,a,b),this},tooltipFunc:function(a){return'<table cellpadding="1" cellspacing="0" border="0" style="font-size:0.9em;"><tr><td>Open:</td><td align="right"><strong>'+a.data.open+'</strong></td></tr><tr><td>High:</td><td align="right"><strong>'+a.data.high+'</strong></td></tr><tr><td>Low:</td><td align="right"><strong>'+a.data.low+'</strong></td></tr><tr><td>Close:</td><td align="right"><strong>'+a.data.close+"</strong></td></tr>"+(void 0!==a.data.mid?'<tr><td>Mid:</td><td align="right"><strong>'+a.data.mid+"</strong></td></tr>":"")+"</table>"},_animateCandlesticks:function(b,c,d){k.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c-c/d],end:[0,0]},{name:"scale",start:[1,1/d],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/OHLC":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.lambda("item.purgeGroup()");return c("dojox.charting.plot2d.OHLC",[e,f],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(b,c){this.opt=a.clone(this.defaultParams),j.updateWithObject(this.opt,c),j.updateWithPattern(this.opt,c,this.optionalParams),this.animate=this.opt.animate},collectStats:function(c){for(var d=a.delegate(g.defaultStats),e=0;e<c.length;e++){var f=c[e];if(f.data.length){var h=d.vmin,i=d.vmax;"ymin"in f&&"ymax"in f||b.forEach(f.data,function(a,b){if(null!==a){var c=a.x||b+1;d.hmin=Math.min(d.hmin,c),d.hmax=Math.max(d.hmax,c),d.vmin=Math.min(d.vmin,a.open,a.close,a.high,a.low),d.vmax=Math.max(d.vmax,a.open,a.close,a.high,a.low)}}),"ymin"in f&&(d.vmin=Math.min(h,f.ymin)),"ymax"in f&&(d.vmax=Math.max(i,f.ymax))}}return d},getSeriesStats:function(){var a=this.collectStats(this.series);return a.hmin-=.5,a.hmax+=.5,a},render:function(a,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);if(this.resetEvents(),this.dirty=this.isDirty(),this.dirty){b.forEach(this.series,l),this._eventSeries={},this.cleanGroup();var e=this.getGroup();h.forEachRev(this.series,function(a){a.cleanGroup(e)})}var f,i,j,k=this.chart.theme,m=this._hScaler.scaler.getTransformerFromModel(this._hScaler),n=this._vScaler.scaler.getTransformerFromModel(this._vScaler),o=this.events();f=g.calculateBarSize(this._hScaler.bounds.scale,this.opt),i=f.gap,j=f.size;for(var p=this.series.length-1;p>=0;--p){var q=this.series[p];if(this.dirty||q.dirty){q.cleanGroup();for(var r=k.next("candlestick",[this.opt,q]),e=q.group,s=new Array(q.data.length),t=0;t<q.data.length;++t){var u=q.data[t];if(null!==u){var v=k.addMixin(r,"candlestick",u,!0),w=m(u.x||t+.5)+c.l+i,x=a.height-c.b,y=n(u.open),z=n(u.close),A=n(u.high),B=n(u.low);if(B>A){var C=A;A=B,B=C}if(j>=1){var D={x1:j/2,x2:j/2,y1:x-A,y2:x-B},E={x1:0,x2:j/2+(v.series.stroke.width||1)/2,y1:x-y,y2:x-y},F={x1:j/2-(v.series.stroke.width||1)/2,x2:j,y1:x-z,y2:x-z},G=e.createGroup();G.setTransform({dx:w,dy:0});var H=G.createGroup();if(H.createLine(D).setStroke(v.series.stroke),H.createLine(E).setStroke(v.series.stroke),H.createLine(F).setStroke(v.series.stroke),q.dyn.stroke=v.series.stroke,o){var I={element:"candlestick",index:t,run:q,shape:H,x:w,y:x-Math.max(y,z),cx:j/2,cy:x-Math.max(y,z)+Math.max(y>z?y-z:z-y,1)/2,width:j,height:Math.max(y>z?y-z:z-y,1),data:u};this._connectEvents(I),s[t]=I}}this.animate&&this._animateOHLC(G,x-B,A-B)}}this._eventSeries[q.name]=s,q.dirty=!1}else k.skip(),this._reconnectEvents(q.name)}return this.dirty=!1,d("dojo-bidi")&&this._checkOrientation(this.group,a,c),this},_animateOHLC:function(b,c,d){k.animateTransform(a.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c-c/d],end:[0,0]},{name:"scale",start:[1,1/d],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Spider":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/dom-geometry","dojo/_base/fx","dojo/fx","dojo/sniff","./Base","./_PlotEvents","./common","../axis2d/common","dojox/gfx","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/utils","dojo/fx/easing"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return b("dojox.charting.plot2d.Spider",[i,j],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:!0,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:.2,spiderOrigin:.16,markerSize:3,spiderType:"polygon",animationType:r.backOut,animate:null,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(b,c){this.opt=a.clone(this.defaultParams),q.updateWithObject(this.opt,c),q.updateWithPattern(this.opt,c,this.optionalParams),this.dyn=[],this.datas={},this.labelKey=[],this.oldSeriePoints={},this.animate=null===this.opt.animate?{}:this.opt.animate,this.animations={}},clear:function(){return this.inherited(arguments),this.dyn=[],this.axes=[],this.datas={},this.labelKey=[],this.oldSeriePoints={},this.animations={},this},setAxis:function(a){return a&&(void 0!=a.opt.min&&(this.datas[a.name].min=a.opt.min),void 0!=a.opt.max&&(this.datas[a.name].max=a.opt.max)),this},addSeries:function(a){this.series.push(a);var b;for(b in a.data){var c=a.data[b],d=this.datas[b];if(d)d.vlist.push(c),d.min=Math.min(d.min,c),d.max=Math.max(d.max,c);else{var e="__"+b;this.axes.push(e),this[e]=b,this.datas[b]={min:c,max:c,vlist:[c]}}}if(this.labelKey.length<=0)for(b in a.data)this.labelKey.push(b);return this},getSeriesStats:function(){return k.collectSimpleStats(this.series)},render:function(a,b){if(!this.dirty)return this;this.dirty=!1,this.cleanGroup();var c=this.group,f=this.chart.theme;if(this.resetEvents(),!this.series||!this.series.length)return this;var g,h,i,j,k,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this.opt,F=f.axis,G=(a.width-b.l-b.r)/2,H=(a.height-b.t-b.b)/2,I=Math.min(G,H),J=E.font||F.majorTick&&F.majorTick.font||F.tick&&F.tick.font||"normal normal normal 7pt Tahoma",K=E.axisFont||F.tick&&F.tick.titleFont||"normal normal normal 11pt Tahoma",L=E.axisTickFontColor||F.majorTick&&F.majorTick.fontColor||F.tick&&F.tick.fontColor||"silver",M=E.axisFontColor||F.tick&&F.tick.titleFontColor||"black",N=E.axisColor||F.tick&&F.tick.axisColor||"silver",O=E.spiderColor||F.tick&&F.tick.spiderColor||"silver",P=E.axisWidth||F.stroke&&F.stroke.width||2,Q=E.spiderWidth||F.stroke&&F.stroke.width||2,R=E.seriesWidth||F.stroke&&F.stroke.width||2,S=m.normalizedLength(m.splitFontString(K).size),T=n._degToRad(E.startAngle),U=T,V=E.spiderOrigin,W=E.divisions>=3?E.divisions:3,X=E.markerSize,Y=E.spiderType,Z=E.animationType,$=E.labelOffset<-10?E.labelOffset:-10,_=.2;E.labels&&(g=d.map(this.series,function(a){return a.name},this),h=p.foldl1(p.map(g,function(a){var b=f.series.font;return m._base._getTextBox(a,{font:b}).w},this),"Math.max(a, b)")/2,I=Math.min(G-2*h,H-S)+$,i=I-$),"radius"in E&&(I=E.radius,i=I-$),I/=1+_;var aa={cx:b.l+G,cy:b.t+H,r:I};for(s=this.series.length-1;s>=0;s--)if(y=this.series[s],this.dirty||y.dirty){if(y.cleanGroup(),null!==(z=y.data)&&(v=this._getObjectLength(z),(!j||j.length<=0)&&(j=[],k=[],r=[],this._buildPoints(j,v,aa,I,U,!0,a),this._buildPoints(k,v,aa,I*V,U,!0,a),this._buildPoints(r,v,aa,i,U,!1,a),W>2)))for(o=[],q=[],t=0;t<W-2;t++)o[t]=[],this._buildPoints(o[t],v,aa,I*(V+(1-V)*(t+1)/(W-1)),U,!0,a),q[t]=I*(V+(1-V)*(t+1)/(W-1))}else f.skip();var ba=c.createGroup(),ca={color:N,width:P},da={color:O,width:Q};for(t=j.length-1;t>=0;--t){u=j[t];var ea={x:u.x+(u.x-aa.cx)*_,y:u.y+(u.y-aa.cy)*_},fa={x:u.x+(u.x-aa.cx)*_/2,y:u.y+(u.y-aa.cy)*_/2};ba.createLine({x1:aa.cx,y1:aa.cy,x2:ea.x,y2:ea.y}).setStroke(ca),this._drawArrow(ba,ea,fa,ca)}var ga=c.createGroup();for(t=r.length-1;t>=0;--t){u=r[t],w=m._base._getTextBox(this.labelKey[t],{font:K}).w||0,x=this.opt.htmlLabels&&"vml"!=m.renderer?"html":"gfx";var ha=l.createText[x](this.chart,ga,e.isBodyLtr()||"html"!=x?u.x:u.x+w-a.width,u.y,"middle",this.labelKey[t],K,M);this.opt.htmlLabels&&this.htmlElements.push(ha)}var ia=c.createGroup();if("polygon"==Y){if(ia.createPolyline(j).setStroke(da),ia.createPolyline(k).setStroke(da),o.length>0)for(t=o.length-1;t>=0;--t)ia.createPolyline(o[t]).setStroke(da)}else if(ia.createCircle({cx:aa.cx,cy:aa.cy,r:I}).setStroke(da),ia.createCircle({cx:aa.cx,cy:aa.cy,r:I*V}).setStroke(da),q.length>0)for(t=q.length-1;t>=0;--t)ia.createCircle({cx:aa.cx,cy:aa.cy,r:q[t]}).setStroke(da);v=this._getObjectLength(this.datas);var ja=c.createGroup(),ka=0;for(var la in this.datas){for(A=this.datas[la],B=A.min,C=A.max,D=C-B,ta=U+2*Math.PI*ka/v,s=0;s<W;s++){var ma=B+D*s/(W-1);u=this._getCoordinate(aa,I*(V+(1-V)*s/(W-1)),ta,a),ma=this._getLabel(ma),w=m._base._getTextBox(ma,{font:J}).w||0,x=this.opt.htmlLabels&&"vml"!=m.renderer?"html":"gfx",this.opt.htmlLabels&&this.htmlElements.push(l.createText[x](this.chart,ja,e.isBodyLtr()||"html"!=x?u.x:u.x+w-a.width,u.y,"start",ma,J,L))}ka++}for(this.chart.seriesShapes={},s=this.series.length-1;s>=0;s--)if(y=this.series[s],null!==(z=y.data)){var na=f.next("spider",[E,y]),oa=m.normalizeColor(na.series.fill),pa={color:na.series.fill,width:R};if(oa.a=E.seriesFillAlpha,y.dyn={fill:oa,stroke:pa},y.hidden)continue;var qa=[],ra=[];ka=0;for(la in z){A=this.datas[la],B=A.min,C=A.max,D=C-B;var sa=z[la],ta=U+2*Math.PI*ka/v;u=this._getCoordinate(aa,I*(V+(1-V)*(sa-B)/D),ta,a),qa.push(u),ra.push({sname:y.name,key:la,data:sa}),ka++}qa[qa.length]=qa[0],ra[ra.length]=ra[0];var ua=this._getBoundary(qa),va=y.group,wa=this.oldSeriePoints[y.name],xa=this._createSeriesEntry(va,wa||k,qa,oa,pa,I,V,X,Z);this.chart.seriesShapes[y.name]=xa,this.oldSeriePoints[y.name]=qa;var ya={element:"spider_poly",index:s,id:"spider_poly_"+y.name,run:y,plot:this,shape:xa.poly,parent:va,brect:ua,cx:aa.cx,cy:aa.cy,cr:I,f:oa,s:c};this._connectEvents(ya);var za={element:"spider_plot",index:s,id:"spider_plot_"+y.name,run:y,plot:this,shape:y.group};this._connectEvents(za),d.forEach(xa.circles,function(a,b){var d={element:"spider_circle",index:b,id:"spider_circle_"+y.name+b,run:y,plot:this,shape:a,parent:va,tdata:ra[b],cx:qa[b].x,cy:qa[b].y,f:oa,s:c};this._connectEvents(d)},this)}return this},_createSeriesEntry:function(b,e,h,i,j,k,l,m,n){for(var o=this.animate?e:h,p=b.createPolyline(o).setFill(i).setStroke(j),q=[],r=0;r<o.length;r++){var s=o[r],t=m,u=b.createCircle({cx:s.x,cy:s.y,r:t}).setFill(i).setStroke(j);q.push(u)}if(this.animate){var v=d.map(h,function(b,d){var g=e[d],h=new f.Animation(a.delegate({duration:1e3,easing:n,curve:[g.y,b.y]},this.animate)),i=p,j=q[d];return c.connect(h,"onAnimate",function(a){var b=i.getShape();b.points[d].y=a,i.setShape(b);var c=j.getShape();c.cy=a,j.setShape(c)}),h},this),w=d.map(h,function(b,d){var g=e[d],h=new f.Animation(a.delegate({duration:1e3,easing:n,curve:[g.x,b.x]},this.animate)),i=p,j=q[d];return c.connect(h,"onAnimate",function(a){var b=i.getShape();b.points[d].x=a,i.setShape(b);var c=j.getShape();c.cx=a,j.setShape(c)}),h},this);g.combine(v.concat(w)).play()}return{group:b,poly:p,circles:q}},plotEvent:function(a){"spider_plot"==a.element&&("onmouseover"!=a.type||h("ie")||a.shape.moveToFront())},tooltipFunc:function(a){return"spider_circle"==a.element?a.tdata.sname+"<br/>"+a.tdata.key+"<br/>"+a.tdata.data:null},_getBoundary:function(a){for(var b=a[0].x,c=a[0].x,d=a[0].y,e=a[0].y,f=0;f<a.length;f++){var g=a[f];b=Math.max(g.x,b),d=Math.max(g.y,d),c=Math.min(g.x,c),e=Math.min(g.y,e)}return{x:c,y:e,width:b-c,height:d-e}},_drawArrow:function(a,b,c,d){var e=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),f=(c.y-b.y)/e,g=(c.x-b.x)/e,h={x:c.x+e/3*-f,y:c.y+e/3*g},i={x:c.x+e/3*f,y:c.y+e/3*-g};a.createPolyline([b,h,i]).setFill(d.color).setStroke(d)},_buildPoints:function(a,b,c,d,e,f,g){for(var h=0;h<b;h++){var i=e+2*Math.PI*h/b;a.push(this._getCoordinate(c,d,i,g))}f&&a.push(this._getCoordinate(c,d,e+2*Math.PI,g))},_getCoordinate:function(a,b,c,d){var e=a.cx+b*Math.cos(c);return h("dojo-bidi")&&this.chart.isRightToLeft()&&d&&(e=d.width-e),{x:e,y:a.cy+b*Math.sin(c)}},_getObjectLength:function(b){var c=0;if(a.isObject(b))for(var d in b)c++;return c},_getLabel:function(a){return k.getLabel(a,this.opt.fixed,this.opt.precision)}})})},"dojox/charting/action2d/Highlight":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/Color","dojo/_base/connect","dojox/color/_base","./PlotAction","dojo/fx/easing","dojox/gfx/fx"],function(a,b,c,d,e,f,g,h){var i=100,j=75,k=50,l=function(a){return function(){return a}},m=function(a){var b=new e.Color(a),c=b.toHsl();0==c.s?c.l=c.l<50?100:0:(c.s=i,c.l<k?c.l=j:c.l>j?c.l=k:c.l=c.l-k>j-c.l?k:j);var d=e.fromHsl(c);return d.a=b.a,d},n=function(a){var b=m(a);return b.a=.7,b};return b("dojox.charting.action2d.Highlight",f,{defaultParams:{duration:400,easing:g.backOut},optionalParams:{highlight:"red"},constructor:function(b,c,d){var e=d&&d.highlight;this.colorFunc=e?a.isFunction(e)?e:l(e):m,this.connect()},process:function(a){if(a.shape&&a.type in this.overOutEvents&&"spider_circle"!=a.element&&"spider_plot"!=a.element){"spider_poly"==a.element&&this.colorFunc==m&&(this.colorFunc=n);var b,e=a.run.name,f=a.index;if(e in this.anim?b=this.anim[e][f]:this.anim[e]={},b)b.action.stop(!0);else{var g=a.shape.getFill();if(!(g&&g instanceof c))return;this.anim[e][f]=b={start:g,end:this.colorFunc(g)}}var i=b.start,j=b.end;if("onmouseout"==a.type){var k=i;i=j,j=k}b.action=h.animateFill({shape:a.shape,duration:this.duration,easing:this.easing,color:{start:i,end:j}}),"onmouseout"==a.type&&d.connect(b.action,"onEnd",this,function(){this.anim[e]&&delete this.anim[e][f]}),b.action.play()}}})})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional"],function(a,b,c,d,e){var f=d.backOut;return b("dojox.charting.action2d.PlotAction",c,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(a,b,c){this.anim={},c||(c={}),this.duration=c.duration?c.duration:400,this.easing=c.easing?c.easing:f},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(a.disconnect(this.handle),this.handle=null)},reset:function(){},destroy:function(){this.inherited(arguments),e.forIn(this.anim,function(a){e.forIn(a,function(a){a.action.stop(!0)})}),this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(a,b,c){return b("dojox.charting.action2d.Base",c,{constructor:function(b,c){this.chart=b,this.plot=c?a.isString(c)?this.chart.getPlot(c):c:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},"dojox/charting/action2d/Magnify":function(){define(["dojo/_base/connect","dojo/_base/declare","./PlotAction","dojox/gfx/matrix","dojox/gfx/fx","dojo/fx","dojo/fx/easing"],function(a,b,c,d,e,f,g){var h=2;return b("dojox.charting.action2d.Magnify",c,{defaultParams:{duration:400,easing:g.backOut,scale:h},optionalParams:{},constructor:function(a,b,c){this.scale=c&&"number"==typeof c.scale?c.scale:h,this.connect()},process:function(b){if(b.shape&&b.type in this.overOutEvents&&"cx"in b&&"cy"in b&&"spider_plot"!=b.element&&"spider_poly"!=b.element){var c,g,h,i=b.run.name,j=b.index,k=[];i in this.anim?c=this.anim[i][j]:this.anim[i]={},c?c.action.stop(!0):this.anim[i][j]=c={},"onmouseover"==b.type?(g=d.identity,h=this.scale):(g=d.scaleAt(this.scale,b.cx,b.cy),h=1/this.scale);var l={shape:b.shape,duration:this.duration,easing:this.easing,transform:[{name:"scaleAt",start:[1,b.cx,b.cy],end:[h,b.cx,b.cy]},g]};if(b.shape&&k.push(e.animateTransform(l)),b.outline&&(l.shape=b.outline,k.push(e.animateTransform(l))),b.shadow&&(l.shape=b.shadow,k.push(e.animateTransform(l))),!k.length)return void delete this.anim[i][j];c.action=f.combine(k),"onmouseout"==b.type&&a.connect(c.action,"onEnd",this,function(){this.anim[i]&&delete this.anim[i][j]}),c.action.play()}}})})},"dojox/charting/action2d/MoveSlice":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/array","./PlotAction","dojo/fx/easing","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(a,b,c,d,e,f,g,h){var i=1.05,j=7;return b("dojox.charting.action2d.MoveSlice",d,{defaultParams:{duration:400,easing:e.backOut,scale:i,shift:j},optionalParams:{},constructor:function(a,b,c){c||(c={}),this.scale="number"==typeof c.scale?c.scale:i,this.shift="number"==typeof c.shift?c.shift:j,this.connect()},process:function(b){if(b.shape&&"slice"==b.element&&b.type in this.overOutEvents){if(!this.angles){var d=f._degToRad(b.plot.opt.startAngle);"number"==typeof b.run.data[0]?this.angles=h.map(h.scanl(b.run.data,"+",0),"* 2 * Math.PI / this",h.foldl(b.run.data,"+",0)):this.angles=h.map(h.scanl(b.run.data,"a + b.y",0),"* 2 * Math.PI / this",h.foldl(b.run.data,"a + b.y",0)),this.angles=c.map(this.angles,function(a){return a+d})}var e,i,j,k,l,m=b.index,n=(this.angles[m]+this.angles[m+1])/2,o=f.rotateAt(-n,b.cx,b.cy),p=f.rotateAt(n,b.cx,b.cy);e=this.anim[m],e?e.action.stop(!0):this.anim[m]=e={},"onmouseover"==b.type?(k=0,l=this.shift,i=1,j=this.scale):(k=this.shift,l=0,i=this.scale,j=1),e.action=g.animateTransform({shape:b.shape,duration:this.duration,easing:this.easing,transform:[p,{name:"translate",start:[k,0],end:[l,0]},{name:"scaleAt",start:[i,b.cx,b.cy],end:[j,b.cx,b.cy]},o]}),"onmouseout"==b.type&&a.connect(e.action,"onEnd",this,function(){delete this.anim[m]}),e.action.play()}},reset:function(){delete this.angles}})})},"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(a,b,c){var d={};b.mixin(c,{scanl:function(e,f,g,h){"string"==typeof e&&(e=e.split("")),h=h||a.global,f=c.lambda(f);var i,j,k;if(b.isArray(e))for(i=new Array((j=e.length)+1),i[0]=g,k=0;k<j;g=f.call(h,g,e[k],k,e),i[++k]=g);else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(i=[g],k=0;e.hasNext();i.push(g=f.call(h,g,e.next(),k++,e)));else{i=[g];for(k in e)k in d||i.push(g=f.call(h,g,e[k],k,e))}return i},scanl1:function(e,f,g){"string"==typeof e&&(e=e.split("")),g=g||a.global,f=c.lambda(f);var h,i,j,k=!0;if(b.isArray(e)){h=new Array(i=e.length),h[0]=j=e[0];for(var l=1;l<i;h[l]=j=f.call(g,j,e[l],l,e),++l);}else if("function"==typeof e.hasNext&&"function"==typeof e.next){if(e.hasNext())for(h=[j=e.next()],l=1;e.hasNext();h.push(j=f.call(g,j,e.next(),l++,e)));}else for(l in e)l in d||(k?(h=[j=e[l]],k=!1):h.push(j=f.call(g,j,e[l],l,e)));return h},scanr:function(b,d,e,f){"string"==typeof b&&(b=b.split("")),f=f||a.global,d=c.lambda(d);var g=b.length,h=new Array(g+1),i=g;for(h[g]=e;i>0;--i,e=d.call(f,e,b[i],i,b),h[i]=e);return h},scanr1:function(b,d,e){"string"==typeof b&&(b=b.split("")),e=e||a.global,d=c.lambda(d);var f=b.length,g=new Array(f),h=b[f-1],i=f-1;for(g[i]=h;i>0;--i,h=d.call(e,h,b[i],i,b),g[i]=h);return g}})})},"dojox/charting/action2d/Shake":function(){define(["dojo/_base/connect","dojo/_base/declare","./PlotAction","dojo/fx","dojo/fx/easing","dojox/gfx/matrix","dojox/gfx/fx"],function(a,b,c,d,e,f,g){var h=3;return b("dojox.charting.action2d.Shake",c,{defaultParams:{duration:400,easing:e.backOut,shiftX:h,shiftY:h},optionalParams:{},constructor:function(a,b,c){c||(c={}),this.shiftX="number"==typeof c.shiftX?c.shiftX:h,this.shiftY="number"==typeof c.shiftY?c.shiftY:h,this.connect()},process:function(b){if(b.shape&&b.type in this.overOutEvents){var c,e=b.run.name,h=b.index,i=[];e in this.anim?c=this.anim[e][h]:this.anim[e]={},c?c.action.stop(!0):this.anim[e][h]=c={};var j={shape:b.shape,duration:this.duration,easing:this.easing,transform:[{name:"translate",start:[this.shiftX,this.shiftY],end:[0,0]},f.identity]};if(b.shape&&i.push(g.animateTransform(j)),b.oultine&&(j.shape=b.outline,i.push(g.animateTransform(j))),b.shadow&&(j.shape=b.shadow,i.push(g.animateTransform(j))),!i.length)return void delete this.anim[e][h];c.action=d.combine(i),"onmouseout"==b.type&&a.connect(c.action,"onEnd",this,function(){this.anim[e]&&delete this.anim[e][h]}),c.action.play()}}})})},"dojox/charting/action2d/Tooltip":function(){define(["dijit/Tooltip","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/connect","dojo/dom-style","./PlotAction","dojox/gfx/matrix","dojo/has","dojo/has!dojo-bidi?../bidi/action2d/Tooltip","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(a,b){var c=a.run&&a.run.data&&a.run.data[a.index];return c&&"number"!=typeof c&&(c.tooltip||c.text)?c.tooltip||c.text:b.tooltipFunc?b.tooltipFunc(a):a.y},m=Math.PI/4,n=Math.PI/2,o=c(i("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",g,{defaultParams:{text:l,mouseOver:!0},optionalParams:{},constructor:function(a,b,c){this.text=c&&c.text?c.text:l,this.mouseOver=!c||void 0==c.mouseOver||c.mouseOver,this.connect()},process:function(c){if("onplotreset"===c.type||"onmouseout"===c.type)return a.hide(this.aroundRect),this.aroundRect=null,void("onplotreset"===c.type&&delete this.angles);if(!(!c.shape||this.mouseOver&&"onmouseover"!==c.type||!this.mouseOver&&"onclick"!==c.type)){var f={type:"rect"},g=["after-centered","before-centered"];switch(c.element){case"marker":f.x=c.cx,f.y=c.cy,f.w=f.h=1;break;case"circle":f.x=c.cx-c.cr,f.y=c.cy-c.cr,f.w=f.h=2*c.cr;break;case"spider_circle":f.x=c.cx,f.y=c.cy,f.w=f.h=1;break;case"spider_plot":return;case"column":g=["above-centered","below-centered"];case"bar":f=b.clone(c.shape.getShape()),f.w=f.width,f.h=f.height;break;case"candlestick":f.x=c.x,f.y=c.y,f.w=c.width,f.h=c.height;break;default:if(!this.angles){var j="number"==typeof c.run.data[0]?k.map(c.run.data,"x ? Math.max(x, 0) : 0"):k.map(c.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=k.map(k.scanl(j,"+",0),"* 2 * Math.PI / this",k.foldl(j,"+",0))}var l=h._degToRad(c.plot.opt.startAngle),o=(this.angles[c.index]+this.angles[c.index+1])/2+l;f.x=c.cx+c.cr*Math.cos(o),f.y=c.cy+c.cr*Math.sin(o),f.w=f.h=1,l&&(o<0||o>2*Math.PI)&&(o=Math.abs(2*Math.PI-Math.abs(o))),o<m||(o<n+m?g=["below-centered","above-centered"]:o<Math.PI+m?g=["before-centered","after-centered"]:o<2*Math.PI-m&&(g=["above-centered","below-centered"]))}i("dojo-bidi")&&this._recheckPosition(c,f,g);var p=this.chart.getCoords();f.x+=p.x,f.y+=p.y,f.x=Math.round(f.x),f.y=Math.round(f.y),f.w=Math.ceil(f.w),f.h=Math.ceil(f.h),this.aroundRect=f;var q=this.text(c,this.plot);q&&a.show(this._format(q),this.aroundRect,g),this.mouseOver||(this._handle=e.connect(d.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(a,b,c){},_format:function(a){return a}});return i("dojo-bidi")?c("dojox.charting.action2d.Tooltip",[o,j]):o})},"dojox/charting/widget/Legend":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojox/gfx","dojo/_base/array","dojo/has","dojo/has!dojo-bidi?../bidi/widget/Legend","dojox/lang/functional","dojo/dom","dojo/dom-construct","dojo/dom-class","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k){var l=a(e("dojo-bidi")?"dojox.charting.widget.NonBidiLegend":"dojox.charting.widget.Legend",b,{chartRef:"",horizontal:!0,swatchSize:18,legendBody:null,postCreate:function(){!this.chart&&this.chartRef&&(this.chart=k.byId(this.chartRef)||k.byNode(h.byId(this.chartRef)),this.chart),this.chart=this.chart.chart||this.chart,this.refresh()},buildRendering:function(){this.domNode=i.create("table",{role:"group","aria-label":"chart legend",class:"dojoxLegendNode"}),this.legendBody=i.create("tbody",null,this.domNode),this.inherited(arguments)},destroy:function(){this._surfaces&&d.forEach(this._surfaces,function(a){a.destroy()}),this.inherited(arguments)},refresh:function(){for(this._surfaces&&d.forEach(this._surfaces,function(a){a.destroy()}),this._surfaces=[];this.legendBody.lastChild;)i.destroy(this.legendBody.lastChild);this.horizontal&&(j.add(this.domNode,"dojoxLegendHorizontal"),this._tr=i.create("tr",null,this.legendBody),this._inrow=0);var a=this.series||this.chart.series;if(0!=a.length)if("dojox.charting.plot2d.Pie"==a[0].chart.stack[0].declaredClass){var b=a[0].chart.stack[0];if("number"==typeof b.run.data[0]){var c=g.map(b.run.data,"Math.max(x, 0)"),e=g.map(c,"/this",g.foldl(c,"+",0));d.forEach(e,function(a,c){this._addLabel(b.dyn[c],b._getLabel(100*a)+"%")},this)}else d.forEach(b.run.data,function(a,c){this._addLabel(b.dyn[c],a.legend||a.text||a.y)},this)}else d.forEach(a,function(a){this._addLabel(a.dyn,a.legend||a.name)},this)},_addLabel:function(a,b){var c=i.create("td"),d=i.create("div",null,c),f=i.create("label",null,c),g=i.create("div",{style:{width:this.swatchSize+"px",height:this.swatchSize+"px",float:"left"}},d);if(j.add(d,"dojoxLegendIcon dijitInline"),j.add(f,"dojoxLegendText"),this._tr)this._tr.appendChild(c),++this._inrow===this.horizontal&&(this._tr=i.create("tr",null,this.legendBody),this._inrow=0);else{i.create("tr",null,this.legendBody).appendChild(c)}this._makeIcon(g,a),f.innerHTML=String(b),e("dojo-bidi")&&(f.dir=this.getTextDir(b,f.dir))},_makeIcon:function(a,b){var d={h:this.swatchSize,w:this.swatchSize},e=c.createSurface(a,d.w,d.h);if(this._surfaces.push(e),b.fill)e.createRect({x:2,y:2,width:d.w-4,height:d.h-4}).setFill(b.fill).setStroke(b.stroke);else if(b.stroke||b.marker){var f={x1:0,y1:d.h/2,x2:d.w,y2:d.h/2};if(b.stroke&&e.createLine(f).setStroke(b.stroke),b.marker){var g={x:d.w/2,y:d.h/2};e.createPath({path:"M"+g.x+" "+g.y+" "+b.marker}).setFill(b.markerFill).setStroke(b.markerStroke)}}else e.createRect({x:2,y:2,width:d.w-4,height:d.h-4}).setStroke("black"),e.createLine({x1:2,y1:2,x2:d.w-2,y2:d.h-2}).setStroke("black"),e.createLine({x1:2,y1:d.h-2,x2:d.w-2,y2:2}).setStroke("black")}});return e("dojo-bidi")?a("dojox.charting.widget.Legend",[l,f]):l})},"dojox/data/dom":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox/xml/parser"],function(a,b,c){dojo.deprecated("dojox.data.dom","Use dojox.xml.parser instead.","2.0");var d=b.getObject("dojox.data.dom",!0);return d.createDocument=function(a,b){dojo.deprecated("dojox.data.dom.createDocument()","Use dojox.xml.parser.parse() instead.","2.0");try{return c.parse(a,b)}catch(a){return null}},d.textContent=function(a,b){return dojo.deprecated("dojox.data.dom.textContent()","Use dojox.xml.parser.textContent() instead.","2.0"),arguments.length>1?c.textContent(a,b):c.textContent(a)},d.replaceChildren=function(a,b){dojo.deprecated("dojox.data.dom.replaceChildren()","Use dojox.xml.parser.replaceChildren() instead.","2.0"),c.replaceChildren(a,b)},d.removeChildren=function(a){return dojo.deprecated("dojox.data.dom.removeChildren()","Use dojox.xml.parser.removeChildren() instead.","2.0"),dojox.xml.parser.removeChildren(a)},d.innerXML=function(a){return dojo.deprecated("dojox.data.dom.innerXML()","Use dojox.xml.parser.innerXML() instead.","2.0"),c.innerXML(a)},d})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(a){return a.getObject("xml.parser",!0,dojox),dojox.xml.parser.parse=function(b,c){var d,e=a.doc;if(c=c||"text/xml",b&&a.trim(b)&&"DOMParser"in a.global){var f=new DOMParser;d=f.parseFromString(b,c);var g=d.documentElement,h="http://www.mozilla.org/newlayout/xml/parsererror.xml";if("parsererror"==g.nodeName&&g.namespaceURI==h){var i=g.getElementsByTagNameNS(h,"sourcetext")[0];throw i&&(i=i.firstChild.data),new Error("Error parsing text "+g.firstChild.data+" \n"+i)}return d}if("ActiveXObject"in a.global){var j=function(a){return"MSXML"+a+".DOMDocument"
},k=["Microsoft.XMLDOM",j(6),j(4),j(3),j(2)];if(a.some(k,function(a){try{d=new ActiveXObject(a)}catch(a){return!1}return!0}),b&&d){d.async=!1,d.loadXML(b);var l=d.parseError;if(0!==l.errorCode)throw new Error("Line: "+l.line+"\nCol: "+l.linepos+"\nReason: "+l.reason+"\nError Code: "+l.errorCode+"\nSource: "+l.srcText)}if(d)return d}else if(e.implementation&&e.implementation.createDocument){if(b&&a.trim(b)&&e.createElement){var m=e.createElement("xml");m.innerHTML=b;var n=e.implementation.createDocument("foo","",null);return a.forEach(m.childNodes,function(a){n.importNode(a,!0)}),n}return e.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(b,c){if(arguments.length>1){var d=b.ownerDocument||a.doc;return dojox.xml.parser.replaceChildren(b,d.createTextNode(c)),c}if(void 0!==b.textContent)return b.textContent;var e="";return b&&a.forEach(b.childNodes,function(a){switch(a.nodeType){case 1:case 5:e+=dojox.xml.parser.textContent(a);break;case 3:case 2:case 4:e+=a.nodeValue}}),e},dojox.xml.parser.replaceChildren=function(b,c){var d=[];a.isIE&&a.forEach(b.childNodes,function(a){d.push(a)}),dojox.xml.parser.removeChildren(b),a.forEach(d,a.destroy),a.isArray(c)?a.forEach(c,function(a){b.appendChild(a)}):b.appendChild(c)},dojox.xml.parser.removeChildren=function(a){for(var b=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return b},dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null},dojox.xml.parser})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(a,b){return a.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(b){a.mixin(this,b)},getValue:function(b,c,d){if(this._assertIsItem(b),!a.isString(c))throw new Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(b,c)&&d?d:b.i[c]},getValues:function(a,b){this._assertIsItem(a);var c=[];return this.hasAttribute(a,b)&&c.push(a.i[b]),c},getAttributes:function(a){this._assertIsItem(a);var b=[];for(var c in a.i)b.push(c);return b},hasAttribute:function(a,b){return this.isItem(a)&&void 0!==a.i[b]},containsValue:function(a,b,c){for(var d=this.getValues(a,b),e=d.length,f=0;f<e;f++)if(d[f]==c)return!0;return!1},isItem:function(a){return!!a&&(void 0!==a.r&&a.r==this)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(b){b=b||{},b.store||(b.store=this);var c=this,d=function(b,c){if(c.onError){var d=c.scope||a.global;c.onError.call(d,b,c)}},e=function(b,d,e){var f=d.abort||null,g=!1,h=d.start?d.start:0;0==c.doClientPaging&&(h=0);var i=d.count?h+d.count:b.length;d.abort=function(){g=!0,f&&f.call(d)};var j=d.scope||a.global;if(d.store||(d.store=c),d.onBegin&&d.onBegin.call(j,e,d),d.sort&&c.doClientSorting&&b.sort(a.data.util.sorter.createSortFunction(d.sort,c)),d.onItem)for(var k=h;k<b.length&&k<i;++k){var l=b[k];g||d.onItem.call(j,l,d)}if(d.onComplete&&!g){var m=null;d.onItem||(m=b.slice(h,i)),d.onComplete.call(j,m,d)}};return this._fetchItems(b,e,d),b},getFeatures:function(){return this._features},close:function(a){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(b,c,d,e){b=this._filterResponse(b),b.label&&(this._labelAttr=b.label);var f=b.numRows||-1;this._items=[],a.forEach(b.items,function(a){this._items.push({i:a,r:this})},this);var g=b.identifier;if(this._itemsByIdentity={},g){this._identifier=g;var h;for(h=0;h<this._items.length;++h){var i=this._items[h].i,j=i[g];if(this._itemsByIdentity[j])throw new Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+g+"].  Value collided: ["+j+"]");this._itemsByIdentity[j]=i}}else for(this._identifier=Number,h=0;h<this._items.length;++h)this._items[h].n=h;f=this._numRows=-1===f?this._items.length:f,d(this._items,c,f),this._numRows=f},_fetchItems:function(b,c,d){var e=b.serverQuery||b.query||{};if(this.doClientPaging||(e.start=b.start||0,b.count&&(e.count=b.count)),!this.doClientSorting&&b.sort){var f=[];a.forEach(b.sort,function(a){a&&a.attribute&&f.push((a.descending?"-":"")+a.attribute)}),e.sort=f.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&a.toJson(e)==a.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,c(this._items,b,this._numRows);else{var g="post"==this.requestMethod.toLowerCase()?a.xhrPost:a.xhrGet,h=g({url:this.url,handleAs:"json-comment-optional",content:e,failOk:!0});b.abort=function(){h.cancel()},h.addCallback(a.hitch(this,function(a){this._xhrFetchHandler(a,b,c,d)})),h.addErrback(function(a){d(a,b)}),this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2),this._lastServerQuery=a.mixin({},e)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw new Error(this._className+": Invalid item argument.")},_assertIsAttribute:function(a){if("string"!=typeof a)throw new Error(this._className+": Invalid attribute argument ('"+a+"').")},fetchItemByIdentity:function(b){if(this._itemsByIdentity){var c=this._itemsByIdentity[b.identity];if(void 0!==c){if(b.onItem){var d=b.scope?b.scope:a.global;b.onItem.call(d,{i:c,r:this})}return}}var e=function(c,d){var e=b.scope?b.scope:a.global;b.onError&&b.onError.call(e,c)},f=function(c,d){var e=b.scope?b.scope:a.global;try{var f=null;c&&1==c.length&&(f=c[0]),b.onItem&&b.onItem.call(e,f)}catch(a){b.onError&&b.onError.call(e,a)}},g={serverQuery:{id:b.identity}};this._fetchItems(g,f,e)},getIdentity:function(a){return this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(a){return[this._identifier]}})})},"dojox/form/Uploader":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/window","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","dojo/dom-attr","dojo/dom-construct","dojo/dom-form","dijit","dijit/form/Button","./uploader/_Base","./uploader/_HTML5","./uploader/_IFrame","./uploader/_Flash","dojo/i18n!./nls/Uploader","dojo/text!./resources/Uploader.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return b("dojox.form.Uploader",[o,n,p,q,r],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:s.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:t,baseClass:"dijitUploader "+n.prototype.baseClass,postMixInProperties:function(){this._inputs=[],this._cons=[],this.force=this.force.toLowerCase(),this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe",this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),g.set(this.domNode,{overflow:"hidden",position:"relative"}),this._buildDisplay(),j.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=k.create("input",{class:"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b,c=0,d=(a.length,[]);b=a[c++];)b&&b.name&&d.push(b.name);this.displayInput.value=d.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},upload:function(a){a=a||{},a.uploadType=this.uploadType,this.inherited(arguments)},submit:function(a){a=a&&a.tagName?a:this.getForm();var b=l.toObject(a);b.uploadType=this.uploadType,this.upload(b)},reset:function(){delete this._files,this._disconnectButton(),d.forEach(this._inputs,k.destroy),this._inputs=[],this._nameIndex=0,this._createInput()},getFileList:function(){var a=[];return this.supports("multiple")?d.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):d.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this),a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),g.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:g.get(a,"width"),h:g.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15))),this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(g.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=k.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first"),this.supports("multiple")&&this.multiple&&j.set(this.inputNode,"multiple",!0),this._inputs.push(this.inputNode),g.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0}),this._connectButton()},_connectButton:function(){this._cons.push(e.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files,this.onChange(this.getFileList(a)),!this.supports("multiple")&&this.multiple&&this._createInput()})),this.tabIndex>-1&&(this.inputNode.tabIndex=this.tabIndex,this._cons.push(e.connect(this.inputNode,"focus",this,function(){h.add(this.domNode,this.focusedClass)})),this._cons.push(e.connect(this.inputNode,"blur",this,function(){h.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){d.forEach(this._cons,e.disconnect),this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define(["dojo/dom-form","dojo/dom-style","dojo/dom-construct","dojo/dom-attr","dojo/has","dojo/_base/declare","dojo/_base/event","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin"],function(a,b,c,d,e,f,g,h,i,j){return e.add("FormData",function(){return!!window.FormData}),e.add("xhr-sendAsBinary",function(){var a=window.XMLHttpRequest&&new window.XMLHttpRequest;return a&&!!a.sendAsBinary}),e.add("file-multiple",function(){return!!{true:1,false:1}[d.get(document.createElement("input",{type:"file"}),"multiple")]}),f("dojox.form.uploader._Base",[h,i,j],{getForm:function(){if(!this.form)for(var a=this.domNode;a&&a.tagName&&a!==document.body;){if("form"==a.tagName.toLowerCase()){this.form=a;break}a=a.parentNode}return this.form},getUrl:function(){return this.uploadUrl&&(this.url=this.uploadUrl),this.url?this.url:(this.getForm()&&(this.url=this.form.action),this.url)},connectForm:function(){this.url=this.getUrl(),!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(a){g.stop(a),this.submit(this.form)}))},supports:function(a){switch(a){case"multiple":return"flash"!=this.force&&"iframe"!=this.force&&e("file-multiple");case"FormData":return e(a);case"sendAsBinary":return e("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(a){return a.substring(a.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(a){var b=Math.round(a/1024*1e5)/1e5,c=Math.round(a/1048576*1e5)/1e5,d=Math.round(a/1073741824*1e5)/1e5,e=a;return b>1&&(e=b.toFixed(1)+" kb"),c>1&&(e=c.toFixed(1)+" mb"),d>1&&(e=d.toFixed(1)+" gb"),{kb:b,mb:c,gb:d,bytes:a,value:e}}})})},"dojox/form/uploader/_HTML5":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo"],function(a,b,c,d){return a("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments),this.uploadType},postCreate:function(){this.connectForm(),this.inherited(arguments),this.uploadOnSelect&&this.connect(this,"onChange",function(a){this.upload(a[0])})},_drop:function(a){d.stopEvent(a);var b=a.dataTransfer;this._files=b.files,this.onChange(this.getFileList())},upload:function(a){this.onBegin(this.getFileList()),this.uploadWithFormData(a)},addDropTarget:function(a,b){b||(this.connect(a,"dragenter",d.stopEvent),this.connect(a,"dragover",d.stopEvent),this.connect(a,"dragleave",d.stopEvent)),this.connect(a,"drop","_drop")},uploadWithFormData:function(a){if(this.getUrl()){var b=new FormData,d=this._getFileFieldName();if(c.forEach(this._files,function(a,c){b.append(d,a)},this),a){a.uploadType=this.uploadType;for(var e in a)b.append(e,a[e])}this.createXhr().send(b)}},_xhrProgress:function(a){if(a.lengthComputable){var b={bytesLoaded:a.loaded,bytesTotal:a.total,type:a.type,timeStamp:a.timeStamp};"load"==a.type?(b.percent="100%",b.decimal=1):(b.decimal=a.loaded/a.total,b.percent=Math.ceil(a.loaded/a.total*100)+"%"),this.onProgress(b)}},createXhr:function(){var a,c=new XMLHttpRequest;return c.upload.addEventListener("progress",b.hitch(this,"_xhrProgress"),!1),c.addEventListener("load",b.hitch(this,"_xhrProgress"),!1),c.addEventListener("error",b.hitch(this,function(b){this.onError(b),clearInterval(a)}),!1),c.addEventListener("abort",b.hitch(this,function(b){this.onAbort(b),clearInterval(a)}),!1),c.onreadystatechange=b.hitch(this,function(){if(4===c.readyState){clearInterval(a);try{this.onComplete(JSON.parse(c.responseText.replace(/^\{\}&&/,"")))}catch(a){var b="Error parsing server result:";this.onError(b,a)}}}),c.open("POST",this.getUrl()),c.setRequestHeader("Accept","application/json"),a=setInterval(b.hitch(this,function(){try{c.statusText}catch(b){clearInterval(a)}}),250),c}})})},"dojox/form/uploader/_IFrame":function(){define(["dojo/query","dojo/dom-construct","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-form","dojo/request/iframe"],function(a,b,c,d,e,f,g){return c("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments),"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(a){var c,d={},f=(this.getForm(),this.getUrl()),h=this;if(a=a||{},a.uploadType=this.uploadType,c=b.place('<form enctype="multipart/form-data" method="post"></form>',this.domNode),e.forEach(this._inputs,function(a,b){""!==a.value&&(c.appendChild(a),d[a.name]=a.value)},this),a)for(nm in a)void 0===d[nm]&&b.create("input",{name:nm,value:a[nm],type:"hidden"},c);g.post(f,{form:c,handleAs:"json",content:a}).then(function(a){b.destroy(c),a.ERROR||a.error?h.onError(a):h.onComplete(a)},function(a){b.destroy(c),h.onError(a)})}})})},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,c,d){if(l.global[a])return l.global[a];if(l.global.frames[a])return l.global.frames[a];d||(i("config-useXDomain")&&i("config-dojoBlankHtmlUrl"),d=i("config-dojoBlankHtmlUrl")||b.toUrl("dojo/resources/blank.html"));var e=k.place('<iframe id="'+a+'" name="'+a+'" src="'+d+'" onload="'+c+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',l.body());return l.global[a]=e,e}function n(a,b,c){var d=l.global.frames[a.name];d.contentWindow&&(d=d.contentWindow);try{c?d.location.replace(b):d.location=b}catch(a){}}function o(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=l.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(l.doc.frames[b]&&l.doc.frames[b].document)return l.doc.frames[b].document}return null}function p(){return k.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},l.body())}function q(){var a;try{if(v._currentDfd||!v._dfdQueue.length)return;do{a=v._currentDfd=v._dfdQueue.shift()}while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&v._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())return void(v._currentDfd=null);var b,c=a.response,e=c.options,h=a._contentToClean=[],i=j.byId(e.form),m=d.notify,n=e.data||null;if(a._legacy||"POST"!==e.method||i?"GET"===e.method&&i&&c.url.indexOf("?")>-1&&(b=c.url.slice(c.url.indexOf("?")+1),n=f.mixin(g.queryToObject(b),n)):i=a._tmpForm=p(),i){if(!a._legacy){var o=i;do{o=o.parentNode}while(o&&o!==l.doc.documentElement);o||(i.style.position="absolute",i.style.left="-1000px",i.style.top="-1000px",l.body().appendChild(i)),i.name||(i.name=w+"_form")}if(n){var q=function(a,b){k.create("input",{type:"hidden",name:a,value:b},i),h.push(a)};for(var r in n){var s=n[r];if(f.isArray(s)&&s.length>1)for(var t=0;t<s.length;t++)q(r,s[t]);else i[r]?i[r].value=s:q(r,s)}}var u=i.getAttributeNode("action"),x=i.getAttributeNode("method"),y=i.getAttributeNode("target");c.url&&(a._originalAction=u?u.value:null,u?u.value=c.url:i.setAttribute("action",c.url)),a._legacy?x&&x.value||(x?x.value=e.method:i.setAttribute("method",e.method)):(a._originalMethod=x?x.value:null,x?x.value=e.method:i.setAttribute("method",e.method)),a._originalTarget=y?y.value:null,y?y.value=v._iframeName:i.setAttribute("target",v._iframeName),i.target=v._iframeName,m&&m.emit("send",c,a.promise.cancel),v._notifyStart(c),i.submit()}else{var z="";c.options.data&&"string"!=typeof(z=c.options.data)&&(z=g.objectToQuery(z));var A=c.url+(c.url.indexOf("?")>-1?"&":"?")+z;m&&m.emit("send",c,a.promise.cancel),v._notifyStart(c),v.setSrc(v._frame,A,!0)}}catch(b){a.reject(b)}}function r(a){return!this.isFulfilled()}function s(a){return!!this._finished}function t(a,b){if(!b)try{var c=a.options,d=v.doc(v._frame),g=c.handleAs;if("html"!==g){if("xml"===g)if("html"===d.documentElement.tagName.toLowerCase()){h("a",d.documentElement).orphan();var i=d.documentElement.innerText;i=i.replace(/>\s+</g,"><"),a.text=f.trim(i)}else a.data=d;else a.text=d.getElementsByTagName("textarea")[0].value;e(a)}else a.data=d}catch(a){b=a}b?this.reject(b):this._finished?this.resolve(a):this.reject(new Error("Invalid dojo/request/iframe request state"))}function u(a){this._callNext()}function v(a,b,e){var f=d.parseArgs(a,d.deepCreate(y,b),!0);if(a=f.url,b=f.options,"GET"!==b.method&&"POST"!==b.method)throw new Error(b.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,x+"();"));var g=d.deferred(f,null,r,s,t,u);return g._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,v._fireNextRequest())},g._legacy=e,v._dfdQueue.push(g),v._fireNextRequest(),c(g),e?g:g.promise}var w=a.id.replace(/[\/\.\-]/g,"_"),x=w+"_onload";l.global[x]||(l.global[x]=function(){var a=v._currentDfd;if(!a)return void v._fireNextRequest();var b=a.response,c=b.options,d=j.byId(c.form)||a._tmpForm;if(d){for(var e=a._contentToClean,f=0;f<e.length;f++)for(var g=e[f],h=0;h<d.childNodes.length;h++){var i=d.childNodes[h];if(i.name===g){k.destroy(i);break}}a._originalAction&&d.setAttribute("action",a._originalAction),a._originalMethod&&(d.setAttribute("method",a._originalMethod),d.method=a._originalMethod),a._originalTarget&&(d.setAttribute("target",a._originalTarget),d.target=a._originalTarget)}a._tmpForm&&(k.destroy(a._tmpForm),delete a._tmpForm),a._finished=!0});var y={method:"POST"};return v.create=m,v.doc=o,v.setSrc=n,v._iframeName=w+"_IoIframe",v._notifyStart=function(){},v._dfdQueue=[],v._currentDfd=null,v._fireNextRequest=q,d.addCommonMethods(v,["GET","POST"]),v})},"dojox/form/uploader/_Flash":function(){define(["dojo/dom-form","dojo/dom-style","dojo/dom-construct","dojo/dom-attr","dojo/_base/declare","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojox/embed/Flash"],function(a,b,c,d,e,f,g,h,i,j){return e("dojox.form.uploader._Flash",[],{swfPath:f.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,skipServerCheck:!0,serverTimeout:2e3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles"),this.inherited(arguments)},onReady:function(a){},onLoad:function(a){},onFileChange:function(a){},onFileProgress:function(a){},getFlashFileList:function(){return this._files},flashReset:function(){this.flashMovie.reset(),this._files=[],this._fileMap={}},uploadFlash:function(a){this.onBegin(this.getFileList()),a=a||{},a.returnType="F",a.uploadType=this.uploadType,this.flashMovie.doUpload(a)},_change:function(a){this._files=this._files.concat(a),i.forEach(a,function(a){a.bytesLoaded=0,a.bytesTotal=a.size,this._fileMap[a.name+"_"+a.size]=a},this),this.onChange(this._files),this.onFileChange(a)},_complete:function(a){this._getCustomEvent().type="load",this.onComplete(a)},_progress:function(a){this._fileMap[a.name+"_"+a.bytesTotal].bytesLoaded=a.bytesLoaded;var b=this._getCustomEvent();this.onFileProgress(a),this.onProgress(b)},_error:function(a){this.onError(a)},_onFlashBlur:function(a){},_getCustomEvent:function(){var a={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()};for(var b in this._fileMap)a.bytesTotal+=this._fileMap[b].bytesTotal,a.bytesLoaded+=this._fileMap[b].bytesLoaded;return a.decimal=a.bytesLoaded/a.bytesTotal,a.percent=Math.ceil(a.bytesLoaded/a.bytesTotal*100)+"%",a},_connectFlash:function(){this._subs=[],this._cons=[];var a=h.hitch(this,function(a,b){this._subs.push(g.subscribe(this.id+a,this,b))});a("/filesSelected","_change"),a("/filesUploaded","_complete"),a("/filesProgress","_progress"),a("/filesError","_error"),a("/filesCanceled","onCancel"),a("/stageBlur","_onFlashBlur"),this.connect(this.domNode,"focus",function(){this.flashMovie.focus(),this.flashMovie.doFocus()}),this.tabIndex>=0&&d.set(this.domNode,"tabIndex",this.tabIndex)},_createFlashUploader:function(){var a=this.btnSize.w,d=this.btnSize.h;if(!a)return void setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode),this._createFlashUploader()}),200);var e=this.getUrl();if(e&&e.toLowerCase().indexOf("http")<0&&0!=e.indexOf("/")){var f=window.location.href.split("/");f.pop(),f=f.join("/")+"/",e=f+e}this.inputNode=c.create("div",{className:"dojoxFlashNode"},this.domNode,"first"),b.set(this.inputNode,{position:"absolute",top:"-2px",width:a+"px",height:d+"px",opacity:0});var g={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:a,height:d,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:e,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new j(g,this.inputNode),this.flashObject.onError=h.hitch(function(a){}),this.flashObject.onReady=h.hitch(this,function(){this.onReady(this)}),this.flashObject.onLoad=h.hitch(this,function(a){this.flashMovie=a,this.flashReady=!0,this.onLoad(this)}),this._connectFlash()}})})},"dojox/embed/Flash":function(){define(["dojo/_base/lang","dojo/_base/unload","dojo/_base/array","dojo/query","dojo/has","dojo/dom","dojo/on","dojo/window","dojo/string"],function(lang,unload,array,query,has,dom,on,win,stringUtil){function prep(a){return"path"in(a=lang.delegate(_baseKwArgs,a))?("id"in a||(a.id=keyBase+keyCount++),a):null}var fMarkup,fVersion,minimumVersion=9,keyBase="dojox-embed-flash-",keyCount=0,_baseKwArgs={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};has("ie")?(fMarkup=function(a){if(!(a=prep(a)))return null;var b,c=a.path;if(a.vars){var d=[];for(b in a.vars)d.push(encodeURIComponent(b)+"="+encodeURIComponent(a.vars[b]));a.params.FlashVars=d.join("&"),delete a.vars}var e='<object id="'+stringUtil.escape(String(a.id))+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+stringUtil.escape(String(a.width))+'" height="'+stringUtil.escape(String(a.height))+'"'+(a.style?' style="'+stringUtil.escape(String(a.style))+'"':"")+'><param name="movie" value="'+stringUtil.escape(String(c))+'" />';if(a.params)for(b in a.params)e+='<param name="'+stringUtil.escape(b)+'" value="'+stringUtil.escape(String(a.params[b]))+'" />';return e+="</object>",{id:a.id,markup:e}},fVersion=function(){for(var a=10,b=null;!b&&a>7;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(a){}if(b){var c=b.GetVariable("$version").split(" ")[1].split(",");return{major:null!=c[0]?parseInt(c[0]):0,minor:null!=c[1]?parseInt(c[1]):0,rev:null!=c[2]?parseInt(c[2]):0}}return{major:0,minor:0,rev:0}}(),unload.addOnWindowUnload(function(){var a=function(){};query("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(a){}})})):(fMarkup=function(a){if(!(a=prep(a)))return null;var b,c=a.path;if(a.vars){var d=[];for(b in a.vars)d.push(encodeURIComponent(b)+"="+encodeURIComponent(a.vars[b]));a.params.flashVars=d.join("&"),delete a.vars}var e='<embed type="application/x-shockwave-flash" src="'+stringUtil.escape(String(c))+'" id="'+stringUtil.escape(String(a.id))+'" width="'+stringUtil.escape(String(a.width))+'" height="'+stringUtil.escape(String(a.height))+'"'+(a.style?' style="'+stringUtil.escape(String(a.style))+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(a.params)for(b in a.params)e+=" "+stringUtil.escape(b)+'="'+stringUtil.escape(String(a.params[b]))+'"';return e+=" />",{id:a.id,markup:e}},fVersion=function(){var a=navigator.plugins["Shockwave Flash"];if(a&&a.description){var b=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}}return{major:0,minor:0,rev:0}}());var Flash=function(a,b){if(location.href.toLowerCase().indexOf("file://")>-1)throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=fVersion.major,this.minimumVersion=a.minimumVersion||minimumVersion,this.id=null,this.movie=null,this.domNode=null,b&&(b=dom.byId(b)),setTimeout(lang.hitch(this,function(){a.expressInstall||this.available&&this.available>=this.minimumVersion?a&&b?this.init(a,b):this.onError("embed.Flash was not provided with the proper arguments."):this.available?this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion):this.onError("Flash is not installed.")}),100)};return lang.extend(Flash,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){clearInterval(this._poller),delete this._poller,delete this._pollCount,delete this._pollMax,this.onLoad(this.movie)},init:function(a,b){if(this.destroy(),!(b=dom.byId(b||this.domNode)))throw new Error("dojox.embed.Flash: no domNode reference has been passed.");var c=0;this._poller=null,this._pollCount=0,this._pollMax=15,this.pollTime=100,Flash.initialized&&(this.id=Flash.place(a,b),this.domNode=b,setTimeout(lang.hitch(this,function(){this.movie=this.byId(this.id,a.doc),this.onReady(this.movie),this._poller=setInterval(lang.hitch(this,function(){try{c=this.movie.PercentLoaded()}catch(a){}if(100==c)this._onload();else if(0==c&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),new Error("Building SWF failed.")}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(a){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=lang.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0});for(var b in this)a[b]||delete this[b];this._poller?on(this,"Load",this,"_destroy"):this._destroy()}},byId:function(a,b){return b=b||document,b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}}),lang.mixin(Flash,{minSupported:8,available:fVersion.major,supported:fVersion.major>=fVersion.required,minimumRequired:fVersion.required,version:fVersion,initialized:!1,onInitialize:function(){Flash.initialized=!0},__ie_markup__:function(a){return fMarkup(a)},proxy:function(obj,methods){array.forEach(methods instanceof Array?methods:[methods],function(item){this[item]=lang.hitch(this,function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+item+'" returntype="javascript"><arguments>'+array.map(arguments,function(a){return __flash__toXML(a)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},obj)}}),Flash.place=function(a,b){var c=fMarkup(a);return b=dom.byId(b),b||(b=win.doc.createElement("div"),b.id=c.id+"-container",win.body().appendChild(b)),c?(b.innerHTML=c.markup,c.id):null},Flash.onInitialize(),lang.setObject("dojox.embed.Flash",Flash),Flash})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(a,b,c,d,e){var f=c("dojox.gfx.path.Path",e.Shape,{constructor:function(c){this.shape=b.clone(a.defaultPath),this.segments=[],this.tbbox=null,this.absolute=!0,this.last={},this.rawNode=c,this.segmented=!1},setAbsoluteMode:function(a){return this._confirmSegmented(),this.absolute="string"==typeof a?"absolute"==a:a,this},getAbsoluteMode:function(){return this._confirmSegmented(),this.absolute},getBoundingBox:function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var a=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var c=0,d=this.segments.length;c<d;++c)this._updateWithSegment(this.segments[c],b);var e=this.bbox;return this.bbox=a,this.tbbox=e?[{x:e.l,y:e.t},{x:e.r,y:e.t},{x:e.r,y:e.b},{x:e.l,y:e.b}]:null,this.tbbox},getLastPosition:function(){return this._confirmSegmented(),"x"in this.last?this.last:null},_applyTransform:function(){return this.tbbox=null,this.inherited(arguments)},_updateBBox:function(a,b,c){if(c){var e=d.multiplyPoint(c,a,b);a=e.x,b=e.y}this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>b&&(this.bbox.t=b),this.bbox.b<b&&(this.bbox.b=b)):this.bbox={l:a,b:b,r:a,t:b}},_updateWithSegment:function(b,c){var d,e=b.args,f=e.length;switch(b.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(d=0;d<f;d+=2)this._updateBBox(e[d],e[d+1],c);this.last.x=e[f-2],this.last.y=e[f-1],this.absolute=!0;break;case"H":for(d=0;d<f;++d)this._updateBBox(e[d],this.last.y,c);this.last.x=e[f-1],this.absolute=!0;break;case"V":for(d=0;d<f;++d)this._updateBBox(this.last.x,e[d],c);this.last.y=e[f-1],this.absolute=!0;break;case"m":var g=0;"x"in this.last||(this._updateBBox(this.last.x=e[0],this.last.y=e[1],c),g=2)
;for(d=g;d<f;d+=2)this._updateBBox(this.last.x+=e[d],this.last.y+=e[d+1],c);this.absolute=!1;break;case"l":case"t":for(d=0;d<f;d+=2)this._updateBBox(this.last.x+=e[d],this.last.y+=e[d+1],c);this.absolute=!1;break;case"h":for(d=0;d<f;++d)this._updateBBox(this.last.x+=e[d],this.last.y,c);this.absolute=!1;break;case"v":for(d=0;d<f;++d)this._updateBBox(this.last.x,this.last.y+=e[d],c);this.absolute=!1;break;case"c":for(d=0;d<f;d+=6)this._updateBBox(this.last.x+e[d],this.last.y+e[d+1],c),this._updateBBox(this.last.x+e[d+2],this.last.y+e[d+3],c),this._updateBBox(this.last.x+=e[d+4],this.last.y+=e[d+5],c);this.absolute=!1;break;case"s":case"q":for(d=0;d<f;d+=4)this._updateBBox(this.last.x+e[d],this.last.y+e[d+1],c),this._updateBBox(this.last.x+=e[d+2],this.last.y+=e[d+3],c);this.absolute=!1;break;case"A":for(d=0;d<f;d+=7)this._updateBBox(e[d+5],e[d+6],c);this.last.x=e[f-2],this.last.y=e[f-1],this.absolute=!0;break;case"a":for(d=0;d<f;d+=7)this._updateBBox(this.last.x+=e[d+5],this.last.y+=e[d+6],c);this.absolute=!1}var h=[b.action];for(d=0;d<f;++d)h.push(a.formatNumber(e[d],!0));if("string"==typeof this.shape.path)this.shape.path+=h.join("");else for(d=0,f=h.length;d<f;++d)this.shape.path.push(h[d])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(a,b){this.tbbox=null;var c,d=this._validSegments[a.toLowerCase()];"number"==typeof d&&(d?b.length>=d&&(c={action:a,args:b.slice(0,b.length-b.length%d)},this.segments.push(c),this._updateWithSegment(c)):(c={action:a,args:[]},this.segments.push(c),this._updateWithSegment(c)))},_collectArgs:function(a,b){for(var c=0;c<b.length;++c){var d=b[c];"boolean"==typeof d?a.push(d?1:0):"number"==typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}},moveTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"M":"m",a),this},lineTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"L":"l",a),this},hLineTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"H":"h",a),this},vLineTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"V":"v",a),this},curveTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"C":"c",a),this},smoothCurveTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"S":"s",a),this},qCurveTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"Q":"q",a),this},qSmoothCurveTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"T":"t",a),this},arcTo:function(){this._confirmSegmented();var a=[];return this._collectArgs(a,arguments),this._pushSegment(this.absolute?"A":"a",a),this},closePath:function(){return this._confirmSegmented(),this._pushSegment("Z",[]),this},_confirmSegmented:function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[],this._setPath(a),this.shape.path=this.shape.path.join(""),this.segmented=!0}},_setPath:function(c){var d=b.isArray(c)?c:c.match(a.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},d){for(var e="",f=[],g=d.length,h=0;h<g;++h){var i=d[h],j=parseFloat(i);isNaN(j)?(e&&this._pushSegment(e,f),f=[],e=i):f.push(j)}this._pushSegment(e,f)}},setShape:function(b){return this.inherited(arguments,["string"==typeof b?{path:b}:b]),this.segmented=!1,this.segments=[],a.lazyPathSegmentation||this._confirmSegmented(),this},_2PI:2*Math.PI}),g=c("dojox.gfx.path.TextPath",f,{constructor:function(c){"text"in this||(this.text=b.clone(a.defaultTextPath)),"fontStyle"in this||(this.fontStyle=b.clone(a.defaultFont))},getText:function(){return this.text},setText:function(b){return this.text=a.makeParameters(this.text,"string"==typeof b?{text:b}:b),this._setText(),this},getFont:function(){return this.fontStyle},setFont:function(b){return this.fontStyle="string"==typeof b?a.splitFontString(b):a.makeParameters(a.defaultFont,b),this._setFont(),this}});return a.path={Path:f,TextPath:g}})},"dojox/gfx/silverlight":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/Color","dojo/on","dojo/_base/array","dojo/dom-geometry","dojo/dom","dojo/_base/sniff","./_base","./shape","./path","./registry"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b=j.normalizeColor(a),c=b.toHex(),d=Math.round(255*b.a);return d=(d<0?0:d>255?255:d).toString(16),"#"+(d.length<2?"0"+d:d)+c.slice(1)}function n(a,b){var c={target:a,currentTarget:a,preventDefault:function(){},stopPropagation:function(){}};try{if(b.source){c.target=b.source;var d=c.target.tag;c.gfxTarget=k.byId(d)}}catch(a){}if(b)try{c.ctrlKey=b.ctrl,c.shiftKey=b.shift;var e=b.getPosition(null);c.x=c.offsetX=c.layerX=e.x,c.y=c.offsetY=c.layerY=e.y;var f=v[a.getHost().content.root.name],h=g.position(f);c.clientX=h.x+e.x,c.clientY=h.y+e.y}catch(a){}return c}function o(a,b){var c={keyCode:b.platformKeyCode,ctrlKey:b.ctrl,shiftKey:b.shift};try{b.source&&(c.target=b.source,c.gfxTarget=k.byId(c.target.tag))}catch(a){}return c}var p=j.silverlight={};a.experimental("dojox.gfx.silverlight");var q={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},r={normal:400,bold:700},s={butt:"Flat",round:"Round",square:"Square"},t={bevel:"Bevel",round:"Round"},u={serif:"Times New Roman",times:"Times New Roman","sans-serif":"Arial",helvetica:"Arial",monotone:"Courier New",courier:"Courier New"};p.Shape=c("dojox.gfx.silverlight.Shape",k.Shape,{destroy:function(){i("gfxRegistry")&&k.dispose(this),this.rawNode=null},setFill:function(a){var b,c=this.rawNode.getHost().content;this.rawNode;if(!a)return this.fillStyle=null,this._setFillAttr(null),this;if("object"==typeof a&&"type"in a){switch(a.type){case"linear":this.fillStyle=b=j.makeParameters(j.defaultLinearGradient,a);var d=c.createFromXaml("<LinearGradientBrush/>");d.mappingMode="Absolute",d.startPoint=b.x1+","+b.y1,d.endPoint=b.x2+","+b.y2,f.forEach(b.colors,function(a){var b=c.createFromXaml("<GradientStop/>");b.offset=a.offset,b.color=m(a.color),d.gradientStops.add(b)}),this._setFillAttr(d);break;case"radial":this.fillStyle=b=j.makeParameters(j.defaultRadialGradient,a);var e=c.createFromXaml("<RadialGradientBrush/>"),g=j.matrix.multiplyPoint(j.matrix.invert(this._getAdjustedMatrix()),b.cx,b.cy),h=g.x+","+g.y;e.mappingMode="Absolute",e.gradientOrigin=h,e.center=h,e.radiusX=e.radiusY=b.r,f.forEach(b.colors,function(a){var b=c.createFromXaml("<GradientStop/>");b.offset=a.offset,b.color=m(a.color),e.gradientStops.add(b)}),this._setFillAttr(e);break;case"pattern":this.fillStyle=null,this._setFillAttr(null)}return this}this.fillStyle=b=j.normalizeColor(a);var i=c.createFromXaml("<SolidColorBrush/>");return i.color=b.toHex(),i.opacity=b.a,this._setFillAttr(i),this},_setFillAttr:function(a){this.rawNode.fill=a},setStroke:function(a){var c=this.rawNode.getHost().content,e=this.rawNode;if(!a)return this.strokeStyle=null,e.stroke=null,this;("string"==typeof a||b.isArray(a)||a instanceof d)&&(a={color:a});var f=this.strokeStyle=j.makeParameters(j.defaultStroke,a);if(f.color=j.normalizeColor(f.color),f){var g=c.createFromXaml("<SolidColorBrush/>");g.color=f.color.toHex(),g.opacity=f.color.a,e.stroke=g,e.strokeThickness=f.width,e.strokeStartLineCap=e.strokeEndLineCap=e.strokeDashCap=s[f.cap],"number"==typeof f.join?(e.strokeLineJoin="Miter",e.strokeMiterLimit=f.join):e.strokeLineJoin=t[f.join];var h=f.style.toLowerCase();if(h in q&&(h=q[h]),h instanceof Array){h=b.clone(h);var i;if("butt"!=f.cap){for(i=0;i<h.length;i+=2)--h[i]<1&&(h[i]=1);for(i=1;i<h.length;i+=2)++h[i]}e.strokeDashArray=h.join(",")}else e.strokeDashArray=null}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof j.Surface);a=a.parent);return a},_applyTransform:function(){var a=this._getAdjustedMatrix(),b=this.rawNode;if(a){var c=this.rawNode.getHost().content,d=c.createFromXaml("<MatrixTransform/>"),e=c.createFromXaml("<Matrix/>");e.m11=a.xx,e.m21=a.xy,e.m12=a.yx,e.m22=a.yy,e.offsetX=a.dx,e.offsetY=a.dy,d.matrix=e,b.renderTransform=d}else b.renderTransform=null;return this},setRawNode:function(a){a.fill=null,a.stroke=null,this.rawNode=a,this.rawNode.tag=this.getUID()},_moveToFront:function(){var a=this.parent.rawNode.children,b=this.rawNode;return a.remove(b),a.add(b),this},_moveToBack:function(){var a=this.parent.rawNode.children,b=this.rawNode;return a.remove(b),a.insert(0,b),this},_getAdjustedMatrix:function(){return this.matrix},setClip:function(a){this.inherited(arguments);var b=this.rawNode;if(a){var c=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!c)return this;var d=this.getBoundingBox()||{x:0,y:0,width:0,height:0},e="1,0,0,1,"+-d.x+","+-d.y;switch(c){case"rect":b.clip=b.getHost().content.createFromXaml("<RectangleGeometry/>"),b.clip.rect=a.x+","+a.y+","+a.width+","+a.height,b.clip.transform=e;break;case"ellipse":b.clip=b.getHost().content.createFromXaml("<EllipseGeometry/>"),b.clip.center=a.cx+","+a.cy,b.clip.radiusX=a.rx,b.clip.radiusY=a.ry,b.clip.transform="1,0,0,1,"+-d.x+","+-d.y;break;case"polyline":if(a.points.length>2){var f,g=b.getHost().content.createFromXaml("<PathGeometry/>"),h=b.getHost().content.createFromXaml("<PathFigure/>");h.StartPoint=a.points[0]+","+a.points[1];for(var i=2;i<=a.points.length-2;i+=2)f=b.getHost().content.createFromXaml("<LineSegment/>"),f.Point=a.points[i]+","+a.points[i+1],h.segments.add(f);g.figures.add(h),g.transform="1,0,0,1,"+-d.x+","+-d.y,b.clip=g}}}else b.clip=null;return this}}),p.Group=c("dojox.gfx.silverlight.Group",p.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a,this.rawNode.tag=this.getUID()},destroy:function(){this.clear(!0),p.Shape.prototype.destroy.apply(this,arguments)}}),p.Group.nodeType="Canvas",p.Rect=c("dojox.gfx.silverlight.Rect",[p.Shape,k.Rect],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode,c=this.shape;return b.width=c.width,b.height=c.height,b.radiusX=b.radiusY=c.r,this._applyTransform()},_getAdjustedMatrix:function(){var a=this.matrix,b=this.shape,c={dx:b.x,dy:b.y};return new j.Matrix2D(a?[a,c]:c)}}),p.Rect.nodeType="Rectangle",p.Ellipse=c("dojox.gfx.silverlight.Ellipse",[p.Shape,k.Ellipse],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode,c=this.shape;return b.width=2*c.rx,b.height=2*c.ry,this._applyTransform()},_getAdjustedMatrix:function(){var a=this.matrix,b=this.shape,c={dx:b.cx-b.rx,dy:b.cy-b.ry};return new j.Matrix2D(a?[a,c]:c)}}),p.Ellipse.nodeType="Ellipse",p.Circle=c("dojox.gfx.silverlight.Circle",[p.Shape,k.Circle],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode,c=this.shape;return b.width=b.height=2*c.r,this._applyTransform()},_getAdjustedMatrix:function(){var a=this.matrix,b=this.shape,c={dx:b.cx-b.r,dy:b.cy-b.r};return new j.Matrix2D(a?[a,c]:c)}}),p.Circle.nodeType="Ellipse",p.Line=c("dojox.gfx.silverlight.Line",[p.Shape,k.Line],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode,c=this.shape;return b.x1=c.x1,b.y1=c.y1,b.x2=c.x2,b.y2=c.y2,this}}),p.Line.nodeType="Line",p.Polyline=c("dojox.gfx.silverlight.Polyline",[p.Shape,k.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=j.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=j.makeParameters(this.shape,a),this.bbox=null,this._normalizePoints();for(var c=this.shape.points,d=[],e=0;e<c.length;++e)d.push(c[e].x,c[e].y);return this.rawNode.points=d.join(","),this}}),p.Polyline.nodeType="Polyline",p.Image=c("dojox.gfx.silverlight.Image",[p.Shape,k.Image],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode,c=this.shape;return b.width=c.width,b.height=c.height,b.source=c.src,this._applyTransform()},_getAdjustedMatrix:function(){var a=this.matrix,b=this.shape,c={dx:b.x,dy:b.y};return new j.Matrix2D(a?[a,c]:c)},setRawNode:function(a){this.rawNode=a,this.rawNode.tag=this.getUID()}}),p.Image.nodeType="Image",p.Text=c("dojox.gfx.silverlight.Text",[p.Shape,k.Text],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var c=this.rawNode,d=this.shape;return c.text=""+d.text,c.textDecorations="underline"===d.decoration?"Underline":"None",c["Canvas.Left"]=-1e4,c["Canvas.Top"]=-1e4,this._delay||(this._delay=window.setTimeout(b.hitch(this,"_delayAlignment"),10)),this},_delayAlignment:function(){var a,b,c=this.rawNode,d=this.shape;try{a=c.actualWidth,b=c.actualHeight}catch(a){return}var e=d.x,f=d.y-.75*b;switch(d.align){case"middle":e-=a/2;break;case"end":e-=a}this._delta={dx:e,dy:f},c["Canvas.Left"]=0,c["Canvas.Top"]=0,this._applyTransform(),delete this._delay},_getAdjustedMatrix:function(){var a,b=this.matrix,c=this._delta;return a=b?c?[b,c]:b:c||{},new j.Matrix2D(a)},setStroke:function(){return this},_setFillAttr:function(a){this.rawNode.foreground=a},setRawNode:function(a){this.rawNode=a,this.rawNode.tag=this.getUID()},getTextWidth:function(){return this.rawNode.actualWidth},getBoundingBox:function(){var a=null,b=this.getShape().text,c=this.rawNode,d=0,e=0;if(!j._base._isRendered(this))return{x:0,y:0,width:0,height:0};if(b){try{d=c.actualWidth,e=c.actualHeight}catch(a){return null}var f=j._base._computeTextLocation(this.getShape(),d,e,!0);a={x:f.x,y:f.y,width:d,height:e}}return a}}),p.Text.nodeType="TextBlock",p.Path=c("dojox.gfx.silverlight.Path",[p.Shape,l.Path],{_updateWithSegment:function(a){this.inherited(arguments);var b=this.shape.path;"string"==typeof b&&(this.rawNode.data=b||null)},setShape:function(a){this.inherited(arguments);var b=this.shape.path;return this.rawNode.data=b||null,this}}),p.Path.nodeType="Path",p.TextPath=c("dojox.gfx.silverlight.TextPath",[p.Shape,l.TextPath],{_updateWithSegment:function(a){},setShape:function(a){},_setText:function(){}}),p.TextPath.nodeType="text";var v={},w=new Function;p.Surface=c("dojox.gfx.silverlight.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){this.clear(!0),window[this._onLoadName]=w,delete v[this._nodeName],this.inherited(arguments)},setDimensions:function(a,b){this.width=j.normalizedLength(a),this.height=j.normalizedLength(b);var c=this.rawNode&&this.rawNode.getHost();return c&&(c.width=a,c.height=b),this},getDimensions:function(){var a=this.rawNode&&this.rawNode.getHost(),b=a?{width:a.content.actualWidth,height:a.content.actualHeight}:null;return b.width<=0&&(b.width=this.width),b.height<=0&&(b.height=this.height),b}}),p.createSurface=function(a,b,c){if(!b&&!c){var d=g.position(a);b=b||d.w,c=c||d.h}"number"==typeof b&&(b+="px"),"number"==typeof c&&(c+="px");var e=new p.Surface;a=h.byId(a),e._parent=a,e._nodeName=j._base._getUniqueId();var f=a.ownerDocument.createElement("script");f.type="text/xaml",f.id=j._base._getUniqueId(),f.text="<?xml version='1.0'?><Canvas xmlns='http://schemas.microsoft.com/client/2007' Name='"+e._nodeName+"'/>",a.parentNode.insertBefore(f,a),e._nodes.push(f);var k,l=j._base._getUniqueId(),m="__"+j._base._getUniqueId()+"_onLoad";e._onLoadName=m,window[m]=function(b){e.rawNode||(e.rawNode=h.byId(l,a.ownerDocument).content.root,v[e._nodeName]=a,e.onLoad(e))},k=i("safari")?"<embed type='application/x-silverlight' id='"+l+"' width='"+b+"' height='"+c+" background='transparent' source='#"+f.id+"' windowless='true' maxFramerate='60' onLoad='"+m+"' onError='__dojoSilverlightError' /><iframe style='visibility:hidden;height:0;width:0'/>":"<object type='application/x-silverlight' data='data:application/x-silverlight,' id='"+l+"' width='"+b+"' height='"+c+"'><param name='background' value='transparent' /><param name='source' value='#"+f.id+"' /><param name='windowless' value='true' /><param name='maxFramerate' value='60' /><param name='onLoad' value='"+m+"' /><param name='onError' value='__dojoSilverlightError' /></object>",a.innerHTML=k;var n=h.byId(l,a.ownerDocument);return n.content&&n.content.root?(e.rawNode=n.content.root,v[e._nodeName]=a):(e.rawNode=null,e.isLoaded=!1),e._nodes.push(n),e.width=j.normalizedLength(b),e.height=j.normalizedLength(c),e},__dojoSilverlightError=function(a,b){var c="Silverlight Error:\nCode: "+b.ErrorCode+"\nType: "+b.ErrorType+"\nMessage: "+b.ErrorMessage+"\n";switch(b.ErrorType){case"ParserError":c+="XamlFile: "+b.xamlFile+"\nLine: "+b.lineNumber+"\nPosition: "+b.charPosition+"\n";break;case"RuntimeError":c+="MethodName: "+b.methodName+"\n",0!=b.lineNumber&&(c+="Line: "+b.lineNumber+"\nPosition: "+b.charPosition+"\n")}};var x={_setFont:function(){var a=this.fontStyle,c=this.rawNode,d=a.family.toLowerCase();c.fontStyle="italic"==a.style?"Italic":"Normal",c.fontWeight=a.weight in r?r[a.weight]:a.weight,c.fontSize=j.normalizedLength(a.size),c.fontFamily=d in u?u[d]:a.family,this._delay||(this._delay=window.setTimeout(b.hitch(this,"_delayAlignment"),10))}},y=k.Container,z={add:function(a){return this!=a.getParent()&&(y.add.apply(this,arguments),this.rawNode.children.add(a.rawNode)),this},remove:function(a,b){if(this==a.getParent()){var c=a.rawNode.getParent();c&&c.children.remove(a.rawNode),y.remove.apply(this,arguments)}return this},clear:function(){return this.rawNode.children.clear(),y.clear.apply(this,arguments)},getBoundingBox:y.getBoundingBox,_moveChildToFront:y._moveChildToFront,_moveChildToBack:y._moveChildToBack},A={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=this.rawNode.getHost().content.createFromXaml("<"+a.nodeType+"/>");return c.setRawNode(d),c.setShape(b),this.add(c),c}};b.extend(p.Text,x),b.extend(p.Group,z),b.extend(p.Group,k.Creator),b.extend(p.Group,A),b.extend(p.Surface,z),b.extend(p.Surface,k.Creator),b.extend(p.Surface,A);var B={onclick:{name:"MouseLeftButtonUp",fix:n},onmouseenter:{name:"MouseEnter",fix:n},onmouseleave:{name:"MouseLeave",fix:n},onmouseover:{name:"MouseEnter",fix:n},onmouseout:{name:"MouseLeave",fix:n},onmousedown:{name:"MouseLeftButtonDown",fix:n},onmouseup:{name:"MouseLeftButtonUp",fix:n},onmousemove:{name:"MouseMove",fix:n},onkeydown:{name:"KeyDown",fix:o},onkeyup:{name:"KeyUp",fix:o}},C={connect:function(a,c,d){return this.on(a,d?b.hitch(c,d):c)},on:function(a,c){if("string"==typeof a){0===a.indexOf("mouse")&&(a="on"+a);var d,f=a in B?B[a]:{name:a,fix:function(){return{}}};return d=this.getEventSource().addEventListener(f.name,function(a,b){c(f.fix(a,b))}),{name:f.name,token:d,remove:b.hitch(this,function(){this.getEventSource().removeEventListener(f.name,d)})}}return e(this,a,c)},disconnect:function(a){return a.remove()}};return b.extend(p.Shape,C),b.extend(p.Surface,C),j.equalSources=function(a,b){return a&&b&&a.equals(b)},p})},"dojox/gfx/registry":function(){define(["dojo/has","./shape"],function(a,b){a.add("gfxRegistry",1);var c={},d={},e={};return c.register=b.register=function(a){var b=a.declaredClass.split(".").pop(),c=b in d?++d[b]:d[b]=0,f=b+c;return e[f]=a,f},c.byId=b.byId=function(a){return e[a]},c.dispose=b.dispose=function(a,b){if(b&&a.children)for(var d=0;d<a.children.length;++d)c.dispose(a.children[d],!0);var f=a.getUID();e[f]=null,delete e[f]},c})},"dojox/gfx/svg":function(){define(["dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/dom-attr","dojo/_base/Color","./_base","./shape","./path"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,b){return c.doc.createElementNS?c.doc.createElementNS(a,b):c.doc.createElement(b)}function n(a,b,c,d){return a.setAttributeNS?a.setAttributeNS(b,c,d):a.setAttribute(c,d)}function o(a){return q.useSvgWeb?c.doc.createTextNode(a,!0):c.doc.createTextNode(a)}function p(){return q.useSvgWeb?c.doc.createDocumentFragment(!0):c.doc.createDocumentFragment()}var q=j.svg={};q.useSvgWeb=void 0!==window.svgweb;var r=navigator.userAgent,s=b("ios"),t=b("android"),u=b("chrome")||t&&t>=4?"auto":"optimizeLegibility";q.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},q.getRef=function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?d.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?d.byId(a.slice(1)):null:null},q.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var v=0;q.Shape=e("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill"),b=q.getRef(a);b&&b.parentNode.removeChild(b)}if(this.clip){var c=this.rawNode.getAttribute("clip-path");if(c){var e=d.byId(c.match(/gfx_clip[\d]+/)[0]);e&&e.parentNode.removeChild(e)}}k.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var b,c=function(a){this.setAttribute(a,b[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case"linear":b=j.makeParameters(j.defaultLinearGradient,a);var d=this._setFillObject(b,"linearGradient");f.forEach(["x1","y1","x2","y2"],c,d);break;case"radial":b=j.makeParameters(j.defaultRadialGradient,a);var e=this._setFillObject(b,"radialGradient");f.forEach(["cx","cy","r"],c,e);break;case"pattern":b=j.makeParameters(j.defaultPattern,a);var g=this._setFillObject(b,"pattern");f.forEach(["x","y","width","height"],c,g)}return this.fillStyle=b,this}return b=j.normalizeColor(a),this.fillStyle=b,this.rawNode.setAttribute("fill",b.toCss()),this.rawNode.setAttribute("fill-opacity",b.a),this.rawNode.setAttribute("fill-rule","evenodd"),this},setStroke:function(b){var c=this.rawNode;if(!b)return this.strokeStyle=null,c.setAttribute("stroke","none"),c.setAttribute("stroke-opacity",0),this;("string"==typeof b||a.isArray(b)||b instanceof i)&&(b={color:b});var d=this.strokeStyle=j.makeParameters(j.defaultStroke,b);if(d.color=j.normalizeColor(d.color),d){c.setAttribute("stroke",d.color.toCss()),c.setAttribute("stroke-opacity",d.color.a),c.setAttribute("stroke-width",d.width),c.setAttribute("stroke-linecap",d.cap),"number"==typeof d.join?(c.setAttribute("stroke-linejoin","miter"),c.setAttribute("stroke-miterlimit",d.join)):c.setAttribute("stroke-linejoin",d.join);var e=d.style.toLowerCase();if(e in q.dasharray&&(e=q.dasharray[e]),e instanceof Array){e=a._toArray(e);var f;for(f=0;f<e.length;++f)e[f]*=d.width;if("butt"!=d.cap){for(f=0;f<e.length;f+=2)e[f]-=d.width,e[f]<1&&(e[f]=1);for(f=1;f<e.length;f+=2)e[f]+=d.width}e=e.join(",")}c.setAttribute("stroke-dasharray",e),c.setAttribute("dojoGfxStrokeStyle",d.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof j.Surface);a=a.parent);return a},_setFillObject:function(a,b){var c=q.xmlns.svg;this.fillStyle=a;var d=this._getParentSurface(),e=d.defNode,f=this.rawNode.getAttribute("fill"),g=q.getRef(f);if(g)if(f=g,f.tagName.toLowerCase()!=b.toLowerCase()){var h=f.id;f.parentNode.removeChild(f),f=m(c,b),f.setAttribute("id",h),e.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=m(c,b),f.setAttribute("id",j._base._getUniqueId()),e.appendChild(f);if("pattern"==b){f.setAttribute("patternUnits","userSpaceOnUse");var i=m(c,"image");i.setAttribute("x",0),i.setAttribute("y",0),i.setAttribute("width",a.width.toFixed(8)),i.setAttribute("height",a.height.toFixed(8)),n(i,q.xmlns.xlink,"xlink:href",a.src),f.appendChild(i)}else{f.setAttribute("gradientUnits","userSpaceOnUse");for(var k=0;k<a.colors.length;++k){var l=a.colors[k],o=m(c,"stop"),p=l.color=j.normalizeColor(l.color);o.setAttribute("offset",l.offset.toFixed(8)),o.setAttribute("stop-color",p.toCss()),o.setAttribute("stop-opacity",p.a),f.appendChild(o)}}return this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")"),this.rawNode.removeAttribute("fill-opacity"),this.rawNode.setAttribute("fill-rule","evenodd"),f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){var b=this.rawNode=a;"image"!=this.shape.type&&b.setAttribute("fill","none"),b.setAttribute("fill-opacity",0),b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),b.setAttribute("stroke-width",1),b.setAttribute("stroke-linecap","butt"),b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",4),b.__gfxObject__=this},setShape:function(a){this.shape=j.makeParameters(this.shape,a);for(var b in this.shape)"type"!=b&&this.rawNode.setAttribute(b,this.shape[b]);return this.bbox=null,this},_moveToFront:function(){return this.rawNode.parentNode.appendChild(this.rawNode),this},_moveToBack:function(){return this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild),this},setClip:function(b){this.inherited(arguments);var c=b?"width"in b?"rect":"cx"in b?"ellipse":"points"in b?"polyline":"d"in b?"path":null:null;if(b&&!c)return this;"polyline"===c&&(b=a.clone(b),b.points=b.points.join(","));var e,f,g=h.get(this.rawNode,"clip-path");if(g&&(e=d.byId(g.match(/gfx_clip[\d]+/)[0]))&&e.removeChild(e.childNodes[0]),b){if(e)f=m(q.xmlns.svg,c),e.appendChild(f);else{var i=++v,j="gfx_clip"+i,k="url(#"+j+")";this.rawNode.setAttribute("clip-path",k),e=m(q.xmlns.svg,"clipPath"),f=m(q.xmlns.svg,c),e.appendChild(f),this.rawNode.parentNode.insertBefore(e,this.rawNode),h.set(e,"id",j)}h.set(f,b)}else this.rawNode.removeAttribute("clip-path"),e&&e.parentNode.removeChild(e);return this},_removeClipNode:function(){var a,b=h.get(this.rawNode,"clip-path");return b&&(a=d.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a),a}}),q.Group=e("dojox.gfx.svg.Group",q.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a,this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0),q.Shape.prototype.destroy.apply(this,arguments)}}),q.Group.nodeType="g",q.Rect=e("dojox.gfx.svg.Rect",[q.Shape,k.Rect],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;for(var b in this.shape)"type"!=b&&"r"!=b&&this.rawNode.setAttribute(b,this.shape[b]);return null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r)),this}}),q.Rect.nodeType="rect",q.Ellipse=e("dojox.gfx.svg.Ellipse",[q.Shape,k.Ellipse],{}),q.Ellipse.nodeType="ellipse",q.Circle=e("dojox.gfx.svg.Circle",[q.Shape,k.Circle],{}),q.Circle.nodeType="circle",q.Line=e("dojox.gfx.svg.Line",[q.Shape,k.Line],{}),q.Line.nodeType="line",q.Polyline=e("dojox.gfx.svg.Polyline",[q.Shape,k.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=j.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=j.makeParameters(this.shape,a),this.bbox=null,this._normalizePoints();for(var c=[],d=this.shape.points,e=0;e<d.length;++e)c.push(d[e].x.toFixed(8),d[e].y.toFixed(8));return this.rawNode.setAttribute("points",c.join(" ")),this}}),q.Polyline.nodeType="polyline",q.Image=e("dojox.gfx.svg.Image",[q.Shape,k.Image],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode;for(var c in this.shape)"type"!=c&&"src"!=c&&b.setAttribute(c,this.shape[c]);return b.setAttribute("preserveAspectRatio","none"),n(b,q.xmlns.xlink,"xlink:href",this.shape.src),b.__gfxObject__=this,this}}),q.Image.nodeType="image",q.Text=e("dojox.gfx.svg.Text",[q.Shape,k.Text],{setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b=this.rawNode,c=this.shape;return b.setAttribute("x",c.x),b.setAttribute("y",c.y),b.setAttribute("text-anchor",c.align),b.setAttribute("text-decoration",c.decoration),b.setAttribute("rotate",c.rotated?90:0),b.setAttribute("kerning",c.kerning?"auto":0),b.setAttribute("text-rendering",u),b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(o(c.text)),this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,c=a.cloneNode(!0);c.style.visibility="hidden";var d=0,e=c.firstChild.nodeValue;if(b.appendChild(c),""!=e)for(;!d;)d=c.getBBox?parseInt(c.getBBox().width):68;return b.removeChild(c),d},getBoundingBox:function(){var a=this.getShape(),b=null;if(a.text)try{b=this.rawNode.getBBox()}catch(a){b={x:0,y:0,width:0,height:0}}return b}}),q.Text.nodeType="text",q.Path=e("dojox.gfx.svg.Path",[q.Shape,l.Path],{_updateWithSegment:function(a){this.inherited(arguments),"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){return this.inherited(arguments),this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d"),this}}),q.Path.nodeType="path",q.TextPath=e("dojox.gfx.svg.TextPath",[q.Shape,l.TextPath],{_updateWithSegment:function(a){this.inherited(arguments),this._setTextPath()},setShape:function(a){return this.inherited(arguments),this._setTextPath(),this},_setTextPath:function(){if("string"==typeof this.shape.path){var a=this.rawNode;if(!a.firstChild){var b=m(q.xmlns.svg,"textPath"),c=o("");b.appendChild(c),a.appendChild(b)}var d=a.firstChild.getAttributeNS(q.xmlns.xlink,"href"),e=d&&q.getRef(d);if(!e){var f=this._getParentSurface();if(f){var g=f.defNode;e=m(q.xmlns.svg,"path");var h=j._base._getUniqueId();e.setAttribute("id",h),g.appendChild(e),n(a.firstChild,q.xmlns.xlink,"xlink:href","#"+h)}}e&&e.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=m(q.xmlns.svg,"textPath"),c=o("");b.appendChild(c),a.appendChild(b)}a=a.firstChild;var d=this.text;switch(a.setAttribute("alignment-baseline","middle"),d.align){case"middle":a.setAttribute("text-anchor","middle"),a.setAttribute("startOffset","50%");break;case"end":a.setAttribute("text-anchor","end"),a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex"),a.setAttribute("text-decoration",d.decoration),a.setAttribute("rotate",d.rotated?90:0),a.setAttribute("kerning",d.kerning?"auto":0),a.firstChild.data=d.text}}),q.TextPath.nodeType="text";var w=function(){var a=/WebKit\/(\d*)/.exec(r);return a?a[1]:0}()>534;q.Surface=e("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,!0),this.defNode=null,this.inherited(arguments)},setDimensions:function(a,b){return this.rawNode?(this.rawNode.setAttribute("width",a),this.rawNode.setAttribute("height",b),w&&(this.rawNode.style.width=a,this.rawNode.style.height=b),this):this},getDimensions:function(){return this.rawNode?{width:j.normalizedLength(this.rawNode.getAttribute("width")),height:j.normalizedLength(this.rawNode.getAttribute("height"))}:null}}),q.createSurface=function(a,b,c){var e=new q.Surface;e.rawNode=m(q.xmlns.svg,"svg"),e.rawNode.setAttribute("overflow","hidden"),b&&e.rawNode.setAttribute("width",b),c&&e.rawNode.setAttribute("height",c);var f=m(q.xmlns.svg,"defs");return e.rawNode.appendChild(f),e.defNode=f,e._parent=d.byId(a),e._parent.appendChild(e.rawNode),j._base._fixMsTouchAction(e),e};var x={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style),this.rawNode.setAttribute("font-variant",a.variant),this.rawNode.setAttribute("font-weight",a.weight),this.rawNode.setAttribute("font-size",a.size),
this.rawNode.setAttribute("font-family",a.family)}},y=k.Container,z=q.Container={openBatch:function(){return this._batch||(this.fragment=p()),++this._batch,this},closeBatch:function(){return this._batch=this._batch>0?--this._batch:0,this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment),this},add:function(a){return this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),y.add.apply(this,arguments),a.setClip(a.clip)),this},remove:function(a,b){return this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),y.remove.apply(this,arguments)),this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return y.clear.apply(this,arguments)},getBoundingBox:y.getBoundingBox,_moveChildToFront:y._moveChildToFront,_moveChildToBack:y._moveChildToBack},A=q.Creator={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=m(q.xmlns.svg,a.nodeType);return c.setRawNode(d),c.setShape(b),this.add(c),c}};if(a.extend(q.Text,x),a.extend(q.TextPath,x),a.extend(q.Group,z),a.extend(q.Group,k.Creator),a.extend(q.Group,A),a.extend(q.Surface,z),a.extend(q.Surface,k.Creator),a.extend(q.Surface,A),q.fixTarget=function(a,b){return a.gfxTarget||(s&&a.target.wholeText?a.gfxTarget=a.target.parentElement.__gfxObject__:a.gfxTarget=a.target.__gfxObject__),!0},q.useSvgWeb){q.createSurface=function(a,b,c){var e=new q.Surface;if(!b||!c){var f=g.position(a);b=b||f.w,c=c||f.h}a=d.byId(a);var h=a.id?a.id+"_svgweb":j._base._getUniqueId(),i=m(q.xmlns.svg,"svg");return i.id=h,i.setAttribute("width",b),i.setAttribute("height",c),svgweb.appendChild(i,a),i.addEventListener("SVGLoad",function(){e.rawNode=this,e.isLoaded=!0;var a=m(q.xmlns.svg,"defs");e.rawNode.appendChild(a),e.defNode=a,e.onLoad&&e.onLoad(e)},!1),e.isLoaded=!1,e},q.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}});var B={connect:function(b,c,d){return"on"===b.substring(0,2)&&(b=b.substring(2)),d=2==arguments.length?c:a.hitch(c,d),this.getEventSource().addEventListener(b,d,!1),[this,b,d]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1),delete a[0]}};a.extend(q.Shape,B),a.extend(q.Surface,B)}return q})},"dojox/gfx/vml":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/Color","dojo/_base/sniff","dojo/_base/config","dojo/dom","dojo/dom-geometry","dojo/_base/kernel","./_base","./shape","./path","./arc","./gradient","./matrix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b,d){d=d||i.global,b.call(d,a),(a instanceof j.Surface||a instanceof j.Group)&&c.forEach(a.children,function(a){p(a,b,d)})}var q=j.vml={};q.xmlns="urn:schemas-microsoft-com:vml",document.namespaces.add("v",q.xmlns);var r=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],s=0,t=1,u=document.createStyleSheet();for(e("ie")>=8&&(s=1,t=r.length);s<t;++s)u.addRule("v\\:"+r[s],"behavior:url(#default#VML); display:inline-block");q.text_alignment={start:"left",middle:"center",end:"right"},q._parseFloat=function(a){return a.match(/^\d+f$/i)?parseInt(a)/65536:parseFloat(a)},q._bool={t:1,true:1},q._reparentEvents=function(a,b){for(var c in b)"on"==c.substr(0,2).toLowerCase()&&(a[c]=b[c],b[c]=null)},q.Shape=b("dojox.gfx.vml.Shape",k.Shape,{setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.filled="f",this;var b,e,f,g,h;if("object"==typeof a&&"type"in a){switch(a.type){case"linear":var i=this._getRealMatrix(),k=this.getBoundingBox(),l=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();for(h=[],this.fillStyle!==a&&(this.fillStyle=j.makeParameters(j.defaultLinearGradient,a)),e=j.gradient.project(i,this.fillStyle,{x:k.x,y:k.y},{x:k.x+k.width,y:k.y+k.height},l[0],l[2]),g=e.colors,"0.00000"!=g[0].offset.toFixed(5)&&h.push("0 "+j.normalizeColor(g[0].color).toHex()),b=0;b<g.length;++b)h.push(g[b].offset.toFixed(5)+" "+j.normalizeColor(g[b].color).toHex());b=g.length-1,"1.00000"!=g[b].offset.toFixed(5)&&h.push("1 "+j.normalizeColor(g[b].color).toHex()),f=this.rawNode.fill,f.colors.value=h.join(";"),f.method="sigma",f.type="gradient",f.angle=(270-o._radToDeg(e.angle))%360,f.on=!0;break;case"radial":e=j.makeParameters(j.defaultRadialGradient,a),this.fillStyle=e;var m=parseFloat(this.rawNode.style.left),n=parseFloat(this.rawNode.style.top),p=parseFloat(this.rawNode.style.width),q=parseFloat(this.rawNode.style.height),r=isNaN(p)?1:2*e.r/p;for(g=[],e.colors[0].offset>0&&g.push({offset:1,color:j.normalizeColor(e.colors[0].color)}),c.forEach(e.colors,function(a,b){g.push({offset:1-a.offset*r,color:j.normalizeColor(a.color)})}),b=g.length-1;b>=0&&g[b].offset<0;)--b;if(b<g.length-1){var s=g[b],t=g[b+1];for(t.color=d.blendColors(s.color,t.color,s.offset/(s.offset-t.offset)),t.offset=0;g.length-b>2;)g.pop()}for(b=g.length-1,h=[],g[b].offset>0&&h.push("0 "+g[b].color.toHex());b>=0;--b)h.push(g[b].offset.toFixed(5)+" "+g[b].color.toHex());f=this.rawNode.fill,f.colors.value=h.join(";"),f.method="sigma",f.type="gradientradial",isNaN(p)||isNaN(q)||isNaN(m)||isNaN(n)?f.focusposition="0.5 0.5":f.focusposition=((e.cx-m)/p).toFixed(5)+" "+((e.cy-n)/q).toFixed(5),f.focussize="0 0",f.on=!0;break;case"pattern":e=j.makeParameters(j.defaultPattern,a),this.fillStyle=e,f=this.rawNode.fill,f.type="tile",f.src=e.src,e.width&&e.height&&(f.size.x=j.px2pt(e.width),f.size.y=j.px2pt(e.height)),f.alignShape="f",f.position.x=0,f.position.y=0,f.origin.x=e.width?e.x/e.width:0,f.origin.y=e.height?e.y/e.height:0,f.on=!0}return this.rawNode.fill.opacity=1,this}this.fillStyle=j.normalizeColor(a),f=this.rawNode.fill,f||(f=this.rawNode.ownerDocument.createElement("v:fill")),f.method="any",f.type="solid",f.opacity=this.fillStyle.a;var u=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"];return u&&(u.opacity=Math.round(100*this.fillStyle.a)),this.rawNode.fillcolor=this.fillStyle.toHex(),this.rawNode.filled=!0,this},setStroke:function(b){if(!b)return this.strokeStyle=null,this.rawNode.stroked="f",this;("string"==typeof b||a.isArray(b)||b instanceof d)&&(b={color:b});var c=this.strokeStyle=j.makeParameters(j.defaultStroke,b);c.color=j.normalizeColor(c.color);var e=this.rawNode;return e.stroked=!0,e.strokecolor=c.color.toCss(),e.strokeweight=c.width+"px",e.stroke&&(e.stroke.opacity=c.color.a,e.stroke.endcap=this._translate(this._capMap,c.cap),"number"==typeof c.join?(e.stroke.joinstyle="miter",e.stroke.miterlimit=c.join):e.stroke.joinstyle=c.join,e.stroke.dashstyle="none"==c.style?"Solid":c.style),this},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(a,b){return b in a?a[b]:b},_applyTransform:function(){var a=this._getRealMatrix();if(a){var b=this.rawNode.skew;if(void 0===b)for(var c=0;c<this.rawNode.childNodes.length;++c)if("skew"==this.rawNode.childNodes[c].tagName){b=this.rawNode.childNodes[c];break}if(b){b.on="f";var d=a.xx.toFixed(8)+" "+a.xy.toFixed(8)+" "+a.yx.toFixed(8)+" "+a.yy.toFixed(8)+" 0 0",e=Math.floor(a.dx).toFixed()+"px "+Math.floor(a.dy).toFixed()+"px",f=this.rawNode.style,g=parseFloat(f.left),h=parseFloat(f.top),i=parseFloat(f.width),j=parseFloat(f.height);isNaN(g)&&(g=0),isNaN(h)&&(h=0),!isNaN(i)&&i||(i=1),!isNaN(j)&&j||(j=1);var k=(-g/i-.5).toFixed(8)+" "+(-h/j-.5).toFixed(8);b.matrix=d,b.origin=k,b.offset=e,b.on=!0}}return this.fillStyle&&"linear"==this.fillStyle.type&&this.setFill(this.fillStyle),this.clip&&this.setClip(this.clip),this},_setDimensions:function(a,b){return this},setRawNode:function(a){a.stroked="f",a.filled="f",this.rawNode=a,this.rawNode.__gfxObject__=this},_moveToFront:function(){return this.rawNode.parentNode.appendChild(this.rawNode),this},_moveToBack:function(){var a=this.rawNode,b=a.parentNode,c=b.firstChild;return b.insertBefore(a,c),"rect"==c.tagName&&c.swapNode(a),this},_getRealMatrix:function(){return this.parentMatrix?new o.Matrix2D([this.parentMatrix,this.matrix]):this.matrix},setClip:function(a){this.inherited(arguments);var b=this.rawNode.style;if(a){if("width"in a){var c=this._getRealMatrix(),d=parseFloat(b.left),e=parseFloat(b.top);isNaN(d)&&(d=0),isNaN(e)&&(e=0);var f=o.multiplyRectangle(c,a),g=o.multiplyPoint(c,{x:d,y:e});b.clip="rect("+Math.round(f.y-g.y)+"px "+Math.round(f.x-g.x+f.width)+"px "+Math.round(f.y-g.y+f.height)+"px "+Math.round(f.x-g.x)+"px)"}}else b.position="absolute",b.clip="rect(0px "+b.width+" "+b.height+" 0px)";return this}}),q.Group=b("dojox.gfx.vml.Group",q.Shape,{constructor:function(){k.Container._init.call(this)},_applyTransform:function(){for(var a=this._getRealMatrix(),b=0;b<this.children.length;++b)this.children[b]._updateParentMatrix(a);return this.clip&&this.setClip(this.clip),this},_setDimensions:function(a,b){var c=this.rawNode,d=c.style,e=this.bgNode.style;d.width=a,d.height=b,c.coordsize=a+" "+b,e.width=a,e.height=b;for(var f=0;f<this.children.length;++f)this.children[f]._setDimensions(a,b);return this},setClip:function(a){this.clip=a;var b=this.rawNode.style;if(a){if("width"in a){var c=this._getRealMatrix(),d=o.multiplyRectangle(c,a),e=this.getBoundingBox();e=e?o.multiplyRectangle(c,e):null;var f=e&&e.x<0?e.x:0,g=e&&e.y<0?e.y:0;b.position="absolute",b.clip="rect("+Math.round(d.y-g)+"px "+Math.round(d.x+d.width-f)+"px "+Math.round(d.y+d.height-g)+"px "+Math.round(d.x-f)+"px)"}}else b.position="absolute",b.clip="rect(0px "+b.width+" "+b.height+" 0px)";return this},destroy:function(){this.clear(!0),q.Shape.prototype.destroy.apply(this,arguments)}}),q.Group.nodeType="group",q.Rect=b("dojox.gfx.vml.Rect",[q.Shape,k.Rect],{setShape:function(a){var b=this.shape=j.makeParameters(this.shape,a);this.bbox=null;var c=Math.min(1,b.r/Math.min(parseFloat(b.width),parseFloat(b.height))).toFixed(8),d=this.rawNode.parentNode,f=null;if(d){if(d.lastChild!==this.rawNode)for(var g=0;g<d.childNodes.length;++g)if(d.childNodes[g]===this.rawNode){f=d.childNodes[g+1];break}d.removeChild(this.rawNode)}if(e("ie")>7){var h=this.rawNode.ownerDocument.createElement("v:roundrect");h.arcsize=c,h.style.display="inline-block",q._reparentEvents(h,this.rawNode),this.rawNode=h,this.rawNode.__gfxObject__=this}else this.rawNode.arcsize=c;d&&(f?d.insertBefore(this.rawNode,f):d.appendChild(this.rawNode));var i=this.rawNode.style;return i.left=b.x.toFixed(),i.top=b.y.toFixed(),i.width="string"==typeof b.width&&b.width.indexOf("%")>=0?b.width:Math.max(b.width.toFixed(),0),i.height="string"==typeof b.height&&b.height.indexOf("%")>=0?b.height:Math.max(b.height.toFixed(),0),this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle)}}),q.Rect.nodeType="roundrect",q.Ellipse=b("dojox.gfx.vml.Ellipse",[q.Shape,k.Ellipse],{setShape:function(a){var b=this.shape=j.makeParameters(this.shape,a);this.bbox=null;var c=this.rawNode.style;return c.left=(b.cx-b.rx).toFixed(),c.top=(b.cy-b.ry).toFixed(),c.width=(2*b.rx).toFixed(),c.height=(2*b.ry).toFixed(),this.setTransform(this.matrix)}}),q.Ellipse.nodeType="oval",q.Circle=b("dojox.gfx.vml.Circle",[q.Shape,k.Circle],{setShape:function(a){var b=this.shape=j.makeParameters(this.shape,a);this.bbox=null;var c=this.rawNode.style;return c.left=(b.cx-b.r).toFixed(),c.top=(b.cy-b.r).toFixed(),c.width=(2*b.r).toFixed(),c.height=(2*b.r).toFixed(),this}}),q.Circle.nodeType="oval",q.Line=b("dojox.gfx.vml.Line",[q.Shape,k.Line],{constructor:function(a){a&&a.setAttribute("dojoGfxType","line")},setShape:function(a){var b=this.shape=j.makeParameters(this.shape,a);return this.bbox=null,this.rawNode.path.v="m"+b.x1.toFixed()+" "+b.y1.toFixed()+"l"+b.x2.toFixed()+" "+b.y2.toFixed()+"e",this.setTransform(this.matrix)}}),q.Line.nodeType="shape",q.Polyline=b("dojox.gfx.vml.Polyline",[q.Shape,k.Polyline],{constructor:function(a){a&&a.setAttribute("dojoGfxType","polyline")},setShape:function(a,b){a&&a instanceof Array?(this.shape=j.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=j.makeParameters(this.shape,a),this.bbox=null,this._normalizePoints();var c=[],d=this.shape.points;if(d.length>0&&(c.push("m"),c.push(d[0].x.toFixed(),d[0].y.toFixed()),d.length>1)){c.push("l");for(var e=1;e<d.length;++e)c.push(d[e].x.toFixed(),d[e].y.toFixed())}return c.push("e"),this.rawNode.path.v=c.join(" "),this.setTransform(this.matrix)}}),q.Polyline.nodeType="shape",q.Image=b("dojox.gfx.vml.Image",[q.Shape,k.Image],{setShape:function(a){var b=this.shape=j.makeParameters(this.shape,a);return this.bbox=null,this.rawNode.firstChild.src=b.src,this.setTransform(this.matrix)},_applyTransform:function(){var a=this._getRealMatrix(),b=this.rawNode,c=b.style,d=this.shape;if(a=a?o.multiply(a,{dx:d.x,dy:d.y}):o.normalize({dx:d.x,dy:d.y}),0==a.xy&&0==a.yx&&a.xx>0&&a.yy>0)c.filter="",c.width=Math.floor(a.xx*d.width),c.height=Math.floor(a.yy*d.height),c.left=Math.floor(a.dx),c.top=Math.floor(a.dy);else{var e=b.parentNode.style;c.left="0px",c.top="0px",c.width=e.width,c.height=e.height,a=o.multiply(a,{xx:d.width/parseInt(c.width),yy:d.height/parseInt(c.height)});var f=b.filters["DXImageTransform.Microsoft.Matrix"];f?(f.M11=a.xx,f.M12=a.xy,f.M21=a.yx,f.M22=a.yy,f.Dx=a.dx,f.Dy=a.dy):c.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+a.xx+", M12="+a.xy+", M21="+a.yx+", M22="+a.yy+", Dx="+a.dx+", Dy="+a.dy+")"}return this},_setDimensions:function(a,b){var c=this.rawNode;if(c.filters["DXImageTransform.Microsoft.Matrix"]){var d=c.style;return d.width=a,d.height=b,this._applyTransform()}return this}}),q.Image.nodeType="rect",q.Text=b("dojox.gfx.vml.Text",[q.Shape,k.Text],{constructor:function(a){a&&a.setAttribute("dojoGfxType","text"),this.fontStyle=null},_alignment:{start:"left",middle:"center",end:"right"},setShape:function(a){this.shape=j.makeParameters(this.shape,a),this.bbox=null;var b,c=this.rawNode,d=this.shape,e=d.x,f=d.y.toFixed();switch(d.align){case"middle":e-=5;break;case"end":e-=10}b="m"+e.toFixed()+","+f+"l"+(e+10).toFixed()+","+f+"e";for(var g=null,h=null,i=c.childNodes,k=0;k<i.length;++k){var l=i[k].tagName;if("path"==l){if(g=i[k],h)break}else if("textpath"==l&&(h=i[k],g))break}g||(g=c.ownerDocument.createElement("v:path"),c.appendChild(g)),h||(h=c.ownerDocument.createElement("v:textpath"),c.appendChild(h)),g.v=b,g.textPathOk=!0,h.on=!0;var m=q.text_alignment[d.align];return h.style["v-text-align"]=m||"left",h.style["text-decoration"]=d.decoration,h.style["v-rotate-letters"]=d.rotated,h.style["v-text-kern"]=d.kerning,h.string=d.text,this.setTransform(this.matrix)},_setFont:function(){for(var a=this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if("textpath"==b[c].tagName){b[c].style.font=j.makeFontString(a);break}this.setTransform(this.matrix)},_getRealMatrix:function(){var a=this.inherited(arguments);return a&&(a=o.multiply(a,{dy:.35*-j.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")})),a},getTextWidth:function(){var a=this.rawNode,b=a.style.display;a.style.display="inline";var c=j.pt2px(parseFloat(a.currentStyle.width));return a.style.display=b,c}}),q.Text.nodeType="shape",q.Path=b("dojox.gfx.vml.Path",[q.Shape,l.Path],{constructor:function(a){a&&!a.getAttribute("dojoGfxType")&&a.setAttribute("dojoGfxType","path"),this.vmlPath="",this.lastControl={}},_updateWithSegment:function(b){var c=a.clone(this.last);if(this.inherited(arguments),!(arguments.length>1)){var d=this[this.renderers[b.action]](b,c);"string"==typeof this.vmlPath?(this.vmlPath+=d.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e"):Array.prototype.push.apply(this.vmlPath,d)}},setShape:function(a){return this.vmlPath=[],this.lastControl.type="",this.inherited(arguments),this.vmlPath=this.vmlPath.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e",this},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(a,b,c,d){for(var e=b instanceof Array?b:b.args,f=c;f<d;++f)a.push(" ",e[f].toFixed())},_adjustRelCrd:function(a,b,c){var d=b instanceof Array?b:b.args,e=d.length,f=new Array(e),g=0,h=a.x,i=a.y;if("number"!=typeof h&&(f[0]=h=d[0],f[1]=i=d[1],g=2),"number"==typeof c&&2!=c)for(var j=c;j<=e;){for(;g<j;g+=2)f[g]=h+d[g],f[g+1]=i+d[g+1];h=f[j-2],i=f[j-1],j+=c}else for(;g<e;g+=2)f[g]=h+=d[g],f[g+1]=i+=d[g+1];return f},_adjustRelPos:function(a,b){for(var c=b instanceof Array?b:b.args,d=c.length,e=new Array(d),f=0;f<d;++f)e[f]=a+=c[f];return e},_moveToA:function(a){var b=[" m"],c=a instanceof Array?a:a.args,d=c.length;return this._addArgs(b,c,0,2),d>2&&(b.push(" l"),this._addArgs(b,c,2,d)),this.lastControl.type="",b},_moveToR:function(a,b){return this._moveToA(this._adjustRelCrd(b,a))},_lineToA:function(a){var b=[" l"],c=a instanceof Array?a:a.args;return this._addArgs(b,c,0,c.length),this.lastControl.type="",b},_lineToR:function(a,b){return this._lineToA(this._adjustRelCrd(b,a))},_hLineToA:function(a,b){for(var c=[" l"],d=" "+b.y.toFixed(),e=a instanceof Array?a:a.args,f=e.length,g=0;g<f;++g)c.push(" ",e[g].toFixed(),d);return this.lastControl.type="",c},_hLineToR:function(a,b){return this._hLineToA(this._adjustRelPos(b.x,a),b)},_vLineToA:function(a,b){for(var c=[" l"],d=" "+b.x.toFixed(),e=a instanceof Array?a:a.args,f=e.length,g=0;g<f;++g)c.push(d," ",e[g].toFixed());return this.lastControl.type="",c},_vLineToR:function(a,b){return this._vLineToA(this._adjustRelPos(b.y,a),b)},_curveToA:function(a){for(var b=[],c=a instanceof Array?a:a.args,d=c.length,e=this.lastControl,f=0;f<d;f+=6)b.push(" c"),this._addArgs(b,c,f,f+6);return e.x=c[d-4],e.y=c[d-3],e.type="C",b},_curveToR:function(a,b){return this._curveToA(this._adjustRelCrd(b,a,6))},_smoothCurveToA:function(a,b){var c=[],d=a instanceof Array?a:a.args,e=d.length,f=this.lastControl,g=0;for("C"!=f.type&&(c.push(" c"),this._addArgs(c,[b.x,b.y],0,2),this._addArgs(c,d,0,4),f.x=d[0],f.y=d[1],f.type="C",g=4);g<e;g+=4)c.push(" c"),this._addArgs(c,[2*b.x-f.x,2*b.y-f.y],0,2),this._addArgs(c,d,g,g+4),f.x=d[g],f.y=d[g+1];return c},_smoothCurveToR:function(a,b){return this._smoothCurveToA(this._adjustRelCrd(b,a,4),b)},_qCurveToA:function(a){for(var b=[],c=a instanceof Array?a:a.args,d=c.length,e=this.lastControl,f=0;f<d;f+=4)b.push(" qb"),this._addArgs(b,c,f,f+4);return e.x=c[d-4],e.y=c[d-3],e.type="Q",b},_qCurveToR:function(a,b){return this._qCurveToA(this._adjustRelCrd(b,a,4))},_qSmoothCurveToA:function(a,b){var c=[],d=a instanceof Array?a:a.args,e=d.length,f=this.lastControl,g=0;for("Q"!=f.type&&(c.push(" qb"),this._addArgs(c,[f.x=b.x,f.y=b.y],0,2),f.type="Q",this._addArgs(c,d,0,2),g=2);g<e;g+=2)c.push(" qb"),this._addArgs(c,[f.x=2*b.x-f.x,f.y=2*b.y-f.y],0,2),this._addArgs(c,d,g,g+2);return c},_qSmoothCurveToR:function(a,b){return this._qSmoothCurveToA(this._adjustRelCrd(b,a,2),b)},_arcTo:function(a,b){for(var c=[],d=a.args,e=d.length,f="a"==a.action,g=0;g<e;g+=7){var h=d[g+5],i=d[g+6];f&&(h+=b.x,i+=b.y);for(var j=m.arcAsBezier(b,d[g],d[g+1],d[g+2],d[g+3]?1:0,d[g+4]?1:0,h,i),k=0;k<j.length;++k){c.push(" c");var l=j[k];this._addArgs(c,l,0,l.length),this._updateBBox(l[0],l[1]),this._updateBBox(l[2],l[3]),this._updateBBox(l[4],l[5])}b.x=h,b.y=i}return this.lastControl.type="",c},_closePath:function(){return this.lastControl.type="",["x"]},_getRealBBox:function(){return this._confirmSegmented(),this.tbbox?this.tbbox:("string"==typeof this.shape.path&&(this.shape.path=""),this.inherited(arguments))}}),q.Path.nodeType="shape",q.TextPath=b("dojox.gfx.vml.TextPath",[q.Path,l.TextPath],{constructor:function(b){b&&b.setAttribute("dojoGfxType","textpath"),this.fontStyle=null,"text"in this||(this.text=a.clone(j.defaultTextPath)),"fontStyle"in this||(this.fontStyle=a.clone(j.defaultFont))},setText:function(a){return this.text=j.makeParameters(this.text,"string"==typeof a?{text:a}:a),this._setText(),this},setFont:function(a){return this.fontStyle="string"==typeof a?j.splitFontString(a):j.makeParameters(j.defaultFont,a),this._setFont(),this},_setText:function(){this.bbox=null;for(var a=this.rawNode,b=this.text,c=null,d=null,e=a.childNodes,f=0;f<e.length;++f){var g=e[f].tagName;if("path"==g){if(c=e[f],d)break}else if("textpath"==g&&(d=e[f],c))break}c||(c=this.rawNode.ownerDocument.createElement("v:path"),a.appendChild(c)),d||(d=this.rawNode.ownerDocument.createElement("v:textpath"),a.appendChild(d)),c.textPathOk=!0,d.on=!0;var h=q.text_alignment[b.align];d.style["v-text-align"]=h||"left",d.style["text-decoration"]=b.decoration,d.style["v-rotate-letters"]=b.rotated,d.style["v-text-kern"]=b.kerning,d.string=b.text},_setFont:function(){for(var a=this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if("textpath"==b[c].tagName){b[c].style.font=j.makeFontString(a);break}}}),q.TextPath.nodeType="shape",q.Surface=b("dojox.gfx.vml.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){this.clear(!0),this.inherited(arguments)},setDimensions:function(a,b){if(this.width=j.normalizedLength(a),this.height=j.normalizedLength(b),!this.rawNode)return this;var c,d=this.clipNode.style,e=this.rawNode,f=e.style,g=this.bgNode.style,h=this._parent.style;for(h.width=a,h.height=b,d.width=a,d.height=b,d.clip="rect(0px "+a+"px "+b+"px 0px)",f.width=a,f.height=b,e.coordsize=a+" "+b,g.width=a,g.height=b,c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this},getDimensions:function(){var a=this.rawNode?{width:j.normalizedLength(this.rawNode.style.width),height:j.normalizedLength(this.rawNode.style.height)}:null;return a.width<=0&&(a.width=this.width),a.height<=0&&(a.height=this.height),a}}),q.createSurface=function(a,b,c){if(!b&&!c){var d=h.position(a);b=b||d.w,c=c||d.h}"number"==typeof b&&(b+="px"),"number"==typeof c&&(c+="px");var f=new q.Surface,i=g.byId(a),k=f.clipNode=i.ownerDocument.createElement("div"),l=f.rawNode=i.ownerDocument.createElement("v:group"),m=k.style,n=l.style;e("ie")>7&&(n.display="inline-block"),f._parent=i,f._nodes.push(k),i.style.width=b,i.style.height=c,m.position="absolute",m.width=b,m.height=c,m.clip="rect(0px "+b+" "+c+" 0px)",n.position="absolute",n.width=b,n.height=c,l.coordsize=("100%"===b?b:parseFloat(b))+" "+("100%"===c?c:parseFloat(c)),l.coordorigin="0 0";var o=f.bgNode=l.ownerDocument.createElement("v:rect"),p=o.style;return p.left=p.top=0,p.width=n.width,p.height=n.height,o.filled=o.stroked="f",l.appendChild(o),k.appendChild(l),i.appendChild(k),f.width=j.normalizedLength(b),f.height=j.normalizedLength(c),f};var v=function(a){if(this!=a.getParent()){var b=a.getParent();b&&b.remove(a),this.rawNode.appendChild(a.rawNode),x.add.apply(this,arguments),p(this,function(a){"function"==typeof a.getFont&&(a.setShape(a.getShape()),a.setFont(a.getFont())),"function"==typeof a.setFill&&(a.setFill(a.getFill()),a.setStroke(a.getStroke()))})}return this},w=function(a){return this!=a.getParent()&&(this.rawNode.appendChild(a.rawNode),a.getParent()||(a.setFill(a.getFill()),a.setStroke(a.getStroke())),x.add.apply(this,arguments)),this},x=k.Container,y={add:!0===f.fixVmlAdd?v:w,remove:function(a,b){return this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),x.remove.apply(this,arguments)),this},clear:function(){for(var a=this.rawNode;a.firstChild!=a.lastChild;)a.firstChild!=this.bgNode&&a.removeChild(a.firstChild),a.lastChild!=this.bgNode&&a.removeChild(a.lastChild);return x.clear.apply(this,arguments)},getBoundingBox:x.getBoundingBox,_moveChildToFront:x._moveChildToFront,_moveChildToBack:x._moveChildToBack},z={createGroup:function(){var a=this.createObject(q.Group,null),b=a.rawNode.ownerDocument.createElement("v:rect");return b.style.left=b.style.top=0,b.style.width=a.rawNode.style.width,b.style.height=a.rawNode.style.height,b.filled=b.stroked="f",a.rawNode.appendChild(b),a.bgNode=b,a},createImage:function(a){if(!this.rawNode)return null;var b=new q.Image,c=this.rawNode.ownerDocument,d=c.createElement("v:rect");d.stroked="f",d.style.width=this.rawNode.style.width,d.style.height=this.rawNode.style.height;var e=c.createElement("v:imagedata");return d.appendChild(e),b.setRawNode(d),this.rawNode.appendChild(d),b.setShape(a),this.add(b),b},createRect:function(a){if(!this.rawNode)return null;var b=new q.Rect,c=this.rawNode.ownerDocument.createElement("v:roundrect");return e("ie")>7&&(c.style.display="inline-block"),b.setRawNode(c),this.rawNode.appendChild(c),b.setShape(a),this.add(b),b},createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=this.rawNode.ownerDocument.createElement("v:"+a.nodeType);switch(c.setRawNode(d),this.rawNode.appendChild(d),a){case q.Group:case q.Line:case q.Polyline:case q.Image:case q.Text:case q.Path:case q.TextPath:this._overrideSize(d)}return c.setShape(b),this.add(c),c},_overrideSize:function(a){var b=this.rawNode.style,c=b.width,d=b.height;a.style.width=c,a.style.height=d,a.coordsize=parseInt(c)+" "+parseInt(d)}};return a.extend(q.Group,y),a.extend(q.Group,k.Creator),a.extend(q.Group,z),a.extend(q.Surface,y),a.extend(q.Surface,k.Creator),a.extend(q.Surface,z),q.fixTarget=function(a,b){return a.gfxTarget||(a.gfxTarget=a.target.__gfxObject__),!0},q})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(a,b,c){function d(a){var b=Math.cos(a),c=Math.sin(a),d={x:b+4/3*(1-b),y:c-4/3*b*(1-b)/c};return{s:{x:b,y:-c},c1:{x:d.x,y:-d.y},c2:d,e:{x:b,y:c}}}var e=2*Math.PI,f=Math.PI/4,g=Math.PI/8,h=f+g,i=d(g);return a.arc={unitArcAsBezier:d,curvePI4:i,arcAsBezier:function(a,b,j,k,l,m,n,o){l=Boolean(l),m=Boolean(m);var p=c._degToRad(k),q=b*b,r=j*j,s=c.multiplyPoint(c.rotate(-p),{x:(a.x-n)/2,y:(a.y-o)/2}),t=s.x*s.x,u=s.y*s.y,v=Math.sqrt((q*r-q*u-r*t)/(q*u+r*t));isNaN(v)&&(v=0);var w={x:v*b*s.y/j,y:-v*j*s.x/b};l==m&&(w={x:-w.x,y:-w.y});var x=c.multiplyPoint([c.translate((a.x+n)/2,(a.y+o)/2),c.rotate(p)],w),y=c.normalize([c.translate(x.x,x.y),c.rotate(p),c.scale(b,j)]),z=c.invert(y),A=c.multiplyPoint(z,a),B=c.multiplyPoint(z,n,o),C=Math.atan2(A.y,A.x),D=Math.atan2(B.y,B.x),E=C-D;m&&(E=-E),E<0?E+=e:E>e&&(E-=e);for(var F=g,G=i,H=m?F:-F,I=[],J=E;J>0;J-=f){J<h&&(F=J/2,G=d(F),H=m?F:-F,J=0);var K,L,M=c.normalize([y,c.rotate(C+H)]);m?(v=c.multiplyPoint(M,G.c1),K=c.multiplyPoint(M,G.c2),L=c.multiplyPoint(M,G.e)):(v=c.multiplyPoint(M,G.c2),K=c.multiplyPoint(M,G.c1),L=c.multiplyPoint(M,G.s)),I.push([v.x,v.y,K.x,K.y,L.x,L.y]),C+=2*H}return I}}})},"dojox/gfx/gradient":function(){define(["dojo/_base/lang","./matrix","dojo/_base/Color"],function(a,b,c){function d(a,c,d,e,f,g){var h=b.multiplyPoint(d,a,c),i=b.multiplyPoint(e,h);return{r:h,p:i,o:b.multiplyPoint(f,i).x/g}}function e(a,b){return a.o-b.o}var f=a.getObject("dojox.gfx.gradient",!0),g=c;return f.rescale=function(a,b,d){var e,f=a.length,h=d<b;if(h){var i=b;b=d,d=i}if(!f)return[];if(d<=a[0].offset)e=[{offset:0,color:a[0].color},{offset:1,color:a[0].color}];else if(b>=a[f-1].offset)e=[{offset:0,color:a[f-1].color},{offset:1,color:a[f-1].color}];else{var j,k,l,m=d-b;for(e=[],b<0&&e.push({offset:0,color:new g(a[0].color)}),l=0;l<f&&(j=a[l],!(j.offset>=b));++l);for(l?(k=a[l-1],e.push({offset:0,color:c.blendColors(new g(k.color),new g(j.color),(b-k.offset)/(j.offset-k.offset))})):e.push({offset:0,color:new g(j.color)});l<f&&(j=a[l],!(j.offset>=d));++l)e.push({offset:(j.offset-b)/m,color:new g(j.color)});l<f?(k=a[l-1],e.push({offset:1,color:c.blendColors(new g(k.color),new g(j.color),(d-k.offset)/(j.offset-k.offset))})):e.push({offset:1,color:new g(a[f-1].color)})}if(h)for(e.reverse(),l=0,f=e.length;l<f;++l)j=e[l],j.offset=1-j.offset;return e},f.project=function(a,c,g,h,i,j){a=a||b.identity;var k=b.multiplyPoint(a,c.x1,c.y1),l=b.multiplyPoint(a,c.x2,c.y2),m=Math.atan2(l.y-k.y,l.x-k.x),n=b.project(l.x-k.x,l.y-k.y),o=b.multiplyPoint(n,k),p=b.multiplyPoint(n,l),q=new b.Matrix2D([b.rotate(-m),{dx:-o.x,dy:-o.y}]),r=b.multiplyPoint(q,p).x,s=[d(g.x,g.y,a,n,q,r),d(h.x,h.y,a,n,q,r),d(g.x,h.y,a,n,q,r),d(h.x,g.y,a,n,q,r)].sort(e),t=s[0].o,u=s[3].o,v=f.rescale(c.colors,t,u);Math.atan2(s[3].r.y-s[0].r.y,s[3].r.x-s[0].r.x);return{type:"linear",x1:s[0].p.x,y1:s[0].p.y,x2:s[3].p.x,y2:s[3].p.y,colors:v,angle:m}},f})},"dojox/grid/_View":function(){define(["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=function(a,b){return void 0==a.style.cssText?a.getAttribute("style"):a.style.cssText},v=d("dojox.grid._View",[m,n],{defaultWidth:"18em",viewWidth:"",templateString:k,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:r._HeaderBuilder,_contentBuilderClass:r._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll"),p.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]),p.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]),this.content=new this._contentBuilderClass(this),this.header=new this._headerBuilderClass(this),this.grid.isLeftToRight()||(this.headerNodeContainer.style.width="")},destroy:function(){q.destroy(this.headerNode),delete this.headerNode;for(var a in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[a]),q.destroy(this.rowNodes[a]);this.rowNodes={},this.source&&this.source.destroy(),this.inherited(arguments)},focus:function(){h("ie")||h("webkit")||h("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){var b=this.structure=a;b.width&&!isNaN(b.width)?this.viewWidth=b.width+"em":this.viewWidth=b.width||(b.noscroll?"auto":this.viewWidth),this._onBeforeRow=b.onBeforeRow||function(){},this._onAfterRow=b.onAfterRow||function(){},this.noscroll=b.noscroll,this.noscroll&&(this.scrollboxNode.style.overflow="hidden"),this.simpleStructure=Boolean(1==b.cells.length),this.testFlexCells(),this.updateStructure()},_cleanupRowWidgets:function(a){a&&e.forEach(i("[widgetId]",a).map(b.byNode),function(a){a._destroyOnRemove?(a.destroy(),delete a):a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.removeChild(a.domNode)})},onBeforeRow:function(a,b){this._onBeforeRow(a,b),a>=0&&this._cleanupRowWidgets(this.getRowNode(a))},onAfterRow:function(c,d,f){this._onAfterRow(c,d,f);var g=this.grid;e.forEach(i(".dojoxGridStubNode",f),function(c){if(c&&c.parentNode){var d=c.getAttribute("linkWidget"),e=window.parseInt(q.attr(c,"cellIdx"),10),f=(g.getCell(e),b.byId(d));f?(c.parentNode.replaceChild(f.domNode,c),f._started||f.startup(),a.destroy(c)):c.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var a,b=0;a=this.structure.cells[b];b++)for(var c,d=0;c=a[d];d++)c.view=this,this.flexCells=this.flexCells||c.isFlex();return this.flexCells},updateStructure:function(){this.header.update(),this.content.update()},getScrollbarWidth:function(){var a=this.hasVScrollbar(),b=q.style(this.scrollboxNode,"overflow");return this.noscroll||!b||"hidden"==b?a=!1:"scroll"==b&&(a=!0),a?o.getScrollbar().w:0},getColumnsWidth:function(){var a=this.headerContentNode;return a&&a.firstChild?a.firstChild.offsetWidth||q.style(a.firstChild,"width"):0},setColumnsWidth:function(a){this.headerContentNode.firstChild.style.width=a+"px",this.viewWidth&&(this.viewWidth=a+"px")},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){
return Math.max(0,q._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="",this.renderHeader(),this._togglingColumn>=0&&(this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1);var a=this.grid.layout.cells,b=f.hitch(this,function(b,c){!this.grid.isLeftToRight()&&(c=!c);for(var d=c?-1:1,e=this.header.getCellNodeIndex(b)+d,f=a[e];f&&f.getHeaderNode()&&"none"==f.getHeaderNode().style.display;)e+=d,f=a[e];return f?f.getHeaderNode():null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();var c="dojoxGrid_bottomMarker",d="dojoxGrid_topMarker";this.bottomMarker&&q.destroy(this.bottomMarker),this.bottomMarker=q.byId(c),this.topMarker&&q.destroy(this.topMarker),this.topMarker=q.byId(d),this.bottomMarker||(this.bottomMarker=q.create("div",{id:c,class:"dojoxGridColPlaceBottom"},j.body()),this._hide(this.bottomMarker),this.topMarker=q.create("div",{id:d,class:"dojoxGridColPlaceTop"},j.body()),this._hide(this.topMarker)),this.arrowDim=q.contentBox(this.bottomMarker);var e=q.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new l(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:f.hitch(this,function(a){this.header.decorateEvent(a),(this.header.overRightResizeArea(a)||this.header.overLeftResizeArea(a))&&this.header.canResize(a)&&!this.header.moveable?this.header.beginColumnResize(a):(this.grid.headerMenu&&this.grid.headerMenu.onCancel(!0),a.button===(h("ie")<9?1:0)&&l.prototype.onMouseDown.call(this.source,a))}),onMouseOver:f.hitch(this,function(a){var b=this.source;b._getChildByEvent(a)&&l.prototype.onMouseOver.apply(b,arguments)}),_markTargetAnchor:f.hitch(this,function(a){var c=this.source;if(c.current!=c.targetAnchor||c.before!=a){c.targetAnchor&&b(c.targetAnchor,c.before)&&c._removeItemClass(b(c.targetAnchor,c.before),c.before?"After":"Before"),l.prototype._markTargetAnchor.call(c,a);var d=a?c.targetAnchor:b(c.targetAnchor,c.before),f=0;d||(d=c.targetAnchor,f=q.contentBox(d).w+this.arrowDim.w/2+2);var g=q.position(d,!0),h=Math.floor(g.x-this.arrowDim.w/2+f);q.style(this.bottomMarker,"visibility","visible"),q.style(this.topMarker,"visibility","visible"),q.style(this.bottomMarker,{left:h+"px",top:e+g.y+"px"}),q.style(this.topMarker,{left:h+"px",top:g.y-this.arrowDim.h+"px"}),c.targetAnchor&&b(c.targetAnchor,c.before)&&c._addItemClass(b(c.targetAnchor,c.before),c.before?"After":"Before")}}),_unmarkTargetAnchor:f.hitch(this,function(){var a=this.source;a.targetAnchor&&(a.targetAnchor&&b(a.targetAnchor,a.before)&&a._removeItemClass(b(a.targetAnchor,a.before),a.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),l.prototype._unmarkTargetAnchor.call(a))}),destroy:f.hitch(this,function(){g.disconnect(this._source_conn),g.unsubscribe(this._source_sub),l.prototype.destroy.call(this.source),this.bottomMarker&&(q.destroy(this.bottomMarker),delete this.bottomMarker),this.topMarker&&(q.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:f.hitch(this,function(){l.prototype.onDndCancel.call(this.source),this._hide(this.bottomMarker),this._hide(this.topMarker)})}),this._source_conn=g.connect(this.source,"onDndDrop",this,"_onDndDrop"),this._source_sub=g.subscribe("/dnd/drop/before",this,"_onDndDropBefore"),this.source.startup()}},_hide:function(a){q.style(a,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(a,b,c){if(t.manager().target===this.source){this.source._targetNode=this.source.targetAnchor,this.source._beforeTarget=this.source.before;var d=this.grid.views.views,e=d[a.viewIndex],f=d[this.index];f!=e&&(e.convertColPctToFixed(),f.convertColPctToFixed())}},_onDndDrop:function(a,b,c){if(t.manager().target!==this.source)return void(t.manager().source===this.source&&(this._removingColumn=!0));this._hide(this.bottomMarker),this._hide(this.topMarker);var d=function(a){return a?q.attr(a,"idx"):null},e=q.marginBox(b[0]).w;if(a.viewIndex!==this.index){var f=this.grid.views.views,g=f[a.viewIndex],h=f[this.index];g.viewWidth&&"auto"!=g.viewWidth&&g.setColumnsWidth(g.getColumnsWidth()-e),h.viewWidth&&"auto"!=h.viewWidth&&h.setColumnsWidth(h.getColumnsWidth())}var i=this.source._targetNode,j=this.source._beforeTarget;!this.grid.isLeftToRight()&&(j=!j);var k=this.grid.layout,l=this.index;delete this.source._targetNode,delete this.source._beforeTarget,k.moveColumn(a.viewIndex,l,d(b[0]),d(i),j)},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent),this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth),p.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);/^\s+$/.test(b)&&(b="&nbsp;");var c=['<div class="dojoxGridSortNode'];return a.index!=a.grid.getSortIndex()?c.push('">'):c=c.concat([" ",a.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',a.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']),c=c.concat([b,"</div></div>"]),c.join("")},resize:function(){this.adaptHeight(),this.adaptWidth()},hasHScrollbar:function(a){var b=this._hasHScroll||!1;if(void 0==this._hasHScroll||a)if(this.noscroll)this._hasHScroll=!1;else{var c=q.style(this.scrollboxNode,"overflow");this._hasHScroll="hidden"!=c&&("scroll"==c||this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth)}return b!==this._hasHScroll&&this.grid.update(),this._hasHScroll},hasVScrollbar:function(a){var b=this._hasVScroll||!1;if(void 0==this._hasVScroll||a)if(this.noscroll)this._hasVScroll=!1;else{var c=q.style(this.scrollboxNode,"overflow");this._hasVScroll="hidden"!=c&&("scroll"==c||this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight)}return b!==this._hasVScroll&&this.grid.update(),this._hasVScroll},convertColPctToFixed:function(){var a=!1;this.grid.initialWidth="";var b=i("th",this.headerContentNode),c=e.map(b,function(b,c){var d=b.style.width;if(q.attr(b,"vIdx",c),d&&"%"==d.slice(-1))a=!0;else if(d&&"px"==d.slice(-2))return window.parseInt(d,10);return q.contentBox(b).w});return!!a&&(e.forEach(this.grid.layout.cells,function(a,b){if(a.view==this){var d=a.view.getHeaderCellNode(a.index);if(d&&q.hasAttr(d,"vIdx")){var e=window.parseInt(q.attr(d,"vIdx"));this.setColWidth(b,c[e]),q.removeAttr(d,"vIdx")}}},this),!0)},adaptHeight:function(a){if(!this.grid._autoHeight){var b=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight,c=this,d=function(){for(var a,b=0;b<c.grid.views.views.length;++b)if((a=c.grid.views.views[b])!==c&&a.hasHScrollbar())return!0;return!1};(a||this.noscroll&&d())&&(b-=o.getScrollbar().h),p.setStyleHeightPx(this.scrollboxNode,b)}this.hasVScrollbar(!0)},adaptWidth:function(){this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(a=Math.min(a,this.getColumnsWidth())+"px",this._removingColumn=!1):a=Math.max(a,this.getColumnsWidth())+"px",this.contentNode.style.width=a,this.hasHScrollbar(!0)},setSize:function(a,b){var c=this.domNode.style,d=this.headerNode.style;a&&(c.width=a,d.width=a),c.height=b>=0?b+"px":""},renderRow:function(a){var b=this.createRowNode(a);return this.buildRow(a,b),b},createRowNode:function(a){var b=document.createElement("div");return b.className=this.classTag+"Row",this instanceof c.grid._RowSelector?q.attr(b,"role","presentation"):(q.attr(b,"role","row"),"none"!=this.grid.selectionMode&&b.setAttribute("aria-selected","false")),b[p.gridViewTag]=this.id,b[p.rowIndexTag]=a,this.rowNodes[a]=b,b},buildRow:function(a,b){this.buildRowContent(a,b),this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a),this.flexCells&&this.contentWidth&&(b.firstChild.style.width=this.contentWidth),p.fire(this,"onAfterRow",[a,this.structure.cells,b])},rowRemoved:function(a){a>=0&&this._cleanupRowWidgets(this.getRowNode(a)),this.grid.edit.save(this,a),delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,b){var c=this.getRowNode(a);if(c)return this.content.getCellNode(c,b)},getHeaderCellNode:function(a){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,a)},styleRow:function(a,b){b._style=u(b),this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a){var b=this.getRowNode(a);return b&&(b.style.height="",this.buildRow(a,b)),b},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(a){(h("ff")>=13||h("chrome"))&&(this._nativeScroll=!0);var b=this.grid.isLeftToRight();if(this.firstScroll<2){if(!b&&1==this.firstScroll||b&&0===this.firstScroll){var c=q.marginBox(this.headerNodeContainer);h("ie")?this.headerNodeContainer.style.width=c.w+this.getScrollbarWidth()+"px":h("mozilla")&&(this.headerNodeContainer.style.width=c.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=b?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth)}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var d=this.scrollboxNode.scrollTop;d!==this.lastTop&&this.grid.scrollTo(d),this._nativeScroll=!1},setScrollTop:function(a){return this.lastTop=a,this._nativeScroll||(this.scrollboxNode.scrollTop=a),this.scrollboxNode.scrollTop},doContentEvent:function(a){this.content.decorateEvent(a)&&this.grid.onContentEvent(a)},doHeaderEvent:function(a){this.header.decorateEvent(a)&&this.grid.onHeaderEvent(a)},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){if(this.domNode){this.content.update(),this.grid.update();var a=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=a,this.headerNode.scrollLeft=a}}}),w=d("dojox.grid._GridAvatar",s,{construct:function(){var a=j.doc,b=a.createElement("table");b.cellPadding=b.cellSpacing="0",b.className="dojoxGridDndAvatar",b.style.position="absolute",b.style.zIndex=1999,b.style.margin="0px";var c=a.createElement("tbody"),d=a.createElement("tr"),e=a.createElement("td"),f=a.createElement("td");d.className="dojoxGridDndAvatarItem",f.className="dojoxGridDndAvatarItemImage",f.style.width="16px";var g,h=this.manager.source;if(h.creator)g=h._normalizedCreator(h.getItem(this.manager.nodes[0].id).data,"avatar").node;else{g=this.manager.nodes[0].cloneNode(!0);var i,k;if("tr"==g.tagName.toLowerCase())i=a.createElement("table"),k=a.createElement("tbody"),k.appendChild(g),i.appendChild(k),g=i;else if("th"==g.tagName.toLowerCase()){i=a.createElement("table"),k=a.createElement("tbody");var l=a.createElement("tr");i.cellPadding=i.cellSpacing="0",l.appendChild(g),k.appendChild(l),i.appendChild(k),g=i}}g.id="",e.appendChild(g),d.appendChild(f),d.appendChild(e),q.style(d,"opacity",.9),c.appendChild(d),b.appendChild(c),this.node=b;var m=t.manager();this.oldOffsetY=m.OFFSET_Y,m.OFFSET_Y=1},destroy:function(){t.manager().OFFSET_Y=this.oldOffsetY,this.inherited(arguments)}}),x=t.manager().makeAvatar;return t.manager().makeAvatar=function(){return void 0===this.source.viewIndex||q.hasClass(j.body(),"dijit_a11y")?x.call(t.manager()):new w(this)},v})},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(a,b,c,d,e,f,g){var h=b.getObject("dojox.html.metrics",!0),i=b.getObject("dojox");h.getFontMeasurements=function(){var a,b={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};c("ie")&&((a=f.doc.documentElement.style.fontSize||"")||(f.doc.documentElement.style.fontSize="100%"));var d=f.doc.createElement("div"),e=d.style;e.position="absolute",e.left="-100px",e.top="0",e.width="30px",e.height="1000em",e.borderWidth="0",e.margin="0",e.padding="0",e.outline="0",e.lineHeight="1",e.overflow="hidden",f.body().appendChild(d);for(var g in b)e.fontSize=g,b[g]=16*Math.round(12*d.offsetHeight/16)/12/1e3;return c("ie")&&(f.doc.documentElement.style.fontSize=a),f.body().removeChild(d),d=null,b};var j=null;h.getCachedFontMeasurements=function(a){return!a&&j||(j=h.getFontMeasurements()),j};var k=null,l={};h.getTextBox=function(a,b,c){var d,e;if(k)d=k;else{d=k=f.doc.createElement("div");var h=f.doc.createElement("div");h.appendChild(d),e=h.style,e.overflow="scroll",e.position="absolute",e.left="0px",e.top="-10000px",e.width="1px",e.height="1px",e.visibility="hidden",e.borderWidth="0",e.margin="0",e.padding="0",e.outline="0",f.body().appendChild(h)}if(d.className="",e=d.style,e.borderWidth="0",e.margin="0",e.padding="0",e.outline="0",arguments.length>1&&b)for(var i in b)i in l||(e[i]=b[i]);arguments.length>2&&c&&(d.className=c),d.innerHTML=a;var j=g.position(d);return j.w=d.parentNode.scrollWidth,j};var m={w:16,h:16};return h.getScrollbar=function(){return{w:m.w,h:m.h}},h._fontResizeNode=null,h.initOnFontResize=function(a){var b=h._fontResizeNode=f.doc.createElement("iframe"),d=b.style;d.position="absolute",d.width="5em",d.height="10em",d.top="-10000px",d.display="none",c("ie")?b.onreadystatechange=function(){"complete"==b.contentWindow.document.readyState&&(b.onresize=b.contentWindow.parent[i._scopeName].html.metrics._fontresize)}:b.onload=function(){b.contentWindow.onresize=b.contentWindow.parent[i._scopeName].html.metrics._fontresize},b.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'"),f.body().appendChild(b),h.initOnFontResize=function(){}},h.onFontResize=function(){},h._fontresize=function(){h.onFontResize()},e.addOnUnload(function(){var a=h._fontResizeNode;a&&(c("ie")&&a.onresize?a.onresize=null:a.contentWindow&&a.contentWindow.onresize&&(a.contentWindow.onresize=null),h._fontResizeNode=null)}),d(function(){try{var b=f.doc.createElement("div");b.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;",f.body().appendChild(b),m.w=b.offsetWidth-b.clientWidth,m.h=b.offsetHeight-b.clientHeight,f.body().removeChild(b),delete b}catch(a){}"fontSizeWatch"in a.config&&a.config.fontSizeWatch&&h.initOnFontResize()}),h})},"dojox/grid/util":function(){define(["../main","dojo/_base/lang","dojo/dom"],function(a,b,c){var d=b.getObject("grid.util",!0,a);return d.na="...",d.rowIndexTag="gridRowIndex",d.gridViewTag="gridView",d.fire=function(a,b,c){var d=a&&b&&a[b];return d&&(c?d.apply(a,c):a[b]())},d.setStyleHeightPx=function(a,b){if(b>=0){var c=a.style,d=b+"px";a&&c.height!=d&&(c.height=d)}},d.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"],d.keyEvents=["keyup","keydown","keypress"],d.funnelEvents=function(a,b,c,e){for(var f=e||d.mouseEvents.concat(d.keyEvents),g=0,h=f.length;g<h;g++)b.connect(a,"on"+f[g],c)},d.removeNode=function(a){return a=c.byId(a),a&&a.parentNode&&a.parentNode.removeChild(a),a},d.arrayCompare=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]!=b[c])return!1;return a.length==b.length},d.arrayInsert=function(a,b,c){a.length<=b?a[b]=c:a.splice(b,0,c)},d.arrayRemove=function(a,b){a.splice(b,1)},d.arraySwap=function(a,b,c){var d=a[b];a[b]=a[c],a[c]=d},d})},"dojox/grid/_Builder":function(){define(["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/window","dojo/_base/event","dojo/_base/sniff","dojo/_base/connect","dojo/dnd/Moveable","dojox/html/metrics","./util","dojo/_base/html","dojo/dom-geometry"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a.grid,n=function(a){return a.cellIndex>=0?a.cellIndex:b.indexOf(a.parentNode.cells,a)},o=function(a){return a.rowIndex>=0?a.rowIndex:b.indexOf(a.parentNode.childNodes,a)},p=function(a,b){return a&&((a.rows||0)[b]||a.childNodes[b])},q=function(a){for(var b=a;b&&"TABLE"!=b.tagName;b=b.parentNode);return b},r=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},s=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},t=j.rowIndexTag,u=j.gridViewTag,v=m._Builder=c.extend(function(a){a&&(this.view=a,this.grid=a.grid)},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var a=[this._table];return this.view.viewWidth&&a.push([' style="width:',this.view.viewWidth,';"'].join("")),a.push(">"),a},generateCellMarkup:function(a,b,c,d){var e,f=[];if(d){var g=a.index!=a.grid.getSortIndex()?"":a.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';a.id||(a.id=this.grid.id+"Hdr"+a.index),e=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',g,' id="',a.id,'"']}else{e=['<td tabIndex="-1" role="gridcell"',this.grid.editable&&!a.editable?'aria-readonly="true"':""]}return a.colSpan&&e.push(' colspan="',a.colSpan,'"'),a.rowSpan&&e.push(' rowspan="',a.rowSpan,'"'),e.push(' class="dojoxGridCell '),a.classes&&e.push(a.classes," "),c&&e.push(c," "),f.push(e.join("")),f.push(""),e=['" idx="',a.index,'" style="'],b&&";"!=b[b.length-1]&&(b+=";"),e.push(a.styles,b||"",a.hidden?"display:none;":""),a.unitWidth&&e.push("width:",a.unitWidth,";"),f.push(e.join("")),f.push(""),e=['"'],a.attrs&&e.push(" ",a.attrs),e.push(">"),f.push(e.join("")),f.push(""),f.push(d?"</th>":"</td>"),f},isCellNode:function(a){return Boolean(a&&a!=d.doc&&k.attr(a,"idx"))},getCellNodeIndex:function(a){return a?Number(k.attr(a,"idx")):-1},getCellNode:function(a,b){for(var c,d=0;(c=p(a.firstChild,d))&&c.cells;d++)for(var e,f=0;e=c.cells[f];f++)if(this.getCellNodeIndex(e)==b)return e;return null},findCellTarget:function(a,b){for(var c=a;c&&(!this.isCellNode(c)||c.offsetParent&&u in c.offsetParent.parentNode&&c.offsetParent.parentNode[u]!=this.view.id)&&c!=b;)c=c.parentNode;return c!=b?c:null},baseDecorateEvent:function(a){a.dispatch="do"+a.type,a.grid=this.grid,a.sourceView=this.view,a.cellNode=this.findCellTarget(a.target,a.rowNode),a.cellIndex=this.getCellNodeIndex(a.cellNode),a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null},findTarget:function(a,b){for(var c=a;c&&c!=this.domNode&&(!(b in c)||u in c&&c[u]!=this.view.id);)c=c.parentNode;return c!=this.domNode?c:null},findRowTarget:function(a){return this.findTarget(a,t)},isIntraNodeEvent:function(a){try{return a.cellNode&&a.relatedTarget&&k.isDescendant(a.relatedTarget,a.cellNode)}catch(a){return!1}},isIntraRowEvent:function(a){try{var b=a.relatedTarget&&this.findRowTarget(a.relatedTarget);return!b&&-1==a.rowIndex||b&&a.rowIndex==b.gridRowIndex}catch(a){return!1}},dispatchEvent:function(a){return a.dispatch in this&&this[a.dispatch](a)},domouseover:function(a){a.cellNode&&a.cellNode!=this.lastOverCellNode&&(this.lastOverCellNode=a.cellNode,this.grid.onMouseOver(a)),this.grid.onMouseOverRow(a)},domouseout:function(a){a.cellNode&&a.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(a,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(a),this.isIntraRowEvent(a)||this.grid.onMouseOutRow(a))},domousedown:function(a){a.cellNode&&this.grid.onMouseDown(a),this.grid.onMouseDownRow(a)},_getTextDirStyle:function(a,b,c){return""}}),w=m._ContentBuilder=c.extend(function(a){v.call(this,a)},v.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a,b=this.grid.get,c=this.view.structure.cells,d=0;a=c[d];d++)for(var e,f=0;e=a[f];f++)e.get=e.get||void 0==e.value&&b,e.markup=this.generateCellMarkup(e,e.cellStyles,e.cellClasses,!1),!this.grid.editable&&e.editable&&(this.grid.editable=!0)},generateHtml:function(a,b){var c,d=this.getTableArray(),e=this.view,f=e.structure.cells,g=this.grid.getItem(b);j.fire(this.view,"onBeforeRow",[b,f]);for(var h,i=0;h=f[i];i++)if(!h.hidden&&!h.header){d.push(h.invisible?'<tr class="dojoxGridInvisible">':"<tr>");for(var k,l,m,n,o=0;k=h[o];o++)l=k.markup,m=k.customClasses=[],n=k.customStyles=[],l[5]=k.format(b,g),l[1]=m.join(" "),l[3]=n.join(";"),c=k.textDir||this.grid.textDir,c&&(l[3]+=this._getTextDirStyle(c,k,b)),d.push.apply(d,l);d.push("</tr>")}return d.push("</table>"),d.join("")},decorateEvent:function(a){return a.rowNode=this.findRowTarget(a.target),!!a.rowNode&&(a.rowIndex=a.rowNode[t],this.baseDecorateEvent(a),a.cell=this.grid.getCell(a.cellIndex),!0)}}),x=m._HeaderBuilder=c.extend(function(a){this.moveable=null,v.call(this,a)},v.prototype,{_skipBogusClicks:!1,overResizeWidth:4,minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):this.tableMap=new m._TableMap(this.view.structure.cells)},generateHtml:function(a,b){var c,d=this.getTableArray(),e=this.view.structure.cells;j.fire(this.view,"onBeforeRow",[-1,e]);for(var f,g=0;f=e[g];g++)if(!f.hidden){d.push(f.invisible?'<tr class="dojoxGridInvisible">':"<tr>");for(var h,i,k=0;h=f[k];k++)h.customClasses=[],h.customStyles=[],this.view.simpleStructure&&(h.draggable&&(h.headerClasses?-1==h.headerClasses.indexOf("dojoDndItem")&&(h.headerClasses+=" dojoDndItem"):h.headerClasses="dojoDndItem"),h.attrs?-1==h.attrs.indexOf("dndType='gridColumn_")&&(h.attrs+=" dndType='gridColumn_"+this.grid.id+"'"):h.attrs="dndType='gridColumn_"+this.grid.id+"'"),i=this.generateCellMarkup(h,h.headerStyles,h.headerClasses,!0),i[5]=void 0!=b?b:a(h),i[3]=h.customStyles.join(";"),c=h.textDir||this.grid.textDir,c&&(i[3]+=this._getTextDirStyle(c,h,b)),i[1]=h.customClasses.join(" "),d.push(i.join(""));d.push("</tr>")}return d.push("</table>"),d.join("")},getCellX:function(a){var b,c=a.layerX;if(f("mozilla")||f("ie")>=9){b=r(a.target,s("th")),c-=b&&b.offsetLeft||0;a.sourceView.getScrollbarWidth();this.grid.isLeftToRight()||(table=r(b,s("table")),c-=table&&table.offsetLeft||0)}return b=r(a.target,function(){return!(!b||b==a.cellNode)&&(c+=b.offsetLeft<0?0:b.offsetLeft,!0)}),c},decorateEvent:function(a){return this.baseDecorateEvent(a),a.rowIndex=-1,a.cellX=this.getCellX(a),!0},prepareResize:function(a,b){do{var c=a.cellIndex;a.cellNode=c?a.cellNode.parentNode.cells[c+b]:null,a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1}while(a.cellNode&&"none"==a.cellNode.style.display);return Boolean(a.cellNode)},canResize:function(a){if(!a.cellNode||a.cellNode.colSpan>1)return!1;var b=this.grid.getCell(a.cellIndex);return!b.noresize&&b.canResize()},overLeftResizeArea:function(a){if(k.hasClass(d.body(),"dojoDndMove"))return!1;if(f("ie")){var b=a.target;if(k.hasClass(b,"dojoxGridArrowButtonNode")||k.hasClass(b,"dojoxGridArrowButtonChar")||k.hasClass(b,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellIndex>0&&a.cellX>0&&a.cellX<this.overResizeWidth&&this.prepareResize(a,-1):a.cellNode&&a.cellX>0&&a.cellX<this.overResizeWidth},overRightResizeArea:function(a){if(k.hasClass(d.body(),"dojoDndMove"))return!1;if(f("ie")){var b=a.target;if(k.hasClass(b,"dojoxGridArrowButtonNode")||k.hasClass(b,"dojoxGridArrowButtonChar")||k.hasClass(b,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth:a.cellIndex>0&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(a,-1)},domousemove:function(a){if(!this.moveable){var b=this.overRightResizeArea(a)?"dojoxGridColResize":this.overLeftResizeArea(a)?"dojoxGridColResize":"";b&&!this.canResize(a)&&(b="dojoxGridColNoResize"),k.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize","dojoxGridColNoResize"==b),k.toggleClass(a.sourceView.headerNode,"dojoxGridColResize","dojoxGridColResize"==b),b&&e.stop(a)}},domousedown:function(a){this.moveable||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):(this.grid.onMouseDown(a),this.grid.onMouseOverRow(a)))},doclick:function(a){return!!this._skipBogusClicks&&(e.stop(a),!0)},colResizeSetup:function(a,b){var c=k.contentBox(a.sourceView.headerNode);if(b){this.lineDiv=document.createElement("div");var e=k.position(a.sourceView.headerNode,!0),g=k.contentBox(a.sourceView.domNode),h=a.pageX;!this.grid.isLeftToRight()&&f("ie")<8&&(h-=i.getScrollbar().w),k.style(this.lineDiv,{top:e.y+"px",left:h+"px",height:g.h+c.h+"px"}),k.addClass(this.lineDiv,"dojoxGridResizeColLine"),this.lineDiv._origLeft=h,d.body().appendChild(this.lineDiv)}for(var j,l=[],m=this.tableMap.findOverlappingNodes(a.cellNode),n=0;j=m[n];n++)l.push({node:j,index:this.getCellNodeIndex(j),width:j.offsetWidth});for(var o,p=a.sourceView,q=this.grid.isLeftToRight()?1:-1,r=a.grid.views.views,s=[],t=p.idx+q;o=r[t];t+=q)s.push({node:o.headerNode,left:window.parseInt(o.headerNode.style.left)});var u=p.headerContentNode.firstChild;return{scrollLeft:a.sourceView.headerNode.scrollLeft,view:p,node:a.cellNode,index:a.cellIndex,w:k.contentBox(a.cellNode).w,vw:c.w,table:u,tw:k.contentBox(u).w,spanners:l,followers:s}},beginColumnResize:function(a){this.moverDiv=document.createElement("div"),k.style(this.moverDiv,{position:"absolute",left:0}),d.body().appendChild(this.moverDiv),k.addClass(this.grid.domNode,"dojoxGridColumnResizing");var b=this.moveable=new h(this.moverDiv),e=this.colResizeSetup(a,!0);b.onMove=c.hitch(this,"doResizeColumn",e),g.connect(b,"onMoveStop",c.hitch(this,function(){this.endResizeColumn(e),e.node.releaseCapture&&e.node.releaseCapture(),this.moveable.destroy(),delete this.moveable,this.moveable=null,k.removeClass(this.grid.domNode,"dojoxGridColumnResizing")})),a.cellNode.setCapture&&a.cellNode.setCapture(),b.onMouseDown(a)},doResizeColumn:function(a,b,c){var d=c.l,e={deltaX:d,w:a.w+(this.grid.isLeftToRight()?d:-d),vw:a.vw+d,tw:a.tw+d};this.dragRecord={inDrag:a,mover:b,leftTop:c},e.w>=this.minColWidth&&(b?k.style(this.lineDiv,"left",this.lineDiv._origLeft+e.deltaX+"px"):this.doResizeNow(a,e))},endResizeColumn:function(a){if(this.dragRecord){var b=this.dragRecord.leftTop,c=this.grid.isLeftToRight()?b.l:-b.l;c+=Math.max(a.w+c,this.minColWidth)-(a.w+c),f("webkit")&&a.spanners.length&&(c+=k._getPadBorderExtents(a.spanners[0].node).w);var d={deltaX:c,w:a.w+c,vw:a.vw+c,tw:a.tw+c};this.doResizeNow(a,d),delete this.dragRecord}k.destroy(this.lineDiv),k.destroy(this.moverDiv),k.destroy(this.moverDiv),delete this.moverDiv,this._skipBogusClicks=!0,a.view.update(),this._skipBogusClicks=!1,this.grid.onResizeColumn(a.index)},doResizeNow:function(a,b){if(a.view.convertColPctToFixed(),a.view.flexCells&&!a.view.testFlexCells()){var c=q(a.node);c&&(c.style.width="")}var d,e,g,h,i;for(d=0;e=a.spanners[d];d++)(g=e.width+b.deltaX)>0&&(e.node.style.width=g+"px",a.view.setColWidth(e.index,g));if(this.grid.isLeftToRight()||!f("ie"))for(d=0;h=a.followers[d];d++)i=h.left+b.deltaX,h.node.style.left=i+"px";a.node.style.width=b.w+"px",a.view.setColWidth(a.index,b.w),a.view.headerNode.style.width=b.vw+"px",a.view.setColumnsWidth(b.tw),this.grid.isLeftToRight()||(a.view.headerNode.scrollLeft=a.scrollLeft+b.deltaX)}});return m._TableMap=c.extend(function(a){this.mapRows(a)},{map:null,mapRows:function(a){if(a.length){this.map=[];for(var b,c=0;b=a[c];c++)this.map[c]=[];for(var d=0;b=a[d];d++)for(var e,f,g,h=0,i=0;e=b[h];h++){for(;this.map[d][i];)i++;this.map[d][i]={c:h,r:d},g=e.rowSpan||1,f=e.colSpan||1;for(var j=0;j<g;j++)for(var k=0;k<f;k++)this.map[d+j][i+k]=this.map[d][i];i+=f}}},dumpMap:function(){for(var a,b=0,c="";a=this.map[b];b++,c="")for(var d,e=0;d=a[e];e++)c+=d.r+","+d.c+"   "},getMapCoords:function(a,b){for(var c,d=0;c=this.map[d];d++)for(var e,f=0;e=c[f];f++)if(e.c==b&&e.r==a)return{j:d,i:f};return{j:-1,i:-1}},getNode:function(a,b,c){var d=a&&a.rows[b];return d&&d.cells[c]},_findOverlappingNodes:function(a,b,c){for(var d,e=[],f=this.getMapCoords(b,c),g=0;d=this.map[g];g++)if(g!=f.j){var h=d[f.i],i=h?this.getNode(a,h.r,h.c):null;i&&e.push(i)}return e},findOverlappingNodes:function(a){return this._findOverlappingNodes(q(a),o(a.parentNode),n(a))}}),{_Builder:v,_HeaderBuilder:x,_ContentBuilder:w}})},"dojox/grid/DataGrid":function(){define(["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/sniff","dojo/_base/declare","./_Grid","./DataSelection","dojo/_base/html","dojo/has","dojo/has!dojo-bidi?./bidi/_BidiMixin"],function(a,b,c,d,e,f,g,h,i){var j=f("dojox.grid.DataGrid",g,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[],this._store_connects=[],this._by_idty={},this._by_idx=[],this._cache=[],this._pending_requests={},this._setStore(this.store),this.inherited(arguments)},destroy:function(){this.selection.destroy(),this.inherited(arguments)},createSelection:function(){this.selection=new h(this)},get:function(a,c){if(c&&"_item"==this.field&&!this.fields)return c;if(c&&this.fields){var d=[],e=this.grid.store;return b.forEach(this.fields,function(a){d=d.concat(e.getValues(c,a))}),d}return c||"string"!=typeof a?c?this.field?"_item"==this.field?c:this.grid.store.getValue(c,this.field):this.value:this.defaultValue:this.inherited(arguments)},_checkUpdateStatus:function(){if(this.updateDelay>0){var a=!1;if(this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,a=!0),this.updating||(this.beginUpdate(),a=!0),a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay,b.endUpdate()},this.updateDelay)}}},_onSet:function(a,b,c,d){this._checkUpdateStatus();var e=this.getItemIndex(a);e>-1&&this.updateRow(e)},_createItem:function(a,b){var c=this._hasIdentity?this.store.getIdentity(a):d.toJson(this.query)+":idx:"+b+":sort:"+d.toJson(this.getSortProps());return this._by_idty[c]={idty:c,item:a}},_addItem:function(a,b,c){this._by_idx[b]=this._createItem(a,b),c||this.updateRow(b)},_onNew:function(a,b){this._checkUpdateStatus();var c=this.get("rowCount");this._addingItem=!0,this.updateRowCount(c+1),this._addingItem=!1,this._addItem(a,c),this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();var b=this._getItemIndex(a,!0);if(b>=0){this._pages=[],this._bop=-1,this._eop=-1;var c=this._by_idx[b];this._by_idx.splice(b,1),delete this._by_idty[c.idty],this.updateRowCount(this.get("rowCount")-1),0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(b)&&(this.selection.deselect(b),this.selection.selected.splice(b,1))},_onRevert:function(){this._refresh()},setStore:function(a,b,c){this._requestsPending(0)||(this._setQuery(b,c),this._setStore(a),this._refresh(!0))},setQuery:function(a,b){this._requestsPending(0)||(this._setQuery(a,b),this._refresh(!0))},setItems:function(a){this.items=a,this._setStore(this.store),this._refresh(!0)},_setQuery:function(a,b){this.query=a,this.queryOptions=b||this.queryOptions},_setStore:function(a){if(this.store&&this._store_connects&&b.forEach(this._store_connects,this.disconnect,this),this.store=a,this.store){var c=this.store.getFeatures(),d=[];this._canEdit=!!c["dojo.data.api.Write"]&&!!c["dojo.data.api.Identity"],this._hasIdentity=!!c["dojo.data.api.Identity"],c["dojo.data.api.Notification"]&&!this.items&&(d.push(this.connect(this.store,"onSet","_onSet")),d.push(this.connect(this.store,"onNew","_onNew")),d.push(this.connect(this.store,"onDelete","_onDelete"))),this._canEdit&&d.push(this.connect(this.store,"revert","_onRevert")),this._store_connects=d}},_onFetchBegin:function(a,b){this.scroller&&(this.rowCount!=a&&(b.isRender?(this.scroller.init(a,this.keepRows,this.rowsPerPage),this.rowCount=a,
this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(a)),a?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),this.focus.initFocusView()))},_onFetchComplete:function(a,c){this.scroller&&(a&&a.length>0&&(b.forEach(a,function(a,b){this._addItem(a,c.start+b,!0)},this),this.updateRows(c.start,a.length),c.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),e("ie")&&i.setSelectable(this.domNode,this.selectable)),delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0),this._pending_requests[c.start]=!1)},_onFetchError:function(a,b){delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage)),this._pending_requests[b.start]=!1,this.onFetchError(a,b)},onFetchError:function(a,b){},_fetch:function(a,d){if(a=a||0,this.store&&!this._pending_requests[a]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage)),this._pending_requests[a]=!0;try{if(this.items){var e=this.items,f=this.store;this.rowsPerPage=e.length;var g={start:a,count:this.rowsPerPage,isRender:d};this._onFetchBegin(e.length,g);var h=0;if(b.forEach(e,function(a){f.isItemLoaded(a)||h++}),0===h)this._onFetchComplete(e,g);else{var i=function(a){0===--h&&this._onFetchComplete(e,g)};b.forEach(e,function(a){f.isItemLoaded(a)||f.loadItem({item:a,onItem:i,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:d,onBegin:c.hitch(this,"_onFetchBegin"),onComplete:c.hitch(this,"_onFetchComplete"),onError:c.hitch(this,"_onFetchError")})}catch(b){this._onFetchError(b,{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0),this._by_idty={},this._by_idx=[],this._pages=[],this._bop=this._eop=-1,this._isLoaded=!1,this._isLoading=!1},getItem:function(a){var b=this._by_idx[a];return!b||b&&!b.item?(this._preparePage(a),null):b.item},getItemIndex:function(a){return this._getItemIndex(a,!1)},_getItemIndex:function(a,b){if(!b&&!this.store.isItem(a))return-1;for(var c=this._hasIdentity?this.store.getIdentity(a):null,d=0,e=this._by_idx.length;d<e;d++){var f=this._by_idx[d];if(f&&(c&&f.idty==c||f.item===a))return d}return-1},filter:function(a,b){this.query=a,b&&this._clearData(),this._fetch()},_getItemAttr:function(a,b){var c=this.getItem(a);return c?this.store.getValue(c,b):this.fetchText},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem){var b=this._rowToPage(a);this._needPage(b),this._bop=b*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"))}},_needPage:function(a){this._pages[a]||(this._pages[a]=!0,this._requestPage(a))},_requestPage:function(a){var b=this._pageToRow(a);Math.min(this.rowsPerPage,this.get("rowCount")-b)>0&&(this._requests++,this._requestsPending(b)||setTimeout(c.hitch(this,"_fetch",b,!1),1))},getCellName:function(a){return a.field},_refresh:function(a){this._clearData(),this._fetch(0,a)},sort:function(){this.edit.apply(),this._lastScrollTop=this.scrollTop,this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var b=a.sortDesc,c=!(this.sortInfo>0);return b=void 0===b?c:c?!b:b,[{attribute:a.field,descending:b}]}return this.sortFields?this.sortFields:null},styleRowState:function(a){if(this.store&&this.store.getState){for(var b,c=this.store.getState(a.index),d="",e=0,f=["inflight","error","inserting"];b=f[e];e++)if(c[b]){d=" dojoxGridRow-"+b;break}a.customClasses+=d}},onStyleRow:function(a){this.styleRowState(a),this.inherited(arguments)},canEdit:function(a,b){return this._canEdit},_copyAttr:function(a,b){var c=this.getItem(a);return this.store.getValue(c,b)},doStartEdit:function(a,b){this._cache[b]||(this._cache[b]=this._copyAttr(b,a.field)),this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,d){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:c.hitch(this,function(c){var e=this.store.getValue(c,d);if("number"==typeof e)a=isNaN(a)?a:parseFloat(a);else if("boolean"==typeof e)a="true"==a||"false"!=a&&a;else if(e instanceof Date){var f=new Date(a);a=isNaN(f.getTime())?a:f}this.store.setValue(c,d,a),this.onApplyCellEdit(a,b,d)})})},doCancelEdit:function(a){this._cache[a]&&(this.updateRow(a),delete this._cache[a]),this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a,b){this._cache[a];this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=c.hitch(this,function(a){a.length&&(b.forEach(a,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}});return j.cell_markupFactory=function(a,b,d){var e=c.trim(i.attr(b,"field")||"");e&&(d.field=e),d.field=d.field||d.name;var f=c.trim(i.attr(b,"fields")||"");f&&(d.fields=f.split(",")),a&&a(b,d)},j.markupFactory=function(a,b,d,e){return g.markupFactory(a,b,d,c.partial(j.cell_markupFactory,e))},j})},"dojox/grid/_Grid":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","./_Events","./_Scroller","./_Layout","./_View","./_ViewManager","./_RowManager","./_FocusManager","./_EditManager","./Selection","./_RowSelector","./util","dijit/_Widget","dijit/_TemplatedMixin","dijit/CheckedMenuItem","dojo/text!./resources/_Grid.html","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojox/html/metrics","dojo/_base/html","dojo/query","dojo/dnd/common","dojo/i18n!dijit/nls/loading"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){a.isCopyKey||(a.isCopyKey=a.dnd.getCopyKeyState);var z=c("dojox.grid._Grid",[o,p,d],{templateString:r,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,editable:!1,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:f,buildRendering:function(){this.inherited(arguments),this.domNode.getAttribute("tabIndex")||(this.domNode.tabIndex="0"),this.createScroller(),this.createLayout(),this.createViews(),this.createManagers(),this.createSelection(),this.connect(this.selection,"onSelected","onSelected"),this.connect(this.selection,"onDeselected","onDeselected"),this.connect(this.selection,"onChanged","onSelectionChanged"),w.initOnFontResize(),this.connect(w,"onFontResize","textSizeChanged"),n.funnelEvents(this.domNode,this,"doKeyEvent",n.keyEvents),"none"!=this.selectionMode&&this.domNode.setAttribute("aria-multiselectable","single"==this.selectionMode?"false":"true"),x.addClass(this.domNode,this.classTag),this.isLeftToRight()||x.addClass(this.domNode,this.classTag+"Rtl"),this.rowHeight>0&&x.addClass(this.viewsNode,this.classTag+"FixedRowHeight")},postMixInProperties:function(){this.inherited(arguments);var b=a.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=s.substitute(this.loadingMessage,b),this.errorMessage=s.substitute(this.errorMessage,b),this.srcNodeRef&&this.srcNodeRef.style.height&&(this.height=this.srcNodeRef.style.height),this._setAutoHeightAttr(this.autoHeight,!0),this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[],this._setHeaderMenuAttr(this.headerMenu),this._setStructureAttr(this.structure),this._click=[],this.inherited(arguments),this.domNode&&this.autoWidth&&this.initialWidth&&(this.domNode.style.width=this.initialWidth),this.domNode&&!this.editable&&x.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null,this.domNode.onSizeChange=null,delete this._click,this.scroller&&(this.scroller.destroy(),delete this.scroller),this.edit.destroy(),delete this.edit,this.views.destroyViews(),this.focus&&(this.focus.destroy(),delete this.focus),this.headerMenu&&this._placeholders.length&&(t.forEach(this._placeholders,function(a){a.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode)),this.inherited(arguments)},_setAutoHeightAttr:function(a,b){"string"==typeof a&&(a=!(!a||"false"==a)&&("true"==a||window.parseInt(a,10))),"number"==typeof a&&(isNaN(a)&&(a=!1),a<0?a=!0:0===a&&(a=!1)),this.autoHeight=a,this._autoHeight="boolean"==typeof a?a:"number"==typeof a&&a>=this.get("rowCount"),this._started&&!b&&this.render()},_getRowCountAttr:function(){return this.updating&&this.invalidated&&void 0!=this.invalidated.rowCount?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new i(this),this.focus=new j(this),this.edit=new k(this)},createSelection:function(){this.selection=new l(this)},createScroller:function(){this.scroller=new e,this.scroller.grid=this,this.scroller.renderRow=u.hitch(this,"renderRow"),this.scroller.removeRow=u.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this),this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.update()},onResizeColumn:function(a){},createViews:function(){this.views=new h(this),this.views.createView=u.hitch(this,"createView")},createView:function(a,b){var c=u.getObject(a),d=new c({grid:this,index:b});return this.viewsNode.appendChild(d.domNode),this.viewsHeaderNode.appendChild(d.headerNode),this.views.addView(d),x.attr(this.domNode,"align",this.isLeftToRight()?"left":"right"),d},buildViews:function(){for(var a,c=0;a=this.layout.structure[c];c++)this.createView(a.type||b._scopeName+".grid._View",c).setStructure(a);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(b){var c=b;if(c&&u.isString(c)&&(a.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),c=u.getObject(c)),this.structure=c,!c){if(!this.layout.structure)return;c=this.layout.structure}this.views.destroyViews(),this.focus.focusView=null,c!==this.layout.structure&&this.layout.setStructure(c),this._structureChanged()},setStructure:function(b){a.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0"),this._setStructureAttr(b)},getColumnTogglingItems:function(){var a,b=[];return a=t.map(this.layout.cells,function(a){a.menuItems||(a.menuItems=[]);var c=this,d=new q({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(a){if(c.layout.setColumnVisibility(this._gridCell.index,a)){var b=this._gridCell.menuItems;b.length>1&&t.forEach(b,function(b){b!==this&&b.setAttribute("checked",a)},this),a=t.filter(c.layout.cells,function(a){return a.menuItems.length>1?t.forEach(a.menuItems,"item.set('disabled', false);"):a.menuItems[0].set("disabled",!1),!a.hidden}),1==a.length&&t.forEach(a[0].menuItems,"item.set('disabled', true);")}},destroy:function(){var a=t.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(a,1),delete this._gridCell,q.prototype.destroy.apply(this,arguments)}});return a.menuItems.push(d),a.hidden||b.push(d),d},this),1==b.length&&b[0].set("disabled",!0),a},_setHeaderMenuAttr:function(a){this._placeholders&&this._placeholders.length&&(t.forEach(this._placeholders,function(a){a.unReplace(!0)}),this._placeholders=[]),this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode),this.headerMenu=a,a&&(this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders&&(this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)))},setHeaderMenu:function(b){a.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0"),this._setHeaderMenuAttr(b)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&t.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(!0),a.replace(this.getColumnTogglingItems())},this)},_fetch:function(a){this.setScrollTop(0)},getItem:function(a){return null},showMessage:function(a){a?(this.messagesNode.innerHTML=a,this.messagesNode.style.display=""):(this.messagesNode.innerHTML="",this.messagesNode.style.display="none")},_structureChanged:function(){this.buildViews(),this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a,this._pendingResultSize=b,this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||x._getPadBorderExtents(this.domNode),this._padBorder},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,b="none"==a.display?0:this.views.measureHeader();return a.height=b+"px",this.views.normalizeHeaderNodeHeight(),b},_resize:function(a,b){if(a=a||this._pendingChangeSize,b=b||this._pendingResultSize,delete this._pendingChangeSize,delete this._pendingResultSize,this.domNode){var c=this.domNode.parentNode;if(c&&1==c.nodeType&&this.hasLayout()&&"hidden"!=c.style.visibility&&"none"!=c.style.display){var d,e=this._getPadBorder(),f=void 0;this._autoHeight?this.domNode.style.height="auto":"number"==typeof this.autoHeight?(d=f=this._getHeaderHeight(),d+=this.scroller.averageRowHeight*this.autoHeight,this.domNode.style.height=d+"px"):this.domNode.clientHeight<=e.h&&(c==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent"),b&&(a=b),!this._autoHeight&&a?(x.marginBox(this.domNode,a),this.height=this.domNode.style.height,delete this.fitTo):"parent"==this.fitTo&&(d=this._parentContentBoxHeight=this._parentContentBoxHeight>0?this._parentContentBoxHeight:x._getContentBox(c).h,this.domNode.style.height=Math.max(0,d)+"px");var g=t.some(this.views.views,function(a){return a.flexCells});this._autoHeight||0!==(d||x._getContentBox(this.domNode).h)?(this.viewsHeaderNode.style.display="block",g||void 0!==f||(f=this._getHeaderHeight())):this.viewsHeaderNode.style.display="none",g&&(f=void 0),this.adaptWidth(),this.adaptHeight(f),this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,b=a?0:this.domNode.clientWidth||this.domNode.offsetWidth-this._getPadBorder().w,c=this.views.arrange(1,b);this.views.onEach("adaptWidth"),a&&(this.domNode.style.width=c+"px")},adaptHeight:function(a){var b=void 0===a?this._getHeaderHeight():a,c=this._autoHeight?-1:Math.max(this.domNode.clientHeight-b,0)||0;if(this.views.onEach("setSize",[0,c]),this.views.onEach("adaptHeight"),!this._autoHeight){var d=0,e=0,f=t.filter(this.views.views,function(a){var b=a.hasHScrollbar();return b?d++:e++,!b});d>0&&e>0&&t.forEach(f,function(a){a.adaptHeight(!0)})}!0===this.autoHeight||-1!=c||"number"==typeof this.autoHeight&&this.autoHeight>=this.get("rowCount")?this.scroller.windowHeight=c:this.scroller.windowHeight=Math.max(this.domNode.clientHeight-b,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){if(this.domNode&&this._started){if(!this.hasLayout())return void this.scroller.init(0,this.keepRows,this.rowsPerPage);this.update=this.defaultUpdate,this._render()}},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this.setScrollTop(0),this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows,this.scroller.setKeepInfo(this.keepRows),this.views.render(),this._resize()},postrender:function(){this.postresize(),this.focus.initFocusView(),x.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var a=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=a}},renderRow:function(a,b){this.views.renderRow(a,b,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[],this.updating=!0},endUpdate:function(){this.updating=!1;var a,b=this.invalidated;if(b.all)this.update();else if(void 0!=b.rowCount)this.updateRowCount(b.rowCount);else for(a in b)this.updateRow(Number(a));this.invalidated=[]},defaultUpdate:function(){if(this.domNode){if(this.updating)return void(this.invalidated.all=!0);this.lastScrollTop=this.scrollTop,this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender()}},update:function(){this.render()},updateRow:function(a){a=Number(a),this.updating?this.invalidated[a]=!0:(this.views.updateRow(a),this.scroller.rowHeightChanged(a))},updateRows:function(a,b){a=Number(a),b=Number(b);var c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=!0;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){this.updating?this.invalidated.rowCount=a:(this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this.layout.cells.length&&this.scroller.updateRowCount(a),this._resize(),this.layout.cells.length&&this.setScrollTop(this.scrollTop))},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof m))return this.focus.focusView.rowNodes[a];for(var b,c=0;b=this.views.views[c];c++)if(!(b instanceof m))return b.rowNodes[a];return null},rowHeightChanged:function(a){this.views.renormalizeRow(a),this.scroller.rowHeightChanged(a)},fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:v("ie")?100:50,scrollTo:function(a){if(!this.fastScroll)return void this.setScrollTop(a);var b=Math.abs(this.lastScrollTop-a);if(this.lastScrollTop=a,b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0,this.scrollTop=a,this.views.setScrollTop(a),this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll,c.finishScrollJob()},200)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=!1,this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},_mouseOut:function(a){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){return a=void 0==a?this.sortInfo:a,Boolean(a>0)},getSortIndex:function(a){return a=void 0==a?this.sortInfo:a,Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;void 0!=b?c*=b?1:-1:this.getSortIndex()==a&&(c=-this.sortInfo),this.setSortInfo(c)},setSortInfo:function(a){this.canSort(a)&&(this.sortInfo=a,this.sort(),this.update())},doKeyEvent:function(a){a.dispatch="do"+a.type,this.onKeyEvent(a)},_dispatch:function(a,b){return a in this&&this[a](b)},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){a.cellNode?this.onCellClick(a):this.onRowClick(a)},dodblclick:function(a){a.cellNode?this.onCellDblClick(a):this.onRowDblClick(a)},docontextmenu:function(a){a.cellNode?this.onCellContextMenu(a):this.onRowContextMenu(a)},doheaderclick:function(a){a.cellNode?this.onHeaderCellClick(a):this.onHeaderClick(a)},doheaderdblclick:function(a){a.cellNode?this.onHeaderCellDblClick(a):this.onHeaderDblClick(a)},doheadercontextmenu:function(a){a.cellNode?this.onHeaderCellContextMenu(a):this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length)),this.selection.clear()}});return z.markupFactory=function(a,c,d,e){var f=function(a){var b=x.attr(a,"width")||"auto";return"auto"!=b&&"em"!=b.slice(-2)&&"%"!=b.slice(-1)&&(b=parseInt(b,10)+"px"),b};return a.structure||"table"!=c.nodeName.toLowerCase()||(a.structure=y("> colgroup",c).map(function(a){var b=x.attr(a,"span"),c={noscroll:"true"==x.attr(a,"noscroll"),__span:b?parseInt(b,10):1,cells:[]};return x.hasAttr(a,"width")&&(c.width=f(a)),c}),a.structure.length||a.structure.push({__span:1/0,cells:[]}),y("thead > tr",c).forEach(function(c,d){var g,h=0,i=0,j=null;y("> th",c).map(function(c){if(j){if(h>=g+j.__span){i++,g+=j.__span;j=a.structure[i]}}else g=0,j=a.structure[0];var k={name:u.trim(x.attr(c,"name")||c.innerHTML),colSpan:parseInt(x.attr(c,"colspan")||1,10),type:u.trim(x.attr(c,"cellType")||""),id:u.trim(x.attr(c,"id")||"")};h+=k.colSpan;var l=x.attr(c,"rowspan");l&&(k.rowSpan=l),x.hasAttr(c,"width")&&(k.width=f(c)),x.hasAttr(c,"relWidth")&&(k.relWidth=window.parseInt(x.attr(c,"relWidth"),10)),x.hasAttr(c,"hidden")&&(k.hidden="true"==x.attr(c,"hidden")||!0===x.attr(c,"hidden")),e&&e(c,k),k.type=k.type?u.getObject(k.type):b.grid.cells.Cell,k.type&&k.type.markupFactory&&k.type.markupFactory(c,k),j.cells[d]||(j.cells[d]=[]),j.cells[d].push(k)})})),new d(a,c)},z})},"dojox/grid/_Events":function(){define(["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(a,b,c,d,e){return c("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(a){var b=a;b.customClasses+=(b.odd?" dojoxGridRowOdd":"")+(b.selected?" dojoxGridRowSelected":"")+(b.over?" dojoxGridRowOver":""),this.focus.styleRow(a),this.edit.styleRow(a)},onKeyDown:function(b){if(!b.altKey&&!b.metaKey){var c;switch(b.keyCode){case a.ESCAPE:this.edit.cancel();break;case a.ENTER:if(!this.edit.isEditing()){if((c=this.focus.getHeaderIndex())>=0){this.setSortIndex(c);break}this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(b),b.shiftKey),d.stop(b)}if(!b.shiftKey){var e=this.edit.isEditing();this.edit.apply(),e||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}if(!this.edit.isEditing()){(this.focus.focusView||this.views.views[0]).content.decorateEvent(b),this.onRowClick(b),d.stop(b)}break;case a.SPACE:if(!this.edit.isEditing()){if((c=this.focus.getHeaderIndex())>=0){this.setSortIndex(c);break}this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(b),b.shiftKey),d.stop(b)}break;case a.TAB:this.focus[b.shiftKey?"previousKey":"nextKey"](b);break;case a.LEFT_ARROW:case a.RIGHT_ARROW:if(!this.edit.isEditing()){var f=b.keyCode;if(d.stop(b),(c=this.focus.getHeaderIndex())>=0&&b.shiftKey&&b.ctrlKey)this.focus.colSizeAdjust(b,c,5*(f==a.LEFT_ARROW?-1:1));else{var g=f==a.LEFT_ARROW?1:-1;this.isLeftToRight()&&(g*=-1),this.focus.move(0,g)}}break;case a.UP_ARROW:this.edit.isEditing()||0===this.focus.rowIndex||(d.stop(b),this.focus.move(-1,0));break;case a.DOWN_ARROW:this.edit.isEditing()||this.focus.rowIndex+1==this.rowCount||(d.stop(b),this.focus.move(1,0));break;case a.PAGE_UP:this.edit.isEditing()||0===this.focus.rowIndex||(d.stop(b),this.focus.rowIndex!=this.scroller.firstVisibleRow+1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case a.PAGE_DOWN:this.edit.isEditing()||this.focus.rowIndex+1==this.rowCount||(d.stop(b),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)))}}},onMouseOver:function(a){-1==a.rowIndex?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){-1==a.rowIndex?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){-1==a.rowIndex?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){this.rows.isOver(a.rowIndex)||(this.rows.setOverRow(a.rowIndex),-1==a.rowIndex?this.onHeaderMouseOver(a):this.onRowMouseOver(a))},onMouseOutRow:function(a){this.rows.isOver(-1)?this.onHeaderMouseOut(a):this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(a))},onMouseDownRow:function(a){-1!=a.rowIndex&&this.onRowMouseDown(a)},onCellMouseOver:function(a){a.cellNode&&b.add(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){a.cellNode&&b.remove(a.cellNode,this.cellOverClass)},onCellMouseDown:function(a){},onCellClick:function(a){this._click[0]=this._click[1],this._click[1]=a,this.edit.isEditCell(a.rowIndex,a.cellIndex)||this.focus.setFocusCell(a.cell,a.rowIndex),this._click.length>1&&null==this._click[0]&&this._click.shift(),this.onRowClick(a)},onCellDblClick:function(a){var b;b=this._click.length>1&&e("ie")?this._click[1]:this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex?this._click[0]:a,this.focus.setFocusCell(b.cell,b.rowIndex),this.edit.setEditCell(b.cell,b.rowIndex),this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(a,b){this.edit.cellFocus(a,b)},onRowClick:function(a){this.edit.rowClick(a),this.selection.clickSelectEvent(a)},onRowDblClick:function(a){},onRowMouseOver:function(a){},onRowMouseOut:function(a){},onRowMouseDown:function(a){},onRowContextMenu:function(a){d.stop(a)},onHeaderMouseOver:function(a){},onHeaderMouseOut:function(a){},onHeaderCellMouseOver:function(a){a.cellNode&&b.add(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){a.cellNode&&b.remove(a.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(a){},onHeaderClick:function(a){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index),this.onHeaderClick(a)},onHeaderDblClick:function(a){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){this.headerMenu||d.stop(a)},onStartEdit:function(a,b){},onApplyCellEdit:function(a,b,c){},onCancelEdit:function(a){},onApplyEdit:function(a){},onCanSelect:function(a){return!0},onCanDeselect:function(a){return!0},onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}})})},"dojox/grid/_Scroller":function(){define(["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(a,b,c,d,e){var f=function(a){for(var b,c=0,d=a.parentNode;b=d.childNodes[c++];)if(b==a)return c-1;return-1},g=function(b){b&&dojo.forEach(a.toArray(),function(a){a.domNode&&e.isDescendant(a.domNode,b,!0)&&a.destroy()})},h=function(a){var b=e.byId(a);return b&&b.tagName?b.tagName.toLowerCase():""},i=function(a,b){for(var c,d=[],e=0;c=a.childNodes[e];)e++,h(c)==b&&d.push(c);return d},j=function(a){return i(a,"div")};return b("dojox.grid._Scroller",null,{constructor:function(a){this.setContentNodes(a),this.pageHeights=[],this.pageNodes=[],this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(a,b,d){switch(arguments.length){case 3:this.rowsPerPage=d;case 2:this.keepRows=b;case 1:this.rowCount=a}this.defaultPageHeight=(this.grid.rowHeight>0?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage,this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage),this.setKeepInfo(this.keepRows),this.invalidate(),this.scrollboxNode&&(this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=c.hitch(this,"onscroll"))},_getPageCount:function(a,b){return a?Math.ceil(a/b)||1:0},destroy:function(){this.invalidateNodes(),delete this.contentNodes,delete this.contentNode,delete this.scrollboxNode},setKeepInfo:function(a){this.keepRows=a,this.keepPages=this.keepRows?Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2):this.keepPages},setContentNodes:function(a){this.contentNodes=a,this.colCount=this.contentNodes?this.contentNodes.length:0,this.pageNodes=[];for(var b=0;b<this.colCount;b++)this.pageNodes[b]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0,this.invalidateNodes(),this.pageHeights=[],this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0,this.resize(),this._invalidating=!1},updateRowCount:function(a){this.invalidateNodes(),this.rowCount=a;var b=this.pageCount;if(0===b&&(this.height=1),this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage),this.pageCount<b)for(var c=b-1;c>=this.pageCount;c--)this.height-=this.getPageHeight(c),delete this.pageHeights[c];else this.pageCount>b&&(this.height+=this.defaultPageHeight*(this.pageCount-b-1)+this.calcLastPageHeight());this.resize()},pageExists:function(a){return Boolean(this.getDefaultPageNode(a))},measurePage:function(a){if(this.grid.rowHeight)return((a+1)*this.rowsPerPage>this.rowCount?this.rowCount-a*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight;var b=this.getDefaultPageNode(a);return b&&b.innerHTML?b.offsetHeight:void 0},positionPage:function(a,b){for(var c=0;c<this.colCount;c++)this.pageNodes[c][a].style.top=b+"px"},repositionPages:function(a){for(var b=this.getDefaultNodes(),c=0,d=0;d<this.stack.length;d++)c=Math.max(this.stack[d],c);for(var e=b[a],f=e?this.getPageNodePosition(e)+this.getPageHeight(a):0,g=a+1;g<=c;g++){if(e=b[g]){if(this.getPageNodePosition(e)==f)return;this.positionPage(g,f)}f+=this.getPageHeight(g)}},installPage:function(a){for(var b=0;b<this.colCount;b++)this.contentNodes[b].appendChild(this.pageNodes[b][a])},preparePage:function(a,b){for(var c=b?this.popPage():null,d=0;d<this.colCount;d++){var e=this.pageNodes[d],f=null===c?this.createPageNode():this.invalidatePageNode(c,e);f.pageIndex=a,e[a]=f}},renderPage:function(a){var b,c,d=[];for(b=0;b<this.colCount;b++)d[b]=this.pageNodes[b][a];for(b=0,c=a*this.rowsPerPage;b<this.rowsPerPage&&c<this.rowCount;b++,c++)this.renderRow(c,d)},removePage:function(a){for(var b=0,c=a*this.rowsPerPage;b<this.rowsPerPage;b++,c++)this.removeRow(c)},destroyPage:function(a){for(var b=0;b<this.colCount;b++){var c=this.invalidatePageNode(a,this.pageNodes[b]);c&&e.destroy(c)}},pacify:function(a){},pacifying:!1,pacifyTicks:200,setPacifying:function(a){this.pacifying!=a&&(this.pacifying=a,this.pacify(this.pacifying))},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var a=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;return this.setPacifying(!0),this.startPacify(),a},endPacify:function(){this.setPacifying(!1)},resize:function(){this.scrollboxNode&&(this.windowHeight=this.scrollboxNode.clientHeight)
;for(var a=0;a<this.colCount;a++)d.setStyleHeightPx(this.contentNodes[a],Math.max(1,this.height));var b=!this._invalidating;if(!b){var c=this.grid.get("autoHeight");"number"==typeof c&&c<=Math.min(this.rowsPerPage,this.rowCount)&&(b=!0)}b&&this.needPage(this.page,this.pageTop);var e=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage,f=this.getPageHeight(this.page);this.averageRowHeight=f>0&&e>0?f/e:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var a=this.pageCount-1,b=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[a]=b,b},updateContentHeight:function(a){this.height+=a,this.resize()},updatePageHeight:function(a,b,c){if(this.pageExists(a)){var d=this.getPageHeight(a),e=this.measurePage(a);if(void 0===e&&(e=d),this.pageHeights[a]=e,d!=e){this.updateContentHeight(e-d);var f=this.grid.get("autoHeight");if("number"==typeof f&&f>this.rowCount||!0===f&&!b)if(c){var g=this.grid.viewsNode.style;g.height=parseInt(g.height)+e-d+"px",this.repositionPages(a)}else this.grid.sizeChange();else this.repositionPages(a)}return e}return 0},rowHeightChanged:function(a,b){this.updatePageHeight(Math.floor(a/this.rowsPerPage),!1,b)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var a=document.createElement("div");return e.attr(a,"role","presentation"),a.style.position="absolute",a.style[this.grid.isLeftToRight()?"left":"right"]="0",a},getPageHeight:function(a){var b=this.pageHeights[a];return void 0!==b?b:this.defaultPageHeight},pushPage:function(a){return this.stack.push(a)},popPage:function(){return this.stack.shift()},findPage:function(a){for(var b=0,c=0,d=0;b<this.pageCount&&(d=this.getPageHeight(b),!(c+d>=a));b++,c+=d);this.page=b,this.pageTop=c},buildPage:function(a,b,c){this.preparePage(a,b),this.positionPage(a,c),this.installPage(a),this.renderPage(a),this.pushPage(a)},needPage:function(a,b){var c=this.getPageHeight(a);return this.pageExists(a)?this.positionPage(a,b):(this.buildPage(a,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,b),c=this.updatePageHeight(a,!0)),c},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(a){if(this.grid.scrollTop=a,this.colCount){this.startPacify(),this.findPage(a);for(var b=this.height,c=this.getScrollBottom(a),d=this.page,e=this.pageTop;d<this.pageCount&&(c<0||e<c);d++)e+=this.needPage(d,e);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,a),this.lastVisibleRow=this.getLastVisibleRow(d-1,e,c),b!=this.height&&this.repositionPages(d-1),this.endPacify()}},getScrollBottom:function(a){return this.windowHeight>=0?a+this.windowHeight:-1},processNodeEvent:function(a,b){for(var c=a.target;c&&c!=b&&c.parentNode&&c.parentNode.parentNode!=b;)c=c.parentNode;if(!c||!c.parentNode||c.parentNode.parentNode!=b)return!1;var d=c.parentNode;return a.topRowIndex=d.pageIndex*this.rowsPerPage,a.rowIndex=a.topRowIndex+f(c),a.rowTarget=c,!0},processEvent:function(a){return this.processNodeEvent(a,this.contentNode)},renderRow:function(a,b){},removeRow:function(a){},getDefaultPageNode:function(a){return this.getDefaultNodes()[a]},positionPageNode:function(a,b){},getPageNodePosition:function(a){return a.offsetTop},invalidatePageNode:function(a,b){var c=b[a];return c&&(delete b[a],this.removePage(a,c),g(c),c.innerHTML=""),c},getPageRow:function(a){return a*this.rowsPerPage},getLastPageRow:function(a){return Math.min(this.rowCount,this.getPageRow(a+1))-1},getFirstVisibleRow:function(a,b,c){if(!this.pageExists(a))return 0;for(var d=this.getPageRow(a),e=this.getDefaultNodes(),f=j(e[a]),g=0,h=f.length;g<h&&b<c;g++,d++)b+=f[g].offsetHeight;return d?d-1:d},getLastVisibleRow:function(a,b,c){if(!this.pageExists(a))return 0;for(var d=this.getDefaultNodes(),e=this.getLastPageRow(a),f=j(d[a]),g=f.length-1;g>=0&&b>c;g--,e--)b-=f[g].offsetHeight;return e+1},findTopRow:function(a){for(var b,c=this.getDefaultNodes(),d=j(c[this.page]),e=0,f=d.length,g=this.pageTop;e<f;e++)if(b=d[e].offsetHeight,(g+=b)>=a)return this.offset=b-(g-a),e+this.page*this.rowsPerPage;return-1},findScrollTop:function(a){var b,c,d=Math.floor(a/this.rowsPerPage),e=0;for(b=0;b<d;b++)e+=this.getPageHeight(b);this.pageTop=e,this.page=d,this.needPage(d,this.pageTop);var f=this.getDefaultNodes(),g=j(f[d]),h=a-this.rowsPerPage*d;for(b=0,c=g.length;b<c&&b<h;b++)e+=g[b].offsetHeight;return e},dummy:0})})},"dojox/grid/_Layout":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-geometry","./cells","./_RowSelector"],function(a,b,c,d,e,f){return c("dojox.grid._Layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(a,b,c,e,f){for(var g,h=this.structure[a].cells[0],i=this.structure[b].cells[0],j=null,k=0,l=0,m=0;g=h[m];m++)if(g.index==c){k=m;break}for(j=h.splice(k,1)[0],j.view=this.grid.views.views[b],m=0,g=null;g=i[m];m++)if(g.index==e){l=m;break}f||(l+=1),i.splice(l,0,j);var n=this.grid.getCell(this.grid.getSortIndex());n&&(n._currentlySorted=this.grid.getSortAsc()),this.cells=[],c=0;var o;for(m=0;o=this.structure[m];m++)for(var p,q=0;p=o.cells[q];q++)for(var r=0;g=p[r];r++){if(g.index=c,this.cells.push(g),"_currentlySorted"in g){var s=c+1;s*=g._currentlySorted?1:-1,this.grid.sortInfo=s,delete g._currentlySorted}c++}d.forEach(this.cells,function(a){var b=a.markup[2].split(" ");parseInt(b[1].substring(5))!=a.index&&(b[1]='idx="'+a.index+'"',a.markup[2]=b.join(" "))}),this.grid.setupHeaderMenu()},setColumnVisibility:function(a,b){var c=this.cells[a];if(c.hidden==b){c.hidden=!b;var d=c.view,e=d.viewWidth;return e&&"auto"!=e&&(d._togglingColumn=f.getMarginBox(c.getHeaderNode()).w||0),d.update(),!0}return!1},addCellDef:function(a,c,d){var f=this,g=function(a){var b=0;return a.colSpan>1?b=0:(b=a.width||f._defaultCellProps.width||f.defaultWidth,isNaN(b)||(b+="em")),b},h={grid:this.grid,subrow:a,layoutIndex:c,index:this.cells.length};if(d&&d instanceof b.grid.cells._Base){var i=e.clone(d);return h.unitWidth=g(i._props),i=e.mixin(i,this._defaultCellProps,d._props,h)}var j=d.type||d.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||b.grid.cells.Cell;return e.isString(j)&&(j=e.getObject(j)),h.unitWidth=g(d),new j(e.mixin({},this._defaultCellProps,d,h))},addRowDef:function(a,b){for(var c,e,f=[],g=0,h=0,i=!0,j=0;c=b[j];j++)if(e=this.addCellDef(a,j,c),f.push(e),this.cells.push(e),i&&e.relWidth)g+=e.relWidth;else if(e.width){var k=e.width;"string"==typeof k&&"%"==k.slice(-1)?h+=window.parseInt(k,10):"auto"==k&&(i=!1)}return g&&i&&d.forEach(f,function(a){a.relWidth&&(a.width=a.unitWidth=a.relWidth/g*(100-h)+"%")}),f},addRowsDef:function(a){var b=[];if(e.isArray(a))if(e.isArray(a[0]))for(var c,d=0;a&&(c=a[d]);d++)b.push(this.addRowDef(d,c));else b.push(this.addRowDef(0,a));return b},addViewDef:function(a){return this._defaultCellProps=a.defaultCell||{},a.width&&"auto"==a.width&&delete a.width,e.mixin({},a,{cells:this.addRowsDef(a.rows||a.cells)})},setStructure:function(a){this.fieldIndex=0,this.cells=[];var c=this.structure=[];if(this.grid.rowSelector){var d={type:b._scopeName+".grid._RowSelector"};if(e.isString(this.grid.rowSelector)){var f=this.grid.rowSelector;"false"==f?d=null:"true"!=f&&(d.width=f)}else this.grid.rowSelector||(d=null);d&&c.push(this.addViewDef(d))}var g=function(a){return"name"in a||"field"in a||"get"in a},h=function(a){return!(!e.isArray(a)||!e.isArray(a[0])&&!g(a[0]))},i=function(a){return null!==a&&e.isObject(a)&&("cells"in a||"rows"in a||"type"in a&&!g(a))};if(e.isArray(a)){for(var j,k=!1,l=0;j=a[l];l++)if(i(j)){k=!0;break}if(k)for(l=0;j=a[l];l++)h(j)?c.push(this.addViewDef({cells:j})):i(j)&&c.push(this.addViewDef(j));else c.push(this.addViewDef({cells:a}))}else i(a)&&c.push(this.addViewDef(a));this.cellCount=this.cells.length,this.grid.setupHeaderMenu()}})})},"dojox/grid/cells":function(){define(["../main","./cells/_base"],function(a){return a.grid.cells})},"dojox/grid/cells/_base":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/_base/connect","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dijit/_Widget","../util"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b("dojox.grid._DeferredTextWidget",k,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(c.hitch(this,function(a){this.domNode&&(this.domNode.innerHTML=a)}))}}),n=function(a){try{l.fire(a,"focus"),l.fire(a,"select")}catch(a){}},o=function(){setTimeout(c.hitch.apply(a,arguments),0)},p=b("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{},c.mixin(this,a),void 0===this.draggable&&(this.draggable=!0)},_defaultFormat:function(a,b){var c=this.grid.formatterScope||this,d=this.formatter;d&&c&&"string"==typeof d&&(d=this.formatter=c[d]);var e=a!=this.defaultValue&&d?d.apply(c,b):a;return void 0===e?this.defaultValue:(e&&e.addBoth&&(e=new m({deferred:e},j.create("span",{innerHTML:this.defaultValue}))),e&&e.declaredClass&&e.startup?"<div class='dojoxGridStubNode' linkWidget='"+e.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>":e)},format:function(a,b){var c=this.grid.edit.info,d=this.get?this.get(a,b):this.value||this.defaultValue;return d=d&&d.replace&&this.grid.escapeHTMLInData?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d,this.editable&&(this.alwaysEditing||c.rowIndex==a&&c.cell==this)?this.formatEditing(c.value?c.value:d,a):this._defaultFormat(d,[d,a,this])},formatEditing:function(a,b){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&"auto"!==a},isFlex:function(){var a=this.unitWidth;return a&&c.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,b){this.getNode(b)&&this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&e.connect(a,"onblur",function(a){setTimeout(c.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(a,b){this._formatPending=!0,o(this,"_formatNode",a,b)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,b){this._formatPending&&(this._formatPending=!1,g("ie")||h.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(b),a,b))},formatNode:function(a,b,c){g("ie")?o(this,"focus",c,a):this.focus(c,a)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,b){var c=this.getEditNode(a);c&&(c[this._valueProp]=b)},focus:function(a,b){n(b||this.getEditNode(a))},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(a){h.setSelectable(this.grid.domNode,!1),this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a),this._finish(a)},cancel:function(a){this.cancelEdit(a),this._finish(a)}});p.markupFactory=function(a,b){var d=c.trim(i.get(a,"formatter")||"");d&&(b.formatter=c.getObject(d)||d);var e=c.trim(i.get(a,"get")||"");e&&(b.get=c.getObject(e));var f=function(b,d,e){var f=c.trim(i.get(a,b)||"");f&&(d[e||b]=!("false"==f.toLowerCase()))};f("sortDesc",b),f("editable",b),f("alwaysEditing",b),f("noresize",b),f("draggable",b);var g=c.trim(i.get(a,"loadingText")||i.get(a,"defaultValue")||"");g&&(b.defaultValue=g);var h=function(b,d,e){var f=c.trim(i.get(a,b)||"")||void 0;f&&(d[e||b]=f)};h("styles",b),h("headerStyles",b),h("cellStyles",b),h("classes",b),h("headerClasses",b),h("cellClasses",b)};var q=p.Cell=b("dojox.grid.cells.Cell",p,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,b){return this.needFormatNode(a,b),'<input class="dojoxGridInput" type="text" value="'+a+'">'},formatNode:function(a,b,c){this.inherited(arguments),this.registerOnBlur(a,c)},doKey:function(a){if(this.keyFilter){-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&d.stop(a)}},_finish:function(a){this.inherited(arguments);var b=this.getEditNode(a);try{l.fire(b,"blur")}catch(a){}}});q.markupFactory=function(a,b){p.markupFactory(a,b);var d=c.trim(i.get(a,"keyFilter")||"");d&&(b.keyFilter=new RegExp(d))},(p.RowIndex=b("dojox.grid.cells.RowIndex",q,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}})).markupFactory=function(a,b){q.markupFactory(a,b)},(p.Select=b("dojox.grid.cells.Select",q,{options:null,values:null,returnIndex:-1,constructor:function(a){this.values=this.values||this.options},formatEditing:function(a,b){this.needFormatNode(a,b);for(var c,d,e=['<select class="dojoxGridSelect">'],f=0;void 0!==(c=this.options[f])&&void 0!==(d=this.values[f]);f++)d=d.replace?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d,c=c.replace?c.replace(/&/g,"&amp;").replace(/</g,"&lt;"):c,e.push("<option",a==d?" selected":"",' value="'+d+'"',">",c,"</option>");return e.push("</select>"),e.join("")},_defaultFormat:function(a,b){var c=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var d=f.indexOf(this.values,c);d>=0&&(c=this.options[d])}return c},getValue:function(a){var b=this.getEditNode(a);if(b){var c=b.selectedIndex,d=b.options[c];return this.returnIndex>-1?c:d.value||d.innerHTML}}})).markupFactory=function(a,b){q.markupFactory(a,b);var d=c.trim(i.get(a,"options")||"");if(d){var e=d.split(",");e[0]!=d&&(b.options=e)}var f=c.trim(i.get(a,"values")||"");if(f){var g=f.split(",");g[0]!=f&&(b.values=g)}};var r=p.AlwaysEdit=b("dojox.grid.cells.AlwaysEdit",q,{alwaysEditing:!0,_formatNode:function(a,b){this.formatNode(this.getEditNode(b),a,b)},applyStaticValue:function(a){var b=this.grid.edit;b.applyCellEdit(this.getValue(a),this,a),b.start(this,a,!0)}});return r.markupFactory=function(a,b){q.markupFactory(a,b)},(p.Bool=b("dojox.grid.cells.Bool",r,{_valueProp:"checked",formatEditing:function(a,b){return'<input class="dojoxGridInput" type="checkbox"'+(a?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}})).markupFactory=function(a,b){r.markupFactory(a,b)},p})},"dojox/grid/_RowSelector":function(){define(["dojo/_base/declare","./_View"],function(a,b){return a("dojox.grid._RowSelector",b,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments),this.scrollboxNode.style.overflow="hidden",this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,b){var c=this.contentWidth||0;b.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+c+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){!("contentWidth"in this)&&this.contentNode&&this.contentNode.offsetWidth>0&&(this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth)},doStyleRowNode:function(a,b){var c=["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(a)&&c.push("dojoxGridRowbarOver"),this.grid.selection.isSelected(a)&&c.push("dojoxGridRowbarSelected"),b.className=c.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){this.isIntraRowEvent(a)||this.grid.onMouseOutRow(a)}})})},"dojox/grid/_ViewManager":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(a,b,c){return a("dojox.grid._ViewManager",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length,this.views.push(a)},destroyViews:function(){for(var a,b=0;a=this.views[b];b++)a.destroy();this.views=[]},getContentNodes:function(){for(var a,b=[],c=0;a=this.views[c];c++)b.push(a.contentNode);return b},forEach:function(a){for(var b,c=0;b=this.views[c];c++)a(b,c)},onEach:function(a,b){b=b||[];for(var c,d=0;c=this.views[d];d++)a in c&&c[a].apply(c,b)},normalizeHeaderNodeHeight:function(){for(var a,b=[],c=0;a=this.views[c];c++)a.headerContentNode.firstChild&&b.push(a.headerContentNode);this.normalizeRowNodeHeights(b)},normalizeRowNodeHeights:function(a){var d=0,e=[];if(this.grid.rowHeight)d=this.grid.rowHeight;else{if(a.length<=1)return;for(var f,g=0;f=a[g];g++)c.contains(f,"dojoxGridNonNormalizedCell")||(e[g]=f.firstChild.offsetHeight,d=Math.max(d,e[g]));d=d>=0?d:0,(b("mozilla")||b("ie")>8)&&d&&d++}for(g=0;f=a[g];g++)e[g]!=d&&(f.firstChild.style.height=d+"px")},resetHeaderNodeHeight:function(){for(var a,b,c=0;a=this.views[c];c++)(b=a.headerContentNode.firstChild)&&(b.style.height="")},renormalizeRow:function(a){for(var b,c,d=[],e=0;(b=this.views[e])&&(c=b.getRowNode(a));e++)c.firstChild.style.height="",d.push(c);this.normalizeRowNodeHeights(d)},getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight(),this.forEach(function(a){a.headerContentNode.style.height=""});var a=0;return this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)}),a},measureContent:function(){var a=0;return this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)}),a},findClient:function(a){var b=this.grid.elasticView||-1;if(b<0)for(var c,d=1;c=this.views[d];d++)if(c.viewWidth){for(d=1;c=this.views[d];d++)if(!c.viewWidth){b=d;break}break}return b<0&&(b=Math.floor(this.views.length/2)),b},arrange:function(a,c){var d,e,f,g=this.views.length,h=this,i=c<=0?g:this.findClient(),j=function(a,c){var d=a.domNode.style,e=a.headerNode.style;h.grid.isLeftToRight()?(d.left=c+"px",e.left=c+"px"):(d.right=c+"px",b("ff")<4?e.right=c+a.getScrollbarWidth()+"px":e.right=c+"px",b("webkit")||"auto"==e.width||(e.width=parseInt(e.width,10)-a.getScrollbarWidth()+"px")),d.top="0px",e.top=0};for(d=0;(e=this.views[d])&&d<i;d++)f=this.getViewWidth(d),e.setSize(f,0),j(e,a),f=e.headerContentNode&&e.headerContentNode.firstChild?e.getColumnsWidth()+e.getScrollbarWidth():e.domNode.offsetWidth,a+=f;d++;for(var k=c,l=g-1;(e=this.views[l])&&d<=l;l--)f=this.getViewWidth(l),e.setSize(f,0),f=e.domNode.offsetWidth,k-=f,j(e,k);return i<g&&(e=this.views[i],f=Math.max(1,k-a),e.setSize(f+"px",0),j(e,a)),a},renderRow:function(a,b,c){for(var d,e,f,g=[],h=0;(d=this.views[h])&&(e=b[h]);h++)f=d.renderRow(a),e.appendChild(f),g.push(f);c||this.normalizeRowNodeHeights(g)},rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(a,b){for(var c,d=0;c=this.views[d];d++)c.updateRow(a);b||this.renormalizeRow(a)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(a){for(var c,d=a,e=0;c=this.views[e];e++)d=c.setScrollTop(a),b("ie")&&c.headerNode&&c.scrollboxNode&&(c.headerNode.scrollLeft=c.scrollboxNode.scrollLeft);return d},getFirstScrollingView:function(){for(var a,b=0;a=this.views[b];b++)if(a.hasHScrollbar()||a.hasVScrollbar())return a;return null}})})},"dojox/grid/_RowManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(a,b,c){var d=function(a,b){void 0==a.style.cssText?a.setAttribute("style",b):a.style.cssText=b};return a("dojox.grid._RowManager",null,{constructor:function(a){this.grid=a},linesToEms:2,overRow:-2,prepareStylingRow:function(a,b){return{index:a,node:b,odd:Boolean(1&a),selected:!!this.grid.selection.isSelected(a),over:this.isOver(a),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(a,b){var c=this.prepareStylingRow(a,b);this.grid.onStyleRow(c),this.applyStyles(c)},applyStyles:function(a){var b=a;b.node.className=b.customClasses;var c=b.node.style.height;d(b.node,b.customStyles+";"+(b.node._style||"")),b.node.style.height=c},updateStyles:function(a){this.grid.updateRowStyles(a)},setOverRow:function(a){var c=this.overRow;this.overRow=a,c!=this.overRow&&(b.isString(c)||c>=0)&&this.updateStyles(c),this.updateStyles(this.overRow)},isOver:function(a){return this.overRow==a&&!c.contains(this.grid.domNode,"dojoxGridColumnResizing")}})})},"dojox/grid/_FocusManager":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/query","./util","dojo/_base/html"],function(a,b,c,d,e,f,g,h,i){return c("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a,this.cell=null,this.rowIndex=-1,this._connects=[],this._headerConnects=[],this.headerMenu=this.grid.headerMenu,this._connects.push(d.connect(this.grid.domNode,"onfocus",this,"doFocus")),this._connects.push(d.connect(this.grid.domNode,"onblur",this,"doBlur")),this._connects.push(d.connect(this.grid.domNode,"mousedown",this,"_mouseDown")),this._connects.push(d.connect(this.grid.domNode,"mouseup",this,"_mouseUp")),this._connects.push(d.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu")),this._connects.push(d.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus")),this._connects.push(d.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur")),this._connects.push(d.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus")),this._connects.push(d.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){a.forEach(this._connects,d.disconnect),a.forEach(this._headerConnects,d.disconnect),delete this.grid,delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0],this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){return!!this.cell&&(this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1)},isFirstFocusCell:function(){return!!this.cell&&(0===this.rowIndex&&0===this.cell.index)},isNoFocusCell:function(){return this.rowIndex<0||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?a.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b&&(i.toggleClass(b,this.focusClass,a),a)){var c=this.scrollIntoView();try{!f("webkit")&&this.grid.edit.isEditing()||(h.fire(b,"focus"),c&&(this.cell.view.scrollboxNode.scrollLeft=c))}catch(a){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid.focused){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{this.grid.edit.isEditing()||(i.toggleClass(a,this.focusClass,!0),this._colHeadNode&&this.blurHeader(),h.fire(a,"focus"))}catch(a){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&this.focusHeader()},_initColumnHeaders:function(){a.forEach(this._headerConnects,d.disconnect),this._headerConnects=[];for(var b=this._findHeaderCells(),c=0;c<b.length;c++)this._headerConnects.push(d.connect(b[c],"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(d.connect(b[c],"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var a=g("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var d=a[c],e=i.hasAttr(d,"tabIndex"),f=i.attr(d,"tabIndex");e&&f<0&&b.push(d)}return b},_setActiveColHeader:function(a,b,c){this.grid.domNode.setAttribute("aria-activedescendant",a.id),null!=c&&c>=0&&c!=b&&i.toggleClass(this._findHeaderCells()[c],this.focusClass,!1),i.toggleClass(a,this.focusClass,!0),this._colHeadNode=a,this._colHeadFocusIdx=b,this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);return a.n&&a.sr&&(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w?a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w:a.n.offsetLeft<a.sr.l&&(a.s.scrollLeft=a.n.offsetLeft)),a.r&&a.sr&&(b+a.r.offsetHeight>a.sr.t+a.sr.h?this.grid.setScrollTop(b+a.r.offsetHeight-a.sr.h):b<a.sr.t&&this.grid.setScrollTop(b)),a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a,d=c.view.scrollboxNode,e={w:d.clientWidth,l:d.scrollLeft,t:d.scrollTop,h:d.clientHeight},f=c.view.getRowNode(this.rowIndex);return{c:c,s:d,sr:e,n:b||a.getNode(this.rowIndex),r:f}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode){var c=this.grid.getCell(a);if(!c)return;b=this._scrollInfo(c,c.getNode(0))}if(b&&b.s&&b.sr&&b.n){var d=b.sr.l+b.sr.w;b.n.offsetLeft+b.n.offsetWidth>d?b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w:b.n.offsetLeft<b.sr.l?b.s.scrollLeft=b.n.offsetLeft:f("ie")<=7&&c&&c.view.headerNode&&(c.view.headerNode.scrollLeft=b.s.scrollLeft)}},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b,c=0;b=this.grid.views.views[c];c++)if(b.headerNode){a=b;break}return a&&"none"==i.getComputedStyle(a.headerNode).display},colSizeAdjust:function(a,b,c){var d=this._findHeaderCells(),e=this.focusView;if(!e||!e.header.tableMap.map)for(var f,g=0;f=this.grid.views.views[g];g++)if(f.header.tableMap.map){e=f;break}var h=d[b];if(e&&(b!=d.length-1||0!==b)&&(e.content.baseDecorateEvent(a),a.cellNode=h,a.cellIndex=e.content.getCellNodeIndex(a.cellNode),a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null,e.header.canResize(a))){var i={l:c},j=e.header.colResizeSetup(a,!1);e.header.doResizeColumn(j,null,i),e.update()}},styleRow:function(a){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,c){a&&!this.isFocusCell(a,c)&&(this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=c,this._focusifyCellNode(!0)),f("opera")?setTimeout(b.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1):this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;if(b>c&&(b=0,a++),a>d&&(b=c,a=d),this.grid.edit.isEditing()){var e=this.grid.getCell(b);if(!this.isLastFocusCell()&&(!e.editable||this.grid.canEdit&&!this.grid.canEdit(e,a)))return this.cell=e,this.rowIndex=a,void this.next()}this.setFocusIndex(a,b)}},previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;if(b<0&&(b=this.grid.layout.cellCount-1,a--),a<0&&(a=0,b=0),this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable)return this.cell=c,this.rowIndex=a,void this.previous()}this.setFocusIndex(a,b)}},move:function(b,c){var d=c<0?-1:1;if(this.isNavHeader()){var e=this._findHeaderCells(),f=currentIdx=a.indexOf(e,this._colHeadNode);for(currentIdx+=c;currentIdx>=0&&currentIdx<e.length&&"none"==e[currentIdx].style.display;)currentIdx+=d;currentIdx>=0&&currentIdx<e.length&&this._setActiveColHeader(e[currentIdx],currentIdx,f)}else if(this.cell){var g=this.grid.scroller,h=this.rowIndex,j=this.grid.rowCount-1,k=Math.min(j,Math.max(0,h+b));b&&(b>0?k>g.getLastPageRow(g.page)&&this.grid.setScrollTop(this.grid.scrollTop+g.findScrollTop(k)-g.findScrollTop(h)):b<0&&k<=g.getPageRow(g.page)&&this.grid.setScrollTop(this.grid.scrollTop-g.findScrollTop(h)-g.findScrollTop(k)));for(var l=this.grid.layout.cellCount-1,m=this.cell.index,n=Math.min(l,Math.max(0,m+c)),o=this.grid.getCell(n);n>=0&&n<l&&o&&!0===o.hidden;)n+=d,o=this.grid.getCell(n);o&&!0!==o.hidden||(n=m);var p=o.getNode(k);if(!p&&b)return void(k+b>=0&&k+b<=j&&this.move(b>0?++b:--b,c));if((!p||"none"===i.style(p,"display"))&&c)return void(n+c>=0&&n+c<=l&&this.move(b,c>0?++c:--c));this.setFocusIndex(k,n),b&&this.grid.updateRow(h)}},previousKey:function(a){this.grid.edit.isEditing()?(e.stop(a),this.previous()):this.isNavHeader()||this._isHeaderHidden()?(this.tabOut(this.grid.domNode),null!=this._colHeadFocusIdx&&(i.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,!1),this._colHeadFocusIdx=null),this._focusifyCellNode(!1)):(this.grid.domNode.focus(),e.stop(a))},nextKey:function(a){this.grid.rowCount;a.target===this.grid.domNode&&null==this._colHeadFocusIdx?(this.focusHeader(),e.stop(a)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),this._colHeadNode=this._colHeadFocusIdx=null):this.grid.edit.isEditing()?(e.stop(a),this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=!0,a.focus()},focusGridView:function(){h.fire(this.focusView,"focus")},focusGrid:function(a){this.focusGridView(),this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var a=!0,b=0===this.grid.rowCount;if(this.isNoFocusCell()&&!b){var c=0;this.grid.getCell(c).hidden&&(c=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,c)}else this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex),this.focusGrid()):a=!1;return this._colHeadNode=this._colHeadFocusIdx=null,a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;for(this._isHeaderHidden()?this.findAndFocusGridCell():this._colHeadFocusIdx||(this.isNoFocusCell()?this._colHeadFocusIdx=0:this._colHeadFocusIdx=this.cell.index),this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<a.length&&"none"==this._colHeadNode.style.display;)this._colHeadFocusIdx++,this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&"none"!=this._colHeadNode.style.display?(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode&&(this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode),this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b),this._scrollHeader(this._colHeadFocusIdx),this._focusifyCellNode(!1)):this.findAndFocusGridCell()},blurHeader:function(){if(i.removeClass(this._colHeadNode,this.focusClass),i.removeAttr(this.grid.domNode,"aria-activedescendant"),this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode),this.headerMenu.bindDomNode(a),this._contextMenuBindNode=a}},doFocus:function(a){if(a&&a.target!=a.currentTarget)return void e.stop(a);this._clickFocus||(this.tabbingOut||this.focusHeader(),this.tabbingOut=!1,e.stop(a))},doBlur:function(a){e.stop(a)},doContextMenu:function(a){this.headerMenu||e.stop(a)},doLastNodeFocus:function(a){this.tabbingOut?this._focusifyCellNode(!1):this.grid.rowCount>0?(this.isNoFocusCell()&&this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader(),this.tabbingOut=!1,e.stop(a)},doLastNodeBlur:function(a){e.stop(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,i.attr(a.target,"idx"),this._colHeadFocusIdx),this._scrollHeader(this.getHeaderIndex()),e.stop(a)},doColHeaderBlur:function(a){i.toggleClass(a.target,this.focusClass,!1)},_mouseDown:function(a){this._clickFocus=dojo.some(this.grid.views.views,function(b){return b.scrollboxNode===a.target})},_mouseUp:function(a){this._clickFocus=!1}})})},"dojox/grid/_EditManager":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/sniff","./util"],function(a,b,c,d,e,f){return c("dojox.grid._EditManager",null,{constructor:function(b){this.grid=b,this.connections=e("ie")?[d.connect(document.body,"onfocus",a.hitch(this,"_boomerangFocus"))]:[],this.connections.push(d.connect(this.grid,"onBlur",this,"apply")),
this.connections.push(d.connect(this.grid,"prerender",this,"_onPreRender"))},info:{},destroy:function(){b.forEach(this.connections,d.disconnect)},cellFocus:function(a,b){this.grid.singleClickEdit||this.isEditRow(b)?this.setEditCell(a,b):this.apply(),(this.isEditing()||a&&a.editable&&a.alwaysEditing)&&this._focusEditor(a,b)},rowClick:function(a){this.isEditing()&&!this.isEditRow(a.rowIndex)&&this.apply()},styleRow:function(a){a.index==this.info.rowIndex&&(a.customClasses+=" dojoxGridRowEditing")},dispatchEvent:function(a){var b=a.cell,c=b&&b.editable?b:0;return c&&c.dispatchEvent(a.dispatch,a)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(a,b){return this.info.rowIndex===a&&this.info.cell.index==b},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(a,b){!this.isEditCell(b,a.index)&&this.grid.canEdit&&this.grid.canEdit(a,b)&&this.start(a,b,this.isEditRow(b)||a.editable)},_focusEditor:function(a,b){f.fire(a,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){this._shouldCatchBoomerang()&&(this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0)},_doCatchBoomerang:function(){e("ie")&&(this._catchBoomerang=(new Date).getTime()+this._boomerangWindow)},start:function(a,b,c){this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.isEditing()&&!this.isEditRow(b)&&(this.applyRowEdit(),this.grid.updateRow(b)),c?(this.info={cell:a,rowIndex:b},this.grid.doStartEdit(a,b),this.grid.updateRow(b)):this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._focusEditor(a,b),this._doCatchBoomerang())},_editorDo:function(a){var b=this.info.cell;b&&b.editable&&b[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(a,b,c){this.grid.canEdit(b,c)&&this.grid.doApplyCellEdit(a,c,b.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){this.isEditing()&&this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},cancel:function(){this.isEditing()&&(this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},save:function(a,b){var c=this.info.cell;!this.isEditRow(a)||b&&c.view!=b||!c.editable||c.save(c,this.info.rowIndex)},restore:function(a,b){var c=this.info.cell;this.isEditRow(b)&&c.view==a&&c.editable&&c.restore(this.info.rowIndex)},_isValidInput:function(){var a=(this.info.cell||{}).widget;return!a||!a.isValid||(a.focused=!0,a.isValid(!0))},_onPreRender:function(){this.isEditing()&&(this.info.value=this.info.cell.getValue())}})})},"dojox/grid/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(a,b,c,d){return a("dojox.grid.Selection",null,{constructor:function(a){this.grid=a,this.selected=[],this.setMode(a.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(a){this.selected.length&&this.deselectAll(),this.mode="extended"!=a&&"multiple"!=a&&"single"!=a&&"none"!=a?"extended":a},onCanSelect:function(a){return this.grid.onCanSelect(a)},onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(a){},onDeselected:function(a){},onChanging:function(){},onChanged:function(){},isSelected:function(a){return"none"!=this.mode&&this.selected[a]},getFirstSelected:function(){if(!this.selected.length||"none"==this.mode)return-1;for(var a=0,b=this.selected.length;a<b;a++)if(this.selected[a])return a;return-1},getNextSelected:function(a){if("none"==this.mode)return-1;for(var b=a+1,c=this.selected.length;b<c;b++)if(this.selected[b])return b;return-1},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(b);return a},getSelectedCount:function(){for(var a=0,b=0;b<this.selected.length;b++)this.selected[b]&&a++;return a},_beginUpdate:function(){0===this.updating&&this.onChanging(),this.updating++},_endUpdate:function(){0===--this.updating&&this.onChanged()},select:function(a){"none"!=this.mode&&("multiple"!=this.mode?(this.deselectAll(a),this.addToSelection(a)):this.toggleSelect(a))},addToSelection:function(a){if("none"!=this.mode){if(c.isArray(a))return void b.forEach(a,this.addToSelection,this);if(a=Number(a),this.selected[a])this.selectedIndex=a;else if(!1!==this.onCanSelect(a)){this.selectedIndex=a;var e=this.grid.getRowNode(a);e&&d.set(e,"aria-selected","true"),this._beginUpdate(),this.selected[a]=!0,this.onSelected(a),this._endUpdate()}}},deselect:function(a){if("none"!=this.mode){if(c.isArray(a))return void b.forEach(a,this.deselect,this);if(a=Number(a),this.selectedIndex==a&&(this.selectedIndex=-1),this.selected[a]){if(!1===this.onCanDeselect(a))return;var e=this.grid.getRowNode(a);e&&d.set(e,"aria-selected","false"),this._beginUpdate(),delete this.selected[a],this.onDeselected(a),this._endUpdate()}}},setSelected:function(a,b){this[b?"addToSelection":"deselect"](a)},toggleSelect:function(a){if(c.isArray(a))return void b.forEach(a,this.toggleSelect,this);this.setSelected(a,!this.selected[a])},_range:function(a,b,c){var d=a>=0?a:b,e=b;d>e&&(e=d,d=b);for(var f=d;f<=e;f++)c(f)},selectRange:function(a,b){this._range(a,b,c.hitch(this,"addToSelection"))},deselectRange:function(a,b){this._range(a,b,c.hitch(this,"deselect"))},insert:function(a){this.selected.splice(a,0,!1),this.selectedIndex>=a&&this.selectedIndex++},remove:function(a){this.selected.splice(a,1),this.selectedIndex>=a&&this.selectedIndex--},deselectAll:function(a){for(var b in this.selected)b!=a&&!0===this.selected[b]&&this.deselect(b)},clickSelect:function(a,b,c){"none"!=this.mode&&(this._beginUpdate(),"extended"!=this.mode?this.select(a):((!c||this.rangeStartIndex<0)&&(this.rangeStartIndex=a),b||this.deselectAll(a),c?this.selectRange(this.rangeStartIndex,a):b?this.toggleSelect(a):this.addToSelection(a)),this._endUpdate())},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.isCopyKey(a),a.shiftKey)},clear:function(){this._beginUpdate(),this.deselectAll(),this._endUpdate()}})})},"dojox/grid/DataSelection":function(){define(["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(a,b,c){return a("dojox.grid.DataSelection",c,{constructor:function(a){a.keepSelection&&(this.preserver=new b(this))},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var a=c.prototype.getFirstSelected.call(this);return-1==a?null:this.grid.getItem(a)},getNextSelected:function(a){var b=this.grid.getItemIndex(a),d=c.prototype.getNextSelected.call(this,b);return-1==d?null:this.grid.getItem(d)},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(this.grid.getItem(b));return a},addToSelection:function(a){if("none"!=this.mode){var b=null;b="number"==typeof a||"string"==typeof a?a:this.grid.getItemIndex(a),c.prototype.addToSelection.call(this,b)}},deselect:function(a){if("none"!=this.mode){var b=null;b="number"==typeof a||"string"==typeof a?a:this.grid.getItemIndex(a),c.prototype.deselect.call(this,b)}},deselectAll:function(a){var b=null;a||"number"==typeof a?(b="number"==typeof a||"string"==typeof a?a:this.grid.getItemIndex(a),c.prototype.deselectAll.call(this,b)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(a,b,c,d){return a("dojox.grid._SelectionPreserver",null,{constructor:function(a){this.selection=a;var d=this.grid=a.grid;this.reset(),this._connects=[b.connect(d,"_setStore",this,"reset"),b.connect(d,"_addItem",this,"_reSelectById"),b.connect(a,"onSelected",c.hitch(this,"_selectById",!0)),b.connect(a,"onDeselected",c.hitch(this,"_selectById",!1)),b.connect(a,"deselectAll",this,"reset")]},destroy:function(){this.reset(),d.forEach(this._connects,b.disconnect),delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(a,b){a&&this.grid._hasIdentity&&(this.selection.selected[b]=this._selectedById[this.grid.store.getIdentity(a)])},_selectById:function(a,b){if("none"!=this.selection.mode&&this.grid._hasIdentity){var c=b,d=this.grid;if("number"==typeof b||"string"==typeof b){var e=d._by_idx[b];c=e&&e.item}return c&&(this._selectedById[d.store.getIdentity(c)]=!!a),c}}})})},"dojox/grid/EnhancedGrid":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-geometry","./DataGrid","./DataSelection","./enhanced/_PluginManager","./enhanced/plugins/_SelectionPreserver","dojo/i18n!./enhanced/nls/EnhancedGrid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.experimental("dojox.grid.EnhancedGrid");var n=c("dojox.grid.EnhancedGrid",i,{plugins:null,pluginMgr:null,_pluginMgrClass:k,postMixInProperties:function(){this._nls=m,this.inherited(arguments)},postCreate:function(){this.pluginMgr=new this._pluginMgrClass(this),this.pluginMgr.preInit(),this.inherited(arguments),this.pluginMgr.postInit()},plugin:function(a){return this.pluginMgr.getPlugin(a)},startup:function(){this.inherited(arguments),this.pluginMgr.startup()},createSelection:function(){this.selection=new b.grid.enhanced.DataSelection(this)},canSort:function(a,b){return!0},doKeyEvent:function(a){try{var b=this.focus.focusView;b.content.decorateEvent(a),a.cell||b.header.decorateEvent(a)}catch(a){}this.inherited(arguments)},doApplyCellEdit:function(a,b,c){if(!c)return void(this.invalidated[b]=!0);this.inherited(arguments)},mixin:function(a,b){var c={};for(var e in b)"_inherited"==e||"declaredClass"==e||"constructor"==e||b.privates&&b.privates[e]||(c[e]=b[e]);d.mixin(a,c)},_copyAttr:function(a,b){if(b)return this.inherited(arguments)},_getHeaderHeight:function(){return this.inherited(arguments),h.getMarginBox(this.viewsHeaderNode).h},_fetch:function(a,b){if(this.items)return this.inherited(arguments);if(a=a||0,this.store&&!this._pending_requests[a]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage)),this._pending_requests[a]=!0;try{var c={start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:b,onBegin:d.hitch(this,"_onFetchBegin"),onComplete:d.hitch(this,"_onFetchComplete"),onError:d.hitch(this,"_onFetchError")};this._storeLayerFetch(c)}catch(b){this._onFetchError(b,{start:a,count:this.rowsPerPage})}}return 0},_storeLayerFetch:function(a){this.store.fetch(a)},getCellByField:function(a){return e.filter(this.layout.cells,function(b){return b.field==a})[0]},onMouseUp:function(a){},createView:function(){var a=this.inherited(arguments);if(f("mozilla")){var b=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},c=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},d=a.header.getCellX;a.header.getCellX=function(e){var f=d.call(a.header,e),h=b(e.target,c("th"));return h&&h!==e.target&&g.isDescendant(e.target,h)&&(f+=h.firstChild.offsetLeft),f}}return a},destroy:function(){delete this._nls,this.pluginMgr.destroy(),this.inherited(arguments)}});return c("dojox.grid.enhanced.DataSelection",j,{constructor:function(a){a.keepSelection&&(this.preserver&&this.preserver.destroy(),this.preserver=new l(this))},_range:function(a,b){this.grid._selectingRange=!0,this.inherited(arguments),this.grid._selectingRange=!1,this.onChanged()},deselectAll:function(a){this.grid._selectingRange=!0,this.inherited(arguments),this.grid._selectingRange=!1,this.onChanged()}}),n.markupFactory=function(a,c,e,f){return b.grid._Grid.markupFactory(a,c,e,d.partial(i.cell_markupFactory,f))},n.registerPlugin=function(a,b){k.registerPlugin(a,b)},n})},"dojox/grid/enhanced/_PluginManager":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","./_Events","./_FocusManager","../util"],function(a,b,c,d,e,f,g,h){var i=c("dojox.grid.enhanced._PluginManager",null,{_options:null,_plugins:null,_connects:null,constructor:function(a){this.grid=a,this._store=a.store,this._options={},this._plugins=[],this._connects=[],this._parseProps(this.grid.plugins),a.connect(a,"_setStore",b.hitch(this,function(a){this._store!==a&&(this.forEach("onSetStore",[a,this._store]),this._store=a)}))},startup:function(){this.forEach("onStartUp")},preInit:function(){this.grid.focus.destroy(),this.grid.focus=new g(this.grid),new f(this.grid),this._init(!0),this.forEach("onPreInit")},postInit:function(){if(this._init(!1),d.forEach(this.grid.views.views,this._initView,this),this._connects.push(e.connect(this.grid.views,"addView",b.hitch(this,this._initView))),this._plugins.length>0){var a=this.grid.edit;a&&(a.styleRow=function(a){})}this.forEach("onPostInit")},forEach:function(a,b){d.forEach(this._plugins,function(c){c&&c[a]&&c[a].apply(c,b||[])})},_parseProps:function(a){if(a){var c,d={},e=this._options,f=this.grid,g=i.registry;for(c in a)a[c]&&this._normalize(c,a,g,d);e.dnd&&(e.columnReordering=!1),b.mixin(f,e)}},_normalize:function(a,c,e,f){if(!e[a])throw new Error("Plugin "+a+" is required.");if(f[a])throw new Error("Recursive cycle dependency is not supported.");var g=this._options;if(g[a])return g[a];f[a]=!0,g[a]=b.mixin({},e[a],b.isObject(c[a])?c[a]:{});var h=g[a].dependency;return h&&(b.isArray(h)||(h=g[a].dependency=[h]),d.forEach(h,function(a){if(!this._normalize(a,c,e,f))throw new Error("Plugin "+a+" is required.")},this)),delete f[a],g[a]},_init:function(a){var b,c,d=this._options;for(b in d)c=d[b].preInit,(a?c:!c)&&d[b].class&&!this.pluginExisted(b)&&this.loadPlugin(b)},loadPlugin:function(a){var b=this._options[a];if(!b)return null;var c=this.getPlugin(a);if(c)return c;var e=b.dependency;d.forEach(e,function(a){if(!this.loadPlugin(a))throw new Error("Plugin "+a+" is required.")},this);var f=b.class;return delete b.class,c=new this.getPluginClazz(f)(this.grid,b),this._plugins.push(c),c},_initView:function(a){a&&(h.funnelEvents(a.contentNode,a,"doContentEvent",["mouseup","mousemove"]),h.funnelEvents(a.headerNode,a,"doHeaderEvent",["mouseup"]))},pluginExisted:function(a){return!!this.getPlugin(a)},getPlugin:function(a){var b=this._plugins;a=a.toLowerCase();for(var c=0,d=b.length;c<d;c++)if(a==b[c].name.toLowerCase())return b[c];return null},getPluginClazz:function(a){if(b.isFunction(a))return a;var c='Please make sure Plugin "'+a+'" is existed.';try{var d=b.getObject(a);if(!d)throw new Error(c);return d}catch(a){throw new Error(c)}},isFixedCell:function(a){return a&&(a.isRowSelector||a.fixedPos)},destroy:function(){d.forEach(this._connects,e.disconnect),this.forEach("destroy"),this.grid.unwrap&&this.grid.unwrap(),delete this._connects,delete this._plugins,delete this._options}});return i.registerPlugin=function(a,c){if(a){var d=i;d.registry=d.registry||{},d.registry[a.prototype.name]=b.mixin({class:a},c||{})}},i})},"dojox/grid/enhanced/_Events":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/keys","dojo/_base/html","dojo/_base/event","dojox/grid/_Events"],function(a,b,c,d,e,f){return b("dojox.grid.enhanced._Events",null,{_events:null,headerCellActiveClass:"dojoxGridHeaderActive",cellActiveClass:"dojoxGridCellActive",rowActiveClass:"dojoxGridRowActive",constructor:function(a){this._events=new f,a.mixin(a,this)},dokeyup:function(a){this.focus.currentArea().keyup(a)},onKeyDown:function(a){if(!a.altKey&&!a.metaKey){var b=this.focus,e=this.edit.isEditing();switch(a.keyCode){case c.TAB:if(a.ctrlKey)return;b.tab(a.shiftKey?-1:1,a);break;case c.UP_ARROW:case c.DOWN_ARROW:if(e)return;b.currentArea().move(a.keyCode==c.UP_ARROW?-1:1,0,a);break;case c.LEFT_ARROW:case c.RIGHT_ARROW:if(e)return;var f=a.keyCode==c.LEFT_ARROW?1:-1;d._isBodyLtr()&&(f*=-1),b.currentArea().move(0,f,a);break;case c.F10:this.menus&&a.shiftKey&&this.onRowContextMenu(a);break;default:b.currentArea().keydown(a)}}},domouseup:function(a){a.cellNode?this.onMouseUp(a):this.onRowSelectorMouseUp(a)},domousedown:function(a){a.cellNode||this.onRowSelectorMouseDown(a)},onMouseUp:function(a){this[-1==a.rowIndex?"onHeaderCellMouseUp":"onCellMouseUp"](a)},onCellMouseDown:function(a){d.addClass(a.cellNode,this.cellActiveClass),d.addClass(a.rowNode,this.rowActiveClass)},onCellMouseUp:function(a){d.removeClass(a.cellNode,this.cellActiveClass),d.removeClass(a.rowNode,this.rowActiveClass)},onCellClick:function(a){this._events.onCellClick.call(this,a),this.focus.contentMouseEvent(a)},onCellDblClick:function(a){this.pluginMgr.isFixedCell(a.cell)||(!(this._click.length>1)||this._click[0]&&this._click[1]||(this._click[0]=this._click[1]=a),this._events.onCellDblClick.call(this,a))},onRowClick:function(a){this.edit.rowClick(a),a.cell&&this.plugin("indirectSelection")||this.selection.clickSelectEvent(a)},onRowContextMenu:function(a){!this.edit.isEditing()&&this.menus&&this.showMenu(a)},onSelectedRegionContextMenu:function(a){this.selectedRegionMenu&&(this.selectedRegionMenu._openMyself({target:a.target,coords:a.keyCode!==c.F10&&"pageX"in a?{x:a.pageX,y:a.pageY}:null}),e.stop(a))},onHeaderCellMouseOut:function(a){a.cellNode&&(d.removeClass(a.cellNode,this.cellOverClass),d.removeClass(a.cellNode,this.headerCellActiveClass))},onHeaderCellMouseDown:function(a){a.cellNode&&d.addClass(a.cellNode,this.headerCellActiveClass)},onHeaderCellMouseUp:function(a){a.cellNode&&d.removeClass(a.cellNode,this.headerCellActiveClass)},onHeaderCellClick:function(a){this.focus.currentArea("header"),a.cell.isRowSelector||this._events.onHeaderCellClick.call(this,a),this.focus.headerMouseEvent(a)},onRowSelectorMouseDown:function(a){this.focus.focusArea("rowHeader",a)},onRowSelectorMouseUp:function(a){},onMouseUpRow:function(a){-1!=a.rowIndex&&this.onRowMouseUp(a)},onRowMouseUp:function(a){}})})},"dojox/grid/enhanced/_FocusManager":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/_base/html","dojo/keys","dijit/a11y","dijit/focus","../_FocusManager"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=c("dojox.grid.enhanced._FocusArea",null,{constructor:function(a,c){this._fm=c,this._evtStack=[a.name];var d=function(){return!0};a.onFocus=a.onFocus||d,a.onBlur=a.onBlur||d,a.onMove=a.onMove||d,a.onKeyUp=a.onKeyUp||d,a.onKeyDown=a.onKeyDown||d,b.mixin(this,a)},move:function(a,b,c){if(this.name){var d,e=this._evtStack.length;for(d=e-1;d>=0;--d)if(!1===this._fm._areas[this._evtStack[d]].onMove(a,b,c))return!1}return!0},_onKeyEvent:function(a,b){if(this.name){var c,d=this._evtStack.length;for(c=d-1;c>=0;--c)if(!1===this._fm._areas[this._evtStack[c]][b](a,!1))return!1;for(c=0;c<d;++c)if(!1===this._fm._areas[this._evtStack[c]][b](a,!0))return!1}return!0},keydown:function(a){return this._onKeyEvent(a,"onKeyDown")},keyup:function(a){return this._onKeyEvent(a,"onKeyUp")},contentMouseEventPlanner:function(){return 0},headerMouseEventPlanner:function(){return 0}});return c("dojox.grid.enhanced._FocusManager",l,{_stopEvent:function(a){try{a&&a.preventDefault&&f.stop(a)}catch(a){}},constructor:function(a){this.grid=a,this._areas={},this._areaQueue=[],this._contentMouseEventHandlers=[],this._headerMouseEventHandlers=[],this._currentAreaIdx=-1,this._gridBlured=!0,this._connects.push(e.connect(a,"onBlur",this,"_doBlur")),this._connects.push(e.connect(a.scroller,"renderPage",this,"_delayedCellFocus")),this.addArea({name:"header",onFocus:b.hitch(this,this.focusHeader),onBlur:b.hitch(this,this._blurHeader),onMove:b.hitch(this,this._navHeader),getRegions:b.hitch(this,this._findHeaderCells),onRegionFocus:b.hitch(this,this.doColHeaderFocus),onRegionBlur:b.hitch(this,this.doColHeaderBlur),onKeyDown:b.hitch(this,this._onHeaderKeyDown)}),this.addArea({name:"content",onFocus:b.hitch(this,this._focusContent),onBlur:b.hitch(this,this._blurContent),onMove:b.hitch(this,this._navContent),onKeyDown:b.hitch(this,this._onContentKeyDown)}),this.addArea({name:"editableCell",onFocus:b.hitch(this,this._focusEditableCell),onBlur:b.hitch(this,this._blurEditableCell),onKeyDown:b.hitch(this,this._onEditableCellKeyDown),onContentMouseEvent:b.hitch(this,this._onEditableCellMouseEvent),contentMouseEventPlanner:function(a,b){return-1}}),this.placeArea("header"),this.placeArea("content"),this.placeArea("editableCell"),this.placeArea("editableCell","above","content")},destroy:function(){for(var a in this._areas){var b=this._areas[a];d.forEach(b._connects,e.disconnect),b._connects=null,b.uninitialize&&b.uninitialize()}this.inherited(arguments)},addArea:function(a){a.name&&b.isString(a.name)&&(this._areas[a.name]&&d.forEach(a._connects,e.disconnect),this._areas[a.name]=new m(a,this),a.onHeaderMouseEvent&&this._headerMouseEventHandlers.push(a.name),a.onContentMouseEvent&&this._contentMouseEventHandlers.push(a.name))},getArea:function(a){return this._areas[a]},_bindAreaEvents:function(){var a,c,f=this._areas;d.forEach(this._areaQueue,function(g){a=f[g],!a._initialized&&b.isFunction(a.initialize)&&(a.initialize(),a._initialized=!0),a.getRegions&&(a._regions=a.getRegions()||[],d.forEach(a._connects||[],e.disconnect),a._connects=[],d.forEach(a._regions,function(b){a.onRegionFocus&&(c=e.connect(b,"onfocus",a.onRegionFocus),a._connects.push(c)),a.onRegionBlur&&(c=e.connect(b,"onblur",a.onRegionBlur),a._connects.push(c))}))})},removeArea:function(a){var b=this._areas[a];if(b){this.ignoreArea(a);var c=d.indexOf(this._contentMouseEventHandlers,a);c>=0&&this._contentMouseEventHandlers.splice(c,1),c=d.indexOf(this._headerMouseEventHandlers,a),c>=0&&this._headerMouseEventHandlers.splice(c,1),d.forEach(b._connects,e.disconnect),b.uninitialize&&b.uninitialize(),delete this._areas[a]}},currentArea:function(a,c){var e,f=this._currentAreaIdx;return b.isString(a)&&(e=d.indexOf(this._areaQueue,a))>=0?(f!=e&&(this.tabbingOut=!1,c&&f>=0&&f<this._areaQueue.length&&this._areas[this._areaQueue[f]].onBlur(),this._currentAreaIdx=e),null):f<0||f>=this._areaQueue.length?new m({},this):this._areas[this._areaQueue[this._currentAreaIdx]]},placeArea:function(a,b,c){if(this._areas[a]){var e=d.indexOf(this._areaQueue,c);switch(b){case"after":e>=0&&++e;case"before":if(e>=0){this._areaQueue.splice(e,0,a);break}default:this._areaQueue.push(a);break;case"above":var f=!0;case"below":var g=this._areas[c];g&&(f?g._evtStack.push(a):g._evtStack.splice(0,0,a))}}},ignoreArea:function(a){this._areaQueue=d.filter(this._areaQueue,function(b){return b!=a})},focusArea:function(a,c){var e;(e="number"==typeof a?a<0?this._areaQueue.length+a:a:d.indexOf(this._areaQueue,b.isString(a)?a:a&&a.name))<0&&(e=0);var f=e-this._currentAreaIdx;this._gridBlured=!1,f?this.tab(f,c):this.currentArea().onFocus(c,f)},tab:function(a,c){if(this._gridBlured=!1,this.tabbingOut=!1,0!==a){var e=this._currentAreaIdx,f=a>0?1:-1;if(e<0||e>=this._areaQueue.length)e=this._currentAreaIdx+=a;else{var g=this._areas[this._areaQueue[e]].onBlur(c,a);!0===g?e=this._currentAreaIdx+=a:b.isString(g)&&this._areas[g]&&(e=this._currentAreaIdx=d.indexOf(this._areaQueue,g))}for(;e>=0&&e<this._areaQueue.length;e+=f)if(this._currentAreaIdx=e,this._areaQueue[e]&&this._areas[this._areaQueue[e]].onFocus(c,a))return;this.tabbingOut=!0,a<0?(this._currentAreaIdx=-1,k.focus(this.grid.domNode)):(this._currentAreaIdx=this._areaQueue.length,k.focus(this.grid.lastFocusNode))}},_onMouseEvent:function(a,b){for(var c=a.toLowerCase(),e=this["_"+c+"MouseEventHandlers"],f=d.map(e,function(a){return{area:a,idx:this._areas[a][c+"MouseEventPlanner"](b,e)}},this).sort(function(a,b){return b.idx-a.idx}),g=d.map(f,function(a){return f.area}),h=f.length;--h>=0;)if(!1===this._areas[f[h].area]["on"+a+"MouseEvent"](b,g))return},contentMouseEvent:function(a){this._onMouseEvent("Content",a)},headerMouseEvent:function(a){this._onMouseEvent("Header",a)},initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0],this._bindAreaEvents()},isNavHeader:function(){return"header"==this._areaQueue[this._currentAreaIdx]},previousKey:function(a){this.tab(-1,a)},nextKey:function(a){this.tab(1,a)},setFocusCell:function(a,b){a&&(this.currentArea(this.grid.edit.isEditing()?"editableCell":"content",!0),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=b,this._focusifyCellNode(!0)),this.grid.onCellFocus(this.cell,this.rowIndex)},doFocus:function(a){a&&a.target==a.currentTarget&&!this.tabbingOut?this._gridBlured&&(this._gridBlured=!1,this._currentAreaIdx<0||this._currentAreaIdx>=this._areaQueue.length?this.focusArea(0,a):this.focusArea(this._currentAreaIdx,a)):this.tabbingOut=!1,f.stop(a)},_doBlur:function(){this._gridBlured=!0},doLastNodeFocus:function(a){this.tabbingOut?this.tabbingOut=!1:this.focusArea(-1,a)},_delayedHeaderFocus:function(){this.isNavHeader()&&!g("ie")&&this.focusHeader()},_delayedCellFocus:function(){},_changeMenuBindNode:function(a,b){var c=this.grid.headerMenu;c&&this._contextMenuBindNode==a&&(c.unBindDomNode(a),c.bindDomNode(b),this._contextMenuBindNode=b)},focusHeader:function(a,b){var c=!1;return this.inherited(arguments),this._colHeadNode&&"none"!=h.style(this._colHeadNode,"display")&&(k.focus(this._colHeadNode),this._stopEvent(a),c=!0),c},_blurHeader:function(a,b){return this._colHeadNode&&h.removeClass(this._colHeadNode,this.focusClass),h.removeAttr(this.grid.domNode,"aria-activedescendant"),this._changeMenuBindNode(this.grid.domNode,this.grid.viewsHeaderNode),this._colHeadNode=this._colHeadFocusIdx=null,!0},_navHeader:function(a,b,c){var e=b<0?-1:1,f=d.indexOf(this._findHeaderCells(),this._colHeadNode);if(f>=0&&c.shiftKey&&c.ctrlKey)return void this.colSizeAdjust(c,f,5*e);this.move(a,b)},_onHeaderKeyDown:function(a,b){if(b){var c=i;switch(a.keyCode){case c.ENTER:case c.SPACE:var d=this.getHeaderIndex();d>=0&&!this.grid.pluginMgr.isFixedCell(a.cell)&&(this.grid.setSortIndex(d,null,a),f.stop(a))}}return!0},_setActiveColHeader:function(){this.inherited(arguments),k.focus(this._colHeadNode)},findAndFocusGridCell:function(){this._focusContent()},_focusContent:function(a,b){var c=!0,d=0===this.grid.rowCount;if(this.isNoFocusCell()&&!d){for(var e=0,f=this.grid.getCell(0);f&&f.hidden;f=this.grid.getCell(++e));this.setFocusIndex(0,f?e:0)}else this.cell&&!d?this.focusView&&!this.focusView.rowNodes[this.rowIndex]?(this.grid.scrollToRow(this.rowIndex),this.focusGrid()):this.setFocusIndex(this.rowIndex,this.cell.index):c=!1;return c&&this._stopEvent(a),c},_blurContent:function(a,b){return this._focusifyCellNode(!1),!0},_navContent:function(a,b,c){0===this.rowIndex&&a<0||this.rowIndex===this.grid.rowCount-1&&a>0||(this._colHeadNode=null,this.move(a,b,c),c&&f.stop(c))},_onContentKeyDown:function(a,b){if(b){var c=i,d=this.grid.scroller;switch(a.keyCode){case c.ENTER:case c.SPACE:var g=this.grid;if(g.indirectSelection)break;g.selection.clickSelect(this.rowIndex,e.isCopyKey(a),a.shiftKey),g.onRowClick(a),f.stop(a);break;case c.PAGE_UP:0!==this.rowIndex&&(this.rowIndex!=d.firstVisibleRow+1?this._navContent(d.firstVisibleRow-this.rowIndex,0):(this.grid.setScrollTop(d.findScrollTop(this.rowIndex-1)),this._navContent(d.firstVisibleRow-d.lastVisibleRow+1,0)),f.stop(a));break;case c.PAGE_DOWN:this.rowIndex+1!=this.grid.rowCount&&(f.stop(a),this.rowIndex!=d.lastVisibleRow-1?this._navContent(d.lastVisibleRow-this.rowIndex-1,0):(this.grid.setScrollTop(d.findScrollTop(this.rowIndex+1)),this._navContent(d.lastVisibleRow-d.firstVisibleRow-1,0)),f.stop(a))}}return!0},_blurFromEditableCell:!1,_isNavigating:!1,_navElems:null,_focusEditableCell:function(a,b){var c=!1;return this._isNavigating?c=!0:this.grid.edit.isEditing()&&this.cell&&(!this._blurFromEditableCell&&this._blurEditableCell(a,b)||(this.setFocusIndex(this.rowIndex,this.cell.index),c=!0),this._stopEvent(a)),c},_applyEditableCell:function(){try{this.grid.edit.apply()}catch(a){}},_blurEditableCell:function(a,b){if(this._blurFromEditableCell=!1,this._isNavigating){var c=!0;if(a){var d=this._navElems,e=d.lowest||d.first,f=d.last||d.highest||e;c=(g("ie")?a.srcElement:a.target)==(b>0?f:e)}return!!c&&(this._isNavigating=!1,h.setSelectable(this.cell.getNode(this.rowIndex),!1),"content")}if(this.grid.edit.isEditing()&&this.cell){if(!b||"number"!=typeof b)return!1;for(var i,j=b>0?1:-1,k=this.grid.layout.cellCount,l=this.cell.index+j;l>=0&&l<k;l+=j)if(i=this.grid.getCell(l),i.editable)return this.cell=i,this._blurFromEditableCell=!0,!1;if((this.rowIndex>0||1==j)&&(this.rowIndex<this.grid.rowCount||-1==j)){for(this.rowIndex+=j,l=j>0?0:k-1;l>=0&&l<k;l+=j)if(i=this.grid.getCell(l),i.editable){this.cell=i;break}return this._applyEditableCell(),"content"}}return!0},_initNavigatableElems:function(){this._navElems=j._getTabNavigable(this.cell.getNode(this.rowIndex))},_onEditableCellKeyDown:function(a,b){var c=i,d=this.grid,e=d.edit,g=!1,j=!0;switch(a.keyCode){case c.ENTER:b&&e.isEditing()&&(this._applyEditableCell(),g=!0,f.stop(a));case c.SPACE:if(!b&&this._isNavigating){j=!1;break}if(b){if(!this.cell.editable&&this.cell.navigatable){this._initNavigatableElems();var l=this._navElems.lowest||this._navElems.first;if(l){this._isNavigating=!0,h.setSelectable(this.cell.getNode(this.rowIndex),!0),k.focus(l),f.stop(a),this.currentArea("editableCell",!0);break}}g||e.isEditing()||d.pluginMgr.isFixedCell(this.cell)||e.setEditCell(this.cell,this.rowIndex),g?this.currentArea("content",!0):this.cell.editable&&d.canEdit()&&this.currentArea("editableCell",!0)}break;case c.PAGE_UP:case c.PAGE_DOWN:!b&&e.isEditing()&&(j=!1);break;case c.ESCAPE:b||(e.cancel(),this.currentArea("content",!0))}return j},_onEditableCellMouseEvent:function(a){if("click"==a.type){var b=this.cell||a.cell;if(b&&!b.editable&&b.navigatable){if(this._initNavigatableElems(),this._navElems.lowest||this._navElems.first){var c=g("ie")?a.srcElement:a.target;if(c!=b.getNode(a.rowIndex))return this._isNavigating=!0,this.focusArea("editableCell",a),h.setSelectable(b.getNode(a.rowIndex),!0),k.focus(c),!1}}else if(this.grid.singleClickEdit)return this.currentArea("editableCell"),!1}return!0}})})},"dojox/grid/enhanced/plugins/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","../../_SelectionPreserver"],function(a,b,c,d){return a("dojox.grid.enhanced.plugins._SelectionPreserver",d,{constructor:function(a){var d=this.grid;d.onSelectedById=this.onSelectedById,this._oldClearData=d._clearData;var e=this;d._clearData=function(){e._updateMapping(!d._noInternalMapping),e._trustSelection=[],e._oldClearData.apply(d,arguments)},this._connects.push(c.connect(a,"selectRange",b.hitch(this,"_updateMapping",!0,!0,!1)),c.connect(a,"deselectRange",b.hitch(this,"_updateMapping",!0,!1,!1)),c.connect(a,"deselectAll",b.hitch(this,"_updateMapping",!0,!1,!0)))},destroy:function(){this.inherited(arguments),this.grid._clearData=this._oldClearData},reset:function(){this.inherited(arguments),this._idMap=[],this._trustSelection=[],this._defaultSelected=!1},_reSelectById:function(a,b){var c=this.selection,d=this.grid;if(a&&d._hasIdentity){var e=d.store.getIdentity(a);void 0===this._selectedById[e]?this._trustSelection[b]||(c.selected[b]=this._defaultSelected):c.selected[b]=this._selectedById[e],this._idMap.push(e),d.onSelectedById(e,b,c.selected[b])}},_selectById:function(a,b){this.inherited(arguments)||(this._trustSelection[b]=!0)},onSelectedById:function(a,b,c){},_updateMapping:function(a,b,c,d,e){var f,g,h=this.selection,i=this.grid,j=0,k=0;for(f=i.rowCount-1;f>=0;--f)i._by_idx[f]?(g=i._by_idx[f].idty)&&(a||void 0===this._selectedById[g])&&(this._selectedById[g]=!!h.selected[f]):(++k,j+=h.selected[f]?1:-1);if(k&&(this._defaultSelected=j>0),c||void 0===d||void 0===e||(c=!i.usingPagination&&Math.abs(e-d+1)===i.rowCount),
c&&(!i.usingPagination||"single"===i.selectionMode))for(f=this._idMap.length-1;f>=0;--f)this._selectedById[this._idMap[f]]=b}})})},"dojox/grid/cells/dijit":function(){define(["dojo/_base/kernel","../../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/connect","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojo/dom-geometry","dojo/data/ItemFileReadStore","dijit/form/DateTextBox","dijit/form/TimeTextBox","dijit/form/ComboBox","dijit/form/CheckBox","dijit/form/TextBox","dijit/form/NumberSpinner","dijit/form/NumberTextBox","dijit/form/CurrencyTextBox","dijit/form/HorizontalSlider","dijit/form/_TextBoxMixin","dijit/Editor","../util","./_base"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){var B={},C=B._Widget=c("dojox.grid.cells._Widget",A,{widgetClass:s,constructor:function(b){this.widget=null,"string"==typeof this.widgetClass&&(a.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0"),this.widgetClass=e.getObject(this.widgetClass))},formatEditing:function(a,b){return this.needFormatNode(a,b),"<div></div>"},getValue:function(a){return this.widget.get("value")},_unescapeHTML:function(a){return a&&a.replace&&this.grid.escapeHTMLInData?a.replace(/&lt;/g,"<").replace(/&amp;/g,"&"):a},setValue:function(a,b){if(this.widget&&this.widget.set)if(b=this._unescapeHTML(b),this.widget.onLoadDeferred){var c=this;this.widget.onLoadDeferred.addCallback(function(){c.widget.set("value",null===b?"":b)})}else this.widget.set("value",b);else this.inherited(arguments)},getWidgetProps:function(a){return e.mixin({dir:this.dir,lang:this.lang},this.widgetProps||{},{constraints:e.mixin({},this.constraint)||{},required:(this.constraint||{}).required,value:this._unescapeHTML(a)})},createWidget:function(a,b,c){return new this.widgetClass(this.getWidgetProps(b),a)},attachWidget:function(a,b,c){a.appendChild(this.widget.domNode),this.setValue(c,b)},formatNode:function(a,b,c){if(!this.widgetClass)return b;this.widget?this.attachWidget.apply(this,arguments):this.widget=this.createWidget.apply(this,arguments),this.sizeWidget.apply(this,arguments),this.grid.views.renormalizeRow(c),this.grid.scroller.rowHeightChanged(c,!0),this.focus()},sizeWidget:function(b,c,d){var e=this.getNode(d);a.marginBox(this.widget.domNode,{w:l.get(e,"width")})},focus:function(a,b){this.widget&&setTimeout(e.hitch(this.widget,function(){z.fire(this,"focus"),this.focusNode&&"INPUT"===this.focusNode.tagName&&x.selectInputText(this.focusNode)}),0)},_finish:function(a){this.inherited(arguments),z.removeNode(this.widget.domNode),h("ie")&&i.setSelectable(this.widget.domNode,!0)}});C.markupFactory=function(a,b){A.markupFactory(a,b);var c=e.trim(j.get(a,"widgetProps")||""),d=e.trim(j.get(a,"constraint")||""),g=e.trim(j.get(a,"widgetClass")||"");c&&(b.widgetProps=f.fromJson(c)),d&&(b.constraint=f.fromJson(d)),g&&(b.widgetClass=e.getObject(g))};var q=B.ComboBox=c("dojox.grid.cells.ComboBox",C,{widgetClass:q,getWidgetProps:function(a){var b=[];d.forEach(this.options,function(a){b.push({name:a,value:a})});var c=new n({data:{identifier:"name",items:b}});return e.mixin({},this.widgetProps||{},{value:a,store:c})},getValue:function(){var a=this.widget;return a.set("displayedValue",a.get("displayedValue")),a.get("value")}});q.markupFactory=function(a,b){C.markupFactory(a,b);var c=e.trim(j.get(a,"options")||"");if(c){var d=c.split(",");d[0]!=c&&(b.options=d)}};var o=B.DateTextBox=c("dojox.grid.cells.DateTextBox",C,{widgetClass:o,setValue:function(a,b){this.widget?this.widget.set("value",new Date(b)):this.inherited(arguments)},getWidgetProps:function(a){return e.mixin(this.inherited(arguments),{value:new Date(a)})}});o.markupFactory=function(a,b){C.markupFactory(a,b)};var r=B.CheckBox=c("dojox.grid.cells.CheckBox",C,{widgetClass:r,getValue:function(){return this.widget.checked},setValue:function(a,b){this.widget&&this.widget.attributeMap.checked?this.widget.set("checked",b):this.inherited(arguments)},sizeWidget:function(a,b,c){}});r.markupFactory=function(a,b){C.markupFactory(a,b)};var y=B.Editor=c("dojox.grid.cells.Editor",C,{widgetClass:y,getWidgetProps:function(a){return e.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"})},createWidget:function(a,b,c){var d=new this.widgetClass(this.getWidgetProps(b),a);return d.onLoadDeferred.then(e.hitch(this,"populateEditor")),d},formatNode:function(a,b,c){if(this.content=b,this.inherited(arguments),h("mozilla")){var d=this.widget;d.open(),this.widgetToolbar&&k.place(d.toolbar.domNode,d.editingArea,"before")}},populateEditor:function(){this.widget.set("value",this.content),this.widget.placeCursorAtEnd()}});return y.markupFactory=function(a,b){C.markupFactory(a,b);var c=e.trim(j.get(a,"widgetHeight")||"");c&&("auto"!=c&&"em"!=c.substr(-2)&&(c=parseInt(c,10)+"px"),b.widgetHeight=c)},B})},"dojox/grid/enhanced/plugins/IndirectSelection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/lang","dojo/_base/html","dojo/_base/window","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/keys","dojo/string","../_Plugin","../../EnhancedGrid","../../cells/dijit"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=d.getObject("dojox.grid.cells"),o=a("dojox.grid.cells.RowSelector",n._Widget,{inputType:"",map:null,disabledMap:null,isRowSelector:!0,_connects:null,_subscribes:null,checkedText:"&#10003;",unCheckedText:"O",constructor:function(){this.map={},this.disabledMap={},this.disabledCount=0,this._connects=[],this._subscribes=[],this.inA11YMode=e.hasClass(f.body(),"dijit_a11y"),this.baseClass="dojoxGridRowSelector dijitReset dijitInline dijit"+this.inputType,this.checkedClass=" dijit"+this.inputType+"Checked",this.disabledClass=" dijit"+this.inputType+"Disabled",this.checkedDisabledClass=" dijit"+this.inputType+"CheckedDisabled",this.statusTextClass=" dojoxGridRowSelectorStatusText",this._connects.push(g.connect(this.grid,"dokeyup",this,"_dokeyup")),this._connects.push(g.connect(this.grid.selection,"onSelected",this,"_onSelected")),this._connects.push(g.connect(this.grid.selection,"onDeselected",this,"_onDeselected")),this._connects.push(g.connect(this.grid.scroller,"invalidatePageNode",this,"_pageDestroyed")),this._connects.push(g.connect(this.grid,"onCellClick",this,"_onClick")),this._connects.push(g.connect(this.grid,"updateRow",this,"_onUpdateRow"))},formatter:function(a,b,c){var d=c,e=d.baseClass,f=!!d.getValue(b),g=!!d.disabledMap[b];return f?(e+=d.checkedClass,g&&(e+=d.checkedDisabledClass)):g&&(e+=d.disabledClass),["<div tabindex = -1 ","id = '"+d.grid.id+"_rowSelector_"+b+"' ","name = '"+d.grid.id+"_rowSelector' class = '"+e+"' ","role = "+d.inputType.toLowerCase()+" aria-checked = '"+f+"' aria-disabled = '"+g+"' aria-label = '"+k.substitute(d.grid._nls["indirectSelection"+d.inputType],[b+1])+"'>","<span class = '"+d.statusTextClass+"'>"+(f?d.checkedText:d.unCheckedText)+"</span>","</div>"].join("")},setValue:function(a,b){},getValue:function(a){return this.grid.selection.isSelected(a)},toggleRow:function(a,b){this._nativeSelect(a,b)},setDisabled:function(a,b){a<0||this._toggleDisabledStyle(a,b)},disabled:function(a){return!!this.disabledMap[a]},_onClick:function(a){a.cell===this&&this._selectRow(a)},_dokeyup:function(a){a.cellIndex==this.index&&a.rowIndex>=0&&a.keyCode==j.SPACE&&this._selectRow(a)},focus:function(a){var b=this.map[a];b&&b.focus()},_focusEndingCell:function(a,b){var c=this.grid.getCell(b);this.grid.focus.setFocusCell(c,a)},_nativeSelect:function(a,b){this.grid.selection[b?"select":"deselect"](a)},_onSelected:function(a){this._toggleCheckedStyle(a,!0)},_onDeselected:function(a){this._toggleCheckedStyle(a,!1)},_onUpdateRow:function(a){delete this.map[a]},_toggleCheckedStyle:function(a,b){var c=this._getSelector(a);c&&(e.toggleClass(c,this.checkedClass,b),this.disabledMap[a]&&e.toggleClass(c,this.checkedDisabledClass,b),c.setAttribute("aria-checked",b),this.inA11YMode&&(c.firstChild.innerHTML=b?this.checkedText:this.unCheckedText))},_toggleDisabledStyle:function(a,b){var c=this._getSelector(a);c&&(e.toggleClass(c,this.disabledClass,b),this.getValue(a)&&e.toggleClass(c,this.checkedDisabledClass,b),c.setAttribute("aria-disabled",b)),this.disabledMap[a]=b,a>=0&&(this.disabledCount+=b?1:-1)},_getSelector:function(a){var b=this.map[a];if(!b){var c=this.view.rowNodes[a];c&&(b=i(".dojoxGridRowSelector",c)[0])&&(this.map[a]=b)}return b},_pageDestroyed:function(a){for(var b=this.grid.scroller.rowsPerPage,c=a*b,d=c+b-1,f=c;f<=d;f++)this.map[f]&&(e.destroy(this.map[f]),delete this.map[f])},destroy:function(){for(var a in this.map)e.destroy(this.map[a]),delete this.map[a];for(a in this.disabledMap)delete this.disabledMap[a];b.forEach(this._connects,g.disconnect),b.forEach(this._subscribes,g.unsubscribe),delete this._connects,delete this._subscribes}}),p=a("dojox.grid.cells.SingleRowSelector",o,{inputType:"Radio",_selectRow:function(a){var b=a.rowIndex;this.disabledMap[b]||(this._focusEndingCell(b,a.cellIndex),this._nativeSelect(b,!this.grid.selection.selected[b]))}}),q=a("dojox.grid.cells.MultipleRowSelector",o,{inputType:"CheckBox",swipeStartRowIndex:-1,swipeMinRowIndex:-1,swipeMaxRowIndex:-1,toSelect:!1,lastClickRowIdx:-1,unCheckedText:"&#9633;",constructor:function(){this._connects.push(g.connect(f.doc,"onmouseup",this,"_domouseup")),this._connects.push(g.connect(this.grid,"onRowMouseOver",this,"_onRowMouseOver")),this._connects.push(g.connect(this.grid.focus,"move",this,"_swipeByKey")),this._connects.push(g.connect(this.grid,"onCellMouseDown",this,"_onMouseDown")),this.headerSelector&&(this._connects.push(g.connect(this.grid.views,"render",this,"_addHeaderSelector")),this._connects.push(g.connect(this.grid,"_onFetchComplete",this,"_addHeaderSelector")),this._connects.push(g.connect(this.grid,"onSelectionChanged",this,"_onSelectionChanged")),this._connects.push(g.connect(this.grid,"onKeyDown",this,function(a){-1==a.rowIndex&&a.cellIndex==this.index&&a.keyCode==j.SPACE&&this._toggletHeader()})))},toggleAllSelection:function(a){var b=this.grid,c=b.selection;a?c.selectRange(0,b.rowCount-1):c.deselectAll()},_onMouseDown:function(a){a.cell==this&&(this._startSelection(a.rowIndex),c.stop(a))},_onRowMouseOver:function(a){this._updateSelection(a,0)},_domouseup:function(a){h("ie")&&this.view.content.decorateEvent(a),a.cellIndex>=0&&this.inSwipeSelection()&&!this.grid.edit.isEditRow(a.rowIndex)&&this._focusEndingCell(a.rowIndex,a.cellIndex),this._finishSelect()},_dokeyup:function(a){this.inherited(arguments),a.shiftKey||this._finishSelect()},_startSelection:function(a){this.swipeStartRowIndex=this.swipeMinRowIndex=this.swipeMaxRowIndex=a,this.toSelect=!this.getValue(a)},_updateSelection:function(a,b){if(this.inSwipeSelection()){var c=0!==b,d=a.rowIndex,e=d-this.swipeStartRowIndex+b;e>0&&this.swipeMaxRowIndex<d+b&&(this.swipeMaxRowIndex=d+b),e<0&&this.swipeMinRowIndex>d+b&&(this.swipeMinRowIndex=d+b);for(var f=e>0?this.swipeStartRowIndex:d+b,g=e>0?d+b:this.swipeStartRowIndex,h=this.swipeMinRowIndex;h<=this.swipeMaxRowIndex;h++)this.disabledMap[h]||h<0||(h>=f&&h<=g?this._nativeSelect(h,this.toSelect):c||this._nativeSelect(h,!this.toSelect))}},_swipeByKey:function(a,b,c){if(c&&0!==a&&c.shiftKey&&c.cellIndex==this.index&&!(this.grid.focus.rowIndex<0)){var d=c.rowIndex;this.swipeStartRowIndex<0&&(this.swipeStartRowIndex=d,a>0?(this.swipeMaxRowIndex=d+a,this.swipeMinRowIndex=d):(this.swipeMinRowIndex=d+a,this.swipeMaxRowIndex=d),this.toSelect=this.getValue(d)),this._updateSelection(c,a)}},_finishSelect:function(){this.swipeStartRowIndex=-1,this.swipeMinRowIndex=-1,this.swipeMaxRowIndex=-1,this.toSelect=!1},inSwipeSelection:function(){return this.swipeStartRowIndex>=0},_nativeSelect:function(a,b){this.grid.selection[b?"addToSelection":"deselect"](a)},_selectRow:function(a){var b=a.rowIndex;if(!this.disabledMap[b]){c.stop(a),this._focusEndingCell(b,a.cellIndex);var d=b-this.lastClickRowIdx,e=!this.grid.selection.selected[b];if(this.lastClickRowIdx>=0&&!a.ctrlKey&&!a.altKey&&a.shiftKey)for(var f=d>0?this.lastClickRowIdx:b,g=d>0?b:this.lastClickRowIdx,h=f;h>=0&&h<=g;h++)this._nativeSelect(h,e);else this._nativeSelect(b,e);this.lastClickRowIdx=b}},getValue:function(a){if(-1==a){var b=this.grid;return b.rowCount>0&&b.rowCount<=b.selection.getSelectedCount()}return this.inherited(arguments)},_addHeaderSelector:function(){var a=this.view.getHeaderCellNode(this.index);if(a){e.empty(a);var b=this.grid,c=a.appendChild(e.create("div",{"aria-label":b._nls.selectAll,tabindex:-1,id:b.id+"_rowSelector_-1",class:this.baseClass,role:"Checkbox",innerHTML:"<span class = '"+this.statusTextClass+"'></span><span style='height: 0; width: 0; overflow: hidden; display: block;'>"+b._nls.selectAll+"</span>"}));this.map[-1]=c;var d=this._headerSelectorConnectIdx;void 0!==d&&(g.disconnect(this._connects[d]),this._connects.splice(d,1)),this._headerSelectorConnectIdx=this._connects.length,this._connects.push(g.connect(c,"onclick",this,"_toggletHeader")),this._onSelectionChanged()}},_toggletHeader:function(){this.disabledMap[-1]||(this.grid._selectingRange=!0,this.toggleAllSelection(!this.getValue(-1)),this._onSelectionChanged(),this.grid._selectingRange=!1)},_onSelectionChanged:function(){var a=this.grid;this.map[-1]&&!a._selectingRange&&(a.allItemsSelected=this.getValue(-1),this._toggleCheckedStyle(-1,a.allItemsSelected))},_toggleDisabledStyle:function(a,b){if(this.inherited(arguments),this.headerSelector){var c=this.grid.rowCount==this.disabledCount;c!=!!this.disabledMap[-1]&&(arguments[0]=-1,arguments[1]=c,this.inherited(arguments))}}}),r=a("dojox.grid.enhanced.plugins.IndirectSelection",l,{name:"indirectSelection",constructor:function(){var a=this.grid.layout;this.connect(a,"setStructure",d.hitch(a,this.addRowSelectCell,this.option))},addRowSelectCell:function(a){if(this.grid.indirectSelection&&"none"!=this.grid.selectionMode){var c=!1,e=["get","formatter","field","fields"],f={type:q,name:"",width:"30px",styles:"text-align: center;"};a.headerSelector&&(a.name=""),this.grid.rowSelectCell&&this.grid.rowSelectCell.destroy(),b.forEach(this.structure,function(g){var h=g.cells;if(h&&h.length>0&&!c){var i=h[0];if(i[0]&&i[0].isRowSelector)return void(c=!0);var j,k="single"==this.grid.selectionMode?p:q;j=d.mixin(f,a,{type:k,editable:!1,notselectable:!0,filterable:!1,navigatable:!0,nosort:!0}),b.forEach(e,function(a){a in j&&delete j[a]}),h.length>1&&(j.rowSpan=h.length),b.forEach(this.cells,function(a,b){a.index>=0&&(a.index+=1)});var l=this.addCellDef(0,0,j);l.index=0,i.unshift(l),this.cells.unshift(l),this.grid.rowSelectCell=l,c=!0}},this),this.cellCount=this.cells.length}},destroy:function(){this.grid.rowSelectCell.destroy(),delete this.grid.rowSelectCell,this.inherited(arguments)}});return m.registerPlugin(r,{preInit:!0}),r})},"dojox/grid/enhanced/_Plugin":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","../EnhancedGrid"],function(a,b,c,d,e){return c("dojox.grid.enhanced._Plugin",null,{name:"plugin",grid:null,option:{},_connects:[],_subscribes:[],privates:{},constructor:function(a,c){this.grid=a,this.option=c,this._connects=[],this._subscribes=[],this.privates=b.mixin({},dojox.grid.enhanced._Plugin.prototype),this.init()},init:function(){},onPreInit:function(){},onPostInit:function(){},onStartUp:function(){},connect:function(a,b,c){var d=e.connect(a,b,this,c);return this._connects.push(d),d},disconnect:function(a){d.some(this._connects,function(b,c,d){return b==a&&(e.disconnect(a),d.splice(c,1),!0)})},subscribe:function(a,b){var c=e.subscribe(a,this,b);return this._subscribes.push(c),c},unsubscribe:function(a){d.some(this._subscribes,function(b,c,d){return b==a&&(e.unsubscribe(a),d.splice(c,1),!0)})},onSetStore:function(a){},destroy:function(){d.forEach(this._connects,e.disconnect),d.forEach(this._subscribes,e.unsubscribe),delete this._connects,delete this._subscribes,delete this.option,delete this.privates}})})},"dojox/grid/enhanced/plugins/Menu":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojo/keys","../_Plugin","../../EnhancedGrid"],function(a,b,c,d,e,f,g,h){var i=a("dojox.grid.enhanced.plugins.Menu",g,{name:"menus",types:["headerMenu","rowMenu","cellMenu","selectedRegionMenu"],constructor:function(){var a=this.grid;a.showMenu=c.hitch(a,this.showMenu),a._setRowMenuAttr=c.hitch(this,"_setRowMenuAttr"),a._setCellMenuAttr=c.hitch(this,"_setCellMenuAttr"),a._setSelectedRegionMenuAttr=c.hitch(this,"_setSelectedRegionMenuAttr")},onStartUp:function(){var a,c=this.option;for(a in c)b.indexOf(this.types,a)>=0&&c[a]&&this._initMenu(a,c[a])},_initMenu:function(a,b){var c=this.grid;if(!c[a]){var d=this._getMenuWidget(b);if(!d)return;c.set(a,d),"headerMenu"!=a?d._scheduleOpen=function(){}:c.setupHeaderMenu()}},_getMenuWidget:function(a){return a instanceof dijit.Menu?a:dijit.byId(a)},_setRowMenuAttr:function(a){this._setMenuAttr(a,"rowMenu")},_setCellMenuAttr:function(a){this._setMenuAttr(a,"cellMenu")},_setSelectedRegionMenuAttr:function(a){this._setMenuAttr(a,"selectedRegionMenu")},_setMenuAttr:function(a,b){var c=this.grid,d=c.domNode;a&&a instanceof dijit.Menu&&(c[b]&&c[b].unBindDomNode(d),c[b]=a,c[b].bindDomNode(d))},showMenu:function(a){if((a.cellNode&&d.hasClass(a.cellNode,"dojoxGridRowSelected")||a.rowNode&&(d.hasClass(a.rowNode,"dojoxGridRowSelected")||d.hasClass(a.rowNode,"dojoxGridRowbarSelected")))&&this.selectedRegionMenu)return void this.onSelectedRegionContextMenu(a);var b={target:a.target,coords:a.keyCode!==f.F10&&"pageX"in a?{x:a.pageX,y:a.pageY}:null};if(this.rowMenu&&(!this.cellMenu||this.selection.isSelected(a.rowIndex)||a.rowNode&&d.hasClass(a.rowNode,"dojoxGridRowbar")))return this.rowMenu._openMyself(b),void e.stop(a);this.cellMenu&&this.cellMenu._openMyself(b),e.stop(a)},destroy:function(){var a=this.grid;a.headerMenu&&a.headerMenu.unBindDomNode(a.viewsHeaderNode),a.rowMenu&&a.rowMenu.unBindDomNode(a.domNode),a.cellMenu&&a.cellMenu.unBindDomNode(a.domNode),a.selectedRegionMenu&&a.selectedRegionMenu.destroy(),this.inherited(arguments)}});return h.registerPlugin(i),i})},"dojox/grid/enhanced/plugins/Pagination":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojo/query","dojo/string","dojo/keys","dojo/text!../templates/Pagination.html","./Dialog","./_StoreLayer","../_Plugin","../../EnhancedGrid","dijit/form/Button","dijit/form/NumberTextBox","dijit/focus","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/html/metrics","dojo/i18n!../nls/Pagination"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=b("dojox.grid.enhanced.plugins.pagination._GotoPagePane",[s,t,u],{templateString:"<div><div class='dojoxGridDialogMargin' dojoAttachPoint='_mainMsgNode'></div><div class='dojoxGridDialogMargin'><input dojoType='dijit.form.NumberTextBox' style='width: 50px;' dojoAttachPoint='_pageInputBox' dojoAttachEvent='onKeyUp: _onKey'></input><label dojoAttachPoint='_pageLabelNode'></label></div><div class='dojoxGridDialogButton'><button dojoType='dijit.form.Button' dojoAttachPoint='_confirmBtn' dojoAttachEvent='onClick: _onConfirm'></button><button dojoType='dijit.form.Button' dojoAttachPoint='_cancelBtn' dojoAttachEvent='onClick: _onCancel'></button></div></div>",widgetsInTemplate:!0,dlg:null,postMixInProperties:function(){this.plugin=this.dlg.plugin},postCreate:function(){this.inherited(arguments),this._mainMsgNode.innerHTML=this.plugin._nls[12],this._confirmBtn.set("label",this.plugin._nls[14]),this._confirmBtn.set("disabled",!0),this._cancelBtn.set("label",this.plugin._nls[15])},_onConfirm:function(a){this._pageInputBox.isValid()&&""!==this._pageInputBox.getDisplayedValue()&&(this.plugin.currentPage(this._pageInputBox.parse(this._pageInputBox.getDisplayedValue())),this.dlg._gotoPageDialog.hide(),this._pageInputBox.reset()),A(a)},_onCancel:function(a){this._pageInputBox.reset(),this.dlg._gotoPageDialog.hide(),A(a)},_onKey:function(a){this._confirmBtn.set("disabled",!this._pageInputBox.isValid()||""==this._pageInputBox.getDisplayedValue()),a.altKey||a.metaKey||a.keyCode!==j.ENTER||this._onConfirm(a)}}),y=b("dojox.grid.enhanced.plugins.pagination._GotoPageDialog",null,{pageCount:0,dlgPane:null,constructor:function(a){this.plugin=a,this.dlgPane=new x({dlg:this}),this.dlgPane.startup(),this._gotoPageDialog=new l({refNode:a.grid.domNode,title:this.plugin._nls[11],content:this.dlgPane}),this._gotoPageDialog.startup()},_updatePageCount:function(){this.pageCount=this.plugin.getTotalPageNum(),this.dlgPane._pageInputBox.constraints={fractional:!1,min:1,max:this.pageCount},this.dlgPane._pageLabelNode.innerHTML=i.substitute(this.plugin._nls[13],[this.pageCount])},showDialog:function(){this._updatePageCount(),this._gotoPageDialog.show()},destroy:function(){this._gotoPageDialog.destroy()}}),z=b("dojox.grid.enhanced.plugins._ForcedPageStoreLayer",m._StoreLayer,{tags:["presentation"],constructor:function(a){this._plugin=a},_fetch:function(b){var c=this,d=c._plugin,f=d.grid,g=b.scope||a.global,h=b.onBegin;b.start=(d._currentPage-1)*d._currentPageSize+b.start,c.startIdx=b.start,c.endIdx=b.start+d._currentPageSize-1;var i=d._paginator;return d._showAll||(d._showAll=!i.sizeSwitch&&!i.pageStepper&&!i.gotoButton),h&&d._showAll?b.onBegin=function(a,b){d._maxSize=d._currentPageSize=a,c.startIdx=0,c.endIdx=a-1,d._paginator._update(),b.onBegin=h,b.onBegin.call(g,a,b)}:h&&(b.onBegin=function(a,b){b.start=0,b.count=d._currentPageSize,d._maxSize=a,c.endIdx=c.endIdx>=a?a-1:c.endIdx,c.startIdx>a&&0!==a&&(f._pending_requests[b.start]=!1,d.firstPage()),d._paginator._update(),b.onBegin=h,b.onBegin.call(g,Math.min(d._currentPageSize,a-c.startIdx),b)}),e.hitch(this._store,this._originFetch)(b)}}),A=function(a){try{a&&g.stop(a)}catch(a){}},B=b("dojox.grid.enhanced.plugins.pagination._Focus",null,{_focusedNode:null,_isFocused:!1,constructor:function(a){this._pager=a;a.plugin.grid.focus;a.plugin.connect(a,"onSwitchPageSize",e.hitch(this,"_onActive")),a.plugin.connect(a,"onPageStep",e.hitch(this,"_onActive")),a.plugin.connect(a,"onShowGotoPageDialog",e.hitch(this,"_onActive")),a.plugin.connect(a,"_update",e.hitch(this,"_moveFocus"))},_onFocus:function(a,b){var c;if(this._isFocused){if(b&&this._focusedNode)for(var d=b>0?-1:1,e=parseInt(this._focusedNode.getAttribute("tabindex"),10)+d;e>=-3&&e<0&&!(c=h("[tabindex="+e+"]",this._pager.domNode)[0]);)e+=d}else c=this._focusedNode||h("[tabindex]",this._pager.domNode)[0];return this._focus(c,a)},_onBlur:function(a,b){if(!b||!this._focusedNode)return this._isFocused=!1,this._focusedNode&&f.hasClass(this._focusedNode,"dojoxGridButtonFocus")&&f.removeClass(this._focusedNode,"dojoxGridButtonFocus"),!0;for(var c,d=b>0?-1:1,e=parseInt(this._focusedNode.getAttribute("tabindex"),10)+d;e>=-3&&e<0&&!(c=h("[tabindex="+e+"]",this._pager.domNode)[0]);)e+=d;return c||(this._isFocused=!1,f.hasClass(this._focusedNode,"dojoxGridButtonFocus")&&f.removeClass(this._focusedNode,"dojoxGridButtonFocus")),!c},_onMove:function(a,b,c){if(this._focusedNode)for(var d=this._focusedNode.getAttribute("tabindex"),e=1==b?"nextSibling":"previousSibling",f=this._focusedNode[e];f;){if(f.getAttribute("tabindex")==d){this._focus(f);break}f=f[e]}},_focus:function(b,c){return!!b&&(this._isFocused=!0,a.isIE&&this._focusedNode&&f.removeClass(this._focusedNode,"dojoxGridButtonFocus"),this._focusedNode=b,b.focus(),a.isIE&&f.addClass(b,"dojoxGridButtonFocus"),A(c),!0)},_onActive:function(a){this._focusedNode=a.target,this._isFocused||this._pager.plugin.grid.focus.focusArea("pagination"+this._pager.position)},_moveFocus:function(){if(this._focusedNode&&!this._focusedNode.getAttribute("tabindex")){for(var b=this._focusedNode.nextSibling;b;){if(b.getAttribute("tabindex"))return void this._focus(b);b=b.nextSibling}for(var c=this._focusedNode.previousSibling;c;){if(c.getAttribute("tabindex"))return void this._focus(c);c=c.previousSibling}this._focusedNode=null,this._onBlur()}else a.isIE&&this._focusedNode&&f.addClass(this._focusedNode,"dojoxGridButtonFocus")}}),C=b("dojox.grid.enhanced.plugins._Paginator",[s,t],{templateString:k,constructor:function(a){e.mixin(this,a),this.grid=this.plugin.grid},postCreate:function(){this.inherited(arguments);var a=this,b=this.grid;this.plugin.connect(b,"_resize",e.hitch(this,"_resetGridHeight")),this._originalResize=b.resize,b.resize=function(c,d){a._changeSize=c,a._resultSize=d,a._originalResize.apply(b,arguments)},this.focus=B(this),this._placeSelf()},destroy:function(){this.inherited(arguments),this.grid.focus.removeArea("pagination"+this.position),this._gotoPageDialog&&this._gotoPageDialog.destroy(),this.grid.resize=this._originalResize},onSwitchPageSize:function(a){},onPageStep:function(a){},onShowGotoPageDialog:function(a){},_update:function(){this._updateDescription(),this._updatePageStepper(),this._updateSizeSwitch(),this._updateGotoButton()},_registerFocus:function(a){var b=this.grid.focus,c="pagination"+this.position;this.focus;b.addArea({name:c,onFocus:e.hitch(this.focus,"_onFocus"),onBlur:e.hitch(this.focus,"_onBlur"),onMove:e.hitch(this.focus,"_onMove")}),b.placeArea(c,a?"before":"after",a?"header":"content")},_placeSelf:function(){var a=this.grid,b="top"==this.position;this.placeAt(b?a.viewsHeaderNode:a.viewsNode,b?"before":"after"),this._registerFocus(b)},_resetGridHeight:function(a,b){var d=this.grid;if(a=a||this._changeSize,b=b||this._resultSize,delete this._changeSize,delete this._resultSize,!d._autoHeight){var e=d._getPadBorder().h;this.plugin.gh||(this.plugin.gh=(d.domNode.clientHeight||f.style(d.domNode,"height"))+2*e),b&&(a=b),a&&(this.plugin.gh=f.contentBox(d.domNode).h+2*e);var g=this.plugin.gh,h=d._getHeaderHeight(),i=f.marginBox(this.domNode).h;if("number"==typeof d.autoHeight){var j=g+i-e;f.style(d.domNode,"height",j+"px"),f.style(d.viewsNode,"height",j-i-h+"px"),this._styleMsgNode(h,f.marginBox(d.viewsNode).w,j-i-h)}else{var k=g-i-h-e;f.style(d.viewsNode,"height",k+"px");var l=c.some(d.views.views,function(a){return a.hasHScrollbar()});c.forEach(d.viewsNode.childNodes,function(a){f.style(a,"height",k+"px")}),c.forEach(d.views.views,function(a){a.scrollboxNode&&(!a.hasHScrollbar()&&l?f.style(a.scrollboxNode,"height",k-v.getScrollbar().h+"px"):f.style(a.scrollboxNode,"height",k+"px"))}),this._styleMsgNode(h,f.marginBox(d.viewsNode).w,k)}}},_styleMsgNode:function(a,b,c){var d=this.grid.messagesNode;f.style(d,{position:"absolute",top:a+"px",width:b+"px",height:c+"px","z-Index":"100"})},_updateDescription:function(){var a=this.plugin.forcePageStoreLayer,b=this.plugin._maxSize,c=this.plugin._nls,d=function(){return b<=0||1==b?c[5]:c[4]};this.description&&this.descriptionDiv&&(this.descriptionDiv.innerHTML=b>0?i.substitute(c[0],[d(),b,a.startIdx+1,a.endIdx+1]):"0 "+d())},_updateSizeSwitch:function(){f.style(this.sizeSwitchTd,"display",this.sizeSwitch?"":"none"),this.sizeSwitch&&(this.sizeSwitchTd.childNodes.length<1&&this._createSizeSwitchNodes(),this._updateSwitchNodesStyle())},_createSizeSwitchNodes:function(){var a=null,b=this.plugin._nls,d=e.hitch(this.plugin,"connect");c.forEach(this.pageSizes,function(c){var g=isFinite(c)?i.substitute(b[2],[c]):b[1],h=isFinite(c)?c:b[16];a=f.create("span",{innerHTML:h,title:g,value:c,tabindex:"-1"},this.sizeSwitchTd,"last"),a.setAttribute("aria-label",g),d(a,"onclick",e.hitch(this,"_onSwitchPageSize")),d(a,"onkeydown",e.hitch(this,"_onSwitchPageSize")),d(a,"onmouseover",function(a){f.addClass(a.target,"dojoxGridPageTextHover")}),d(a,"onmouseout",function(a){f.removeClass(a.target,"dojoxGridPageTextHover")}),a=f.create("span",{innerHTML:"|"},this.sizeSwitchTd,"last"),f.addClass(a,"dojoxGridSeparator")},this),f.destroy(a)},_updateSwitchNodesStyle:function(){var a=null,b=function(a,b){b?(f.addClass(a,"dojoxGridActivedSwitch"),f.removeAttr(a,"tabindex")):(f.addClass(a,"dojoxGridInactiveSwitch"),a.setAttribute("tabindex","-1"))};c.forEach(this.sizeSwitchTd.childNodes,function(c){c.value&&(f.removeClass(c),a=c.value,this.plugin._showAll?b(c,isNaN(parseInt(a,10))):b(c,this.plugin._currentPageSize==a))},this)},_updatePageStepper:function(){f.style(this.pageStepperTd,"display",this.pageStepper?"":"none"),this.pageStepper&&(this.pageStepperDiv.childNodes.length<1?(this._createPageStepNodes(),this._createWardBtns()):this._resetPageStepNodes(),this._updatePageStepNodesStyle())},_createPageStepNodes:function(){for(var a=this._getStartPage(),b=this._getStepPageSize(),c="",d=null,g=a,h=e.hitch(this.plugin,"connect");g<a+this.maxPageStep+1;g++)c=i.substitute(this.plugin._nls[3],[g]),d=f.create("div",{innerHTML:g,value:g,title:c},this.pageStepperDiv,"last"),d.setAttribute("aria-label",c),h(d,"onclick",e.hitch(this,"_onPageStep")),h(d,"onkeydown",e.hitch(this,"_onPageStep")),h(d,"onmouseover",function(a){f.addClass(a.target,"dojoxGridPageTextHover")}),h(d,"onmouseout",function(a){f.removeClass(a.target,"dojoxGridPageTextHover")}),f.style(d,"display",g<a+b?"":"none")},_createWardBtns:function(){var a=this,b=this.plugin._nls,c={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"},d=function(b,d,g){var h=f.create("div",{value:b,title:d,tabindex:"-2"},a.pageStepperDiv,g);a.plugin.connect(h,"onclick",e.hitch(a,"_onPageStep")),a.plugin.connect(h,"onkeydown",e.hitch(a,"_onPageStep")),h.setAttribute("aria-label",d);var i=f.create("span",{value:b,title:d,innerHTML:c[b]},h,g);f.addClass(i,"dojoxGridWardButtonInner")};d("prevPage",b[6],"first"),d("firstPage",b[7],"first"),d("nextPage",b[8],"last"),d("lastPage",b[9],"last")},_resetPageStepNodes:function(){for(var a,b=this._getStartPage(),c=this._getStepPageSize(),d=this.pageStepperDiv.childNodes,e=null,g=b,h=2;h<d.length-2;h++,g++)e=d[h],g<b+c?(a=i.substitute(this.plugin._nls[3],[g]),f.attr(e,{innerHTML:g,title:a,value:g}),f.style(e,"display",""),e.setAttribute("aria-label",a)):f.style(e,"display","none")},_updatePageStepNodesStyle:function(){var a=null,b=this.plugin.currentPage(),d=this.plugin.getTotalPageNum(),e=function(a,b,c){var d=a.value,e=b?"dojoxGrid"+d+"Btn":"dojoxGridInactived",g=b?"dojoxGrid"+d+"BtnDisable":"dojoxGridActived";c?(f.addClass(a,g),f.removeAttr(a,"tabindex")):(f.addClass(a,e),a.setAttribute("tabindex","-2"))};c.forEach(this.pageStepperDiv.childNodes,function(c){if(f.removeClass(c),isNaN(parseInt(c.value,10))){f.addClass(c,"dojoxGridWardButton");var g="prevPage"==c.value||"firstPage"==c.value?1:d;e(c,!0,b===g)}else a=parseInt(c.value,10),e(c,!1,a===b||"none"===f.style(c,"display"))},this)},_showGotoButton:function(a){this.gotoButton=a,this._updateGotoButton()},_updateGotoButton:function(){if(!this.gotoButton)return this._gotoPageDialog&&this._gotoPageDialog.destroy(),f.removeAttr(this.gotoPageDiv,"tabindex"),void f.style(this.gotoPageTd,"display","none");"none"==f.style(this.gotoPageTd,"display")&&f.style(this.gotoPageTd,"display",""),this.gotoPageDiv.setAttribute("title",this.plugin._nls[10]),f.toggleClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled",this.plugin.getTotalPageNum()<=1),this.plugin.getTotalPageNum()<=1?f.removeAttr(this.gotoPageDiv,"tabindex"):this.gotoPageDiv.setAttribute("tabindex","-3")},_openGotopageDialog:function(a){this.plugin.getTotalPageNum()<=1||"keydown"===a.type&&a.keyCode!==j.ENTER&&a.keyCode!==j.SPACE||(this._gotoPageDialog||(this._gotoPageDialog=new y(this.plugin)),this._gotoPageDialog.showDialog(),this.onShowGotoPageDialog(a))},_onSwitchPageSize:function(a){"keydown"===a.type&&a.keyCode!==j.ENTER&&a.keyCode!==j.SPACE||(this.onSwitchPageSize(a),this.plugin.currentPageSize(a.target.value))},_onPageStep:function(a){if("keydown"!==a.type||a.keyCode===j.ENTER||a.keyCode===j.SPACE){var b=this.plugin,c=a.target.value;this.onPageStep(a),isNaN(parseInt(c,10))?b[c]():b.currentPage(parseInt(c,10))}},_getStartPage:function(){var a=this.plugin.currentPage(),b=this.maxPageStep,c=parseInt(b/2,10),d=this.plugin.getTotalPageNum()
;return a<c||a-c<1||d<=b?1:d-a<c&&a-b>=0?d-b+1:a-c},_getStepPageSize:function(){var a=this._getStartPage(),b=this.plugin.getTotalPageNum(),c=this.maxPageStep;return a+c>b?b-a+1:c}}),D=b("dojox.grid.enhanced.plugins.Pagination",n,{name:"pagination",defaultPageSize:25,defaultPage:1,description:!0,sizeSwitch:!0,pageStepper:!0,gotoButton:!1,pageSizes:[10,25,50,100,1/0],maxPageStep:7,position:"bottom",init:function(){var a=this.grid;a.usingPagination=!0,this._initOptions(),this._currentPage=this.defaultPage,this._currentPageSize=this.grid.rowsPerPage=this.defaultPageSize,this._store=a.store,this.forcePageStoreLayer=new z(this),m.wrap(a,"_storeLayerFetch",this.forcePageStoreLayer),this._paginator=new C("top"!=this.option.position?e.mixin(this.option,{position:"bottom",plugin:this}):e.mixin(this.option,{position:"top",plugin:this})),this._regApis()},destroy:function(){this.inherited(arguments),this._paginator.destroy();var a=this.grid;a.unwrap(this.forcePageStoreLayer.name()),a.scrollToRow=this._gridOriginalfuncs[0],a._onNew=this._gridOriginalfuncs[1],a.removeSelectedRows=this._gridOriginalfuncs[2],this._paginator=null,this._nls=null},currentPage:function(a){return a<=this.getTotalPageNum()&&a>0&&this._currentPage!==a&&(this._currentPage=a,this.grid._refresh(!0),this.grid.resize()),this._currentPage},nextPage:function(){this.currentPage(this._currentPage+1)},prevPage:function(){this.currentPage(this._currentPage-1)},firstPage:function(){this.currentPage(1)},lastPage:function(){this.currentPage(this.getTotalPageNum())},currentPageSize:function(a){if(!isNaN(a)){var b=this.grid,c=this._currentPageSize*(this._currentPage-1);if(this._showAll=!isFinite(a),this.grid.usingPagination=!this._showAll,this._currentPageSize=this._showAll?this._maxSize:a,b.rowsPerPage=this._showAll?this._defaultRowsPerPage:a,c+Math.min(this._currentPageSize,this._maxSize)>this._maxSize)this.lastPage();else{var d=Math.ceil(c/this._currentPageSize)+1;d!==this._currentPage?this.currentPage(d):this.grid._refresh(!0)}this.grid.resize()}return this._currentPageSize},getTotalPageNum:function(){return Math.ceil(this._maxSize/this._currentPageSize)},getTotalRowCount:function(){return this._maxSize},scrollToRow:function(a){var b=parseInt(a/this._currentPageSize,10)+1;if(!(b>this.getTotalPageNum())){this.currentPage(b);var c=a%this._currentPageSize;return this._gridOriginalfuncs[0](c)}},removeSelectedRows:function(){this._multiRemoving=!0,this._gridOriginalfuncs[2].apply(),this._multiRemoving=!1,this.grid.store.save&&this.grid.store.save(),this.grid.resize(),this.grid._refresh()},showGotoPageButton:function(a){this._paginator.gotoButton=a,this._paginator._updateGotoButton()},gotoPage:function(b){a.deprecated("dojox.grid.enhanced.EnhancedGrid.gotoPage(page)","use dojox.grid.enhanced.EnhancedGrid.currentPage(page) instead","1.8"),this.currentPage(b)},gotoFirstPage:function(){a.deprecated("dojox.grid.enhanced.EnhancedGrid.gotoFirstPage()","use dojox.grid.enhanced.EnhancedGrid.firstPage() instead","1.8"),this.firstPage()},gotoLastPage:function(){a.deprecated("dojox.grid.enhanced.EnhancedGrid.gotoLastPage()","use dojox.grid.enhanced.EnhancedGrid.lastPage() instead","1.8"),this.lastPage()},changePageSize:function(b){a.deprecated("dojox.grid.enhanced.EnhancedGrid.changePageSize(size)","use dojox.grid.enhanced.EnhancedGrid.currentPageSize(size) instead","1.8"),this.currentPageSize(b)},_nls:null,_showAll:!1,_maxSize:0,_defaultRowsPerPage:25,_currentPage:1,_currentPageSize:25,_initOptions:function(){if(this._defaultRowsPerPage=this.grid.rowsPerPage||25,this.defaultPage=this.option.defaultPage>=1?parseInt(this.option.defaultPage,10):1,this.option.description=void 0!==this.option.description?!!this.option.description:this.description,this.option.sizeSwitch=void 0!==this.option.sizeSwitch?!!this.option.sizeSwitch:this.sizeSwitch,this.option.pageStepper=void 0!==this.option.pageStepper?!!this.option.pageStepper:this.pageStepper,this.option.gotoButton=void 0!==this.option.gotoButton?!!this.option.gotoButton:this.gotoButton,e.isArray(this.option.pageSizes)){var a=[];c.forEach(this.option.pageSizes,function(b){b="number"==typeof b?b:parseInt(b,10),!isNaN(b)&&b>0?a.push(b):c.indexOf(a,1/0)<0&&a.push(1/0)},this),this.option.pageSizes=a.sort(function(a,b){return a-b})}else this.option.pageSizes=this.pageSizes;this.defaultPageSize=this.option.defaultPageSize>=1?parseInt(this.option.defaultPageSize,10):this.pageSizes[0],this.option.maxPageStep=this.option.maxPageStep>0?this.option.maxPageStep:this.maxPageStep,this.option.position=e.isString(this.option.position)?this.option.position.toLowerCase():this.position,this._nls=[w.descTemplate,w.allItemsLabelTemplate,w.pageSizeLabelTemplate,w.pageStepLabelTemplate,w.itemTitle,w.singularItemTitle,w.prevTip,w.firstTip,w.nextTip,w.lastTip,w.gotoButtonTitle,w.dialogTitle,w.dialogIndication,w.pageCountIndication,w.dialogConfirm,w.dialogCancel,w.all]},_regApis:function(){var a=this.grid;a.currentPage=e.hitch(this,this.currentPage),a.nextPage=e.hitch(this,this.nextPage),a.prevPage=e.hitch(this,this.prevPage),a.firstPage=e.hitch(this,this.firstPage),a.lastPage=e.hitch(this,this.lastPage),a.currentPageSize=e.hitch(this,this.currentPageSize),a.showGotoPageButton=e.hitch(this,this.showGotoPageButton),a.getTotalRowCount=e.hitch(this,this.getTotalRowCount),a.getTotalPageNum=e.hitch(this,this.getTotalPageNum),a.gotoPage=e.hitch(this,this.gotoPage),a.gotoFirstPage=e.hitch(this,this.gotoFirstPage),a.gotoLastPage=e.hitch(this,this.gotoLastPage),a.changePageSize=e.hitch(this,this.changePageSize),this._gridOriginalfuncs=[e.hitch(a,a.scrollToRow),e.hitch(a,a._onNew),e.hitch(a,a.removeSelectedRows)],a.scrollToRow=e.hitch(this,this.scrollToRow),a.removeSelectedRows=e.hitch(this,this.removeSelectedRows),a._onNew=e.hitch(this,this._onNew),this.connect(a,"_onDelete",e.hitch(this,this._onDelete))},_onNew:function(a,b){var c=this.getTotalPageNum();((this._currentPage===c||0===c)&&this.grid.get("rowCount")<this._currentPageSize||this._showAll)&&(e.hitch(this.grid,this._gridOriginalfuncs[1])(a,b),this.forcePageStoreLayer.endIdx++),this._maxSize++,this._showAll&&this._currentPageSize++,this._showAll&&this.grid.autoHeight?this.grid._refresh():this._paginator._update()},_onDelete:function(){this._multiRemoving||(this.grid.resize(),this._showAll&&this.grid._refresh()),0===this.grid.get("rowCount")&&this.prevPage()}});return o.registerPlugin(D),D})},"dojox/grid/enhanced/plugins/Dialog":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/window","dijit/Dialog"],function(a,b,c,d){return a("dojox.grid.enhanced.plugins.Dialog",d,{refNode:null,_position:function(){if(this.refNode&&!this._relativePosition){var a=b.position(b.byId(this.refNode)),d=b.position(this.domNode),e=c.getBox();d.w&&d.h&&(a.x<0&&(a.x=0),a.x+a.w>e.w&&(a.w=e.w-a.x),a.y<0&&(a.y=0),a.y+a.h>e.h&&(a.h=e.h-a.y),a.x=a.x+a.w/2-d.w/2,a.y=a.y+a.h/2-d.h/2,a.x>=0&&a.x+d.w<=e.w&&a.y>=0&&a.y+d.h<=e.h&&(this._relativePosition=a))}this.inherited(arguments)}})})},"dojox/grid/enhanced/plugins/_StoreLayer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/xhr"],function(a,b,c,d){var e=c.getObject("grid.enhanced.plugins",!0,dojox),f=function(a){for(var c=["reorder","sizeChange","normal","presentation"],d=c.length,e=a.length-1;e>=0;--e){var f=b.indexOf(c,a[e]);f>=0&&f<=d&&(d=f)}return d<c.length-1?c.slice(0,d+1):c},g=function(a){var b,c=this._layers,d=c.length;if(a){for(b=d-1;b>=0;--b)if(c[b].name()==a){c[b]._unwrap(c[b+1]);break}c.splice(b,1)}else for(b=d-1;b>=0;--b)c[b]._unwrap();return c.length||(delete this._layers,delete this.layer,delete this.unwrap,delete this.forEachLayer),this},h=function(a){var b,c=this._layers;if(void 0===a)return c.length;if("number"==typeof a)return c[a];for(b=c.length-1;b>=0;--b)if(c[b].name()==a)return c[b];return null},i=function(a,b){var c,d,e,f=this._layers.length;b?(c=0,d=f,e=1):(c=f-1,d=-1,e=-1);for(var g=c;g!=d;g+=e)if(!1===a(this._layers[g],g))return g;return d};e.wrap=function(a,d,e,j){a._layers||(a._layers=[],a.layer=c.hitch(a,h),a.unwrap=c.hitch(a,g),a.forEachLayer=c.hitch(a,i));var k=f(e.tags);return b.some(a._layers,function(c,f){return!b.some(c.tags,function(a){return b.indexOf(k,a)>=0})&&(a._layers.splice(f,0,e),e._wrap(a,d,j,c),!0)})||(a._layers.push(e),e._wrap(a,d,j)),a};var j=a("dojox.grid.enhanced.plugins._StoreLayer",null,{tags:["normal"],layerFuncName:"_fetch",constructor:function(){this._store=null,this._originFetch=null,this.__enabled=!0},initialize:function(a){},uninitialize:function(a){},invalidate:function(){},_wrap:function(a,b,d,e){this._store=a,this._funcName=b;var f=c.hitch(this,function(){return(this.enabled()?this[d||this.layerFuncName]:this.originFetch).apply(this,arguments)});e?(this._originFetch=e._originFetch,e._originFetch=f):(this._originFetch=a[b]||function(){},a[b]=f),this.initialize(a)},_unwrap:function(a){this.uninitialize(this._store),a?a._originFetch=this._originFetch:this._store[this._funcName]=this._originFetch,this._originFetch=null,this._store=null},enabled:function(a){return void 0!==a&&(this.__enabled=!!a),this.__enabled},name:function(){if(!this.__name){var a=this.declaredClass.match(/(?:\.(?:_*)([^\.]+)Layer$)|(?:\.([^\.]+)$)/i);this.__name=a?(a[1]||a[2]).toLowerCase():this.declaredClass}return this.__name},originFetch:function(){return c.hitch(this._store,this._originFetch).apply(this,arguments)}});return{_StoreLayer:j,_ServerSideLayer:a("dojox.grid.enhanced.plugins._ServerSideLayer",j,{constructor:function(a){a=a||{},this._url=a.url||"",this._isStateful=!!a.isStateful,this._onUserCommandLoad=a.onCommandLoad||function(){},this.__cmds={cmdlayer:this.name(),enable:!0},this.useCommands(this._isStateful)},enabled:function(a){var b=this.inherited(arguments);return this.__cmds.enable=this.__enabled,b},useCommands:function(a){return void 0!==a&&(this.__cmds.cmdlayer=a&&this._isStateful?this.name():null),!!this.__cmds.cmdlayer},_fetch:function(a){return this.__cmds.cmdlayer?d.post({url:this._url||this._store.url,content:this.__cmds,load:c.hitch(this,function(b){this.onCommandLoad(b,a),this.originFetch(a)}),error:c.hitch(this,this.onCommandError)}):(this.onCommandLoad("",a),this.originFetch(a)),a},command:function(a,b){var c=this.__cmds;return null===b?delete c[a]:void 0!==b&&(c[a]=b),c[a]},onCommandLoad:function(a,b){this._onUserCommandLoad(this.__cmds,b,a)},onCommandError:function(a){throw a}}),wrap:e.wrap}})},"dojox/json/ref":function(){define(["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date/stamp","dojox"],function(array,djson,dojo,lang,stamp,dojox){return lang.getObject("json",!0,dojox),dojox.json.ref={resolveJson:function(a,b){function c(p,q,r,s,t,u){var v,w,x,y=e in p?p[e]:r;(e in p||void 0!==y&&s)&&(y=(h+y).replace(m,"$2$3"));var z=u||p;if(void 0!==y){if(i&&(p.__id=y),!b.schemas||p instanceof Array||!(x=y.match(/^(.+\/)[^\.\[]*$/))||(t=b.schemas[x[1]]),j[y]&&p instanceof Array==j[y]instanceof Array)z=j[y],delete z.$ref,delete z._loadObject,w=!0;else{var A=t&&t.prototype;A&&(o.prototype=A,z=new o)}j[y]=z,k&&(k[y]=b.time)}for(;t;){var B=t.properties;if(B)for(v in p){var C=B[v];C&&"date-time"==C.format&&"string"==typeof p[v]&&(p[v]=stamp.fromISOString(p[v]))}t=t.extends}var D=p.length;for(v in p){if(v==D)break;if(p.hasOwnProperty(v)){if("object"==typeof(x=p[v])&&x&&!(x instanceof Date)&&"__parent"!=v)if(d=x[f]||g&&x[e],d&&x.__parent||p!=l&&(x.__parent=z),d){delete p[v];var E=d.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if(j[(h+d).replace(m,"$2$3")]?d=j[(h+d).replace(m,"$2$3")]:(d="$"==E[1]||"this"==E[1]||""==E[1]?a:j[(h+E[1]).replace(m,"$2$3")])&&E[3]&&E[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(a,b,c,e,f){d=d&&d[c?c.replace(/[\"\'\\]/,""):f]}),d)x=d;else if(!q){var F;F||l.push(z),F=!0,x=c(x,!1,x[f],!0,C),x._loadObject=b.loader}}else q||(x=c(x,l==p,void 0===y?void 0:n(y,v),!1,C,z!=p&&"object"==typeof z[v]&&z[v]));if(p[v]=x,z!=p&&!z.__isDirty){var G=z[v];z[v]=x,!w||x===G||z._loadObject||"_"==v.charAt(0)&&"_"==v.charAt(1)||"$ref"==v||x instanceof Date&&G instanceof Date&&x.getTime()==G.getTime()||"function"==typeof x&&"function"==typeof G&&x.toString()==G.toString()||!j.onUpdate||j.onUpdate(z,v,G,x)}}}if(w&&(e in p||z instanceof Array)){for(v in z)if(!z.__isDirty&&z.hasOwnProperty(v)&&!p.hasOwnProperty(v)&&("_"!=v.charAt(0)||"_"!=v.charAt(1))&&!(z instanceof Array&&isNaN(v)))for(j.onUpdate&&"_loadObject"!=v&&"_idAttr"!=v&&j.onUpdate(z,v,z[v],void 0),delete z[v];z instanceof Array&&z.length&&void 0===z[z.length-1];)z.length--}else j.onLoad&&j.onLoad(z);return z}b=b||{};var d,e=b.idAttribute||"id",f=this.refAttribute,g=b.idAsRef,h=b.idPrefix||"",i=b.assignAbsoluteIds,j=b.index||{},k=b.timeStamps,l=[],m=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,n=this._addProp,o=function(){};return a&&"object"==typeof a&&(a=c(a,!1,b.defaultId,!0),c(l,!1)),a},fromJson:function(str,args){function ref(a){var b={};return b[this.refAttribute]=a,b}try{var root=eval("("+str+")")}catch(a){throw new SyntaxError("Invalid JSON string: "+a.message+" parsing: "+str)}return root?this.resolveJson(root,args):root},toJson:function(a,b,c,d){function e(a,d,k){if("object"==typeof a&&a){if(a instanceof Date)return'"'+stamp.toISOString(a,{zulu:!0})+'"';var l=a.__id;if(l){if("#"!=d&&(f&&!l.match(/#/)||i[l])){var m=l;"#"!=l.charAt(0)&&(m=a.__clientId==l?"cid:"+l:l.substring(0,c.length)==c?l.substring(c.length):l);var n={};return n[h]=m,djson.toJson(n,b)}d=l}else a.__id=d,j[d]=a;i[d]=a,k=k||"";var o=b?k+djson.toJsonIndentStr:"",p=b?"\n":"",q=b?" ":"";if(a instanceof Array){return"["+array.map(a,function(a,b){var c=e(a,g(d,b),o);return"string"!=typeof c&&(c="undefined"),p+o+c}).join(","+q)+p+k+"]"}var r=[];for(var s in a)if(a.hasOwnProperty(s)){var t;if("number"==typeof s)t='"'+s+'"';else{if("string"!=typeof s||"_"==s.charAt(0)&&"_"==s.charAt(1))continue;t=djson._escapeString(s)}var u=e(a[s],g(d,s),o);if("string"!=typeof u)continue;r.push(p+o+t+":"+q+u)}return"{"+r.join(","+q)+p+k+"}"}return"function"==typeof a&&dojox.json.ref.serializeFunctions?a.toString():djson.toJson(a)}var f=this._useRefs,g=this._addProp,h=this.refAttribute;c=c||"";var i={},j={},k=e(a,"#","");if(!d)for(var l in j)delete j[l].__id;return k},_addProp:function(a,b){return a+(a.match(/#/)?1==a.length?"":".":"#")+b},refAttribute:"$ref",_useRefs:!1,serializeFunctions:!1}})},"dojox/layout/GridContainer":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/_base/lang","dojo/_base/window","dojo/ready","dojox/layout/GridContainerLite"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return b("dojox.layout.GridContainer",m,{hasResizableColumns:!0,liveResizeColumns:!1,minColWidth:20,minChildWidth:150,mode:"right",isRightFixed:!1,isLeftFixed:!1,startup:function(){if(this.inherited(arguments),this.hasResizableColumns){for(var a=0;a<this._grid.length-1;a++)this._createGrip(a);this.getParent()||l(j.hitch(this,"_placeGrips"))}},resizeChildAfterDrop:function(a,b,c){this.inherited(arguments)&&this._placeGrips()},onShow:function(){this.inherited(arguments),this._placeGrips()},resize:function(){this.inherited(arguments),this._isShown()&&this.hasResizableColumns&&this._placeGrips()},_createGrip:function(a){var b=this._grid[a],c=i.create("div",{class:"gridContainerGrip"},this.domNode);b.grip=c,b.gripHandler=[this.connect(c,"onmouseover",function(a){for(var b=!1,c=0;c<this._grid.length-1;c++)if(f.contains(this._grid[c].grip,"gridContainerGripShow")){b=!0;break}b||f.replace(a.target,"gridContainerGripShow","gridContainerGrip")})[0],this.connect(c,"onmouseout",function(a){this._isResized||f.replace(a.target,"gridContainerGrip","gridContainerGripShow")})[0],this.connect(c,"onmousedown","_resizeColumnOn")[0],this.connect(c,"ondblclick","_onGripDbClick")[0]]},_placeGrips:function(){var a,b,d,e=0;c.forEach(this._grid,function(c){c.grip&&(d=c.grip,a||(a=d.offsetWidth/2),e+=h.getMarginBox(c.node).w,g.set(d,"left",e-a+"px"),b||(b=h.getContentBox(this.gridNode).h),b>0&&g.set(d,"height",b+"px"))},this)},_onGripDbClick:function(){this._updateColumnsWidth(this._dragManager),this.resize()},_resizeColumnOn:function(a){this._activeGrip=a.target,this._initX=a.pageX,a.preventDefault(),k.body().style.cursor="ew-resize",this._isResized=!0;var b,f,i=[];for(f=0;f<this._grid.length;f++)i[f]=h.getContentBox(this._grid[f].node).w;for(this._oldTabSize=i,f=0;f<this._grid.length;f++)b=this._grid[f],this._activeGrip==b.grip&&(this._currentColumn=b.node,this._currentColumnWidth=i[f],this._nextColumn=this._grid[f+1].node,this._nextColumnWidth=i[f+1]),b.node.style.width=i[f]+"px";var j=function(a,b){var d=0,f=0;return c.forEach(a,function(a){if(1==a.nodeType){var c=g.getComputedStyle(a),h=e("ie")?b:parseInt(c.minWidth);f=h+parseInt(c.marginLeft)+parseInt(c.marginRight),d<f&&(d=f)}}),d},l=j(this._currentColumn.childNodes,this.minChildWidth),m=j(this._nextColumn.childNodes,this.minChildWidth),n=Math.round(h.getMarginBox(this.gridContainerTable).w*this.minColWidth/100);this._currentMinCol=l,this._nextMinCol=m,n>this._currentMinCol&&(this._currentMinCol=n),n>this._nextMinCol&&(this._nextMinCol=n),this._connectResizeColumnMove=d.connect(k.doc,"onmousemove",this,"_resizeColumnMove"),this._connectOnGripMouseUp=d.connect(k.doc,"onmouseup",this,"_onGripMouseUp")},_onGripMouseUp:function(){k.body().style.cursor="default",d.disconnect(this._connectResizeColumnMove),d.disconnect(this._connectOnGripMouseUp),this._connectOnGripMouseUp=this._connectResizeColumnMove=null,this._activeGrip&&f.replace(this._activeGrip,"gridContainerGrip","gridContainerGripShow"),this._isResized=!1},_resizeColumnMove:function(a){a.preventDefault(),this._connectResizeColumnOff||(d.disconnect(this._connectOnGripMouseUp),this._connectOnGripMouseUp=null,this._connectResizeColumnOff=d.connect(k.doc,"onmouseup",this,"_resizeColumnOff"));var b=a.pageX-this._initX;0!=b&&(this._currentColumnWidth+b<this._currentMinCol||this._nextColumnWidth-b<this._nextMinCol||(this._currentColumnWidth+=b,this._nextColumnWidth-=b,this._initX=a.pageX,this._activeGrip.style.left=parseInt(this._activeGrip.style.left)+b+"px",this.liveResizeColumns&&(this._currentColumn.style.width=this._currentColumnWidth+"px",this._nextColumn.style.width=this._nextColumnWidth+"px",this.resize())))},_resizeColumnOff:function(a){k.body().style.cursor="default",d.disconnect(this._connectResizeColumnMove),d.disconnect(this._connectResizeColumnOff),this._connectResizeColumnOff=this._connectResizeColumnMove=null,this.liveResizeColumns||(this._currentColumn.style.width=this._currentColumnWidth+"px",this._nextColumn.style.width=this._nextColumnWidth+"px");var b,c,g=[],i=[],j=this.gridContainerTable.clientWidth,l=!1;for(c=0;c<this._grid.length;c++)b=this._grid[c].node,e("ie")?(g[c]=h.getMarginBox(b).w,i[c]=h.getContentBox(b).w):(g[c]=h.getContentBox(b).w,i=g);for(c=0;c<i.length;c++)if(i[c]!=this._oldTabSize[c]){l=!0;break}if(l){var m=e("ie")?100:1e4;for(c=0;c<this._grid.length;c++)this._grid[c].node.style.width=Math.round(100*m*g[c]/j)/m+"%";this.resize()}this._activeGrip&&f.replace(this._activeGrip,"gridContainerGrip","gridContainerGripShow"),this._isResized=!1},setColumns:function(a){var b,c;if(a>0){var e=this._grid.length,f=e-a;if(f>0){var g,h,i,j,k=[];if("right"==this.mode){for(i=this.isLeftFixed&&e>0?1:0,h=this.isRightFixed?e-2:e-1,b=h;b>=i;b--){for(j=0,g=this._grid[b].node,c=0;c<g.childNodes.length;c++)if(1==g.childNodes[c].nodeType&&""!=g.childNodes[c].id){j++;break}if(0==j&&(k[k.length]=b),k.length>=f){this._deleteColumn(k);break}}k.length<f&&d.publish("/dojox/layout/gridContainer/noEmptyColumn",[this])}else{for(h=this.isLeftFixed&&e>0?1:0,i=this.isRightFixed?e-1:e,b=h;b<i;b++){for(j=0,g=this._grid[b].node,c=0;c<g.childNodes.length;c++)if(1==g.childNodes[c].nodeType&&""!=g.childNodes[c].id){j++;break}if(0==j&&(k[k.length]=b),k.length>=f){this._deleteColumn(k);break}}k.length<f&&d.publish("/dojox/layout/gridContainer/noEmptyColumn",[this])}}else f<0&&this._addColumn(Math.abs(f));this.hasResizableColumns&&this._placeGrips()}},_addColumn:function(a){var b,c,d,e=this._grid,f="right"==this.mode,g=this.acceptTypes.join(","),h=this._dragManager;this.hasResizableColumns&&(!this.isRightFixed&&f||this.isLeftFixed&&!f&&1==this.nbZones)&&this._createGrip(e.length-1);for(var j=0;j<a;j++)b=i.create("td",{class:"gridContainerZone dojoxDndArea",accept:g,id:this.id+"_dz"+this.nbZones}),d=e.length,f?this.isRightFixed?(c=d-1,e.splice(c,0,{node:e[c].node.parentNode.insertBefore(b,e[c].node)})):(c=d,e.push({node:this.gridNode.appendChild(b)})):this.isLeftFixed?(c=1==d?0:1,this._grid.splice(1,0,{node:this._grid[c].node.parentNode.appendChild(b,this._grid[c].node)}),c=1):(c=d-this.nbZones,this._grid.splice(c,0,{node:e[c].node.parentNode.insertBefore(b,e[c].node)})),this.hasResizableColumns&&(!f&&1!=this.nbZones||!f&&1==this.nbZones&&!this.isLeftFixed||f&&j<a-1||f&&j==a-1&&this.isRightFixed)&&this._createGrip(c),h.registerByNode(e[c].node),this.nbZones++;this._updateColumnsWidth(h)},_deleteColumn:function(a){for(var b,e,f=0,g=a.length,h=this._dragManager,j=0;j<g;j++)e="right"==this.mode?a[j]:a[j]-f,b=this._grid[e],this.hasResizableColumns&&b.grip&&(c.forEach(b.gripHandler,function(a){d.disconnect(a)}),i.destroy(this.domNode.removeChild(b.grip)),b.grip=null),h.unregister(b.node),i.destroy(this.gridNode.removeChild(b.node)),this._grid.splice(e,1),this.nbZones--,f++;var k=this._grid[this.nbZones-1];k.grip&&(c.forEach(k.gripHandler,d.disconnect),i.destroy(this.domNode.removeChild(k.grip)),k.grip=null),this._updateColumnsWidth(h)},_updateColumnsWidth:function(a){this.inherited(arguments),a._dropMode.updateAreas(a._areaList)},destroy:function(){d.unsubscribe(this._dropHandler),this.inherited(arguments)}})})},"dojox/layout/GridContainerLite":function(){define(["dojo/_base/kernel","dojo/text!./resources/GridContainer.html","dojo/_base/declare","dojo/query","dojo/_base/sniff","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/dom-attr","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/keys","dojo/topic","dijit/registry","dijit/focus","dijit/_base/focus","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/layout/_LayoutWidget","dojo/_base/NodeList","dojox/mdnd/AreaManager","dojox/mdnd/DropIndicator","dojox/mdnd/dropMode/OverDropMode","dojox/mdnd/AutoScroll"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=c("dojox.layout.GridContainerLite",[u,t],{autoRefresh:!0,templateString:b,dragHandleClass:"dojoxDragHandle",nbZones:1,doLayout:!0,isAutoOrganized:!0,acceptTypes:[],colWidths:"",constructor:function(a,b){this.acceptTypes=(a||{}).acceptTypes||["text"],this._disabled=!0},postCreate:function(){this.inherited(arguments),this._grid=[],this._createCells(),this.subscribe("/dojox/mdnd/drop","resizeChildAfterDrop"),this.subscribe("/dojox/mdnd/drag/start","resizeChildAfterDragStart"),this._dragManager=dojox.mdnd.areaManager(),this._dragManager.autoRefresh=this.autoRefresh,this._dragManager.dragHandleClass=this.dragHandleClass,this.doLayout?this._border={h:e("ie")?h.getBorderExtents(this.gridContainerTable).h:0,w:6==e("ie")?1:0}:(g.set(this.domNode,"overflowY","hidden"),g.set(this.gridContainerTable,"height","auto"))},startup:function(){this._started||(this.isAutoOrganized?this._organizeChildren():this._organizeChildrenManually(),k.forEach(this.getChildren(),function(a){a.startup()}),this._isShown()&&this.enableDnd(),this.inherited(arguments))},resizeChildAfterDrop:function(a,b,c){if(this._disabled)return!1;if(p.getEnclosingWidget(b.node)==this){var d=p.byNode(a);if(d.resize&&l.isFunction(d.resize)&&d.resize(),d.set("column",a.parentNode.cellIndex),this.doLayout){var e=this._contentBox.h;h.getContentBox(this.gridContainerDiv).h>=e&&g.set(this.gridContainerTable,"height",e-this._border.h+"px")}return!0}return!1},resizeChildAfterDragStart:function(a,b,c){return!this._disabled&&(p.getEnclosingWidget(b.node)==this&&(this._draggedNode=a,this.doLayout&&h.setMarginBox(this.gridContainerTable,{h:h.getContentBox(this.gridContainerDiv).h-this._border.h}),!0))},getChildren:function(){var a=new v;return k.forEach(this._grid,function(b){d("> [widgetId]",b.node).map(p.byNode).forEach(function(b){a.push(b)})}),a},_isShown:function(){if("open"in this)return this.open;var a=this.domNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!f.contains(a,"dijitHidden")},layout:function(){if(this.doLayout){var a=this._contentBox;h.setMarginBox(this.gridContainerTable,{h:a.h-this._border.h}),h.setContentSize(this.domNode,{w:a.w-this._border.w})}k.forEach(this.getChildren(),function(a){a.resize&&l.isFunction(a.resize)&&a.resize()})},onShow:function(){this._disabled&&this.enableDnd()},onHide:function(){this._disabled||this.disableDnd()},_createCells:function(){0===this.nbZones&&(this.nbZones=1);for(var a=this.acceptTypes.join(","),b=0,c=this._computeColWidth();b<this.nbZones;)this._grid.push({node:i.create("td",{class:"gridContainerZone",accept:a,id:this.id+"_dz"+b,style:{width:c[b]+"%"}},this.gridNode)}),b++},_getZonesAttr:function(){return d(".gridContainerZone",this.containerNode)},enableDnd:function(){var a=this._dragManager;k.forEach(this._grid,function(b){a.registerByNode(b.node)}),a._dropMode.updateAreas(a._areaList),this._disabled=!1},disableDnd:function(){var a=this._dragManager;k.forEach(this._grid,function(b){a.unregister(b.node)}),a._dropMode.updateAreas(a._areaList),this._disabled=!0},_organizeChildren:function(){for(var a=dojox.layout.GridContainerLite.superclass.getChildren.call(this),b=this.nbZones,c=Math.floor(a.length/b),d=a.length%b,e=0,f=0;f<b;f++){for(var g=0;g<c;g++)this._insertChild(a[e],f),e++;if(d>0){try{this._insertChild(a[e],f),e++}catch(a){}d--}else if(0===c)break}},_organizeChildrenManually:function(){for(var a,b=dojox.layout.GridContainerLite.superclass.getChildren.call(this),c=b.length,d=0;d<c;d++){a=b[d];try{this._insertChild(a,a.column-1)}catch(a){}}},_insertChild:function(a,b,c){var d=this._grid[b].node,e=d.childNodes.length;return(void 0===c||c>e)&&(c=e),this._disabled?(i.place(a.domNode,d,c),j.set(a.domNode,"tabIndex","0")):a.dragRestriction?(i.place(a.domNode,d,c),j.set(a.domNode,"tabIndex","0")):this._dragManager.addDragItem(d,a.domNode,c,!0),a.set("column",b),a},removeChild:function(a){this._disabled?this.inherited(arguments):this._dragManager.removeDragItem(a.domNode.parentNode,a.domNode)},addService:function(a,b,c){kernel.deprecated("addService is deprecated.","Please use  instead.","Future"),this.addChild(a,b,c)},addChild:function(a,b,c){a.domNode.id=a.id,dojox.layout.GridContainerLite.superclass.addChild.call(this,a,0),(b<0||void 0===b)&&(b=0),c<=0&&(c=0);try{return this._insertChild(a,b,c)}catch(a){}return null},_setColWidthsAttr:function(a){this.colWidths=l.isString(a)?a.split(","):l.isArray(a)?a:[a],this._started&&this._updateColumnsWidth()},_updateColumnsWidth:function(a){for(var b=this._grid.length,c=this._computeColWidth(),d=0;d<b;d++)this._grid[d].node.style.width=c[d]+"%"},_computeColWidth:function(){var a,b,c=this.colWidths||[],d=[],e=0;for(b=0;b<this.nbZones;b++)d.length<c.length?(e+=1*c[b],d.push(c[b])):(a||(a=(100-e)/(this.nbZones-b))<0&&(a=100/this.nbZones),d.push(a),e+=1*a);if(e>100){var f=100/e;for(b=0;b<d.length;b++)d[b]*=f}return d},_selectFocus:function(a){if(!this._disabled){var b,c,d,f,g,h,i,k=a.keyCode,l=n,s=null,t=r.getFocus(),u=t.node,v=this._dragManager;if(u==this.containerNode)switch(h=this.gridNode.childNodes,k){case l.DOWN_ARROW:case l.RIGHT_ARROW:for(b=!1,c=0;c<h.length;c++){for(g=h[c].childNodes,d=0;d<g.length;d++)if(null!==(s=g[d])&&"none"!=s.style.display){q.focus(s),m.stop(a),b=!0;break}if(b)break}break;case l.UP_ARROW:case l.LEFT_ARROW:for(h=this.gridNode.childNodes,b=!1,c=h.length-1;c>=0;c--){for(g=h[c].childNodes,d=g.length;d>=0;d--)if(null!==(s=g[d])&&"none"!=s.style.display){q.focus(s),m.stop(a),b=!0;break}if(b)break}}else if(u.parentNode.parentNode==this.gridNode){var w=k==l.UP_ARROW||k==l.LEFT_ARROW?"lastChild":"firstChild",x=k==l.UP_ARROW||k==l.LEFT_ARROW?"previousSibling":"nextSibling";switch(k){case l.UP_ARROW:case l.DOWN_ARROW:m.stop(a),b=!1;for(var y=u;!b;){g=y.parentNode.childNodes;var z=0;for(c=0;c<g.length&&("none"!=g[c].style.display&&z++,!(z>1));c++);if(1==z)return;s=null===y[x]?y.parentNode[w]:y[x],"none"===s.style.display?y=s:b=!0}if(a.shiftKey){var A=u.parentNode;for(c=0;c<this.gridNode.childNodes.length&&A!=this.gridNode.childNodes[c];c++);for(g=this.gridNode.childNodes[c].childNodes,d=0;d<g.length&&s!=g[d];d++);(e("mozilla")||e("webkit"))&&c--,i=p.byNode(u),i.dragRestriction?o.publish("/dojox/layout/gridContainer/moveRestriction",this):(f=v.removeDragItem(A,u),this.addChild(i,c,d),j.set(u,"tabIndex","0"),q.focus(u))}else q.focus(s);break;case l.RIGHT_ARROW:case l.LEFT_ARROW:if(m.stop(a),a.shiftKey){var B=0;if(null===u.parentNode[x])e("ie")&&k==l.LEFT_ARROW&&(B=this.gridNode.childNodes.length-1);else if(3==u.parentNode[x].nodeType)B=this.gridNode.childNodes.length-2;else{for(c=0;c<this.gridNode.childNodes.length&&u.parentNode[x]!=this.gridNode.childNodes[c];c++)B++;(e("mozilla")||e("webkit"))&&B--}i=p.byNode(u);var C=u.getAttribute("dndtype");C=null===C?i&&i.dndType?i.dndType.split(/\s*,\s*/):["text"]:C.split(/\s*,\s*/);var D=!1;for(c=0;c<this.acceptTypes.length;c++)for(d=0;d<C.length;d++)if(C[d]==this.acceptTypes[c]){D=!0;break}if(D&&!i.dragRestriction){var E=u.parentNode,F=0;if(l.LEFT_ARROW==k){var G=B;(e("mozilla")||e("webkit"))&&(G=B+1),F=this.gridNode.childNodes[G].childNodes.length}f=v.removeDragItem(E,u),this.addChild(i,B,F),j.set(f,"tabIndex","0"),q.focus(f)}else o.publish("/dojox/layout/gridContainer/moveRestriction",this)}else{for(var H=u.parentNode;null===s;)if(H=null!==H[x]&&3!==H[x].nodeType?H[x]:"previousSibling"===x?H.parentNode.childNodes[H.parentNode.childNodes.length-1]:H.parentNode.childNodes[e("ie")?0:1],(s=H[w])&&"none"==s.style.display){g=s.parentNode.childNodes;var I=null;if("previousSibling"==x){for(c=g.length-1;c>=0;c--)if("none"!=g[c].style.display){I=g[c];break}}else for(c=0;c<g.length;c++)if("none"!=g[c].style.display){I=g[c];break}I?s=I:(u=s,H=u.parentNode,s=null)}q.focus(s)}}}}},destroy:function(){var a=this._dragManager;k.forEach(this._grid,function(b){a.unregister(b.node)}),this.inherited(arguments)}});return w.ChildWidgetProperties={column:"1",dragRestriction:!1},l.extend(s,w.ChildWidgetProperties),w})},"dojox/mdnd/AreaManager":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/window","dojo/_base/array","dojo/_base/sniff","dojo/_base/lang","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-geometry","dojo/dom-construct","dijit/registry","dijit/_Widget","./Moveable"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b("dojox.mdnd.AreaManager",null,{autoRefresh:!0,areaClass:"dojoxDndArea",dragHandleClass:"dojoxDragHandle",constructor:function(){this._areaList=[],this.resizeHandler=c.connect(a.global,"onresize",this,function(){this._dropMode.updateAreas(this._areaList)}),this._oldIndexArea=this._currentIndexArea=this._oldDropIndex=this._currentDropIndex=this._sourceIndexArea=this._sourceDropIndex=-1},init:function(){this.registerByClass()},registerByNode:function(a,b){var d=this._getIndexArea(a);if(a&&-1==d){var f=a.getAttribute("accept"),g=f?f.split(/\s*,\s*/):["text"],h={node:a,items:[],coords:{},margin:null,accept:g,initItems:!1};e.forEach(this._getChildren(a),function(a){this._setMarginArea(h,a),h.items.push(this._addMoveableItem(a))},this),this._areaList=this._dropMode.addArea(this._areaList,h),b||this._dropMode.updateAreas(this._areaList),c.publish("/dojox/mdnd/manager/register",[a])}},registerByClass:function(){h("."+this.areaClass).forEach(function(a){this.registerByNode(a,!0)},this),this._dropMode.updateAreas(this._areaList)},unregister:function(a){var b=this._getIndexArea(a);return-1!=b&&(e.forEach(this._areaList[b].items,function(a){this._deleteMoveableItem(a)},this),
this._areaList.splice(b,1),this._dropMode.updateAreas(this._areaList),!0)},_addMoveableItem:function(a){a.setAttribute("tabIndex","0");var b=this._searchDragHandle(a),d=new o({handle:b,skip:!0},a);j.add(b||a,"dragHandle");var e=a.getAttribute("dndType"),f={item:d,type:e?e.split(/\s*,\s*/):["text"],handlers:[c.connect(d,"onDragStart",this,"onDragStart")]};if(m&&m.byNode){var g=m.byNode(a);g&&(f.type=g.dndType?g.dndType.split(/\s*,\s*/):["text"],f.handlers.push(c.connect(g,"uninitialize",this,function(){this.removeDragItem(a.parentNode,d.node)})))}return f},_deleteMoveableItem:function(a){e.forEach(a.handlers,function(a){c.disconnect(a)});var b=a.item.node,d=this._searchDragHandle(b);j.remove(d||b,"dragHandle"),a.item.destroy()},_getIndexArea:function(a){if(a)for(var b=0;b<this._areaList.length;b++)if(this._areaList[b].node===a)return b;return-1},_searchDragHandle:function(a){if(a){var b=this.dragHandleClass.split(" "),c=b.length,d="";return e.forEach(b,function(a,b){d+="."+a,b!=c-1&&(d+=", ")}),h(d,a)[0]}},addDragItem:function(a,b,c,d){var e=!0;if(d||(e=a&&b&&(null===b.parentNode||b.parentNode&&1!==b.parentNode.nodeType)),e){var f=this._getIndexArea(a);if(-1!==f){var g=this._addMoveableItem(b),h=this._areaList[f].items;if(0<=c&&c<h.length){var i=h.slice(0,c),j=h.slice(c,h.length);i[i.length]=g,this._areaList[f].items=i.concat(j),a.insertBefore(b,h[c].item.node)}else this._areaList[f].items.push(g),a.appendChild(b);return this._setMarginArea(this._areaList[f],b),this._areaList[f].initItems=!1,!0}}return!1},removeDragItem:function(a,b){var c=this._getIndexArea(a);if(a&&-1!==c)for(var d=this._areaList[c].items,e=0;e<d.length;e++)if(d[e].item.node===b)return this._deleteMoveableItem(d[e]),d.splice(e,1),a.removeChild(b);return null},_getChildren:function(a){var b=[];return e.forEach(a.childNodes,function(a){if(1==a.nodeType)if(m&&m.byNode){var c=m.byNode(a);c?c.dragRestriction||b.push(a):b.push(a)}else b.push(a)}),b},_setMarginArea:function(a,b){a&&null===a.margin&&b&&(a.margin=k.getMarginExtents(b))},findCurrentIndexArea:function(a,b){return this._oldIndexArea=this._currentIndexArea,this._currentIndexArea=this._dropMode.getTargetArea(this._areaList,a,this._currentIndexArea),this._currentIndexArea!=this._oldIndexArea&&(-1!=this._oldIndexArea&&this.onDragExit(a,b),-1!=this._currentIndexArea&&this.onDragEnter(a,b)),this._currentIndexArea},_isAccepted:function(a,b){this._accept=!1;for(var c=0;c<b.length;++c)for(var d=0;d<a.length;++d)if(a[d]==b[c]){this._accept=!0;break}},onDragStart:function(b,d,e){this.autoRefresh&&this._dropMode.updateAreas(this._areaList);var h=f("webkit")?a.body():a.body().parentNode;this._cover||(this._cover=l.create("div",{class:"dndCover"}),this._cover2=g.clone(this._cover),j.add(this._cover2,"dndCover2"));var i=h.scrollHeight+"px";this._cover.style.height=this._cover2.style.height=i,a.body().appendChild(this._cover),a.body().appendChild(this._cover2),this._dragStartHandler=c.connect(b.ownerDocument,"ondragstart",a,"stopEvent"),this._sourceIndexArea=this._lastValidIndexArea=this._currentIndexArea=this._getIndexArea(b.parentNode);for(var k=this._areaList[this._sourceIndexArea],m=k.items,n=0;n<m.length;n++)if(m[n].item.node==b){this._dragItem=m[n],this._dragItem.handlers.push(c.connect(this._dragItem.item,"onDrag",this,"onDrag")),this._dragItem.handlers.push(c.connect(this._dragItem.item,"onDragEnd",this,"onDrop")),m.splice(n,1),this._currentDropIndex=this._sourceDropIndex=n;break}var o=null;this._sourceDropIndex!==k.items.length&&(o=k.items[this._sourceDropIndex].item.node),f("ie")>7&&(this._eventsIE7=[c.connect(this._cover,"onmouseover",a,"stopEvent"),c.connect(this._cover,"onmouseout",a,"stopEvent"),c.connect(this._cover,"onmouseenter",a,"stopEvent"),c.connect(this._cover,"onmouseleave",a,"stopEvent")]);var p=b.style;p.left=d.x+"px",p.top=d.y+"px","relative"!=p.position&&""!=p.position||(p.position="absolute"),this._cover.appendChild(b),this._dropIndicator.place(k.node,o,e),j.add(b,"dragNode"),this._accept=!0,c.publish("/dojox/mdnd/drag/start",[b,k,this._sourceDropIndex])},onDragEnter:function(a,b){this._currentIndexArea===this._sourceIndexArea?this._accept=!0:this._isAccepted(this._dragItem.type,this._areaList[this._currentIndexArea].accept)},onDragExit:function(a,b){this._accept=!1},onDrag:function(a,b,c,d){var e=this._dropMode.getDragPoint(b,c,d);this.findCurrentIndexArea(e,c),-1!==this._currentIndexArea&&this._accept&&this.placeDropIndicator(e,c)},placeDropIndicator:function(a,b){this._oldDropIndex=this._currentDropIndex;var c=this._areaList[this._currentIndexArea];return c.initItems||this._dropMode.initItems(c),this._currentDropIndex=this._dropMode.getDropIndex(c,a),this._currentIndexArea===this._oldIndexArea&&this._oldDropIndex===this._currentDropIndex||this._placeDropIndicator(b),this._currentDropIndex},_placeDropIndicator:function(a){var b=this._areaList[this._lastValidIndexArea],c=this._areaList[this._currentIndexArea];this._dropMode.refreshItems(b,this._oldDropIndex,a,!1);var d=null;-1!=this._currentDropIndex&&(d=c.items[this._currentDropIndex].item.node),this._dropIndicator.place(c.node,d),this._lastValidIndexArea=this._currentIndexArea,this._dropMode.refreshItems(c,this._currentDropIndex,a,!0)},onDropCancel:function(){if(!this._accept){var a=this._getIndexArea(this._dropIndicator.node.parentNode);this._currentIndexArea=-1!=a?a:0}},onDrop:function(b){this.onDropCancel();var d=this._areaList[this._currentIndexArea];j.remove(b,"dragNode");var f=b.style;f.position="relative",f.left="0",f.top="0",f.width="auto",d.node==this._dropIndicator.node.parentNode?d.node.insertBefore(b,this._dropIndicator.node):(d.node.appendChild(b),this._currentDropIndex=d.items.length);var g=this._currentDropIndex;-1==g&&(g=d.items.length);var h=d.items,i=h.slice(0,g),k=h.slice(g,h.length);i[i.length]=this._dragItem,d.items=i.concat(k),this._setMarginArea(d,b),e.forEach(this._areaList,function(a){a.initItems=!1}),c.disconnect(this._dragItem.handlers.pop()),c.disconnect(this._dragItem.handlers.pop()),this._resetAfterDrop(),this._cover&&(a.body().removeChild(this._cover),a.body().removeChild(this._cover2)),c.publish("/dojox/mdnd/drop",[b,d,g])},_resetAfterDrop:function(){this._accept=!1,this._dragItem=null,this._currentDropIndex=-1,this._currentIndexArea=-1,this._oldDropIndex=-1,this._sourceIndexArea=-1,this._sourceDropIndex=-1,this._dropIndicator.remove(),this._dragStartHandler&&c.disconnect(this._dragStartHandler),f("ie")>7&&e.forEach(this._eventsIE7,c.disconnect)},destroy:function(){for(;this._areaList.length>0;)if(!this.unregister(this._areaList[0].node))throw new Error("Error while destroying AreaManager");c.disconnect(this.resizeHandler),this._dropIndicator.destroy(),this._dropMode.destroy(),dojox.mdnd.autoScroll&&dojox.mdnd.autoScroll.destroy(),this.refreshListener&&c.unsubscribe(this.refreshListener),this._cover&&(l.destroy(this._cover),l.destroy(this._cover2),delete this._cover,delete this._cover2)}});return n&&g.extend(n,{dndType:"text"}),dojox.mdnd._areaManager=null,dojox.mdnd.areaManager=function(){return dojox.mdnd._areaManager||(dojox.mdnd._areaManager=new dojox.mdnd.AreaManager),dojox.mdnd._areaManager},p})},"dojox/mdnd/Moveable":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/_base/window"],function(a,b,c,d,e,f,g,h,i){return b("dojox.mdnd.Moveable",null,{handle:null,skip:!0,dragDistance:3,constructor:function(a,b){this.node=g.byId(b),this.d=this.node.ownerDocument,a||(a={}),this.handle=a.handle?g.byId(a.handle):null,this.handle||(this.handle=this.node),this.skip=a.skip,this.events=[d.connect(this.handle,"onmousedown",this,"onMouseDown")],dojox.mdnd.autoScroll&&(this.autoScroll=dojox.mdnd.autoScroll)},isFormElement:function(a){var b=a.target;return 3==b.nodeType&&(b=b.parentNode)," a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")>=0},onMouseDown:function(b){if(!this._isDragging){1==(b.which||b.button)&&(this.skip&&this.isFormElement(b)||(this.autoScroll&&(this.autoScroll.setAutoScrollNode(this.node),this.autoScroll.setAutoScrollMaxPage()),this.events.push(d.connect(this.d,"onmouseup",this,"onMouseUp")),this.events.push(d.connect(this.d,"onmousemove",this,"onFirstMove")),this._selectStart=d.connect(a.body(),"onselectstart",e.stop),this._firstX=b.clientX,this._firstY=b.clientY,e.stop(b)))}},onFirstMove:function(a){e.stop(a),(this._firstX-a.clientX)*(this._firstX-a.clientX)+(this._firstY-a.clientY)*(this._firstY-a.clientY)>this.dragDistance*this.dragDistance&&(this._isDragging=!0,d.disconnect(this.events.pop()),i.set(this.node,"width",h.getContentBox(this.node).w+"px"),this.initOffsetDrag(a),this.events.push(d.connect(this.d,"onmousemove",this,"onMove")))},initOffsetDrag:function(a){this.offsetDrag={l:a.pageX,t:a.pageY};var b=(this.node.style,h.position(this.node,!0));this.offsetDrag.l=b.x-this.offsetDrag.l,this.offsetDrag.t=b.y-this.offsetDrag.t;var c={x:b.x,y:b.y};this.size={w:b.w,h:b.h},this.onDragStart(this.node,c,this.size)},onMove:function(a){if(e.stop(a),!(8==f("ie")&&new Date-this.date<20)){this.autoScroll&&this.autoScroll.checkAutoScroll(a);var b={x:this.offsetDrag.l+a.pageX,y:this.offsetDrag.t+a.pageY},c=this.node.style;c.left=b.x+"px",c.top=b.y+"px",this.onDrag(this.node,b,this.size,{x:a.pageX,y:a.pageY}),8==f("ie")&&(this.date=new Date)}},onMouseUp:function(a){this._isDragging&&(e.stop(a),this._isDragging=!1,this.autoScroll&&this.autoScroll.stopAutoScroll(),delete this.onMove,this.onDragEnd(this.node),this.node.focus()),d.disconnect(this.events.pop()),d.disconnect(this.events.pop())},onDragStart:function(a,b,c){},onDragEnd:function(a){},onDrag:function(a,b,c,d){},destroy:function(){c.forEach(this.events,d.disconnect),this.events=this.node=null}})})},"dojox/mdnd/DropIndicator":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","./AreaManager"],function(a,b,c,d){var e=b("dojox.mdnd.DropIndicator",null,{node:null,constructor:function(){var a=document.createElement("div"),b=document.createElement("div");a.appendChild(b),c.add(a,"dropIndicator"),this.node=a},place:function(a,b,c){c&&(this.node.style.height=c.h+"px");try{return b?a.insertBefore(this.node,b):a.appendChild(this.node),this.node}catch(a){return null}},remove:function(){this.node&&(this.node.style.height="",this.node.parentNode&&this.node.parentNode.removeChild(this.node))},destroy:function(){this.node&&(this.node.parentNode&&this.node.parentNode.removeChild(this.node),d.destroy(this.node),delete this.node)}});return dojox.mdnd.areaManager()._dropIndicator=new dojox.mdnd.DropIndicator,e})},"dojox/mdnd/dropMode/OverDropMode":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/dom-geometry","dojox/mdnd/AreaManager"],function(a,b,c,d,e){var f=b("dojox.mdnd.dropMode.OverDropMode",null,{_oldXPoint:null,_oldYPoint:null,_oldBehaviour:"up",constructor:function(){this._dragHandler=[c.connect(dojox.mdnd.areaManager(),"onDragEnter",function(a,b){var c=dojox.mdnd.areaManager();-1==c._oldIndexArea&&(c._oldIndexArea=c._lastValidIndexArea)})]},addArea:function(a,b){var c=a.length,d=e.position(b.node,!0);if(b.coords={x:d.x,y:d.y},0==c)a.push(b);else{for(var f=b.coords.x,g=0;g<c;g++)if(f<a[g].coords.x){for(var h=c-1;h>=g;h--)a[h+1]=a[h];a[g]=b;break}g==c&&a.push(b)}return a},updateAreas:function(a){for(var b=a.length,c=0;c<b;c++)this._updateArea(a[c])},_updateArea:function(a){var b=e.position(a.node,!0);a.coords.x=b.x,a.coords.x2=b.x+b.w,a.coords.y=b.y},initItems:function(a){d.forEach(a.items,function(a){var b=a.item.node,c=e.position(b,!0),d=c.y+c.h/2;a.y=d}),a.initItems=!0},refreshItems:function(a,b,c,d){if(-1!=b&&a&&c&&c.h){var e=c.h;a.margin&&(e+=a.margin.t);for(var f=a.items.length,g=b;g<f;g++){var h=a.items[g];d?h.y+=e:h.y-=e}}},getDragPoint:function(a,b,c){return{x:c.x,y:c.y}},getTargetArea:function(a,b,c){var d=0,e=b.x,f=b.y,g=a.length,h=0,i="right",j=!1;if(-1==c||arguments.length<3?j=!0:this._checkInterval(a,c,e,f)?d=c:(this._oldXPoint<e?h=c+1:(h=c-1,g=0,i="left"),j=!0),j)if("right"===i){for(var k=h;k<g;k++)if(this._checkInterval(a,k,e,f)){d=k;break}k==g&&(d=-1)}else{for(var k=h;k>=g;k--)if(this._checkInterval(a,k,e,f)){d=k;break}k==g-1&&(d=-1)}return this._oldXPoint=e,d},_checkInterval:function(a,b,c,d){var e=a[b],f=e.node,g=e.coords,h=g.x,i=g.x2,j=g.y,k=j+f.offsetHeight;return h<=c&&c<=i&&j<=d&&d<=k},getDropIndex:function(a,b){var c=a.items.length,d=(a.coords,b.y);if(c>0)for(var e=0;e<c;e++){if(d<a.items[e].y)return e;if(e==c-1)return-1}return-1},destroy:function(){d.forEach(this._dragHandler,c.disconnect)}});return dojox.mdnd.areaManager()._dropMode=new dojox.mdnd.dropMode.OverDropMode,f})},"dojox/mdnd/AutoScroll":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/ready","dojo/_base/window"],function(a,b,c,d,e,f){var g=b("dojox.mdnd.AutoScroll",null,{interval:3,recursiveTimer:10,marginMouse:50,constructor:function(){this.resizeHandler=d.connect(a.global,"onresize",this,function(){this.getViewport()}),f(c.hitch(this,"init"))},init:function(){this._html=e("webkit")?a.body():a.body().parentNode,this.getViewport()},getViewport:function(){var b=a.doc,c=b.documentElement,d=window,e=a.body();a.isMozilla?this._v={w:c.clientWidth,h:d.innerHeight}:!a.isOpera&&d.innerWidth?this._v={w:d.innerWidth,h:d.innerHeight}:!a.isOpera&&c&&c.clientWidth?this._v={w:c.clientWidth,h:c.clientHeight}:e.clientWidth&&(this._v={w:e.clientWidth,h:e.clientHeight})},setAutoScrollNode:function(a){this._node=a},setAutoScrollMaxPage:function(){this._yMax=this._html.scrollHeight,this._xMax=this._html.scrollWidth},checkAutoScroll:function(a){this._autoScrollActive&&this.stopAutoScroll(),this._y=a.pageY,this._x=a.pageX,a.clientX<this.marginMouse?(this._autoScrollActive=!0,this._autoScrollLeft(a)):a.clientX>this._v.w-this.marginMouse&&(this._autoScrollActive=!0,this._autoScrollRight(a)),a.clientY<this.marginMouse?(this._autoScrollActive=!0,this._autoScrollUp(a)):a.clientY>this._v.h-this.marginMouse&&(this._autoScrollActive=!0,this._autoScrollDown())},_autoScrollDown:function(){this._timer&&clearTimeout(this._timer),this._autoScrollActive&&this._y+this.marginMouse<this._yMax&&(this._html.scrollTop+=this.interval,this._node.style.top=parseInt(this._node.style.top)+this.interval+"px",this._y+=this.interval,this._timer=setTimeout(c.hitch(this,"_autoScrollDown"),this.recursiveTimer))},_autoScrollUp:function(){this._timer&&clearTimeout(this._timer),this._autoScrollActive&&this._y-this.marginMouse>0&&(this._html.scrollTop-=this.interval,this._node.style.top=parseInt(this._node.style.top)-this.interval+"px",this._y-=this.interval,this._timer=setTimeout(c.hitch(this,"_autoScrollUp"),this.recursiveTimer))},_autoScrollRight:function(){this._timer&&clearTimeout(this._timer),this._autoScrollActive&&this._x+this.marginMouse<this._xMax&&(this._html.scrollLeft+=this.interval,this._node.style.left=parseInt(this._node.style.left)+this.interval+"px",this._x+=this.interval,this._timer=setTimeout(c.hitch(this,"_autoScrollRight"),this.recursiveTimer))},_autoScrollLeft:function(a){this._timer&&clearTimeout(this._timer),this._autoScrollActive&&this._x-this.marginMouse>0&&(this._html.scrollLeft-=this.interval,this._node.style.left=parseInt(this._node.style.left)-this.interval+"px",this._x-=this.interval,this._timer=setTimeout(c.hitch(this,"_autoScrollLeft"),this.recursiveTimer))},stopAutoScroll:function(){this._timer&&clearTimeout(this._timer),this._autoScrollActive=!1},destroy:function(){d.disconnect(this.resizeHandler)}});return dojox.mdnd.autoScroll=null,dojox.mdnd.autoScroll=new dojox.mdnd.AutoScroll,g})},"dojox/layout/TableContainer":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/_base/array","dojo/dom-prop","dojo/dom-style","dijit/_WidgetBase","dijit/layout/_LayoutWidget"],function(a,b,c,d,e,f,g,h,i,j){a.experimental("dojox.layout.TableContainer");var k=c("dojox.layout.TableContainer",j,{cols:1,labelWidth:"100",showLabels:!0,orientation:"horiz",spacing:1,customClass:"",postCreate:function(){this.inherited(arguments),this._children=[],this.connect(this,"set",function(a,b){!b||"orientation"!=a&&"customClass"!=a&&"cols"!=a||this.layout()})},startup:function(){if(!this._started&&(this.inherited(arguments),!this._initialized)){var a=this.getChildren();a.length<1||(this._initialized=!0,d.add(this.domNode,"dijitTableLayout"),f.forEach(a,function(a){a.started||a._started||a.startup()}),this.layout(),this.resize())}},resize:function(){f.forEach(this.getChildren(),function(a){"function"==typeof a.resize&&a.resize()})},layout:function(){function a(a,b,c){if(""!=j.customClass){var e=j.customClass+"-"+(b||a.tagName.toLowerCase());d.add(a,e),arguments.length>2&&d.add(a,e+"-"+c)}}if(this._initialized){var c=this.getChildren(),i={},j=this;f.forEach(this._children,b.hitch(this,function(a){i[a.id]=a})),f.forEach(c,b.hitch(this,function(a,b){i[a.id]||this._children.push(a)}));var k=e.create("table",{width:"100%",class:"tableContainer-table tableContainer-table-"+this.orientation,cellspacing:this.spacing},this.domNode),l=e.create("tbody");k.appendChild(l),a(k,"table",this.orientation);var m=(Math.floor(100/this.cols),e.create("tr",{},l)),n=this.showLabels&&"horiz"!=this.orientation?e.create("tr",{},l):m,o=this.cols*(this.showLabels?2:1),p=0;f.forEach(this._children,b.hitch(this,function(b,c){var d=b.colspan||1;d>1&&(d=this.showLabels?Math.min(o-1,2*d-1):Math.min(o,d)),p+d-1+(this.showLabels?1:0)>=o&&(p=0,m=e.create("tr",{},l),n="horiz"==this.orientation?m:e.create("tr",{},l));var f;if(this.showLabels)if(f=e.create("td",{class:"tableContainer-labelCell"},m),b.spanLabel)g.set(f,"vert"==this.orientation?"rowspan":"colspan",2);else{a(f,"labelCell");var i={for:b.get("id")},j=e.create("label",i,f);(Number(this.labelWidth)>-1||String(this.labelWidth).indexOf("%")>-1)&&h.set(f,"width",String(this.labelWidth).indexOf("%")<0?this.labelWidth+"px":this.labelWidth),j.innerHTML=b.get("label")||b.get("title")}var k;k=b.spanLabel&&f?f:e.create("td",{class:"tableContainer-valueCell"},n),d>1&&g.set(k,"colspan",d),a(k,"valueCell",c),k.appendChild(b.domNode),p+=d+(this.showLabels?1:0)})),this.table&&this.table.parentNode.removeChild(this.table),f.forEach(c,function(a){"function"==typeof a.layout&&a.layout()}),this.table=k,this.resize()}},destroyDescendants:function(a){f.forEach(this._children,function(b){b.destroyRecursive(a)})},_setSpacingAttr:function(a){this.spacing=a,this.table&&(this.table.cellspacing=Number(a))}});return k.ChildWidgetProperties={label:"",title:"",spanLabel:!1,colspan:1},b.extend(i,k.ChildWidgetProperties),k})},"dojox/layout/ContentPane":function(){define(["dojo/_base/lang","dojo/_base/xhr","dijit/layout/ContentPane","dojox/html/_base","dojo/_base/declare"],function(a,b,c,d,e){return e("dojox.layout.ContentPane",c,{adjustPaths:!1,cleanContent:!1,renderStyles:!1,executeScripts:!0,scriptHasHooks:!1,ioMethod:b.get,ioArgs:{},onExecError:function(a){},_setContent:function(b){var c=this._contentSetter;return c&&c instanceof d._ContentSetter||(c=this._contentSetter=new d._ContentSetter({node:this.containerNode,_onError:a.hitch(this,this._onError),onContentError:a.hitch(this,function(a){var b=this.onContentError(a);try{this.containerNode.innerHTML=b}catch(a){}})})),this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"},this.inherited("_setContent",arguments)},destroy:function(){var a=this._contentSetter;a&&a.tearDown(),this.inherited(arguments)}})})},"dojox/html/_base":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/dom-construct","dojo/html","dojo/_base/kernel","dojo/_base/lang","dojo/ready","dojo/_base/sniff","dojo/_base/url","dojo/_base/xhr","dojo/when","dojo/_base/window"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=e.getObject("dojox.html",!0);if(h("ie"))var n=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var o=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,p=m._adjustCssPaths=function(a,b){if(b&&a)return n&&(b=b.replace(n,function(b,c,d,e,f){return c+new i(a,"./"+e).toString()+f})),b.replace(o,function(b,c,d,e,f,g){return d?'@import "'+new i(a,"./"+d).toString()+'"'+g:"url("+new i(a,"./"+f).toString()+")"+g})},q=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,r=m._adjustHtmlPaths=function(a,b){var c=a||"./";return b.replace(q,function(a,b,d,e,f,g,h,j){return b+(d?d+"="+e+new i(c,f).toString()+e:"style="+g+p(c,h)+g)+j})},s=m._snarfStyles=function(a,b,c){return c.attributes=[],b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)style\b/gi,"&lt;$1Style").replace(/<(\/?)link\b/gi,"&lt;$1Link").replace(/@import "/gi,'@ import "')}),b.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(b,d,e,f,g,h){var i,j=(d||f||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(e?i=c.push(a?p(a,e):e):(i=c.push('@import "'+h+'";'),j=j.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"")),j){j=j.split(/\s+/);for(var k,l={},m=0,n=j.length;m<n;m++)k=j[m].split("="),l[k[0]]=k[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");c.attributes[i-1]=l}return""})},t=m._snarfScripts=function(a,b){function c(a){b.downloadRemote&&(a=a.replace(/&([a-z0-9#]+);/g,function(a,b){switch(b){case"amp":return"&";case"gt":return">";case"lt":return"<";default:return"#"==b.charAt(0)?String.fromCharCode(b.substring(1)):"&"+b+";"}}),j.get({url:a,sync:!0,load:function(a){b.code+=a+";"},error:b.errBack}))}return b.code="",a=a.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)script\b/gi,"&lt;$1Script")}),a.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?>([\s\S]*?)<\/script>/gi,function(a,d,e,f){return e?c(e):b.code+=f,""})},u=m.evalInGlobal=function(a,b){b=b||l.doc.body;var c=b.ownerDocument.createElement("script");c.type="text/javascript",b.appendChild(c),c.text=a};return m._ContentSetter=a(d._ContentSetter,{adjustPaths:!1,referencePath:".",renderStyles:!1,executeScripts:!1,scriptHasHooks:!1,scriptHookReplacement:null,_renderStyles:function(a){this._styleNodes=[];for(var b,c,d,e=this.node.ownerDocument,f=e.getElementsByTagName("head")[0],g=0,h=a.length;g<h;g++){d=a[g],c=a.attributes[g],b=e.createElement("style"),b.setAttribute("type","text/css");for(var i in c)b.setAttribute(i,c[i]);this._styleNodes.push(b),f.appendChild(b),b.styleSheet?b.styleSheet.cssText=d:b.appendChild(e.createTextNode(d))}},empty:function(){this.inherited("empty",arguments),this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var a=this.content,b=(this.node,this._styles);if(f.isString(a)&&(this.adjustPaths&&this.referencePath&&(a=r(this.referencePath,a)),(this.renderStyles||this.cleanContent)&&(a=s(this.referencePath,a,b)),this.executeScripts)){var c=this,d={downloadRemote:!0,errBack:function(a){c._onError.call(c,"Exec",'Error downloading remote script in "'+c.id+'"',a)}};a=t(a,d),this._code=d.code}this.content=a},onEnd:function(){var a=this._code,d=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)c.destroy(this._styleNodes.pop());this.renderStyles&&d&&d.length&&this._renderStyles(d);var e=new b,h=this.getInherited(arguments),i=arguments,j=f.hitch(this,function(){h.apply(this,i),k(this.parseDeferred,function(){e.resolve()})});if(this.executeScripts&&a){this.cleanContent&&(a=a.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"")),this.scriptHasHooks&&(a=a.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement));try{u(a,this.node)}catch(a){this._onError("Exec","Error eval script in "+this.id+", "+a.message,a)}g(j)}else j();return e.promise},tearDown:function(){if(this.inherited(arguments),delete this._styles,this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)c.destroy(this._styleNodes.pop());delete this._styleNodes,f.mixin(this,m._ContentSetter.prototype)}}),m.set=function(a,b,c){if(c){return new m._ContentSetter(f.mixin(c,{content:b,node:a})).set()}return d._setNodeContent(a,b,!0)},m})},"dojox/mdnd/dropMode/DefaultDropMode":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojox/mdnd/AreaManager"],function(a,b,c,d){var e=b("dojox.mdnd.dropMode.DefaultDropMode",null,{_oldXPoint:null,_oldYPoint:null,_oldBehaviour:"up",addArea:function(a,b){var c=a.length,e=d.position(b.node,!0);if(b.coords={x:e.x,y:e.y},0==c)a.push(b);else{for(var f=b.coords.x,g=0;g<c;g++)if(f<a[g].coords.x){for(var h=c-1;h>=g;h--)a[h+1]=a[h];a[g]=b;break}g==c&&a.push(b)}return a},updateAreas:function(a){var b=a.length;if(b>1)for(var c,d,e=0;e<b;e++){var f,g=a[e];g.coords.x1=-1,g.coords.x2=-1,0==e?(f=a[e+1],this._updateArea(g),this._updateArea(f),c=g.coords.x+g.node.offsetWidth,d=f.coords.x,g.coords.x2=c+(d-c)/2):e==b-1?g.coords.x1=a[e-1].coords.x2:(f=a[e+1],this._updateArea(f),c=g.coords.x+g.node.offsetWidth,d=f.coords.x,g.coords.x1=a[e-1].coords.x2,g.coords.x2=c+(d-c)/2)}},_updateArea:function(a){var b=d.position(a.node,!0);a.coords.x=b.x,a.coords.y=b.y},initItems:function(a){c.forEach(a.items,function(a){var b=a.item.node,c=d.position(b,!0),e=c.y+c.h/2;a.y=e}),a.initItems=!0},refreshItems:function(a,b,c,d){if(-1!=b&&a&&c&&c.h){var e=c.h;a.margin&&(e+=a.margin.t);for(var f=a.items.length,g=b;g<f;g++){var h=a.items[g];d?h.y+=e:h.y-=e}}},getDragPoint:function(a,b,c){var d=a.y;return this._oldYPoint&&(d>this._oldYPoint?(this._oldBehaviour="down",d+=b.h):d<=this._oldYPoint&&(this._oldBehaviour="up")),this._oldYPoint=d,{x:a.x+b.w/2,y:d}},getTargetArea:function(a,b,c){var d=0,e=b.x,f=a.length;if(f>1){var g=0,h="right",i=!1;if(-1==c||arguments.length<3?i=!0:this._checkInterval(a,c,e)?d=c:(this._oldXPoint<e?g=c+1:(g=c-1,f=0,h="left"),i=!0),i)if("right"===h){for(var j=g;j<f;j++)if(this._checkInterval(a,j,e)){d=j;break}}else for(var j=g;j>=f;j--)if(this._checkInterval(a,j,e)){d=j;break}}return this._oldXPoint=e,d},_checkInterval:function(a,b,c){var d=a[b].coords;if(-1==d.x1){if(c<=d.x2)return!0}else if(-1==d.x2){if(c>d.x1)return!0}else if(d.x1<c&&c<=d.x2)return!0;return!1},getDropIndex:function(a,b){var c=a.items.length,d=(a.coords,b.y);if(c>0)for(var e=0;e<c;e++){if(d<a.items[e].y)return e;if(e==c-1)return-1}return-1},destroy:function(){}});return dojox.mdnd.areaManager()._dropMode=new dojox.mdnd.dropMode.DefaultDropMode,e})},"dojox/storage/Provider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(a,b,c){return b("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(a,b,c,d){},get:function(a,b){},hasKey:function(a,b){return!!this.get(a,b)},getKeys:function(a){},clear:function(a){},remove:function(a,b){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(a,b,c,d){for(var e=0;e<a.length;e++)dojox.storage.put(a[e],b[e],c,d)},getMultiple:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(dojox.storage.get(a[d],b));return c},removeMultiple:function(a,b){for(var c=0;c<a.length;c++)dojox.storage.remove(a[c],b)},isValidKeyArray:function(b){return!(null===b||void 0===b||!c.isArray(b))&&!a.some(b,function(a){return!this.isValidKey(a)},this)},hasSettingsUI:function(){return!1},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(a){return null!==a&&void 0!==a&&/^[0-9A-Za-z_]*$/.test(a)},getResourceList:function(){return[]}})})},"dojox/storage/manager":function(){define(["dojo/_base/config","dojo/_base/lang","dojo/_base/array"],function(config,lang,array){var manager=new function(){this.currentProvider=null,this.available=!1,this.providers=[],this._initialized=!1,this._onLoadListeners=[],this.initialize=function(){this.autodetect()},this.register=function(a,b){this.providers.push(b),this.providers[a]=b},this.setProvider=function(a){},this.autodetect=function(){if(!this._initialized){for(var a,b=config.forceStorageProvider||!1,c=0;c<this.providers.length;c++){if(a=this.providers[c],b&&b==a.declaredClass){a.isAvailable();break}if(!b&&a.isAvailable())break}if(!a)return this._initialized=!0,this.available=!1,this.currentProvider=null,void this.loaded();this.currentProvider=a,lang.mixin(dojox.storage,this.currentProvider),dojox.storage.initialize(),this._initialized=!0,this.available=!0}},this.isAvailable=function(){return this.available},this.addOnLoad=function(a){this._onLoadListeners.push(a),this.isInitialized()&&this._fireLoaded()},this.removeOnLoad=function(a){for(var b=0;b<this._onLoadListeners.length;b++)if(a==this._onLoadListeners[b]){this._onLoadListeners.splice(b,1);break}},this.isInitialized=function(){return(null==this.currentProvider||"dojox.storage.FlashStorageProvider"!=this.currentProvider.declaredClass||0!=dojox.flash.ready)&&this._initialized},this.supportsProvider=function(storageClass){try{var provider=eval("new "+storageClass+"()"),results=provider.isAvailable();return results||!1}catch(a){return!1}},this.getProvider=function(){return this.currentProvider},this.loaded=function(){this._fireLoaded()},this._fireLoaded=function(){array.forEach(this._onLoadListeners,function(a){try{a()}catch(a){}})},this.getResourceList=function(){var a=[];return array.forEach(dojox.storage.manager.providers,function(b){a=a.concat(b.getResourceList())}),a}};return manager})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(a,b,c){var d=a.getObject("validate.regexp",!0,c);return d=c.validate.regexp={ipAddress:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowDottedDecimal&&(a.allowDottedDecimal=!0),"boolean"!=typeof a.allowDottedHex&&(a.allowDottedHex=!0),"boolean"!=typeof a.allowDottedOctal&&(a.allowDottedOctal=!0),"boolean"!=typeof a.allowDecimal&&(a.allowDecimal=!0),"boolean"!=typeof a.allowHex&&(a.allowHex=!0),"boolean"!=typeof a.allowIPv6&&(a.allowIPv6=!0),"boolean"!=typeof a.allowHybrid&&(a.allowHybrid=!0);var b=[];a.allowDottedDecimal&&b.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])"),a.allowDottedHex&&b.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]"),a.allowDottedOctal&&b.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]"),a.allowDecimal&&b.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])"),a.allowHex&&b.push("0[xX]0*[\\da-fA-F]{1,8}"),a.allowIPv6&&b.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}"),a.allowHybrid&&b.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");var c="";return b.length>0&&(c="("+b.join("|")+")"),c},host:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowIP&&(a.allowIP=!0),"boolean"!=typeof a.allowLocal&&(a.allowLocal=!1),"boolean"!=typeof a.allowPort&&(a.allowPort=!0),"boolean"!=typeof a.allowNamed&&(a.allowNamed=!1);var b="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)",c="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)",e=a.allowPort?"(\\:\\d+)?":"",f="((?:"+b+"\\.)+"+c+"\\.?)";return a.allowIP&&(f+="|"+d.ipAddress(a)),a.allowLocal&&(f+="|localhost"),a.allowNamed&&(f+="|^[^-][a-zA-Z0-9_-]*"),"("+f+")"+e},url:function(a){return a="object"==typeof a?a:{},"scheme"in a||(a.scheme=[!0,!1]),
b.buildGroupRE(a.scheme,function(a){return a?"(https?|ftps?)\\://":""})+d.host(a)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},emailAddress:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowCruft&&(a.allowCruft=!1),a.allowPort=!1;var b="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+",c=b+"@"+d.host(a);return a.allowCruft&&(c="<?(mailto\\:)?"+c+">?"),c},emailAddressList:function(a){a="object"==typeof a?a:{},"string"!=typeof a.listSeparator&&(a.listSeparator="\\s;,");var b=d.emailAddress(a);return"("+b+"\\s*["+a.listSeparator+"]\\s*)*"+b+"\\s*["+a.listSeparator+"]?\\s*"},numberFormat:function(a){a="object"==typeof a?a:{},void 0===a.format&&(a.format="###-###-####");var c=function(a){return b.escapeString(a,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")};return b.buildGroupRE(a.format,c)},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowTerritories&&(a.allowTerritories=!0),"boolean"!=typeof a.allowMilitary&&(a.allowMilitary=!0);var b="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";return a.allowTerritories&&(b+="|AS|FM|GU|MH|MP|PW|PR|VI"),a.allowMilitary&&(b+="|AA|AE|AP"),"("+b+")"}}}})},"dojox/widget/Portlet":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/_base/connect","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dojo/fx","dijit/registry","dijit/TitlePane","dijit/_Container","./PortletSettings","./PortletDialogSettings"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return b.experimental("dojox.widget.Portlet"),a("dojox.widget.Portlet",[l,m],{resizeChildren:!0,closable:!0,_parents:null,_size:null,dragRestriction:!1,buildRendering:function(){this.inherited(arguments),g.set(this.domNode,"visibility","hidden")},postCreate:function(){this.inherited(arguments),h.add(this.domNode,"dojoxPortlet"),h.remove(this.arrowNode,"dijitArrowNode"),h.add(this.arrowNode,"dojoxPortletIcon dojoxArrowDown"),h.add(this.titleBarNode,"dojoxPortletTitle"),h.add(this.hideNode,"dojoxPortletContentOuter"),h.add(this.domNode,"dojoxPortlet-"+(this.dragRestriction?"nonmovable":"movable"));var a=this;if(this.resizeChildren){this.subscribe("/dnd/drop",function(){a._updateSize()}),this.subscribe("/Portlet/sizechange",function(b){a.onSizeChange(b)}),this.connect(window,"onresize",function(){a._updateSize()});var b,d=c.hitch(this,function(b,c){var d=k.byId(b);if(d.selectChild){var e=this.subscribe(b+"-selectChild",function(b){for(var c=a.domNode.parentNode;c;){if(c==b.domNode){a.unsubscribe(e),a._updateSize();break}c=c.parentNode}}),f=k.byId(c);d&&f&&a._parents.push({parent:d,child:f})}});this._parents=[];for(var f=this.domNode.parentNode;null!=f;f=f.parentNode){var i=f.getAttribute?f.getAttribute("widgetId"):null;i&&(d(i,b),b=i)}}this.connect(this.titleBarNode,"onmousedown",function(a){return!h.contains(a.target,"dojoxPortletIcon")||(e.stop(a),!1)}),this.connect(this._wipeOut,"onEnd",function(){a._publish()}),this.connect(this._wipeIn,"onEnd",function(){a._publish()}),this.closable&&(this.closeIcon=this._createIcon("dojoxCloseNode","dojoxCloseNodeHover",c.hitch(this,"onClose")),g.set(this.closeIcon,"display",""))},startup:function(){if(!this._started){var a=this.getChildren();this._placeSettingsWidgets(),d.forEach(a,function(a){try{a.started||a._started||a.startup()}catch(a){}}),this.inherited(arguments),g.set(this.domNode,"visibility","visible")}},_placeSettingsWidgets:function(){d.forEach(this.getChildren(),c.hitch(this,function(a){a.portletIconClass&&a.toggle&&!a.get("portlet")&&(this._createIcon(a.portletIconClass,a.portletIconHoverClass,c.hitch(a,"toggle")),i.place(a.domNode,this.containerNode,"before"),a.set("portlet",this),this._settingsWidget=a)}))},_createIcon:function(a,b,c){var d=i.create("div",{class:"dojoxPortletIcon "+a,waiRole:"presentation"});return i.place(d,this.arrowNode,"before"),this.connect(d,"onclick",c),b&&(this.connect(d,"onmouseover",function(){h.add(d,b)}),this.connect(d,"onmouseout",function(){h.remove(d,b)})),d},onClose:function(a){g.set(this.domNode,"display","none")},onSizeChange:function(a){a!=this&&this._updateSize()},_updateSize:function(){this.open&&this._started&&this.resizeChildren&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(c.hitch(this,function(){for(var a={w:g.get(this.domNode,"width"),h:g.get(this.domNode,"height")},b=0;b<this._parents.length;b++){var e=this._parents[b],f=e.parent.selectedChildWidget;if(f&&f!=e.child)return}if(!this._size||this._size.w!=a.w||this._size.h!=a.h){this._size=a;var h=["resize","layout"];this._timer=null;var i=this.getChildren();d.forEach(i,function(a){for(var b=0;b<h.length;b++)if(c.isFunction(a[h[b]])){try{a[h[b]]()}catch(a){}break}}),this.onUpdateSize()}}),100))},onUpdateSize:function(){},_publish:function(){f.publish("/Portlet/sizechange",[this])},_onTitleClick:function(a){a.target==this.arrowNode&&this.inherited(arguments)},addChild:function(a){this._size=null,this.inherited(arguments),this._started&&(this._placeSettingsWidgets(),this._updateSize()),!this._started||a.started||a._started||a.startup()},destroyDescendants:function(a){this.inherited(arguments),this._settingsWidget&&this._settingsWidget.destroyRecursive(a)},destroy:function(){this._timer&&clearTimeout(this._timer),this.inherited(arguments)},_setCss:function(){this.inherited(arguments),g.set(this.arrowNode,"display",this.toggleable?"":"none")}})})},"dojox/widget/PortletSettings":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom-class","dojo/fx","dijit/_Container","dijit/layout/ContentPane"],function(a,b,c,d,e,f,g){return a("dojox.widget.PortletSettings",[f,g],{portletIconClass:"dojoxPortletSettingsIcon",portletIconHoverClass:"dojoxPortletSettingsIconHover",postCreate:function(){c.set(this.domNode,"display","none"),d.add(this.domNode,"dojoxPortletSettingsContainer"),d.remove(this.domNode,"dijitContentPane")},_setPortletAttr:function(a){this.portlet=a},toggle:function(){var a=this.domNode;"none"==c.get(a,"display")?(c.set(a,{display:"block",height:"1px",width:"auto"}),e.wipeIn({node:a}).play()):e.wipeOut({node:a,onEnd:b.hitch(this,function(){c.set(a,{display:"none",height:"",width:""})})}).play()}})})},"dojox/widget/PortletDialogSettings":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-style","./PortletSettings","dijit/Dialog"],function(a,b,c,d,e){return a("dojox.widget.PortletDialogSettings",[d],{dimensions:null,constructor:function(a,b){this.dimensions=a.dimensions||[300,100]},toggle:function(){this.dialog||(this.dialog=new e({title:this.title}),b.body().appendChild(this.dialog.domNode),this.dialog.containerNode.appendChild(this.domNode),c.set(this.dialog.domNode,{width:this.dimensions[0]+"px",height:this.dimensions[1]+"px"}),c.set(this.domNode,"display","")),this.dialog.open?this.dialog.hide():this.dialog.show(this.domNode)}})})},"dojox/widget/Standby":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a.experimental("dojox.widget.Standby"),b("dojox.widget.Standby",[o,p],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'<div><div style="display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint="_underlayNode"></div><img src="${image}" style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint="_imageNode"><div style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint="_textNode"></div></div>',_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(a){if(!this._started){if("string"==typeof this.target){var b=q.byId(this.target);this.target=b?b.domNode:f.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text),"image"===this.centerIndicator?(this._centerNode=this._imageNode,g.set(this._imageNode,"src",this.image),g.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode,j.set(this._underlayNode,{display:"none",backgroundColor:this.color}),j.set(this._centerNode,"display","none"),this.connect(this._underlayNode,"onclick","_ignore"),this.domNode.parentNode&&this.domNode.parentNode!=l.body()&&l.body().appendChild(this.domNode),7==e("ie")&&(this._ieFixNode=h.create("div"),j.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),l.body().appendChild(this._ieFixNode)),this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){this._displayed&&(this._anim&&(this._anim.stop(),delete this._anim),this._size(),this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null))},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1,this._resizeCheck&&clearInterval(this._resizeCheck),j.set(this._centerNode,"display","none"),j.set(this._underlayNode,"display","none"),7==e("ie")&&this._ieFixNode&&(l.body().removeChild(this._ieFixNode),delete this._ieFixNode),this._anim&&(this._anim.stop(),delete this._anim),this.target=null,this._imageNode=null,this._textNode=null,this._centerNode=null,this.inherited(arguments)},_size:function(){if(this._displayed){var a=g.get(l.body(),"dir");a&&(a=a.toLowerCase());var b,c=this._scrollerWidths(),d=this.target,f=j.get(this._centerNode,"display");j.set(this._centerNode,"display","block");var h=i.position(d,!0);d!==l.body()&&d!==l.doc||(h=k.getBox(),h.x=h.l,h.y=h.t);var m=i.getMarginBox(this._centerNode);j.set(this._centerNode,"display",f),this._ieFixNode&&(b=-this._ieFixNode.offsetTop/1e3,h.x=Math.floor((h.x+.9)/b),h.y=Math.floor((h.y+.9)/b),h.w=Math.floor((h.w+.9)/b),h.h=Math.floor((h.h+.9)/b));var n=j.get(d,"zIndex"),o=n,p=n;if("auto"===this.zIndex)if("auto"!=n)o=parseInt(o,10)+1,p=parseInt(p,10)+2;else{var q=d;if(q&&q!==l.body()&&q!==l.doc){q=d.parentNode;for(var r=-1e5;q&&q!==l.body();)if((n=j.get(q,"zIndex"))&&"auto"!==n){var s=parseInt(n,10);r<s&&(r=s,o=s+1,p=s+2),q=q.parentNode}else q=q.parentNode}}else o=parseInt(this.zIndex,10)+1,p=parseInt(this.zIndex,10)+2;j.set(this._centerNode,"zIndex",p),j.set(this._underlayNode,"zIndex",o);var t=d.parentNode;if(t&&t!==l.body()&&d!==l.body()&&d!==l.doc){var u=h.h,v=h.w,w=i.position(t,!0);this._ieFixNode&&(b=-this._ieFixNode.offsetTop/1e3,w.x=Math.floor((w.x+.9)/b),w.y=Math.floor((w.y+.9)/b),w.w=Math.floor((w.w+.9)/b),w.h=Math.floor((w.h+.9)/b)),w.w-=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0,w.h-=t.scrollWidth>t.clientWidth&&t.clientWidth>0?c.h:0,"rtl"===a&&(e("opera")?(h.x+=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0,w.x+=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0):e("ie")?w.x+=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0:e("webkit")),w.w<h.w&&(h.w=h.w-w.w),w.h<h.h&&(h.h=h.h-w.h);var x,y=w.y,z=w.y+w.h,A=h.y,B=h.y+u,C=w.x,D=w.x+w.w,E=h.x,F=h.x+v;if(B>y&&A<y){h.y=w.y,x=y-A;var G=u-x;G<w.h?h.h=G:h.h-=2*(t.scrollWidth>t.clientWidth&&t.clientWidth>0?c.h:0)}else A<z&&B>z?h.h=z-A:(B<=y||A>=z)&&(h.h=0);if(F>C&&E<C){h.x=w.x,x=C-E;var H=v-x;H<w.w?h.w=H:h.w-=2*(t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.w:0)}else E<D&&F>D?h.w=D-E:(F<=C||E>=D)&&(h.w=0)}if(h.h>0&&h.w>0){j.set(this._underlayNode,{display:"block",width:h.w+"px",height:h.h+"px",top:h.y+"px",left:h.x+"px"});var I=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];this._cloneStyles(I),e("ie")||(I=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"],this._cloneStyles(I,this));var J=h.h/2-m.h/2,K=h.w/2-m.w/2;h.h>=m.h&&h.w>=m.w?j.set(this._centerNode,{top:J+h.y+"px",left:K+h.x+"px",display:"block"}):j.set(this._centerNode,"display","none")}else j.set(this._underlayNode,"display","none"),j.set(this._centerNode,"display","none");if(null===this._resizeCheck){var L=this;this._resizeCheck=setInterval(function(){L._size()},100)}}},_cloneStyles:function(a){c.forEach(a,function(a){j.set(this._underlayNode,a,j.get(this.target,a))},this)},_fadeIn:function(){var a=this,b=m.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:a.opacity}}}),c=m.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){a.onShow(),delete a._anim}});this._anim=n.combine([b,c]),this._anim.play()},_fadeOut:function(){var a=this,b=m.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:a.opacity,end:0}},onEnd:function(){j.set(this.node,{display:"none",zIndex:"-1000"})}}),c=m.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){j.set(this.node,{display:"none",zIndex:"-1000"}),a.onHide(),a._enableOverflow(),delete a._anim}});this._anim=n.combine([b,c]),this._anim.play()},_ignore:function(a){a&&d.stop(a)},_scrollerWidths:function(){var a=h.create("div");j.set(a,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var b=h.create("div");j.set(b,{width:"200px",height:"10px"}),a.appendChild(b),l.body().appendChild(a);var c=i.getContentBox(a);j.set(a,"overflow","scroll");var d=i.getContentBox(a);return l.body().removeChild(a),{v:c.w-d.w,h:c.h-d.h}},_setTextAttr:function(a){this._textNode.innerHTML=a,this.text=a},_setColorAttr:function(a){j.set(this._underlayNode,"backgroundColor",a),this.color=a},_setImageTextAttr:function(a){g.set(this._imageNode,"alt",a),this.imageText=a},_setImageAttr:function(a){g.set(this._imageNode,"src",a),this.image=a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a,"image"===a?(this._centerNode=this._imageNode,j.set(this._textNode,"display","none")):(this._centerNode=this._textNode,j.set(this._imageNode,"display","none"))},_disableOverflow:function(){if(this.target===l.body()||this.target===l.doc){this._overflowDisabled=!0;var a=l.body();if(a.style&&a.style.overflow?this._oldOverflow=j.get(a,"overflow"):this._oldOverflow="",e("ie")&&!e("quirks")){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=j.get(a.parentNode,"overflow")}catch(a){this._oldBodyParentOverflow="scroll"}j.set(a.parentNode,"overflow","hidden")}j.set(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=l.body();if(e("ie")&&!e("quirks")&&(a.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow),j.set(a,"overflow",this._oldOverflow),e("webkit")){var b=h.create("div",{style:{height:"2px"}});a.appendChild(b),setTimeout(function(){a.removeChild(b)},0)}delete this._oldOverflow}}})})},"dojox/storage/LocalStorageProvider":function(){define(["dojo/_base/declare","dojox/storage/Provider","dojox/storage/manager","dojo/_base/array","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f){var g=a("dojox.storage.LocalStorageProvider",[b],{store:null,initialize:function(){this.store=localStorage,this.initialized=!0,c.loaded()},isAvailable:function(){return"undefined"!=typeof localStorage},put:function(a,b,c,d){this._assertIsValidKey(a),d=d||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(d);var e=this.getFullKey(a,d);b=f.stringify(b);try{this.store.setItem(e,b),c&&c(this.SUCCESS,a,null,d)}catch(b){c&&c(this.FAILED,a,b.toString(),d)}},get:function(a,b){return this._assertIsValidKey(a),b=b||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(b),a=this.getFullKey(a,b),f.parse(this.store.getItem(a))},getKeys:function(a){a=a||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(a),a="__"+a+"_";for(var b=[],c=0;c<this.store.length;c++){var d=this.store.key(c);this._beginsWith(d,a)&&(d=d.substring(a.length),b.push(d))}return b},clear:function(a){a=a||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(a),a="__"+a+"_";for(var b=[],c=0;c<this.store.length;c++)this._beginsWith(this.store.key(c),a)&&b.push(this.store.key(c));d.forEach(b,e.hitch(this.store,"removeItem"))},remove:function(a,b){b=b||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(b),this.store.removeItem(this.getFullKey(a,b))},getNamespaces:function(){var a=[this.DEFAULT_NAMESPACE],b={};b[this.DEFAULT_NAMESPACE]=!0;for(var c=/^__([^_]*)_/,d=0;d<this.store.length;d++){var e=this.store.key(d);if(1==c.test(e)){var f=e.match(c)[1];void 0===b[f]&&(b[f]=!0,a.push(f))}}return a},isPermanent:function(){return!0},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},isValidKey:function(a){return null!==a&&void 0!==a&&/^[0-9A-Za-z_-]*$/.test(a)},isValidNamespace:function(a){return null!==a&&void 0!==a&&/^[0-9A-Za-z-]*$/.test(a)},getFullKey:function(a,b){return"__"+b+"_"+a},_beginsWith:function(a,b){return!(b.length>a.length)&&a.substring(0,b.length)===b},_assertIsValidNamespace:function(a){if(!1===this.isValidNamespace(a))throw new Error("Invalid namespace given: "+a)},_assertIsValidKey:function(a){if(!1===this.isValidKey(a))throw new Error("Invalid key given: "+a)}});return c.register("dojox.storage.LocalStorageProvider",new g),g})},"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\r\n\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event="ondijitclick:_onClick"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t> \r\n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1" data-dojo-attach-point="valueNode" />\r\n</span>\r\n',"url:dojox/grid/resources/View.html":'<div class="dojoxGridView" role="presentation">\r\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\r\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\r\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\r\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\r\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\r\n\t</div>\r\n</div>\r\n',"url:dojox/grid/resources/_Grid.html":'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut">\r\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\r\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation"></div>\r\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',"url:dojox/grid/enhanced/templates/Pagination.html":'<div dojoAttachPoint="paginatorBar"\r\n\t><table cellpadding="0" cellspacing="0"  class="dojoxGridPaginator"\r\n\t\t><tr\r\n\t\t\t><td dojoAttachPoint="descriptionTd" class="dojoxGridDescriptionTd"\r\n\t\t\t\t><div dojoAttachPoint="descriptionDiv" class="dojoxGridDescription"></div\r\n\t\t\t></div></td\r\n\t\t\t><td dojoAttachPoint="sizeSwitchTd"></td\r\n\t\t\t><td dojoAttachPoint="pageStepperTd" class="dojoxGridPaginatorFastStep"\r\n\t\t\t\t><div dojoAttachPoint="pageStepperDiv" class="dojoxGridPaginatorStep"></div\r\n\t\t\t></td\r\n\t\t\t><td dojoAttachPoint="gotoPageTd" class="dojoxGridPaginatorGotoTd"\r\n\t\t\t\t><div dojoAttachPoint="gotoPageDiv" class="dojoxGridPaginatorGotoDiv" dojoAttachEvent="onclick:_openGotopageDialog, onkeydown:_openGotopageDialog"\r\n\t\t\t\t\t><span class="dojoxGridWardButtonInner">&#8869;</span\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t></tr\r\n\t></table\r\n></div>\r\n',"url:dojox/layout/resources/GridContainer.html":'<div id="${id}" class="gridContainer" dojoAttachPoint="containerNode" tabIndex="0" dojoAttachEvent="onkeypress:_selectFocus">\r\n\t<div dojoAttachPoint="gridContainerDiv">\r\n\t\t<table class="gridContainerTable" dojoAttachPoint="gridContainerTable" cellspacing="0" cellpadding="0">\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr dojoAttachPoint="gridNode" >\r\n\t\t\t\t\t\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t</div>\r\n</div>',"*now":function(a){a(['dojo/i18n!*preload*dojox/nls/dojox*["ar","ca","cs","da","de-de","el","en-au","en-ca","en-gb","en-us","es-es","fi","fr-ch","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh","zh-cn","zh-hant","zh-hans","zh-hk","zh-tw","af-za","sq-al","gsw-fr","am-et","ar-dz","ar-bh","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ae","ar-ye","hy-am","as-in","az-cyrl-az","az-latn-az","bn-bd","bn-in","ba-ru","eu-es","be-by","bs-cyrl-ba","bs-latn-ba","br-fr","bg-bg","ca-es","zh-cn","zh-sg","zh-hk","zh-mo","zh-tw","co-fr","crm-en-us-de-ch","hr-hr","hr-ba","cs-cz","da-dk","prs-af","dv-mv","nl-be","nl-nl","en-au","en-bz","en-ca","en-029","en-in","en-ie","en-jm","en-my","en-nz","en-ph","en-sg","en-za","en-tt","en-gb","en-us","en-fr","en-kz","en-kg","en-mx","en-ch","en-ye","en-zw","et-ee","fo-fo","fil-ph","fi-fi","fr-be","fr-ca","fr-fr","fr-lu","fr-mc","fr-ch","fy-nl","gl-es","ka-ge","de-at","de-de","de-li","de-lu","de-ch","el-gr","kl-gl","gu-in","ha-latn-ng","he-il","hi-in","hu-hu","is-is","ig-ng","id-id","iu-latn-ca","iu-cans-ca","ga-ie","xh-za","zu-za","it-it","it-ch","ja-jp","kn-in","kk-kz","km-kh","qut-gt","rw-rw","sw-ke","kok-in","ko-kr","ky-kg","lo-la","lv-lv","lt-lt","dsb-de","lb-lu","mk-mk","ms-bn","ms-my","ml-in","mt-mt","mi-nz","arn-cl","mr-in","moh-ca","mn-mn","mn-mong-cn","ne-np","nb-no","nn-no","oc-fr","or-in","ps-af","fa-ir","pl-pl","pt-br","pt-pt","pa-in","quz-bo","quz-ec","quz-pe","ro-ro","rm-ch","ru-ru","sah-ru","smn-fi","smj-no","smj-se","se-fi","se-no","se-se","sms-fi","sma-no","sma-se","sa-in","gd-gb","sr-cyrl-ba","sr-cyrl-me","sr-cyrl-cs","sr-cyrl-rs","sr-latn-ba","sr-latn-me","sr-latn-cs","sr-latn-rs","nso-za","tn-za","si-lk","sk-sk","sl-si","es-ar","es-ve","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-sv","es-gt","es-hn","es-mx","es-ni","es-pa","es-py","es-pe","es-pr","es-es","es-us","es-uy","sv-fi","sv-se","syr-sy","tg-cyrl-tj","tzm-latn-dz","ta-in","tt-ru","te-in","th-th","bo-cn","tr-tr","tk-tm","uk-ua","hsb-de","ur-pk","ug-cn","uz-cyrl-uz","uz-latn-uz","vi-vn","cy-gb","wo-sn","ii-cn","yo-ng","ROOT"]'])}}}),define("dojox/dojox",[],1),require({cache:{"Sage/main":function(){define(["Sage/_ActionMixin","Sage/Utility","Sage/LanguageList","Sage/Link","Sage/Array","Sage/_ConfigurationProvider","Sage/_Templated","Sage/Format","Sage/Data/main","Sage/Store/main","Sage/Groups/main","Sage/Layout/main","Sage/Library/main","Sage/MailMerge/main","Sage/Services/main","Sage/MainView/main","Sage/ProximitySearch/main","Sage/QuickForms/Design/main","Sage/TaskPane/main","Sage/UI/main","Sage/Utility/main","Sage/Workspaces/main","Sage/Mingle/main","dojo/i18n!dijit/nls/common"],function(){})},"Sage/_ActionMixin":function(){define(["dojo/NodeList-traverse","dojo/_base/declare"],function(a,b){return b("Sage._ActionMixin",null,{actionsFrom:"click",postCreate:function(){dojo.forEach(this.actionsFrom.split(","),function(a){this.connect(this.domNode,a,this._initiateActionFromEvent)},this)},_isValidElementForAction:function(a){var b=this.domNode.contains?this.domNode!=a&&this.domNode.contains(a):!!this.domNode.compareDocumentPosition(a);return this.domNode===a||b},_initiateActionFromEvent:function(a){var b=dojo.query(a.target).closest("[data-action]")[0],c=b&&dojo.attr(b,"data-action");if(c&&this._isValidElementForAction(b)&&this._hasAction(c,a,b)){var d=this._getParametersForAction(c,a,b);this._invokeAction(c,d,a,b),dojo.stopEvent(a)}},_getParametersForAction:function(a,b,c){for(var d={$event:b,$source:c},e=0,f=c.attributes.length;e<f;e++){var g=c.attributes[e].name;if(!/^((?=data-action)|(?!data))/.test(g)){d[g.substr("data-".length).replace(/-(\w)(\w+)/g,function(a,b,c){return b.toUpperCase()+c})]=dojo.attr(c,g)}}return d},_hasAction:function(a,b,c){return"function"==typeof this[a]},_invokeAction:function(a,b,c,d){return this[a].apply(this,[b,c,d])}})})},"Sage/Utility":function(){define(["dojo/parser","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","Sage/Utility/ErrorHandler","dojox/validate/regexp","dojo/i18n!./Utility/nls/Utility","dojo/has","dojo/ready","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/xhr","dojo/date"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return Sage.namespace("Utility"),dojo.mixin(Sage.Utility,{_timeZones:null,_ownersCache:null,_ownersCacheKey:"SecCodeCache",_userCache:null,_userCacheKey:"_userCacheKey",isIE:"undefined"!=typeof ActiveXObject||g("trident"),nameToPathCache:{},nlsStrings:f,regexp:{invalidInput:"^((?!(<([!\\/?A-Za-z])|(&#))).)*$",invalidInputFmt:"^((?!(<([!\\/?A-Za-z])|(&#)|(${0}))).)*$",invalidInputMatch:"<[!\\/?A-Za-z]|&#"},makeTemplateFromString:function(a,b){var c;return void 0!==b&&null!==b||(b="\r"),c=j.filter(a.split(b),function(a){return void 0!==a&&null!==a&&""!==i.trim(a)}),new Simplate(c)},joinInvalidInputRegExpWith:function(a){return a&&dojo.isString(a)&&a.length>0?i.substitute(this.regexp.invalidInputFmt,[a]):a},getInvalidInputMatches:function(a){if(a&&dojo.isString(a)&&a.length>0){var b=a.match(this.regexp.invalidInputMatch,"g");if(b&&dojo.isArray(b))return b}return[]},isSafeForPosting:function(a){if(a&&dojo.isString(a)){if(0===a.length)return!0;var b=a.match(this.regexp.invalidInputMatch);if(null===b)return!0;if(dojo.isArray(b)&&0===b.length)return!0}return!a&&null===a},makeSafeForPosting:function(a){var b=this.getInvalidInputMatches(a);return b&&dojo.isArray(b)&&b.length>0&&j.forEach(b,function(b){var c=b;b.length>=2&&(c=b.substr(0,1)+" "+b.substr(1)),c!==b&&(a=a.replace(b,c))}),a},nameToPath:function(a){var b,c,d,e;if("string"!=typeof a)return[];if(Sage.Utility.nameToPathCache[a])return Sage.Utility.nameToPathCache[a];for(b=a.split("."),c=[],d=0;d<b.length;d++)e=b[d].match(/([a-zA-Z0-9_$]+)\[([^\]]+)\]/),e?(c.push(e[1]),/^\d+$/.test(e[2])?c.push(parseInt(e[2],10)):c.push(e[2])):c.push(b[d]);return Sage.Utility.nameToPathCache[a]=c.reverse(),Sage.Utility.nameToPathCache[a]},expand:function(a,b){return"function"==typeof b?b.apply(a,Array.prototype.slice.call(arguments,2)):b},getValue:function(a,b,c){c=void 0!==c&&null!==c?c:"";for(var d=Sage.Utility.nameToPath(b).slice(0),e=a;e&&d.length>0;){var f=d.pop();if(void 0===e[f]||null===e[f])return c;e=e[f]}return e},setValue:function(a,b,c){for(var d=a,e=Sage.Utility.nameToPath(b).slice(0);void 0!==d&&e.length>1;){var f=e.pop();if(e.length>0){var g=e[e.length-1];d=d[f]=void 0!==d[f]?d[f]:"number"==typeof g?[]:{}}}return null!==d&&void 0!==e[0]&&(d[e[0]]=c),a},getPlainText:function(a){var b=function(a){return a?a.replace(/ +/g," ").replace(/[\t]+/gm,"").replace(/[ ]+$/gm,"").replace(/^[ ]+/gm,"").replace(/\n+/g,"\n").replace(/\n+$/,"").replace(/^\n+/,"").replace(/\nNEWLINE\n/g,"\n\n").replace(/NEWLINE\n/g,"\n\n"):""},c=function(a){var b=function(a){return!/[^\t\n\r ]/.test(a.nodeValue)},c=[],d=function(a){for(var e=0;e<a.childNodes.length;e++){var f=a.childNodes[e];3==f.nodeType&&b(f)?c.push(f):f.hasChildNodes()&&d(f)}};d(a);for(var e=0;e<c.length;e++)c[e].parentNode.removeChild(c[e])},d=function(a,b){if(a.style[b])return a.style[b];var c=a.currentStyle||a.ownerDocument.defaultView.getComputedStyle(a,null);return"SCRIPT"==a.tagName?"none":c[b]?"block"==c[b]&&"TD"==a.tagName?"feaux-inline":c[b]:"LI,P,TR".indexOf(a.tagName)>-1?"block":a.style[b]},e="table-row,block,list-item",f=function(a){var b=d(a,"display")||"feaux-inline";return e.indexOf(b)>-1},g=function(a){if(/pre/.test(d(a,"whiteSpace")))return j+=a.innerHTML.replace(/\t/g," ").replace(/\n/g," "),"";if("none"==d(a,"display"))return"";var b=f(a)?"\n":" ";j+=b;for(var c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];3==e.nodeType&&(j+=e.nodeValue),e.childNodes.length&&g(e)}return j+=b};a=a.cloneNode(!0),a.innerHTML=a.innerHTML.replace(/<br>/g,"\n");for(var h=a.getElementsByTagName("p"),i=0;i<h.length;i++)h[i].innerHTML+="NEWLINE";var j="";return c(a),b(g(a))},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},extend:function(){var a,b=arguments[0]||{},c=1,d=arguments.length,e=!1;for(b.constructor==Boolean&&(e=b,b=arguments[1]||{},c=2),"object"!=typeof b&&"function"!=typeof b&&(b={}),d==c&&(b=this,--c);c<d;c++)if(null!=(a=arguments[c]))for(var f in a){var g=b[f],h=a[f];b!==h&&(e&&h&&"object"==typeof h&&!h.nodeType?b[f]=Sage.Utility.extend(e,g||(null!=h.length?[]:{}),h):void 0!==h&&(b[f]=h))}return b},getCurrentEntityId:function(){return Sage.Services.getService("ClientEntityContext").getContext().EntityId},getCurrentEntityName:function(){return Sage.Services.getService("ClientEntityContext").getContext().DisplayName},getClientContextByKey:function(a){var b="";if(Sage.Services){var c=Sage.Services.getService("ClientContextService");c&&c.containsKey(a)&&(b=c.getValue(a))}return b},setClientContextByKey:function(a,b){if(Sage.Services){var c=Sage.Services.getService("ClientContextService");if(c)return c.containsKey(a)?c.setValue(a,b):c.add(a,b),!0}return!1},getVirtualDirectoryName:function(){var a=new RegExp(window.location.host+"/([A-Za-z0-9\\-_]+)/"),b=a.exec(window.location.href);return b?b[1]:""},getSDataService:function(a,b,c,d){return Sage.Data.SDataServiceRegistry.getSDataService(a,b,c,d)},appLoadHandler:function(a,b){Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(Sage.Utility.pageLoaded),Sys.WebForms.PageRequestManager.getInstance().add_pageLoading(Sage.Utility.pageLoading),Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(Sage.Utility.showRequestIndicator),Sys.WebForms.PageRequestManager.getInstance().add_endRequest(Sage.Utility.hideRequestIndicator),Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(window.AutoLogout.resetTimer)},pageLoaded:function(a,b){var c=b.get_panelsUpdated();if(void 0!==c)for(var d=0;d<c.length;d++)dojo.parser.parse(c[d])},pageLoading:function(a,b){var c=b.get_panelsUpdating();if(void 0!==c)for(var d=0;d<c.length;d++){var e=c[d],f=dijit.findWidgets(e);dojo.forEach(f,function(a){a.destroyRecursive(!0)})}},destroyWidget:function(a){var b=dojo.attr(a,"widgetId");dijit.byId(b)&&dijit.byId(b).destroyRecursive()},
showRequestIndicator:function(){var a=document.getElementById("asyncpostbackindicator");a&&(a.style.visibility="visible")},hideRequestIndicator:function(a,b){var c=dojo.byId("asyncpostbackindicator");c&&(c.style.visibility="hidden"),d.handleEndRequestError(b)},isAllowedNavigationKey:function(a){return 8==a||9==a||46==a||37==a||39==a},restrictDecimalDigit:function(a,b,c){var d=a;if(void 0===b&&(b=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits),b.length>1){var e=b.split(",");b=parseInt(e[1],10)}void 0===c&&(c=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator);var f=a.indexOf(c)+1+b;return 0===b&&(f-=1),a.indexOf(")")>0&&(f+=1),a.lastIndexOf(c)>-1&&(d=a.substr(0,f)),d},maximizeDecimalDigit:function(a,b,c){var d,e=a;void 0===b&&(b=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits),void 0===c&&(c=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator),b>0&&-1==a.lastIndexOf(c)&&a.length>0&&(e=[a,c].join(""));var f=e.lastIndexOf(c)+1+b;if(e.lastIndexOf(c)>-1&&(d=f-e.length)>0)for(var g=0;g<d;g++)e+=0;return e},restrictToNumber:function(a,b){var c=Sys.CultureInfo.CurrentCulture.numberFormat,d=a.charCode||a.keyCode,e=a.keyChar;if(a.keyCode&&Sage.Utility.isAllowedNavigationKey(a.keyCode))return!0;if(d>=48&&d<=57&&!a.shiftKey||d>=96&&d<=105&&!a.shiftKey)return!0;if(e===c.NegativeSign||109==d||110==d)return!0;switch(b){case"currency":if(e==c.CurrencyGroupSeparator||e==c.CurrencyDecimalSeparator)return!0;break;case"percent":if(e==c.PercentGroupSeparator||e==c.PercentDecimalSeparator)return!0;break;default:if(e==c.NumberGroupSeparator||e==c.NumberDecimalSeparator)return!0}return!1},restrictToNumberOnKeyPress:function(a,b){if(a.keyCode&&Sage.Utility.isAllowedNavigationKey(a.keyCode))return!0;var c=Sys.CultureInfo.CurrentCulture.numberFormat,d=a.charCode||a.keyCode,e=String.fromCharCode(d),f="0123456789"+c.NegativeSign;switch(b){case"currency":f+=c.CurrencyGroupSeparator+c.CurrencyDecimalSeparator;break;case"percent":f+=c.PercentGroupSeparator+c.PercentDecimalSeparator;break;default:f+=c.NumberGroupSeparator+c.NumberDecimalSeparator}return f.indexOf(e)>=0},Convert:function(){var a=/^(true|T)$/i,b=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z|(-|\+)(\d{2}):(\d{2}))/,c=/^(\d{4})-(\d{2})-(\d{2})$/,d=/\/Date\((-?\d+)(?:(-|\+)(\d{2})(\d{2}))?\)\//,e=function(a){return a<10?"0"+a:a},f=function(a){return"0"===a[0]?a.substring(1):a};return{toBoolean:function(b){return a.test(b)},isDateString:function(a){return"string"==typeof a&&(b.test(a)||c.test(a)||d.test(a))},dateToTimeless:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5)},toIsoStringFromDate:function(a){return 0===a.getHours()&&0===a.getMinutes()&&5===a.getSeconds()?a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+"T00:00:05Z":a.getUTCFullYear()+"-"+e(a.getUTCMonth()+1)+"-"+e(a.getUTCDate())+"T"+e(a.getUTCHours())+":"+e(a.getUTCMinutes())+":"+e(a.getUTCSeconds())+"Z"},toIsoStringFromDateNonUTC:function(a){return a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+"T"+e(a.getHours())+":"+e(a.getMinutes())+":"+e(a.getSeconds())+"Z"},toJsonStringFromDate:function(a){return"/Date("+a.getTime()+")/"},toDateFromString:function(a,e){if("string"!=typeof a)return a;var g,h,i,j,k;return(g=d.exec(a))?(h=new Date(parseInt(g[1],10)),!0===e&&g[2]&&(i=parseInt(g[3],10),j=parseInt(g[4],10),k=60*i+j,"-"===g[2]&&(k*=-1),h.setMinutes(h.getMinutes()+k)),a=h):(g=b.exec(a))?(h=new Date(Date.UTC(parseInt(g[1],10),parseInt(f(g[2]),10)-1,parseInt(f(g[3]),10),parseInt(f(g[4]),10),parseInt(f(g[5]),10),parseInt(f(g[6]),10))),"Z"!==g[8]&&(i=parseInt(g[10],10),j=parseInt(g[11],10),k=60*i+j,"-"===g[9]&&(k*=-1),h.setMinutes(h.getMinutes()+k)),a=h):(g=c.exec(a))&&(a=new Date,a.setYear(parseInt(g[1],10)),a.setMonth(parseInt(g[2],10)-1),a.setDate(parseInt(g[3],10)),a.setHours(0,0,0,0)),a},toArrayFromObject:function(a){if(a&&void 0===a.length){var b=[];return b.push(a),b}return a}}}(),getModeId:function(){var a=Sage.Services.getService("ClientContextService");if(a&&a.containsKey("modeid")){return a.getValue("modeid").toLowerCase()}var b=document.location.href,c=b.indexOf("?");if(c>0)for(var d=b.substring(c+1),e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");if(g.length>1&&"modeid"===g[0].toLowerCase())return g[1]}return"None"},getPageName:function(){var a=document.location.href;return a.substring(a.lastIndexOf("/")+1)},openHelp:function(a,b){var c=Sage.Link.getHelpUrl(a,b),d=Sage.Link.getHelpUrlTarget();window.open(c,d)},openPdfDoc:function(a){var b=Sage.Utility.getClientContextByKey("WebHelpUrlFmt");b=b.replace(b.substring(b.lastIndexOf("/")+1),""),window.open(b+a)},fragger:function(a,b){if("string"==typeof a){b=b||dojo.doc;var c=b.createElement("div"),d=dojo._toDom(a,b);return c.appendChild(d),c}},fragToDijits:function(a,b){return dojo.parser.parse(a,{noStart:b||!0})},strToDijits:function(a,b){if("string"==typeof a){var c=this.toMasterFrag(a);return this.fragToDijits(c,b)}},fragWalker:function a(b,c){for(c(b),b=b.firstChild;b;)a(b,c),b=b.nextSibling},extract:function(a,b){var c,d=2===b,e=d?0:[];for(c in a)d?e++:window.has(a,c)&&e.push(b?a[c]:c);return e},keys:function(a){return Sage.Utility.extract(a)},size:function(a){return Sage.Utility.extract(a,2)},loadDetailsDialog:function(a){Sage.ClientLinkHandler.request({request:"ShowDialog",type:a.entityType,smartPart:a.smartPart,entityId:a.entityId,dialogTitle:a.dialogTitle,isCentered:a.isCentered,dialogTop:a.dialogTop,dialogLeft:a.dialogLeft,dialogHeight:a.dialogHeight,dialogWidth:a.dialogWidth,dialogParameters:a.dialogParameters,childInsertInfo:a.childInsertInfo})},values:function(a){return Sage.Utility.extract(a,1)},mixOwn:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},getPrecision:function(a){var b,c=a.match(/\.(\d+)/);return c&&(b=parseInt(c[1],10)),b||0},getCurrencySymbol:function(a){var b="";if(a){var c=window.currencySymbolGlobalObj;if(c)for(var d=c.split("|"),e=0;e<d.length;e++)if(a.indexOf(d[e])>-1)return b=d[e]}return b},encodeObjectStrings:function(a){if("object"==typeof a){for(var b in a)a[b]&&(a[b]=this.encodeObjectStrings(a[b]));return a}return this.htmlEncode(a)},htmlEncode:function(a){return"string"!=typeof a?a:a?a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""},_hiddenPre:document.createElement("pre"),htmlDecode:function(a){return"string"!=typeof a?a:(this._hiddenPre.innerHTML=a.replace(/</g,"&lt;"),this._hiddenPre.textContent)},getSelectionInfo:function(){var a=dijit.byId("list");return!!a&&a.getSelectionInfo()},getEQLogicalId:function(){var a="";return this.loadEQLogicalId(),localStorage.getItem("eqLogicalId")&&(a=localStorage.getItem("eqLogicalId")),a},loadEQLogicalId:function(){var a="",b={$name:"GetEqCustomSetting",request:{recordName:"CPQ EQ Logical ID"}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("Integrations").setOperationName("GetEqCustomSetting").execute(b,{async:!1,success:function(b){a=b.response.Result,localStorage.setItem("eqLogicalId",a)},failure:function(a){Sage.UI.Dialogs.showError(a)}})},loadEQEnabled:function(){var a="",b={$name:"GetEqCustomSetting",request:{recordName:"CPQ EQ Enabled"}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("Integrations").setOperationName("GetEqCustomSetting").execute(b,{async:!1,success:function(b){a=b.response.Result,localStorage.setItem("isEQEnabled",a)},failure:function(a){Sage.UI.Dialogs.showError(a)}})},isEQEnabled:function(){var a=Sage.Services.getService("IntegrationContractService"),b=!1;return this.loadEQEnabled(),localStorage.getItem("isEQEnabled")&&"true"==localStorage.getItem("isEQEnabled").toLowerCase()&&(b=!0),a.isCPQIntegrationEnabled&&b},isMingleEnabled:function(){return mingleConfig.isMingleEnabled},showEQForm:function(a,b){var c="",d=this.getEQLogicalId(),e={$name:"GetQuoteAlternateDocumentId",request:{quoteId:b}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(a)).setOperationName("GetQuoteAlternateDocumentId").execute(e,{async:!1,success:function(a){c=a.response.Result},failure:function(a){Sage.UI.Dialogs.showError(a)}}),infor.companyon.client.sendPrepareDrillbackMessage("?LogicalId="+d+"&EntityType="+a+"&Id1="+c)},showDetailForm:function(a,b){if(this.isEQEnabled()){var c="",d=this.getEQLogicalId(),e={$name:"GetQuoteAlternateDocumentId",request:{quoteId:b}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(a)).setOperationName("GetQuoteAlternateDocumentId").execute(e,{async:!1,success:function(a){c=a.response.Result},failure:function(a){Sage.UI.Dialogs.showError(a)}}),infor.companyon.client.sendPrepareDrillbackMessage("?LogicalId="+d+"&EntityType="+a+"&Id1="+c)}else window.document.location=a+".aspx?entityId="+b},Timezone_populatelist:function(a,b){var c,e;if("TimezoneList"===a?(c=dijit.byId(a),e=dojo.byId(a+"_Selected")):(c=$("#"+a+" #TimezoneList")[0],c=dijit.getEnclosingWidget(c),e=$("#"+a).find("input").filter("[@type=hidden]")[0]),c&&void 0!==c&&1==c.options.length){c.options.length=0;var f=this,g=function(){var a=[],d=null;dojo.forEach(f._timeZones,function(b){var c={label:b.Displayname,value:b.Keyname,selected:!1};a.push(c),b.Keyname==e.value&&(d=b.Keyname,c.selected=!0)}),c.addOption(a),null!==d&&c.set("value",d),dojo.connect(c,"onBlur",function(){e.value=c.get("value")}),dojo.connect(c,"onChange",function(){b&&(e.value=c.get("value"),__doPostBack(c.id,""))})};null!==this._timeZones?g():dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(a){f._timeZones=a,g()},error:function(a,b){return d.handleHttpError(a,b),a}})}return!0},getTimeZones:function(a){var b=JSON.parse(sessionStorage.getItem("_timeZones"));b&&b.length>0?a(b):dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(b){sessionStorage.setItem("_timeZones",JSON.stringify(b)),a(b)},error:function(b,c){d.handleHttpError(b,c),a(!1)}})},truncate:function(a,b){var c=0,d=a.length,e=[];if("string"==typeof b&&(b=parseInt(b,10)),"string"==typeof a)return a.length>b?a.slice(0,b)+"...":a;if(a.map&&"function"==typeof a.map)return a.map(function(a,c,d){return a.length>b?a.slice(0,b)+"...":a});for(c;c<d;c++)e.push(a[c].slice(0,b)+"...");return e},parseXMLNode:function(a,b){var c=["[","]"],d={},e=-1,f=-1,g=a.nodeName;if("#text"!==g||""!==a.nodeValue.trim()){var h=b[g],i=a.childNodes,j=a.attributes;try{if(h?dojo.isArray(h)?b[g].push(d):b[g]=[h,d]:c&&-1!=c.indexOf(g)?b[g]=[d]:b[g]=d,j)for(f=0,e=j.length;f<e;f++){var k=j[f];d[k.nodeName]=k.nodeValue}for(f=0,e=i.length;f<e;f++)this.parseXMLNode(i[f],d)}catch(a){}return d}},Dashboard:{counter:1,generateString:function(a){return a+Sage.Utility.Dashboard.counter++},getColors:function(a){if(a){var b,c,d=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"],e=["green 5","blue 3","green 7","blue 6","green 3","blue 7"],f=[];if(a<=6)for(b=0;b<a;b++)f[b]=Sage.Utility.Dashboard.colorPalette[e[b]];else for(c=0;c<a;c++)f[c]=Sage.Utility.Dashboard.colorPalette[d[c]];return f}},getColor:function(a){var b=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"];return Sage.Utility.Dashboard.colorPalette[b[a]]},colorPalette:{"blue 0":"dfe8f6","blue 6":"00a1de","green 3":"c1d59f","pink 5":"a44e81","orange 2":"f8d6aa","blue 4":"55c0e9","green 6":"69923a","pink 2":"e2afcd","orange 7":"af6200","blue 3":"80d0ef","green 8":"35491d","pink 4":"c55e9b","orange 3":"f4c180","blue 7":"0079a7","green 5":"86a85c","pink 8":"421f34","orange 6":"e98300","blue 2":"aae0f4","green 7":"4f6e2c","pink 3":"d486b4","orange 8":"754200","blue 5":"2bb1e4","green 2":"d6e3bf","pink 6":"833f67","orange 5":"ed982b","blue 8":"00516f","green 4":"a4bf7d","pink 7":"632f4e","orange 4":"f0ac55"}},isBoolean:function(a){return"boolean"==typeof a},isDefined:function(a){return void 0!==a},isEmptyString:function(a){return dojo.isString(a)&&""===a},isStringWithLength:function(a){return dojo.isString(a)&&""!==a},isTrue:function(a){return!!this.isBoolean(a)&&!0===a},getOwnerName:function(a){if(!a)return"";var b=a.replace(/^\s+|\s+$/g,"");this.buildOwnersCache(null,null,b);var c=this._ownersCache[b];return c?c.name:a},buildOwnersCache:function(a,b,c){if(sessionStorage.getItem(this._ownersCacheKey))return void(this._ownersCache=JSON.parse(sessionStorage.getItem(this._ownersCacheKey)));var d=this;this._ownersCache||(d._ownersCache={});var e=100;a=a||e,b=b||1;var f=i.substitute("slxdata.ashx/slx/dynamic/-/owners?select=Type&orderBy=$key&format=json&count=${0}&startIndex=${1}",[a,b]);return l("GET",{url:c?f+"&where=$key eq '"+c+"'":f,handleAs:"json",sync:!0}).then(function(c){for(var f=c.$totalResults,g=0;g<c.$resources.length;g++){var h=c.$resources[g];d._ownersCache[h.$key.trim()]={type:h.Type,name:h.$descriptor}}f>e&&f>=b+a&&(b+=a,d.buildOwnersCache(a,b)),sessionStorage.setItem(d._ownersCacheKey,JSON.stringify(d._ownersCache))})},getUserName:function(a){if(!a)return"";var b=a.replace(/^\s+|\s+$/g,"");this.buildUserCache(null,null,b);var c=this._userCache[b];return c?c.name:a},buildUserCache:function(a,b,c){if(!sessionStorage.getItem(this._userCacheKey)||(this._userCache=JSON.parse(sessionStorage.getItem(this._userCacheKey)),!this._userCache[c])){var d=this;this._userCache||(d._userCache={});var e=100;a=a||e,b=b||1;var f=i.substitute("slxdata.ashx/slx/dynamic/-/users?select=Enabled&format=json&Count=${0}&StartIndex=${1}",[a,b]);return l("GET",{url:c?f+"&where=$key eq '"+c+"'":f,handleAs:"json",sync:!0}).then(function(c){for(var f=c.$totalResults,g=0;g<c.$resources.length;g++){var h=c.$resources[g];d._userCache[h.$key]={enabled:h.Enabled,name:h.$descriptor}}f>e&&f>=b+a&&(b+=a,d.buildUserCache(a,b)),sessionStorage.setItem(d._userCacheKey,JSON.stringify(d._userCache))})}},isItemInArray:function(a,b){for(var c=0;c<a.length;c++)if(k.trim(a[c])==k.trim(b))return!0},pluralize:function(a,b){void 0===b&&(b=!1);var c={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},d={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},e={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","series","species","money","rice","information","equipment"].indexOf(a.toLowerCase())>=0)return a;var f,g,h;for(var i in e)if(b?(f=new RegExp(e[i]+"$","i"),g=i):(f=new RegExp(i+"$","i"),g=e[i]),f.test(a))return a.replace(f,g);h=b?d:c;for(var j in h)if(f=new RegExp(j,"i"),f.test(a))return a.replace(f,h[j]);return a},getParameterByName:function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},specialDates:{":now":function(a){return new Date},":today":function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":todaystart":function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":todayend":function(a){return a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":yesterday":function(a){return a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":yesterdaystart":function(a){return a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":yesterdayend":function(a){return a.setDate(a.getDate()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":tomorrow":function(a){return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":tomorrowstart":function(a){return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":tomorrowend":function(a){return a.setDate(a.getDate()+1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisweekstart":function(a){return a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisweekend":function(a){return a.setDate(a.getDate()+(6-a.getDay())),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thismonthstart":function(a){return a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thismonthend":function(a){return a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisyearstart":function(a){return a.setDate(1),a.setMonth(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisyearend":function(a){return a.setDate(31),a.setMonth(11),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisquarterstart":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisquarterend":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextweekstart":function(a){return a.setDate(a.getDate()+(7-a.getDay())),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextweekend":function(a){return a.setDate(a.getDate()+(7-a.getDay())+6),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextmonthstart":function(a){return a.setMonth(a.getMonth()+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextmonthend":function(a){return a.setMonth(a.getMonth()+1),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextyearstart":function(a){return a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextyearend":function(a){return a.setFullYear(a.getFullYear()+1),a.setMonth(11),a.setDate(31),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextquarterstart":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextquarterend":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c+3),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastweekstart":function(a){return a.setDate(a.getDate()-a.getDay()-7),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastweekend":function(a){return a.setDate(a.getDate()-a.getDay()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastmonthstart":function(a){return a.setMonth(a.getMonth()-1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastmonthend":function(a){return a.setMonth(a.getMonth()-1),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastyearstart":function(a){return a.setFullYear(a.getFullYear()-1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastyearend":function(a){return a.setFullYear(a.getFullYear()-1),a.setMonth(11),a.setDate(31),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastquarterstart":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c-3),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastquarterend":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c-1),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":beforelastyearend":function(a){return a.setFullYear(a.getFullYear()-2),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a}},splitField:function(a,b){for(var c=b.split("."),d=a,e=0;e<c.length;e++){if(null===d)return"";d=d[c[e]]}return d},setField:function(a,b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e.hasOwnProperty(d[f])&&(e=e[d[f]]);e&&(e[d[d.length-1]]=c)},dynamicSort:function(a,b){return b=!0===b?0:1,function(c,d){return(Sage.Utility.splitField(c,a)<Sage.Utility.splitField(d,a)?-1:Sage.Utility.splitField(c,a)>Sage.Utility.splitField(d,a)?1:0)*b}}}),h(function(){Sage.Utility.appLoadHandler()}),Sage.Utility})},"Sage/Data/SDataServiceRegistry":function(){define(["Sage/Utility","dojo/json"],function(a,b){var c={},d=!1;return Sage.namespace("Data.SDataServiceRegistry"),Sage.Data.SDataServiceRegistry={registerService:function(a,b,e){e=e||{};var f=b instanceof Sage.SData.Client.SDataService?b:new Sage.SData.Client.SDataService(b);return c[a]=f,!e.isDefault&&d||(d=f),f},hasService:function(a){return void 0!==c[a]},getService:function(a){return"string"==typeof a&&c[a]?c[a]:d},_createCacheKey:function(a){var b=a.build();return b=b.replace(/[^a-zA-Z0-9_]/g,""),b=a.getResourceKind().text+"_"+b},_loadSDataRequest:function(a,b){var c=this._createCacheKey(a),d=this._getFromLocalStorage(c);d&&(b.result=d)},_cacheSDataRequest:function(a,b,c){if(/get/i.test(b.method)&&"object"==typeof c){var d=this._createCacheKey(a);this._saveToLocalStorage(d,c)}},_saveToLocalStorage:function(a,c){sessionStorage.setItem(a,b.stringify(c))},_getFromLocalStorage:function(a){return b.parse(sessionStorage.getItem(a))},_removeFromLocalStorage:function(a){for(var b=sessionStorage.length,c=[],d=0;d<b;d++){var e=sessionStorage.key(d);e.indexOf(a)>-1&&c.push(e)}for(var f=0;f<c.length;f++)sessionStorage.removeItem(c[f])},getSDataService:function(a,b,c,d,e){b="proxy"===a||b,a=a||"dynamic";var f="SDataService_"+a;if(f=d?[f,"_cacheResult"].join(""):f,this.hasService(f)&&!b)return this.getService(f);var g=!0;"boolean"==typeof c&&(g=c);var h=!0;"boolean"==typeof e&&(h=e);var i=new Sage.SData.Client.SDataService({serverName:window.location.hostname,virtualDirectory:Sage.Utility.getVirtualDirectoryName()+"/slxdata.ashx",applicationName:"slx",contractName:a,port:!(!window.location.port||80===window.location.port)&&window.location.port,protocol:!!/https/i.test(window.location.protocol)&&"https",json:g,compact:h});return d&&(i.on("beforerequest",this._loadSDataRequest,this),i.on("requestcomplete",this._cacheSDataRequest,this)),b||this.registerService(f,i),i}},Sage.Data.SDataServiceRegistry})},"Sage/UI/Dialogs":function(){define(["dijit/form/Button","dijit/Dialog","dijit/ProgressBar","dijit/form/TextBox","dijit/form/ValidationTextBox","dojo/i18n!./nls/Dialogs","dojo/_base/array"],function(Button,Dialog,ProgressBar,TextBox,ValidationTextBox,nlsResources,array){return Sage.namespace("UI.Dialogs"),dojo.mixin(Sage.UI.Dialogs,{raiseQueryDialog:function(a,b,c,d,e,f){return this.raiseQueryDialogExt({title:a,query:b,callbackFn:c,yesText:d,noText:e,icon:f})},raiseQueryDialogExt:function(opts){var dlg=dijit.byId("queryDialog"),iWidth,queryDialog,commonCallback,questionDivs,i,buttonDiv,yesButton,noButton;if(dlg&&dlg.destroyRecursive(),iWidth=opts&&"number"==typeof opts.width?opts.width:700,queryDialog=new dijit.Dialog({id:"queryDialog",title:opts.title,style:opts.style||{width:iWidth}}),commonCallback=function(a){queryDialog.hide(),opts.callbackFn&&"function"==typeof opts.callbackFn&&(a?opts.callbackFn.call(opts.scope||this,!0):opts.callbackFn.call(opts.scope||this,!1))},queryDialog.on("hide",function(){queryDialog.destroyRecursive()}),opts.icon){var iconDiv=new dojo.create("div",{id:"queryDialog-iconDiv",class:"messageIcon "+opts.icon});queryDialog.containerNode.appendChild(iconDiv)}if(questionDivs=[],opts.query instanceof Array)for(i=0;i<opts.query.length;i++)questionDivs.push(dojo.create("div",{id:"queryDialog-questionDiv_"+i,innerHTML:opts.query[i]}));else{var div=dojo.create("div",{id:"queryDialog-questionDiv",innerHTML:opts.query}),arrScripts=div.getElementsByTagName("script");array.forEach(arrScripts,function(script){var src=script.getAttribute("src");if(null===src&&""!==script.innerHTML)eval(script.innerHTML);else if(null!==src&&""===script.innerHTML){var head=document.getElementsByTagName("head")[0],clone=dojo.clone(script);(head||document.body).appendChild(clone)}div.removeChild(script)}),questionDivs.push(div)}buttonDiv=new dojo.create("div",{id:"queryDialog-buttonDiv",style:"text-align: "+(opts.align||"center")+"; margin-top: 10px"}),yesButton=new dijit.form.Button({label:opts.yesText||nlsResources.yesText,id:"qry_yesButton",onClick:function(a){commonCallback(!0)}}),buttonDiv.appendChild(yesButton.domNode),(opts.noText||opts.showNoButton)&&(noButton=new dijit.form.Button({label:opts.noText||nlsResources.noText,id:"qry_noButton",style:"padding-left: 10px",onClick:function(a){commonCallback(!1)}}),buttonDiv.appendChild(noButton.domNode)),dojo.forEach(questionDivs,function(a){queryDialog.containerNode.appendChild(a)}),queryDialog.containerNode.appendChild(buttonDiv),queryDialog.show()},raiseInputDialog:function(a,b,c,d,e,f,g,h){return this.raiseInputDialogExt({title:a,query:b,callbackFn:c,yesText:d,noText:e,defaultValue:f,regExp:g,invalidMessage:h})},raiseInputDialogExt:function(a){var b,c,d,e,f,g,h;b=dijit.byId("inputDialog"),b&&b.destroyRecursive(),b=new dijit.Dialog({id:"inputDialog",title:a.title}),c=dojo.create("div",{id:"inputDialog-questionDiv",innerHTML:a.query}),d=a.regExp&&dojo.isString(a.regExp)?new dijit.form.ValidationTextBox({id:"inputDialog-inputBox",value:a.defaultValue||"",style:"margin-top: 8px",regExp:a.regExp||"",invalidMessage:a.invalidMessage||""}):new dijit.form.TextBox({id:"inputDialog-inputBox",value:a.defaultValue||"",style:"margin-top: 8px"}),e=function(c){c?a.callbackFn(!0,d.get("value")):a.callbackFn(!1,d.get("value")),b.hide()},f=new dijit.form.Button({label:a.yesText||nlsResources.yesText,id:"inp_yesButton",onClick:function(a){e(!0)}}),g=new dijit.form.Button({label:a.noText||nlsResources.noText,id:"inp_noButton",onClick:function(a){e(!1)}}),h=new dojo.create("div",{id:"inputDialog-buttonDiv"}),b.on("hide",function(){b.destroyRecursive()}),h.appendChild(f.domNode),h.appendChild(g.domNode),b.containerNode.appendChild(c),b.containerNode.appendChild(d.domNode),b.containerNode.appendChild(h),!1===a.closable&&dojo.destroy(b.closeButtonNode),b.show()},showProgressBar:function(a){var b,c,d,e,f,g,h=a&&void 0!==a.maximum?a.maximum:100,i=a&&"number"==typeof a.width?a.width:300,j=a&&"number"==typeof a.width?a.height:125,k=dojo.string.substitute("width: ${0}px; height: ${1}px",[i,j]),l=!a||"boolean"!=typeof a.canclose||a.canclose;dijit.byId("progressDialog")||(b=new dijit.ProgressBar({id:"progressDialogBar",style:"margin-top: 10px; margin-bottom: 10px",indeterminate:!(!a||"undefined"===a.indeterminate)&&a.indeterminate,maximum:h}),c=new dijit.Dialog({id:"progressDialog",title:a.title,style:k,closable:l}),a&&"boolean"==typeof a.showmessage&&a.showmessage&&(d=a&&"string"==typeof a.message?a.message:"",e=new dojo.create("div",{innerHTML:d,style:"text-align: left; margin-top: 10px; margin-bottom: 10px",id:"progressDialogMessage"}),c.containerNode.appendChild(e)),c.containerNode.appendChild(b.domNode),c.show()),f=dijit.byId("progressDialogBar"),f.update({progress:a.pct,title:a.title}),a&&"boolean"==typeof a.showmessage&&a.showmessage&&"string"==typeof a.message&&(g=dojo.byId("progressDialogMessage"))&&(g.innerHTML=a.message)},closeProgressBar:function(a){var b=dijit.byId("progressDialog");b&&(b.hide(),b.destroyRecursive())},alert:function(a,b,c){var d={title:b||"Infor CRM",query:a,callbackFn:!1,yesText:nlsResources.okText||"OK",noText:!1,scope:window,icon:c||"noIcon",style:{width:"700px"}};Sage.UI.Dialogs.raiseQueryDialogExt(d)},showInfo:function(a,b){this.alert(a,b,"infoIcon")},showWarning:function(a,b){this.alert(a,b,"warningIcon")},showError:function(a,b){this.alert(a,b,"errorIcon")}}),Sage.WebClientMessageService=function(a){},Sage.WebClientMessageService.prototype.hideClientMessage=function(){},Sage.WebClientMessageService.prototype.showClientMessage=function(a,b,c,d){"object"==typeof a&&Sage.UI.Dialog.raiseQueryDialogEx(a);var e={title:"string"==typeof b?a:"",query:"string"==typeof b?b:a,callbackFn:c,yesText:nlsResources.yesText||"Yes",noText:nlsResources.noText||"No",scope:d};Sage.UI.Dialogs.raiseQueryDialogExt(e)},Sage.Services.addService("WebClientMessageService",new Sage.WebClientMessageService),Sage.UI.Dialogs})},"Sage/Utility/ErrorHandler":function(){define(["Sage/Utility","Sage/UI/Dialogs","dojo/io-query","dojo/string","dojo/_base/array","dojo/i18n!./nls/ErrorHandler"],function(a,b,c,d,e,f){return Sage.namespace("Utility.ErrorHandler"),dojo.mixin(Sage.Utility.ErrorHandler,{_debugEndRequest:!1,_configuration:{isDebug:!1,preemption:{enabled:!0,allowAuthRedirect:!0,handledStatusCodes:"577,578,579,580,581,582,584",showPreemptedErrorMsg:!1,showInternalServerErrorMsg:!1,showUnhandledMessagingServiceExceptionMsg:!0},authenticationRedirectUrl:null,showExtendedValidationException:!1,showExtendedRoleAccessDeniedException:!1},_doRedirect:function(a){var b=Sage.Services.getService("ClientBindingManagerService");b&&b.clearDirtyStatus(),window.location=a},_fmtSlxErrorId:function(a){return Sage.Utility.isStringWithLength(a)?this._configuration.isDebug?d.substitute('\r\n\r\nSaleslogix Error Id: <a href="SLXErrorLookupService.asmx/GetEventLogError?slxErrorId=${0}" target="_blank">${0}</a>',[a]):d.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[a]):""},_fmtStackTrace:function(a){if(this._configuration.isDebug&&Sage.Utility.isStringWithLength(a)){var b=Sage.Utility.htmlEncode(a).replace(/(\r\n)/g,"&#13;&#10;").trim();return d.substitute('\r\n\r\nStack trace:\r\n<textarea id="StackTrace" cols="20" name="StackTrace" readonly="readonly" rows="1" style="width: 100%; height: 200px; font-family: \'Courier New\', Courier, monospace; font-size: small; background-color: #F2F2F2; color: #444444; 1px: ; opacity: 0.8; -moz-box-sizing: border-box; box-sizing: border-box;" unselectable="off" wrap="off">${0}</textarea>',[b])}return""},_mixinConfig:function(){window.errorHandlerConfig&&"object"==typeof window.errorHandlerConfig&&dojo.mixin(this._configuration,window.errorHandlerConfig)},_preemptError:function(a,b){try{var c=this.getHttpStatusInfo(a,b);if(this._configuration.isDebug,!c||"object"!=typeof c||!c.hasOwnProperty("sdataError"))return!1;var d,e=function(b,c){if(b&&"object"==typeof b&&void 0!==a.getResponseHeader&&c&&dojo.isString(c)){var d=b.getResponseHeader(c);if(d&&Sage.Utility.isStringWithLength(d))return d}return null},f=function(a){return e(a,"Sage-SalesLogix-Exception-Redirect")},g=this,h=function(a){g._doRedirect(a)};if(this.isSDataExceptionDiagnoses(c.sdataError.applicationCode)&&500==c.status&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg)return this.showStatusInfoError(c),!0;switch(c.status){case 401:case 403:case 404:case 408:return!!this.isConfiguredToHandle(c.status)&&(this.showStatusInfoError(c),!0);case 500:return!!(this.isSDataExceptionDiagnoses(c.sdataError.applicationCode)&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg||this._configuration.preemption.showInternalServerErrorMsg)&&(this.showStatusInfoError(c),!0);case 575:return!(!this._configuration.preemption.allowAuthRedirect||null===(d=f(a)))&&(h(d),!0);case 576:
return!!this._configuration.preemption.showPreemptedErrorMsg&&(this.showStatusInfoError(c),!0);case 577:case 578:case 579:case 580:case 581:case 582:case 584:default:return!!this.isConfiguredToHandle(c.status)&&(this.showStatusInfoError(c),!0)}}catch(a){return!1}},init:function(){this._mixinConfig(),this._configuration.preemption.enabled&&(window.dojoConfig&&window.dojoConfig.ioPublish&&"boolean"==typeof window.dojoConfig.ioPublish&&!0===window.dojoConfig.ioPublish?dojo.subscribe("/dojo/io/error",function(a,b){return a&&"object"==typeof a&&"object"==typeof a.ioArgs&&(!1!==Sage.Utility.ErrorHandler._hasErrorHandler(a.ioArgs.url)&&575!==a.ioArgs.xhr.status||Sage.Utility.ErrorHandler._preemptError(a.ioArgs.xhr,{url:a.ioArgs.url})),b}):function(){var a=dojo.xhr;dojo.xhr=function(b,c,d){return a.apply(dojo,arguments).addErrback(function(a){if(a&&"object"==typeof a&&a instanceof Error&&"object"==typeof a.xhr){var b=c&&c.url?c.url||"":"";!1!==Sage.Utility.ErrorHandler._hasErrorHandler(b)&&575!==a.xhr.status||Sage.Utility.ErrorHandler._preemptError(a.xhr,{url:b})}return a})}}(),function(){var a=Sage.SData.Client.Ajax.request;Sage.SData.Client.Ajax.request=function(b){return dojo.mixin(b,{__failure:null,__failureHandler:function(a,b){var c=!1;if(b.__failure&&"function"==typeof b.__failure)try{b.__failure.call(b.scope||this,a,b)}catch(a){a instanceof ReferenceError&&(c=!0)}var d=b.url;return!1!==Sage.Utility.ErrorHandler._hasErrorHandler(d)&&575!==a.status||(c?Sage.Utility.ErrorHandler.handleHttpError(a,b):Sage.Utility.ErrorHandler._preemptError(a,b)),a}}),"function"==typeof b.failure&&(b.__failure=b.failure),b.failure=b.__failureHandler,a.apply(this,arguments)}}(),"function"==typeof $&&$(function(){jQuery(this).ajaxError(function(a,b,c,d){var e="object"==typeof c?c.url||"":"",f={url:e};!1!==Sage.Utility.ErrorHandler._hasErrorHandler(e)&&575!==b.status||Sage.Utility.ErrorHandler._preemptError(b,f)})}))},_getInternalHttpStatus:function(a){if(a&&"object"==typeof a&&a.hasOwnProperty("status")&&!1===isNaN(a.status)){if("object"!=typeof a.sdataError||!this.isSDataExceptionDiagnoses(a.sdataError.applicationCode)||"object"!=typeof a.sdataError.appInfo||"string"!=typeof a.sdataError.appInfo.exceptionKind)return Number(a.status);switch(a.sdataError.appInfo.exceptionKind){case"AuthTokenNullException":return 575;case"BaseException":return 500==Number(a.status)?576:Number(a.status);case"RoleAccessDeniedException":return 577;case"ValidationException":return 578;case"UserObservableException":return 579;case"HttpRequestValidationException":return 580;case"StringOrBinaryDataWouldBeTruncatedException":return 581;case"AccessException":return 582;case"ProjectsValidationException":return 584;default:return Number(a.status)}}return-1},_getStatusInfoOptions:function(a){var b={message:"",url:""};return a&&dojo.isObject(a)&&dojo.mixin(b,a),b},_handleAsDojoXhrHttpError:function(a,b,c){var d=this._getStatusInfoOptions(c),e="";a&&dojo.isObject(a)&&(e=a.message||a.result||""),""!==e&&""!==d.message?d.message=d.message+" "+e:d.message=e;var f=b&&dojo.isObject(b)&&b.xhr&&dojo.isObject(b.xhr)?b.xhr:null;""===d.url&&null!==f&&dojo.isString(b.url)&&(d.url=b.url),this._handleAsHttpError(f,null,d)},_handleAsHttpError:function(a,c,d){var e=this.getHttpStatusInfo(a,c);if(null!==e)this.showStatusInfoError(e,d);else{var g=d&&dojo.isObject(d)&&Sage.Utility.isStringWithLength(d.message)?d.message:f.HttpError;b.showError(g)}},_hasErrorHandler:function(a){var b="HASERRORHANDLER";if(a&&dojo.isString(a)&&-1!=a.toUpperCase().indexOf(b)){var d=a.substring(a.indexOf("?")+1,a.length);if(""!==d){var e=c.queryToObject(d.toUpperCase());if(e&&dojo.isObject(e))return"TRUE"===e[b]}}return!1},handleEndRequestError:function(a){function c(a){return a&&dojo.isString(a)?a.replace("Sys.WebForms.PageRequestManagerServerErrorException: ","").replace("Sys.WebForms.PageRequestManagerParserErrorException: ","").replace("Sys.WebForms.PageRequestManagerTimeoutException: ",""):a}if(this._debugEndRequest,a&&"object"==typeof a&&"function"==typeof a.get_error&&null!==a.get_error())try{switch(a.get_error().name){case"Sys.WebForms.PageRequestManagerTimeoutException":case"Sys.WebForms.PageRequestManagerParserErrorException":return b.showError(c(a.get_error().message)),void a.set_errorHandled(!0)}var d=c(a.get_error().message),e=a.get_error().httpStatusCode;if(("${AjaxLoginRedirect}"===d||"${LoginRedirect}"===d||401==e||575==e)&&this._configuration.preemption.allowAuthRedirect){var f=this._configuration.authenticationRedirectUrl||"Login.aspx";return a.set_errorHandled(!0),void this._doRedirect(f)}var g=null!==a.get_response(),h=!!g&&a.get_response().get_timedOut(),i=!!g&&a.get_response().get_aborted(),j=g?a.get_response().get_statusCode():-1,k=!!g&&a.get_response().get_responseAvailable();if(this._debugEndRequest,0===j||i)return void a.set_errorHandled(!0);var l=!!k&&(a.get_response().hasOwnProperty("_xmlHttpRequest")&&null!==a.get_response()._xmlHttpRequest);if(this._debugEndRequest,l||h){var m=a.get_response()._xmlHttpRequest;if(this._debugEndRequest,200==j||h)return this._debugEndRequest,b.showError(c(a.get_error().message)),void a.set_errorHandled(!0);var n=this.isConfiguredToHandle(j,m);return this._debugEndRequest,n?(this._debugEndRequest,this._preemptError(m)):(this._debugEndRequest,this.handleHttpError(m)),void a.set_errorHandled(!0)}this._debugEndRequest,b.showError(c(a.get_error().message)),a.set_errorHandled(!0)}catch(a){}else this._debugEndRequest},handleHttpError:function(a,b,c){a&&dojo.isObject(a)&&void 0!==a.getResponseHeader?this._handleAsHttpError(a,b,c):this._handleAsDojoXhrHttpError(a,b,c)},getInterceptedError:function(a,b){if(!Sage.Utility.isStringWithLength(a))return null;if(!Sage.Utility.isTrue(b))return{text:a};var c=dojo.fromJson(a);return c&&"object"==typeof c?c:null},getSDataDiagnosis:function(a,b){if(!Sage.Utility.isStringWithLength(a))return null;var c;if(Sage.Utility.isTrue(b)){var d=new XML.ObjTree;if((c=d.parseXML(a))&&"object"==typeof c&&c.hasOwnProperty("sdata:diagnoses")){if(!(c=c["sdata:diagnoses"]["sdata:diagnosis"])||"object"!=typeof c)return null;var e=function(a){var b=c.hasOwnProperty(a)?c[a]:"";return b&&dojo.isString(b)&&("stackTrace"!==a||this._configuration.isDebug)?b:""};return{severity:e("sdata:severity"),sdataCode:e("sdata:sdataCode"),applicationCode:e("sdata:applicationCode"),message:e("sdata:message"),stackTrace:e("sdata:stackTrace"),payloadPath:e("sdata:payloadPath")}}}else if((c=dojo.fromJson(a))&&dojo.isArray(c)&&c.length>0&&"object"==typeof c[0]&&c[0].hasOwnProperty("sdataCode"))return c[0];return null},getHttpStatusInfo:function(a,b){if(!a||!dojo.isObject(a)||void 0===a.getResponseHeader)return null;var c=this.safeGetPropValue(a,"status",-1),f=this.safeGetPropValue(a,"statusText","Unknown HTTP status. Possible timeout."),g={message:d.substitute("HTTP status: ${0} (${1}).",[f,c]),status:c,statusText:f,url:b&&dojo.isObject(b)&&dojo.isString(b.url)?b.url:"",sdataError:{}};if(4!==a.readyState)return g;var h=a.getResponseHeader("Content-Type");if(dojo.isString(h)){var i=this;switch(c){case 576:case 577:case 578:case 579:case 580:case 581:case 582:var j,k=function(b){var c=i.safeGetPropValue(a,"responseText","");return i.getInterceptedError(c,b)};if(-1!==h.indexOf("application/json"))j=k(!0);else{if(-1===h.indexOf("text/plain"))return g;if((j=k(!1))&&"object"==typeof j&&j.hasOwnProperty("text"))return 576===c?g.message+="\r\n\r\n"+j.text:g.message=j.text,g}j&&"object"==typeof j&&j.hasOwnProperty("slxErrorId")&&(g.errorInfo=j);break;default:var l,m=function(b){var c=i.safeGetPropValue(a,"responseText","");return i.getSDataDiagnosis(c,b)};if(-1!==h.indexOf("application/json"))l=m(!1);else{if(-1===h.indexOf("application/xml"))return g;l=m(!0)}if(l&&"object"==typeof l&&l.hasOwnProperty("sdataCode")){var n={severity:"",sdataCode:"",applicationCode:"",message:"",stackTrace:"",payloadPath:"",fmtError:function(){var a=[];for(var b in this)if("message"!=b&&"stackTrace"!=b&&"fmtError"!=b){var c=this[b];dojo.isString(c)&&""!==c&&a.push(d.substitute("${0}=${1}",[b.toString(),c]))}return a.length>0?a.join("; "):""}};if(g.sdataError=n,dojo.mixin(g.sdataError,l),g.sdataError.applicationCode&&this.isSDataExceptionDiagnoses(g.sdataError.applicationCode)){var o=function(){var a={},b=g.sdataError.applicationCode.split("; ");return e.forEach(b,function(b){if(b&&dojo.isString(b)&&-1!==b.indexOf("=")){var c=b.split("="),d=c[0].trim(),e=c[1].trim();a[d]=e}}),a};g.sdataError.appInfo=o(),g.sdataError.appInfo.hasOwnProperty("code")&&g.sdataError.appInfo.source?g.sdataError.applicationCode=g.sdataError.appInfo.code+"|"+g.sdataError.appInfo.source:g.sdataError.applicationCode=g.sdataError.appInfo.source,g.sdataError.appInfo.source&&delete g.sdataError.appInfo.source}var p="UNKNOWN";Sage.Utility.isStringWithLength(g.sdataError.severity)&&(p=g.sdataError.severity.toUpperCase());var q={INFO:"Informational message",WARNING:"Warning message",TRANSIENT:"Transient error",ERROR:"Operation failed",FATAL:"Severe error",UNKNOWN:"Unknown"},r=q[p]||q.UNKNOWN,s=g.sdataError.message;if(dojo.isString(s)&&"."!=s.trim().match(".$")&&(s+="."),this._configuration.isDebug)g.message=d.substitute("The following SData diagnosis occurred: Description=${0}. Message=${1} HTTP status: ${2} (${3}).",[r,s,g.statusText,g.status]);else{var t=this._getInternalHttpStatus(g),u=!0;switch(t){case 577:this._configuration.showExtendedRoleAccessDeniedException||(u=!1);break;case 578:this._configuration.showExtendedValidationException||(u=!1);break;case 582:case 584:u=!1}g.message=u?d.substitute("${0} HTTP status: ${1} (${2}).",[s,g.statusText,g.status]):s}}}}return g},isConfiguredToHandle:function(a,b){var c=!1;if(!1===this._configuration.preemption.enabled)return!1;if(a&&!1===isNaN(a))switch(Number(a)){case 500:if(this._configuration.preemption.showInternalServerErrorMsg)return!0;if(this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg){var d=this.getHttpStatusInfo(b);return!(!d||"object"!=typeof d||!d.hasOwnProperty("sdataError"))&&this.isSDataExceptionDiagnoses(d.sdataError.applicationCode)}break;case 575:return this._configuration.preemption.allowAuthRedirect;case 576:return this._configuration.preemption.showPreemptedErrorMsg;default:if(""!==this._configuration.preemption.handledStatusCodes){var f=this._configuration.preemption.handledStatusCodes.split(",");e.some(f,function(b){return b==a&&(c=!0,!0)})}}return c},isSDataExceptionDiagnoses:function(a){return!(!a||"string"!=typeof a||-1==a.indexOf("SDataExceptionDiagnoses"))},preemptError:function(a,b){this._preemptError(a,b)},safeGetPropValue:function(a,b,c){try{return a[b]}catch(a){return c}},showStatusInfoError:function(a,c){var e=this._getStatusInfoOptions(c),f=e.message,g="",h="",i="",j="",k=this._getInternalHttpStatus(a);if(575==k&&this._configuration.preemption.allowAuthRedirect){var l=this._configuration.authenticationRedirectUrl||"Login.aspx";return void this._doRedirect(l)}if(a&&dojo.isObject(a)&&dojo.isString(a.message)){switch(f+=""===f?a.message:" "+a.message,k){case 575:case 576:case 577:case 578:case 579:case 580:case 581:case 582:switch(f=Sage.Utility.htmlEncode(a.message),"object"==typeof a.errorInfo&&(f=Sage.Utility.htmlEncode(a.errorInfo.message)),k){case 577:if(!this._configuration.showExtendedRoleAccessDeniedException)return void b.showError(f);break;case 578:if(!this._configuration.showExtendedValidationException)return void b.showError(f);break;case 579:break;case 576:case 580:case 581:500!=a.status&&(f+=d.substitute(" HTTP status: ${info.statusText} (${info.status}).",{info:a}));break;case 582:return void b.showError(f)}}if("object"==typeof a.sdataError&&"object"==typeof a.sdataError.appInfo&&(i=d.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[a.sdataError.appInfo.slxErrorId]),j=this._fmtSlxErrorId(a.sdataError.appInfo.slxErrorId),f+=j),void 0===a.errorInfo){var m=null;Sage.Utility.isStringWithLength(a.url)?-1==f.indexOf(decodeURIComponent(a.url))&&(m=decodeURIComponent(a.url)):Sage.Utility.isStringWithLength(e.url)&&-1==f.indexOf(decodeURIComponent(e.url))&&(m=decodeURIComponent(e.url)),null!==m&&(f+=d.substitute("\r\n\r\nURL: ${0}",[m]))}this._configuration.isDebug&&"object"==typeof a.sdataError&&(dojo.isFunction(a.sdataError.fmtError)&&(f+=d.substitute("\r\n\r\nExtended SData diagnosis information: ${0}.",[a.sdataError.fmtError()])),"object"==typeof a.sdataError.appInfo&&(f+=d.substitute("\r\n\r\nException type: ${info.exceptionType}\r\n\r\nSource: ${info.exceptionSource}",{info:a.sdataError.appInfo})),a.sdataError.stackTrace&&(g=a.sdataError.stackTrace,h=this._fmtStackTrace(a.sdataError.stackTrace),f+=h));var n={subject:"Infor Exception Details"};"object"==typeof a.errorInfo&&(i=d.substitute("\r\n\r\nInfor Error Id: ${0}",[a.errorInfo.slxErrorId]),j=this._fmtSlxErrorId(a.errorInfo.slxErrorId),f+=j,f+=d.substitute("\r\n\r\nURL: ${info.request.url}",{info:a.errorInfo}),this._configuration.isDebug&&a.errorInfo.stackTrace&&(g=a.errorInfo.stackTrace,h=this._fmtStackTrace(a.errorInfo.stackTrace),a.errorInfo.__stackTrace=h,f+=d.substitute("\r\n\r\nException type: ${info.type}\r\n\r\nSource: ${info.source}${info.__stackTrace}\r\n\r\nTarget site: ${info.targetSite}",{info:a.errorInfo})),n.subject=d.substitute("Infor Exception Details (Infor Error Id: ${0})",[a.errorInfo.slxErrorId]));var o=a.errorInfo.slxErrorId;n.subject=encodeURIComponent(n.subject),""!==g&&(g=d.substitute("\r\n\r\nStack trace:\r\n${0}",[g])),n.toAddress="";var p=this.getOfficeProfile();p.UseEmailLink?(n.toAddress=p.EmailAddress,n.message=this.getShortMailContent(o)):n.message=encodeURIComponent(Sage.Utility.htmlDecode(f.replace(h,g).replace(j,i))),n.linkCaption="Mail details of this exception to your administrator",f+=d.substitute('\r\n\r\n<a href="mailto:${info.toAddress}?subject=${info.subject}&amp;body=${info.message}">${info.linkCaption}</a>',{info:n})}""===f&&(f="There was an unknown error."),f=f.replace(/(\r\n)/g,"<br />"),b.showError(f)},getOfficeProfile:function(){var a={},b=Sage.Utility.getSDataService("dynamic"),c=new Sage.SData.Client.SDataSingleResourceRequest(b);return c.setResourceKind("officeProfiles"),c.read({async:!1,success:function(b){a=b},failure:function(a){Sage.UI.Dialogs.showError(a)}}),a},getShortMailContent:function(a){var b="",c="\r\n",e="\r\n\r\n",g=window.location.protocol,h=window.location.hostname.replace("localhost","127.0.0.1"),i="";window.location.port&&(i=":"+window.location.port);var j=window.location.pathname.split("/"),k="/";"SLXErrorLookupService.asmx"!==j[1]&&(k+=j[1]);var l="",m=Sage.Services.getService("ClientContextService");if(m&&m.containsKey("userID")){var n=m.getValue("userID");l=Sage.Utility.getUserName(n)}var o=(new Date).toISOString().split(".")[0];return b=d.substitute(c+f.EmailContentL1),b+=d.substitute(e+f.EmailContentL2,[l,o]),b+=d.substitute(e+f.EmailContentL3),b+=d.substitute(e+"${0}//${1}${2}${3}/SLXErrorLookupService.asmx/GetEventLogError?slxErrorId=${4}",[g,h,i,k,a]),encodeURIComponent(b)}}),Sage.Utility.ErrorHandler.init(),Sage.Utility.ErrorHandler})},"Sage/LanguageList":function(){define([],function(){return{root:{},de:!0,en:!0,fr:!0,it:!0,ru:!0}})},"Sage/Link":function(){define(["Sage/UI/Dialogs","Sage/Utility","Sage/Services/ActivityService","Sage/Services/EntityService","dojo/string","Sage/MainView/EntityMgr/EntityWizard/EntityWizardController"],function(a,b,c,d,e,f){return Sage.namespace("Link"),Sage.Link={entityDetail:function(a,c){switch(a.toUpperCase()){case"ACTIVITY":this.editActivity(c);break;case"HISTORY":this.editHistory(c);break;default:if("detail"===b.getModeId()){var d=Sage.Services.getService("ClientEntityContext"),f=d.getContext();if(f.EntityType===a||f.EntityType==="Sage.Entity.Interfaces.I"+a)return void d.navigateSLXGroupEntity(c)}if(b.isEQEnabled()&&"QUOTE"==a.toUpperCase())Sage.Utility.showDetailForm(a,c);else{var g=e.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[a,c]);document.location=g}}},toListView:function(a){var b;if(void 0!==a)b=a+".aspx?modeid=list";else{if(b=document.location.href.replace("#",""),b.indexOf("?")>-1){b=b.split("?")[0]}b+="?modeid=list"}document.location=b},toActivityListView:function(a){if(document.location.href.toLowerCase().indexOf("activitymanager.aspx")<1){var b="ActivityManager.aspx"+(a?"?tabId="+a:"");window.setTimeout(function(){document.location=b},5)}else if(a){var c=Sage.Services.getService("ClientGroupContext");c.setCurrentGroup(a)}},schedule:function(a){if("CompleteActivity"===a)return void Sage.ClientLinkHandler.request({request:"Schedule",type:a});var b=Sage.Services.getService("ActivityService");b||(Sage.Services.addService("ActivityService",new c),b=Sage.Services.getService("ActivityService")),b.scheduleActivity({type:a})},newNote:function(){var a=Sage.Services.getService("ActivityService");a||(Sage.Services.addService("ActivityService",new c),a=Sage.Services.getService("ActivityService")),a.insertNote()},scheduleActivity:function(a){this.schedule(a)},schedulePhoneCall:function(){this.schedule("PhoneCall")},scheduleMeeting:function(){this.schedule("Meeting")},scheduleToDo:function(){this.schedule("ToDo")},schedulePersonalActivity:function(){this.schedule("PersonalActivity")},scheduleCompleteActivity:function(){this.schedule("CompleteActivity")},scheduleEvent:function(a){Sage.Services.getService("ActivityService").scheduleEvent(a)},editEvent:function(a){Sage.Services.getService("ActivityService").editEvent(a)},deleteEvent:function(a){Sage.Services.getService("ActivityService").deleteEvent(a)},editActivity:function(a,b,d){var e=Sage.Services.getService("ActivityService");e||(Sage.Services.addService("ActivityService",new c),e=Sage.Services.getService("ActivityService")),d=d||"",e.editActivity(a,b,d)},editActivityIfConfirmed:function(a,b){Sage.Services.getService("ActivityService").editActivityIfConfirmed(a,b)},editEntityOptions:function(a,b){Sage.Services.getService("EntityService").editEntityOptions(a,b)},editActivityOccurrence:function(a,b){Sage.ClientLinkHandler.request({request:"EditActivityOccurrence",id:a,recurDate:b})},editHistory:function(a,b){var d=Sage.Services.getService("ActivityService");d||(Sage.Services.addService("ActivityService",new c),d=Sage.Services.getService("ActivityService")),d.editHistory(a)},completeActivity:function(a,b){Sage.Services.getService("ActivityService").completeActivity(a,b)},completeNewActivity:function(a,b){Sage.Services.getService("ActivityService").completeNewActivity(a,b)},completeActivityOccurrence:function(a,b){Sage.Services.getService("ActivityService").completeActivityOccurrence(a,b)},deleteActivity:function(a,b){Sage.Services.getService("ActivityService").deleteActivity(a,!1,b)},deleteActivityOccurrence:function(a){Sage.Services.getService("ActivityService").deleteActivity(a)},confirmActivityFor:function(a,b){Sage.Services.getService("ActivityService").confirmActivityFor(a,b)},editConfirmation:function(a){Sage.Services.getService("ActivityService").editConfirmation(a)},acceptConfirmation:function(a){Sage.Services.getService("ActivityService").acceptConfirmation({id:a})},declineConfirmation:function(a){Sage.Services.getService("ActivityService").declineConfirmation(a)},deleteConfirmation:function(a){Sage.Services.getService("ActivityService").deleteConfirmation(a)},scheduleLitRequest:function(){Sage.Services.getService("ActivityService").scheduleLitRequest()},deleteLitRequest:function(a){Sage.Services.getService("ActivityService").deleteLitRequest(a)},goToLitRequest:function(a){Sage.Services.getService("ActivityService").goToLitRequest(a)},goToActivityAssociation:function(a,b){Sage.Services.getService("ActivityService").goToActivityAssociation(a,b)},mergeRecords:function(){var b=dijit.byId("list");if(b){var c=b.getSelectionInfo();if(2===c.selectionCount){Sage.Services.getService("SelectionContextService").setSelectionContext(c.key,c,this.mergeRecordsSelectionInfoCallback),Sage.ClientLinkHandler.request({request:"MergeRecords",selectionInfoKey:c.key})}else a.showInfo(MasterPageLinks.Merge_Account_SelectionError)}},mergeRecordsSelectionInfoCallback:function(){},removeDeletedConfirmation:function(a){Sage.ClientLinkHandler.request({request:"RemoveDeletedConfirmation",id:a})},getHelpUrl:function(a,c){var d;return d=b.getClientContextByKey("WebHelpUrlFmt"),""===d&&(d="help/WebClient_CSH.htm#${0}"),e.substitute(d,[a])},getHelpUrlTarget:function(){var a=b.getClientContextByKey("WebHelpLinkTarget");return""===a?"MCWebHelp":a},editSecurityProfile:function(a,b,c){Sage.ClientLinkHandler.request({request:"Administration",type:"EditSecurityProfile",selectionInfoKey:a+","+b+","+c})},getTeamMemberLink:function(a,b){"user"==a.toLowerCase()?Sage.ClientLinkHandler.request({request:"Administration",type:"RedirectToUser",kind:a,id:b}):window.location.href=a+".aspx?entityId="+b},redirectUrl:function(a,b){var c=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");new Sage.SData.Client.SDataServiceOperationRequest(c).setResourceKind(b).setOperationName(a.businessRuleMethod).execute(a.entry,{success:function(a){window.location.href=a.response.Result},failure:function(a){Sage.UI.Dialogs.showError(a)}})},createNewEntity:function(){(new f).startWizard()},ClearSystemOptionsCache:function(){var a=Sage.Services.getService("SystemOptions");a&&a.clearCache()}},window.Link=Sage.Link,Sage.Link})},"Sage/Services/ActivityService":function(){define(["Sage/UI/Dialogs","Sage/MainView/ActivityMgr/ActivityEditor","Sage/MainView/ActivityMgr/EditEventEditor","Sage/MainView/ActivityMgr/QuickCompleteEditor","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityAction","Sage/MainView/ActivityMgr/HistoryEditor","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Utility","dojo/i18n!./nls/ActivityService","dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=n("Sage.Services.ActivityService",null,{_defaultActivitManagerTabId:null,_activityEditor:!1,_eventEditor:!1,_historyEditor:!1,_editOccSeriesDlg:!1,_deleteOccSeriesDlg:!1,_compOccSeriesDlg:!1,_processor:!1,_actCompleteQueue:!1,_histCompleteQueue:[],activityEditorType:b,eventEditorType:c,historyEditorType:g,constructor:function(){dojo.mixin(this,m)},_ensureEditor:function(){this._activityEditor||(this._activityEditor=new this.activityEditorType({id:"activityEditor"}),this.onActivityEditorCreated(this._activityEditor))},onActivityEditorCreated:function(a){},_ensureEventEditor:function(){this._eventEditor||(this._eventEditor=new this.eventEditorType,this.onEventEditorCreated(this._eventEditor))},onEventEditorCreated:function(a){},_ensureHistoryEditor:function(){this._historyEditor||(this._historyEditor=new this.historyEditorType({id:"historyEditor"}),this.onHistoryEditorCreated(this._historyEditor))},onHistoryEditorCreated:function(a){},_ensureProcessor:function(){this._processor||(this._processor=new e)},_getIdFromGridSelection:function(){var a=this.getSelectedItem();return!!a&&(a.hasCompositeKey?a.entity.Activity.$key:a.id)},_getRecurringFromGridSelection:function(){var a=!1,b=this.getSelectedItem();return b&&b.entity&&(b.entity.hasOwnProperty("Activity")?(a=!0===b.entity.Activity.Recurring)&&b.entity.Activity.RecurIterations<0&&(a=!1):(a=!0===b.entity.Recurring)&&b.entity.RecurIterations<0&&(a=!1)),a},editActivity:function(a,b,c){if(a||(a=this._getIdFromGridSelection(),b=this._getRecurringFromGridSelection()),a)return 12!==a.length||void 0!==b&&null!==b?void(12!==a.length||b?this.editOccurrenceOrSeriesQuery(a,c):(this._ensureEditor(),this._activityEditor.set("mode","Update"),this._activityEditor.set("activityId",a),this._activityEditor.set("activityMemberId",c),this._activityEditor.show())):void this._resolveActivityOccurence(a,c)},_resolveActivityOccurence:function(a,b){var c=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));c.setResourceKind("activities"),c.setQueryArg("select","Recurring"),c.setQueryArg("where",k.substitute("Id eq '${0}'",[a])),c.setQueryArg("precedence","0"),c.read({success:function(c){var d;c.$resources&&c.$resources.length>0&&(d=c.$resources[0].Recurring,d?this.editActivity(a,!0,b):this.editActivity(a,!1,b))},failure:function(){},scope:this})},editOccurrence:function(a,b,c){this._ensureEditor(),this._activityEditor.set("mode","Update"),this._activityEditor.set("activityId",a),this._activityEditor.set("activityMemberId",c),this._activityEditor.show()},editOccurrenceOrSeriesQuery:function(a,b){this._editOccSeriesDlg||(this._editOccSeriesDlg=new h({id:"editOccSeriesQuery",mode:"edit"}),dojo.connect(this._editOccSeriesDlg,"onSelectSeries",this,function(a,b){this.editActivity(a.substring(0,12),!1,b)}),dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(a,b,c){this.editOccurrence(a,b,c)})),this._editOccSeriesDlg.set("activityMemberId",b),this._editOccSeriesDlg.set("activityId",a),this._editOccSeriesDlg.show()},editTempActivity:function(a){this._ensureEditor(),this._activityEditor.set("mode","deleteOnCancel"),this._activityEditor.set("activityId",a),this._activityEditor.show()},completeOccurrenceOrSeriesQuery:function(a){this._compOccSeriesDlg||(this._compOccSeriesDlg=new h({id:"compOccSeriesQuery",mode:"complete"}),dojo.connect(this._compOccSeriesDlg,"onSelectSeries",this,function(a){this.completeActivity(a.substring(0,12),!1)}),dojo.connect(this._compOccSeriesDlg,"onSelectOccurrence",this,this.completeActivityOccurrence)),this._compOccSeriesDlg.set("activityId",a),this._compOccSeriesDlg.show()},scheduleActivity:function(a){var b=a.type||a.Type;if("CompleteActivity"===b)return void this.scheduleCompletedActivity(b,a);this._ensureEditor(),this._activityEditor.set("mode","New "+a.type||"Meeting"),a.hasOwnProperty("preConfigured")?this._activityEditor.show(a.preConfigured):this.getActivityEntityContext(this._activityEditor,function(a,b){a.show(b)})},completeActivityOccurrence:function(a,b){if(this._ensureEditor(),a.indexOf(";")<0){var c=["StartDate"],d=new i({include:[],select:c,resourceKind:"activities",service:j.getSDataService("system")});""!==a&&d.fetch({predicate:'"'+a+'"',onComplete:function(a){if(a){var b=l.Convert.toDateFromString(a.StartDate)/1e3+62135596800,c=a.$key+";"+b;this._activityEditor.set("mode","Complete"),this._activityEditor.set("activityId",c),this._activityEditor.show()}},scope:this})}else this._activityEditor.set("mode","Complete"),this._activityEditor.set("activityId",a),this._activityEditor.show()},completeActivity:function(a,b){var c=this._getSelectionContext(a,this.txtActivity,this.txtActivities);if(c.count>1)this.completeActivitiesInSelectionContext(c);else if(c.id){var d=c.id;if(c.selectionInfo&&c.selectionInfo.selections[0].entity){var e=c.selectionInfo.selections[0].entity;c.selectionInfo.hasCompositeKey&&(d=e.Activity.$key),12===d.length&&(e.hasOwnProperty("Activity")&&(e=e.Activity),(b=!0===e.Recurring)&&e.RecurIterations<0&&(b=!1))}12!==d.length||b?this.completeOccurrenceOrSeriesQuery(d):(this._ensureEditor(),this._activityEditor.set("mode","Complete"),this._activityEditor.set("activityId",d),this._activityEditor.show())}},_quickCompleteConnections:[],completeActivitiesInSelectionContext:function(a){if(!(a.count<1)){this._actCompleteQueue=a;var b={selectionContext:a},c=new d(b);this._quickCompleteConnections.push(dojo.connect(c,"onCompleteIndividually",this,"_completeActivitiesInQueue")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteNow",this,"_completeActivitiesNow")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteAsScheduled",this,"_completeActivitiesAsScheduled")),this._quickCompleteConnections.push(dojo.connect(c,"onCancel",this,function(){this._actCompleteQueue=!1})),this._quickCompleteConnections.push(dojo.connect(c._dialog,"onHide",this,"_quickCompleteHide")),c.show()}},_actEditorHideConnection:null,_quickCompleteHide:function(){this._completingActivitiesIndividually||(this._actCompleteQueue=!1),dojo.forEach(this._quickCompleteConnections,function(a){dojo.disconnect(a)}),this._quickCompleteConnections=[]},_completingActivitiesIndividually:!1,_completeActivitiesInQueue:function(){this._completingActivitiesIndividually=!0,this._ensureEditor(),this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._completeNextActivityInQueue),this._completeNextActivityInQueue()},_completeNextActivityInQueue:function(){var a=this._actCompleteQueue.selectionInfo.selections.pop(),b=a.id,c=!1;if(a.entity){var d=a.entity.hasOwnProperty("Activity")?a.entity.Activity:a.entity;this._actCompleteQueue.selectionInfo.hasCompositeKey&&(b=a.entity.Activity.$key),c=b.length>12||!0===d.Recurring}this.completeActivity(b,c),this._actCompleteQueues.selectionInfo.selections.length<1&&(dojo.disconnect(this._actEditorHideConnection),this._completingActivitiesIndividually=!1)},_completeActivitiesAsScheduled:function(b){var c={selectionInfo:b.selectionContext.selectionInfo,mode:"asScheduled",note:b.note,result:b.result,resultCode:b.resultCode},d=new f;d.set("OperationName","completeActivities"),d.set("PublishMap","/entity/activity/change"),d.set("args",c),d.execute({success:function(a){o.publish("/entity/activity/bulkComplete","true")},failure:function(){a.showError(this.txtErrorActionMsg)}})},_completeActivitiesNow:function(b){var c={selectionInfo:b.selectionContext.selectionInfo,mode:"completeNow",note:b.note,result:b.result,resultCode:b.resultCode},d=new Sage.Services.ActivityAction;d.set("OperationName","completeActivities"),d.set("PublishMap","/entity/activity/change"),d.set("Args",c),d.execute({success:function(a){o.publish("/entity/activity/bulkComplete","true")},failure:function(){a.showError(this.txtErrorActionMsg)}})},completeHistoriesInList:function(a){if(!(a.length<1)){if(1===a.length)return void this.completeHistory(a[0]);this._histCompleteQueue=a;var b={selectionContext:{count:a.length,selectionInfo:{selectedIds:a}}};this._histCompleteQueue=a;var c=new d(b);this._quickCompleteConnections.push(dojo.connect(c,"onCompleteIndividually",this,"_completeHistoriesInQueue")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteNow",this,"_updateHistoriesFromQuickComplete")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteAsScheduled",this,"_updateHistoriesFromQuickComplete")),this._quickCompleteConnections.push(dojo.connect(c,"onCancel",this,"_cancelCompleteHistoryQueue")),this._quickCompleteConnections.push(dojo.connect(c._dialog,"onHide",this,"_quickCompleteHide")),c.show()}},completeHistory:function(a){this._ensureHistoryEditor(),this._historyEditor.set("historyId",a),this._historyEditor.set("mode","Complete"),this._historyEditor.show()},_histEditorHideConnection:null,_quickHistoryCompleteHide:function(){dojo.forEach(this._histEditorHideConnection,function(a){dojo.disconnect(a)}),dojo.forEach(this._actEditorHideConnection,function(a){dojo.disconnect(a)}),this._histEditorHideConnection=!1,this._actEditorHideConnection=!1},_completeHistoriesInQueue:function(){this._ensureHistoryEditor(),this._historyEditor._doingFollowup=!1,this._histEditorHideConnection=dojo.connect(this._historyEditor,"onHide",this,this._completeNextHisotryInQueue),this._completeNextHisotryInQueue()},_completeNextHisotryInQueue:function(a){if(this._histCompleteQueue.length<1)return dojo.disconnect(this._histEditorHideConnection),void dojo.disconnect(this._actEditorHideConnection);if(this._historyEditor._doingFollowup)return this._ensureEditor(),this._actEditorHideConnection&&dojo.disconnect(this._actEditorHideConnection),void(this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._followupCompleteNextHistoryInQueue));var b=this._histCompleteQueue.pop();this.completeHistory(b)},_followupCompleteNextHistoryInQueue:function(){this._historyEditor._doingFollowup=!1,this._completeNextHisotryInQueue()},_cancelCompleteHistoryQueue:function(){this._deleteHistoryFromQuickComplete()},_deleteHistoryFromQuickComplete:function(){for(var a=function(a){var b=new i({
resourceKind:"history",service:j.getSDataService("dynamic")});b.fetch({predicate:'"'+a+'"',onComplete:function(a){b.deleteEntity(a,this,null,null)},onError:function(){},scope:this})},b=this._histCompleteQueue.length,c=0;c<b;c++)a(this._histCompleteQueue.pop())},_updateHistoriesFromQuickComplete:function(a){for(var b=function(b){var c=new i({resourceKind:"history",select:["LongNotes","Result","ResultCode"],service:j.getSDataService("dynamic")});c.fetch({predicate:'"'+b+'"',onComplete:function(b){b.Result=a.result||b.Result,b.ResultCode=a.resultCode||b.ResultCode,b.LongNotes=b.LongNotes?b.LongNotes+"\n"+a.note:a.note,c.save({scope:this,success:function(a){dojo.publish("/entities/history/create",a)},failure:function(){}})},onError:function(){},scope:this})},c=this._histCompleteQueue.length,d=0;d<c;d++)b(this._histCompleteQueue.pop())},completeNewActivity:function(a,b){this._ensureEditor(),b&&"object"==typeof b||(b={}),b.Type=b.Type||a||"atAppointment",this._activityEditor.set("mode","CompleteUnscheduled"),this._activityEditor.show(b)},deleteActivity:function(a,b,c){var d=this._getSelectionContext(a,this.txtActivity,this.txtActivities);if(a)return void(12===a.length&&!b||a.indexOf("ActivityId")>-1?this.deleteActivitiesInSelectionContext(d,c):this.deleteOccurrenceOrSeriesQuery(a));if(!(d.count<1)){if(d.count>1)this.deleteActivitiesInSelectionContext(d);else{var e=d.selectionInfo.selections[0];d.selectionInfo.hasCompositeKey?e.entity&&(a=e.entity.Activity.$key):a=e.id,b=!1,e.entity&&(b=e.entity.hasOwnProperty("Activity")?!0===e.entity.Activity.Recurring:!0===e.entity.Recurring)}a&&(12!==a.length||b?this.deleteOccurrenceOrSeriesQuery(a):this.deleteActivitiesInSelectionContext(d))}},deleteActivitiesInSelectionContext:function(a,b,c){if(!(a.count<1)){var d=this.txtActionDeleteActivites,e=String.format(this.txtActionDeleteActivitiesQuestion,a.count,a.name),g=new f,h={selectionInfo:a.selectionInfo};if(1===a.count){var i=a.selectionInfo.selections[0];i&&i.id&&i.id.indexOf("ActivityId")>-1?(g.set("PublishMapWithId","/entity/userActivity/delete"),g.set("ActivityId",i.id)):i&&(g.set("PublishMapWithId","/entity/activity/delete/single"),g.set("ActivityId",i.id))}if(g.set("OperationName","deleteActivities"),g.set("PublishMap","/entity/activity/delete"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",h),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",a),b)var j=dojo.connect(this._processor,"onActionComplete",this,function(a){dojo.disconnect(j),b.call(c||this,a)});this._processor.start()}},declineMemberConfirmation:function(a,b){if(a&&b){var c={$name:"DeclineMember",request:{entity:a,memberId:b}};new Sage.SData.Client.SDataServiceOperationRequest(j.getSDataService("dynamic")).setResourceKind("activities").setOperationName("DeclineMember").execute(c,{success:function(c){var d=k.substitute("'ActivityId=${0};UserId=${1}'",[a.$key,b]);o.publish("/entity/userActivity/delete",d)},failure:function(){},scope:this})}},deleteOccurrenceOrSeriesQuery:function(a){this._deleteOccSeriesDlg||(this._deleteOccSeriesDlg=new h({id:"deleteOccSeriesQuery",mode:"delete"}),dojo.connect(this._deleteOccSeriesDlg,"onSelectOccurrence",this,function(a){this.deleteOccurrence(a)}),dojo.connect(this._deleteOccSeriesDlg,"onSelectSeries",this,function(a){this.deleteAllOccurrence(a)})),this._deleteOccSeriesDlg.set("activityId",a),this._deleteOccSeriesDlg.show()},deleteOccurrence:function(a){var b=this._getSelectionContext(a,this.txtActivity,this.txtActivities);this.deleteActivitiesInSelectionContext(b)},deleteAllOccurrence:function(a){var b=this._getSelectionContext(a,this.txtActivity,this.txtActivities);if(!(b.count<1)){var c=this.txtActionDeleteActivites,d=String.format(this.txtActionDeleteActivitiesQuestion,b.count,b.name),e=new f,g={selectionInfo:b.selectionInfo};if(1===b.count){var h=b.selectionInfo.selections[0];h&&(e.set("PublishMapWithId","/entity/activity/delete/recurrence"),e.set("ActivityId",h.id))}e.set("OperationName","deleteAllOccurrence"),e.set("PublishMap","/entity/activity/delete"),e.set("ActionDescription",c),e.set("ActionMessage",d),e.set("Args",g),this._ensureProcessor(),this._processor.set("Action",e),this._processor.set("SelectionContext",b),this._processor.start()}},snooze:function(a,b){var c=this._getSelectionContext(a,this.txtAlarm,this.txtAlarms),d=this.txtActionSnoozeAlarm,e=String.format(this.txtActionSnoozeQuestion,c.count,c.name,b.name),g=new f,h={selectionInfo:c.selectionInfo,interval:b.interval,duration:b.duration};g.set("OperationName","SnoozeAlarms"),g.set("PublishMap","/entity/UserActivity/change"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",h),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",c),this._processor.start()},snoozeAll:function(a){var b=null,c=this._getSelectionContext(b,this.txtAlarm,this.txtAlarms);c.mode="ALL";var d=this.txtActionSnoozeAlarm,e=String.format(this.txtActionSnoozeAllQuestion,c.name,a.name),g=new f,h={selectionInfo:c.selectionInfo,interval:a.interval,duration:a.duration};g.set("OperationName","SnoozeAlarms"),g.set("PublishMap","/entity/UserActivity/change"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",h),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",c),this._processor.start()},dismissAlarm:function(a){var b=this._getSelectionContext(a,this.txtAlarm,this.txtAlarms),c=this.txtActionDismissAlarms,d=String.format(this.txtActionDismissAlarmsQuestion,b.count,b.name),e=new f,g={selectionInfo:b.selectionInfo};e.set("OperationName","DismissAlarms"),e.set("ActionDescription",c),e.set("ActionMessage",d),e.set("PublishMap","/entity/UserActivity/change"),e.set("Args",g),this._ensureProcessor(),this._processor.set("Action",e),this._processor.set("SelectionContext",b),this._processor.start()},scheduleCompletedActivity:function(a){a?(this._ensureHistoryEditor(),this._historyEditor.set("activityType",a),this._historyEditor.set("mode","New"),this._historyEditor.set("historyId",""),this.getActivityEntityContext(this._historyEditor,function(a,b){a.show(b)})):alert("Show Schedule Completed Dialog")},insertNote:function(){this._ensureHistoryEditor(),this._historyEditor.set("activityType","Note"),this._historyEditor.set("mode","New"),this._historyEditor.set("historyId",""),this.getActivityEntityContext(this._historyEditor,function(a,b){a.show(b)})},editHistory:function(a){a||(a=this.getSelectedId()),a&&(this._ensureHistoryEditor(),this._historyEditor.set("mode","Edit"),this._historyEditor.set("historyId",a),this._historyEditor.show())},scheduleEvent:function(a){this._ensureEventEditor(),this._eventEditor.set("mode","New"),this._eventEditor.set("eventId",""),this._eventEditor.show(a)},editEvent:function(a){a||(a=this.getSelectedId()),a&&(this._ensureEventEditor(),this._eventEditor.set("mode","Update"),this._eventEditor.set("eventId",a),this._eventEditor.show())},deleteEvent:function(a){var b=this._getSelectionContext(a,this.txtEvent,this.txtEvents),c=this.txtActionDeleteEvents,d=String.format(this.txtActionDeleteEventsQuestion,b.count,b.name),e={selectionInfo:b.selectionInfo},g=new f;if(1===b.count){var h=b.selectionInfo.selections[0];h&&(g.set("PublishMapWithId","/entity/event/delete/single"),g.set("ActivityId",h.id))}g.set("OperationName","deleteEvents"),g.set("PublishMap","/entity/event/delete"),g.set("ActionDescription",c),g.set("ActionMessage",d),g.set("Args",e),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",b),this._processor.start()},confirmActivityFor:function(a,b,c,d){a&&(a=a.substring(0,12));var e=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));e.setResourceKind("userNotifications"),e.setQueryArg("where",k.substitute("ActivityId eq '${0}' and ToUser.Id eq '${1}'",[a,b])),e.setQueryArg("precedence","0"),e.read({success:function(e){e.$resources&&e.$resources.length>0?c?c.call(d||this,e.$resources[0].$key):this.editConfirmation(e.$resources[0].$key,b):this.editActivity(a,!1)},failure:function(){},scope:this})},editActivityIfConfirmed:function(a,b){a||(a=this._getIdFromGridSelection(),b=this._getRecurringFromGridSelection());var c=l.getClientContextByKey("userID"),d=k.substitute('"${0};${1}"',[a.indexOf(";")>0?a.substring(0,12):a,c]);new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("dynamic")).setResourceKind("userActivities").setResourceSelector(d).read({success:function(d){"asUnconfirmed"===d.Status?this.confirmActivityFor(a,c):this.editActivity(a,b)},failure:function(){this.editActivity(a,b)},scope:this})},editConfirmation:function(a,b){a||(a=this.getSelectedId()),a&&(this._ensureEditor(),this._activityEditor.set("mode","Confirm"),this._activityEditor.set("userNotificationId",a),this._activityEditor.set("activityMemberId",b),this._activityEditor.show())},acceptConfirmation:function(a){var b=!1;if(a)if(a.id)b=a.id;else if(a.notification){a.notes&&(a.notification.Notes=a.notes);var c={$name:"Accept",request:{entity:a.notification,UserNotificationId:a.notification.$key}},d=new Sage.SData.Client.SDataServiceOperationRequest(j.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("accept");return void d.execute(c,{success:a.success||function(){},failure:a.failure||function(){},scope:a.scope||this})}var e=this._getSelectionContext(b,this.txtConfirmation,this.txtConfirmations);if(e.count>1){var g={selectionInfo:e.selectionInfo,mode:"accept",note:""},h=this.txtActionAcceptConfirmations,i=String.format(this.txtActionAcceptConfirmQuestion,e.count,e.name),k=new f;k.set("OperationName","acceptConfirmations"),k.set("PublishMap","/entity/userNotification/change"),k.set("ActionDescription",h),k.set("ActionMessage",i),k.set("Args",g),this._ensureProcessor(),this._processor.set("Action",k),this._processor.set("SelectionContext",e),this._processor.start()}else this.editConfirmation(e.id)},declineConfirmation:function(a){var b=!1;if(a)if(a.id)b=a.id;else if(a.notification){a.notes&&(a.notification.Notes=a.notes);var c={$name:"Decline",request:{entity:a.notification,UserNotificationId:a.notification.$key}},d=new Sage.SData.Client.SDataServiceOperationRequest(j.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("decline");return void d.execute(c,{success:a.success||function(){},failure:a.failure||function(){},scope:a.scope||this})}var e=this._getSelectionContext(b,this.txtConfirmation,this.txtConfirmations);if(e.count>1){var g={selectionInfo:e.selectionInfo,mode:"decline",note:""},h=this.txtDeclineConfirmations,i=String.format(this.txtActionDeclineConfrimQuestion,e.count,e.name),k=new f;k.set("OperationName","declineConfirmations"),k.set("PublishMap","/entity/userNotification/change"),k.set("ActionDescription",h),k.set("ActionMessage",i),k.set("Args",g),this._ensureProcessor(),this._processor.set("Action",k),this._processor.set("SelectionContext",e),this._processor.start()}else this.editConfirmation(e.id)},deleteConfirmation:function(a){var b=this._getSelectionContext(a,this.txtConfirmation,this.txtConfirmations),c={selectionInfo:b.selectionInfo},d=this.txtActionRemoveConfirmations,e=String.format(this.txtActionRemoveConfirmationsQuestion,b.count,b.name),g=new f;g.set("OperationName","deleteConfirmations"),g.set("PublishMap","/entity/userNotification/change"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",c),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",b),this._processor.start()},goToActivityAssociation:function(a,b){b||(b=this.getSelectedId()),b&&this._getActivityAssociationId(a,b,function(b){var c="";switch(b.Association){case"Account":c=b.AccountId;break;case"Contact":c=b.ContactId;break;case"Opportunity":c=b.OpportunityId;break;case"Lead":c=b.LeadId;break;case"Ticket":c=b.TicketId}c&&Sage.Link.entityDetail(a,c)})},goToLitRequest:function(a){a||(a=this.getSelectedId()),a&&Sage.Link.entityDetail("LitRequest",a)},scheduleLitRequest:function(){document.location.href="Literature.aspx?modeid=Insert"},deleteLitRequest:function(a){var b=this._getSelectionContext(a,this.txtLiteratureRequest,this.txtLiteratureRequests),c=this.txtActionDeleteLiteratureRequests,d=String.format(this.txtActionDeleteLiteratureRequestsQuestion,b.count,b.name),e=new f,g={selectionInfo:b.selectionInfo};e.set("Args",g),e.set("OperationName","deleteLitRequests"),e.set("ActionDescription",c),e.set("ActionMessage",d),e.set("PublishMap","/entity/litRequest/change"),this._ensureProcessor(),this._processor.set("Action",e),this._processor.set("SelectionContext",b),this._processor.start()},getActivityEntityContext:function(a,b){var c=Sage.Services.getService("ClientEntityContext"),d=c.getContext(),e=d.EntityType,f=d.EntityId,g={};if(""===f||"Insert"===f)return void(b&&b(a,g));switch(e){case"Sage.Entity.Interfaces.IAccount":this.getAccountContext(d,a,b);break;case"Sage.Entity.Interfaces.IContact":this.getContactContext(d,a,b);break;case"Sage.Entity.Interfaces.IOpportunity":this.getOpportunityContext(d,a,b);break;case"Sage.Entity.Interfaces.ILead":this.getLeadContext(d,a,b);break;case"Sage.Entity.Interfaces.ITicket":this.getTicketContext(d,a,b);break;case"Sage.Entity.Interfaces.IReturn":this.getReturnContext(d,a,b);break;default:b&&b(a,g)}},getAccountContext:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("accounts");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+a.EntityId+'"',d.uri.setPathSegment(e+1,"Contacts"),d.setQueryArg("select","NameLF,IsPrimary,WorkPhone"),d.setQueryArg("orderby","IsPrimary desc"),d.setQueryArg("count","1"),d.read({success:function(d){var e={AccountId:a.EntityId,AccountName:a.Description,ContactId:"",ContactName:"",PhoneNumber:""},f=d.$resources;if(f.length>0){var g=f[0];e.ContactId=l.getValue(g,"$key"),e.ContactName=l.getValue(g,"NameLF"),e.PhoneNumber=l.getValue(g,"WorkPhone")}c&&c(b,e)},failure:function(){var d={AccountId:a.EntityId,AccountName:a.Description,ContactId:"",ContactName:"",PhoneNumber:""};c&&c(b,d)},scope:this})},getContactContext:function(a,b,c){var d=new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("dynamic"));d.setResourceKind("contacts"),d.setResourceSelector('"'+a.EntityId+'"'),d.setQueryArg("select","NameLF,IsPrimary,WorkPhone,Account,AccountName"),d.read({success:function(d){var e={AccountId:l.getValue(d,"Account.$key"),AccountName:l.getValue(d,"AccountName"),ContactId:a.EntityId,ContactName:l.getValue(d,"NameLF"),PhoneNumber:l.getValue(d,"WorkPhone")};c&&c(b,e)},failure:function(){var d={AccountId:"",AccountName:"",ContactId:a.EntityId,ContactName:a.Description,PhoneNumber:""};c&&c(b,d)},scope:this})},getOpportunityContext:function(a,b,c){new i({include:["Contacts","Account"],select:["Description","Contacts/IsPrimary","Contacts/Contact/NameLF","Contacts/Contact/WorkPhone","Account/Id","Account/AccountName"],resourceKind:"opportunities",service:j.getSDataService("dynamic")}).fetch({predicate:'"'+a.EntityId+'"',onComplete:function(d){for(var e={AccountId:d.Account.$key,AccountName:d.Account.AccountName,ContactId:"",ContactName:"",OpportunityId:a.EntityId,OpportunityName:d.Description,PhoneNumber:""},f=d.Contacts.$resources,g=!0,h=0;h<f.length;h++)(f[h].IsPrimary||g)&&(e.ContactId=f[h].Contact.$key,e.ContactName=f[h].Contact.NameLF,e.PhoneNumber=f[h].Contact.WorkPhone||""),g=!1;c&&c(b,e)},onError:function(){var d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",OpportunityId:a.EntityId,OpportunityName:a.Description,PhoneNumber:""};c&&c(b,d)},scope:this})},getLeadContext:function(a,b,c){new i({include:[],select:["LeadFullName","Company","WorkPhone"],resourceKind:"leads",service:j.getSDataService("dynamic")}).fetch({predicate:'"'+a.EntityId+'"',onComplete:function(d){var e={LeadId:a.EntityId,LeadName:d.LeadFullName,AccountName:d.Company,PhoneNumber:d.WorkPhone};c&&c(b,e)},onError:function(){var d={LeadId:a.EntityId,LeadName:a.Description,AccountName:"",PhoneNumber:""};c&&c(b,d)},scope:this})},getTicketContext:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("tickets");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+a.EntityId+'"',d.setQueryArg("select","Account,Account/AccountName,Contact,Contact/NameLF,Contact/WorkPhone"),d.read({success:function(d){var e={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:a.EntityId,TicketNumber:a.Description,PhoneNumber:""},f=d.$resources;if(f.length>0){var g=f[0];e.AccountId=l.getValue(g,"Account.$key"),e.AccountName=l.getValue(g,"Account.AccountName"),e.ContactId=l.getValue(g,"Contact.$key"),e.ContactName=l.getValue(g,"Contact.NameLF"),e.PhoneNumber=l.getValue(g,"Contact.WorkPhone")}c&&c(b,e)},failure:function(){var d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:a.EntityId,TicketNumber:a.Description,PhoneNumber:""};c&&c(b,d)},scope:this})},getReturnContext:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("returns");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+a.EntityId+'"',d.setQueryArg("select","Account,Account/AccountName,ReturnedBy,ReturnedBy/NameLF,ReturnedBy/WorkPhone,Ticket,Ticket/TicketNumber"),d.read({success:function(a){var d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""},e=a.$resources;if(e.length>0){var f=e[0];d.AccountId=l.getValue(f,"Account.$key"),d.AccountName=l.getValue(f,"Account.AccountName"),d.ContactId=l.getValue(f,"ReturnedBy.$key"),d.ContactName=l.getValue(f,"ReturnedBy.NameLF"),d.PhoneNumber=l.getValue(f,"ReturnedBy.WorkPhone"),d.TicketNumber=l.getValue(f,"Ticket.TicketNumber"),d.TicketId=l.getValue(f,"Ticket.$key")}c&&c(b,d)},failure:function(){var a={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""};c&&c(b,a)},scope:this})},_getActivityAssociationId:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("activities");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+b+'"',d.setQueryArg("select","AccountId,ContactId,OpportunityId,TicketId,LeadId"),d.read({success:function(d){var e={Association:a,ActivityId:b,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""},f=d.$resources;if(f.length>0){var g=f[0];e.AccountId=l.getValue(g,"AccountId"),e.ContactId=l.getValue(g,"ContactId"),e.OpportunityId=l.getValue(g,"OpportunityId"),e.TicketId=l.getValue(g,"TicketId"),e.LeadId=l.getValue(g,"LeadId")}c&&c(e)},failure:function(){var d={Association:a,ActivityId:b,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""};c&&c(d)},scope:this})},getActivityFreeBusyFor:function(a,b,c,d){var e=this;this.getResourceActivitiesFor(e,b,function(f){e.getUserActivitiesFor(e,b,function(b){var d=e._buildFreeBusyData(f,b);c&&c.call(a,d)},function(b){d&&d.call(a,b)})},function(b){d&&d.call(a,b)})},getResourceActivitiesFor:function(a,b,c,d){var e=["Timeless","Type","StartDate","Duration","Description","Resources/Resource"],f=["$descriptors"],g=j.getSDataService("system"),h=l.Convert.toIsoStringFromDate(b.startDate),i=l.Convert.toIsoStringFromDate(b.endDate),k=this,m="(Resources.ResourceId in ("+b.quotedIds.join(",")+"))"+dojo.string.substitute("and (Timeless ne true) and (StartDate between @${0}@ and @${1}@)",[h,i]),n=new Sage.SData.Client.SDataResourceCollectionRequest(g);b.select&&(e=b.select),n.setResourceKind("activities"),n.setQueryArg("select",e.join(",")),n.setQueryArg("where",m),n.setQueryArg("include",f.join(",")),n.uri.queryArgs._expandRecurrences=b.expandRecurrences,n.read({success:function(b){if(c){var d=k._processResourceActivityData(b);c.call(a,d)}},failure:dojo.hitch(a,d)})},getUserActivitiesFor:function(a,b,c,d){var e=["Timeless","Type","StartDate","Duration","Description","Leader","UserActivities/User","UserActivities/Status"],f=["$descriptors"],g=j.getSDataService("system"),h=l.Convert.toIsoStringFromDate(b.startDate),i=l.Convert.toIsoStringFromDate(b.endDate),k=this,m="(UserActivities.UserId in ("+b.quotedIds.join(",")+")) and (Type ne 'atLiterature') and (UserActivities.Status ne 'asDeclned')"+dojo.string.substitute("and (StartDate between @${0}@ and @${1}@)",[h,i]),n=new Sage.SData.Client.SDataResourceCollectionRequest(g);b.timelessOnly?m+=" and (Timeless eq true)":b.includeTimless||(m+=" and (Timeless ne true)"),b.select&&(e=b.select),n.setResourceKind("activities"),n.setQueryArg("select",e.join(",")),n.setQueryArg("where",m),n.setQueryArg("include",f.join(",")),n.uri.queryArgs._expandRecurrences=b.expandRecurrences,n.read({success:function(b){var d=k._processUserActivityData(b);c&&c.call(a,d)},failure:dojo.hitch(a,d)})},_processUserActivityData:function(a){var b=[];b.$resources=[];var c,d,e=a.$resources;if(e)for(var f=e.length,g=0;g<f;g++){var h=!1,i=e[g].$key;if(e[g].UserActivities)for(var j=e[g].UserActivities.$resources,k=j.length,l=0;l<k;l++){var m=e[g].UserActivities.$resources[l].User.$key;c=m+":"+i,h=b[c],h||(d={$Key:c,UserId:e[g].UserActivities.$resources[l].User.$key,ActivityId:i,UserActivity:e[g].UserActivities.$resources[l],Activity:e[g]},b[c]=d,b[c]=c,b.$resources.push(d))}else{var n=e[g].Leader.$key;c=n+":"+i,e[g].UserActivities=[],e[g].UserActivities.$resources=[];var o={};o.$key=n,o.User={$key:n},e[g].UserActivities.$resources.push(o),d={$key:c,UserId:e[g].Leader.$key,ActivityId:i,UserActivity:e[g].UserActivities.$resources,Activity:e[g]},h=b[c],h||(b[c]=c,b.$resources.push(d))}}var p=[];return p.$resources=b.$resources,p},_processResourceActivityData:function(a){var b=[];b.$resources=[];var c=a.$resources;if(c)for(var d=c.length,e=0;e<d;e++){var f=c[e].$key;if(c[e].Resources)for(var g=c[e].Resources.$resources,h=g.length,i=0;i<h;i++){var j=c[e].Resources.$resources[i].Resource.$key,k=j+":"+f;if(b[k]);else{var l={$Key:k,ResourceId:j,ActivityId:f,ResourceActivity:c[e].Resources.$resources[i],Activity:c[e]};b[k]=l,b[k]=k,b.$resources.push(l)}}}var m=[];return m.$resources=b.$resources,m},_buildFreeBusyData:function(a,b){var c,d,e=a.$resources,f=b.$resources,g=[];for(g.$resources=[],c=0;c<f.length;c++)d={id:f[c].$key,activityId:f[c].ActivityId,itemId:f[c].UserId,type:f[c].Activity.Type,startDate:f[c].Activity.StartDate,duration:f[c].Activity.Duration,timless:f[c].Activity.Timeless,description:f[c].Activity.Description},g.$resources.push(d);for(c=0;c<e.length;c++)d={id:e[c].$key,activityId:e[c].ActivityId,itemId:e[c].ResourceId,type:e[c].Activity.Type,startDate:e[c].Activity.StartDate,duration:e[c].Activity.Duration,timless:e[c].Activity.Timeless,description:e[c].Activity.Description},g.$resources.push(d);return g},getDefaultActivityManagerTabId:function(){if(!this._defaultActivitManagerTabId){var a=Sage.Services.getService("UserOptions"),b=this;a&&a.get("DefaultView","ActivityAlarm",function(a){b._defaultActivitManagerTabId=b.getTabIdFromCode(a.value)},null,this,!1)}return this._defaultActivitManagerTabId},setDefaultActivityManagerTabId:function(a){this._defaultActivitManagerTabId=a},getTabIdFromCode:function(a){var b="activities";switch(a){case"0":b="activities";break;case"1":b="allopen";break;case"2":b="pastdue";break;case"3":b="alarms";break;case"4":b="events";break;case"5":b="confirmations";break;case"6":b="literature"}return b},getSelectedId:function(){var a=this.getSelectionInfo(),b="";if(a){if(a.hasCompositeKey){return a.selections[0].entity.Activity.$key}b=(a.selections.length,a.selections[0].id)}return b},getSelectedItem:function(){var a=this.getSelectionInfo(),b={id:!1,hasCompositeKey:!1,entity:!1};return a&&(b.hasCompositeKey=a.hasCompositeKey,b.entity=a.entity,a.selections.length,b.id=a.selections[0].id,b.entity=a.selections[0].entity),b},getSelections:function(){var a=this.getSelectionInfo(),b=null;return a&&(b=a.selections),b},prepareSelections:function(){return this.getSelectionInfo()},getSelectionInfo:function(){var b=!1;try{var c=dijit.byId("list");c&&(b=c.getSelectionInfo(!0))}catch(b){a.alert(this.txtErrorActionMsg||"error getting selectionInfo")}return b},getTotalSelectionCount:function(){var a=0;try{var b=dijit.byId("list");b&&(a=b.getTotalSelectionCount())}catch(a){}return a},verifySelection:function(a){return null!==a&&0!==a.selectionCount},verifySingleSelection:function(a){return null!==a&&1===a.selectionCount},setSelectionCount:function(){try{var a=dijit.byId("list");a&&$("#selectionCount").text(a.getTotalSelectionCount())}catch(a){}},refreshList:function(a){try{var b=dijit.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}},_getSelectionContext:function(a,b,c){var d={id:null,selectionInfo:null,count:0,mode:"select",name:null};if(a){var e=[],f=[];e.push(a),f.push({rn:0,id:a});var g={key:"",mode:"singleSelect",selectionCount:1,recordCount:1,sortDirection:"",sortField:"",keyField:"",hasCompositeKey:a.indexOf("Activity")>-1,ranges:[],selections:f,selectedIds:e};d.selectionInfo=g,d.id=a,d.count=1}else d.selectionInfo=this.getSelectionInfo(),d.count=d.selectionInfo.selectionCount,1===d.count&&(d.id=d.selectionInfo.selectedIds[0]);return d.name=d.count>1?c:b,d},getActivityService:function(){return j.getSDataService("dynamic")}});return Sage.Services.hasService("ActivityService")||Sage.Services.addService("ActivityService",new q),q})},"Sage/MainView/ActivityMgr/ActivityEditor":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/string","Sage/UI/Dialogs","dijit/Tooltip","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Controls/Lookup","dojo/i18n!./nls/ActivityEditor","dojo/text!./templates/ActivityEditor.html","dojo/dom-class","Sage/Utility/UserOptions","dijit/focus","dojo/aspect","Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab","dijit/layout/ContentPane","dojo/dom-style","dojo/on","dojo/dom-geometry","dijit/Toolbar","dijit/layout/TabContainer","dijit/form/Textarea","dojox/layout/TableContainer","dijit/layout/BorderContainer","dijit/form/ComboBox","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","Sage/MainView/ActivityMgr/RecurringEditor","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_Widget,_Templated,declare,SingleEntrySDataStore,BindingsManager,utility,_DialogHelpIconMixin,dojoLang,_DialogLoadingMixin,activityUtility,dojoDate,locale,dString,sageDialogs,tooltip,AttachmentList,sDataServiceRegistry,fileUtility,attachmentUtility,Lookup,activityEditorStrings,template,domClass,userOptionsUtility,focusUtil,aspect,ActivityEditorAttendeesTab,ContentPane,domStyle,on,domGeometry){var activityEditor=declare("Sage.MainView.ActivityMgr.ActivityEditor",[_Widget,_Templated],{activityId:"",activityMemberId:"",_memberSecurityData:[],mode:"",userNotificationId:"",id:"",activityType:"",_options:{},_dialog:!1,_currentUserId:null,_originalLeaderId:!1,_activityService:!1,_activityData:!1,_activityStore:!1,_currentUserActivityData:!1,_tempUAData:!1,_currentUserActivityStore:!1,_notificationData:!1,_notificationStore:!1,_notificationBindingMgr:!1,_historyStore:!1,_deleteAttendeeConnects:[],_attendeesData:[],_newAttendeesData:[],_attendeesForRemoval:[],_userActivitiesRequestCount:0,_resourceRequestCount:0,_resourceDeleteRequestCount:0,_availabilityShowing:!1,_bindingMgr:!1,_uaBindingMgr:!1,_activityChangeConnection:!1,lup_Account:!1,lup_Contact:!1,lup_Opportunity:!1,lup_Ticket:!1,lup_Lead:!1,lup_Leader:!1,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},resourcesLookupConfig:{},_isBinding:!1,_activitySaved:!1,_userActivitiesSaved:!1,_currentUserActivitySaved:!1,_resourcesSaved:!1,_resourcesRemoved:!1,_attachmentsSaved:!1,_completeAfterSaving:!1,_attachmentList:!1,_tempIdForAttachments:!1,confirmationDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_Alarm","sel_AlarmDur","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","ta_Notes","pk_Priority","lup_Leader","pk_Category"],noEditDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","pk_Priority","lup_Leader","pk_Category"],_readOnlyMode:!1,_isProcessing:!1,_DHTMLXLibraryTimePattern:"",eventConnections:[],activityDefaultValues:{},widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){dojoLang.mixin(this,activityEditorStrings),this._preloadActivityOptions(),this._activityService=sDataServiceRegistry.getSDataService("system"),this._setupStore(),this._currentUserId=utility.getClientContextByKey("userID")||"",this._currentUserId=this._currentUserId.trim(),dojo.subscribe("/entity/attachment/create",this,this._updateActivityETag),dojo.subscribe("/entity/attachment/update",this,this._updateActivityETag),dojo.subscribe("/entity/attachment/delete",this,this._updateActivityETag)},destroy:function(){this._activityChangeConnection&&(dojo.disconnect(this._activityChangeConnection),this._activityChangeConnection=!1),this._bindingMgr&&this._bindingMgr.destroy(),this._uaBindingMgr&&this._uaBindingMgr.destroy();for(var a=0;a<this.eventConnections.length;a++)dojo.disconnect(this.eventConnections[a]);this.lup_Account.destroy(),this.lup_Contact.destroy(),this.lup_Opportunity.destroy(),this.lup_Ticket.destroy(),this.lup_Lead.destroy(),this.lup_Leader.destroy(),this.eventConnections=[],this.inherited(arguments)},postCreate:function(){this._asScheduledTooltip=new tooltip({connectId:[this.btn_asScheduled.id],label:" ",position:["below"]}),dojo.connect(this.dtp_scheduledDate,"onChange",this,function(){this._asScheduledTooltip.set("label",locale.format(this.dtp_scheduledDate.get("value"),{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}))}),this._nowTooltip=new tooltip({connectId:[this.btn_Now.id],label:" ",position:["below"]}),dojo.connect(this.dtp_completedDate,"onChange",this,function(){this._nowTooltip.set("label",locale.format(this.dtp_completedDate.get("value"),{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}))}),dojo.subscribe("/entity/activityAttendee/primaryChanged",this,this.primaryChanged),dojo.subscribe("/entity/activityAttendee/add",this,this._updateActivityAttendeeETag),dojo.subscribe("/entity/activityAttendee/delete",this,this._updateActivityAttendeeETag)},primaryChanged:function(a,b,c){var d=dojoLang.clone(a);d.attendeeTab=!0,d.$descriptor=d.Name,d.$key=d.EntityId,"Contact"==d.EntityType?(d.Account||(d.Account={$key:d.AccountId,AccountName:d.AccountName||d.Company}),d.ContactId=d.EntityId,d.PrimaryChecked?(this.rdo_Contact.set("checked",!0),this.rdo_Lead.set("checked",!1),this.lup_Contact.set("selectedObject",d),this.attendeesTab._uncheckItem=d):this.lup_Contact.set("selectedObject",null)):"Lead"==d.EntityType&&(d.Company=d.AccountName,d.LeadFullName=d.Name,d.LeadId=d.EntityId,d.PrimaryChecked?(this.rdo_Contact.set("checked",!1),this.rdo_Lead.set("checked",!0),this.lup_Lead.set("selectedObject",d),this.attendeesTab._uncheckItem=d):this.lup_Lead.set("selectedObject",null))},isFirstOpen:!0,show:function(a){this._isProcessing=!1,this._dialog.set("refocus",!1),this._dialog.show(),this.isFirstOpen&&(this.isFirstOpen=!1,this._ensureLookupsCreated(),
this.connect(this._recurringEditor,"onStartDateChanged",this._recurringStartDateChanged),this.connect(this._recurringEditor,"onRecurPeriodChanged",this._recurringPeriodChanged),this.connect(this._dialog,"onHide",this._cleanOnClose),this._ensureAttachmentList()),this.sel_AlarmDur.resetItems(),this.activityDefaultValues={},"New"===this.mode&&(this.activityDefaultValues=a||{},this._loadData()),"CompleteUnscheduled"!==this.mode||this.historyId||(this.activityDefaultValues=a||{},this._loadHistory()),this._dialog._standby||(dojoLang.mixin(this._dialog,new _DialogLoadingMixin),this._activityData||this._notificationData||this._dialog.showLoading()),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new _DialogHelpIconMixin),this._dialog.createHelpIconByTopic(this._getHelpTopicByMode())),this._availabilityShowing=!1,this.tc_EditActivity.selectChild(this.cp_General),this._dialog.resize()},hide:function(){this._dialog.hide()},_onDlgHide:function(){this.onHide()},onHide:function(){this.attendeesTab._dialogHide(),this._cleanOnClose()},_cleanOnClose:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this.set("activityId",""),this.set("activityMemberId",""),this._activityStore&&this._activityStore.clearCache(),this._historyStore&&this._historyStore.clearCache(),this._hideLookupTooltip(this.lup_Account),this._hideLookupTooltip(this.lup_Contact),this._hideLookupTooltip(this.lup_Opportunity),this._hideLookupTooltip(this.lup_Ticket),this._hideLookupTooltip(this.lup_Lead),this._hideLookupTooltip(this.lup_Leader)},_hideLookupTooltip:function(a){a&&a.hideTooltip()},_controllOnMouseEnter:function(){},_updateActivityETag:function(a){if(a?this._activityData.AttachmentCount++:this._activityData.AttachmentCount--,this._dialog.open&&this.activityId){var b=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));b.setResourceKind("activities"),b.setResourceSelector('"'+this.activityId+'"'),b.setQueryArg("precedence","0"),b.read({success:function(a){this._activityData.$etag=a.$etag},scope:this})}},_updateActivityAttendeeETag:function(a){if(this._dialog.open&&this.activityId){this.AttCount=a;var b=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));b.setResourceKind("activities"),b.setResourceSelector('"'+this.activityId+'"'),b.setQueryArg("precedence","0"),b.setQueryArg("select","details/AttendeeCount"),b.read({success:function(a){this._activityData.$etag=a.$etag,a.Details&&(this._activityData.Details.AttendeeCount=a.Details.AttendeeCount)},scope:this})}},_ensureAttendeesTab:function(){this.attendeesTab&&this.mode==this.attendeesTab.editorMode&&this.activityId===this.attendeesTab._activityId||(this._addAttendeesTab(this.mode),this.userNotificationId=null)},_addAttendeesTab:function(a){this.attendeesTab&&(dijit.byId(this.tc_EditActivity.id).removeChild(dijit.byId("attendeesTabPane")),dijit.byId(this.attendeesTab.lup_Lead.id)&&dijit.byId(this.attendeesTab.lup_Lead.id).destroyRecursive(),dijit.byId(this.attendeesTab.lup_Contact.id)&&dijit.byId(this.attendeesTab.lup_Contact.id).destroyRecursive(),dijit.byId("attendeesTabPane").destroyRecursive(),this.attendeesTab=null);var b={editorMode:a},c=this.attendeesTab=new ActivityEditorAttendeesTab(b),d=new ContentPane({id:"attendeesTabPane",title:this.tabNameParticipants,class:"tabContent remove-padding"},c.domNode);this.tc_EditActivity.addChild(d),c.actEditor=this;var e=!0;("Confirm"===this.mode||this._isOccurence())&&(e=!1),c.startup(!e),on(d,"show",function(){e?c.setToReadOnly(!1):c.setToReadOnly(!0),c._tabShow()})},_getHelpTopicByMode:function(){switch(this.mode){case"Confirm":return"confirmnotifications";case"Complete":case"CompleteUnscheduled":return"completeactivity"}return"activitydetailview"},_showCorrectButtonBar:function(a){"Confirm"===a?(domClass.add(this.add_edit_buttons,"display-none"),domClass.add(this.complete_buttons,"display-none"),domClass.remove(this.confirmation_edit_buttons,"display-none")):"Complete"===a||"CompleteUnscheduled"===a?(domClass.add(this.add_edit_buttons,"display-none"),domClass.add(this.confirmation_edit_buttons,"display-none"),domClass.remove(this.complete_buttons,"display-none")):(domClass.add(this.confirmation_edit_buttons,"display-none"),domClass.add(this.complete_buttons,"display-none"),domClass.remove(this.add_edit_buttons,"display-none"))},_setModeAttr:function(a){var b;if(this.mode=a,this._showCorrectButtonBar(a),"Confirm"===a?(this._ensureLookupsCreated(),this._bulkSetProperty(this,this.confirmationDisableList,"disabled",!0)):this._bulkSetProperty(this,this.confirmationDisableList,"disabled",!1),0===a.indexOf("New")){this.mode="New";switch(a.replace("New ","").toLowerCase()){case"phonecall":case"atphonecall":this.activityType="atPhoneCall";break;case"meeting":case"atappointment":this.activityType="atAppointment";break;case"todo":case"attodo":this.activityType="atToDo";break;case"personalactivity":case"atpersonal":case"personal":this.activityType="atPersonal";break;case"letter":case"atletter":case"doc":case"atdoc":this.activityType="atDoc";break;case"fax":case"atfax":this.activityType="atFax";break;default:this.activityType="atAppointment"}this._activityData=!1,domClass.add(this.btn_Delete.domNode,"display-none"),domClass.add(this.btn_Complete.domNode,"display-none"),this._ensureAttendeesTab()}else domClass.remove(this.btn_Delete.domNode,"display-none"),domClass.remove(this.btn_Complete.domNode,"display-none");if("Complete"===a||"CompleteUnscheduled"===a){domClass.add(this.dateSection_AddEdit.domNode,"display-none"),domClass.remove(this.dateSection_Complete.domNode,"display-none"),domClass.remove(this.resultContainer.domNode,"display-none"),b=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring),b>0&&(this.tc_EditActivity.removeChild(this.cp_Recurring),window.setTimeout(dojo.hitch(this,function(){this._dialog.resize()},10))),this._dialog.open&&(this._setUI(),this._completeModeManualBind());var c=this._options.followUp.defaultFollowUpType,d="None"===c?this.noneText:activityUtility.getActivityTypeName(c);this.sel_Followup.set("value",d),this.ck_coAttachments.set("checked",this._options.followUp.carryOverAttachments),this.ck_coNotes.set("checked",this._options.followUp.carryOverNotes),"CompleteUnscheduled"===a&&this._ensureAttendeesTab()}else if(domClass.add(this.dateSection_Complete.domNode,"display-none"),domClass.remove(this.dateSection_AddEdit.domNode,"display-none"),domClass.add(this.resultContainer.domNode,"display-none"),(b=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring))<0){var e=this.tc_EditActivity.getIndexOfChild(this.cp_Attachments);this.tc_EditActivity.addChild(this.cp_Recurring,e),window.setTimeout(dojo.hitch(this,function(){this._dialog.resize()},10))}this._dialog.helpIcon&&this._dialog.set("helpTopic",this._getHelpTopicByMode())},_setActivityIdAttr:function(a){a=a||"",this.activityId=a,this._activityData=!1,""!==a&&(this.historyId="",this._loadData(),this._ensureAttendeesTab())},_getActivityIdAttr:function(){return this.activityId},_setActivityMemberIdAttr:function(a){a=a||"",this.activityMemberId=a},_getActivityMemberIdAttr:function(){return this.activityMemberId},_setUserNotificationIdAttr:function(a){a=a||"",a!==this.userNotificationId&&(this.userNotificationId=a,this.set("activityId",""),this._notificationData=!1,this._loadNotification()),this._ensureAttendeesTab()},_getUserNotificationId:function(){return this.userNotificationId},_setHistoryIdAttr:function(a){a=a||"",this.historyId!==a&&(this.historyId=a,this._activityData=!1,""!==a&&(this.activityId="",this._loadHistory()))},_getHistoryIdAttr:function(){return this.historyId},_preloadActivityOptions:function(){this._options={atAppointment:{alarmLead:"15",duration:"60",autoRollover:!1,timeless:!1},atPhoneCall:{alarmLead:"15",duration:"15",autoRollover:!1,timeless:!1},atToDo:{alarmLead:"none",duration:"15",autoRollover:!1,timeless:!1},atPersonal:{alarmLead:"none",duration:"5",autoRollover:!1,timeless:!1},followUp:{defaultFollowUpType:"None",carryOverNotes:!1,carryOverAttachments:!1},calendar:{dayStartTime:"9",dayEndTime:"6"}};var a=Sage.Services.getService("UserOptions");a&&a.getByCategories(["ActivityMeetingOptions","ActivityPhoneOptions","ActivityToDoOptions","ActivityPersonalOptions","Calendar"],this._receivedOptions,this)},_receivedOptions:function(a){for(var b={0:"None",1:"atPhoneCall",2:"atAppointment",3:"atToDo"},c=a.$resources,d=0;d<c.length;d++){var e=c[d],f="ActivityMeetingOptions"===e.category?"atAppointment":"ActivityPhoneOptions"===e.category?"atPhoneCall":"ActivityToDoOptions"===e.category?"atToDo":"ActivityPersonalOptions"===e.category&&"atPersonal";if(f&&this._options[f]&&e.value)switch(e.name){case"AlarmLead":this._options[f].alarmLead=parseInt(e.value,10)>0?e.value:"none";break;case"Duration":this._options[f].duration=e.value;break;case"Timeless":var g=e.value.substring(0,1).toUpperCase();this._options[f].timeless="T"===g;break;case"AutoRollover":var h=e.value.substring(0,1).toUpperCase();this._options[f].autoRollover="T"===h}else if("Calendar"===e.category)switch(e.name){case"DayStartTime":this._options.calendar.dayStartTime=userOptionsUtility.getConvertedOptionValue(e.name,e.value);break;case"DayEndTime":this._options.calendar.dayEndTime=userOptionsUtility.getConvertedOptionValue(e.name,e.value);break;case"DefaultFollowUpType":this._options.followUp.defaultFollowUpType=b[e.value]||"None";break;case"CarryOverNotes":var i=e.value.substring(0,1).toUpperCase();this._options.followUp.carryOverNotes="T"===i;break;case"CarryOverAttachments":var j=e.value.substring(0,1).toUpperCase();this._options.followUp.carryOverAttachments="T"===j}}},_setupStore:function(){this._activityStore||(this._activityStore=new SingleEntrySDataStore({include:["$descriptors"],resourceKind:"activities",ignoreETag:!0,service:this._activityService})),this._currentUserActivityStore||(this._currentUserActivityStore=new SingleEntrySDataStore({include:["$descriptors"],select:["Alarm","AlarmTime","Activity/StartDate"],resourceKind:"userActivities",service:this._activityService})),this._historyStore||(this._historyStore=new SingleEntrySDataStore({include:["$descriptors"],resourceKind:"history",service:sDataServiceRegistry.getSDataService("dynamic")}))},_resetDataProps:function(){this._activityData=!1,this._currentUserActivityData=!1,this._tempUAData=!1,this._notificationData=!1,this._attendeesData=[],this._attendeesForRemoval=[],this._newAttendeesData=[],this._userActivitiesRequestCount=0,this._resourceRequestCount=0,this._resourceDeleteRequestCount=0,this._activitySaved=!1,this._userActivitiesSaved=!1,this._currentUserActivitySaved=!1,this._resourcesSaved=!1,this._resourcesRemoved=!1,this._attachmentsSaved=!1,this._originalLeaderId=!1,this._attachmentList&&this._attachmentList.clearNewAttachments(),this._availabilityDataDateRange={fromDate:!1,toDate:!1,users:[]}},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._activityStore&&("New"===this.mode?this._activityStore.newItem({onComplete:function(a){Sage.Utility.setValue(a,"Type",this.activityType),this._receivedActivity(a)},onError:this._requestFailure,scope:this}):this._activityStore.fetch({predicate:'"'+this.activityId+'"',onComplete:this._receivedActivity,onError:this._requestFailure,scope:this}))},_receivedActivity:function(a){if(this._activityData=a,this._currentUserActivityStore&&"New"!==this.mode&&"CompleteUnscheduled"!=this.mode){var b=this.activityId||a.$key;b=b.indexOf(";")>0?b.substring(0,12):b;var c=this.activityMemberId||this._currentUserId;this._currentUserActivityStore.fetch({predicate:dString.substitute("'ActivityId=${0};UserId=${1}'",[b,c]),onComplete:this._receivedUserActivity,onError:this._noUserActivity,scope:this})}a.AttachmentCount>0&&(this._activityData.Attachment=!0),this._tempIdForAttachments=!1;var d=Sage.Services.getService("ClientEntityContext"),e=this.historyId?{EntityId:this.historyId,EntityType:"Sage.Entity.Interfaces.IHistory",Description:this._activityData.$descriptor,EntityTableName:"HISTORY"}:{EntityId:this.activityId,EntityType:"Sage.Entity.Interfaces.IActivity",Description:this._activityData.$descriptor,EntityTableName:"ACTIVITY"};d.setTemporaryContext(e),"New"!==this.mode&&"CompleteUnscheduled"!=this.mode?this.activityType=a.Type:this._applyUserOptionsForNewActivity(),this.activityMemberId&&this.activityMemberId!==this._currentUserId&&!this._memberSecurityData[this.activityMemberId]?this._checkSecurityAccess(this._currentUserId,this.activityMemberId,function(b){b&&(this._memberSecurityData[this.activityMemberId]=[],this._memberSecurityData[this.activityMemberId].AllowAdd=b.AllowAdd,this._memberSecurityData[this.activityMemberId].AllowEdit=b.AllowEdit,this._memberSecurityData[this.activityMemberId].AllowDelete=b.AllowDelete),this._setUIForActivityType(a.Type),this._bind()},this):(this._setUIForActivityType(a.Type),this._bind()),this._activityData.Leader?this._originalLeaderId=this._activityData.Leader.$key:this._originalLeaderId=this._activityData.UserId||this._currentUserId,this._dialog._standby&&this._dialog.hideLoading(),this.attendeesTab._activityId=a.$key,a.details&&(this._activityData.AttendeeCount=a.details.AttendeeCount),"Confirm"==this.mode&&this.attendeesTab._grid.refresh()},_receivedUserActivity:function(a){this._dialog._standby&&this._dialog.hideLoading(),this._currentUserActivityData=a,null===a.Alarm&&(a.Alarm=this._activityData.Alarm),null===a.AlarmTime&&(a.AlarmTime=this._activityData.AlarmTime),this._tempUAData={Alarm:a.Alarm,AlarmTime:utility.Convert.toDateFromString(a.AlarmTime)},this._bindUserActivity()},_loadNotification:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._notificationStore||(this._notificationStore=new SingleEntrySDataStore({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:sDataServiceRegistry.getSDataService("system")})),this._notificationStore.fetch({predicate:"'"+this.userNotificationId+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this})},_loadHistory:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._historyStore&&(this.historyId?this._historyStore.fetch({predicate:this.historyId,onComplete:function(a){this._receivedActivity(a),this._formatHeader()},onError:this._requestFailure,scope:this}):this._historyStore.newItem({onComplete:function(a){this._receivedActivity(dojoLang.mixin(a,this.activityDefaultValues)),this._formatHeader()},scope:this}))},_receivedNotification:function(a){this._receivedActivity(a.Activity||this._emptyActivity),this._notificationData=a,this._formatHeader(),this._bindUserNotification(),"New"===a.Type?this._setUIAsUnConfirmed():(domClass.remove(this.otherConfButtons,"display-none"),domClass.add(this.newConfButtons,"display-none"),"Confirm"===a.Type||"Decline"===a.Type?(this.ta_confirmationResponse.set("disabled",!0),domClass.remove(this.responseLabel,"display-none"),domClass.remove(this.ta_confirmationResponse.domNode,"display-none")):(domClass.add(this.responseLabel,"display-none"),domClass.add(this.ta_confirmationResponse.domNode,"display-none")),"Change"===a.Type&&this._checkUserConfirmationStatus())},_checkUserConfirmationStatus:function(){new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")).setResourceKind("userActivities").setResourceSelector('"'+this._notificationData.Activity.$key+";"+this._notificationData.ToUser.$key+'"').read({success:function(a){"asUnconfirmed"===a.Status&&this._setUIAsUnConfirmed()},failure:function(){},scope:this})},_setUIAsUnConfirmed:function(){domClass.add(this.otherConfButtons,"display-none"),domClass.remove(this.newConfButtons,"display-none"),this.ta_confirmationResponse.set("disabled",!1),domClass.remove(this.responseLabel,"display-none"),domClass.remove(this.ta_confirmationResponse.domNode,"display-none")},_applyUserOptionsForNewActivity:function(){var a=activityUtility.roundDateToNextQuarterHour(new Date),b="15";if(this._options[this.activityType]){var c=this._options[this.activityType];utility.setValue(this._activityData,"Duration",c.duration||"60"),b=c.alarmLead,utility.setValue(this._activityData,"Rollover",c.autoRollover),utility.setValue(this._activityData,"Timeless",c.timeless),this._activityData.Timeless&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,5))}utility.setValue(this._activityData,"StartDate",utility.Convert.toIsoStringFromDate(a)),this._activityData=dojoLang.mixin(this._activityData,this.activityDefaultValues),"none"===b.toLowerCase()?(utility.setValue(this._activityData,"Alarm",!1),b=15):(Sage.Utility.setValue(this._activityData,"Alarm",!0),b=parseInt(b,10));var d=utility.Convert.toDateFromString(utility.getValue(this._activityData,"StartDate")),e=this._getAlarmTime(d,b,this._activityData.Timeless);utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(e)),this.sel_AlarmDur.set("startTime",d),this.sel_AlarmDur.set("timeValue",e);var f={$key:this._currentUserId,$descriptor:utility.getClientContextByKey("userPrettyName")};utility.setValue(this._activityData,"Leader",f),this.activityDefaultValues.hasOwnProperty("carryOverAttachmentsFrom")&&window.setTimeout(dojo.hitch(this,function(){this.doCarryOverAttachments(this.activityDefaultValues.carryOverAttachmentsFrom)},1e3)),this.activityDefaultValues.hasOwnProperty("carryOverParticipantsFrom")&&window.setTimeout(dojo.hitch(this,function(){this._getHistoryAttendees(this.activityDefaultValues.carryOverParticipantsFrom)},1e3))},_noUserActivity:function(){this._bindUserActivity()},_requestFailure:function(a){this._dialog._standby&&this._dialog.hideLoading(),sageDialogs.showError(this.failedLoadingDataMsg),this.hide()},_createBindings:function(){this._bindingMgr&&(this._bindingMgr.destroy(),this._bindingMgr=!1),this._bindingMgr=new BindingsManager({defaultBinding:{boundEntity:this._activityData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.ta_Notes,entityProperty:"LongNotes",onChange:dojo.hitch(this,"_notesChanged")},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.sel_AlarmDur,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.cb_AutoRollover,entityProperty:"Rollover",widgetProperty:"checked"},{boundWidget:this.dtp_scheduledDate,dataType:"date",entityProperty:"StartDate"},{boundWidget:this.sel_DurationComplete,entityProperty:"Duration"},{boundWidget:this.sel_DurationComplete,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.cb_TimelessComplete,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")}]})},_createUABindings:function(){this._uaBindingMgr=new BindingsManager({items:[{boundWidget:this.cb_Alarm,entityProperty:"Alarm",widgetProperty:"checked",onChange:dojo.hitch(this,"_alarmCheckChanged")}]})},_createNotificationBindings:function(){this._notificationBindingMgr=new BindingsManager({items:[{boundWidget:this.ta_confirmationResponse,entityProperty:"Notes",boundEntity:this._notificationData}]})},_bind:function(){this._activityData&&(this._bindingMgr?this._bindingMgr.boundEntity&&this._activityData.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this._activityData):this._createBindings(),"New"!==this.mode&&"CompleteUnscheduled"!==this.mode||this._noUserActivity(),this._manualBind(),this._setUI())},_bindUserNotification:function(){this._notificationBindingMgr?this._notificationBindingMgr.setBoundEntity(this._notificationData):this._createNotificationBindings()},_isNullOrWhitespace:function(a){return!a||""===a.trim()},_manualBind:function(){if(this._activityData){var a,b,c;this._isBinding=!0,a=this._activityData;var d=this._isNullOrWhitespace(a.AccountId)?null:{$key:a.AccountId,$descriptor:a.AccountName};this.lup_Account.set("selectedObject",d),b=this._isNullOrWhitespace(a.ContactId)?null:{$key:a.ContactId,$descriptor:a.ContactName},this.lup_Contact.set("selectedObject",b);var e=this._isNullOrWhitespace(a.OpportunityId)?null:{$key:a.OpportutunityId,$descriptor:a.OpportunityName};this.lup_Opportunity.set("selectedObject",e);var f=this._isNullOrWhitespace(a.TicketId)?null:{$key:a.TicketId,$descriptor:a.TicketNumber};this.lup_Ticket.set("selectedObject",f),c=this._isNullOrWhitespace(a.LeadId)?null:{$key:a.LeadId,$descriptor:a.LeadName},this.lup_Lead.set("selectedObject",c),this.tb_LeadCompanyName.set("value",this._isNullOrWhitespace(a.LeadId)?"":a.AccountName),this._updateLookupSeedValues(a.AccountId),this.lup_Leader.set("selectedObject",a.Leader),"Complete"!==this.mode&&this._recurringEditor.set("activity",a);var g=Sage.Utility.Convert.toDateFromString(this._activityData.AlarmTime);this.sel_AlarmDur.set("timeValue",g),this._completeModeManualBind(),this._isBinding=!1,"New"!=this.mode&&"CompleteUnscheduled"!==this.mode||this._activityData&&(a=this._activityData,b=this._isNullOrWhitespace(a.ContactId)?null:{$key:a.ContactId,$descriptor:a.ContactName},this.attendeesTab._addContactAttendee(b),c=this._isNullOrWhitespace(a.LeadId)?null:{$key:a.LeadId,$descriptor:a.LeadName},this.attendeesTab._addLeadAttendee(c))}},_completeModeManualBind:function(){"Complete"!==this.mode&&"CompleteUnscheduled"!==this.mode||(this.dtp_completedDate.set("value",new Date),this.pl_Result.set("value",this.completeText),"Complete"===this.mode&&this.pl_Result.focus())},_bindUserActivity:function(){this._uaBindingMgr||this._createUABindings(),this.sel_AlarmDur.set("disabled",!1);var a=this._getActivityStartDate();this.sel_AlarmDur.set("startTime",a);var b=this._currentUserActivityData?this._currentUserActivityData:this._activityData,c=utility.Convert.toDateFromString(b.AlarmTime);if(this._currentUserActivityData&&"rstOccurrence"===utility.getValue(this._activityData,"RecurrenceState")){var d=utility.Convert.toDateFromString(this._currentUserActivityData.Activity.StartDate),e=utility.Convert.toDateFromString(this._currentUserActivityData.AlarmTime),f=dojoDate.difference(d,e,"minute");c=dojoDate.add(a,"minute",f)}this._uaBindingMgr.setBoundEntity(b),this.sel_AlarmDur.set("timeValue",c),this.sel_AlarmDur.set("disabled",!b.Alarm||"Confirm"===this.mode)},_getActivityStartDate:function(){if(this._activityData){var a=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate);return this._activityData.Timeless&&activityUtility.isDateFiveSecondRuleTimeless(a)?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5):a}return new Date},_onShowAvailabilityTab:function(){this._availabilityShowing?scheduler.setCurrentView(this._getActivityStartDate(),"timeline"):(this._resetAttendeesList(),this._loadAttendeesData())},_accountChanged:function(a){if(!this._isBinding){var b=a?a.$key:"",c=a?a.$descriptor:"",d=this._activityData,e=this._isNullOrWhitespace(d.ContactId);d.AccountId=b,d.AccountName=c,d.PhoneNumber="",d.LeadId=null,d.LeadName="",this._isBinding=!0,this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._updateLookupSeedValues(b),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),e&&(d.ContactId="",d.ContactName="",this.lup_Contact.set("selectedObject",null),this._setContactToCurrentAccountPrimary()),this._isBinding=!1}},_contactChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.ContactId=null,b.ContactName="",void(b.PhoneNumber="");b.ContactId=a.$key,b.ContactName=a.$descriptor,b.PhoneNumber=Sage.Utility.getValue(a,"WorkPhone"),b.LeadId=null,b.LeadName="";var c=this._isNullOrWhitespace(b.AccountName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}a&&a.$key&&!a.attendeeTab&&("insert"!=this.attendeesTab._grid.mode&&this._isBinding?this.attendeesTab._gridStarted?this.attendeesTab._attendeeExists(a.$key)||this.attendeesTab._addContactAttendee(a):this.attendeesTab.setInitialPrimaryContact(a):this.attendeesTab._addContactAttendee(a))},_opportunityChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.OpportunityId=null,void(b.OpportunityName="");if(b.OpportunityId=a.$key,b.OpportunityName=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId=null,b.LeadName="",this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1,d&&(this.lup_Contact.set("selectedObject",null),this._setContactBasedOnOpportunity())}}},_ticketChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.TicketId=null,void(b.TicketNumber="");if(b.TicketId=a.$key,b.TicketNumber=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId=null,b.LeadName="",this._updateLookupSeedValues(),b.ContactId=Sage.Utility.getValue(a,"Contact.$key"),b.ContactName=Sage.Utility.getValue(a,"Contact.NameLF"),b.PhoneNumber=Sage.Utility.getValue(a,"Contact.WorkPhone"),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),d&&this.lup_Contact.set("selectedObject",{$key:a.Contact.$key,$descriptor:a.Contact.NameLF}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}}},_leadChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.LeadId=null,b.LeadName="",b.PhoneNumber="",void this.tb_LeadCompanyName.set("value","");b.ContactId=null,b.ContactName="",b.AccountId=null,b.TicketId=null,b.TicketNumber="",b.OpportunityId=null,b.OpportunityName="",this._updateLookupSeedValues(),this._isBinding=!0,this.lup_Contact.set("selectedObject",null),this.lup_Account.set("selectedObject",null),this.lup_Opportunity.set("selectedObject",null),this.lup_Ticket.set("selectedObject",null),this._isBinding=!1,b.LeadId=a.$key,b.LeadName=a.LeadFullName,b.AccountName=a.Company,b.PhoneNumber=a.WorkPhone,this.tb_LeadCompanyName.set("value",a.Company),this._isBinding||a&&a.$key&&!a.attendeeTab&&this.attendeesTab._addLeadAttendee(a)}},_leaderChanged:function(a){if(!this._isBinding){var b=this._activityData.Leader.$key||this._activityData.UserId;if(a){var c=a.$key.substr(0,12);this._activityData.Leader={$key:c,$descriptor:a.$descriptor||a.Name},this._activityData.LeaderChanged=!0}this._updateUsersListWithNewLeader(b,this._activityData.Leader)}},_setContactBasedOnOpportunity:function(){if(this._isNullOrWhitespace(this._activityData.OpportunityId))return void this._rebindToCurrentContact();var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("opportunities");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._activityData.OpportunityId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._setContactToCurrentAccountPrimary();for(var c,d=!1,e=!1,f=b[0],g=0;g<b.length;g++)b[g]&&(b.IsPrimary&&(d&&!b[g].Contact.IsPrimary||(d=b[g])),!e&&b[g].Contact.IsPrimary&&(e=b[g]));(c=d||e||f)&&(this._activityData.ContactId=Sage.Utility.getValue(c,"Contact.$key"),this._activityData.ContactName=Sage.Utility.getValue(c,"Contact.NameLF"),this._activityData.PhoneNumber=Sage.Utility.getValue(c,"Contact.WorkPhone"),this._rebindToCurrentContact())},failure:function(){this._rebindToCurrentContact()},scope:this})},_setContactToCurrentAccountPrimary:function(){if(this._isNullOrWhitespace(this._activityData.AccountId))return void this._rebindToCurrentContact();var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("accounts");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._activityData.AccountId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","NameLF,IsPrimary,WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.setQueryArg("count","1"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._rebindToCurrentContact();var c=b[0];this._activityData.ContactId=Sage.Utility.getValue(c,"$key"),this._activityData.ContactName=Sage.Utility.getValue(c,"NameLF"),this._activityData.PhoneNumber=Sage.Utility.getValue(c,"WorkPhone"),this._isBinding=!0,this.lup_Contact.set("selectedObject",c),this._isBinding=!1},failure:function(){this._rebindToCurrentContact()},scope:this})},_rebindToCurrentContact:function(){this._isBinding=!0,this.lup_Contact.set("selectedObject",{$key:this._activityData.ContactId,$descriptor:this._activityData.ContactName}),this._isBinding=!1},_updateLookupSeedValues:function(a){var b=a||this._activityData.AccountId;this.contactLookupConfig.seedValue=b,this.opportunityLookupConfig.seedValue=b,this.ticketLookupConfig.seedValue=b},_setUI:function(){this._formatHeader(),this._setDisabledByTimlessValue(),this._setHasAlarmUI(),this._isNullOrWhitespace(this._activityData.LeadId)?this.rdo_Contact.set("checked",!0):this.rdo_Lead.set("checked",!0),this._setContactLeadVisibility(),this._setScheduledByLabel()},_checkSecurityAccess:function(a,b,c,d){this.accessData=!1,this._accessStore||(this._accessStore=new SingleEntrySDataStore({include:["$descriptors"],resourceKind:"activityresourceviews",service:sDataServiceRegistry.getSDataService("dynamic")})),this._accessStore.fetch({predicate:"'"+b+"-"+a+"'",onComplete:function(a){c.call(d,a)},onError:function(){c.call(d,null)},scope:this})},_setUIForActivityType:function(a){if(this.pk_Regarding.set("pickListName",activityUtility.getActivityPicklistName("Regarding",a)),this.pk_Category.set("pickListName",activityUtility.getActivityPicklistName("Category",a)),this.pl_Result.set("pickListName",activityUtility.getActivityPicklistName("Result",a)),this.btn_Complete.set("disabled",!this._activityData.AllowComplete),"Confirm"!==this.mode){var b=this._activityData.AllowEdit,c=this._activityData.AllowDelete;this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key&&(b=!1,c=!1),this._bulkSetProperty(this,this.noEditDisableList,"disabled",!b),this.ta_Notes.set("readonly",!b),this.activityMemberId&&this._memberSecurityData[this.activityMemberId]&&this._memberSecurityData[this.activityMemberId].AllowEdit||this.activityMemberId===this._currentUserId||this._activityData.UserId===this._currentUserId?this.btn_OK.set("disabled",!1):this.btn_OK.set("disabled",!this._activityData.AllowEdit),this.btn_Delete.set("disabled",!c)}
"Complete"===this.mode&&(this.btn_asScheduled.set("disabled",!this._activityData.AllowComplete),this.btn_Now.set("disabled",!this._activityData.AllowComplete)),this.pk_Category.set("disabled","atPersonal"===a||"Confirm"===this.mode||this.pk_Category.get("disabled")),this._canEdit()&&"atPersonal"!==a&&"atToDo"!==a?domClass.remove(this.lup_Resources.domNode,"display-none"):domClass.add(this.lup_Resources.domNode,"display-none")},_setDisabledByTimlessValue:function(){if(this._activityData){var a=this._activityData.Timeless;this._handleAutoRolloverState(),this.dtp_startDate.set("displayTime",!a);var b=this._activityData.AllowEdit;this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key&&(b=!1),this.sel_Duration.set("disabled",a||"Confirm"===this.mode||!b),this.sel_DurationComplete.set("disabled",a),this.dtp_scheduledDate.set("displayTime",!a)}},_handleAutoRolloverState:function(){this._activityData.Timeless&&!this._activityData.Recurring?this.cb_AutoRollover.set("disabled",!1):(this.cb_AutoRollover.set("disabled",!0),this.cb_AutoRollover.set("checked",!1))},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=a[b[e]];f&&f.set(c,d)}},_timelessChange:function(){if(this._setDisabledByTimlessValue(),"Complete"===this.mode||"CompleteUnscheduled"===this.mode){if(this.cb_TimelessComplete.get("checked")){var a=this.dtp_scheduledDate.get("value");a.setHours(0),a.setMinutes(0),a.setSeconds(5),this.dtp_scheduledDate.set("value",a)}}else{var b,c,d=this.dtp_startDate.get("value");if(utility.setValue(this._activityData,"TimelessChanged",!0),this.cb_Timeless.get("checked"))d.setHours(0),d.setMinutes(0),d.setSeconds(5),this.dtp_startDate.set("value",d),b=this._getAlarmLeadTime(),c=this._getAlarmTime(d,b,!0),this.sel_AlarmDur.set("startTime",d),this.sel_AlarmDur.set("timeValue",c);else{var e=activityUtility.roundDateToNextQuarterHour(new Date),f=e.getMinutes(),g=e.getHours(),h=new Date(d.getFullYear(),d.getMonth(),d.getDate(),g,f);this.dtp_startDate.set("value",h),b=this._getAlarmLeadTime(),c=this._getAlarmTime(h,b,!1),this.sel_AlarmDur.set("startTime",h),this.sel_AlarmDur.set("timeValue",c)}}},_alarmCheckChanged:function(a,b,c,d){this._setHasAlarmUI(d)},_descriptionChanged:function(){this._formatHeader()},_notesChanged:function(a,b,c,d){utility.setValue(this._activityData,"Notes",d?d.substr(0,255):d)},_startDateChanged:function(){var a=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",a),this.sel_AlarmDur.set("startTime",a);var b=this._getAlarmLeadTime(),c=this._getAlarmTime(a,b,this.cb_Timeless.get("checked"));this.sel_AlarmDur.set("timeValue",c);var d=this._currentUserActivityData?this._currentUserActivityData:this._activityData;Sage.Utility.setValue(d,"AlarmTime",Sage.Utility.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue"))),this._availabilityShowing&&(scheduler.setCurrentView(a,"timeline"),this._requestAvailability()),this._recurringEditor.set("startDate",a)},_getAlarmTime:function(a,b,c){var d=dojoDate.add(a,"minute",-1*b);return!0===c&&(d=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=dojoDate.add(d,"minute",-1*b)),d},_getAlarmLeadTime:function(){var a="15";if(this._options[this.activityType]){a=this._options[this.activityType].alarmLead}return a="none"===a.toLowerCase()?15:parseInt(a,10)},_setHasAlarmUI:function(a){void 0===a&&(a=Sage.Utility.getValue(this._currentUserActivityData||this._activityData,"Alarm")),this.sel_AlarmDur.set("disabled",!a||"Confirm"===this.mode)},_setContactLeadVisibility:function(){var a=this.rdo_Contact.get("checked");domClass.remove(a?this.contactContainer.domNode:this.leadContainer.domNode,"display-none"),domClass.add(a?this.leadContainer.domNode:this.contactContainer.domNode,"display-none")},_formatHeader:function(){var a="";activityUtility.getActivityTypeName(this._activityData.Type||"atAppointment");switch(this.mode){case"New":a="atAppointment"===this._activityData.Type?this.scheduleMeeting:"atPhoneCall"===this._activityData.Type?this.schedulePhonecall:this.scheduleTodo;break;case"Complete":case"CompleteUnscheduled":a="atAppointment"===this._activityData.Type?this.completeMeeting:"atPhoneCall"===this._activityData.Type?this.completePhonecall:this.completeTodo;break;case"Update":a="atAppointment"===this._activityData.Type?this.updateMeeting:"atPhoneCall"===this._activityData.Type?this.updatePhoneCall:this.updateToDo}if("Confirm"===this.mode){if(!this._notificationData)return;this._getUserInfoFor(this._notificationData.FromUser.$key,function(b){if(this._notificationData){var c=this._notificationData.Type;switch(c){case"Change":a=this.updatedText;break;case"Confirm":a=this.acceptedText;break;case"Deleted":a=this.deletedText;break;case"Leader":a=this.scheduledText;break;case"Decline":a=this.declinedText}var d="New"===c?this.newConfirmationHeaderFormatText:this.otherConfimationHeaderFormatText;this._setHeader(dString.substitute(d,{activityType:"",actionText:a,user:b.UserName||b.$descriptor}))}})}else this._setHeader(dString.substitute(this.dialogHeaderFormatText,{actionText:a,activityType:"",description:utility.htmlEncode(this._activityData.Description)||""}))},_setHeader:function(a){var b=dString.substitute('<div class="Global_Images icon16x16 ${0}" > </div>&nbsp;<span class="activity-dialog-title" style="max-width: 975px; text-overflow: ellipsis;">${1}</span>',[activityUtility.getActivityImageClass(this._activityData.Type||"atAppointment","small"),a]);this._dialog.titleNode.innerHTML=b},_setScheduledByLabel:function(){var a=utility.Convert.toDateFromString(utility.getValue(this._activityData,"CreateDate"));(!a||a.getFullYear()<1e3)&&(a=new Date);var b,c=this._getActivityStartDate(),d=utility.getValue(this._activityData,"CreateUser").trim(),e="Complete"===this.mode||"CompleteUnscheduled"===this.mode?this.completeScheduledByFormatText:this.scheduledByFormatText;if(d&&this._currentUserId!==d){if("PROCESS"!==d&&"ADMIN"!==d)return void this._getUserInfoFor(d,function(d){b=dString.substitute(e,{user:d.$descriptor,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),startDate:locale.format(c,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}),dojo.html.set(this.lbl_ScheduledBy,b),dojo.html.set(this.lbl_ScheduledByComp,b)});d="Administrator"}else d=utility.getClientContextByKey("userPrettyName");b=dString.substitute(e,{user:d,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),startDate:locale.format(c,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}),dojo.html.set(this.lbl_ScheduledBy,b),dojo.html.set(this.lbl_ScheduledByComp,b)},_getUserInfoFor:function(a,b){if(a){var c=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",!1,!0,!0));c.setResourceKind("userInfo"),c.setResourceSelector("'"+a+"'"),c.setQueryArg("precedence","0"),c.read({success:b,scope:this,failure:function(){}})}},_showRecurringTab:function(){this._recurringEditor.onTabShow(),this._recurringEditor._setReadOnly(!this._canEdit())},_ensureAttachmentList:function(){on(this.cp_Attachments,"show",dojo.hitch(this,function(){this._createAttachmentList()}))},_completeClick:function(){this._completeAfterSaving=!0,this._saveAndClose()},_deleteClick:function(){this._activityData&&this._activityStore&&sageDialogs.raiseQueryDialogExt({title:"",query:this.areYouSureText,callbackFn:function(a){a&&this._activityStore.deleteEntity(this._activityData,this._successfulActivityDelete,this._failedActivityDelete,this)},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this})},_asScheduledClick:function(){this._updateAttendeesAndComplete(dojoDate.add(this.dtp_scheduledDate.get("value"),"minute",this._activityData.Duration))},_nowClick:function(){this._updateAttendeesAndComplete(this.dtp_completedDate.get("value"))},_updateAttendeesAndComplete:function(a){if("CompleteUnscheduled"===this.mode){var b=this.sel_AlarmDur.get("timeValue");5===b.getSeconds()&&(b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),0)),this._createActivityForNewOrCompleteUnscheduled(b,dojoLang.partial(this._preCompleteActivity,a),this._failedActivitySave,this)}else"Complete"===this.mode?this._preCompleteActivity(a,null):this._completeActivity(a)},_preCompleteActivity:function(a,b){var c=this;b&&(this._activityData=b),this._saveUserActivitiesAndResources(!0),this.attendeesTab._activitySaved(this._activityData).then(function(b){c._completeActivity(a)})},_completeActivity:function(a){if(!this._isProcessing){this._isProcessing=!0;var b={$name:"Complete",request:{entity:this._activityData,userId:this._currentUserId,result:this.pl_Result.get("value"),resultCode:this.pl_Result.get("code"),completeDate:utility.Convert.toIsoStringFromDate(a)}};new Sage.SData.Client.SDataServiceOperationRequest(sDataServiceRegistry.getSDataService("system")).setResourceKind("activities").setOperationName("Complete").execute(b,{success:this._successfulComplete,failure:this._failedComplete,scope:this})}},_okClick:function(){var a=focusUtil.curNode,b=aspect.after(a,"blur",dojoLang.hitch(this,function(){this._saveAndClose(),b.remove()}));a&&a.blur()},_createActivityForNewOrCompleteUnscheduled:function(a,b,c,d){if("New"===this.mode||"CompleteUnscheduled"===this.mode){if(this._attachmentList){this._attachmentList.getNewAttachments().length>0&&(this._activityData.Attachment=!0)}this._currentUserActivitySaved=!0,utility.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked")),utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(a)),""===this._activityData.AccountId&&(this._activityData.AccountId=null),""===this._activityData.ContactId&&(this._activityData.ContactId=null),this._activityStore.saveNewEntity(this._activityData,b,c,d)}},_saveAndClose:function(){if(!this._isProcessing){this._isProcessing=!0;var a=this.sel_AlarmDur.get("timeValue");5===a.getSeconds()&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0)),this._createActivityForNewOrCompleteUnscheduled(a,this._successfulActivitySave,this._failedActivitySave,this),"New"!==this.mode&&"CompleteUnscheduled"!==this.mode&&(this._activityData.Attachment=this._activityData.AttachmentCount>0,this._currentUserActivityData?"rstOccurrence"===utility.getValue(this._activityData,"RecurrenceState")?(utility.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked")),utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(a)),this._currentUserActivitySaved=!0,this._activityData.AllowEdit&&this._saveActivity()):this._tempUAData&&this._tempUAData.Alarm===this._currentUserActivityData.Alarm&&this._tempUAData.AlarmTime.getTime()===a.getTime()?(this._currentUserActivitySaved=!0,this._activityData.AllowEdit&&this._saveActivity()):(delete this._currentUserActivityData.Activity,this._currentUserActivityData.AlarmTime=utility.Convert.toIsoStringFromDate(a),this._saveUserActivity()):(utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(a)),this._currentUserActivitySaved=!0,this._activityData.AllowEdit&&this._saveActivity()),this._ensureActivitySave())}},_saveUserActivity:function(){this._currentUserActivityStore&&this._currentUserActivityStore.save({scope:this,success:this._successfulCurrentUserActivitySave,failure:this._failedUserActivitySave})},_saveActivity:function(){this._activityStore&&this._activityStore.save({scope:this,success:this._successfulActivitySave,failure:this._failedActivitySave})},_ensureActivitySave:function(){this._activityData.AllowEdit||(this._activitySaved=!0,this._userActivitiesSaved=!0,this._resourcesSaved=!0,this._resourcesRemoved=!0,this._attachmentsSaved=!0,this._hideIfComplete())},_successfulActivitySave:function(a){this.attendeesTab._activitySaved(a).then(dojo.hitch(this,function(b){this._successfulActivityAttendeeSave(a)}))},_successfulActivityAttendeeSave:function(a){this._activityData.LeaderChanged&&(a.LeaderChanged=!0),this._activityData.TimelessChanged&&(a.TimelessChanged=!0),this._activityData=a,this._saveUserActivitiesAndResources(),this._activitySaved=!0,this._ensureActivitySave(),this._hideIfComplete()},_saveUserActivitiesAndResources:function(a){var b=!1,c=!a;Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this.activityId||(b=!0),this.activityId=this._activityData.$key;for(var d=!1,e=!1,f=this._activityData.Leader.$key,g=0;g<this._newAttendeesData.length;g++)d=d||"User"===this._newAttendeesData[g].Type&&this._newAttendeesData[g].$key!==f,e=e||"Resource"===this._newAttendeesData[g].Type;if(d){var h=new Sage.SData.Client.SDataTemplateResourceRequest(sDataServiceRegistry.getSDataService("system"));h.setResourceKind("userActivities"),h.read({async:!1,success:dojoLang.partial(this._onGetUserActivityTemplate),failure:this._failedUserActivitySave,scope:this})}else this._userActivitiesSaved=!0;if(e){var i=new Sage.SData.Client.SDataTemplateResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));i.setResourceKind("resourceSchedules"),i.read({async:!1,success:this._onGetResourceScheduleTemplate,failure:this._failedUserActivitySave,scope:this})}else this._resourcesSaved=!0;if(this._attachmentsSaved=!0,this._attachmentList){var j=this._attachmentList.getNewAttachments();j.length>0&&"New"===this.mode&&(this._saveAttachments(j),this._attachmentsSaved=!1)}this._attendeesForRemoval.length>0?this._removeResources():this._resourcesRemoved=!0,b&&c&&dojo.publish("/entity/activity/create",[this._activityData,this]),this._completeAfterSaving||b||dojo.publish("/entity/activity/change",[this._activityData,this])},_saveAttachments:function(a,b){this._attachmentRequests=a.length;for(var c=0;c<a.length;c++){var d=a[c],e=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));e.setResourceKind("attachments"),e.setResourceSelector("'"+d.$key+"'"),b?d.historyId=b:d.activityId=this.activityId;for(var f in this._activityData)if("Id"===f.substring(f.length-2)&&"UserId"!==f){var g=f.substring(0,1).toLowerCase()+f.substring(1);d[g]=this._activityData[f]}e.update(d,{ignoreETag:!0,success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this})}},_removeAttachments:function(){if(this._attachmentList)for(var a=this._attachmentList.getNewAttachments(),b=0;b<a.length;b++){var c=a[b],d=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));d.setResourceKind("attachments"),d.setResourceSelector("'"+c.$key+"'"),d.delete(c,{success:function(){},failure:function(){},scope:this})}},getRelationshipsForAttachments:function(){var a={};for(var b in this._activityData)if("Id"===b.substring(b.length-2)&&"UserId"!==b){var c=b.substring(0,1).toLowerCase()+b.substring(1);a[c]=this._activityData[b]}return"New"!==this.mode||fileUtility.supportsHTML5File||slx.desktop||(this._tempIdForAttachments=this._makeTempID(),a.activityId=this._tempIdForAttachments),a},doCarryOverAttachments:function(a){attachmentUtility.getAttachmentTemplate(function(b){this._getHistoryAttachments(a,b)},this)},_createAttachmentList:function(){var a=!1;this._attachmentList||(a=!0,this._attachmentList=new AttachmentList({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"activityId"}),this._attachmentList.startup(dojo.hitch(this,function(){this.cp_Attachments.resize()}))),this._attachmentList.setToReadOnly(!this._canEdit()),(a||"New"!=this.mode)&&window.setTimeout(this._attachmentList.resetEntityContext(),100)},_getHistoryAttachments:function(a,b){var c=new Sage.SData.Client.SDataResourceCollectionRequest(sDataServiceRegistry.getSDataService("system"));c.setResourceKind("attachments"),c.setQueryArg("where","historyId eq '"+a+"'"),c.read({success:function(a){var c=a.$resources,d={activityId:this._makeTempID(),historyId:null},e=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));if(e.setResourceKind("attachments"),c&&c.length){for(var f=c.length,g=0;g<f;g++){var h=dojoLang.mixin(c[g],d),i=dojoLang.mixin(b,h);delete i.createDate,delete i.modifyDate,delete i.createUser,delete i.modifyUser,delete i.$key,delete i.$etag,i.fileName=i.physicalFileName,i.attachDate=utility.Convert.toIsoStringFromDate(new Date),e.create(i,{success:function(a){dojo.publish("/entity/attachment/create",[a])},failure:function(){},scope:this})}this._createAttachmentList()}},failure:function(){},scope:this})},_getHistoryAttendees:function(a){var b=new Sage.SData.Client.SDataResourceCollectionRequest(sDataServiceRegistry.getSDataService("dynamic"));b.setResourceKind("historyAttendees"),b.setQueryArg("where","HistoryId eq '"+a+"'"),b.read({success:function(a){for(var b=a.$resources,c=[],d=0;d<b.length;d++)if("User"!=b[d].EntityType){var e={$key:b[d].EntityId,$descriptor:b[d].Name,general:!1},f=dojoLang.mixin(b[d],e);c.push(f)}this.attendeesTab._addAttendeesToStore(c)},failure:function(){},scope:this})},_makeTempID:function(){if(!this._tempIdForAttachments){var a=this._currentUserId,b=utility.Convert.toIsoStringFromDate(this.dtp_startDate.get("value"));b=b.replace(/[T:-]/g,"").substr(6,6),this._tempIdForAttachments="NE"+a.substr(a.length-4,4)+b}return this._tempIdForAttachments},_attachmentRequests:0,_successfulAttachmentSave:function(a){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_failedAttachmentSave:function(){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_successfulCurrentUserActivitySave:function(a){this._currentUserActivitySaved=!0,this._activityData.AllowEdit?this._saveActivity():dojo.publish("/entity/userActivity/change",[a,this]),this._hideIfComplete()},_successfulActivityDelete:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),dojo.publish("/entity/activity/delete",[this._activityData.$key,this]),this._activityData.Timeless&&dojo.publish("/entity/activity/timeless/delete",[this._activityData.$key,this]),this.hide()},_successfulComplete:function(a){if("CompleteUnscheduled"===this.mode){var b=this;this.attendeesTab._historySaved(a).then(function(c){b._successfulAttendeesComplete(a)})}else this._successfulAttendeesComplete(a)},_successfulAttendeesComplete:function(a){Sage.Services.getService("ClientEntityContext").clearTemporaryContext();var b=a;"Complete"!==this.mode&&"CompleteUnscheduled"!==this.mode||(a.Response&&(b=a.Response),dojo.publish("/entity/activity/delete",[this._activityData.$key,this]),this._activityData.Timeless&&dojo.publish("/entity/activity/timeless/delete",[this._activityData.$key,this])),dojo.publish("/entity/history/create",[b,this]);var c=null;if("Complete"===this.mode||"CompleteUnscheduled"===this.mode?a.Response&&(c=a.Response.HistoryId):c=b.$key,this._attachmentList){var d=this._attachmentList.getNewAttachments();d.length>0&&(this._activityData.Attachment=!0,this._saveAttachments(d,c))}var e=this.sel_Followup.get("value");switch(e){case this.noneText:return void this.hide();case activityUtility.getActivityTypeName("atPhoneCall"):e="atPhoneCall";break;case activityUtility.getActivityTypeName("atAppointment"):e="atAppointment";break;case activityUtility.getActivityTypeName("atToDo"):e="atToDo"}if(void 0===c||null===c)return this.hide(),void sageDialogs.showError(this.scheduleFollowUpErrorText);var f=this._getFollowUpActivityData(c);this.hide(),window.setTimeout(function(){var a=Sage.Services.getService("ActivityService");a&&a.scheduleActivity({type:e,preConfigured:f})},250)},_getFollowUpActivityData:function(a){var b=this._activityData,c={AccountId:b.AccountId,AccountName:b.AccountName,ContactId:b.ContactId,ContactName:b.ContactName,Description:b.Description,LeadId:b.LeadId,LeadName:b.LeadName,OpportunityId:b.OpportunityId,OpportunityName:b.OpportunityName,TicketId:b.TicketId,TicketNumber:b.TicketNumber};return this.ck_coNotes.get("checked")&&(c.LongNotes=b.LongNotes,c.Notes=b.Notes),this.ck_coAttachments.get("checked")&&(c.carryOverAttachmentsFrom=a),c.carryOverParticipantsFrom=a,c},_failedActivitySave:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotSaveErrorText);sageDialogs.showError(b),this._completeAfterSaving=!1},_failedActivityDelete:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotDeleteErrorText);sageDialogs.showError(b),this._completeAfterSaving=!1},_failedUserActivitySave:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotSaveErrorText);sageDialogs.showError(b)},_failedResourceSave:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotSaveErrorText);sageDialogs.showError(b)},_failedComplete:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotCompleteErrorText);sageDialogs.showError(b)},_onGetUserActivityTemplate:function(a){this._userActivitiesRequestCount=0;var b=this.lup_Leader.get("selectedObject");b=b.$key.substr(0,12);for(var c=this._activityData,d=utility.Convert.toDateFromString(c.AlarmTime),e=0;e<this._newAttendeesData.length;e++){var f=this._newAttendeesData[e];if("User"===f.Type&&f.$key!==b){var g=dojo.mixin({},a),h={User:{$key:f.$key},ActivityId:this.activityId,Activity:{$key:this.activityId},Alarm:c.Alarm,AlarmTime:utility.Convert.toIsoStringFromDate(d),Status:"asUnconfirmed"};g=dojoLang.mixin(g,h);var i=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));i.setResourceKind("userActivities"),this._userActivitiesRequestCount++,i.create(g,{async:!1,success:function(a){this._userActivitiesRequestCount--,dojo.publish("/entity/userActivity/create",[a,this]),this._userActivitiesRequestCount<1&&(this._userActivitiesSaved=!0,this._hideIfComplete())},failure:this._failedUserActivitySave,scope:this})}}this._userActivitiesRequestCount<1&&(this._userActivitiesSaved=!0,c.Timeless&&dojo.publish("/entity/userActivities/timeless/saved",[c,this]),this._hideIfComplete())},_onGetResourceScheduleTemplate:function(a){this._resourceRequestCount=0;for(var b=0;b<this._newAttendeesData.length;b++){var c=this._newAttendeesData[b];if("Resource"===c.Type){var d=dojoLang.mixin({},a),e=this._activityData,f=Sage.Utility.Convert.toDateFromString(e.StartDate),g=dojoDate.add(f,"minute",e.Duration),h={ResourceId:c.$key,ActivityId:this.activityId,Description:c.Name,StartDate:e.StartDate,EndDate:Sage.Utility.Convert.toIsoStringFromDate(g),UserId:e.Leader.$key};d=dojoLang.mixin(d,h);var i=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));i.setResourceKind("resourceSchedules"),this._resourceRequestCount++,i.create(d,{success:function(a){--this._resourceRequestCount<1&&(this._resourcesSaved=!0,this._hideIfComplete())},failure:this._failedResourceSave,scope:this})}}},_removeResources:function(){this._resourceDeleteRequestCount=0;for(var a=0;a<this._attendeesForRemoval.length;a++){var b,c,d,e=this._attendeesForRemoval[a];"user"===e.type?(b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")),b.setResourceKind("userActivities"),c=dString.substitute("'ActivityId=${0};UserId=${1}'",[this.activityId,e.id]),d="/entity/userActivity/delete"):(b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")),b.setResourceKind("resourceSchedules"),c="'"+e.rsid+"'",d="/entity/resourceSchedule/delete"),b.setResourceSelector(c),this._resourceDeleteRequestCount++;var f={notify:function(){dojo.publish(this.evt,[this.predicate]),--this.editor._resourceDeleteRequestCount<1&&(this.editor._resourcesRemoved=!0,this.editor._hideIfComplete())},evt:d,predicate:c,editor:this},g={success:f.notify,aborted:function(){},failure:this._failedResourceSave,scope:f};b.delete({$key:c},g)}},_cancelClick:function(){"New"===this.mode&&this._removeAttachments(),this.hide()},_hideIfComplete:function(){if(this._activitySaved&&this._userActivitiesSaved&&this._currentUserActivitySaved&&this._resourcesSaved&&this._resourcesRemoved&&this._attachmentsSaved){var a=this.activityId;if(this._completeAfterSaving){this._completeAfterSaving=!1;var b=Sage.Services.getService("ActivityService");b&&b.completeActivity(a)}else this.hide()}},_acceptConfClick:function(){Sage.Services.getService("ActivityService").acceptConfirmation({notification:this._notificationData,success:this._successfulAcceptConfirmation,failure:this._failedAcceptDecline,scope:this})},_declineClick:function(){Sage.Services.getService("ActivityService").declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this})},_deleteConfClick:function(){this._notificationData&&this._notificationStore&&this._notificationStore.deleteEntity(this._notificationData,this._successfulNotificationDelete,this._failedActivityDelete,this)},_getActivityDataFromNotificationData:function(){var a=null,b=null;return this._notificationData&&(this._notificationData.Activity&&(a=this._notificationData.Activity.$key),this._notificationData.ToUser&&(b=this._notificationData.ToUser.$key)),{activityId:a,userId:b}},_successfulAcceptConfirmation:function(){dojo.publish("/entity/activity/confirm",[this._getActivityDataFromNotificationData(),null]),this._successfulNotificationDelete()},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]),this._successfulNotificationDelete()},_successfulNotificationDelete:function(){dojo.publish("/entity/userNotification/delete",[this._notificationData.$key,this]),this.hide()},_ensureLookupsCreated:function(){this.lup_Account||(this.createAccountLookup(),this.createContactLookup(),this.createOpportunityLookup(),this.createTicketLookup(),this.createLeadLookup(),this.createLeaderlookup(),this.createResourcesLookup());var a=this;dojo.byId("lu_lead_btnClearResult")&&dojo.connect(dojo.byId("lu_lead_btnClearResult"),"onclick",null,function(){a.attendeesTab.unCheckPrimary()},!0),dojo.byId("lu_contact_btnClearResult")&&dojo.connect(dojo.byId("lu_contact_btnClearResult"),"onclick",null,function(){a.attendeesTab.unCheckPrimary()},!0)},createAccountLookup:function(){this.createAccountLookupConfig(),this.lup_Account=new Lookup({id:"lu_account",allowClearingResult:!0,showEntityInfoToolTip:!0,readonly:!0,config:this.accountLookupConfig}),this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged")),dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only")},createAccountLookupConfig:function(){return this.accountLookupConfig={id:"_activityAcc",structure:[{label:this.accountText,field:"AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.mainPhoneText,field:"MainPhone"},{label:this.typeText,field:"Type"},{label:this.subTypeText,field:"SubType"},{label:this.statusText,field:"Status"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:!0,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!1,initializeLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.accountLookupConfig},createContactLookupConfig:function(){return this.contactLookupConfig={id:"_activityContact",structure:[{label:this.nameText,field:"NameLF"},{label:this.accountText,field:"Account.AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.workphoneText,field:"WorkPhone"},{label:this.emailText,field:"Email"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"contacts",select:["Address/Timezone"],sort:[{attribute:"NameLF"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupContactText,dialogButtonText:this.okText},this.contactLookupConfig},createContactLookup:function(){this.createContactLookupConfig(),this.lup_Contact=new Lookup({id:"lu_contact",allowClearingResult:!0,config:this.contactLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged")),dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only")},createOpportunityLookupConfig:function(){return this.opportunityLookupConfig={id:"_activityOpp",structure:[{label:this.descriptionText,field:"Description"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.accountText,field:"Account.AccountName"},{label:this.stageText,field:"Stage"},{label:this.statusText,field:"Status"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText},this.opportunityLookupConfig},createOpportunityLookup:function(){this.createOpportunityLookupConfig(),this.lup_Opportunity=new Lookup({id:"lu_opportunity",allowClearingResult:!0,config:this.opportunityLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged")),dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only")},createTicketLookupConfig:function(){return this.ticketLookupConfig={id:"_activityTicket",structure:[{label:this.ticketNumberText,field:"TicketNumber"},{label:this.accountText,field:"Account.AccountName"},{label:this.nameText,field:"Contact.NameLF"},{label:this.phoneText,field:"Contact.WorkPhone"},{label:this.statusText,field:"StatusCode",pickListName:"Ticket Status",propertyType:"SalesLogix.PickList",type:"Sage.UI.Columns.PickList"},{label:this.urgencyText,field:"Urgency.Description"},{label:this.areaText,field:"Area"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText},this.ticketLookupConfig},createTicketLookup:function(){this.createTicketLookupConfig(),this.lup_Ticket=new Lookup({id:"lu_ticket",allowClearingResult:!0,config:this.ticketLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged")),dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only")},createLeadLookupConfig:function(){return this.leadLookupConfig={id:"_activityLead",structure:[{label:this.leadFullNameText,field:"LeadFullName"},{label:this.companyText,field:"Company"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.postalText,field:"Address.PostalCode"},{label:this.statusText,field:"Status"},{label:this.workphoneText,field:"WorkPhone"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"leads",select:["Address/Timezone"],sort:[{attribute:"LeadFullName"}]},isModal:!0,initialLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText},this.leadLookupConfig},createLeadLookup:function(){
this.createLeadLookupConfig(),this.lup_Lead=new Lookup({id:"lu_lead",allowClearingResult:!0,config:this.leadLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged")),dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only")},createLeaderLookupConfig:function(){return this.leaderLookupConfig={id:"_activityLeader",structure:[{label:this.nameText,field:"Name",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"AllowAdd AND (AccessId eq '"+utility.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'"},contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText},this.leaderLookupConfig},createLeaderlookup:function(){this.createLeaderLookupConfig(),this.lup_Leader=new Lookup({id:"lu_leader",readonly:!0,config:this.leaderLookupConfig}),this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged")),dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only")},createResourcesLookupConfig:function(){return this.resourcesLookupConfig={id:"_activityResources",btnToolTip:this.lookupResourcesText,structure:[{label:this.nameText,field:"Name"},{label:this.typeText,field:"Type",width:"100px"},{label:this.locationText,field:"IsLocation",propertyType:"System.Boolean",format:function(a,b){var c=utility.getValue(b,"Type");return c?"User"===c?"":null===b.IsLocation||"false"===b.IsLocation?this.noText:this.yesText:this.defaultValue}},{label:this.descriptionText,field:"Subtype",width:"200px"}],gridOptions:{columnResizing:!0},displayMode:5,storeOptions:{resourceKind:"activityresourceviews",select:["AccessId","ResourceId","AllowAdd","AllowEdit","AllowDelete"],sort:[{attribute:"Type"},{attribute:"Name"}]},isModal:!0,initialLookup:!1,preFilters:[],query:{conditions:"AllowAdd AND (AccessId eq '"+this._currentUserId+"' OR AccessId eq 'EVERYONE')"},dialogTitle:this.lookupResourcesText,dialogButtonText:this.addResourceText,doSelected:function(a){var b=dijit.byId("activityEditor");b&&b.addMembers(a),this.lookupDialog.hide()}},this.resourcesLookupConfig},createResourcesLookup:function(){this.createResourcesLookupConfig(),this.lup_Resources=new Sage.UI.SDataLookup(this.resourcesLookupConfig),this.lup_Resources.cancelText=this.lup_Resources.closeText,dojo.place(this.lup_Resources.domNode,this.container_ResourcesLup.domNode,"only")},_schedulerInitialized:!1,_resetAttendeesList:function(){if(!this._schedulerInitialized){scheduler.showLightbox=function(){return!1},scheduler.config.timelineStep=30,scheduler.config.timelineStart=2*this._options.calendar.dayStartTime,scheduler.config.timelineSize=2*(this._options.calendar.dayEndTime-this._options.calendar.dayStartTime),this._setTimePatternForDHTMLXLibrary(),scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:this._DHTMLXLibraryTimePattern,x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:[],y_property:"section_id",render:"bar",section_autoheight:!1,dx:100,dy:30}),scheduler.init("scheduler_here",new Date,"timeline"),scheduler.attachEvent("onBeforeDrag",function(){return!1}),scheduler.config.dblclick_create=!1,scheduler.templates.day_date=function(a){return activityUtility.formatLongDate(a)};var a=this;dojo.query(".dhx_cal_prev_timeline_button").connect("onclick",function(){0==!scheduler.config.timelineStart&&a.reRenderTimeline("left")}),dojo.query(".dhx_cal_next_timeline_button").connect("onclick",function(){scheduler.config.timelineStart+scheduler.config.timelineSize<48&&a.reRenderTimeline("right")}),this._schedulerInitialized=!0}scheduler.clearAll()},_loadAttendeesData:function(){if(this._availabilityShowing=!0,"New"===this.mode||"CompleteUnscheduled"===this.mode){var a=this.lup_Leader.get("selectedObject"),b=a.$descriptor,c=a.$key.substr(0,12);return void this.addMembers([{$descriptor:b,$key:c,IsLocation:!1,Name:b,Subtype:"",Type:"User"}])}var d=this.activityId;if(!d&&this._activityData&&(d=this._activityData.$key),d){var e=d.substr(0,12),f=new Sage.SData.Client.SDataNamedQueryRequest(Sage.Data.SDataServiceRegistry.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetMembers").setQueryArg("_activityId",e);f.uri.setCollectionPredicate("'ActivityFreeBusy'"),f.read({success:dojo.hitch(this,this._onReceiveAttendees),failure:dojo.hitch(this,this._availabilityFailed)})}},_attendeesTemplate:new Simplate(['<table class="attendee-item">',"<tr>",'<td class="attendee-name">{%= $.name %}</td>',"{% if (($.isNotLeader) && ($.allowDelete)) { %}",'<td class="remove-attendee" id="{%= $.id %}"><img src="images/icons/Delete_16x16.png" alt="{%= $.removeText %}" title="{%= $.removeText %}" onclick="{%= $.deleteCode %}" /></td>',"{% } %}",'<td class="attendee-status"><img src="{%= $.img %}" alt="{%= $.imgToolTipText %}" title="{%= $.imgToolTipText %}"/></td>',"</tr>","</table>"]),_onReceiveAttendees:function(a){if(this._attendeesData=a.$resources,this._originalLeaderId&&this._originalLeaderId!==this._activityData.Leader.$key)for(var b=this._attendeesData.length,c=0;c<b;c++)if(this._attendeesData[c].id===this._originalLeaderId){this._attendeesData.splice(c,1);break}this._rebuildTimeLine(),this._requestAvailability()},_rebuildTimeLine:function(a){var b;for(b=0;b<this._deleteAttendeeConnects.length;b++)dojo.disconnect(this._deleteAttendeeConnects[b]);this._deleteAttendeeConnects=[];var c=[],d={},e=[],f=[],g=this._activityData.Leader.$key.trim(),h="Sage.Utility.Activity.removeMember('${0}','${1}');";for(b=0;b<this._attendeesData.length;b++){var i=this._blankGif,j="",k=this._attendeesData[b].status||0;1===k||"asAccepted"===k?(i="images/icons/Accept.png",j=this.acceptedText):2!==k&&"asDeclned"!==k||(i="images/icons/Decline.png",j=this.declinedText);var l={key:this._attendeesData[b].id,label:this._attendeesTemplate.apply({name:this._attendeesData[b].name,img:i,imgToolTipText:j,id:this._attendeesData[b].id,isNotLeader:this._attendeesData[b].id.trim()!==g,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(h,[this.id,this._attendeesData[b].id])})};this._attendeesData[b].id.trim()===g?d=l:"user"===this._attendeesData[b].type?e.push(l):f.push(l)}for(c=d.key?[d].concat(e.concat(f)):e.concat(f),b=0;b<this._newAttendeesData.length;b++)c.push({key:this._newAttendeesData[b].$key,label:this._attendeesTemplate.apply({name:this._newAttendeesData[b].Name,img:this._blankGif,id:this._newAttendeesData[b].$key,isNotLeader:this._newAttendeesData[b].$key.trim()!==g,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(h,[this.id,this._newAttendeesData[b].$key])})});if("left"==a)scheduler.config.timelineStart-scheduler.config.timelineSize>0?scheduler.config.timelineStart=scheduler.config.timelineStart-scheduler.config.timelineSize:scheduler.config.timelineStart=0;else if("right"==a){var m=scheduler.config.timelineSize+scheduler.config.timelineStart;m>48-scheduler.config.timelineSize?scheduler.config.timelineStart=48-scheduler.config.timelineSize:scheduler.config.timelineStart=m}this._setTimePatternForDHTMLXLibrary(),scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:this._DHTMLXLibraryTimePattern,x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:c,y_property:"section_id",render:"bar",section_autoheight:!1,dx:100,dy:30}),scheduler.setCurrentView(this._getActivityStartDate(),"timeline")},_updateLocation:function(a,b){var c=this._activityData.Location;if(c&&""!==c){for(var d=c.split("; "),e=[],f=!1,g=0;g<d.length;g++){if(d[g]===a){if(!b)continue;f=!0}e.push(d[g])}!f&&b&&e.push(a),c=e.join("; ")}else b&&(c=a);Sage.Utility.setValue(this._activityData,"Location",c),this.tb_Location.set("value",c)},_removeMember:function(a){var b,c=a.memberId,d=[];for(b=0;b<this._attendeesData.length;b++)this._attendeesData[b].id===c?("resource"===this._attendeesData[b].type&&this._attendeesData[b].IsLocation&&this._updateLocation(this._attendeesData[b].name,!1),this._attendeesForRemoval.push(this._attendeesData[b])):d.push(this._attendeesData[b]);for(this._attendeesData=d,d=[],b=0;b<this._newAttendeesData.length;b++)this._newAttendeesData[b].$key===c?"Resource"===this._newAttendeesData[b].Type&&!0===this._newAttendeesData[b].IsLocation&&this._updateLocation(this._newAttendeesData[b].Name,!1):d.push(this._newAttendeesData[b]);this._newAttendeesData=d,this._rebuildTimeLine(),a.attendeesTab||this.attendeesTab._removeAssociatedContact(a.memberId)},addMembers:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.$key.length>12&&(d.$key=d.$key.substr(0,12)),this._isMember(d)||(d.ResourceId&&(d.$key=d.ResourceId),"Resource"===d.Type&&!0===d.IsLocation&&this._updateLocation(d.Name,!0),b.push(d.$key),this._newAttendeesData.push(d))}this._availabilityShowing&&(this._rebuildTimeLine(),this._requestAvailability()),this.attendeesTab._addContactAttendees(b)},_isMember:function(a){var b,c=this._attendeesData.length;for(b=0;b<c;b++)if(this._attendeesData[b].id===a.$key)return!0;for(c=this._newAttendeesData.length,b=0;b<c;b++)if(this._newAttendeesData[b].$key===a.$key)return!0;return!1},_updateUsersListWithNewLeader:function(a,b){var c,d=this._attendeesData.length;for(c=0;c<d;c++)if(this._attendeesData[c].id===a){this._attendeesData.splice(c,1);break}for(d=this._newAttendeesData.length,c=0;c<d;c++)if(this._newAttendeesData[c].$key===a){this._newAttendeesData.splice(c,1);break}this.addMembers([{$descriptor:b.$descriptor,$key:b.$key,IsLocation:!1,Name:b.$descriptor,Subtype:"",Type:"User"}])},_requestAvailability:function(){if(!(this._attendeesData.length<1&&this._newAttendeesData.length<1)){for(var a=[],b=0;b<this._attendeesData.length;b++)a.push("'"+this._attendeesData[b].id+"'");for(b=0;b<this._newAttendeesData.length;b++)a.push("'"+this._newAttendeesData[b].$key+"'");if(this._availabilityDataDateRange.fromDate){var c=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate);if(c>this._availabilityDataDateRange.fromDate&&c<this._availabilityDataDateRange.toDate&&a.join("")===this._availabilityDataDateRange.users.join(""))return}this._requestAvailabilityFor(a)}},_availabilityDataDateRange:{fromDate:!1,toDate:!1,users:[]},_requestAvailabilityFor:function(a){var b=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate),c=dojoDate.add(b,"day",-7),d=dojoDate.add(b,"day",7);this._availabilityDataDateRange.fromDate=c,this._availabilityDataDateRange.toDate=d,this._availabilityDataDateRange.users=a;var e=Sage.Services.getService("ActivityService");if(e){var f={quotedIds:a,startDate:c,endDate:d,expandRecurrences:!0,includeTimless:!1,timelessOnly:!1};e.getActivityFreeBusyFor(this,f,this._onReceiveAvailability,this._availabilityFailed)}},_onReceiveAvailability:function(a){this._availabilityData=a.$resources,this._applyAvailability()},_applyAvailability:function(){scheduler.clearAll();for(var a=0;a<this._availabilityData.length;a++){var b=this._availabilityData[a];262162===b.type&&b.itemId!==this._currentUserId&&(b.description=activityUtility.getActivityTypeName("atPersonal"));var c=b.activityId==this.activityId,d=Sage.Utility.Convert.toDateFromString(b.startDate),e=dojoDate.add(d,"minute",b.duration);scheduler.addEvent(d,e,b.description,null,{section_id:b.itemId,activity_Id:b.activityId,current_event:c})}},reRenderTimeline:function(a){this._rebuildTimeLine(a),this._applyAvailability()},_availabilityFailed:function(a,b){},_recurringStartDateChanged:function(a){var b=this.dtp_startDate.get("value");if(a.getMonth()!==b.getMonth()||a.getDate()!==b.getDate()||a.getFullYear()!==b.getFullYear()){if(this._activityData.StartDate){var c=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getHours(),d=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getMinutes();a.setHours(c),a.setMinutes(d)}this._activityData.StartDate=a.getFullYear?utility.Convert.toIsoStringFromDate(a):a,this.dtp_startDate.set("value",a),this._startDateChanged()}},_recurringPeriodChanged:function(a){this._handleAutoRolloverState()},_isOccurence:function(){return this.activityId.length>12},_canEdit:function(){return!("Confirm"===this.mode||!this._activityData.AllowEdit||this._isOccurence())},_setTimePatternForDHTMLXLibrary:function(){var a=Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortTimePattern,b=-1!==a.indexOf("H");this._DHTMLXLibraryTimePattern=b?"%G:%i":"%g:%i %a"},_emptyActivity:{$key:"",AccountId:null,AccountName:"",ActivityBasedOn:null,Alarm:!1,AlarmTime:utility.Convert.toIsoStringFromDate(new Date),Attachment:!1,Category:null,ContactId:null,ContactName:"",CreateDate:"",CreateUser:"",Description:"",Duration:15,ForeignId1:null,ForeignId2:null,ForeignId3:null,ForeignId4:null,LeadId:null,LeadName:"",LongNotes:null,Notes:null,OpportunityId:null,OpportunityName:null,OriginalDate:"",PhoneNumber:"",Priority:null,ProcessId:null,ProcessNode:null,ProjectId:null,RecurIterations:0,RecurPeriod:0,RecurPeriodSpec:0,Recurring:!1,RecurSkip:"",Rollover:!1,StartDate:utility.Convert.toIsoStringFromDate(new Date),TicketId:null,TicketNumber:null,Timeless:!1,Type:"atAppointment",UserDef1:null,UserDef2:null,UserDef3:null,AttachmentCount:null,Location:null,EndDate:"",Resources:{},Leader:{$key:""},UserActivities:{},UserNotifications:{}}});return activityEditor})},"Sage/_Templated":function(){define(["dojo/dom-construct","dojo/_base/declare","dojo/query","dojo/parser","dojo/_base/array","dojo/_base/lang","dijit/registry","dijit/_base/wai"],function(a,b,c,d,e,f,g,h){return b("Sage._Templated",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){var b,e;if(this.widgetTemplate&&this.contentTemplate)throw new Error('Both "widgetTemplate" and "contentTemplate" cannot be specified at the same time.');if(this.contentTemplate)this.inherited(arguments),e=["<div>",this.contentTemplate.apply(this),"</div>"].join(""),b=a.toDom(e),this._attachTemplateNodes(b);else{if(!this.widgetTemplate)return;if(e=this.widgetTemplate.apply(this),b=a.toDom(e),1!==b.nodeType)throw new Error("Invalid template.");this.domNode=b,this._attachTemplateNodes(b)}if(this.widgetsInTemplate){var f=d.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"});this._startupWidgets=this._startupWidgets||[],this._startupWidgets=this._startupWidgets.concat(f),this._supportingWidgets=this._supportingWidgets||[],this._supportingWidgets=this._supportingWidgets.concat(g.findWidgets(b)),this._attachTemplateNodes(f,function(a,b){return a[b]})}this.contentTemplate?c("> *",b).place(this.domNode):this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b,c,d;if(b=this.containerNode,c=document.createDocumentFragment(),d=!1,a&&b){for(;a.hasChildNodes();)c.appendChild(a.firstChild),d=!0;d&&b.appendChild(c)}},_attachTemplateNodes:function(a,b){b=b||function(a,b){return a.getAttribute(b)};for(var c=a instanceof Array?a:a.all||a.getElementsByTagName("*"),d=a instanceof Array?0:-1;d<c.length;d++){var g=-1==d?a:c[d];if(!this.widgetsInTemplate||!b(g,"dojoType")&&!b(g,"data-dojo-type")){var i=b(g,"dojoAttachPoint")||b(g,"data-dojo-attach-point");if(i)for(var j,k=i.split(/\s*,\s*/);j=k.shift();)this[j]instanceof Array?this[j].push(g):this[j]=g,this._attachPoints.push(j);var l=b(g,"dojoAttachEvent")||b(g,"data-dojo-attach-event");if(l)for(var m,n=l.split(/\s*,\s*/),o=f.trim;m=n.shift();)if(m){var p=null;if(-1!=m.indexOf(":")){var q=m.split(":");m=o(q[0]),p=o(q[1])}else m=o(m);p||(p=m),this._attachEvents.push(this.connect(g,m,p))}var r=b(g,"waiRole");r&&h.setWaiRole(g,r);var s=b(g,"waiState");s&&e.forEach(s.split(/\s*,\s*/),function(a){if(-1!=a.indexOf("-")){var b=a.split("-");h.setWaiState(g,b[0],b[1])}})}}},startup:function(){e.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()}),this.inherited(arguments)},destroyRendering:function(){e.forEach(this._attachPoints,function(a){delete this[a]},this),this._attachPoints=[],e.forEach(this._attachEvents,this.disconnect,this),this._attachEvents=[],this.inherited(arguments)}})})},"Sage/Data/SingleEntrySDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare"],function(a,b,c){return c("Sage.Data.SingleEntrySDataStore",a,{_entity:!1,_request:!1,_okToCache:!0,postMixInProperties:function(){},getFeed:function(a){},fetch:function(a){if(a.queryOptions&&a.queryOptions.currentEntity&&this._entity)return void this.returnCollectionProperty(a,a.queryOptions.property);this.verifyService();var b=this._getRequest();if(a.predicate){if(this._entity&&a.predicate===this._entity.$key&&this._okToCache&&a.onComplete)return void a.onComplete.call(a.scope||this,this._entity,a);b.setResourceSelector(a.predicate)}this.select&&this.select.length>0&&b.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&b.setQueryArg("include",this.include.join(",")),this.predicate&&this.predicate.length>0&&b.setResourceSelector(this.predicate),a.beforeRequest&&a.beforeRequest.call(a.scope||this,b),b.read({success:dojo.hitch(this,this.onSuccess,a),failure:dojo.hitch(this,this.onFailure,a)})},save:function(a){this._request&&this._entity&&(a.ignoreETag=b.isTrue(a.ignoreETag)?a.ignoreETag:this.ignoreETag,this._okToCache=!1,this._request.update(this._entity,a))},setValue:function(a,c,d){var e=a||this._entity;if(e){var f=this.getValue(e,c,"");b.setValue(e,c,d),this.onSet(e,c,f,d)}},getCurrentEntity:function(){return this._entity},newItem:function(a){var b=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);b.setResourceKind(this.resourceKind),b.read({success:function(b){this._entity=b,a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:function(b){a.onError&&a.onError.call(a.scope||this,b)},scope:this})},saveNewEntity:function(a,b,c,d,e){a||(a=this._entity);var f=new Sage.SData.Client.SDataSingleResourceRequest(this.service);f.setResourceKind(this.resourceKind),e&&e.call(d||this,f,a),f.create(a,{success:b||function(a){},failure:c||function(a,b){},scope:d||this})},deleteEntity:function(a,b,c,d){if(a=a||this._entity){var e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind),e.setResourceSelector("'"+a.$key+"'"),e.delete(a,{success:b||function(a){},failure:c||function(a){},scope:d||this})}},clearCache:function(){this._entity=!1},_getRequest:function(){if(!this._request){var a=new Sage.SData.Client.SDataSingleResourceRequest(this.service);a.setResourceKind(this.resourceKind),this._request=a}return this._request},returnCollectionProperty:function(a,b){if(this._entity&&this._entity.hasOwnProperty(b)){var c=this._entity[b].$resources;"unknown"!=typeof c&&(a.onBegin&&a.onBegin.call(a.scope||this,c.length,a),a.onComplete&&a.onComplete.call(a.scope||this,c,a))}},onSuccess:function(a,b){b?(this._okToCache=!0,this._entity=b,a.onComplete&&a.onComplete.call(a.scope||this,b,a)):a.onError&&a.onError.call(a.scope||this,"invalid feed",a)},onFailure:function(a,b,c){this._entity=!1,a.onError&&a.onError.call(a.scope||this,b.responseText,a)},onSet:function(a,b,c,d){}})})},"Sage/Data/BaseSDataStore":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Data.BaseSDataStore",null,{queryName:null,ignoreETag:null,constructor:function(a){d.mixin(this,a),this.features={"dojo.data.api.Read":!0},this.identityAttributes||(this.identityAttributes=[this.identityAttribute||"$key"]),this.labelAttributes||(this.labelAttributes=["$descriptor"]),this.features["dojo.data.api.Identity"]=!0,this.dataCache={query:""}},fetch:function(a){if(!this.isNewContext(a)&&this.feed)return void this.onSuccess(a,this.feed);this.setContext(a),a.count===1/0&&(a.count=500);var b=(a.count-0||this.pageSize,a.start-0||1);b>1&&(b+=1),this.verifyService();var c=this.getCollectionRequestObj(a);if(!c)return void(a.onError&&a.onError.call(a.scope||this,"Invalid data url",a));c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,isNaN(b)?1:b);var e="";if(this.query&&"function"!=typeof this.query&&(this.directQuery||(this.directQuery=this.query)),this.directQuery&&(a.query||(a.query={}),d.mixin(a.query,this.directQuery)),a.query)if("function"==typeof a.query)e=a.query();else if("string"==typeof a.query)e=a.query;else if("object"==typeof a.query)for(var f in a.query)if("fn"===f)e=a.query.fn.call(a.query.scope||this);else if("conditions"===f)"string"==typeof a.query.conditions&&""!==a.query.conditions&&(e+=e&&e.length>0?" and "+a.query.conditions:a.query.conditions);else if("scope"!==f&&a.query.hasOwnProperty(f)){var g=[f," like ","'",a.query[f].replace("*","%"),"'"].join("");e+=e.length>0?" and "+g:g}if(a.evaluatedQuery=e||"",e&&""!==e&&c.setQueryArg("where",e),this.select&&this.select.length>0&&c.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&c.setQueryArg("include",this.include.join(",")),this.sort&&(a.sort=a.sort||[],dojo.forEach(this.sort,function(b){0===dojo.filter(a.sort,function(a){return b.attribute==a.attribute}).length&&a.sort.push(b)})),void 0!==a.resourcePredicate&&c.getUri().setCollectionPredicate(a.resourcePredicate),this._setQueryArgsOnRequest(a.queryArgs,c),a.sort&&a.sort.length>0){var h=[];dojo.forEach(a.sort,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},h),c.setQueryArg("orderBy",h.join(","))}this.beforeRequest&&"function"==typeof this.beforeRequest&&this.beforeRequest.call(a.scope||this,c);var i=c.read({success:d.hitch(this,this.onSuccess,a),failure:d.hitch(this,this.onFailure,a)});return{abort:d.hitch(this,this.abortRequest,i)}},getCollectionRequestObj:function(a){var b=this.queryName?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(this.queryName):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);return b.setResourceKind(this.resourceKind),b.setStartIndex(a.start+1),this.resourcePredicate&&"''"!==this.resourcePredicate&&b.getUri().setCollectionPredicate(this.resourcePredicate),this._setQueryArgsOnRequest(this.queryArgs,b),!a.count&&this.count&&(a.count=this.count),b.setCount(a.count),b},_setQueryArgsOnRequest:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b.setQueryArg(c,a[c])},abortRequest:function(a){this.service.abortRequest(a)},onSuccess:function(a,b){a.onBegin&&(void 0===b.$totalResults&&(b.$totalResults=b.$itemsPerPage+b.$startIndex),a.onBegin.call(a.scope||this,b.$totalResults,a)),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a),this.addToCache(a,b)},onFailure:function(a,b,c){var d="An unknown exception occurred obtaining data.";if(b.responseText){var e=Sys.Serialization.JavaScriptSerializer.deserialize(b.responseText);d=dojo.isArray(e)?e[0].message:b.responseText}a&&a.onError?a.onError.call(a.scope||this,d,a):"string"==typeof d&&"undefined"!=typeof console&&b&&b.status&&(d+=" (HTTP status = %o; statusText = %o)")},setContext:function(a){this.context={start:a.start,count:a.count,query:a.query,queryOptions:a.queryOptions,sort:a.sort}},addToCache:function(a,b){var c,d,e;if(a.evaluatedQuery!==this.dataCache.query&&(this.clearCache(),this.dataCache.query=a.evaluatedQuery),b.$resources)for(c=0;c<b.$resources.length;c++)d=b.$resources[c],e=this.getIdentity(d),this.dataCache[e]=d},clearCache:function(){for(var a in this.dataCache)"query"!==a&&delete this.dataCache[a];this.dataCache.query=""},isNewContext:function(a){return"object"!=typeof this.context||(this.context.start!==a.start||this.context.count!==a.count)},verifyService:function(a){this.service||(this.service=b.getSDataService(a||"dynamic"))},getValue:function(b,c,d){return a.getValue(b,c)},getFeatures:function(){return this.features},getLabel:function(a){for(var b=[],c=0;c<this.labelAttributes.length;c++)a.hasOwnProperty(this.labelAttributes[c])&&b.push(a[this.labelAttributes[c]]);return b.join(" ")},getLabelAttributes:function(a){return this.labelAttributes},getIdentity:function(a){if(a){for(var b=[],c=0;c<this.identityAttributes.length;c++)a.hasOwnProperty(this.identityAttributes[c])&&b.push(a[this.identityAttributes[c]]);return b.join("")}},getIdentityAttributes:function(a){return this.identityAttributes},fetchItemByIdentity:function(a){if(this.dataCache.hasOwnProperty(a.identity))a.onItem.call(a.scope||this,this.dataCache[a.identity]);else{var b="Item with that key does not exist in the data cache: "+a.identity;a.onError&&a.onError.call(a.scope||this,{error:b})}},containsValue:function(b,c,d){return""!==a.getValue(b,c)}})})},"Sage/MainView/BindingsManager":function(){define(["dijit/_Widget","dojo/_base/declare","Sage/Utility/Activity"],function(a,b,c){var d=b("Sage.MainView.DataBinding",a,{boundEntity:!1,boundWidget:!1,widgetEvent:"onChange",widgetProperty:"value",entityProperty:!1,defaultValue:"",twoWay:!0,_connection:!1,bind:function(){this.boundWidget&&this.boundEntity&&this.entityProperty&&(this.boundWidget.set(this.widgetProperty,this._formatValueFromEntity(Sage.Utility.getValue(this.boundEntity,this.entityProperty,this.defaultValue))),this.twoWay&&!this._connection&&(this._connection=dojo.connect(this.boundWidget,this.widgetEvent,dojo.hitch(this,"applyWidgetChange",this.boundWidget))))},_formatValueFromEntity:function(a){return a},applyWidgetChange:function(a,b){b||(b=a.get(this.widgetProperty));var c=Sage.Utility.getValue(this.boundEntity,this.entityProperty),d=this._formatValueFromControl(b);c!=d&&(Sage.Utility.setValue(this.boundEntity,this.entityProperty,d),this.onChange(this.boundEntity,this.entityProperty,c,b))},_formatValueFromControl:function(a){return a},_setBoundEntityAttr:function(a){this.boundEntity=a,this.bind()},destroy:function(){dojo.disconnect(this._connection),this.inherited(arguments)},onChange:function(a,b,c,d){}}),e=b("Sage.MainView.DateDataBinding",d,{_formatValueFromEntity:function(a){var b=Sage.Utility.Convert.toDateFromString(a);return b&&c.isDateFiveSecondRuleTimeless(b)&&(b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,5)),b},_formatValueFromControl:function(a){return a&&a.getUTCFullYear||(a=this.boundWidget.get(this.widgetProperty))&&a.getUTCFullYear?Sage.Utility.Convert.toIsoStringFromDate(a):""}});return b("Sage.MainView.BindingsManager",null,{constructor:function(a){this._bindings=[],this._connections=[],this.boundEntity=!1,this._defaultBindingOptions={boundEntity:!1,boundWidget:!1,widgetEvent:"onChange",widgetProperty:"value",entityProperty:!1,defaultValue:"",twoWay:!0,dataType:"string"};for(var b=a||{},c=dojo.mixin(this._defaultBindingOptions,b.defaultBinding||{}),d=b.items||[],e=0;e<d.length;e++)this._addNew(dojo.mixin({},c,d[e]))},add:function(a){a instanceof Sage.MainView.DataBinding&&(this._connections.push(dojo.connect(a,"onChange",this,"onChange")),this._bindings.push(a))},_addNew:function(a){"date"===a.dataType?this.add(new e(a)):this.add(new d(a))},addBindings:function(a){if(dojo.isArray(a))for(var b=0;b<a.length;b++)this._addNew(dojo.mixin(this._defaultBindingOptions,a[b]));else this._addNew(dojo.mixin(this._defaultBindingOptions,a))},bind:function(){for(var a=0;a<this._bindings.length;a++)this._bindings[a]instanceof Sage.MainView.DataBinding&&this._bindings[a].bind()},setBoundEntity:function(a){this._entity=a;for(var b=0;b<this._bindings.length;b++)this._bindings[b]instanceof Sage.MainView.DataBinding&&this._bindings[b].set("boundEntity",a)},destroy:function(){var a,b=this._connections.length;for(a=0;a<b;a++)dojo.disconnect(this._connections[a]);for(this._connections=[],b=this._bindings.length,a=0;a<b;a++){this._bindings.pop().destroy()}this._bindings=[]},onChange:function(a,b,c,d){}})})},"Sage/Utility/Activity":function(){define(["dojo/date/locale","dojox/grid/cells/_base","Sage/Utility","dojo/string","dojo/i18n!./nls/Activity","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore"],function(dateLocale,cell,utility,dstring,nlsStrings,declare,sDataServiceRegistry,SingleEntrySDataStore){var isValidId=function(a){var b=!1;return a&&""!==a.trim()&&(b=!0),b},typeCell=declare("Sage.Utility.Activity.TypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="";c="number"==typeof a?this.get(a,b):a;var d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,e=utility.getValue(d,"$key"),f=!!b.hasOwnProperty("Status")&&b.Status,g='<span onclick="${0}" class="activity-type-link" ><div class="Global_Images icon16x16 ${1}" title="${2}"></div>&nbsp;${2}</span>',h=(Sage.Utility.getValue(d,"RecurrenceState"),Sage.Utility.Activity._getReccurenceFlag(d)),i="javascript:Sage.Link.editActivity('"+e+"', "+h+")";if(f){var j=utility.getClientContextByKey("userID"),k=b.hasOwnProperty.User?b.User.$key:j;"asUnconfirmed"===f&&j===k&&(i="javascript:Sage.Link.confirmActivityFor('"+e+"', '"+j+"')")}else i="javascript:Sage.Link.editActivityIfConfirmed('"+e+"', "+h+")";return dstring.substitute(g,[i,Sage.Utility.Activity.getActivityImageClass(c,"small"),Sage.Utility.Activity.getActivityTypeName(c)])}}),historyTypeCell=declare("Sage.Utility.Activity.HistoryTypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=utility.getValue(b,"$key"),d=utility.getValue(b,"Type"),e="",f="";return"at"===d.toString().substring(0,2)?(e=Sage.Utility.Activity.getActivityTypeName(d),f=d):(e=Sage.Utility.Activity.getActivityTypeNameFromEnumValue(d),f=Sage.Utility.Activity.getActivityTypeCodeFromEnumValue(d)),dstring.substitute('<span onclick="javascript:Sage.Link.editHistory(\'${0}\')" class="activity-type-link"><div class="Global_Images icon16x16 ${1} title="${2}"></div>&nbsp;${2}</span>',[c,Sage.Utility.Activity.getActivityImageClass(f,"small"),e])}}),alarmCell=declare("Sage.Utility.Activity.AlarmCell",cell,{formatter:function(a,b){return a?"<img src='images/icons/Alarm_16x16.gif'/>":"<div><div>"}}),recurCell=declare("Sage.Utility.Activity.RecurCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="",d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,e=utility.getValue(d,"Recurring"),f=utility.getValue(d,"RecurrenceState");return(e||f&&"rstOccurrence"===f)&&(c='<div class="Global_Images icon16x16 icon_recurring"></div>'),c}}),attachCell=declare("Sage.Utility.Activity.AttachCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="<div><div>",d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b;return utility.getValue(d,"Attachment")&&(c='<div class="Global_Images icon16x16 icon_attach_to_16"></div>'),c}}),confrimStatusCell=declare("Sage.Utility.Activity.ConfrimStatusCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="<div><div>";return"asUnconfirmed"===utility.getValue(b,"Status")&&(c='<div class="Global_Images icon16x16 icon_unconfirmedActivity16x16"></div>'),c}}),durationCell=declare("Sage.Utility.Activity.DurationCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="",d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,e=utility.getValue(d,"Duration");if(e){var f=utility.getValue(d,"Timeless");c=Sage.Utility.Activity.formatDuration(e,f)}return c}}),nameCell=declare("Sage.Utility.Activity.NameCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,d=utility.getValue(c,"ContactName"),e=utility.getValue(c,"ContactId");if(isValidId(e))return'<a href="Contact.aspx?entityid='+e+'" >'+d+"</a>"
;var f=utility.getValue(c,"LeadName"),g=utility.getValue(c,"LeadId");return isValidId(g)?'<a href="Lead.aspx?entityid='+g+'" >'+f+"</a>":"<div></div> "}}),nameTypeCell=declare("Sage.Utility.Activity.NameTypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,d=utility.getValue(c,"ContactId");if(isValidId(d))return nlsStrings.Contact;var e=utility.getValue(c,"LeadId");return isValidId(e)?nlsStrings.Lead:""}}),accountCell=declare("Sage.Utility.Activity.AccountCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,d=utility.getValue(c,"AccountName"),e=utility.getValue(c,"AccountId"),f="";isValidId(e)&&(f='<a href="Account.aspx?entityid='+e+'" >'+d+"</a>");var g=utility.getValue(c,"LeadId");return isValidId(g)&&(f='<a href="Lead.aspx?entityid='+g+'" >'+d+"</a>"),f}}),leaderCell=declare("Sage.Utility.Activity.LeaderCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c,d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:null;return c=d?utility.getValue(d,"Leader"):b.hasOwnProperty("Leader")&&"object"==typeof b.Leader?b.Leader:b,utility.getValue(c,"$descriptor")}}),completeCell=declare("Sage.Utility.Activity.CompleteCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=utility.getValue(b,"$key");if(isValidId(c)){var d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b;return dstring.substitute('<span onclick="javascript:Sage.Link.completeActivity(\'${0}\', ${1})" class="activity-type-link">${2}</span>',[c,utility.getValue(d,"Recurring"),nlsStrings.Complete])}return""}});return Sage.namespace("Utility.Activity"),Sage.Utility.Activity={timelessText:nlsStrings.timelessText,_imageMap:{small:{atNote:"images/icons/note_16x16.gif",atPhoneCall:"images/icons/Call_16x16.gif",atToDo:"images/icons/To_Do_16x16.gif",atAppointment:"images/icons/Meeting_16x16.gif",atPersonal:"images/icons/Personal_16x16.gif",atLiterature:"images/icons/Literature_16x16.png",atDoc:"images/icons/mailletter_16x16.png",atFax:"images/icons/fax_16x16.gif",atEmail:"images/icons/mailletter_16x16.png"},medium:{atNote:"images/icons/Note_24x24.gif",atPhoneCall:"images/icons/Call_24x24.gif",atToDo:"images/icons/To_Do_24x24.gif",atAppointment:"images/icons/Meeting_24x24.gif",atPersonal:"images/icons/Personal_24x24.gif",atLiterature:"images/icons/Literature_24x24.png",atDoc:"images/icons/mailletter_24x24.gif",atFax:"images/icons/fax_24x24.gif",atEmail:"images/icons/mailletter_24x24.gif"},large:{atNote:"images/icons/Note_24x24.gif",atPhoneCall:"images/icons/Call_32x32.gif",atToDo:"images/icons/To_Do_32x32.gif",atAppointment:"images/icons/Meeting_32x32.gif",atPersonal:"images/icons/Personal_32x32.gif",atLiterature:"images/icons/Literature_32x32.png",atDoc:"images/icons/mailletter_32x32.gif",atFax:"images/icons/fax_32x32.gif",atEmail:"images/icons/mailletter_32x32.gif"}},_iconClassMap:{small:{atNote:"icon_note_16x16",atPhoneCall:"icon_Call_16x16",atToDo:"icon_To_Do_16x16",atAppointment:"icon_Meeting_16x16",atPersonal:"icon_Personal_16x16",atLiterature:"icon_Literature_16x16",atDoc:"icon_mailletter_16x16",atFax:"icon_fax_16x16",atEMail:"icon_mailletter_16x16"},medium:{atNote:"icon_Note_24x24",atPhoneCall:"icon_Call_24x24",atToDo:"icon_To_Do_24x24",atAppointment:"icon_Meeting_24x24",atPersonal:"icon_Personal_24x24",atLiterature:"icon_Literature_24x24",atDoc:"icon_mailletter_24x24",atFax:"icon_fax_24x24",atEmail:"icon_mailletter_24x24"},large:{atNote:"icon_Note_24x24",atPhoneCall:"icon_Call_32x32",atToDo:"icon_To_Do_32x32",atAppointment:"icon_Meeting_32x32",atPersonal:"icon_Personal_32x32",atLiterature:"icon_Literature_32x32",atDoc:"icon_mailletter_32x32",atFax:"icon_fax_32x32",atEmail:"icon_mailletter_32x32"}},_picklistMap:{Regarding:{atNote:"Note Regarding",atPhoneCall:"Phone Call Regarding",atToDo:"To Do Regarding",atAppointment:"Meeting Regarding",atEmail:"To Do Regarding",atPersonal:"Personal Activity Regarding",atLiterature:"To Do Regarding"},Category:{atNote:"Note Category Codes",atPhoneCall:"Phone Call Category Codes",atToDo:"To Do Category Codes",atAppointment:"Meeting Category Codes",atEmail:"To Do Category Codes",atPersonal:"",atLiterature:"To Do Category Codes"},Result:{atNote:"Meeting Result Codes",atPhoneCall:"Phone Call Result Codes",atToDo:"To Do Result Codes",atAppointment:"Meeting Result Codes",atEmail:"To Do Result Codes",atPersonal:"Personal Activity Result Codes",atLiterature:"To Do Result Codes"}},_notMyPersonalActivityMixin:{AccountId:"",AccountName:"",Category:nlsStrings.Personal,ContactId:"",ContactName:"",Description:nlsStrings.Personal,LeadId:"",LeadName:"",LongNotes:"",Notes:"",OpportunityId:"",OpportunityName:"",PhoneNumber:"",Priority:"",TicketId:"",TicketNumber:"",Location:""},secureActivityData:function(a){if(262162==a.Type||"atPersonal"==a.Type){var b,c=Sage.Services.getService("ClientContextService");if(c&&c.containsKey("userID")&&(b=c.getValue("userID")),b===a.UserId)return;if(a.Leader&&b===a.Leader.$key)return;dojo.mixin(a,Sage.Utility.Activity._notMyPersonalActivityMixin)}},getActivityImage:function(a,b){return b=Sage.Utility.Activity._verifySize(b),a=a||"atAppointment",Sage.Utility.Activity._imageMap[b][a]||Sage.Utility.Activity._imageMap[b].atAppointment},_verifySize:function(a){return a=a||"small",a=a.toLowerCase(),"small"!==a&&"medium"!==a&&"large"!==a&&(a="small"),a},getActivityImageClass:function(a,b){return b=Sage.Utility.Activity._verifySize(b),a=a||"atAppointment",Sage.Utility.Activity._iconClassMap[b][a]||Sage.Utility.Activity._iconClassMap[b].atAppointment},getActivityTypeName:function(a){switch(a){case"atPhoneCall":return nlsStrings.PhoneCall||"Phone Call";case"atToDo":return nlsStrings.ToDo||"To Do";case"atAppointment":return nlsStrings.Meeting||"Meeting";case"atPersonal":return nlsStrings.Personal||"Personal Activity";case"atLiterature":return nlsStrings.Literature||"Literature";case"atFax":return nlsStrings.Fax||"Fax";case"atLetter":return nlsStrings.Letter||"Letter";case"atNote":return nlsStrings.Note||"Note";case"atEMail":return nlsStrings.Email||"E-mail";case"atDoc":return nlsStrings.Document||"Document";case"atDatabaseChange":return nlsStrings.DatabaseChange||"Database Change";case"atInternal":return nlsStrings.Event||"Event";case"atSchedule":return nlsStrings.ScheduledEvent||"Scheduled Event";default:return a}},getActivityTypeNameFromEnumValue:function(a){switch(a){case 262146:return nlsStrings.PhoneCall||"Phone Call";case 262147:return nlsStrings.ToDo||"To Do";case 262145:return nlsStrings.Meeting||"Meeting";case 262162:return nlsStrings.Personal||"Personal Activity";case 262163:return nlsStrings.Literature||"Literature";case 262155:return nlsStrings.Fax||"Fax";case 262148:return nlsStrings.Note||"Note";case 262154:return nlsStrings.Email||"E-mail";case 262153:return nlsStrings.Document||"Document";case 262156:return nlsStrings.DatabaseChange||"Database Change";case 0:return nlsStrings.Event||"Event";case 1:return nlsStrings.ScheduledEvent||"Scheduled Event";default:return a}},getActivityTypeCodeFromEnumValue:function(a){switch(a){case 262146:return"atPhoneCall";case 262147:return"atToDo";case 262145:return"atAppointment";case 262162:return"atPersonal";case 262163:return"atLiterature";case 262155:return"atFax";case 262148:return"atNote";case 262154:return"atEMail";case 262153:return"atDoc";case 262156:return"atDatabaseChange";case 0:return"atInternal";case 1:return"atSchedule";default:return a}},getActivityTypeEnumValue:function(a){switch(a){case"atPhoneCall":return"262146";case"atToDo":return"262147";case"atAppointment":return"262145";case"atPersonal":return"262162";case"atLiterature":return"262163";case"atFax":return"262155";case"atNote":return"262148";case"atEMail":return"262154";case"atDoc":return"262153";case"atDatabaseChange":return"262156";case"atSchedule":return"1";case"atInternal":return"0";default:return a}},getActivityTypeEnumCode:function(a){switch(a){case 262146:return"atPhoneCall";case 262147:return"atToDo";case"atAppointment":case 262145:return"atAppointment";case 262162:return"atPersonal";case"atLiterature":return"atLiterature";case"atFax":return"atFax";case"atLetter":return"atLetter";case"atNote":return"atNote";case"atEMail":return"atEMail";default:return a}},getConfirmationTypeEnumCode:function(a){switch(a){case 0:return"New";case 1:return"Change";case 2:return"Deleted";case 3:return"Confirm";case 4:return"Decline";case 5:return"Unknown";case 6:return"Leader";default:return a}},getConfirmationDisplayName:function(a){switch(a){case"New":return nlsStrings.New||"New";case"Change":return nlsStrings.Change||"Change";case"Deleted":return nlsStrings.Deleted||"Deleted";case"Confirm":return nlsStrings.Confirm||"Confirm";case"Decline":return nlsStrings.Decline||"Decline";case"Unknown":return nlsStrings.Unknown||"Unknown";case"Leader":return nlsStrings.Leader||"Leader";default:return a}},getActivityPicklistName:function(a,b){return a=a||"Regarding",Sage.Utility.Activity._picklistMap.hasOwnProperty(a)||(a="Regarding"),Sage.Utility.Activity._picklistMap[a][b]||Sage.Utility.Activity._picklistMap[a].atToDo},formatActivityStartDate:function(a,b){if(!a)return"";if(Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a)),void 0===b&&(b=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(a)),b){var c=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate());return dateLocale.format(c,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})+" "+this.timelessText}return dateLocale.format(a,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},getActivityEndDate:function(a,b,c){return!!a&&(Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a)),void 0===c&&(c=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(a)),c?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5):dojo.date.add(a,"minute",b))},formatActivityStartDateForCalendar:function(a,b,c){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return c&&(d=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5)),b?dateLocale.format(d,{selector:"date",datePattern:b,locale:Sys.CultureInfo.CurrentCulture.name}):dateLocale.format(d,{selector:"date",datePattern:"MM/d/yy H:mm",locale:Sys.CultureInfo.CurrentCulture.name})},formatActivityEndDateForCalendar:function(a,b){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()),d=dojo.date.add(c,"minute",b);return dojo.date.compare(d,c,"date")>0?dateLocale.format(c,{selector:"date",datePattern:"MM/d/yy 24:00",locale:Sys.CultureInfo.CurrentCulture.name}):dateLocale.format(d,{selector:"date",datePattern:"MM/d/yy H:mm",locale:Sys.CultureInfo.CurrentCulture.name})},formatEventDateForCalendar:function(a,b){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return b?dateLocale.format(c,{selector:"date",datePattern:b,locale:Sys.CultureInfo.CurrentCulture.name}):dateLocale.format(c,{selector:"date",datePattern:"MM/d/yy H:mm",locale:Sys.CultureInfo.CurrentCulture.name})},formatEventDate:function(a){return a?(Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a)),dateLocale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})):""},formatDateAdd:function(a,b,c){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return d=dojo.date.add(d,b,c),dateLocale.format(d,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},formatShortDate:function(a){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return dateLocale.format(b,{selector:"date",formatLength:"short",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},formatLongDate:function(a){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return dateLocale.format(b,{selector:"date",formatLength:"long",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},roundDateToNextQuarterHour:function(a){a.setSeconds(0);var b=a.getMinutes();return b<15?a.setMinutes(15):b<30?a.setMinutes(30):b<45?a.setMinutes(45):(a.setMinutes(0),a=dojo.date.add(a,"hour",1)),a},isDateFiveSecondRuleTimeless:function(a){return!!a&&(0===a.getUTCHours()&&0===a.getUTCMinutes()&&5===a.getUTCSeconds())},formatDuration:function(a,b){if(b)return"";if(!a)return"0"+nlsStrings.m;if(a<60)return a+nlsStrings.m;if(a>60){var c=String(a/60).split("."),d=a%60;return c[0]+nlsStrings.h+" "+d+nlsStrings.m}return"1"+nlsStrings.hr},formatTimelessStartDate:function(a){if(!a)return"";var b=function(a){return a<10?"0"+a:a};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T00:00:00Z"},formatTimelessEndDate:function(a,b,c){if(!a)return"";var d=new Date(a.getFullYear(),a.getMonth(),a.getDate());b&&c&&(d=dojo.date.add(d,b,c));var e=function(a){return a<10?"0"+a:a},f=d.getUTCFullYear(),g=d.getUTCMonth()+1,h=d.getUTCDate();return f+"-"+e(g)+"-"+e(h)+"T23:59:59Z"},formatRawTimelessStartDate:function(a){if(!a)return"";var b=function(a){return a<10?"0"+a:a};return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T00:00:00Z"},formatRawTimelessEndDate:function(a,b,c){if(!a)return"";var d=new Date(a.getFullYear(),a.getMonth(),a.getDate());b&&c&&(d=dojo.date.add(d,b,c));var e=function(a){return a<10?"0"+a:a},f=d.getFullYear(),g=d.getMonth()+1,h=d.getDate();return f+"-"+e(g)+"-"+e(h)+"T23:59:59Z"},getNthWeekOfMonth:function(a){for(var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getMonth(),d=1;d<7;d++)if(b=dojo.date.add(b,"week",-1),c!==b.getMonth())return d;return 1},setDateToNthWeekDay:function(a,b,c){var d,e=new Date(a.getFullYear(),a.getMonth(),a.getDate());if(5===b)for(e.setDate(dojo.date.getDaysInMonth(e)),d=0;d<7&&e.getDay()!==c;d++)e=dojo.date.add(e,"day",-1);else{for(e.setDate(1),d=0;d<7&&e.getDay()!==c;d++)e=dojo.date.add(e,"day",1);e=dojo.date.add(e,"week",b-1)}return e},isValidId:function(a){var b=!1;return a&&""!==a.trim()&&(b=!0),b},getConfirmStatusName:function(a){if(!a)return nlsStrings.Unknown||"Unknown";switch(a.toUpperCase().trim()){case"CHANGE":return nlsStrings.confirmTypeChanged||"Changed";case"CONFIRM":return nlsStrings.confirmTypeConfirmed||"Confirmed";case"DELETED":return nlsStrings.confirmTypeDeleted||"Deleted";case"LEADER":return nlsStrings.Leader||"Leader";case"NEW":return nlsStrings.New||"New";default:return a}},isReocurringId:function(a){return";"===a.charAt(12)},findFailedRequestMessage:function(request,def){if(request.responseText){var rsp=eval(request.responseText);if(dojo.isArray(rsp)&&rsp[0])return rsp[0].message||def}return def},removeMember:function(a,b){var c=dijit.byId(a);if(c){var d={memberId:b};c._removeMember(d)}},getActivityEditLink:function(a){var b=a.id,c=Sage.Utility.Activity._getReccurenceFlag(a),d=a.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(a.Type)),e="javascript:Sage.Link.editActivity('"+b+"', "+c+")";return dstring.substitute('<span onclick="${0}" class="activity-type-link">${1}</span>',[e,d])},getActivitySummaryHeader:function(a){var b=a.id,c='<span onclick="${0}" class="activity-type-link">${1}</span>',d="";a.Alarm&&(d+='<div class="Global_Images icon24x24 icon_Alarm_24x24" > </div>&nbsp;'),(Sage.Utility.Activity.isReocurringId(a.id)||a.Recurring)&&(d+='<div class="Global_Images icon16x16 icon_recurring" > </div>&nbsp;'),d+='<div class="Global_Images icon24x24 '+Sage.Utility.Activity.getActivityImageClass(a.Type,"medium")+'"> </div>&nbsp;';var e=Sage.Utility.Activity._getReccurenceFlag(a),f=a.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(a.Type)),g="javascript:Sage.Link.editActivity('"+b+"', "+e+")";return d+=dstring.substitute(c,[g,f])},getUserActivitySummaryHeader:function(a){var b=a.Activity,c="";"asUnconfirmed"===a.Status&&(c+='<div class="Global_Images icon16x16 icon_unconfirmedActivity16x16" > </div>'),b.Alarm&&(c+='<div class="Global_Images icon24x24 icon_Alarm_24x24" > </div>&nbsp;'),(Sage.Utility.Activity.isReocurringId(b.$key)||b.Recurring)&&(c+='<div class="Global_Images icon16x16 icon_recurring" > </div>&nbsp;'),c+='<div class="Global_Images icon24x24 '+Sage.Utility.Activity.getActivityImageClass(b.Type,"medium")+'"> </div>&nbsp;';var d=Sage.Utility.Activity._getReccurenceFlag(b),e=b.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(b.Type)),f="javascript:Sage.Link.editActivity('"+b.$key+"', "+d+")";return"asUnconfirmed"===a.Status&&(f="javascript:Sage.Link.confirmActivityFor('"+b.$key+"', "+a.User.$key+")"),c+=dstring.substitute('<span onclick="${0}" class="activity-type-link">${1}</span>',[f,e])},getActivityCompleteHref:function(a){return"javascript:Sage.Link.completeActivity('"+a.$key+"', "+Sage.Utility.Activity._getReccurenceFlag(a)+")"},_getReccurenceFlag:function(a){return a.RecurrenceState?(!0!==a.Recurring||"rstMaster"!==a.RecurrenceState)&&(!(!0===a.Recurring&&a.RecurIterations<0)&&"rstOccurrence"===a.RecurrenceState):!0===a.Recurring&&!(a.RecurIterations<0)},getCurrentActivityId:function(){var a=Sage.Services.getService("ClientEntityContext"),b=a.getContext(),c=null;return b&&"ACTIVITY"==b.EntityTableName&&(c=b.EntityId),c},_getContactData:function(a,b,c){this._contactStore||(this._contactStore=new SingleEntrySDataStore({include:["$descriptors","Address"],resourceKind:"contacts",service:sDataServiceRegistry.getSDataService("dynamic")})),this._contactStore.fetch({predicate:"'"+a+"'",onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this})},_getLeadData:function(a,b,c){this._leadStore||(this._leadStore=new SingleEntrySDataStore({include:["$descriptors","Address"],resourceKind:"leads",service:sDataServiceRegistry.getSDataService("dynamic")})),this._leadStore.fetch({predicate:"'"+a+"'",onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this})},activityTypeCell:typeCell,activityAlarmCell:alarmCell,activityRecurringCell:recurCell,activityAttachCell:attachCell,activityConfirmStatusCell:confrimStatusCell,activityDurationCell:durationCell,activityNameCell:nameCell,activityNameTypeCell:nameTypeCell,activityAccountCell:accountCell,activityCompleteCell:completeCell,historyTypeCell:historyTypeCell,activityLeaderCell:leaderCell},Sage.Utility.Activity})},"Sage/UI/Controls/_DialogHelpIconMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-attr","dojo/i18n!./nls/_DialogHelpIconMixin"],function(a,b,c,d){return a("Sage.UI.Controls._DialogHelpIconMixin",null,{helpTopic:"",createHelpIcon:function(a,c){a&&!this.helpIcon||b.destroy(this.helpIcon);var e=b.create("a",{href:a,target:c||"help",class:"dialogHelpIcon"},this.titleBar,"first");b.create("div",{class:"Global_Images icon16x16 icon_Help_16x16",title:d.helpTooltip},e);this.helpIcon=e},createHelpIconByTopic:function(a,b){a?this.helpTopic=a:a=this.helpTopic;var c=Sage.Link.getHelpUrlTarget(),d=Sage.Link.getHelpUrl(a,b);this.createHelpIcon(d,c)},destroy:function(){b.destroy(this.helpIcon),this.inherited(arguments)},_setHelpTopicAttr:function(a){if(this.helpTopic=a,this.helpIcon){var b=Sage.Link.getHelpUrl(a);c.set(this.helpIcon,"href",b)}else this.createHelpIconByTopic(a)},_getHelpTopicAttr:function(){return this.helpTopic}})})},"Sage/UI/_DialogLoadingMixin":function(){define(["dojo/_base/declare","dojox/widget/Standby"],function(a,b){return a("Sage.UI._DialogLoadingMixin",null,{_standby:!1,showLoading:function(){if(!this._standby&&this.domNode){var a=this.domNode;this.containerNode&&(a=this.containerNode),this._standby=new b({target:a,color:"white",image:"images/loader_lg.gif",duration:50}),document.body.appendChild(this._standby.domNode),this._standby.startup()}var c=this;window.setTimeout(function(){c._standby.show()},0)},hideLoading:function(){var a=this;window.setTimeout(function(){a._standby&&a._standby.hide()},1)}})})},"Sage/UI/AttachmentList":function(){define(["dijit/_Widget","Sage/UI/EditableGrid","Sage/Data/SDataServiceRegistry","dojo/string","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/Utility","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Dialogs","Sage/Utility/File/AttachmentPropertiesEditForm","Sage/Utility/File/FallbackFilePicker","Sage/Utility/File/AddURLAttachment","Sage/Utility/File/GoogleDocPicker","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/_base/connect","dojo/i18n!./nls/AttachmentList","Sage/Utility","Sage/Utility/Workspace","Sage/UI/GridView","dojo/string","dojo/store/Memory","Sage/Store/SData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return p("Sage.UI.AttachmentList",[a],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",fileInputBtn:!1,_fileInputOnChange:null,_attachmentEditor:!1,_newAttachmentsCache:[],subscriptions:[],_grid:null,_store:{},constructor:function(){r.mixin(this,t),this.subscriptions=[]},startup:function(a){this._newAttachmentsCache=[],this._checkDbType(a)},_checkDbType:function(a){Sage.Services.getService("SystemOptions").get("DbType",function(b){this._buildGrid("2"===b||"3"===b),"function"==typeof a&&a(this)},function(){this._buildGrid(!1),"function"==typeof a&&a(this)},this)},_buildGrid:function(a){var b=[{field:"$key",editable:!1,hidden:!0,unhidable:!0,id:"id",formatter:function(a,b){return["<div id=",a," >",a,"</ div>"].join("")}},{field:"description",label:t.attachmentText,formatter:function(a,b){if(!b)return this.defaultValue;if(u.encodeObjectStrings(b),b.url){var c=b.url||"";return c=c.indexOf("http")<0?"http://"+c:c,d.substitute('<a href="${0}" target="_blank" title="${1}">${2}</a>',[c,b.url,b.$descriptor])}return b.fileExists?d.substitute('<a href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${0}\');" title="${1}">${1}</a>',[b.$key,b.$descriptor]):b.$descriptor},filterConfig:{widgetType:o},width:"300px"},{field:"user",label:t.userText,formatter:function(a,b){if(!b)return"";var c=b.hasOwnProperty("user")&&"object"==typeof b.user?b.user:null;return c&&c.$descriptor?c.$descriptor:""},width:"120px"},{field:"attachDate",label:t.modDateText,type:e,filterConfig:{widgetType:n,label:t.dateRangeText},width:"175px"},{field:"fileSize",label:t.sizeText,formatter:function(a){return g.formatFileSize(a)},width:"120px"},{field:"fileName",label:t.extensionText,formatter:function(a,b){return a?a.substr(a.lastIndexOf(".")):"."},sortable:!1}],c=[{id:this.id+"_btnBrowse",imageClass:"icon_Add_File_16x16",handler:this.browseForFiles,title:t.addFileText,alternateText:t.addFileText,appliedSecurity:"",scope:this},{id:this.id+"_btnAddUrl",imageClass:"icon_Internet_Service_Add_16x16",handler:this.addUrlAttachment,title:t.addUrlText,appliedSecurity:"",alternateText:t.addUrlText,scope:this},{id:this.id+"_btnEditAttachProps",imageClass:"icon_Edit_Item_16x16",handler:this.editSelectedAttachment,title:t.editText,appliedSecurity:"",alternateText:t.editText,scope:this},{id:this.id+"_btnDeleteAttachment",imageClass:"icon_Delete_16x16",title:t.deleteText,handler:this.deleteSelectedAttachment,appliedSecurity:"",alternateText:t.deleteText,scope:this},{id:this.id+"_btnHelp",imageClass:"icon_Help_16x16",handler:function(){f.openHelp("attachmentstab")},title:t.helpText,alternateText:t.helpText,appliedSecurity:""}];if(a){var h={field:"remoteStatus",name:"&nbsp;",width:"300px",format:function(a,b){if(!b)return this.defaultValue;var c=b.remoteStatus?b.remoteStatus:b.fileExists?"Delivered":"Available";b.dataType||(c="X");var e=d.substitute("<a href=\"javascript:Sage.Utility.File.Attachment.remoteRequestAttachment('${0}')\">${1}</a>",[b.$key,t.request]);switch(c){case"Available":return t.available+" - "+e;case"Requested":return t.requested;case"Delivered":return t.delivered+" - "+e;default:return" "}}};b.splice(2,0,h)}var i=Sage.Services.getService("ClientEntityContext"),j=i.getContext();this.contextEntityType=j.EntityType;var k=f.getCurrentEntityId();this._createLiveStore();this.mode=k?"":"insert";var l={columns:b,gridLabel:"Attachments",tools:c,store:new y({data:[]}),sort:[{attribute:"attachDate",descending:!0}],id:this.id+"_attachments",minRowsPerPage:25,placeHolder:this.placeHolder,mode:this.mode,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"extended",rowSelection:!0,slxContext:{workspace:this.workspace,tabId:this.tabId}};this.onBeforeCreateGrid(l);var m=this._grid=new w(l);m.createGridView(),dojo.connect(m,"destroy",this,this.destroy),this.fileInputBtn=dojo.doc.createElement("INPUT"),dojo.attr(this.fileInputBtn,{type:"file",multiple:"true",accept:"*/*",class:"display-none"}),dojo.place(this.fileInputBtn,this.domNode,"last"),this._fileInputOnChange=s.connect(this.fileInputBtn,"onchange",this,this.handleFiles),this.subscriptions.push(dojo.subscribe("/entity/attachment/create",this,this.onNewAttachmentEntity)),this.subscriptions.push(dojo.subscribe("/entity/attachment/update",this,this.onAttachmentUpdated)),a&&this.subscriptions.push(dojo.subscribe("/entity/attachment/requested",this,this.onAttachmentUpdated)),this.resetEntityContext()},_createLiveStore:function(){var a=this.parentRelationshipName,b=f.getCurrentEntityId();"activityId"===a&&(b=b.substr(0,12)),this._store=new z({service:c.getSDataService("system"),contractName:"system",resourceKind:"attachments",resourcePredicate:null,include:["$descriptors"],select:["description","user","attachDate","fileSize","fileName","url","fileExists","remoteStatus","dataType"],where:x.substitute((a||"'A'")+' eq "${0}"',[b]),scope:this})},resetEntityContext:function(){var a=this.parentRelationshipName,b=f.getCurrentEntityId();"activityId"===a&&(b=b.substr(0,12));var c=(a||"'A'")+" eq '"+b+"'";(!b&&"insert"!==this.mode||b&&"insert"===this.mode)&&(this.mode=b?"":"insert"),this._grid&&("insert"===this.mode?this._grid.grid.setStore(new y({data:[]})):(this._store.where=c,this._grid.grid.setStore(this._store)))},destroy:function(){for(var a=this.subscriptions.length,b=0;b<a;b++)dojo.unsubscribe(this.subscriptions.pop())},handleFiles:function(a){var b=this.fileInputBtn.files;this._createAttachments(b)},handleGearsDesktopFileSelect:function(a){a.length>0&&h.createAttachments(a)},_createAttachments:function(a){a.length>0&&h.createAttachments(a)},onNewAttachmentEntity:function(a){var b=Sage.Services.getService("ClientEntityContext"),c=b.getContext();if(this.contextEntityType===c.EntityType)return a?(this._newAttachmentsCache.push(a),void("insert"===this.mode?(this._grid.grid.addItem(a),this._grid.refresh()):this._grid.grid.store.put(a).then(r.hitch(this,function(a){this._grid.refresh()})))):void this._getFallBackPickerAttachment()},_getFallBackPickerAttachment:function(){var a=dijit.byId("activityEditor"),b="activityId";a&&a._tempIdForAttachments||(a=dijit.byId("historyEditor")||{},b="historyId");var d=a._tempIdForAttachments;if(d){new Sage.SData.Client.SDataResourceCollectionRequest(c.getSDataService("system")).setResourceKind("attachments").setQueryArg("select",["description","userId","attachDate","fileSize","fileName","url","fileExists"].join(",")).setQueryArg("where",b+" eq '"+d+"'").setStartIndex(1).setCount(50).read({success:this._receivedFallBackPickerAttachments,failure:function(){},scope:this})}},_receivedFallBackPickerAttachments:function(a){var b=a.$resources;this.clearNewAttachments();for(var c=0;c<b.length;c++){var d=b[c];this._newAttachmentsCache.push(d),this._grid.store.put(d).then(r.hitch(this,function(a){this._grid.grid.addItem(d)}))}this._grid.refresh()},onAttachmentUpdated:function(a){var b=Sage.Services.getService("ClientEntityContext"),c=b.getContext();if(this.contextEntityType===c.EntityType){if("insert"===this.mode)for(var d=this._newAttachmentsCache,e=0;e<d.length;e++)d[e].$key===a.$key&&r.mixin(d[e],a);this._grid.refresh()}},getNewAttachments:function(){return this._newAttachmentsCache},clearNewAttachments:function(){this._newAttachmentsCache=[],this._grid&&this._grid.grid.setStore(new y({data:[]}))},_editAttachmentInfo:function(a){this._attachmentEditor||(this._attachmentEditor=new j),this._attachmentEditor.set("attachmentId",a),this._attachmentEditor.show()},browseForFiles:function(a){if(g.supportsHTML5File){var b=this.fileInputBtn.cloneNode();q.destroy(this.fileInputBtn),q.place(b,this.domNode,"last"),this.fileInputBtn=b,s.disconnect(this._fileInputOnChange),this._fileInputOnChange=s.connect(this.fileInputBtn,"onchange",this,this.handleFiles),this.fileInputBtn.click()}else{var c=dijit.byId("fallbackFilePicker");c||(c=new k({id:"fallbackFilePicker"})),c.show()}},addUrlAttachment:function(a){var b=dijit.byId("urlAttachmentEditor");b||(b=new l({id:"urlAttachmentEditor"})),b.set("attachmentId",""),b.show()},editSelectedAttachment:function(){var a=this._grid.getSelectedRowData();if(!(a.length<1)){var b=a[0];this._editAttachmentInfo(b.$key)}},deleteSelectedAttachment:function(){this._grid.deleteSelected(),dojo.publish("/entity/attachment/delete")},addGoogle:function(){var a=dijit.byId("googleDocumentPicker");a||(a=new m({id:"googleDocumentPicker"}),dojo.connect(a,"onDocumentSelected",this,"_handleGoogleDocPicked")),a.pick()},_handleGoogleDocPicked:function(a,b){var d=new Sage.SData.Client.SDataTemplateResourceRequest(c.getSDataService("system"));d.setResourceKind("attachments"),d.read({success:function(c){c.description=dojo.isArray(a)?a[0]:a,c.url=dojo.isArray(b)?b[0]:b,this._addRelationshipsToGoogleDocAttachment(c)},failure:function(a){},scope:this})},_addRelationshipsToGoogleDocAttachment:function(a){h.getKnownRelationships(function(b){var d=r.mixin(a,b);d.user={$key:f.getClientContextByKey("userID")||""},d.attachDate=f.Convert.toIsoStringFromDate(new Date),new Sage.SData.Client.SDataSingleResourceRequest(c.getSDataService("system")).setResourceKind("attachments").create(d,{success:function(a){dojo.publish("/entity/attachment/create",a)},failure:function(a){},scope:this})},this)},onBeforeCreateGrid:function(a){},setToReadOnly:function(a){var b=[this.id+"_btnBrowse",this.id+"_btnAddUrl",this.id+"_btnEditAttachProps",this.id+"_btnDeleteAttachment"];this._bulkSetProperty(this,b,"disabled",a)},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=dijit.byId(b[e]);f&&f.set(c,d)}}})})},"Sage/UI/EditableGrid":function(){define(["dojox/grid/DataGrid","dijit/Toolbar","dijit/form/Button","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/WritableStore","Sage/UI/SDataLookup","dojo/i18n","dojo/_base/lang","Sage/Utility","Sage/UI/ImageButton","Sage/UI/Dialogs","Sage/Utility/_LocalStorageMixin","dojo/i18n!./nls/EditableGrid","Sage/UI/ToolBarLabel","dojo/parser","dojo/dom-construct","dojo/_base/declare","dojo/_base/array"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return r("Sage.UI.EditableGrid",[a,m],{recordCountLabel:null,STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_SORT:"_SORT_INFO_",lookupControl:null,mode:"",region:"center",_dataChangeConnections:[],_registeredWidgets:null,constructor:function(a){this.mode=j.getModeId(),a.storeOptions&&a.storeOptions.isInsertMode&&(this.mode="insert"),this._dataChangeConnections=[],
this._registeredWidgets=[]},_setModeAttr:function(a){if(this.mode!==a){if(this.mode=a,!this.store)return;("insert"===a&&"Sage.Data.WritableStore"!==this.store.declaredClass||"insert"!==a&&"Sage.Data.WritableSDataStore"!=this.store.declaredClass)&&this._replaceStore()}},_getModeAttr:function(){return this.mode},onBlur:function(){this.edit&&this.edit.isEditing()&&this.edit.apply()},postMixInProperties:function(){function a(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return;b.push(a)}dojo.mixin(this,n),dojo.mixin(this,h.getLocalization("dijit","common")),this.setEditable(),this.storeOptions||(this.storeOptions={}),this.ensureValue(this.storeOptions,"pagesize",this.rowsPerPage||20),this.ensureValue(this,"singleClickEdit",!0),"function"==typeof this.contextualCondition?this.query={fn:this.contextualCondition,scope:this}:"object"==typeof this.contextualCondition&&this.contextualCondition.fn&&(this.ensureValue(this.contextualCondition,"scope",this),this.query=this.contextualCondition),this.structure=[{defaultCell:i.mixin({defaultValue:""},this.columnDefaults),cells:this.columns}],this.tabId&&""!==this.tabId?(this.addToolsToWorkspaceToolbar(),this.currentEntityId=j.getCurrentEntityId()):this.createOwnToolbar(),this._setUserPrefColumnWidths();var b,c,d,e,f,g,k,l=this.columns;if(this.store){for(b=this.store.select=this.store.select||[],e=this.store.include=this.store.include||[],c=0;c<b.length;c++)b[c]=b[c].replace(/\./g,"/");for(c=0;c<l.length;c++)if(l[c].field&&(k=l[c].field,a(k.replace(/\./g,"/"),b)),l[c].field.indexOf(".")>0)for(f=l[c].field.split("."),g="",d=0;d<f.length-1;d++)g+=f[d],a(g,e),g+="/"}else{for(b=this.storeOptions.select||[],c=0;c<b.length;c++)b[c]=b[c].replace(/\./g,"/");for(e=this.storeOptions.include||[],c=0;c<l.length;c++)if(l[c].field&&(k=l[c].field,a(k.replace(/\./g,"/"),b)),l[c].field.indexOf(".")>0)for(f=l[c].field.split("."),g="",d=0;d<f.length-1;d++)g+=f[d],a(g,e),g+="/";this.store=this.getStore(),this.markClean()}this._setSortInfo(),this.inherited(arguments)},postCreate:function(){dojo.connect(this,"onKeyDown",this.customKeyDown),dojo.connect(this,"onResizeColumn",this._onResizeColumn),dojo.subscribe("Sage/events/TabWorkspace/MIDDLE_AREA_DROP",this,this._setMiddleAreaHeight),this.connect(this,"_onNew",this.showLoading),this.connect(this.scroller,"scroll",this._onScroll),dojo.connect(this,"onResizeColumn",this._onScroll),this.setupHeader(),this.inherited(arguments)},showLoading:function(){this.showMessage(this.loadingMessage),this._clearData(),this.markClean()},headerTemplate:new Simplate(["<div>",'<div id="{%= $.id %}_HeaderBar"  data-dojo-type="dijit.layout.ContentPane" gutters="false"  region="top" ','style="{%= $.headerStyle %}" class="editable-grid-hbar">','<div class="editable-grid-hbar-left"></div>','<div class="editable-grid-hbar-center"></div>','<div class="editable-grid-hbar-right"><div id="{%= $.gridNodeId %}_recordCountLabel"></div></div>',"</div>","</div>"]),setupHeader:function(){this.recordCountLabel=new o,this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()));var a=this.headerTemplate.apply(this);a=dojo.toDom(a),this.headerContentPane=p.parse(a),dijit.byId(this.gridNodeId).addChild(this.headerContentPane[0]),dojo.place(this.recordCountLabel.domNode,this.gridNodeId+"_recordCountLabel","replace")},resetContextualCondition:function(a){"function"==typeof a?this.query={fn:a,scope:this}:"object"==typeof a&&a.fn&&(this.ensureValue(a,"scope",this),this.query=a),this.contextualCondition=a},_getRecordCount:function(){var a,b,c,d;return a=this.scroller,d=a.rowCount,d<=0?(b=0,c=0,d=0):(b=0===a.firstVisibleRow?1:a.firstVisibleRow+1,c=a.lastVisibleRow>=a.rowCount?a.rowCount:a.lastVisibleRow),[b,c,d]},_onScroll:function(a){this.recordCountLabel&&this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()))},_setMiddleAreaHeight:function(a){var b=["#",a.tab.ElementId," #",this.id].join("");if(dojo.query(b)[0]){var c=["#",a.tab.ElementId," .tws-tab-view-body"].join(""),d=dojo.query(c)[0];dojo.style(d,"height","10px"),TabControl.setViewBodyHeight()}},_setUserPrefColumnWidths:function(){var a=this;dojo.forEach(this.columns,function(b){if(b&&b.field){var c=a._getColumnSizeKey(b),d=a.getFromLocalStorage(c,a.STORE_NS);d&&(b.width=d)}})},_getColumnSizeKey:function(a){var b=a.field.replace(/[\.\$]/g,"_");return[this.id,"_",this.STORE_KEY_COLUMN_SIZE,b].join("")},_onResizeColumn:function(a){var b=this.getCell(a),c=b.unitWidth,d=this._getColumnSizeKey(b);this.saveToLocalStorage(d,c,this.STORE_NS)},listenForPageSave:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.addListener(a.ON_SAVE,this.saveChanges,this)},removePageSaveListener:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.removeListener(a.ON_SAVE,this.saveChanges)},setEditable:function(){var a,b=!0;if(this.appliedSecurity){var c=Sage.Services.getService("RoleSecurityService");c&&(b=c.hasAccess(this.appliedSecurity))}if(this.readOnly&&(b=!1),b){for(a=0;a<this.columns.length;a++)if(this.columns[a].editable){this.editable=!0;break}}else{for(a=0;a<this.columns.length;a++)this.columns[a].editable&&(this.columns[a].editable=!1);this.editable=!1}},onHeaderCellClick:function(a){var b=!0;if(this.store.dirtyDataCache.isDirty){var c=Sage.Services.getService("ClientBindingManagerService");b=confirm(c._PageExitWarningMessage)}if(!1!==this.columns[a.cell.index].sortable&&b&&"insert"!==this.mode){this.inherited(arguments);var d=this.getSortProps();if(d&&d.length>0){var e=d[0];e.cellIndex=a.cell.index,this.saveToLocalStorage(this.STORE_KEY_SORT+this.id,e,this.STORE_NS)}}else dojo.stopEvent(a)},_setSortInfo:function(){var a=this.STORE_KEY_SORT+this.id,b=this.getFromLocalStorage(a,this.STORE_NS);b&&(b.descending?this.sortInfo=-1*(b.cellIndex+1):this.sortInfo=b.cellIndex+1)},ensureValue:function(a,b,c){a[b]=a[b]||c},amIInATab:function(){return!(!this.context||!this.context.workspace)&&this.context.workspace.indexOf("TabWorkspace")>-1},isMyTabVisible:function(){return!this.amIInATab()||!window.TabControl||window.TabControl.getState().isTabVisible(this.tabId)},startup:function(){if(!this._started){if(this.inherited(arguments),"insert"!==this.mode&&this.listenForPageSave(),this.context&&this.context.workspace&&this.context.workspace.indexOf("TabWorkspace")<=-1){dojo.style(dojo.byId(this.id+"_Container"),"height","300px");dijit.byId(this.gridNodeId).resize()}if(this.amIInATab()&&this.isMyTabVisible()){var a=["#","element_",this.tabId," .formtable"].join("");if(dojo.query(a)[0]){var b=dojo.byId(this.id+"_Container");b||(b=dijit.byId(this.id).getParent(),b=b.domNode),dojo.style(b,"height","300px")}}}},destroy:function(){this.lookupControl&&this.lookupControl.destroy(!1),this.toolbar&&this.toolbar.destroy(!1),this.grid&&this.grid.destroy(!1),this.store&&this.store.destroy&&this.store.destroy(!1),this._registeredWidgets&&(s.forEach(this._registeredWidgets,function(a){a.destroy(!1)}),this._registeredWidgets=null),this.removePageSaveListener(),this.inherited(arguments)},_replaceStore:function(){dojo.forEach(this._dataChangeConnections,function(a){dojo.disconnect(a)}),this.store&&this.store.destroy&&this.store.destroy(!1),this.store=!1,this.store=this.getStore()},getStore:function(){if(this.store)return this.store;this.storeOptions.isInsertMode="insert"===this.mode;var a="insert"!==this.mode?new e(this.storeOptions):new f(this.storeOptions);return this.onDataChange&&this._dataChangeConnections.push(dojo.connect(a,"onSet",this.onDataChange)),a.onDataChange&&(this._dataChangeConnections.push(dojo.connect(a,"setValue",a.onDataChange)),this._dataChangeConnections.push(dojo.connect(a,"saveNewEntity",a.onDataChange)),this._dataChangeConnections.push(dojo.connect(a,"deleteItem",a.onDataChange)),this._dataChangeConnections.push(dojo.connect(a,"createItem",a.onDataChange))),this._dataChangeConnections.push(dojo.connect(a,"onSet",this,function(a,b,c,d){"insert"!==this.mode&&d&&(this.edit.info.cell&&this.edit.info.cell.widget&&!0===this.edit.info.cell.widget.returnObject?c.$key!==d.$key&&this.markDirty():c!==d&&this.markDirty())})),a},customKeyDown:function(a){this.applyEditOnEnter(a),this.navigateOnKeyDown(a)},navigateOnKeyDown:function(a){},applyEditOnEnter:function(a){13!=a.charOrCode&&13!=a.keyCode||(this.doApplyEdit(),this.edit.apply(),dojo.stopEvent(a))},createOwnToolbar:function(){var a=Sage.Services.getService("RoleSecurityService"),c=dijit.byId(this.gridNodeId);this.toolbar=new b({class:"right-tools",region:"top"}),c.addChild(this.toolbar);for(var d=0;d<this.tools.length;d++){var e=this.tools[d];if(!e.appliedSecurity||""===e.appliedSecurity||!a||a.hasAccess(e.appliedSecurity)){var f=!1;if("string"==typeof e)switch(e){case"add":f=new k({imageClass:"icon_plus_16x16",tooltip:this.addText,id:this.id+"_addBtn",onClick:i.hitch(this,function(){this.addNew()})});break;case"delete":f=new k({imageClass:"icon_Delete_16x16",tooltip:this.deleteText,id:this.id+"_delBtn",onClick:i.hitch(this,function(){this.deleteSelected()})});break;case"save":f=new k({imageClass:"icon_Save_16x16",tooltip:this.saveText,id:this.id+"_saveBtn",onClick:i.hitch(this,function(){this.saveChanges()})});break;case"cancel":f=new k({imageClass:"icon_Reset_16x16",tooltip:this.cancelText,id:this.id+"_cancelBtn",onClick:i.hitch(this,function(){this.cancelChanges()})})}else if(e.type&&"Sage.UI.SDataLookup"===e.type){var h=e.controlConfig||e;f=new g(h),this.lookupControl=f}else f=new k({icon:e.icon||"",imageClass:e.imageClass||"",id:e.id,onClick:i.hitch(e.scope||this,e.handler),tooltip:e.alternateText||e.tooltip});f&&(this.toolbar.addChild(f),f=!1)}}this.toolbar.startup()},addToolsToWorkspaceToolbar:function(){if(!this.readOnly){this.dirtyDataMsgID=this.tabId+"_dirtydatamsg";var a,b,c=q.create("span",{class:"grid-unsaveddata-msg",id:this.dirtyDataMsgID,style:"display:none;",content:this.editable?this.unsavedDataText:""});switch(this.context.workspace){case"Sage.Platform.WebPortal.Workspaces.Tab.TabWorkspace":if("insert"!==this.mode){var d=dojo.query("#element_"+this.tabId+" td.tws-tab-view-title");d.length>0&&dojo.place(c,d[0])}b=["element_",this.tabId].join(""),a=dojo.query(["#",b," td.tws-tab-view-tools-right"].join(""));break;case"Sage.Platform.WebPortal.Workspaces.MainContentWorkspace":"insert"!==this.mode&&dojo.place(c,dojo.query("#"+this.tabId+" span.mainContentHeaderTitle")[0]),b=this.tabId,a=dojo.query("#"+b+" td.mainContentHeaderToolsRight");break;case"Sage.Platform.WebPortal.Workspaces.DialogWorkspace":a=dojo.query("td.dialog-tools-right")}for(var e,f,h=Sage.Services.getService("RoleSecurityService"),j=0,l=0;l<this.tools.length;l++){e="";var m=this.tools[l];if(void 0!==m.mergeControlId&&0!==m.mergeControlId.length&&(f=dojo.query("[id$="+m.mergeControlId+"]",dojo.byId("element_"+this.tabId))[0],e=m.mergePosition.toLowerCase()),f||(f=a[0],e=""),("insert"!==this.mode||m.displayInInsert)&&(!m.appliedSecurity||""===m.appliedSecurity||!h||h.hasAccess(m.appliedSecurity))){if("string"==typeof m)switch(m){case"add":var n=this.id+"_addBtn",o=new k({id:n,imageClass:"icon_plus_16x16",onClick:i.hitch(this,this.addNew),tooltip:this.addText});this._registeredWidgets.push(o),dojo.place(o.domNode,a[0],j);break;case"delete":var p=this.id+"_delBtn",r=new k({id:p,tooltip:this.deleteText,imageClass:"icon_Delete_16x16",onClick:i.hitch(this,this.deleteSelected)});this._registeredWidgets.push(r),dojo.place(r.domNode,a[0],j);break;case"save":var s=this.id+"_saveBtn",t=new k({id:s,tooltip:this.saveText,imageClass:"icon_Save_16x16",onClick:i.hitch(this,this.saveChanges)});this._registeredWidgets.push(t),dojo.place(t.domNode,a[0],j);break;case"cancel":var u=this.id+"_cancelBtn",v=new k({id:u,tooltip:this.cancelText,imageClass:"icon_Reset_16x16",onClick:i.hitch(this,this.cancelChanges)});this._registeredWidgets.push(v),dojo.place(v.domNode,a[0],j)}else if(m.type&&"Sage.UI.SDataLookup"===m.type){var w=m.controlConfig||m,x=new g(w);dojo.place(x.domNode,f,j),this.lookupControl=x}else{var y=new k({id:m.id,icon:m.icon||"",imageClass:m.imageClass||"",onClick:i.hitch(m.scope||this,m.handler),tooltip:m.alternateText||m.tooltip});this._registeredWidgets.push(y),dojo.place(y.domNode,f,e.length>0?e:j)}j++}}}},addNew:function(a){this.store&&this.store.newItem(a)},addAssociatedItems:function(a,b,c,d){var e=this;"insert"!==j.getModeId()&&this.store.dirtyDataCache.isDirty?l.raiseQueryDialog("Infor CRM",this.dirtyDataMessage,function(f){f&&e.addSelectedItems(a,b,c,d)},this.okText,this.cancelText):e.addSelectedItems(a,b,c,d)},addSelectedItems:function(a,b,c,d){for(var e=[],f=this,g=0;g<a.length;g++){var h=!1;for(var i in f.store.dataCache){var k=f.store.dataCache[i];k[c]&&k[c].$key==a[g].$key&&(h=!0)}if(!h){var l={};"insert"!==j.getModeId()&&(l[b]={$key:j.getCurrentEntityId()}),l[c]={},j.extend(l[c],a[g]),delete l.$key,delete l.$name,delete l.$url,e.push(l)}}e.length>0&&f.createItems(e,function(){"insert"!==j.getModeId()&&__doPostBack("MainContent","")}),d&&d.lookupDialog.hide()},createItems:function(a,b){if(dojo.isArray(a))for(var c=this.store,d=a.length,e=function(a){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&(a&&void 0!==a&&a.getResponseHeader||a&&void 0!==a&&a.$httpStatus),this.currentCount===this.totalCount&&(this.grid.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(this.grid))},f={grid:this,totalCount:d,currentCount:0,onResponse:e,onComplete:b||null},g=0;g<a.length;g++)c.createItem(a[g],f);else l.showError(this.createItemsInvalidArrayText)},deleteSelected:function(a){var b=this.selection.getSelected();if(b.length<1)return void l.showError(this.noSelectionsText);if("insert"===this.mode||this.store._checkPageExitWarningMessage()){var c=this,d={title:"Infor CRM",query:dojo.string.substitute(this.confirmDeleteFmtTxt,[b.length]),callbackFn:function(d){c.deleteCallback(d,a,b)},yesText:this.buttonOk,noText:this.buttonCancel};l.raiseQueryDialogExt(d)}},deleteCallback:function(a,b,c){if(a){for(var d=this,e=this.store,f=0,g=0;g<c.length;g++)this.store.isItem(c[g])&&f++;d.selection.clear(),this.showLoading();var h=function(a,b){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&a&&void 0!==a&&a.getResponseHeader,this.currentCount===this.totalCount&&(d.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(d))},i={grid:d,totalCount:f,currentCount:0,onResponse:h,onComplete:b||null};for(g=0;g<c.length;g++)e.isItem(c[g])&&e.deleteItem(c[g],i);this.storeOptions.hasOwnProperty("clearStoreCacheOnDelete")&&!0!==this.storeOptions.clearStoreCacheOnDelete||e.clearCache()}},cancelChanges:function(){this.store&&this.store.revert&&(this.store.revert(),this.markClean(),this.refresh())},saveChanges:function(a){if(this.onBlur(),this.store.save){var b=0;for(var c in this.store.dirtyDataCache)if("isDirty"!==c){var d=this.store.dirtyDataCache[c];this.store.isItem(d)&&b++}var e=function(a,b){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&(a&&void 0!==a&&a.getResponseHeader||a&&void 0!==a&&a.$httpStatus),this.currentCount===this.totalCount&&(this.grid.markClean(),this.grid.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(this.grid))},f={grid:this,totalCount:b,currentCount:0,onResponse:e,onComplete:a||null};this.store.save(f)}},markClean:function(){if(this.dirtyDataMsgID){dojo.byId(this.dirtyDataMsgID)&&dojo.style(dojo.byId(this.dirtyDataMsgID),"display","none");var a=Sage.Services.getService("ClientBindingManagerService");a&&a.clearDirtyAjaxItem(this.id)}},markDirty:function(){var a=dojo.byId(this.dirtyDataMsgID);a&&dojo.style(a,"display","inline");var b=Sage.Services.getService("ClientBindingManagerService");b&&b.addDirtyAjaxItem(this.id)},refresh:function(){this.scroller&&(this._refresh(),this.onRefresh())},onRefresh:function(){}})})},"Sage/Data/WritableSDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e){return c("Sage.Data.WritableSDataStore",a,{newItemParentReferenceProperty:!1,constructor:function(a){this.features["dojo.data.api.Write"]=!0,this.features["dojo.data.api.Notification"]=!0,this.dirtyDataCache={isDirty:!1},this.singleResourceRequest=null,dojo.connect(this,"clearCache",this,this._clearCache),this.onComplete=a.onComplete},getSingleResourceRequest:function(a){return this.verifyService(),null===this.singleResourceRequest&&(this.singleResourceRequest=new Sage.SData.Client.SDataSingleResourceRequest(this.service),this.singleResourceRequest.setResourceKind(this.resourceKind),this.select&&this.select.length>0&&this.singleResourceRequest.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&this.singleResourceRequest.setQueryArg("include",this.include.join(","))),a&&this.singleResourceRequest.setResourceSelector("'"+a+"'"),this.singleResourceRequest},onSuccess:function(a,b){a.onBegin&&a.onBegin.call(a.scope||this,b.$totalResults,a),this.onComplete&&this.onComplete.call(a.scope||this,b.$resources,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a),this.addToCache(a,b)},_clearCache:function(){this.clearDirtyDataCache()},clearDirtyDataCache:function(){for(var a in this.dirtyDataCache)"isDirty"!==a&&delete this.dirtyDataCache[a];this.dirtyDataCache.isDirty=!1},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.dataCache.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},hasAttribute:function(a,b){return!(!this.isItem(a)||"string"!=typeof b)&&b in a},close:function(){this.clearCache()},deleteItem:function(a,b){var c={};c.scope=b||this,c.ignoreETag=!0;var d=this.getSingleResourceRequest(this.getIdentity(a));b&&"function"==typeof b.onResponse&&(c.success=b.onResponse,c.aborted=b.onResponse,c.failure=b.onResponse),d.delete(a,c)},isDirty:function(a){if(a){var b=this.getIdentity(a);if(b&&""!==b)return this.dirtyDataCache.hasOwnPropery(b)}return this.dirtyDataCache.isDirty},_checkPageExitWarningMessage:function(){var a=!0;if(this.dirtyDataCache.isDirty){var b=Sage.Services.getService("ClientBindingManagerService");a=confirm(b._PageExitWarningMessage)}return a},newItem:function(a){if(this._checkPageExitWarningMessage()){var b=this.createTemplateRequest();b&&b.read({success:function(b){this._newItemCreated(a,b),this.onNew(b)},failure:this.requestTemplateFailure,scope:this})}},_newItemCreated:function(a,b){if(this.newItemParentReferenceProperty){var c=Sage.Utility.getCurrentEntityId();b.hasOwnProperty(this.newItemParentReferenceProperty)&&c&&(b[this.newItemParentReferenceProperty]={$key:c})}a&&a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},createTemplateRequest:function(){var a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);return this.resourceKind&&""!==this.resourceKind&&a.setResourceKind(this.resourceKind),a},requestTemplateFailure:function(){},saveNewEntity:function(a,b,c,d){var e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e&&(this.resourceKind&&""!==this.resourceKind&&e.setResourceKind(this.resourceKind),e.create(a,{success:b||function(a){},failure:c||function(a,b){},scope:d||this}))},createItem:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(c){this.resourceKind&&""!==this.resourceKind&&c.setResourceKind(this.resourceKind);var d={};d.scope=b||this,d.scope.store=this;var e=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};d.success=e;var f=function(a,b){"function"==typeof this.onResponse?this.onResponse.call(this,a,b):"undefined"!=typeof console&&a&&void 0!==a&&a.status};d.failure=f,d.aborted=f,c.create(a,d)}},revert:function(){this.clearDirtyDataCache(),this.onDataReset()},save:function(a){var b,c;if(!this.dirtyDataCache.isDirty)return void(a&&"function"==typeof a.onComplete&&a.onComplete.call(a));for(var d in this.dirtyDataCache)if("isDirty"!==d){if(b=this.dirtyDataCache[d],this.isItem(b)){c=this.getSingleResourceRequest(d);var e={};e.scope=a||this,e.scope.store=this,this.isSecurityManager||(e.ignoreETag=!0);var f=function(a){this.store.dataCache[a.$key]&&(this.store.dataCache[a.$key].$etag=a.$etag),"function"==typeof this.onResponse&&this.onResponse.call(this,a)};e.success=f;var g=function(a,b){if("undefined"!=typeof console&&a&&void 0!==a&&a.responseText){var c=dojo.fromJson(a.responseText);if(c&&void 0!==c&&c.$key){var d=this.store.dataCache[c.$key];d&&d.$etag}}"function"==typeof this.onResponse&&this.onResponse.call(this,a,b)};e.failure=g,e.aborted=g,c.update(b,e)}delete this.dirtyDataCache[d]}this.dirtyDataCache.isDirty=!1,a&&"function"!=typeof a.onResponse&&"function"==typeof a.onComplete&&a.onComplete.call(a)},setValue:function(a,c,d){var e=this.getValue(a,c,"");return b.setValue(a,c,d),this.onSet(a,c,e,d),e!=d&&(this.dirtyDataCache[this.getIdentity(a)]=a,this.dirtyDataCache.isDirty=!0),!0},setValues:function(a,b,c){d.forEach(c,e.hitch(this,function(c){this.setValue(a,b,c)}))},unsetAttribute:function(a,b){alert("not implemented - unsetAttribute")},onSet:function(a,b,c,d){},onNew:function(a){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/Data/WritableStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Data.WritableStore",a,{isInsertMode:!1,constructor:function(a){d.mixin(this,a),this.features["dojo.data.api.Write"]=!0,this.features["dojo.data.api.Notification"]=!0,this.identityAttributes=["$cacheID"],this.dirtyDataCache={isDirty:!1},this.singleResourceRequest=null,a.hasOwnProperty("isInsertMode")||(this.isInsertMode="insert"===b.getModeId())},entry:"",fetch:function(a){var b={};if(b.$resources=[],a.isRender&&this.dataCarrierId){var c=dojo.query([".",this.dataCarrierId].join(""));if(c[0].value.length>0){var e=dojo.fromJson(c[0].value);this.addItemsToCache(a,e.$resources)}}for(var f in this.dataCache)this.dataCache.hasOwnProperty(f)&&"query"!==f&&b.$resources.push(this.dataCache[f]);if(this.setContext(a),this.verifyService(),this.isInsertMode){var g=this;return void window.setTimeout(function(){g.onSuccess(a,b)},5)}var h=new Sage.SData.Client.SDataResourceCollectionRequest(this.service).setResourceKind(this.resourceKind).setStartIndex(a.start+1).setCount(a.count),i="";this.query&&(a.query||(a.query={}),d.mixin(a.query,this.query)),a.query&&("function"==typeof a.query?i=a.query():"string"==typeof a.query?i=a.query:"object"==typeof a.query&&(a.query.hasOwnProperty("fn")&&(i=a.query.fn.call(a.query.scope||this)),a.query.hasOwnProperty("conditions")&&"string"==typeof a.query.conditions&&(i+=i.length>0?" and "+a.query.conditions:a.query.conditions))),a.evaluatedQuery=i||"",i&&""!==i&&h.setQueryArg("where",i),this.select&&this.select.length>0&&h.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&h.setQueryArg("include",this.include.join(","));var j=h.read({success:d.hitch(this,this.onSuccess,a),failure:d.hitch(this,this.onFailure,a)});return{abort:d.hitch(this,this.abortRequest,j)}},onSuccess:function(a,b){""===this.entry&&(this.entry=b),a.onBegin&&a.onBegin.call(a.scope||this,b.$resources.length,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a)},addToCache:function(a,b,c){var d;c=void 0===c?11*Math.random():c,this.isInsertMode&&(b.$cacheID=(new Date).getTime()+c),d=this.getIdentity(b),this.dataCache[d]=b},addItemsToCache:function(a,b){for(var c=0;c<b.length;c++)this.addToCache(a,b[c],c)},clearCache:function(){this.inherited(arguments),this.clearDirtyDataCache()},clearDirtyDataCache:function(){for(var a in this.dirtyDataCache)"isDirty"!==a&&delete this.dirtyDataCache[a];this.dirtyDataCache.isDirty=!1},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.dataCache.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},hasAttribute:function(a,b){return!(!this.isItem(a)||"string"!=typeof b)&&b in a},close:function(){this.clearCache()},deleteItem:function(a,b){var c=this.getIdentity(a);c&&""!==c&&delete this.dataCache[c];var d={};d.scope=b||this;var e=function(){"function"==typeof this.onResponse&&this.onResponse.call(this)};d.success=e,d.success.call(d.scope)},isDirty:function(a){if(a){var b=this.getIdentity(a);if(b&&""!==b)return this.dirtyDataCache.hasOwnPropery(b)}return this.dirtyDataCache.isDirty},newItem:function(a){var b=this.createTemplateRequest();b&&b.read({success:function(b){a&&a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:this.requestTemplateFailure,scope:this})},createTemplateRequest:function(){var a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);return this.resourceKind&&""!==this.resourceKind&&a.setResourceKind(this.resourceKind),a},requestTemplateFailure:function(){},saveNewEntity:function(a,b,c,d){this.addToCache(d,a),b()},createItem:function(a,b){var c={};c.scope=b||this,c.scope.store=this;var d=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};c.success=d,this.addToCache(b,a),c.success.call(c.scope,a)},revert:function(){this.clearDirtyDataCache(),this.onDataReset()},setValue:function(a,c,d){var e=this.getValue(a,c,"");return b.setValue(a,c,d),this.onSet(a,c,e,d),!0},setValues:function(a,b,c){alert("not implemented - setValues")},unsetAttribute:function(a,b){alert("not implemented - unsetAttribute")},dataCacheToArray:function(){var a=[];for(var b in this.dataCache)this.dataCache.hasOwnProperty(b)&&"query"!==b&&a.push(this.dataCache[b]);return a},onDataChange:function(){this.clearDirtyDataCache();var a=dojo.query([".",this.dataCarrierId].join(""));a[0]&&(this.entry.$resources=this.dataCacheToArray(),a[0].value=JSON.stringify(this.entry))},onSet:function(a,b,c,d){},onNew:function(a,b){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/UI/SDataLookup":function(){define(["dojo/_base/html","dijit/Dialog","dijit/form/Button","Sage/UI/ComboBox","Sage/Data/SDataServiceRegistry","Sage/UI/ConditionManager","Sage/Utility","Sage/_Templated","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Phone","Sage/UI/Controls/GridParts/Columns/PickList","dijit/_Widget","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/i18n!./nls/SDataLookup","dojo/_base/declare","Sage/UI/Controls/Grid","Sage/Store/SData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(){g||Sage.namespace("Utility"),g.addToListUnique=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return;b.push(a)},g.SDataLookupChildObjectFormatter=function(a){var b,c,d=a;if(!d||!d[a.childentity]||0===d[a.childentity].$resources.length)return dojo.string.substitute('<div style="text-indent:16px">${0}</div>',[a.value||"&nbsp;"]);for(a.value=a.value||"&nbsp;",b=[],a.includeButton&&b.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[a.value,a.rowIdx])),b.push(dojo.string.substitute('${0}<div class=SOProw${1} style="display:none">',[a.value,a.rowIdx])),c=0;c<d[a.childentity].$resources.length;c++)b.push(dojo.string.substitute('<div style="text-indent:2em">${0}</div>',[d[a.childentity].$resources[c][a.fieldName]||"&nbsp;"]));return b.push("</div>"),b.join("")}}(),p("Sage.UI.SDataLookup",[l,h],{config:null,grid:null,sdataStore:null,conditionMgr:null,structure:null,displayMode:5,lookupDialog:null,dialogTitle:"",dialogWidth:675,dialogHeight:500,seedOnRowEntity:!1,seedOnRelatedEntity:"",seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!1,preFilters:null,initializeLookup:!0,rowEntityId:"",relatedEntityId:"",returnObject:!0,addEmptyListItem:!1,fields:null,query:null,callerId:null,widgetsInTemplate:!0,storeOptions:null,gridOptions:null,sortColumn:"",newlyAddedItems:null,displayModes:{DropDownList:0,Dialog:1,HyperText:2,Text:3,ButtonOnly:4,ButtonOnlyClient:5},btnIcon:"images/icons/plus_16x16.gif",isModal:!1,_addCondHandle:null,_removeCondHandle:null,_originalQueryConditions:"",id:"lookupControl",dialogContent:new Simplate(["<div >",'<div style="padding:5px;" id="{%= $.id %}-Condition-container"></div>','<div id="{%= $.id %}-Grid-container" style="width:auto;height:{%= $.gridHeight %}px;"></div>','<div class="lookupButtonWrapper">',"{% if($.dialogButtonText){ %}",'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-GridSelectButton" ',"onClick=\"dijit.byId('{%= $.id %}').getGridSelections(); \">","{%= $.dialogButtonText %} </button>","{% } %}",'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-CloseButton" ',"onClick=\"dijit.byId('{%= $.id %}').doOnClose();\">{%= $.hideText %}</button>","</div>","</div> "]),constructor:function(){this.gridOptions={},this.storeOptions={rowsPerPage:20,include:[],select:["Id"],sort:[]},this.preFilters=[],this.newlyAddedItems=[],this.query={},this.config={},this.fields=[],this.structure=[],this.grid=[],this.sdataStore=[]},postMixInProperties:function(){var a,b;this._initialized=!1,n.mixin(this,dojo.i18n.getLocalization("Sage.UI","SDataLookup")),"string"==typeof this.displayMode&&(this.displayMode=this.displayModes[this.displayMode]),a={rowsPerPage:20,include:[],sort:[],select:["Id"]},0===this.displayMode?(this.initSDataStore(),this.buildSDataStoreQueryConditions()):("function"==typeof this.gridOptions.contextualCondition?(this.query={fn:this.gridOptions.contextualCondition,scope:this},this.query.conditions=this.query.fn()):"object"==typeof this.gridOptions.contextualCondition&&this.gridOptions.contextualCondition.fn&&(this.ensureValue(this.gridOptions.contextualCondition,"scope",this),this.query=this.gridOptions.contextualCondition,this.query.conditions=this.gridOptions.contextualCondition.fn()),this.buildSDataStoreQueryForSeeding()),b={rowsPerPage:20,loadingMessage:this.loadingText,noDataMessage:this.noDataText,where:this.query,selectionMode:this.selectionMode,columnHiding:!0,columnResizing:!0,columnReordering:!1,rowSelection:!0,setUserPreferences:!1,showHiderIcon:!1},this._originalQueryConditions=this.query.conditions,this.storeOptions=g.extend(!0,a,this.storeOptions),this.gridOptions=g.extend(!1,b,this.gridOptions),this.widgetTemplate=new Simplate(this.setTemplate(this.displayMode))},setTemplate:function(a){var b=['<div id="{%= $.id %}" style="width:inherit;" > ','<select style="width:inherit;"  id="{%= $.id %}_select" searchAttr="{%= $.field %}" labelAttr="{%= $.field %}" ',' dojoAttachPoint="focusNode" autoComplete="true" required="{%= $.required %}" data-dojo-type="Sage.UI.ComboBox" value="{%= $.setSelectedValue() %}" ',' store="dijit.byId(\'{%= $.id %}\').sdataStore" name="{%= $.field %}">',"</select>","</div>"],c=['<img style="cursor: pointer; margin: 4px;" '," onclick=\"dijit.byId('{%= $.id %}').showLookup();\" ",'src="{%= $.btnIcon %}" alt="{%= $.btnToolTip %}" title="{%= $.btnToolTip %}" >'];switch(a){case 0:return b;case 5:default:return c}},initDialog:function(){this.initConditionManager(),this.initSDataStore(),
this._setQueryForLoad(),this.initGrid(this.initializeLookup),this.lookupDialog.onCancel=this.closeCrossBtnEvent},_setQueryForLoad:function(){var a=this.conditionMgr.getConditionsAsUrlWhereString(),b=this._originalQueryConditions,c="",d=[];d.push(a),d.push(b),d=dojo.filter(d,function(a,b,c){return a&&""!==a}),(c=d.join(" and "))&&(this.gridOptions.where.conditions=c)},_setQueryForSearch:function(){var a=this.conditionMgr.getConditionsAsUrlWhereString(),b=this._originalQueryConditions,c="",d=[];return this.isSeeded()&&!1===this.overrideSeedValueOnSearch?(d.push(a),d.push(b)):this.isSeeded()?d.push(a):(d.push(a),d.push(b)),d=dojo.filter(d,function(a,b,c){return a&&""!==a}),c=d.join(" and "),this.gridOptions.where.conditions=c,c},doLookup:function(){this.grid.destroy(!1),this._setQueryForSearch(),this.initGrid(!0)},setSelectedValue:function(){var a,b,c,d=null!==this.value?this.value:"";if(this.returnObject&&null!==this.value){for(a=this.field.split("."),b=this.value,c=0;c<a.length;c++)b&&(b=b[a[c]]);d=b}return d},getGridSelections:function(){var a=this.grid.getSelectedRowData();if(0!==a.length){if(a.length>0)for(var b=0;b<a.length;b++)this.newlyAddedItems.push(a[b]);this.doSelected(a),this.grid.clearSelection()}},closeCrossBtnEvent:function(){var a=this.id.split("-");dijit.byId(a[0]).doOnClose()},onClose:function(a){},doOnClose:function(){var a=this.newlyAddedItems;this.onClose(a),this.lookupDialog.hide()},initConditionManager:function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r;if(!this.conditionMgr){for(a=function(a,b,c,d,e,f){var g;for(g=0;g<f.length;g++)if(a===f[g].fieldname)return;f.push({fieldName:a,displayName:b,propertyType:c,pickListName:d,pickListStorageMode:e})},b=this.structure,c=this.fields,i=0;i<b.length;i++)!0!==b[i].excludeFromFilters&&b[i].field&&(j=b[i],d=j.field,g=j.propertyType,e=j.displayField||j.label,h=j.pickListName,r=j.pickListStorageMode,a(d,e,g,h,r,c));for(k={fields:c,fieldNameProperty:"fieldName",fieldDisplayNameProperty:"displayName",fieldTypeProperty:"propertyType",id:this.id+"-ConditionManager"},this.conditionMgr=new f(k),this,this.preFilters.length>0&&this.conditionMgr.setFirstConditionValue("","=",""),l=0;l<this.preFilters.length;l++)m=this.preFilters[l],n=m.propertyName.trim(),o=m.conditionOperator.trim(),p=m.filterValue.trim(),q=m.visible,this.conditionMgr.addCondition(n,o,p,q);dojo.place(this.conditionMgr.domNode,dojo.byId(this.id+"-Condition-container"),"only"),this._doSearchConnection=dojo.connect(this.conditionMgr,"onDoSearch",this,"doLookup")}},onDoubleClick:function(a){this.getGridSelections()},_formatStructure:function(){var a,b;if(this.structure){for(a=this.structure,b=0;b<a.length;b++){if(a[b]&&a[b].type&&"string"==typeof a[b].type)switch(a[b].type){case"Sage.UI.Columns.DateTime":a[b].type=i;break;case"Sage.UI.Columns.Phone":a[b].type=j;break;case"Sage.UI.Columns.PickList":a[b].type=k;break;default:delete a[b].type}!0===a[b].hidden&&(a[b].unhidable=!0)}this.structure=a}},initGrid:function(a){this._formatStructure();var b=n.clone(this.structure),c=dijit.byId([this.id,"-Grid"].join(""));if(c)this.query.conditions!==c.store.where?(c.destroy(),this.initGrid(a)):this.grid=c;else{if(this.sdataStore.sort&&this.sdataStore.sort.length>0){var d=[];d.push(this.sdataStore.sort[0]),this.gridOptions.sort=d}a?"string"==typeof this.gridOptions.where?this.sdataStore.where=this.gridOptions.where:"object"==typeof this.gridOptions.where&&(void 0!==this.gridOptions.where.conditions?this.sdataStore.where=this.gridOptions.where.conditions:"function"==typeof this.gridOptions.where.fn&&(this.sdataStore.where=this.gridOptions.where.fn())):this.sdataStore.where="Id like '_hack_'",this.gridOptions.store=new r(this.sdataStore),this.gridOptions.columns=b,this.gridOptions.id=[this.id,"-Grid"].join(""),this.gridOptions.placeHolder=[this.id,"-Grid-container"].join(""),this.grid=new q(this.gridOptions),this.grid.resize(),this.grid.onRowDblClick=n.hitch(this,function(a){this.onDoubleClick(a.id,a.data)})}},resetGrid:function(){var a=dijit.byId([this.id,"-Grid"].join(""));a&&a.destroy()},initSDataStore:function(){var a,b,c,d,f,h=this.structure,i=this.storeOptions.select||[],j=this.storeOptions.include||[];for(b=0;b<h.length;b++)if(h[b].field&&(a=h[b].field,h[b].displayField&&(a=a+"."+h[b].displayField),g.addToListUnique(a.replace(/\./g,"/"),i),h[b].field.indexOf(".")>0))for(c=h[b].field.split("."),d="",f=0;f<c.length-1;f++)d+=c[f],g.addToListUnique(d,j),d+="/";this.storeOptions.include=j,this.storeOptions.select=i,this.storeOptions.service=e.getSDataService("dynamic"),this.sdataStore=this.storeOptions},isSeeded:function(){return"string"==typeof this.seedValue&&""!==this.seedValue&&""!==this.seedProperty},buildSDataStoreQueryForSeeding:function(){var a,b,c;this.isSeeded()&&(b=dojo.string.substitute('${0} eq "${1}"',[this.seedProperty,this.seedValue]),c=this.query.conditions,a=c&&""!==c?c+" and "+b:b,this.sdataStore.where=a,this.query.conditions=a)},buildSDataStoreQueryConditions:function(){var a;this.seedOnRowEntity&&(this.sdataStore.where=dojo.string.substitute('Id eq "${0}"',[this.rowEntityId])),""!==this.seedOnRelatedEntity&&(this.sdataStore.where=dojo.string.substitute(' ${0}.Id eq "${1}" ',[this.seedOnRelatedEntity,this.relatedEntityId])),"function"==typeof this.gridOptions.contextualCondition&&(a={fn:this.gridOptions.contextualCondition,scope:this},this.sdataStore.where=g.extend(!0,this.sdataStore.directQuery,a))},render:function(){dojo.place(this.domNode,this.renderTo)},canShowLookup:function(){return"function"==typeof this.gridOptions.contextualShow?this.gridOptions.contextualShow():{result:!0,reason:""}},showLookup:function(){var a,c,d="The lookup cannot be displayed because one or more conditions have not been met.",e=this.canShowLookup(),f=this,g="";if("object"!=typeof e)return void Sage.UI.Dialogs.showError("The call to the function canShowLookup() returned an invalid result.");"boolean"==typeof e.result&&e.result?(a=f.dialogHeight>0?f.dialogHeight:450,c=f.dialogWidth>0?f.dialogWidth:700,f.lookupDialog=dijit.byId([f.id,"-Dialog"].join("")),f.lookupDialog?(f.dialogHeight=a,dojo.style([f.id,"-Dialog"].join(""),"height",a+"px")):(f.lookupDialog=new b({title:f.dialogTitle,id:[f.id,"-Dialog"].join(""),style:["height:",a,"px;width:",c,"px;"].join(""),refreshOnShow:!1,_onKey:this._onKey}),f.dialogHeight=a,f.dialogWidth=c,g=f.isModal?f.cancelText:f.closeText,f.lookupDialog.set("content",f.dialogContent.apply({hideText:g,dialogButtonText:f.dialogButtonText,id:f.id,gridHeight:a-150})),n.mixin(f.lookupDialog,new m),f.lookupDialog.createHelpIconByTopic("findlookup")),f.lookupDialog.show(),this.isModal||dojo.destroy([f.id,"-Dialog_underlay"].join("")),dojo.style([f.id,"-Dialog"].join(""),"top","60px"),dojo.style([f.id,"-Dialog"].join(""),"left","300px"),f.initDialog()):("string"==typeof e.reason&&0!==e.reason.length&&(d=e.reason),Sage.UI.Dialogs.showError(d))},doSelected:function(a){},_onKey:function(a){var b=this,c=arguments;dojo.query("*",this.domNode).forEach(function(d,e,f){d===a.target&&b.inherited(c)})},destroy:function(){var a=dijit.byId([this.id,"-Dialog"].join(""));this.btnIcon&&dojo.destroy(this.btnIcon),dojo.disconnect(this._doSearchConnection),dojo.unsubscribe(this._addCondHandle),dojo.unsubscribe(this._removeCondHandle),this.conditionMgr&&this.conditionMgr.destroy(!1),a&&a.uninitialize(),this.inherited(arguments)}})})},"Sage/UI/ComboBox":function(){define(["dijit/form/ComboBox","dojo/currency","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.ComboBox",[a],{_hClickBody:!1,maxHeight:dojo.isIE?160:170,shouldPublishMarkDirty:!0,autoPostBack:!1,_onKeyPress:function(a){dojo.stopEvent(a)},postCreate:function(){this.connect(this,"onChange",this.onChanged),this.inherited(arguments)},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.id,"")}})})},"Sage/UI/ConditionManager":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/Select","dijit/form/Button","Sage/UI/ImageButton","Sage/UI/SearchConditionWidget","Sage/Utility","dojo/i18n!./nls/ConditionManager","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.UI.ConditionManager",[b,a],{widgetsInTemplate:!0,srchBtnCaption:"Search",addrowlabel:"Lookup by:",hiderowlabel:"And:",hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",hideimgalttext:"Remove Condition",addimgalttext:"Add Condition",errorOperatorRequiresValue:"The operator requires a value",operators:null,fields:null,fieldsHash:null,fieldNameProperty:"fieldname",fieldDisplayNameProperty:"displayname",fieldTypeProperty:"propertyType",fieldPickListNameProperty:"pickListName",conditionWidgets:null,widgetConnects:null,widgetTemplate:new Simplate(['<div id="{%= $.id %}" class="lookup-condition-manager">','<table cellspacing="0" cellpadding="3">','<tr><td><div dojoAttachPoint="conditions"></div></td></tr>',"</table>",'<div class="lookup-condition-actions">','<button id="{%= $.id %}-Search" data-dojo-type="dijit.form.Button" type="button" dojoAttachPoint="searchButton" dojoAttachEvent="onClick:_doSearch">{%= $.srchBtnCaption %}</button>',"</div>","</div>"]),isSettingValues:!1,id:"",defaultOperator:null,defaultField:null,defaultValue:null,constructor:function(){this.conditionWidgets={},this.operators={},this.fieldsHash={},this.fields=[],this.widgetConnects=[]},destroy:function(){var a,b;for(b=0;b<this.widgetConnects.length;b++)dojo.disconnect(this.widgetConnects[b]);for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&this.conditionWidgets[a].destroy&&this.conditionWidgets[a].destroy();this.inherited(arguments)},postMixInProperties:function(){dojo.mixin(this,h),this.inherited(arguments)},getOperatorsByField:function(a){var b,c,d,e,f;return b=[{value:"eq",label:this.equalTo,selected:!1,disabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1}],c=[{value:"sw",label:this.startingWith,selected:!1,disabled:!1},{value:"like",label:this.contains,selected:!1,diabled:!1},{value:"eq",label:this.equalTo,selected:!1,diabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1},{value:"le",label:this.equalOrLessThan,selected:!1,diabled:!1},{value:"ge",label:this.equalOrGreaterThan,selected:!1,diabled:!1},{value:"lt",label:this.lessThan,selected:!1,diabled:!1},{value:"gt",label:this.greaterThan,selected:!1,diabled:!1}],d=[{value:"eq",label:this.equalTo,selected:!1,diabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1},{value:"le",label:this.equalOrLessThan,selected:!1,diabled:!1},{value:"ge",label:this.equalOrGreaterThan,selected:!1,diabled:!1},{value:"lt",label:this.lessThan,selected:!1,diabled:!1},{value:"gt",label:this.greaterThan,selected:!1,diabled:!1}],e=[{value:"eq",label:this.equalTo,selected:!1,diabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1}],f={"System.Boolean":{options:b},Boolean:{options:b},"System.String":{options:c},"SalesLogix.PickList":{options:e},"Sage.Entity.Interfaces.UserType":{options:d},"Sage.Entity.Interfaces.OwnerType":{options:d},"System.DateTime":{options:d},DateTime:{options:d},Phone:{options:c},User:{options:c},Owner:{options:c},"System.Double":{options:d},"System.Int32":{options:d},"System.Int16":{options:d},"System.Decimal":{options:d},Fixed:{options:d},Decimal:{options:d},Integer:{options:d},"Positive Integer":{options:d},Currency:{options:d},Percent:{options:d},defaultOperators:{options:c},None:{options:c}},a.hasOwnProperty(this.fieldTypeProperty)&&f.hasOwnProperty(a[this.fieldTypeProperty])?f[a[this.fieldTypeProperty]].options:f.defaultOperators&&f.defaultOperators.options},getConditionsAsUrlWhereString:function(){var a,b,c,d,e,f,h,i=this.getConditions(),j=[],k=null;for(a=0;a<i.length;a++){if(k=i[a].val,"string"==typeof k&&(k=k.replace(/%/g,"")),k.constructor===Date){if("eq"===i[a].operator||"ne"===i[a].operator){c=k,d=k,c.setHours(0),c.setMinutes(0),c.setSeconds(0),e=g.Convert.toIsoStringFromDate(c),d.setHours(23),d.setMinutes(59),d.setSeconds(59),f=g.Convert.toIsoStringFromDate(d),h={field:i[a].fieldname,leftOp:"gt",leftVal:e,rightOp:"lt",rightVal:f,join:"and"},"ne"===i[a].operator&&(h.leftOp="lt",h.rightOp="gt",h.join="or"),j.push(dojo.string.substitute("(${field} ${leftOp} '${leftVal}' ${join} ${field} ${rightOp} '${rightVal}')",h));continue}"le"===i[a].operator||"gt"===i[a].operator?(k.setHours(23),k.setMinutes(59),k.setSeconds(59)):"ge"!==i[a].operator&&"lt"!==i[a].operator||(k.setHours(0),k.setMinutes(0),k.setSeconds(0)),k=g.Convert.toIsoStringFromDate(k)}b={field:i[a].fieldname,op:i[a].operator,val:k};var l=this.getField(i[a].fieldname);l&&"SalesLogix.PickList"===l.propertyType&&"object"==typeof k&&k[0]&&(b.val=k[0]),"like"===b.op?b.val=["%",b.val,"%"].join(""):"sw"===b.op&&(b.op="like",b.val+="%"),"string"==typeof b.val&&(b.val=['"',b.val.toUpperCase(),'"'].join(""),b.field=["upper(",b.field,")"].join("")),j.push([b.field," ",b.op," ",b.val].join(""))}return j.join(" and ")},getField:function(a){return!(!this.fieldsHash||!this.fieldsHash.hasOwnProperty(a))&&this.fieldsHash[a]},getConditionsJSON:function(){var a,b,c,d=this.getConditions(),e=d.length;for(a=0;a<e;a++){if(c=d[a],b=d[a].val,b.constructor===Date){b="D"===this.getField(c.fieldname).dateTimeType?g.Convert.toIsoStringFromDateNonUTC(b):g.Convert.toIsoStringFromDate(b)}d[a].val=b}return Sys.Serialization.JavaScriptSerializer.serialize(d)},getConditions:function(){var a,b,c=[];for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&this.conditionWidgets[a].getCondition&&(b=this.conditionWidgets[a].getCondition())&&("$key"===b.fieldname&&(b.fieldname="id"),c.push(b));return c},resetConditions:function(){var a,b;for(b=0;b<this.widgetConnects.length;b++)dojo.disconnect(this.widgetConnects[b]);for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&this.conditionWidgets[a].getCondition&&this._removeCondition(this.conditionWidgets[a]);this._setInitialCondition()},_doSearch:function(){this.onDoSearch(this.getConditions())},_setFieldsAttr:function(a){var b;for(this.fields=a,this.fieldsHash={},b=0;b<a.length;b++)this.fieldsHash[a[b][this.fieldNameProperty]]=a[b];this.resetConditions()},setFirstConditionValue:function(a,b,c){var d,e;this.defaultOperator=b,this.defaultField=a,this.defaultValue=c;for(d in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(d)&&(e=this.conditionWidgets[d],e.isFirstCondition&&(e.defaultOperator=b,e.defaultField=a,e.defaultValue=c,e.refreshDefaults()))},addCondition:function(a,b,c,d){var e=this._conditionCount(),g=new f({conditionManager:this,label:this.hiderowlabel,isFirstCondition:!1,defaultField:a,defaultOperator:b,defaultValue:c,id:this.id+"-SearchCondition"+e,visible:d});this.widgetConnects.push(dojo.connect(g,"onRemoveLookupCondition",this,"_removeCondition")),dojo.place(g.domNode,this.conditions),g.startup(),this.conditionWidgets[g.id]=g},_setInitialCondition:function(){var a=this,b=new f({conditionManager:a,label:a.addrowlabel,isFirstCondition:!0,id:a.id+"-SearchCondition0",visible:!0});this.widgetConnects.push(dojo.connect(b,"onAddLookupCondition",a,"_addCondition")),a.conditionWidgets[b.id]=b,dojo.place(b.domNode,a.conditions),b.startup()},_addCondition:function(){var a=this._conditionCount(),b=new f({conditionManager:this,label:this.hiderowlabel,isFirstCondition:!1,id:this.id+"-SearchCondition"+a,visible:!0});this.defaultField&&(b.defaultField=this.defaultField),this.defaultOperator&&(b.defaultOperator=this.defaultOperator),this.defaultValue&&(b.defaultValue=this.defaultValue),b.refreshDefaults(),this.widgetConnects.push(dojo.connect(b,"onRemoveLookupCondition",this,"_removeCondition")),this.conditionWidgets[b.id]=b,dojo.place(b.domNode,this.conditions),b.startup()},_removeCondition:function(a){var b=a.id;a.destroyRecursive(),delete this.conditionWidgets[b]},_conditionCount:function(){var a,b=0;for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&(b+=1);return b},onDoSearch:function(a){}})})},"Sage/UI/ImageButton":function(){define(["dijit/form/Button","dijit/_Widget","dojo/text","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/ImageButton.html"],function(a,b,c,d,e,f){return e("Sage.UI.ImageButton",a,{hoverText:"",templateString:f,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},tooltip:"",_setTooltipAttr:{node:"titleNode",type:"attribute",attribute:"title"},alt:"",_setAltAttr:{node:"valueNode",type:"attribute",attribute:"title"},postMixInProperties:function(){this.hasImageClass()&&this.hasIcon()?this.icon=this._blankGif:this.icon=this.icon||this._blankGif,this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.hasImageClass()?(this.set("icon",this._blankGif),d.set(this.iconNode,"display","none")):d.set(this.iconNodeSprite,"display","none")},hasImageClass:function(){return!(!this.imageClass||"noIcon"===this.imageClass)},hasIcon:function(){return!(!this.icon||this.icon===this._blankGif)},_onButtonClick:function(a){}})})},"Sage/UI/SearchConditionWidget":function(){define("Sage/UI/SearchConditionWidget",["dojo/parser","dojo/i18n","dojo/_base/lang","dojo/has","dojo/_base/array","dijit/_Widget","dijit/form/Button","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/DateTextBox","Sage/_Templated","Sage/UI/ImageButton","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/Phone","dojo/i18n!./nls/SearchConditionWidget","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return r("Sage.UI.SearchConditionWidget",[f,l],{widgetsInTemplate:!0,isFirstCondition:!1,conditionManager:!1,label:"",defaultOperator:null,defaultField:null,defaultValue:null,id:"",_valueBox:null,visible:!0,_loaded:!1,trueText:"true",falseText:"false",networkText:"Network",remoteText:"Remote",webText:"Web",webViewerText:"Web Viewer",concurrentText:"Concurrent",retiredText:"Retired",templateText:"Template",addonText:"Addon",adminText:"Admin",userText:"User",teamText:"Team",departmentText:"Department",systemText:"System",propertyTypeHandler:{},widgetTemplate:new Simplate(['<div id="{%= $.id %}" class="lookup-condition-row" dojoAttachPoint="_conditionRow">','<label class="slxlabel lookupLabel">',"{%= $.label %}","</label>",'<select id="{%= $.id %}_fieldName" name="{%= $.id %}_fieldName" dojoAttachPoint="_fieldNameSelect" data-dojo-type="dijit.form.Select" style="width:150px">',"{% for (var i=0; i < $.conditionManager.fields.length;i++) { %}",'<option id="{%= $.id %}_fieldOption{%= i %}" value="{%= $.conditionManager.fields[i][$.conditionManager.fieldNameProperty] %}">{%= $.conditionManager.fields[i][$.conditionManager.fieldDisplayNameProperty] %}</option>',"{% } %}","</select>",'<select id="{%= $.id %}_operators" name="{%= $.id %}_operators" dojoAttachPoint="_operatorSelect" data-dojo-type="dijit.form.Select" style="width:130px">',"</select>",'<div style="display: inline;" class="searchConditionInput" dojoAttachPoint="_inputWidgetPlaceHolder"></div>','<div class="conditionButton">',"{% if ( $.isFirstCondition ) { %}",'<div id="{%= $.id %}-AddImageButton" data-dojo-type="Sage.UI.ImageButton" icon="{%= $.conditionManager.addimgurl %}" tooltip="{%= $.conditionManager.addimgalttext %}" dojoAttachPoint="_addConditionButton" dojoAttachEvent="onClick:_addLookupCondition"></div>',"{% } else { %}",'<div id="{%= $.id %}-RemoveImageButton" data-dojo-type="Sage.UI.ImageButton" icon="{%= $.conditionManager.hideimgurl %}" tooltip="{%= $.conditionManager.hideimgalttext %}" dojoAttachPoint="_removeConditionButton" dojoAttachEvent="onClick:_removeLookupCondition"></div>',"{% } %}","</div>","</div>"]),constructor:function(a){q&&(this.trueText=q.trueText,this.falseText=q.falseText,this.networkText=q.networkText,this.remoteText=q.remoteText,this.webText=q.webText,this.webViewerText=q.webViewerText,this.concurrentText=q.concurrentText,this.retiredText=q.retiredText,this.templateText=q.templateText,this.addonText=q.addonText,this.adminText=q.adminText,this.userText=q.userText,this.teamText=q.teamText,this.departmentText=q.departmentText,this.systemText=q.systemText),this.registerTypeHandlers()},registerTypeHandlers:function(){this.propertyTypeHandler.default={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<input id="{%= $.id %}-TextValue" data-dojo-type="dijit.form.TextBox" dojoAttachPoint="_valueBox" />']}},this.propertyTypeHandler["System.Boolean"]={getValue:function(){return"true"===this._valueBox.value},getTemplate:function(){return['<select id="{%= $.id %}-SelectValue" class="dijitDropDown" data-dojo-type="dijit.form.Select" dojoAttachPoint="_valueBox">','<option id="{%= $.id %}-BooleanOptionTrue" value="true">{%= $.trueText %}</option>','<option id="{%= $.id %}-BooleanOptionFalse" value="false">{%= $.falseText %}</option>',"</select>"]}},this.propertyTypeHandler.Boolean={getValue:function(){return"true"===this._valueBox.value?"T":"F"},getTemplate:function(){return c.hitch(this,this.propertyTypeHandler["System.Boolean"].getTemplate)()}},this.propertyTypeHandler["SalesLogix.PickList"]={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<select id="{%= $.id %}-PickValue" class="dijitDropDown" ','data-dojo-type="Sage.UI.Controls.DropDownSelectPickList" ','dojoAttachPoint="_valueBox" ','pickListName="{%= $.pickListName %}" ','storeMode="{%= $.pickListStorageMode %}" ','style="display: inline-block"',"/>"]}},this.propertyTypeHandler["System.DateTime"]={getValue:function(){var a=this._valueBox.value;return isNaN(Date.parse(a))?null:a},getTemplate:function(){return['<input data-dojo-type="dijit.form.DateTextBox" id="{%= $.id %}-Date" dojoAttachPoint="_valueBox" constraints="{locale:Sys.CultureInfo.CurrentCulture.name}"',"/>"]}},this.propertyTypeHandler.DateTime=this.propertyTypeHandler["System.DateTime"],this.propertyTypeHandler.Fixed={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<input id="{%= $.id %}-NumericValue" data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_valueBox" constraints="{ type: \'decimal\' }" value="0" name="{%= $.id %}-NumberValue" />']}},this.propertyTypeHandler.Integer=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["Positive Integer"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler.Percent=this.propertyTypeHandler.Fixed,this.propertyTypeHandler.Currency=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Int32"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Double"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Decimal"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Int16"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler.Phone={getValue:function(){return this._valueBox.get("unformattedValue")},getTemplate:function(){return['<input id="{%= $.id %}-PhoneValue" data-dojo-type="Sage.UI.Controls.Phone" shouldPublishMarkDirty="false" dojoAttachPoint="_valueBox" />']}},this.propertyTypeHandler.User={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<select id="{%= $.id %}-UserValue" ','data-dojo-type="Sage.UI.Controls.DropDownSelectUser" ','dojoAttachPoint="_valueBox" ','style="display: inline-block;" ',"></select>"]}},this.propertyTypeHandler["Sage.Entity.Interfaces.UserType"]={getValue:function(){return parseInt(this._valueBox.get("value"),10)},getTemplate:function(){return['<select id="{%= $.id %}-UserTypeValue" class="dijitDropDown" data-dojo-type="dijit.form.Select" dojoAttachPoint="_valueBox">','<option id="{%= $.id %}-UserTypeOption0" value="0">{%= $.networkText %}</option>','<option id="{%= $.id %}-UserTypeOption1" value="1">{%= $.remoteText %}</option>','<option id="{%= $.id %}-UserTypeOption2" value="2">{%= $.webText %}</option>','<option id="{%= $.id %}-UserTypeOption3" value="3">{%= $.webViewerText %}</option>','<option id="{%= $.id %}-UserTypeOption4" value="4">{%= $.concurrentText %}</option>','<option id="{%= $.id %}-UserTypeOption5" value="5">{%= $.retiredText %}</option>','<option id="{%= $.id %}-UserTypeOption6" value="6">{%= $.templateText %}</option>','<option id="{%= $.id %}-UserTypeOption7" value="7">{%= $.addonText %}</option>','<option id="{%= $.id %}-UserTypeOption8" value="8">{%= $.adminText %}</option>',"</select>"]}},this.propertyTypeHandler["Sage.Entity.Interfaces.OwnerType"]={getValue:function(){return parseInt(this._valueBox.get("value"),10)},getTemplate:function(){return['<select id="{%= $.id %}-OwnerTypeValue" class="dijitDropDown" data-dojo-type="dijit.form.Select" dojoAttachPoint="_valueBox">','<option id="{%= $.id %}-OwnerTypeOption0" value="1">{%= $.userText %}</option>','<option id="{%= $.id %}-OwnerTypeOption1" value="2">{%= $.teamText %}</option>','<option id="{%= $.id %}-OwnerTypeOption2" value="3">{%= $.departmentText %}</option>','<option id="{%= $.id %}-OwnerTypeOption3" value="0">{%= $.systemText %}</option>',"</select>"]}},this.propertyTypeHandler.Owner=this.propertyTypeHandler.default,this.propertyTypeHandler.None=this.propertyTypeHandler.default,this.propertyTypeHandler["System.String"]=this.propertyTypeHandler.default,this.propertyTypeHandler.defaultOperators=this.propertyTypeHandler.default},postCreate:function(){this.refreshDefaults(),this.visible||dojo.style(this._conditionRow,"display","none"),this._fieldNameSelect.on("change",c.hitch(this,this._fieldChanged)),this.inherited(arguments)},getCondition:function(){var a=!1;return this.isValidCondition()&&(a={fieldname:this._fieldNameSelect.get("value"),operator:this._operatorSelect.get("value"),val:this._getFieldValue()}),a},isValidCondition:function(){var a=this._getFieldValue();return"string"==typeof a?""!==a.trim():null!==a&&void 0!==a},_getFieldValue:function(){var a,b,d,e=this._fieldNameSelect.get("value"),f=(this._operatorSelect.get("value"),this._getField(e));return f&&(b=this._getFieldPropertyTypeValue(f),d=this.propertyTypeHandler[b],void 0===d&&(d=this.propertyTypeHandler.default),a=c.hitch(this,d.getValue)()),a},_renderFieldTemplates:function(){var b,d,e,f,g,h,i=this._fieldNameSelect.get("value"),j=this._getField(i);j&&(f=this._getFieldPropertyTypeValue(j),h=this.propertyTypeHandler[f],void 0===h&&(h=this.propertyTypeHandler.default),b=c.hitch(this,h.getTemplate)(),d=new Simplate(b),g={},dojo.mixin(g,this),dojo.mixin(g,{pickListName:j.pickListName}),dojo.mixin(g,{pickListStorageMode:j.pickListStorageMode}),(e=d.apply(g))&&(dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(a){a.destroy()},this),this._inputWidgetPlaceHolder.innerHTML="",dojo.place(e,this._inputWidgetPlaceHolder),a.parse(this._inputWidgetPlaceHolder),dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(a){a.startup(),this._valueBox=a,dojo.connect(this._valueBox,"onKeyDown",this,"_onKeyDown")},this)))},uninitialize:function(){this._inputWidgetPlaceHolder&&dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(a){a.destroy()},this),this.inherited(arguments)},_fieldChanged:function(a){var b,c,d,e,f=this._fieldNameSelect.get("value"),g=this._getField(f);if(g){if(this._renderFieldTemplates(),b=this.conditionManager.getOperatorsByField(g)){for(c=this._operatorSelect,d=c.options.length,e=d-1;e>=0;e--)c.removeOption(e);for(e=0;e<b.length;e++)b[e].selected=!1;c.addOption(b)}this._setToDefaultOperator(),this._setToDefaultValue()}},_onKeyDown:function(a){if(13===a.keyCode){var b=this._fieldNameSelect.get("value"),c=this._getField(b);c&&c.format&&"Phone"===c.format&&this._valueBox.onChange(this._valueBox.displayedValue),this.conditionManager._doSearch()}},_getField:function(a){return!!this.conditionManager.fieldsHash.hasOwnProperty(a)&&this.conditionManager.fieldsHash[a]},_getFieldPropertyTypeValue:function(a){return a&&a.hasOwnProperty(this.conditionManager.fieldTypeProperty)?a[this.conditionManager.fieldTypeProperty]:null},_addLookupCondition:function(){this.onAddLookupCondition(),dojo.publish("onAddLookupCondition",this)},onAddLookupCondition:function(){},_removeLookupCondition:function(){this.onRemoveLookupCondition(this),dojo.publish("onRemoveLookupCondition",this)},onRemoveLookupCondition:function(a){},_setToDefaultValue:function(){this._isOnDefaultField()&&this.defaultValue&&this._valueBox.set("value",this.defaultValue)},_setToDefaultField:function(){var a,b;if(this.defaultField)for(b=this._fieldNameSelect.getOptions(),a=0;a<b.length;a++)if(b[a].value===this.defaultField){this._fieldNameSelect.set("value",b[a].value);break}},_setToDefaultOperator:function(){var a,b;if(this._isOnDefaultField()&&this.defaultOperator&&"string"==typeof this.defaultOperator)for(a=this._operatorSelect.getOptions(),b=0;b<a.length;b++)if(a[b].label===this.defaultOperator||a[b].value===this.defaultOperator){this._operatorSelect.set("value",a[b].value);break}},_isOnDefaultField:function(){var a,b=!1;return this.defaultField?(a=this._fieldNameSelect.get("value"),b=a===this.defaultField):b=!0,b},refreshDefaults:function(){this._setToDefaultField(),this._fieldChanged()}})})},"Sage/UI/Controls/DropDownSelectPickList":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/UI/Controls/PickList","dojo/_base/array","dojo/text!./templates/DropDownSelectPickList.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.UI.Controls.DropDownSelectPickList",[f,c,a,b],{constructor:function(a){a.clientId&&(this.id=a.clientId+"-DropDownSelectPickList"),this.lastValidValue=a.value,this.inherited(arguments)},postCreate:function(){this.inherited(arguments)},_onChange:function(a){if(this.storeData){var b=this.comboBox.get("value");if(b!=this.initialValue){if(this.get("itemMustExist")){var c=dojo.some(this.storeData.items,function(b){return b.text==a||""==a},this);if(c&&(this.lastValidValue=a),!c&&"undefined"!==this.lastValidValue&&null!==this.lastValidValue)return void this.comboBox.set("value",this.lastValidValue)}if(this.comboBox.isValid()){var d="",e="";dojo.forEach(this.storeData.items,function(a){a.text==b&&(d=a.code,e=a.id)},this),this.setASPNETInputs(b,d,e)}}}this.onChange(this.lastValidValue)},_loadData:function(){if(!this.nodataload){var a=new dojo.Deferred;this.getPickListData(a),a.then(dojo.hitch(this,this.setItems),function(a){})}},setItems:function(a){"string"==typeof a&&(this.initialValue=a,this.comboBox.set("value",a));for(var b=[],c=0;c<a.items.$resources.length;c++){var d=a.items.$resources[c];b.push({id:d.$key,code:d.code,number:d.number,text:d.text})}this.storeData={identifier:"id",label:"text",items:b};var f=new e({data:this.storeData});this.comboBox.set("store",f),this.comboBox.set("searchAttr","text")},uninitialize:function(){this.inherited(arguments)},_getValueAttr:function(){var a=this.comboBox.get("value");return"id"===this.storeMode&&g.forEach(this.storeData.items,function(b){a==b.text&&(a=b.id)},this),a},_setPickListNameAttr:function(){this.inherited(arguments),this._loadData()},value:"",templateString:h,widgetsInTemplate:!0,storeData:null,lastValidValue:"",onChange:function(a){}})})},"Sage/UI/Controls/PickList":function(){define(["dojo/topic","dojo/_base/declare","dijit/_Widget","dijit/Tooltip","Sage/Utility","dijit/Tooltip","dojo/i18n!./nls/PickList","dojo/string","dojo/_base/lang","Sage/Services/PickListService"],function(a,b,c,d,e,f,g,h,i,j){return b("Sage.UI.Controls.PickList",[c],{dataStore:null,storeOptions:null,pickListName:"",filter:"",defaultLanguage:"",canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:"text",boundLanguage:"",filterByLanguage:!1,sort:!0,displayMode:"AsControl",clientId:"",required:!1,tabIndex:0,placeInNodeId:"",autoPostBack:!1,controlTooltip:"",buttonTooltip:"",shouldPublishMarkDirty:!0,renderAsHyperlink:!1,
_textId:"",_codeId:"",_picklistId:"",_defaultValueId:"",_defaultCodeId:"",_defaultPicklistId:"",_storageNameSpace:"PickListData",okText:"",missingPickListText:"",pickListServiceOptions:{},_pickListService:null,asyncDataLoading:!0,defaultUseCache:!0,constructor:function(a){this.storeOptions=a.storeOptions,this.dataStore=a.dataStore,this.filterByLanguage=a.filterByLanguage||this.filterByLanguage,this.boundLanguage=a.boundLanguage||null,this.asyncDataLoading=this.async,this.clientId=a.clientId||"";var b=this.clientId;this._textId=b+"_Text",this._codeId=b+"_Code",this._picklistId=b+"_PicklistId",this._defaultValueId=b+"_DefaultValue",this._defaultCodeId=b+"_DefaultCode",this._defaultPicklistId=b+"_DefaultPicklistId",this._pickListService=Sage.Services.getService("PickList"),g&&(this.okText=g.okText,this.missingPickListText=g.missingPickListText)},postCreate:function(){var a=dojo.byId(this.placeInNodeId);a&&(this._setDefaultFields(),dojo.place(this.domNode,a,"first")),this.inherited(arguments)},uninitialize:function(){this.inherited(arguments)},_setStore:function(a,b){a&&(this.pickListServiceOptions.storageMode=a),b&&(this.pickListServiceOptions.filter=b)},_setDefaultFields:function(){if(this.required){var a=dojo.byId(this._textId);if(a&&""===a.value){var b=dojo.byId(this._codeId),c=dojo.byId(this._picklistId),d=dojo.byId(this._defaultValueId),e=dojo.byId(this._defaultCodeId),f=dojo.byId(this._defaultPicklistId);a.value=d.value,b.value=e.value,c.value=f.value}}},_setupTooltips:function(a,b){if(this.controlTooltip&&""!==this.controlTooltip&&b){new f({connectId:[b],label:this.controlTooltip,position:["below"]})}if(this.buttonTooltip&&""!==this.buttonTooltip&&a){new f({connectId:[a],label:this.buttonTooltip,position:["below"]})}},getPickListData:function(a){var b=i.mixin(this,{language:this.boundLanguage,async:this.asyncDataLoading,context:[this.boundLanguage||"_",this.filter||"_",this.filterByLanguageBoundLanguage||"_",this.filterByLanguage||"_",this.storeMode||"_"].join("-"),pickListServiceOptions:{filterByLanguage:this.filterByLanguage,storageMode:this.storeMode}});if(b.context=b.context.replace(/\s/g,"_"),b.useCache=null!==b.usecache&&void 0!==b.usecach?b.usecache:null!==b.useCache&&void 0!==b.useCache?b.useCache:b.defaultUseCache,b.useCache="string"==typeof b.useCache?"true"===b.useCache:b.useCache,b.useCache=null===b.useCache||"boolean"!=typeof b.useCache||b.useCache,this.pickListName){var c=this._pickListService.getFirstByName(this.pickListName,i.hitch(this,this._getItemSuccess,a),i.hitch(this,this._getItemsFail,a),b);this._pickListService.read(c)}},_getItemsFail:function(a,b){a.errback(b)},_getItemSuccess:function(a,b){var c=this.filter;if(b&&b.items&&b.items.$resources&&b.items.$resources.length>0){var d=b.items.$resources;this.sort&&b.alphaSorted&&(b.items.$resources=d.sort(function(a,b){return a.text<b.text?-1:a.text>b.text?1:0})),c&&(b.items.$resources=this.filterPickListItemsByFilter(b.items.$resources))}this.setPicklistAttributes(b),a.callback(b)},filterPickListItemsByFilter:function(a){return this.filterPickListItems(a,"filter")},filterPickListItems:function(a,b){var c=this[b],d=b;"object"==typeof b&&(b.field&&(d=b.field),(b.value||"boolean"==typeof b.value)&&(c=b.value));var e=[];if(c)for(var f=0;f<a.length;f++){var g=a[f];this._doesPropertyValueAlreadyExistInList(e,g,"code")||g[d]!==c||e.push(g)}return e},_doesPropertyValueAlreadyExistInList:function(a,b,c){var d,e=!1;for(d=0;d<a.length&&!e;d++)e=a[d][c]===b[c];return e},setPicklistAttributes:function(a){a.valueMustExist&&this._setItemMustExistAttr(a.valueMustExist)},setASPNETInputs:function(a,b,c){if(this._textId&&this._codeId&&this._picklistId){var d=dojo.byId(this._textId),e=dojo.byId(this._codeId),f=dojo.byId(this._picklistId);d&&e&&f&&(d.value=a,f.value=c,e.value=b,this.invokeChangeEvent())}},invokeChangeEvent:function(){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.clientId,"")},_getCanEditTextAttr:function(){return this.canEditText},_setCanEditTextAttr:function(a){this.canEditText=a},_getItemMustExistAttr:function(){return this.itemMustExist},_setItemMustExistAttr:function(a){this.itemMustExist=a},_getMaxLengthAttr:function(){return this.maxLength},_setMaxLengthAttr:function(a){this.maxLength=a},_getStoreModeAttr:function(){return this.storeMode},_setStoreModeAttr:function(a){this.storeMode=a,this._setStore(a,this.filter)},_getPickListNameAttr:function(){return this.pickListName},_setPickListNameAttr:function(a){this.pickListName=a,this._setStore(this.storeMode,this.filter)},_setPickListFilterAttr:function(a){this.filter=a,this._setStore(this.storeMode,a)},_getPickListFilterAttr:function(){return this.filter},statics:{},clearCache:function(a,b){null===this._pickListService&&(this._pickListService=Sage.Services.getService("PickList")),this._pickListService.clearCache(a,b)}})})},"Sage/Services/PickListService":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare","icrm-js-services","Sage/Services/LocalStorageService"],function(a,b,c,d){var e={};c&&c.PickListService&&(e=c.PickListService);var f=b("Sage.Services.PickListService",[e],{constructor:function(){Sage.Services.hasService("LocalStorage")||(Sage.Services.LocalStorageService?Sage.Services.addService("LocalStorage",new Sage.Services.LocalStorageService):Sage.Services.addService("LocalStorage",new d)),this._storage=Sage.Services.getService("LocalStorage"),this._service=a.getSDataService("system",!1,!0,!1)},read:function(a){if(a&&a.handlers&&a.options){var b=(a.handlers,a.options);this.setUpRequest(new Sage.SData.Client.SDataResourceCollectionRequest(b.service),b).read(a.handlers)}}});return Sage.Services.hasService("PickList")||Sage.Services.addService("PickList",new Sage.Services.PickListService),f})},"icrm-js-services/icrm-js-services":function(){!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.ICRMServicesSDK=b():a.ICRMServicesSDK=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=6)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1);Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return d[a]}})});var e=c(2);Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}})});var f=c(3);Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}})});var g=c(4);Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return g[a]}})})},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f={MissingRequiredFunctionalityError:"The store provided was not compatible with the generic storage service. the store needs to have the following methods methods: getItem, setItem, removeItem.",NoInputNothingSetWarning:"Nothing was set, input was null.",NamespaceAndNameParameterError:"namespaceOrKey is required to be a string value.",CannotRemoveNoItemForLanguageWarning:"Item missing for the language"},g=b.CachingServiceMessages={constructorError:f.MissingRequiredFunctionalityError,setCacheStorageError:f.MissingRequiredFunctionalityError,setCacheStorageWarning:f.NoInputNothingSetWarning,getItemError:f.NamespaceAndNameParameterError,setItemError:f.NamespaceAndNameParameterError,removeItemError:f.NamespaceAndNameParameterError,removeMissingItemWarning:f.CannotRemoveNoItemForLanguageWarning},h=b.UnitOfTime={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6};b.CachingService=function(){function a(b,c,e){d(this,a),this.setCacheStorage(b),this.seed=1,this.lifespan=c||5,this.lifespanUnits=e||h.DAY}return e(a,[{key:"setCacheStorage",value:function(a){if(a){if("function"!=typeof a.getItem||"function"!=typeof a.setItem||"function"!=typeof a.removeItem)throw new Error(g.setCacheStorageError);this._cacheStorage=a}}},{key:"getCacheStorage",value:function(){return this._cacheStorage}},{key:"getItem",value:function(a,b,c){switch(this.convertArgumentsToBitMap(a,b,c)){case 7:var d=this.addAndGrabNamespaceKey(a,b),e=this._cacheStorage.getItem(d),f=e?JSON.parse(e)||e:null;return f&&f.context&&f.context[c]?f.context[c]:null;case 6:var h=this.addAndGrabNamespaceKey(a,b),i=this._cacheStorage.getItem(h),j=i?JSON.parse(i)||i:null;return j&&j.data?j.data:null;case 4:return this._cacheStorage.getItem(a);default:throw new Error(g.removeItemError)}}},{key:"setItem",value:function(a,b,c,d){var e=this.convertArgumentsToBitMap(a,b,c),f=a;switch(e){case 7:f=this.addAndGrabNamespaceKey(a,b);break;case 6:f=this.addAndGrabNamespaceKey(a,b),c=null;break;case 4:c=null;break;default:throw new Error(g.removeItemError)}this.writeData(f,d,c)}},{key:"writeData",value:function(a,b,c){var d=this._cacheStorage.getItem(a),e=c?{context:{}}:{create:this.timeStamp(),expires:this.expiresStamp()};c&&(e.context[c+"@"]=this.timeStamp(),e.context[c+"!"]=this.expiresStamp()),d&&(e=JSON.parse(d)),c?e.context[c]=b:e.data=b,this._cacheStorage.setItem(a,JSON.stringify(e))}},{key:"removeItem",value:function(a,b,c){switch(this.convertArgumentsToBitMap(a,b,c)){case 7:var d=this._cacheStorage.getItem(a);if(d){var e=JSON.parse(d);e.expires&&e.expires<this.timeStamp()?this._cacheStorage.removeItem(b):(e.context&&delete e.context[c],this._cacheStorage.setItem(b,JSON.stringify(e)))}break;case 6:var f=this._cacheStorage.getItem(a);if(f){var h=JSON.parse(f);if(h&&h.keys){for(var i=0;i<h.keys.length;i++){var j=h.keys[i];j&&j.name===b&&(null!=this._cacheStorage.getItem(j.id)&&this._cacheStorage.removeItem(j.id),h.keys.splice(i,1))}this._cacheStorage.setItem(a,JSON.stringify(h))}}break;case 4:var k=this.getNamespaceKeys(a);if(k)for(var l=0;l<k.length;l++){var m=k[l];m&&m.id&&this._cacheStorage.getItem(m.id)&&this._cacheStorage.removeItem(m.id)}this._cacheStorage.removeItem(a);break;default:throw new Error(g.removeItemError)}}},{key:"convertArgumentsToBitMap",value:function(a,b,c){var d="string"==typeof a?1:0;if(d<<=1,d|="string"==typeof b?1:0,d<<=1,(d|="string"==typeof c?1:0)<=3)throw new Error(g.removeItemError);if(5===d)throw new Error(g.removeItemError);return d}},{key:"timeStamp",value:function(){var a=new Date;return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}},{key:"expiresStamp",value:function(){var a=new Date(this.timeStamp());switch(this.lifespanUnits){case h.YEAR:return a.setYear(a.getUTCFullYear()+this.lifespan);case h.MONTH:return a.setYear(a.getUTCMonth()+this.lifespan);case h.DAY:return a.setYear(a.getUTCDate()+this.lifespan);case h.HOUR:return a.setYear(a.getUTCHours()+this.lifespan);case h.MINUTE:return a.setYear(a.getUTCMinutes()+this.lifespan);case h.SECOND:return a.setYear(a.getUTCSeconds()+this.lifespan);case h.MILLISECOND:return a.setYear(a.getUTCMilliseconds()+this.lifespan);default:return a}}},{key:"uniqueLocalID",value:function(){var a=Date.now();return a<=this.seed?a=++this.seed:this.seed=a,a}},{key:"getNamespaceKeys",value:function(a){var b=this._cacheStorage.getItem(a);return JSON.parse(b||"{}").keys||null}},{key:"addAndGrabNamespaceKey",value:function(a,b){var c=this.getNamespaceKeys(a),d=null;if(c){var e=c.filter(function(a){return a.name===b});e&&e[0]&&e[0].id&&(d=e[0].id)}else c=[];return null===d&&(d=this.uniqueLocalID(),c.push({name:b,id:d}),this._cacheStorage.setItem(a,JSON.stringify({keys:c}))),d}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0}),b.CultureService=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(5);b.CultureService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d(this,a),this.cache=b,this.activeTag="ActiveCodes",this.allTag="AllCodes",this.nameSpace="CultureCodes",this.neutralTag="NeutralCodes",this.regionTag="RegionCodes"}return e(a,[{key:"getAllCodes",value:function(a,b){this.getFromCache(this.allTag,a,b)}},{key:"getNeutralCodes",value:function(a,b){this.getFromCache(this.neutralTag,a,b)}},{key:"getRegionCodes",value:function(a,b){this.getFromCache(this.regionTag,a,b)}},{key:"getActiveCodes",value:function(a,b){this.getFromCache(this.activeTag,a,b)}},{key:"getFromCache",value:function(a,b,c){var d=this.cache.getItem(this.nameSpace,a)||null;if(!(c||{}).onSuccess)throw new Error("A callback function of onSuccess is expected by the method. Without it no data can be accessed.");d?this.onSuccess(d,a,this,c.onSuccess):this.createQueryForCodes(b,a,c)}},{key:"createQueryForCodes",value:function(a,b,c){var d=this;if(null===a||void 0===a||(c||{}).Test)d.onSuccess((new f.MockSDataCulture).makeRequest(),b,d,(c||{}).onSuccess);else{if(!a.read)throw new Error("The method needs to retrieve data, but the query object is missing the expected 'read' function.");a.read({async:!0,success:function(a){d.onSuccess(a,b,d,(c||{}).onSuccess)},failure:(c||{}).onFail||function(a){},scope:(c||{}).scope||d})}}},{key:"onSuccess",value:function(a,b,c,d){var e=a.$resources?a.$resources[0]:a,f=[];if(e.response){var g=e.response;if(g.allLanguages){var h=this.setAndGetFromCache(c.cache,c.nameSpace,c.allTag,g.allLanguages,c.allTag===b);f=null===h?f:h}if(g.neutralLanguages){var i=this.setAndGetFromCache(c.cache,c.nameSpace,c.neutralTag,g.neutralLanguages,c.neutralTag===b);f=null===i?f:i}if(g.regionLanguage){var j=this.setAndGetFromCache(c.cache,c.nameSpace,c.regionTag,g.regionLanguage,c.regionTag===b);f=null===j?f:j}if(g.activeLanguages){var k=this.setAndGetFromCache(c.cache,c.nameSpace,c.activeTag,g.activeLanguages,c.activeTag===b);f=null===k?f:k}}else f=e;d&&d("string"==typeof f?JSON.parse(f):f)}},{key:"setAndGetFromCache",value:function(a,b,c,d,e){return a.setItem(b,c,null,d),e?a.getItem(b,c)||[]:null}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.MingleService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,a),this.accessToken=b.accessToken||"",this.application=b.application||{},this.location=b.location||window.location,this.mingleConfig=b.mingleConfig||{},this.redirectAction=b.redirectAction||function(a){this.location.href=a}.bind(this),this.responseType=b.responseType||"token"}return e(a,[{key:"redirectToMingle",value:function(a){var b=this.mingleConfig.mingleSettings.pu+this.mingleConfig.mingleSettings.oa,c=this.mingleConfig.mingleRedirectUrl,d=this.mingleConfig.mingleSettings.ci,e=b+"?client_id="+encodeURI(d)+"&redirect_uri="+encodeURI(c)+"&response_type="+encodeURI(this.responseType)+"&state="+encodeURI(a)+"&include_granted_scopes=false";this.redirectAction(e)}},{key:"refreshAccessToken",value:function(){if(!this.application.isOnline())return void(this.application.requiresMingleRefresh=!0);var a="mingleRefresh",b="";a&&(b="/redirectTo/"+a),this.redirectToMingle(b)}},{key:"populateAccessToken",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Refreshing Ming.le token...",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ming.le",e=this.location.hash.substring(1),f=void 0;if(e&&(f=e.split("&").reduce(function(a,b){var c=b.split("=");return a[c[0]]=c[1],a},{}),f.access_token&&(this.accessToken=f.access_token,f.expires_in&&setTimeout(function(){a.add({message:c,title:d,toastTime:3e5,showProgressBar:!0}),setTimeout(function(){b.refreshAccessToken(b.mingleConfig)},3e5)},1e3*(f.expires_in-300)))),f&&(f.access_token||f.error))return f;this.redirectToMingle(e)}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.PickListService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d(this,a),this._storage=b,this._service=c,this._uri={},this._storageNameSpace="PickListData",this._storagePropertyDataTypeNameSpace="PickListData_PropertyDataType",this._storageFormDataTypeNameSpace="PickListData_FormDataType"}return e(a,[{key:"createHeader",value:function(a,b,c,d){this._notImplemented("createHeader",{header:a,callback:b,onError:c,config:d})}},{key:"createItemByHeaderID",value:function(a,b,c,d,e){this.createItemByHeaderKey(a,!0,b,c,d,e)}},{key:"createItemByHeaderName",value:function(a,b,c,d,e){this.createItemByHeaderKey(a,!1,b,c,d,e)}},{key:"createItemByHeaderKey",value:function(a,b,c,d,e,f){this._notImplemented("createItemByHeaderKey",{headerKey:a,isId:b,item:c,callback:d,onError:e,config:f})}},{key:"createItemsByHeaderID",value:function(a,b,c,d,e){this.createItemsByHeaderKey(a,!0,b,c,d,e)}},{key:"createItemsByHeaderName",value:function(a,b,c,d,e){this.createItemsByHeaderKey(a,!1,b,c,d,e)}},{key:"createItemsByHeaderKey",value:function(a,b,c,d,e,f){this._notImplemented("createItemsByHeaderKey",{headerKey:a,isId:b,itemArr:c,callback:d,onError:e,config:f})}},{key:"getFirstByName",value:function(a,b,c,d){return this.getFirstByKey(a,!1,b,c,d)}},{key:"getFirstById",value:function(a,b,c,d){return this.getFirstByKey(a,!1,b,c,d)}},{key:"getFirstByKey",value:function(a,b,c,d){var e=this,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};f.language=f.language||this._getBrowserLanguage(!1);var g="boolean"==typeof f.useCache&&f.useCache,h=g?this._storage.getItem(this._storageNameSpace,a,f.context||null):null;if(!h){var i=this._buildOutOptions(f,!0);return i.where=this._isNameOrID(b,a),{options:i,handlers:{async:"boolean"!=typeof f.async||f.async,success:function(b){b&&b.$resources&&b.$resources.length>0&&(b=b.$resources[0]),e._storage.setItem(e._storageNameSpace,a,f.context||null,b),"function"==typeof c&&c(b)},failure:function(a){"function"==typeof d&&d(a)},config:{passedIn:f}}}}c(h)}},{key:"getAllByName",value:function(a,b,c,d){this.getAllByKey(a,!1,b,c,d)}},{key:"getAllById",value:function(a,b,c,d){this.getAllByKey(a,!0,b,c,d)}},{key:"getAllByKey",value:function(a,b,c,d,e){this._notImplemented("getAllByKey",{keyArr:a,isId:b,callback:c,onError:d,config:e})}},{key:"update",value:function(a,b,c,d){this._notImplemented("update",{pickList:a,callback:b,onError:c,config:d})}},{key:"deleteByName",value:function(a,b,c,d){this.deleteByKey(a,!1,b,c,d)}},{key:"deleteById",value:function(a,b,c,d){this.deleteByKey(a,!0,b,c,d)}},{key:"deleteByKey",value:function(a,b,c,d,e){this._notImplemented("deleteByKey",{key:a,isId:b,callback:c,onError:d,config:e})}},{key:"deleteItemByHeaderName",value:function(a,b,c,d,e,f){this.deleteItemByHeaderKey(a,!1,b,c,d,e,f)}},{key:"deleteItemByHeaderId",value:function(a,b,c,d,e,f){this.deleteItemByHeaderKey(a,!0,b,c,d,e,f)}},{key:"deleteItemByHeaderKey",value:function(a,b,c,d,e,f,g){this._notImplemented("deleteItemByHeaderKey",{key:a,isId:b,code:c,language:d,callback:e,onError:f,config:g})}},{key:"deleteItemById",value:function(a,b,c,d){this._notImplemented("deleteItemById",{id:a,callback:b,onError:c,config:d})}},{key:"getPickListDataTypeDataFromEntityProperty",value:function(a,b,c,d,e){var f=this;e.language=e.language||this._getBrowserLanguage(!1);var g=a+"_"+b+"_"+e.language,h=this._storage.getItem(this._storagePropertyDataTypeNameSpace,g);if(!h)return{options:{select:["DataTypeData"],resourceKind:"entities('"+a+"')/properties",service:"metadata",language:e.language||this._getBrowserLanguage(!1),filterByLanguage:e.filterByLanguage||!1,include:["DataTypeData"],where:"propertyName eq '"+b+"'"},handlers:{success:function(a){a&&a.$resources&&a.$resources.length>0&&(a=a.$resources[0]),f.parent._storage.setItem(f.parent._storageDataTypeNameSpace,g,a),"function"==typeof c&&c(a)},failure:function(a){"function"==typeof d&&d(a)},config:{parent:this,passedIn:e}}};c(h)}},{key:"getPickListDataTypeDataFromForm",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments[2],d=this,e=arguments[3],f=arguments[4];f.language=f.language||this._getBrowserLanguage(!1);var g=b?a+"_"+b+"_"+f.language:a+"_"+f.language,h=this._storage.getItem(this._storageFormDataTypeNameSpace,g);if(!h)return{options:{resourceKind:"forms('"+a+"')",service:"metadata",language:f.language||this._getBrowserLanguage(!1)},handlers:{success:function(a){a&&a.$resources&&a.$resources.length>0&&(a=a.$resources[0]),d.parent._storage.setItem(d.parent._storageFormDataTypeNameSpace,g,a),"function"==typeof c&&c(a)},failure:function(a){"function"==typeof e&&e(a)},config:{parent:this,passedIn:f}}};c(h)}},{key:"clearCache",value:function(a,b){this._storage.getItem(this._storageNameSpace,a)&&this._storage.removeItem(this._storageNameSpace,a)}},{key:"deepClone",value:function(){return JSON.parse(JSON.stringify(this))}},{key:"setUpRequest",value:function(a,b){return a&&b&&"function"==typeof a.setResourceKind&&"function"==typeof a.setQueryArg&&(a.setResourceKind(b.resourceKind),b.where&&b.where.length>0&&a.setQueryArg("where",b.where),b.select&&b.select.length>0&&a.setQueryArg("select",b.select.join(",")),b.include&&b.include.length>0&&a.setQueryArg("include",b.include.join(",")),b.language&&a.setQueryArg("language",b.language),b.filter&&a.setQueryArg("filter",b.filter),void 0!==b.filterByLanguage&&a.setQueryArg("filterByLanguage",b.filterByLanguage),b.storageMode&&a.setQueryArg("storageMode",b.storageMode)),a}},{key:"_buildHash",value:function(a){this._notImplemented("_buildHash",{results:a})}},{key:"_returnOption",value:function(a,b,c,d){this._notImplemented("_returnOption",{optionName:a,callback:b,onError:c,config:d})}},{key:"_isNameOrID",value:function(a,b){if("boolean"==typeof a&&"string"==typeof b)return a?"id eq '"+b+"'":"name eq '"+b+"'";throw new Error("isId needs to be a boolean; key needs to be a string")}},{key:"_buildOutOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c={select:["Id","name","allowMultiples","valueMustExist","required","alphaSorted","noneEditable","defaultLanguage","defaultCode","modifyDate"],resourceKind:"picklists",service:this._service,language:a.language||this._getBrowserLanguage(!1)};return b&&(c.include=["items"],c.select.push("items/text"),c.select.push("items/code"),c.select.push("items/number"),c.select.push("items/filter"),c.select.push("items/languageCode")),a.pickListServiceOptions&&(null!==a.pickListServiceOptions.filter&&"string"==typeof a.pickListServiceOptions.filter&&(c.filter=a.pickListServiceOptions.filter),null!==a.pickListServiceOptions.storageMode&&"string"==typeof a.pickListServiceOptions.storageMode&&(c.storageMode=a.pickListServiceOptions.storageMode),null!==a.pickListServiceOptions.filterByLanguage&&("boolean"==typeof a.pickListServiceOptions.filterByLanguage?c.filterByLanguage=a.pickListServiceOptions.filterByLanguage:"string"==typeof a.pickListServiceOptions.filterByLanguage&&(c.filterByLanguage="true"===a.pickListServiceOptions.filterByLanguage.toLowerCase()))),c}},{key:"_breakDownALanguageCodeIntoFallBackParts",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=a.split("-"),c=[],d=0;d<b.length;d++){for(var e="",f=0;f<=d;f++)e=e+(e.length>0?"_":"")+b[f];c.push(e)}return c}},{key:"_getBrowserLanguage",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._getLanguageFromCookie(),c=b||this._getFromLanguageFromNavigator();if(c||(c="en-us"),a){return this._breakDownALanguageCodeIntoFallBackParts(c)}return c}},{key:"_getFromLanguageFromNavigator",value:function(){return"undefined"!=typeof navigator?navigator.userLanguage||navigator.browserLanguage||navigator.language:null}},{key:"_getLanguageFromCookie",value:function(){var a=null,b="SLXLanguageSetting";if("undefined"!=typeof window&&window.document&&window.document.cookie)if("function"==typeof window.document.cookie.getCookie)a=window.document.cookie.getCookie(b);else{var c=window.document.cookie.split(";");c.forEach(function(c){c=c.trim(),c.startsWith(b)&&(c=c.replace(""+b,"").trim(),c=c.replace("=","").trim(),a=c)},this)}return a}},{key:"_notImplemented",value:function(a,b){throw new Error("%s with parameters %o is not implemented",a,b)}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.MockSDataCulture=function(){function a(){d(this,a),this.queryResult={$httpStatus:200,$descriptor:"",request:{},response:{neutralLanguages:[{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e [ja]",CultureCode:"ja"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) \xe8\u02c6\u0160\xe7\u2030\u02c6 [zh-cht]",CultureCode:"zh-cht"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) [zh-hant]",CultureCode:"zh-hant"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) \xe6\u2014\xa7\xe7\u2030\u02c6 [zh-chs]",CultureCode:"zh-chs"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) [zh-hans]",CultureCode:"zh-hans"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021 [zh]",CultureCode:"zh"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 [ko]",CultureCode:"ko"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 [ii]",CultureCode:"ii"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a [am]",CultureCode:"am"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 [iu-cans]",CultureCode:"iu-cans"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 [km]",CultureCode:"km"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 [lo]",CultureCode:"lo"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a [bo]",CultureCode:"bo"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 [mn-mong]",CultureCode:"mn-mong"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 [th]",CultureCode:"th"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd [si]",CultureCode:"si"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a [ml]",CultureCode:"ml"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 [kn]",CultureCode:"kn"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 [te]",CultureCode:"te"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d [ta]",CultureCode:"ta"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 [or]",CultureCode:"or"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac [gu]",CultureCode:"gu"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac [pa]",CultureCode:"pa"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe [bn]",CultureCode:"bn"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe [as]",CultureCode:"as"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac [hi]",CultureCode:"hi"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 [sa]",CultureCode:"sa"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac [mr]",CultureCode:"mr"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac [ne]",CultureCode:"ne"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac [kok]",CultureCode:"kok"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 [dv]",CultureCode:"dv"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 [syr]",CultureCode:"syr"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 [ug]",CultureCode:"ug"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 [fa]",CultureCode:"fa"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 [prs]",CultureCode:"prs"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 [ps]",CultureCode:"ps"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 [ar]",CultureCode:"ar"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 [ur]",CultureCode:"ur"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa [he]",CultureCode:"he"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc [ka]",CultureCode:"ka"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 [hy]",CultureCode:"hy"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 [uk]",CultureCode:"uk"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba [uz-cyrl]",CultureCode:"uz-cyrl"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg-cyrl]",CultureCode:"tg-cyrl"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg]",CultureCode:"tg"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac [tt]",CultureCode:"tt"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 [sr-cyrl]",CultureCode:"sr-cyrl"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 [sah]",CultureCode:"sah"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 [ru]",CultureCode:"ru"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn-cyrl]",CultureCode:"mn-cyrl"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn]",CultureCode:"mn"},{
DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba [mk]",CultureCode:"mk"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a [kk]",CultureCode:"kk"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 [ky]",CultureCode:"ky"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 [bg]",CultureCode:"bg"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 [bs-cyrl]",CultureCode:"bs-cyrl"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 [be]",CultureCode:"be"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a [ba]",CultureCode:"ba"},{DisplayText:"\xd0\x90\xd0\xb7\xd3\u2122\xd1\u20ac\xd0\xb1\xd0\xb0\xd1\u02dc\xd2\xb9\xd0\xb0\xd0\xbd\xc2 \xd0\xb4\xd0\xb8\xd0\xbb\xd0\xb8 [az-cyrl]",CultureCode:"az-cyrl"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac [el]",CultureCode:"el"},{DisplayText:"Yoruba [yo]",CultureCode:"yo"},{DisplayText:"Wolof [wo]",CultureCode:"wo"},{DisplayText:"U'zbek [uz-latn]",CultureCode:"uz-latn"},{DisplayText:"U'zbek [uz]",CultureCode:"uz"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e [tk]",CultureCode:"tk"},{DisplayText:"T\xc3\xbcrk\xc3\xa7e [tr]",CultureCode:"tr"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t [vi]",CultureCode:"vi"},{DisplayText:"Tamazight [tzm-latn]",CultureCode:"tzm-latn"},{DisplayText:"Tamazight [tzm]",CultureCode:"tzm"},{DisplayText:"svenska [sv]",CultureCode:"sv"},{DisplayText:"suomi [fi]",CultureCode:"fi"},{DisplayText:"srpski [sr-latn]",CultureCode:"sr-latn"},{DisplayText:"srpski [sr]",CultureCode:"sr"},{DisplayText:"slovenski [sl]",CultureCode:"sl"},{DisplayText:"sloven\xc4\x8dina [sk]",CultureCode:"sk"},{DisplayText:"shqipe [sq]",CultureCode:"sq"},{DisplayText:"Setswana [tn]",CultureCode:"tn"},{DisplayText:"Sesotho sa Leboa [nso]",CultureCode:"nso"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 [smn]",CultureCode:"smn"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll [sms]",CultureCode:"sms"},{DisplayText:"runasimi [quz]",CultureCode:"quz"},{DisplayText:"Rumantsch [rm]",CultureCode:"rm"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 [ro]",CultureCode:"ro"},{DisplayText:"Reo M\xc4\x81ori [mi]",CultureCode:"mi"},{DisplayText:"Portugu\xc3\xaas [pt]",CultureCode:"pt"},{DisplayText:"polski [pl]",CultureCode:"pl"},{DisplayText:"Occitan [oc]",CultureCode:"oc"},{DisplayText:"norsk [no]",CultureCode:"no"},{DisplayText:"norsk (nynorsk) [nn]",CultureCode:"nn"},{DisplayText:"norsk (bokm\xc3\xa5l) [nb]",CultureCode:"nb"},{DisplayText:"Nederlands [nl]",CultureCode:"nl"},{DisplayText:"Mapudungun [arn]",CultureCode:"arn"},{DisplayText:"Malti [mt]",CultureCode:"mt"},{DisplayText:"magyar [hu]",CultureCode:"hu"},{DisplayText:"lietuvi\xc5\xb3 [lt]",CultureCode:"lt"},{DisplayText:"L\xc3\xabtzebuergesch [lb]",CultureCode:"lb"},{DisplayText:"latvie\xc5\xa1u [lv]",CultureCode:"lv"},{DisplayText:"Kiswahili [sw]",CultureCode:"sw"},{DisplayText:"Kinyarwanda [rw]",CultureCode:"rw"},{DisplayText:"K'iche [qut]",CultureCode:"qut"},{DisplayText:"Kanien'k\xc3\xa9ha [moh]",CultureCode:"moh"},{DisplayText:"kalaallisut [kl]",CultureCode:"kl"},{DisplayText:"julevus\xc3\xa1megiella [smj]",CultureCode:"smj"},{DisplayText:"italiano [it]",CultureCode:"it"},{DisplayText:"\xc3\xadslenska [is]",CultureCode:"is"},{DisplayText:"isiZulu [zu]",CultureCode:"zu"},{DisplayText:"isiXhosa [xh]",CultureCode:"xh"},{DisplayText:"Invariant Language (Invariant Country) []",CultureCode:""},{DisplayText:"Inuktitut [iu-latn]",CultureCode:"iu-latn"},{DisplayText:"Inuktitut [iu]",CultureCode:"iu"},{DisplayText:"Igbo [ig]",CultureCode:"ig"},{DisplayText:"hrvatski [hr]",CultureCode:"hr"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina [hsb]",CultureCode:"hsb"},{DisplayText:"Hausa [ha-latn]",CultureCode:"ha-latn"},{DisplayText:"Hausa [ha]",CultureCode:"ha"},{DisplayText:"galego [gl]",CultureCode:"gl"},{DisplayText:"G\xc3 idhlig [gd]",CultureCode:"gd"},{DisplayText:"Gaeilge [ga]",CultureCode:"ga"},{DisplayText:"Frysk [fy]",CultureCode:"fy"},{DisplayText:"fran\xc3\xa7ais [fr]",CultureCode:"fr"},{DisplayText:"f\xc3\xb8royskt [fo]",CultureCode:"fo"},{DisplayText:"Filipino [fil]",CultureCode:"fil"},{DisplayText:"euskara [eu]",CultureCode:"eu"},{DisplayText:"espa\xc3\xb1ol [es]",CultureCode:"es"},{DisplayText:"English [en]",CultureCode:"en"},{DisplayText:"Els\xc3\xa4ssisch [gsw]",CultureCode:"gsw"},{DisplayText:"eesti [et]",CultureCode:"et"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina [dsb]",CultureCode:"dsb"},{DisplayText:"Deutsch [de]",CultureCode:"de"},{DisplayText:"davvis\xc3\xa1megiella [se]",CultureCode:"se"},{DisplayText:"dansk [da]",CultureCode:"da"},{DisplayText:"Cymraeg [cy]",CultureCode:"cy"},{DisplayText:"Corsu [co]",CultureCode:"co"},{DisplayText:"\xc4\x8de\xc5\xa1tina [cs]",CultureCode:"cs"},{DisplayText:"catal\xc3  [ca]",CultureCode:"ca"},{DisplayText:"brezhoneg [br]",CultureCode:"br"},{DisplayText:"bosanski [bs-latn]",CultureCode:"bs-latn"},{DisplayText:"bosanski [bs]",CultureCode:"bs"},{DisplayText:"Bahasa Melayu [ms]",CultureCode:"ms"},{DisplayText:"Bahasa Indonesia [id]",CultureCode:"id"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az-latn]",CultureCode:"az-latn"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az]",CultureCode:"az"},{DisplayText:"Afrikaans [af]",CultureCode:"af"},{DisplayText:"\xc3\xa5arjelsaemiengiele [sma]",CultureCode:"sma"}],allLanguages:[{DisplayText:"\xc3\xa5arjelsaemiengiele (N\xc3\xb6\xc3\xb6rje) [sma-no]",CultureCode:"sma-no"},{DisplayText:"\xc3\xa5arjelsaemiengiele (Sveerje) [sma-se]",CultureCode:"sma-se"},{DisplayText:"\xc3\xa5arjelsaemiengiele [sma]",CultureCode:"sma"},{DisplayText:"Afrikaans (Suid Afrika) [af-za]",CultureCode:"af-za"},{DisplayText:"Afrikaans [af]",CultureCode:"af"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az]",CultureCode:"az"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az-latn]",CultureCode:"az-latn"},{DisplayText:"Bahasa Indonesia (Indonesia) [id-id]",CultureCode:"id-id"},{DisplayText:"Bahasa Indonesia [id]",CultureCode:"id"},{DisplayText:"Bahasa Melayu (Brunei Darussalam) [ms-bn]",CultureCode:"ms-bn"},{DisplayText:"Bahasa Melayu (Malaysia) [ms-my]",CultureCode:"ms-my"},{DisplayText:"Bahasa Melayu [ms]",CultureCode:"ms"},{DisplayText:"bosanski (Bosna i Hercegovina) [bs-latn-ba]",CultureCode:"bs-latn-ba"},{DisplayText:"bosanski [bs]",CultureCode:"bs"},{DisplayText:"bosanski [bs-latn]",CultureCode:"bs-latn"},{DisplayText:"brezhoneg (Fra\xc3\xb1s) [br-fr]",CultureCode:"br-fr"},{DisplayText:"brezhoneg [br]",CultureCode:"br"},{DisplayText:"catal\xc3  (catal\xc3 ) [ca-es]",CultureCode:"ca-es"},{DisplayText:"catal\xc3  [ca]",CultureCode:"ca"},{DisplayText:"\xc4\x8de\xc5\xa1tina (\xc4\u0152esk\xc3\xa1\xc2 republika) [cs-cz]",CultureCode:"cs-cz"},{DisplayText:"\xc4\x8de\xc5\xa1tina [cs]",CultureCode:"cs"},{DisplayText:"Corsu (France) [co-fr]",CultureCode:"co-fr"},{DisplayText:"Corsu [co]",CultureCode:"co"},{DisplayText:"Cymraeg (y Deyrnas Unedig) [cy-gb]",CultureCode:"cy-gb"},{DisplayText:"Cymraeg [cy]",CultureCode:"cy"},{DisplayText:"dansk (Danmark) [da-dk]",CultureCode:"da-dk"},{DisplayText:"dansk [da]",CultureCode:"da"},{DisplayText:"davvis\xc3\xa1megiella (Norga) [se-no]",CultureCode:"se-no"},{DisplayText:"davvis\xc3\xa1megiella (Ruo\xc5\xa7\xc5\xa7a) [se-se]",CultureCode:"se-se"},{DisplayText:"davvis\xc3\xa1megiella (Suopma) [se-fi]",CultureCode:"se-fi"},{DisplayText:"davvis\xc3\xa1megiella [se]",CultureCode:"se"},{DisplayText:"Deutsch (Deutschland) [de-de]",CultureCode:"de-de"},{DisplayText:"Deutsch (Liechtenstein) [de-li]",CultureCode:"de-li"},{DisplayText:"Deutsch (Luxemburg) [de-lu]",CultureCode:"de-lu"},{DisplayText:"Deutsch (\xc3\u2013sterreich) [de-at]",CultureCode:"de-at"},{DisplayText:"Deutsch (Schweiz) [de-ch]",CultureCode:"de-ch"},{DisplayText:"Deutsch [de]",CultureCode:"de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina (Nimska) [dsb-de]",CultureCode:"dsb-de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina [dsb]",CultureCode:"dsb"},{DisplayText:"eesti (Eesti) [et-ee]",CultureCode:"et-ee"},{DisplayText:"eesti [et]",CultureCode:"et"},{DisplayText:"Els\xc3\xa4ssisch (Fr\xc3 nkrisch) [gsw-fr]",CultureCode:"gsw-fr"},{DisplayText:"Els\xc3\xa4ssisch [gsw]",CultureCode:"gsw"},{DisplayText:"English (Australia) [en-au]",CultureCode:"en-au"},{DisplayText:"English (Belize) [en-bz]",CultureCode:"en-bz"},{DisplayText:"English (Canada) [en-ca]",CultureCode:"en-ca"},{DisplayText:"English (Caribbean) [en-029]",CultureCode:"en-029"},{DisplayText:"English (India) [en-in]",CultureCode:"en-in"},{DisplayText:"English (Ireland) [en-ie]",CultureCode:"en-ie"},{DisplayText:"English (Jamaica) [en-jm]",CultureCode:"en-jm"},{DisplayText:"English (Malaysia) [en-my]",CultureCode:"en-my"},{DisplayText:"English (New Zealand) [en-nz]",CultureCode:"en-nz"},{DisplayText:"English (Philippines) [en-ph]",CultureCode:"en-ph"},{DisplayText:"English (Singapore) [en-sg]",CultureCode:"en-sg"},{DisplayText:"English (South Africa) [en-za]",CultureCode:"en-za"},{DisplayText:"English (Trinidad y Tobago) [en-tt]",CultureCode:"en-tt"},{DisplayText:"English (United Kingdom) [en-gb]",CultureCode:"en-gb"},{DisplayText:"English (United States) [en-us]",CultureCode:"en-us"},{DisplayText:"English (Zimbabwe) [en-zw]",CultureCode:"en-zw"},{DisplayText:"English [en]",CultureCode:"en"},{DisplayText:"Espa\xc3\xb1ol (Argentina) [es-ar]",CultureCode:"es-ar"},{DisplayText:"Espa\xc3\xb1ol (Bolivia) [es-bo]",CultureCode:"es-bo"},{DisplayText:"Espa\xc3\xb1ol (Chile) [es-cl]",CultureCode:"es-cl"},{DisplayText:"Espa\xc3\xb1ol (Colombia) [es-co]",CultureCode:"es-co"},{DisplayText:"Espa\xc3\xb1ol (Costa Rica) [es-cr]",CultureCode:"es-cr"},{DisplayText:"Espa\xc3\xb1ol (Ecuador) [es-ec]",CultureCode:"es-ec"},{DisplayText:"Espa\xc3\xb1ol (El Salvador) [es-sv]",CultureCode:"es-sv"},{DisplayText:"Espa\xc3\xb1ol (Espa\xc3\xb1a, alfabetizaci\xc3\xb3n internacional) [es-es]",CultureCode:"es-es"},{DisplayText:"Espa\xc3\xb1ol (Estados Unidos) [es-us]",CultureCode:"es-us"},{DisplayText:"Espa\xc3\xb1ol (Guatemala) [es-gt]",CultureCode:"es-gt"},{DisplayText:"Espa\xc3\xb1ol (Honduras) [es-hn]",CultureCode:"es-hn"},{DisplayText:"Espa\xc3\xb1ol (M\xc3\xa9xico) [es-mx]",CultureCode:"es-mx"},{DisplayText:"Espa\xc3\xb1ol (Nicaragua) [es-ni]",CultureCode:"es-ni"},{DisplayText:"Espa\xc3\xb1ol (Panam\xc3\xa1) [es-pa]",CultureCode:"es-pa"},{DisplayText:"Espa\xc3\xb1ol (Paraguay) [es-py]",CultureCode:"es-py"},{DisplayText:"Espa\xc3\xb1ol (Per\xc3\xba) [es-pe]",CultureCode:"es-pe"},{DisplayText:"Espa\xc3\xb1ol (Puerto Rico) [es-pr]",CultureCode:"es-pr"},{DisplayText:"Espa\xc3\xb1ol (Republica Bolivariana de Venezuela) [es-ve]",CultureCode:"es-ve"},{DisplayText:"Espa\xc3\xb1ol (Rep\xc3\xbablica Dominicana) [es-do]",CultureCode:"es-do"},{DisplayText:"Espa\xc3\xb1ol (Uruguay) [es-uy]",CultureCode:"es-uy"},{DisplayText:"espa\xc3\xb1ol [es]",CultureCode:"es"},{DisplayText:"euskara (euskara) [eu-es]",CultureCode:"eu-es"},{DisplayText:"euskara [eu]",CultureCode:"eu"},{DisplayText:"Filipino (Pilipinas) [fil-ph]",CultureCode:"fil-ph"},{DisplayText:"Filipino [fil]",CultureCode:"fil"},{DisplayText:"f\xc3\xb8royskt (F\xc3\xb8royar) [fo-fo]",CultureCode:"fo-fo"},{DisplayText:"f\xc3\xb8royskt [fo]",CultureCode:"fo"},{DisplayText:"fran\xc3\xa7ais (Belgique) [fr-be]",CultureCode:"fr-be"},{DisplayText:"fran\xc3\xa7ais (Canada) [fr-ca]",CultureCode:"fr-ca"},{DisplayText:"fran\xc3\xa7ais (France) [fr-fr]",CultureCode:"fr-fr"},{DisplayText:"fran\xc3\xa7ais (Luxembourg) [fr-lu]",CultureCode:"fr-lu"},{DisplayText:"fran\xc3\xa7ais (Principaut\xc3\xa9 de Monaco) [fr-mc]",CultureCode:"fr-mc"},{DisplayText:"fran\xc3\xa7ais (Suisse) [fr-ch]",CultureCode:"fr-ch"},{DisplayText:"fran\xc3\xa7ais [fr]",CultureCode:"fr"},{DisplayText:"Frysk (Nederl\xc3\xa2n) [fy-nl]",CultureCode:"fy-nl"},{DisplayText:"Frysk [fy]",CultureCode:"fy"},{DisplayText:"Gaeilge (\xc3\u2030ire) [ga-ie]",CultureCode:"ga-ie"},{DisplayText:"Gaeilge [ga]",CultureCode:"ga"},{DisplayText:"G\xc3 idhlig (An R\xc3\xacoghachd Aonaichte) [gd-gb]",CultureCode:"gd-gb"},{DisplayText:"G\xc3 idhlig [gd]",CultureCode:"gd"},{DisplayText:"galego (galego) [gl-es]",CultureCode:"gl-es"},{DisplayText:"galego [gl]",CultureCode:"gl"},{DisplayText:"Hausa (Nigeria) [ha-latn-ng]",CultureCode:"ha-latn-ng"},{DisplayText:"Hausa [ha]",CultureCode:"ha"},{DisplayText:"Hausa [ha-latn]",CultureCode:"ha-latn"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina (N\xc4\u203amska) [hsb-de]",CultureCode:"hsb-de"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina [hsb]",CultureCode:"hsb"},{DisplayText:"hrvatski (Bosna i Hercegovina) [hr-ba]",CultureCode:"hr-ba"},{DisplayText:"hrvatski (Hrvatska) [hr-hr]",CultureCode:"hr-hr"},{DisplayText:"hrvatski [hr]",CultureCode:"hr"},{DisplayText:"Igbo (Nigeria) [ig-ng]",CultureCode:"ig-ng"},{DisplayText:"Igbo [ig]",CultureCode:"ig"},{DisplayText:"Inuktitut (Kanatami) [iu-latn-ca]",CultureCode:"iu-latn-ca"},{DisplayText:"Inuktitut [iu]",CultureCode:"iu"},{DisplayText:"Inuktitut [iu-latn]",CultureCode:"iu-latn"},{DisplayText:"Invariant Language (Invariant Country) []",CultureCode:""},{DisplayText:"isiXhosa (uMzantsi Afrika) [xh-za]",CultureCode:"xh-za"},{DisplayText:"isiXhosa [xh]",CultureCode:"xh"},{DisplayText:"isiZulu (iNingizimu Afrika) [zu-za]",CultureCode:"zu-za"},{DisplayText:"isiZulu [zu]",CultureCode:"zu"},{DisplayText:"\xc3\xadslenska (\xc3\x8dsland) [is-is]",CultureCode:"is-is"},{DisplayText:"\xc3\xadslenska [is]",CultureCode:"is"},{DisplayText:"italiano (Italia) [it-it]",CultureCode:"it-it"},{DisplayText:"italiano (Svizzera) [it-ch]",CultureCode:"it-ch"},{DisplayText:"italiano [it]",CultureCode:"it"},{DisplayText:"julevus\xc3\xa1megiella (Svierik) [smj-se]",CultureCode:"smj-se"},{DisplayText:"julevus\xc3\xa1megiella (Vuodna) [smj-no]",CultureCode:"smj-no"},{DisplayText:"julevus\xc3\xa1megiella [smj]",CultureCode:"smj"},{DisplayText:"kalaallisut (Kalaallit Nunaat) [kl-gl]",CultureCode:"kl-gl"},{DisplayText:"kalaallisut [kl]",CultureCode:"kl"},{DisplayText:"Kanien'k\xc3\xa9ha [moh]",CultureCode:"moh"},{DisplayText:"Kanien'k\xc3\xa9ha [moh-ca]",CultureCode:"moh-ca"},{DisplayText:"K'iche (Guatemala) [qut-gt]",CultureCode:"qut-gt"},{DisplayText:"K'iche [qut]",CultureCode:"qut"},{DisplayText:"Kinyarwanda (Rwanda) [rw-rw]",CultureCode:"rw-rw"},{DisplayText:"Kinyarwanda [rw]",CultureCode:"rw"},{DisplayText:"Kiswahili (Kenya) [sw-ke]",CultureCode:"sw-ke"},{DisplayText:"Kiswahili [sw]",CultureCode:"sw"},{DisplayText:"latvie\xc5\xa1u (Latvija) [lv-lv]",CultureCode:"lv-lv"},{DisplayText:"latvie\xc5\xa1u [lv]",CultureCode:"lv"},{DisplayText:"L\xc3\xabtzebuergesch (Luxembourg) [lb-lu]",CultureCode:"lb-lu"},{DisplayText:"L\xc3\xabtzebuergesch [lb]",CultureCode:"lb"},{DisplayText:"lietuvi\xc5\xb3 (Lietuva) [lt-lt]",CultureCode:"lt-lt"},{DisplayText:"lietuvi\xc5\xb3 [lt]",CultureCode:"lt"},{DisplayText:"magyar (Magyarorsz\xc3\xa1g) [hu-hu]",CultureCode:"hu-hu"},{DisplayText:"magyar [hu]",CultureCode:"hu"},{DisplayText:"Malti (Malta) [mt-mt]",CultureCode:"mt-mt"},{DisplayText:"Malti [mt]",CultureCode:"mt"},{DisplayText:"Mapudungun (Chile) [arn-cl]",CultureCode:"arn-cl"},{DisplayText:"Mapudungun [arn]",CultureCode:"arn"},{DisplayText:"Nederlands (Belgi\xc3\xab) [nl-be]",CultureCode:"nl-be"},{DisplayText:"Nederlands (Nederland) [nl-nl]",CultureCode:"nl-nl"},{DisplayText:"Nederlands [nl]",CultureCode:"nl"},{DisplayText:"norsk (bokm\xc3\xa5l) [nb]",CultureCode:"nb"},{DisplayText:"norsk (nynorsk) [nn]",CultureCode:"nn"},{DisplayText:"norsk [no]",CultureCode:"no"},{DisplayText:"norsk, bokm\xc3\xa5l (Norge) [nb-no]",CultureCode:"nb-no"},{DisplayText:"norsk, nynorsk (Noreg) [nn-no]",CultureCode:"nn-no"},{DisplayText:"Occitan (Fran\xc3\xa7a) [oc-fr]",CultureCode:"oc-fr"},{DisplayText:"Occitan [oc]",CultureCode:"oc"},{DisplayText:"polski (Polska) [pl-pl]",CultureCode:"pl-pl"},{DisplayText:"polski [pl]",CultureCode:"pl"},{DisplayText:"Portugu\xc3\xaas (Brasil) [pt-br]",CultureCode:"pt-br"},{DisplayText:"portugu\xc3\xaas (Portugal) [pt-pt]",CultureCode:"pt-pt"},{DisplayText:"Portugu\xc3\xaas [pt]",CultureCode:"pt"},{DisplayText:"Reo M\xc4\x81ori (Aotearoa) [mi-nz]",CultureCode:"mi-nz"},{DisplayText:"Reo M\xc4\x81ori [mi]",CultureCode:"mi"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 (Rom\xc3\xa2nia) [ro-ro]",CultureCode:"ro-ro"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 [ro]",CultureCode:"ro"},{DisplayText:"Rumantsch (Svizra) [rm-ch]",CultureCode:"rm-ch"},{DisplayText:"Rumantsch [rm]",CultureCode:"rm"},{DisplayText:"runasimi (Ecuador) [quz-ec]",CultureCode:"quz-ec"},{DisplayText:"runasimi (Piruw) [quz-pe]",CultureCode:"quz-pe"},{DisplayText:"runasimi (Qullasuyu) [quz-bo]",CultureCode:"quz-bo"},{DisplayText:"runasimi [quz]",CultureCode:"quz"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll (L\xc3\xa4\xc3\xa4\xc2\xb4ddj\xc3\xa2nnam) [sms-fi]",CultureCode:"sms-fi"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll [sms]",CultureCode:"sms"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 (Suom\xc3\xa2) [smn-fi]",CultureCode:"smn-fi"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 [smn]",CultureCode:"smn"},{DisplayText:"Sesotho sa Leboa (Afrika Borwa) [nso-za]",CultureCode:"nso-za"},{DisplayText:"Sesotho sa Leboa [nso]",CultureCode:"nso"},{DisplayText:"Setswana (Aforika Borwa) [tn-za]",CultureCode:"tn-za"},{DisplayText:"Setswana [tn]",CultureCode:"tn"},{DisplayText:"shqipe (Shqip\xc3\xabria) [sq-al]",CultureCode:"sq-al"},{DisplayText:"shqipe [sq]",CultureCode:"sq"},{DisplayText:"sloven\xc4\x8dina (Slovensk\xc3\xa1 republika) [sk-sk]",CultureCode:"sk-sk"},{DisplayText:"sloven\xc4\x8dina [sk]",CultureCode:"sk"},{DisplayText:"slovenski (Slovenija) [sl-si]",CultureCode:"sl-si"},{DisplayText:"slovenski [sl]",CultureCode:"sl"},{DisplayText:"srpski (Bosna i Hercegovina) [sr-latn-ba]",CultureCode:"sr-latn-ba"},{DisplayText:"srpski (Crna Gora) [sr-latn-me]",CultureCode:"sr-latn-me"},{DisplayText:"srpski (Srbija i Crna Gora (Prethodno)) [sr-latn-cs]",CultureCode:"sr-latn-cs"},{DisplayText:"srpski (Srbija) [sr-latn-rs]",CultureCode:"sr-latn-rs"},{DisplayText:"srpski [sr]",CultureCode:"sr"},{DisplayText:"srpski [sr-latn]",CultureCode:"sr-latn"},{DisplayText:"suomi (Suomi) [fi-fi]",CultureCode:"fi-fi"},{DisplayText:"suomi [fi]",CultureCode:"fi"},{DisplayText:"svenska (Finland) [sv-fi]",CultureCode:"sv-fi"},{DisplayText:"svenska (Sverige) [sv-se]",CultureCode:"sv-se"},{DisplayText:"svenska [sv]",CultureCode:"sv"},{DisplayText:"Tamazight (Djaza\xc3\xafr) [tzm-latn-dz]",CultureCode:"tzm-latn-dz"},{DisplayText:"Tamazight [tzm]",CultureCode:"tzm"},{DisplayText:"Tamazight [tzm-latn]",CultureCode:"tzm-latn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t (Vi\xe1\xbb\u2021t Nam) [vi-vn]",CultureCode:"vi-vn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t [vi]",CultureCode:"vi"},{DisplayText:"T\xc3\xbcrk\xc3\xa7e [tr]",CultureCode:"tr"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e (T\xc3\xbcrkmenistan) [tk-tm]",CultureCode:"tk-tm"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e [tk]",CultureCode:"tk"},{DisplayText:"U'zbek (U'zbekiston Respublikasi) [uz-latn-uz]",CultureCode:"uz-latn-uz"},{DisplayText:"U'zbek [uz]",CultureCode:"uz"},{DisplayText:"U'zbek [uz-latn]",CultureCode:"uz-latn"},{DisplayText:"Wolof (S\xc3\xa9n\xc3\xa9gal) [wo-sn]",CultureCode:"wo-sn"},{DisplayText:"Wolof [wo]",CultureCode:"wo"},{DisplayText:"Yoruba (Nigeria) [yo-ng]",CultureCode:"yo-ng"},{DisplayText:"Yoruba [yo]",CultureCode:"yo"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac (\xce\u2022\xce\xbb\xce\xbb\xce\xac\xce\xb4\xce\xb1) [el-gr]",CultureCode:"el-gr"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac [el]",CultureCode:"el"},{DisplayText:"\xd0\x90\xd0\xb7\xd3\u2122\xd1\u20ac\xd0\xb1\xd0\xb0\xd1\u02dc\xd2\xb9\xd0\xb0\xd0\xbd\xc2 \xd0\xb4\xd0\xb8\xd0\xbb\xd0\xb8 [az-cyrl]",CultureCode:"az-cyrl"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ba-ru]",CultureCode:"ba-ru"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a [ba]",CultureCode:"ba"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 (\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd1\u0152) [be-by]",CultureCode:"be-by"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 [be]",CultureCode:"be"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [bs-cyrl-ba]",CultureCode:"bs-cyrl-ba"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 [bs-cyrl]",CultureCode:"bs-cyrl"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd0\xb8\xd1\x8f) [bg-bg]",CultureCode:"bg-bg"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 [bg]",CultureCode:"bg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 (\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [ky-kg]",CultureCode:"ky-kg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 [ky]",CultureCode:"ky"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a (\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [kk-kz]",CultureCode:"kk-kz"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a [kk]",CultureCode:"kk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba (\xd0\u0153\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd0\xb8\xd1\u02dc\xd0\xb0) [mk-mk]",CultureCode:"mk-mk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba [mk]",CultureCode:"mk"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb (\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u0192\xd0\xbb\xd1\x81) [mn-mn]",CultureCode:"mn-mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn]",CultureCode:"mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn-cyrl]",CultureCode:"mn-cyrl"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ru-ru]",CultureCode:"ru-ru"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 [ru]",CultureCode:"ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [sah-ru]",CultureCode:"sah-ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 [sah]",CultureCode:"sah"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [sr-cyrl-ba]",CultureCode:"sr-cyrl-ba"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0 \xd0\xb8 \xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0 (\xd0\u0178\xd1\u20ac\xd0\xb5\xd1\u201a\xd1\u2026\xd0\xbe\xd0\xb4\xd0\xbd\xd0\xbe)) [sr-cyrl-cs]",CultureCode:"sr-cyrl-cs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0) [sr-cyrl-rs]",CultureCode:"sr-cyrl-rs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0) [sr-cyrl-me]",CultureCode:"sr-cyrl-me"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 [sr-cyrl]",CultureCode:"sr-cyrl"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [tt-ru]",CultureCode:"tt-ru"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac [tt]",CultureCode:"tt"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 (\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [tg-cyrl-tj]",CultureCode:"tg-cyrl-tj"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg]",CultureCode:"tg"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg-cyrl]",CultureCode:"tg-cyrl"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba (\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [uz-cyrl-uz]",CultureCode:"uz-cyrl-uz"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba [uz-cyrl]",CultureCode:"uz-cyrl"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 (\xd0\xa3\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd0\xb0) [uk-ua]",CultureCode:"uk-ua"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 [uk]",CultureCode:"uk"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 (\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa1\xd5\xbd\xd5\xbf\xd5\xa1\xd5\xb6) [hy-am]",CultureCode:"hy-am"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 [hy]",CultureCode:"hy"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc (\xe1\u0192\xa1\xe1\u0192\x90\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\u2022\xe1\u0192\u201d\xe1\u0192\u0161\xe1\u0192\x9d) [ka-ge]",CultureCode:"ka-ge"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc [ka]",CultureCode:"ka"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa (\xd7\u2122\xd7\xa9\xd7\xa8\xd7\x90\xd7\u0153) [he-il]",CultureCode:"he-il"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa [he]",CultureCode:"he"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 (\xd9\xbe\xd8\xa7\xda\xa9\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ur-pk]",CultureCode:"ur-pk"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 [ur]",CultureCode:"ur"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa3\xd8\xb1\xd8\xaf\xd9\u2020) [ar-jo]",CultureCode:"ar-jo"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa5\xd9\u2026\xd8\xa7\xd8\xb1\xd8\xa7\xd8\xaa \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xaa\xd8\xad\xd8\xaf\xd8\xa9) [ar-ae]",CultureCode:"ar-ae"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa8\xd8\xad\xd8\xb1\xd9\u0160\xd9\u2020) [ar-bh]",CultureCode:"ar-bh"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xac\xd8\xb2\xd8\xa7\xd8\xa6\xd8\xb1) [ar-dz]",CultureCode:"ar-dz"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa7\xd9\u201a) [ar-iq]",CultureCode:"ar-iq"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0192\xd9\u02c6\xd9\u0160\xd8\xaa) [ar-kw]",CultureCode:"ar-kw"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb3\xd8\xb9\xd9\u02c6\xd8\xaf\xd9\u0160\xd8\xa9) [ar-sa]",CultureCode:"ar-sa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xba\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9) [ar-ma]",CultureCode:"ar-ma"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0160\xd9\u2026\xd9\u2020) [ar-ye]",CultureCode:"ar-ye"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xaa\xd9\u02c6\xd9\u2020\xd8\xb3) [ar-tn]",CultureCode:"ar-tn"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [ar-sy]",CultureCode:"ar-sy"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb9\xd9\u2026\xd8\xa7\xd9\u2020) [ar-om]",CultureCode:"ar-om"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201a\xd8\xb7\xd8\xb1) [ar-qa]",CultureCode:"ar-qa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd8\xa8\xd9\u2020\xd8\xa7\xd9\u2020) [ar-lb]",CultureCode:"ar-lb"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd9\u0160\xd8\xa8\xd9\u0160\xd8\xa7) [ar-ly]",CultureCode:"ar-ly"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u2026\xd8\xb5\xd8\xb1) [ar-eg]",CultureCode:"ar-eg"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 [ar]",CultureCode:"ar"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ps-af]",CultureCode:"ps-af"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 [ps]",CultureCode:"ps"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [prs-af]",CultureCode:"prs-af"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 [prs]",CultureCode:"prs"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 (\xd8\xa7\xdb\u0152\xd8\xb1\xd8\xa7\xd9\u2020) [fa-ir]",CultureCode:"fa-ir"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 [fa]",CultureCode:"fa"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 (\xd8\xac\xdb\u2021\xda\xad\xd8\xae\xdb\u2021\xd8\xa7 \xd8\xae\xdb\u2022\xd9\u201e\xd9\u201a \xd8\xac\xdb\u2021\xd9\u2026\xda\xbe\xdb\u2021\xd8\xb1\xd9\u2030\xd9\u0160\xd9\u2030\xd8\xaa\xd9\u2030) [ug-cn]",CultureCode:"ug-cn"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 [ug]",CultureCode:"ug"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [syr-sy]",CultureCode:"syr-sy"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 [syr]",CultureCode:"syr"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 (\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8 \xde\u0192\xde\xa7\xde\u2021\xde\xb0\xde\u2013\xde\xac) [dv-mv]",CultureCode:"dv-mv"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 [dv]",CultureCode:"dv"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [kok-in]",CultureCode:"kok-in"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac [kok]",CultureCode:"kok"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac (\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2) [ne-np]",CultureCode:"ne-np"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac [ne]",CultureCode:"ne"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [mr-in]",CultureCode:"mr-in"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac [mr]",CultureCode:"mr"},{
DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4\xe0\xa4\xae\xe0\xa5\x8d) [sa-in]",CultureCode:"sa-in"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 [sa]",CultureCode:"sa"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [hi-in]",CultureCode:"hi-in"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac [hi]",CultureCode:"hi"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa7\xb0\xe0\xa6\xa4) [as-in]",CultureCode:"as-in"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe [as]",CultureCode:"as"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe\xe0\xa6\xa6\xe0\xa7\u2021\xe0\xa6\xb6) [bn-bd]",CultureCode:"bn-bd"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa6\xb0\xe0\xa6\xa4) [bn-in]",CultureCode:"bn-in"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe [bn]",CultureCode:"bn"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac (\xe0\xa8\xad\xe0\xa8\xbe\xe0\xa8\xb0\xe0\xa8\xa4) [pa-in]",CultureCode:"pa-in"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac [pa]",CultureCode:"pa"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac (\xe0\xaa\xad\xe0\xaa\xbe\xe0\xaa\xb0\xe0\xaa\xa4) [gu-in]",CultureCode:"gu-in"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac [gu]",CultureCode:"gu"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 (\xe0\xac\xad\xe0\xac\xbe\xe0\xac\xb0\xe0\xac\xa4) [or-in]",CultureCode:"or-in"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 [or]",CultureCode:"or"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d (\xe0\xae\u2021\xe0\xae\xa8\xe0\xaf\x8d\xe0\xae\xa4\xe0\xae\xbf\xe0\xae\xaf\xe0\xae\xbe) [ta-in]",CultureCode:"ta-in"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d [ta]",CultureCode:"ta"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 (\xe0\xb0\xad\xe0\xb0\xbe\xe0\xb0\xb0\xe0\xb0\xa4\xc2 \xe0\xb0\xa6\xe0\xb1\u2021\xe0\xb0\xb6\xe0\xb0\u201a) [te-in]",CultureCode:"te-in"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 [te]",CultureCode:"te"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 (\xe0\xb2\xad\xe0\xb2\xbe\xe0\xb2\xb0\xe0\xb2\xa4) [kn-in]",CultureCode:"kn-in"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 [kn]",CultureCode:"kn"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a (\xe0\xb4\xad\xe0\xb4\xbe\xe0\xb4\xb0\xe0\xb4\xa4\xe0\xb4\u201a) [ml-in]",CultureCode:"ml-in"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a [ml]",CultureCode:"ml"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd (\xe0\xb7\x81\xe0\xb7\u0160\xe2\u20ac\x8d\xe0\xb6\xbb\xe0\xb7\u201c \xe0\xb6\xbd\xe0\xb6\u201a\xe0\xb6\u0161\xe0\xb7\x8f) [si-lk]",CultureCode:"si-lk"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd [si]",CultureCode:"si"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 (\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2) [th-th]",CultureCode:"th-th"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 [th]",CultureCode:"th"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 (\xe1 \xaa\xe1 \xa6\xe1 \xad\xe1 \xa6\xe1 \xb3\xe1 \xa1 \xe1 \xa8\xe1  \xe1 \xa2\xe1 \xb7\xe1  \xe1 \xae\xe1 \xb3\xe1  \xe1 \xac\xe1 \xa4 \xe1 \xb3\xe1 \xa4\xe1 \xae\xe1 \xb3\xe1  \xe1 \xb3\xe1 \xa4 \xe1  \xe1 \xb7\xe1  \xe1 \xb3 \xe1 \xa3\xe1 \xaf\xe1 \xa3\xe1 \xb0) [mn-mong-cn]",CultureCode:"mn-mong-cn"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 [mn-mong]",CultureCode:"mn-mong"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a (\xe0\xbd\u20ac\xe0\xbe\xb2\xe0\xbd\xb4\xe0\xbd\u201e\xe0\xbc\u2039\xe0\xbd\xa7\xe0\xbe\xad\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u2018\xe0\xbd\u02dc\xe0\xbd\u201e\xe0\xbd\xa6\xe0\xbc\u2039\xe0\xbd\xa6\xe0\xbe\xa4\xe0\xbe\xb1\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\x90\xe0\xbd\xb4\xe0\xbd\u201c\xe0\xbc\u2039\xe0\xbd\xa2\xe0\xbe\u2019\xe0\xbe\xb1\xe0\xbd\xa3\xe0\xbc\u2039\xe0\xbd\x81\xe0\xbd\u2013\xe0\xbc\x8d) [bo-cn]",CultureCode:"bo-cn"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a [bo]",CultureCode:"bo"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 (\xe0\xba\xaa.\xe0\xba\u203a.\xe0\xba\u203a. \xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7) [lo-la]",CultureCode:"lo-la"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 [lo]",CultureCode:"lo"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 (\xe1\u017e\u20ac\xe1\u017e\u02dc\xe1\u0178\u2019\xe1\u017e\u2013\xe1\u017e\xbb\xe1\u017e\u2021\xe1\u017e\xb6) [km-kh]",CultureCode:"km-kh"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 [km]",CultureCode:"km"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 (\xe1\u2018\xb2\xe1\u201c\u2021\xe1\u2018\u2022\xe1\u2019\xa5) [iu-cans-ca]",CultureCode:"iu-cans-ca"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 [iu-cans]",CultureCode:"iu-cans"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a (\xe1\u0160\xa2\xe1\u2030\xb5\xe1\u2039\xae\xe1\u0152\xb5\xe1\u2039\xab) [am-et]",CultureCode:"am-et"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a [am]",CultureCode:"am"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 (\xea\x8d\x8f\xea\u2030\xb8\xea\x8f\u201c\xea\u201a\xb1\xea\u2021\xad\xea\u2030\xbc\xea\u2021\xa9) [ii-cn]",CultureCode:"ii-cn"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 [ii]",CultureCode:"ii"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 (\xeb\u0152\u20ac\xed\u2022\u0153\xeb\xaf\xbc\xea\xb5\xad) [ko-kr]",CultureCode:"ko-kr"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 [ko]",CultureCode:"ko"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021 [zh]",CultureCode:"zh"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe4\xb8\xad\xe5\x8d\u017d\xe4\xba\xba\xe6\xb0\u2018\xe5\u2026\xb1\xe5\u2019\u0152\xe5\u203a\xbd) [zh-cn]",CultureCode:"zh-cn"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe5\x8f\xb0\xe7\x81\xa3) [zh-tw]",CultureCode:"zh-tw"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\u2013\xb0\xe5\u0160 \xe5\x9d\xa1) [zh-sg]",CultureCode:"zh-sg"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\xbe\xb3\xe9\u2013\u20ac\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-mo]",CultureCode:"zh-mo"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) [zh-hans]",CultureCode:"zh-hans"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) \xe6\u2014\xa7\xe7\u2030\u02c6 [zh-chs]",CultureCode:"zh-chs"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) [zh-hant]",CultureCode:"zh-hant"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) \xe8\u02c6\u0160\xe7\u2030\u02c6 [zh-cht]",CultureCode:"zh-cht"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe9\xa6\u2122\xe6\xb8\xaf\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-hk]",CultureCode:"zh-hk"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e (\xe6\u2014\xa5\xe6\u0153\xac) [ja-jp]",CultureCode:"ja-jp"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e [ja]",CultureCode:"ja"}],regionLanguage:[{DisplayText:"\xc3\xa5arjelsaemiengiele (N\xc3\xb6\xc3\xb6rje) [sma-no]",CultureCode:"sma-no"},{DisplayText:"\xc3\xa5arjelsaemiengiele (Sveerje) [sma-se]",CultureCode:"sma-se"},{DisplayText:"\xc3\xa5arjelsaemiengiele [sma]",CultureCode:"sma"},{DisplayText:"Afrikaans (Suid Afrika) [af-za]",CultureCode:"af-za"},{DisplayText:"Afrikaans [af]",CultureCode:"af"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az]",CultureCode:"az"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az-latn]",CultureCode:"az-latn"},{DisplayText:"Bahasa Indonesia (Indonesia) [id-id]",CultureCode:"id-id"},{DisplayText:"Bahasa Indonesia [id]",CultureCode:"id"},{DisplayText:"Bahasa Melayu (Brunei Darussalam) [ms-bn]",CultureCode:"ms-bn"},{DisplayText:"Bahasa Melayu (Malaysia) [ms-my]",CultureCode:"ms-my"},{DisplayText:"Bahasa Melayu [ms]",CultureCode:"ms"},{DisplayText:"bosanski (Bosna i Hercegovina) [bs-latn-ba]",CultureCode:"bs-latn-ba"},{DisplayText:"bosanski [bs]",CultureCode:"bs"},{DisplayText:"bosanski [bs-latn]",CultureCode:"bs-latn"},{DisplayText:"brezhoneg (Fra\xc3\xb1s) [br-fr]",CultureCode:"br-fr"},{DisplayText:"brezhoneg [br]",CultureCode:"br"},{DisplayText:"catal\xc3  (catal\xc3 ) [ca-es]",CultureCode:"ca-es"},{DisplayText:"catal\xc3  [ca]",CultureCode:"ca"},{DisplayText:"\xc4\x8de\xc5\xa1tina (\xc4\u0152esk\xc3\xa1\xc2 republika) [cs-cz]",CultureCode:"cs-cz"},{DisplayText:"\xc4\x8de\xc5\xa1tina [cs]",CultureCode:"cs"},{DisplayText:"Corsu (France) [co-fr]",CultureCode:"co-fr"},{DisplayText:"Corsu [co]",CultureCode:"co"},{DisplayText:"Cymraeg (y Deyrnas Unedig) [cy-gb]",CultureCode:"cy-gb"},{DisplayText:"Cymraeg [cy]",CultureCode:"cy"},{DisplayText:"dansk (Danmark) [da-dk]",CultureCode:"da-dk"},{DisplayText:"dansk [da]",CultureCode:"da"},{DisplayText:"davvis\xc3\xa1megiella (Norga) [se-no]",CultureCode:"se-no"},{DisplayText:"davvis\xc3\xa1megiella (Ruo\xc5\xa7\xc5\xa7a) [se-se]",CultureCode:"se-se"},{DisplayText:"davvis\xc3\xa1megiella (Suopma) [se-fi]",CultureCode:"se-fi"},{DisplayText:"davvis\xc3\xa1megiella [se]",CultureCode:"se"},{DisplayText:"Deutsch (Deutschland) [de-de]",CultureCode:"de-de"},{DisplayText:"Deutsch (Liechtenstein) [de-li]",CultureCode:"de-li"},{DisplayText:"Deutsch (Luxemburg) [de-lu]",CultureCode:"de-lu"},{DisplayText:"Deutsch (\xc3\u2013sterreich) [de-at]",CultureCode:"de-at"},{DisplayText:"Deutsch (Schweiz) [de-ch]",CultureCode:"de-ch"},{DisplayText:"Deutsch [de]",CultureCode:"de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina (Nimska) [dsb-de]",CultureCode:"dsb-de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina [dsb]",CultureCode:"dsb"},{DisplayText:"eesti (Eesti) [et-ee]",CultureCode:"et-ee"},{DisplayText:"eesti [et]",CultureCode:"et"},{DisplayText:"Els\xc3\xa4ssisch (Fr\xc3 nkrisch) [gsw-fr]",CultureCode:"gsw-fr"},{DisplayText:"Els\xc3\xa4ssisch [gsw]",CultureCode:"gsw"},{DisplayText:"English (Australia) [en-au]",CultureCode:"en-au"},{DisplayText:"English (Belize) [en-bz]",CultureCode:"en-bz"},{DisplayText:"English (Canada) [en-ca]",CultureCode:"en-ca"},{DisplayText:"English (Caribbean) [en-029]",CultureCode:"en-029"},{DisplayText:"English (India) [en-in]",CultureCode:"en-in"},{DisplayText:"English (Ireland) [en-ie]",CultureCode:"en-ie"},{DisplayText:"English (Jamaica) [en-jm]",CultureCode:"en-jm"},{DisplayText:"English (Malaysia) [en-my]",CultureCode:"en-my"},{DisplayText:"English (New Zealand) [en-nz]",CultureCode:"en-nz"},{DisplayText:"English (Philippines) [en-ph]",CultureCode:"en-ph"},{DisplayText:"English (Singapore) [en-sg]",CultureCode:"en-sg"},{DisplayText:"English (South Africa) [en-za]",CultureCode:"en-za"},{DisplayText:"English (Trinidad y Tobago) [en-tt]",CultureCode:"en-tt"},{DisplayText:"English (United Kingdom) [en-gb]",CultureCode:"en-gb"},{DisplayText:"English (United States) [en-us]",CultureCode:"en-us"},{DisplayText:"English (Zimbabwe) [en-zw]",CultureCode:"en-zw"},{DisplayText:"English [en]",CultureCode:"en"},{DisplayText:"Espa\xc3\xb1ol (Argentina) [es-ar]",CultureCode:"es-ar"},{DisplayText:"Espa\xc3\xb1ol (Bolivia) [es-bo]",CultureCode:"es-bo"},{DisplayText:"Espa\xc3\xb1ol (Chile) [es-cl]",CultureCode:"es-cl"},{DisplayText:"Espa\xc3\xb1ol (Colombia) [es-co]",CultureCode:"es-co"},{DisplayText:"Espa\xc3\xb1ol (Costa Rica) [es-cr]",CultureCode:"es-cr"},{DisplayText:"Espa\xc3\xb1ol (Ecuador) [es-ec]",CultureCode:"es-ec"},{DisplayText:"Espa\xc3\xb1ol (El Salvador) [es-sv]",CultureCode:"es-sv"},{DisplayText:"Espa\xc3\xb1ol (Espa\xc3\xb1a, alfabetizaci\xc3\xb3n internacional) [es-es]",CultureCode:"es-es"},{DisplayText:"Espa\xc3\xb1ol (Estados Unidos) [es-us]",CultureCode:"es-us"},{DisplayText:"Espa\xc3\xb1ol (Guatemala) [es-gt]",CultureCode:"es-gt"},{DisplayText:"Espa\xc3\xb1ol (Honduras) [es-hn]",CultureCode:"es-hn"},{DisplayText:"Espa\xc3\xb1ol (M\xc3\xa9xico) [es-mx]",CultureCode:"es-mx"},{DisplayText:"Espa\xc3\xb1ol (Nicaragua) [es-ni]",CultureCode:"es-ni"},{DisplayText:"Espa\xc3\xb1ol (Panam\xc3\xa1) [es-pa]",CultureCode:"es-pa"},{DisplayText:"Espa\xc3\xb1ol (Paraguay) [es-py]",CultureCode:"es-py"},{DisplayText:"Espa\xc3\xb1ol (Per\xc3\xba) [es-pe]",CultureCode:"es-pe"},{DisplayText:"Espa\xc3\xb1ol (Puerto Rico) [es-pr]",CultureCode:"es-pr"},{DisplayText:"Espa\xc3\xb1ol (Republica Bolivariana de Venezuela) [es-ve]",CultureCode:"es-ve"},{DisplayText:"Espa\xc3\xb1ol (Rep\xc3\xbablica Dominicana) [es-do]",CultureCode:"es-do"},{DisplayText:"Espa\xc3\xb1ol (Uruguay) [es-uy]",CultureCode:"es-uy"},{DisplayText:"espa\xc3\xb1ol [es]",CultureCode:"es"},{DisplayText:"euskara (euskara) [eu-es]",CultureCode:"eu-es"},{DisplayText:"euskara [eu]",CultureCode:"eu"},{DisplayText:"Filipino (Pilipinas) [fil-ph]",CultureCode:"fil-ph"},{DisplayText:"Filipino [fil]",CultureCode:"fil"},{DisplayText:"f\xc3\xb8royskt (F\xc3\xb8royar) [fo-fo]",CultureCode:"fo-fo"},{DisplayText:"f\xc3\xb8royskt [fo]",CultureCode:"fo"},{DisplayText:"fran\xc3\xa7ais (Belgique) [fr-be]",CultureCode:"fr-be"},{DisplayText:"fran\xc3\xa7ais (Canada) [fr-ca]",CultureCode:"fr-ca"},{DisplayText:"fran\xc3\xa7ais (France) [fr-fr]",CultureCode:"fr-fr"},{DisplayText:"fran\xc3\xa7ais (Luxembourg) [fr-lu]",CultureCode:"fr-lu"},{DisplayText:"fran\xc3\xa7ais (Principaut\xc3\xa9 de Monaco) [fr-mc]",CultureCode:"fr-mc"},{DisplayText:"fran\xc3\xa7ais (Suisse) [fr-ch]",CultureCode:"fr-ch"},{DisplayText:"fran\xc3\xa7ais [fr]",CultureCode:"fr"},{DisplayText:"Frysk (Nederl\xc3\xa2n) [fy-nl]",CultureCode:"fy-nl"},{DisplayText:"Frysk [fy]",CultureCode:"fy"},{DisplayText:"Gaeilge (\xc3\u2030ire) [ga-ie]",CultureCode:"ga-ie"},{DisplayText:"Gaeilge [ga]",CultureCode:"ga"},{DisplayText:"G\xc3 idhlig (An R\xc3\xacoghachd Aonaichte) [gd-gb]",CultureCode:"gd-gb"},{DisplayText:"G\xc3 idhlig [gd]",CultureCode:"gd"},{DisplayText:"galego (galego) [gl-es]",CultureCode:"gl-es"},{DisplayText:"galego [gl]",CultureCode:"gl"},{DisplayText:"Hausa (Nigeria) [ha-latn-ng]",CultureCode:"ha-latn-ng"},{DisplayText:"Hausa [ha]",CultureCode:"ha"},{DisplayText:"Hausa [ha-latn]",CultureCode:"ha-latn"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina (N\xc4\u203amska) [hsb-de]",CultureCode:"hsb-de"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina [hsb]",CultureCode:"hsb"},{DisplayText:"hrvatski (Bosna i Hercegovina) [hr-ba]",CultureCode:"hr-ba"},{DisplayText:"hrvatski (Hrvatska) [hr-hr]",CultureCode:"hr-hr"},{DisplayText:"hrvatski [hr]",CultureCode:"hr"},{DisplayText:"Igbo (Nigeria) [ig-ng]",CultureCode:"ig-ng"},{DisplayText:"Igbo [ig]",CultureCode:"ig"},{DisplayText:"Inuktitut (Kanatami) [iu-latn-ca]",CultureCode:"iu-latn-ca"},{DisplayText:"Inuktitut [iu]",CultureCode:"iu"},{DisplayText:"Inuktitut [iu-latn]",CultureCode:"iu-latn"},{DisplayText:"Invariant Language (Invariant Country) []",CultureCode:""},{DisplayText:"isiXhosa (uMzantsi Afrika) [xh-za]",CultureCode:"xh-za"},{DisplayText:"isiXhosa [xh]",CultureCode:"xh"},{DisplayText:"isiZulu (iNingizimu Afrika) [zu-za]",CultureCode:"zu-za"},{DisplayText:"isiZulu [zu]",CultureCode:"zu"},{DisplayText:"\xc3\xadslenska (\xc3\x8dsland) [is-is]",CultureCode:"is-is"},{DisplayText:"\xc3\xadslenska [is]",CultureCode:"is"},{DisplayText:"italiano (Italia) [it-it]",CultureCode:"it-it"},{DisplayText:"italiano (Svizzera) [it-ch]",CultureCode:"it-ch"},{DisplayText:"italiano [it]",CultureCode:"it"},{DisplayText:"julevus\xc3\xa1megiella (Svierik) [smj-se]",CultureCode:"smj-se"},{DisplayText:"julevus\xc3\xa1megiella (Vuodna) [smj-no]",CultureCode:"smj-no"},{DisplayText:"julevus\xc3\xa1megiella [smj]",CultureCode:"smj"},{DisplayText:"kalaallisut (Kalaallit Nunaat) [kl-gl]",CultureCode:"kl-gl"},{DisplayText:"kalaallisut [kl]",CultureCode:"kl"},{DisplayText:"Kanien'k\xc3\xa9ha [moh]",CultureCode:"moh"},{DisplayText:"Kanien'k\xc3\xa9ha [moh-ca]",CultureCode:"moh-ca"},{DisplayText:"K'iche (Guatemala) [qut-gt]",CultureCode:"qut-gt"},{DisplayText:"K'iche [qut]",CultureCode:"qut"},{DisplayText:"Kinyarwanda (Rwanda) [rw-rw]",CultureCode:"rw-rw"},{DisplayText:"Kinyarwanda [rw]",CultureCode:"rw"},{DisplayText:"Kiswahili (Kenya) [sw-ke]",CultureCode:"sw-ke"},{DisplayText:"Kiswahili [sw]",CultureCode:"sw"},{DisplayText:"latvie\xc5\xa1u (Latvija) [lv-lv]",CultureCode:"lv-lv"},{DisplayText:"latvie\xc5\xa1u [lv]",CultureCode:"lv"},{DisplayText:"L\xc3\xabtzebuergesch (Luxembourg) [lb-lu]",CultureCode:"lb-lu"},{DisplayText:"L\xc3\xabtzebuergesch [lb]",CultureCode:"lb"},{DisplayText:"lietuvi\xc5\xb3 (Lietuva) [lt-lt]",CultureCode:"lt-lt"},{DisplayText:"lietuvi\xc5\xb3 [lt]",CultureCode:"lt"},{DisplayText:"magyar (Magyarorsz\xc3\xa1g) [hu-hu]",CultureCode:"hu-hu"},{DisplayText:"magyar [hu]",CultureCode:"hu"},{DisplayText:"Malti (Malta) [mt-mt]",CultureCode:"mt-mt"},{DisplayText:"Malti [mt]",CultureCode:"mt"},{DisplayText:"Mapudungun (Chile) [arn-cl]",CultureCode:"arn-cl"},{DisplayText:"Mapudungun [arn]",CultureCode:"arn"},{DisplayText:"Nederlands (Belgi\xc3\xab) [nl-be]",CultureCode:"nl-be"},{DisplayText:"Nederlands (Nederland) [nl-nl]",CultureCode:"nl-nl"},{DisplayText:"Nederlands [nl]",CultureCode:"nl"},{DisplayText:"norsk (bokm\xc3\xa5l) [nb]",CultureCode:"nb"},{DisplayText:"norsk (nynorsk) [nn]",CultureCode:"nn"},{DisplayText:"norsk [no]",CultureCode:"no"},{DisplayText:"norsk, bokm\xc3\xa5l (Norge) [nb-no]",CultureCode:"nb-no"},{DisplayText:"norsk, nynorsk (Noreg) [nn-no]",CultureCode:"nn-no"},{DisplayText:"Occitan (Fran\xc3\xa7a) [oc-fr]",CultureCode:"oc-fr"},{DisplayText:"Occitan [oc]",CultureCode:"oc"},{DisplayText:"polski (Polska) [pl-pl]",CultureCode:"pl-pl"},{DisplayText:"polski [pl]",CultureCode:"pl"},{DisplayText:"Portugu\xc3\xaas (Brasil) [pt-br]",CultureCode:"pt-br"},{DisplayText:"portugu\xc3\xaas (Portugal) [pt-pt]",CultureCode:"pt-pt"},{DisplayText:"Portugu\xc3\xaas [pt]",CultureCode:"pt"},{DisplayText:"Reo M\xc4\x81ori (Aotearoa) [mi-nz]",CultureCode:"mi-nz"},{DisplayText:"Reo M\xc4\x81ori [mi]",CultureCode:"mi"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 (Rom\xc3\xa2nia) [ro-ro]",CultureCode:"ro-ro"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 [ro]",CultureCode:"ro"},{DisplayText:"Rumantsch (Svizra) [rm-ch]",CultureCode:"rm-ch"},{DisplayText:"Rumantsch [rm]",CultureCode:"rm"},{DisplayText:"runasimi (Ecuador) [quz-ec]",CultureCode:"quz-ec"},{DisplayText:"runasimi (Piruw) [quz-pe]",CultureCode:"quz-pe"},{DisplayText:"runasimi (Qullasuyu) [quz-bo]",CultureCode:"quz-bo"},{DisplayText:"runasimi [quz]",CultureCode:"quz"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll (L\xc3\xa4\xc3\xa4\xc2\xb4ddj\xc3\xa2nnam) [sms-fi]",CultureCode:"sms-fi"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll [sms]",CultureCode:"sms"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 (Suom\xc3\xa2) [smn-fi]",CultureCode:"smn-fi"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 [smn]",CultureCode:"smn"},{DisplayText:"Sesotho sa Leboa (Afrika Borwa) [nso-za]",CultureCode:"nso-za"},{DisplayText:"Sesotho sa Leboa [nso]",CultureCode:"nso"},{DisplayText:"Setswana (Aforika Borwa) [tn-za]",CultureCode:"tn-za"},{DisplayText:"Setswana [tn]",CultureCode:"tn"},{DisplayText:"shqipe (Shqip\xc3\xabria) [sq-al]",CultureCode:"sq-al"},{DisplayText:"shqipe [sq]",CultureCode:"sq"},{DisplayText:"sloven\xc4\x8dina (Slovensk\xc3\xa1 republika) [sk-sk]",CultureCode:"sk-sk"},{DisplayText:"sloven\xc4\x8dina [sk]",CultureCode:"sk"},{DisplayText:"slovenski (Slovenija) [sl-si]",CultureCode:"sl-si"},{DisplayText:"slovenski [sl]",CultureCode:"sl"},{DisplayText:"srpski (Bosna i Hercegovina) [sr-latn-ba]",CultureCode:"sr-latn-ba"},{DisplayText:"srpski (Crna Gora) [sr-latn-me]",CultureCode:"sr-latn-me"},{DisplayText:"srpski (Srbija i Crna Gora (Prethodno)) [sr-latn-cs]",CultureCode:"sr-latn-cs"},{DisplayText:"srpski (Srbija) [sr-latn-rs]",CultureCode:"sr-latn-rs"},{DisplayText:"srpski [sr]",CultureCode:"sr"},{DisplayText:"srpski [sr-latn]",CultureCode:"sr-latn"},{DisplayText:"suomi (Suomi) [fi-fi]",CultureCode:"fi-fi"},{DisplayText:"suomi [fi]",CultureCode:"fi"},{DisplayText:"svenska (Finland) [sv-fi]",CultureCode:"sv-fi"},{DisplayText:"svenska (Sverige) [sv-se]",CultureCode:"sv-se"},{DisplayText:"svenska [sv]",CultureCode:"sv"},{DisplayText:"Tamazight (Djaza\xc3\xafr) [tzm-latn-dz]",CultureCode:"tzm-latn-dz"},{DisplayText:"Tamazight [tzm]",CultureCode:"tzm"},{DisplayText:"Tamazight [tzm-latn]",CultureCode:"tzm-latn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t (Vi\xe1\xbb\u2021t Nam) [vi-vn]",CultureCode:"vi-vn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t [vi]",CultureCode:"vi"},{DisplayText:"T\xc3\xbcrk\xc3\xa7e [tr]",CultureCode:"tr"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e (T\xc3\xbcrkmenistan) [tk-tm]",CultureCode:"tk-tm"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e [tk]",CultureCode:"tk"},{DisplayText:"U'zbek (U'zbekiston Respublikasi) [uz-latn-uz]",CultureCode:"uz-latn-uz"},{DisplayText:"U'zbek [uz]",CultureCode:"uz"},{DisplayText:"U'zbek [uz-latn]",CultureCode:"uz-latn"},{DisplayText:"Wolof (S\xc3\xa9n\xc3\xa9gal) [wo-sn]",CultureCode:"wo-sn"},{DisplayText:"Wolof [wo]",CultureCode:"wo"},{DisplayText:"Yoruba (Nigeria) [yo-ng]",CultureCode:"yo-ng"},{DisplayText:"Yoruba [yo]",CultureCode:"yo"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac (\xce\u2022\xce\xbb\xce\xbb\xce\xac\xce\xb4\xce\xb1) [el-gr]",CultureCode:"el-gr"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac [el]",CultureCode:"el"},{DisplayText:"\xd0\x90\xd0\xb7\xd3\u2122\xd1\u20ac\xd0\xb1\xd0\xb0\xd1\u02dc\xd2\xb9\xd0\xb0\xd0\xbd\xc2 \xd0\xb4\xd0\xb8\xd0\xbb\xd0\xb8 [az-cyrl]",CultureCode:"az-cyrl"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ba-ru]",CultureCode:"ba-ru"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a [ba]",CultureCode:"ba"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 (\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd1\u0152) [be-by]",CultureCode:"be-by"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 [be]",CultureCode:"be"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [bs-cyrl-ba]",CultureCode:"bs-cyrl-ba"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 [bs-cyrl]",CultureCode:"bs-cyrl"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd0\xb8\xd1\x8f) [bg-bg]",CultureCode:"bg-bg"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 [bg]",CultureCode:"bg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 (\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [ky-kg]",CultureCode:"ky-kg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 [ky]",CultureCode:"ky"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a (\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [kk-kz]",CultureCode:"kk-kz"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a [kk]",CultureCode:"kk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba (\xd0\u0153\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd0\xb8\xd1\u02dc\xd0\xb0) [mk-mk]",CultureCode:"mk-mk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba [mk]",CultureCode:"mk"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb (\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u0192\xd0\xbb\xd1\x81) [mn-mn]",CultureCode:"mn-mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn]",CultureCode:"mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn-cyrl]",CultureCode:"mn-cyrl"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ru-ru]",CultureCode:"ru-ru"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 [ru]",CultureCode:"ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [sah-ru]",CultureCode:"sah-ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 [sah]",CultureCode:"sah"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [sr-cyrl-ba]",CultureCode:"sr-cyrl-ba"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0 \xd0\xb8 \xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0 (\xd0\u0178\xd1\u20ac\xd0\xb5\xd1\u201a\xd1\u2026\xd0\xbe\xd0\xb4\xd0\xbd\xd0\xbe)) [sr-cyrl-cs]",CultureCode:"sr-cyrl-cs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0) [sr-cyrl-rs]",CultureCode:"sr-cyrl-rs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0) [sr-cyrl-me]",CultureCode:"sr-cyrl-me"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 [sr-cyrl]",CultureCode:"sr-cyrl"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [tt-ru]",CultureCode:"tt-ru"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac [tt]",CultureCode:"tt"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 (\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [tg-cyrl-tj]",CultureCode:"tg-cyrl-tj"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg]",CultureCode:"tg"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg-cyrl]",CultureCode:"tg-cyrl"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba (\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [uz-cyrl-uz]",CultureCode:"uz-cyrl-uz"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba [uz-cyrl]",CultureCode:"uz-cyrl"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 (\xd0\xa3\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd0\xb0) [uk-ua]",CultureCode:"uk-ua"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 [uk]",CultureCode:"uk"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 (\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa1\xd5\xbd\xd5\xbf\xd5\xa1\xd5\xb6) [hy-am]",CultureCode:"hy-am"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 [hy]",CultureCode:"hy"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc (\xe1\u0192\xa1\xe1\u0192\x90\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\u2022\xe1\u0192\u201d\xe1\u0192\u0161\xe1\u0192\x9d) [ka-ge]",CultureCode:"ka-ge"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc [ka]",CultureCode:"ka"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa (\xd7\u2122\xd7\xa9\xd7\xa8\xd7\x90\xd7\u0153) [he-il]",CultureCode:"he-il"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa [he]",CultureCode:"he"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 (\xd9\xbe\xd8\xa7\xda\xa9\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ur-pk]",CultureCode:"ur-pk"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 [ur]",CultureCode:"ur"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa3\xd8\xb1\xd8\xaf\xd9\u2020) [ar-jo]",CultureCode:"ar-jo"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa5\xd9\u2026\xd8\xa7\xd8\xb1\xd8\xa7\xd8\xaa \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xaa\xd8\xad\xd8\xaf\xd8\xa9) [ar-ae]",CultureCode:"ar-ae"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa8\xd8\xad\xd8\xb1\xd9\u0160\xd9\u2020) [ar-bh]",CultureCode:"ar-bh"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xac\xd8\xb2\xd8\xa7\xd8\xa6\xd8\xb1) [ar-dz]",CultureCode:"ar-dz"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa7\xd9\u201a) [ar-iq]",CultureCode:"ar-iq"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0192\xd9\u02c6\xd9\u0160\xd8\xaa) [ar-kw]",CultureCode:"ar-kw"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb3\xd8\xb9\xd9\u02c6\xd8\xaf\xd9\u0160\xd8\xa9) [ar-sa]",CultureCode:"ar-sa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xba\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9) [ar-ma]",CultureCode:"ar-ma"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0160\xd9\u2026\xd9\u2020) [ar-ye]",CultureCode:"ar-ye"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xaa\xd9\u02c6\xd9\u2020\xd8\xb3) [ar-tn]",CultureCode:"ar-tn"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [ar-sy]",CultureCode:"ar-sy"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb9\xd9\u2026\xd8\xa7\xd9\u2020) [ar-om]",CultureCode:"ar-om"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201a\xd8\xb7\xd8\xb1) [ar-qa]",CultureCode:"ar-qa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd8\xa8\xd9\u2020\xd8\xa7\xd9\u2020) [ar-lb]",CultureCode:"ar-lb"},{
DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd9\u0160\xd8\xa8\xd9\u0160\xd8\xa7) [ar-ly]",CultureCode:"ar-ly"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u2026\xd8\xb5\xd8\xb1) [ar-eg]",CultureCode:"ar-eg"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 [ar]",CultureCode:"ar"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ps-af]",CultureCode:"ps-af"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 [ps]",CultureCode:"ps"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [prs-af]",CultureCode:"prs-af"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 [prs]",CultureCode:"prs"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 (\xd8\xa7\xdb\u0152\xd8\xb1\xd8\xa7\xd9\u2020) [fa-ir]",CultureCode:"fa-ir"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 [fa]",CultureCode:"fa"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 (\xd8\xac\xdb\u2021\xda\xad\xd8\xae\xdb\u2021\xd8\xa7 \xd8\xae\xdb\u2022\xd9\u201e\xd9\u201a \xd8\xac\xdb\u2021\xd9\u2026\xda\xbe\xdb\u2021\xd8\xb1\xd9\u2030\xd9\u0160\xd9\u2030\xd8\xaa\xd9\u2030) [ug-cn]",CultureCode:"ug-cn"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 [ug]",CultureCode:"ug"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [syr-sy]",CultureCode:"syr-sy"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 [syr]",CultureCode:"syr"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 (\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8 \xde\u0192\xde\xa7\xde\u2021\xde\xb0\xde\u2013\xde\xac) [dv-mv]",CultureCode:"dv-mv"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 [dv]",CultureCode:"dv"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [kok-in]",CultureCode:"kok-in"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac [kok]",CultureCode:"kok"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac (\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2) [ne-np]",CultureCode:"ne-np"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac [ne]",CultureCode:"ne"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [mr-in]",CultureCode:"mr-in"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac [mr]",CultureCode:"mr"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4\xe0\xa4\xae\xe0\xa5\x8d) [sa-in]",CultureCode:"sa-in"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 [sa]",CultureCode:"sa"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [hi-in]",CultureCode:"hi-in"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac [hi]",CultureCode:"hi"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa7\xb0\xe0\xa6\xa4) [as-in]",CultureCode:"as-in"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe [as]",CultureCode:"as"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe\xe0\xa6\xa6\xe0\xa7\u2021\xe0\xa6\xb6) [bn-bd]",CultureCode:"bn-bd"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa6\xb0\xe0\xa6\xa4) [bn-in]",CultureCode:"bn-in"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe [bn]",CultureCode:"bn"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac (\xe0\xa8\xad\xe0\xa8\xbe\xe0\xa8\xb0\xe0\xa8\xa4) [pa-in]",CultureCode:"pa-in"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac [pa]",CultureCode:"pa"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac (\xe0\xaa\xad\xe0\xaa\xbe\xe0\xaa\xb0\xe0\xaa\xa4) [gu-in]",CultureCode:"gu-in"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac [gu]",CultureCode:"gu"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 (\xe0\xac\xad\xe0\xac\xbe\xe0\xac\xb0\xe0\xac\xa4) [or-in]",CultureCode:"or-in"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 [or]",CultureCode:"or"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d (\xe0\xae\u2021\xe0\xae\xa8\xe0\xaf\x8d\xe0\xae\xa4\xe0\xae\xbf\xe0\xae\xaf\xe0\xae\xbe) [ta-in]",CultureCode:"ta-in"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d [ta]",CultureCode:"ta"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 (\xe0\xb0\xad\xe0\xb0\xbe\xe0\xb0\xb0\xe0\xb0\xa4\xc2 \xe0\xb0\xa6\xe0\xb1\u2021\xe0\xb0\xb6\xe0\xb0\u201a) [te-in]",CultureCode:"te-in"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 [te]",CultureCode:"te"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 (\xe0\xb2\xad\xe0\xb2\xbe\xe0\xb2\xb0\xe0\xb2\xa4) [kn-in]",CultureCode:"kn-in"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 [kn]",CultureCode:"kn"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a (\xe0\xb4\xad\xe0\xb4\xbe\xe0\xb4\xb0\xe0\xb4\xa4\xe0\xb4\u201a) [ml-in]",CultureCode:"ml-in"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a [ml]",CultureCode:"ml"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd (\xe0\xb7\x81\xe0\xb7\u0160\xe2\u20ac\x8d\xe0\xb6\xbb\xe0\xb7\u201c \xe0\xb6\xbd\xe0\xb6\u201a\xe0\xb6\u0161\xe0\xb7\x8f) [si-lk]",CultureCode:"si-lk"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd [si]",CultureCode:"si"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 (\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2) [th-th]",CultureCode:"th-th"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 [th]",CultureCode:"th"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 (\xe1 \xaa\xe1 \xa6\xe1 \xad\xe1 \xa6\xe1 \xb3\xe1 \xa1 \xe1 \xa8\xe1  \xe1 \xa2\xe1 \xb7\xe1  \xe1 \xae\xe1 \xb3\xe1  \xe1 \xac\xe1 \xa4 \xe1 \xb3\xe1 \xa4\xe1 \xae\xe1 \xb3\xe1  \xe1 \xb3\xe1 \xa4 \xe1  \xe1 \xb7\xe1  \xe1 \xb3 \xe1 \xa3\xe1 \xaf\xe1 \xa3\xe1 \xb0) [mn-mong-cn]",CultureCode:"mn-mong-cn"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 [mn-mong]",CultureCode:"mn-mong"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a (\xe0\xbd\u20ac\xe0\xbe\xb2\xe0\xbd\xb4\xe0\xbd\u201e\xe0\xbc\u2039\xe0\xbd\xa7\xe0\xbe\xad\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u2018\xe0\xbd\u02dc\xe0\xbd\u201e\xe0\xbd\xa6\xe0\xbc\u2039\xe0\xbd\xa6\xe0\xbe\xa4\xe0\xbe\xb1\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\x90\xe0\xbd\xb4\xe0\xbd\u201c\xe0\xbc\u2039\xe0\xbd\xa2\xe0\xbe\u2019\xe0\xbe\xb1\xe0\xbd\xa3\xe0\xbc\u2039\xe0\xbd\x81\xe0\xbd\u2013\xe0\xbc\x8d) [bo-cn]",CultureCode:"bo-cn"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a [bo]",CultureCode:"bo"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 (\xe0\xba\xaa.\xe0\xba\u203a.\xe0\xba\u203a. \xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7) [lo-la]",CultureCode:"lo-la"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 [lo]",CultureCode:"lo"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 (\xe1\u017e\u20ac\xe1\u017e\u02dc\xe1\u0178\u2019\xe1\u017e\u2013\xe1\u017e\xbb\xe1\u017e\u2021\xe1\u017e\xb6) [km-kh]",CultureCode:"km-kh"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 [km]",CultureCode:"km"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 (\xe1\u2018\xb2\xe1\u201c\u2021\xe1\u2018\u2022\xe1\u2019\xa5) [iu-cans-ca]",CultureCode:"iu-cans-ca"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 [iu-cans]",CultureCode:"iu-cans"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a (\xe1\u0160\xa2\xe1\u2030\xb5\xe1\u2039\xae\xe1\u0152\xb5\xe1\u2039\xab) [am-et]",CultureCode:"am-et"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a [am]",CultureCode:"am"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 (\xea\x8d\x8f\xea\u2030\xb8\xea\x8f\u201c\xea\u201a\xb1\xea\u2021\xad\xea\u2030\xbc\xea\u2021\xa9) [ii-cn]",CultureCode:"ii-cn"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 [ii]",CultureCode:"ii"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 (\xeb\u0152\u20ac\xed\u2022\u0153\xeb\xaf\xbc\xea\xb5\xad) [ko-kr]",CultureCode:"ko-kr"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 [ko]",CultureCode:"ko"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021 [zh]",CultureCode:"zh"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe4\xb8\xad\xe5\x8d\u017d\xe4\xba\xba\xe6\xb0\u2018\xe5\u2026\xb1\xe5\u2019\u0152\xe5\u203a\xbd) [zh-cn]",CultureCode:"zh-cn"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe5\x8f\xb0\xe7\x81\xa3) [zh-tw]",CultureCode:"zh-tw"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\u2013\xb0\xe5\u0160 \xe5\x9d\xa1) [zh-sg]",CultureCode:"zh-sg"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\xbe\xb3\xe9\u2013\u20ac\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-mo]",CultureCode:"zh-mo"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) [zh-hans]",CultureCode:"zh-hans"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) \xe6\u2014\xa7\xe7\u2030\u02c6 [zh-chs]",CultureCode:"zh-chs"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) [zh-hant]",CultureCode:"zh-hant"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) \xe8\u02c6\u0160\xe7\u2030\u02c6 [zh-cht]",CultureCode:"zh-cht"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe9\xa6\u2122\xe6\xb8\xaf\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-hk]",CultureCode:"zh-hk"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e (\xe6\u2014\xa5\xe6\u0153\xac) [ja-jp]",CultureCode:"ja-jp"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e [ja]",CultureCode:"ja"}]}}}return e(a,[{key:"read",value:function(a){if(a){if(a.expectSuccess&&a.success)return void a.success(this.queryResult);if(!a.expectSuccess&&a.failure)return void a.failure("class query failed")}}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0);Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return d[a]}})})}])})},"Sage/Services/LocalStorageService":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare","icrm-js-services"],function(a,b,c){var d={};c&&c.CachingService&&(d=c.CachingService);var e=b("Sage.Services.LocalStorageService",[d],{constructor:function(){"function"==typeof this.setCacheStorage&&this.setCacheStorage(localStorage)}});return Sage.Services.hasService("LocalStorage")||Sage.Services.addService("LocalStorage",new Sage.Services.LocalStorageService),e})},"Sage/UI/Controls/DropDownSelectUser":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/ComboBox","dojo/text!./templates/DropDownSelectUser.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.Controls.DropDownSelectUser",[c,a,b],{dataStore:null,storeOptions:null,storeData:null,templateString:i,widgetsInTemplate:!0,_position:0,_pageSize:100,_queryResults:null,constructor:function(a){this.storeOptions=a.storeOptions||{include:["UserInfo"],select:["Id","UserName","UserInfo/FirstName","UserInfo/LastName","Type"],sort:[{attribute:"UserInfo.LastName",descending:!1}],service:g.getSDataService("dynamic",!1,!0,!0),resourceKind:"users"},this.dataStore=new f(this.storeOptions),this.inherited(arguments)},postCreate:function(){var a=new dojo.Deferred;this._position=0,this._queryResults=null,this.getUserData(a),a.then(dojo.hitch(this,function(a){if(a){for(var b=[],c=a.length,d=null,f=0;f<c;f++)d=a[f],"Template"!==d.Type&&b.push({id:d.$key,text:[d.UserInfo.FirstName,d.UserInfo.LastName].join(" ")});this.storeData={identifier:"id",label:"text",items:b};var g=new e({data:this.storeData});this.comboBox.set("store",g),this.comboBox.set("searchAttr","text")}}),function(a){}),this.inherited(arguments)},getUserData:function(a){this.dataStore.fetch({count:this._pageSize,start:this._position,onComplete:function(b){b.length===this._pageSize?(this._position+=this._pageSize,null===this._queryResults?this._queryResults=b:this._queryResults.push.apply(this._queryResults,b),this.getUserData(a)):(null===this._queryResults?this._queryResults=b:this._queryResults.push.apply(this._queryResults,b),a.callback(this._queryResults))},onError:function(b){a.errback(b)},scope:this})},_getValueAttr:function(){return this.comboBox.get("value")}})})},"Sage/UI/Controls/Phone":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.Phone",c,{slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},shouldPublishMarkDirty:!0,autoPostBack:!1,postCreate:function(){this.inherited(arguments),this.unformattedValue=this.unformatNumber(this.get("value"))},unformattedValue:"",formatPhoneChange:function(a){this.unformattedValue=this.unformatNumber(this.get("value"));var b=this.formatNumberForDisplay(a,this.unformattedValue);this.set("value",b)},formatters:[{test:/^\+.*/,format:"{0}"},{test:/^(\d{3})(\d{3,4})$/,format:"{3}-{4}"},{test:/^(\d{3})(\d{3})(\d{2,4})$/,format:"({3}) {4}-{5}"},{test:/^(\d{3})(\d{3})(\d{2,4})([^0-9]{1,}.*)$/,format:"({3}) {4}-{5}{6}"},{test:/^(\d{11,})(.*)$/,format:"{1}"}],unformatNumber:function(a){var b=a;return b&&b.length&&("+"===b[0]||"0"===b[0])?b:b=b.replace(/[^0-9x]/gi,"")},formatNumberForDisplay:function(a,b){var c=a;if(/^\+/.test(c))return c;void 0===b&&(b=c);for(var d=0;d<this.formatters.length;d++){var e,f=this.formatters[d];if(e=f.test.exec(b))return String.format.apply(String,[f.format,c,b].concat(e))}return c},onChange:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.formatPhoneChange(a)}})})},"Sage/UI/Controls/TextBox":function(){define(["dijit/form/ValidationTextBox","dojo/dom-class","dojo/query","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.TextBox",[a],{maxLength:"",textWithIcons:!1,shouldPublishMarkDirty:!0,autoPostBack:!1,hotKey:"",_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},postCreate:function(){this.connect(this,"onChange",this.onChanged),this.inherited(arguments)},startup:function(a){if(this.textWithIcons){var d=this;dojo.ready(function(){if(c("#"+d.id)[0]){var a=c("#"+d.id)[0];b.add(a.parentNode,"textcontainer-with-icons")}})}this.inherited(arguments)},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.id,"")},setAttribute:function(a,b){this.set(a,b)}})})},"Sage/UI/Controls/GridParts/Columns/DateTime":function(){define(["dojo/date/locale","Sage/Utility","Sage/Utility/Activity","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){var f=d("Sage.UI.Controls.GridParts.Columns.DateTime",null,{timelessField:"",timelessText:"",dateOnly:!1,utc:!1,useFiveSecondRuleToDetermineTimeless:!1,constructor:function(a){e.mixin(this,a)},format:function(a,b){var c=this.formattedDate(a,b);if(this.abbreviationLength){c=Sage.Format.abbreviationFormatter(this.abbreviationLength)(c)}return c},formattedDate:function(d,e){if(!e)return"";var f=d||this.defaultValue;if(this.dateOnly=void 0===this.dateTimeType?this.dateOnly:"D"===this.dateTimeType.toUpperCase(),!f)return"";if(!(f=g.toDateFromString(f,!0))||f.constructor!==Date)return"";var h=!1;if(this.timelessField&&""!==this.timelessField&&(h=g.toBoolean(b.getValue(e,this.timelessField,"F"))),this.useFiveSecondRuleToDetermineTimeless&&(h=c.isDateFiveSecondRuleTimeless(f)),this.dateOnly||this.datePattern){if(this.datePattern)return this.dateOnly&&(f=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate())),f.format(this.datePattern,{locale:Sys.CultureInfo.CurrentCulture.name});if(this.utc){var i=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate());return a.format(i,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return dojo.date.locale.format(f,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}if(h){var j=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,5);return dojo.date.locale.format(j,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})+this.timelessText}return a.format(f,{selector:this.formatType||"date/time",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}}),g=b.Convert;return f})},"Sage/UI/Controls/GridParts/Columns/Phone":function(){define(["Sage/Format","Sage/UI/Controls/Phone","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.UI.Controls.GridParts.Columns.Phone",null,{defaultValue:"",widgetClass:b,constructor:function(a){d.mixin(this,a)},format:function(b,c){return'<a href="tel:'+b+'">'+a.phone(b,c)+"</a>"}})})},"Sage/Format":function(){define(["Sage/Utility","dojo/string"],function(a,b){return Sage.Format={phone:function(c,d){return c?10!==c.length?a.htmlEncode(c):b.substitute("(${0}) ${1}-${2}",[c.substring(0,3),c.substring(3,6),c.substring(6)]):""},email:function(a,b){if(!a)return"";var c=a;return this.icon&&""!==this.icon&&(c=!0===this.icon||"true"===this.icon?'<img src="images/icons/Send_Write_email_16x16.png" />':'<img src="'+this.icon+'" />'),dojo.string.substitute('<a href="mailto:${0}">${1}</a>',[a,c])},stringFromArray:function(a,b){switch(b.length){case 1:return String.format(a,b[0]);case 2:return String.format(a,b[0],b[1]);case 3:return String.format(a,b[0],b[1],b[2]);case 4:return String.format(a,b[0],b[1],b[2],b[3]);case 5:return String.format(a,b[0],b[1],b[2],b[3],b[4]);case 6:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);default:return a}},abbreviationFormatter:function(a){return function(b,c){if(null===b)return"";if("string"!=typeof b||b.length<=a)return b;b=b.substring(0,a);var d=b.lastIndexOf(" ");return d>0&&d>.75*b.length&&(b=b.substring(0,d)),b+"..."}},Address:{formatAddress:function(a,b){var c="\r\n",d="",e=this.GetAddressLines(a),f=this.GetCity(a),g=this.GetState(a),h=this.GetZipCode(a),i=this.GetCounty(a),j=this.GetCountry(a);return d=b.replace(/%A/g,e),d=d.replace(/%D/g,i),d=d.replace(/%C/g,f),d=d.replace(/%Z/g,h),d=d.replace(/%S/g,g),-1===b.indexOf("%A")&&(d+=""===b?""===e?"":e:""===e?"":c+e),-1===b.indexOf("%C")&&(d+=""===f?"":c+f),-1===b.indexOf("%S")&&(d+=""===g?"":c+g),-1===b.indexOf("%Z")&&(d+=""===h?"":c+h),d=this.RemoveUnnecessaryChars(d),d+=j,d=d.replace(/\^/g,""),""===e&&""===f&&""===i&&""===g&&""===h&&""===j&&(d=""),d},RemoveUnnecessaryChars:function(a){for(var b="",c="\r\n",d=a.split("%n"),e=0;e<d.length;e++){var f=d[e];f=f.replace(/^\,|\,$/g,""),f=f.replace(/^\ |\ $/g,""),f=f.replace(/^\ - |\ - $/g,""),f=f.replace(/^\-|\-$/g,""),f=f.replace(/\/$/g,""),""!==f&&(b+=f+c)}return b},GetAddressLines:function(a){var b="\r\n",c=this.GetValueByObjectName(a,"addr1"),d=this.GetValueByObjectName(a,"addr2"),e=this.GetValueByObjectName(a,"addr3"),f=this.GetValueByObjectName(a,"addr4"),g=this.GetValueByObjectName(a,"addr5"),h=this.GetValueByObjectName(a,"addr6"),i=""!==c?c:"";return i+=""!==d?b+d:"",i+=""!==e?b+e:"",i+=""!==f?b+f:"",i+=""!==g?b+g:"",i+=""!==h?b+h:""},GetCounty:function(a){return this.GetValueByObjectName(a,"county")},GetCity:function(a){return this.GetValueByObjectName(a,"city")},GetZipCode:function(a){return this.GetValueByObjectName(a,"postalCode")},GetState:function(a){return this.GetValueByObjectName(a,"state")},GetCountry:function(a){return this.GetValueByObjectName(a,"country")},GetValueByObjectName:function(a,b){var c="",d=a.filter(function(a){return a.name===b});return d.length>0&&""!==d[0].value&&(c=d[0].value),c}}},Sage.Format})},"Sage/UI/Controls/GridParts/Columns/PickList":function(){define(["Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","Sage/Data/BaseSDataStore","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e,f){return d("Sage.UI.Controls.GridParts.Columns.PickList",null,{widgetClass:b,storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(a){f.mixin(this,a),this.inherited(arguments),"id"!==this.storageMode&&"code"!==this.storageMode||this.pickListName&&null===this.storeData&&this._loadPickList()},format:function(a,b){return"id"===this.storageMode&&(a=this.getStoreTextById(a)),"code"===this.storageMode&&(a=this.getStoreTextByCode(a)),void 0!==a?a:""},_loadPickList:function(){var b=new dojo.Deferred,c={pickListName:this.pickListName,canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:this.storageMode,sort:!1,displayMode:this.displayMode,async:!1};this.pickList=new a(c),this.pickList.getPickListData(b),b.then(f.hitch(this,this._loadData),function(a){})},getStoreTextById:function(a){var b=a;return this.storeData&&e.some(this.storeData.items,function(c){c.id===a&&(b=c.text)},this),b},getStoreTextByCode:function(a){var b=a;return this.storeData&&e.some(this.storeData.items,function(c){c.code===a&&(b=c.text)},this),b},_loadData:function(a){for(var b=[],c=0;c<a.items.$resources.length;c++){var d=a.items.$resources[c];b.push({id:d.$key,code:d.code,number:d.number,text:d.text})}this.storeData={identifier:"id",label:"text",items:b}}})})},"Sage/UI/Controls/Grid":function(){define(["dijit/_Widget","dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/_base/array","dgrid/Selection","dgrid/OnDemandGrid","dgrid/Grid","dgrid/Keyboard","dgrid/editor","dgrid/selector","dgrid/extensions/ColumnHider","dgrid/extensions/ColumnReorder","dgrid/extensions/ColumnResizer","dgrid/extensions/Pagination","dgrid/extensions/DnD","dgrid/util/mouse","put-selector/put","dojo/dom-construct","dojo/dom-class","Sage/Utility","Sage/Utility/_LocalStorageMixin","dojo/dom-attr","dojo/query","dojo/keys","dojo/i18n!./nls/Grid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return b("Sage.UI.Controls.Grid",[a,v],{rowSelection:!1,columnHiding:!1,indirectSelection:!1,columnResizing:!1,columnReordering:!1,dnd:!1,pagination:!1,classNames:"",tooltipForTruncatedData:!0,keyboardNavigation:!0,dismissOnEnter:!0,placeHolder:"",selection:null,columns:null,showHiderIcon:!0,formatterScope:null,domNode:null,heightByVisibleRecords:null,id:null,store:null,query:null,queryOptions:null,selectionMode:"single",_grid:null,allowSelectAll:!1,cellNavigation:!1,setUserPreferences:!0,togglePreRowsFlag:!0,farOffRemoval:2e3,pagingDelay:15,minRowsPerPage:25,maxRowsPerPage:250,rowsPerPage:15,keepScrollPosition:!0,queryRowsOverlap:0,previewLength:255,maxEmptySpace:"Infinity",where:"",forceAutoId:!1,region:"center",STORE_NS:"SAGE_UI_GRIDVIEW_",STORE_KEY_SORT:"_GRID_SORT_PROPS_",STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_KEY_HIDE:"_GRID_TOTTLE_PROPS_",STORE_KEY_REORDER:"_GRID_LAYOUT_PROPS_",STORE_KEY_TOGGLEPREVIEW:"_TOGGLEPREVIEW_INFO_",constructor:function(a){this.columns=[],c.mixin(this,a),c.mixin(this,z),this._validatePropertiesForGrid(),this.columns.length>0&&(this.columns=this._applyFormatterForLegacyColumns(this.columns)),!0===this.indirectSelection&&(this.columns=this._addSelectorColumnToColumns(this.columns));var d=this._prepareGridOptions(),e=this._getGridMixins(),f=this._grid=new(b(e))(d);this.domNode=f.domNode,this.previewField&&this._attachPreviewExpando(),this.tooltipForTruncatedData&&(f.on(q.enterCell,this._onCellMouseOver(f)),f.on(q.leaveCell,this._onCellMouseLeave(f))),this.eventHandlerSubs=[],this.eventHandlerSubs.push(f.on(".dgrid-row:click",c.hitch(this,function(a){this._onRowClick(a)}))),this.eventHandlerSubs.push(f.on(".dgrid-row:dblclick",c.hitch(this,function(a){this._onRowDblClick(a)}))),this.eventHandlerSubs.push(f.on("dgrid-select",c.hitch(this,function(a){this._onSelection(a)}))),this.eventHandlerSubs.push(f.on("dgrid-deselect",c.hitch(this,function(a){this._onDeselection(a)}))),this.eventHandlerSubs.push(f.on("dgrid-error",c.hitch(this,function(a){this._onError(a)}))),this.eventHandlerSubs.push(f.on("dgrid-sort",c.hitch(this,function(a){this._onGridSort(a)}))),this.eventHandlerSubs.push(f.on("dgrid-datachange",c.hitch(this,function(a){this._onDataChange(a)}))),this.eventHandlerSubs.push(f.on("dgrid-refresh-complete",c.hitch(this,function(a){this._onLoadComplete(a)}))),this.eventHandlerSubs.push(f.on(".dgrid-row:contextmenu",c.hitch(this,function(a){this._onContextActivate(a)}))),this.eventHandlerSubs.push(f.on(".dgrid-header:click",c.hitch(this,function(a){this._onHeaderClick(a)}))),this.eventHandlerSubs.push(f.on("dgrid-columnresize",c.hitch(this,function(a){this._onColumnResize(a)}))),this.eventHandlerSubs.push(f.on("dgrid-columnstatechange",c.hitch(this,function(a){this._onColumnHide(a)}))),this.eventHandlerSubs.push(f.on("dgrid-columnreorder",c.hitch(this,function(a){this._onColumnReorder(a)}))),this.eventHandlerSubs.push(f.on("dgrid-editor-show",c.hitch(this,function(a){this._onEditorShow(a)}))),this.eventHandlerSubs.push(f.on("dgrid-editor-hide",c.hitch(this,function(a){this._onEditorHide(a)}))),this.eventHandlerSubs.push(f.on("keydown",c.hitch(this,function(a){this._onKeyDown(a)}))),this.placeHolder&&s.place(this._grid.domNode,this.placeHolder),!1===this.showHiderIcon&&(this.classNames+=" hideColumnHider"),t.add(f.domNode,this.classNames),this._grid.startup(),this.heightByVisibleRecords&&w.set(x(".dgrid-scroller",this._grid.domNode)[0],"style","max-height:"+31*this.heightByVisibleRecords+"px")},destroy:function(){e.forEach(this.eventHandlerSubs,function(a){a.remove()}),this._grid.destroy(),this.inherited(arguments)},_attachPreviewExpando:function(){var a,b=this._grid;d(b.domNode,".dgrid-row:click",function(c){if(t.contains(c.srcElement,"morelink"))return!1;var d=b.row(c).element,e=d.className.indexOf("collapsed")>=0;r(d,(e?"!":".")+"collapsed"),e&&a&&r(a,".collapsed"),a=e?d:null})},_prepareGridOptions:function(){!1!==this.setUserPreferences&&this._loadUserPrefrences();var a={columns:this.columns,store:this.store,allowSelectAll:!1,dismissOnEnter:this.dismissOnEnter,cellNavigation:this.cellNavigation,query:this.query?this.query:{},farOffRemoval:this.farOffRemoval,pagingDelay:this.pagingDelay,minRowsPerPage:this.minRowsPerPage,maxRowsPerPage:this.maxRowsPerPage,rowsPerPage:this.rowsPerPage,keepScrollPosition:this.keepScrollPosition,loadingMessage:this.loadingMessage,noDataMessage:this.noDataMessage,queryRowsOverlap:this.queryRowsOverlap,maxEmptySpace:this.maxEmptySpace,selectionMode:"Multi"===this.selectionMode?"extended":this.selectionMode.toLowerCase(),sort:this.sort,forceAutoId:this.forceAutoId,keyboardNavigation:this.keyboardNavigation,formatterScope:this.formatterScope};if(this.id&&(a.id=this.id),this.previewField){var b=this;a.renderRow=function(a,c){var d=-1!==b.previewField.indexOf(".")?u.splitField(a,b.previewField):a[b.previewField],e="";d&&(e=[u.htmlEncode(d.substr(0,b.previewLength)).replace(/(?:\r\n|\r|\n)/g,"<br />"),'.... <a href="#" class="morelink">'+b.showMore+"</a>"].join(""));var f=b.togglePreRowsFlag?".expando":".expando.collapsed",h=r("div"+f,g.prototype.renderRow.apply(this,arguments));r(h,"div"+f+" div.preview",{innerHTML:e});return h}}return a},_loadUserPrefrences:function(){this._setUserPrefColumnWidths(),this._setUserSortInfo(),this._setUserHideInfo(),this._setUserColumnReorderInfo(),this._setToggleForPreviewRows()},_setUserColumnReorderInfo:function(){var a=this.getFromLocalStorage(this.STORE_KEY_REORDER+this.id,this.STORE_NS);if(a&&a.length===this.columns.length){for(var b=[],c=null,d=0;d<a.length;d++)for(var e=a[d],f=0;f<this.columns.length;f++)if(c=this.columns[f],e.field===c.field&&void 0===c._columnOrder){c._columnOrder=f,b.push(c),!0;break}for(var g=0;g<this.columns.length;g++)c=this.columns[g],void 0===c._columnOrder&&b.push(c);this.columns=b}},_setUserSortInfo:function(){var a=this.STORE_KEY_SORT+this.id,b=this.getFromLocalStorage(a,this.STORE_NS);b&&(this.sort=b)},_setUserHideInfo:function(){e.forEach(this.columns,c.hitch(this,function(a){if(a&&a.field){var b=this._getColumnLocalKey(a,this.STORE_KEY_HIDE),c=this.getFromLocalStorage(b,this.STORE_NS);!0!==c&&!1!==c||(a.hidden=c)}}))},_setUserPrefColumnWidths:function(){e.forEach(this.columns,c.hitch(this,function(a){if(a&&a.field){var b=this._getColumnLocalKey(a,this.STORE_KEY_COLUMN_SIZE),c=this.getFromLocalStorage(b,this.STORE_NS);c&&(a.width=c)}}))},_getColumnLocalKey:function(a,b){var c,d;return void 0!==a&&void 0!==a.field&&(c=a.field.replace(/[\.\$]/g,"_"),d=[this.id,"_",b,c].join("")),d},_validatePropertiesForGrid:function(){this.placeHolder,this.className},_getGridMixins:function(){var a=[];a.push(this.pagination?h:g);var b=function(b,c){!0===c&&a.push(b)};return b(m,this.columnReordering),b(n,this.columnResizing),b(f,this.rowSelection),b(l,this.columnHiding),b(o,this.pagination),b(i,this.keyboardNavigation),b(p,this.dnd),a},_applyFormatterForLegacyColumns:function(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=a[c];d.type&&(d.formatter=function(a,b){var c=new this.type(this);return c.domNode?c.domNode:c.format(a,b)}),d.editor&&(this.cellNavigation=!0,void 0===d.editable||!0===d.editable?d=j(d,d.editor,d.editOn?d.editOn:""):d.editor=null),d.field&&-1!==d.field.indexOf(".")&&!d.get&&(d.get=function(a){return u.splitField(a,this.field)},d.set=function(a){return u.setField(a,this.field,a[this.field])}),d.width&&(d.width=parseInt(d.width,10)),b.push(d)}return b},_addSelectorColumnToColumns:function(a){var b=k({selectorType:"checkbox",label:"",editable:!0,sortable:!1,reorderable:!1,unhidable:!0,className:"field-checkbox"});return a.splice(0,0,b),a},onEditorShow:function(a){},_onEditorShow:function(a){this.onEditorShow(a)},onEditorHide:function(a){},_onEditorHide:function(a){this.onEditorHide(a)},onKeyDown:function(a){},_onKeyDown:function(a){!0===this.keyboardNavigation&&(a.keyCode===y.TAB&&(a.shiftKey?i.moveFocusLeft.call(this._grid,a):i.moveFocusRight.call(this._grid,a)),this.onKeyDown(a))},onColumnReorder:function(a){},_onColumnReorder:function(a){var b=[]
;e.forEach(a.subRow,function(a){b.push({field:a.field})}),this.saveToLocalStorage(this.STORE_KEY_REORDER+this.id,b,this.STORE_NS),this.onColumnReorder(a)},onColumnHide:function(a){},_onColumnHide:function(a){this.saveToLocalStorage(this._getColumnLocalKey(a.column,this.STORE_KEY_HIDE),a.hidden,this.STORE_NS),this.onColumnHide(a)},onSelection:function(a){},_onSelection:function(a){this.selectedItem=a.rows[0].data,this.selection=this._grid.selection,this.onSelection(a)},onDeselection:function(a){},_onDeselection:function(a){this.selectedItem=!1,this.onDeselection(a)},onError:function(a){},_onError:function(a){this.onError(a)},onHeaderClick:function(a){},_onHeaderClick:function(a){this.onHeaderClick(a)},onDataChange:function(a){},_onDataChange:function(a){this.onDataChange(a)},onContextActivate:function(a){},_onContextActivate:function(a){this.onContextActivate(a)},onColumnResize:function(a){},_onColumnResize:function(a){var b=a.grid.columns[a.columnId],c=a.width,d=this._getColumnLocalKey(b,this.STORE_KEY_COLUMN_SIZE);void 0!==d&&this.saveToLocalStorage(d,c,this.STORE_NS),this.onColumnResize(a)},onLoadComplete:function(a){},_onLoadComplete:function(a){this.totalRecords=void 0!==a.results.total?a.results.total:a.results.length,this.onLoadComplete(a)},onGridSort:function(a){},_onGridSort:function(a){!1===this._grid.cell(a).column.sortable||"insert"===this.mode?a.preventDefault():this.saveToLocalStorage(this.STORE_KEY_SORT+this.id,a.sort,this.STORE_NS),this.onGridSort(a)},onCellMouseOver:function(a){},_onCellMouseOver:function(){return c.hitch(this,function(a){var b=this._grid.cell(a);if(b.element.offsetWidth<b.element.scrollWidth){var c=void 0===b.element.innerText?b.element.textContent:b.element.innerText;""!==c&&dijit.showTooltip(u.htmlEncode(c),b.element)}this.onCellMouseOver(a)})},onCellMouseLeave:function(){},_onCellMouseLeave:function(){return c.hitch(this,function(a){dijit.hideTooltip(this._grid.cell(a).element),this.onCellMouseLeave(a)})},onRowClick:function(a,b){},_onRowClick:function(a){var b=this._grid.row(a);this.previewField&&this._moreClick(a,b),this.onRowClick(a,b)},onRowDblClick:function(a){},_onRowDblClick:function(a){var b=this._grid.row(a);this.onRowDblClick(b)},resize:function(){this._grid.resize()},refresh:function(){this._grid.refresh()},revert:function(){this._grid.revert()},save:function(){return this._grid.save()},clearSelection:function(){this._grid.clearSelection()},setSort:function(a,b){this._grid.set("sort",a,b)},setStore:function(a,b,c){this.store=a,this.query=b,this.queryOptions=c,this._grid.set("store",this.store,this.query,this.queryOptions)},setColumns:function(a){var b=a;this._applyFormatterForLegacyColumns(a),!0===this.indirectSelection&&(b=this._addSelectorColumnToColumns(a)),this.columns=b,!1!==this.setUserPreferences&&this._loadUserPrefrences(),this._grid.set("columns",this.columns)},setSelectionMode:function(a){this._grid.set("selectionMode",a)},setHeaderVisibility:function(a){this._grid.set("showHeader",a)},getSelectedRowData:function(a){var b=[];if(a&&a.length>0)for(var d in this._grid.selection){var f={};e.forEach(a,c.hitch(this,function(a){f[a]=this._grid.row(d).data[a]})),b.push(f)}else for(var g in this._grid.selection)b.push(this._grid.row(g).data);return b},getSelectedRowId:function(){for(var a in this._grid.selection)if(this._grid.selection[a])return a;return null},setColumnWidth:function(a,b){!0===this.columnResizing&&this._grid.resizeColumnWidth(a.id,b)},setFilter:function(a){this.query=a,this.setStore(this.store,a,this.queryOptions)},setRowRenderFunction:function(a){a?this._grid.renderRow=a:this._oldRenderRow&&(this._grid.renderRow=this._oldRenderRow)},removeRow:function(a){this.store.data?this.store.data.remove(a):this.store.remove(a.$key,this.store),this.refresh()},reRenderRow:function(a){return this._grid.renderRow(a)},addItem:function(a){this._grid.store.add(a)},togglePreviewRows:function(){this.togglePreRowsFlag=!this.togglePreRowsFlag,this.saveToLocalStorage(this.STORE_KEY_TOGGLEPREVIEW+this.id,this.togglePreRowsFlag,this.STORE_NS);for(var a=this._grid.domNode.getElementsByClassName("dgrid-row"),b=0;b<a.length;b++)r(a[b],(this.togglePreRowsFlag?"!":".")+"collapsed")},_setToggleForPreviewRows:function(){var a=this.getFromLocalStorage(this.STORE_KEY_TOGGLEPREVIEW+this.id,this.STORE_NS);null!==a&&(this.togglePreRowsFlag=a)},_moreClick:function(a,b){if(-1!==a.target.className.indexOf("morelink"))if(-1!==a.target.className.indexOf("less")){t.add(a.target.parentNode.parentNode.children[1],"display-none"),t.remove(a.target.parentNode.parentNode.children[0],"display-none");for(var d=a.target.parentNode.getElementsByClassName("display"),e=0;e<d.length;e++)t.add(d[e],"display-none")}else if(-1===a.target.className.indexOf("full")){this.fullNoteField&&this.store.select.push(this.fullNoteField);var f=this.store.query("id eq '"+b.id+"'",null);f.then(c.hitch(this,function(b){var c=[],d='</span><span class="display-none">',e=this.fullNoteField?this.fullNoteField:this.previewField,f=-1!==e.indexOf(".")?u.splitField(b[0],e):b[0][e],g=f.match(/[\S\s]{1,255}/g);c.push(u.htmlEncode(g[0]).replace(/(?:\r\n|\r|\n)/g,"<br />")),c.push('</span><span class="display">');for(var h=1;h<g.length;h++)c.push(u.htmlEncode(g[h]).replace(/(?:\r\n|\r|\n)/g,"<br />")),h!==g.length-1&&c.push(d);c.push("</span> <br />"),g.length>2&&c.push('<a href="#" class="morelink more full">'+this.showMore+"</a>"),c.push('<a href="#" class="morelink less full">'+this.showLess+"</a>");var i=c.join("");r(a.target.parentNode.parentNode,"div.moreView",{innerHTML:i}),t.add(a.target.parentNode,"display-none"),t.add(a.target,"full"),a.target.innerHTML=this.showMore})),a.target.innerHTML="loading..."}else{t.add(a.target.parentNode.parentNode.children[0],"display-none");var g=a.target.parentNode,h=-1!==g.className.indexOf("preview");h&&(g=a.target.parentNode.parentNode.children[1],t.remove(g,"display-none"),g.getElementsByClassName("more").length>0&&t.remove(g.getElementsByClassName("more")[0],"display-none"));var i=g.getElementsByClassName("display-none");i.length>0&&(1!==i.length||h||t.add(a.target,"display-none"),t.add(i[0],"display"),t.remove(i[0],"display-none"))}}})})},"dgrid/Selection":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query","dojo/_base/sniff","dojo/dom"],function(a,b,c,d,e,f,g,h,i){function j(a,b){for(var c=a.unselectable=b?"on":"",d=a.getElementsByTagName("*"),e=d.length;--e;)"INPUT"!==d[e].tagName&&"TEXTAREA"!==d[e].tagName&&(d[e].unselectable=c)}function k(a,b){var c=a.bodyNode,g=b?"text":e("ff")<21?"-moz-none":"none";m&&"msUserSelect"!==m?c.style[m]=g:e("dom-selectstart")?b||a._selectstartHandle?b&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=d(c,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(j(c,!b),b||a._unselectableHandle?b&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=f.after(a,"renderRow",function(a){return j(a,!0),a}))}e.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition}),e.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a&&"MSPointer"}),e.add("dom-selectstart",void 0!==document.onselectstart);var l=e("mac")?"metaKey":"ctrlKey",m=e("css-user-select"),n=e("pointer"),o=n&&"MS"===n.slice(0,2),p=n?n+(o?"Down":"down"):"mousedown",q=n?n+(o?"Up":"up"):"mouseup";return"WebkitUserSelect"===m&&void 0!==document.documentElement.style.msUserSelect&&(m=!1),b(null,{selectionDelegate:".dgrid-row",selectionEvents:p+","+q+",dgrid-cellfocusin",selectionTouchEvents:e("touch")?h.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){return this.selection={},this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="",this._setSelectionMode(a)},destroy:function(){this.inherited(arguments),this._selectstartHandle&&this._selectstartHandle.remove(),this._unselectableHandle&&this._unselectableHandle.remove(),this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(b){a.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4"),this.set("selectionMode",b)},_setAllowTextSelection:function(a){void 0!==a?k(this,a):k(this,"none"===this.selectionMode),this.allowTextSelection=a},_handleSelect:function(a,b){!this[this._selectionHandlerName]||!this.allowSelect(this.row(b))||"dgrid-cellfocusin"===a.type&&"mousedown"===a.parentType||a.type===q&&b!=this._waitForMouseUp||(this._waitForMouseUp=null,this._selectionTriggerEvent=a,a.keyCode&&a.ctrlKey&&32!=a.keyCode||(!a.shiftKey&&a.type===p&&this.isSelected(b)?this._waitForMouseUp=b:this[this._selectionHandlerName](a,b)),this._selectionTriggerEvent=null)},_singleSelectionHandler:function(a,b){var c=a.keyCode?a.ctrlKey:a[l];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c,d=this._lastSelected,e=a.keyCode?a.ctrlKey:a[l];a.shiftKey||(c=!e||null,d=null),this.select(b,d,c),d||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[l])||this.clearSelection(null,!0),this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,b=this.contentNode,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]},e("touch")&&!e("pointer")&&this.selectionTouchEvents?(d(b,h.selector(c,this.selectionTouchEvents),function(b){a._handleSelect(b,this),a._ignoreMouseSelect=this}),d(b,d.selector(c,this.selectionEvents),function(b){a._ignoreMouseSelect!==this?a._handleSelect(b,this):b.type===q&&(a._ignoreMouseSelect=null)})):d(b,d.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)}),this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)}),this.allowSelectAll&&this.on("keydown",function(b){b[l]&&65==b.keyCode&&!/\bdgrid-input\b/.test(b.target.className)&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())}),this._setStore&&f.after(this,"_setStore",function(){a._updateDeselectionAspect()}),this._updateDeselectionAspect()},_updateDeselectionAspect:function(){function a(a,b,c){var e=b||a&&a[d.idProperty||"id"];if(null!=e){var f=d.row(e),g=f&&d.selection[f.id];g&&d[c](f,null,g)}}var b,c,d=this,e=this.store;this._removeDeselectSignals&&this._removeDeselectSignals(),e&&e.notify?(b=f.before(e,"notify",function(b,c){b||a(b,c,"deselect")}),c=f.after(e,"notify",function(b,c){a(b,c,"select")},!0),this._removeDeselectSignals=function(){b.remove(),c.remove()}):(b=f.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)}),this._removeDeselectSignals=function(){b.remove()})},allowSelect:function(a){return!0},_fireSelectionEvent:function(a){var b,c=this._selectionEventQueues[a],e=this._selectionTriggerEvent;b={bubbles:!0,grid:this},e&&(b.parentType=e.type),b[this._selectionTargetType]=c,this._selectionEventQueues[a]=[],d.emit(this.contentNode,"dgrid-"+a,b)},_fireSelectionEvents:function(){var a,b=this._selectionEventQueues;for(a in b)b[a].length&&this._fireSelectionEvent(a)},_select:function(a,b,c){var d,e,f,g,h;if(void 0===c&&(c=!0),a.element||(a=this.row(a)),(!1===c||this.allowSelect(a))&&(d=this.selection,e=!!d[a.id],null===c&&(c=!e),f=a.element,c||this.allSelected?d[a.id]=c:delete this.selection[a.id],f&&(c?i(f,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):i(f,"!dgrid-selected!ui-state-active")),(c!==e&&f||c!==e&&a.id)&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)){if(b.element||(b=this.row(b)),!b)return void(this._lastSelected=f);if(g=b.element)for(h=this._determineSelectionDirection(f,g),h||(g=document.getElementById(g.id),h=this._determineSelectionDirection(f,g));a.element!=g&&(a=this[h](a));)this._select(a,null,c)}},_determineSelectionDirection:e("dom-comparedocumentposition")?function(a,b){var c=b.compareDocumentPosition(a);return!(1&c)&&(2===c?"down":"up")}:function(a,b){return!(b.sourceIndex<1)&&(b.sourceIndex>a.sourceIndex?"down":"up")},select:function(a,b,c){this._select(a,b,c),this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null),this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0,this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){return void 0!==a&&null!==a&&(a.element||(a=this.row(a)),a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a)))},refresh:function(){return this.deselectOnRefresh&&this.clearSelection(),this._lastSelected=null,this.inherited(arguments)},renderArray:function(){var a=this,b=this.inherited(arguments);return c.when(b,function(b){var c,d,e,f=a.selection;for(c=0;c<b.length;c++)d=a.row(b[c]),(e=d.id in f?f[d.id]:a.allSelected)&&a._select(d,null,e);a._fireSelectionEvents()}),b}})})},"dgrid/List":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff","xstyle/css!./css/dgrid.css"],function(a,b,c,d,e,f,g,h,i){function j(a){return document.getElementById(a)}function k(a){a.className="",document.body.removeChild(a)}function l(a,b){i(document.body,a,".dgrid-scrollbar-measure");var c=a["offset"+b]-a["client"+b];return k(a),c}function m(){return"dgrid_"+v++}function n(a){var b=a?"."+a.replace(w,"."):"";this._class&&(b="!"+this._class.replace(w,"!")+b),i(this.domNode,b),this._class=a}function o(){return this._class}function p(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function q(a){void 0!==a.x&&(this.bodyNode.scrollLeft=a.x),void 0!==a.y&&(this.bodyNode.scrollTop=a.y)}h("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var r,s,t="dgrid-row-odd",u="dgrid-row-even";e.add("dom-scrollbar-width",function(a,b,c){return l(c,"Width")}),e.add("dom-scrollbar-height",function(a,b,c){return l(c,"Height")}),e.add("dom-rtl-scrollbar-left",function(a,b,c){var d,f=i("div");return i(document.body,c,".dgrid-scrollbar-measure[dir=rtl]"),i(c,f),d=!!e("ie")||!!e("trident")||f.offsetLeft>=e("dom-scrollbar-width"),k(c),i(f,"!"),c.removeAttribute("dir"),d});var v=0,w=/ +/g,x=e("ie")<7&&!e("quirks")?function(){var a,b,c,d;this._started&&(a=document.documentElement,b=a.clientWidth,c=a.clientHeight,d=this._prevWinDims||[],d[0]===b&&d[1]===c||(this.resize(),this._prevWinDims=[b,c]))}:function(){this._started&&this.resize()};return b(e("touch")?g:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:null,addUiClasses:!0,shouldObserveStore:!0,cleanEmptyObservers:!0,highlightDuration:250,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a,this.data=b,this.element=c}).prototype.remove=function(){c.removeRow(this.element)},b&&(this.srcNodeRef=b=b.nodeType?b:j(b)),this.create(a,b)},listType:"list",create:function(a,c){var d,f=this.domNode=c||i("div");a?(this.params=a,b.safeMixin(this,a),d=a.class||a.className||f.className,this._sort=a.sort||[],delete this.sort):this._sort=[],this.observers=[],this._numObservers=0,this._listeners=[],this._rowIdToObject={},this.postMixInProperties&&this.postMixInProperties(),this.id=f.id=f.id||this.id||m(),null===this.useTouchScroll&&(this.useTouchScroll=!e("dom-scrollbar-width")),this.buildRendering(),d&&n.call(this,d),this.postCreate(),delete this.srcNodeRef,this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a,b,c,g,h=this.domNode,j=this.addUiClasses,k=this;g=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase(),h.className="",i(h,"[role=grid].dgrid.dgrid-"+this.listType+(j?".ui-widget":"")),a=this.headerNode=i(h,"div.dgrid-header.dgrid-header-row"+(j?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden")),(e("quirks")||e("ie")<8)&&i(h,"div.dgrid-spacer"),b=this.bodyNode=i(h,"div.dgrid-scroller"),e("ff")&&(b.tabIndex=-1),this.headerScrollNode=i(h,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(j?".ui-widget-header":"")),c=this.footerNode=i("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden")),i(h,c),g&&(h.className+=" dgrid-rtl"+(e("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"")),d(b,"scroll",function(c){k.showHeader&&(a.scrollLeft=c.scrollLeft||b.scrollLeft),c.stopPropagation(),d.emit(h,"scroll",{scrollTarget:b})}),this.configStructure(),this.renderHeader(),this.contentNode=this.touchNode=i(this.bodyNode,"div.dgrid-content"+(j?".ui-widget-content":"")),this._listeners.push(this._resizeHandle=d(window,"resize",f.throttleDelayed(x,this)))},postCreate:e("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,b=this.headerNode,c=this.footerNode,d=b.offsetHeight,g=this.showFooter?c.offsetHeight:0,h=e("quirks")||e("ie")<7;this.headerScrollNode.style.height=a.style.marginTop=d+"px",a.style.marginBottom=g+"px",h&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-d-g,0)+"px",g&&(c.style.bottom="1px",setTimeout(function(){c.style.bottom=""},0))),r||(r=e("dom-scrollbar-width"),s=e("dom-scrollbar-height"),e("ie")&&(r++,s++),f.addCssRule(".dgrid-scrollbar-width","width: "+r+"px"),f.addCssRule(".dgrid-scrollbar-height","height: "+s+"px"),17==r||h||(f.addCssRule(".dgrid-header-row","right: "+r+"px"),f.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+r+"px"))),h&&(b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,b){var c=f.addCssRule(a,b);return this.cleanAddedRules&&this._listeners.push(c),c},on:function(a,b){var c=d(this.domNode,a,b);return e("dom-addeventlistener")||this._listeners.push(c),c},cleanup:function(){var a,b=this.observers;for(a in this._rowIdToObject)if(this._rowIdToObject[a]!=this.columns){var c=j(a);c&&this.removeRow(c,!0)}for(a=0;a<b.length;a++){var d=b[a];d&&d.cancel()}this.observers=[],this._numObservers=0,this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this._started=!1,this.cleanup(),i(this.domNode,"!"),this.useTouchScroll&&this.inherited(arguments)},refresh:function(){this.cleanup(),this._rowIdToObject={},this._autoId=0,this.contentNode.innerHTML="",this.scrollTo({x:0,y:0})},newRow:function(a,b,c,d,e){if(b){var f=this.insertRow(a,b,c,d,e);return i(f,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":"")),setTimeout(function(){i(f,"!dgrid-highlight!ui-state-highlight")},this.highlightDuration),f}},adjustRowIndices:function(a){var b=a,c=b.rowIndex;if(c>-1)do{b.rowIndex>-1&&(this.maintainOddEven&&(b.className+" ").indexOf("dgrid-row ")>-1&&i(b,"."+(c%2==1?t:u)+"!"+(c%2==0?t:u)),b.rowIndex=c++)}while((b=b.nextSibling)&&b.rowIndex!=c)},renderArray:function(a,b,d){function e(){var b=arguments;if(m>-1)for(var c=0;c<b.length;c++){var e=b[c],g=k[e?0:k.length-1];if(g=g&&f(g)){var h=g[e?"previousSibling":"nextSibling"];if(h&&(h=n.row(h)),h&&h.element!=g){var i=e?"unshift":"push";a[i](h.data),k[i](h.element),d.count++}}}}function f(a){return!c.isDescendant(a,n.domNode)&&j(a.id)?n.row(a.id.slice(n.id.length+5)).element:a}function g(a){return r=n.insertRow(a,t,null,o++,d),r.observerIndex=m,r}function h(a){if(void 0!==m&&(p[m].cancel(),p[m]=0,n._numObservers--),a)throw a}function i(a){s=a.slice(0),l=b?b.parentNode:n.contentNode,l&&l.parentNode&&(l!==n.contentNode||a.length)?(l.insertBefore(t,b||null),(r=a[a.length-1])&&n.adjustRowIndices(r)):p[m]&&n.cleanEmptyObservers&&h(),k=a,q&&(q.rows=k)}d=d||{};var k,l,m,n=this,o=d.start||0,p=this.observers;if(b||(this._lastCollection=a),a.observe&&this.shouldObserveStore){n._numObservers++;var q=a.observe(function(c,g,h){function i(){q=(q.connected||q).nextSibling}var o,p,q,r;if(g>-1&&k[g]&&(o=k.splice(g,1)[0],o.parentNode==l&&(p=o.nextSibling,p&&g!=h&&p.rowIndex--,n.removeRow(o)),d.count--,n._processScroll&&n._processScroll()),h>-1){if(k.length?0===h?(q=k[h],q=q&&f(q)):(q=k[h-1])&&(q=f(q),i()):q=n._getFirstRowSibling&&n._getFirstRowSibling(l),o&&q&&o.id===q.id&&i(),q&&!q.parentNode&&(q=j(q.id)),r=b&&b.parentNode||q&&q.parentNode||n.contentNode,(o=n.newRow(c,r,q,d.start+h,d))&&(o.observerIndex=m,k.splice(h,0,o),!p||h<g)){var s=o.previousSibling;p=s&&s.rowIndex+1!=o.rowIndex&&0!=o.rowIndex?s:o}d.count++}0===g?e(1,1):g===a.length-(-1===h?0:1)&&e(0,0),g!=h&&p&&n.adjustRowIndices(p),n._onNotification(k,c,g,h)},!0);m=p.push(q)-1}var r,s,t=document.createDocumentFragment();if(a.map){if(k=a.map(g,console.error),k.then)return a.then(function(b){return a=b,k.then(function(a){return i(a),e(1,1,0,0),s})})}else{k=[];for(var u=0,v=a.length;u<v;u++)k[u]=g(a[u])}return i(k),e(1,1,0,0),s},_onNotification:function(a,b,c,d){},renderHeader:function(){},forceAutoId:!1,_autoId:0,insertRow:function(a,b,c,d,e){var f=e.parentId,g=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):d),h=j(g),i=h&&h.previousSibling;return h&&(h===c&&(c=(c.connected||c).nextSibling),this.removeRow(h)),h=this.renderRow(a,e),h.className=(h.className||"")+" dgrid-row "+(d%2==1?t:u)+(this.addUiClasses?" ui-state-default":""),this._rowIdToObject[h.id=g]=a,b.insertBefore(h,c||null),i&&this.adjustRowIndices(i),h.rowIndex=d,h},renderRow:function(a,b){return i("div",""+a)},removeRow:function(a,b){a=a.element||a,delete this._rowIdToObject[a.id],b||i(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);{if(!a.nodeType)return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,j(this.id+"-row-"+b));var c;do{var d=a.id;if(c=this._rowIdToObject[d])return new this._Row(d.substring(this.id.length+5),c,a);a=a.parentNode}while(a&&a!=this.domNode)}},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f,g;g=f=a.element,b=b||1;do{if(e=f[b<0?"previousSibling":"nextSibling"]){do{if((f=e)&&(f.className+" ").indexOf(c+" ")>-1){g=f,b+=b<0?1:-1;break}}while(e=(!d||!f.hidden)&&f[b<0?"lastChild":"firstChild"])}else if(!(f=f.parentNode)||f===this.bodyNode||f===this.headerNode)break}while(b);return g},up:function(a,b,c){return a.element||(a=this.row(a)),this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){return a.element||(a=this.row(a)),this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:e("touch")?function(a){return this.useTouchScroll?this.inherited(arguments):q.call(this,a)}:q,getScrollPosition:e("touch")?function(){return this.useTouchScroll?this.inherited(arguments):p.call(this)}:p,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"==typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"==typeof a)for(var c in a)this.set(c,a[c]);else{var d="_set"+a.charAt(0).toUpperCase()+a.slice(1);"function"==typeof this[d]?this[d].apply(this,[].slice.call(arguments,1)):this[a]=b}return this},_getClass:o,_setClass:n,_getClassName:o,_setClassName:n,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}],this.refresh(),this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var e=c[a],f=d[a];return void 0===e&&(e=""),void 0===f&&(f=""),e==f?0:e>f==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(b,c){a.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4"),this.set("sort",b,c)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a,i(b,(a?"!":".")+"dgrid-header-hidden"),this.renderHeader(),this.resize(),a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(b){a.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4"),this.set("showHeader",b)},_setShowFooter:function(a){this.showFooter=a,i(this.footerNode,(a?"!":".")+"dgrid-footer-hidden"),this.resize()}})})},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(a,b){function c(a){var b,c,f=g[a];if(void 0!==f)for(d[e](f),g[a]=void 0,b=a+1,c=g.length;b<c;b++)g[b]>f&&g[b]--}a.add("dom-contains",function(a,b,c){return!!c.contains});var d,e,f,g=[],h=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,i={defaultDelay:15,throttle:function(a,b,c){var d=!1;return c=c||i.defaultDelay,function(){d||(d=!0,a.apply(b,arguments),setTimeout(function(){d=!1},c))}},throttleDelayed:function(a,b,c){var d=!1;return c=c||i.defaultDelay,function(){if(!d){d=!0;var e=arguments;setTimeout(function(){d=!1,a.apply(b,e)},c)}}},debounce:function(a,b,c){var d;return c=c||i.defaultDelay,function(){d&&(clearTimeout(d),d=null);var e=arguments;d=setTimeout(function(){a.apply(b,e)},c)}},each:function(a,b,c){var d,e;if(a)if("number"==typeof a.length)for(d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a);else for(d in a)b.call(c,a[d],d,a)},contains:function(b,c){return a("dom-contains")?b.contains(c):8&b.compareDocumentPosition(c)},addCssRule:function(a,h){d||(d=b(document.getElementsByTagName("head")[0],"style"),d=d.sheet||d.styleSheet,e=d.deleteRule?"deleteRule":"removeRule",f=d.cssRules?"cssRules":"rules");var i=g.length;return g[i]=(d.cssRules||d.rules).length,d.addRule?d.addRule(a,h):d.insertRule(a+"{"+h+"}",g[i]),{get:function(a){return d[f][g[i]].style[a]},set:function(a,b){void 0!==g[i]&&(d[f][g[i]].style[a]=b)},remove:function(){c(i)}}},escapeCssIdentifier:function(a,b){return"string"==typeof a?a.replace(h,b||"\\$1"):a}};return i})},"put-selector/put":function(){!function(a){var b,c=/[-+,> ]/;a([],b=function(a,d){function e(b,c){b.appendChild(a.createTextNode(c))}function f(b){function d(){o&&n&&o!=n&&(n==b&&(k||(k=c.test(s)&&a.createDocumentFragment()))?k:n).insertBefore(o,m||null)}for(var k,l,m,n,o,p=arguments,q=p[0],r=0;r<p.length;r++){var s=p[r];if("object"==typeof s){if(l=!1,s instanceof Array){o=a.createDocumentFragment();for(var t=0;t<s.length;t++)o.appendChild(f(s[t]));s=o}if(s.nodeType)o=s,d(),n=s,m=0;else for(var t in s)o[t]=s[t]}else if(l)l=!1,e(o,s);else{r<1&&(b=null),l=!0;var u=s.replace(h,function(c,h,k,l,q,t){h&&(d(),"-"==h||"+"==h?(n=(m=o||n).parentNode,o=null,"+"==h&&(m=m.nextSibling)):("<"==h?n=o=(o||n).parentNode:(","==h?n=b:o&&(n=o),o=null),m=0),o&&(n=o));var u=!k&&l;if(u||!o&&(k||q))if("$"==u)e(n,p[++r]);else{u=u||f.defaultTag;var v=j&&p[r+1]&&p[r+1].name;v&&(u="<"+u+' name="'+v+'">'),o=i&&~(g=u.indexOf("|"))?a.createElementNS(i[u.slice(0,g)],u.slice(g+1)):a.createElement(u)}if(k)if("$"==l&&(l=p[++r]),"#"==k)o.id=l;else{var w=o.className,x=w&&(" "+w+" ").replace(" "+l+" "," ");if("."==k)o.className=w?(x+l).substring(1):l;else if("!"==s){var y;j?f("div",o,"<").innerHTML="":(y=o.parentNode)&&y.removeChild(o)}else(x=x.substring(1,x.length-1))!=w&&(o.className=x)}if(q)if("$"==t&&(t=p[++r]),"style"==q)o.style.cssText=t;else{var z="!"==q.charAt(0)?(q=q.substring(1))&&"removeAttribute":"setAttribute";t=""===t?q:t,i&&~(g=q.indexOf("|"))?o[z+"NS"](i[q.slice(0,g)],q.slice(g+1),t):o[z](q,t)}return""});if(u)throw new SyntaxError("Unexpected char "+u+" in "+s);d(),n=q=o||n}}return b&&k&&b.appendChild(k),q}c=d||c;var g,h=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,i=!1,a=a||document,j="object"==typeof a.createElement;return f.addNamespace=function(b,c){a.createElementNS?(i||(i={}))[b]=c:a.namespaces.add(b,c)},f.defaultTag="div",f.forDocument=b,f})}(function(a,b,c){c=c||b,"function"==typeof define?define([],function(){return c()}):"undefined"==typeof window?require("./node-html")(module,c):put=c()})},"xstyle/has-class":function(){define(["dojo/has"],function(a){var b={};return function(){for(var c,d=arguments,e=0;e<d.length;e++){var c=d[e];if(!b[c]){b[c]=!0;var f=c.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),g=a(f[2]),h=-f[4];(h>0?h<=g&&(-f[5]||h)>=g:!!g)==!f[1]&&(document.documentElement.className+=" has-"+c)}}}})},"xstyle/css":function(){define(["require"],function(moduleRequire){function testElementStyle(a,b,c){var d=document.documentElement,e=d.insertBefore(document.createElement(a),d.firstChild);e.id=b;var f=(e.currentStyle||getComputedStyle(e,null))[c];return d.removeChild(e),f}return{load:function(resourceDef,require,callback,config){function checkForParser(){var parser=testElementStyle("x-parse",null,"content");parser&&"none"!=parser&&"normal"!=parser?require([eval(parser)],callback):callback()}var url=require.toUrl(resourceDef),cachedCss=require.cache&&require.cache["url:"+url];if(cachedCss){if(cachedCss.xCss){var parser=cachedCss.parser,xCss=cachedCss.xCss;cachedCss=cachedCss.cssText}return moduleRequire(["./util/createStyleSheet"],function(a){a(cachedCss)}),checkForParser()}var displayStyle=testElementStyle("div",resourceDef.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if("none"==displayStyle)return checkForParser();moduleRequire(["./core/load-css"],function(a){a(url,checkForParser)})}}})},"xstyle/util/createStyleSheet":function(){define([],function(){function a(){return!document.createStyleSheet}var b=document.head;return function(c){if(a("dom-create-style-element"))return d=document.createElement("style"),d.setAttribute("type","text/css"),d.appendChild(document.createTextNode(c)),b.insertBefore(d,b.lastChild),d;var d=document.createStyleSheet();return d.cssText=c,d.owningElement}})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(a,b,c){return a([b,c],{})})},"dgrid/Grid":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","./util/misc","dojo/_base/sniff"],function(a,b,c,d,e,f,g){function h(a,b){b&&b.nodeType&&a.appendChild(b)}function i(a){return g.escapeCssIdentifier(a,"-")}function j(a,b,c,d){if(this.formatter){var e=this.formatter,f=this.grid.formatterScope;c.innerHTML="string"==typeof e&&f?f[e](b,a):this.formatter(b,a)}else null!=b&&c.appendChild(document.createTextNode(b))}var k=d("ie")<8&&!d("quirks"),l=b(f,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!=typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var d=a.columnId;if(d){b=d,c=a;break}a=a.parentNode}while(a&&a!=this.domNode)}if(!c&&void 0!==b){var e=this.row(a),f=e&&e.element;if(f)for(var g=f.getElementsByTagName("td"),h=0;h<g.length;h++)if(g[h].columnId==b){c=g[h];break}}return null!=a?{row:e||this.row(a),column:b&&this.column(b),element:c}:void 0},createRowCells:function(a,b,c,f){var g,h,j,l,m,n,o,p,q,r,s,t,u,v,w=e("table.dgrid-row-table[role=presentation]"),x=(this.cellNavigation,d("ie")<9||d("quirks")?e(w,"tbody"):w);for(c=c||this.subRows,h=0,j=c.length;h<j;h++)for(n=c[h],g=e(x,"tr"),n.className&&e(g,"."+n.className),l=0,m=n.length;l<m;l++)o=n[l],p=o.id,q=o.field?".field-"+i(o.field):"",
r="function"==typeof o.className?o.className(f):o.className,r&&(q+="."+r),s=e(a+".dgrid-cell.dgrid-cell-padding"+(p?".dgrid-column-"+i(p):"")+q.replace(/ +/g,".")+"[role="+("th"===a?"columnheader":"gridcell")+"]"),s.columnId=p,k?(t=e(s,"!dgrid-cell-padding div.dgrid-cell-padding"),s.contents=t):t=s,u=o.colSpan,u&&(s.colSpan=u),v=o.rowSpan,v&&(s.rowSpan=v),b(t,o),g.appendChild(s);return w},left:function(a,b){return a.element||(a=this.cell(a)),this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,b){return a.element||(a=this.cell(a)),this.cell(this._move(a,b||1,"dgrid-cell"))},renderRow:function(a,b){var c=this.createRowCells("td",function(c,d){var e=a;d.get?e=d.get(a):"field"in d&&"_item"!=d.field&&(e=e[d.field]),d.renderCell?h(c,d.renderCell(a,e,c,b)):j.call(d,a,e,c,b)},b&&b.subRows,a);return e("div[role=row]>",c)},renderHeader:function(){var a=this,b=(this.columns,this.headerNode),f=b.childNodes.length;for(b.setAttribute("role","row");f--;)e(b.childNodes[f],"!");var g=this.createRowCells("th",function(a,b){var c=b.headerNode=a;k&&(a=a.parentNode);var d=b.field;d&&(a.field=d),b.renderHeaderCell?h(c,b.renderHeaderCell(c)):("label"in b||b.field)&&c.appendChild(document.createTextNode("label"in b?b.label:b.field)),!1!==b.sortable&&d&&"_item"!=d&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[g.id=this.id+"-header"]=this.columns,b.appendChild(g),this._sortListener&&this._sortListener.remove(),this._sortListener=c(g,"click,keydown",function(e){if("click"==e.type||32==e.keyCode||!d("opera")&&13==e.keyCode){var f,g,h,i,j=e.target;do{if(j.sortable){h=[{attribute:f=j.field||j.columnId,descending:(g=a._sort[0])&&g.attribute==f&&!g.descending}],i={bubbles:!0,cancelable:!0,grid:a,parentType:e.type,sort:h},c.emit(e.target,"dgrid-sort",i)&&(a._sortNode=j,a.set("sort",h));break}}while((j=j.parentNode)&&j!=b)}})},resize:function(){var a,b=this.headerNode.firstChild,c=this.contentNode;this.inherited(arguments),(!d("ie")||d("ie")>7&&!d("quirks"))&&(c.style.width="",c&&b&&(a=b.offsetWidth)!=c.offsetWidth&&(c.style.width=a+"px"))},destroy:function(){this._destroyColumns(),this._sortListener&&this._sortListener.remove(),this.inherited(arguments)},_setSort:function(a,b){this.inherited(arguments),this.updateSortArrow(this._sort)},_findSortArrowParent:function(a){var b=this.columns;for(var c in b){var d=b[c];if(d.field==a)return d.headerNode}},updateSortArrow:function(a,b){if(this._lastSortedArrow&&(e(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),e(this._lastSortedArrow,"!"),delete this._lastSortedArrow),b&&(this._sort=a),a[0]){var c,d=a[0].attribute,f=a[0].descending,g=this._sortNode||this._findSortArrowParent(d);delete this._sortNode,g&&(g=g.contents||g,c=this._lastSortedArrow=e("div.dgrid-sort-arrow.ui-icon[role=presentation]"),c.innerHTML="&nbsp;",g.insertBefore(c,g.firstChild),e(g,f?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(a,b){return this.addCssRule("#"+g.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+i(a),b)},_configColumns:function(a,b){function c(c,f){"string"==typeof c&&(b[f]=c={label:c}),e||c.field||(c.field=f),f=c.id=c.id||(isNaN(f)?f:a+f),this._configColumn&&(this._configColumn(c,f,b,a),f=c.id),e&&(this.columns[f]=c),c.grid=this,"function"==typeof c.init&&c.init(),d.push(c)}var d=[],e=b instanceof Array;return g.each(b,c,this),e?b:d},_destroyColumns:function(){var a,b,c,d,e=this.subRows,f=e&&e.length;for(this.cleanup(),a=0;a<f;a++)for(b=0,d=e[a].length;b<d;b++)c=e[a][b],"function"==typeof c.destroy&&c.destroy()},configStructure:function(){var a=this.subRows,b=this._columns=this.columns;if(this.columns=!b||b instanceof Array?{}:b,a)for(var c=0;c<a.length;c++)a[c]=this._configColumns(c+"-",a[c]);else this.subRows=[this._configColumns("",b)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(a){this._destroyColumns(),this.subRows=null,this.columns=a,this._updateColumns()},_setSubRows:function(a){this._destroyColumns(),this.subRows=a,this._updateColumns()},setColumns:function(b){a.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4"),this.set("columns",b)},setSubRows:function(b){a.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4"),this.set("subRows",b)},_updateColumns:function(){this.configStructure(),this.renderHeader(),this.refresh(),this._lastCollection&&this.renderArray(this._lastCollection),this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});return l.appendIfNode=h,l.defaultRenderCell=j,l})},"dgrid/OnDemandList":function(){define(["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom","dojo/on","./util/misc","put-selector/put"],function(a,b,c,d,e,f,g,h,i){return c([a,b],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:1/0,bufferRows:10,farOffRemoval:2e3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:h.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var a=this;g(this.bodyNode,"scroll",h[this.pagingMethod](function(b){a._processScroll(b)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments),this._refreshTimeout&&clearTimeout(this._refreshTimeout)},renderQuery:function(a,b){function c(a){if(i(n,"!"),a)throw h._refreshDeferred&&(h._refreshDeferred.reject(a),delete h._refreshDeferred),a}var f,g,h=this,j=b&&b.container||this.contentNode,k={query:a,count:0,options:b},l=this.preload,m={node:i(j,"div.dgrid-preload",{rowIndex:0}),count:0,query:a,next:k,options:b};m.node.style.height="0",k.node=f=i(j,"div.dgrid-preload"),k.previous=m,f.rowIndex=this.minRowsPerPage,l?((k.next=l.next)&&f.offsetTop>=l.node.offsetTop?k.previous=l:(k.next=l,k.previous=l.previous),k.previous.next=k,k.next.previous=k):this.preload=k;var n=i(f,"-div.dgrid-loading");return i(n,"div.dgrid-below").innerHTML=this.loadingMessage,b=d.mixin(this.get("queryOptions"),b,{start:0,count:this.minRowsPerPage},"level"in a?{queryLevel:a.level}:null),this._trackError(function(){return g=a(b)}),void 0===g?void c():(e.when(h.renderArray(g,f,b),function(a){var d=void 0===g.total?g.length:g.total;return e.when(d,function(c){var d=a.length,e=f.parentNode,j=h.noDataNode;i(n,"!"),"queryLevel"in b||(h._total=c),0===c&&e&&(j&&(i(j,"!"),delete h.noDataNode),h.noDataNode=j=i("div.dgrid-no-data"),e.insertBefore(j,h._getFirstRowSibling(e)),j.innerHTML=h.noDataMessage);for(var l=0,m=0;m<d;m++)l+=h._calcRowHeight(a[m]);return d&&l&&(h.rowHeight=l/d),c-=d,k.count=c,f.rowIndex=d,c?f.style.height=Math.min(c*h.rowHeight,h.maxEmptySpace)+"px":(f.style.display="none",b.count++),h._previousScrollPosition&&(h.scrollTo(h._previousScrollPosition),delete h._previousScrollPosition),h._processScroll(),h._refreshDeferred&&(h._refreshDeferred.resolve(g),delete h._refreshDeferred),a},c)},c),g)},refresh:function(a){var b,c,d=this,f=a&&a.keepScrollPosition;if(void 0===f&&(f=this.keepScrollPosition),f&&(this._previousScrollPosition=this.getScrollPosition()),this.inherited(arguments),this.store)return b=this._refreshDeferred=new e,c=d.renderQuery(function(a){return d.store.query(d.query,a)}),void 0===c&&b.reject(),b.then(function(a){return d._refreshTimeout=setTimeout(function(){g.emit(d.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:d,results:a}),d._refreshTimeout=null},0),delete d._refreshDeferred,a},function(a){throw delete d._refreshDeferred,a})},resize:function(){this.inherited(arguments),this._processScroll()},_getFirstRowSibling:function(a){return a.lastChild},_calcRowHeight:function(a){var b=a.nextSibling;return b&&!/\bdgrid-preload\b/.test(b.className)?b.offsetTop-a.offsetTop:a.offsetHeight},lastScrollTop:0,_processScroll:function(a){function b(a,b,d,e){var f=m.farOffRemoval,g=a.node;if(b>2*f){for(var h,j=g[d],k=0,l=0,n=[];h=j;){var o=m._calcRowHeight(h);if(k+o+f>b||j.className.indexOf("dgrid-row")<0&&j.className.indexOf("dgrid-loading")<0)break;var j=h[d];k+=o,l+=h.count||1,m.removeRow(h,!0),n.push(h)}a.count+=l,e?(g.rowIndex-=l,c(a)):g.style.height=g.offsetHeight+k+"px";var p=i("div",n);setTimeout(function(){i(p,"!")},1)}}function c(a,b){a.node.style.height=Math.min(a.count*m.rowHeight,b?1/0:m.maxEmptySpace)+"px"}function f(a,b){do{a=b?a.next:a.previous}while(a&&!a.node.offsetWidth);return a}var g,h,j,k,l,m=this,n=m.bodyNode,o=a&&a.scrollTop||this.getScrollPosition().y,p=n.offsetHeight+o,q=m.preload,r=m.lastScrollTop,s=m.bufferRows*m.rowHeight,t=s-m.rowHeight,u=!0,v=1;for(m.lastScrollTop=o;q&&!q.node.offsetWidth;)q=q.previous;for(;q&&q!=g;){g=m.preload,m.preload=q,h=q.node;var w=h.offsetTop;if(p+v+t<w)q=f(q,u=!1);else if(o-v-t>w+h.offsetHeight)q=f(q,u=!0);else{var x=((h.rowIndex?o-s:p)-w)/m.rowHeight,y=(p-o+2*s)/m.rowHeight,z=Math.max(Math.min((o-r)*m.rowHeight,m.maxRowsPerPage/2),m.maxRowsPerPage/-2);if(y+=Math.min(Math.abs(z),10),0==h.rowIndex&&(x-=y),x=Math.max(x,0),x<10&&x>0&&y+x<m.maxRowsPerPage&&(y+=Math.max(0,x),x=0),0==(y=Math.min(Math.max(y,m.minRowsPerPage),m.maxRowsPerPage,q.count))){q=f(q,u);continue}y=Math.ceil(y),x=Math.min(Math.floor(x),q.count-y);var A=d.mixin(m.get("queryOptions"),q.options);q.count-=y;var B,C=h,D=m.queryRowsOverlap,E=(h.rowIndex>0||h.offsetTop>o)&&q;if(E){var F=q.previous;F&&(b(F,o-(F.node.offsetTop+F.node.offsetHeight),"nextSibling"),x>0&&F.node==h.previousSibling?(x=Math.min(q.count,x),q.previous.count+=x,c(q.previous,!0),h.rowIndex+=x,D=0):y+=x,q.count-=x),A.start=h.rowIndex-D,A.count=Math.min(y+D,m.maxRowsPerPage),h.rowIndex=A.start+A.count}else{if(q.next){b(q.next,q.next.node.offsetTop-p,"previousSibling",!0);var C=h.nextSibling;C==q.next.node?(q.next.count+=q.count-x,q.next.node.rowIndex=x+y,c(q.next),q.count=x,D=0):B=!0}A.start=q.count,A.count=Math.min(y+D,m.maxRowsPerPage)}if(B&&C&&C.offsetWidth&&(B=C.offsetTop),c(q),"level"in q.query&&(A.queryLevel=q.query.level),!("queryLevel"in A)&&(A.start>m._total||A.count<0))continue;var G=i(C,"-div.dgrid-loading[style=height:"+y*m.rowHeight+"px]"),H=i(G,"div.dgrid-"+(E?"below":"above"));H.innerHTML=m.loadingMessage,G.count=y;var I=q.query(A),J=m._trackError(function(){return I});if(void 0===J)return void i(G,"!");(function(a,b,d,f){l=e.when(m.renderArray(f,a,A),function(g){if(k=f,C=a.nextSibling,i(a,"!"),d&&C&&C.offsetWidth){var h=m.getScrollPosition();m.scrollTo({x:h.x,y:h.y+C.offsetTop-d,preserveMomentum:!0})}return e.when(f.total||f.length,function(a){"queryLevel"in A||(m._total=a),b&&(b.count=a-b.node.rowIndex,0===b.count&&A.count++,c(b))}),m._processScroll(),g},function(b){throw i(a,"!"),b})}).call(this,G,E,B,I),q=q.previous}}l&&(j=this._refreshDeferred)&&(delete this._refreshDeferred,e.when(l,function(){j.resolve(k)}))},removeRow:function(a,b){function c(a,b){return null!=a?a:b}if(a){var d=a.previousSibling,e=a.nextSibling,g=d&&c(d.observerIndex,d.previousObserverIndex),h=e&&c(e.observerIndex,e.nextObserverIndex),i=a.observerIndex;if(a.observerIndex=void 0,b&&(a.nextObserverIndex=h,a.previousObserverIndex=g),this.cleanEmptyObservers&&i>-1&&i!==g&&i!==h){var j=this.observers,k=j[i];if(k){if(!b)for(var l=k.rows,m=0;m<l.length;m++)if(l[m]!=a&&f.isDescendant(l[m],this.domNode))return this.inherited(arguments);k.cancel(),this._numObservers--,j[i]=0}}}this.inherited(arguments)}})})},"dgrid/_StoreMixin":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","put-selector/put"],function(a,b,c,d,e,f,g){function h(a){return a}function i(a){if("object"!=typeof a)a=new Error(a);else if("cancel"===a.dojoType)return;a.grid=this,e.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})}return b(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={},this.queryOptions={},this.dirty={},this._updating={},this._columnsWithSet={},f.before(this,"configStructure",c.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments),this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments),this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a),this.inherited(arguments)},_updateNotifyHandle:function(a){if(this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle),a&&"function"==typeof a.notify&&this.shouldObserveStore){this._notifyHandle=f.after(a,"notify",c.hitch(this,"_onNotify"),!0);var b=this.get("sort");!b||b.length}},_setStore:function(a,b,c){this._updateNotifyHandle(a),this.store=a,this.dirty={},this.set("query",b,c)},_setQuery:function(a,b){var c=b&&b.sort;this.query=void 0!==a?a:this.query,this.queryOptions=b||this.queryOptions,this._started&&(c?this.set("sort",c):this.refresh())},setStore:function(b,c,d){a.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4"),this.set("store",b,c,d)},setQuery:function(b,c){a.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4"),this.set("query",b,c)},_getQueryOptions:function(){var a=c.delegate(this.queryOptions,{});return("function"==typeof this._sort||this._sort.length)&&(a.sort=this._sort),a},_getQuery:function(){var a=this.query;return"object"==typeof a&&null!=a?c.delegate(a,{}):a},_setSort:function(a,b){this.store&&(this._lastCollection=null),this.inherited(arguments)},_onNotify:function(a,b){this.inherited(arguments),a&&this._numObservers<1&&this.refresh({keepScrollPosition:!0})},refresh:function(){var a=this.inherited(arguments);return this.store||(this.noDataNode=g(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage),a},renderArray:function(){var a=this,b=this.inherited(arguments);return this.store||d.when(b,function(b){b.length&&a.noDataNode&&g(a.noDataNode,"!")}),b},insertRow:function(a,b,d,e,f){var g,h=this.store,i=this.dirty,j=h&&h.getIdentity(a);return j in i&&!(j in this._updating)&&(g=i[j]),g&&(a=c.delegate(a,g)),this.inherited(arguments)},updateDirty:function(a,b,c){var d=this.dirty,e=d[a];e||(e=d[a]={}),e[b]=c},setDirty:function(b,c,d){a.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4"),this.updateDirty(b,c,d)},save:function(){function a(a,f){return function(g){var h,i,j=b._columnsWithSet,k=b._updating;if("function"==typeof g.set)g.set(f);else for(h in f)g[h]=f[h];for(h in j)void 0!==(i=j[h].set(g))&&(g[h]=i);return k[a]=!0,d.when(c.put(g),function(){delete e[a],delete k[a]})}}var b=this,c=this.store,e=this.dirty,f=new d,g=f.promise,h=function(a){var d;return b.getBeforePut||!(d=b.row(a).data)?function(){return c.get(a)}:function(){return d}};for(var i in e){var j=a(i,e[i]);g=g.then(h(i)).then(j)}return f.resolve(),g},revert:function(){this.dirty={},this.refresh()},_trackError:function(a){var b;"string"==typeof a&&(a=c.hitch(this,a));try{b=a()}catch(a){i.call(this,a)}return d.when(b,h,c.hitch(this,i))},newRow:function(){var a=this.inherited(arguments);return this.noDataNode&&(g(this.noDataNode,"!"),delete this.noDataNode),a},removeRow:function(a,b){var c={element:a};return!b&&this.noDataMessage&&this.up(c).element===a&&this.down(c).element===a&&(this.noDataNode=g(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage),this.inherited(arguments)}})})},"dgrid/Keyboard":function(){define(["dojo/_base/declare","dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","./util/misc","dojo/_base/Deferred","dojo/_base/sniff"],function(a,b,c,d,e,f,g,h){function i(a){a.preventDefault()}var j={checkbox:1,radio:1,button:1},k=/\bdgrid-cell\b/,l=/\bdgrid-row\b/,m=a(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments),this.keyMap||(this.keyMap=d.mixin({},m.defaultKeyMap)),this.headerKeyMap||(this.headerKeyMap=d.mixin({},m.defaultHeaderKeyMap))},postCreate:function(){function a(a){var b=a.target;return b.type&&(!j[b.type]||32==a.keyCode)}function d(d){function f(){if(e._focusedHeaderNode&&(e._focusedHeaderNode.tabIndex=-1),e.showHeader){if(i){for(var a,b=0,c=e.headerNode.getElementsByTagName("th");a=c[b];++b)if(j.test(a.className)){e._focusedHeaderNode=n=a;break}}else e._focusedHeaderNode=n=e.headerNode;n&&(n.tabIndex=e.tabIndex)}}var i=e.cellNavigation,j=i?k:l,m=d===e.headerNode,n=d;m?(f(),b.after(e,"renderHeader",f,!0)):b.after(e,"renderArray",function(a){return h.when(a,function(a){var b=e._focusedNode||n;if(j.test(b.className)&&g.contains(d,b))return a;for(var c,f=0,h=d.getElementsByTagName("*");c=h[f];++f)if(j.test(c.className)){b=e._focusedNode=c;break}return b.tabIndex=e.tabIndex,a})}),e._listeners.push(c(d,"mousedown",function(b){a(b)||e._focusOnNode(b.target,m,b)})),e._listeners.push(c(d,"keydown",function(b){if(!b.metaKey&&!b.altKey){var c=e[m?"headerKeyMap":"keyMap"][b.keyCode];c&&!a(b)&&c.call(e,b)}}))}this.inherited(arguments);var e=this;this.tabableHeader&&(d(this.headerNode),c(this.headerNode,"dgrid-cellfocusin",function(){e.scrollTo({x:this.scrollLeft})})),d(this.contentNode),this._debouncedEnsureRowScroll=g.debounce(this._ensureRowScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b,c=this,d=document.activeElement===this._focusedNode,e=this[this.cellNavigation?"cell":"row"](this._focusedNode),f=e.row||e;a=a.element||a,a===f.element&&(b=this.down(f,!0),b&&b.element!==a||(b=this.up(f,!0)),this._removedFocus={active:d,rowId:f.id,columnId:e.column&&e.column.id,siblingId:b&&b.element!==a?b.id:void 0},setTimeout(function(){c._removedFocus&&c._restoreFocus(f.id)},0),this._focusedNode=null),this.inherited(arguments)},insertRow:function(a){var b=this.inherited(arguments);return this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(b),b},_restoreFocus:function(a){var b,c,d=this._removedFocus;if(a=a&&this.row(a),(b=a&&a.element&&a.id===d.rowId?a:void 0!==d.siblingId&&this.row(d.siblingId))&&b.element){if(!b.element.parentNode.parentNode)return void(d.wait=!0);void 0!==d.columnId&&(c=this.cell(b,d.columnId))&&c.element&&(b=c),d.active&&0!==b.element.offsetHeight?this._focusOnNode(b,!1,null):(f(b.element,".dgrid-focus"),b.element.tabIndex=this.tabIndex,this._focusedNode=b.element)}delete this._removedFocus},addKeyHandler:function(a,c,d){return b.after(this[d?"headerKeyMap":"keyMap"],a,c,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_focusOnNode:function(a,b,g){var h,i,j,m,n,o="_focused"+(b?"Header":"")+"Node",p=this[o],q=this.cellNavigation?"cell":"row",r=this[q](a);if(a=r&&r.element){if(this.cellNavigation)for(h=a.getElementsByTagName("input"),n=0,j=h.length;n<j;n++)if(i=h[n],(-1!=i.tabIndex||"_dgridLastValue"in i)&&!i.disabled){e("ie")<8&&(i.style.position="relative"),i.focus(),e("ie")<8&&(i.style.position=""),m=!0;break}null!==g&&(g=d.mixin({grid:this},g),g.type&&(g.parentType=g.type),g.bubbles||(g.bubbles=!0)),p&&(f(p,"!dgrid-focus[!tabIndex]"),e("ie")<8&&(p.style.position=""),g&&(g[q]=this[q](p),c.emit(p,"dgrid-cellfocusout",g))),p=this[o]=a,g&&(g[q]=r);var s=this.cellNavigation?k:l;!m&&s.test(a.className)&&(e("ie")<8&&(a.style.position="relative"),a.tabIndex=this.tabIndex,a.focus()),f(a,".dgrid-focus"),g&&c.emit(p,"dgrid-cellfocusin",g),this.cellNavigation&&(this.columnSets||this.subRows.length>1)&&!b&&this._debouncedEnsureRowScroll(r.row.element)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){var b=a||this._focusedNode;b?this._focusOnNode(b,!1):this.contentNode.focus()}}),n=m.moveFocusVertical=function(a,b){var c=this.cellNavigation,d=this[c?"cell":"row"](a),e=c&&d.column.id,f=this.down(this._focusedNode,b,!0);c&&(f=this.cell(f,e)),this._focusOnNode(f,!1,a),a.preventDefault()},o=m.moveFocusUp=function(a){n.call(this,a,-1)},p=m.moveFocusDown=function(a){n.call(this,a,1)},q=m.moveFocusPageUp=function(a){n.call(this,a,-this.pageSkip)},r=m.moveFocusPageDown=function(a){n.call(this,a,this.pageSkip)},s=m.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var c=!this.row(a),d=this["_focused"+(c?"Header":"")+"Node"];this._focusOnNode(this.right(d,b),c,a),a.preventDefault()}},t=m.moveFocusLeft=function(a){s.call(this,a,-1)},u=m.moveFocusRight=function(a){s.call(this,a,1)},v=m.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a)),a.preventDefault()},w=m.moveHeaderFocusHome=function(a){v.call(this,a,!0)},x=m.moveFocusEnd=function(a,c){var f,g=this,i=this.cellNavigation,j=this.contentNode,k=c?0:j.scrollHeight,l=j.scrollTop+k,m=j[c?"firstChild":"lastChild"],n=m.className.indexOf("dgrid-preload")>-1,o=n?m[(c?"next":"previous")+"Sibling"]:m,p=o.offsetTop+(c?0:o.offsetHeight);if(n){for(;o&&o.className.indexOf("dgrid-row")<0;)o=o[(c?"next":"previous")+"Sibling"];if(!o)return}!n||m.offsetHeight<1?(i&&(o=this.cell(o,this.cell(a).column.id)),this._focusOnNode(o,!1,a)):(e("dom-addeventlistener")||(a=d.mixin({},a)),f=b.after(this,"renderArray",function(b){return f.remove(),h.when(b,function(b){var d=b[c?0:b.length-1];i&&(d=g.cell(d,g.cell(a).column.id)),g._focusOnNode(d,!1,a)})})),l===p&&a.preventDefault()},y=m.moveFocusHome=function(a){x.call(this,a,!0)};return m.defaultKeyMap={32:i,33:q,34:r,35:x,36:y,37:t,38:o,39:u,40:p},m.defaultHeaderKeyMap={32:i,35:v,36:w,37:t,39:u},m})},"dgrid/editor":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/on","dojo/aspect","dojo/has","dojo/query","dojo/when","./Grid","put-selector/put","dojo/_base/sniff"],function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){a.value=b,"radio"!=a.type&&"checkbox"!=a.type||(a.checked=a.defaultChecked=!!b)}function m(a){var b=a.get("item"),c=a.get("value"),d=a._dgridLastValue;if("number"==typeof d)c=isNaN(c)?c:parseFloat(c);else if("boolean"==typeof d)c="true"==c||"false"!=c&&c;else if(d instanceof Date){var e=new Date(c);c=isNaN(e.getTime())?c:e}else"object"==typeof d&&b&&(c=b);return c}function n(a,b){return m("function"==typeof b.get?b:b["checkbox"==b.type||"radio"==b.type?"checked":"value"])}function o(a,b,c,d,f){var g,h,i,j;if((c&&c.valueOf())!=(d&&d.valueOf())&&(g=b.element,h=b.row,i=b.column,i.field&&h)){if(j={grid:a,cell:b,rowId:h.id,oldValue:c,value:d,bubbles:!0,cancelable:!0},f&&f.type&&(j.parentType=f.type),!e.emit(g,"dgrid-datachange",j)){var k;return(k=g.widget)?(k._dgridIgnoreChange=!0,k.set("value",c),setTimeout(function(){k._dgridIgnoreChange=!1},0)):(k=g.input)&&l(k,c),c}a.updateDirty?(a.updateDirty(h.id,i.field,d),i.autoSave&&setTimeout(function(){a._trackError("save")},0)):h.data[i.field]=d}return d}function p(a,b,c){var d,e,f,g=a.cell(b.domNode||b),i=g.column,j=a._activeCell;if((!b.isValid||b.isValid())&&(d=o(a,g,j?a._activeValue:b._dgridLastValue,n(i,b),c),j?a._activeValue=d:b._dgridLastValue=d,"radio"===b.type&&b.name&&!i.editOn&&i.field)){f=a.row(b),h("input[type=radio][name="+b.name+"]",a.contentNode).forEach(function(c){var d=a.row(c);c!==b&&c._dgridLastValue&&(c._dgridLastValue=!1,a.updateDirty?a.updateDirty(d.id,i.field,!1):d.data[i.field]=!1)});for(e in a.dirty)f.id!==e&&a.dirty[e][i.field]&&a.updateDirty(e,i.field,!1)}}function q(a){var c,d,f,h,i,j=a.editor,l=a.editOn,m=a.grid,n="string"!=typeof j;return c=a.editorArgs||{},"function"==typeof c&&(c=c.call(m,a)),n?(d=new j(c),f=d.focusNode||d.domNode,f.className+=" dgrid-input",d.connect(d,l?"onBlur":"onChange",function(){d._dgridIgnoreChange||p(m,this,{type:"widget"})})):(i=function(a){var b=a.target;"_dgridLastValue"in b&&b.className.indexOf("dgrid-input")>-1&&p(m,b,a)},a.grid._hasInputListener||(m._hasInputListener=!0,m.on("change",function(a){i(a)})),h="textarea"==j?"textarea":"input[type="+j+"]",d=f=k(h+".dgrid-input",b.mixin({name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},c)),(g("ie")<9||g("ie")&&g("quirks"))&&("radio"==j||"checkbox"==j?e(d,"click",function(a){i(a)}):e(d,"change",function(a){i(a)}))),d}function r(a,c){function d(){var a=m._activeCell;r.blur(),"function"==typeof m.focus&&setTimeout(function(){m.focus(a)},n&&g("ie")<9?15:0)}function f(){var c=o.parentNode,d=c.children.length-1,f={alreadyHooked:!0},g=m.cell(o);if(e.emit(g.element,"dgrid-editor-hide",{grid:m,cell:g,column:a,editor:i,bubbles:!0,cancelable:!1}),a._editorBlurHandle.pause(),c.removeChild(o),g.row){for(k(g.element,"!dgrid-cell-editing");d--;)k(c.firstChild,"!");j.appendIfNode(c,a.renderCell(a.grid.row(c).data,m._activeValue,c,m._activeOptions?b.delegate(f,m._activeOptions):f))}m._focusedEditorCell=m._activeCell=m._activeValue=m._activeOptions=null}function h(b){var c=b.keyCode||b.which;27==c?(s(),m._activeValue=i._dgridLastValue,d()):13==c&&!1!==a.dismissOnEnter&&d()}var i=q(a),m=a.grid,n=i.domNode,o=i.domNode||i,r=i.focusNode||o,s=n?function(){i.set("value",i._dgridLastValue)}:function(){l(i,i._dgridLastValue),p(a.grid,i)};return e(r,"keydown",h),(a._editorBlurHandle=e.pausable(i,"blur",f)).pause(),i}function s(a,b,c,d,e){var f=a.domNode;f||l(a,d),c.innerHTML="",k(c,".dgrid-cell-editing"),k(c,a.domNode||a),f&&!b.editOn?b.grid._editorsPendingStartup.push([a,b,c,d]):t(a,b,c,d,e)}function t(a,b,c,d,f){var g=b.grid;a.domNode&&(a._started||a.startup({row:f}),a._dgridIgnoreChange=!0,a.set("value",d),setTimeout(function(){a._dgridIgnoreChange=!1},0)),a._dgridLastValue=d,g._activeCell&&(g._activeValue=d,e.emit(c,"dgrid-editor-show",{grid:g,cell:g.cell(c),column:b,editor:a,bubbles:!0,cancelable:!1}))}function u(a){for(var b=a._editorsPendingStartup,c=b.length;c--;)t.apply(null,b[c]);a._editorsPendingStartup=[]}function v(a){function b(a,b){e.grid._activeCell=f,s(e.editorInstance,e,f,i,b),e._editTimer=setTimeout(function(){j.focus&&j.focus(),e._editorBlurHandle&&e._editorBlurHandle.resume(),e._editTimer=null,a.resolve(j)},0)}var c,e,f,g,h,i,j,k,l;if(a.column||(a=this.cell(a)),!a||!a.element)return null;if(e=a.column,h=e.field,f=a.element.contents||a.element,j=e.editorInstance){if(e.grid._activeCell!=f&&(c=a.row,g=this.dirty&&this.dirty[c.id],i=g&&h in g?g[h]:e.get?e.get(c.data):c.data[h],!e.canEdit||e.canEdit(a.row.data,i)))return k=new d,l=j.domNode||j,l.offsetWidth?(l.blur(),setTimeout(function(){b(k,c)},0)):b(k,c),k.promise}else if(e.editor&&(j=f.widget||f.input))return k=new d,j.focus&&j.focus(),k.resolve(j),k.promise;return null}return function(b,d,g){function h(a){var b,c,d=a.grid;d.edit||(d.edit=v,d._editorsPendingStartup=[],m.push(e(d.domNode,".dgrid-input:focusin",function(){d._focusedEditorCell=d.cell(this)})),b=d._editorFocusoutHandle=e.pausable(d.domNode,".dgrid-input:focusout",function(){d._focusedEditorCell=null}),m.push(b),m.push(f.before(d,"removeRow",function(a){var e=d._focusedEditorCell;a=d.row(a),e&&e.row.id===a.id&&(c=e,b.pause(),setTimeout(function(){b.resume(),c=null},0))})),m.push(f.after(d,"insertRow",function(a){var b=d.row(a);return c&&c.row.id===b.id&&d.edit(d.cell(b,c.column.id)),a})),m.push(f.after(d,"renderArray",function(a){return i(a,function(a){a.length?u(d):d._editorsPendingStartup=[]}),a})),m.push(f.after(d,"_onNotification",function(){u(d)})))}var k,l=b.renderCell||j.defaultRenderCell,m=[];return b||(b={}),b.editor=d=d||b.editor||"text",b.editOn=g=g||b.editOn,k="string"!=typeof d,b.widgetArgs&&(a.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4"),b.editorArgs=b.widgetArgs),f.after(b,"init",g?function(){h(b),b.editorInstance=r(b,l)}:function(){var a=b.grid;h(b),k&&m.push(f.before(a,"removeRow",function(c){var d=a.cell(c,b.id).element,e=d&&(d.contents||d).widget;e&&(a._editorFocusoutHandle.pause(),e.destroyRecursive())}))}),f.after(b,"destroy",function(){c.forEach(m,function(a){a.remove()}),b._editorBlurHandle&&b._editorBlurHandle.remove(),b._editTimer&&clearTimeout(b._editTimer),g&&k&&b.editorInstance.destroyRecursive(),b.grid.edit=null,b.grid._editorsPendingStartup=null}),b.renderCell=g?function(a,c,d,f){var h=b.grid;return f&&f.alreadyHooked||e("TD"==d.tagName?d:d.parentNode,g,function(){h._activeOptions=f,h.edit(this)}),l.call(b,a,c,d,f)}:function(a,c,d,e){if(b.canEdit&&!b.canEdit(a,c))return l.call(b,a,c,d,e);var f=q(b);s(f,b,d,c),d[k?"widget":"input"]=f},b}})},"dgrid/selector":function(){define(["dojo/_base/kernel","dojo/_base/array","dojo/on","dojo/aspect","dojo/_base/sniff","put-selector/put"],function(a,b,c,d,e,f){return function(c,g){function h(a){return!l.allowSelect(l.row(a))}function i(a){return function(b){var d,e,f,g=b.rows,h=g.length,i="false";for(f=0;f<h;f++){var j=l.cell(g[f],c.id).element;j&&((j=(j.contents||j).input)&&!j.disabled&&(j.checked=a,j.setAttribute("aria-checked",a)))}if("checkbox"==m.type){d=l.selection,e=!1;for(f in d)if(d[f]!=l.allSelected){e=!0;break}m.indeterminate=e,m.checked=l.allSelected,e?i="mixed":l.allSelected&&(i="true"),m.setAttribute("aria-checked",i)}}}function j(a){if("click"==a.type||32==a.keyCode||!e("opera")&&13==a.keyCode||0===a.keyCode){var b=l.row(a);if(l._selectionTriggerEvent=a,b){if(l.allowSelect(b)){var c=l._lastSelected&&l.row(l._lastSelected);"radio"==g||"single"===l.selectionMode?c&&c.id==b.id||(l.clearSelection(),l.select(b,null,!0),l._lastSelected=b.element):b&&(a.shiftKey?i(!0)({rows:[b]}):c=null,c=a.shiftKey?c:null,l.select(c||b,b,c?void 0:null),l._lastSelected=b.element)}}else f(this,(l.allSelected?"!":".")+"dgrid-select-all"),l[l.allSelected?"clearSelection":"selectAll"]();l._selectionTriggerEvent=null}}function k(){l._hasSelectorInputListener=!0,n.push(l.on(".dgrid-selector:click,.dgrid-selector:keydown",j));var a=l._handleSelect;if(l._handleSelect=function(b){this.cell(b).column!=c&&a.apply(this,arguments)},"function"==typeof c.disabled){var b=l.allowSelect,d=c.disabled;l.allowSelect=function(a){var e=b.call(this,a);return d===h?e:e&&!d.call(c,a.data)},c.disabled=h}else c.disabled=h;n.push(l.on("dgrid-select",i(!0))),n.push(l.on("dgrid-deselect",i(!1)))}var l,m,n=[];c||(c={}),c.type&&(c.selectorType=c.type,a.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4")),c.selectorType=g=g||c.selectorType||"checkbox",c.sortable=!1;var o="function"==typeof g?g:function(a,b,d){var e,h=b.parentNode;l._hasSelectorInputListener||k(),e=c.disabled,f(h&&h.contents?h:b,".dgrid-selector");var i=b.input||(b.input=f(b,"input[type="+g+"]",{tabIndex:isNaN(c.tabIndex)?-1:c.tabIndex,disabled:e&&("function"==typeof e?e.call(c,d):e),checked:a}));return i.setAttribute("aria-checked",!!a),i};return d.after(c,"init",function(){l=c.grid}),d.after(c,"destroy",function(){b.forEach(n,function(a){a.remove()}),l._hasSelectorInputListener=!1}),c.renderCell=function(a,b,c,d,e){var f=a&&l.row(a);b=f&&l.selection[f.id],o(b,c,a)},c.renderHeaderCell=function(a){var b="label"in c?c.label:c.field||"";"radio"!=g&&l.allowSelectAll?o(!1,a,{}):(a.appendChild(document.createTextNode(b)),l._hasSelectorInputListener||k()),m=a.lastChild},c}})},"dgrid/extensions/ColumnHider":function(){define(["dojo/_base/declare","dojo/has","dojo/on","../util/misc","put-selector/put","dojo/i18n!./nls/columnHider","xstyle/css!../css/extensions/ColumnHider.css"],function(a,b,c,d,e,f){function g(a,b){return a.id.substr(b.id.length+18)}var h,i,j=b("ie"),k=j&&b("quirks"),l=j<8||k?"htmlFor":"for";return a(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:f,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var a,b,c,d,e=this.subRows,f=!0;for(delete this._columnHiderFirstCheckbox,c=0,a=e.length;c<a;c++)for(d=0,b=e[c].length;d<b;d++)this._renderHiderMenuEntry(e[c][d]),f&&(f=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[e[c][d].id])},_renderHiderMenuEntry:function(a){var b,c,f,g=a.id,h=d.escapeCssIdentifier(g,"-");a.hidden&&(a.hidden=!1,this._hideColumn(g),a.hidden=!0),a.unhidable||(b=e("div.dgrid-hider-menu-row"),c=this.domNode.id+"-hider-menu-check-"+h,f=this._columnHiderCheckboxes[g]=e(b,"input.dgrid-hider-menu-check.hider-menu-check-"+h+"[type=checkbox]"),f.id=c,
e(b,"label.dgrid-hider-menu-label.hider-menu-label-"+h+"["+l+"="+c+"]",a.label||a.field||""),e(this.hiderMenuNode,b),a.hidden||(f.checked=!0))},renderHeader:function(){function a(a){a.stopPropagation()}var b,d=this,f=this.hiderMenuNode,l=this.hiderToggleNode;if(this.inherited(arguments),f){for(b in this._columnHiderRules)this._columnHiderRules[b].remove();f.innerHTML=""}else l=this.hiderToggleNode=e(this.domNode,"button.ui-icon.dgrid-hider-toggle[type=button][aria-label="+this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(c(l,"click",function(a){d._toggleColumnHiderMenu(a)})),f=this.hiderMenuNode=e("div.dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]"),f.id=this.id+"-hider-menu",this._listeners.push(c(f,"keyup",function(a){27===(a.charCode||a.keyCode)&&(d._toggleColumnHiderMenu(a),l.focus())})),f.style.display="none",e(this.domNode,f),this._listeners.push(c(f,".dgrid-hider-menu-check:"+(j<9||k?"click":"change"),function(a){d._updateColumnHiddenState(g(a.target,d),!a.target.checked)})),this._listeners.push(c(f,"mousedown",a),c(l,"mousedown",a)),i||(i=c.pausable(document,"mousedown",function(a){h&&h._toggleColumnHiderMenu(a)}),i.pause());this._columnHiderCheckboxes={},this._columnHiderRules={},this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var a in this._columnHiderRules)this._columnHiderRules[a].remove()},left:function(a,b){return this.right(a,-b)},right:function(a,b){a.element||(a=this.cell(a));for(var c=this.inherited(arguments),d=a;c.column.hidden;){if(c=this.inherited(arguments,[c,b>0?1:-1]),d.element===c.element)return a;d=c}return c},isColumnHidden:function(a){return!!this._columnHiderRules[a]},_toggleColumnHiderMenu:function(){var a,b=this._hiderMenuOpened,c=this.hiderMenuNode,d=this.domNode;c.style.display=b?"none":"",b?c.style.height="":(c.offsetHeight>d.offsetHeight-12&&(c.style.height=d.offsetHeight-12+"px"),(a=this._columnHiderFirstCheckbox)&&a.focus()),i[b?"pause":"resume"](),h=b?null:this,this._hiderMenuOpened=!b},_hideColumn:function(a){var c,e=this,f="#"+d.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-";this._columnHiderRules[a]||(this._columnHiderRules[a]=d.addCssRule(f+d.escapeCssIdentifier(a,"-"),"display: none;"),8!==b("ie")&&10!==b("ie")||b("quirks")||(c=d.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){c.remove(),e.resize()},0)))},_showColumn:function(a){this._columnHiderRules[a]&&(this._columnHiderRules[a].remove(),delete this._columnHiderRules[a])},_updateColumnHiddenState:function(a,b){this[b?"_hideColumn":"_showColumn"](a),this.columns[a].hidden=b,c.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[a],hidden:b,bubbles:!0}),this.resize()},toggleColumnHiddenState:function(a,b){void 0===b&&(b=!this._columnHiderRules[a]),this._updateColumnHiddenState(a,b),this._columnHiderCheckboxes[a].checked=!b}})})},"dgrid/extensions/ColumnReorder":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/on","dojo/query","dojo/dnd/Source","put-selector/put","xstyle/css!../css/extensions/ColumnReorder.css"],function(a,b,c,d,e,f,g){function h(a,b){var c=b[2],d=a[c?"columnSets":"subRows"][b[1]];return c?d[b[2]]:d}function i(a,b,c){b[2]?a.columnSets[b[1]][b[2]]=c:a.subRows[b[1]]=c}function j(a){return"dgrid-"+a+"-"}function k(a,b){return b.slice(j(a).length)}var l=/(\d+)(?:-(\d+))?$/,m=b(f,{copyState:function(){return!1},checkAcceptance:function(a,b){return a==this},_legalMouseDown:function(a){return!(a.target.className.indexOf("dgrid-resize-handle")>-1)&&this.inherited(arguments)},onDropInternal:function(a){var b=this.grid,e=l.exec(k(b.id,a[0].getAttribute("dndType"))),f=e[2]?"columnSets":"subRows",g=h(b,e),j=b.columns;this.inherited(arguments),e&&setTimeout(function(){var h,k=c.map(a[0].parentNode.childNodes,function(a){return j[a.columnId]});i(b,e,k),h={grid:b,subRow:k,column:j[a[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"},h[f]=b[f],d.emit(b.domNode,"dgrid-columnreorder",h)?b.set(f,b[f]):(i(b,e,g),b.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}}),n=b(null,{columnDndConstructor:m,_initSubRowDnd:function(a,b){var c,d,e,f,h;for(d=0,e=a.length;d<e;d++)f=a[d],!1!==f.reorderable&&(h=f.headerNode,"TH"!=h.tagName&&(h=h.parentNode),g(h,".dojoDndItem[dndType="+b+"]"),c||(c=h.parentNode));c&&this._columnDndSources.push(new this.columnDndConstructor(c,{horizontal:!0,grid:this}))},renderHeader:function(){var a,b,d=j(this.id);if(this.inherited(arguments),this._columnDndSources=[],this.columnSets)for(b=0,a=this.columnSets.length;b<a;b++)c.forEach(this.columnSets[b],function(a,c){this._initSubRowDnd(a,d+b+"-"+c)},this);else c.forEach(this.subRows,function(a,b){this._initSubRowDnd(a,d+b)},this)},_destroyColumns:function(){this._columnDndSources&&c.forEach(this._columnDndSources,function(a){a.destroy()}),this.inherited(arguments)}});return n.ColumnDndSource=m,n})},"dgrid/extensions/ColumnResizer":function(){define(["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/has","../util/misc","put-selector/put","dojo/_base/html","xstyle/css!../css/extensions/ColumnResizer.css"],function(a,b,c,d,e,f,g,h,i){function j(a,b,c,d,e){for(var f=1;f<b;f++)a[c+f][d]=e}function k(a){for(var b=a.length,c=b,d=a[0].length,e=new Array(b);b--;)e[b]=new Array(d);var f={};for(b=0;b<c;b++)for(var g=e[b],h=a[b],i=0,k=0;i<d;i++){var l,m=h[k];if(void 0===g[i]){if(g[i]=m.id,m.rowSpan&&m.rowSpan>1&&j(e,m.rowSpan,b,i,m.id),b>0&&m.colSpan&&m.colSpan>1)for(l=1;l<m.colSpan;l++)g[++i]=m.id,m.rowSpan&&m.rowSpan>1&&j(e,m.rowSpan,b,i,m.id);f[m.id]=a[0][i].id,k++}}return f}function l(a,c,d,e,f){if(!(d<=0)){var g,i,j=a.columns[c];if(j)return g={grid:a,columnId:c,width:d,bubbles:!0,cancelable:!0},e&&(g.parentType=e),!a._resizedColumns||b.emit(a.headerNode,"dgrid-columnresize",g)?("auto"===d?delete j.width:(j.width=d,d+="px"),i=a._columnSizes[c],i?i.set("width",d):i=h.addCssRule("#"+h.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(c,"-"),"width: "+d+";"),a._columnSizes[c]=i,!1!==f&&a.resize(),!0):void 0}}var m,n=0,o={create:function(){m=i("div.dgrid-column-resizer")},destroy:function(){i(m,"!"),m=null},show:function(a){var b=f.position(a.domNode,!0);m.style.top=b.y+"px",m.style.height=b.h+"px",i(document.body,m)},move:function(a){m.style.left=a+"px"},hide:function(){m.parentNode.removeChild(m)}};return a(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments),n++||o.create()},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--n||o.destroy()},resizeColumnWidth:function(a,b){return l(this,a,b)},configStructure:function(){var a,b=this._oldColumnSizes=d.mixin({},this._columnSizes);this._resizedColumns=!1,this._columnSizes={},this.inherited(arguments);for(a in b)a in this._columnSizes||b[a].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b,c=a.id;"width"in a&&((b=this._oldColumnSizes[c])?b.set("width",a.width+"px"):b=h.addCssRule("#"+h.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(c,"-"),"width: "+a.width+"px;"),this._columnSizes[c]=b)},renderHeader:function(){this.inherited(arguments);var a,e=this;if(this.columnSets&&this.columnSets.length)for(var f=this.columnSets.length;f--;)a=d.mixin(a||{},k(this.columnSets[f]));else this.subRows&&this.subRows.length>1&&(a=k(this.subRows));for(var j=c(".dgrid-cell",e.headerNode),l=j.length;l--;){var m,n=j[l],o=n.columnId,p=e.columns[o],q=n.childNodes;if(p&&!1!==p.resizable){var r=i("div.dgrid-resize-header-container");for(n.contents=r;q.length>0;)i(r,q[0]);m=i(n,r,"div.dgrid-resize-handle.resizeNode-"+h.escapeCssIdentifier(o,"-")),m.columnId=a&&a[o]||o}}e.mouseMoveListen||(b(e.headerNode,".dgrid-resize-handle:mousedown"+(g("touch")?",.dgrid-resize-handle:touchstart":""),function(a){e._resizeMouseDown(a,this),e.mouseMoveListen.resume(),e.mouseUpListen.resume()}),e._listeners.push(e.mouseMoveListen=b.pausable(document,"mousemove"+(g("touch")?",touchmove":""),h.throttleDelayed(function(a){e._updateResizerPosition(a)}))),e._listeners.push(e.mouseUpListen=b.pausable(document,"mouseup"+(g("touch")?",touchend":""),function(a){e._resizeMouseUp(a),e.mouseMoveListen.pause(),e.mouseUpListen.pause()})),e.mouseMoveListen.pause(),e.mouseUpListen.pause())},_resizeMouseDown:function(a,b){a.preventDefault(),e.setSelectable(this.domNode,!1),this._startX=this._getResizeMouseLocation(a),this._targetCell=c(".dgrid-column-"+h.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0],this._updateResizerPosition(a),o.show(this)},_resizeMouseUp:function(a){var b,d,f,g=this._columnSizes;this.adjustLastColumn&&(f=this.headerNode.clientWidth-1),this._resizedColumns||(b=c(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?b=b.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in g)}):this.subRows&&this.subRows.length>1&&(b=b.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in g)})),d=b.map(function(a){return a.offsetWidth}),b.forEach(function(a,b){l(this,a.columnId,d[b],null,!1)},this),this._resizedColumns=!0),e.setSelectable(this.domNode,!0);var i=this._targetCell,j=this._getResizeMouseLocation(a)-this._startX,k=i.offsetWidth+j,m=this._getResizedColumnWidths(),n=m.totalWidth,p=m.lastColId,q=c(".dgrid-column-"+h.escapeCssIdentifier(p,"-"),this.headerNode)[0].offsetWidth;k<this.minWidth&&(k=this.minWidth),l(this,i.columnId,k,a.type)&&i.columnId!=p&&this.adjustLastColumn&&(n+j<f?l(this,p,"auto",a.type):q-j<=this.minWidth&&l(this,p,this.minWidth,a.type)),o.hide(),delete this._startX,delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){var b=this._getResizeMouseLocation(a),c=b-this._startX,d=this._targetCell.offsetWidth,e=b;d+c<this.minWidth&&(e=this._startX-(d-this.minWidth)),o.move(e)}},_getResizeMouseLocation:function(a){var b=0;return a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),b},_getResizedColumnWidths:function(){var a=0,b=c((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),d=b.length;if(!d)return{};for(var e=b[d-1].columnId;d--;)a+=b[d].offsetWidth;return{totalWidth:a,lastColId:e}}})})},"dgrid/extensions/Pagination":function(){define(["../_StoreMixin","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/query","dojo/string","dojo/has","put-selector/put","../util/misc","dojo/i18n!./nls/pagination","dojo/_base/sniff","xstyle/css!../css/extensions/Pagination.css"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){a.noDataNode?(j(a.noDataNode,"!"),delete a.noDataNode):a.cleanup(),a.contentNode.innerHTML=""}function n(a){if(a.loadingNode)j(a.loadingNode,"!"),delete a.loadingNode;else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes,a._oldPageObserver&&(a._oldPageObserver.cancel(),a._numObservers--,delete a._oldPageObserver)}delete a._isLoading}return b(a,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:l,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var a,b,c=this,d=this.paginationNode=j(this.footerNode,"div.dgrid-pagination"),e=this.paginationStatusNode=j(d,"div.dgrid-status"),g=this.i18nPagination;e.tabIndex=0,this._updatePaginationSizeSelect(),this._updateRowsPerPageOption(),e.innerHTML=h.substitute(g.status,{start:1,end:1,total:0}),a=this.paginationNavigationNode=j(d,"div.dgrid-navigation"),this.firstLastArrows&&(b=this.paginationFirstNode=j(a,"span.dgrid-first.dgrid-page-link","\xab"),b.setAttribute("aria-label",g.gotoFirst),b.tabIndex=0),this.previousNextArrows&&(b=this.paginationPreviousNode=j(a,"span.dgrid-previous.dgrid-page-link","\u2039"),b.setAttribute("aria-label",g.gotoPrev),b.tabIndex=0),this.paginationLinksNode=j(a,"span.dgrid-pagination-links"),this.previousNextArrows&&(b=this.paginationNextNode=j(a,"span.dgrid-next.dgrid-page-link","\u203a"),b.setAttribute("aria-label",g.gotoNext),b.tabIndex=0),this.firstLastArrows&&(b=this.paginationLastNode=j(a,"span.dgrid-last.dgrid-page-link","\xbb"),b.setAttribute("aria-label",g.gotoLast),b.tabIndex=0),this._listeners.push(f(a,".dgrid-page-link:click,.dgrid-page-link:keydown",function(a){if("keydown"!==a.type||13===a.keyCode){var b,d,e=this.className;c._isLoading||e.indexOf("dgrid-page-disabled")>-1||(b=c._currentPage,d=Math.ceil(c._total/c.rowsPerPage),this===c.paginationPreviousNode?c.gotoPage(b-1):this===c.paginationNextNode?c.gotoPage(b+1):this===c.paginationFirstNode?c.gotoPage(1):this===c.paginationLastNode?c.gotoPage(d):"dgrid-page-link"===e&&c.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments),this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var a,b=this.pageSizeOptions,c=this.paginationSizeSelect;if(b&&b.length){c||(c=this.paginationSizeSelect=j(this.paginationNode,"select.dgrid-page-size[aria-label="+this.i18nPagination.rowsPerPage+"]"),a=this._paginationSizeChangeHandle=f(c,"change",d.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(a)),c.options.length=0;for(var e=0;e<b.length;e++)j(c,"option",b[e],{value:b[e],selected:this.rowsPerPage===b[e]});this._updateRowsPerPageOption()}else b&&b.length||!c||(j(c,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,b){return a-b}),this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,d=this.paginationSizeSelect;d&&(c.indexOf(b,a)<0?this._setPageSizeOptions(b.concat([a])):d.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a,this._updateRowsPerPageOption(),this.gotoPage(1)},_updateNavigation:function(){function a(a,b){var e,g;h.pagingTextBox&&a==m&&p>1?(e=j(l,"input.dgrid-page-input[type=text][value=$]",m),e.setAttribute("aria-label",i.jumpPage),h._pagingTextBoxHandle=f(e,"change",function(){var a=+this.value;!isNaN(a)&&a>0&&a<=p&&h.gotoPage(+this.value)}),r&&"INPUT"===r.tagName&&e.focus()):(g=a===m,e=j(l,"span"+(g?".dgrid-page-disabled":"")+".dgrid-page-link",a+(b?" ":"")),e.setAttribute("aria-label",i.gotoPage),e.tabIndex=g?-1:0,c===a&&(g?a<p?c++:d.focus():e.focus()),g||(d=e))}function b(a,b){j(a,(b?".":"!")+"dgrid-page-disabled"),a.tabIndex=b?-1:0}var c,d,e,h=this,i=this.i18nPagination,l=this.paginationLinksNode,m=this._currentPage,n=this.pagingLinks,o=this.paginationNavigationNode,p=Math.ceil(this._total/this.rowsPerPage),q=this._pagingTextBoxHandle,r=document.activeElement;if(r&&k.contains(this.paginationNavigationNode,r)?"dgrid-page-link"===r.className&&(c=+r.innerHTML):r=null,q&&q.remove(),l.innerHTML="",g(".dgrid-first, .dgrid-previous",o).forEach(function(a){b(a,1===m)}),g(".dgrid-last, .dgrid-next",o).forEach(function(a){b(a,m>=p)}),n&&p>0){a(1,!0);var s=m-n;s>2?j(l,"span.dgrid-page-skip","..."):s=2;for(var t=s;t<Math.min(m+n+1,p);t++)a(t,!0);m+n+1<p&&j(l,"span.dgrid-page-skip","..."),p>1&&a(p)}else h.pagingTextBox&&a(m);r&&-1===r.tabIndex&&(e=g("[tabindex='0']",this.paginationNavigationNode),r===this.paginationPreviousNode||r===this.paginationFirstNode?r=e[0]:e.length&&(r=e[e.length-1]),r&&r.focus())},refresh:function(){var a=this;if(this.inherited(arguments),this.store)return this.gotoPage(1).then(function(b){return setTimeout(function(){f.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a,results:b})},0),b})},_onNotification:function(a){a.length!==this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(a,b){var c=this,d=this.inherited(arguments);return this._lastCollection=null,b||(this._topLevelRequest&&this._topLevelRequest!==a&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"==typeof a.cancel&&(this._topLevelRequest=a),e.when(a,function(){c._topLevelRequest&&delete c._topLevelRequest})),d},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);return a&&b===a[b.id]&&delete a[b.id],b},gotoPage:function(a){var b=this,c=new e;return this._trackError(function(){var f,g,k,l,o,p,q=b.rowsPerPage,r=(a-1)*q,s=d.mixin(b.get("queryOptions"),{start:r,count:q}),t=b.contentNode;if(b.showLoadingMessage)m(b),g=b.loadingNode=j(t,"div.dgrid-loading"),g.innerHTML=b.loadingMessage;else{for(b._oldPageNodes=k={},l=t.children,o=0,p=l.length;o<p;o++)k[l[o].id]=l[o];b._oldPageObserver=b.observers.pop()}return b._isLoading=!0,f=b.store.query(b.query,s),e.when(b.renderArray(f,null,s),function(d){n(b),b.scrollTo({y:0}),e.when(f.total,function(c){c||(b.noDataNode&&(j(b.noDataNode,"!"),delete b.noDataNode),b.noDataNode=j(b.contentNode,"div.dgrid-no-data"),b.noDataNode.innerHTML=b.noDataMessage),b.paginationStatusNode.innerHTML=h.substitute(b.i18nPagination.status,{start:Math.min(r+1,c),end:Math.min(c,r+q),total:c}),b._total=c,b._currentPage=a,b._rowsOnPage=d.length,b._updateNavigation()}),(i("ie")<7||i("ie")&&i("quirks"))&&b.resize(),c.resolve(f)},function(a){n(b),c.reject(a)}),c.promise})||c.reject(),c.promise}})})},"dgrid/extensions/DnD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/on","dojo/topic","dojo/has","dojo/dnd/Source","dojo/dnd/Manager","dojo/_base/NodeList","put-selector/put","../Selection","dojo/has!touch?../util/touch","dojo/has!touch?./_DnD-touch-autoscroll","xstyle/css!dojo/resources/dnd.css"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=a(i,{grid:null,getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var e=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,h=g.store;!this.before&&f&&(f=f.nextSibling),f=f&&g.row(f),d.when(f&&h.get(f.id),function(d){e!=a?e.onDropExternal(a,b,c,d):e.onDropInternal(b,c,d)})},onDropInternal:function(a,b,c){var e,f,g=this.grid,h=g.store,i=this,j=i._targetAnchor;j&&(e=this.before?j.previousSibling:j.nextSibling),f=g.row(a[0]),(b||e!==a[0]&&(c||!f||g.down(f).element!=a[0]))&&a.forEach(function(a){d.when(i.getObject(a),function(a){var d=h.getIdentity(a);h[b&&h.copy?"copy":"put"](a,{before:c}),i._selectedNodes[d]&&(i._selectedNodes[d]=g.row(d).element)})})},onDropExternal:function(a,b,c,e){var f=this.grid.store,g=a.grid;b.forEach(function(b,h){d.when(a.getObject(b),function(i){c||(g?d.when(g.store.getIdentity(i),function(c){!h&&a.selectNone(),a.delItem(b.id),g.store.remove(c)}):a.deleteSelectedNodes()),f[f.copy?"copy":"put"](i,{before:e})})})},onDndStart:function(a,b,c){this.inherited(arguments),a==this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),j.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){h("touch")&&this.isDragging&&n.countCurrentTouches(a,this.grid.touchNode)>1?(g.publish("/dnd/cancel"),j.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!h("touch")||n.countCurrentTouches(a,this.grid.touchNode)<=1)&&this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&i.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a,b=new k;for(a in this.grid.selection)b.push(this._selectedNodes[a]);return b}}),p=a(m,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:o,postMixInProperties:function(){this.inherited(arguments),this.dndParams=b.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(a){f[a.id]=a.element}function d(a){delete f[a.id],l(a.element,"!dojoDndItemSelected!dojoDndItemAnchor")}this.inherited(arguments),this.dndSource=new(this.dndConstructor||o)(this.bodyNode,b.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var f=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){c.forEach(b.rows,a)}),this.on("dgrid-deselect",function(a){c.forEach(a.rows,d)}),e.after(this,"destroy",function(){delete this.dndSource._selectedNodes,f=null,this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];return l(b,".dojoDndItem"),this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]}),b},removeRow:function(a){this.dndSource.delItem(this.row(a)),this.inherited(arguments)}});return p.GridSource=o,p})},"dgrid/util/mouse":function(){define(["dojo/on","dojo/dom","dojo/query"],function(a,b){function c(c,d){return function(e,f){return a(e,c+":"+d,function(a){if(!b.isDescendant(a.relatedTarget,this))return f.call(this,a)})}}return{enterRow:c(".dgrid-content .dgrid-row","mouseover"),enterCell:c(".dgrid-content .dgrid-cell","mouseover"),enterHeaderCell:c(".dgrid-header .dgrid-cell","mouseover"),leaveRow:c(".dgrid-content .dgrid-row","mouseout"),leaveCell:c(".dgrid-content .dgrid-cell","mouseout"),leaveHeaderCell:c(".dgrid-header .dgrid-cell","mouseout"),createDelegatingHandler:c}})},"Sage/Utility/_LocalStorageMixin":function(){define(["dojo/_base/declare","dojox/storage/LocalStorageProvider"],function(a,b){return a("Sage.Utility._LocalStorageMixin",null,{localStorageProvider:null,_setLocalStorageProviderAttr:function(a){this.localStorageProvider=a},_getLocalStorageProviderAttr:function(){return this._ensureProvider(),this.localStorageProvider},_ensureProvider:function(){var a;this.localStorageProvider||(a=new b,a.initialize(),this._setLocalStorageProviderAttr(a))},saveToLocalStorage:function(a,b,c){var d=this._getLocalStorageProviderAttr(),e=c,f=a;d.isValidKey(a)||(f=this._stripBadValues(a)),d.isValidNamespace(c)||(e=this._stripBadValues(c)),d.put(f,b,function(a,b,c){d.FAILED},e);var g=new Date(Date.now());d.put(f+"_modified_at",g,function(a,b,c){d.FAILED},e),d.put("modified_at",g,function(a,b,c){d.FAILED},e)},getFromLocalStorage:function(a,b){var c=this._getLocalStorageProviderAttr(),d=b,e=a;return c.isValidKey(a)||(e=this._stripBadValues(a)),c.isValidNamespace(b)||(d=this._stripBadValues(b)),c.get(e,d)},getKeys:function(a){return this._getLocalStorageProviderAttr().getKeys(a)},clear:function(a){var b=this._getLocalStorageProviderAttr();a?b.clear(a):b.clear()},_stripBadValues:function(a){return a.replace(/[^A-Za-z0-9]/g,"-")}})})},"Sage/Store/SData":function(){define("Sage/Store/SData",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/store/util/QueryResults","dojo/string","dojo/json","../Utility"],function(a,b,c,d,e,f,g,h){return a("Sage.Store.SData",null,{doDateConversion:!1,scope:null,where:null,select:null,include:null,orderBy:null,service:null,request:null,queryName:null,queryArgs:null,entityName:null,contractName:null,resourceKind:null,resourceProperty:null,resourcePredicate:null,applicationName:null,dataSet:null,executeQueryAs:null,executeGetAs:null,itemsProperty:"$resources",idProperty:"$key",labelProperty:"$descriptor",entityProperty:"$name",versionProperty:"$etag",dataCache:[],constructor:function(a){b.mixin(this,a)},_createDeleteRequest:function(a,b){var c=h.expand(this,b.request||this.request),d=b.id||this.getIdentity(a);if(c)c=c.clone();else{d=d||h.expand(this.scope||this,b.resourcePredicate||this.resourcePredicate);var e,g=h.expand(this.scope||this,b.contractName||this.contractName),i=h.expand(this.scope||this,b.resourceKind||this.resourceKind),j=h.expand(this.scope||this,b.resourceProperty||this.resourceProperty);d&&(e=/\s+/.test(d)?d:f.substitute("'${0}'",[d])),c=j?new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(j).setResourceSelector(e):new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceSelector(e),g&&c.setContractName(g),i&&c.setResourceKind(i)}return c},_createEntryRequest:function(a,b){var c=h.expand(this,b.request||this.request),d=a;if(c)c=c.clone();else{d=d||h.expand(this.scope||this,b.resourcePredicate||this.resourcePredicate);var e,g=h.expand(this.scope||this,b.contractName||this.contractName),i=h.expand(this.scope||this,b.resourceKind||this.resourceKind),j=h.expand(this.scope||this,b.dataSet||this.dataSet),k=h.expand(this.scope||this,b.resourceProperty||this.resourceProperty);d&&(e=/\s+/.test(d)?d:f.substitute("'${0}'",[d])),c=k?new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(k).setResourceSelector(e):new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceSelector(e),g&&c.setContractName(g),i&&c.setResourceKind(i),j&&c.setDataSet(j)}var l=h.expand(this.scope||this,b.select||this.select),m=h.expand(this.scope||this,b.include||this.include);return l&&l.length>0&&c.setQueryArg("select",l.join(",").replace(/\./g,"/")),m&&m.length>0&&c.setQueryArg("include",m.join(",")),c},_createFeedRequest:function(a,b){var d=h.expand(this,b.request||this.request);if(d)d=d.clone();else{var e=h.expand(this.scope||this,b.queryName||this.queryName),f=h.expand(this.scope||this,b.contractName||this.contractName),g=h.expand(this.scope||this,b.resourceKind||this.resourceKind),i=h.expand(this.scope||this,b.resourceProperty||this.resourceProperty),j=h.expand(this.scope||this,b.resourcePredicate||this.resourcePredicate),k=h.expand(this.scope||this,b.applicationName||this.applicationName),l=h.expand(this.scope||this,b.dataSet||this.dataSet),m=h.expand(this.scope||this,b.queryArgs||this.queryArgs),n=h.expand(this.scope||this,b.operationSDataStore||this.operationSDataStore),o=h.expand(this.scope||this,b.operationName||this.operationName);if(e?(d=new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(e),j&&d.getUri().setCollectionPredicate(j)):d=i?new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(i).setResourceSelector(j):"Sage.SData.Client.SDataServiceOperationRequest"===n?new Sage.SData.Client.SDataServiceOperationRequest(this.service).setContractName(f).setOperationName(o):new Sage.SData.Client.SDataResourceCollectionRequest(this.service),f&&d.setContractName(f),g&&d.setResourceKind(g),k&&d.setApplicationName(k),l&&d.setDataSet(l),m)for(var p in m)m.hasOwnProperty(p)&&d.setQueryArg(p,m[p])}var q=h.expand(this.scope||this,b.select||this.select),r=h.expand(this.scope||this,b.include||this.include),s=h.expand(this.scope||this,b.sort||this.orderBy);if(q&&q.length>0&&d.setQueryArg("select",q.join(",").replace(/\./g,"/")),r&&r.length>0&&d.setQueryArg("include",r.join(",")),s)if("string"==typeof s)d.setQueryArg("orderby",s);else if(s.length>0){var t=[];c.forEach(s,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},t),d.setQueryArg("orderby",t.join(","))}var u=h.expand(this.scope||this,b.where||this.where),v=[];u&&v.push(u);var w=h.expand(this.scope||this,a);return w&&"string"==typeof w&&v.push(w),v.length>0&&d.setQueryArg("where","("+v.join(") and (")+")"),void 0!==b.start&&d.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,b.start+1),void 0!==b.count&&d.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,b.count),d},_onCancel:function(){},_onRequestFeedSuccess:function(a,c){if(c){var d=b.getObject(this.itemsProperty,!1,c),e="number"==typeof c.$totalResults?c.$totalResults:-1;a.total=e,this.onComplete&&this.onComplete(d,e),this.dataCache=d,a.resolve(d||[])}else{var f=new Error("The feed result is invalid.");a.reject(f)}},_onRequestEntrySuccess:function(a,b){if(b)a.resolve(this.doDateConversion?this._handleDateConversion(b):b);else{var c=new Error("The entry result is invalid.");a.reject(c)}},_onRequestFailure:function(a,b,c){var d=new Error("An error occurred requesting: "+c.url);d.xhr=b,d.status=b.status,d.aborted=!1,d.url=c.url,a.reject(d)},_onRequestAbort:function(a,b,c){var d=new Error("An error occurred requesting: "+c.url);d.xhr=b,d.status=0,d.responseText=null,d.aborted=!0,a.reject(d)},_handleDateConversion:function(a){for(var b in a)h.Convert.isDateString(a[b])&&(a[b]=h.Convert.toDateFromString(a[b]));return a},get:function(a,b){var c={},e=new d,f=this._createEntryRequest(a,b||{}),g=this.executeGetAs?f[this.executeGetAs]:f.read;return c.value=g.call(f,{success:this._onRequestEntrySuccess.bind(this,e),failure:this._onRequestFailure.bind(this,e),aborted:this._onRequestAbort.bind(this,e)}),e},getIdentity:function(a){return b.getObject(this.idProperty,!1,a)},getLabel:function(a){return b.getObject(this.labelProperty,!1,a)},getEntity:function(a){return b.getObject(this.entityProperty,!1,a)},getVersion:function(a){return b.getObject(this.versionProperty,!1,a)},put:function(a,b){b=b||{};var c=b.id||this.getIdentity(a),e=b.entity||this.entityName,f=b.version||this.getVersion(a),g=!this.service.isJsonEnabled();c&&(a.$key=c),e&&g&&(a.$name=e),f&&(a.$etag=f);var h={},i=new d,j=this._createEntryRequest(c,b),k=b.create?j.create:j.update;return h.value=k.call(j,a,{success:this._onTransmitEntrySuccess.bind(this,i),failure:this._onRequestFailure.bind(this,i),aborted:this._onRequestAbort.bind(this,i)}),i},_onTransmitEntrySuccess:function(a,b){a.resolve(this.doDateConversion?this._handleDateConversion(b):b)},add:function(a,b){return b=b||{},b.create=!0,this.put(a,b)},newItem:function(a){var b=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);b.setResourceKind(this.resourceKind),b.read({success:function(b){this._entity=b,a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:function(b){a.onError&&a.onError.call(a.scope||this,b)},scope:this})},createItem:function(a,c){var d={};d.scope=c||this,d.scope.store=this;var e=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};d.success=e,this.add(a).then(b.hitch(this,function(){this.dataCache.push(a),d.success.call(d.scope,a)}))},deleteItem:function(a,c){var d=new Sage.SData.Client.SDataBatchRequest(this.service);d.setResourceKind(this.resourceKind),d.using(b.hitch(this,function(){for(var b=0;b<a.length;b++){var c=new Sage.SData.Client.SDataSingleResourceRequest(this.service);c.setResourceKind(this.resourceKind),c.setResourceSelector("'"+a[b].$key+"'"),c.delete({},{scope:this,ignoreETag:!0})}})),d.commit({scope:this,ignoreETag:!0,success:function(a){var b=a.$resources[0];if(void 0!==b.$diagnoses){var d=b.$diagnoses[0];d.applicationCode&&"string"==typeof d.applicationCode&&-1!=d.applicationCode.indexOf("SDataExceptionDiagnoses")&&500==a.$resources[0].$httpStatus&&(c.onResponseExceptionMsg=a.$resources[0].$diagnoses[0].message)}var e={};e.scope=c||this;var f=function(){"function"==typeof this.onResponse&&this.onResponse.call(this,e.scope.onResponseExceptionMsg)};e.success=f,e.success.call(e.scope)},failure:function(a){}})},remove:function(a,b){b=b||{};var c={},e=new d,f=this._createDeleteRequest(a,b),g=f.delete;return c.value=g.call(f,a,{success:this._onTransmitEntrySuccess.bind(this,e),failure:this._onRequestFailure.bind(this,e),aborted:this._onRequestAbort.bind(this,e)}),e},query:function(a,b){var c={},f=new d(this._onCancel.bind(this,c)),g=this._createFeedRequest(a,b||{});f.total=-1;var h={success:this._onRequestFeedSuccess.bind(this,f),failure:this._onRequestFailure.bind(this,f),aborted:this._onRequestAbort.bind(this,f),httpMethodOverride:b&&b.httpMethodOverride},i=g.read;if(this.executeQueryAs)i=g[this.executeQueryAs];else if(g instanceof Sage.SData.Client.SDataResourcePropertyRequest)i=g.readFeed;else if(g instanceof Sage.SData.Client.SDataServiceOperationRequest)return i=g.execute,c.value=i.call(g,this.entry,h),e(f);return c.value=i.call(g,h),e(f)},transaction:function(){},getChildren:function(){},getMetadata:function(a){return a?{id:this.getIdentity(a),label:this.getLabel(a),entity:this.getEntity(a),version:this.getVersion(a)}:null},getLabelAttributes:function(a){
return this.labelProperty?[this.labelProperty]:null},getValue:function(a,b,c){return h.getValue(a,b)},onSuccess:function(a,b){},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.dataCache.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},isDirty:function(a){},saveNewEntity:function(a,c,d,e){this.add(a).then(b.hitch(this,function(){c.call(e,a)}))},revert:function(){},save:function(a){},setValue:function(a,b,c){},setValues:function(a,b,c){},unsetAttribute:function(a,b){},onSet:function(a,b,c,d){},onNew:function(a){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/UI/ToolBarLabel":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.ToolBarLabel",[a,b],{label:"label",region:"leading",templateString:'<span class="dijitToolbarLabel"><span class="dijitReset dijitInline " dojoAttachPoint="containerNode"></span></span>',attributeMap:{label:{node:"containerNode",type:"innerHTML"}},_append:function(a){this.containerNode.innerHTML+=a},_setLabelAttr:function(a){this.containerNode.innerHTML=this.label=a}})})},"Sage/Utility/File":function(){define(["Sage/UI/Dialogs","dojo/number","dojo/_base/lang","dojo/i18n!./nls/File"],function(a,b,c,d){return Sage.namespace("Utility.File"),Sage.Utility.File={fileType:{ftAttachment:0,ftLibraryDocs:1},supportsHTML5File:window.File&&window.FileReader&&window.FileList&&window.Blob,fileUploadOptions:{maxFileSize:4e6},init:function(a){a&&(this.fileUploadOptions=a)},isFileSizeAllowed:function(b){for(var c=0,e=Sage.Utility.File.fileUploadOptions.maxFileSize,f=d.largeFileWarningTitle,g=d.largeFileWarningText,h=0;h<b.length;h++)0===b[h].size||(c+=b[h].size||b[h].blob.length);return!(c>e)||(a.showError(g,f),!1)},uploadFile:function(a,b,c,d,e,f,g){Sage.Utility.File.isFileSizeAllowed([a])&&(Sage.gears?this._uploadFileGears(a,b,c,d,e,f,g):this.supportsHTML5File?window.FileReader.prototype.readAsBinaryString||window.FileReader.prototype.readAsArrayBuffer?this._uploadFileHTML5_asBinary(a,b,c,d,e,f,g):this._uploadFileHTML5(a,b,c,d,e,f,g):this._showUnableToUploadError())},uploadFileHTML5:function(a,b,c,d,e,f,g){Sage.Utility.File.isFileSizeAllowed([a])&&(this.supportsHTML5File?window.FileReader.prototype.readAsBinaryString||window.FileReader.prototype.readAsArrayBuffer?this._uploadFileHTML5_asBinary(a,b,c,d,e,f,g):this._uploadFileHTML5(a,b,c,d,e,f,g):this._showUnableToUploadError())},_uploadFileGears:function(a,b,c,d,e,f,g){if(!window.Sage&&!Sage.gears)return void this._showUnableToUploadError();c&&c.call(f,null),b||(b="slxdata.ashx/slx/system/-/attachments/file?format=json");var h=Sage.gears.factory.create("beta.httprequest");h.open(g?"PUT":"POST",b);var i="---------------------------"+(new Date).getTime(),j="--",k="\r\n",l=Sage.gears.factory.create("beta.blobbuilder");l.append(j),l.append(i),l.append(k),l.append('Content-Disposition: attachment; name="file_"'),a.name&&l.append('; filename*="'+encodeURIComponent(a.name)+'"'),l.append(k),l.append("Content-Type: application/octet-stream"),l.append(k),l.append(k),l.append(a.blob),l.append(k),l.append(j),l.append(i),l.append(j),l.append(k),"function"==typeof d&&(h.onreadystatechange=function(){4===h.readyState&&(2!==Math.floor(h.status/100)?"function"==typeof e&&e.call(f||this,h):d.call(f||this,h))}),"function"==typeof c&&(h.upload.onprogress=function(a){c.call(f||this,a)}),h.setRequestHeader("Content-Type","multipart/attachment; boundary="+i);var m=l.getAsBlob();h.send(m)},_uploadFileHTML5:function(a,b,c,d,e,f,g){if(!this.supportsHTML5File||!window.FormData)return void this._showUnableToUploadError();c&&c.call(f,null),b||(b="slxdata.ashx/slx/system/-/attachments/file");var h=new FormData;h.append("file_",a,a.name);var i=new XMLHttpRequest;i.open(g?"PUT":"POST",b),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),d&&(i.onreadystatechange=function(){4===i.readyState&&(2!==Math.floor(i.status/100)?e&&e.call(f||this,i):d.call(f||this,i))}),c&&i.upload.addEventListener("progress",function(a){c.call(f||this,a)}),i.send(h)},_uploadFileHTML5_asBinary:function(a,b,d,e,f,g,h){if(!this.supportsHTML5File)return void this._showUnableToUploadError();d&&d.call(g,null),window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,b||(b="slxdata.ashx/slx/system/-/attachments/file");var i=new XMLHttpRequest;i.open(h?"PUT":"POST",b),i.setRequestHeader("X-Requested-With","XMLHttpRequest");var j=new FileReader;j.onload=c.hitch(this,function(b){var c,h,j,k,l,m,n,o;n=new FileReader;try{new Blob,l=[]}catch(a){l=new window.BlobBuilder,m=!0}var p=a.name.split("\\"),q=p[p.length-1];c=b.target.result,h="---------------------------"+(new Date).getTime(),j="--",k="\r\n",this._append(l,j+h+k),this._append(l,"Content-Disposition: attachment; "),this._append(l,'name="file_"; '),this._append(l,'filename*="'+encodeURIComponent(q)+'" '),this._append(l,k),this._append(l,"Content-Type: "+a.type),this._append(l,k+k),this._append(l,c),this._append(l,k),this._append(l,j+h+j+k),e&&(i.onreadystatechange=function(){4===i.readyState&&(2!==Math.floor(i.status/100)?f&&f.call(g||this,i):e.call(g||this,i))}),d&&i.upload.addEventListener("progress",function(a){d.call(g||this,a)}),i.setRequestHeader("Content-Type","multipart/attachment; boundary="+h),o=m?l.getBlob(a.type):new Blob(l),n.onload=function(a){i.send(a.target.result)};try{i.send(o)}catch(a){n.readAsArrayBuffer(o)}});try{j.readAsArrayBuffer(a)}catch(b){var k;if(void 0!==a.blob)if(a.blob.constructor==Array)k=new Blob([new Uint8Array(a.blob)],{type:"application/binary"}),j.readAsArrayBuffer(k);else if("undefined"!=typeof VBArray){var l=a.blob,m=new VBArray(l.getAsArray()).toArray();k=new Blob([new Uint8Array(m)],{type:"application/binary"}),j.readAsArrayBuffer(k)}}},_append:function(a,b){a&&a.constructor===Array?a.push(b):a.append(b)},_showUnableToUploadError:function(){a.showError(d.unableToUploadText)},formatFileSize:function(a){return a=parseInt(a,10),0===a?"0 KB":!a||a<0?d.unknownSizeText:a<1024?"1 KB":b.format(Math.round(a/1024),{locale:Sys.CultureInfo.CurrentCulture.name})+" KB"}},Sage.Utility.File})},"Sage/Utility/File/Attachment":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/File/DescriptionsForm","dojo/i18n","dojo/i18n!./nls/Attachment"],function(a,b,c,d,e,f,g,h,i){return Sage.namespace("Utility.File.Attachment"),Sage.Utility.File.Attachment={uploadingAttachments:"Uploading attachments",uploadCompleted:"Completed",uploadingPleaseWait:"Uploading, please wait...",uploadFailed:"Upload failed.",_store:!1,_totalProgress:0,_attachmentTemplate:!1,_mixinsByName:{},_files:[],_fileCount:0,_filesUploadedCount:0,_isUploading:!1,_descriptionsForm:!1,_uploadUrl:"slxdata.ashx/slx/system/-/attachments/file",createAttachments:function(a){var b="";if(Sage.Services.hasService("ClientEntityContext")){b=Sage.Services.getService("ClientEntityContext").getContext().Description||""}this._ensureDescriptionsForm(),this._descriptionsForm.set("entityDesc",b),this._descriptionsForm.set("files",a),this._descriptionsForm.show()},createAttachmentSilent:function(a,b){var c=a.name.split("\\"),d=c[c.length-1];b.hasOwnProperty("description")||(b.description=this.getDefaultDescription(d)),this._mixinsByName[d]=e.mixin(b,{attachDate:g.Convert.toIsoStringFromDate(new Date),dataType:"R"}),this._files.push(a),this._attachmentTemplate?this.uploadFiles():this.getAttachmentTemplate(this.uploadFiles,this)},handleDescriptions:function(a,b){this.getKnownRelationships(function(c){for(var d=e.mixin(c,{attachDate:g.Convert.toIsoStringFromDate(new Date),dataType:"R",user:{$key:g.getClientContextByKey("userID")||""}}),f=0;f<b.length;f++)b[f][""]="",this._mixinsByName[b[f].fileName]=e.mixin(b[f],d);for(f=0;f<a.length;f++)this._files.push(a[f]);this._attachmentTemplate?this.uploadFiles():this.getAttachmentTemplate(this.uploadFiles,this)},this)},uploadFiles:function(a){for(this._isUploading=!0,this._fileCount=this._files.length,a&&!this._attachmentTemplate&&(this._attachmentTemplate=a);this._files.length>0;){var b=this._files.pop();Sage.Utility.File.uploadFile(b,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this)}},_successUpload:function(c){var d=c.getResponseHeader("Location"),f=/\'\w+\'/g,g=d.match(f);if(g){var h=g[0].replace(/\'/g,""),i=new a({resourceKind:"attachments",service:b.getSDataService("system")});i.fetch({predicate:'"'+h+'"',onComplete:function(a){var b=this._mixinsByName[a.fileName];b&&(a=e.mixin(a,b),i.save({scope:this,success:this._successAddEntity,failure:this._failAdd})),delete this._mixinsByName[a.fileName]},beforeRequest:function(a){a.setQueryArg("_includeFile","false")},onError:this._failAdd,scope:this})}this._filesUploadedCount=this._filesUploadedCount+1,this._updateProgress(this._fileCount<1?100:this._filesUploadedCount/this._fileCount*100)},_successAddEntity:function(a){dojo.publish("/entity/attachment/create",a)},getAttachment:function(a){a&&12===a.length&&window.open("slxdata.ashx/slx/system/-/attachments('"+a+"')/file","file")},getAttachmentTemplate:function(a,b){c.Attachment._createStore(),c.Attachment._store.newItem({onComplete:a,scope:b||this})},getDefaultDescription:function(a){return this._ensureDescriptionsForm(),this._descriptionsForm.getDefaultDescription(a)},_createStore:function(){c.Attachment._store||(c.Attachment._store=new a({resourceKind:"attachments",service:b.getSDataService("system")}))},_updateProgress:function(a){var b=this._totalProgress;if(a&&a.lengthComputable){var c=a.loaded/a.total*100;b+=Math.round(c/this._fileCount)}else a&&(b=a);this._totalProgress=b,b<99?d.showProgressBar({pct:b,title:this.uploadingAttachments,message:this.uploadingPleaseWait,showmessage:!0}):(d.showProgressBar({pct:b,message:this.uploadCompleted,showmessage:!0}),this,window.setTimeout(function(){d.closeProgressBar()},1e3),this._resetCounts())},_resetCounts:function(){this._fileCount=0,this._filesUploadedCount=0,this._isUploading=!1,this._totalProgress=0},_failAdd:function(a){d.showProgressBar({title:this.uploadingAttachments,message:this.uploadFailed,showmessage:!0})},_successUpdate:function(a){dojo.publish("/entity/attachment/update",a)},_ensureDescriptionsForm:function(){this._descriptionsForm||(this._descriptionsForm=new h({entityDesc:"",files:this._files||[]}),dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions"))},getKnownRelationships:function(a,b,c){var d={};if(Sage.Services.hasService("ClientEntityContext")){var e=Sage.Services.getService("ClientEntityContext"),f=e.getContext(),g=f.EntityType.split("."),h=g[g.length-1];if(""!==f.EntityId){var i=f.EntityId;switch(h){case"IContact":return void this._getContactRelationships(i,a,b);case"IOpportunity":return void this._getOpportunityRelationships(i,a,b);case"ITicket":return void this._getTicketRelationships(i,a,b);case"ISalesOrder":return void this._getSalesOrderRelationships(i,a,b);case"IActivity":return void this._getActivityRelationships(i,a,b);case"IHistory":return void this._getHistoryRelationships(i,a,b);case"IContract":return void this._getContractRelationships(i,a,b);case"IReturn":return void this._getReturnRelationships(i,a,b)}return d[f.EntityTableName.toLowerCase()+"Id"]=i,void a.call(b||this,d)}if("IActivity"===h&&c)return void this._getInsertActivityRelationships(a,b);if("IHistory"===h&&c)return void this._getInsertHistoryRelationships(a,b)}a.call(b||this,{})},_getRequest:function(a,c){var d=new Sage.SData.Client.SDataSingleResourceRequest(b.getSDataService("dynamic"));return d.setResourceKind(a),d.setResourceSelector('"'+c+'"'),d.setQueryArg("precedence","0"),d},_getContactRelationships:function(a,b,c){var d=this._getRequest("contacts",a);d.setQueryArg("include","Account"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),contactId:a.$key};b.call(c||this,d)},failure:function(){b.call(c||this,{contactId:a})},scope:this})},_getOpportunityRelationships:function(a,b,c){var d=this._getRequest("opportunities",a);d.setQueryArg("include","Account,Contacts"),d.setQueryArg("select","Contacts/IsPrimary,Account/Id"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),opportunityId:a.$key},e="",f=a.Contacts.$resources;f.length>0&&(e=f[0].$key);for(var h=0;h<f.length;h++)f[h].IsPrimary&&(e=f[h].$key);d.contactId=e,b.call(c||this,d)},failure:function(){b.call(c||this,{opportunityId:a})},scope:this})},_getSalesOrderRelationships:function(a,b,c){var d=this._getRequest("salesorders",a);d.setQueryArg("include","Account"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),salesOrderId:a.$key};b.call(c||this,d)},failure:function(){b.call(c||this,{salesOrderId:a})},scope:this})},_getTicketRelationships:function(a,b,c){var d=this._getRequest("tickets",a);d.setQueryArg("include","Account,Contact"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),ticketId:a.$key,contactId:g.getValue(a,"Contact.$key")};b.call(c||this,d)},failure:function(){b.call(c||this,{ticketId:a})},scope:this})},_getReturnRelationships:function(a,b,c){var d=this._getRequest("returns",a);d.setQueryArg("include","Account,Contact,Ticket"),d.read({success:function(a){var d={returnId:a.$key,accountId:g.getValue(a,"Account.$key"),ticketId:g.getValue(a,"Ticket.$key"),contactId:g.getValue(a,"Contact.$key")};b.call(c||this,d)},failure:function(){b.call(c||this,{returnId:a})},scope:this})},_getActivityRelationships:function(a,b,c){var d=this._getRequest("activities",a);d.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId"),d.read({success:function(a){var d={accountId:g.getValue(a,"AccountId"),activityId:a.$key,contactId:g.getValue(a,"ContactId"),leadId:g.getValue(a,"LeadId"),opportunityId:g.getValue(a,"OpportunityId"),ticketId:g.getValue(a,"TicketId")};b.call(c||this,d)},failure:function(){b.call(c||this,{activityId:a})},scope:this})},_getInsertActivityRelationships:function(a,b){var c=dijit.byId("activityEditor");if(c){var d=c.getRelationshipsForAttachments();return void a.call(b||this,d)}a.call(b||this,{activityId:""})},_getHistoryRelationships:function(a,b,c){var d=this._getRequest("history",a);d.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId"),d.read({success:function(a){var d={accountId:g.getValue(a,"AccountId"),historyId:a.$key,contactId:g.getValue(a,"ContactId"),leadId:g.getValue(a,"LeadId"),opportunityId:g.getValue(a,"OpportunityId"),ticketId:g.getValue(a,"TicketId")};b.call(c||this,d)},failure:function(){b.call(c||this,{historyId:a})},scope:this})},_getInsertHistoryRelationships:function(a,b){var c=dijit.byId("historyEditor");if(c){var d=c.getRelationshipsForAttachments();return void a.call(b||this,d)}a.call(b||this,{historyId:""})},_getContractRelationships:function(a,b,c){var d=this._getRequest("contracts",a);d.setQueryArg("include","Account,Contact"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),contractId:a.$key,contactId:g.getValue(a,"Contact.$key")};b.call(c||this,d)},failure:function(){b.call(c||this,{ticketId:a})},scope:this})},remoteRequestAttachment:function(a){var c={$name:"RequestAttachment",request:{entity:{$key:a},AttachmentId:a}};new Sage.SData.Client.SDataServiceOperationRequest(b.getSDataService("system")).setResourceKind("attachments").setOperationName("RequestAttachment").execute(c,{success:function(a){dojo.publish("/entity/attachment/requested",a)}})}},Sage.Utility.File.Attachment=dojo.mixin(Sage.Utility.File.Attachment,i.getLocalization("Sage.Utility.File","Attachment")),Sage.Utility.File.Attachment})},"Sage/Utility/File/DescriptionsForm":function(){define(["Sage/Utility/File","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dijit/Dialog","dojo/i18n","dojo/i18n!./nls/DescriptionsForm","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.Utility.File.DescriptionsForm",[b,c],{fileType:a.fileType.ftAttachment,titleFmt:"Add Attachment(s) for ${0}",titleLibraryDoc:"Add Library Document(s)",fileNameText:"File name and size: ",descText:"Description:",okText:"OK",cancelText:"Cancel",entityDesc:"",_formParts:[],files:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" id="dlgFileDescriptions" title="" dojoAttachPoint="_dialog">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="3" style="width:580px">','<div dojoType="dijit.layout.ContentPane" label="" style="width:212px;"><label>{%= $.fileNameText %}</label></div>','<div dojoType="dijit.layout.ContentPane" label="" style="width:250px;"><label>{%= $.descText %}</label></div>',"</div>",'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="5" dojoAttachPoint="contentNode" style="min-height:150px;width:580px;max-height:250px;overflow:auto" >',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnOK" name="_btnOK" dojoAttachPoint="_btnOK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnCancel" name="_btnCancel" dojoAttachPoint="_btnCancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>',"</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,h),this.inherited(arguments)},show:function(){this.fileType!==a.fileType.ftLibraryDocs?this._dialog.set("title",e.substitute(this.titleFmt,[this.entityDesc])):this._dialog.set("title",this.titleLibraryDoc),this._dialog.show(),this._addFormParts()},_setEntityDescAttr:function(a){this.entityDesc=a},_getEntityDescAttr:function(){return this.entityDesc},_setFilesAttr:function(a){this.files=a},_getFilesAttr:function(){return this.files},_addFormParts:function(){for(var a=0;a<this.files.length;a++){var b=this.files[a],c=0;c=0===b.size?0:b.size||b.blob.length,0===c?c+="0 Bytes":c&&(c>1024?c=c>1048576?Math.round(c/1048576)+" MB":Math.round(c/1024)+" KB":c+=" Bytes");var d=new dijit.form.TextBox({id:"filename_"+a,value:b.name+"  ("+c+")",style:"min-width:250px;margin:0 0 5px 15px;",disabled:!0}),e=new dijit.form.TextBox({id:"desc_"+a,value:this.getDefaultDescription(b.name),style:"min-width:250px;margin:0 0 5px 20px;",maxLength:128,relFileName:b.name});this._formParts.push(d),this._formParts.push(e),this.contentNode.addChild(d),this.contentNode.addChild(e)}},_clearForm:function(){for(var a=this._formParts.length,b=a-1;b>-1;b--){var c=this._formParts[b];this.contentNode.removeChild(c),c.destroyRecursive(!1)}this._formParts=[]},_okClick:function(){for(var a=[],b=0;b<this._formParts.length;b++){var c=this._formParts[b];c.params.relFileName&&a.push({description:c.get("value")||this.getDefaultDescription(c.params.relFileName),fileName:c.params.relFileName})}this._clearForm(),this.onDescriptionsEntered(this.files,a),this._dialog.hide()},_cancelClick:function(){this._clearForm(),this._dialog.hide()},getDefaultDescription:function(a){var b=a.lastIndexOf(".");return-1!=b?a.substr(0,b):a},onDescriptionsEntered:function(a,b){}})})},"Sage/Utility/File/AttachmentPropertiesEditForm":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/UI/Dialogs","dojox/layout/TableContainer","Sage/UI/Controls/DateTimePicker","dijit/form/TextBox","dijit/form/Button","dojox/form/Uploader","dojo/i18n","dojo/i18n!./nls/AttachmentPropertiesEditForm","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return t("Sage.Utility.File.AttachmentPropertiesEditForm",[a,b],{attachmentId:"",widgetsInTemplate:!0,attachment:!1,_bindingMgr:!1,_store:!1,_tempFile:!1,_iframe:null,_showing:!1,_iframeId:"attachmentRePostIFrame",_uploadUrlFmt:"slxdata.ashx/slx/system/-/attachments('${0}')/file",widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" title="{%= $.editText %}" dojoAttachPoint="_dialog">','<iframe src="about:blank" style="width:0px;height:0px;border-width:0px;" name="{%= $._iframeId %}" id="{%= $._iframeId %}" dojoAttachPoint="_iframe" dojoAttachEvent="onload:_iframeLoad"></iframe>','<form method="post" enctype="multipart/form-data" action="{%= $._buildPostUrl() %}" target="{%= $._iframeId %}" dojoAttachPoint="_postForm", class="attachment-properties-form">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" dojoAttachPoint="_urlContainer">','<div dojoType="dijit.form.TextBox" label="{%= $.urlText %}" id="{%= $.id %}_tb_Url" dojoAttachPoint="tb_Url" ></div>',"</div>",'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" dojoAttachPoint="_fileNameContainer" >','<div dojoType="dijit.form.TextBox" label="{%= $.fileText %}" id="{%= $.id %}_tb_File" dojoAttachPoint="tb_File" ></div>',"</div>",'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" >','<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="128" ></div>','<div dojoType="dijit.form.TextBox" label="{%= $.sizeText %}" id="{%= $.id %}_tb_size" dojoAttachPoint="tb_size" disabled="true" shouldPublishMarkDirty="false"></div>','<div dojoType="Sage.UI.Controls.DateTimePicker" label="{%= $.attachDateText %}" id="{%= $.id %}_dtp_AttachDate" dojoAttachPoint="dtp_attachDate" displayDate="true" displayTime="true" disabled="true" shouldPublishMarkDirty="false"></div>','<div dojoType="dijit.form.TextBox" label="{%= $.attachedByText %}" id="{%= $.id %}_tb_attachedBy" dojoAttachPoint="tb_attachedBy" disabled="true" shouldPublishMarkDirty="false"></div>',"</div>",'<div class="general-dialog-actions">','<input dojoType="dojox.form.Uploader" multiple="false" label="{%= $.uploadFileText %}" type="file" name="file" dojoAttachEvent="onChange:_onNewFile" dojoAttachPoint="btn_FileSelect" class="uploadButton" ></input>',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnOK" name="_btnOK" dojoAttachPoint="_btnOK" dojoAttachEvent="onClick:_okClick" >{%= $.okText %}</div>','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnCancel" name="_btnCancel" dojoAttachPoint="_btnCancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>',"</div>",'<input type="hidden" name="X-HTTP-Method-Override" value="PUT" />',"</form>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,r.getLocalization("Sage.Utility.File","AttachmentPropertiesEditForm")),this.inherited(arguments)},show:function(){this._dialog.show(),this._dialog._standby||f.mixin(this._dialog,new e),this._showing=!0,this.attachment||this._dialog.showLoading()},hide:function(){this.attachmentId="",this.attachment=!1,this._tempFile=!1,this._dialog._standby&&this._dialog.hideLoading(),this._dialog.hide(),this._showing=!1},_buildPostUrl:function(){var a=[];return a.push(/https/i.test(window.location.protocol)?"https":"http"),a.push("://"),a.push(window.location.hostname),window.location.port&&80!==window.location.port&&a.push(":",window.location.port),a.push("/"),a.push(k.getVirtualDirectoryName()),a.push("/slxdata.ashx/slx/system/-/attachments"),this.attachment&&a.push('("'+this.attachment.$key+'")'),a.push("/file"),a.join("")},_iframeLoad:function(a){this._iframe.contentDocument&&this._iframe.contentDocument.URL.indexOf("attachments")>0&&(dojo.publish("/entity/attachment/update",""),this.hide())},_setAttachmentIdAttr:function(a){this.attachmentId=a,this.attachmentId&&""!==this.attachmentId&&this._loadData()},_getAttachmentIdAttr:function(){return this.attachmentId},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._store||(this._store=new g({include:["$descriptors"],resourceKind:"attachments",service:h.getSDataService("system")})),""!==this.attachmentId?(this._store.clearCache(),this._store.fetch({predicate:'"'+this.attachmentId+'"',onComplete:this._receiveAttachment,beforeRequest:function(a){a.setQueryArg("_includeFile","false")},onError:this._requestFail,scope:this})):l.showError("No attachment to edit")},_receiveAttachment:function(a){this._dialog._standby&&this._dialog.hideLoading(),this.attachment=a,this._ensureBindings(),this._bind(),this.attachment.url?(dojo.removeClass(this._urlContainer.domNode,"display-none"),dojo.addClass(this.btn_FileSelect.domNode,"display-none"),dojo.addClass(this._fileNameContainer.domNode,"display-none")):(dojo.addClass(this._urlContainer.domNode,"display-none"),dojo.removeClass(this.btn_FileSelect.domNode,"display-none"),dojo.removeClass(this._fileNameContainer.domNode,"display-none"))},_ensureBindings:function(){this._bindingMgr||(this._bindingMgr=new i({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_File,entityProperty:"fileName"},{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_size,entityProperty:"fileSize",_formatValueFromEntity:function(a){return Sage.Utility.File.formatFileSize(a)},twoWay:!1},{boundWidget:this.dtp_attachDate,entityProperty:"attachDate",dataType:"date",twoWay:!1},{boundWidget:this.tb_Url,entityProperty:"url"},{boundWidget:this.tb_attachedBy,entityProperty:"user.$descriptor",twoWay:!1}]}))},_bind:function(){this._bindingMgr.boundEntity&&this.attachment.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this.attachment)},_onNewFile:function(){var a=this.btn_FileSelect._files;a&&a.length>0&&(this.tb_File.set("value",a[0].name),this._tempFile=a[0]),this.tb_Description.focus()},_uploadNewFile:function(a){if(a){var b=c.substitute(this._uploadUrlFmt,[this.attachment.$key]);j.uploadFileHTML5(a,b,!1,this._newFileUploaded,this._requestFail,this,!0)}},_newFileUploaded:function(){this._tempFile=!1,dojo.publish("/entity/attachment/update",this.attachment),this.hide()},_okClick:function(){this._dialog._standby&&this._dialog.showLoading(),this._saveAndHide()},_saveAndHide:function(){this._dialog._standby&&this._dialog.showLoading();var a=this;if(!j.supportsHTML5File&&!Sage.gears&&this._tempFile)return this._store._okToCache=!1,this._postForm.action=this._buildPostUrl(),this._postForm.submit(),void window.setTimeout(function(){a._showing&&(dojo.publish("/entity/attachment/update",""),a.hide())},5e3);window.setTimeout(function(){a._saveAttachment()},10)},_saveAttachment:function(){this._store.save({scope:this,success:function(a){this._tempFile||(dojo.publish("/entity/attachment/update",a),this._dialog.hide())},failure:this._requestFail}),this._tempFile&&this._uploadNewFile(this._tempFile)},_cancelClick:function(){this.hide()},_requestFail:function(a){l.showError(this.requestFailedMsg),this.hide()}})})},"Sage/UI/Controls/DateTimePicker":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/fx","dojo/date/locale","dijit/_Widget","dijit/form/TimeTextBox","Sage/UI/Calendar","Sage/Utility","dijit/TooltipDialog","dijit/_base/popup","dijit/form/ComboBox","dijit/focus","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DateTimePicker","dojo/json","dojo/_base/lang","dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom-construct","Sage/Utility/_LocalStorageMixin","dojo/text!./templates/DateTimePicker.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x;return x=s("Sage.UI.Controls.DateTimePicker.TimeZoneDataLoader",u,{_requests:[],_requestingData:!1,_tzData:!1,_storageNamespace:"DateTimePickerTZ",constructor:function(){this._requests=[],this._requestingData=!1,this._tzData=!1},requestTimeZones:function(a,b){if(!this._tzData){var c=this.getFromLocalStorage(this._storageNamespace,this._storageNamespace);if(!c)return this._requests.push({fn:a,scope:b||this}),void(this._requestingData||(dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:p.hitch(this,this._receiveData),error:function(a){}}),this._requestingData=!0));this._tzData=o.parse(c)}a.call(b||this,this._tzData)},_receiveData:function(a){this.saveToLocalStorage(this._storageNamespace,o.stringify(a),this._storageNamespace),this._tzData=a;for(var b=this._requests.length,c=0;c<b;c++){var d=this._requests.pop();d.fn.call(d.scope,a)}}}),w=s("Sage.UI.Controls._DateTimePickerMenu",[e,a,b],{templateString:v,widgetsInTemplate:!0,textAlign:"left",okText:"",cancelText:"",convertText:"",calculatorText:"",timeZoneSourceText:"",timeZoneDestText:"",id:"dateTimePickerMenu",dir:"",_messages:null,_started:!1,_timezonesLoaded:!1,_timezonesVisible:!1,displayTime:!1,constructor:function(a){p.mixin(this,n),this.inherited(arguments)},startup:function(){this._started=!0,this._messages=[],"function"==typeof this.focus&&this.focus(),this.inherited(arguments)},uninitialize:function(){this.dateNode.destroy(!1),this.timeZoneSourceComboNode.destroy(!1),this.timeZoneDestComboNode.destroy(!1),this.timeZoneConvertButtonNode.destroy(!1),this.timeNode.destroy(!1),this.OKButtonNode.destroy(!1),this.CancelButtonNode.destroy(!1),this.inherited(arguments)},_getUTCDate:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())},_okClicked:function(a){this.onExecute(),this.onOKClicked()},onOKClicked:function(){},_onCalendarBlur:function(){this.calendarBlur()},calendarBlur:function(){},_onValueSelected:function(){this.displayTime||(this.calendarDateSelected(),this.onExecute())},calendarDateSelected:function(){},_cancelClicked:function(){this.onCancel(),this.onCancelClicked()},onFocusOut:function(){this.onExecute()},onCancelClicked:function(){},onCancel:function(){},onExecute:function(){},_hideTimeNode:function(){this._hideNode(this.timeZoneContainer)},_hideDateNode:function(){this._hideNode(this.dateContainer)},_showTimeNode:function(){this._showNode(this.timeZoneContainer)},_showDateNode:function(){this._showNode(this.dateContainer)},_hideNode:function(a){dojo.style(a,"visibility","hidden"),dojo.style(a,"display","none")},_showNode:function(a){dojo.style(a,"visibility","visible"),dojo.style(a,"display","block")},_convertClicked:function(){if(this._timezonesLoaded){var a=this,b=this.dateNode.get("value"),c=this.timeNode.get("value"),d=this.timeZoneSourceComboNode.get("value"),e=this.timeZoneDestComboNode.get("value"),f="";b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),f=b.toLocaleString(),d&&e&&dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/timezones/convertTimeFormatted?timezoneNameSource=${0}&timezoneNameDest=${1}&date=${2}&getFormatted=${3}",[escape(d),escape(e),f,"false"]),handleAs:"json",load:function(b){a.convertResultsNode.innerHTML=b},error:function(a){}})}},processTimeZones:function(a){var b=[],c=h.getClientContextByKey("userTimeZone");q.forEach(a,function(a){a.Displayname&&a.Keyname&&b.push({id:a.Keyname,text:a.Displayname,offsetHours:a.OffsetHours,offsetMinutes:a.OffsetMinutes})}),this.storeData={label:"text",identifier:"id",items:b},this.timeZoneStore=new m({data:this.storeData});var d=this;this.timeZoneSourceComboNode.set("store",this.timeZoneStore),this.timeZoneSourceComboNode.set("searchAttr","text"),this.timeZoneSourceComboNode.store.fetch({query:{text:c},onComplete:function(a){d.timeZoneSourceComboNode.setAttribute("item",a[0])}}),this.timeZoneDestComboNode.set("store",this.timeZoneStore),this.timeZoneDestComboNode.set("searchAttr","text")},loadTimeZones:function(){if(!this._timezonesLoaded){this._timezonesLoaded=!0;(new x).requestTimeZones(this.processTimeZones,this)}}}),s("Sage.UI.Controls.DateTimePicker",[k],{id:"dateTimePicker",
buttonToolTip:"Calendar",toolTip:"",displayDate:!0,displayTime:!0,initialDate:null,initialTime:null,initialTextValue:"",dateFormat:"",timeZoneStore:null,storeData:null,dropDown:!1,_opened:!1,readOnly:!1,enabled:!0,required:!1,renderAsHyperlink:!1,shouldPublishMarkDirty:!0,handles:null,store:null,dateOnlyHanlde:null,documentClickHandle:null,dropdownIconClicked:!1,popupElements:null,minDate:null,cssClass:"",constructor:function(a){this.buttonToolTip=n.buttonToolTip,this.handles=[],this.documentClickHandle=[],this.dateOnlyHanlde=[],this.store={},a.cssClass&&(this.cssClass=a.cssClass),this.inherited(arguments)},postCreate:function(){this.cssClass&&this.cssClass.length>0&&(this.domNode.className=this.cssClass+" "+this.domNode.className)},_onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this._updateHiddenFields()},_onFocusChange:function(){this._updateHiddenFields()},_updateHiddenFields:function(){var a,b,c,d;(a=dojo.byId(this.id))&&(c=a.children[0],b=a.children[1],c&&b&&(d=this.getValueForASPNET(),b.value=d,""===d&&(c.value=""),b.onchange&&b.onchange()))},uninitialize:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments),this.dropDown=new w({id:this.id+"_Popout",displayTime:this.displayTime}),this.handles.push(this.connect(this,"onChange",this._onChanged)),this.handles.push(dojo.connect(this.dropDown,"onOKClicked",this,"_displayCurrentValue")),this.handles.push(dojo.connect(this.focusNode,"onkeyup",this,"_onFocusKeyUp",!0)),this.handles.push(dojo.connect(this.focusNode,"onblur",this,"_onFocusBlur",!0)),this.handles.push(dojo.connect(this.focusNode,"onchange",this,"_onFocusChange",!0)),this.focusNode.value=this.initialTextValue;var a=h.Convert.toDateFromString(this.initialDate)||new Date,b=h.Convert.toDateFromString(this.initialTime)||new Date;this.dropDown.dateNode.set("value",a.toDateString()),this.dropDown.timeNode.set("value",b),this.displayDate?this.dropDown._showDateNode():this.dropDown._hideDateNode(),this.displayTime?this.dropDown._showTimeNode():(this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue")),this.dropDown._hideTimeNode());var c=[],d=function(a){if(a&&a.children&&a.children.length>0)for(var b=0;b<a.children.length;b++)a.children[b]&&c.push(a.children[b]),d(a.children[b]);return c};this.popupElements=d(this.dropDown.domNode),this.popupElements.push(this.dropDown.domNode),this.popupElements.push(this._buttonNode.parentNode),this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick")),this._setupRenderAsHyperlink(),this._setupDropDownIcon()},_documentOnClick:function(a){var b=a||window.event,c=b.target||b.srcElement;3==b.target.nodeType&&(c=b.target.parentNode);var d=function(a,b){return dojo.indexOf(a,b)>-1||!!b.parentNode&&d(a,b.parentNode)};c&&c.className&&(c.className.indexOf("dijitTimePickerItemInner")>-1||c.className.indexOf("dijitCalendarMonthLabel")>-1)||c&&c.id&&(c.id.indexOf("_Popout-TzSelectSource_popup")>-1||c.id.indexOf("_Popout-TzSelectDest_popup")>-1)?(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation(),b.preventDefault=!0):(this.dropDown&&this.dropDown.timeNode&&this.dropDown.timeNode.dropDown&&-1==dojo.indexOf(this.popupElements,this.dropDown.timeNode.dropDown.domNode)&&this.popupElements.push(this.dropDown.timeNode.dropDown.domNode),d(this.popupElements,c)?(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation(),b.preventDefault=!0):this.closeDropDown())},_setupDropDownIcon:function(){this.renderAsHyperlink||(t.create("div",{class:"Global_Images icon16x16 icon_Calendar_16x16",title:this.buttonToolTip,tabIndex:0},this._buttonNode,"only"),dojo.addClass(this._buttonNode,"smCalendarIconTxtBox"),this.handles.push(this.connect(this._buttonNode,"ondijitclick",function(){this.displayTime?dojo.style(this.dropDown.domNode,"height","266px"):dojo.style(this.dropDown.domNode,"height","226px"),this.dropdownIconClicked||(this.openDropDown(),this.dropdownIconClicked=!0)})))},_displayCurrentValue:function(){if(this._started){var a,b=this.getDateValue(),c=this.getTimeValue(),e={fullYear:!0};if(b){if(b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),b.setSeconds(c.getSeconds()),this.displayDate&&this.displayTime?e.selector="date and time":this.displayDate?e.selector="date":this.displayTime&&(e.selector="time"),e.locale=Sys.CultureInfo.CurrentCulture.name,a=d.format(b,e),this.renderAsHyperlink){dojo.byId(this.id+"-Link").innerHTML=a}else this.focusNode.value=a;this.value.getTime&&this.value.getTime()===b.getTime()||(this.value=b,this.onChange(b))}}},_setupRenderAsHyperlink:function(){if(this.renderAsHyperlink){dojo.style(this.domNode,"border","none");var a=dojo.create("a",{id:this.id+"-Link",innerHTML:this.focusNode.value},this.domNode,"only");dojo.style(a,"cursor","pointer"),this.handles.push(dojo.connect(a,"onclick",this,function(){this.displayTime?dojo.style(this.dropDown.domNode,"height","266px"):dojo.style(this.dropDown.domNode,"height","226px"),this.openDropDown()}))}},loadDropDown:function(){},isLoaded:function(){return!0},_setBlurValue:function(){},closeDropDown:function(){j.close(this.dropDown),this._opened=!1,this.dropdownIconClicked=!1,dojo.forEach(this.documentClickHandle,function(a){dojo.disconnect(a)})},_openResultList:function(){},_showResultList:function(){},_onBlur:function(){},triggerOnFocusBlur:function(a){this._validateInputDate(a)},_validateInputDate:function(a){if(!this._opened&&!this.readOnly&&this.dropDown&&""!==this.focusNode.value){var b=this.focusNode.value;if(b===this.initialTextValue)return;var c=null,d="date";b.indexOf(":")>0&&(d="datetime",b=new Date(b).toLocaleString().replace(/:\d{2}\s/," ")),a=a||Sys.CultureInfo.CurrentCulture.name||r.locale,c=dojo.date.locale.parse(b,{selector:d,locale:a}),this.dropDown&&null!==c&&!1===isNaN(c.getDate())&&c.getFullYear()>=(new Date).getFullYear()-259&&(this.dropDown.dateNode.set("value",c),this.dropDown.timeNode.set("value",c)),this.dropDown.onOKClicked()}},_onFocusBlur:function(){this._validateInputDate(),this._opened&&l.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0])},_onFocusKeyUp:function(a){},_onKey:function(a){},openDropDown:function(){this._opened=!0;var a=this;if(j.open({popup:this.dropDown,around:this.domNode,onExecute:function(){a.closeDropDown(),l.focus(a.focusNode)},onCancel:function(){a.closeDropDown(),l.focus(a.focusNode)},onClose:function(){}}),this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick")),this.displayTime&&this.dropDown.loadTimeZones(),"undefined"!==this.dropDown.dateNode._selectedCells&&0===this.dropDown.dateNode._selectedCells.length){var b=this.getDateValue();this.dropDown.dateNode._markSelectedDates([b])}l.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0]),j._stack[0].handlers[0].remove()},_getUTCDate:function(a){return this.dropDown._getUTCDate(a)},getDateValue:function(){return this.dropDown.dateNode.get("value")},getTimeValue:function(){var a=this.dropDown.timeNode.get("value")||new Date(Date.now());return a&&a.setSeconds(this.dropDown.timeNode.seconds||0),a},getMinDate:function(){return this.minDate=Sage.Utility.Activity.formatDateAdd(new Date,"year",-259),this.minDate},_getValueAttr:function(){var a=this.getDateValue(),b=this.getTimeValue();return a.setHours(b.getHours()),a.setMinutes(b.getMinutes()),a.setSeconds(b.getSeconds()),a},_setValueAttr:function(a){a&&a.toDateString&&(this.dropDown&&(this.dropDown.dateNode.set("value",a),this.dropDown.timeNode.set("value",a),this.dropDown.timeNode.seconds=a.getSeconds(),this._displayCurrentValue()),this.value.getTime&&this.value.getTime()===a.getTime()||(this.value=a,this.onChange(a)))},_setDisplayDateAttr:function(a){this.displayDate=a,this._displayCurrentValue(),this.dropDown&&(this.displayDate?this.dropDown._showDateNode():this.dropDown._hideDateNode())},_getDisplayDateAttr:function(){return this.displayDate},_setToolTipAttr:function(a){a&&""!==a&&this.set("title",a)},_getToolTipAttr:function(){return this.toolTip},_setDisabledAttr:function(a){a?(dojo.style(this._buttonNode,"visibility","hidden"),dojo.style(this._buttonNode,"display","none")):(dojo.style(this._buttonNode,"visibility",""),dojo.style(this._buttonNode,"display","")),this.inherited(arguments)},_setReadOnlyAttr:function(a){a&&(dojo.style(this._buttonNode,"visibility","hidden"),dojo.style(this._buttonNode,"display","none")),this.inherited(arguments)},_setDisplayTimeAttr:function(a){this.displayTime=a,this._displayCurrentValue(),this.dropDown&&(this.displayDate?this.dropDown._showDateNode():this.dropDown._hideDateNode(),dojo.forEach(this.dateOnlyHanlde,function(a){dojo.disconnect(a)}),this.displayTime?(this.dropDown.displayTime=!0,this.dropDown._showTimeNode()):(this.dropDown.displayTime=!1,this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue")),this.dropDown._hideTimeNode()))},_getDisplayTimeAttr:function(){return this.displayTime},getValueForASPNET:function(){if(""===this.focusNode.value)return"";var a=[],b=this.getDateValue();a.push(b.getFullYear()),a.push(b.getMonth()+1),a.push(b.getDate());var c=this.getTimeValue();return a.push(c.getHours()),a.push(c.getMinutes()),a.join(",")},destroy:function(){dojo.forEach(dijit.findWidgets(this.domNode),function(a){a.destroy(!1)}),dojo.forEach(this.handles,function(a){dojo.disconnect(a)}),this.inherited(arguments)},fmtDateForASPNET:function(){var a=this.getDateValue(),b=this.getTimeValue(),c=(a.getFullYear(),a.getMonth()+1),d=a.getDate(),e=b.getHours(),f=b.getMinutes(),g="";if(this.displayDate){var h=this.getDivChar(),i=c,j=d;"MM"==this.dateFormat.substring(0,1).toUpperCase()&&(i=i<10?"0"+i:i),"DD"==this.dateFormat.substring(0,1).toUpperCase&&(j=j<10?"0"+j:j),"M"!=this.dateFormat.substring(0,1)&&"m"!=this.dateFormat.substring(0,1)||(g=i+h+j+h+a.getFullYear()),"D"!=this.dateFormat.substring(0,1)&&"d"!=this.dateFormat.substring(0,1)||(g=j+h+i+h+a.getFullYear()),"Y"!=this.dateFormat.substring(0,1)&&"y"!=this.dateFormat.substring(0,1)||(g=a.getFullYear()+h+i+h+j),this.displayTime&&(g+=" ")}if(this.displayTime){var k=this.getTimeDivChar(),l=e,m=f;if(m<10&&(m="0"+m),this.dateFormat.indexOf("H")>-1)g+=l+k+m;else if(this.dateFormat.indexOf("h")>-1){var n=e;0===this.Hours&&(n="12");var o="AM";e>=12&&(e>12&&(n=e-12),o="PM"),g+=n+k+m+" "+o}else g+=b.toLocaleTimeString()}return g},getDivChar:function(){for(var a="",b=0;b<this.dateFormat.length;b++)if(isNaN(this.dateFormat.charAt(b))&&(this.dateFormat.charAt(b)<"A"||this.dateFormat.charAt(b)>"Z")&&(this.dateFormat.charAt(b)<"a"||this.dateFormat.charAt(b)>"z")){a=this.dateFormat.charAt(b);break}return a},getTimeDivChar:function(){if(this.displayTime){var a=this.dateFormat.split(" ");if(a.length>1)for(var b=a[1],c=0;c<b.length;c++)if(isNaN(b.charAt(c))&&(b.charAt(c)<"A"||b.charAt(c)>"Z")&&(b.charAt(c)<"a"||b.charAt(c)>"z"))return b.charAt(c)}return":"}})})},"Sage/UI/Calendar":function(){define(["dijit/Calendar","dojo/_base/declare"],function(a,b){return b("Sage.UI.Calendar",a,{_dateModifiedExternal:!1,displayMode:"",constructor:function(a){this.displayMode=a.displayMode;var b=this;this.lang=Sys.CultureInfo.CurrentCulture.name,"popup"===this.displayMode?dojo.connect(this,"_setValueAttr",function(a,c){a&&(a=new b.dateClassObj(a)),b._isValidDate(a)?(a.setHours(1,0,0,0),b.isDisabledDate(a,b.lang)||(b._set("value",a),b.monthWidget&&b.monthWidget.dropDown&&b.set("currentFocus",a),(c||void 0===c)&&b.onChange(b.get("value")))):(b._set("value",null),b.set("currentFocus",b.currentFocus))}):(dojo.subscribe("/entity/activity/calendar/schedulerDateChanged",function(a){!function(){b._dateModifiedExternal=!0,b.set("value",a.date),b._dateModifiedExternal=!1}()}),dojo.connect(this,"_setCurrentFocusAttr",function(a){var c=b._setCurrentFocusAttr;b._setCurrentFocusAttr=function(){},b.set("value",a),b._setCurrentFocusAttr=c})),this.inherited(arguments)},onValueSelected:function(a){"popup"!=this.displayMode&&(this._dateModifiedExternal||(this._dateModifiedExternal=!1,dojo.publish("/entity/activity/calendar/navigationCalendarDateChanged",[a,this]),this._dateModifiedExternal=!1))},getClassForDate:function(a){var b=a.getDay();if(6===b||0===b)return"dijitCalendarWeekEndDate"}})})},"Sage/Utility/File/FallbackFilePicker":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Dialog","require","dojo/string","Sage/UI/Dialogs","Sage/Utility","Sage/Utility/ErrorHandler","Sage/Utility/File","Sage/Utility/File/Attachment","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","dojo/i18n","dojo/i18n!./nls/FallbackFilePicker","dojo/text!./templates/FallbackFilePicker_Attachment.html","dojo/text!./templates/FallbackFilePicker_LibraryDoc.html","dojo/_base/array","dojo/_base/declare","dojo/has"],function(_Widget,_Templated,Dialog,require,dString,Dialogs,sageUtility,ErrorHandler,File,attachmentUtility,dojoLang,_DialogLoadingMixin,i18n,nlsBundle,attachmentTemplate,libraryDocTemplate,array,declare,has){var filePicker=declare("Sage.Utility.File.FallbackFilePicker",[_Widget,_Templated],{addLibraryFileText:"Add Library File",attachFileText:"Attach File",descriptionText:"Description",uploadFileText:"Select File",okText:"OK",cancelText:"Cancel",_iframeId:"attachmentPostIFrame",_hiddenFields:["_attachDate","_accountId","_activityId","_contactId","_contractId","_defectId","_historyId","_leadId","_opportunityId","_productId","_returnId","_salesOrderId","_ticketId","_userId"],_showing:!1,fileType:File.fileType.ftAttachment,widgetsInTemplate:!0,id:"fallbackFilePicker",widgetTemplate:null,constructor:function(a){this.inherited(arguments),a&&"object"==typeof a&&dojo.mixin(this,a)},destroy:function(){this._dialog&&this._dialog.destroyRecursive(),this.inherited(arguments)},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","FallbackFilePicker")),this.inherited(arguments),this.fileType!=File.fileType.ftLibraryDocs?this.widgetTemplate=new Simplate(eval(attachmentTemplate)):this.widgetTemplate=new Simplate(eval(libraryDocTemplate))},show:function(){this._postForm&&this._postForm.reset(),this._dialog.show(),this.fileType!=File.fileType.ftLibraryDocs&&attachmentUtility.getKnownRelationships(this._receiveRelationships,this,!0),has("ie")<9&&(this._iframe.attachEvent("onload",this._iframeLoad),window.FallbackFilePicker=this),this._showing=!0},hide:function(){this._dialog.hide()},_onHide:function(){if(this._dialog._standby&&this._dialog.hideLoading(),this.fileType!=File.fileType.ftLibraryDocs)for(var a=0;a<this._hiddenFields.length;a++)this._hiddenFields[a]&&(this[this._hiddenFields[a]].value="");this.tb_Description.set("value",""),this.tb_realFileName.set("value",""),this._showing=!1},_receiveRelationships:function(a){if(this.fileType!=File.fileType.ftLibraryDocs){for(var b in a)this["_"+b]?this["_"+b].value=a[b]:b&&(this["_"+b]=dojo.create("input",{type:"hidden",name:b,value:a[b]},this._postForm),this._hiddenFields.push("_"+b));this._userId.value=sageUtility.getClientContextByKey("userID")||"",this._attachDate.value=sageUtility.Convert.toIsoStringFromDate(new Date)}},_buildPostUrl:function(){var a=[];if(a.push(/https/i.test(window.location.protocol)?"https":"http"),a.push("://"),a.push(window.location.hostname),window.location.port&&80!==window.location.port&&a.push(":",window.location.port),a.push("/"),a.push(sageUtility.getVirtualDirectoryName()),this.fileType!=File.fileType.ftLibraryDocs)a.push("/slxdata.ashx/slx/system/-/attachments/file?iframe=true&format=xml");else{if(!Sage.Library||!Sage.Library.Manager||!Sage.Library.FileHandler)return Dialogs.showError(this.invalidContext),null;var b=Sage.Library.FileHandler.findDirectoryId(),c=dString.substitute("/slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file?iframe=true&format=xml",[b]);a.push(c)}return a.join("")},_iframeLoad:function(a){var b;b=has("ie")<9?window.FallbackFilePicker:this;var c=b._iframe;if(c.contentDocument.body&&c.contentDocument.body.innerText&&"RuntimeErrorPostTooLarge"==c.contentDocument.body.innerText)return b.hide(),void Dialogs.showError(b.fileTooLargeError);try{var d=function(a){if(a&&a.hasOwnProperty("message")){var c=a.message;if(a.hasOwnProperty("applicationCode")&&ErrorHandler.isSDataExceptionDiagnoses(a.applicationCode)){var d=function(){var b={},c=a.applicationCode.split("; ");return array.forEach(c,function(a){if(a&&dojo.isString(a)&&-1!==a.indexOf("=")){var c=a.split("="),d=c[0].trim(),e=c[1].trim();b[d]=e}}),b},e=d();e&&e.hasOwnProperty("slxErrorId")&&(c+="<br /><br />",c+=b.slxErrorIdInfo+e.slxErrorId)}Dialogs.showError(c)}};if(has("ie")){var e={};if(has("ie")<9){var f=c.contentDocument.body?c.contentDocument.body.innerText:null;if(f&&dojo.isString(f)){f=f.trim();var g=f.split("\n");dojo.isArray(g)&&(array.forEach(g,function(a,b){var c=a.indexOf("- ");0===c?g[b]=a.replace("- ",""):0===(c=a.indexOf("  "))&&(g[b]=a.replace("  ",""))}),f=g.join(""),e=ErrorHandler.getSDataDiagnosis(f,!0),d(e))}}else if(c.contentDocument.documentElement&&c.contentDocument.documentElement.childNodes.length>=2&&"sdata:diagnosis"===c.contentDocument.documentElement.childNodes[1].tagName){for(var h=c.contentDocument.documentElement.childNodes[1],i=0;i<h.childNodes.length;i++){var j=h.childNodes[i];0===j.nodeName.indexOf("sdata:")&&(e[j.nodeName.replace("sdata:","")]=j.textContent)}d(e)}}}catch(a){}c.contentDocument.URL&&void 0!==c.contentDocument.URL&&(b.fileType!=File.fileType.ftLibraryDocs?c.contentDocument.URL.indexOf("attachments")>0&&(dojo.publish("/entity/attachment/create",""),b.hide()):c.contentDocument.URL.indexOf("/documents/file")>0&&(dojo.publish("/sage/library/manager/libraryDocuments/refresh",null),b.hide()))},_onNewFile:function(a){if(a.srcElement&&a.srcElement.value.length>0&&a.srcElement.value){var b=a.srcElement.value.replace(/^.*[\\\/]/,"");if(""===this.tb_Description.get("value")){var c=b.split("."),d="";if(c.length<=2)d=c[0];else for(var e=0;e<c.length-1;e++)e>0&&(d+="."),d+=c[e];this.tb_Description.set("value",d)}this.tb_realFileName.set("value",b)}},_okClick:function(){if(""===this.tb_realFileName.get("value"))return void Dialogs.showInfo(this.pleaseSelectFile);this.fileType===File.fileType.ftLibraryDocs&&(this._postForm.action=this._buildPostUrl()),this._postForm.submit(),this._dialog._standby||dojoLang.mixin(this._dialog,new _DialogLoadingMixin),this._dialog.showLoading()},_cancelClick:function(){this.hide()}});return filePicker})},"Sage/Utility/File/AddURLAttachment":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/Dialogs","dojo/i18n","dojo/i18n!./nls/AddURLAttachment","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return p("Sage.Utility.File.AddURLAttachment",[a,b],{descriptionText:"Description",urlText:"URL",titleText:"Add URL Attachment",okText:"OK",cancelText:"Cancel",requestFailedMsg:"The requested operation could not be completed, please try again later.",urlBlankMsg:"The URL or description property cannot be blank.",attachmentId:"",attachment:!1,widgetsInTemplate:!0,_bindingMgr:!1,_store:!1,id:"",widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" id="addUrlAttachDialog" title="{%= $.titleText %}" dojoAttachPoint="_dialog">','<div  class="attachment-properties-form">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" >','<div dojoType="dijit.form.TextBox" label="{%= $.urlText %}" id="{%= $.id %}_tb_Url" dojoAttachPoint="tb_Url" ></div>','<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="128" ></div>',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnOK" name="_btnOK" dojoAttachPoint="_btnOK" dojoAttachEvent="onClick:_okClick" >{%= $.okText %}</div>','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnCancel" name="_btnCancel" dojoAttachPoint="_btnCancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>',"</div>","</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,n.getLocalization("Sage.Utility.File","AddURLAttachment")),this.inherited(arguments)},show:function(){this._dialog.show(),this._dialog._standby||f.mixin(this._dialog,new e),this._loadData()},hide:function(){this.attachmentId="",this.attachment=!1,this._dialog._standby&&this._dialog.hideLoading(),this._dialog.hide()},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._store||(this._store=new g({include:[],resourceKind:"attachments",service:h.getService("system")})),this._store.newItem({onComplete:this._receiveAttachment,onError:this._requestFail,scope:this})},_receiveAttachment:function(a){this._dialog._standby&&this._dialog.hideLoading(),this.attachment=a,l.getKnownRelationships(this._receiveRelationships,this)},_ensureBindings:function(){this._bindingMgr||(this._bindingMgr=new i({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_Url,entityProperty:"url",onChange:dojo.hitch(this,this._urlChange)}]}))},_bind:function(){this._bindingMgr.boundEntity&&this.attachment.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this.attachment),this._dialog._standby&&this._dialog.hideLoading()},_receiveRelationships:function(a){this.attachment=f.mixin(this.attachment,a),this.attachment.user={$key:k.getClientContextByKey("userID")||""},this.attachment.attachDate=k.Convert.toIsoStringFromDate(new Date),this._ensureBindings(),this._bind()},_urlChange:function(){if(!this.tb_Description.get("value")){var a=this.tb_Url.get("value");if(a){var b=new RegExp(/\.([\w]*)/),c=b.exec(a);c.length>1&&this.tb_Description.set("value",c[1])}}},_cancelClick:function(){this.hide()},_okClick:function(){return this._dialog._standby&&this._dialog.showLoading(),null===this.attachment.url||""===this.attachment.url.trim()?void m.showError(this.urlBlankMsg):null===this.attachment.description||""===this.attachment.description.trim()?void m.showError(this.urlBlankMsg):void this._saveAndHide()},_saveAndHide:function(){this._dialog._standby&&this._dialog.showLoading();var a=this;window.setTimeout(function(){var b=a.attachment;a._store.saveNewEntity(b,function(a){dojo.publish("/entity/attachment/create",a),this.hide()},a._requestFail,a)},10)},_requestFail:function(a){m.showError(this.requestFailedMsg),this.hide()}})})},"Sage/Utility/File/GoogleDocPicker":function(){define(["dijit/_Widget","dijit/tree/TreeStoreModel","dijit/Dialog","dijit/Tree","dojo/window","dojo/data/ItemFileReadStore","dojo/i18n!./nls/GoogleDocPicker","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){var i=h("Sage.Utility.File.GoogleAuthModule",null,{couldNotOpenWindowMsg:"Could not open authentication window - please check your popup blocker settings.",scope:"",authUrl:"",constructor:function(a){this.scope=a.authUrl,dojo.mixin(this,a),dojo.mixin(this,g)},login:function(){var a=this;this._loadGoogleLibrary(function(){google.load("gdata","2.0",{callback:function(){if(google.gdata.onLoad(),google.accounts.user.checkLogin(a.authUrl))a.onLoggedIn();else{window.googleAuthModule=a;var b=window.open("GoogleAuth.aspx","_blank");setTimeout(function(){var c=!1;void 0===b?c=!0:b&&b.closed?c=!1:b&&!b.outerHeight&&(c=!0),c&&alert(a.couldNotOpenWindowMsg)},3e3)}}})})},logout:function(){google.accounts.user.checkLogin(this.authUrl)&&google.accounts.user.logout()},onLoggedIn:function(){},_loadGoogleLibrary:function(a){if("undefined"!=typeof google)a();else{var b="googleCallback_"+String(Math.random()).replace(/^0\./,"");window[b]=a;var c=document.createElement("script");c.src="https://www.google.com/jsapi?callback="+b,c.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(c)}}});return h("Sage.Utility.File.GoogleDocPicker",a,{id:"",googleDocumentsTitle:"Google Documents",pick:function(){var a=new i({authUrl:"https://docs.google.com/feeds"});dojo.connect(a,"onLoggedIn",this,this._onLoggedInHandler),a.login()},_onLoggedInHandler:function(){new google.gdata.client.GoogleService("writely","mytest").getFeed("https://docs.google.com/feeds/documents/private/full?showfolders=true",dojo.hitch(this,"_displayFeed"),function(a){},void 0,!0)},_displayFeed:function(a){var e=this._parseFeed(a);dojo.ready(dojo.hitch(this,function(){var a=new f({data:{items:[{children:e,title:"Root",root:!0}]}}),h=new b({store:a,childrenAttrs:["children"],labelAttr:"title",query:{}}),i=new d({model:h,showRoot:!1,openOnDblClick:!0});dojo.connect(i,"onDblClick",dojo.hitch(this,function(a,b,c){this.onDocumentSelected(a.title,a.url)})),dojo.connect(i,"onLoad",dojo.hitch(this,function(){var a=new c({title:g.googleDocumentsTitle,content:i});a.startup(),a.containerNode.style.maxHeight=dojo.window.getBox().h/3+"px",a.containerNode.style.minWidth="200px",a.containerNode.style.overflow="auto",a.show()}))}))},_parseFeed:function(a){var b=[],c=a.feed.entry;if(c)for(var d=0;d<c.length;d++){var e=c[d],f={id:e.id.$t,title:e.title.$t,feedentry:e};dojo.some(e.category,function(a){if("http://schemas.google.com/g/2005#kind"==a.scheme)return f.type=a.label,!0}),b.push(f)}b.sort(function(a,b){return a.title>b.title?1:a.title<b.title?-1:0});var g=b.slice(0),h=0;return dojo.forEach(b,function(a,c){var d=!1;dojo.forEach(a.feedentry.link,function(c){"http://schemas.google.com/docs/2007#parent"==c.rel&&dojo.some(b,function(b){c.href==b.id&&(d=!0,b.children||(b.children=[]),b.children.push(a))}),"alternate"==c.rel&&(a.url=c.href)}),d&&(g.splice(c-h,1),h++)}),g},onDocumentSelected:function(a,b){}})})},"Sage/UI/SLXPreviewGrid/Filter/DateRange":function(){define(["dijit/form/DateTextBox","dijit/_Widget","dijit/_Templated","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.SLXPreviewGrid.Filter.DateRange",[b,c,d],{templateString:"<div><input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteFrom'> - <input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteTo'></div>",widgetsInTemplate:!0,getQuery:function(){var a=function(a,b){if(!a)return"";a.constructor!==Date&&(a=Date.parse(a)),b&&a.setUTCDate(a.getUTCDate()+1);var c=function(a){return a<10?"0"+a:a};return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"},b=a(this.dteFrom.get("value")),c=a(this.dteTo.get("value"),!0),d="";if(b&&(d=this.field+" ge '"+b+"'"),c&&(d&&(d+=" and "),d+=this.field+" lt '"+c+"'"),this.params.getTimeless&&d){var e=!1;d="(("+d+" and not Timeless) or (";var f=Sage.Utility.Activity.formatTimelessStartDate(this.dteFrom.get("value")),g=Sage.Utility.Activity.formatTimelessEndDate(this.dteTo.get("value"));f&&(d+=this.field+" gt '"+f+"'",e=!0),g&&(e&&(d+=" and "),d+=this.field+" lt '"+g+"'"),d+=" and Timeless))"}return d},reset:function(){this.dteFrom.set("value",0),this.dteTo.set("value",0)},getState:function(){return{dFrom:this.dteFrom.get("value"),dTo:this.dteTo.get("value")}},applyState:function(a){a&&(a.dFrom&&this.dteFrom.set("value",a.dFrom),a.dTo&&this.dteTo.set("value",a.dTo))}})})},"Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin":function(){define(["dojo/_base/declare"],function(a){return a("Sage.UI.SLXPreviewGrid.Filter._previewGridFilterMixin",null,{getQuery:function(){var a=this.get("value");return a?"upper("+this.field+") like '%"+a.replace("'","''").toUpperCase()+"%'":""},reset:function(){this.set("value","")},getState:function(){return{value:this.get("value")}},applyState:function(a){a&&this.set("value",a.value||"")}})})},"Sage/UI/SLXPreviewGrid/Filter/Text":function(){define(["dijit/form/TextBox","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.SLXPreviewGrid.Filter.Text",[a,b],{postMixInProperties:function(){this.type="text",this.style="width: 200px",this.inherited(arguments)},reset:function(){this.set("displayedValue",""),this.set("value","")}})})},"Sage/Utility/Workspace":function(){define(["dojo/_base/declare","dijit/registry"],function(a,b){var c=a("Sage.Utility.Workspace",[],{});return c.getDetailTabWorkspaceContainer=function(){var a=b.byId("tabContent");return a||b.byId("mainContentDetails")},c})},"Sage/UI/GridView":function(){require({cache:{"url:Sage/UI/templates/GridView.html":'[\r\n\'<div data-dojo-type="dijit.layout.ContentPane" class="HundredPercentHeight abstractGrid" >\',\r\n    \'<div data-dojo-attach-point="headerNode" class="list-panel-tbar" role="toolbar">\',\r\n        \'<span dojoattachpoint="labelSection"></span>\',\r\n        \'<span dojoattachpoint="abstractGrid_toolBar" class="right-tools"></span>\',\r\n    \'</div>\',\r\n    \'<div dojoattachpoint="abstractGrid_filters"></div>\',\r\n    \'<div dojoattachpoint="abstractGrid_grid" class="gridcontainer"></div>\',\r\n\'</div>\'\r\n]'}}),define(["dijit/_Widget","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom","dojo/string","dojo/on","dojo/text!./templates/GridView.html","Sage/UI/ImageButton","dojo/i18n!./nls/GridView","Sage/UI/Dialogs","Sage/_Templated","Sage/Utility","Sage/UI/SDataLookup","Sage/UI/ComboBox","Sage/UI/Controls/Grid","put-selector/put","dojo/mouse","dojo/dom-class","dojo/query","dojo/dom-style","dojo/aspect","Sage/UI/Controls/GridParts/Columns/CheckBox","Sage/UI/SLXPreviewGrid/FilterPanel","Sage/Store/SData","dojo/store/Memory","Sage/Store/WritableStore","dojo/_base/connect","dojo/_base/event","dojo/dom-attr","dijit/registry"],function(_Widget,declare,lang,array,domConstruct,dom,dojoString,on,template,ImageButton,nlsResource,dialogs,_Templated,Utility,SDataLookup,ComboBox,Grid,put,mouse,domClass,query,domStyle,aspect,CheckBox,FilterPanel,SDataObjectStore,Memory,WritableStore,connect,event,domAttr,registry){var widget=declare("Sage.UI.GridView",[_Widget,_Templated],{widgetsInTemplate:!0,store:!1,mode:"",grid:!1,rowCount:0,show_ToolBar:!0,help_keyword:!1,help_location:!1,tools:[],gridLabel:"",query:"",showRecordCount:!1,mixins:[],widgetTemplate:new Simplate(eval(template)),_filter:null,filterText:"Filter",region:"center",_applyFilters:!1,_dataChangeConnections:[],constructor:function(a){lang.mixin(this,nlsResource),this.mode=Utility.getModeId(),a.storeOptions&&a.storeOptions.isInsertMode&&(this.mode="insert"),"insert"!==this.mode&&this.listenForPageSave(),this.populateUserOptions(),connect.connect(this,"onKeyDown",this.customKeyDown)},listenForPageSave:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.addListener(a.ON_SAVE,this.saveChanges,this)},removePageSaveListener:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.removeListener(a.ON_SAVE,this.saveChanges)},applyEditOnEnter:function(a){13!=a.charOrCode&&13!=a.keyCode||(this.doApplyEdit(),this.edit.apply(),event.stop(a))},customKeyDown:function(a){this.applyEditOnEnter(a)},saveChanges:function(a){this.grid.save().then(lang.hitch(this,function(a){this.markClean(),this.refresh()})).then(function(b){a&&a(b)})},cancelChanges:function(){this.markClean(),this.grid.revert()},createGridView:function(){if(this.slxContext&&(this.context=this.slxContext,this.tabId=this.slxContext.tabId),!0!==this.hideHeaderView?this._createGridHeader():domClass.add(this.headerNode,"display-none"),this._filter){var a=this._filter?this._filter.getQuery():null;this.query=a?this.query+" "+a:""}var b={query:this.query,placeHolder:this.abstractGrid_grid};this.columns&&(b.columns=this.columns),this._setEditable(),b.store=this.store=this.getStore(),this.storeOptions&&(b.storeOptions=this.storeOptions),this.mode&&(b.mode=this.mode),this.data&&(b.data=this.data),
this.rowsPerPage&&(b.rowsPerPage=this.rowsPerPage),this.selectionMode&&(b.selectionMode=this.selectionMode),this.columnHiding&&(b.columnHiding=this.columnHiding),this.columnReordering&&(b.columnReordering=this.columnReordering),this.columnResizing&&(b.columnResizing=this.columnResizing),this.rowSelection&&(b.rowSelection=this.rowSelection),this.dijitRegistry&&(b.dijitRegistry=this.dijitRegistry),this.pagination&&(b.pagination=this.pagination),this.sort&&(b.sort=this.sort),this.indirectSelection&&(b.indirectSelection=this.indirectSelection),this.previewField&&(b.previewField=this.previewField),this.fullNoteField&&(b.fullNoteField=this.fullNoteField),this.keyboardNavigation&&(b.keyboardNavigation=this.keyboardNavigation),this.minRowsPerPage&&(b.minRowsPerPage=this.minRowsPerPage),this.maxRowsPerPage&&(b.maxRowsPerPage=this.maxRowsPerPage),this.rowsPerPage&&(b.rowsPerPage=this.rowsPerPage),this.keepScrollPosition&&(b.keepScrollPosition=this.keepScrollPosition),this.farOffRemoval&&(b.farOffRemoval=this.farOffRemoval),this.pagingDelay&&(b.pagingDelay=this.pagingDelay);var c=Sage.Services.getService("ClientEntityContext"),d=c.getContext(),e=d&&d.DisplayName?d.DisplayName+"_":"";b.id=e+(this.id?this.id:"")+"_gridView";var f=this.grid=new Grid(b);this.onDataChange&&(this.grid.onDataChange=lang.hitch(this,function(a){a.cell.row.data[a.cell.column.field]=a.value;var b=lang.clone(a.cell.row.data),c=a.cell.row.data,d=a.cell.column.field,e=a.oldValue,f=a.value;this.onDataChange(c,d,e,f,a,this);for(var g in b)c.hasOwnProperty(g)&&("insert"===this.mode?(a.grid.updateDirty(a.rowId,g,b[g]),this.store.setValue(c,g,c[g])):"object"!=typeof c[g]&&b[g]!=c[g]&&a.grid.updateDirty(a.rowId,g,c[g]));this.update(a)})),aspect.after(this.grid,"_onDataChange",lang.hitch(this,function(a,b){var c=b[0];"insert"!==this.mode&&!1!==this.shouldPublishMarkDirty&&(c.cell&&c.cell.widget&&!0===c.cell.widget.returnObject?c.oldValue.$key!==c.value.$key&&this.markDirty():c.oldValue!==c.value&&this.markDirty())})),aspect.after(this.grid,"_onLoadComplete",lang.hitch(this,function(a,b){this.labelSection.innerHTML=dojoString.substitute(this.totalRecordCountLabel,[this.grid.totalRecords]),this.rowCount=this.grid.totalRecords})),this.dirtyDataMsgID=this.tabId+"_dirtydatamsg",domConstruct.empty(this.placeHolder),domConstruct.place(this.domNode,this.placeHolder),this.classNames&&domClass.add(this.abstractGrid_grid,this.classNames),f.resize(),connect.publish("/ui/gridView/created",this)},update:function(a){var b=this.grid.reRenderRow(a.cell.row.data);domConstruct.place(b.childNodes[0],a.cell.row.element.childNodes[0],"replace");for(var c=this.grid._grid._editorsPendingStartup,d=c.length;d--;)this.startupEditor.apply(null,c[d])},startupEditor:function(a,b,c,d){var e=b.grid;a.domNode&&(a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",d),setTimeout(function(){a._dgridIgnoreChange=!1},0)),a._dgridLastValue=d,e._activeCell&&(e._activeValue=d,on.emit(c,"dgrid-editor-show",{grid:e,cell:e.cell(c),column:b,editor:a,bubbles:!0,cancelable:!1}))},_getToolbarPlaceHolder:function(){var a,b=domConstruct.create("span",{class:"grid-unsaveddata-msg",id:this.dirtyDataMsgID,style:"display:none;",content:this.editable?this.unsavedDataText:""}),c=this.abstractGrid_toolBar;if(this.context&&this.context.workspace)switch(this.context.workspace){case"Sage.Platform.WebPortal.Workspaces.Tab.TabWorkspace":if("insert"!==this.mode){var d=query("#element_"+this.tabId+" td.tws-tab-view-title");d.length>0&&domConstruct.place(b,d[0])}a=["element_",this.tabId].join(""),c=query(["#",a," td.tws-tab-view-tools-right"].join(""));break;case"Sage.Platform.WebPortal.Workspaces.MainContentWorkspace":"insert"!==this.mode&&domConstruct.place(b,query("#"+this.tabId+" span.mainContentHeaderTitle")[0]),a=this.tabId,c=query("#"+a+" td.mainContentHeaderToolsRight");break;case"Sage.Platform.WebPortal.Workspaces.DialogWorkspace":c=query("td.dialog-tools-right")}return c.length>0?c[0]:c},_createOwnToolbar:function(a){for(var b=Sage.Services.getService("RoleSecurityService"),c=(this.abstractGrid_toolBar,0);c<this.tools.length;c++){var d=this.tools[c];if(!d.appliedSecurity||""===d.appliedSecurity||!b||b.hasAccess(d.appliedSecurity)){var e=!1;if("string"==typeof d)e=this._createDefaultBtns(d,1);else if(d.type){var f=null;"Sage.UI.SDataLookup"===d.type&&(f=d.controlConfig||d,e=new SDataLookup(f),this.lookupControl=e),"Sage.UI.ComboBox"===d.type&&(f=d.controlConfig||d,e=new ComboBox(f),this.lookupControl=e)}else e=new ImageButton({icon:d.icon||"",imageClass:d.imageClass||"",id:d.id,onClick:lang.hitch(d.scope||this,d.handler),tooltip:d.alternateText||d.tooltip});e&&this._addToolBarItem(e,c+1,a)}}},_createGridHeader:function(){this.previewField&&this.tools.unshift({id:"TogglePrvRows_"+(this.tabId?this.tabId:""),imageClass:"fa fa-bars",tooltip:nlsResource.toggleRows,handler:this.togglePreviewRows,scope:this}),"insert"!==this.mode&&(this._filter=this._buildFilter());var a=this._getToolbarPlaceHolder();this.tabId&&""!==this.tabId?(this._addToolsToWorkspaceToolbar(a),this.currentEntityId=Utility.getCurrentEntityId()):this._createOwnToolbar(a)},_addToolsToWorkspaceToolbar:function(a){if(!this.readOnly)for(var b,c,d=Sage.Services.getService("RoleSecurityService"),e=0;e<this.tools.length;e++){b="";var f=this.tools[e];if(void 0!==f.mergeControlId&&0!==f.mergeControlId.length&&(c=dojo.query("[id$="+f.mergeControlId+"]",dojo.byId("element_"+this.tabId))[0],b=f.mergePosition.toLowerCase()),c||(c=a,b=""),("insert"!==this.mode||f.displayInInsert)&&(!f.appliedSecurity||""===f.appliedSecurity||!d||d.hasAccess(f.appliedSecurity))){var g=!1;if("string"==typeof f)g=this._createDefaultBtns(f);else if(f.type&&"Sage.UI.SDataLookup"===f.type){var h=f.controlConfig||f;g=new SDataLookup(h),this.lookupControl=g}else g=new ImageButton({icon:f.icon||"",imageClass:f.imageClass||"",id:f.id,onClick:lang.hitch(f.scope||this,f.handler),tooltip:f.alternateText||f.tooltip});g&&this._addToolBarItem(g,b.length>0?b:e+1,c)}}},_addToolBarItem:function(a,b,c){a.domNode?b?domConstruct.place(a.domNode,c,b):domConstruct.place(a.domNode,c):b?domConstruct.place(a,c,b):domConstruct.place(a,c)},getSelectedRowData:function(){return this.grid.getSelectedRowData()},getSelectedRowId:function(){return this.grid.getSelectedRowId()},showHelp:function(a,b){Utility.openHelp(a,b)},refresh:function(){this.markClean(),this.grid.refresh()},populateUserOptions:function(){if(!this.indirectSelection){var a=Sage.Services.getService("UserOptions");a&&a.get&&a.get("GroupCheckboxEnabled","GroupGridView",lang.hitch(this,function(a){var b=a&&a.value;this.indirectSelection="True"===b||"T"===b}),null,this,!1)}},_buildFilter:function(){for(var a=[],b=0;b<this.columns.length;b++){var c=this.columns[b];if(c.filterConfig){var d=lang.mixin(lang.clone(c),c.filterConfig);d.label||(d.label=c.name),a.push(d)}}if(0===a.length)return this._filtersApplied=!1,null;var e=new FilterPanel({id:this.id+"_filterpanel",region:"top",filterConfig:a,style:"display: none"});return this.tools.unshift({id:this.id+"_Filter",imageClass:"icon_Filter_16x16",tooltip:this.filterText,handler:lang.hitch(this,function(){this._filter.toggle()})}),domConstruct.place(e.domNode,this.abstractGrid_filters),e.onFilterApply=lang.hitch(this,function(a){this.grid.setFilter(a)}),e},_createDefaultBtns:function(a,b){var c;switch(a){case"add":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=plus_16x16",tooltip:nlsResource.addText,id:this.id+"_addBtn",onClick:lang.hitch(this,function(){this.addItem?this.addItem():this.addNew&&this.addNew()})});break;case"delete":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Delete_16x16",tooltip:nlsResource.deleteText,id:this.id+"_delBtn",onClick:lang.hitch(this,function(){this.removeItem?this.removeItem():this.deleteSelected&&this.deleteSelected()})});break;case"save":c=new ImageButton({imageClass:"icon_Save_16x16",tooltip:nlsResource.saveText,id:this.id+"_saveBtn",onClick:lang.hitch(this,function(){this.saveChanges()})});break;case"cancel":c=new ImageButton({imageClass:"icon_Reset_16x16",tooltip:nlsResource.cancelText,id:this.id+"_cancelBtn",onClick:lang.hitch(this,function(){this.cancelChanges()})});break;case"edit":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Edit_Item_16x16",tooltip:nlsResource.editText,id:this.id+"_editBtn",onClick:lang.partial(this.editItem,this)});break;case"help":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Help_16x16",tooltip:nlsResource.helpText,id:this.id+"_helpBtn",onClick:this.showHelp})}return c},markClean:function(){if(this.isDirty=!1,this.dirtyDataMsgID){dom.byId(this.dirtyDataMsgID)&&domStyle.set(dom.byId(this.dirtyDataMsgID),"display","none");var a=Sage.Services.getService("ClientBindingManagerService");a&&a.clearDirtyAjaxItem(this.id)}},markDirty:function(){this.isDirty=!0;var a=dom.byId(this.dirtyDataMsgID);a&&domStyle.set(a,"display","inline");var b=Sage.Services.getService("ClientBindingManagerService");b&&b.addDirtyAjaxItem(this.id)},getStore:function(){if(this.store)return this.store;if(!this.storeOptions)throw"Grid configuration is missing store";this.storeOptions.isInsertMode="insert"===this.mode,this._storePrepareQuery();var a="insert"!==this.mode?new SDataObjectStore(this.storeOptions):new WritableStore(this.storeOptions);return a.onDataChange&&(this._dataChangeConnections.push(connect.connect(a,"setValue",a.onDataChange)),this._dataChangeConnections.push(connect.connect(a,"saveNewEntity",a.onDataChange)),this._dataChangeConnections.push(connect.connect(a,"deleteItem",a.onDataChange)),this._dataChangeConnections.push(connect.connect(a,"createItem",a.onDataChange))),a},_addToListUnique:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return;b.push(a)},_storePrepareQuery:function(){var a,b,c,d,e,f,g,h=this.columns;for(this.store?(a=this.store.select=this.store.select||[],d=this.store.include=this.store.include||[]):(a=this.storeOptions.select||[],d=this.storeOptions.include||[]),this.storeOptions.select.push("Id"),this.previewField&&this.storeOptions.select.push(this.previewField),b=0;b<a.length;b++)a[b]=a[b].replace(/\./g,"/");for(b=0;b<h.length;b++){if(h[b].field&&(g=h[b].field,this._addToListUnique(g.replace(/\./g,"/"),a),h[b].editorArgs&&h[b].editorArgs.lookupOptions&&h[b].editorArgs.lookupOptions.field)){var i=g===h[b].editorArgs.lookupOptions.field?h[b].editorArgs.lookupOptions.field:dojoString.substitute("${0}/${1}",[g,h[b].editorArgs.lookupOptions.field]);this._addToListUnique(i.replace(/\./g,"/"),a)}if(h[b].field.indexOf(".")>0)for(e=h[b].field.split("."),f="",c=0;c<e.length-1;c++)f+=e[c],this._addToListUnique(f,d),f+="/"}},addAssociatedItems:function(a,b,c,d){var e=this;"insert"!==Utility.getModeId()&&this.isDirty?dialogs.raiseQueryDialog("Infor CRM",this.dirtyDataMessage,function(f){f&&e.addSelectedItems(a,b,c,d)},this.okText,this.cancelText):e.addSelectedItems(a,b,c,d)},addSelectedItems:function(a,b,c,d){for(var e=[],f=this,g=0;g<a.length;g++){var h=!1;for(var i in f.store.data){var j=f.store.data[i];j[c]&&j[c].$key==a[g].$key&&(h=!0)}if(!h){var k={};"insert"!==Utility.getModeId()&&(k[b]={$key:Utility.getCurrentEntityId()}),k[c]={},Utility.extend(k[c],a[g]),delete k.$key,delete k.$name,delete k.$url,e.push(k)}}e.length>0&&f.createItems(e,function(){"insert"!==Utility.getModeId()&&__doPostBack("MainContent","")}),d&&d.lookupDialog.hide()},createItems:function(a,b){if(lang.isArray(a))for(var c=this.grid.store,d=a.length,e=function(a){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&(a&&void 0!==a&&a.getResponseHeader||a&&void 0!==a&&a.$httpStatus),this.currentCount===this.totalCount&&(this.grid.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(this.grid))},f={grid:this,totalCount:d,currentCount:0,onResponse:e,onComplete:b||null},g=0;g<a.length;g++)c.createItem(a[g],f);else dialogs.showError(this.createItemsInvalidArrayText)},destroy:function(){array.forEach(this._dataChangeConnections,function(a){connect.disconnect(a)}),this.lookupControl&&this.lookupControl.destroy(!1),this.grid&&this.grid.destroy(!1),this.store&&this.store.destroy&&this.store.destroy(!1),this._registeredWidgets&&(array.forEach(this._registeredWidgets,function(a){a.destroy(!1)}),this._registeredWidgets=null),this.removePageSaveListener(),this.inherited(arguments)},deleteSelected:function(a){var b=this.grid.getSelectedRowData();if(0===b.length)return void dialogs.showInfo(nlsResource.noSelectionsText);if("insert"===this.mode||this._checkPageExitWarningMessage()){var c=this,d={title:"Infor CRM",query:dojoString.substitute(this.confirmDeleteFmtTxt,[b.length]),callbackFn:function(d){c.deleteCallback(d,a,b)},yesText:this.yesText,noText:this.noText};dialogs.raiseQueryDialogExt(d)}},deleteCallback:function(a,b,c){if(a){var d=this.grid,e=d.store;d.clearSelection();var f=function(a,b){a&&a.length&&dialogs.showError(a),d.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(d)},g={grid:d,onResponse:f,onResponseExceptionMsg:"",onComplete:b||null};if(e.deleteItem)e.deleteItem(c,g);else if(e.data){for(var h=0;h<c.length;h++)e.remove(c[h].id);d.refresh()}}},_setEditable:function(){var a,b=!0;if(this.appliedSecurity){var c=Sage.Services.getService("RoleSecurityService");c&&(b=c.hasAccess(this.appliedSecurity))}if(this.readOnly&&(b=!1),b){for(a=0;a<this.columns.length;a++)if(this.columns[a].editable){this.editable=!0;break}}else{for(a=0;a<this.columns.length;a++)this.columns[a].editable&&(this.columns[a].editable=!1);this.editable=!1}},_checkPageExitWarningMessage:function(){var a=!0;if(this.isDirty){var b=Sage.Services.getService("ClientBindingManagerService");a=confirm(b._PageExitWarningMessage)}return a},togglePreviewRows:function(){this.grid.togglePreviewRows()},resize:function(){this.grid.resize()},_refresh:function(){this.refresh()},onRefresh:function(){},addNew:function(a){this.grid.addItem(a)},showLoading:function(){},setupHeader:function(){this._createGridHeader()},_getRecordCount:function(){return this.rowCount}});return widget})},"Sage/UI/Controls/GridParts/Columns/CheckBox":function(){define(["dojo/_base/declare","dijit/form/CheckBox"],function(a,b){return a("Sage.UI.Controls.GridParts.Columns.CheckBox",b,{_getValueAttr:function(){return this.checked}})})},"Sage/UI/SLXPreviewGrid/FilterPanel":function(){define(["dijit/form/Button","dijit/_Widget","Sage/Utility/_LocalStorageMixin","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.SLXPreviewGrid.FilterPanel",[b,c],{_filters:null,_state:{},STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_FILTERINFO:"_FILTER_INFO_",applyText:"Apply",resetText:"Reset",constructor:function(){this._filters=[]},postMixInProperties:function(){dojo.mixin(this,d),this._loadState(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.domNode.className="filterPanel";var b=document.createElement("div");b.style.styleFloat=b.style.cssFloat="left",b.style.width="39%";var c=document.createElement("div");c.style.styleFloat=c.style.cssFloat="left",c.style.width="39%";var d=this._state.filterStates||{},e=b;dojo.forEach(this.filterConfig,function(a,f,g){e===b&&f+1>g.length/2&&(e=c);var h=document.createElement("div");h.className="filterItem";var i=this._createFilter(a);if(d[a.field]&&i.applyState&&i.applyState(d[a.field]),this._filters.push(i),a.label){var j=document.createElement("label");j.appendChild(document.createTextNode(a.label+":")),j.className="filterPanelLabel",j.htmlFor=i.domNode.id,h.appendChild(j)}h.appendChild(i.domNode),e.appendChild(h)},this);var f=document.createElement("div");f.style.styleFloat=f.style.cssFloat="left",f.style.width="20%",f.className="filterButtonPanel";var g=new a({label:this.applyText});f.appendChild(g.domNode),dojo.connect(g,"onClick",this,"_applyFilter");var h=new a({label:this.resetText});f.appendChild(h.domNode),dojo.connect(h,"onClick",this,"_resetFilter"),dojo.connect(this.domNode,"keydown",this,function(a){13===a.keyCode&&this._applyFilter()}),this.domNode.appendChild(b),this.domNode.appendChild(c),this.domNode.appendChild(f)},startup:function(){this.inherited(arguments),dojo.forEach(this._filters,function(a){a.startup()}),this._state.visible&&!0===this._state.visible&&this.toggle()},destroy:function(){dojo.forEach(this._filters,function(a){a.destroy(!1)}),dojo.forEach(dijit.findWidgets(this.domNode),function(a){a.destroy(!1)}),this.inherited(arguments)},getQuery:function(){var a=[];return dojo.forEach(this._filters,function(b){var c=b.getQuery();c&&a.push(c)}),a.length>0?a.join(" and "):null},toggle:function(){"none"===this.domNode.style.display?(this.domNode.style.display="block",this._state.visible=!0):(this.domNode.style.display="none",this._state.visible=!1),this._saveState()},onFilterApply:function(a){},_createFilter:function(a){return new(0,a.widgetType)({field:a.field,lookupGridOptions:a.lookupGridOptions,lookupStoreOptions:a.lookupStoreOptions,lookupStructure:a.lookupStructure,name:a.label})},_applyFilter:function(){for(var a={},b=0;b<this._filters.length;b++){var c=this._filters[b];c.getState&&(a[c.field]=c.getState())}this._state.filterStates=a,this._saveState(),this.onFilterApply(this.getQuery())},_resetFilter:function(){dojo.forEach(this._filters,function(a){a.reset()}),this._applyFilter()},_saveState:function(){var a=this.STORE_KEY_FILTERINFO+this.id;this.saveToLocalStorage(a,this._state,this.STORE_NS)},_loadState:function(){var a=this.STORE_KEY_FILTERINFO+this.id;this._state=this.getFromLocalStorage(a,this.STORE_NS)||{}}})})},"Sage/Store/WritableStore":function(){define(["Sage/Store/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Store.WritableStore",a,{isInsertMode:!1,_isPostback:!1,constructor:function(a){d.mixin(this,a),this.features["dojo.data.api.Write"]=!0,this.features["dojo.data.api.Notification"]=!0,this.identityAttributes=["$cacheID"],this.dirtyDataCache={isDirty:!1},this.singleResourceRequest=null,a.hasOwnProperty("isInsertMode")||(this.isInsertMode="insert"===b.getModeId())},entry:"",query:function(a,c){var d={};d.$resources=[];var e=null;if(!this._isPostback&&this.dataCarrierId){var f=dojo.query([".",this.dataCarrierId].join(""));if(f[0].value.length>0){var g=dojo.fromJson(f[0].value),h=g.$resources.sort(b.dynamicSort(c.sort[0].attribute,c.sort[0].descending));this.addItemsToCache(a,h)}}for(e in this.data)this.data.hasOwnProperty(e)&&"query"!==e&&d.$resources.push(this.data[e]);if(this.setContext(a),this.verifyService(),this._isPostback=!0,this.isInsertMode){var i=this;return window.setTimeout(function(){i.onSuccess(a,d)},5),d.$resources}},onSuccess:function(a,b){""===this.entry&&(this.entry=b),a.onBegin&&a.onBegin.call(a.scope||this,b.$resources.length,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a)},addToCache:function(a,b,c){var d;c=void 0===c?11*Math.random():c,this.isInsertMode&&(b.$cacheID=(new Date).getTime()+c),d=this.getIdentity(b),this.data[d]=b},addItemsToCache:function(a,b){for(var c=0;c<b.length;c++)this.addToCache(a,b[c],c)},clearCache:function(){this.inherited(arguments),this.clearDirtyDataCache()},clearDirtyDataCache:function(){for(var a in this.dirtyDataCache)"isDirty"!==a&&delete this.dirtyDataCache[a];this.dirtyDataCache.isDirty=!1},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.data.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},hasAttribute:function(a,b){return!(!this.isItem(a)||"string"!=typeof b)&&b in a},close:function(){this.clearCache()},deleteItem:function(a,b){var c=this.getIdentity(a);c&&""!==c&&delete this.data[c];var d={};d.scope=b||this;var e=function(){"function"==typeof this.onResponse&&this.onResponse.call(this)};d.success=e,d.success.call(d.scope)},isDirty:function(a){if(a){var b=this.getIdentity(a);if(b&&""!==b)return this.dirtyDataCache.hasOwnPropery(b)}return this.dirtyDataCache.isDirty},newItem:function(a){var b=this.createTemplateRequest();b&&b.read({success:function(b){a&&a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:this.requestTemplateFailure,scope:this})},createTemplateRequest:function(){var a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);return this.resourceKind&&""!==this.resourceKind&&a.setResourceKind(this.resourceKind),a},requestTemplateFailure:function(){},saveNewEntity:function(a,b,c,d){this.addToCache(d,a),b()},createItem:function(a,b){var c={};c.scope=b||this,c.scope.store=this;var d=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};c.success=d,this.addToCache(b,a),c.success.call(c.scope,a)},revert:function(){this.clearDirtyDataCache(),this.onDataReset()},setValue:function(a,c,d){var e=this.getValue(a,c,"");return b.setValue(a,c,d),this.onSet(a,c,e,d),!0},setValues:function(a,b,c){alert("not implemented - setValues")},unsetAttribute:function(a,b){alert("not implemented - unsetAttribute")},dataCacheToArray:function(){var a=[];for(var b in this.data)this.data.hasOwnProperty(b)&&"query"!==b&&a.push(this.data[b]);return a},onDataChange:function(){this.clearDirtyDataCache();var a=dojo.query([".",this.dataCarrierId].join(""));a[0]&&(this.entry.$resources=this.dataCacheToArray(),a[0].value=JSON.stringify(this.entry))},onSet:function(a,b,c,d){},onNew:function(a,b){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/Store/BaseSDataStore":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Store.BaseSDataStore",null,{queryName:null,constructor:function(a){d.mixin(this,a),this.features={"dojo.data.api.Read":!0},this.identityAttributes||(this.identityAttributes=[this.identityAttribute||"$key"]),this.labelAttributes||(this.labelAttributes=["$descriptor"]),this.features["dojo.data.api.Identity"]=!0,this.data={query:""}},fetch:function(a){if(!this.isNewContext(a)&&this.feed)return void this.onSuccess(a,this.feed);this.setContext(a),a.count===1/0&&(a.count=500);var b=(a.count-0||this.pageSize,a.start-0||1);b>1&&(b+=1),this.verifyService();var c=this.getCollectionRequestObj(a);if(!c)return void(a.onError&&a.onError.call(a.scope||this,"Invalid data url",a));c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,isNaN(b)?1:b);var e="";if(this.query&&"function"!=typeof this.query&&(this.directQuery||(this.directQuery=this.query)),this.directQuery&&(a.query||(a.query={}),d.mixin(a.query,this.directQuery)),a.query)if("function"==typeof a.query)e=a.query();else if("string"==typeof a.query)e=a.query;else if("object"==typeof a.query)for(var f in a.query)if("fn"===f)e=a.query.fn.call(a.query.scope||this);else if("conditions"===f)"string"==typeof a.query.conditions&&""!==a.query.conditions&&(e+=e&&e.length>0?" and "+a.query.conditions:a.query.conditions);else if("scope"!==f&&a.query.hasOwnProperty(f)){var g=[f," like ","'",a.query[f].replace("*","%"),"'"].join("");e+=e.length>0?" and "+g:g}if(a.evaluatedQuery=e||"",e&&""!==e&&c.setQueryArg("where",e),this.select&&this.select.length>0&&c.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&c.setQueryArg("include",this.include.join(",")),this.sort&&(a.sort=a.sort||[],dojo.forEach(this.sort,function(b){0===dojo.filter(a.sort,function(a){return b.attribute==a.attribute}).length&&a.sort.push(b)})),void 0!==a.resourcePredicate&&c.getUri().setCollectionPredicate(a.resourcePredicate),this._setQueryArgsOnRequest(a.queryArgs,c),a.sort&&a.sort.length>0){var h=[];dojo.forEach(a.sort,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},h),c.setQueryArg("orderBy",h.join(","))}this.beforeRequest&&"function"==typeof this.beforeRequest&&this.beforeRequest.call(a.scope||this,c);var i=c.read({success:d.hitch(this,this.onSuccess,a),failure:d.hitch(this,this.onFailure,a)});return{abort:d.hitch(this,this.abortRequest,i)}},getCollectionRequestObj:function(a){var b=this.queryName?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(this.queryName):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);return b.setResourceKind(this.resourceKind),b.setStartIndex(a.start+1),this.resourcePredicate&&"''"!==this.resourcePredicate&&b.getUri().setCollectionPredicate(this.resourcePredicate),this._setQueryArgsOnRequest(this.queryArgs,b),!a.count&&this.count&&(a.count=this.count),b.setCount(a.count),b},_setQueryArgsOnRequest:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b.setQueryArg(c,a[c])},abortRequest:function(a){this.service.abortRequest(a)},onSuccess:function(a,b){a.onBegin&&(void 0===b.$totalResults&&(b.$totalResults=b.$itemsPerPage+b.$startIndex),a.onBegin.call(a.scope||this,b.$totalResults,a)),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a),this.addToCache(a,b)},onFailure:function(a,b,c){var d="An unknown exception occurred obtaining data.";if(b.responseText){var e=Sys.Serialization.JavaScriptSerializer.deserialize(b.responseText);d=dojo.isArray(e)?e[0].message:b.responseText}a&&a.onError?a.onError.call(a.scope||this,d,a):"string"==typeof d&&"undefined"!=typeof console&&b&&b.status&&(d+=" (HTTP status = %o; statusText = %o)")},setContext:function(a){this.context={start:a.start,count:a.count,query:a.query,queryOptions:a.queryOptions,sort:a.sort}},addToCache:function(a,b){var c,d,e;if(a.evaluatedQuery!==this.data.query&&(this.clearCache(),this.data.query=a.evaluatedQuery),b.$resources)for(c=0;c<b.$resources.length;c++)d=b.$resources[c],e=this.getIdentity(d),this.data[e]=d},clearCache:function(){for(var a in this.data)"query"!==a&&delete this.data[a];this.data.query=""},isNewContext:function(a){return"object"!=typeof this.context||(this.context.start!==a.start||this.context.count!==a.count)},verifyService:function(a){this.service||(this.service=b.getSDataService(a||"dynamic"))},getValue:function(b,c,d){return a.getValue(b,c)},getFeatures:function(){return this.features},getLabel:function(a){for(var b=[],c=0;c<this.labelAttributes.length;c++)a.hasOwnProperty(this.labelAttributes[c])&&b.push(a[this.labelAttributes[c]]);return b.join(" ")},getLabelAttributes:function(a){return this.labelAttributes},getIdentity:function(a){var b;if(a){var c=[];if("[object Array]"===Object.prototype.toString.call(a))for(var d=0;d<a.length;d++)for(b=0;b<this.identityAttributes.length;b++)a[d].hasOwnProperty(this.identityAttributes[b])&&c.push(a[d][this.identityAttributes[b]]);else for(b=0;b<this.identityAttributes.length;b++)a.hasOwnProperty(this.identityAttributes[b])&&c.push(a[this.identityAttributes[b]]);return c.join("")}},getIdentityAttributes:function(a){return this.identityAttributes},fetchItemByIdentity:function(a){if(this.data.hasOwnProperty(a.identity))a.onItem.call(a.scope||this,this.data[a.identity]);else{var b="Item with that key does not exist in the data cache: "+a.identity;a.onError&&a.onError.call(a.scope||this,{error:b})}},containsValue:function(b,c,d){return""!==a.getValue(b,c)}})})},"Sage/UI/Controls/Lookup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","Sage/UI/ConditionManager","Sage/UI/SDataLookup","dojo/dom-attr","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n!./nls/Lookup","dojo/text!./templates/Lookup.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.Controls.Lookup",[c,a,b],{id:"lookup",config:null,selectedObject:null,showEntityInfoToolTip:!1,disabled:!1,required:!1,allowClearingResult:!1,buttonToolTip:"Find",closeButtonToolTip:"Remove",_tooltip:!1,_setSelectedObjectAttr:function(a){this.textbox.value=a?a.$descriptor:"",this.selectedObject=a,this._onChange(a)},_getSelectedObjectAttr:function(){return this.selectedObject},_setShowEntityInfoToolTipAttr:function(a){this.showEntityInfoToolTip=a,this.domNode&&(this._tooltip=!!a&&this._createToolTip())},_getShowEntityInfoToolTipAttr:function(){return this.showEntityInfoToolTip},_createToolTip:function(){return new g({connectId:[this.domNode],position:["below"],entityName:this.config.storeOptions.resourceKind,entityId:this.selectedObject&&this.selectedObject.$key?this.selectedObject.$key:""})},_setAllowClearingResultAttr:function(a){this.allowClearingResult=a,a?dojo.removeClass(this.clearButton,"display-none"):dojo.addClass(this.clearButton,"display-none")},_getAllowClearingResultAttr:function(){return this.allowClearingResult},_setDisabledAttr:function(a){this.disabled=a,f.set(this.focusNode,"disabled",a),this.focusNode.setAttribute("aria-disabled",a),a?(dojo.style(this.clearButton,"visibility","hidden"),dojo.style(this.clearButton,"display","none"),dojo.style(this.lookupButton,"visibility","hidden"),dojo.style(this.lookupButton,"display","none")):(dojo.style(this.clearButton,"visibility",""),dojo.style(this.clearButton,"display",""),dojo.style(this.lookupButton,"visibility",""),dojo.style(this.lookupButton,"display",""))},_getDisabledAttr:function(){return this.disabled},_onChange:function(a){this._tooltip&&this._tooltip.set("entityId",a&&a.$key?a.$key:""),this.onChange(a)},onChange:function(a){},templateString:i,widgetsInTemplate:!1,constructor:function(a){this.inherited(arguments),dojo.mixin(this,h)},hideTooltip:function(){this._tooltip&&this._tooltip.close()},postCreate:function(){var a=this;dojo.connect(this.lookupButton,"onclick",this.lookupButton,function(){if(!a.get("disabled")){var b=new e(a.config);b.doSelected=function(c){a.set("selectedObject",c[0]),b.lookupDialog.hide()},b.showLookup();var c=dojo.connect(b.lookupDialog,"onHide",b,function(){dojo.disconnect(c),this.destroy()})}},!0),dojo.connect(this.clearButton,"onclick",null,function(){a.get("disabled")||(a.textbox.value="",a.set("selectedObject",null))},!0)}})})},"Sage/UI/Controls/EntityInfoToolTip":function(){define(["dijit/Tooltip","Sage/Data/SingleEntrySDataStore","Sage/Utility","dojo/string","dojo/html","dojo/i18n!./nls/EntityInfoToolTip","dojo/_base/lang","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){return h("Sage.UI.Controls.EntityInfoToolTip",a,{entityName:"",entityId:"",dataProps:[],include:[],_store:null,_storeOptions:null,constructor:function(a){g.mixin(this,f),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.label="Loading..."},onShow:function(a){if(this.entityId&&""!==this.entityId.trim()){if(!this._store){if(this.dataProps.length<1&&(this.dataProps=this._findPredefined(this.entityName)),this.dataProps.length<1)return void this.set("label",this.errorText);this._setupStore(),this._fetchData(a)}}else this.set("label",this.noInfoText);this.inherited(arguments)},_setDataPropsAttr:function(a){this._store=!1,this.set("label",this.loadingText),this.dataProps=a},_getDataPropsAttr:function(){return this.dataProps},_setEntityIdAttr:function(a){this._store=!1,this.set("label",""===a?this.noInfoText:this.loadingText),this.entityId=a},_getEntityIdAttr:function(){return this.entityId},_setupStore:function(){for(var a=[],c="",d=[],e={},f=0;f<this.dataProps.length;f++){if(c=this.dataProps[f].property,c.indexOf(".")>0){for(var g=c.split("."),h="",i=0;i<g.length-1;i++)h+=g[i],e[h]||(d.push(h),e[h]=!0),h+="/";c=c.replace(/\./g,"/")}a.push(c)}var j=this,k={include:dojo.isArray(this.include)?this.include:[],select:a,resourceKind:j.entityName};d.length>0&&(k.include=d);var l=new b(k);j._storeOptions=k,j._store=l},_fetchData:function(a){var b=a;this._store.fetch({predicate:'"'+this.entityId+'"',onComplete:function(a){this.displayResults(a,b)},onError:function(a){this.set("label",this.errorText)},scope:this})},displayResults:function(a,b){for(var e='<table class="propertyTip">',f=0;f<this.dataProps.length;f++){var g=this.dataProps[f],h=c.getValue(a,g.property)
;h&&(e+=d.substitute('<tr><td class="caption">${0}</td><td class="value">${1}</td></tr>',[g.label,h]))}e+="</table>",this.set("label",e),this.close(),this.open(b)},_findPredefined:function(a){switch(a){case"accounts":return[{label:this.mainText||"Main Phone:",property:"MainPhone"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.tollFreeText||"Toll Free",property:"TollFree"},{label:this.urlText||"Web URL",property:"WebAddress"}];case"contacts":case"leads":return[{label:this.workText||"Work:",property:"WorkPhone"},{label:this.mobileText||"Mobile:",property:"Mobile"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.emailText||"Email:",property:"Email"}];case"tickets":return[{label:this.contactNameText||"Contact:",property:"Contact.Name"},{label:this.phoneText||"Phone:",property:"Contact.WorkPhone"},{label:this.emailText||"Email:",property:"Contact.Email"}];case"opportunities":return[{label:this.accountText||"Account:",property:"Account.AccountName"},{label:this.mainText||"Main Phone:",property:"Account.MainPhone"}]}return[]}})})},"Sage/Utility/UserOptions":function(){define(["Sage/Utility"],function(a){return Sage.namespace("Utility.UserOptions"),Sage.Utility.UserOptions={getConvertedOptionValue:function(a,b){b=b.toLowerCase();var c=b;switch(a.toUpperCase()){case"DEFAULTCALENDARVIEW":var d=/^(month|2)$/i,e=/^(week|1)$/i,f=/^(workweek|3)$/i,g=/^(day|0)$/i;c=d.test(b)?"month":e.test(b)?"week":f.test(b)?"workweek":(g.test(b),"day");break;case"WORKWEEKSUN":case"WORKWEEKMON":case"WORKWEEKTUE":case"WORKWEEKWED":case"WORKWEEKTHU":case"WORKWEEKFRI":case"WORKWEEKSAT":case"REMEMBERUSERS":case"SHOWONOPPORTUNITIES":case"SHOWONREGARDING":case"SHOWONPHONENUMBER":case"SHOWONTIME":c=/^(true|yes|T|1)$/i.test(b);break;case"LOADHISTORYONSTART":c=/^(true|yes|T|Y|0)$/i.test(b);break;case"DAYSTARTTIME":c=this.getHourPart(b),c>24&&(c=9);break;case"DAYENDTIME":c=this.getHourPart(b),c>24&&(c=17);break;case"NUMEVENTS":case"DEFAULTINTERVAL":c=parseInt(b,10);break;default:c=b}return c},getHourPart:function(a){var b,c,d=a.split(" ");return d.length>1&&a.indexOf("-")>0?(b=d[1])&&(c=b.split(":")[0]):c=a.split(":")[0],(a.indexOf("pm")>0||a.indexOf("PM")>0)&&(c=parseInt(c,10)+12),parseInt(c,10)},getDay:function(a){var b=a;if(a.length>1){var c=[];c.SUNDAY=0,c.MONDAY=1,c.TUESDAY=2,c.WEDNESDAY=3,c.THURSDAY=4,c.FRIDAY=5,c.SATURDAY=6,b=c[a.toUpperCase()]}return b||(b=1),b},arraySort:function(a,b){return a-b}},Sage.Utility.UserOptions})},"Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab":function(){define("Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab",["dojo","dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Utility","Sage/Utility/Activity","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","dijit/layout/ContentPane","dojo/_base/lang","dojo/DeferredList","dojo/on","dojo/_base/array","dojo/topic","dojo/string","dojo/_base/Deferred","Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup","Sage/UI/Controls/SingleSelectPickList","dojo/i18n!./nls/ActivityEditorAttendeesTab","dojox/grid/cells/_base","Sage/Extensions/UI/Columns/Radio","Sage/Extensions/UI/Columns/CheckBox","Sage/Extensions/UI/Columns/PickListSelect","Sage/MainView/ActivityMgr/AttendeeLookup/LookupService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){return d("Sage.MainView.ActivityMgr.ActivityEditorAttendeesTab",[b,c],{actEditor:null,lup_Contact:null,lup_Lead:null,self:null,widgetsInTemplate:!0,currentPrimaryEntityId:null,userContactAttendees:[],editorMode:null,resourceKind:"activityAttendees",serviceName:"dynamic",_activityId:null,_addedAttendees:null,_uncheckItem:null,_initialPrimaryContact:!1,_gridStarted:!1,_timeZones:[],_clearPrimary:!1,constructor:function(a){m.mixin(this,a),m.mixin(this,v);var b=this;0===this._timeZones.length&&Sage.Utility.getTimeZones(function(a){b._timeZones=a})},widgetTemplate:new Simplate(["<div>",'<div id="{%= $.id %}_attendeesGridPlaceholder" dojoAttachPoint="_attendeesGridPlaceholder" style="width:100%;height:100%;min-height:225px"></div>',"</div>"]),userContactList:[],_newItems:[],startup:function(b){if(this._newItems=[],this._addedAttendees=[],this.actEditor){this._activityId=h.getCurrentEntityId(),this._buildGrid(b),a.subscribe("/entity/activity/create",this,this._activitySaved),a.subscribe("/entity/activity/change",this,this._activitySaved),this.createLookups(),this.self=this}},primaryClicked:function(b){b.attendeeTab=!0,b.PrimaryChecked=b.checked,b.checked&&(this._uncheckItem=b),b.AccountId||"Contact"!=b.EntityType?b.AccountId||"Lead"!=b.EntityType?a.publish("/entity/activityAttendee/primaryChanged",[b,this]):i._getLeadData(b.EntityId,function(c){c.Account&&c.Account.$key&&(b.AccountId=c.Account.$key),a.publish("/entity/activityAttendee/primaryChanged",[b,this])},this):i._getContactData(b.EntityId,function(c){c.Account&&c.Account.$key&&(b.AccountId=c.Account.$key),a.publish("/entity/activityAttendee/primaryChanged",[b,this])},this)},_primaryUnChecked:function(a){this.currentPrimaryEntityId,entityId},_getTimeZoneDisplayName:function(a){var b=a;if(this._timeZones&&this._timeZones.length>0){var c=this._timeZones.filter(function(b){return b.Keyname===a});c&&c[0]&&(b=c[0].Displayname)}return b},createToolsConfig:function(){return[{id:"attendeeSpeedSearch",imageClass:"icon_plus_16x16",handler:this.speedSearch,tooltip:this.tooltip_speedSearch,scope:this},{id:"attendeeAddContact",imageClass:"icon_Contact_Lookup_16x23",handler:this.lookupContacts,tooltip:this.tooltip_AddContact,scope:this},{id:"attendeeeAddLead",imageClass:"icon_Lead_Lookup_16x23",handler:this.lookupLeads,tooltip:this.tooltip_AddLead,scope:this},{id:"attendeeDelete",imageClass:"icon_Delete_16x16",handler:this.deleteAttendees,tooltip:this.tooltip_Delete,scope:this}]},createColumnConfig:function(a){var b,c,d;return a?(b={field:"IsPrimary",name:this.header_Primary,width:"40px",type:Sage.Extensions.Activity.primaryContactCheckBox1},c={field:"RoleName",name:this.header_RoleName},d={field:"IsAttendee",name:this.header_Attendee,width:"70px",type:Sage.Extensions.Activity.isAttendeeCheckBox1}):(b={field:"IsPrimary",name:this.header_Primary,width:"40px",editable:!0,radioType:"group",type:Sage.Extensions.UI.Columns.CheckBox,checkBoxClicked:this.primaryClicked},c={field:"RoleName",name:this.header_RoleName,pickListName:"Attendee Role",width:"130px",type:Sage.Extensions.UI.Columns.PickListSelect,options:["Decision Maker","Gate Keeper","Other"],editable:!0},d={field:"IsAttendee",name:this.header_Attendee,width:"70px",editable:!0,radioType:"group",type:dojox.grid.cells.Bool}),[{field:"Name",name:this.header_Name,width:"150px",editable:!1},{field:"AccountName",name:this.header_AccountName,width:"150px",editable:!1},{field:"EntityType",name:this.header_Type,width:"60px",editable:!1},b,c,d,{field:"PhoneNumber",name:this.header_Phone,width:"100px",editable:!1},{field:"Email",name:this.header_Email,width:"150px",editable:!1},{field:"TimeZone",name:this.header_TimeZone,width:"150px",editable:!1}]},getSelect:function(){return["EntityType","EntityId","IsPrimary","Name","Description","Notes","AccountId","AccountName"]},getSort:function(){return[{attribute:"Name"}]},contextualCondition:function(){var a=this._activityId;return a&&a.length>12&&(a=a.substr(0,12)),"Activity.id eq '"+a+"'"},getStoreOptions:function(a){var b={readOnly:a,columns:this.createColumnConfig(a),tools:this.createToolsConfig(a),storeOptions:{service:e.getSDataService(this.serviceName),resourceKind:this.resourceKind,select:this.getSelect(),sort:this.getSort(),onDataChange:m.hitch(this,this.onGridDataChange),onComplete:m.hitch(this,this.onGridComplete),clearStoreCacheOnDelete:!1},slxContext:{workspace:"",tabId:""},contextualCondition:m.hitch(this,this.contextualCondition),id:this.id+"_attendees",rowsPerPage:40,singleClickEdit:!1,enableCheckBoxSelection:!1,selectionMode:"single"};return 0!==this.editorMode.indexOf("New")&&"CompleteUnscheduled"!==this.editorMode||(b.storeOptions.isInsertMode=!0),b},onGridComplete:function(a,b){var c=this;p.forEach(a,function(a,b){a.IsPrimary&&(this.currentPrimaryEntityId=a.EntityId),a.TimeZone&&(a.TimeZone=c._getTimeZoneDisplayName(a.TimeZone)),c._grid&&"insert"!==c._grid.mode&&c._grid.store&&c._grid.store.dirtyDataCache.isDirty&&c._grid.store.dirtyDataCache[a.$key]&&(a.RoleName=c._grid.store.dirtyDataCache[a.$key].RoleName,a.IsPrimary=c._grid.store.dirtyDataCache[a.$key].IsPrimary,a.IsAttendee=c._grid.store.dirtyDataCache[a.$key].IsAttendee)})},onGridDataChange:function(a,b,c){},onGridBlur:function(){},onGridMarkClean:function(){if(this.dirtyDataMsgID){a.byId(this.dirtyDataMsgID)&&a.style(a.byId(this.dirtyDataMsgID),"display","none")}var b=Sage.Services.getService("ClientBindingManagerService");b&&b.clearDirtyAjaxItem(this.id)},onGridMarkDirty:function(){},onGridFetchComplete:function(){"insert"!=this._grid.mode&&this._uncheckItem,this._initialPrimaryContact&&this._gridStarted&&(this._addPrimaryContact(),this._clearPrimary&&(this.clearPrimary(this._grid,"IsPrimary"),this._clearPrimary=!1))},decalreCustomGridCell:function(){d("Sage.Extensions.Activity.primaryContactCheckBox1",dojox.grid.cells.Bool,{format:function(a,b){var c=Sage.Utility.getValue(b,"IsPrimary"),d='<input type="checkbox" disabled="disabled" />';return c&&(d='<input type="checkbox" checked="checked" disabled="disabled" />'),d}}),d("Sage.Extensions.Activity.isAttendeeCheckBox1",dojox.grid.cells.Bool,{format:function(a,b){var c=Sage.Utility.getValue(b,"IsAttendee"),d='<input type="checkbox" disabled="disabled" />';return c&&(d='<input type="checkbox" checked="checked" disabled="disabled" />'),d}})},_buildGrid:function(b){this.decalreCustomGridCell();var c=i.getCurrentActivityId();this._activityId=this._activityId||c;var d=this.getStoreOptions(b),e=new j.Grid(d,this._attendeesGridPlaceholder);e.setSortColumn("Name"),this._grid=e._grid,a.connect(this._grid,"onBlur",this,this.onGridBlur),e.startup(),this._grid.markClean=this.onGridMarkClean,this._grid.markDirty=this.onGridMarkDirty,a.connect(this._grid,"_onFetchComplete",this,this.onGridFetchComplete)},_addMemberToAvailabilityTab:function(a){var b=[];b.push(a),this.actEditor.addMembers(b)},disableGrid:function(){this._grid.readOnly=!0,this._grid.refresh()},saveGridChanges:function(a){"insert"!==this._grid.mode?this._grid.saveChanges(m.hitch(this,a)):a()},speedSearch:function(){var a=this;this._speedSearchLookup=new t,this._speedSearchLookup.showLookup(),this._speedSearchLookup.doSelected=function(b){a._processLookupResults(b)}},lookupContacts:function(){this.lup_Contact.seedProperty="Account.Id",this.lup_Contact.seedValue=this.actEditor._activityData.AccountId,this.lup_Contact.query.conditions="",this.lup_Contact.buildSDataStoreQueryForSeeding(),this.lup_Contact._originalQueryConditions=this.lup_Contact.query.conditions,this.lup_Contact.cancelText=this.lup_Contact.closeText,this.lup_Contact.overrideSeedValueOnSearch=!0,this.lup_Contact.showLookup();var b=a.connect(this.lup_Contact.lookupDialog,"onHide",this.lup_Contact,function(){a.disconnect(b),this.seedValue&&this.resetGrid()})},lookupLeads:function(){this.lup_Lead.query.conditions="",this.lup_Lead.buildSDataStoreQueryForSeeding(),this.lup_Lead._originalQueryConditions=this.lup_Lead.query.conditions,this.lup_Lead.cancelText=this.lup_Lead.closeText,this.lup_Lead.showLookup()},deleteAttendees:function(){var b=this._grid.selection.getSelected(),c=this;this._grid.deleteSelected(function(){if(b)for(var d=0;d<b.length;d++){var e=b[d];if(e.IsPrimary&&(e.attendeeTab=!0,e.PrimaryChecked=!1,a.publish("/entity/activityAttendee/primaryChanged",[e,this])),"Contact"==b[d].EntityType){var f=c._checkUserContactAssociation(b[d].EntityId);if(f){var g={memberId:f,attendeesTab:!0};c.actEditor._removeMember(g)}}d==b.length-1&&a.publish("/entity/activityAttendee/delete",[null,this])}})},_attendeeExists:function(a){var b=this._grid.rowCount;0===b&&void 0!==this._grid.store.dataCacheToArray&&b!==this._grid.store.dataCacheToArray().length&&this._grid.store.deleteItem(this._grid.store.dataCacheToArray()[0]);for(var c=0;c<b;c++){if(this._grid.getItem(c).EntityId===a)return!0}return!1},resetPrimary:function(a){for(var b=this._grid.rowCount,c=0;c<b;c++){var d=this._grid.getItem(c);d.EntityId!==a&&(d.IsPrimary=!1)}},unCheckPrimary:function(){if("insert"==this._grid.mode)this.resetPrimary();else{if(!this._gridStarted)return void(this._clearPrimary=!0);for(var b=this._grid.rowCount,c=0;c<b;c++){var d=this._grid.getItem(c);d.IsPrimary&&(this._uncheckItem=d,a.publish("/entity/activityAttendee/primaryChanged",[d,this]))}this.clearPrimary(this._grid,"IsPrimary")}},clearPrimary:function(b,c){for(var d=b.rowCount,e=0;e<d;e++){var f=b.getItem(e),g="chk_"+c+"_"+f.EntityId;a.byId(g).checked=!1,b.store.setValue(f,c,!1)}},resetRows:function(b,c,d,e){for(var f=b.rowCount,g="",h=0;h<f;h++){var i=b.getItem(h);i&&i.EntityId!==e.EntityId?(g="chk_"+this.field+"_"+i.EntityId,a.byId(g).checked=!1,b.store.setValue(i,d,!1)):i&&i.EntityId===e.EntityId&&(g="chk_"+this.field+"_"+i.EntityId,b.store.setValue(i,d,!0))}},resetEntityContext:function(){var a=this.parentRelationshipName,b=h.getCurrentEntityId();"activityId"===a&&(b=b.substr(0,12));var c=function(){return(a||"'A'")+" eq '"+b+"'"};this._previewGrid.resetContextualCondition(c),this.refresh()},_processLookupResults:function(a){for(var b=[],c=0;c<a.length;c++)this._attendeeExists(a[c].$key)||(b.push(this._setAttendeeEntity(a[c])),"Contact"==a[c].type&&this._getSlxAssociation("Contact",a[c].$key,null,function(a){a&&a.length>0&&a[0].UserId&&(this._updateUserContactList(a[0].UserId,a[0].ContactId),this._getResourceData(h.getClientContextByKey("userID"),a[0].UserId,this._addMemberToAvailabilityTab,this))},this));b.length>0&&this._addAttendeesToStore(b)},_processContactLookupResults:function(a){for(var b=[],c=0;c<a.length;c++)if(!this._attendeeExists(a[c].$key)){a[c].EntityType="Contact";var d=this._setAttendeeEntityFromContactLead("Contact",a[c]);d.IsAttendee=!0,b.push(d),a[c].New=!0}b.length>0&&this._addAttendeesToStore(b);for(var c=0;c<a.length;c++)a[c].New&&a[c].ContactUser&&a[c].ContactUser.$resources&&a[c].ContactUser.$resources.length>0&&(this._updateUserContactList(a[c].ContactUser.$resources[0].UserId,a[c].$key),this._getResourceData(h.getClientContextByKey("userID"),a[c].ContactUser.$resources[0].UserId,this._addMemberToAvailabilityTab,this))},_processLeadLookupResults:function(a){for(var b=[],c=0;c<a.length;c++)if(!this._attendeeExists(a[c].$key)){a[c].EntityType="Lead";var d=this._setAttendeeEntityFromContactLead("Lead",a[c]);d.IsAttendee=!0,b.push(d)}b.length>0&&this._addAttendeesToStore(b)},getFieldValue:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.fieldName==b)return d.fieldValue}return""},_setAttendeeEntity:function(a){var b={};return b.EntityType=a.type,b.EntityId=a.$key,b.IsPrimary=!1,b.Name=a.$descriptor,b.AccountName=this.getFieldValue(a.fields,"account"),b.Email=this.getFieldValue(a.fields,"email"),b.Description="",b.Notes="",b.TimeZone="",b.PhoneNumber=this.getFieldValue(a.fields,"phone"),b.RoleName="",b.general=!1,b.IsAttendee=!0,b},_setAttendeeEntityFromContactLead:function(a,b){var c=!1;return b&&b.$key&&(c={},c.EntityType=a,c.EntityId=b.$key,c.$key=b.$key,c.IsPrimary=!1,c.Name=b.$descriptor,c.$descriptor=b.$descriptor,c.Account=b.Account,c.AccountName=b.AccountName||b.Company,"Lead"==a&&(c.Company=b.Company,c.LeadFullName=b.$descriptor),c.Company=b.Company,c.Email=b.Email,c.Description="",c.Notes="",b.Address&&(c.TimeZone=b.Address.TimeZone,c.TimeZone&&(c.TimeZone=this._getTimeZoneDisplayName(c.TimeZone))),c.PhoneNumber=b.WorkPhone,c.RoleName="",c.general=!1),c},_getResourceData:function(a,b,c,d){this.accessData=!1,this._accessStore||(this._accessStore=new f({include:["$descriptors"],resourceKind:"activityresourceviews",service:e.getSDataService("dynamic")})),this._accessStore.fetch({predicate:"'"+b+"-"+a+"'",onComplete:function(a){c.call(d,a)},onError:function(){c.call(d,null)},scope:this})},_getSlxAssociation:function(a,b,c,d,f){this.accessData=!1,this._associationStore||(this._associationStore=new g({include:["$descriptors"],resourceKind:"contactusers",select:["UserId","ContactId","Contact/Name","Contact/Email","Contact/WorkPhone","Contact/AccountName","User/Name"],service:e.getSDataService("dynamic")}));var h="";"Contact"==a?h=r.substitute("ContactId eq '${0}' ",[b]):"User"==a&&(h=r.substitute("UserId eq '${0}' ",[b])),this._associationStore.fetch({query:h,onComplete:function(a){d.call(f,a,c)},onError:function(){d.call(f,null)},scope:this})},_updateUserContactList:function(a,b){this.userContactList[a]||(this.userContactList[a]={UserId:a,ContactId:b})},_checkUserContactAssociation:function(a){var b=!1;if(this.userContactList)for(var c in this.userContactList)if(this.userContactList[c].ContactId==a){b=this.userContactList[c].UserId;break}return b},_addContactAttendees:function(a){for(var b=[],c=a.length,d=this,e=0;e<c;e++)b.push(this._getAssociationData(a[e]));new n(b).then(function(a){for(var b=0;b<a.length;b++)a[b][1]&&d.userContactAttendees.push(a[b][1]);d._addAttendeesToStore(d.userContactAttendees),d.userContactAttendees=[]})},_getAssociationData:function(a){var b=new s,c={last:!1};return this._getSlxAssociation("User",a,c,function(a,c){if(a&&a.length>0){var d=null;a[0].Contact&&(this._updateUserContactList(a[0].UserId,a[0].ContactId),d=this._setAttendeeEntityFromContactLead("Contact",a[0].Contact)),b.resolve(d)}},this),b},_addPrimaryContact:function(a){this._initialPrimaryContact&&(this._attendeeExists(this._initialPrimaryContact.$key)||this._addContactAttendee(this._initialPrimaryContact)),this._initialPrimaryContact=!1},_addContactAttendee:function(a){var b=[],c=null;a&&(this.resetPrimary(a.$key),this._grid.mode,a.Account?(a.AccountName=a.Account.AccountName,c=this._setAttendeeEntityFromContactLead("Contact",a),c.IsPrimary=!0,c.general=!0,b.push(c),this._addAttendeesToStore(b,!0)):i._getContactData(a.$key,function(a){a&&(c=this._setAttendeeEntityFromContactLead("Contact",a),c.IsPrimary=!0,c.general=!0,b.push(c),this._addAttendeesToStore(b,!0))},this))},_addLeadAttendee:function(a){var b=[],c=null;a&&(this.resetPrimary(a.$key),a.Email||a.WorkPhone?(c=this._setAttendeeEntityFromContactLead("Lead",a),c.general=!0,c.IsPrimary=!0,b.push(c),this._addAttendeesToStore(b,!0)):(this._removeLeadAttendee(),i._getLeadData(a.$key,function(a){a&&(c=this._setAttendeeEntityFromContactLead("Lead",a),c.general=!0,c.IsPrimary=!0,b.push(c),this._addAttendeesToStore(b,!0))},this)))},_removeAssociatedContact:function(b){if(this.userContactList[b])for(var c=this,d=this.userContactList[b].ContactId,e=this._grid.rowCount,f=0;f<e;f++){var g=this._grid.getItem(f);if(g.EntityId===d){c._grid.store.deleteItem(g),g.IsPrimary&&(g.attendeeTab=!0,g.PrimaryChecked=!1,a.publish("/entity/activityAttendee/primaryChanged",[g,this]));break}}},checkStoreItem:function(b){var c=new s;return this._grid.store.fetch({onComplete:function(d){var e=!1;a.forEach(d,function(a,c){a&&a.EntityId==b&&(e=!0)}),c.resolve(e)}}),c},_removeContactAttendee:function(){var b=this;this._grid.store.fetch({onComplete:function(c){a.forEach(c,function(a,c){a&&a.general&&"Contact"==a.EntityType&&b._grid.store.deleteItem(a)})}})},_removeLeadAttendee:function(){var b=this;this._grid.store.fetch({onComplete:function(c){a.forEach(c,function(a,c){a&&a.general&&"Lead"==a.EntityType&&b._grid.store.deleteItem(a)})}})},_addLeadAttendees:function(b){var c=this._grid,d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=function(){var e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("activities").setOperationName("AddLeadAttendees"),f=h.getCurrentEntityId(),g={$name:"AddLeadAttendees",request:{ActivityId:f,leadIds:b.join()}};e.execute(g,{success:function(a){c.refresh()},failure:function(b){Sage.UI.Dialogs.showError(a.string.substitute("Error adding lead attendees",[b])),c.refresh()}})};b.length>0&&(c.showLoading(),e())},_getNewContactAttendees:function(){return this._newItems},setInitialPrimaryContact:function(a){this._initialPrimaryContact=a},refreshGrid:function(){this._grid.saveChanges(),this._grid.refresh()},_addAttendeesToStore:function(b,c){var d=h.getCurrentEntityId();if("insert"!==this._grid.mode&&d){for(var e=[],f=0;f<b.length;f++){var g=b[f];g.Account=null,this._attendeeExists(g.EntityId)||(this._newItems.push(g),g.Activity={$key:d},e.push(this._saveGridActivityAttendee(g)))}new n(e).then(function(d){a.publish("/entity/activityAttendee/add",[d.length,this]),c&&b&&b.length})}else{for(var i=[],f=0;f<b.length;f++){var g=b[f];if(!this._attendeeExists(g.EntityId)){for(var j=-1,k=0,l=this._newItems.length;k<l;k++)if(this._newItems[k].$key===g.EntityId){j=k;break}-1===j&&this._newItems.push(g),i.push(g)}}this._grid.store.addItemsToCache(this,i)}this._grid.refresh()},_saveGridActivityAttendee:function(a){var b=new s;return this._grid.store.saveNewEntity(a,function(){b.resolve("success")},function(){b.resolve("success")},this),b},_addAdhocAttendee:function(){this._grid.store.newItem({onComplete:function(a){var b=h.getCurrentEntityId();b||(b=this.actEditor._makeTempID()),a.Activity={$key:b},this._newItems.push(association),"insert"===this._grid.mode?this._grid.store.addToCache(this,a,1):this._grid.store.saveNewEntity(a),this._grid.refresh()},scope:this})},_activitySaved:function(a){var b=new s;if("insert"===this._grid.mode){for(var c=a.$key,d=[],e=[],f=null,g=0;g<this._newItems.length;g++){g;var h=this._newItems[g];h.Account=null,h.Activity={$key:c},h.IsPrimary?f=h:e.push(h)}if(e.length>0&&d.push(this._saveActivityAttendees(e)),this._newItems=[],f){var i=this._updatePrimaryAttendee(f,a);d.push(i)}new n(d,!1).then(function(a){b.resolve({success:!0})})}else this._grid.saveChanges(),b.resolve({success:!0}),this._newItems=[],this._uncheckItem=null;return b},_updatePrimaryAttendee:function(a,b){var c=new s,d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("activities").setOperationName("UpdatePrimaryActivityAttendee"),f={$name:"UpdatePrimaryActivityAttendee",request:{entity:b,entityId:a.EntityId,isAttendee:a.IsAttendee,roleName:a.RoleName}};return e.execute(f,{success:function(a){c.resolve({success:!0})},failure:function(a){},scope:this}),c},_historySaved:function(a){var b=new s;if("insert"===this._grid.mode){for(var c=a.$key,d=[],e="",f=0;f<this._newItems.length;f++){f;var g=this._newItems[f];g.Account=null,g.History={$key:c},e!==g.EntityId&&(d.push(this._saveHistoryAttendee(g)),e=g.EntityId)}this._newItems=[];new n(d).then(function(a){b.resolve({success:!0})})}return b},_saveActivityAttendee:function(a){var b=new s;new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic")).setResourceKind("activityAttendees").create(a,{success:function(){b.resolve("success")},failure:function(){},scope:this});return b},_saveActivityAttendees:function(a){var b=new s,c=new Sage.SData.Client.SDataBatchRequest(e.getSDataService("dynamic"));return c.setResourceKind("activityAttendees"),c.using(m.hitch(this,function(){for(var b=0;b<a.length;b++){var c=new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic"));c.setResourceKind("activityAttendees"),c.create(a[b],{scope:this,ignoreETag:!0})}})),c.commit({scope:this,ignoreETag:!0,success:function(a){b.resolve("success")},failure:function(a){}}),b},_saveHistoryAttendee:function(a){var b=new s;new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic")).setResourceKind("historyAttendees").create(a,{success:function(){b.resolve("success")},failure:function(){},scope:this});return b},_dialogHide:function(){this._newItems=[],this._grid.store.clearCache(),this._grid._clearData(),this._grid.markClean(),this._uncheckItem=null,this._gridStarted=!1},destroy:function(){this.lup_Contact.destroy(),this.lup_Lead.destroy(),this._gridStarted=!1,this.inherited(arguments)},_tabShow:function(){if(this._grid){this._grid.get("mode");0!=this.editorMode.indexOf("New")&&this._activityId?this._grid.set("mode",""):this._grid.set("mode","insert"),this._grid.refresh(),this.lup_Contact&&(this.lup_Contact.resetGrid(),this.lup_Contact.destroy()),this.lup_Lead&&(this.lup_Lead.resetGrid(),this.lup_Lead.destroy()),this.createLookups(),this._gridStarted=!0}},createLookups:function(){var a=Sage.Services.getService("LookupService");if(a){var b=this,c=a.getLookupInstance("Contact","activityContactAttendee");c&&(this.lup_Contact=c,this.lup_Contact.doSelected=function(a){b._processContactLookupResults(a)});var d=a.getLookupInstance("Lead","activityLeadAttendee");d&&(this.lup_Lead=d,d.doSelected=function(a){b._processLeadLookupResults(a)})}},setToReadOnly:function(a){var b=["attendeeSpeedSearch","attendeeAddContact","attendeeeAddLead","attendeeDelete"];this._bulkSetProperty(this,b,"disabled",a)},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=dijit.byId(b[e]);f&&f.set(c,d)}}})})},"Sage/UI/SLXPreviewGrid":function(){define(["./SLXPreviewGrid/Grid","./SLXPreviewGrid/FilterPanel","./SLXPreviewGrid/Filter/DateRange","./SLXPreviewGrid/Filter/Text"],function(a,b,c,d){return{Grid:a,FilterPanel:b,Filter:{DateRange:c,Text:d}}})},"Sage/UI/SLXPreviewGrid/Grid":function(){define(["Sage/UI/EditableGrid","dijit/layout/BorderContainer","dijit/form/SimpleTextarea","dijit/_Widget","dijit/_Templated","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.UI.SLXPreviewGrid.Grid",[d,b],{filterText:"Filter",previewField:"",columns:null,tools:null,slxContext:null,dblClickAction:null,contextualConditionFunction:null,liveSplitters:!0,gutters:!1,gridNodeId:"",_filter:null,_grid:null,_preview:null,constructor:function(){this.connections=[]},amIInATab:function(){return!(!this.slxContext||!this.slxContext.workspace)&&this.slxContext.workspace.indexOf("TabWorkspace")>-1},isMyTabVisible:function(){return!this.amIInATab()||!TabControl||TabControl.getState().isTabVisible(this.slxContext.tabId)},postMixInProperties:function(){dojo.mixin(this,f),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.previewField&&(this._preview=this._buildPreview()),this._filter=this._buildFilter(),this._grid=this._buildGrid()},startup:function(){if(!this._started&&(this.inherited(arguments),this.domNode.style.visibility="visible",this._preview)){var a=this.getSplitter("right");this.connections.push(dojo.connect(a,"_stopDrag",this,function(){this._setPref("previewSize",this._preview.domNode.style.width),this.layout()}))}},getSelectedRecords:function(a){var b=this._grid.selection.getSelected();return dojo.map(b,function(b){var c={};return dojo.forEach(a,function(a){c[a]=this._grid.store.getValue(b,a)},this),c},this)},refresh:function(){this._grid.refresh()},setSortIndex:function(a,b){this._grid.setSortIndex(a,b)},setSortColumn:function(a,b){for(var c=0,d=0;d<this.columns.length;d++)a===this.columns[d].field&&(c=d);this._grid.setSortIndex(c,b)},addAssociatedItems:function(){this._grid.addAssociatedItems.apply(this._grid,arguments)},onSelected:function(){},_buildPreview:function(){var a=new c({style:"height:100%; overflow: auto; width: "+this._getPref("previewSize","150px"),region:"right",splitter:!0,readOnly:!0});return this.addChild(a),dojo.addClass(a.domNode,"preview-grid-text"),a},_buildGrid:function(){var b=[];this._filter&&b.push({id:this.id+"_Filter",imageClass:"icon_Filter_16x16",tooltip:this.filterText,handler:dojo.hitch(this,function(){this._filter.toggle(),this.layout()})}),this.tools&&dojo.forEach(this.tools,function(a){b.push(a)});var c={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};if(!this.storeOptions)throw"SLXPreviewGrid configuration is missing storeOptions";this.storeOptions.select=this.storeOptions.select||[],this.storeOptions.select.push("Id"),this.storeOptions.select.push(this.previewField);var d=new a({id:this.domNode.id+"_grid",gridNodeId:this.id,tabId:this.slxContext.tabId,context:this.slxContext,region:"center",columnDefaults:{editable:!1},columns:this.columns,tools:b,contextualCondition:c,storeOptions:this.storeOptions,keepSelection:!0});return this.connections.push(dojo.connect(d,"onSelected",this,this._updatePreviewText)),this.connections.push(dojo.connect(d.store,"onSuccess",this,this._updatePreviewText)),this.dblClickAction&&dojo.connect(d,"onRowDblClick",this,function(a){var b=d.getItem(a.rowIndex),c=d.store.getValue(b,"$key");this.dblClickAction(c,b)}),this._filter&&dojo.connect(this._filter,"onFilterApply",this,function(a){c.conditions=this._filter.getQuery(),d.refresh()}),this.addChild(d),d},destroy:function(){for(var a=this.connections.length,b=0;b<a;b++)dojo.disconnect(this.connections.pop());this.inherited(arguments)},resetContextualCondition:function(a){this.contextualConditionFunction=a;var b={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};this._grid.resetContextualCondition(b)},_updatePreviewText:function(){if(this.previewField){var a=this._grid.selection.getSelected(),b="";a.length>0&&a[0]&&(b=a[0][this.previewField]||this._grid.store.getValue(a[0],this.previewField)),this._preview.set("value",b)}},_buildFilter:function(){var a=[];if(dojo.forEach(this.columns,function(b){if(b.filterConfig){var c=dojo.mixin(dojo.clone(b),b.filterConfig);c.label||(c.label=b.name),a.push(c)}}),0===a.length)return null;var b=new Sage.UI.SLXPreviewGrid.FilterPanel({id:this.id+"_filterpanel",region:"top",filterConfig:a,style:"display: none"});return this.addChild(b),b},_getPref:function(a,b){var c=window.localStorage,d=this.id+a;return c&&c[d]?c[d]:b},_setPref:function(a,b){var c=window.localStorage;c&&(c[this.id+a]=b)}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup":function(){define("Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup",["dojo/_base/html","Sage/Data/SDataServiceRegistry","dijit/Dialog","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dojo/_base/array","dijit/registry","dojo/text!./templates/SpeedSearchLookup.html","dojo/_base/declare","Sage/UI/Controls/Grid","dojo/i18n!./nls/SpeedSearchLookup","Sage/Store/SData"],function(html,sDataServiceRegistry,Dialog,_Widget,_Templated,lang,string,array,registry,template,declare,Grid,nlsStrings,SDataObjectStore){var widget=declare("Sage.MainView.ActivityMgr.AttendeeLookup.SpeedSearchLookup",[_Widget,_Templated],{id:"speedSearchLookup",btnIcon:"images/icons/plus_16x16.gif",btnToolTip:"Lookup",dialogTitle:"Contact/Lead Look up",closeText:"Close",loadingText:"Loading...",_initialized:!1,_started:!1,dialogButtonText:"Search",widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),srchBtnCaption:"Search",_store:null,_grid:null,currentPage:0,pageSize:100,_storeOptions:null,_entry:null,indexes:[{indexName:"Contact",indexType:1,isSecure:!0},{indexName:"Lead",indexType:1,isSecure:!0}],types:["Contact","Lead"],iconPathsByType:{Account:"content/images/icons/Company_24.png",Activity:"content/images/icons/To_Do_24x24.png",Contact:"content/images/icons/Contacts_24x24.png",History:"content/images/icons/journal_24.png",Lead:"content/images/icons/Leads_24x24.png",Opportunity:"content/images/icons/opportunity_24.png",Ticket:"content/images/icons/Ticket_24x24.png"},constructor:function(){lang.mixin(this,nlsStrings)},postMixInProperties:function(){},startup:function(){this._buildGrid()},extractTypeFromItem:function(a){for(var b=0;b<this.types.length;b++)if(-1!==a.source.indexOf(this.types[b]))return this.types[b];return null},extractDescriptorFromItem:function(a,b){var c="";switch(b){case"Contact":case"Lead":c=string.substitute("${lastname}, ${firstname}",this.getFieldValues(a.fields,["firstname","lastname"]))}return c},extractKeyFromItem:function(a){var b,c;return(b=a.displayName)?(c=b.length,b.substring(c-12)):""},getFieldValue:function(a,b){for(var c=0;c<a.length;c++){var d=a[c]
;if(d.fieldName==b)return d.fieldValue}return""},getFieldValues:function(a,b){var c={};return array.forEach(b,function(a){c[a]=""}),array.forEach(a,function(a){array.forEach(b,function(b,d){a.fieldName===b&&(c[b]=a.fieldValue)})}),c},showLookup:function(a){this._dialog.set("title",this.dialogTitle),this.eventDefaultValues=a||{},this._dialog.show(),this._initialized||this._initializeList(),this._dialog.set("refocus",!1),this.connect(this._dialog,"onHide",this.destroy)},_initializeList:function(){this._started=!1;var a=[{field:"$descriptor",label:this.colName,width:"20%",sortable:!1},{field:"type",label:this.colType,width:"10%",sortable:!1},{field:"accountName",label:this.colAccount,width:"30%",sortable:!1},{field:"title",label:this.colTitle,width:"10%",sortable:!1},{field:"email",label:this.colEmail,width:"30%",sortable:!1},{field:"phone",label:this.colWorkPhone,width:"30%",sortable:!1}];this._entry={request:{docTextItem:-1,searchText:"",searchType:1,noiseFile:"PMINoise.dat",includeStemming:!1,includeThesaurus:!1,includePhonic:!1,useFrequentFilter:!1,indexes:this.indexes,whichPage:this.currentPage,itemsPerPage:this.pageSize,filters:null},response:null};var b=this,c=function(a,c){this._initialized=!0,array.forEach(a,function(a,c){a.type=b.extractTypeFromItem(a),a.$descriptor=a.$descriptor||b.extractDescriptorFromItem(a,a.type),a.$key=b.extractKeyFromItem(a),a.accountName=b.getFieldValue(a.fields,"account"),a.title=b.getFieldValue(a.fields,"title"),a.email=b.getFieldValue(a.fields,"email"),a.phone=b.getFieldValue(a.fields,"phone")})};this._storeOptions={service:sDataServiceRegistry.getSDataService("system"),contractName:"system",operationName:"executeSearch",entry:this._entry,queryArgs:{count:100},onComplete:c,operationSDataStore:"Sage.SData.Client.SDataServiceOperationRequest",itemsProperty:"response.items",totalCountProperty:"response.totalCount"};var d=this._store=new SDataObjectStore(this._storeOptions);if(!this._grid){var e=this._grid=new Grid({id:"speedSearchGrid",store:d,columns:a,minRowsPerPage:100,placeHolder:dojo.byId(this._speedSearchGrid),selectionMode:"extended",columnHiding:!0,columnResizing:!0,columnReordering:!0,rowSelection:!0});e.onRowDblClick=lang.hitch(this,function(a){this.onDoubleClick()}),e.resize()}},onDoubleClick:function(){this.getGridSelections()},uninitialize:function(){this.contentNode&&(array.forEach(this.mainHandles,function(a){a.remove()}),this._destroyContent(),this.inherited(arguments))},_destroyContent:function(){this.contentNode&&(array.forEach(registry.findWidgets(this.contentNode),function(a){a.destroy(!1)}),array.forEach(this.handles,function(a){a.remove()}),this.handles=[],this.contentNode.innerHTML="")},initDialog:function(){},_onKey:function(a){var b=this,c=arguments;dojo.query("*",this.domNode).forEach(function(d,e,f){d===a.target&&b.inherited(c)})},getGridSelections:function(){var a=this._grid.getSelectedRowData();this._grid.clearSelection(),this.doSelected(a)},doSelected:function(a){},_cancelClick:function(){this.hide()},hide:function(){this._dialog.hide(),this._started=!1},_doSearch:function(){this._valueBox.value&&(this._entry.request.searchText=this._valueBox.value,this._store.entry=this._entry,this._grid.refresh())},_onKeyPress:function(a){13!=a.keyCode&&10!=a.keyCode||(this._valueBox.blur(),this._doSearch())},destroy:function(){var a=dijit.byId([this.id,"-Dialog"].join(""));this.btnIcon&&dojo.destroy(this.btnIcon),dojo.disconnect(this._doSearchConnection),dojo.unsubscribe(this._addCondHandle),dojo.unsubscribe(this._removeCondHandle),this.conditionMgr&&this.conditionMgr.destroy(!1),a&&a.uninitialize(),a.destroyRecursive(),this.inherited(arguments)}});return widget})},"Sage/UI/Controls/SingleSelectPickList":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/ComboBox","Sage/UI/Controls/PickList","dojo/text!./templates/SingleSelectPickList.html","dojo/string","dojo/_base/declare","dojo/keys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return l("Sage.UI.Controls.SingleSelectPickList",[i,a,b,c],{store:null,cssClass:"",constructor:function(a){a.clientId&&(this.id=a.clientId+"-SingleSelectPickList"),a.cssClass&&(this.cssClass=a.cssClass),this.inherited(arguments)},postCreate:function(){this._setupTooltips(this.comboBox._buttonNode,this.comboBox.textbox),this._setupRenderAsHyperlink(),this._setupTooltips(),this.inherited(arguments);var a=dojo.byId(this._textId);a&&a.value&&this.comboBox.value!==a.value&&this.comboBox.set("value",a.value),this.cssClass&&this.cssClass.length>0&&(this.comboBox.domNode.className=this.cssClass+" "+this.comboBox.domNode.className)},_setupTooltips:function(){this.controlTooltip&&""!==this.controlTooltip&&this.comboBox.set("title",this.controlTooltip),this.buttonTooltip&&""!==this.buttonTooltip&&this.comboBox._buttonNode&&(this.comboBox._buttonNode.title=this.buttonTooltip)},_setupRenderAsHyperlink:function(){this.renderAsHyperlink&&(dojo.addClass(this.comboBox.domNode,"comboAsHyperlink"),dojo.connect(this.comboBox.domNode,"onclick",this,function(){this.comboBox.loadDropDown()}))},_loadData:function(){var a=new dojo.Deferred;this.getPickListData(a),a.then(dojo.hitch(this,function(a){"string"==typeof a&&this.comboBox.set("value",a);for(var b,c=[],d=0;d<a.items.$resources.length;d++)if(this.filter===a.items.$resources[d].filter||""===this.filter){var f=a.items.$resources[d];c.push({id:f.$key,code:f.code,number:f.number,text:f.text,filter:f.filter})}this.storeData={identifier:"id",label:"text",items:c},this.store=new e({data:this.storeData}),this.comboBox.set("store",this.store),this.comboBox.set("searchAttr","text"),this.store._forceLoad();var g=dojo.byId(this._textId),h=dojo.byId(this._picklistId),i=dojo.byId(this._codeId);if(c[0])if(g&&g.value)this.lastValidValue=g.value,this.initialValue=this.lastValidValue,this.comboBox.set("value",this.lastValidValue);else if(h&&h.value)(b=this.getStoreItemById(h.value))&&(this.lastValidValue=this.store.getValue(b,"text"),this.initialValue=this.lastValidValue,this.comboBox.set("value",this.lastValidValue));else if(i&&i.value)(b=this.getStoreItemByCode(i.value))&&(this.lastValidValue=this.store.getValue(b,"text"),this.initialValue=this.lastValidValue,this.comboBox.set("value",this.lastValidValue));else{var j=this.comboBox.get("value");j||""===j?this.lastValidValue=j:(this.lastValidValue=c[0].text,this.comboBox.set("value",this.lastValidValue))}else this.comboBox.set("value","")}),function(a){}),!1===this.get("canEditText")&&(this.comboBox.textbox.readOnly=!0);var b=this.get("maxLength");b>0&&this.comboBox.set("maxLength",b)},uninitialize:function(){this.inherited(arguments)},getStoreItemById:function(a){var b,c=null;return this.store&&this.storeData&&dojo.forEach(this.storeData.items,function(d,e,f){if(d.id&&(b=this.store.getValue(d,"id"))===a)return c=d},this),c},getStoreItemByCode:function(a){var b,c=null;return this.store&&this.storeData&&dojo.forEach(this.storeData.items,function(d,e,f){if(d.code&&(b=this.store.getValue(d,"code"),b&&(b=k.trim(b),b=b.toUpperCase()),a=k.trim(a),a=a.toUpperCase(),b===a))return c=d},this),c},getStoreItemByValue:function(a){var b,c=null;return a&&this.store&&dojo.forEach(this.storeData.items,function(d,e,f){if(d.text&&(b=this.store.getValue(d,"text"),b&&(b=k.trim(b),b=b.toUpperCase()),a=k.trim(a),a=a.toUpperCase(),b===a))return c=d},this),c},_onChange:function(a){this.onChange(a)},_setPickListNameAttr:function(a){this.inherited(arguments),this._loadData()},_setValueAttr:function(a){this.inherited(arguments),this.comboBox.set("value",a)},_getValueAttr:function(){return this.comboBox.get("value")},_getCodeAttr:function(){var a,b,c;return b="",c=this._getValueAttr(),a=this.getStoreItemByValue(c),a&&(b=this.store.getValue(a,"code")),b},_getIdAttr:function(){var a,b;return b="",a=this.getStoreItemByValue(this._getValueAttr()),a&&(b=this.store.getValue(a,"id")),b},templateString:j,widgetsInTemplate:!0,storeData:null,lastValidValue:"",initialValue:"",disabled:!1,_setDisabledAttr:function(a){this.disabled=a,this.comboBox.set("disabled",a)},_getDisabledAttr:function(){return this.disabled=this.comboBox.get("disabled"),this.disabled},focus:function(){this.comboBox.focus()},_onKeyDown:function(a){a.keyCode===m.ENTER&&this.onChange(this._getValueAttr())},onChange:function(a){if(this.storeData){var b=this.comboBox.get("value");if(b!=this.initialValue){if(this.get("itemMustExist")){var c=dojo.some(this.storeData.items,function(b){return b.text==a||""==a},this);if(c&&(this.lastValidValue=a),!c&&"undefined"!==this.lastValidValue&&null!==this.lastValidValue)return void this.comboBox.set("value",this.lastValidValue)}if(this.comboBox.isValid()){var d="",e="";dojo.forEach(this.storeData.items,function(a,c,f){a.text==b&&(d=a.code,e=a.id)},this),this.setASPNETInputs(b,d,e)}}}}})})},"Sage/Extensions/UI/Columns/Radio":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(a,b){return a("Sage.Extensions.UI.Columns.Radio",dojox.grid.cells.Bool,{formatEditing:function(a,b){var c="group"==this.radioType?"rdo_"+this.field:"rdo_"+this.field+"_"+b;return'<input type="radio" '+(a?"checked":"")+' name="'+c+'"  style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&(this.resetRows(a.grid,a.rowIndex,this.field),this.applyStaticValue(a.rowIndex))},resetRows:function(a,b,c){this.currentRow=b;var d=this;a.store.fetch({onComplete:function(b){dojo.forEach(b,function(b,e){e!=d.currentRow&&a.store.setValue(b,c,!1)})}})}})})},"Sage/Extensions/UI/Columns/CheckBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/query"],function(a,b,c){return a("Sage.Extensions.UI.Columns.CheckBox",dojox.grid.cells.Bool,{checkBoxIds:null,constructor:function(a){this.checkBoxIds=[]},formatEditing:function(a,b){var c="chk_"+this.field+"_"+b;this.checkBoxIds[c]||this.checkBoxIds.push(c);var d="",e=this.grid.getItem(b);e&&(d=e.EntityId);var f="chk_"+this.field+"_"+d;return!0===a||1===a?'<input type="checkbox" class="attendeeGridIsPrimary" id="'+f+'" name="'+c+'" checked="checked" />':'<input type="checkbox" class="attendeeGridIsPrimary" id="'+f+'" name="'+c+'" />'},doclick:function(a){if("INPUT"==a.target.tagName){var b=a.grid.getItem(a.rowIndex);a.target.checked?b.checked=!0:b.checked=!1,this.checkBoxClicked&&"function"==typeof this.checkBoxClicked&&this.checkBoxClicked.call(this,b),this.resetRows(a.grid,a.rowIndex,this.field,b),"insert"==a.grid.mode&&this.applyStaticValue(a.rowIndex)}},resetRows:function(a,b,c,d){for(var e,f=a.rowCount,g=0;g<f;g++){var h=a.getItem(g);h&&h.EntityId!==d.EntityId?(e="chk_"+this.field+"_"+h.EntityId,dojo.byId(e).checked=!1,a.store.setValue(h,c,!1)):h&&h.EntityId===d.EntityId&&(e="chk_"+this.field+"_"+h.EntityId,"insert"==a.mode?a.store.setValue(h,c,!0):"insert"!==a.mode&&h.IsPrimary?a.store.setValue(h,c,!1):"insert"===a.mode||h.IsPrimary||a.store.setValue(h,c,!0))}},resetCheckBoxes:function(a){for(var b=0;b<this.checkBoxIds.length;b++)a!=b&&(dojo.byId(this.checkBoxIds[b]).checked=!1);c(".attendeeGridIsPrimary").forEach(function(a,b,c){})}})})},"Sage/Extensions/UI/Columns/PickListSelect":function(){define(["dojo/_base/declare","dojox/grid/cells/_base","Sage/UI/Controls/PickList"],function(a,b,c){return a("Sage.Extensions.UI.Columns.PickListSelect",dojox.grid.cells.Select,{storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(a){this.inherited(arguments),"id"===this.storageMode&&"AsText"===this.displayMode&&this.pickListName&&this._loadPickList()},_loadPickList:function(){var a=new dojo.Deferred,b={pickListName:this.pickListName,canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:this.storageMode,sort:!1,displayMode:this.displayMode};this.pickList=new c(b),this.pickList.getPickListData(a),a.then(dojo.hitch(this,this._loadData),function(a){})},_loadData:function(a){for(var b=[],c=[],d=0;d<a.items.$resources.length;d++){var e=a.items.$resources[d];c.push(e.text),e.code?b.push(e.code):b.push(e.text)}this.options=c,this.values=b.length>0?b:c}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/LookupService":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/ContactLookupConfig","Sage/MainView/ActivityMgr/AttendeeLookup/LeadLookupConfig","dojo/_base/declare"],function(a,b,c){var d=c("Sage.MainView.ActivityMgr.AttendeeLookup.LookupService",null,{_lookupConfigs:null,constructor:function(){},_initLookupConfigs:function(){this._lookupConfigs=[{lookupName:"Contact",lookupDisplayName:"Contact",configProviderType:a,instance:!1},{lookupName:"Lead",lookupDisplayName:"Lead Loookup",configProviderType:b,instance:!1}]},getLookupConfigs:function(){return this._lookupConfigs?this._lookupConfigs:(this._initLookupConfigs(),this._lookupConfigs)},getLookupConfig:function(a){for(var b=this.getLookupConfigs(),c=0;c<b.length;c++)if(b[c].lookupName.toUpperCase()===a.toUpperCase())return b[c];return null},AddLookupConfig:function(a){var b=this.getLookupConfig(a.lookupName);if(b)b.configuration=a;else{var c={lookupName:a.lookupName,lookupDisplayName:a.lookupDisplayName,configProviderType:a,instance:!1};this.getLookupConfigs().push(c)}},RemoveLookupConfig:function(a){},getLookupConfigInstance:function(a){var b=this.getLookupConfig(a);if(b)return b.instance?(b.instance.rebuild(),b.instance):(b.instance=new b.configProviderType,b.instance)},getLookupInstance:function(a,b){var c=this.getLookupConfigInstance(a),d=null;return c&&(d=c.getLookupInstance(b)),d}});if(Sage.Services.hasService("LookupService")){Sage.Services.getService("LookupService");"Sage.MainView.ActivityMgr.AttendeeLookup.LookupService"!==actSvc.declaredClass&&(Sage.Services.removeService("LookupService"),Sage.Services.addService("LookupService",(new d)()))}else Sage.Services.addService("LookupService",new d);return d()})},"Sage/MainView/ActivityMgr/AttendeeLookup/ContactLookupConfig":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig","Sage/UI/SDataLookup","dojo/i18n!./nls/ContactLookupConfig","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){return d("Sage.MainView.ActivityMgr.AttendeeLookup.ContactLookupConfig",[a],{constructor:function(){e.mixin(this,c),this.lookupType=b,this._initConfig()},_initConfig:function(){this.id="_contactLookup",this.lookupName="Contact",this.lookupDisplayName="Contact Lookup",this.entityName="Contact",this.dialogTitle=this.dialogTitleText,this.cells=null,this.cells=this.getCells(),this.defaultCell={sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1,pickListName:null,defaultValue:""},this.storeOptions={resourceKind:"contacts",select:["LastName","FirstName","Title","Type","Account/$key","Account/AccountName","ContactUser/Userid","Address/Timezone"],sort:[{attribute:"LastName"}]},this.preFilters=[],this.gridOptions={},this.query={},this.displayMode=5,this.isModal=!0,this.initialLookup=!1,this.seedValue="X",this.seedProperty="Account.Id"},getCells:function(){return this.cells?this.cells:(this.cells=[{label:this.colFirstName,field:"FirstName"},{label:this.colLastName,field:"LastName"},{label:this.colTitle,field:"Title"},{label:this.colAccount,field:"AccountName"},{label:this.colWorkPhone,field:"WorkPhone"},{label:this.colEmail,field:"Email"}],this.cells)},doSelected:function(a){alert("override the doSelect method")},getConfig:function(a){return{id:this.id+"_base_"+a,btnToolTip:"",structure:this.cells,gridOptions:this.gridOptions,displayMode:this.displayMode,storeOptions:this.storeOptions,isModal:this.isModal,initialLookup:this.initialLookup,preFilters:this.preFilters,query:this.query,seedValue:this.seedValue,seedProperty:this.seedProperty,overrideSeedValueOnSearch:!0,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:this.doSelected,cancelText:this.cancelText}},getLookupInstance:function(a){var b=this.getConfig(a);return new this.lookupType(b)}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig":function(){define(["Sage/UI/Controls/Lookup","dojo/_base/declare"],function(a,b){return b("Sage.MainView.ActivityMgr.AttendeeLookup.BaseLookupConfig",null,{lookupName:"LookupName",lookupDisplayName:"Lookup Display Name",lookupType:a,entityName:"entityName",id:!1,cells:[],defaultCell:{sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1,picklistName:null,defaultValue:""},gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"someEntity",sort:[{attribute:"SortField"}]},displayMode:0,isModal:!0,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],query:{},dialogTitle:"Lookup",dialogButtonText:"Ok",allowClearingResult:!0,readonly:!0,showEntityInfoToolTip:!1,_nlsResources:{},constructor:function(){},rebuild:function(){this._lookup=null},getLookupInstance:function(a){var b=this.getConfig(a);return new this.lookupType(b)},addCell:function(a,b){},removeCell:function(a){},getCells:function(){return this.cells},getConfig:function(a){var b={id:this.id+"_base_"+a,structure:this.cells,gridOptions:this.gridOptions,storeOptions:this.storeOptions,isModal:this.isModal,displayMode:this.displayMode,initialLookup:this.initialLookup,preFilters:this.preFilters,returnPrimaryKey:this.returnPrimaryKey,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:function(){alert("override the doSelect method")}};return{id:this.id+"_"+a,allowClearingResult:this.allowClearingResult,readonly:this.readonly,showEntityInfoToolTip:this.showEntityInfoToolTip,config:b}}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/LeadLookupConfig":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig","Sage/UI/SDataLookup","dojo/i18n!./nls/LeadLookupConfig","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){return d("Sage.MainView.ActivityMgr.AttendeeLookup.LeadLookupConfig",[a],{constructor:function(){e.mixin(this,c),this.lookupType=b,this._initConfig()},_initConfig:function(){this.id="_leadLookup",this.lookupName="Lead",this.lookupDisplayName="Lead Lookup",this.entityName="Lead",this.dialogTitle=this.dialogTitleText,this.cells=null,this.cells=this.getCells(),this.defaultCell={sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1,pickListName:null,defaultValue:""},this.storeOptions={resourceKind:"leads",select:["LastName","FirstName","Title","Type","Company","Address/Timezone"],sort:[{attribute:"LastName"}]},this.preFilters=[],this.gridOptions={},this.query={},this.isModal=!0,this.displayMode=5,this.initialLookup=!1},getCells:function(){return this.cells?this.cells:(this.cells=[{label:this.colFirstName,field:"FirstName"},{label:this.colLastName,field:"LastName"},{label:this.colTitle,field:"Title"},{label:this.colCompany,field:"Company"},{label:this.colWorkPhone,field:"WorkPhone"},{label:this.colEmail,field:"Email"}],this.cells)},getConfig:function(a){return{id:this.id+"_base_"+a,btnToolTip:"",structure:this.cells,gridOptions:this.gridOptions,displayMode:this.displayMode,storeOptions:this.storeOptions,isModal:this.isModal,initialLookup:this.initialLookup,preFilters:this.preFilters,query:this.query,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:function(){alert("override the doSelect method")},cancelText:this.cancelText}},getLookupInstance:function(a){var b=this.getConfig(a);return new this.lookupType(b)}})})},"Sage/Services/UserOptions":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(a,b){var c=b("Sage.Services.UserOptions",null,{constructor:function(b){this.inherited(arguments),dojo.mixin(this,b),b&&b.service||(this.service=a.getSDataService("system",!1,!0,!0))},get:function(a,b,c,d,e,f){var g=this._createRequest(a,b);void 0===f&&(f=!0),g&&g.read({success:c,failure:function(a){"function"==typeof d&&d(a)},scope:e||this,async:f})},set:function(b,c,d,e,f,g){var h=this._createRequest(b,c);f=f||function(a){},h&&h.read({success:dojo.hitch(h,function(b){b.value=d,a._removeFromLocalStorage("userOptions"),this.update(b,{success:e,scope:this})}),failure:f,scope:g||this})},getByCategory:function(a,b,c,d){var e=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);e.setResourceKind("userOptions"),e.setQueryArg("where","category eq '"+a+"'"),e.read({success:b,failure:function(a){"function"==typeof d&&d(a)},scope:c||this})},getByCategories:function(a,b,c){for(var d=new Sage.SData.Client.SDataResourceCollectionRequest(this.service),e="",f=",",g=0;g<a.length;g++)g==a.length-1&&(f=""),e+='"'+a[g]+'"'+f;d.setResourceKind("userOptions"),d.setQueryArg("where","category in ("+e+")"),d.setQueryArg("count","500"),d.read({success:b,failure:function(a){},scope:c||this})},_formatPredicate:function(a,b){return dojo.string.substitute("category eq '${0}' and name eq '${1}'",[b,a])},_createRequest:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(this.service);return c.setResourceSelector(this._formatPredicate(a,b)),c.setResourceKind("userOptions"),c},_virtuald:function(){var a=/^\/([^\/]+)\//.exec(location.pathname);return a?a[1]:""}});return Sage.Services.addService("UserOptions",new Sage.Services.UserOptions),Sage.UserOptionsService={getCommonOption:function(a,b,c){var d=c,e=Sage.Services.getService("UserOptions");e&&e.get(a,b,function(a){var b={category:a.category,option:a.name,optionValue:a.value};d&&d.call(window,b)})},setCommonOption:function(a,b,c,d){var e=Sage.Services.getService("UserOptions");e&&e.set(a,b,c,d)}},c})},"Sage/MainView/ActivityMgr/RecurringEditor":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","Sage/Utility/Activity","dijit/form/RadioButton","Sage/UI/Controls/Numeric","dijit/layout/StackContainer","dijit/layout/ContentPane","Sage/UI/NumberTextBox","dijit/form/CheckBox","dijit/form/Select","Sage/UI/Controls/DateTimePicker","dojo/date","dojo/i18n!./nls/RecurringEditor","dojo/text!./templates/RecurringEditor.html"],function(_Widget,_Templated,declare,lang,domClass,activityUtility,RadioButton,Numeric,StackContainer,ContentPane,NumberTextBox,CheckBox,Select,DateTimePicker,dDate,recurringEditorStrings,template){var _recurringCalculator=declare("Sage.MainView.ActivityMgr._RecurringCalculator",null,{startDate:new Date,initialStartDate:new Date,endDate:new Date,interval:1,occurances:1,activityRecurPeriodCode:0,recurPeriod:!1,editor:!1,constructor:function(a){lang.mixin(this,a)},calculateEndDate:function(){return isNaN(this.interval)||isNaN(this.occurances)||!this.recurPeriod||(this.endDate=dDate.add(this.startDate,this.recurPeriod,this.interval*this.occurances-this.interval)),this.endDate||this.startDate},calculateNumberOfOccurances:function(){var a=dDate.difference(this.startDate,this.endDate,this.recurPeriod),b=a/this.interval+1;return b=Math.floor(b)},set:function(a,b){switch(a.toLowerCase()){case"enddate":this.endDate=b,this.endDate.setHours(0),this.endDate.setMinutes(0);break;case"interval":this.interval=b;break;case"occurances":this.occurances=b;break;case"startdate":this.startDate=b,this.startDate.setHours(0),this.startDate.setMinutes(0);break;case"initialstartdate":this.initialStartDate=b,this.initialStartDate.setHours(0),this.initialStartDate.setMinutes(0);break;case"editor":this.editor=b;break;case"activityrecurperiodcode":this.activityRecurPeriodCode=b}},get:function(a){switch(a.toLowerCase()){case"enddate":return this.endDate;case"interval":return this.interval;case"occurances":return this.occurances;case"startdate":return this.startDate;case"editor":return this.editor;case"activityRecurPeriodCode":return this.activityRecurPeriodCode}return!1},_getTempStartDate:function(){return new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate())}}),dailyRecurringCalculator=declare("Sage.MainView.ActivityMgr.DailyRecurringCalculator",_recurringCalculator,{recurPeriod:"day"}),weeklyRecurringCalculator=declare("Sage.MainView.ActivityMgr.WeeklyRecurringCalculator",_recurringCalculator,{recurPeriod:"week",_checkedCount:0,_checkedDays:{},calculateEndDate:function(){if(this.editor){if(this.editor.countCheckedDays()<2)return isNaN(this.interval)||isNaN(this.occurances)||!this.recurPeriod||(this.endDate=dDate.add(this.startDate,this.recurPeriod,this.interval*this.occurances-this.interval)),this.endDate||this.startDate;for(var a=this.editor.getCheckedDays(),b=this._getTempStartDate(),c=this.occurances-1;c>0;)b=dDate.add(b,"day",1),c-=a[b.getDay()];return b}return this.endDate||this.startDate},calculateNumberOfOccurances:function(){var a=this.inherited(arguments),b=this.editor.countCheckedDays();if(b>1){var c=dDate.difference(this.startDate,this.endDate,"day"),d=dDate.difference(this.startDate,this.endDate,this.recurPeriod),e=0;if(7*d<=c){a=d*b;for(var f=c%7*-1,g=dDate.add(this.endDate,"day",f),h=this.editor.getCheckedDays();dDate.compare(this.endDate,g,"date")>=0;)h[g.getDay()]&&e++,g=dDate.add(g,"day",1)}a+=e}return a}}),monthlyRecurringCalculator=declare("Sage.MainView.ActivityMgr.MonthlyRecurringCalculator",_recurringCalculator,{recurPeriod:"month",calculateStartDate:function(){var a,b=lang.clone(this.initialStartDate),c=parseInt(this.editor._datesSelect.get("value"),10),d=parseInt(this.editor._weekdaySelect.get("value"),10),e=parseInt(this.editor._weeksSelect.get("value"),10);if(this.editor._rdoMonthlyOn.get("checked"))a=this.getNthDayOfMonth(this.initialStartDate,c),b=a;else if(this.editor._rdoMonthlyOnThe.get("checked")){a=activityUtility.setDateToNthWeekDay(this.initialStartDate,e,d),a.setHours(this.initialStartDate.getHours()),a.setMinutes(this.initialStartDate.getMinutes());var f=dojo.date.compare(this.initialStartDate,a,"date");0!=f&&(b=f>0?this.calculateFirstOccurrance(this.initialStartDate,a,e,d):a)}return b},calculateEndDate:function(){var a=this.inherited(arguments);if(5===this.activityRecurPeriodCode){var b=activityUtility.getNthWeekOfMonth(this.startDate),c=this.startDate.getDay();a=activityUtility.setDateToNthWeekDay(a,b,c)}return a},getNthDayOfMonth:function(a,b){var c=lang.clone(a);return a.getDate()>b&&(c=dojo.date.add(a,"month",1)),c.setDate(b),c},calculateFirstOccurrance:function(a,b,c,d){for(var e=b;dojo.date.compare(this.initialStartDate,e,"date")>0;)e=activityUtility.setDateToNthWeekDay(dojo.date.add(e,"month",1),c,d);return e}}),yearlyRecurringCalculator=declare("Sage.MainView.ActivityMgr.YearlyRecurringCalculator",_recurringCalculator,{recurPeriod:"year",calculateEndDate:function(){var a=this.inherited(arguments);if(8===this.activityRecurPeriodCode){var b=activityUtility.getNthWeekOfMonth(this.startDate),c=this.startDate.getDay();a.setMonth(this.startDate.getMonth()),a=activityUtility.setDateToNthWeekDay(a,b,c)}return a}}),recurringEditor=declare("Sage.MainView.ActivityMgr.RecurringEditor",[_Widget,_Templated],{activity:{},id:"",labelWidth:"80",startDate:new Date,initialStartDate:new Date,startDateChangedFromParent:!1,occurances:2,interval:1,activityRecurPeriodCode:0,recurringPeriods:{once:"once",daily:"daily",weekly:"weekly",monthly:"monthly",yearly:"yearly"},currentPeriod:"once",endCalculators:!1,_applyingActivityData:!1,widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){lang.mixin(this,recurringEditorStrings)},postMixInProperties:function(){if(!this.endCalculators){this.endCalculators={};var a={startDate:this.startDate,endDate:this.endDate,interval:1,occurances:1,editor:this};this.endCalculators[this.recurringPeriods.daily]=new dailyRecurringCalculator(a),this.endCalculators[this.recurringPeriods.weekly]=new weeklyRecurringCalculator(a),this.endCalculators[this.recurringPeriods.monthly]=new monthlyRecurringCalculator(a),this.endCalculators[this.recurringPeriods.yearly]=new yearlyRecurringCalculator(a)}},_setStartDateAttr:function(a){a.getMonth()===this.startDate.getMonth()&&a.getDate()===this.startDate.getDate()&&a.getFullYear()===this.startDate.getFullYear()||(this.startDateChangedFromParent=!0,this._applyingActivityData=!0,this.startDate=a,this.initialStartDate=a,this.dtp_startRecur.set("value",a),this._weeklySyncToStartDate(),this._monthlySyncToStartDate(),this._yearlySyncToStartDate(),this._calculateEnd(),this._applyingActivityData=!1,this.startDateChangedFromParent=!1)},_getStartDateAttr:function(){return this.startDate},_setOccurancesAttr:function(a){this.occurances=a,this.num_Occurances.set("value",a)},_getOccurancesAttr:function(){return this.occurances},_setActivityAttr:function(a){this.activity=a,this._setUI(),this._applyActivityData()},_getActivityAttr:function(){return this.activity},onTabShow:function(){this._panelContainer.resize()},_setUI:function(){var a=[];if(this._datesSelect.getOptions().length<1){for(var b=1;b<32;b++)a.push({value:b.toString(),label:b.toString()});this._datesSelect.addOption(a),this._yearDatesSelect.addOption(a)}this._monthNamesSelect.getOptions().length<1&&(a=[{value:"1",label:this.janText},{value:"2",label:this.febText},{value:"3",label:this.marText},{value:"4",label:this.aprText},{value:"5",label:this.mayText},{value:"6",label:this.junText},{value:"7",label:this.julText},{value:"8",label:this.augText},{value:"9",label:this.sepText},{value:"10",label:this.octText},{value:"11",label:this.novText},{value:"12",label:this.decText}],this._monthNamesSelect.addOption(a),this._yearMonthNamesSelect.addOption(a)),this._weeksSelect.getOptions().length<1&&(a=[{value:"1",label:this.firstText},{value:"2",label:this.secondText},{value:"3",label:this.thirdText},{value:"4",label:this.fourthText},{value:"5",label:this.lastText}],this._weeksSelect.addOption(a),this._yearWeeksSelect.addOption(a)),this._weekdaySelect.getOptions().length<1&&(a=[{value:"1",label:this.monText},{value:"2",label:this.tueText},{value:"3",label:this.wedText},{value:"4",label:this.thurText},{value:"5",label:this.friText},{value:"6",label:this.satText},{value:"0",label:this.sunText}],this._weekdaySelect.addOption(a),this._yearWeekdaySelect.addOption(a))},_onceChanged:function(a){this._setUI(),a&&(this._panelContainer.selectChild(this._oncePanel),this.interval=1,this._updateRecurringPeriod(this.recurringPeriods.once))},_dailyChanged:function(a){a&&(this._panelContainer.selectChild(this._dailyPanel),this._dailyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.daily),this._toggleEndCalculatorVisibility(this._rdoDailyEvery.get("checked")))},_dailyUpdateInterval:function(){this.interval=this._rdoDailyEvery.get("checked")?this._dailyEveryText.get("value"):this._dailyEveryAfterText.get("value"),isNaN(this.interval)&&(this.interval=1)},_weeklyChanged:function(a){a&&(this._panelContainer.selectChild(this._weeklyPanel),this._weeklyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.weekly),this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked")))},_weeklySyncToStartDate:function(){this._clearCheckedWeekdays(),this._enforceWeekdayChecked()},_weeklyUpdateInterval:function(){this._enforceWeekdayChecked(),this.interval=this._rdoWeeklyEvery.get("checked")?this._weeklyEveryText.get("value"):this._weeklyEveryAfterText.get("value"),isNaN(this.interval)&&(this.interval=1)},_monthlyChanged:function(a){a&&(this._panelContainer.selectChild(this._monthlyPanel),this._monthlyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.monthly),this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked")))},_monthlyUpdateInterval:function(){this.interval=this._rdoMonthlyOn.get("checked")?this._monthlyEveryText.get("value"):this._rdoMonthlyOnThe.get("checked")?this._monthlyOnTheText.get("value"):this._monthlyAfterText.get("value"),isNaN(this.interval)&&(this.interval=1)},_monthlySyncToStartDate:function(){this._datesSelect.set("value",this.startDate.getDate().toString()),this._weekdaySelect.set("value",this.startDate.getDay().toString()),this._weeksSelect.set("value",activityUtility.getNthWeekOfMonth(this.startDate).toString())},
_yearlyChanged:function(a){a&&(this._panelContainer.selectChild(this._yearlyPanel),this._yearlyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.yearly),this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked")))},_yearlyUpdateInterval:function(){this.interval=this._rdoYearlyOn.get("checked")?this._yearlyEveryText.get("value"):this._rdoYearlyEveryAfter.get("checked")?this._yearlyEveryAfterText.get("value"):1},_yearlySyncToStartDate:function(){this._monthNamesSelect.set("value",(this.startDate.getMonth()+1).toString()),this._yearDatesSelect.set("value",this.startDate.getDate().toString()),this._yearWeeksSelect.set("value",activityUtility.getNthWeekOfMonth(this.startDate).toString()),this._yearWeekdaySelect.set("value",this.startDate.getDay().toString()),this._yearMonthNamesSelect.set("value",(this.startDate.getMonth()+1).toString())},_updateRecurringPeriod:function(a){this._toggleEndCalculatorVisibility(a!==this.recurringPeriods.once),this.currentPeriod=a,this._calculateEnd(),this.onRecurPeriodChanged(a)},_toggleEndCalculatorVisibility:function(a){a?domClass.remove(this._startEndCalculator,"display-none"):domClass.add(this._startEndCalculator,"display-none")},_applyActivityData:function(){if(this._applyingActivityData=!0,this.activity&&this.activity.hasOwnProperty("Recurring")){if(this.startDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate),this.initialStartDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate),(this.activity.Timeless||activityUtility.isDateFiveSecondRuleTimeless(this.startDate))&&(this.startDate=new Date(this.startDate.getUTCFullYear(),this.startDate.getUTCMonth(),this.startDate.getUTCDate(),0,0,5)),this.activityRecurPeriodCode=this.activity.RecurPeriod,this.dtp_startRecur.set("value",this.startDate),!this.activity.Recurring)return this.rdo_Once.set("checked",!0),this._toggleEndCalculatorVisibility(!1),this._resetInterval(),this._weeklySyncToStartDate(),this._monthlySyncToStartDate(),this._yearlySyncToStartDate(),void(this._applyingActivityData=!1);switch(this._toggleEndCalculatorVisibility(!0),this.activity.RecurPeriod){case 0:case 1:this._applyDailyRecurringValues();break;case 2:case 3:this._applyWeeklyRecurringValues();break;case 4:case 5:case 6:this._applyMonthlyRecurringValues();break;case 7:case 8:case 9:this._applyYearlyRecurringValues();break;default:this.rdo_Once.set("checked",!0)}this._applyingActivityData=!1}},_applyEndCalculatorValues:function(){this.dtp_startRecur.set("value",this.startDate),this._rdoEndAfter.set("checked",!0),this.num_Occurances.set("value",this.activity.RecurIterations),this._calculateEnd()},_applyDailyRecurringValues:function(){this.rdo_Daily.set("checked",!0),this._toggleEndCalculatorVisibility(0===this.activity.RecurPeriod),this.interval=this.activity.RecurPeriodSpec,0===this.activity.RecurPeriod?(this._rdoDailyEvery.set("checked",!0),this._dailyEveryText.set("value",this.activity.RecurPeriodSpec),this._applyEndCalculatorValues()):1===this.activity.RecurPeriod&&(this._rdoDailyEveryAfter.set("checked",!0),this._dailyEveryAfterText.set("value",this.activity.RecurPeriodSpec))},_weekDayValues:{sun:131072,mon:262144,tue:524288,wed:1048576,thu:2097152,fri:4194304,sat:8388608},_resetInterval:function(){this._rdoDailyEvery.set("checked",!0),this._dailyEveryText.set("value","1"),this._dailyEveryAfterText.set("value","1"),this._rdoWeeklyEvery.set("checked",!0),this._weeklyEveryText.set("value","1"),this._weeklyEveryAfterText.set("value","1"),this._rdoMonthlyOn.set("checked",!0),this._monthlyEveryText.set("value","1"),this._monthlyOnTheText.set("value","1"),this._monthlyAfterText.set("value","1"),this._rdoYearlyOn.set("checked",!0),this._yearlyEveryText.set("value","1"),this._yearlyEveryAfterText.set("value","1"),this.num_Occurances.set("value","2"),this.occurances=2,this._intervalChanged(2)},_clearCheckedWeekdays:function(){this._chkSaturday.set("checked",!1),this._chkFriday.set("checked",!1),this._chkThursday.set("checked",!1),this._chkThursday.set("checked",!1),this._chkWednesday.set("checked",!1),this._chkTuesday.set("checked",!1),this._chkMonday.set("checked",!1),this._chkSunday.set("checked",!1)},_applyWeeklyRecurringValues:function(){this.rdo_Weekly.set("checked",!0),this._toggleEndCalculatorVisibility(2===this.activity.RecurPeriod),this._clearCheckedWeekdays(),this.interval=this._evalRecurperiodspec(this.activity.RecurPeriodSpec,this.activity.RecurPeriod),2===this.activity.RecurPeriod?(this._rdoWeeklyEvery.set("checked",!0),this._weeklyEveryText.set("value",this.interval),this._enforceWeekdayChecked(),this._applyEndCalculatorValues()):3===this.activity.RecurPeriod&&(this._rdoWeeklyEveryAfter.set("checked",!0),this._weeklyEveryAfterText.set("value",this.interval))},_evalRecurperiodspec:function(a,b){return a>this._weekDayValues.sat&&(a-=this._weekDayValues.sat,2===b&&this._chkSaturday.set("checked",!0)),a>this._weekDayValues.fri&&(a-=this._weekDayValues.fri,2===b&&this._chkFriday.set("checked",!0)),a>this._weekDayValues.thu&&(a-=this._weekDayValues.thu,2===b&&this._chkThursday.set("checked",!0)),a>this._weekDayValues.wed&&(a-=this._weekDayValues.wed,2===b&&this._chkWednesday.set("checked",!0)),a>this._weekDayValues.tue&&(a-=this._weekDayValues.tue,2===b&&this._chkTuesday.set("checked",!0)),a>this._weekDayValues.mon&&(a-=this._weekDayValues.mon,2===b&&this._chkMonday.set("checked",!0)),a>this._weekDayValues.sun&&(a-=this._weekDayValues.sun,2===b&&this._chkSunday.set("checked",!0)),a},_applyMonthlyRecurringValues:function(){this.rdo_Monthly.set("checked",!0);var a=this.activity.RecurPeriodSpec;if(4===this.activity.RecurPeriod)this._rdoMonthlyOn.set("checked",!0),a=this._evalRecurperiodspec(a,this.activity.RecurPeriod),a>65e3&&(a%=65536),this._monthlyEveryText.set("value",a),this._datesSelect.set("value",this.startDate.getDate().toString()),this._applyEndCalculatorValues();else if(5===this.activity.RecurPeriod){this._rdoMonthlyOnThe.set("checked",!0);var b=Math.floor(a/524288)-1;a%=524288;var c=Math.floor(a/65536);a%=65536,c++,this._weeksSelect.set("value",c.toString()),this._weekdaySelect.set("value",b.toString()),this._monthlyOnTheText.set("value",a),this._applyEndCalculatorValues()}else 6===this.activity.RecurPeriod&&(this._rdoMonthlyAfter.set("checked",!0),a>1048576&&(a-=1048576)>1e3&&(a%=65536),this._monthlyAfterText.set("value",a));this.interval=a,this._toggleEndCalculatorVisibility(6!==this.activity.RecurPeriod)},_applyYearlyRecurringValues:function(){var mon;this.rdo_Yearly.set("checked",!0);var recspec=this.activity.RecurPeriodSpec;if(7===this.activity.RecurPeriod){this._rdoYearlyOn.set("checked",!0),recspec=recspec>38797312?eval(recspec)-38797312:eval(recspec)-17825792,recspec>1e3&&(recspec=this._evalRecurperiodspec(recspec,this.activity.RecurPeriod),recspec%=65536),this._yearlyEveryText.set("value",recspec),mon=this.startDate.getMonth(),mon++,this._monthNamesSelect.set("value",mon.toString());var d=this.startDate.getDate();this._yearDatesSelect.set("value",d.toString()),this._applyEndCalculatorValues()}else if(8===this.activity.RecurPeriod){this._rdoYearlyOnThe.set("checked",!0),mon=Math.floor(recspec/4194304),recspec%=4194304;var wDay=Math.floor(recspec/524288)-1;recspec%=524288;var mWeek=Math.floor(recspec/65536);mWeek++,recspec%=65536,this._yearWeeksSelect.set("value",mWeek.toString()),this._yearWeekdaySelect.set("value",wDay.toString()),this._yearMonthNamesSelect.set("value",mon.toString()),this._applyEndCalculatorValues()}else 9===this.activity.RecurPeriod&&(this._rdoYearlyEveryAfter.set("checked",!0),recspec>38797312&&(recspec-=38797312)>1e3&&(recspec=this._evalRecurperiodspec(recspec,this.activity.RecurPeriod),recspec%=65536),this._yearlyEveryAfterText.set("value",recspec));this.interval=recspec,this._toggleEndCalculatorVisibility(9!==this.activity.RecurPeriod)},_dailyEveryChanged:function(){this._setDailyUI(),this._applyChangesToActivity()},_setDailyUI:function(){var a=this._rdoDailyEvery.get("checked");this._dailyEveryText.set("disabled",!a),this._dailyEveryAfterText.set("disabled",a),this._dailyUpdateInterval(),this.activityRecurPeriodCode=this._rdoDailyEvery.get("checked")?0:1,this._toggleEndCalculatorVisibility(a)},_weeklyEveryChanged:function(){this._setWeeklyUI(),this._applyChangesToActivity()},_setWeeklyUI:function(){var a=!this._rdoWeeklyEvery.get("checked");this._weeklyEveryText.set("disabled",a),this._chkMonday.set("disabled",a),this._chkTuesday.set("disabled",a),this._chkWednesday.set("disabled",a),this._chkThursday.set("disabled",a),this._chkFriday.set("disabled",a),this._chkSaturday.set("disabled",a),this._chkSunday.set("disabled",a),this._weeklyEveryAfterText.set("disabled",!this._rdoWeeklyEveryAfter.get("checked")),this._enforceWeekdayChecked(),this._weeklyUpdateInterval(),this.activityRecurPeriodCode=this._rdoWeeklyEvery.get("checked")?2:3,this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked"))},_dayChecked:function(){this._enforceWeekdayChecked(),this._calculateEnd()},_enforceWeekdayChecked:function(){var a=this.countCheckedDays();if(a<1){switch(this.startDate.getDay()){case 0:this._chkSunday.set("checked",!0);break;case 1:this._chkMonday.set("checked",!0);break;case 2:this._chkTuesday.set("checked",!0);break;case 3:this._chkWednesday.set("checked",!0);break;case 4:this._chkThursday.set("checked",!0);break;case 5:this._chkFriday.set("checked",!0);break;case 6:this._chkSaturday.set("checked",!0)}}a>this.occurances&&this._setOccurancesAttr(a)},getCheckedDays:function(){return[this._chkSunday.get("checked")?1:0,this._chkMonday.get("checked")?1:0,this._chkTuesday.get("checked")?1:0,this._chkWednesday.get("checked")?1:0,this._chkThursday.get("checked")?1:0,this._chkFriday.get("checked")?1:0,this._chkSaturday.get("checked")?1:0]},countCheckedDays:function(){for(var a=0,b=this.getCheckedDays(),c=0;c<b.length;c++)a+=Number(b[c]);return a},_monthlyOnChanged:function(){this._setMonthlyUI(),this._rdoMonthlyAfter.get("checked")&&this._applyChangesToActivity()},_setMonthlyUI:function(){var a=!this._rdoMonthlyOn.get("checked");this._monthlyEveryText.set("disabled",a),this._datesSelect.set("disabled",a),a=!this._rdoMonthlyOnThe.get("checked"),this._monthlyOnTheText.set("disabled",a),this._weeksSelect.set("disabled",a),this._weekdaySelect.set("disabled",a),this._monthlyAfterText.set("disabled",!this._rdoMonthlyAfter.get("checked")),this._monthlyUpdateInterval(),this.activityRecurPeriodCode=this._rdoMonthlyOn.get("checked")?4:this._rdoMonthlyOnThe.get("checked")?5:6,this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked")),this.activityRecurPeriodCode<6&&this._calculateEnd()},_monthlyValidateEndDate:function(){if(this.rdo_Monthly.get("checked")){var a=this.dtp_endRecur.get("value");if(this._rdoMonthlyOn.get("checked")){var b=parseInt(this._datesSelect.get("value"),10);if(a.getDate()!==b)return a.setDate(b),this.dtp_endRecur.set("value",a),!1}else if(this._rdoMonthlyOnThe.get("checked")){var c=parseInt(this._weekdaySelect.get("value"),10),d=parseInt(this._weeksSelect.get("value"),10);if(activityUtility.getNthWeekOfMonth(a)!==d||a.getDay()!==c)return a=activityUtility.setDateToNthWeekDay(a,d,c),this.dtp_endRecur.set("value",a),!1}}return!0},_yearlyOnChanged:function(){this._setYearlyUI(),this._applyChangesToActivity()},_setYearlyUI:function(){var a=!this._rdoYearlyOn.get("checked");this._yearlyEveryText.set("disabled",a),this._monthNamesSelect.set("disabled",a),this._yearDatesSelect.set("disabled",a),a=!this._rdoYearlyOnThe.get("checked"),this._yearWeeksSelect.set("disabled",a),this._yearWeekdaySelect.set("disabled",a),this._yearMonthNamesSelect.set("disabled",a),this._yearlyEveryAfterText.set("disabled",!this._rdoYearlyEveryAfter.get("checked")),this._yearlyUpdateInterval(),this.activityRecurPeriodCode=this._rdoYearlyOn.get("checked")?7:this._rdoYearlyOnThe.get("checked")?8:9,this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked"))},_yearlyValidateEndDate:function(){var a=!0;if(this.rdo_Yearly.get("checked")){var b=this.dtp_endRecur.get("value"),c=this.startDate.getMonth();if(b.getMonth()!==c&&(a=!1,b.setMonth(c)),this._rdoYearlyOn.get("checked")){var d=this.startDate.getDate();b.getDate!==d&&(a=!1,b.setDate(d))}else if(this._rdoYearlyOnThe.get("checked")){var e=parseInt(this._yearWeekdaySelect.get("value"),10),f=parseInt(this._yearWeeksSelect.get("value"),10);activityUtility.getNthWeekOfMonth(b)===f&&b.getDay()===e||(a=!1,b=activityUtility.setDateToNthWeekDay(b,f,e))}a||this.dtp_endRecur.set("value",b)}return a},_yearlyRecurDateChanged:function(){if(!this._applyingActivityData){var a,b=!1,c=new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());if(this._rdoYearlyOn.get("checked")){a=parseInt(this._monthNamesSelect.get("value"),10)-1;var d=parseInt(this._yearDatesSelect.get("value"),10);c.getMonth()!==a&&(c.setMonth(a),b=!0),c.getDate()!==d&&(c.setDate(d),b=!0)}else if(this._rdoYearlyOnThe.get("checked")){a=parseInt(this._yearMonthNamesSelect.get("value"),10)-1,c.getMonth()!==a&&(c.setMonth(a),b=!0);var e=parseInt(this._weekdaySelect.get("value"),10),f=parseInt(this._weeksSelect.get("value"),10),g=activityUtility.setDateToNthWeekDay(c,f,e);c.getDate()!==g.getDate()&&(g<new Date&&(g=dDate.add(g,"year",1),g=activityUtility.setDateToNthWeekDay(g,f,e)),c=g,b=!0)}b&&(c<new Date&&(c=dDate.add(c,"year",1)),this.startDateChangedFromParent||this.onStartDateChanged(c))}},_intervalChanged:function(a){this.interval=a,this._calculateEnd()},_recurringStartDateChanged:function(a){this.startDateChangedFromParent||this.onStartDateChanged(a)},_endCalcModeChanged:function(){},_numOccurancesChanged:function(a){this.occurances=a,this._calculateEndDate()},_endRecurChanged:function(a){this._rdoEndOn.get("checked")&&this._monthlyValidateEndDate()&&this._yearlyValidateEndDate()&&this._calculateOccurances()},_calculateEnd:function(){if("once"===this.currentPeriod)return void this._applyChangesToActivity();this._rdoEndAfter.get("checked")?(this.rdo_Monthly.get("checked")&&!this.startDateChangedFromParent&&this._calculateStartDate(),this._calculateEndDate()):this._calculateOccurances()},_calculateStartDate:function(){var a=this.endCalculators[this.currentPeriod];if(a&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(a),a.set("occurances",this.occurances);var b=a.calculateStartDate();this.startDate=b,this.dtp_startRecur.set("value",b),this.startDateChangedFromParent||this.onStartDateChanged(b)}},_calculateEndDate:function(){var a=this.endCalculators[this.currentPeriod];if(a&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(a),a.set("occurances",this.occurances);var b=a.calculateEndDate();this.dtp_endRecur.set("value",b),this._applyChangesToActivity()}},_applyCurrentValuesToCalculator:function(a){a.set("startDate",this.startDate),a.set("initialStartDate",this.initialStartDate),a.set("interval",this.interval),a.set("activityRecurPeriodCode",this.activityRecurPeriodCode)},_calculateOccurances:function(){var a=this.endCalculators[this.currentPeriod];if(a&&this._rdoEndOn.get("checked")){this._applyCurrentValuesToCalculator(a),a.set("endDate",this.dtp_endRecur.get("value"));var b=1;a.endDate<a.startDate?this.dtp_endRecur.set("value",this.startDate):b=a.calculateNumberOfOccurances(),this.occurances=b,this.num_Occurances.set("value",b),this._applyChangesToActivity()}},_applyChangesToActivity:function(){if(!this._applyingActivityData){if(this.rdo_Once.get("checked"))return this.activity.RecurIterations=0,this.activity.RecurPeriod=0,this.activity.RecurPeriodSpec=0,void(this.activity.Recurring=!1);var a=this._getCurrentRecperiod();this.activity.RecurPeriod=a;var b=0,c=this.num_Occurances.get("value");switch(a){case 0:case 1:this._dailyUpdateInterval(),1===a&&(c=-1);break;case 2:b=this._sumWeekDays(),this._weeklyUpdateInterval();break;case 3:b=1048576,this._weeklyUpdateInterval(),c=-1;break;case 4:b=1048576,this._monthlyUpdateInterval();break;case 5:b=this._sumMonthly(),this._monthlyUpdateInterval();break;case 6:b=1048576,this._monthlyUpdateInterval(),c=-1;break;case 7:b=38797312,this._yearlyUpdateInterval();break;case 8:b=this._sumYearly(),this.interval=1;break;case 9:b=38797312,this._yearlyUpdateInterval(),c=-1}this.activity.RecurIterations=c,this.activity.RecurPeriodSpec=b+this.interval,this.activity.Recurring=!0}},_getCurrentRecperiod:function(){return this.rdo_Daily.get("checked")?this._rdoDailyEvery.get("checked")?0:1:this.rdo_Weekly.get("checked")?this._rdoWeeklyEvery.get("checked")?2:3:this.rdo_Monthly.get("checked")?this._rdoMonthlyOn.get("checked")?4:this._rdoMonthlyOnThe.get("checked")?5:6:this.rdo_Yearly.get("checked")?this._rdoYearlyOn.get("checked")?7:this._rdoYearlyOnThe.get("checked")?8:9:0},_sumWeekDays:function(){var a=0;return this._chkSaturday.get("checked")&&(a+=this._weekDayValues.sat),this._chkFriday.get("checked")&&(a+=this._weekDayValues.fri),this._chkThursday.get("checked")&&(a+=this._weekDayValues.thu),this._chkWednesday.get("checked")&&(a+=this._weekDayValues.wed),this._chkTuesday.get("checked")&&(a+=this._weekDayValues.tue),this._chkMonday.get("checked")&&(a+=this._weekDayValues.mon),this._chkSunday.get("checked")&&(a+=this._weekDayValues.sun),a},_getNthOccurenceOfWeekDay:function(){for(var a=parseInt(this._weekdaySelect.get("value"),10),b=parseInt(this._weeksSelect.get("value"),10),c=new Date,d=0;d<7;d++){var e=new Date(c.getFullYear(),c.getMonth(),d+1);if(e.getDay()==a)return dojo.date.add(e,"day",7*(b-1))}},_sumMonthly:function(){return 524288*(parseInt(this._weekdaySelect.get("value"),10)+1)+65536*(parseInt(this._weeksSelect.get("value"),10)-1)},_sumYearly:function(){var a=parseInt(this._yearWeekdaySelect.get("value"),10)+1;return 4194304*parseInt(this._yearMonthNamesSelect.get("value"),10)+524288*a+65536*(parseInt(this._yearWeeksSelect.get("value"),10)-1)},_setReadOnly:function(a){var b=["rdo_Once","rdo_Daily","rdo_Weekly","rdo_Monthly","rdo_Yearly","_rdoDailyEvery","_dailyEveryText","_rdoDailyEveryAfter","_dailyEveryAfterText","_rdoWeeklyEvery","_weeklyEveryText","_chkMonday","_chkTuesday","_chkWednesday","_chkThursday","_chkFriday","_chkSaturday","_chkSunday","_rdoWeeklyEveryAfter","_weeklyEveryAfterText","_rdoMonthlyOn","_monthlyEveryText","_datesSelect","_rdoMonthlyOnThe","_monthlyOnTheText","_weeksSelect","_weekdaySelect","_rdoMonthlyAfter","_monthlyAfterText","_rdoYearlyOn","_yearlyEveryText","_monthNamesSelect","_yearDatesSelect","_rdoYearlyOnThe","_yearWeeksSelect","_yearWeekdaySelect","_yearMonthNamesSelect","_rdoYearlyEveryAfter","_yearlyEveryAfterText","dtp_startRecur","_rdoEndAfter","num_Occurances","_rdoEndOn","dtp_endRecur"];a?this._bulkSetProperty(this,b,"disabled",!0):(this._bulkSetProperty(this,b,"disabled",!1),this._setUI(),this._applyActivityData())},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=a[b[e]];f&&f.set(c,d)}},onStartDateChanged:function(a){},onRecurPeriodChanged:function(a){}});return recurringEditor})},"Sage/UI/Controls/Numeric":function(){define(["dojo/_base/html","dijit/_Widget","Sage/_Templated","Sage/UI/NumberTextBox","dojo/currency","dojo/_base/declare","dojo/_base/sniff","dojo/has"],function(a,b,c,d,e,f,g,h){return dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"}),f("Sage.UI.Controls.Numeric",[b,c],{displayModes:{AsHyperlink:0,AsControl:1,AsText:2},modeTemplates:{AsHyperlink:new Simplate(['<div data-dojo-type="dijit.form.Button" showLabel="true">ONE</div>']),AsControl:new Simplate(['<input  data-dojo-type="Sage.UI.NumberTextBox" ','dojoAttachEvent="onChange:onChanged" ','constraints="{ {%= $.constraintsToString() %} }" ','formatType="{%= $.formatType %}" ','ignorechange="true" ','required="{%= $.required %}" ','id="{%= $.id %}_NumberTextBox" ','style="width:inherit;" ','textAlign="{%= $.textAlign %}" ','hotKey="{%= $.hotKey %}" ','{% if($.disabled === "disabled") { %} ','disabled="disabled" ',"{% } %}",'{% if($.readonly === "readonly") { %} ','readonly="readonly" ',"{% } %}",'name="{%= $.name %}" type="text" ','value="{%= $.value %}" required="{%= $.required %}" dojoAttachPoint="focusNode" ','maxLength="{%= $.maxLength %}">']),AsText:new Simplate(['<div data-dojo-type="dijit.form.Button" showLabel="true">{%= $.formattedText() %}</div>'])},postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.domNode.parentNode&&"SPAN"==this.domNode.parentNode.tagName&&(this.domNode.parentNode.tabIndex=-1),this.class&&this.class.length>0&&this.domNode.firstChild&&(this.domNode.firstChild.className=this.class+" "+this.domNode.firstChild.className)},constructor:function(a){this.constraints={},this.inherited(arguments)},widgetTemplate:new Simplate(['<div style="width:inherit;" slxcompositecontrol="true" id="{%= $.id %}" >',"{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),value:0,autoPostBack:!1,width:15,maxLength:128,style:"",enabled:!0,visible:!0,readonly:"",disabled:"",hotKey:"",tabIndex:0,required:!1,displayMode:"AsControl",widgetsInTemplate:!0,styles:"text-align: right;",constraints:null,name:"",formattedText:function(){return this.value},formatType:"",constraintsToString:function(){var a,b=[];for(a in this.constraints)if(this.constraints.hasOwnProperty(a)){var c=this.constraints[a];"string"==typeof c&&(c="'"+c+"'"),b.push(a+":"+c)}return b.join(",")},onChanged:function(a){this.autoPostBack&&!h("ie")&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null)}})})},"Sage/UI/NumberTextBox":function(){define(["dijit/form/NumberTextBox","dijit/form/ValidationTextBox","dojo/number","Sage/Utility","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.NumberTextBox",a,{shouldPublishMarkDirty:!0,autoPostBack:!1,hotKey:"",maxLength:"",formatType:"",attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"},maxLength:{node:"textbox",type:"attribute",attribute:"maxLength"}},textAlign:"",_getValueAttr:function(){var a=this.inherited(arguments);return void 0!==a&&!isNaN(a)||""===this.textbox.value||(a=this.getTextBoxValue()),a},_setValueAttr:function(a){this.constraints.locale=Sys.CultureInfo.CurrentCulture.name,this.inherited(arguments)},_onFocus:function(){if(this.onFocusFiring=!0,this.inherited(arguments),"percent"===this.constraints.type||"Percent"===this.formatType){var a=1e4*this.value/100;this.textbox.value=c.format(a,{places:this.constraints.places,locale:Sys.CultureInfo.CurrentCulture.name})}this.onFocusFiring=!1},_onBlur:function(){if(this.onBlurFiring=!0,("Percent"===this.formatType||"percent"===this.constraints.type)&&-1===this.textbox.value.indexOf(Sys.CultureInfo.CurrentCulture.numberFormat.PercentSymbol)){var a=this.getTextBoxValue(),b=a/100;"number"==typeof this.constraints.places?this.set("displayedValue",c.format(b,{places:this.constraints.places+2,locale:Sys.CultureInfo.CurrentCulture.name})):"string"==typeof this.constraints.places&&this.constraints.places.indexOf(",")>0&&this.constraints.places[2]?this.set("displayedValue",c.format(b,{places:Math.floor(this.constraints.places[2])+2,locale:Sys.CultureInfo.CurrentCulture.name})):this.set("displayedValue",c.format(b,{locale:Sys.CultureInfo.CurrentCulture.name}))}this.onBlurFiring=!1,this.inherited(arguments)},_sageUINumberTextBox_IsValid:function(){if("Percent"!==this.formatType||"percent"!==this.constraints.type)if(dojo.isIE){if(this.oldValue!==this.textbox.value){var a=this._restrictDD();a!==this.textbox.value&&(this.textbox.value=a)}this.oldValue=this.textbox.value}else this.textbox.value=this._restrictDD();this.inherited(arguments)},_restrictDD:function(){var a=this.textbox.value;return this.onBlurFiring||this.onFocusFiring?a:(this.constraints.places&&(a=d.restrictDecimalDigit(this.textbox.value,this.constraints.places)),a)},_sageUINumberTextBox_KeyPress:function(a){var b=void 0===this.constraints.type?this.formatType:null;d.restrictToNumberOnKeyPress(a,b)||dojo.stopEvent(a)},_sageUINumberTextBox_OnFocus:function(a){dojo.setSelectable(this.domNode,!0)},startup:function(){this.inherited(arguments);var a=this;dojo.style(a.focusNode,"textAlign",a.textAlign),a.value=a.value||0,a.onBlurFiring=!1,a.onFocusFiring=!1,this.connect(a,"isValid",a._sageUINumberTextBox_IsValid),this.connect(a,"onKeyPress",a._sageUINumberTextBox_KeyPress,!0),this.connect(a,"onFocus",a._sageUINumberTextBox_OnFocus,!0),this.ignorechange||this.connect(a,"onChange",a.valueChanged)},valueChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null)},getTextBoxValue:function(){var a=0,b=this.textbox.value;return""!==b&&null!==b||(b="0"),b.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)===b.length-1&&(b=b.slice(0,b.length-1)),a=c.parse(b,{locale:Sys.CultureInfo.CurrentCulture.name}),isNaN(a)&&(a=this.value),a}})})},"Sage/UI/Controls/DurationSelect":function(){define(["Sage/UI/Controls/_customSelectMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DurationSelect","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.UI.Controls.DurationSelect",a,{id:"",startTime:new Date,timeValue:new Date,valuesAreAfterStart:!0,_store:null,_storeData:{},labelFmt:"${amount} ${interval} (${endTime})",splitAmoutLabelFmt:"${amount1} ${interval1}, ${amount2} ${interval2} (${endTime})",minuteText:"minute",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days",timeIncrements:[0,5,10,15,30,60,120,240],items:[],itemsByDur:{},constructor:function(){dojo.mixin(this,f)},resetItems:function(){this.items=[],this.itemsByDur={}},_fillSelect:function(){if(this._select){this.resetItems();for(var a=!1,b=0;b<this.timeIncrements.length;b++){var c=this.timeIncrements[b];this.items.push(this._createItem(c)),a=a||this.value===c}!a&&this.value&&this.items.push(this._createItem(this.value)),this._storeData={identifier:"value",label:"label",items:this.items},this._store=new e({data:this._storeData}),this._select.set("store",this._store),this._select.set("searchAttr","label"),(this.value||0===this.value)&&this.set("value",this.value)}},_createItem:function(a){var b=this.startTime;0===b.getHours()&&0===b.getMinutes&&5===b.getSeconds()&&(b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0));var d;d=c.add(b,"minute",this.valuesAreAfterStart?a:-1*a);var e={value:a,dateValue:d,label:this._formatLabel(a,d)};return this.itemsByDur[a]=e,e},_formatLabel:function(a,b){var c,e={amount:a,interval:1===a?this.minuteText:this.minutesText,endTime:d.format(b,{selector:"time",locale:Sys.CultureInfo.CurrentCulture.name})},f=this.labelFmt;if(a>59){var g=a%60;if(c=Math.floor(a/60),0===g?(e.amount=c,e.interval=1===c?this.hourText:this.hoursText):(e.amount1=c,e.interval1=1===c?this.hourText:this.hoursText,e.amount2=g,e.interval2=1===g?this.minuteText:this.minutesText,f=this.splitAmoutLabelFmt),c>23){var h=Math.round(c/24);e.amount=h,e.interval=1===h?this.dayText:this.daysText,e.endTime=d.format(b,{selector:"datetime",locale:Sys.CultureInfo.CurrentCulture.name})}}return dojo.string.substitute(f,e)},_handleValueNotInStore:function(a){var b=this.text,c=/\(([\s\S]*)\)/,e=c.exec(a),f=c.exec(b);if(e&&f)if(e[1]===f[1])a=a.replace(e[0],"");else{var g=d.parse(e[1],{selector:"time"});if(g)return g.setFullYear(this.startTime.getFullYear()),g.setMonth(this.startTime.getMonth()),g.setDate(this.startTime.getDate()),this._setTimeValueAttr(g),this.value}var h=0;if("number"==typeof a)h=a;else if(a.indexOf(",")>0)for(var i=a.split(","),j=0;j<i.length;j++){var k=this._getMinutesFromStringPart(i[j]);k&&(h+=k)}else h=this._getMinutesFromStringPart(a);if(!h)return this._select.set("value",this.text),this.value;var l=this._createItem(h);return this.value=l.value,this.text=l.label,this._select.set("displayedValue",l.label),l.value},_setValueAttr:function(a){this._removeOldValueFromStore(),this.text=a,this.value=a,this._store&&this._store.fetchItemByIdentity({identity:a,onItem:function(b){b?(this._select.set("value",this._store.getValue(b,this._storeData.label)),this.value=this._store.getValue(b,this._storeData.identifier),this.text=this._store.getValue(b,this._storeData.label)):this._handleValueNotInStore(a)},onError:function(){},scope:this})},_removeOldValueFromStore:function(){for(var a=0;a<this.timeIncrements.length;a++)if(this.value===this.timeIncrements[a])return;delete this.itemsByDur[this.value];var b=this.items.length;for(a=0;a<b;a++)if(this.items[a].value===this.value||this.items[a].value[0]===this.value)return void this.items.splice(a,1)},_getMinutesFromStringPart:function(a){var b=a.trim().split(" "),c=parseInt(b[0],10);return!isNaN(c)&&(b.length>1&&this.hoursText.indexOf(b[1])>-1&&(c*=60),c)},_setStartTimeAttr:function(a){0!==c.compare(this.startTime,a,"datetime")&&(this.startTime=a,this._fillSelect())},_setValuesAreAfterStartAttr:function(a){this.valuesAreAfterStart!==a&&(this.valuesAreAfterStart=a,this._fillSelect())},_getTimeValueAttr:function(){if(this.itemsByDur.hasOwnProperty(this.value)){var a=this.itemsByDur[this.value].dateValue;return dojo.isArray(a)?a[0]:a}if(this.value&&this.startTime){var b=c.add(this.startTime,"minute",this.valuesAreAfterStart?this.value:-1*this.value);return this.dateValue=b,this.dateValue}return null},_setTimeValueAttr:function(a){if(a){this.items.length<1&&this._fillSelect();var b=this.startTime;0===b.getHours()&&0===b.getMinutes&&5===b.getSeconds()&&(a=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds()));for(var d in this.itemsByDur)if(d&&this.itemsByDur[d].dateValue){var e=dojo.isArray(this.itemsByDur[d].dateValue)?this.itemsByDur[d].dateValue[0]:this.itemsByDur[d].dateValue;if(0===c.compare(e,a,"datetime"))return this.set("value",this.itemsByDur[d].value),this.text=this.itemsByDur[d].label,void this._select.set("displayedValue",this.itemsByDur[d].label)}var f=c.difference(this.startTime,a,"minute");f<0&&(f*=-1);var g={value:f,dateValue:a,label:this._formatLabel(f,a)};this.set("value",f),this.text=g.label,this.itemsByDur[f]=g,this._select.set("displayedValue",g.label)}},_setTimeIncrementsAttr:function(a){this.timeIncrements!==a&&(this.timeIncrements=a,this._fillSelect())}})})},"Sage/UI/Controls/_customSelectMixin":function(){define(["dijit/_Widget","Sage/_Templated","dijit/form/ComboBox","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls._customSelectMixin",[a,b],{widgetsInTemplate:!0,disabled:!1,value:"",text:"",widgetTemplate:new Simplate(["<div>",'<select dojoType="dijit.form.ComboBox" id="{%= $.id %}_select" labelAttr="label" dojoAttachPoint="_select" dojoAttachEvent="onChange:_onChange"></select>',"</div>"]),postCreate:function(){this.inherited(arguments),this._fillSelect()},_fillSelect:function(){},_setValueAttr:function(a){this.text=a,this.value=a,this._store&&this._store.fetchItemByIdentity({identity:a,onItem:function(b){b?(this._select.set("value",this._store.getValue(b,this._storeData.label)),this.value=this._store.getValue(b,this._storeData.identifier),this.text=this._store.getValue(b,this._storeData.label)):this._handleValueNotInStore(a)},onError:function(){},scope:this})},_getValueAttr:function(){return this._select.item&&this._store&&(this.value=this._store.getValue(this._select.item,this._storeData.identifier)),this.value},_onChange:function(a){if(this.value!==a&&this.text!==a){if(this._select.item){var b=this._select.item;this.value=this._store.getValue(b,this._storeData.identifier),this.text=this._store.getValue(b,this._storeData.label)}else this.value=this._handleValueNotInStore(a);this.onChange(this.value)}},_handleValueNotInStore:function(a){return this.text=a,this.value=a,a},_getTextAttr:function(){return this.text},_setTextAttr:function(a){this.text=a,this._select.set("displayedValue",a)},_setDisabledAttr:function(a){this.disabled=a,this._select.set("disabled",a)},_getDisabledAttr:function(){
return this.disabled=this._select.get("disabled"),this.disabled},onChange:function(){}})})},"Sage/Services/CalendarSecurityService":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/_base/declare"],function(a,b,c){var d=c("Sage.Services.CalendarSecurityService",null,{_rawList:[],_accessList:{},_dataAvailable:!1,constructor:function(a){this._dataAvailable=!1,this._loading=!1},_waiting:[],hasAccess:function(a,b,c,d){if(this._dataAvailable){var e=this._accessList[a],f=!1;e&&(f=e[b]),c&&c.call(d||this,f)}else this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.hasAccess(a,b,c,d)})),this._loading||this._loadData()},getListByAccessLevel:function(a,b,c,d,e){var f=d||"userid",g=e||"name";if(this._dataAvailable){for(var h=[],i=0;i<this._rawList.length;i++){var j=this._rawList[i];if("view"===a||j[a]){var k={};k[f]=j.accessUserId,k[g]=j.accessUserName,h.push(k)}}b.call(c||this,h)}else this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.getListByAccessLevel(a,b,c,d,e)})),this._loading||this._loadData()},_loadData:function(c,d,e){this._loading=!0;var f=a.getSDataService("mashups",!1,!0,!0),g=b.getClientContextByKey("userID")||"";d=d||100,c=c||1;var h=this,i=new Sage.SData.Client.SDataNamedQueryRequest(f);i.setApplicationName("$app"),i.setResourceKind("mashups"),i.uri.setCollectionPredicate("'UserCalendarQueries'"),i.setQueryName("execute"),i.setQueryArg("_resultName","UserHasAccessToTheseCalendars"),i.setQueryArg("_userId",g),i.setQueryArg("startIndex",c),i.setQueryArg("count",d),i.read({success:function(a){var b=a.$totalResults;b>100&&b>c+d?(c=1==c?c+d-1:c+d,h._loadData(c,b-c,a.$resources)):e?(e.push.apply(e,a.$resources),h._dataReceived(e)):h._dataReceived(a.$resources)},failure:function(){},scope:this})},_dataReceived:function(a){this._rawList=a;var b;for(b=0;b<this._rawList.length;b++){var c=this._rawList[b];this._accessList[c.accessUserId]={name:c.accessUserName,userid:c.accessUserId,allowAdd:c.allowAdd,allowDelete:c.allowDelete,allowEdit:c.allowEdit,allowSync:c.allowSync}}for(this._dataAvailable=!0,this._loading=!1,this.onDataAvailable(),b=0;b<this._waiting.length;b++)dojo.disconnect(this._waiting[b]);this._waiting=[]},onDataAvailable:function(){}});Sage.Services.addService("CalendarSecurityService",new d)})},"Sage/MainView/ActivityMgr/EditEventEditor":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Toolbar","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Textarea","dijit/form/ComboBox","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","dijit/Dialog","Sage/UI/Dialogs","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/EditEventEditor","dijit/focus","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return t("Sage.MainView.ActivityMgr.EditEventEditor",[a,b],{eventId:null,mode:!1,_dialog:!1,_currentUserId:null,_eventService:!1,_eventData:!1,_eventStore:!1,_bindingMgr:!1,_eventChangeConnection:!1,lup_User:!1,eventDefaultValues:{},eventConnections:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="eventDialog" title="" dojoAttachPoint="_dialog" >','<div class="event-dialog">','<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_event" title="" dojoAttachPoint="cp_Event" class="tabContent">','<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="140">','<div data-dojo-type="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" label="{%= $.lblStartDateText %}" id="{%= $.id%}_tb_StartDate" name="tb_StartDateName" dojoAttachPoint="tb_StartDate" displayDate="true" displayTime="false"  ></div>','<div data-dojo-type="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" label="{%= $.lblEndDateText %}" id="{%= $.id%}_tb_EndDate" name="tb_EndDateName" dojoAttachPoint="tb_EndDate" displayDate="true" displayTime="false" ></div>','<select  dojoAttachPoint="tb_DayType" data-dojo-type="dijit.form.ComboBox" required="false" name="tb_DayType"  label="{%= $.lblDayTypeText %}" id="{%= $.id%}_tb_DayType" >','<option value="Active" >{%=$.eventTypeActiveText %}</option>','<option value="Business Trip" >{%=$.eventTypeBusinessTripText %}</option>','<option value="Conference" >{%=$.eventTypeConferenceText%}</option>','<option value="Holiday" selected="selected" >{%=$.eventTypeHolidayText%}</option>','<option value="Off" >{%=$.eventTypeOffText%}</option>','<option value="Trade Show" >{%=$.eventTypeTradeShowText%}</option>','<option value="Unavailable" >{%=$.eventTypeUnavailableText%}</option>','<option value="Vacation" >{%=$.eventTypeVacationText%}</option>',"</select>",'<input data-dojo-type="dijit.form.TextBox" id="{%= $.id %}_tb_Location" label="{%= $.lblLocationText %}" dojoAttachPoint="tb_Location" maxLength="255" />','<textarea data-dojo-type="dijit.form.SimpleTextarea" label="{%= $.lblDescriptionText %}" id="{%= $.id%}_tb_Description" name="tb_Description" dojoAttachPoint="tb_Description" rows="4" cols="1"  maxLength="128"  ></textarea>','<div class="event-dialog remove-padding">','<div dojoType="dijit.layout.ContentPane" label="{%= $.lblUserText %}" dojoAttachPoint="container_UserLup" class="remove-padding lookup-container"></div>',"</div>","</div>","</div>",'<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.btnOkayText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCancelText %}</div>',"</div>","</div>","</div>","</div>"]),constructor:function(){dojo.mixin(this,u),this._eventService=q.getSDataService("dynamic"),this._setEventStore(),this._currentUserId=p.getClientContextByKey("userID")||""},destroy:function(){this._eventChangeConnection&&(dojo.disconnect(this._eventChangeConnection),this._eventChangeConnection=!1),this._bindingMgr&&this._bindingMgr.destroy(),this.lup_User&&this.lup_User.destroy(),this.inherited(arguments)},show:function(a){this.lup_User||this._createUserLookup(),"New"===this.mode?this._dialog.set("title",this.titleScheduleText):this._dialog.set("title",this.titleEditText),this.eventDefaultValues=a||{},this._loadData(),this._dialog.set("refocus",!1),this._dialog.show(),this._dialog.helpIcon||(s.mixin(this._dialog,new r),this._dialog.createHelpIconByTopic("addevent"))},hide:function(){this._dialog.hide()},resize:function(){},_setModeAttr:function(a){this.mode=a,0===a.indexOf("New")&&(this.mode="New",this._eventData=!1)},_setEventIdAttr:function(a){this.eventId!==a&&(this.eventId=a,this._eventData=!1)},_getEventIdAttr:function(){return this.eventId},_setEventStore:function(){this._eventStore||(this._eventStore=new l({include:[],select:["StartDate","EndDate","Description","Type","Location","UserId"],resourceKind:"events",service:this._eventService}))},onChange:function(a,b,c,d){},setMode:function(a){this._mode=a},_loadData:function(){this._eventData=!1,this._eventStore&&("New"!==this.mode?this._eventStore.fetch({predicate:"'"+this.eventId+"'",onComplete:this._receivedEvent,onError:this._requestFailure,scope:this}):this._eventStore.newItem({onComplete:function(a){p.setValue(a,"UserId",this._currentUserId),this._receivedEvent(a)},scope:this}))},_receivedEvent:function(a){"New"===this.mode?this._eventData=dojo.mixin(a,this.eventDefaultValues):this._eventData=a,this._bind()},_requestFailure:function(a,b,c){},_bind:function(){this._eventData&&(this._bindingMgr?this._bindingMgr.boundEntity&&this._eventData.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this._eventData):(this._bindingMgr=new m({defaultBinding:{boundEntity:this._eventData},items:[{boundWidget:this.tb_StartDate,entityProperty:"StartDate",dataType:"date"},{boundWidget:this.tb_EndDate,entityProperty:"EndDate",dataType:"date"},{boundWidget:this.tb_DayType,entityProperty:"Type"},{boundWidget:this.tb_Description,entityProperty:"Description"},{boundWidget:this.tb_Location,entityProperty:"Location"}]}),this._eventChangeConnection=dojo.connect(this._bindingMgr,"onChange",this,"onChange")),this._bindUserLookup())},_bindUserLookup:function(){if(this._eventData.UserId)if(this._eventData.UserId===this._currentUserId){var a={$key:this._currentUserId,$descriptor:p.getClientContextByKey("userPrettyName")};this.lup_User.set("selectedObject",a)}else this._getUserInfoFor(this._eventData.UserId,function(a){this.lup_User.set("selectedObject",a)});else this.lup_User.set("selectedObject",null)},_getUserInfoFor:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(q.getSDataService("dynamic",!1,!0,!0));c.setResourceKind("userInfo"),c.setResourceSelector("'"+a+"'"),c.setQueryArg("precedence","0"),c.read({success:b,scope:this,failure:function(){}})},_createUserLookup:function(){var a={id:"_eventUser",structure:[{label:this.nameText,field:"Name",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"AllowAdd AND (AccessId eq '"+p.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupUserText,dialogButtonText:this.btnOkayText};this.lup_User=new Sage.UI.Controls.Lookup({id:"event_lu_user",config:a}),this.eventConnections.push(dojo.connect(this.lup_User,"onChange",this,"_userChanged")),dojo.place(this.lup_User.domNode,this.container_UserLup.domNode,"only")},_userChanged:function(a){p.setValue(this._eventData,"UserId",a?a.$key.substr(0,12):"")},datesValid:function(){var a=this.tb_StartDate.value,b=this.tb_EndDate.value;return b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0),this._eventData.EndDate=new Date(b.getFullYear(),b.getMonth(),b.getDate(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),this._eventData.StartDate=new Date(a.getFullYear(),a.getMonth(),a.getDate(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),!((a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0))>b)||(o.showError(this.invaildDatesText),!1)},_okClick:function(){var a=v.curNode;a&&a.blur(),setTimeout(w.hitch(this,function(){this.datesValid()&&("New"===this.mode?this._eventStore.saveNewEntity(this._eventData,this._successEventCreated,this._failedEventCreated,this):this._eventStore.save({scope:this,success:this._successEventUpdated,failure:this._failedEventUpdated}))}),1)},_cancelClick:function(){this.hide()},_successEventCreated:function(a){dojo.publish("/entity/event/create",[a,this]),this.hide()},_failedEventCreated:function(a){o.showError(this.errorText)},_successEventUpdated:function(a){dojo.publish("/entity/event/change",[a,this]),this.hide()},_failedEventUpdated:function(a){o.showError(this.errorText)}})})},"Sage/UI/TextBox":function(){define(["dijit/form/TextBox","dojo/_base/declare"],function(a,b){return b("Sage.UI.TextBox",a,{postCreate:function(){this.inherited(arguments),this._val=this.get("value"),""===this.get("value")&&this._val&&this.set("value",this._val),this.set("class","txt-ss-watermark")},onFocus:function(){this.set("value",""),this.set("class","txt-ss")},forceFocus:function(a){this.set("value",a),this.set("class","txt-ss-watermark")},onBlur:function(){""===this.get("value")&&(this.set("class","txt-ss-watermark"),this.set("value",this._val))}})})},"Sage/MainView/ActivityMgr/QuickCompleteEditor":function(){define(["dijit/_Widget","Sage/_Templated","dijit/layout/ContentPane","dijit/form/Textarea","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","dijit/form/FilteringSelect","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/UI/Controls/SingleSelectPickList","dijit/Dialog","dojo/_base/declare","dojo/i18n!./nls/QuickCompleteEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return l("Sage.MainView.ActivityMgr.QuickCompleteEditor",[a,b],{_currentUserId:null,_individuallyHandler:!1,_nowHandler:!1,_asScheduledHandler:!1,_selectionContext:!1,lblcmdMessageText:"",lblInfoMessageText:"",lblResultText:"Result:",lblNoteText:"Note (append to all items):",btnCompleteIndividuallyText:"Individually",btnAsScheduledText:"As Scheduled",btnCompleteNowText:"Now",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",resultCompletedText:"Complete",titleText:"Quick Complete",widgetsInTemplate:!0,selectionContext:null,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="{%= $.id%}_qucikCompleteDialog" title="Quick Complete" dojoAttachPoint="_dialog" >','<div class="quickComplete-dialog">','<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_General" title="" dojoAttachPoint="cp_General">','<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="1" class="controlPropForm" labelWidth="140">','<div id="{%= $.id%}_div_actionMessage"  name="div_actionMessage" dojoAttachPoint="div_actionMessage"></div>',"<br>",'<select label="{%= $. lblResultText %}" id="{%= $.id%}_pk_Result" data-dojo-type="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Result" canEditText="true" itemMustExist="false" pickListName="To Do Result Codes" ></select>','<div data-dojo-type="dijit.form.SimpleTextarea"" label="{%= $.lblNoteText %}" id="{%= $.id%}_ta_Note" name="tb_Note" dojoAttachPoint="ta_Note"></div>',"</div>","<br>",'<div id="{%= $.id%}_div_cmdMessage"  name="div_cmdMessage" dojoAttachPoint="div_cmdMessage" style="font-weight:bold"></div>',"<br>",'<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_CompleteIndividually" name="btn_CompleteIndividually" dojoAttachPoint="btn_CompleteIndividually" dojoAttachEvent="onClick:_onCompleteIndividually" style="align:left" >{%= $.btnCompleteIndividuallyText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_btnAsScheduled" name="btn_AsScheduled" dojoAttachPoint="btn_AsScheduled" dojoAttachEvent="onClick:_onAsScheduled">{%= $.btnAsScheduledText %}</div>','<div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_CompleteNow" name="btn_CompleteNow" dojoAttachPoint="btn_CompleteNow" dojoAttachEvent="onClick:_onCompleteNow">{%= $.btnCompleteNowText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCancelText %}</div>',"</div>","</div>",'<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_processing" title="" dojoAttachPoint="cp_processing">','<div id="{%= $.id%}_div_processingMessage"  name="div_processingMessage" dojoAttachPoint="div_processingMessage"></div>','<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Close" name="btn_Close" dojoAttachPoint="btn_Close" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCloseText %}</div>',"</div>","</div>","</div>","</div>","</div>"]),constructor:function(a){dojo.mixin(this,m),this._currentUserId=Sage.Utility.getClientContextByKey("userID")||""},destroy:function(){this._dialog.destroyRecursive(),this.destroyRecursive()},show:function(){this.selectionContext&&(this.div_actionMessage.innerHTML=this.actionMessage,this.div_cmdMessage.innerHTML=String.format(this.completeMessage,this.selectionContext.count),this._dialog.set("title",this.titleText)),dojo.style(this.cp_processing.domNode,"display","none"),this._dialog.show()},hide:function(){this.destroy()},resize:function(){},_showProcessing:function(){dojo.style(this.cp_General.domNode,"display","none"),dojo.style(this.cp_processing.domNode,"display","block"),this.div_processingMessage.innerHTML=String.format(this.processingMessage,this._selectionContext.count)},_onCompleteIndividually:function(){this.onCompleteIndividually(),this._dialog.hide()},_onCompleteNow:function(){this._showProcessing();var a={selectionContext:this.selectionContext,note:this.ta_Note.value,result:this.pk_Result.get("value"),resultCode:""};this.onCompleteNow(a),this._dialog.hide()},_onAsScheduled:function(){this._showProcessing();var a={selectionContext:this.selectionContext,note:this.ta_Note.value,result:this.pk_Result.get("value"),resultCode:""};this.onCompleteAsScheduled(a),this._dialog.hide()},_cancelClick:function(){this.onCancel(),this._dialog.hide()},onCompleteIndividually:function(){},onCompleteNow:function(a){},onCompleteAsScheduled:function(a){},onCancel:function(){}})})},"Sage/Services/ActivityActionProcessor":function(){define(["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","Sage/_Templated","dojo/i18n!./nls/ActivityActionProcessor","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.Services.ActivityActionProcessor",[c,d],{_dialog:!1,_currentUserId:null,_action:!1,_processing:!1,_selectionContext:!1,btnOkayText:"OK",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",processingText:"Processing request please wait...",failureText:"I'm sorry, the action was not successful an error occurred.",titleText:"Process",widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="activityProcessActionDialog" title="{%= $.titleText%}" dojoAttachPoint="_dialog" style="width:400px">','<div class="activityProcess-dialog">','<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_envet_General" title="" dojoAttachPoint="cp_General">','<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="1" class="controlPropForm" labelWidth="140">','<div id="{%= $.id%}_div_actionMessage"  name="div_actionMessage" dojoAttachPoint="div_actionMessage"></div>',"</div>","</div>",'<table class="button-bar"><tr><td class="alignright valignbottom">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.btnOkayText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCancelText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Close" name="btn_Close" dojoAttachPoint="btn_Close" dojoAttachEvent="onClick:_closeClick">{%= $. btnCloseText %}</div>',"</td><tr></table>","</div>","</div>","</div>"]),constructor:function(){this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"",dojo.mixin(this,e)},destroy:function(){this.inherited(arguments)},start:function(a){this._processing=!1,this._selectionContext.count<1||(a?this._execute():(this._setDisplay(),this.show()))},show:function(){this._dialog.show()},hide:function(){this._action=null,this._dialog.hide()},resize:function(){},_setDisplay:function(){dojo.style(this.btn_Close.domNode,"visibility","hidden"),dojo.style(this.btn_OK.domNode,"visibility","visible"),dojo.style(this.btn_Cancel.domNode,"visibility","visible"),this._selectionContext&&(this.div_actionMessage.innerHTML=this._action.message,this._dialog.set("title",this._action.description))},_setActionAttr:function(a){this._action=a},_getActionAttr:function(){return this._action},_setSelectionContextAttr:function(a){this._selectionContext=a},_getSelectionContextAttr:function(){return this._selectionContextInfo},_execute:function(){if(!this._processing){var a=this;this.div_actionMessage.innerHTML=this.processingText,this._processing=!0,dojo.style(this.btn_Close.domNode,"visibility","visible"),dojo.style(this.btn_OK.domNode,"visibility","hidden"),dojo.style(this.btn_Cancel.domNode,"visibility","hidden"),this._action&&this._action.execute({scope:this,success:function(a,b){b.hide(),b.onActionComplete(a)},failure:function(b,c){c.onActionComplete(b),Sage.UI.Dialogs.showError(a.failureText)}})}},_okClick:function(){this._execute()},_cancelClick:function(){this.hide()},_closeClick:function(){this.hide()},onActionComplete:function(a){}})})},"Sage/Services/ActivityAction":function(){define(["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","dojo/_base/declare"],function(a,b,c,d){return d("Sage.Services.ActivityAction",[c],{_service:!1,_contract:"activities",_resourceKind:"service",_operationName:!1,_payLoad:!1,_selectionContext:!1,_publishMap:!1,_publishMapWithId:!1,_activityId:!1,_configuration:!1,_args:{},message:"Are you sure you want to continue?",description:"",constructor:function(){},execute:function(a){var b=this._publishMap,c=this._publishMapWithId,d=this._activityId,e=String.format("slxdata.ashx/slx/crm/-/{0}/{1}/{2}",this._contract,this._resourceKind,this._operationName);$.ajax({type:"POST",url:e,contentType:"application/json",data:dojo.toJson(this._args),processData:!1,success:function(e){b&&dojo.publish(b,[e,this]),c&&d&&dojo.publish(c,[d,this]),a&&a.success(e,a.scope)},failure:function(b){a&&a.failure(b,a.scope)}})},_setConfigurationAttr:function(a){this._configuration=a},_getConfigurationAttr:function(){return this._configuration},_setServiceAttr:function(a){this._service=a},_getServiceAttr:function(){return this._service},_setSelectionInfoAttr:function(a){this._selectionInfo=a},_getSelectionInfoAttr:function(){return this._selectionInfo},_setOperationNameAttr:function(a){this._operationName=a},_getOperationNameAttr:function(){return this._operationName},_setResourceKindAttr:function(a){this._resourceKind=a},_getResourceKindAttr:function(){return this._resourceKind},_setArgsAttr:function(a){this._args=a},_getArgsAttr:function(){return this._args},_setActionDescriptionAttr:function(a){this.description=a},_getActionDescriptionAttr:function(){return this.description},_setActionMessageAttr:function(a){this.message=a},_getActionMessageAttr:function(){return this.message},_setPublishMapAttr:function(a){this._publishMap=a},_setPublishMapWithIdAttr:function(a){this._publishMapWithId=a},_setActivityIdAttr:function(a){this._activityId=a}})})},"Sage/MainView/ActivityMgr/HistoryEditor":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/string","dojo/date/locale","Sage/Utility/Activity","Sage/Utility/File","dojo/_base/declare","dojo/i18n!./nls/HistoryEditor","dojo/text!./templates/HistoryEditor.html","dojo/dom-class","Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab","dijit/layout/ContentPane","dojo/dom-style","dojo/on","dojo/dom-geometry","dijit/Toolbar","dijit/layout/TabContainer","dijit/form/Textarea","dojox/layout/TableContainer","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_Widget,_Templated,SingleEntrySDataStore,BindingsManager,utility,_DialogHelpIconMixin,dojoLang,_DialogLoadingMixin,AttachmentList,sDataServiceRegistry,SageDialogs,dstring,locale,activityUtility,fileUtility,declare,historyEditorStrings,template,domClass,HistoryAttendeesTab,ContentPane,domStyle,on,domGeometry){dojo.requireLocalization("Sage.MainView.ActivityMgr","HistoryEditor");var historyEditor=declare("Sage.MainView.ActivityMgr.HistoryEditor",[_Widget,_Templated],{historyId:"",mode:"",id:"",activityType:"",_dialog:!1,_currentUserId:null,_activityService:!1,_historyData:!1,_historyStore:!1,_bindingMgr:!1,lup_Account:!1,lup_Contact:!1,lup_Opportunity:!1,lup_Ticket:!1,lup_Lead:!1,lup_Leader:!1,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},_isBinding:!1,_historySaved:!1,notnullfields:["ContactId","AccountId","OpportunityId","TicketId","LeadId"],historyDefaultValues:{},_doingFollowup:!1,_attachmentsSaved:!1,_attachmentList:!1,_tempIdForAttachments:!1,_hasAccess:!0,eventConnections:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){dojo.mixin(this,historyEditorStrings),this._historyService=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),this._setupStore(),this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"",dojo.subscribe("/entity/attachment/create",this,this._updateHistoryETag),dojo.subscribe("/entity/attachment/update",this,this._updateHistoryETag),dojo.subscribe("/entity/attachment/delete",this,this._updateHistoryETag)},destroy:function(){this._historyChangeConnection&&(dojo.disconnect(this._historyChangeConnection),this._historyChangeConnection=!1),this._bindingMgr&&this._bindingMgr.destroy();for(var a=0;a<this.eventConnections.length;a++)dojo.disconnect(this.eventConnections[a]);this.lup_Account.destroy(),this.lup_Contact.destroy(),this.lup_Opportunity.destroy(),this.lup_Ticket.destroy(),this.lup_Lead.destroy(),this.lup_Leader.destroy(),this.eventConnections=[],this.inherited(arguments)},isFirstOpen:!0,show:function(a){this._dialog.set("refocus",!1),this.isFirstOpen&&(this.isFirstOpen=!1,this.connect(this._dialog,"onHide",this._cleanOnClose)),this.lup_Account||(this.createAccountLookup(),this.createContactLookup(),this.createOpportunityLookup(),this.createTicketLookup(),this.createLeadLookup(),this.createLeaderLookup()),this.historyDefaultValues={},"New"===this.mode&&(this.historyDefaultValues=a||{},this._loadData()),this.mode,"Complete"===this.mode?domClass.add(this.btn_Delete.domNode,"display-none"):domClass.remove(this.btn_Delete.domNode,"display-none"),"atNote"===this.activityType&&"New"===this.mode?dojo.addClass(this.result_Section.domNode,"display-none"):dojo.removeClass(this.result_Section.domNode,"display-none"),this._dialog.show(),this._dialog._standby||(dojoLang.mixin(this._dialog,new _DialogLoadingMixin),this._historyData||this._dialog.showLoading()),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new _DialogHelpIconMixin),this._dialog.createHelpIconByTopic("View_Edit_Details_of_a_History_Item")),"atNote"===this.activityType?this._dialog.set("helpTopic","addnote"):this._dialog.set("helpTopic","View_Edit_Details_of_a_History_Item"),this.tc_EditHistory.selectChild(this.cp_General),this._doingFollowup=!1},hide:function(a){this._dialog.hide(a),this.set("historyId","")},onHide:function(){},_onDlgHide:function(){this.onHide()},_cleanOnClose:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this.set("historyId",""),this._hideLookupTooltip(this.lup_Account),this._hideLookupTooltip(this.lup_Contact),this._hideLookupTooltip(this.lup_Opportunity),this._hideLookupTooltip(this.lup_Ticket),this._hideLookupTooltip(this.lup_Lead),this._hideLookupTooltip(this.lup_Leader)},_hideLookupTooltip:function(a){a&&a.hideTooltip()},_showAttachmentsTab:function(){var a=this;window.setTimeout(function(){a._ensureAttachmentList()},100)},_ensureAttachmentList:function(){var a=!1;if(!this._attachmentList){a=!0,this._attachmentList=new AttachmentList({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"historyId"});var b=this;this._attachmentList.startup(function(){b.cp_Attachments&&b.cp_Attachments.resize()})}(a||"New"!=this.mode)&&this._attachmentList.resetEntityContext()},_updateHistoryETag:function(a){if(this._dialog.open&&this.historyId){var b=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("dynamic"));b.setResourceKind("history"),b.setResourceSelector('"'+this.historyId+'"'),b.setQueryArg("precedence","0"),b.read({success:function(a){this._historyData.$etag=a.$etag},scope:this})}},_setModeAttr:function(a){this.mode=a;var b=this.tc_EditHistory.getIndexOfChild(dijit.byId("histAttendeesTabPane"));if(0===a.indexOf("New")){if(this._historyData=!1,b>0){this.tc_EditHistory.removeChild(dijit.byId("histAttendeesTabPane")),dijit.byId("histAttendeesTabPane").destroy();var c=this;window.setTimeout(function(){c._dialog.resize()},100)}}else if(b<0){this._addAttendeesTab();var c=this;window.setTimeout(function(){c._dialog.resize()},100)}},_setActivityTypeAttr:function(a){switch(a){case"PhoneCall":case"atPhoneCall":this.activityType="atPhoneCall";break;case"Meeting":case"atAppointment":this.activityType="atAppointment";break;case"ToDo":case"atToDo":this.activityType="atToDo";break;case"PersonalActivity":case"atPersonal":case"Personal":this.activityType="atPersonal";break;case"atNote":case"Note":default:this.activityType="atNote"}},_setHistoryIdAttr:function(a){this.historyId!==a&&(this.historyId=a,this._historyData=!1,""!==a&&this._loadData())},_getHistoryIdAttr:function(){return this.historyId},_setupStore:function(){this._historyStore||(this._historyStore=new SingleEntrySDataStore({include:[],resourceKind:"history",service:this._historyService}))},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._historyStore&&("New"!==this.mode?this._historyStore.fetch({predicate:'"'+this.historyId+'"',onComplete:this._receivedHistory,onError:this._requestFailure,scope:this}):this._historyStore.newItem({onComplete:function(a){Sage.Utility.setValue(a,"Type",this.activityType),this._receivedHistory(dojo.mixin(a,this.historyDefaultValues))},scope:this}))},_resetDataProps:function(){this._historyData=!1,this._historySaved=!1,this._attachmentList&&this._attachmentList.clearNewAttachments(),"atNote"===this.activityType&&"New"===this.mode&&Sage.Utility.setValue(this.historyDefaultValues,"Result",this.resultComplete)},_receivedHistory:function(a){this._historyData=a,this._tempIdForAttachments=!1;var b=Sage.Services.getService("ClientEntityContext"),c={EntityId:this._historyData.$key||"",EntityType:"Sage.Entity.Interfaces.IHistory",Description:this._historyData.$descriptor,EntityTableName:"HISTORY"};b.setTemporaryContext(c),this._ensureIdsNotNull(),"New"!==this.mode?this.activityType=a.Type:this._applyUserOptionsForNewHistory(),this._setUIForActivityType(a.Type),this._bind(),"atNote"===this.activityType&&"New"===this.mode||a.UserId!==this._currentUserId&&"ADMIN"!==this._currentUserId.trim()?dojo.addClass(this.btn_Delete.domNode,"display-none"):dojo.removeClass(this.btn_Delete.domNode,"display-none"),this._dialog._standby&&this._dialog.hideLoading()},_ensureIdsNotNull:function(){for(var a=0;a<this.notnullfields.length;a++)null===this._historyData[this.notnullfields[a]]&&(this._historyData[this.notnullfields[a]]="")},_applyUserOptionsForNewHistory:function(){var a=new Date;a.setSeconds(5),a.setMinutes(0),a.setHours(0),Sage.Utility.setValue(this._historyData,"Timeless",!0),Sage.Utility.setValue(this._historyData,"StartDate",Sage.Utility.Convert.toIsoStringFromDate(a)),Sage.Utility.setValue(this._historyData,"Duration","60")},_requestFailure:function(a,b,c){},_createBindings:function(){this._bindingMgr&&(this._bindingMgr.destroy(),this._bindingMgr=!1),this._bindingMgr=new BindingsManager({defaultBinding:{boundEntity:this._historyData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Result,entityProperty:"Result"},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.dtp_completedDate,dataType:"date",entityProperty:"CompletedDate"},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",
onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.ta_Notes,entityProperty:"LongNotes"}]})},_bind:function(){this._historyData&&(this._bindingMgr?this._bindingMgr.boundEntity&&this._historyData.HistoryId===this._bindingMgr.boundEntity.HistoryId?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this._historyData):this._createBindings(),this._manualBind(),this._setUI())},_isNullOrWhitespace:function(a){return!a||""===a.trim()},_manualBind:function(){if(this._historyData){this._isBinding=!0;var a=this._historyData,b=this._isNullOrWhitespace(a.AccountId)?null:{$key:a.AccountId,$descriptor:a.AccountName};this.lup_Account.set("selectedObject",b);var c=this._isNullOrWhitespace(a.ContactId)?null:{$key:a.ContactId,$descriptor:a.ContactName};this.lup_Contact.set("selectedObject",c);var d=this._isNullOrWhitespace(a.OpportunityId)?null:{$key:a.OpportutunityId,$descriptor:a.OpportunityName};this.lup_Opportunity.set("selectedObject",d);var e=this._isNullOrWhitespace(a.TicketId)?null:{$key:a.TicketId,$descriptor:a.TicketNumber};this.lup_Ticket.set("selectedObject",e);var f=this._isNullOrWhitespace(a.LeadId)?null:{$key:a.LeadId,$descriptor:a.LeadName},g=this._isNullOrWhitespace(a.UserId)?null:{$key:a.UserId,$descriptor:a.UserName};this.lup_Leader.set("selectedObject",g),this.lup_Lead.set("selectedObject",f),this.tb_LeadCompanyName.set("value",this._isNullOrWhitespace(a.LeadId)?"":a.AccountName),this._updateLookupSeedValues(a.AccountId),this._isBinding=!1}},_accountChanged:function(a){if(!this._isBinding){var b=a?a.$key:"",c=a?a.$descriptor:"",d=this._historyData,e=this._isNullOrWhitespace(d.ContactId);d.AccountId=b,d.AccountName=c,d.PhoneNumber="",d.LeadId="",d.LeadName="",this._isBinding=!0,this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._updateLookupSeedValues(b),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),e&&(d.ContactId="",d.ContactName="",this.lup_Contact.set("selectedObject",null),this._setContactToCurrentAccountPrimary()),this._isBinding=!1}},_contactChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.ContactId="",b.ContactName="",void(b.PhoneNumber="");b.ContactId=a.$key,b.ContactName=a.$descriptor,b.PhoneNumber=Sage.Utility.getValue(a,"WorkPhone"),b.LeadId="",b.LeadName="";var c=this._isNullOrWhitespace(b.AccountName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}},_opportunityChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.OpportunityId="",void(b.OpportunityName="");if(b.OpportunityId=a.$key,b.OpportunityName=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId="",b.LeadName="",this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1,d&&(this.lup_Contact.set("selectedObject",null),this._setContactBasedOnOpportunity())}}},_ticketChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.TicketId="",void(b.TicketNumber="");if(b.TicketId=a.$key,b.TicketNumber=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId="",b.LeadName="",this._updateLookupSeedValues(),b.ContactId=Sage.Utility.getValue(a,"Contact.$key"),b.ContactName=Sage.Utility.getValue(a,"Contact.NameLF"),b.PhoneNumber=Sage.Utility.getValue(a,"Contact.WorkPhone"),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),d&&this.lup_Contact.set("selectedObject",{$key:a.Contact.$key,$descriptor:a.Contact.NameLF}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}}},_leadChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.LeadId="",b.LeadName="",b.PhoneNumber="",void this.tb_LeadCompanyName.set("value","");b.LeadId=a.$key,b.LeadName=a.$descriptor,b.AccountName=a.Company,b.PhoneNumber=a.WorkPhone,this.tb_LeadCompanyName.set("value",a.Company),b.ContactId="",b.ContactName="",b.AccountId="",b.AccountName="",b.TicketId="",b.TicketNumber="",b.OpportunityId="",b.OpportunityName="",this._updateLookupSeedValues(),this._isBinding=!0,this.lup_Contact.set("selectedObject",null),this.lup_Account.set("selectedObject",null),this.lup_Opportunity.set("selectedObject",null),this.lup_Ticket.set("selectedObject",null),this._isBinding=!1}},_leaderChanged:function(a){this._isBinding||(this._historyData.UserId=a.$key.substr(0,12),this._historyData.UserName=a.$descriptor)},_setContactBasedOnOpportunity:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("opportunities");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._historyData.OpportunityId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._setContactToCurrentAccountPrimary();for(var c,d=!1,e=!1,f=b[0],g=0;g<b.length;g++)b[g].IsPrimary&&(d&&!b[g].Contact.IsPrimary||(d=b[g])),!e&&b[g].Contact.IsPrimary&&(e=b[g]);(c=d||e||f)&&(this._historyData.ContactId=Sage.Utility.getValue(c,"Contact.$key"),this._historyData.ContactName=Sage.Utility.getValue(c,"Contact.NameLF"),this._historyData.PhoneNumber=Sage.Utility.getValue(c,"Contact.WorkPhone"),this._rebindToCurrentContact())},failure:function(){this._rebindToCurrentContact()},scope:this})},_setContactToCurrentAccountPrimary:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("accounts");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._historyData.AccountId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","NameLF,IsPrimary,WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.setQueryArg("count","1"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._rebindToCurrentContact();var c=b[0];this._historyData.ContactId=Sage.Utility.getValue(c,"$key"),this._historyData.ContactName=Sage.Utility.getValue(c,"NameLF"),this._historyData.PhoneNumber=Sage.Utility.getValue(c,"WorkPhone"),this._isBinding=!0,this.lup_Contact.set("selectedObject",c),this._isBinding=!1},failure:function(){this._rebindToCurrentContact()},scope:this})},_rebindToCurrentContact:function(){this._isBinding=!0,this.lup_Contact.set("selectedObject",{$key:this._historyData.ContactId,$descriptor:this._historyData.ContactName}),this._isBinding=!1},_updateLookupSeedValues:function(a){var b=a||this._historyData.AccountId;this.contactLookupConfig.seedValue=b,this.opportunityLookupConfig.seedValue=b,this.ticketLookupConfig.seedValue=b},_setUI:function(){this._formatHeader(),this._setDisabledByTimlessValue(),this._isNullOrWhitespace(this._historyData.LeadId)?this.rdo_Contact.set("checked",!0):this.rdo_Lead.set("checked",!0),this._setContactLeadVisibility(),this._setScheduledByLabel(),this._applySecurity()},_applySecurity:function(){if("New"===this.mode)this._setAccessToUI(!0);else if("Complete"===this.mode)this._setAccessToUI(!0);else{var a=Sage.Services.getService("CalendarSecurityService");if(a){var b=utility.getClientContextByKey("userID").trim(),c=this._historyData.UserId||b;b!==c?a.hasAccess(c,"allowEdit",function(a){this._setAccessToUI(a)},this):this._setAccessToUI(!0)}}},_setAccessToUI:function(a){this._hasAccess=a,"New"===this.mode||"Complete"===this.mode?(this.rdo_Lead.set("disabled",!a),this.tb_Location.set("disabled",!a),this.pk_Regarding.set("disabled",!a),this.pk_Category.set("disabled",!a),this.pk_Priority.set("disabled",!a),this.dtp_startDate.set("disabled",!a),this.dtp_completedDate.set("disabled",!a),a||this.sel_Duration.set("disabled",!0),this.cb_Timeless.set("disabled",!a),this.ta_Notes.set("disabled",!a),this.lup_Leader.set("disabled",!a),this.lup_Account.set("disabled",!a),this.lup_Contact.set("disabled",!a),this.lup_Lead.set("disabled",!a),this.lup_Ticket.set("disabled",!a),this.lup_Opportunity.set("disabled",!a),this.tb_LeadCompanyName.set("disabled",!a),this.btn_OK.set("disabled",!a)):(this.rdo_Lead.set("disabled",!0),this.tb_Location.set("disabled",!a),this.pk_Regarding.set("disabled",!a),this.pk_Category.set("disabled",!a),this.pk_Priority.set("disabled",!0),this.dtp_startDate.set("disabled",!0),this.dtp_completedDate.set("disabled",!0),this.sel_Duration.set("disabled",!0),this.cb_Timeless.set("disabled",!0),this.ta_Notes.set("disabled",!a),this.lup_Leader.set("disabled",!0),this.lup_Account.set("disabled",!0),this.lup_Contact.set("disabled",!0),this.lup_Lead.set("disabled",!0),this.lup_Ticket.set("disabled",!0),this.lup_Opportunity.set("disabled",!0),this.tb_LeadCompanyName.set("disabled",!0),this.btn_OK.set("disabled",!a))},_setUIForActivityType:function(a){this.pk_Regarding.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Regarding",a)),this.pk_Category.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Category",a)),this.pk_Result.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Result",a));var b=Sage.Services.getService("CalendarSecurityService");if(this.btn_OK.set("disabled",!1),b&&"New"!==this.mode){var c=utility.getClientContextByKey("userID").trim(),d=this._historyData.UserId||c;c!==d&&b.hasAccess(d,"allowEdit",function(a){this.btn_OK.set("disabled",!a)},this)}},_setDisabledByTimlessValue:function(){if(this._historyData){var a=this._historyData.Timeless;this.dtp_startDate.set("displayTime",!a),this.sel_Duration.set("disabled",a||!this._hasAccess)}},_timelessChange:function(){this._setDisabledByTimlessValue()},_descriptionChanged:function(){this._formatHeader()},_startDateChanged:function(){var a=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",a)},_setContactLeadVisibility:function(){var a=this.rdo_Contact.get("checked");dojo.removeClass(a?this.contactContainer.domNode:this.leadContainer.domNode,"display-none"),dojo.addClass(a?this.leadContainer.domNode:this.contactContainer.domNode,"display-none")},_formatHeader:function(){var a,b,c,d;b=Sage.Utility.Activity.getActivityImageClass(this._historyData.Type||"atAppointment","small"),a=Sage.Utility.Activity.getActivityTypeName(this._historyData.Type||"atAppointment"),c="New"===this.mode?this.insertText:"",a===this.noteText&&"New"===this.mode&&(c=this.insertNoteText,a=""),d=this._historyData.Description||"",""!==d&&(d=" - "+d),this._dialog.set("title",dojo.string.substitute('<div class="Global_Images icon16x16 ${0}" > </div>&nbsp;<span class="activity-dialog-title" style="max-width: 975px; text-overflow: ellipsis;">${1} ${2} ${3}</span>',[b,c,a,d]))},_setScheduledByLabel:function(){var a=Sage.Utility.Convert.toDateFromString(Sage.Utility.getValue(this._historyData,"CreateDate"));a.getFullYear()<1e3&&(a=new Date);var b=Sage.Utility.getValue(this._historyData,"CreateUser").trim();if(b&&utility.getClientContextByKey("userID")!==b){if("PROCESS"!==b&&"ADMIN"!==b)return void this._getUserInfoFor(b,function(b){dojo.html.set(this.lbl_ScheduledBy,dstring.substitute(this.scheduledByFormatText,{user:b.$descriptor,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}))});b="Administrator"}else b=utility.getClientContextByKey("userPrettyName");var c=dstring.substitute(this.scheduledByFormatText,{user:b,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})});dojo.html.set(this.lbl_ScheduledBy,c)},_getUserInfoFor:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",!1,!0,!0));c.setResourceKind("userInfo"),c.setResourceSelector("'"+a+"'"),c.setQueryArg("precedence","0"),c.read({success:b,scope:this,failure:function(){}})},_okClick:function(){delete this._historyData.Notes,delete this._historyData.UserName,this.rdo_Lead.checked?(delete this._historyData.ContactId,delete this._historyData.ContactName,delete this._historyData.AccountId,delete this._historyData.AccountName,delete this._historyData.LeadName):delete this._historyData.LeadId,"New"===this.mode?(this._currentUserActivitySaved=!0,this._historyStore.saveNewEntity(this._historyData,this._successfulHistorySave,this._failedHistorySave,this)):this._historyStore.save({scope:this,ignoreETag:!0,success:this._successfulHistorySave,failure:this._failedAHistorySave})},_successfulHistorySave:function(a){var b=!1;if(this._historyData=a,this.historyId=a.$key,Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this._attachmentsSaved=!0,this._attachmentList){var c=this._attachmentList.getNewAttachments();c.length>0&&"New"===this.mode&&(this._needsFollowUp()&&(b=!0),this._saveAttachments(c),this._attachmentsSaved=!1)}"New"===this.mode&&this.attendeesTab._addHistoryAttendee(a),dojo.publish("/entity/history/change",[a,this]),this._historySaved=!0,b||this._hideIfComplete()},_failedHistorySave:function(a){Sage.UI.Dialogs.showError(this.couldNotSaveErrorText)},_cancelClick:function(){"Complete"===this.mode?this._deleteClick():this.hide()},_hideIfComplete:function(){this._historySaved&&("New"!==this._mode?this._doFollowup():this.hide())},_deleteClick:function(){this._historyData&&this._historyStore&&Sage.UI.Dialogs.raiseQueryDialogExt({title:this.deleteTitle,query:this.deleteMessage,callbackFn:function(a){a&&this._historyStore.deleteEntity(this._historyData,this._successfulHistoryDelete,this._failedHistoryDelete,this)},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this})},_successfulHistoryDelete:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),dojo.publish("/entity/history/delete",[this._historyData.$key,this]),this.hide()},_failedHistoryDelete:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotDeleteErrorText);SageDialogs.showError(b)},_saveAttachments:function(a){this._attachmentRequests=a.length;for(var b=0;b<a.length;b++){var c=a[b],d=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));d.setResourceKind("attachments"),d.setResourceSelector("'"+c.$key+"'"),c.historyId=this.historyId;for(var e in this._historyData)if("Id"===e.substring(e.length-2)&&"UserId"!==e){var f=e.substring(0,1).toLowerCase()+e.substring(1);c[f]=this._historyData[e]}d.update(c,{success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this})}},_removeAttachments:function(){if(this._attachmentList)for(var a=this._attachmentList.getNewAttachments(),b=0;b<a.length;b++){var c=a[b],d=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));d.setResourceKind("attachments"),d.setResourceSelector("'"+c.$key+"'"),d.delete(c,{success:function(){},failure:function(){},scope:this})}},getRelationshipsForAttachments:function(){var a={};for(var b in this._activityData)if("Id"===b.substring(b.length-2)&&"UserId"!==b){var c=b.substring(0,1).toLowerCase()+b.substring(1);a[c]=this._activityData[b]}return"New"!==this.mode||fileUtility.supportsHTML5File||slx.desktop||(this._tempIdForAttachments=this._makeTempID(),a.historyId=this._tempIdForAttachments),a},_makeTempID:function(){if(!this._tempIdForAttachments){var a=this._currentUserId,b=utility.Convert.toIsoStringFromDate(this.dtp_completedDate.get("value"));b=b.replace(/[T:-]/g,"").substr(6,6),this._tempIdForAttachments="NE"+a.substr(a.length-4,4)+b}return this._tempIdForAttachments},_attachmentRequests:0,_successfulAttachmentSave:function(a){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_failedAttachmentSave:function(){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_needsFollowUp:function(){return this.sel_Followup.get("value")!=this.noneText},_doFollowup:function(){var a=this.sel_Followup.get("value");switch(a){case this.noneText:return void this.hide();case activityUtility.getActivityTypeName("atPhoneCall"):a="atPhoneCall";break;case activityUtility.getActivityTypeName("atAppointment"):a="atAppointment";break;case activityUtility.getActivityTypeName("atToDo"):a="atToDo"}var b=this._getFollowUpActivityData();this._doingFollowup=!0,this.hide("followup"),window.setTimeout(function(){var c=Sage.Services.getService("ActivityService");c&&c.scheduleActivity({type:a,preConfigured:b})},250)},_getFollowUpActivityData:function(){var a=this._historyData,b={AccountId:a.AccountId,AccountName:a.AccountName,ContactId:a.ContactId,ContactName:a.ContactName,Description:a.Description,LeadId:a.LeadId,LeadName:a.LeadName,OpportunityId:a.OpportunityId,OpportunityName:a.OpportunityName,TicketId:a.TicketId,TicketNumber:a.TicketNumber};return this.ck_coNotes.get("checked")&&(b.LongNotes=a.LongNotes,b.Notes=a.Notes),this.ck_coAttachments.get("checked")&&(b.carryOverAttachmentsFrom=a.$key),b},createAccountLookupConfig:function(){return this.accountLookupConfig={id:"_historyAcc",structure:[{label:this.accountText,field:"AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.mainPhoneText,field:"MainPhone"},{label:this.typeText,field:"Type"},{label:this.subTypeText,field:"SubType"},{label:this.statusText,field:"Status"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:!0,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!1,initializeLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.accountLookupConfig},createAccountLookup:function(){this.createAccountLookupConfig(),this.lup_Account=new Sage.UI.Controls.Lookup({id:"history_lu_account",allowClearingResult:!0,config:this.accountLookupConfig,readonly:!0}),this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged")),dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only")},createContactLookupConfig:function(){return this.contactLookupConfig={id:"_histoyContact",structure:[{label:this.nameText,field:"NameLF"},{label:this.accountText,field:"Account.AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.workphoneText,field:"WorkPhone"},{label:this.emailText,field:"Email"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"NameLF"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupContactText,dialogButtonText:this.okText},this.contactLookupConfig},createContactLookup:function(){this.createContactLookupConfig(),this.lup_Contact=new Sage.UI.Controls.Lookup({id:"history_lu_contact",allowClearingResult:!0,readonly:!0,config:this.contactLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged")),dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only")},createOpportunityLookupConfig:function(){return this.opportunityLookupConfig={id:"_historyOpp",structure:[{label:this.descriptionText,field:"Description"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.accountText,field:"Account.AccountName"},{label:this.stageText,field:"Stage"},{label:this.statusText,field:"Status"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText},this.opportunityLookupConfig},createOpportunityLookup:function(){this.createOpportunityLookupConfig(),this.lup_Opportunity=new Sage.UI.Controls.Lookup({id:"history_lu_opportunity",allowClearingResult:!0,readonly:!0,config:this.opportunityLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged")),dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only")},createTicketLookupConfig:function(){return this.ticketLookupConfig={id:"_historyTicket",structure:[{label:this.ticketNumberText,field:"TicketNumber"},{label:this.accountText,field:"Account.AccountName"},{label:this.nameText,field:"Contact.NameLF"},{label:this.phoneText,field:"Contact.WorkPhone"},{label:this.statusText,field:"StatusCode",pickListName:"",propertyType:"SalesLogix.PickList"},{label:this.urgencyText,field:"Urgency.Description"},{label:this.areaText,field:"Area"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText},this.ticketLookupConfig},createTicketLookup:function(){this.createTicketLookupConfig(),this.lup_Ticket=new Sage.UI.Controls.Lookup({id:"history_lu_ticket",allowClearingResult:!0,readonly:!0,config:this.ticketLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged")),dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only")},createLeadLookupConfig:function(){return this.leadLookupConfig={id:"_historyLead",structure:[{label:this.nameText,field:"LeadFullName"},{label:this.companyText,field:"Company"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.postalText,field:"Address.PostalCode"},{label:this.statusText,field:"Status"},{label:this.workphoneText,field:"WorkPhone"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"leads",sort:[{attribute:"LeadFullName"}]},isModal:!0,initialLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText},this.leadLookupConfig},createLeadLookup:function(){this.createLeadLookupConfig(),this.lup_Lead=new Sage.UI.Controls.Lookup({id:"history_lu_lead",allowClearingResult:!0,readonly:!0,config:this.leadLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged")),dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only")},createLeaderLookupConfig:function(){return this.leaderLookupConfig={id:"_historyLeader",structure:[{label:this.nameText,field:"Name",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"AllowAdd AND (AccessId eq '"+utility.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText},this.leaderLookupConfig},createLeaderLookup:function(){this.createLeaderLookupConfig(),this.lup_Leader=new Sage.UI.Controls.Lookup({id:"history_lu_leader",readonly:!0,config:this.leaderLookupConfig}),this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged")),dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only")},_updateLocation:function(a,b){var c=this._historyData.Location;if(c&&""!==c){for(var d=c.split("; "),e=[],f=!1,g=0;g<d.length;g++){if(d[g]===a){if(!b)continue;f=!0}e.push(d[g])}!f&&b&&e.push(a),c=e.join("; ")}else b&&(c=a);Sage.Utility.setValue(this._historyData,"Location",c),this.tb_Location.set("value",c)},_formatDateForQuery:function(a){return["'",a.getUTCFullYear(),"-",a.getUTCMonth()+1,"-",a.getUTCDate(),"'"].join("")},postCreate:function(){this.inherited(arguments),this._addAttendeesTab()},_addAttendeesTab:function(){var a=this.attendeesTab=new HistoryAttendeesTab,b=new ContentPane({id:"histAttendeesTabPane",title:this.tabNameParticipants,class:"tabContent remove-padding"},a.domNode);this.tc_EditHistory.addChild(b),a.histEditor=this,a.startup(),on(b,"show",function(){a._tabShow()})},_successfulComplete:function(a){var b=this,c=arguments;this.attendeesTab._historySaved(a).then(function(a){b.inherited(c)})}});return historyEditor})},"Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab":function(){define("Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab",["dojo","dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Utility","Sage/Utility/Activity","dojo/_base/array","dojo/_base/lang","dojo/i18n!./nls/HistoryEditorAttendeesTab","Sage/UI/GridView","Sage/UI/Controls/GridParts/Columns/CheckBox","dojo/store/Memory","dojo/data/ObjectStore","dijit/form/Select"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return d("Sage.MainView.ActivityMgr.HistoryEditorAttendeesTab",[b,c],{histEditor:null,lup_Contact:null,lup_ContactConfig:null,lup_Lead:null,lup_LeadConfig:null,widgetsInTemplate:!0,_timeZones:[],constructor:function(){i.mixin(this,j);var a=this;0==this._timeZones.length&&Sage.Utility.getTimeZones(function(b){a._timeZones=b})},widgetTemplate:new Simplate(["<div>",'<div id="{%= $.id %}_hisAttendeesGridPlaceholder" dojoAttachPoint="_histAttendeesGridPlaceholder" style="width:100%;height:100%"></div>',"</div>"]),_newItems:[],startup:function(){this._newItems=[],this.histEditor&&(this._buildGrid(),a.subscribe("/entity/history/create",this,this._historySaved),a.subscribe("/entity/history/change",this,this._historySaved))},_getTimeZoneDisplayName:function(a){var b=a;if(this._timeZones&&this._timeZones.length>0){var c=this._timeZones.filter(function(b){return b.Keyname===a});c&&c[0]&&(b=c[0].Displayname)}return b},_buildGrid:function(){var b=this,c=function(a,c){h.forEach(a,function(a,c){a.TimeZone&&(a.TimeZone=b._getTimeZoneDisplayName(a.TimeZone))})},d=new n({objectStore:new m({idProperty:"name",data:[{name:"Attended",id:"T"},{name:"Not Attended",id:"F"},{name:"Declined",id:"D"}]}),labelProperty:"name"}),g=[{field:"Name",label:this.header_Name,width:"180px"},{field:"AccountName",label:this.header_AccountName,width:"180px"},{field:"EntityType",label:this.header_Type,width:"60px"},{field:"IsPrimary",label:this.header_Primary,width:"40px",editor:l,editorArgs:{disabled:!0}},{field:"IsAttendee",label:this.header_Attendee,width:"40px",editor:l,editorArgs:{disabled:!0}},{field:"Status",label:this.header_Status,width:"100px",get:function(a){for(var b=0;b<d.objectStore.data.length;b++)if(d.objectStore.data[b].id==a[this.field])return d.objectStore.data[b].name},set:function(a){for(var b=0;b<d.objectStore.data.length;b++)if(d.objectStore.data[b].name==a[this.field])return d.objectStore.data[b].id},editor:o,editorArgs:{store:d},editOn:"click"},{field:"RoleName",label:this.header_RoleName},{field:"PhoneNumber",label:this.header_Phone,width:"80px"},{field:"Email",name:this.header_Email,width:"150px"},{field:"TimeZone",label:this.header_TimeZone,width:"150px"}],i={columns:g,storeOptions:{service:e.getSDataService("dynamic"),resourceKind:"historyAttendees",select:["EntityType","EntityId","IsPrimary","IsAttendee","Name","Description","Notes","Status"],newItemParentReferenceProperty:"History",onComplete:c,where:function(){return"(HistoryId eq '"+f.getCurrentEntityId()+"' and (SLXUserAssociationId eq null or SLXUserAssociationId eq ''))"},scope:this},slxContext:{workspace:"",tabId:""},sort:[{attribute:"Name"}],minRowsPerPage:40,placeHolder:this._histAttendeesGridPlaceholder,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,keyboardNavigation:!1};(this._grid=new k(i)).createGridView(),a.connect(this._grid,"markDirty",function(){a.byId(this.dirtyDataMsgID)&&a.style(a.byId(this.dirtyDataMsgID),"display","none");var b=Sage.Services.getService("ClientBindingManagerService");b&&b.clearDirtyAjaxItem(this.id)})},_tabfShow:function(){this._grid&&!this.gridRefreshed&&(this._grid.refresh(),this.gridRefreshed=!0)},_tabShowdd:function(){if(this._grid&&!this.gridRefreshed){var a=this._grid.get("mode"),b=f.getCurrentEntityId();(!b&&"insert"!==a||b&&"insert"===a)&&this._grid.set("mode",b?"":"insert"),this._grid.refresh(),this.gridRefreshed=!0}},_tabShow:function(){if(this._grid){var a=this._grid.get("mode"),b=f.getCurrentEntityId();(!b&&"insert"!==a||b&&"insert"===a)&&this._grid.set("mode",b?"":"insert"),this._grid.refresh(),this._grid.grid.resize()}},_historySaved:function(a){this._grid.grid._grid.save()},_addHistoryAttendee:function(a){if(a.ContactId||a.LeadId){var b=null;a.ContactId?g._getContactData(a.ContactId,function(c){c&&(b=this._setHistoryAttendeeEntityFromContactLead("Contact",c),b.History={$key:a.$key},this._saveHistoryAttendee(b))},this):a.LeadId&&g._getLeadData(a.LeadId,function(c){c&&(b=this._setHistoryAttendeeEntityFromContactLead("Lead",c),b.History={$key:a.$key},this._saveHistoryAttendee(b))},this)}},_saveHistoryAttendee:function(a){new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic")).setResourceKind("historyAttendees").create(a,{success:function(){},failure:function(){},scope:this})},_setHistoryAttendeeEntityFromContactLead:function(a,b){var c=!1;return b&&b.$key&&(c={},c.EntityType=a,c.EntityId=b.$key,c.$key=b.$key,c.IsPrimary=!0,c.Name=b.$descriptor,c.$descriptor=b.$descriptor,c.Account=null,c.AccountName=b.AccountName||b.Company,"Lead"==a&&(c.Company=b.Company,c.LeadFullName=b.$descriptor),c.Company=b.Company,c.Email=b.Email,c.Description="",c.Notes="",b.Address&&(c.TimeZone=b.Address.TimeZone),c.PhoneNumber=b.WorkPhone,c.RoleName="",c.general=!1),c}})})},"Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility","Sage/Utility/Activity","Sage/UI/Dialogs","dijit/form/RadioButton","dojo/_base/declare","dojo/i18n!./nls/OccurrenceOrSeriesQueryDlg"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return n("Sage.MainView.ActivityMgr.OccurrenceOrSeriesQueryDlg",[a,b],{activityId:"",activityMemberId:"",activity:!1,store:!1,mode:"edit",widgetsInTemplate:!0,disableSeriesOption:"",
widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" title="" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onDlgHide">','<div class="recur-activity-dialog">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" >','<div dojoType="dijit.layout.ContentPane" label="{%= $.actDateText %}" dojoAttachPoint="container_actDate"></div>','<div dojoType="dijit.layout.ContentPane" label="{%= $.accountText %}" dojoAttachPoint="container_account"></div>','<div dojoType="dijit.layout.ContentPane" label="{%= $.contactText %}" dojoAttachPoint="container_contact"></div>','<div dojoType="dijit.layout.ContentPane" label="{%= $.opportunityText %}" dojoAttachPoint="container_opportunity"></div>',"</div>",'<div class="dijitContentPane">&nbsp;</div>','<div class="dijitContentPane">','<input type="radio" dojoType="dijit.form.RadioButton" name="editType" id="{%= $.id %}_thisOccurrence" checked="true" dojoAttachPoint="_thisOccurRadio" />&nbsp;','<label for="{%= $.id %}_thisOccurrence">{%= ($.mode === "edit") ? $.editOneText : (($.mode === "delete")? $.deleteOneText : $.completeOneText) %}</label>','</div><div class="dijitContentPane">','<input type="radio" dojoType="dijit.form.RadioButton" name="editType" id="{%= $.id %}_Series" dojoAttachPoint="_seriesRadio" {%=$.disableSeriesOption%} />&nbsp;','<label for="{%= $.id %}_Series">{%= ($.mode === "edit") ? $.editAllText : (($.mode === "delete")? $.deleteAllText : $.completeAllText) %}</label>',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnContinue" name="_btnContinue" dojoAttachPoint="_btnContinue" dojoAttachEvent="onClick:_continueClick" >{%= $.continueText %}</div>',"</div>","</div>","</div>","</div>"]),constructor:function(){f.mixin(this,o)},show:function(){this._dialog.show(),this._dialog._standby||(f.mixin(this._dialog,new e),this.activity||this._dialog.showLoading()),this._thisOccurRadio.set("checked",!0)},_setModeAttr:function(a){this.mode=a},_getModeAttr:function(){return this.mode},hide:function(){this._dialog.hide()},_onDlgHide:function(){this.activity=!1,this.activityId=""},_setActivityIdAttr:function(a){this.activityId=a,this.activityId&&""!==this.activityId&&this._loadData()},_getActivityIdAttr:function(){return this.activityId},_setActivityMemebrIdAttr:function(a){this.activityMemberId=a},_getActivityMemberIdAttr:function(){return this.activityMemberId},_loadData:function(){this._dialog._standby&&this._dialog.showLoading();var a=["Description","AccountName","ContactName","OpportunityName","StartDate","Type","Timeless","Recurring","RecurrenceState"];this.store||(this.store=new g({include:[],select:a,resourceKind:"activities",service:h.getSDataService("system")})),""!==this.activityId&&this.store.fetch({predicate:'"'+this.activityId+'"',onComplete:this._receiveActivity,onError:this._failLoad,scope:this})},_receiveActivity:function(a){this._dialog._standby&&this._dialog.hideLoading(),this.activity=a,this._bind()},_receiveActivities:function(a){this._dialog._standby&&this._dialog.hideLoading();var b=a.$resources;b.length<1&&this._failLoad(),this.activity=b[0],this.activityId=this.activity.$key,this._bind()},_bind:function(){var a=this.activity,b=a.Description;b||(b=""),b.length>30&&(b=b.substring(0,26)+"..."),this._dialog.set("title",c.substitute(this.titleFmt,{type:k.getActivityTypeName(a.Type),description:b})),this.container_actDate.set("content",k.formatActivityStartDate(j.Convert.toDateFromString(a.StartDate,a.Timeless))),this.container_account.set("content",a.AccountName||"&nbsp;"),this.container_contact.set("content",a.ContactName||"&nbsp;"),this.container_opportunity.set("content",a.OpportunityName||"&nbsp;")},_failLoad:function(){this._dialog._standby&&this._dialog.hideLoading(),l.showWarning(this.failedToLoadMsg),this._dialog.hide()},_continueClick:function(a){if(this.hide(),this._thisOccurRadio.get("checked")){if(this.activityId.length<=12){var b=j.Convert.toDateFromString(this.activity.StartDate).getTime()/1e3+62135596800;this.activityId=this.activityId+";"+b}this.onSelectOccurrence(this.activityId,j.Convert.toDateFromString(this.activity.StartDate),this.activityMemberId)}else this.onSelectSeries(this.activityId,this.activityMemberId)},onSelectSeries:function(a){},onSelectOccurrence:function(a,b){}})})},"Sage/Services/EntityService":function(){define(["Sage/UI/Dialogs","Sage/MainView/EntityMgr/EditEntityOptionsDlg","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Utility","dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i){var j=g("Sage.Services.EntityService",null,{_entityDetailsDialog:!1,constructor:function(){},editEntityOptions:function(a,b){this.editEntityValues(a,b)},editEntityValues:function(a,c){var d=Sage.Services.getService("RoleSecurityService");d&&d.hasAccess("Administration/EntityManager/Entities/Edit")&&(this._entityDetailsDialog||(this._entityDetailsDialog=new b),this._entityDetailsDialog.set("entityId",a),this._entityDetailsDialog.show())},getSelectedId:function(){var a=this.getSelectionInfo(),b="";if(a){if(a.hasCompositeKey){return a.selections[0].entity.Entity.$key}b=(a.selections.length,a.selections[0].id)}return b},getSelectedItem:function(){var a=this.getSelectionInfo(),b={id:!1,hasCompositeKey:!1,entity:!1};return a&&(b.hasCompositeKey=a.hasCompositeKey,b.entity=a.entity,a.selections.length,b.id=a.selections[0].id,b.entity=a.selections[0].entity),b},getSelections:function(){var a=this.getSelectionInfo(),b=null;return a&&(b=a.selections),b},prepareSelections:function(){return this.getSelectionInfo()},getSelectionInfo:function(){var b=!1;try{var c=dijit.byId("list");c&&(b=c.getSelectionInfo(!0))}catch(b){a.alert(this.txtErrorActionMsg||"error getting selectionInfo")}return b},getTotalSelectionCount:function(){var a=0;try{var b=dijit.byId("list");b&&(a=b.getTotalSelectionCount())}catch(a){}return a},verifySelection:function(a){return null!==a&&0!==a.selectionCount},verifySingleSelection:function(a){return null!==a&&1===a.selectionCount},setSelectionCount:function(){try{var a=dijit.byId("list");a&&$("#selectionCount").text(a.getTotalSelectionCount())}catch(a){}},refreshList:function(a){try{var b=dijit.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}}});return Sage.Services.hasService("EntityService")||Sage.Services.addService("EntityService",new j),j})},"Sage/MainView/EntityMgr/EditEntityOptionsDlg":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Dialogs","dijit/form/RadioButton","dojo/_base/declare","dojo/i18n!./nls/_BaseEntityDetailContent","dojo/text!./templates/EditEntityOptionsDlg.html","dojo/store/Memory","dojo/dom-construct","Sage/UI/FilteringSelect","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return m("Sage.MainView.EntityMgr.EditEntityOptionsDlg",[a,b],{entityName:"",mode:"edit",widgetsInTemplate:!0,typeDropDowns:!1,propertiesDP:!1,entityStore:!1,propertyStore:!1,widgetTemplate:j.makeTemplateFromString(o),nlsResource:n,constructor:function(){},postCreate:function(){this.lblName.innerHTML=this.nlsResource.propertyName,this.lblDisplayName.innerHTML=this.nlsResource.lblDisplayName,this.lblPluralName.innerHTML=this.nlsResource.lblPluralName,this.lblTitle.innerHTML=this.nlsResource.lblTitle,this.lblExtension.innerHTML=this.nlsResource.IsExtension,this.lblAdvancedOptions.innerHTML=this.nlsResource.AdvOptions,this.lblPluralName.innerHTML=this.nlsResource.lblPluralName,this.lblImport.innerHTML=this.nlsResource.lblImport,this.lblMatch.innerHTML=this.nlsResource.lblMatch,this.lblBulkUpdate.innerHTML=this.nlsResource.lblBulkUpdate,this.lblAudited.innerHTML=this.nlsResource.lblAudited,this.lblCanPut.innerHTML=this.nlsResource.lblPut,this.lblCanPost.innerHTML=this.nlsResource.lblPost,this.lblCanDelete.innerHTML=this.nlsResource.lblDelete,this.lblHistory.innerHTML=this.nlsResource.lblHistory,dojo.mixin(this._dialog,new e),t.mixin(this._dialog,new u),this._dialog.createHelpIconByTopic("EditEntity"),this.entityStore=new p,this.propertyStore=new p,this.typeDropDowns=new r({name:"value",value:0,store:this.entityStore,searchAttr:"name"}),q.place(this.typeDropDowns.domNode,this.entityDP,"only"),this.propetiesDP=new r({name:"value",value:0,store:this.propertyStore,searchAttr:"name",required:!1}),q.place(this.propetiesDP.domNode,this.viewTitle,"only");var a=this;this.IsExtension.on("change",function(b){b?a.typeDropDowns.set("disabled",!1):(a.typeDropDowns.set("value",""),a.typeDropDowns.set("disabled",!0))},!0)},_okClick:function(){this._dialog.showLoading();var a=this;this.entity.displayName=a.DisplayName.textbox.value,this.entity.displayNamePlural=a.PluralName.textbox.value,!1===this.IsExtension.get("value")?this.entity.isExtension=!1:(this.entity.isExtension=!0,this.entity.extendedEntity={$key:a.typeDropDowns.value},this.entity.extendedEntityPropertyName=a.typeDropDowns.value),this.entity.audited=!1!==this.Audited.get("value"),this.entity.bulkAction.canBulkUpdate=!1!==this.BulkUpdate.get("value"),this.entity.import.canMatch=!1!==this.CanMatch.get("value"),this.entity.import.canImport=!1!==this.CanImport.get("value"),this.entity.sdata.canPost=!1!==this.CanPost.get("value"),this.entity.sdata.canPut=!1!==this.CanPut.get("value"),this.entity.sdata.canDelete=!1!==this.CanDelete.get("value"),this.entity.StringExpression="${"+a.propetiesDP.value+"}";var b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata"));b.setResourceKind("entities('"+this.entityName+"')"),b.update(this.entity,{isSecurityManager:!0,scope:a,ignoreETag:!1,success:function(){a._dialog.hideLoading(),this.hide()},failure:function(b,c){a._dialog.hideLoading(),this.hide()}})},_cancelClick:function(){this.hide()},destroy:function(){this.inherited(arguments)},show:function(){this._dialog.show(),this._dialog._standby||f.mixin(this._dialog,new e)},_setModeAttr:function(a){this.mode=a},_getModeAttr:function(){return this.mode},hide:function(){this._dialog.hide()},_onDlgHide:function(){this.entityName=""},_setEntityIdAttr:function(a){this.entityName=a,this.entityName&&""!==this.entityName&&this._loadData()},_getEntityIdAttr:function(){return this.entityName},_loadData:function(){this._dialog.showLoading(),this._dialog.set("title",this.entityName);var a=this;0===a.entityStore.data.length&&new Sage.SData.Client.SDataResourceCollectionRequest(s.getSDataService("metadata")).setResourceKind("entities").setQueryArg("select","id,displayName,name").setQueryArg("Count","500").setQueryArg("orderBy","name").setQueryArg("format","json").read({success:function(b){for(var c=b.$resources,d=0;d<=c.length-1;d++){var e=c[d].displayName?c[d].displayName:c[d].name;e&&a.entityStore.add({id:c[d].name,name:e})}},failure:function(a){}});var b=new Sage.SData.Client.SDataResourceCollectionRequest(s.getSDataService("metadata"));b.setResourceKind("entities('"+this.entityName+"')"),b.setQueryArg("include","sdata,bulkAction,import"),b.read({success:function(b){if(void 0!==b&&void 0!==b.$resources&&1==b.$resources.length){a.entity=b.$resources[0];var c=b.$resources[0];if(a.Name.textbox.value=c.name,a.DisplayName.textbox.value=c.displayName,a.PluralName.textbox.value=c.displayNamePlural,a.Audited.set("value",c.audited),a.BulkUpdate.set("value",c.bulkAction.canBulkUpdate),a.CanMatch.set("value",c.import.canMatch),a.CanImport.set("value",c.import.canImport),a.CanPost.set("value",c.sdata.canPost),a.CanPut.set("value",c.sdata.canPut),a.CanDelete.set("value",c.sdata.canDelete),a.History.textbox.value=c.historyEntityName,a.IsExtension.set("value",c.isExtension),c.isExtension){a.typeDropDowns.set("disabled",!1);var d=a.entityStore.get(c.extendedEntity.$key);a.typeDropDowns.set("item",d)}else a.typeDropDowns.set("value",""),a.typeDropDowns.set("disabled",!0);for(var e=c.properties.$resources,f=a.propertyStore.data.length,g=0;g<f;g++)a.propertyStore.remove(a.propertyStore.data[0].id);for(g=0;g<=e.length-1;g++)if("f750817f-73ad-4bf3-b2de-bd0f5cc47dfd"==e[g].dataTypeId||"ccc0f01d-7ba5-408e-8526-a3f942354b3a"==e[g].dataTypeId){var h=e[g].displayName?e[g].displayName:e[g].propertyName;h&&a.propertyStore.add({id:e[g].propertyName,name:h})}if(c.stringExpression){var i=c.stringExpression;"${"===i.substring(0,2)&&(i=i.substring(2,i.length-1));var j=a.propertyStore.get(i);a.propetiesDP.set("item",j)}else a.propetiesDP.set("item",null)}a._dialog.hideLoading()},failure:function(b){a._dialog.hideLoading()}})}})})},"Sage/UI/FilteringSelect":function(){define(["dijit/form/FilteringSelect","dojo/_base/declare"],function(a,b){return b("Sage.UI.FilteringSelect",a,{valueAttr:!1,_getValueField:function(){return this.valueAttr||"value"}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityWizardController":function(){define(["dojo/_base/declare","dojo/string","dojo/_base/array","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/MainView/EntityMgr/EntityWizard/SelectEntityType","Sage/MainView/EntityMgr/EntityWizard/EntityDetails","Sage/MainView/EntityMgr/EntityWizard/Relationship","Sage/MainView/EntityMgr/EntityWizard/EntityProperties","Sage/MainView/EntityMgr/EntityWizard/AddEditEntity","Sage/MainView/EntityMgr/EntityWizard/Status","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.EntityMgr.EntityWizard.EntityWizardController",[d],{wizardOptions:null,constructor:function(a,b){this.wizardOptions=this.wizardOptions?this.wizardOptions:this._getDefaultWizardOptions(),this.subscriptions.push(l.subscribe("/entityController/entityWizard/nextStep",dojo.hitch(this,function(a){this._nextStep(a)}))),this.subscriptions.push(l.subscribe("/entityController/entityWizard/previousStep",dojo.hitch(this,function(a){this._previousStep(a)}))),this.subscriptions.push(l.subscribe("/entityController/entityWizard/cancel",dojo.hitch(this,function(){this._cancel()})))},startWizard:function(){this._goToStep(e.entityWizardStep.EntityDetails,null),this.entityDetails.ownerId||e.getOwnerEntityInfo(this)},_nextStep:function(a){var b=this._getNextStep(a);this._goToStep(b)},_previousStep:function(a){var b=this._getPreviousStep(a);this._goToStep(b)},_cancel:function(){setTimeout(dojo.hitch(this,function(){this._destroyObjects()}),dijit.defaultDuration+100)},_getDefaultWizardOptions:function(){return{hiddenSteps:[e.entityWizardStep.AddActions]}},_isStepVisible:function(a){var b=!0;return this.wizardOptions&&this.wizardOptions.hiddenSteps&&c.some(this.wizardOptions.hiddenSteps,function(c,d){if(a===c)return b=!1,!0}),!!b},_getNextStep:function(a){for(var b in e.entityWizardStep){var c=e.entityWizardStep[b];if(c>a&&this._isStepVisible(c))return c}return null},_getPreviousStep:function(a){var b=[];for(var d in e.entityWizardStep)b.unshift(e.entityWizardStep[d]);var f=null;return c.some(b,dojo.hitch(this,function(b){if(b<a&&this._isStepVisible(b))return f=b,!0})),f},_goToStep:function(a){var b,c=this._getNextStep(a),d=null===c||c===e.entityWizardStep.EntityProperties,l=this._getPreviousStep(a),m=null===l||l===e.entityWizardStep.SelectEntityType,n={isLastStep:d,isFirstStep:m,currentStep:null};switch(a){case e.entityWizardStep.SelectEntityType:b=dijit.byId("dlgSelectEntityType"),b||(n.currentStep=e.entityWizardStep.SelectEntityType,b=new f(n),b.startup()),b.show();break;case e.entityWizardStep.EntityDetails:b=dijit.byId("dlgEntityDetails"),b||(n.currentStep=e.entityWizardStep.EntityDetails,b=new g(n)),b.show();break;case e.entityWizardStep.Relationship:b=dijit.byId("dlgRelationship"),b||(n.currentStep=e.entityWizardStep.Relationship,b=new h(n),b.startup()),b.show();break;case e.entityWizardStep.EntityProperties:b=dijit.byId("dlgEntityProperties"),b||(n.currentStep=e.entityWizardStep.EntityProperties,b=new i(n),b.startup()),b.show();break;case e.entityWizardStep.AddEditEntity:b=dijit.byId("dlgAddEditEntity"),b||(n.currentStep=e.entityWizardStep.AddEditEntity,b=new j(n),b.startup()),b.show();break;case e.entityWizardStep.Status:b=dijit.byId("dlgStatus"),b||(n.currentStep=e.entityWizardStep.Status,b=new k(n),b.startup()),b.show()}}})})},"Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/store/Memory","dijit/_Widget","Sage/_Templated","dojo/store/Observable","dojo/store/Memory","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/MainView/EntityMgr/EntityDetailUtility","dojo/i18n!./nls/_EntityWizardDialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.EntityMgr.EntityWizard._EntityWizardDialogBase",[f,g],{_dialog:null,_currentStep:null,_isFirstStep:!1,_isLastStep:!1,_helpIconTopic:"EntityWizard",widgetsInTemplate:!0,subscriptions:[],_dialogIds:["dlgSelectEntityType","dlgEntityDetails","dlgRelationship","dlgEntityProperties","dlgAddEditEntity","dlgStatus"],entityDetails:{},_nlsResources:l,constructor:function(){this.subscriptions=[]},show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(d.mixin(this._dialog,new o),this._dialog.createHelpIconByTopic(this._helpIconTopic),this._dialog.helpIcon.tabIndex="-1"))},startup:function(){this.inherited(arguments),n.mixin(this._dialog,new m)},isValid:function(){return!0},_dialog_OnCancel:function(){this._btnCancel_OnClick()},_btnBack_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/entityController/entityWizard/previousStep",this._currentStep)},_btnNext_OnClick:function(){this.isValid()&&(this._checkCurrentStep(),this._dialog.hide(),c.publish("/entityController/entityWizard/nextStep",this._currentStep))},_btnCancel_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/entityController/entityWizard/cancel",null)},_checkCurrentStep:function(){this._currentStep},finishWizard:function(){this._destroyObjects()},_destroyObjects:function(){b.forEach(this._dialogIds,function(a){var b=dijit.byId(a);b&&b.destroyRecursive()}),b.forEach(this.subscriptions,function(a){a.remove()})}})})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(a,b,c,d){var e=function(a){function e(b,d){var e=a[b];e&&(a[b]=function(f){var g;if("put"===b&&(g=a.getIdentity(f)),j)return e.apply(this,arguments);j=!0;try{var h=e.apply(this,arguments);return c(h,function(a){d("object"==typeof a&&a||f,g)}),h}finally{j=!1}})}var f,g=[],h=0;a=b.delegate(a),a.notify=function(a,b){h++;for(var c=g.slice(),d=0,e=c.length;d<e;d++)c[d](a,b)};var i=a.query;a.query=function(e,j){j=j||{};var k=i.apply(this,arguments);if(k&&k.forEach){var l=b.mixin({},j);delete l.start,delete l.count;var m,n=a.queryEngine&&a.queryEngine(e,l),o=h,p=[];k.observe=function(b,e){1==p.push(b)&&g.push(m=function(b,g){c(k,function(c){var i,k,l,m=c.length!=j.count;if(++o!=h)throw new Error("Query is out of date, you must observe() the query prior to any data modifications");var q,r=-1,s=-1;if(g!==f)for(i=0,k=c.length;i<k;i++){var t=c[i];if(a.getIdentity(t)==g){q=t,r=i,!n&&b||c.splice(i,1);break}}if(n){if(b&&(n.matches?n.matches(b):n([b]).length)){var u=r>-1?r:c.length;c.splice(u,0,b),s=d.indexOf(n(c),b),c.splice(u,1),j.start&&0==s||!m&&s==c.length?s=-1:c.splice(s,0,b)}}else b&&(g!==f?s=r:j.start||(s=a.defaultIndex||0,c.splice(s,0,b)));if((r>-1||s>-1)&&(e||!n||r!=s)){var v=p.slice();for(i=0;l=v[i];i++)l(b||q,r,s)}})});var i={};return i.remove=i.cancel=function(){var a=d.indexOf(p,b);a>-1&&(p.splice(a,1),p.length||g.splice(d.indexOf(g,m),1))},i}}return k};var j;return e("put",function(b,c){a.notify(b,c)}),e("add",function(b){a.notify(b)}),e("remove",function(b){a.notify(void 0,b)}),a};return b.setObject("dojo.store.Observable",e),e})},"Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility":function(){define(["dojo/_base/xhr","dojo/string","dojo/date/locale","dojo/dom-class","dojo/_base/lang","Sage/Data/SDataServiceRegistry","Sage/Utility"],function(a,b,c,d,e,f,g){return Sage.namespace("Sage.MainView.EntityMgr.EntityWizard.EntityWizardUtility"),e.mixin(Sage.MainView.EntityMgr.EntityWizard.EntityWizardUtility,{entityWizardStep:{SelectEntityType:0,EntityDetails:1,Relationship:2,EntityProperties:3,AddEditEntity:4,Status:5},getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var a=Sage.Services.getService("ClientEntityContext");if(a)return a.getContext()}return null},setDomNodeVisible:function(a,b){a&&b?d.remove(a,"display-none"):a&&d.add(a,"display-none")},formatDate:function(a){if(g.Convert.isDateString(a)){var b=g.Convert.toDateFromString(a);return c.format(b,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return""},getOwnerEntityInfo:function(a){var b=a;new Sage.SData.Client.SDataResourceCollectionRequest(f.getSDataService("metadata")).setQueryArg("where","isKey eq true").setResourceKind("entities('Owner')/properties").setQueryArg("select","id,propertyName").setQueryArg("count",1).setQueryArg("format","json").read({async:!0,success:function(a){var c=a.$resources;b.entityDetails.ownerId=c[0].id},failure:function(a){}})}}),Sage.MainView.EntityMgr.EntityWizard.EntityWizardUtility})},"Sage/MainView/EntityMgr/EntityDetailUtility":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/query","dojo/_base/array","dojo/_base/connect","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/AddEditEntityDetail/DistinctDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/RangeDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/AMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/ADDMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/UserLookupDetailsView","dojo/dom-class","Sage/Utility","Sage/Utility/Filters","Sage/UI/Controls/PropertyStore","Sage/UI/Controls/TextBox","Sage/Utility/GeneralSchemaReader","dojo/request/xhr"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a("Sage.MainView.EntityMgr.EntityDetailUtility",null,{filterTypeDataLoad:!1,aggregation:!1,operation:!1,propertyNameDataLoad:!1,propertyIdDataLoad:!1,rangeFilterGridCol:!1,specialCharacters:!1,typeStore:null,propertyStore:null,propertyInformation:null,service:!1,_nlsResource:!1,specialDates:Object.getOwnPropertyNames(n.specialDates),picklistSchemaData:null,propertySchemaData:null,filterSchemaData:null,constructor:function(){this.service=Sage.Data.SDataServiceRegistry.getSDataService("metadata"),this.propertyIdDataLoad=new b,this.propertyNameDataLoad=new b,this.filterTypeDataLoad=new b,this.aggregation=new b,this.operation=new b,this.rangeFilterGridCol=new b,this.specialCharacters=new b,this.propertyInformation=new b,this._nlsResource=g,this._populateFromSDataMetaDataHelper()},_populateFromSDataMetaDataHelper:function(){var a=new r("system");a.getSchemaInformationFromSData(),this.picklistSchemaData=a.picklistResourceNodes,a=new r("metadata"),a.getSchemaInformationFromSData(),this.propertySchemaData=a.propertyResourceNodes,this.filterSchemaData=a.filterResourceNodes},refreshPropertyStore:function(a,b,c){this.propertyStore=new p(a,b,c),this.typeStore=this.propertyStore.fStore.typeStore},getPropertiesAssociatedWithFilters:function(a){this._grabEntityProperties(this,a,0,100)},_grabEntityProperties:function(a,b,c,d){d=d||100,c=c||0;var e=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);e.setResourceKind("entities('"+b.name+"')/properties"),e.setQueryArg("startIndex",c),e.setQueryArg("count",d),e.setQueryArg("where","isIncluded ne False"),e.read({success:function(b){for(var e=b.$resources,f=0;f<=e.length-1;f++){var g=e[f].propertyName,h=e[f].id,i=void 0===a.propertyNameDataLoad.index;(i||void 0===a.propertyNameDataLoad.index[g])&&a.propertyNameDataLoad.add({id:g,name:e[f].propertyName,type:o.resolveDataType(e[f].dataTypeId)}),(i||void 0===a.propertyIdDataLoad.index[h])&&a.propertyIdDataLoad.add({id:h,name:e[f].propertyName,type:o.resolveDataType(e[f].dataTypeId)})}var j=b.$totalResults,k=c+d,l=j-k;l>0&&(l>=100?a.grabEntityProperties(a,!1,k,100):a.grabEntityProperties(a,!1,k,l))},failure:function(){}})},getSpecialValues:function(){var a=Object.getOwnPropertyNames(this.specialDates);if(void 0===a||void 0!==a.length&&0===a.length)return this.specialDates;for(var b=0;b<a.length;b++)this.specialCharacters.get(a[b])||this.specialCharacters.add({name:a[b],id:a[b],property:a[b]})},getSchemasInformationFromSData:function(a){void 0===a&&(a=!0);var b=this;s("slxdata.ashx/slx/metadata/-/$schema",{handleAs:"xml",preventCache:!0,sync:!a}).then(function(a){var c=n.parseXMLNode(a,{});c&&b._gSIFSSuccess(c)},function(a){return b._onError("Download",a),a})},_gSIFSSuccess:function(a){var b=this,c="",d=a["xs:schema"],g=d["xs:simpleType"],h=d["xs:complexType"];e.forEach(g,function(a){c=a.name;var d=a["xs:restriction"];"OrmAnalyticsMetricAggregation--enum"===c&&b._populateAggregationList(d["xs:enumeration"]),"ComparisonValidatorOperator--enum"===c&&b._populateOperationList(d["xs:enumeration"])}),e.forEach(h,function(d){c=d.name;var e=d["xs:all"],f=d["xs:choice"];"details--choice"===c&&b._populateFilterTypesList(f["xs:element"]),"range--type"===c&&b._createRangefilterCols(e["xs:element"]),"property--type"===c&&b._populateProperties(e["xs:element"],a)}),f.publish("Sage/EntityManager/FilterUtilityDone")},_populateProperties:function(a,c){var d=this;e.forEach(a,function(a){var b=a["sme:isMandatory"]||!1;d.propertyInformation.add({name:a.name,label:a["sme:label"],type:a.type,manadtory:b,collection:null,sub:null,value:null})});for(var f=c["xs:schema"],g=f["xs:simpleType"],h=f["xs:complexType"],i=this.propertyInformation.data,j=0;j<i.length;j++){var k=i[j],l=k.type;if("xs:"!==l.substring(0,3)&&("--enum"===l.substring(l.length-6,l.length)&&e.forEach(g,function(a){var c=a["xs:restriction"];a.name===l&&(d.propertyInformation.data[j].collection=new b({data:c["xs:enumeration"]}))}),"--type"===l.substring(l.length-6,l.length))){var m=new b;e.forEach(h,function(a){var b=a["xs:all"];if(a.name===l){var c=b["xs:element"];if("object"==typeof c)if(c instanceof Array)e.forEach(c,function(a){var b=a["sme:isMandatory"]||!1;m.add({name:a.name,label:a["sme:label"],type:a.type,manadtory:b,collection:null,sub:null})});else{var d=c["sme:isMandatory"]||!1;m.add({name:c.name,label:c["sme:label"],type:c.type,manadtory:d,collection:null,sub:null})}}}),this.propertyInformation.data[j].sub=m}}},_populateFilterTypesList:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.name;this.filterTypeDataLoad.add(this._initialformatDetails(d))}},_populateAggregationList:function(a){for(var b=0;b<a.length;b++){var c=a[b];this.aggregation.add({id:c.value,name:this._nlsResource[c.value]})}},_populateOperationList:function(a){for(var b=0;b<a.length;b++){var c=a[b];this.operation.add({id:c.value,name:this._nlsResource[c.value]})}this.operation.add({id:"Contains",name:this._nlsResource.Contains}),this.operation.add({id:"StartsWith",name:this._nlsResource.StartsWith}),this.operation.add({id:"EndsWith",name:this._nlsResource.EndsWith})},_createRangefilterCols:function(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e=!1;b=d.name,e="rangeName"===b?{label:this._nlsResource[b],field:b,editOn:"",autoSave:"rangeId"!==b,editable:"rangeId"!==b,hidden:"rangeId"===b||"customSql"===b,unhidable:"displayName"!==b,id:"AA"+b,editor:q,editorArgs:{shouldPublishMarkDirty:!1,required:!0,placeHolder:this._nlsResource.defaultRangeRowValue},width:150}:{label:this._nlsResource[b],field:b,editOn:"",autoSave:"rangeId"!==b,editable:"rangeId"!==b,hidden:"rangeId"===b||"customSql"===b,unhidable:"displayName"!==b,id:b,editor:q,editorArgs:{shouldPublishMarkDirty:!1},width:150},this.rangeFilterGridCol.add(e)}},getStringFormatDetails:function(a){return this.formatDetails(a,!1,"").detailsLocalizedName},_initialformatDetails:function(a){var b="",c="";switch(a){case"distinctFilter":b=this._nlsResource.FilterGridDetailsDistinctFilter,c="filter";break;case"dateDiffMetricFilter":b=this._nlsResource.FilterGridDetailsDateDiffMetricFilter,c="metric";break;case"rangeFilter":b=this._nlsResource.FilterGridDetailsRangeFilter,c="filter";break;case"metricFilter":b=this._nlsResource.FilterGridDetailsMetricFilter,c="metric";break;case"userLookupFilter":case"lookupFilter":b=this._nlsResource.FilterGridDetailsLookupFilter,c="filter";break;default:b=this._nlsResource.FilterGridDetailsCustom,c="filter"}return{id:a,name:b,type:c}},formatDetails:function(a,b,c){return void 0!==a&&(void 0!==a.distinctFilter?{detailsKey:"distinctFilter",detailsObject:!!b&&new h({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDistinctFilter}:void 0!==a.dateDiffMetricFilter?{detailsKey:"dateDiffMetricFilter",detailsObject:!!b&&new k({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDateDiffMetricFilter}:void 0!==a.rangeFilter?{detailsKey:"rangeFilter",detailsObject:!!b&&new i({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsRangeFilter}:void 0!==a.metricFilter?{detailsKey:"metricFilter",detailsObject:!!b&&new j({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsMetricFilter}:void 0!==a.userLookupFilter?{detailsKey:"userLookupFilter",detailsObject:!!b&&new l({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter}:void 0!==a.lookupFilter?{detailsKey:"lookupFilter",detailsObject:!!b&&new l({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter}:{detailsKey:"custom",detailsObject:!1,detailsLocalizedName:this._nlsResource.FilterGridDetailsCustom})},getDetailsSection:function(a,b){var c=a._title==this._nlsResource.FilterGridDetailsMetricFilter?"metricFilter":"distinctFilter",d=!1;if(a._EditData&&(d=!0),b&&d&&a._EditData.details)return this.formatDetails(a._EditData.details,!0,a.entityName);a.typeDropDowns&&a.typeDropDowns.item&&a.typeDropDowns.item.id&&(c=a.typeDropDowns.item.id);var e=!1;switch(d&&(e=a._EditData.details),c){case"dateDiffMetricFilter":return{detailsKey:"dateDiffMetricFilter",detailsObject:new k({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDateDiffMetricFilter};case"metricFilter":return{detailsKey:"metricFilter",detailsObject:new j({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsMetricFilter};case"distinctFilter":return{detailsKey:"distinctFilter",detailsObject:new h({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDistinctFilter};case"rangeFilter":return{detailsKey:"rangeFilter",detailsObject:new i({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsRangeFilter};case"userLookupFilter":return{detailsKey:"userLookupFilter",detailsObject:new l({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter};default:return!1}},colonizeLabels:function(a){return c.substitute("${0}:",[a])},grabReaderFriendlyVersionOfAggregationGivenId:function(a){for(var b=0;b<this.aggregation.data.length;b++)if(this.aggregation.data[b].id==a)return this.aggregation.data[b].name;return""},grabItemOfAggregationGivenId:function(a){for(var b=0;b<this.aggregation.data.length;b++)if(this.aggregation.data[b].id==a)return this.aggregation.data[b];return""},
grabIdOfAggregationGivenName:function(a){for(var b=0;b<this.aggregation.data.length;b++)if(this.aggregation.data[b].name==a)return this.aggregation.data[b].id;return""}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/DistinctDetailsView":function(){define(["dojo/_base/declare","dojo/_base/event","dojo/text!./templates/DistinctDetailsView.html","Sage/Utility","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/Controls/TextBox"],function(declare,dojoEvent,template,utility,_DetailsAddEditDialogBase,crmTextBox){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.DistinctDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,charactersTextBox:!1,constructor:function(){this.hasProperties=!0,this.isMetric=!1},postCreate:function(){this._createCharacterController(),this.startup()},_createCharacterController:function(){this.lblEntityFiltersDetailsContains.innerHTML=this._nlsResources.lblCharacter;var a=this;this.charactersTextBox=new crmTextBox({shouldPublishMarkDirty:!1,regExp:"^[0-9]+$",validator:function(b,c){var d=new RegExp("^0+","g");return b=b.replace(d,""),0===b.length&&(b=0),b>99&&(b=99),b<0&&(b=0),null!==a.DojoString.substitute("${0}",[b]).match(this.regExp,"g")&&(this.textbox.value=b,!0)},invalidMessage:this._nlsResources.FieldMustBeANumber,required:!0}),this.DomConstruct.place(this.charactersTextBox.domNode,this.txtEntityFiltersDetailsContains,"only"),this.charactersTextBox.textbox.value=0,void 0!==this.details.distinctFilter&&(this.charactersTextBox.textbox.value=this.details.distinctFilter.characters),void 0!==this.details.rangeFilter&&(this.charactersTextBox.textbox.value=this.details.rangeFilter.characters),this.DojoConnect.connect(this.charactersTextBox,"onKeyPress",this._onKeyPress,!0)},_onKeyPress:function(a){utility.restrictToNumberOnKeyPress(a,"number")||dojoEvent.stopEvent(a)},startup:function(){this.inherited(arguments)},getDetails:function(a){return a?this.charactersTextBox.textbox.value:{distinctFilter:{characters:this.charactersTextBox.textbox.value}}},isValid:function(){var a=this.charactersTextBox.isValid(!0);return this.charactersTextBox.onChanged(),a}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase":function(){define(["dijit/_Widget","dijit/registry","dojo/dom-construct","dojo/query","dojo/dom-class","dojo/dom-style","dojo/string","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/AddEditDialog","Sage/_Templated","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return i("Sage.MainView.EntityMgr.AddEditEntityDetail._DetailsAddEditDialogBase",[a,l],{widgetTemplate:new Simplate("<div>Not implemented</div>"),_nlsResources:k,Dialog:m,DojoString:g,DojoStyle:f,DojoConnect:h,DomClass:e,DomConstruct:c,Lang:j,Query:d,Registry:b,detailUtility:!1,hasProperties:!1,isMetric:!1,editing:!1,details:!1,embedded:!1,entityName:"",constructor:function(){var a=arguments;if(a[0]){var b=a[0];b.detailUtility&&(this.detailUtility=b.detailUtility),b.isMetric&&(this.isMetric=b.isMetric),b.details&&(this.details=b.details,this.editing=b.details&&!0),b.hasProperties&&(this.hasProperties=b.hasProperties)}},postCreate:function(){},startup:function(){this.inherited(arguments)},getDetails:function(){},isValid:function(){return!0}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/RangeDetailsView":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/text!./templates/RangeDetailsView.html","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/MainView/EntityMgr/AddEditEntityDetail/DistinctDetailsView","Sage/UI/GridView","Sage/UI/Controls/TextBox","Sage/Utility"],function(declare,Memory,template,_DetailsAddEditDialogBase,distinct,GridView,crmTextBox,utility){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.RangeDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,character:!1,rangeGridsObj:!1,lastSelectedRange:!1,addBtnId:"rangeGrid_addBtn",rmvBtnId:"rangeGrid_removeBtn",gridId:"RangeDetailsView_grid",tmpRwId:0,constructor:function(a){this.hasProperties=!0,this.isMetric=!1,this.Registry.byId(this.addBtnId)&&this.Registry.byId(this.addBtnId).destroy(),this.Registry.byId(this.rmvBtnId)&&this.Registry.byId(this.rmvBtnId).destroy(),this.Registry.byId(this.gridId)&&this.Registry.byId(this.gridId).destroy()},postCreate:function(){this._createCharacter(),this._createRangeGrid(),this.startup()},_addItemToGrid:function(a){a.rangeGridsObj.grid.addItem({rangeId:a.tmpRwId,rangeName:"",upper:"",lower:"",displayName:null,customSQL:null}),a.tmpRwId++,a.rangeGridsObj.refresh()},_removeItemFromGrid:function(a){var b=a.rangeGridsObj.getSelectedRowData(),c=void 0===b||null===b||0===b.length,d=this.store.idProperty;if(c)return void a.Dialog.showWarning(a._nlsResources.SelectAnItem,"Infor CRM");for(var e=!1,f=0;f<b.length;f++){var g=b[f],h=g[d],i=this.store.data.length;void 0!==h&&(this.store.remove(h),i>this.store.data.length&&(e=!0,f--,!0)),h=g.id,i=this.store.data.length,void 0!==h&&(this.store.remove(h),i>this.store.data.length&&(e=!0,f--,!0))}e?this.grid.refresh():a.Dialog.showWarning(a._nlsResources.SelectAnItem,"Infor CRM")},_createRangeGrid:function(){var a=new Memory({data:[]});this.details&&this.details.rangeFilter&&this.details.rangeFilter.ranges&&(a=Memory({idProperty:"rangeId",data:this.details.rangeFilter.ranges}));var b=this.detailUtility.rangeFilterGridCol.data.sort(function(a,b){var c=a.id,d=b.id;return c<d?-1:c>d?1:0}),c=this.rangeGridsObj=new GridView({tools:["add","delete"],store:a,columns:b,addNew:this.Lang.partial(this._addItemToGrid,this),deleteSelected:this.Lang.partial(this._removeItemFromGrid,this),placeHolder:this.rangegridwhole,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,minRowsPerPage:a.data.length,maxRowsPerPage:a.data.length,id:this.gridI,shouldPublishMarkDirty:!1});c.createGridView(),c.innerHTML=this._nlsResources.lblRange,c.grid.onLoadComplete=function(){c.grid.resize()}},_createCharacter:function(){this.character=new distinct({embedded:!0,isMetric:!1,hasProperty:this.hasProperty,details:this.details,detailUtility:this.detailUtility}),this.DomConstruct.place(this.character.domNode,this.characterContainer,"only")},startup:function(){this.inherited(arguments)},getDetails:function(){for(var a={rangeFilter:{characters:this.character.getDetails(!0),ranges:[]}},b=this.rangeGridsObj.store.data,c=0;c<b.length;c++){var d={range:b[c]};d.range.rangeId=this._stripoutNonRangeIds(d),""===d.range.rangeId&&delete d.range.rangeId,null===d.range.displayName&&delete d.range.displayName,null===d.range.upper&&delete d.range.upper,null===d.range.lower&&delete d.range.lower,null===d.range.rangeName&&delete d.range.rangeName,null===d.range.customSQL&&delete d.range.customSQL,a.rangeFilter.ranges.push(d.range)}return a},_stripoutNonRangeIds:function(a){var b="[A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+",c=b.match(a.range.rangeId,"g");return c&&this.Lang.isArray(c)&&c[0].length==a.range.rangeId.length?a.range.rangeId:""},isValid:function(){for(var a=this.Query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-AArangeName",this.rangeGridsObj.grid.bodyNode),b=this.Query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-lower",this.rangeGridsObj.grid.bodyNode),c=this.Query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-upper",this.rangeGridsObj.grid.bodyNode),d=this.character.isValid(),e=!0,f=0;f<a.length;f++){a[f].widget.isValid(!0),a[f].widget.onChanged();var g="Error"!==a[f].widget.state&&!("Incomplete"===a[f].widget.state&&a[f].widget.required);g||a[f].widget.set("state","Error");var h=b[f].widget.value,i=c[f].widget.value;if(isNaN(h)||isNaN(i)){h.startsWith(":")&&!utility.specialDates.hasOwnProperty(h)&&(this._setErrorStateWithMsg(c[f].widget,this._nlsResources.InvalidSpecialDateValue,"Error"),g=!1),i.startsWith(":")&&!utility.specialDates.hasOwnProperty(i)&&(this._setErrorStateWithMsg(c[f].widget,this._nlsResources.InvalidSpecialDateValue,"Error"),g=!1);var j,k,l,m;g&&(h.startsWith(":")&&i.startsWith(":")?(j=utility.specialDates[h](new Date),k=utility.specialDates[i](new Date),j>k&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1)):h.startsWith(":")&&!isNaN(i)?(j=utility.specialDates[h](new Date),l=parseInt(""+j.getFullYear()+("0"+(j.getMonth()+1)).slice(-2)+("0"+j.getDate()).slice(-2),10),m=parseInt(i,10),l>m&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1)):i.startsWith(":")&&!isNaN(h)?(j=utility.specialDates[i](new Date),m=parseInt(""+j.getFullYear()+("0"+(j.getMonth()+1)).slice(-2)+("0"+j.getDate()).slice(-2),10),(l=parseInt(h,10))>m&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1)):h>i&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1))}else h>i&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1);e=e&&g}return e&&d},_setErrorStateWithMsg:function(a,b,c){a&&"function"==typeof a.set&&(b&&a.set("message",b),c&&a.set("state",c))}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/AMDDetailsView":function(){define(["dijit/registry","dojo/_base/declare","dojo/text!./templates/AMDDetailsView.html","dojo/store/Memory","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/FilteringSelect"],function(registry,declare,template,memory,_DetailsAddEditDialogBase,crmDropdown){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.AMDDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,aggregations:null,propertyValues:null,aggregationDropDown:!1,_idForAggregtDropDown:"aggregationDpItems",constructor:function(a){this.embedded||(this.hasProperties=!0,this.isMetric=!0),this.Registry.byId(this._idForAggregtDropDown)&&this.destroy(this.Registry.byId(this._idForAggregtDropDown))},destroy:function(a){a.destroy()},postCreate:function(){this._createAggregateController(),this.startup()},_populateDefaultAggregate:function(){var a="";this.details&&(this.details.metricFilter&&this.details.metricFilter.aggregation&&(a=this.details.metricFilter.aggregation),this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.aggregation&&(a=this.details.dateDiffMetricFilter.aggregation),this.details.aggregation&&(a=this.details.aggregation)),this.aggregation&&(a=this.aggregation);var b={context:this,idValue:a};if(this.DojoConnect.subscribe("Sage/EntityManager/detailUtilityDone",b,function(){this.Registry.byId(this.context._idForAggregtDropDown).item=this.context.detailUtility.grabItemOfAggregationGivenId(this.idValue),this.Registry.byId(this.context._idForAggregtDropDown).focusNode.value=this.Registry.byId(this.context._idForAggregtDropDown).item.name||""}),this.editing){var c=this.details.propertyInfo.propertyLookup(),d=c[0];return{value:a,aggs:this._setAggregations(d.dataType.aggregate)}}return{value:a,aggs:this.detailUtility.aggregation}},_createAggregateController:function(){this.lblEntityFiltersDetailsAggregation.innerHTML=this._nlsResources.lblAggregation;var a=this._populateDefaultAggregate();this.aggregationDropDown=new crmDropdown({id:this._idForAggregtDropDown,name:"aggregations",value:a.value,store:a.aggs,searchAttr:"name",fetchProperties:{sort:[{attribute:"name",descending:!1}]}},this._idForAggregtDropDown),this.DojoConnect.subscribe("Sage/UI/Controls/PropertDropDown",this,function(a){this._setAggregations(a)}),this.DomConstruct.place(this.aggregationDropDown.domNode,this.dpEntityFiltersDetailsAggregation,"only")},_setAggregations:function(a){var b=this.detailUtility.aggregation;if(b=b.query(function(b){return void 0!==a.dataType&&null!==a.dataType&&""!==a.dataType?a.dataType.aggregate.indexOf(b.id.toLowerCase())>=0:a.indexOf(b.id.toLowerCase())>=0}),!this.aggregationDropDown)return new memory({data:b});this.aggregationDropDown.store=new memory({data:b}),this.aggregationDropDown.store.index[this.aggregationDropDown.value]>=0||this.aggregationDropDown.set("value",this.aggregationDropDown.store.data[0].id)},startup:function(){this.inherited(arguments)},getDetails:function(a){var b=this.aggregationDropDown.displayedValue;return this.aggregationDropDown.item&&this.aggregationDropDown.item.id&&(b=this.aggregationDropDown.item.id),a?b:{metricFilter:{aggregation:b}}},isValid:function(){var a=this.aggregationDropDown.isValid(!0);return a?this.aggregationDropDown.set("state",""):this.aggregationDropDown.set("state","Error"),a}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/ADDMDDetailsView":function(){define(["dojo/_base/declare","dojo/text!./templates/ADDMDDetailsView.html","Sage/MainView/EntityMgr/AddEditEntityDetail/AMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/Controls/PropertyDropDown"],function(declare,template,aggregate,_DetailsAddEditDialogBase,PropertyDropDown){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.ADDMDDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,aggregation:!1,PropertyTextBoxFrom:null,PropertyTextBoxTo:null,constructor:function(a){this.hasProperties=!1,this.isMetric=!0,this.entityName=a.entityName},postCreate:function(){this._createAggregation(),this._createFromFS(),this._createToFS(),this.startup()},_createFromFS:function(){this.PropertyTextBoxFrom=new PropertyDropDown({entityName:this.entityName,superType:"DateTime"}),this.DomConstruct.place(this.PropertyTextBoxFrom.domNode,this.fieldsContainerFrom,"replace"),this.lblMetricRangeFrom.innerHTML=this._nlsResources.lblFrom;var a="";this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.fromPropertyName&&(a=this.details.dateDiffMetricFilter.fromPropertyName),this.PropertyTextBoxFrom.entitySelected.textbox.value=a},_createToFS:function(){this.PropertyTextBoxTo=new PropertyDropDown({entityName:this.entityName,superType:"DateTime"}),this.DomConstruct.place(this.PropertyTextBoxTo.domNode,this.fieldsContainerTo,"replace"),this.lblMetricRangeTo.innerHTML=this._nlsResources.lblTo;var a="";this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.toPropertyName&&(a=this.details.dateDiffMetricFilter.toPropertyName),this.PropertyTextBoxTo.entitySelected.textbox.value=a},_createAggregation:function(){this.aggregation=new aggregate({embedded:!0,isMetric:!0,hasProperty:this.hasProperty,details:this.details,detailUtility:this.detailUtility}),this.DomConstruct.place(this.aggregation.domNode,this.aggregate,"only")},startup:function(){this.inherited(arguments)},getDetails:function(){return{dateDiffMetricFilter:{aggregation:this.aggregation.getDetails(!0),fromPropertyName:this.PropertyTextBoxFrom.entitySelected.textbox.value,toPropertyName:this.PropertyTextBoxTo.entitySelected.textbox.value}}},isValid:function(){var a=this.aggregation.isValid();if(!0===a){var b=this.PropertyTextBoxFrom.entitySelected.isValid(!0);return":now"===this.PropertyTextBoxFrom.entitySelected.textbox.value&&(b=!1,this.PropertyTextBoxFrom.entitySelected.set("state","Error")),this.PropertyTextBoxFrom.entitySelected.onChange(),b=b&&this.PropertyTextBoxTo.entitySelected.isValid(!0),":now"===this.PropertyTextBoxTo.entitySelected.textbox.value&&(b=b&&!1,this.PropertyTextBoxTo.entitySelected.set("state","Error")),this.PropertyTextBoxTo.entitySelected.onChange(),b}return a}});return widget})},"Sage/UI/Controls/PropertyDropDown":function(){define(["Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/PropertyDropDown.html","dijit/Tree","Sage/UI/Controls/PropertyStore","Sage/Utility","dojo/string","dijit/TooltipDialog","dojo/dom-style","dojo/dom-class"],function(_DetailsAddEditDialogBase,declare,template,Tree,PropertyStore,utility,dojoString,TooltipDialog,dojoStyle,domClass){var widget=declare("Sage.UI.Controls.PropertyDropDown",[_DetailsAddEditDialogBase],{widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),entityName:null,byTypeId:null,bySuperType:null,byKeywords:null,allMatch:!1,tree:null,eleTextBox:null,maxLevels:-1,_required:!0,constructor:function(a){this.entityName=a.entityName,void 0!==a.type&&(this.byTypeId=a.typeId),void 0!==a.superType&&(this.bySuperType=a.superType),void 0!==a.Keywords&&(this.byKeywords=a.Keywords),void 0!==a.allMatch&&(this.allMatch=a.allMatch),void 0!==a.maxLevels&&(this.maxLevels=a.maxLevels),void 0!==a.onlyProperties&&(this.onlyProperties=a.onlyProperties),void 0!==a.required&&(this._required=a.required)},postCreate:function(){this._createTree(),void 0!==this._required&&(this.entitySelected.required=this._required),this.startup()},startup:function(){this.inherited(arguments)},propertyLookup:function(a,b){return void 0!==a&&null!==a||(a=this.entityName),void 0!==b&&null!==b||(b=this.entitySelected.textbox.value),(new PropertyStore).lookup(a,b)},_createTree:function(){var a=this,b=null;b=this.byKeywords?new PropertyStore(this.entityName,{Keywords:this.byKeywords,allMatch:this.allMatch,maxLevels:this.maxLevels,onlyProperties:this.onlyProperties}):new PropertyStore(this.entityName,{typeId:this.byTypeId,superType:this.bySuperType,maxLevels:this.maxLevels,onlyProperties:this.onlyProperties}),this.tree=new Tree({model:b.store,showRoot:!1,onClick:function(b){a.entitySelected.set("value",b.property),dijit.popup.close(),dojo.publish("Sage/UI/Controls/PropertDropDown",b)}}),domClass.add(this.tree.domNode,"height250");var c=" ";this._EditData&&this._EditData.propertyName&&(c=this._EditData.propertyName,this.entitySelected.set("value",c)),this.eleTextBox=this.entitySelected.domNode},showDDTree:function(){var a=dojoStyle.getComputedStyle(this.eleTextBox).width,b=new TooltipDialog({style:dojoString.substitute("width:${0};",[a]),content:this.tree});domClass.add(b.domNode,"propertyDialog"),dijit.popup.open({popup:b,around:this.eleTextBox})}});return widget})},"Sage/UI/Controls/PropertyStore":function(){define(["dojo/string","dojo/_base/declare","dojo/store/Memory","Sage/Data/SDataServiceRegistry","dojo/store/JsonRest","dojo/json","dojo/_base/Deferred","dojo/DeferredList","dojo/request","dojo/i18n!./nls/PropertyStore","Sage/UI/Controls/FieldStore"],function(a,b,c,d,e,f,g,h,i,j,k){return b("Sage.UI.Controls.PropertyStore",null,{_nlsResource:null,fStore:null,constructor:function(a,b,c){this._nlsResource=j,this.store.selectedEntity=a,this.store.addins=c,this.fStore=new k,this.store.allTypes=this.fStore.typeStore,void 0!==b&&void 0!==b.Keywords?b.allMatch?this.store.types=this.fStore.queryByKeyWordsAllMatch(b.Keywords):this.store.types=this.fStore.queryByKeywordsOneMatchMatch(b.Keywords):this.store.types=this.fStore.query(b),this.store.filterByType=this.store.types.data.length,void 0!==b&&(void 0!==b.onlyProperties&&(this.store.onlyProperties=b.onlyProperties),void 0!==b.maxLevels&&(this.store.maxLevel=b.maxLevels))},lookup:function(b,c){var e=[];return new Sage.SData.Client.SDataSingleResourceRequest(d.getSDataService("metadata")).setResourceKind(a.substitute('entities("${0}")/properties',[b])).setQueryArg("format","json").setQueryArg("where",a.substitute("${0} eq '${1}'",["propertyName",c])).read({async:!1,scope:this,success:function(a){var b=this.store.dataTypeIdToTypeName(a.dataTypeId);void 0===b&&(b=this.fStore.blankTemplate),e.push({id:a.id,name:a.propertyName,property:a.propertyName,dataType:b})},failure:function(a){}}),e},store:new e({target:"",selectedEntity:"",types:null,filterByType:!1,onlyProperties:!1,allTypes:null,baseTemplate:"${0}:${1}${2}",relationTemplate:"${0}${1}${2}.${3}!",maxLevel:-1,addins:!1,dataTypeIdToTypeName:function(a){var b=this.types.index[a];return this.types.data[b]},getChildren:function(b,d){var e,j,k,l,m=new c,n=this.baseTemplate,o=this.relationTemplate,p=this.types,q=this.filterByType,r=this.allTypes;"rootNode"==b.name?(e=this.selectedEntity,j="",k="",l=e):(e=b.relatedEntity,j=b.property+".",k=b.oldrelationPath?b.oldrelationPath:"",l=b.base);var s=b.Level+1;new g;var t=[];if(e.length>0){var u=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setResourceSelector('"'+e+'"').setQueryArg("select","properties/*").setQueryArg("format","json").setQueryArg("Count","500")).then(function(b){for(var c=f.parse(b),d=c.properties.$resources,e=0;e<=d.length-1;e++){var g=d[e];if(!0===g.isIncluded)if(q){var h=p.index[g.dataTypeId];if(h>=0){var i=p.data[h];m.add({id:g.id,display:g.displayName,columName:j+g.columnName,name:g.propertyName,property:j+g.propertyName,dataType:i,Level:s,legacyPath:a.substitute(n,[l,k,g.columnName])})}}else{var o=r.index[g.dataTypeId];if(o>=0){var t=r.data[o];m.add({id:g.id,display:g.displayName,columName:j+g.columnName,name:g.propertyName,property:j+g.propertyName,dataType:t,Level:s,legacyPath:a.substitute(n,[l,k,g.columnName])})}}}});if(t.push(u),!this.onlyProperties){var v=a.substitute('(parentEntity.name eq "${0}") or (childEntity.name eq "${0}")',[e]);q<26&&(v=a.substitute('(parentEntity.name eq "${0}" and cardinality eq "M:1") or (childEntity.name eq "${0}" and cardinality eq "1:M")',[e]));var w=i(new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("relationships").setQueryArg("select","isDynamic,cardinality,parentEntity/*,childEntity/*,parentProperty/*,childProperty/*,columns/*").setQueryArg("where",v).setQueryArg("format","json").setQueryArg("Count","500")).then(function(b){for(var c=f.parse(b),d=c.$resources,g=0;g<=d.length-1;g++){var h=d[g],i=h.childEntity.properties.$resources.filter(function(a){return a.id===h.columns.$resources[0].childPropertyId});i[0]&&i[0].columnName&&(i=i[0].columnName);var n=h.parentEntity.properties.$resources.filter(function(a){return a.id===h.columns.$resources[0].parentPropertyId});n[0]&&n[0].columnName&&(n=n[0].columnName),e==h.parentEntity.$key&&h.parentProperty.isIncluded?m.add({name:h.parentProperty.propertyName,id:h.parentProperty.id,relatedEntity:h.childEntity.$key,children:"test",property:j+h.parentProperty.propertyName,base:l,dataType:"",Level:s,parentTable:h.parentEntity.tableName,childTable:h.childEntity.tableName,parentKey:n,childKey:i,oldrelationPath:k+a.substitute(o,[n,"=",i,h.childEntity.tableName])}):e==h.childEntity.$key&&h.childProperty.isIncluded&&m.add({name:h.childProperty.propertyName,id:h.childProperty.id,children:"test",property:j+h.childProperty.propertyName,base:l,relatedEntity:h.parentEntity.$key,dataType:"",Level:s,parentTable:h.parentEntity.tableName,childTable:h.childEntity.tableName,parentKey:n,childKey:i,oldrelationPath:k+a.substitute(o,[i,"=",n,h.parentEntity.tableName])})}});t.push(w);var x=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setQueryArg("where",a.substitute('extendedEntity.name eq "${0}"',[e])).setQueryArg("select","extendedEntityPropertyName").setQueryArg("format","json").setQueryArg("Count","500")).then(function(a){for(var b=f.parse(a),c=b.$resources,d=0;d<=c.length-1;d++){var e=c[d];m.add({name:e.$key,id:e.$key,children:"test",property:j+e.$key,base:l,relatedEntity:e.$key,dataType:"",Level:s})}this.currentLevel++});t.push(x)}}else{var y=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setQueryArg("select","extendedEntityPropertyName").setQueryArg("format","json").setQueryArg("Count","500")).then(function(a){for(var b=f.parse(a),c=b.$resources,d=0;d<=c.length-1;d++){var e=c[d];m.add({name:e.$key,id:e.$key,children:"test",property:j+e.$key,base:l,relatedEntity:e.$key,dataType:"",Level:s})}});t.push(y)}new h(t).then(function(a){var b="name";m.data.sort(function(a,c){var d=a[b],e=c[b];return d<e?-1:d>e?1:0}),d(m.data)})},getRoot:function(a){a({name:"rootNode",id:"root",Level:0})},mayHaveChildren:function(a){return"children"in a&&(this.maxLevel>=0&&a.Level<this.maxLevel||this.maxLevel<0)},getLabel:function(a){return a.name}})})})},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],function(a,b,c,d,e){return d("dojo.store.JsonRest",null,{constructor:function(a){this.headers={},d.safeMixin(this,a)},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",_getTarget:function(a){var b=this.target;return void 0!==a&&("/"==b.charAt(b.length-1)?b+=a:b+="/"+a),b},get:function(c,d){d=d||{};var e=b.mixin({Accept:this.accepts},this.headers,d.headers||d);return a("GET",{url:this._getTarget(c),handleAs:"json",headers:e})},accepts:"application/javascript, application/json",getIdentity:function(a){return a[this.idProperty]},put:function(d,e){e=e||{};var f="id"in e?e.id:this.getIdentity(d);return a(void 0===f||e.incremental?"POST":"PUT",{url:this._getTarget(f),postData:c.stringify(d),handleAs:"json",headers:b.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===e.overwrite?"*":null,"If-None-Match":!1===e.overwrite?"*":null},this.headers,e.headers)})},add:function(a,b){return b=b||{},b.overwrite=!1,this.put(a,b)},remove:function(c,d){return d=d||{},a("DELETE",{url:this._getTarget(c),headers:b.mixin({},this.headers,d.headers)})},query:function(c,d){d=d||{};var f=b.mixin({Accept:this.accepts},this.headers,d.headers),g=this.target.indexOf("?")>-1;if(c&&"object"==typeof c&&(c=a.objectToQuery(c),c=c?(g?"&":"?")+c:""),(d.start>=0||d.count>=0)&&(f["X-Range"]="items="+(d.start||"0")+"-"+("count"in d&&d.count!=1/0?d.count+(d.start||0)-1:""),this.rangeParam?(c+=(c||g?"&":"?")+this.rangeParam+"="+f["X-Range"],g=!0):f.Range=f["X-Range"]),d&&d.sort){var h=this.sortParam;c+=(c||g?"&":"?")+(h?h+"=":"sort(");for(var i=0;i<d.sort.length;i++){var j=d.sort[i];c+=(i>0?",":"")+(j.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(j.attribute)}h||(c+=")")}var k=a("GET",{url:this.target+(c||""),handleAs:"json",headers:f});return k.total=k.then(function(){var a=k.ioArgs.xhr.getResponseHeader("Content-Range");return a||(a=k.ioArgs.xhr.getResponseHeader("X-Content-Range")),a&&(a=a.match(/\/(.*)/))&&+a[1]}),e(k)}})})},"Sage/UI/Controls/FieldStore":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/store/Memory","dojo/i18n!./nls/PropertyStore","Sage/UI/Controls/FieldPropertyObject"],function(a,b,c,d,e,f){return b("Sage.UI.Controls.FieldStore",null,{typeStore:null,_nlsResource:null,isUnicode:!1,blankTemplate:null,constructor:function(a){this._nlsResource=e,this.populateSystemOptions(),this.blankTemplate=new f("","",this.isUnicode),this.typeStore=new d({data:[new f("47f90249-e4c8-4564-9ae6-e1fa9904f8b8",this._nlsResource.integer,this.isUnicode,!0),new f("f37c635c-9fbf-40d8-98d5-750a54a3cca1",this._nlsResource.double,this.isUnicode,!0),new f("a6bf2690-3477-4a18-9849-56abf8693934",this._nlsResource.single,this.isUnicode,!0),new f("2596d57d-89d6-4b72-9036-b18c64c5324c",this._nlsResource.decimal,this.isUnicode,!0),new f("6b0b3d51-0728-4b67-9473-52836a81da53",this._nlsResource.short,this.isUnicode,!0),new f("30053f5a-8d40-4db1-b185-1e4128eb26cc",this._nlsResource.standardId,this.isUnicode,!0),new f("92432b4d-8206-4a96-ba7b-e4cbd374f148",this._nlsResource.trueFalse,this.isUnicode,!0),new f("95ca9d52-6f0b-4a96-bd40-43583f41faf8",this._nlsResource.yesNo,this.isUnicode,!0),new f("3edc7c52-e711-431d-b150-969d88ebabf4",this._nlsResource.boolean,this.isUnicode,!0),new f("1f08f2eb-87c8-443b-a7c2-a51f590923f5",this._nlsResource.dateTime,this.isUnicode,!0),new f("31e8638d-4232-4c61-8827-d94132a33887",this._nlsResource.email,this.isUnicode,!0),new f("85f2bba5-1fb7-4ecf-941a-d98d4739c305",this._nlsResource.phone,this.isUnicode),new f("b71918bf-fac1-4b62-9ed5-0b0294bc9900",this._nlsResource.pickList,this.isUnicode,!0),new f("17541523-fc31-4269-ac97-df63290d0e31",this._nlsResource.owner,this.isUnicode,!0),new f("a3b52518-801b-44be-96bf-fdca3de84f7f",this._nlsResource.lookup,this.isUnicode,!1),new f("517d5e69-9efa-4d0a-8e7a-1c7691f921ba",this._nlsResource.dependencyLookup,this.isUnicode,!1),new f("189a1a4e-396c-4146-95c0-93b5d9e7d160",this._nlsResource.char,this.isUnicode,!0),new f("8edd8fce-2be5-4d3d-bedd-ea667e78a8af",this._nlsResource.enum_,this.isUnicode,!1),new f("3ca925e1-4b76-4621-a39c-a0d4cb7327d5",this._nlsResource.guid,this.isUnicode,!0),new f("68e04249-f7e2-4b63-90be-55fbb1f4aa77",this._nlsResource.byte,this.isUnicode,!0),new f("07370ef3-ad24-409f-86a8-ff2db5ee6d69",this._nlsResource.binary,this.isUnicode,!0),new f("5685161e-5f0a-4a36-83fe-89e8e462e9e7",this._nlsResource.url,this.isUnicode,!0),new f("f750817f-73ad-4bf3-b2de-bd0f5cc47dfd",this._nlsResource.calcSF,this.isUnicode,!0),new f("44bc190a-99f3-4fa9-98a3-d5b2336d6e7c",this._nlsResource.calcNF,this.isUnicode,!0),new f("76c537a8-8b08-4b35-84cf-fa95c6c133b0",this._nlsResource.text,this.isUnicode,this.isUnicode),new f("b2ed309e-ea89-4eef-8051-6244987953a4",this._nlsResource.memo,this.isUnicode,this.isUnicode),new f("ccc0f01d-7ba5-408e-8526-a3f942354b3a",this._nlsResource.text,this.isUnicode,!this.isUnicode),new f("f4ca6023-9f5f-4e41-8571-50ba94e8f233",this._nlsResource.memo,this.isUnicode,!this.isUnicode)]})},_addSystemIfNeeded:function(b){return b.indexOf("System")<0&&(b=a.substitute("System.${0}",[b])),b},query:function(a){var b=null,e=null;if(void 0!==a){if(void 0!==a.superType&&null!==a.superType)if(e=a.superType,c.isArray(e))for(var f=0;f<e.length;f++)e[f]=this._addSystemIfNeeded(e[f]);else e=this._addSystemIfNeeded(e);void 0!==a.typeId&&null!==a.typeId&&(b=a.typeId)}var g=this.typeStore.query(function(a){var c=!0,d=!1;return null!==e&&(d=e.indexOf(a.ClrDataType)>=0,c=d),null!==b&&(d=d||e.indexOf(a.id)>=0,c=d),c});return new d({data:g})},queryByKeyWordsAllMatch:function(a){var b=this.typeStore.query(function(b){for(var c=!1,d=0;d<a.length;d++){var e=a[d],f=!1;b[e.name]===e.value&&(f=!0,0===d&&(c=!0)),c=c&&f}return c});return new d({data:b})},queryByKeywordsOneMatchMatch:function(a){var b=this.typeStore.query(function(b){for(var c=0;c<a.length;c++){var d=a[c];if(b[d.name]===d.value)return!0}return!1});return new d({data:b})},populateSystemOptions:function(){var a=this._receivedUnicode,b=this,c=Sage.Services.getService("SystemOptions");c&&c.get("Unicode",function(c){a(c,b)})},_receivedUnicode:function(a,b){b.isUnicode=!!a&&"true"===a.toLowerCase()}})})},"Sage/UI/Controls/FieldPropertyObject":function(){define(["dojo/string","dojo/_base/declare","dojo/store/Memory","dojo/i18n!./nls/PropertyStore","dojo/_base/lang"],function(a,b,c,d,e){var f={ClrDataType:"",SqlType:"",ThisObj:"",number:!1,calculated:!1,idType:!1,bitType:!1,complex:!1,isBoolean:!1,dateTime:!1,initializeBaseData:function(){switch(this.id){case"a6bf2690-3477-4a18-9849-56abf8693934":this.ClrDataType="System.Single",this.SqlType="Single",this.ThisObj="Single",this.number=!0;break;case"6b0b3d51-0728-4b67-9473-52836a81da53":this.ClrDataType="System.Int16",this.SqlType="Int16",this.ThisObj="Short Integer",this.number=!0;break;case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":this.ClrDataType="System.Int32",this.SqlType="Int32",this.ThisObj="Integer",this.number=!0;break;case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":this.ClrDataType="System.Boolean",this.SqlType="AnsiStringFixesLength",this.ThisObj="Yes/No",this.isBoolean=!0;break
;case"3edc7c52-e711-431d-b150-969d88ebabf4":this.ClrDataType="System.Boolean",this.SqlType="Boolean",this.ThisObj="Boolean",this.isBoolean=!0;break;case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":this.ClrDataType="System.DateTime",this.SqlType="DateTime",this.ThisObj="DateTime",this.dateTime=!0;break;case"189a1a4e-396c-4146-95c0-93b5d9e7d160":this.ClrDataType="System.Char",this.SqlType="AnsiString(Length=1)",this.ThisObj="Char";break;case"68e04249-f7e2-4b63-90be-55fbb1f4aa77":this.ClrDataType="System.Byte",this.SqlType="Byte",this.ThisObj="Byte",this.bitType=!0;break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Text";break;case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Memo";break;case"31e8638d-4232-4c61-8827-d94132a33887":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Email";break;case"07370ef3-ad24-409f-86a8-ff2db5ee6d69":this.ClrDataType="System.Byte[]",this.SqlType="Binary",this.ThisObj="Binary",this.bitType=!0;break;case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":this.ClrDataType="System.String",this.SqlType="String",this.ThisObj="Unicode Text";break;case"b2ed309e-ea89-4eef-8051-6244987953a4":this.ClrDataType="System.String",this.SqlType="String",this.ThisObj="Unicode Memo";break;case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Calculated String field",this.calculated=!0;break;case"5685161e-5f0a-4a36-83fe-89e8e462e9e7":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="URL";break;case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Phone Number";break;case"2596d57d-89d6-4b72-9036-b18c64c5324c":this.ClrDataType="System.Decimal",this.SqlType="Decimal",this.ThisObj="Decimal",this.number=!0;break;case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":this.ClrDataType="System.Double",this.SqlType="Double",this.ThisObj="Double",this.number=!0;break;case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":this.ClrDataType="System.Double",this.SqlType="Double",this.ThisObj="Calculated Numeric Field",this.number=!0,this.calculated=!0;break;case"30053f5a-8d40-4db1-b185-1e4128eb26cc":this.ClrDataType="System.String",this.SqlType="AnsiStringFixedLength",this.ThisObj="Standard Id",this.idType=!0;break;case"17541523-fc31-4269-ac97-df63290d0e31":this.ClrDataType="System.String",this.SqlType="AnsiStringFixedLength",this.ThisObj="owner";break;case"92432b4d-8206-4a96-ba7b-e4cbd374f148":this.ClrDataType="System.Boolean",this.SqlType="AnsiStringFixedLength",this.ThisObj="True/False",this.isBoolean=!0;break;case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="PickList",this.complex=!0;break;case"a3b52518-801b-44be-96bf-fdca3de84f7f":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Lookup",this.complex=!0;break;case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Dependency Lookup",this.complex=!0;break;case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":this.ClrDataType="System.Enum",this.SqlType="AnsiString(Length=255)",this.ThisObj="Enum",this.complex=!0;break;case"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":this.ClrDataType="System.Guid",this.SqlType="Guid",this.ThisObj="Guid",this.idType=!0}}},g={Length:0,initializeLengthData:function(){switch(this.id){case"a6bf2690-3477-4a18-9849-56abf8693934":this.Length=64,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":this.Length=1,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":this.Length=2147483647,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"31e8638d-4232-4c61-8827-d94132a33887":this.Length=128,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"07370ef3-ad24-409f-86a8-ff2db5ee6d69":this.Length=8e3,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"b2ed309e-ea89-4eef-8051-6244987953a4":this.Length=2147483647,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"5685161e-5f0a-4a36-83fe-89e8e462e9e7":this.Length=150,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"30053f5a-8d40-4db1-b185-1e4128eb26cc":case"17541523-fc31-4269-ac97-df63290d0e31":this.Length=12,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"92432b4d-8206-4a96-ba7b-e4cbd374f148":this.Length=1,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":case"a3b52518-801b-44be-96bf-fdca3de84f7f":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":this.Length=64,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length])}}},h={IsEncrypted:!1},i={Precision:17,Scale:4,initializePrecisionScaleData:function(){this.SqlType=a.substitute("${0}(Precision=${1},Scale=${2})",[this.SqlType,this.Precision,this.Scale])}},j={IsPercentage:!1},k={Display:"",Storage:"",StorageOptions:[],DisplayOptions:[],initializeStorageData:function(){switch(this.Display="",this.Storage="",this.StorageOptions=[],this.DisplayOptions=[],this.id){case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":this.StorageOptions=[{id:"Id",name:d.id},{id:"Number",name:d.number}],this.DisplayOptions=[{id:"Id",name:d.id},{id:"Number",name:d.number},{id:"Text",name:d.text},{id:"Code",name:d.code}],this.Display="Text",this.unicode?(this.Storage="TextUnicode",this.StorageOptions.push({id:"TextUnicode",name:d.text}),this.StorageOptions.push({id:"CodeUnicode",name:d.code})):(this.Storage="Text",this.StorageOptions.push({id:"Text",name:d.text}),this.StorageOptions.push({id:"Code",name:d.code}));break;case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":this.StorageOptions=[{id:"Value",name:d.value}],this.unicode?(this.Storage="NameUnicode",this.StorageOptions.push({id:"NameUnicode",name:d.name}),this.StorageOptions.push({id:"CodeUnicode",name:d.code})):(this.Storage="Name",this.StorageOptions.push({id:"Name",name:d.name}),this.StorageOptions.push({id:"Code",name:d.code}));break;case"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":this.unicode?(this.Storage="StringUnicode",this.StorageOptions.push({id:"StringUnicode",name:d.string})):(this.Storage="String",this.StorageOptions.push({id:"String",name:d.string}))}}},l={Items:[],MultiSelect:!1,OverriddenName:""},m={LookupEntityName:"",LookupGroup:1,ParentProperty:""},n={EnableHyperLinking:!1,LookupEntityName:"",LookupPreFilters:[],LookupProperties:[],ReturnPrimaryKey:!0},o={PickListId:"",PickListName:"",AllowMultiples:!1,AlphaSort:!1,MustExistInList:!0,NoneEditable:!1,PickListFilter:"",ValueStoredAsText:!0},p={DisplayName:"",Description:"",Template:"",type:-1,oldTemplate:""};return b("Sage.UI.Controls.FieldPropertyObject",null,{id:"",name:"",aggregate:[],show:[],unicode:!1,supported:!0,numbers:["Int16","Int32","Double","Float","Decimal","Single","DateTime","Date","Time"],hidden:[],constructor:function(a,b,c,d){var q=["sum","count","avg","min","max"],r=["count","min","max"];switch(null!==d&&void 0!==d&&(this.supported=d),null!==c&&void 0!==c&&(this.unicode=c),this.id=a,this.name=b,e.mixin(this,f),this.initializeBaseData(),this.numbers.indexOf(this.SqlType)>=0||""===this.SqlType||void 0===this.SqlType?this.aggregate=q:this.aggregate=r,this.id){case"a6bf2690-3477-4a18-9849-56abf8693934":case"6b0b3d51-0728-4b67-9473-52836a81da53":case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":case"3edc7c52-e711-431d-b150-969d88ebabf4":case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":case"189a1a4e-396c-4146-95c0-93b5d9e7d160":case"68e04249-f7e2-4b63-90be-55fbb1f4aa77":case"30053f5a-8d40-4db1-b185-1e4128eb26cc":case"17541523-fc31-4269-ac97-df63290d0e31":case"92432b4d-8206-4a96-ba7b-e4cbd374f148":break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":case"31e8638d-4232-4c61-8827-d94132a33887":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"b2ed309e-ea89-4eef-8051-6244987953a4":case"5685161e-5f0a-4a36-83fe-89e8e462e9e7":case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":case"07370ef3-ad24-409f-86a8-ff2db5ee6d69":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,h),this.show=["Length","IsEncrypted"];break;case"2596d57d-89d6-4b72-9036-b18c64c5324c":e.mixin(this,i),this.initializePrecisionScaleData(),this.show=["Precision","Scale"];break;case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":e.mixin(this,j),this.show=["IsPercentage"];break;case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,k),this.initializeStorageData(),e.mixin(this,o),this.show=["Length","Display","Storage","PickListName","AllowMultiples","AlphaSort","MustExistInList","NoneEditable","ValueStoredAsText"];break;case"a3b52518-801b-44be-96bf-fdca3de84f7f":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,k),this.initializeStorageData(),e.mixin(this,n),this.show=["Length","LookupEntityName","EnableHyperLinking","ReturnPrimaryKey","LookupProperties","LookupPreFilters"];break;case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,m),this.show=["Length","LookupEntityName","LookupGroup","ParentProperty"];break;case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":e.mixin(this,k),this.initializeStorageData(),e.mixin(this,l),this.show=["Storage","MultiSelect","Items","OverriddenName"];break;case"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":e.mixin(this,k),this.initializeStorageData(),this.show=["Storage"];break;case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":e.mixin(this,p),this.type=0,this.show=["Description","Template"],this.hidden=["oldTemplate"];break;case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":e.mixin(this,p),this.type=1,this.show=["Description","Template"],this.hidden=["oldTemplate"]}}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/UserLookupDetailsView":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/text!./templates/UserLookupDetailsView.html","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/Controls/Grid","Sage/UI/Controls/CheckBox"],function(declare,memory,template,_DetailsAddEditDialogBase,Grid,crmCheckBox){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.UserLookupDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),constructor:function(){this.hasProperties=!0,this.isMetric=!1},postCreate:function(){this._createOperationsGrid(),this.startup()},_createCustomCheckBox:function(){return declare("Sage.MainView.EntityMgr.AddEditEntityFilter.customChkBx",Sage.UI.Controls.CheckBox,{shouldPublishMarkDirty:!1,constructor:function(){},postCreate:function(){""!==this.hotKey&&(this.focusNode.accessKey=this.hotKey),this.connect(this,"onChange",this.onChanged)}})},_createDataForList:function(){for(var a=this.detailUtility.operation.data,b=new memory,c=0;c<a.length;c++){var d=!1;this.details&&this.details.userLookupFilter&&this.details.userLookupFilter.operators&&a[c].id&&(d=this.details.userLookupFilter.operators.indexOf(a[c].id)>=0),b.add({id:a[c].id,data:d,label:a[c].name})}return b},_createOperationsGrid:function(){var a=this._createDataForList(),b=new Grid({gridLabel:this._nlsResources.lblOperators,store:a,sort:[{attribute:"label",descending:!1}],columns:[{label:"",field:"data",autoSave:!0,editable:!0,editor:this._createCustomCheckBox(),id:"col1",width:250},{label:"",field:"label",autoSave:!0,editable:!1,id:"col2",width:250}],placeHolder:this.rangegridwhole,columnResizing:!0,selectionMode:"single",rowSelection:!0,minRowsPerPage:a.data.length,maxRowsPerPage:a.data.length});this.rangeGridsObj=b,this.lookupGridLabel.innerHTML=this._nlsResources.lblOperators,b._grid.onLoadComplete=function(){b._grid.resize()}},startup:function(){this.inherited(arguments)},getDetails:function(){for(var a=this.rangeGridsObj.store.data,b=[],c=0;c<a.length;c++){var d=a[c];void 0!==d&&void 0!==d.data&&d.data&&b.push(d.id)}return{userLookupFilter:{operators:b}}}});return widget})},"Sage/UI/Controls/CheckBox":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(a,b){return b("Sage.UI.Controls.CheckBox",a,{hotKey:"",autoPostBack:!1,labelText:"",labelPlacement:"",shouldPublishMarkDirty:!0,constructor:function(){},postCreate:function(){""!==this.hotKey&&(this.focusNode.accessKey=this.hotKey),this.connect(this,"onChange",this.onChanged),this._insertLabel(),this.inherited(arguments)},_insertLabel:function(){var a="before",b=null;"right"===this.labelPlacement&&(a="after"),"none"!==this.labelPlacement&&(b=dojo.create("label",{for:this.id,innerHTML:this.labelText},this.domNode,a),"top"===this.labelPlacement&&dojo.create("br",null,b,"after"))},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,"")}})})},"Sage/Utility/Filters":function(){define(["dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/json","Sage/Utility"],function(a,b,c,d){return Sage.namespace("Utility.Filters"),a.mixin(Sage.Utility.Filters,{getHiddenFiltersKey:function(){var a=Sage.Services.getService("ClientGroupContext"),b=a&&a.getContext(),c=b&&b.CurrentGroupID,d="";return c&&(c=c.toLowerCase(),c=c.replace(/ /g,"_").replace(/'/g,"_"),d="hidden_filters_"+c),d},setHiddenFilters:function(a,c){var d,e,f;d=b.getSDataService("system"),e={$name:"setHiddenFilters",request:{key:a,value:c}},f=new Sage.SData.Client.SDataServiceOperationRequest(d),f.setOperationName("setHiddenFilters"),f.execute(e,{}),sessionStorage.removeItem(a)},getHiddenFilters:function(e,f,g){var h,i,j,k,l=d.htmlEncode(e);k=sessionStorage.getItem(l),null===k?(h=b.getSDataService("system"),j={$name:"getHiddenFilters",request:{key:l}},i=new Sage.SData.Client.SDataServiceOperationRequest(h).setOperationName("getHiddenFilters"),i.execute(j,{success:a.hitch(this,this._getHiddenFiltersSuccess,f,e),failure:g})):f.call(this,c.parse(k))},_getHiddenFiltersSuccess:function(a,b,d){a&&(sessionStorage.setItem(b,c.stringify(d)),a.call(this,d))},resolveDataType:function(a){switch(a){case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"6b0b3d51-0728-4b67-9473-52836a81da53":case"2596d57d-89d6-4b72-9036-b18c64c5324c":case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":return"numeric";case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":return"string";case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":return"enum";case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":return"date";case"30053f5a-8d40-4db1-b185-1e4128eb26cc":return"key";case"92432b4d-8206-4a96-ba7b-e4cbd374f148":case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":return"boolean";case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":return"binary";default:return"unknown"}},resolveDataTypeQB:function(a){var b;switch(a){case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"6b0b3d51-0728-4b67-9473-52836a81da53":b="Integer";break;case"2596d57d-89d6-4b72-9036-b18c64c5324c":case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":b="Decimal";break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":b="String";break;case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":b="Date/Time";break;case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":b="Memo/Blob";break;default:b="String"}return b}}),Sage.Utility.Filters})},"Sage/Utility/GeneralSchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility","Sage/Utility/PropertySchemaReader","Sage/Utility/FilterSchemaReader","Sage/Utility/PickListSchemaReader","dojo/request/xhr"],function(a,b,c,d,e,f,g,h,i){return a("Sage.Utility.GeneralSchemaReader",[f,g,h],{service:null,endpointBase:"metadata",constructor:function(a){this.changeService(a)},changeService:function(a){this.endpointBase=a,this.service=Sage.Data.SDataServiceRegistry.getSDataService(this.endpointBase)},getSchemaInformationFromSData:function(){var a=this;i(c.substitute("slxdata.ashx/slx/${0}/-/$schema",[this.endpointBase]),{handleAs:"xml",preventCache:!0,sync:!0}).then(function(b){var c=e.parseXMLNode(b,{});c&&a.sDataSuccessful(c)},function(b){return a._onError("Download",b),b})},sDataSuccessful:function(a){var b=a["xs:schema"];switch(this.endpointBase.toLocaleLowerCase()){case"system":this._getPickListSchemaInformation(b);break;default:this._getPropertySchemaInformation(b),this._getFilterSchemaInformation(b)}}})})},"Sage/Utility/PropertySchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility/_SchemaReaderHelper"],function(a,b,c,d,e){return a("Sage.Utility.PropertySchemaReader",[e],{propertyResourceNodes:null,property_object:null,constructor:function(){this.resetPropertySchemaInformation()},resetPropertySchemaInformation:function(){this.propertyResourceNodes=new b},_getPropertySchemaInformation:function(a){var b="property";this._findAndAdd(a,b),this.propertyResourceNodes=this._gatherNodesFromQueue(b),this.propertyResourceNodes.data.length>0&&(this.property_object=this._buildObjectFromNodeList(this.propertyResourceNodes.data[0]))}})})},"Sage/Utility/_SchemaReaderHelper":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e){return a("Sage.Utility._SchemaReaderHelper",null,{xsct:"xs:complexType",xsst:"xs:simpleType",xse:"xs:element",xsn:"xs:enumeration",xsr:"xs:restriction",xsa:"xs:all",xsy:"xs:anyAttribute",xss:"xs:sequence",xsc:"xs:choice",ddEnum:"${0}--enum",ddType:"${0}--type",ddList:"${0}--list",ddChoice:"${0}--choice",fieldNameSearch:"name",fieldTypeSearch:"type",fieldRelationshipSearch:"relationship",fieldIsCollectionSearch:"isCollection",nodeList:null,__populationQueue:null,constructor:function(){this.nodeList=new b,this.__populationQueue=[]},__getHeaderNodeByNameReturnAllElements:function(a,b,c){var d=this.__getHeaderNodeByNameReturnObject(a,b,c);return null!==d?this.__determineCorrectPathToTake(d):null},__getHeaderNodeByNameReturnObject:function(a,b,c){var d=a[b].filter(function(a){return a.name===c});return void 0!==d&&null!==d&&d.length>0?d[0]:null},__addToNodeList:function(a,b,c){var e=this;dojo.isArray(a)?d.forEach(a,function(a){e.__addOrUpdateSingleNodeToNodeList(a,b,c,null)}):e.__addOrUpdateSingleNodeToNodeList(a,b,c,null)},__addOrUpdateSingleNodeToNodeList:function(a,b,c,d){var e=null===d,f=this.__populateNodeListItem(a,b,c,e);e||(this.__populationQueue[d]=f)},__truthy:function(a){var b=null;return"string"==typeof a?(a=a.toLowerCase(),"true"!==a&&"1"!==a&&"t"!==a&&"yes"!==a&&"y"!==a||(b=!0),"false"!==a&&"0"!==a&&"f"!==a&&"no"!==a&&"n"!==a||(b=!1)):(!0!==a&&1!==a||(b=!0),!1!==a&&0!==a||(b=!1)),b},__createNodeItem:function(a){var b=void 0!==a["sme:isMandatory"]&&a["sme:isMandatory"],c=void 0===a["sme:maxLength"]?null:a["sme:maxLength"],d="undefined"===a.name?"":a.name,e=void 0===a["sme:label"]?"undefined"===a.label?"":a.label:a["sme:label"],f=void 0===a.type?"xs:string":a.type,g=void 0===a["sme:relationship"]?null:a["sme:relationship"],h=void 0!==a["sme:isCollection"]&&a["sme:isCollection"],i=void 0===a.sub?null:a.sub,j=void 0===a.collection?null:a.collection,k=void 0===a.value?null:a.value;h=this.__truthy(h);var l={name:d,label:e,type:f,maxLength:c,manadtory:b,relationship:g,isCollection:h,collection:j,sub:i,value:null,nameValue:k};return null!==a.superParentNodeName&&void 0!==a.superParentNodeName&&(l.superParentNodeName=a.superParentNodeName),null!==a.pathFromParent&&void 0!==a.pathFromParent&&(l.pathFromParent=a.pathFromParent),this.__addToQueue(l),l},__inQueue:function(a,b){var c=this.__populationQueue.filter(function(c){return c[a]===b});return null!==c&&c.length>0},__addToQueue:function(a){return!(void 0===a||null===a||void 0===a[this.fieldNameSearch]||null===a[this.fieldNameSearch]||this.__inQueue(this.fieldNameSearch,a[this.fieldNameSearch])||(this.__populationQueue.push(a),0))},__populateNodeListItem:function(a,b,c,e){var f=this,g={};return null!==b&&void 0!==b&&(a.sub=[],dojo.isArray(b)?d.forEach(b,function(b){g=f.__createNodeItem(b),a.sub.push(g)}):(g=this.__createNodeItem(b),a.sub.push(g))),g={},null!==c&&void 0!==c&&(a.collection=[],dojo.isArray(c)?d.forEach(c,function(b){g=f.__createNodeItem(b),a.collection.push(g)}):(g=this.__createNodeItem(c),a.collection.push(g))),e&&(a=this.__createNodeItem(a)),a},_findAndAdd:function(a,b){var d=c.substitute(this.ddList,[b]),e=this.__getHeaderNodeByNameReturnAllElements(a,this.xsct,d),f=0;if(this.__populationQueue=[],null!==e)for(this.__addToNodeList(e),f=0;f<this.__populationQueue.length;f++){var g=this.__populationQueue[f];g.relationship,g.isCollection;d=g.type,e=this.__getHeaderNodeByNameReturnAllElements(a,this.xsct,d),null!==e&&this.__complexTypeHandler(g,e,f),e=this.__getHeaderNodeByNameReturnAllElements(a,this.xsst,d),null!==e&&this.__complexTypeHandler(g,e,f)}},__complexTypeHandler:function(a,b,c){var d=a.type;switch(d.substring(d.lastIndexOf("--")+2).toLowerCase()){case"list":this.__addOrUpdateSingleNodeToNodeList(a,b,a.collection,c);break;case"enum":case"choice":this.__addOrUpdateSingleNodeToNodeList(a,a.sub,b,c);break;case"type":this.__addOrUpdateSingleNodeToNodeList(a,b,a.collection,c)}},_gatherNodesFromQueue:function(a){var d=["--type","--list","--choice"],e=new b({idProperty:"name"}),f=this,g=this.__populationQueue.filter(function(b){return void 0!==b.pathFromParent&&b.superParentNodeName===c.substitute(f.ddList,[a])});g.length>0&&e.add(g[0]);for(var h=0;h<e.data.length;h++){var i=e.data[h];if(i.sub)for(var j=i.sub.filter(function(a){for(var b=0;b<d.length;b++){var c=d[b],e=c.length;if(a.type.indexOf(c)+e==a.type.length)return!0}return!1}),k=0;k<j.length;k++)e.index[j[k].name]&&e.add(j[k])}return e},_buildObjectFromNodeList:function(a){var b,d=[],e={},f=0,g={};g[a.name]={},d.push({path:a.name,sub:a.sub,item:g});do{var h=d[f];g=e;for(var i=h.path.split("."),j=0;j<i.length;j++){i[j]in g?g=g[i[j]]:g[i[j]]={}}if(g[i[i.length-1]]=h.item[i[i.length-1]],dojo.isArray(h.sub))for(b=0;b<h.sub.length;b++){var k=h.sub[b],l={};l[k.name]={},d.push({path:c.substitute("${0}.${1}",[h.path,k.name]),sub:k.sub,item:l})}f++}while(f<d.length);return e},__determineCorrectPathToTake:function(a){var b=a.name.substring(a.name.lastIndexOf("--")+2).toLowerCase(),d={},e="",f={};switch(b){case"list":d=a[this.xss],e=this.xss;break;case"enum":d=a[this.xsr],e=this.xsr;break;case"choice":d=a[this.xsc],e=this.xsc;break;case"type":d=a[this.xsa],null!==d&&void 0!==d?e=this.xsa:null!==(d=a[this.xsy])&&void 0!==d&&(e=this.xsy)}if(d){switch(b){case"list":case"choice":case"type":f=d[this.xse],null!==f&&void 0!==f&&(e=c.substitute("${0}///${1}",[e,this.xse]),d=d[this.xse]);break;case"enum":f=d[this.xsn],null!==f&&void 0!==f&&(e=c.substitute("${0}///${1}",[e,this.xsn]),d=d[this.xsn])}return d.superParentNodeName=a.name,d.pathFromParent=e,d}return null}})})},"Sage/Utility/FilterSchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility/_SchemaReaderHelper"],function(a,b,c,d,e){return a("Sage.Utility.FilterSchemaReader",[e],{filterResourceNodes:null,filter_object:null,constructor:function(){this.resetFilterSchemaInformation()},resetFilterSchemaInformation:function(){this.filterResourceNodes=new b},_getFilterSchemaInformation:function(a){var b="filter";this._findAndAdd(a,b),this.filterResourceNodes=this._gatherNodesFromQueue(b),this.filterResourceNodes.data.length>0&&(this.filter_object=this._buildObjectFromNodeList(this.filterResourceNodes.data[0]))}})})},"Sage/Utility/PickListSchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility/_SchemaReaderHelper"],function(a,b,c,d,e){return a("Sage.Utility.PickListSchemaReader",[e],{picklistResourceNodes:null,picklist_object:null,constructor:function(){this.picklist_object={},this.resetPickListSchemaInformation()},resetPickListSchemaInformation:function(){this.picklistResourceNodes=new b},_getPickListSchemaInformation:function(a){var b="pickList";this._findAndAdd(a,b),this.picklistResourceNodes=this._gatherNodesFromQueue(b),this.picklistResourceNodes.data.length>0&&(this.picklist_object=this._buildObjectFromNodeList(this.picklistResourceNodes.data[0]))},cleanupPicklistObject:function(){var a=this.picklist_object.pickList;return a.items=a.items.pickListItem,a}})})},"Sage/MainView/EntityMgr/EntityWizard/SelectEntityType":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/SelectEntityType.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment"],function(a,b,c,d,e,f,g,h,i){return a("Sage.MainView.EntityMgr.EntityWizard.SelectEntityType",[e],{id:"dlgSelectEntityType",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.SelectEntityType,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},isValid:function(){return!0},destroy:function(){this.inherited(arguments)}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityDetails":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityDetails.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblCreateEntity">Create Entity</label>\r\n                <p><label data-dojo-attach-point="lblCreateEntityFromTable">Create a new entity from a table</label></p>\r\n                <hr />\r\n            </div>\r\n            \r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_displayNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                Display Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="displayName">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblEntityName">\r\n                                Entity Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="Name">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div class="lbl alignright">\r\n                            <label style="line-height:32px !important;">\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline"  data-dojo-attach-point="" style="color:red">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="divValidationMessage">\r\n                            </label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                \x3c!--<div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">Back</div>--\x3e\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/EntityDetails.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment","dojo/topic","Sage/UI/Controls/TextBox","dojo/dom-construct","Sage/UI/FilteringSelect","dojo/store/Memory","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","dijit/form/Form","Sage/MainView/EntityMgr/EntityDetailUtility"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a("Sage.MainView.EntityMgr.EntityWizard.EntityDetails",[e],{id:"dlgEntityDetails",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.EntityDetails,_fileInputOnChange:null,nameTextBox:null,displayNameTextBox:null,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblCreateEntity.innerHTML=this._nlsResources.lblCreateEntity,this.lblCreateEntityFromTable.innerHTML=this._nlsResources.lblCreateEntityFromTable,this.lblDisplayName.innerHTML=this._nlsResources.lblDisplayName,this.lblEntityName.innerHTML=this._nlsResources.lblEntityName,this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel),this._dialog._standby||q.mixin(this._dialog,new p),this._createTextboxControls(),dojo.connect(this.displayNameTextBox,"onChange",this,function(a){var b=a.replace(/[^A-Za-z0-9]/g,"");this.nameTextBox.set("value",this._capitalizeFirstLetter(b.replace(/\s/g,"")))})},_capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},_createTextboxControls:function(){this.nameTextBox=new k({shouldPublishMarkDirty:!1,required:!0,validator:this._NameValidator,invalidMessage:this._nlsResources.lblInvalidEntry}),l.place(this.nameTextBox.domNode,this.Name,"only"),this.displayNameTextBox=new k({shouldPublishMarkDirty:!1,required:!0,invalidMessage:"Required"}),l.place(this.displayNameTextBox.domNode,this.displayName,"only")},_NameValidator:function(a,b){
var c="^[A-Z][A-Za-z0-9]*$",d=a.match(c,"g");return!!d&&(q.isArray(d),d[0].length==a.length)},_validateUniqueName:function(){this._dialog.showLoading();var a=new Sage.SData.Client.SDataResourceCollectionRequest(o.getSDataService("metadata"));a.setResourceKind(d.substitute("entities")),a.setQueryArg("count",1),a.setQueryArg("where",d.substitute("name like '${0}'",[this.nameTextBox.value.toLowerCase()]));var b=this,c=!0;return a.read({async:!1,success:function(a){void 0!==a&&void 0!==a.$resources&&1==a.$resources.length?(b.divValidationMessage.innerHTML=b._nlsResources.lblEntityUsed,c=!1):c=!0,b._dialog.hideLoading()},failure:function(a){b._dialog.hideLoading(),c=!1}}),c},isValid:function(){var a=this.Form,b=a.validate();return b&&(b=this._validateUniqueName()),b},destroy:function(){this.inherited(arguments)},_btnNext_OnClick:function(){this._dialog.showLoading();var a=this;setTimeout(function(){a.divValidationMessage.innerHTML="",a.entityDetails.entityName=a.nameTextBox.value,a.entityDetails.entityDisplayName=a.displayNameTextBox.value,a.entityDetails.status="ok",a.isValid()?(a._dialog.hideLoading(),a._checkCurrentStep(),a._dialog.hide(),j.publish("/entityController/entityWizard/nextStep",a._currentStep)):a._dialog.hideLoading()},1e3)}})})},"Sage/MainView/EntityMgr/EntityWizard/Relationship":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/Relationship.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblRelationship">Primary Relationship</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblSelectEntity">Choose wheather this entity has a primary relationship to another entity</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblExistingEntity">\r\n                                Relate to an existing Entity\r\n                            </label>\r\n                        </div>\r\n                        <div style="padding-top:6px;">\r\n                            <input type="checkbox" data-dojo-attach-point="IsExtension"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelatedEntity">\r\n                                Related Entity\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typePkg"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelationType">\r\n                                Relation Type\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typeRel"></div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/Relationship.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/UI/Controls/CheckBox","Sage/Utility/File/Attachment","dojo/topic","Sage/UI/Controls/TextBox","dojo/dom-construct","Sage/UI/FilteringSelect","dojo/store/Memory","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a("Sage.MainView.EntityMgr.EntityWizard.Relationship",[e],{id:"dlgRelationship",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.Relationship,_fileInputOnChange:null,typeDropDowns:!1,typeDropDownsRel:!1,checkBox:!1,_pkgType:"",chkItem:"chk",_dialog:null,entityInfo:!1,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblRelationship.innerHTML=this._nlsResources.lblRelationship,this.lblSelectEntity.innerHTML=this._nlsResources.lblSelectEntity,this.lblExistingEntity.innerHTML=this._nlsResources.lblExistingEntity,this.lblRelatedEntity.innerHTML=this._nlsResources.lblRelatedEntity,this.lblRelationType.innerHTML=this._nlsResources.lblRelationType,this.btnBack.set("label","< "+this._nlsResources.lblBack),this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel),this._dialog._standby||r.mixin(this._dialog,new q),this._createTextboxControls()},_createTextboxControls:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(p.getSDataService("metadata")).setResourceKind("entities").setQueryArg("Count","1000").setQueryArg("select","id,displayName,name").setQueryArg("orderBy","name").setQueryArg("format","json"),b=this;this.entityStore=new o,a.read({scope:this,success:function(a){var c=a.$resources;this.entityInfo=c;for(var d=0;d<=c.length-1;d++){var e=c[d].displayName?c[d].displayName:c[d].name;c[d].name&&b.entityStore.add({id:c[d].name,name:e})}b._dialog.hideLoading()},failure:function(a){b._dialog.hideLoading()}}),this.typeDropDowns=new n({id:this._pkgType,name:"value",store:this.entityStore,searchAttr:"name"},this._pkgType),m.place(this.typeDropDowns.domNode,this.typePkg,"only"),this.typeDropDowns.set("disabled",!0);var c=new o({data:[{id:"1:1",name:this._nlsResources.ExtensionEntity},{id:"1:M",name:this._nlsResources.ChildEntity}]});this.typeDropDownsRel=new n({name:"value",store:c,searchAttr:"name"}),m.place(this.typeDropDownsRel.domNode,this.typeRel,"only"),this.typeDropDownsRel.set("disabled",!0),this.IsExtension.on("change",function(a){a?(b.entityStore.data.length,b.typeDropDowns.set("disabled",!1),b.typeDropDownsRel.set("disabled",!1)):(b.typeDropDowns.set("value",""),b.typeDropDowns.set("disabled",!0),b.typeDropDownsRel.set("value",""),b.typeDropDownsRel.set("disabled",!0))},!0)},isValid:function(){return this.Form.validate()},destroy:function(){this.inherited(arguments)},_btnNext_OnClick:function(){this._dialog.showLoading();var a=this;if(this.isValid())if(this.entityDetails.relatedEntity=this.typeDropDowns.value,this.entityDetails.relatedEntityDispName=this.typeDropDowns.displayedValue,this.entityDetails.relationType=this.typeDropDownsRel.value,this.entityDetails.relatedProperty=!1,this.IsExtension.checked&&"1:M"===this.typeDropDownsRel.value){var b=new Sage.SData.Client.SDataResourceCollectionRequest(p.getSDataService("metadata")).setQueryArg("where","isKey eq true").setResourceKind("entities('"+this.entityDetails.relatedEntity+"')/properties").setQueryArg("select","id,dataTypeId,displayName,propertyName").setQueryArg("count",1).setQueryArg("format","json");b.read({async:!1,success:function(b){var c=b.$resources;a.entityDetails.relatedPropertyId=c[0].id,a._dialog.hideLoading(),a._checkCurrentStep(),a._dialog.hide(),k.publish("/entityController/entityWizard/nextStep",a._currentStep)},failure:function(a){this._dialog.hideLoading()}})}else this._dialog.hideLoading(),this._checkCurrentStep(),this._dialog.hide(),k.publish("/entityController/entityWizard/nextStep",this._currentStep);else this._dialog.hideLoading()}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityProperties":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityProperties.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div style="padding-bottom:30px;">\r\n            <label style="font-weight:bold;" data-dojo-attach-point="lblEnterProperties">Enter Fields</label>\r\n            <p><label data-dojo-attach-point="lblAddNewProperty">Click the add(+) button to add new fields to the entity</label></p>\r\n            <hr />\r\n        </div>\r\n        <div data-dojo-type="dijit.form.Form"  style="height:400px !important;" class="mainContentContent DialogMainForm">\r\n            <div style="width:100%;" class="fld dijitInline" data-dojo-attach-point="placeGrid"></div>\r\n        </div>\r\n        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n        </div>\r\n        <div class="lookupButtonWrapper">\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/EntityProperties.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/GridView","dojo/dom-construct","dojo/_base/lang","dojo/_base/connect","dojo/store/Memory","dojo/store/Observable","Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditPropertiesDialog","Sage/MainView/EntityMgr/EntityDetailUtility","dojo/topic","Sage/UI/Controls/FieldStore","dojo/_base/array","Sage/UI/Controls/GridParts/Columns/CheckBox","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return a("Sage.MainView.EntityMgr.EntityWizard.EntityProperties",[e],{id:"dlgEntityProperties",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.EntityProperties,_fileInputOnChange:null,fStore:null,propGrid:null,sysProps:[],dataStore:o(new n({idProperty:"propertyName",data:[]})),constructor:function(){this.inherited(arguments),this.fStore=new s},startup:function(){this.inherited(arguments),this._createPropsGrid()},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblEnterProperties.innerHTML=this._nlsResources.lblEnterProperties,this.lblAddNewProperty.innerHTML=this._nlsResources.lblAddNewProperty,this.btnBack.set("label","< "+this._nlsResources.lblBack),this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel)},isValid:function(){return!0},destroy:function(){this.inherited(arguments)},populateDefaultProps:function(){for(var a=this.dataStore.data.length,b=0;b<a;b++)this.dataStore.remove(this.dataStore.data[0].propertyName);var c,d=this.entityDetails.entityName,e=(this.entityDetails.relatedProperty,this.entityDetails.relatedEntity);this.sysProps=["CreateUser","CreateDate","ModifyUser","ModifyDate","SeccodeId"],"1:1"===this.entityDetails.relationType?(c={propertyName:e+"Id",displayName:e+" Id",isKey:!0,isNullable:!1,columnName:e.toUpperCase()+"ID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"},this.dataStore.put(c),this.sysProps.push(e+"Id")):(c={propertyName:d+"Id",displayName:d+" Id",isKey:!0,isNullable:!1,columnName:d.toUpperCase()+"ID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"},this.dataStore.put(c),this.sysProps.push(d+"Id")),"1:M"===this.entityDetails.relationType&&(e=this.entityDetails.relatedEntity,c={propertyName:e+"Id",displayName:e+" Id",isKey:!1,isNullable:!1,columnName:e.toUpperCase()+"ID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"},this.dataStore.put(c),this.sysProps.push(d+e+"Id")),this.dataStore.put({propertyName:"CreateUser",displayName:this._nlsResources.CreateUser,isKey:!1,isNullable:!0,columnName:"CREATEUSER",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"}),this.dataStore.put({propertyName:"CreateDate",displayName:this._nlsResources.CreateDate,isKey:!1,isNullable:!0,columnName:"CREATEDATE",DataType:"Date Time",length:0,dataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5"}),this.dataStore.put({propertyName:"ModifyUser",displayName:this._nlsResources.ModifyUser,isKey:!1,isNullable:!0,columnName:"MODIFYUSER",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"}),this.dataStore.put({propertyName:"ModifyDate",displayName:this._nlsResources.ModifyDate,isKey:!1,isNullable:!0,columnName:"MODIFYDATE",DataType:"Date Time",length:0,dataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5"}),this.dataStore.put({propertyName:"SeccodeId",displayName:"Seccode Id",isKey:!1,isNullable:!1,columnName:"SECCODEID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"})},_createPropsGrid:function(){var a=this;this.populateDefaultProps();var b=[{field:"displayName",label:this._nlsResources.lblDisplayName},{field:"propertyName",label:this._nlsResources.lblPropertyName},{field:"dataTypeId",label:this._nlsResources.lblDataType,formatter:function(b){var c=a.fStore.typeStore.index[b];return c>=0?a.fStore.typeStore.data[c].name:""}},{field:"length",className:"alignright",label:this._nlsResources.lblLength},{field:"isNullable",label:this._nlsResources.lblNullable,renderCell:function(a,b,c,d){var e=new u({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)}}],c=new j({tools:["add","edit","delete"],store:this.dataStore,columns:b,placeHolder:this.placeGrid,addItem:l.partial(this.addItem,this),removeItem:l.partial(this.removeItem,this),editItem:l.partial(this.editItem,this),columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,classNames:"dgrid-autoheight",minRowsPerPage:this.dataStore.data.length,maxRowsPerPage:this.dataStore.data.length});this.propGrid=c,c.createGridView()},addItem:function(a){void 0===a.entityDetails.detailUtility?(a._dialog.showLoading(),setTimeout(function(){a.entityDetails.detailUtility=new q,a.entityDetails.detailUtility.getSchemasInformationFromSData(!1),a.entityDetails.detailUtility.getSpecialValues(),a.showAddEditPropsDialog(a)},1e3)):a.showAddEditPropsDialog(a)},showAddEditPropsDialog:function(a){var b=new p("",a._nlsResources.addFieldDialogTitle,a.entityDetails.detailUtility,!1,null,!0,a.dataStore);a._dialog.hideLoading(),b.show(),m.connect(b._dialog,"hide",l.partial(a.onReset,a))},editItem:function(a){var b=a.propGrid.grid.getSelectedRowData();if(0===b.length)return void v.showInfo(a._nlsResources.NoRecordsSelected);if(-1!==t.indexOf(a.sysProps,b[0].propertyName))return void v.showInfo(a._nlsResources.noEditSysProps);if(b[0]){var c=new p("",a._nlsResources.editFieldDialogTitle,a.entityDetails.detailUtility,!1,b[0],!0,a.dataStore);c.show(),m.connect(c._dialog,"hide",l.partial(a.onReset,a))}},onReset:function(a){a.propGrid.grid.refresh()},removeItem:function(a){var b=a.propGrid.grid.getSelectedRowData();if(0===b.length)return void v.showInfo(a._nlsResources.NoRecordsSelected);if(-1!==t.indexOf(a.sysProps,b[0].propertyName))return void v.showInfo(a._nlsResources.noDeleteSysProps);var c=b[0].propertyName;c&&(a.dataStore.remove(c),a.propGrid.grid.refresh())},_btnNext_OnClick:function(){this.entityDetails.data=this.dataStore.data,this.isValid()&&(this._checkCurrentStep(),this._dialog.hide(),r.publish("/entityController/entityWizard/nextStep",this._currentStep))}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditPropertiesDialog":function(){define(["dijit/_Widget","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/json","dojo/on","dojo/query","dojo/string","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/text!./templates/AddEditPropertiesDialog.html","dojo/i18n!./nls/AddEditDialog","dojo/store/Memory","Sage/_Templated","Sage/UI/Dialogs","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","Sage/UI/FilteringSelect","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/CheckBox","Sage/UI/Controls/FieldAttributeControlFactory","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/TextBox","Sage/MainView/EntityMgr/AddEditEntityDetail/DisplayName"],function(_Widget,domConstruct,domClass,dojoStyle,json,dojoOn,query,dojoString,dojoConnect,declare,lang,template,nlsResources,memory,_Templated,crmDialogue,SDataServiceRegistry,_DialogLoadingMixin,crmDropDowns,_DialogHelpIconMixin,crmCheckBox,FieldAttributeController,PropertyDropDown,crmTextBox,displayNameCNTRL){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.AddEditPropertiesDialog",[_Widget,_Templated],{_dialog:null,widgetTemplate:new Simplate(eval(template)),_nlsResources:nlsResources,widgetsInTemplate:!0,_EditData:!1,entityName:!1,detailUtility:!1,service:!1,_title:!1,details:null,_inEditMode:!1,justWidget:!1,showTypeAttributes:!1,dataTypeData:null,typeAttributeObj:null,activeControllers:null,isNewEntity:!1,dataStore:null,newProperty:null,rowTemplate:['<tr data-dojo-attach-point="_{%= $.name %}Section" name="_{%= $.name %}Section">','<td class="FManagerDialogFieldLabel {%= $.display %}">','<div style="padding:0 !important;" class="lbl alignright">','<label style="line-height:32px !important;">',"{%= $.label %}","</label>","</div>",'<div class="fld  dijitInline" data-dojo-attach-point="{%= $.name %}"></div>',"</td>","</tr>"],constructor:function(a,b,c,d,e,f,g){if(null===c){var h={name:a};c=new Sage.MainView.EntityMgr.EntityDetailUtility,c.getSchemasInformationFromSData(!1),c.getPropertiesAssociatedWithFilters(h),c.getSpecialValues(),c.refreshPropertyStore(h.name),this.service||(this.service=c.service)}if(c&&(this.detailUtility=c,this.detailUtility.refreshPropertyStore()),this._EditData=e,this.entityName=a,null===b){var i=this._EditData?nlsResources.editDialogTitle:nlsResources.dialogTitleAddField;this._title=dojoString.substitute(i,[this.entityName])}else this._title=b;this.justWidget=d,this.isNewEntity=!1,this._EditData&&(this._inEditMode=!0,this.dataTypeData=JSON.parse(this._EditData.dataTypeData)),f&&(this.isNewEntity=f,this.dataStore=g),this._createDynamicFieldProperties()},destroy:function(a){a.destroy(),dijit.popup.close()},postCreate:function(){for(var a=this.activeControllers.data,b=0;b<a.length;b++)this._moveActiveControlFromBackGroundToPage(a[b]);this.cmdSave.containerNode.innerHTML=this._nlsResources.lblSaveButton,this.cmdCancel.containerNode.innerHTML=this._nlsResources.lblCancelButton,lang.mixin(this._dialog,new _DialogHelpIconMixin({titleBar:this._dialog.titleBar})),this._dialog.createHelpIconByTopic("Adding_Editing_Properties"),lang.mixin(this._dialog,new _DialogLoadingMixin),this.hideControlsBasedOffSelectedFieldType(),dojoOn(this._dialog,"onCancel",lang.partial(this._cmdCancel_OnClick,this)),this.startup(),query(".dijitDialog").on("click",function(a){"button"!==(a.target||a.srcElement).type&&dijit.popup.close()}),dojoConnect.subscribe("/form/addEditProperty/showLoad",this,function(){this._dialog.showLoading()}),dojoConnect.subscribe("/form/addEditProperty/hideLoad",this,function(){this._dialog.hideLoading()})},_moveActiveControlFromBackGroundToPage:function(a){var b,c,d;a&&("propertyName"!==a.name?(b=new Simplate(this.rowTemplate),c=b.apply(a),d=domConstruct.toDom(c),domConstruct.place(a.control.domNode,d.lastElementChild.lastElementChild,"only"),a.control.domNode.className.indexOf("dijitCheckBox")>=0&&domClass.add(a.control.domNode.parentNode,"checkbox"),this._DynamicSection.appendChild(d)):(d=a.control.domNode,this._DisplayName.appendChild(d)))},_createDisplayNameController:function(){var a="",b="";return this._EditData&&this._EditData.displayName&&(a=this._EditData.displayName),this._EditData&&this._EditData.propertyName&&(b=this._EditData.propertyName),new displayNameCNTRL({dUtility:this.detailUtility,editMode:this._inEditMode&&!this.isNewEntity,dataStore:this.dataStore,query:{entityName:this.entityName,resourceKind:dojoString.substitute('entities("${0}")/properties',[this.entityName]),name:"propertyName",displayName:"displayName"},values:{display:{data:a,mapDisplayToName:this._nameToDisplayMap},name:{data:b,validation:this._NameValidator,disabled:this._inEditMode&&!this.isNewEntity,invalidMessage:this._nlsResources.validNameMsg}}})},_NameValidator:function(a,b){var c="^[A-Z][A-Za-z0-9_]*$",d=a.match(c,"g");return!!d&&(lang.isArray(d),d[0].length==a.length)},_nameToDisplayMap:function(a){var b=new RegExp(/\w*/gm),c=a.match(b);if(c){if(!lang.isArray(c))return c;if(a=c.join(""),b=new RegExp(/[A-Za-z]/gm),(c=b.exec(a))&&c.length>0)return a=a.substring(c.index),a&&a.length>0?a.charAt(0).toUpperCase()+a.slice(1):""}return""},_addToListofControls:function(a,b,c,d,e){var f=this._assignControlBasedOffType(a,b.substring(3),d,e),g=this._setDisplayString(f,a),h=void 0===this._nlsResources[a]||null===this._nlsResources[a]?c:this._nlsResources[a];this.activeControllers.add({control:f,label:h,name:a,display:g})},_displayControl:function(a,b){var c=["dataTypeData"],d=!0;return void 0!==b&&null!==b&&(d=c.indexOf(b)>=0),!d||void 0!==a.activeControls&&null!==a.activeControls&&a.activeControls.length>0},_setDisplayString:function(a,b){return this._displayControl(a,b)?"display":"display-none"},_setParentDisplayClass:function(a,b){this._displayControl(a)?(domClass.remove(b,"display-none"),domClass.add(b,"display")):(domClass.remove(b,"display"),domClass.add(b,"display-none"))},_createDynamicFieldProperties:function(){var a=this.detailUtility.propertyInformation.data;this.activeControllers=new memory({idProperty:"name"});var b=["id","displayName","columnName","isDynamic","length","isReadOnly","scale","precision","displayCategory","isKey"];this.isNewEntity||b.push("isNullable");for(var c=0;c<a.length;c++){var d=a[c],e=d.type,f=d.name,g=!this._inEditMode&&"isIncluded"===f;if(!(b.indexOf(f)>=0||g))if("xs:"===e.substring(0,3)){var h=null;this._inEditMode&&void 0!==this._EditData[f]&&null!==this._EditData[f]&&(h=this._EditData[f]),this._addToListofControls(f,e,d.label,h,null)}else{var i=e.length;if("--type"===e.substring(i-6,i)){var j=d.sub.data;if(null!==j)for(var k=0;k<j.length;k++){var l=j[k],m=l.name,n=l.type,o=!this._inEditMode&&"sdata"===f&&"generate"===m;if(!o&&"xs:"===n.substring(0,3)){var p=null;this._inEditMode&&void 0!==this._EditData[d.name][m]&&null!==this._EditData[d.name][m]&&(p=this._EditData[d.name][m]),this._addToListofControls(m,n,l,p,null)}}}else if("--enum"===e.substring(i-6,i)){var q=d.collection,r=null;this._inEditMode&&void 0!==this._EditData[f]&&null!==this._EditData[f]&&(r=this._EditData[f]),null!==q&&(q=new memory({idProperty:"@value",data:q.data}),this._addToListofControls(f,"xs:enum",d,r,{text:"@sme:label",id:"@value",data:q}))}}}},_assignControlBasedOffType:function(a,b,c,d){var e=null;if("dataTypeId"===a){var f=this;e=new crmDropDowns({shouldPublishMarkDirty:!1,required:!0,value:c,store:this.detailUtility.typeStore,searchAttr:"name",idAttr:"id",maxHeight:175,query:{supported:!0},fetchProperties:{sort:[{attribute:"name",descending:!1}]},invalidMessage:this._nlsResources.InvalidFilterName,disabled:this._inEditMode&&!this.isNewEntity,onChange:function(a){f._setTypeAttribute()}}),this.typeDropDown=e,void 0!==c?(this._setTypeAttribute(),this.showTypeAttributes=!0):this.typeAttribute.containerNode.innerHTML=this._nlsResources.lblMore}else if("dataTypeData"===a)e=this.typeAttributeObj;else if("propertyName"===a)e=this._createDisplayNameController();else switch(b){case"string":case"int":case"byte":case"date":e=new crmTextBox({shouldPublishMarkDirty:!1,disabled:this._inEditMode&&!this._EditData.isDynamic&&"displayName"!==a&&!this.isNewEntity}),void 0!==c&&null!==c&&(e.textbox.value=c);break;case"boolean":e=new crmCheckBox({shouldPublishMarkDirty:!1}),void 0!==c&&null!==c?e.setChecked(c):"isNullable"===a&&e.setChecked(!0);break;case"picklist":case"enum":e=new crmDropDowns({value:c,store:d.data,idProperty:d.id,searchAttr:d.text,shouldPublishMarkDirty:!1,disabled:this._inEditMode&&!this._EditData.isDynamic&&"displayName"!==a&&!this.isNewEntity,required:!1})}return domClass.remove(e.domNode,"dijitInline"),e},_setTypeAttribute:function(){var a=this.detailUtility.typeStore.index[this.typeDropDown.value];this._EditData&&void 0!==this._EditData&&("2596d57d-89d6-4b72-9036-b18c64c5324c"===this.typeDropDown.value&&lang.mixin(this.dataTypeData,{Precision:this._EditData.precision,Scale:this._EditData.scale}),void 0===this._EditData.length&&null===this._EditData.length||lang.mixin(this.dataTypeData,{Length:this._EditData.length}));var b=!(!this._inEditMode||this._EditData.isDynamic);this.isNewEntity&&(b=!1);for(var c=["IsEncrypted","IsPercentage","ValueStoredAsText","AllowMultiples","EnableHyperLinking","MultiSelect","NoneEditable","ReturnPrimaryKey","AlphaSort","MustExistInList","NoneEditable","ReturnPrimaryKey","IsNullable"],d=0;d<c.length;d++){var e=c[d];this._adjustForValuesMatchingBooleanDefaultsMissing(this.detailUtility.typeStore.data[a],e)}this.typeAttributeObj=new FieldAttributeController({viewOnly:b,formData:lang.mixin(this.detailUtility.typeStore.data[a],this.dataTypeData),entity:this.entityName,editMode:this._inEditMode,picklistSchema:this.detailUtility.picklistSchemaData});var f=this._findControllerDom("dataTypeData");null!==f&&(this._setParentDisplayClass(this.typeAttributeObj,f.parentNode),domConstruct.place(this.typeAttributeObj.domNode,f,"only")),void 0!==this._DynamicSection&&this.hideControlsBasedOffSelectedFieldType()},hideControlsBasedOffSelectedFieldType:function(){for(var a=this.activeControllers.data,b="_${0}Section",c=0;c<a.length;c++){var d=a[c];d&&d.name&&this.findDomAndShowDom(dojoString.substitute(b,[d.name]))}var e=[],f=!1,g=this.typeDropDown.value;switch(void 0===g&&null===g&&(g=this._EditData.dataTypeId),g){case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":e.push("audited","canBulkUpdate","canImport","canMatch"),f=!0}!this._EditData||this._EditData.isDynamic||f||e.push("audited","isIncluded");for(var h=0;h<e.length;h++){var i=e[h];this.findDomAndHideDom(dojoString.substitute(b,[i]))}},findDomAndHideDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display-none"),domClass.remove(b,"display"))},findDomAndShowDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display"),domClass.remove(b,"display-none"))},_findControllerDom:function(a,b){var c="div.fld[data-dojo-attach-point='${0}']";b&&(c="tr[data-dojo-attach-point='${0}']");var d=dojoString.substitute(c,[a]);if(this._DynamicSection){var e=query(d,this._DynamicSection);if(void 0!==e&&null!==e&&void 0!==e.length&&null!==e.length&&e.length>0)return e[0]}return null},_adjustForValuesMatchingBooleanDefaultsMissing:function(a,b){void 0!==a&&void 0!==a[b]&&null!==this.dataTypeData&&void 0===this.dataTypeData[b]&&(this.dataTypeData[b]=!1)},startup:function(){this.inherited(arguments)},show:function(){this._EditData,this._dialog.titleNode.innerHTML=this._title,this._dialog.show(),this.inherited(arguments)},_cmdSave_OnClick:function(){this.isNewEntity?this._addItemToStore():this._saveExistingEntity()},_addItemToStore:function(){this._dialog.showLoading();var a=this._generalPropertyValueAdjustments(!1,!0),b=a.property;if(this.newProperty=b,!this.isValid())return void this._dialog.hideLoading();this._EditData&&this.dataStore.remove(this._EditData.propertyName),this.dataStore.put(b),this._dialog.hideLoading(),this._dialog.hide()},_generalPropertyValueAdjustments:function(a,b){var c=this.typeAttributeObj.getActiveValues();if(!a||!1!==this.addEditFiltersForm.validate()){var d=this._populdateSDataObject();return d.displayName||(d.displayName=d.propertyName),"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c"!==this.typeDropDown.value&&"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd"!==this.typeDropDown.value||(c.DisplayName=d.displayName,c.isReadOnly=!0),d.dataTypeData=json.stringify(c),b&&(d=this._createPropertyValueAdjustments(d,c)),{property:d,activity:c}}},_createPropertyValueAdjustments:function(a,b){switch(a.columnName=a.propertyName.toUpperCase(),a.isIncluded=!0,void 0===a.sdata||null===a.sdata?a.sdata={generate:!0}:a.sdata.generate=!0,this.typeDropDown.value){case"2596d57d-89d6-4b72-9036-b18c64c5324c":a.precision=b.Precision,a.scale=b.Scale;break;case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":a.isReadOnly=!0}return void 0!==b.Length&&null!==b.Length&&(a.length=b.Length),a},_saveExistingEntity:function(){var a=new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceKind(dojoString.substitute('entities("${0}")/properties',[this.entityName]));if(a.setQueryArg("language",cookie.getCookie("SLXLanguageSetting")),this._dialog.showLoading(),!this.isValid())return void this._dialog.hideLoading();var b=!this._inEditMode,c=this._generalPropertyValueAdjustments(!0,b),d=c.property,e=c.activity;b?a.create(d,{success:function(a){this._onSaveSuccess(a)},failure:function(a){this._dialog.hide()},scope:this}):(lang.mixin(this._EditData,d),"2596d57d-89d6-4b72-9036-b18c64c5324c"===this.typeDropDown.value&&(this._EditData.precision=e.Precision,this._EditData.scale=e.Scale),void 0!==e.Length&&null!==e.Length&&(this._EditData.length=e.Length),a.setResourceSelector(dojoString.substitute("'${0}'",[this._EditData.$key])),a.update(this._EditData,{isSecurityManager:!0,scope:this,ignoreETag:!1,success:function(a){this._onSaveSuccess(a)},failure:function(a){this._dialog.hide()}}))},onSaveSuccess:function(a){},_onSaveSuccess:function(a){SDataServiceRegistry._removeFromLocalStorage(this.entityName),this._dialog.hideLoading(),this._dialog.hide(),this.onSaveSuccess(a)},_cmdCancel_OnClick:function(a){this._dialog?(this._dialog.hideLoading(),this._dialog.hide()):a._dialog&&(a._dialog.hideLoading(),a._dialog.hide()),dojoConnect.publish("Sage/EntityManager/FieldCanceled")},isValid:function(){
this.divValidationMessage.innerHTML="";for(var a=this.addEditFiltersForm.validate(),b=0;b<this.activeControllers.data.length;b++){var c=this.activeControllers.data[b];if(void 0!==c.control.disabled&&!0!==c.control.disabled){var d=!0,e=!1;switch(c.name){case"propertyName":d=c.control.isValid(!this._inEditMode),"object"==typeof d&&(d=d.value),e=!0;break;case"dataTypeId":var f=this.detailUtility.typeStore.query({supported:!0});f=new memory({data:f}),d=!(null===c.control.item||!c.control.item.id)&&f.query({id:c.control.item.id}).length>0,e=!0}e||"function"!=typeof c.control.isValid||c.control.isValid(!0),"function"==typeof c.control.onChanged&&c.control.onChanged(),void 0!==c.control.state&&void 0!==c.control.required&&(d=d&&"Error"!==c.control.state&&!("Incomplete"===c.control.state&&c.control.required)),d||c.control.set("state","Error"),a=a&&d}}return a=a&&this.typeAttributeObj.isValid()},_populdateSDataObject:function(){for(var a={},b=this.detailUtility.propertyInformation.data,c=0;c<b.length;c++){var d=b[c],e={};if(null!==d.sub){for(var f=0;f<d.sub.data.length;f++){var g=d.sub.data[f],h=this.activeControllers.index[g.name];if(h>0){var i=this.activeControllers.data[h],j=this._getValue(i);null!==j&&(e[g.name]=j)}}a[d.name]=e}else{var k=this.activeControllers.index[d.name];if(k>=0){var l=this.activeControllers.data[k],m=this._getValue(l);"object"==typeof m?lang.mixin(a,m):null!==m&&(a[d.name]=m)}}}return a},_getValue:function(a){var b=a.control.declaredClass;return b.indexOf("TextBox")>=0?a.control.value:b.indexOf("DisplayName")>=0?a.control.getDetails():b.indexOf("CheckBox")>=0?a.control.checked:b.indexOf("FilteringSelect")>=0?a.control.value:null}});return widget})},"Sage/UI/Controls/FieldAttributeControlFactory":function(){define(["Sage/UI/Forms/FormFromSData","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/string","dojo/query","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","Sage/UI/Controls/SimpleTextarea","Sage/UI/Dialogs","Sage/UI/FilteringSelect","Sage/UI/ComboBox","dojo/store/Memory","Sage/UI/Controls/PropertyDropDown","dojo/aspect","dojo/string","dojo/data/ObjectStore","dojo/store/Observable","dojo/i18n!./nls/FieldAttributeControlFactory","dojo/dom-construct","Sage/UI/Controls/DndSortList","dijit/form/Button","dijit/form/ValidationTextBox","Sage/UI/Forms/PickListManagerForm"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return c("Sage.UI.Controls.FieldAttributeControlFactory",[a],{store:null,defaultEntity:null,pickList:null,viewOnly:!1,activeControls:null,hiddenValues:null,calculatedMapDotToLegacyPath:null,picklistManagerForm:y,pickListManagerFormDiv:null,picklistSchema:null,domConstruct:u,domClass:e,query:g,pickListLoading:!1,formStatus:0,_createCustomTextBox:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customTextBox",Sage.UI.Controls.TextBox,{shouldPublishMarkDirty:!1})},_createCustomCheckBox:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customCheckBox",Sage.UI.Controls.CheckBox,{shouldPublishMarkDirty:!1})},_createCustomFilteringSelect:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customFilteringSelect",Sage.UI.FilteringSelect,{shouldPublishMarkDirty:!1,required:!1})},_createCustomCombBox:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customComboBox",Sage.UI.ComboBox,{shouldPublishMarkDirty:!1,required:!1})},_createCustomTextArea:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customCustomTextArea",[Sage.UI.Controls.SimpleTextarea,x],{shouldPublishMarkDirty:!1,required:!0,baseClass:"dijitReset dijitInline dijitLeft dijitTextArea dijitValidationContainer",templateString:"<div><div class='dijitReset dijitValidationContainer'><input class='dijitReset dijitInputField dijitValidationIcon dijitValidationInner' value='\u03a7' type='text' tabindex='-1' readonly='readonly' role='presentation'/></div><div class='dijitReset dijitInputField dijitInputContainer'><textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='on'></textarea></div></div>",width:"100%"})},_FormSpecificFields:function(a){this.pickList=[],this.activeControls=[],this.hiddenValues=[],this.pickListManagerFormDiv={},this.calculatedMapDotToLegacyPath=new s(new n({idProperty:"dot"})),void 0!==a&&null!==a&&(void 0!==a.formData&&null!==a.formData&&(this.store=a.formData),void 0!==a.viewOnly&&null!==a.viewOnly&&(this.viewOnly=a.viewOnly),void 0!==a.entity&&null!==a.entity&&(this.defaultEntity=a.entity),void 0!==a.picklistSchema&&null!==a.picklistSchema&&(this.picklistSchema=a.picklistSchema))},_createForm:function(){var a=!1;if(void 0!==this.store.ClrDataType&&this.store.show&&this.store.show.indexOf("ClrDataType")>=0&&this.createAttributeEditor("ClrDataType",this._createCustomTextBox(),this.store.ClrDataType,this.viewOnly),void 0!==this.store.IsEncrypted&&this.store.show&&this.store.show.indexOf("IsEncrypted")>=0&&this.createAttributeEditor("IsEncrypted",this._createCustomCheckBox(),this.store.IsEncrypted,this.viewOnly),void 0!==this.store.Length&&this.store.show&&this.store.show.indexOf("Length")>=0&&this.createAttributeEditor("Length",this._createCustomTextBox(),this.store.Length,this.viewOnly),void 0!==this.store.SqlType&&this.store.show&&this.store.show.indexOf("SqlType")>=0&&this.createAttributeEditor("SqlType",this._createCustomTextBox(),this.store.SqlType,this.viewOnly),void 0!==this.store.This&&this.store.show&&this.store.show.indexOf("This")>=0&&this.createAttributeEditor("this",this._createCustomTextBox(),this.store.This,this.viewOnly),void 0!==this.store.Precision&&this.store.show&&this.store.show.indexOf("Precision")>=0&&this.createAttributeEditor("Precision",this._createCustomTextBox(),this.store.Precision,this.viewOnly),void 0!==this.store.Scale&&this.store.show&&this.store.show.indexOf("Scale")>=0&&this.createAttributeEditor("Scale",this._createCustomTextBox(),this.store.Scale,this.viewOnly),void 0!==this.store.IsPercentage&&this.store.show&&this.store.show.indexOf("IsPercentage")>=0&&this.createAttributeEditor("IsPercentage",this._createCustomCheckBox(),this.store.IsPercentage,this.viewOnly),void 0!==this.store.MultiSelect&&this.store.show&&this.store.show.indexOf("MultiSelect")>=0&&this.createAttributeEditor("MultiSelect",this._createCustomCheckBox(),this.store.MultiSelect,this.viewOnly),void 0!==this.store.OverriddenName&&this.store.show&&this.store.show.indexOf("OverriddenName")>=0&&this.createAttributeEditor("OverriddenName",this._createCustomTextBox(),this.store.OverriddenName,this.viewOnly),void 0!==this.store.StorageOptions&&this.store.show&&this.store.show.indexOf("Storage")>=0&&(a=void 0!==this.store.ClrDataType&&this.store.ClrDataType.indexOf("Guid")>=0,a?this.hiddenValues.push({Storage:this.store.Storage}):this.createAttributeStorage("Storage",this._createCustomFilteringSelect(),this.store.Storage,this.store.StorageOptions,this.viewOnly||this.editMode,!1)),void 0!==this.store.StorageOptions&&this.store.show&&this.store.show.indexOf("Display")>=0){var c=this.store.show.indexOf("Storage")>=0;this.createAttributeStorage("Display",this._createCustomFilteringSelect(),this.store.Display,this.store.DisplayOptions,c,c)}void 0!==this.store.EnableHyperLinking&&this.store.show&&this.store.show.indexOf("EnableHyperLinking")>=0&&this.createAttributeEditor("EnableHyperLinking",this._createCustomCheckBox(),this.store.EnableHyperLinking,this.viewOnly),void 0!==this.store.ReturnPrimaryKey&&this.store.show&&this.store.show.indexOf("ReturnPrimaryKey")>=0&&this.createAttributeEditor("ReturnPrimaryKey",this._createCustomCheckBox(),this.store.ReturnPrimaryKey,this.viewOnly),void 0!==this.store.PickListName&&this.store.show&&this.store.show.indexOf("PickListName")>=0&&(this._grabPickList(),this.createAttributeStorage("PickListName",this._createCustomCombBox(),this.store.PickListName,this.pickList,this.viewOnly,!1),b.subscribe("Sage/picklist/form/reload",d.hitch(this,this.reloadPickListForm))),void 0!==this.store.AllowMultiples&&this.store.show&&this.store.show.indexOf("AllowMultiples")>=0&&this.createAttributeEditor("AllowMultiples",this._createCustomCheckBox(),this.store.AllowMultiples,this.viewOnly),void 0!==this.store.AlphaSort&&this.store.show&&this.store.show.indexOf("AlphaSort")>=0&&this.createAttributeEditor("AlphaSort",this._createCustomCheckBox(),this.store.AlphaSort,this.viewOnly),void 0!==this.store.MustExistInList&&this.store.show&&this.store.show.indexOf("MustExistInList")>=0&&this.createAttributeEditor("MustExistInList",this._createCustomCheckBox(),this.store.MustExistInList,this.viewOnly),void 0!==this.store.NoneEditable&&this.store.show&&this.store.show.indexOf("NoneEditable")>=0&&this.createAttributeEditor("NoneEditable",this._createCustomCheckBox(),this.store.NoneEditable,this.viewOnly),void 0!==this.store.PickListFilter&&this.store.show&&this.store.show.indexOf("PickListFilter")>=0&&this.createAttributeEditor("PickListFilter",this._createCustomTextBox(),this.store.PickListFilter,this.viewOnly),void 0!==this.store.ValueStoredAsText&&this.store.show&&this.store.show.indexOf("ValueStoredAsText")>=0&&this.createAttributeEditor("ValueStoredAsText",this._createCustomCheckBox(),this.store.ValueStoredAsText,this.viewOnly||this.editMode),void 0!==this.store.DisplayName&&this.store.show&&this.store.show.indexOf("DisplayName")>=0&&(a=void 0!==this.store.ThisObj&&this.store.ThisObj.indexOf("Calculated String field")>=0,a?this.hiddenValues.push({DisplayName:this.store.DisplayName}):this.createAttributeEditor("Display",this._createCustomTextBox(),this.store.DisplayName,this.viewOnly)),void 0!==this.store.Description&&this.store.show&&this.store.show.indexOf("Description")>=0&&this.createAttributeEditor("Description",this._createCustomTextBox(),this.store.Description,this.viewOnly&&this.store.show.indexOf("Template")<0),void 0!==this.store.Template&&this.store.show&&this.store.show.indexOf("Template")>=0&&this._createDropDownSelectorWithDisplayTextField("Template",this.store.Template,this.viewOnly,!0)},_createDropDownSelectorWithDisplayTextField:function(a,b,c,d){var e=this,g=this._createCustomTextArea(),h=[{name:"calculated",value:!1}];0!==this.store.type&&h.push({name:"number",value:!0}),b&&""!==b&&this._buildDotPathFromLegacy(b),b=this._convertLegacyToDot(b);var i={PropertyDropDown:new o({entityName:this.defaultEntity,Keywords:h,allMatch:!0,required:!1}),TextBox:new g({value:b,shouldPublishMarkDirty:!1,autoComplete:!0,isValid:function(){var a=""!==this.textbox.value.replace(/\s+$/g);if(a||(this.textbox.validity.badInput=!0,this.textbox.validity.tooShort=!0,this.textbox.validity.valueMissing=!0,this.textbox.validity.valid=!1),0!==e.store.type){for(var b,c=new RegExp("({.*?}|[0-9]|[+]|[*]|[/]|[(]|[)]|[-])","gm"),d=this.textbox.value,f="";null!==(b=c.exec(d));)b.index===c.lastIndex&&c.lastIndex++,f+=b[0];a=a&&f.length===this.textbox.value.length,a?(this.textbox.validity.badInput=!1,this.textbox.validity.valid=!0):(this.textbox.validity.badInput=!0,this.textbox.validity.valid=!1)}return a}})};if(0!==this.store.type){i.TextBox.invalidMessage=t.CalculatedNumberInputError;for(var j=[{l:"+",t:t.add},{l:"-",t:t.substract},{l:"*",t:t.multiply},{l:"/",t:t.divide},{l:"(",t:t.openParens},{l:")",t:t.closeParens}],k=this.domConstruct.toDom(this.buttonListTemplate.apply()),l=0;l<j.length;l++){var m=new w({label:j[l].l,title:j[l].t,onClick:function(){i.TextBox.textbox.value=f.substitute("${0}${1}",[i.TextBox.textbox.value,this.label])}});this.domClass.add(m.domNode,"calcuNumberButton"),k.appendChild(m.domNode)}i.ButtonList=k}return this.domClass.remove(i.PropertyDropDown.domNode,"dijitInline"),this.domClass.remove(i.TextBox.domNode,"dijitInline"),i.PropertyDropDown.entitySelected.onChange=function(){var a=i.PropertyDropDown.tree.selectedItem;if(a){var b=a.columName;void 0!==b&&""!==b&&(e.calculatedMapDotToLegacyPath.put({dot:b,legacy:a.legacyPath}),i.TextBox.set("value",f.substitute("${0}{${1}}",[i.TextBox.get("value"),b])))}},this.activeControls.push({label:t[a],name:a,control:null,isDom:!1,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"}),this.activeControls.push({label:t.AddField,name:a,control:i.PropertyDropDown,isDom:!1,template:"rowTemplate",display:"display",Include:!1,fieldClassAppendix:"typeattributedetails"}),i.ButtonList&&this.activeControls.push({label:"",name:a,control:i.ButtonList,isDom:!0,template:"rowTemplate",display:"display",Include:!1,fieldClassAppendix:"typeattributedetails"}),this.activeControls.push({label:"",name:a,control:i.TextBox,isDom:!1,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"}),i},_grabEntityPropertyNamesFromString:function(a){for(var b=new RegExp(/([{].+?[}])/gm),c=a.match(b),d=new n,e=0;null!==c&&e<c.length;e++){var f=c[e];f=f.replace("{",""),f=f.replace("}",""),f=f.replace(" ",""),(void 0===d.index[f]||d.index[f]<0)&&""!==f&&d.add({id:f,name:f})}return d},_buildDotPathFromLegacy:function(a){for(var b=this._grabEntityPropertyNamesFromString(a),c=0;c<b.data.length;c++){var d=b.data[c].name,e="",f=new RegExp(/([.].*?!)/gm),g=d.match(f);if(null!==g&&g)for(var h=0;h<g.length;h++){var i=g[h].replace(".","").replace("!","");e=q.substitute("${0}${1}${2}",[e,0===h?"":".",i])}var j=d.lastIndexOf("!");j<0&&(j=-1),e=q.substitute("${0}${1}${2}",[e,0===e.length?"":".",d.substring(j+1)]),this.calculatedMapDotToLegacyPath.put({dot:e,legacy:d})}},_convertDotToLegacy:function(a){return this._propertyPathConverter(a,"dot","legacy")},_convertLegacyToDot:function(a){return this._propertyPathConverter(a,"legacy","dot")},_propertyPathConverter:function(a,b,c){for(var d=a,e=new RegExp(/(.*?|[+|\\|\/|*|-]?)([{].*?[}])(.*?|[+|\\|\/|*|-]?)/gm),f=a.match(e),g=[],h=0;null!==f&&h<f.length;h++){var i=f[h],j={from:i,to:{}},k=i.indexOf("{")+1,l=i.indexOf("}")-k;if(k>=0&&l>0&&l-k<=i.length){var m=i.substr(k,l),o=this.calculatedMapDotToLegacyPath.query(function(a){return a[b]===m}),p=new n({data:o});if(1===p.data.length){var r=q.substitute("${0}:",[this.defaultEntity]),s=p.data[0][c].replace(r,"");i=i.replace(p.data[0][b],s)}j.to=i,g.push(j)}}for(h=0;h<g.length;h++)d=d.replace(g[h].from,g[h].to);return d},createAttributeEditor:function(a,b,c,d){var e=new b({value:c,shouldPublishMarkDirty:!1,disabled:d});b.prototype.declaredClass.indexOf("CheckBox")>=0&&e.setChecked(c),this.domClass.remove(e.domNode,"dijitInline"),this.activeControls.push({label:t[a],name:a,control:e,isDom:!1,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"})},createAttributeStorage:function(a,b,c,e,f,g){var h=null,i=this;"PickListName"===a?(h=new n({data:e,idProperty:"name"}),a="PickList"):h=new n({data:e});var j=new b({shouldPublishMarkDirty:!1,disabled:f,name:a,searchAttr:"name",store:h,fetchProperties:{sort:[{attribute:"name",descending:!1}]}}),k=c;if("PickList"===a&&(p.before(j,"loadAndOpenDropDown",d.partial(this._startPKListLoad,j,this)),j.onChange=function(){i._pickListOnChange(i,this.value,this.item)}),"Storage"===a||"Display"===a){switch(c){case"Text":case"TextUnicode":k=e.filter(function(a){return"Text"===a.id||"TextUnicode"===a.id});break;case"Code":case"CodeUnicode":k=e.filter(function(a){return"Code"===a.id||"CodeUnicode"===a.id})}k&&k.length>0&&(k=k[0].id)}"Storage"===a&&this.store.show.indexOf("Display")>=0&&(j.onChange=function(){var a=$(this.domNode.offsetParent.offsetParent).find("[name='Display']");if(!this.viewOnly&&!this.editMode&&null!==a&&null!==a[0]){var b=a[0];b&&(b.value=this.value),b=b.previousSibling,b&&(b.value=this.value)}}),j.set("value",k),this.domClass.remove(j.domNode,"dijitInline"),this.activeControls.push({label:t[a],name:a,control:j,isDom:!1,template:"rowTemplate",display:g?"display-none":"display",Include:!0,fieldClassAppendix:"typeattributedetails"})},_pickListOnChange:function(a,b,c){var g=f.substitute("--- ${0} ---",[t.newPickList]),h={defaultLanguage:"",name:b||g,allowMultiples:!1,valueMustExist:!1,required:!1,alphaSorted:!1,noneEditable:!1,items:[]},i=["AllowMultiples","AlphaSort","MustExistInList","NoneEditable"],j=Sage.Data.SDataServiceRegistry.getSDataService("system",!1,!0,!1);if(void 0===c||null===c){var k=new Sage.SData.Client.SDataResourceCollectionRequest(j);k.setResourceKind("picklists").setQueryArg("select","*").setQueryArg("format","json").setQueryArg("where",f.substitute("lower(name) eq '${0}'",[b.toLowerCase()])),k.setQueryArg("count",1),this.pickList=[],this.pickListLoading=!0,k.read({async:!1,scope:this,success:function(a){a.$resources&&a.$resources.length>0&&(c=a.$resources[0],c.id=c.$key,c.defaultLanguage&&(h.defaultLanguage=c.defaultLanguage))},failure:this._pkListLoadFailure})}var l=null!==c&&"000new"!==c.id,m=a._getIndexFromActivityListFromName("PickListForm"),n=m>-1,o=this._getIndexFromActivityListFromName("PickList"),p=null;if(o>-1&&(p=this.activeControls[o]),l){h.$key=c.id;var q=new Sage.SData.Client.SDataResourceCollectionRequest(j);q.setResourceKind(f.substitute("picklists('${0}')",[h.$key])).setQueryArg("select","*,items/*").setQueryArg("format","json"),q.setQueryArg("count",1),this.pickList=[],this.pickListLoading=!0,q.read({async:!1,scope:this,success:function(a){a.$resources&&a.$resources.length>0&&(a=a.$resources[0]),a.defaultLanguage&&(h.defaultLanguage=a.defaultLanguage),a.items&&a.items.$resources?h.items=a.items.$resources:h.items=[],!1===this.editMode&&(this.setControlValue("AllowMultiples",a.allowMultiples),this.setControlValue("AlphaSort",a.alphaSorted),this.setControlValue("MustExistInList",a.valueMustExist),this.setControlValue("NoneEditable",a.noneEditable))},failure:this._pkListLoadFailure}),null!==p&&(p=p.control,p.focusNode.value=b)}else b&&b!==g?(h.name=d.clone(b),null!==p&&(p=p.control,p.focusNode.value=g)):h.name="";if(a._showHideElementsByNames(a,i,!l,"grandparent"),n){var r=this.activeControls[m].control.domNode;e.add(r,"display-hidden"),a.domConstruct.destroy(r),a.activeControls.splice(m,1)}a._createPickListManagerForm(a,h,l,n)},_createPickListManagerForm:function(a,b,c,d){var e=["createuser","createdate","modifydate","modifyuser"];c?(e.push("valuestoredastext"),e.push("allowmultiples"),e.push("valuemustexist"),e.push("alphasorted"),e.push("required"),e.push("noneeditable"),e.push("name")):e.push("defaultlanguage");var f={schemaReader:a.picklistSchema,suppressFields:e,excludeOnNew:[],formData:b,displayFormButtons:["ok"],editMode:c},g=new a.picklistManagerForm(f),h="after",i=a.attributeContainer;if(d){h="replace";var j=a.attributeContainer.parentNode.children[1];void 0!==j?i=j:h="after"}a.domConstruct.place(g.domNode.firstChild,i,h),a.activeControls.push({label:"",name:"PickListForm",control:g,isDom:!0,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"})},reloadPickListForm:function(a){this._grabPickList(!1);var b=this._getIndexFromActivityListFromName("PickList"),c=this.activeControls[b].control;c.displayedValue===a.name&&c.set("value","--- "+t.newPickList+" ---"),this.formStatus=1,p.after(c,"onChange",d.hitch(this,function(){1===this.formStatus&&(this.formStatus=0,a.id=a.$key,a&&this._pickListOnChange(this,a.name,a))})),c.set("value",a.name)},_grabPickList:function(a,b){var c=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("system",!1,!0,!1));void 0!==b&&null!==b||(b=500),c.setResourceKind("picklists").setQueryArg("select","*").setQueryArg("orderby","name").setQueryArg("format","json"),c.setQueryArg("count",b),this.pickList=[],void 0!==a&&null!==a||(a=!0),this.pickListLoading=!0;c.read({async:a,scope:this,success:this._pkListLoadSuccess,failure:this._pkListLoadFailure})},_startPKListLoad:function(a,b){var c=a.domNode,d=new dojox.widget.Standby({target:c,color:"white",image:"css/themes/inforSoHoXi/images/loadingAnimation.gif"});c.appendChild(d.domNode),b.pickListLoading&&(d.startup(),d.show());var e=function(){d.hide()};p.before(a,"closeDropDown",e)},_pkListLoadSuccess:function(a){this.pickListLoading=!1;for(var b=a.$resources,c=0;c<=b.length-1;c++)this.pickList.push({id:b[c].$key,name:b[c].$descriptor,use:b[c].name,items:b[c].items});Sage.Services.getService("RoleSecurityService").hasAccess("Administrator/Picklist/add")&&this.pickList.push({id:"000new",name:"--- "+t.newPickList+" ---",use:"--- "+t.newPickList+" ---",items:null});var d=this._getIndexFromActivityListFromName("PickList"),e=null;d>-1&&(e=this.activeControls[d]),null!==e&&e.control&&e.control.set("store",new n({data:this.pickList,idProperty:"name"}))},_pkListLoadFailure:function(a){this.pickListLoading=!1},customValidation:function(a){if("function"==typeof a.control.isValid){if(a.Include&&"Template"===a.name||"PickListForm"===a.name){var b=a.control.isValid(!0);return"PickListForm"===a.name&&b?(this._grabPickList(),b):null}return a.control.isValid(!0)}return null},_getActiveValuesAdjustments:function(){var a={},b=this.activeControls.filter(function(a){return"picklistform"===a.name.toLowerCase()});if("object"==typeof b&&b.length&&b.length>0){b=b[0].control;for(var c=b.getActiveValues(),d=[{name:"alphasort",key:"alphaSorted"},{name:"mustexistinlist",key:"valueMustExist"}],e=[b.activeControls,d],f=0;f<e.length;f++)for(var g=e[f],h=0;h<g.length;h++){var i=g[h],j=this.activeControls.filter(function(a){return a.name.toLowerCase()===i.name.toLowerCase()});if("object"==typeof j&&j.length&&j.length>0){var k=c[i.name];void 0===k&&i.key&&void 0!==c[i.key]&&(k=c[i.key]),void 0!==k&&(a[j[0].name]=k)}}var l=c.name;void 0!==l&&(a.PickListName=l)}return a},_changeObjectPathParameters:function(a,b,c,d,e){return{propName:"PickList"===c?"PickListName":c,path:"PickList"===a?"PickListName":a,builtUpPath:f.substitute('"${0}":${1}',["PickList"===c?"PickListName":c,JSON.stringify(b)]),skip:d,stringify:e,lineEscape:""}}})})},"Sage/UI/Forms/FormFromSData":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/string","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","Sage/UI/Controls/SimpleTextarea","Sage/UI/FilteringSelect","Sage/UI/Controls/DndSortList","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/DateTimePicker","Sage/UI/GridView","dojo/aspect","dojo/store/Memory","dojo/data/ObjectStore","dojo/store/Observable","dojo/dom-construct","dojo/_base/connect","dijit/form/Button","dijit/form/ValidationTextBox","dojo/i18n!./../nls/GridView","dojo/i18n!./nls/FormFromSData","dojo/query"],function(_Widget,_Templated,dojoConnect,declare,lang,domClass,dString,TextBox,CheckBox,SimpleTextarea,FilteringSelect,DndSortList,PropertyDropDown,DateTimePicker,GridView,dojoAspect,memory,ObjectStore,Observable,domConstruct,connect,dijitButton,ValidationTextBox,gridNLS,formNLS,query){var widget=declare("Sage.UI.Forms.FormFromSData",[_Widget,_Templated],{widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(["<div>","<table style='overflow-y:show;' class='detailTableContainer formtable' dojoattachpoint='attributeContainer' />","</div>"])),rowTemplate:['<tr data-dojo-attach-point="_{%= $.name %}Section" name="_{%= $.name %}Section">','<td class="FManagerDialogFieldLabel {%= $.display %}">','<div style="padding:0 !important;" class="lbl alignright">','<label style="line-height:32px !important;">',"{%= $.label %}","</label>","</div>",'<div class="fld  dijitInline {%= $.fieldClassAppendix %}" data-dojo-attach-point="{%= $.name %}"></div>',"</td>","</tr>"],validationAndButtonRowTemplate:["<div>",'<div data-dojo-attach-point="divValidationMessage" class="errorText">','<span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>',"</div>",'<div class="lookupButtonWrapper" data-dojo-attach-point="btnController">',"</div>","</div>"],formIssueTemplate:['<div style="padding:0 !important;" class="lbl alignright">','<label style="line-height:32px !important;">',"{%= $.label %}","</label>","</div>"],buttonListTemplate:new Simplate(["<div class='ButtonActionList'></div>"]),activeControls:null,editMode:!1,dumbDTControlCounterForId:0,excludeOnNew:[],listOfSupressFields:[],useDisplayNameControl:!0,formData:{},_oformData:{},gridNlsResource:gridNLS,formNlsResource:formNLS,formButtonControl:[],displayFormButtons:["ok","cancel"],_dialogue:null,_embedded:!1,schema:[],permittedActions:[],allowViaAddRule:"",allowViaEditRule:"",allowViaViewRule:"",allowViaDeleteRule:"",formBase:"main",duplicateCheck:[],saveIfValid:{update:!1,insert:!1},constructor:function(a){this.formButtonControl=[{label:formNLS.okText,dojoattachpoint:"ok",onClick:"save"},{label:formNLS.cancelText,dojoattachpoint:"cancel",onClick:"cancel"}],this.dumbDTControlCounterForId=0;var b={};this.schema=[],this.permittedActions=[],this.activeControls=[],a.schemaReader&&(b=a.schemaReader),a.suppressFields&&(this.listOfSupressFields=a.suppressFields),a.excludeOnNew&&(this.excludeOnNew=a.excludeOnNew),null!==a.formData&&"object"==typeof a.formData&&(this.formData=a.formData,this._oformData=lang.clone(a.formData),this.editMode=!0),"boolean"==typeof a.editMode&&(this.editMode=a.editMode),"boolean"==typeof a.embedded&&(this._embedded=a.embedded),this._FormSpecificFields(a),this.securityRules(),this._createForm(b)},postCreate:function(){var a=this.activeControls;this._embedded?(domClass.remove(this.attributeContainer,"mainContentContent"),domClass.remove(this.attributeContainer,"DialogMainForm")):(domClass.add(this.attributeContainer,"mainContentContent"),domClass.add(this.attributeContainer,"DialogMainForm"));for(var b=0;b<a.length;b++)this._moveActiveControlFromBackGroundToPage(a[b]);var c=new Simplate(this.validationAndButtonRowTemplate),d=c.apply(),e=domConstruct.toDom(d);if(this.permittedActions.indexOf("add")>=0)for(b=0;b<this.formButtonControl.length;b++){var f=this.formButtonControl[b];if(this.displayFormButtons.indexOf(f.dojoattachpoint)>-1){var g=new dijitButton;g.containerNode.innerHTML=f.label,connect.connect(g.domNode,"onclick",this,this[f.onClick]),e.lastElementChild.appendChild(g.domNode)}}this.attributeContainer.appendChild(e)},_CustomDisplay:function(){return null},customValidation:function(a){return null},_createGridControl:function(a,b,c,d){return null},assignControlBasedOffOfName:function(a,b,c,d){return null},_FormSpecificFields:function(){},_changeObjectPathParameters:function(a,b,c,d,e){return null},_save:function(a){},_getActiveValuesAdjustments:function(){return{}},securityRules:function(){var a=Sage.Services.getService("RoleSecurityService");""!==this.allowViaAddRule&&a.hasAccess(this.allowViaAddRule)&&this.permittedActions.push("add"),""!==this.allowViaDeleteRule&&a.hasAccess(this.allowViaDeleteRule)&&this.permittedActions.push("delete"),""!==this.allowViaEditRule&&a.hasAccess(this.allowViaEditRule)&&this.permittedActions.push("edit"),""!==this.allowViaViewRule&&a.hasAccess(this.allowViaViewRule)&&this.permittedActions.push("view")},save:function(a){dojoConnect.publish("/form/addEditProperty/showLoad"),this._save(a),dojoConnect.publish("/form/addEditProperty/hideLoad")},_createForm:function(a){a&&this._createFormFromSDataReader(a)},_createFormFromSDataReader:function(a){if(this.permittedActions.indexOf("view")<0)return void this.activeControls.push({name:"error",label:this.formNlsResource.permissionsToView,control:null,template:"formIssueTemplate"});var b=0,c=a.data?a.data:a,d={},e=this;for(b=0;b<c.length;b++)d=c[b],this.schema.push(d);for(b=0;b<this.schema.length;b++){d=this.schema[b];var f=d.type,g=d.name,h=dString.substitute('"${0}":""',[g]),i=g.toLowerCase(),j=this._getProvidedData(g),k=!this.editMode&&this.excludeOnNew.indexOf(i)>=0,l=this.listOfSupressFields.indexOf(i)>=0||k;if(null,!l){void 0===d.sdataPath&&(d.sdataPath=h,d.sdataPathInDot=g);var m=f.lastIndexOf("--");if(m<0)this._addToListofControls(g,f,d.label,j,null,{path:d.sdataPath,dot:d.sdataPathInDot});else{var n=f.substring(m+2).toLowerCase(),o={};switch(n){case"choice":case"enum":o=d.collection;for(var p=0;p<o.length;p++){var q=this._onBlankValue(o[p].name,o[p].nameValue);q=this._onBlankValue(q,"item "+p),o[p].label=this._onBlankValue(o[p].label,q)}null!==o&&(o=o.filter(function(a){var b=a.name;if(void 0!==b){b=b.toLowerCase();var c=!e.editMode&&e.excludeOnNew.indexOf(b)>=0;return!(e.listOfSupressFields.indexOf(b)>=0||c)}return!0}),this._addToListofControls(g,"xs:enum",d.label,j,{text:"label",id:"value",data:o},{path:d.sdataPath,dot:d.sdataPathInDot}));break;case"list":case"type":if(null!==d.sub&&(o=d.sub.data?d.sub.data:d.sub),d.isCollection&&"child"===d.relationship)null!==o&&o.length>0&&o[0].sub&&(o=o[0].sub.filter(function(a){var b=a.name.toLowerCase(),c=!e.editMode&&e.excludeOnNew.indexOf(b)>=0;return!(e.listOfSupressFields.indexOf(b)>=0||c)}),o=new memory({idProperty:"value",data:o}),void 0===s.sdataPath&&(d.sdataPath=h),this._addToListofControls(g,"xs:grid","",j,{text:"label",id:"value",data:o},{path:d.sdataPath,dot:d.sdataPathInDot}));else for(var r=0;r<o.length;r++){var s=o[r],t=dString.substitute('"${0}":""',[s.name]);d.sdataPath?t="{"+t+"}":s.sdataPath=h,s.sdataPath=d.sdataPath.replace('""',t),s.sdataPathInDot=d.sdataPathInDot+"."+s.name,this.schema.push(s)}}}}}},_getProvidedData:function(a){var b=null;return void 0!==this.formData[a]&&null!==this.formData[a]&&(b=this.formData[a]),b},_addToListofControls:function(a,b,c,d,e,f){var g=this._assignControlBasedOffType(a,b.substring(3),d,e),h=this._setDisplayString(g,a),i=void 0===this.formNlsResource[a]||null===this.formNlsResource[a]?c:this.formNlsResource[a];i=void 0!==i&&null!==i?i:a;var j=this.saveIfValid;g.saveIfValid&&(j=g.saveIfValid),this.activeControls.push({control:g,label:i,name:a,display:h,Include:!0,sdataPath:f,template:"rowTemplate",isDom:!1,fieldClassAppendix:"",saveIfValid:j})},_setDisplayString:function(a,b){return this._displayControl(a,b)?"display":"display-none"},_displayControl:function(a,b){var c=["dataTypeData"],d=!0;return void 0!==b&&null!==b&&(d=c.indexOf(b)>=0),!d||void 0!==a.activeControls&&null!==a.activeControls&&a.activeControls.length>0},_blankString:function(a){return null===a||void 0===a||""===a.trim()},_onBlankValue:function(a,b){return this._blankString(a)?b:a},_assignControlBasedOffType:function(a,b,c,d){var e=this.permittedActions.indexOf("add")>=0;this.editMode&&(e=this.permittedActions.indexOf("edit")>=0);var f=this.permittedActions.indexOf("view")>=0&&!e,g=this.assignControlBasedOffOfName(a,b,c,d,f);if(null===g)switch(b.toLowerCase()){case"string":case"int":case"byte":case"date":g=new TextBox({shouldPublishMarkDirty:!1,disabled:f}),void 0!==c&&null!==c&&(g.textbox.value=c);break;case"boolean":g=new CheckBox({shouldPublishMarkDirty:!1,disabled:f}),void 0!==c&&null!==c&&g.setChecked(c);break;case"datetime":g=new DateTimePicker({id:"SDataForm_DateTimePicker_"+this.dumbDTControlCounterForId,displayDate:!0,displayTime:!0,shouldPublishMarkDirty:!1,disabled:f}),this.dumbDTControlCounterForId++;break;case"picklist":case"enum":g=new FilteringSelect({value:c,store:new memory({idProperty:d.id,data:d.data}),idProperty:d.id,searchAttr:d.text,shouldPublishMarkDirty:!1,required:!1,disabled:f});break;case"grid":g=this._createGridControl(a,b,c,d,f)}return g&&g.domNode&&domClass.remove(g.domNode,"dijitInline"),g},reLoadData:function(a){for(var b=0;b<this.activeControls.length;b++){var c=this.activeControls[b];if(null!==c.control){var d=c.name,e=c.control.declaredClass,f=this._getValueFromData(a,d);e.indexOf("DndSortList"),e.indexOf("TextBox")>=0&&(c.control.textbox.value=f),e.indexOf("TextArea"),e.indexOf("CheckBox")>=0&&(c.control.checked=f),e.indexOf("FilteringSelect"),e.indexOf("PropertyDropDown"),e.indexOf("_AbstractGrid")>=0&&(c.control.grid._setStore(dojo.data.ObjectStore(dojo.store.Memory({idProperty:"$key",data:this.formData[name]}))),c.control.grid.refresh(),c.control.grid.startup(),c.control.grid.onLoadComplete=function(){c.control.grid.resize()})}}},_getValueFromData:function(a,b){var c=a[b];switch(typeof c){case"object":return c;case"undefined":default:return null}},_moveActiveControlFromBackGroundToPage:function(a){
var b,c,d;if(a&&null===(d=this._CustomDisplay(a)))if(a.label=this._onBlankValue(a.label,"<br>"),b=new Simplate(this[a.template]),c=b.apply(a),d=domConstruct.toDom(c),this.attributeContainer.appendChild(d),a.control)if(a.control.type&&"Grid"===a.control.type){if(a.control&&a.control.type&&"Grid"===a.control.type){var e=this._findControllerDom("items");null!==e&&(lang.mixin(a.control.options,{placeHolder:e}),a.control=new GridView(a.control.options),dojoConnect.publish("sdata/form/setGrid",[a.control]),a.control.createGridView(),a.control.grid.onLoadComplete=function(){a.control.grid.resize()})}}else a.isDom?(domConstruct.place(a.control,d.lastElementChild.lastElementChild,"only"),a.control.className.indexOf("dijitCheckBox")>=0&&domClass.add(a.control.parentNode,"checkbox")):(domConstruct.place(a.control.domNode,d.lastElementChild.lastElementChild,"only"),a.control.domNode.className.indexOf("dijitCheckBox")>=0&&domClass.add(a.control.domNode.parentNode,"checkbox")),a.control.startup&&a.control.startup();else domConstruct.place("<br>",d.lastElementChild.lastElementChild,"only")},isValid:function(){for(var a=!0,b=0;b<this.activeControls.length;b++){var c=this.activeControls[b],d=c.control,e=null;if(null!==d){if(null===(e=this.customValidation(c))){var f=!0;"function"==typeof d.isValid&&d.isValid(!0),"function"==typeof d.onChanged&&d.onChanged(),void 0!==d.state&&void 0!==d.required&&(f=f&&"Error"!==d.state&&!("Incomplete"===d.state&&d.required)),f||d.set("state","Error"),a=a&&f}else a=a&&e;a&&d.saveIfValid&&null!==d.editMode&&void 0!==d.editMode&&(d.editMode&&d.saveIfValid.update||!d.editMode&&d.saveIfValid.insert)&&d.save(this.formBase)}}return a},cancel:function(a){var b=null;this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.offsetParent&&this.domNode.parentNode.offsetParent.id.indexOf("Dialog")>=0?b=this.domNode.parentNode.offsetParent.id:a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.offsetParent&&a.domNode.parentNode.offsetParent.id.indexOf("Dialog")>=0&&(b=a.domNode.parentNode.offsetParent.id),null!==b&&(dijit.byId(b).hideLoading&&dijit.byId(b).hideLoading(),dijit.byId(b).hide())},_grabCorrectElementAndPlace:function(a,b){for(var c=document.getElementsByName(b),d=c[0],e=!1,f=0;f<c.length&&!e;f++){var g=c[f].getBoundingClientRect();g.bottom+g.height+g.left+g.right+g.top+g.width>0&&(d=c[f],e=!0)}domConstruct.place(a.domNode,d,"only")},findDomAndHideDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display-none"),domClass.remove(b,"display"))},findDomAndShowDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display"),domClass.remove(b,"display-none"))},_findControllerDom:function(a,b){var c="div.fld[data-dojo-attach-point='${0}']";b&&(c="tr[data-dojo-attach-point='${0}']");var d=dString.substitute(c,[a]),e=null;this._DynamicSection?e=this._DynamicSection:this.domNode&&(e=this.domNode);var f=null;return f=e?query(d,e):query(d),void 0!==f&&null!==f&&void 0!==f.length&&null!==f.length&&f.length>0?f[0]:null},_showHideElementsByNames:function(a,b,c,d){if(lang.isArray(b))for(var e=0;e<b.length;e++){var f=b[e];a._showHideElementsByNamesHelper(a,f,c,d)}else a._showHideElementsByNamesHelper(a,b,c,d)},_showHideElementsByNamesHelper:function(a,b,c,d){var e=a._getIndexFromActivityListFromName(b);if(e>-1){var f=a.activeControls[e].control;if(a.activeControls[e].isDom||(f=f.domNode),null!==d&&void 0!==d)switch(d.toLowerCase()){case"parent":f=f.parentNode;break;case"grandparent":f=f.parentNode.parentNode}c?(a.domClass.add(f,"display-none"),a.domClass.remove(f,"display")):(a.domClass.add(f,"display"),a.domClass.remove(f,"display-none"))}},_adjustForValuesMatchingBooleanDefaultsMissing:function(a,b){void 0!==a&&void 0!==a[b]&&null!==this.dataTypeData&&void 0===this.dataTypeData[b]&&(this.dataTypeData[b]=!1)},_setParentDisplayClass:function(a,b){this._displayControl(a)?(domClass.remove(b,"display-none"),domClass.add(b,"display")):(domClass.remove(b,"display"),domClass.add(b,"display-none"))},getActiveValues:function(){for(var a={},b=0;b<this.activeControls.length;b++)lang.mixin(a,this._getActiveValue(this.activeControls[b]));if(lang.mixin(a,this._getActiveValuesAdjustments()),"object"==typeof this.hiddenValues)for(var c=0;c<this.hiddenValues.length;c++){var d=this.hiddenValues[c];lang.mixin(a,d)}return a},_getActiveValue:function(a){var b={};if(a.Include&&null!==a.control){var c=a.name,d=a.control.declaredClass;if(d.indexOf("DndSortList")>=0){var e=a.control.getSource(0);e&&(b=a.control.getASourcesContentsInString(e))}if(d.indexOf("TextBox")>=0&&(null!==(b=a.control.getValue())&&void 0!==b||(b="")),d.indexOf("TextArea")>=0&&(b="Template"===c?this._convertDotToLegacy(a.control.textbox.value):a.control.value),d.indexOf("DisplayName")>=0&&(b=a.control.getDetails()),d.indexOf("CheckBox")>=0&&(b=a.control.checked),d.indexOf("FilteringSelect")>=0&&(b=null===a.control.value?"":a.control.value),d.indexOf("ComboBox")>=0&&(b=null===a.control.value?"":a.control.value,"PickList"===c&&"000new"!==a.control.store.query(function(a){return a.name===b}).id&&(c="PickListName")),d.indexOf("PropertyDropDown")>=0){var f=a.control.entitySelected.displayedValue,g=f.split("."),h=g[g.length-1],i=g[g.length-2];void 0!==h&&(b=h),void 0!==i&&(b=i)}if(d.indexOf("GridView")>=0){var j=[],k={};if(k=a.control.getStore(),k.data){k=k.data;for(var l=0;l<k.length;l++){var m=k[l];if(void 0!==m){void 0!==m.undefined&&delete m.undefined;var n=this._oformData[c].filter(function(a){return a.$key===m.$key});void 0!==m.$key&&n.length<=0&&delete m.$key,void 0!==m.filter&&null===m.filter&&delete m.filter,void 0!==m.$updated&&delete m.$updated,void 0!==m.$httpStatus&&delete m.$httpStatus,void 0!==m.$etag&&delete m.$etag,void 0!==m.$descriptor&&delete m.$descriptor,j.push(m)}}}b=j}var o=[c];return a.sdataPath&&a.sdataPath.dot&&(o=a.sdataPath.dot.split(".")),this._setToObjectPath(o,b,c,1,!1)}return null},_setToObjectPath:function(a,b,c,d,e){var f,g='"${0}":${1}',h=d,i="",j={propName:c,path:a,builtUpPath:JSON.stringify(b),skip:1,stringify:e,lineEscape:""},k=this._changeObjectPathParameters(a,b,c,d,e);null!==k&&(j=lang.mixin(j,k),j.stringify&&(g="${0}:${1}"));for(var l=j.path.length-j.skip;l>=h;l--)f=j.path[l],i=j.stringify?Array(l).join("\\\\"):"",void 0!==f&&(0!==j.builtUpPath.indexOf("{")&&l!==j.path.length-j.skip&&(j.builtUpPath="{"+j.builtUpPath+"}"),j.stringify&&(f=dString.substitute("${0}${1}${2}${0}${1}",[i,j.lineEscape,f]),l==h&&(j.builtUpPath=dString.substitute("${0}${1}${2}${0}${1}",[i,j.lineEscape,j.builtUpPath]))),j.builtUpPath=dString.substitute(g,[f,j.builtUpPath]));return 0!==j.builtUpPath.indexOf("{")&&0!==j.builtUpPath.indexOf("[")&&(j.builtUpPath="{"+j.builtUpPath+"}"),JSON.parse(j.builtUpPath)},_getIndexFromActivityListFromName:function(a){for(var b=-1,c=0;c<this.activeControls.length;c++){if(this.activeControls[c].name===a)return c}return b},_checkIfDuplicate:function(a,b,c){var d=!1,e=new Sage.SData.Client.SDataResourceCollectionRequest(a);if(void 0!==c&&null!==c||(c=b.name),this.formBase){e.setResourceKind(this.formBase);for(var f=this.duplicateCheck.filter(function(a){return a.field===c}),g=0;f.length&&g<f.length;g++){var h=f[g],i=this._getActiveValue(b);void 0!==i&&null!==i&&i!=={}&&(e.setQueryArg("where",dString.substitute(h.where,[h.ignoreCase?i[c].toLowerCase():i[c]])),e.setQueryArg("startIndex",0),e.setQueryArg("count",1),e.read({async:!1,scope:this,success:function(a){void 0!==a&&void 0!==a.$resources&&1==a.$resources.length?(d=!0,b.control.invalidMessage=dString.substitute(this.formNlsResource.picklistAlreadyExists,[a.$resources[0].name]),b.control.set("state","Error")):d=!1},failure:function(a){d=!0,b.control.invalidMessage=dString.substitute("Error: ${0}",["Picklist Name:"]),b.control.set("state","Error")}}))}}return d},setControlValue:function(a,b){var c=this.activeControls.filter(function(b){return b.name===a}),d=null;c.length>0&&(d=c[0]),null!==d&&d.control.set("value",b)}});return widget})},"Sage/UI/Controls/SimpleTextarea":function(){define(["dijit/form/SimpleTextarea","dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/json","dojo/date/locale","dojo/has"],function(a,b,c,d,e,f,g){return b("Sage.UI.Controls.SimpleTextarea",[a],{baseClass:"dijitTextBox dijitTextArea sageTextArea",templateString:"<div><textarea ${!nameAttrSetting} class='none' dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea></div>",hotKey:"",defaultValue:"",multiLineMaxLength:"",shouldPublishMarkDirty:!0,_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},constructor:function(a){this.maxLength=a.multiLineMaxLength,this.userDateStamp=!(!a.userdatestamp||"true"!==a.userdatestamp);var b="";a.textareaclass?b=a.class?a.class+" "+a.textareaclass:a.textareaclass:a.class&&(b=a.class,a.class=""),this.templateString=this.templateString.replace("class='none'",b.length>0?"class='"+b+"'":""),this.connect(this,"onFocus",this.onFocus)},postMixInProperties:function(){this.inherited(arguments),!this.defaultValue&&this.srcNodeRef&&(this.defaultValue=this.srcNodeRef.value)},buildRendering:function(){if(this.inherited(arguments),(g("ie")||g("trident"))&&this.domNode&&this.domNode.childElementCount>0)for(var a=0;a<this.domNode.childElementCount;a++){var b=this.domNode.childNodes[a];b&&b instanceof HTMLTextAreaElement&&(b.defaultValue||(b.defaultValue=this.defaultValue))}},onFocus:function(a){if(""===this.getValue("value")&&this.userDateStamp){var b=Sage.Services.getService("UserOptions");if(b){var d="EGL_USER_OPTION_UserDateTimeStamp",e=this._getFromSessionStorage(d),f=!1;null!==e&&void 0!==e?this._assignUserDateTimeStamp(e):b.get("UserDateTime","CustomerService",c.hitch(this,function(a){a&&a.value&&(f="T"===a.value,this._assignUserDateTimeStamp(f),this._addToSessionStorage(d,f))}),null,null,!0)}}},onChange:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.inherited(arguments)},_getFromSessionStorage:function(a){var b,c=sessionStorage.getItem(a);return null!==c&&void 0!==c&&(b=e.parse(c)),b},_addToSessionStorage:function(a,b){sessionStorage.setItem(a,e.stringify(b))},_assignUserDateTimeStamp:function(a){if(a){var b=Sage.Services.getService("ClientContextService"),c=b.containsKey("userPrettyName")?b.getValue("userPrettyName"):b.getValue("userID"),e=b.containsKey("userTimeZoneKey")?b.getValue("userTimeZoneKey"):"",g=b.containsKey("userDateFmtStr")?b.getValue("userDateFmtStr"):Sys.CultureInfo.CurrentCulture.dateTimeFormat.FullDateTimePattern,h=f.format(new Date,{datePattern:d.substitute("${0}",[g])});this.setValue(d.substitute("${0} ${1} (${2})",[c,h,e]))}}})})},"Sage/UI/Controls/DndSortList":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/dnd/Source","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/store/Observable","dojo/store/Memory","dojo/string"],function(_Widget,_Templated,declare,source,lang,domClass,domConstruct,observable,memory,dojoString){var widget=declare("Sage.UI.Controls.DndSortList",[_Widget,_Templated],{widgetsInTemplate:!0,ListNamesIds:[],ListOfItems:null,horizontal:!1,widgetTemplate:new Simplate(eval(["<div><div dojoattachpoint='DndSortList' /></div>"])),headerTemplate:new Simplate(["<div dojoattachpoint='{%= $.id %}_ListContainer'><div>{%= $.name %}</div><ul dojoattachpoint='{%= $.id %}_List' style='min-height:50px'></div>"]),listBulletTemplate:new Simplate(["<li class='dojoDndItem'>{%= $.Item.name %}</li>"]),sortList:[],constructor:function(a){a.ListNamesIds&&(this.ListNamesIds=a.ListNamesIds),a.ListOfItems?this.ListOfItems=new observable(new memory({data:a.ListOfItems})):this.ListOfItems=new observable(new memory),a.horizontal&&(this.horizontal=a.horizontal)},postCreate:function(){this.sortList=[];for(var a=0;a<this.ListNamesIds.length;a++){for(var b=this.ListNamesIds[a],c=this.headerTemplate.apply(b),d=domConstruct.toDom(c),e=d.children[1],f=new source(e,{horizontal:this.horizontal,simpleSelection:!0}),g=this.ListOfItems.filter(function(a){return a.list===b.id}),h=[],i=0;i<g.length;i++){var j=g[i];h.push({data:j.Item.name.trim()})}f.insertNodes(!1,h),this.sortList.push({list:b.id,data:f}),this.DndSortList.appendChild(d)}},updateListOfItems:function(a,b){for(var c=0;c<this.sortList.length;c++){for(var d=this.sortList[c],e=a.filter(function(a){return!1===a.assigned}),f=d.data.getAllNodes().map(function(a){return d.data.getItem(a.id).data}),g=[],h=0;h<e.length;h++){for(var i=e[h],j=!1,k=this._exists(i),l=0;l<f.length;l++){var m=f[l];m===i.Item.name&&!k&&b&&(a[i.id].assigned=!0,g.push({data:m.trim()}),j=!0)}j||d.list!==i.list||k&&!b||(a[i.id].assigned=!0,i.Item.name=i.Item.name.trim(),g.push({data:i.Item.name}),k||this.ListOfItems.push(i))}b&&d.data.selectAll().deleteSelectedNodes(),d.data.insertNodes(!1,g)}},_exists:function(a){for(var b=0;b<this.ListOfItems.length;b++){if(this.ListOfItems[b].Item.name.trim()===a.Item.name.trim())return!0}return!1},getASourcesContentsInList:function(a){return a.getAllNodes().map(function(b){return a.getItem(b.id).data})},getASourcesContentsInString:function(a){for(var b="",c="",d=this.getASourcesContentsInList(a),e=0;e<d.length;e++)b=dojoString.substitute("${0}${1}${2}",[b,c,d[e]]),c=", ";return b},getSource:function(a){for(var b=0;b<this.sortList.length;b++){var c=this.sortList[b];if(a===c.list)return c.data}}});return widget})},"Sage/UI/Forms/PickListManagerForm":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/aspect","dojo/string","dojo/store/Memory","Sage/UI/Dialogs","Sage/UI/Forms/FormFromSData","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","Sage/Utility/_LocalStorageMixin","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/i18n!./nls/FormFromSData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return b("Sage.UI.Forms.PickListManagerForm",[i,l],{excludeOnNew:[],listOfSupressFields:["createuser","createdate","modifydate","modifyuser"],dialogs:h,_itemsGrid:null,allowViaAddRule:"Administration/Picklist/Add",allowViaEditRule:"Administration/Picklist/Edit",allowViaViewRule:"Administration/Picklist/View",allowViaDeleteRule:"Administration/Picklist/Delete",formBase:"picklists",duplicateCheck:[{field:"name",where:"lower(name) eq '${0}'",ignoreCase:!0}],saveIfValid:{update:!0,insert:!0},_cachedListOfActiveLanguages:"PickList_ActiveLanguages",_storageNameSpace:"PickListData",assignControlBasedOffOfName:function(a,b,c,d,e){var f=null;switch(a.toLowerCase()){case"name":f=new j({shouldPublishMarkDirty:!1,required:!0,disabled:e}),void 0!==c&&null!==c&&(f.textbox.value=c);break;case"defaultlanguage":f=new j({shouldPublishMarkDirty:!1,disabled:this.editMode}),void 0!==c&&null!==c&&(f.textbox.value=c)}return f},_createGridControl:function(b,d,e,f,g){var h=null;switch(b.toLowerCase()){case"items":for(var i=[],k=[],l=0;l<f.data.data.length;l++){var m=f.data.data[l],n=null,p={},q=this;switch(m.type.toLowerCase()){case"xs:boolean":this.editMode&&(n={editor:"radio",editorArgs:{disabled:g,shouldPublishMarkDirty:!1,name:m.name,onchange:function(a){a.preventDefault();var b=q._getRowIdFromCell(this);if(b){q.formData.items.forEach(function(a){a.isDefault=!1});q.formData.items.find(function(a){return a.$key===b.innerText}).isDefault=!0;var c=q._getGrid(q);if(c){var d=c.store.data;d.forEach(function(a){a.isDefault=!1});d.find(function(a){return a.$key===b.innerText}).isDefault=!0}}}},width:150});break;default:n="languageCode"===m.name?this.formData.defaultLanguage?{editor:j,editorArgs:{disabled:!0,shouldPublishMarkDirty:!1,name:m.name},width:150}:null:"code"===m.name?{editor:j,editorArgs:{isValid:this.formData.defaultLanguage?function(){return!0}:function(a){if(""===this.value.trim())return this.set("message",o.PickListItemCodeRequiredeException),this.set("state","Error"),!1;var b=q._getGrid(q);q._getRowIdFromCell(this.domNode);return!(b.store.query({code:this.value}).length>1&&(this.set("message",this.invalidMessage),this.set("state","Error"),1))},invalidMessage:o.PickListItemCodeUniqueException,disabled:g,shouldPublishMarkDirty:!1,name:m.name},width:150}:{editor:j,editorArgs:{disabled:g,shouldPublishMarkDirty:!1,name:m.name},width:150}}null!==n&&(p={field:m.name,label:"number"===m.name?this.formNlsResource[m.name]:m.label,editable:!g&&"languageCode"!==m.name,hidden:!1,unhidable:!1,editOn:"",autoSave:!0,id:m.name,width:150},c.mixin(p,n),i.push(p),k.push(m.name))}i.push({label:"",field:"$key",unhidable:!0,editable:!1,hidden:!0,id:"$key"});var r={store:dojo.data.ObjectStore(dojo.store.Memory({data:[]}))};this.formData[b]&&(r={store:dojo.data.ObjectStore(dojo.store.Memory({idProperty:"$key",data:this.formData[b]}))});var s=f.label?f.label:this.formNlsResource[b],t=[];g||(t.push("add"),t.push("delete")),h={type:"Grid",options:{tools:t,gridLabel:s,editable:!0,selectionMode:"single",rowSelection:!0,columnHiding:!0,showRecordCount:!0,addNew:c.partial(this._addItemToGrid,this),deleteSelected:c.partial(this._removeItemFromGrid,this),parent:this,shouldPublishMarkDirty:!1,columns:i,classNames:"items"}};var u=this.formData.defaultLanguage||"";this.setControlValue("defaultLanguage",u),"string"==typeof u&&""!==u.trim()&&r.store.setData(r.store.query({languageCode:u})),h.options=c.mixin(h.options,r),a.subscribe("sdata/form/setGrid",this,this._setItemsGrid)}return h},_getRowIdFromCell:function(a){var b=a.closest?a.closest("tr"):a.parentElement.parentElement;return b&&"tr"===b.tagName.toLowerCase()?($(".field--key",b)||{})[0]||null:null},_regenerateCellId:function(a,b,c){return"#"+a.id+"-row-"+b+" td.field-"+c},_getGrid:function(a){var b=((a.activeControls||[]).filter(function(a){return"items"===a.name})[0]||{}).control;if(b){if(b.store)return b;var c=b.grid;if(c)return c}return null},_getItemFromGridsStore:function(a,b){var c=a.store;if(c){var d=c[b];if(d&&d>=0&&c[d])return c[d]}return null},_setItemsGrid:function(a){"items"===a.className&&(this._itemsGrid=a)},_addItemToGrid:function(a){for(var b=-1,c=0;c<this.store.data.length;c++){var d=this.store.data[c];d.number>b&&(b=d.number)}b=Number(b)+1;for(var e={},f=0;f<this.columns.length;f++){var g=this.columns[f];switch(g.field){case"number":case"$key":e[g.field]=b;break;case"isDefault":e[g.field]=!1;break;default:"languageCode"===g.field?e[g.field]=a.formData.defaultLanguage||"":e[g.field]=""}}this.store.add(e),this.refresh()},_removeItemFromGrid:function(a){var b,c,d=this.getSelectedRowData(),e=void 0===d||null===d||0===d.length,f=this.store.idProperty;if(e)return void a.dialogs.showWarning(a.gridNlsResource.noSelectionsText,"Infor CRM");for(var g=!1,h=!1,i=0;i<d.length;i++){var j=d[i];c=this.store.data.length,j?void 0!==(b=j[f])&&(this.store.remove(b),c>this.store.data.length&&(g=!0,i--)):h=!0}if(h)for(var k=0;k<this.store.data.length;k++){var l=this.store.data[k];b=l[f],c=this.store.data.length,b&&!0===this.grid._grid.selection[b]&&(this.store.remove(b),c>this.store.data.length&&(g=!0,i--))}g?this.refresh():a.dialogs.showWarning(a.gridNlsResource.noSelectionsText,"Infor CRM")},_changeObjectPathParameters:function(a,b,c,d,e){"items"===c&&"$resources"!==a[a.length-1]&&a.push("$resources");for(var f=a[a.length-1],g=a.length-2;g>0;g--)"$resources"===f&&f===a[g]&&a.splice(g,1);return{propName:c,path:a,builtUpPath:JSON.stringify(b),skip:d,stringify:e,lineEscape:"items"===c?'"':""}},_save:function(b){b&&b.type&&"click"===b.type&&(b=null);var d={},e=!1;if(this.isValid()){d=c.mixin(this.formData,this.getActiveValues()),d.items&&(d.items.$resources=c.mixin(this._oformData.items,d.items.$resources),d.items.$deleteMissing=!0);var g=Sage.Data.SDataServiceRegistry.getSDataService("system"),h=new Sage.SData.Client.SDataSingleResourceRequest(g).setResourceKind("picklists");h.setQueryArg("language",cookie.getCookie("SLXLanguageSetting"));var i={isSecurityManager:!0,scope:this,format:"json",ignoreETag:!this.editMode,async:!1,success:function(c){if(e=!0,void 0===b||null===b||this.formBase===b){a.publish("Sage/picklist/form/reload",c);var d=f.substitute(this.formNlsResource.messageOnSave,[c.name]);this.dialogs.showWarning(d,"Infor CRM")}},failure:function(a,b){var c=JSON.parse(a.response),d=f.substitute("${0}(${1})",[a.statusText,a.status]);c.length>0&&void 0!==c[0].message&&(d=f.substitute("${0}: {${1}",[d,c[0].message])),e=!1}},j="create";this.editMode&&(h.setResourceSelector(f.substitute("'${0}'",[d.$key])),j="update"),h[j](d,i)}return e},customValidation:function(a){var b=null,c="";switch(void 0!==a.name&&(c=a.name.toLowerCase()),c){case"":b=!1;break;case"items":var d=this._getGrid(this);if(d)for(var e=$(".dgrid-row .field-code .dijitTextBox.dijitValidationTextBox",d.domNode),f=0;f<e.length;f++){var g=dijit.registry.byNode(e[f]);if(g){var h=!0;if("function"==typeof g.isValid&&(h=g.isValid(!0)),"function"==typeof g.onChanged&&g.onChanged(),"boolean"==typeof h&&!1===h)return!1}}return!0;case"name":this.editMode||""!==a.control.value.trim()&&(b=!this._checkIfDuplicate(Sage.Data.SDataServiceRegistry.getSDataService("system"),a))}return b}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/DisplayName":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dojo/_base/lang","dojo/_base/declare","dojo/text!./templates/DisplayName.html","dojo/i18n!./nls/AddEditDialog","Sage/UI/Controls/TextBox","dojo/dom-class","dojo/dom-construct"],function(_Widget,_Templated,dojoString,lang,declare,template,nlsResources,crmTextBox,domClass,domConstruct){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.DisplayName",[_Widget,_Templated],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,_nlsResources:nlsResources,_detailUtility:null,_nameField:null,_displayField:null,_grdField:null,_trigger:null,_GetLocalsQuery:null,_baseLanguage:"en-us",_updateFromGrid:!1,_editMode:!1,display:null,name:null,_dataStore:null,constructor:function(a){this._baseLanguage=cookie.getCookie("SLXLanguageSetting"),a.editMode&&(this._editMode=a.editMode),a.dataStore&&(this._dataStore=a.dataStore),a.query&&(this._GetLocalsQuery=a.query),a.dUtility&&(this._detailUtility=a.dUtility),a.values&&(a.values.display&&(this.display=a.values.display),a.values.name&&(this.name=a.values.name)),this.display&&this._createDisplayController(this.display),this.name&&this._createNameController(this.name)},postCreate:function(){this.lblDisplayName.innerHTML=this._nlsResources.lblDisplay,this.displayNameTxtCntrl.appendChild(this._displayField.domNode),domClass.add(this._TriggerSection,"display-none"),this.lblName.innerHTML=this._nlsResources.lblName,this.NameCntrl.appendChild(this._nameField.domNode)},_createDisplayController:function(a){var b=a.data,c=a.validation,d=a.disabled,e=a.invalidMessage;"function"==typeof a.mapDisplayToName&&(this.mapDisplayToName=a.mapDisplayToName),"function"!=typeof c&&(c=this._displayNameValidator),"string"!=typeof e&&(e=""),"boolean"!=typeof d&&(d=!1);var f=this;this._displayField=new crmTextBox({shouldPublishMarkDirty:!1,validator:c,invalidMessage:e,disabled:d,onChange:function(){""===f._nameField.textbox.value&&(f._nameField.textbox.value=f.mapDisplayToName(this.value,f),f._nameField.isValid(!0),f._nameField.onChange())}});var g="";b&&(g=b),this._displayField.textbox.value=g},_displayNameValidator:function(a,b){return!0},_createNameController:function(a){var b=a.data,c=a.validation,d=a.disabled,e=a.invalidMessage;"function"!=typeof c&&(c=this._nameValidator),"string"!=typeof e&&(e=""),"boolean"!=typeof d&&(d=!1);this._nameField=new crmTextBox({shouldPublishMarkDirty:!1,required:!0,validator:c,invalidMessage:e,disabled:d});var f="";b&&(f=b),this._nameField.textbox.value=f},_nameValidator:function(a,b){var c="^([a-z]|[A-Z]|_)(\\w)*",d=a.match(c,"g");return!!d&&(lang.isArray(d),d[0].length==a.length)},_trimWhiteSpace:function(a){return a.replace(/\s+/g,"")},_cmdTrigger:function(a){this._updateFromGrid=!0,this.checked?(this.innerHTML=a._nlsResources.hideTranslations,domClass.add(a.displayNameTxtCntrl,"display-none"),domClass.remove(a.displayNameTxtCntrl,"display"),domClass.add(a.displayNameGrdCntrl,"display"),domClass.remove(a.displayNameGrdCntrl,"display-none"),a._shrinkGridAsNeeded(),a._grdField.grid.resize()):(this.innerHTML=a._nlsResources.showTranslations,domClass.add(a.displayNameTxtCntrl,"display"),domClass.remove(a.displayNameTxtCntrl,"display-none"),domClass.add(a.displayNameGrdCntrl,"display-none"),domClass.remove(a.displayNameGrdCntrl,"display")),this.checked=!this.checked},_createCustomValidationTextBox:function(){var a=this;return declare("Sage.MainView.EntityMgr.AddEditEntityFilter.customValTxtBx",Sage.UI.Controls.TextBox,{shouldPublishMarkDirty:!1,placeHolder:"Enter Value",disabled:!0,onChange:function(b){var c=!0,d=a._grdField.grid.store.index[this.domNode.parentNode.parentNode.children[1].innerHTML];d<0&&(d=a._grdField.grid.store.index[a._baseLanguage],c=!1),a._grdField.grid.store.data[d].display=this.value,c&&a._grdField.grid.store.data[d].code===a._baseLanguage&&(a._displayField.textbox.value=a._grdField.grid.store.data[d].display)}})},_createRequest:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(this._detailUtility.service);return d.setResourceKind(this._GetLocalsQuery.resourceKind),d.setQueryArg("where",dojoString.substitute("lower(${0}) eq '${1}'",[this._GetLocalsQuery.name,a])),null!==b&&d.setQueryArg("select",b),c&&d.setQueryArg("language",c),d.setQueryArg("startIndex",0),d.setQueryArg("count",1),d},isValid:function(a){var b=!1;if(!this._nameField.disabled){var c=!this._nameField.isValid(!0);b=b||c,void 0!==this._nameField.state&&void 0!==this._nameField.required&&(c=c||"Error"===this._nameField.state||"Incomplete"===this._nameField.state&&this._nameField.required,b=b||c),c&&this._nameField.set("state","Error"),this._nameField.onChanged()}if(!this._displayField.disabled){var d=!this._displayField.isValid(!0);b=b||d,this._displayField.onChanged(),void 0!==this._displayField.state&&void 0!==this._displayField.required&&(d=d||"Error"===this._displayField.state||"Incomplete"===this._displayField.state&&this._displayField.required,b=b||d),d&&this._displayField.set("state","Error"),this._displayField.onChanged()}if(!b){var e=this;if(this._editMode||void 0===this.dataStore||null===this.dataStore){this._createRequest(this._nameField.textbox.value.toLowerCase(),null,this._baseLanguage).read({async:!1,scope:this,success:function(c){a&&void 0!==c&&void 0!==c.$resources&&1==c.$resources.length?(b=!0,this._nameField.invalidMessage=dojoString.substitute("${0} ${1} ${2}",[e.lblName.innerHTML,e._nlsResources.notUniqueFor,e._GetLocalsQuery.entityName]),this._nameField.set("state","Error")):b=!1},failure:function(a){b=!0,this._nameField.invalidMessage=dojoString.substitute("${0} ${1} ${2}",[e.lblName.innerHTML,e._nlsResources.notUniqueFor,e._GetLocalsQuery.entityName]),this._nameField.set("state","Error")}})}else for(var f=this.dataStore.query(),g=0;g<f.length;g++)if(this._nameField.value===f[g].propertyName){this._nameField.invalidMessage=dojoString.substitute("${0} ${1}",[e.lblName.innerHTML,e._nlsResources.notUnique]),this._nameField.set("state","Error"),b=!0;break}}return!b},getDetails:function(){var a={};return a[this._GetLocalsQuery.displayName]=this._displayField.textbox.value,a[this._GetLocalsQuery.name]=this._nameField.textbox.value,a}});return widget})},"Sage/MainView/EntityMgr/EntityWizard/AddEditEntity":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/AddEditEntity.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblSure">Are you sure ?</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblThisStepCreateEntity">Completing this step will create the entities and necessary schema</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table style="padding-left:20px; padding-top:20px;">\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold; text-align: right;" data-dojo-attach-point="lblEntity">Entity : </label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="createEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="vertical-align:top; padding-top:15px;text-align: right;">\r\n                        <span><label style="font-weight:bold;" data-dojo-attach-point="lblProperties">Properties : </label></span>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <ul class="properties" style="padding-left:0;"></ul>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelatedEntity"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relatedEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelationType"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relationType"></label>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/AddEditEntity.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","dijit/registry","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return a("Sage.MainView.EntityMgr.EntityWizard.AddEditEntity",[e],{_dialog:null,id:"dlgAddEditEntity",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.AddEditEntity,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this.createEntity.innerHTML=" "+this.entityDetails.entityName,this.entityDetails.relatedEntity&&(this.lblRelatedEntity.innerHTML=this._nlsResources.lblRelatedEntity,this.lblRelationType.innerHTML=this._nlsResources.lblRelationType,this.relatedEntity.innerHTML=" "+this.entityDetails.relatedEntity,this.relationType.innerHTML=" "+this.entityDetails.relationType),this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblSure.innerHTML=this._nlsResources.lblSure,this.lblThisStepCreateEntity.innerHTML=this._nlsResources.lblThisStepCreateEntity,this.lblEntity.innerHTML=this._nlsResources.lblEntity,
this.lblProperties.innerHTML=this._nlsResources.lblProperties,this.btnBack.set("label","< "+this._nlsResources.lblBack),this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel),l.mixin(this._dialog,new k);for(var a=$(".properties"),b=0;b<this.entityDetails.data.length;b++)$("<li>"+this.entityDetails.data[b].displayName+"</li>").appendTo(a)},isValid:function(){return this.Form.validate()},_btnBack_OnClick:function(){var a=dijit.byId("dlgAddEditEntity");this._dialog.hide(),a.destroyRecursive(),n.publish("/entityController/entityWizard/previousStep",this._currentStep)},createOwnerRelation:function(a,b){var c={};c.cardinality="M:1",c.cascadeOption="SaveUpdate",c.parentEntity={$key:this.entityDetails.entityName},c.childEntity={$key:"Owner"},c.parentProperty={propertyName:"Owner",displayName:"Owner",isIncluded:!0},c.childProperty={propertyName:this.entityDetails.entityName,displayName:this.entityDetails.entityDisplayName,isIncluded:!1};for(var e,f=0;f<a.length;f++)if("SeccodeId"===a[f].propertyName){e=a[f].id;break}c.columns={$resources:[{parentPropertyId:e,childPropertyId:this.entityDetails.ownerId}]},new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("metadata")).setResourceKind(d.substitute("relationships")).create(c,{async:!1,success:function(a){},failure:function(a){b.entityDetails.ownerStatus=b._nlsResources.lblErrorRelation+" Owner !"}})},_btnNext_OnClick:function(){var a=this,b=h.pluralize(this.entityDetails.entityName),c=h.pluralize(this.entityDetails.entityDisplayName),e=new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("metadata")).setResourceKind(d.substitute("entities")),f={name:this.entityDetails.entityName,tableName:this.entityDetails.entityName.toUpperCase(),displayName:this.entityDetails.entityDisplayName,displayNamePlural:c,isDynamic:!0,properties:{$resources:this.entityDetails.data},package:{$key:"SalesLogix Application Entities"},sdata:{pathName:h.pluralize(this.entityDetails.entityName.toLowerCase())},stringExpression:"${"+this.entityDetails.entityName+"Id}"};"1:1"==this.entityDetails.relationType?(f.isExtension=!0,f.extendedEntity={$key:this.entityDetails.relatedEntity}):f.isExtension=!1,this._dialog.showLoading(),e.create(f,{success:function(e){this.entityDetails.status=a._nlsResources.lblSuccessMsg;var f=e.properties.$resources;if("1:1"!==a.entityDetails.relationType&&this.createOwnerRelation(f,a),"1:M"===a.entityDetails.relationType){var g={};g.cardinality="1:M",g.cascadeOption="SaveUpdate",g.parentEntity={$key:a.entityDetails.relatedEntity},g.childEntity={$key:a.entityDetails.entityName},g.parentProperty={propertyName:b,displayName:c,isIncluded:!0},g.childProperty={propertyName:a.entityDetails.relatedEntity,displayName:this.entityDetails.relatedEntityDispName,isIncluded:!0};for(var h,i=0;i<f.length;i++)if(f[i].propertyName===a.entityDetails.relatedEntity+"Id"){h=f[i].id;break}g.columns={$resources:[{parentPropertyId:a.entityDetails.relatedPropertyId,childPropertyId:h}]},new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("metadata")).setResourceKind(d.substitute("relationships")).create(g,{success:function(b){a._dialog.hideLoading(),a._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep)},failure:function(b){a.entityDetails.selectedRelStatus=a._nlsResources.lblErrorRelation+" "+a.entityDetails.relatedEntity+" !",a._dialog.hideLoading(),a._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep)},scope:a})}else a._dialog.hideLoading(),a._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep);var k=m.byId("list");k&&k._listGrid._refresh()},failure:function(b){this.entityDetails.status=a._nlsResources.lblErrorMsg,this._dialog.hideLoading(),this._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep)},scope:this})}})})},"Sage/MainView/EntityMgr/EntityWizard/Status":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/Status.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment"],function(a,b,c,d,e,f,g,h,i){return a("Sage.MainView.EntityMgr.EntityWizard.Status",[e],{id:"dlgStatus",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.EntityDetails,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this.statusLabel.innerHTML=this.entityDetails.status,this.entityDetails.selectedRelStatus&&(this.selectedRelStatus.innerHTML=this.entityDetails.selectedRelStatus),this.entityDetails.ownerStatus&&(this.ownerStatus.innerHTML=this.entityDetails.ownerStatus),this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblCreateEntity.innerHTML=this._nlsResources.lblCreateEntity,this.lblStatus.innerHTML=this._nlsResources.lblStatus,this.btnFinish.set("label",this._nlsResources.lblFinish)},_btnFinish_OnClick:function(){this._dialog.hide(),this.finishWizard()},isValid:function(){return this.Form.validate()},destroy:function(){this.inherited(arguments)}})})},"Sage/Array":function(){define([],function(){return void 0===Array.prototype.swap&&(Array.prototype.swap=function(a,b){if(!(a>this.length||b>this.length)){var c=this[a];return this[a]=this[b],this[b]=c,this}}),void 0===Array.prototype.getIndexByProp&&(Array.prototype.getIndexByProp=function(a,b){for(var c=0,d=this.length;c<d;c++)if(b&&"key"===b){if(a in this[c])return c}else if(b&&"value"===b)for(var e in this[c])if(this[c].hasOwnProperty(e)&&this[c][e]===a)return c}),void 0===Array.prototype.placeByAttr&&(Array.prototype.placeByAttr=function(a,b){var c=!1;if(!this.length)return void this.push(a);for(var d=0,e=this.length;d<e;d++)if(this[d][b]>=a[b]){c=!0,this.splice(d,0,a);break}c||this.push(a)}),void 0===Array.prototype.removeByAttr&&(Array.prototype.removeByAttr=function(a,b){if(this.length)for(var c=0,d=this.length;c<d;c++)if(this[c][a]===b){this.splice(c,1);break}}),void 0===Array.prototype.filter&&(Array.prototype.filter=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array})},"Sage/_ConfigurationProvider":function(){define(["dojo/_base/declare"],function(a){var b=a("Sage._ConfigurationProvider",null,{_connects:null,_subscribes:null,constructor:function(a){dojo.mixin(this,a),this._connects=[],this._subscribes=[]},set:function(a,b){this["_"+a]=b},get:function(a){return this["_"+a]},requestConfiguration:function(a){},onConfigurationChange:function(){},destroy:function(){dojo.forEach(this._connects,function(a){dojo.disconnect(a)}),dojo.forEach(this._subscribes,function(a){dojo.unsubscribe(a)}),this.uninitialize()},uninitialize:function(){}});a("Sage.StaticConfigurationProvider",[b],{createConfiguration:function(){var a={};for(var b in this)this.hasOwnProperty(b)&&!/^_/.test(b)&&(a[b]=this[b]);return a},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.createConfiguration(a),a,this)}});return b})},"Sage/Data/main":function(){define(["Sage/Data/BaseSDataStore","Sage/Data/GroupLayoutSingleton","Sage/Data/WritableStore","Sage/Data/ProxySDataStore","Sage/Data/QBTreeStoreModel","Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","Sage/Data/SingleEntryPropertySDataStore","Sage/Data/SingleEntrySDataStore","Sage/Data/SummaryViewDataManager","Sage/Data/WritableSDataStore"],function(){})},"Sage/Data/GroupLayoutSingleton":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/json"],function(a,b,c,d,e,f){return a("Sage.Data.GroupLayoutSingleton",null,{data:{},_fetchCache:{},_registeredOnSuccess:{},_registeredOnFailure:{},_baseCacheKey:"GROUPLAYOUT_",constructor:function(){},getGroupLayout:function(a,b,e,g){var h=d.getSDataService("system"),i=new Sage.SData.Client.SDataSingleResourceRequest(h),j=this._registeredOnSuccess[g],k=this._registeredOnFailure[g],l=this._baseCacheKey+g,m=null;if("LOOKUPRESULTS"!==g&&(m=sessionStorage.getItem(l)),m&&(this.data[g]=f.parse(m)),this.data[g])return void("function"==typeof b&&b(this.data[g]));j||(this._registeredOnSuccess[g]=[],j=this._registeredOnSuccess[g]),k||(this._registeredOnFailure[g]=[],k=this._registeredOnFailure[g]),j.push(b),k.push(e),this._fetchCache[g]||(this._fetchCache[g]=!0,i.setResourceKind("groups"),i.setResourceSelector(a),i.setQueryArg("include","layout,layout/dateTimeType,tableAliases"),i.read({success:c.hitch(this,this._onSuccess,g),failure:c.hitch(this,this._onFailure,g)}))},clearCache:function(){var a=Object.keys(sessionStorage),c=new RegExp("^"+this._baseCacheKey),d=b.filter(a,function(a){return null!==a.match(c)});b.forEach(d,function(a){sessionStorage.removeItem(a)}),this.data={}},_onSuccess:function(a,c){var d=this._registeredOnSuccess[a];d&&b.forEach(d,function(a){"function"==typeof a&&a(c)}),"LOOKUPRESULTS"!==a&&(this.data[a]=c),sessionStorage.setItem(this._baseCacheKey+a,f.stringify(c)),this._doneFetching(a)},_onFailure:function(a,c){var d=this._registeredOnFailure[a];d&&b.forEach(d,function(a){"function"==typeof a&&a(c)}),this._doneFetching(a)},_doneFetching:function(a){this._registeredOnSuccess[a]=[],this._registeredOnFailure[a]=[],this._fetchCache[a]=!1}})})},"Sage/Data/ProxySDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(a,b,c){return c("Sage.Data.ProxySDataStore",a,{constructor:function(a){this.singleResource=null,this._request=null,this._hasValidService=void 0!==this.service},getCollectionRequestObj:function(a){if(!this._hasValidService)return!1;var b=this.inherited(arguments);if("function"==typeof this.getResourcePredicate){var c=b.uri.getPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex)?Sage.SData.Client.SDataUri.ResourcePropertyIndex:b.uri.pathSegments.length-1,d=b.uri.getPathSegment(c),e=this.getResourcePredicate.call(this);if(void 0!==e&&""!==e)e.indexOf(" ")<0&&e.replace(/[\"\']/,"")===e&&(e="'"+e+"'"),d.predicate=e,b.uri.setPathSegment(c,d);else if("undefined"!=typeof console)return!1}if(this.pathSegments&&this.pathSegments.length>0)for(var f=b.uri.pathSegments.length,g=0;g<this.pathSegments.length;g++)b.uri.setPathSegment(f,this.evaluatePathSegment(this.pathSegments[g])),f++;return b},fetch:function(a){return a.queryOptions&&a.queryOptions.singleResourceRequest?this.returnCollectionProperty(a,a.queryOptions.property):this.inherited(arguments)},verifyService:function(){if(this.service||(this.service=b.getSDataService("proxy",!0)),this._hasValidService=!0,"function"==typeof this.getAppId){var a=this.getAppId();void 0!==a&&""!==a?this.service.setDataSet(a):"undefined"!=typeof console&&(this._hasValidService=!1)}},returnCollectionProperty:function(a,b){if(this._entity.hasOwnProperty(b)&&null!==this._entity[b]){var c=this._entity[b].$resources;"unknown"!=typeof c&&(a.onBegin&&a.onBegin.call(a.scope||this,c.length,a),a.onComplete&&a.onComplete.call(a.scope||this,c,a))}a.onError&&a.onError.call(a.scope||this,"Invalid data url",a)},evaluatePathSegment:function(a){return"string"==typeof a?{text:a}:"function"==typeof a.getPredicate?{text:a.text,predicate:a.getPredicate()}:"string"==typeof a.getPredicate?{text:a.text,predicate:a.getPredicate}:a},receiveSingleResource:function(a){this.onGetSingleResource(a)},_getRequest:function(){if(this.verifyService(),null===this._request){var a=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(a.setResourceKind(this.resourceKind),"function"==typeof this.getResourcePredicate){var b=a.uri.getPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex)||a.uri.pathSegments.length-1,c=a.uri.getPathSegment(b),d=this.getResourcePredicate.call(this);if(void 0!==d&&""!==d)d.indexOf(" ")<0&&d.replace(/[\"\']/,"")===d&&(d="'"+d+"'"),c.predicate=d,a.uri.setPathSegment(b,c);else if("undefined"!=typeof console)return!1}if(this.pathSegments&&this.pathSegments.length>0)for(var e=a.uri.pathSegments.length,f=0;f<this.pathSegments.length;f++)a.uri.setPathSegment(e,this.evaluatePathSegment(this.pathSegments[f])),e++;a.setQueryArgs({select:this.select.join(","),include:this.include.join(",")}),this.includeContent&&!0===this.includeContent&&a.setQueryArg({_includeContent:!0}),this._request=a}return this._request},getSingleResource:function(){this._getRequest().read({success:dojo.hitch(this,this.onSuccessLoad),failure:dojo.hitch(this,this.onFailure)})},onSuccessLoad:function(a){if(a)this._entity=a,this.onGetSingleResource(a);else{var b={$resources:[]};this._entity=b,this.onGetSingleResource(b)}},onGetSingleResource:function(a){}})})},"Sage/Data/QBTreeStoreModel":function(){define(["dijit/tree/ForestStoreModel","Sage/Data/SDataServiceRegistry","dojo/string","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e,f){return e("Sage.Data.QBTreeStoreModel",a,{insertedChildren:null,constructor:function(){this.insertedChildren=[]},convertDescriptionToFilter:function(a){if(a.$descriptor){var b=a.$descriptor;return b=b.replace(this.rootId+":","")}return a.id},getChildren:function(a,e,g){this.store.fetch({queryArgs:{_pathFilter:this.convertDescriptionToFilter(a)},resourcePredicate:a.root?void 0:"",onComplete:f.hitch(this,function(g,h){var i,j,k,l,m;b.getSDataService("metadata",!1,!0,!1);for(i=a.id||a.toTable,d.forEach(this.insertedChildren,f.hitch(this,function(b){b.parentItem===a&&g.push(b)})),l=[function(a){a.toTable===i&&(a.toTable=a.fromTable,k=a.toField,a.toField=a.fromField,a.fromTable=i,a.fromField=k)},function(a){var b=a.joinType,d={Left:"[left]",">":"[left]",Inner:"[inner]","=":"[inner]",Right:"[right]","<":"[right]"},e=d[b];a.toTable&&(a.label=c.substitute("${2} (${1} -> ${3})${4}",[a.fromTable,a.fromField,a.toTableDisplayName,a.toField,e]))},function(b){b.parentItem=a},function(a){a.children=[]},function(a){var b=a.joinType,d={Left:">",Inner:"=",Right:"<"},e=d[b]||a.joinType;a.dataPathSegment=c.substitute("${0}${1}${2}.${3}",[a.fromField,e,a.toField,a.toTable])},function(a){a.displayPathSegment=c.substitute("${0}",[a.toTable])},function(a){function b(a,d){return d.root?(a&&a.length>0&&a.startsWith("!")&&(a=a.substring(1,a.length)),d.id+":"+a):b(c.substitute("!${0}",[d.dataPathSegment])+a,d.parentItem)}var d;d=b("!",a),a.dataPath=d,a.$descriptor=a.$descriptor||d},function(a){function b(a,d){return d.root?d.id+a:b(c.substitute(".${0}${1}",[d.displayPathSegment,a]),d.parentItem)}var d;d=b("",a),a.displayPath=d}],m=function(a){return function(b){b(a)}},j=0;j<g.length;j++)d.forEach(l,f.hitch(this,m(g[j])));g=d.filter(g,f.hitch(this,function(a){for(var b=a.parentItem;!b.root;){if(a.toTable===b.toTable)return!1;b=b.parentItem}return a.toTable!==b.id})),g.sort(function(a,b){return a.toTable<b.toTable?-1:a.toTable>b.toTable?1:0}),a.children=g,e(g,h)}),onError:g})},getIdentity:function(a){return a.$descriptor},mayHaveChildren:function(a){return a.root||!0},newItem:function(a,b){var c={$descriptor:a.fromtable,$etag:"",$httpStatus:200,fromTable:a.fromtable,fromField:a.fromfield,toTable:a.totable,toTableDisplayName:a.fromtable,toField:a.tofield,cascadeType:a.cascadetype,joinType:a.jointype,parentItem:b.item,children:[]};this.insertedChildren.push(c),this.addItemToStore(c,b.item)},addItemToStore:function(a,b){var c,d=this.store,e=this.childrenAttrs[0],f=d.getValue(b,e);b&&f&&(c=f.slice(0),c.push(a),d.setValue(b,e,c))},onSetItem:function(a,b,c,e){-1!=d.indexOf(this.childrenAttrs,b)?this.getChildren(a,f.hitch(this,function(b){this.onChildrenChange(a,b)})):this.onChange(a)}})})},"Sage/Data/SDataStore":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(a,b){return a("Sage.Data.SDataStore",null,{executeReadWith:"read",sort:null,where:null,select:null,include:null,request:null,queryName:null,resourceKind:null,resourcePredicate:null,collection:"$resources",expandRecurrences:null,constructor:function(a){b.mixin(this,a),this.features={"dojo.data.api.Read":!0}},_expandExpression:function(a){return"function"==typeof a?a.apply(this,Array.prototype.slice.call(arguments,1)):a},_createRequest:function(a){var b="",c=a.sort?this._expandExpression(a.sort):this.sort,d=this._expandExpression(a.select||this.select),e=this._expandExpression(a.include||this.include),f=this._expandExpression(a.request||this.request);if(b=a.query?this.where?this._expandExpression(this.where+" and ("+a.query+" )"):this._expandExpression(a.query):this._expandExpression(this.where),f)f=f.clone();else{var g=this._expandExpression(a.queryName||this.queryName),h=this._expandExpression(a.resourceKind||this.resourceKind),i=this._expandExpression(a.resourcePredicate||this.resourcePredicate);f=g?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(g):new Sage.SData.Client.SDataResourceCollectionRequest(this.service),h&&f.setResourceKind(h),i&&f.getUri().setCollectionPredicate(i)}if(d&&d.length>0&&f.setQueryArg("select",d.join(",")),e&&e.length>0&&f.setQueryArg("include",e.join(",")),b&&f.setQueryArg("where",b),c&&c.length>0){var j=[];dojo.forEach(c,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},j),f.setQueryArg("orderby",j.join(","))}return void 0!==a.start&&f.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,a.start+1),void 0!==a.count&&f.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,a.count),null!==this.expandRecurrences&&(f.uri.queryArgs._expandRecurrences=this.expandRecurrences),f},fetch:function(a){var c=this._createRequest(a),d=b.mixin({},a),e=c[this.executeReadWith]({success:b.hitch(this,this._onFetchSuccess,a,d),failure:b.hitch(this,this._onFetchFailure,a,d),httpMethodOverride:a.queryOptions&&a.queryOptions.httpMethodOverride});return d.abort=b.hitch(this,this._abortRequest,e),d},_abortRequest:function(a){this.service.abortRequest(a)},_onFetchSuccess:function(a,c,d){if(d){d.$resources?c.feed=d.$resources:c.entry=d;var e=b.getObject(this.collection,!1,d)||[d],f=d.$resources?d.$totalResults||-1:1;if(a.onBegin&&a.onBegin.call(a.scope||this,f,c),a.onItem)for(var g=0;g<e.length;g++)a.onItem.call(a.scope||this,e[g],c);a.onComplete&&a.onComplete.call(a.scope||this,a.onItem?null:e,c)}else a.onError&&a.onError.call(a.scope||this,"invalid feed",a)},_onFetchFailure:function(a,b,c,d){a.onError&&a.onError.call(a.scope||this,c.responseText,a)},getValue:function(a,c,d){var e=b.getObject(c,!1,a);return void 0===e?d:e},getFeatures:function(){return this.features}})})},"Sage/Data/SingleEntryPropertySDataStore":function(){define(["Sage/Data/SingleEntrySDataStore","dojo/_base/declare"],function(a,b){return b("Sage.Data.SingleEntryPropertySDataStore",a,{propertyName:null,fetch:function(a){var b,c=this._getRequest(a);if(this.sort&&c.setQueryArg("orderby",this.sort),this.verifyService(),a.predicate){if(this._entity&&a.predicate===this._entity.$key&&this._okToCache&&a.onComplete)return void a.onComplete.call(a.scope||this,this._entity,a);c.setResourceSelector(a.predicate)}return this.select&&this.select.length>0&&c.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&c.setQueryArg("include",this.include.join(",")),this.predicate&&this.predicate.length>0&&c.setResourceSelector(this.predicate),a.beforeRequest&&a.beforeRequest.call(a.scope||this,c),c.setQueryArg("startIndex",a.start+1),c.setQueryArg("count",a.count||100),b=c.readFeed({success:dojo.hitch(this,this.onSuccess,a),failure:dojo.hitch(this,this.onFailure,a)}),{abort:dojo.hitch(this,this.abortRequest,b)}},abortRequest:function(a){this.service.abortRequest(a)},onSuccess:function(a,b){a.onBegin&&a.onBegin.call(a.scope||this,b.$totalResults,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a)},_getRequest:function(a){if(!this._request){var b=new Sage.SData.Client.SDataResourcePropertyRequest(this.service);b.setResourceKind(this.resourceKind),b.setResourceProperty(this.propertyName),this._request=b}return this._request}})})},"Sage/Data/SummaryViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){var e=c("Sage.Data.SummaryRequestQueue",null,{mashupName:"",queryName:"",fetching:!1,service:null,unfetchedIds:null,constructor:function(b){d.mixin(this,b),this.requestHash={},this.fetching=!1,this.unfetchedIds=[],this.allFetched=[],this.service=a.getSDataService("mashups")},add:function(a,b){this.requestHash[a]=b,this.allFetched.push({id:a,context:b}),this.unfetchedIds.push(a)},send:function(a,c){this.fetching=!0;var e,f,g=[];for(e in this.requestHash)g.push("'"+e+"'"),(f=b.indexOf(this.unfetchedIds,e))>-1&&this.unfetchedIds.splice(f,1);var h=new Sage.SData.Client.SDataNamedQueryRequest(this.service);h.setApplicationName("$app"),h.setResourceKind("mashups");var i=this.mashupName||"SummaryViewQueries";h.uri.setCollectionPredicate("'"+i+"'"),h.setQueryName("execute"),h.setQueryArg("_resultName",this.queryName),h.setQueryArg("_ids",g.join(","));var j=this;h.read({success:d.hitch(c,a,j),failure:d.hitch(this,this.requestFailed,j)})},requestFailed:function(a,b,c){}}),f=c("Sage.Data.SummaryViewDataManager",null,{oldQueue:null,queue:null,maxQueueLength:100,constructor:function(){this.oldQueue={},this._createNewQueue()},_createNewQueue:function(){this.queue=new e({}),this.requestTimeout=!1},requestData:function(a,b,c){this.queue.fetching&&(this.oldQueue=this.queue,this._createNewQueue()),this.queue.mashupName=c.mashupName,this.queue.queryName=c.queryName,this.queue.add(a,b),this.requestTimeout&&window.clearTimeout(this.requestTimeout);var d=this.queue,e=this;d.unfetchedIds.length>=this.maxQueueLength&&d.send(e.receiveData,e),this.requestTimeout=window.setTimeout(function(){d.send(e.receiveData,e)},250)},requestDataNoWait:function(a,b,c){var d=new e({mashupName:c.mashupName,queryName:c.queryName});d.add(a,b),d.send(this.receiveData,this)},receiveData:function(a,c){for(var d=0;d<c.$resources.length;d++){var e=c.$resources[d],f=e.id;f||(f=e.$key,e.id=e.$key),function(c){b.forEach(a.allFetched,function(a){try{c.id===a.id&&a.context.set("entity",c)}catch(a){}})}(e)}}});return Sage.Services.addService("SummaryViewDataManager",new f),f})},"Sage/Store/main":function(){define(["Sage/Store/SData","Sage/Store/BaseSDataStore","Sage/Store/WritableStore"],function(){})},"Sage/Groups/main":function(){define(["Sage/Groups/GroupNavigator","Sage/Groups/GroupContextService","Sage/Groups/GroupLookup","Sage/Groups/GroupManager"],function(){})},"Sage/Groups/GroupNavigator":function(){define(["Sage/_Templated","dijit/_Widget","Sage/UI/ToolBarLabel","Sage/UI/ImageButton","Sage/Groups/GroupContextService","Sage/Services/ClientEntityContext","dojo/i18n!./nls/GroupNavigator","dojo/_base/lang","dojo/_base/declare","dojo/topic","Sage/Mingle/MingleSupport"],function(a,b,c,d,e,f,g,h,i,j,k){return i("Sage.Groups.GroupNavigator",[b,a],{widgetsInTemplate:!0,firstText:"Move First",previousText:"Move Previous",nextText:"Move Next",lastText:"Move Last",listText:"List View",labelFmtText:"${0} of ${1}",noRecordsText:"No Records",id:"groupNavigator",_entityContextService:!1,_groupContextService:!1,_entityChangedHandle:!1,_groupChangedHandle:!1,widgetTemplate:new Simplate(['<span class="list-panel-tbar">','<div id="{%= $.id %}-Start" data-dojo-type="Sage.UI.ImageButton" imageClass="icon_Start_16x16" tooltip="{%= $.firstText %}" alt="{%= $.firstText %}" dojoAttachPoint="_firstButton" dojoAttachEvent="onClick:_moveFirst"></div>','<div id="{%= $.id %}-Previous"  data-dojo-type="Sage.UI.ImageButton" imageClass="icon_Browse_Previous_16x16" tooltip="{%= $.previousText %}" alt="{%= $.previousText %}" dojoAttachPoint="_previousButton" dojoAttachEvent="onClick:_movePrevious"></div>','<div id="{%= $.id %}-Label"  data-dojo-type="Sage.UI.ToolBarLabel" label="" dojoAttachPoint="_groupNavLabel"></div>','<div id="{%= $.id %}-Next"  data-dojo-type="Sage.UI.ImageButton" imageClass="icon_Browse_Next_16x16" tooltip="{%= $.nextText %}" alt="{%= $.nextText %}" dojoAttachPoint="_nextButton" dojoAttachEvent="onClick:_moveNext"></div>','<div id="{%= $.id %}-End"  data-dojo-type="Sage.UI.ImageButton" imageClass="icon_End_16x16" tooltip="{%= $.lastText %}" alt="{%= $.lastText %}" dojoAttachPoint="_lastButton" dojoAttachEvent="onClick:_moveLast"></div>','<div id="{%= $.id %}-Switcher"  data-dojo-type="Sage.UI.ImageButton" imageClass="icon_Switch_to_List_View_16x16" tooltip="{%= $.listText %}" alt="{%= $.listText %}" dojoAttachPoint="_listButton" dojoAttachEvent="onClick:_moveToList"></div>',"</span>"]),startup:function(){this._setLabel(),"undefined"!=typeof mingleConfig&&mingleConfig.isMingleEnabled&&k.publishIBCMessage(this.ownerDocument.location)},destroy:function(){this._groupChangedHandle&&(dojo.disconnect(this._groupChangedHandle),this._groupChangedHandle=!1),this.inherited(arguments)},postMixInProperties:function(){this._entityContextService=Sage.Services.getService("ClientEntityContext"),this._groupContextService=Sage.Services.getService("ClientGroupContext"),h.mixin(this,g)},_setLabel:function(a){var b=this._getGroupContext(),c=b.CurrentEntityPosition,d=b.CurrentGroupCount;this._entityContextService.getContext();if(this._enableButtons(),this._groupNavLabel&&b){0===d&&(c=0);var e=dojo.string.substitute(this.labelFmtText,[c,d]);this._groupNavLabel.set("label",e),0!==c&&1!==c||(this._previousButton.set("disabled",!0),this._firstButton.set("disabled",!0)),c!==b.CurrentGroupCount&&0!==c||(this._nextButton.set("disabled",!0),this._lastButton.set("disabled",!0))}},_enableButtons:function(){this._nextButton.set("disabled",!1),this._lastButton.set("disabled",!1),this._previousButton.set("disabled",!1),this._firstButton.set("disabled",!1)},_moveFirst:function(){var a=this._getGroupContext(),b=this._entityContextService.getContext();""!==a.FirstEntityID&&a.FirstEntityID!=b.EntityId&&(this._publishTopic("/group/nav/first",a.FirstEntityID,b.EntityId,a.CurrentEntityPosition,a.CurrentGroupCount),this._entityContextService.navigateSLXGroupEntity(a.FirstEntityID,b.EntityId))},_movePrevious:function(){var a=this._getGroupContext(),b=this._entityContextService.getContext();""!==a.PreviousEntityID&&a.PreviousEntityID!=b.EntityId&&(this._publishTopic("/group/nav/previous",a.PreviousEntityID,b.EntityId,a.CurrentEntityPosition,a.CurrentGroupCount),this._entityContextService.navigateSLXGroupEntity(a.PreviousEntityID,b.EntityId))},_moveNext:function(){var a=this._getGroupContext(),b=this._entityContextService.getContext();""!==a.NextEntityID&&a.NextEntityID!=b.EntityId&&(this._publishTopic("/group/nav/next",a.NextEntityID,b.EntityId,a.CurrentEntityPosition,a.CurrentGroupCount),this._entityContextService.navigateSLXGroupEntity(a.NextEntityID,b.EntityId))},_moveLast:function(){var a=this._getGroupContext(),b=this._entityContextService.getContext();""!==a.LastEntityID&&a.LastEntityID!=b.EntityId&&(this._publishTopic("/group/nav/last",a.LastEntityID,b.EntityId,a.CurrentEntityPosition,a.CurrentGroupCount),this._entityContextService.navigateSLXGroupEntity(a.LastEntityID,b.EntityId))},_moveToList:function(){Sage.Link.toListView()},_getGroupContext:function(){return this._groupContextService.getContext()},_publishTopic:function(a,b,c,d,e){j.publish(a,{toEntityId:b,fromEntityId:c,position:d,count:e})}})})},"Sage/Groups/GroupContextService":function(){define(["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(a,b,c,d,e,f,g){var h=f("Sage.Groups.GroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:!1,constructor:function(){this._connects=[],this._subscribes=[],this._adHocGroupList=[],this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null},this._isAdHocGroupListRetrieved=!1,this._subscribes.push(dojo.subscribe(b.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh)),d(e.hitch(this,function(){if(!this.isContextRequired()){var b=a.getValue(window,"Sage.Groups._groupContext"),c=a.getValue(window,"Sage.UI.DataStore.Filters");c&&b.AppliedFilterInfo&&(c.default=this.createFilterExtendedSet(b.AppliedFilterInfo))}this.isContextRequired()&&this.requestContext()}))},createFilterExtendedSet:function(a){var b,c,d,f,g,h=a.definitionSet||[],i=a.applied||[],j={},k={};for(d=0;d<h.length;d++)b=h[d],c={$key:b.id,$partial:!0,filterName:b.filterName,displayName:b.displayName,propertyName:b.propertyName,propertyDataTypeId:b.propertyDataTypeId,details:{}},"rangeFilter"==b.filterType&&(c.details.rangeFilter={characters:b.characters}),"lookupFilter"==b.filterType?c.details.lookupFilter={}:c.details.distinctFilter={},j[b.id]=c;for(d=0;d<i.length;d++){for(b=i[d],c={},f=0;f<b.rangeValues.length;f++)g=b.rangeValues[f],c[g.rangeName]=e.mixin({},g);for(f=0;f<b.distinctValues.length;f++)"string"==typeof(g=b.distinctValues[f])&&(c[g]=g);for(f=0;f<b.lookupValues.length;f++){var l=b.lookupValues[f];c.value=l}k[b.id]=c}return{definitionSet:j,applied:k}},destroy:function(){g.forEach(this._connects,function(a){dojo.disconnect(a)}),this.unsubscribeConnects(),this.uninitialize()},unsubscribeConnects:function(){g.forEach(this._subscribes,function(a){dojo.unsubscribe(a)})},uninitialize:function(){},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},createCompatibleContext:function(a){"LOOKUPRESULTS"==a.currentGroupId&&(a.currentName="Lookup Results");var b={AppliedFilterInfo:a.appliedFilterInfo,ContainsPositionState:a.containsPositionState,CurrentDisplayName:a.currentDisplayName,CurrentEntity:a.currentEntity,CurrentEntityID:a.currentEntityId,CurrentEntityPosition:a.currentEntityPosition,CurrentFamily:a.currentFamily,CurrentGroupCount:a.currentGroupCount,CurrentGroupID:a.currentGroupId,CurrentName:a.currentName,CurrentTable:a.currentTable,CurrentTableKeyField:a.currentTableKeyField,DefaultGroupID:a.defaultGroupId,FirstEntityID:a.firstEntityId,LastEntityID:a.lastEntityId,LookupLayoutGroupName:a.lookupLayoutGroupName,NextEntityID:a.nextEntityId,PreviousEntityID:a.previousEntityId,RetrievedOn:a.retrievedOn,isAdhoc:a.isAdHoc};return a.appliedFilterInfo||delete b.AppliedFilterInfo,b},_onDefaultFilterRefresh:function(a,b,d){var e=this.getContext(),f=c.getSDataService("system"),g={$name:"applyFilterToGroup",request:{groupId:e.CurrentGroupID,filter:dojo.toJson(d.createValueSet())}};if(null!==e.CurrentGroupID&&""!==e.CurrentGroupID){new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("applyFilterToGroup").execute(g,{})}},getContext:function(){var a=Sage&&Sage.Groups&&Sage.Groups._groupContext;return a||(this.isContextRequired()&&this.requestContext(),this._emptyContext)},requestContext:function(a){if(!this._currentRequestHandle){var b=c.getSDataService("system"),d=new Sage.SData.Client.SDataServiceOperationRequest(b).setOperationName("getGroupContext");this._currentRequestHandle=d.execute({},{success:this._onRequestContextSuccess,failure:this._onRequestContextFailure,scope:this})}},_onRequestContextSuccess:function(a){var b=a&&a.response;b&&this.setContext(this.createCompatibleContext(b)),this._currentRequestHandle=null},_onRequestContextFailure:function(a,b){this._currentRequestHandle=null},setContext:function(a){var b=Sage&&Sage.Groups;b&&a&&(e.mixin(b._groupContext,a),this.onContextSet(b._groupContext))},setCurrentGroup:function(a,b,d){var e=this.getContext();if(e&&e.CurrentGroupID===a){if("LOOKUPRESULTS"===a){if(!d||e.LookupResultsConditions===d)return;e.currentName="Lookup Results"}"LOOKUPRESULTS"!==a&&(this.doNotFireGroupChangedEvent=!0)}if(12===a.length||"LOOKUPRESULTS"===a){
var f=c.getSDataService("system"),g=new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("setGroupContext"),h={request:{currentGroupId:a,currentName:"",currentFamily:""}};g.execute(h,{success:this._onSetContextRequestSuccess,failure:this._onSetContextRequestFailure,scope:this})}},_onSetContextRequestSuccess:function(a){var b=a&&a.response,c=b&&this.createCompatibleContext(b);c&&this.setContext(c),this.doNotFireGroupChangedEvent||this.onCurrentGroupChanged({current:c}),this.doNotFireGroupChangedEvent=!1},_onSetContextRequestFailure:function(a,b){},onSuccessfulGroupChanged:function(a){var b=this.getContext();this.setContext(a),this.onCurrentGroupChanged({current:a,previous:b})},onCurrentGroupChanged:function(a){dojo.publish("/group/context/changed",[a,this]),a.current.AppliedFilterInfo&&this.publishFiltersApplied(a.current.AppliedFilterInfo)},publishFiltersApplied:function(b){b&&d(e.hitch(this,function(){var c=this.createFilterExtendedSet(b);a.getValue(window,"Sage.UI.DataStore.Filters").default=c,dojo.publish("/ui/filters/default/apply",[c.applied,c.definitionSet,this])}))},onContextSet:function(a){a&&a.AppliedFilterInfo&&this.publishFiltersApplied(a.AppliedFilterInfo)},getAdHocGroupList:function(a,b){if(this._isAdHocGroupListRetrieved)return void a.call(b||this,this._adHocGroupList);var d=new Sage.Data.BaseSDataStore({service:c.getSDataService("system"),resourceKind:"groups",include:[],select:["name","family","isHidden","isAdHoc","mainTable","keyField","entityName"]});Sage.Groups._groupContext.CurrentFamily=Sage.Groups._groupContext.CurrentFamily.toUpperCase(),d.fetch({query:dojo.string.substitute("upper(family) eq '${CurrentFamily}' and isAdHoc",Sage.Groups._groupContext),count:1e3,sort:[{attribute:"name"}],start:0,onComplete:function(c){this._adHocGroupList=c,a.call(b||this,this._adHocGroupList),this._isAdHocGroupListRetrieved=!0},scope:this})}});return Sage.Services.addService("ClientGroupContext",new h),h})},"Sage/Services/ClientEntityContext":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-style","Sage/Utility"],function(a,b,c,d){var e=a("Sage.Services.ClientEntityContext",null,{hasClearListener:!1,tempContext:!1,constructor:function(a){this.inherited(arguments),dojo.mixin(this,a),this.emptyContext={EntityId:"",EntityType:"",Description:"",EntityTableName:""}},getContext:function(){if(this.tempContext)return this.tempContext;if(Sage.Data&&Sage.Data.EntityContextStore){var a=Sage.Data.EntityContextStore;for(var b in a)a.hasOwnProperty(b)&&(a[b]=d.htmlDecode(a[b]));return Sage.Data.EntityContextStore}return this.emptyContext},setContext:function(a){Sage.Data.EntityContextStore=dojo.mixin(this.emptyContext,a),this.onEntityContextChanged(Sage.Data.EntityContextStore)},setTemporaryContext:function(a){this.tempContext=a},clearTemporaryContext:function(){this.tempContext=!1},navigateSLXGroupEntity:function(a,d,e){if(Sage.Services){var f=Sage.Services.getService("ClientBindingManagerService");if(f&&!f.canChangeEntityContext())return!1;var g=b.byId("loader");g&&(c.set(g,"display","block"),c.set(g,"opacity",.75));var h=Sage.Services.getService("ClientContextService");h.containsKey("ClientEntityId")?h.setValue("ClientEntityId",a):h.add("ClientEntityId",a),d=d||Sage.Data.EntityContextStore.EntityId,h.containsKey("PreviousEntityId")?h.setValue("PreviousEntityId",d):h.add("PreviousEntityId",d),e&&(h.containsKey("ClientEntityPosition")?h.setValue("ClientEntityPosition",e):h.add("ClientEntityPosition",e)),this.hasClearListener||(Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function(){if(Sage.Services){var a=Sage.Services.getService("ClientContextService");a.containsKey("PreviousEntityId")&&a.remove("PreviousEntityId")}var d=b.byId("loader");d&&(c.set(d,"display","none"),c.set(d,"opacity",0))}),this.hasClearListener=!0),Sage.Data.EntityContextStore.EntityId=a,Sage.Data.EntityContextStore.Description=""}if(window.TabControl){var i=TabControl.getState();i&&(i.clearUpdatedTabs(),TabControl.updateStateProxy())}return __doPostBack("MainContent",""),!0},onEntityContextChanged:function(a){}});return Sage.Services.hasService("ClientEntityContext")||Sage.Services.addService("ClientEntityContext",new Sage.Services.ClientEntityContext),e})},"Sage/Mingle/MingleSupport":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/string","Sage/UI/GroupsTitlePaneConfigProvider","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f){return Sage.namespace("Sage.Mingle.MingleSupport"),Sage.Mingle.MingleSupport={lastGroup:null,publishIBCMessage:function(a){dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged);var b,c,e=Sage.Services.getService("ClientGroupContext"),f=e.getContext(),g=f.CurrentGroupID,h=Sage.Services.getService("ClientEntityContext"),i=h.getContext(),j=a.pathname,k=i.DisplayName?i.DisplayName:i.EntityTableName,l=Math.floor(101*Math.random()),m=new Date,n=m.getTime(),o=i.Description,p=j.substring(j.lastIndexOf("/")+1,j.lastIndexOf(".aspx")),q=Sage.Utility.getModeId();"list"===q?(j=d.substitute("${0}.aspx?gid=${1}&modeid=list",[p,g]),b=f.CurrentDisplayName,c=i.EntityTableName+": "+b):"detail"===q?(b=i.Description,c=i.EntityTableName+": "+b,j="true"===i.IsGroupsBasedEntity?d.substitute("${0}.aspx?entityid=${1}&gid=${2}&modeid=Detail",[p,i.EntityId,g]):d.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[p,i.EntityId])):(g&&(j=j+"?groupId="+g),k=p,b=f.CurrentName&&!f.CurrentTable?f.CurrentName:g&&!f.CurrentTable?g:"view",c="CRM "+p+": "+b,o="CRM "+p+": "+b);var r=[{entityType:k.replace(/ /g,"_"),id1:b.replace(/ /g,"_"),id2:i.EntityId,drillbackURL:"?LogicalId="+mingleConfig.logicalId+"&href="+encodeURIComponent(j),bodReference:{noun:k,documentId:k}}],s={screenId:"crm_"+k,logicalId:mingleConfig.logicalId,entities:r,contextId:n+""+l,messageText:"",originatingTime:n};infor.companyon.client.sendMessage("inforBusinessContext",s),infor.companyon.client.registerMessageHandler("applicationDrillback",this.showDrillbackHandler);var t={name:c,description:o,absoluteURL:!1,shortcutContext:encodeURIComponent(j)};infor.companyon.client.sendMessage("setShortcutContext",t),infor.companyon.client.bind("showFavoriteContext",this.showFavoriteHandler),infor.companyon.client.sendMessage("appInitComplete",window.name)},drillDownUsingID:function(a){var b,c=this.getQueryStringVariable(a.applicationDrillback,"EntityID"),e=this.getQueryStringVariable(a.applicationDrillback,"ViewId"),g=this.getQueryStringVariable(a.applicationDrillback,"ErpExtID"),h=this.getQueryStringVariable(a.applicationDrillback,"GroupId"),i=this.getQueryStringVariable(a.applicationDrillback,"Id1"),j=this.getQueryStringVariable(a.applicationDrillback,"accountingEntity"),k="";c&&e?"History"===e?Sage.Link.editHistory(c):(k=h?d.substitute("${0}.aspx?entityid=${1}&gid=${2}&modeid=Detail",[e,c,h]):d.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[e,c]),document.location.href=k):e&&g?(b=new Sage.SData.Client.SDataSingleResourceRequest(f.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(e)).setQueryArg("select","$key").setQueryArg("format","json").setQueryArg("where",d.substitute("ErpExtId eq '${0}'",[g])).setQueryArg("_t",(new Date).getTime()),b.read({success:function(a){a&&a.$key?(c=a.$key,k=d.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[e,c]),document.location.href=k):(k=d.substitute("${0}.aspx",[e]),document.location.href=k)},failure:function(){},scope:this})):e&&h&&null===c?"History"!==e&&(k=d.substitute("${0}.aspx?gid=${1}&modeid=list",[e,h]),document.location.href=k):e&&i&&j?(b=new Sage.SData.Client.SDataSingleResourceRequest(f.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(e)).setQueryArg("select","$key").setQueryArg("format","json").setQueryArg("where",d.substitute("Id eq '${0}' OR (ErpExtId eq '${1}' AND ErpAccountingEntityId eq '${1}')",[i,j])).setQueryArg("_t",(new Date).getTime()),b.read({success:function(a){a&&a.$key?(c=a.$key,k=d.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[e,c]),document.location.href=k):(k=d.substitute("${0}.aspx",[e]),document.location.href=k)},failure:function(){},scope:this})):e&&i&&(b=new Sage.SData.Client.SDataSingleResourceRequest(f.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(e)).setQueryArg("select","$key").setQueryArg("format","json").setQueryArg("where",d.substitute("Id eq '${0}' OR ErpExtId eq '${0}'",[i])).setQueryArg("_t",(new Date).getTime()),b.read({async:!1,success:function(a){a&&a.$key?(c=a.$key,k=d.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[e,c]),document.location.href=k):(k=d.substitute("${0}.aspx",[e]),document.location.href=k)},failure:function(){},scope:this}))},showDrillbackHandler:function(a){if(null!==a){var b=Sage.Mingle.MingleSupport.getQueryStringVariable(a.applicationDrillback,"href"),c=Sage.Mingle.MingleSupport.getQueryStringVariable(a.applicationDrillback,"script");if(b){var d=Sage.Utility.getParameterByName("groupId",b);c&&(b=b+"&script="+c),d&&(b=b+"&groupId="+d);var e=Math.random();b+=(b.split("?")[1]?"&":"?")+"param="+e,document.location.href=b}else Sage.Mingle.MingleSupport.drillDownUsingID(a)}},showFavoriteHandler:function(a){if(null!==a){var b=decodeURIComponent(a.favoriteContext);document.location.href=b;try{var c=document.location.pathname,d=0;c.lastIndexOf("/")>-1&&(d=c.lastIndexOf("/")+1);var e=c.substring(d,c.indexOf(".aspx"));d=0,b.lastIndexOf("/")>-1&&(d=b.lastIndexOf("/")+1);e===b.substring(d,b.indexOf(".aspx"))&&b.indexOf("#")>-1&&document.location.reload(!0)}catch(a){}}},_onGroupContextChanged:function(){"undefined"!=typeof mingleConfig&&this.publishIBCMessage(location)},getDrillBacks:function(c){var e=Sage.Utility.getModeId();if("insert"===e||""===e||"None"===e)return null;var f="list"===e,g="detail"===e,h=Sage.Services.getService("ClientGroupContext"),i=h.getContext(),j=Sage.Services.getService("ClientEntityContext"),k=j.getContext(),l=location.href,m="Infor CRM";f?(l=d.substitute("${0}.aspx?gid=${1}&modeid=list",[i.CurrentEntity,i.CurrentGroupID]),m=d.substitute("${0}: ${1}",[k.DisplayName,i.CurrentDisplayName])):g&&(l="true"===k.IsGroupsBasedEntity?d.substitute("${0}.aspx?entityid=${1}&gid=${2}&modeid=Detail",[i.CurrentEntity,k.EntityId,i.CurrentGroupID]):d.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[i.CurrentEntity,k.EntityId]),m=d.substitute("${0}: ${1}",[k.DisplayName,k.Description]));var n=d.substitute("?LogicalId=${0}&href=${1}",[mingleConfig.logicalId,encodeURIComponent(l)]),o=[],p={Label:m,TypeId:1,URL:n};return o.push(p),b.isArray(c)&&a.forEach(c,function(a){m=a.DisplayName||"Infor CRM",b.isString(a.Script)?n=d.substitute("${0}&script=${1}",[n,encodeURIComponent(a.Script)]):(l=""===a.Url?location.href:a.Url,n=d.substitute("?LogicalId=${0}&href=${1}",[mingleConfig.logicalId,encodeURIComponent(l)])),p={Label:m,TypeId:1,URL:n},o.push(p)}),o},getQueryStringVariable:function(a,b){a=a.indexOf("?")>-1?a.substring(a.indexOf("?")+1,a.length):a;for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0]).toLowerCase()===b.toLowerCase()){return decodeURIComponent(e[1])}}return null},showDrillBack:function(a){infor.companyon.client.sendPrepareDrillbackMessage(a)}},Sage.Mingle.MingleSupport})},"Sage/UI/GroupsTitlePaneConfigProvider":function(){define(["Sage/UI/_TitlePaneConfigProvider","Sage/Data/BaseSDataStore","Sage/Store/SData","Sage/UI/GroupMenuFmtScope","Sage/UI/GridMenuItem","Sage/Groups/GroupManager","Sage/Utility","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/string","Sage/Groups/GroupLookup","Sage/UI/SearchMenuItem","Sage/UI/ImageButton","dojo/i18n!./nls/GroupsTitlePaneConfigProvider","dijit/popup","dijit/form/CheckBox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return i("Sage.UI.GroupsTitlePaneConfigProvider",a,{searchText:"Lookup",lookupResultsText:o.lookupResultsText,store:!1,_requestOptions:!1,_grpContextHandle:!1,config:!1,gridMenuItem:null,requestTitlePaneConfiguration:function(a){var c,d,e,f,g,h;if(this._isInsertMode())return void(a.success&&(this.config={menu:!1,tabs:!1},a.success.call(a.scope||this,this.config,this)));if(c=Sage.Data.SDataServiceRegistry.getSDataService("system"),this.store=new b({service:c,resourceKind:"groups",include:[],sort:[{attribute:"displayName",descending:!1}],select:["$key","$descriptor","name","isHidden","userId","family","displayName","ownerlf"]}),d=Sage.Services.getService("ClientGroupContext"),e=d.getContext(),!e.notGroupBased){if(!e.CurrentFamily)return this._requestOptions=a,void(this._grpContextHandle=dojo.connect(d,"onContextSet",this,"_groupContextSetCallback"));f=this._getMenuConfig(),g=dijit.byId("GroupLookupButton"),g&&g.destroy(!0),h=this._getTabConfig(),this.config={menu:f,tabs:h},a.success&&a.success.call(a.scope||this,this.config,this)}},_isInsertMode:function(){var a=Sage.Utility.getModeId();return a&&"insert"===a.toLowerCase()},_groupContextSetCallback:function(a){this._grpContextHandle&&(dojo.disconnect(this._grpContextHandle),this._grpContextHandle=!1,this.config={menu:this._getMenuConfig(),tabs:this._getTabConfig()},this._requestOptions.success&&this._requestOptions.success.call(this._requestOptions.scope||this,this.config,this))},_getTabConfig:function(){var a=Sage.Services.getService("ClientGroupContext"),c=a&&a.getContext();return{store:new b({service:Sage.Data.SDataServiceRegistry.getSDataService("system"),resourceKind:"groups",include:[],sort:[{attribute:"displayName",descending:!1}],select:["$key","$descriptor","name","isHidden","userId","family","displayName"]}),selectedTabId:c.CurrentGroupID,selectedTabName:c.CurrentName,tabKeyProperty:"$key",tabNameProperty:"$descriptor",tabGroupNameProperty:"name",tabHiddenProperty:"isHidden",showTabContextMenus:!0,fetchParams:{query:k.substitute("upper(family) eq '${0}' and isHidden eq false",[c.CurrentFamily.toUpperCase()]),count:this.getMaxNumOfFavoriteGroups(),start:0,sort:[{attribute:"isHidden",descending:!1},{attribute:"displayName"}]},lookupButton:new n({id:"GroupLookupButton",label:"",imageClass:"fa fa-search",title:o.lookupText,onClick:function(){var a,b=Sage.Services.getService("ClientGroupContext");b&&(a=Sage.Services.getService("GroupLookupManager"))&&a.showLookup()}}),staticTabs:[{$key:"LOOKUPRESULTS",$descriptor:this.lookupResultsText,closable:!1,contextMenuItems:this._getTabContextMenuItems()}],onTabSelect:function(a,b){var c,d;b||(c="string"==typeof a?a:a.id,(d=Sage.Services.getService("ClientGroupContext"))&&"DOLOOKUP"!==c&&d.setCurrentGroup(c))},onTabClose:function(a){Sage.Groups.GroupManager.HideGroup(a.id)},onTabClick:function(a){var b=g.getModeId(),c=Sage.Services.getService("ClientGroupContext"),d=dijit.byId("GroupTabs"),e="",f="",i=null,j=a.target,k="";"detail"===b&&(h.forEach(d.getChildren(),function(a){a.selected&&(e=a.id,k=a.title)}),c&&(i=c.getContext(),"DOLOOKUP"!==e&&i&&(f=i.CurrentGroupID)),e===f&&j&&j.innerHTML===k&&Sage.Link.toListView())}}},_getTabContextMenuItems:function(){var a;return Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus.GroupLookupTabContextMenu&&(a=Sage.UI.DataStore.ContextMenus.GroupLookupTabContextMenu.items),a},_getMenuConfig:function(){var a=Sage.Services.getService("ClientGroupContext"),b=a.getContext();b.CurrentName;return{id:"mnuGroupMenu",cls:"",img:"images/icons/Groups_16x16.gif",imageClass:"icon_Groups_16x16",text:o.groupText,tooltip:o.groupButtonTooltip,addGroupTooltip:o.addGroupButtonTooltip,width:"410px",items:[{cls:"",id:"sep2",text:"-",img:"",tooltip:"",href:"",isSeparator:!0},{fn:this._getGroupMenuSearch,scope:this},{fn:this._getGroupMenuGrid,scope:this}]}},_getGroupMenuGrid:function(){var a=this,b=new d({store:this.store}),f={},g=!1,h=Sage.Services.getService("ClientGroupContext");h&&(g=h.getContext(),g.CurrentEntity&&(f=k.substitute("upper(family) eq '${0}'",[g.CurrentFamily.toUpperCase()])));var i=new c({service:a.store.service,resourceKind:a.store.resourceKind,include:a.store.include,orderBy:"isHidden,displayName",select:a.store.select,where:f});return this.gridMenuItem=new e({gridOptions:{id:"groupsGridInMenu",cssClass:"groupsPopMenu",store:i,minRowsPerPage:40,columns:[{label:"",field:"$key",formatter:"fmtSelectedCol",width:"40px",sortable:!1},{label:o.groupColumnText,field:"displayName",sortable:!1},{label:o.visibleColumnText,field:"isHidden",formatter:"fmtHideCol",editor:q,get:function(a){return!a[this.field]},editorArgs:{onClick:function(b){var c=this.get("checked"),d=Sage.Services.getService("RoleSecurityService"),e=a.gridMenuItem.grid._grid.row(this.domNode).data;if(d.hasAccess("Entities/Group/Edit"))if(c){var f=a.getMaxNumOfFavoriteGroups(),g=a.getNumOfFavoriteGroups(a.gridMenuItem.grid.store.dataCache);g+1>f?(dojo.byId("exceedMaxGroupMsg").innerHTML=dojo.string.substitute(o.exceedMaxGroupMsg,[f]),this.checked=!1):Sage.Groups.GroupManager.UnHideGroup(e.$key,!0)}else dojo.byId("exceedMaxGroupMsg").innerHTML="",Sage.Groups.GroupManager.HideGroup(e.$key,!0);b.stopPropagation()}},sortable:!1},{label:o.groupOwner,field:"ownerlf",sortable:!1}],noDataMessage:"No records returned",selectionMode:"single",formatterScope:b,columnResizing:!0,setQueryOnStore:!0,onDataChange:function(a){var b=dijit.getEnclosingWidget(a.target).getParent(),c=b&&b.getParent();this.menuClosedHandle||(this.menuClosedHandle=c.on("close",j.hitch(this,function(){var a=dijit.byId("titlePane");a&&a.resetConfiguration(),this.menuClosedHandle.remove(),this.menuClosedHandle=null})))},onHeaderClick:function(a){a.stopPropagation()},onRowClick:function(a,b,c){if(!this.processingRequest){this.processingRequest=!0;var d,e,f,g,h=dijit.getEnclosingWidget(a.target).getParent(),i=h&&h.getParent();if(this.menuClosedHandle||(this.menuClosedHandle=i.on("close",j.hitch(this,function(){this.processingRequest=!1,this.menuClosedHandle.remove(),this.menuClosedHandle=null}))),d=b.data,e=Sage.Services.getService("ClientGroupContext")){g=e.getContext();var k=dijit.byId("mnuGroupMenu");g&&g.CurrentGroupID===d.$key?p.close(i):(!0,f=dojo.connect(e,"onCurrentGroupChanged",a.grid,function(){this.started=!1,dojo.disconnect(f),k._onClick(a),p.close(i)}),e.setCurrentGroup(d.$key))}}}},width:"300px",height:"400px"}),this.gridMenuItem},_getGroupMenuSearch:function(){return new m({})},getMaxNumOfFavoriteGroups:function(){var a=0,b=Sage.Utility.getSDataService("dynamic"),c=new Sage.SData.Client.SDataSingleResourceRequest(b);return c.setResourceKind("officeProfiles"),c.setQueryArg("select","MaximumFavoriteGroups"),c.read({async:!1,success:function(b){a=b.MaximumFavoriteGroups},failure:function(a){Sage.UI.Dialogs.showError(a)}}),a},getNumOfFavoriteGroups:function(){var a=0,b=Sage.Data.SDataServiceRegistry.getSDataService("system"),c=new Sage.SData.Client.SDataResourceCollectionRequest(b),d=Sage.Services.getService("ClientGroupContext").getContext(),e=d.CurrentFamily.toUpperCase();return c.setResourceKind("groups"),c.setQueryArg("select","$key"),c.setQueryArg("where","upper(family) eq '"+e+"' and isHidden eq false"),c.setQueryArg("upper(family)",e),c.read({async:!1,success:function(b){a=b.$totalResults},failure:function(a){Sage.UI.Dialogs.showError(a)}}),a}})})},"Sage/UI/_TitlePaneConfigProvider":function(){define(["dojo/_base/declare"],function(a){return a("Sage.UI._TitlePaneConfigProvider",null,{titlePaneConfiguration:{menu:{},tabs:{},titleFmtString:"${0}"},requestTitlePaneConfiguration:function(a){a.success&&this.titlePaneConfiguration&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)}})})},"Sage/UI/GroupMenuFmtScope":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(a,b){return b("Sage.UI.GroupMenuFmtScope",null,{store:null,currentGroupId:"",constructor:function(a){this.store=a.store,this.currentGroupId="";var b=Sage.Services.getService("ClientGroupContext");b&&dojo.connect(b,"onCurrentGroupChanged",this,"onCurrentGroupChanged")},fmtSelectedCol:function(a,b){if(""===this.currentGroupId){var c=Sage.Services.getService("ClientGroupContext");if(c){var d=c.getContext();this.currentGroupId="LOOKUPRESULTS"===d.CurrentGroupID?"p6UJ9A00024G":d.CurrentGroupID}}return a===this.currentGroupId?['<span id="',a,'" >&#10003;</span>'].join(""):['<span id="',a,'" >&nbsp;</span>'].join("")},fmtHideCol:function(b,c,d){var e=new a;return e.set("checked",!b),e.on("click",function(){var a=e.get("checked");Sage.Services.getService("RoleSecurityService").hasAccess("Entities/Group/Edit")&&(a?Sage.Groups.GroupManager.UnHideGroup(c.$key,!0):Sage.Groups.GroupManager.HideGroup(c.$key,!0))}),e},onCurrentGroupChanged:function(){this.currentGroupId="";var a=Sage.Services.getService("ClientGroupContext"),b=a.getContext();dijit.byId("GroupTabs").selectedChildWidget.id!==b.CurrentGroupID&&dijit.byId("GroupTabs").selectChild(b.CurrentGroupID)}})})},"Sage/UI/GridMenuItem":function(){define(["dijit/MenuItem","Sage/UI/Controls/Grid","dojo/text!../templates/GridMenuItem.html","dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dojo/aspect","dojo/_base/lang","dojo/topic","dojo/store/Memory"],function(a,b,c,d,e,f,g,h,i,j){return d("Sage.UI.GridMenuItem",a,{grid:null,store:null,query:null,templateString:c,startup:function(){this.inherited(arguments),g.after(this.getParent(),"onOpen",h.hitch(this,this.startGrid));var a=this.gridOptions.height||this.height||"250px",b=this.gridOptions.width||this.width||"150px";e.set(this.focusNode,{height:a,width:b})},startGrid:function(){if(this.grid&&this.grid.started)return void this.grid.setStore(this.store,this.query);if(void 0!==this.gridOptions){var a=this.gridOptions.hasOwnProperty("cssClass")?this.gridOptions.cssClass:"";this.query=this.gridOptions.hasOwnProperty("query")?this.gridOptions.query:this.query,this.gridOptions.keepScrollPosition=!1,this.gridOptions.classNames=a+" menuGrid",this.gridOptions.placeHolder=this.containerNode,this.gridOptions.columnHiding=!0,this.gridOptions.showHiderIcon=!1,this.store=this.gridOptions.store,!0===this.gridOptions.setQueryOnStore&&(this.gridOptions.store=new j({data:[]})),this.grid&&this.grid.destroy(),this.grid=new b(this.gridOptions),this.gridOptions.hasOwnProperty("onRowClick")&&(this.grid.onRowClick=h.hitch(this.gridOptions,this.gridOptions.onRowClick)),this.gridOptions.hasOwnProperty("onHeaderClick")&&(this.grid.onHeaderClick=h.hitch(this.gridOptions,this.gridOptions.onHeaderClick)),this.grid.onLoadComplete=h.hitch(this,function(){this.grid.started||(i.publish("sage/ui/groups/gridMenuStarted",this),this.grid.started=!0)})}},_onClick:function(a){a.stopPropagation()}})})},"Sage/Groups/GroupManager":function(){define(["Sage/UI/Dialogs","Sage/Utility/Email","dojo/string","Sage/Groups/GroupContextService","dojox/storage/LocalStorageProvider","dojo/_base/array","dojo/_base/lang","dojo/i18n","dojo/i18n!./nls/GroupManager","Sage/Data/SDataServiceRegistry","dojo/_base/xhr","dojo/topic","dojo/aspect","Sage/Utility/Jobs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return Sage.namespace("Sage.Groups.GroupManager"),Sage.Groups.GroupManager={CurrentUserID:"",SortCol:-1,SortDir:"ASC",GMUrl:"SLXGroupBuilder.aspx?method=",GroupXML:"",resources:i,LOCALSTORE_NAMESPACE:"SageGroups",QB_WIDTH:840,QB_HEIGHT:710,GroupAdHocJobRecordLimit:-1,GetFromServer:function(a,b,c,d,e){var f={url:a,sync:e||!1,handleAs:b||"text",headers:{"Content-Type":"application/xml"},preventCache:!0,load:c,error:d};return dojo.xhrGet(f)},ClearLocalStorage:function(){var a=new e;a.initialize(),a.clear(Sage.Groups.GroupManager.resources.LOCALSTORE_NAMESPACE),window.location.reload(!0)},ClearLocalStorageForGroup:function(a){var b=new e;b.initialize(),f.forEach(b.getNamespaces(),function(c){c.indexOf(a)>-1&&b.clear(c)}),sessionStorage.removeItem("GROUPLAYOUT_"+a),sessionStorage.removeItem("hidden_filters_"+a),sessionStorage.removeItem("METADATA_FILTERS_"+a),window.location.reload(!0)},PostToServer:function(a,b,c,d){var e={url:a,postData:b,handleAs:"text",headers:{"Content-Type":"application/xml"},load:function(a){"function"==typeof c&&c(a)},error:function(a){"function"==typeof d&&d(a)}};return dojo.xhrPost(e)},GetCurrentGroupInfo:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){var b=a.getContext();return{Name:b.CurrentName,Family:b.CurrentFamily,Id:b.CurrentGroupID,isAdhoc:b.isAdhoc,Entity:b.CurrentEntity,tableName:b.CurrentTable}}return""},CreateGroup:function(a){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family);var b="QueryBuilderMain.aspx?mode="+a,d=Sage.Groups.GroupManager.QB_WIDTH,e=Sage.Groups.GroupManager.QB_HEIGHT;window.open(b,"GroupViewer",c.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:d,height:e}))},DeleteGroup:function(b,d){void 0!==b&&""!==b||(b=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);var e=d?c.substitute(Sage.Groups.GroupManager.resources.ConfirmDeleteFmtMessage,[d]):Sage.Groups.GroupManager.resources.ConfirmDeleteMessage;a.raiseQueryDialog("",e,function(a){!0===a&&Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+b,"text",function(){var a=document.location.href.replace("#","");if(a.indexOf("?")>-1){a=a.split("?")[0]}document.location=a},function(){})},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)},EditGroup:function(a){var b=Sage.Groups.GroupManager.GetCurrentGroupInfo();void 0!==a&&""!==a||(a=b.Id);var d=c.substitute("QueryBuilderMain.aspx?gid=${groupid}&mode=${md}",{groupid:a,md:b.Family}),e=Sage.Groups.GroupManager.QB_WIDTH,f=Sage.Groups.GroupManager.QB_HEIGHT;window.open(d,"EditGroup",c.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:e,height:f}))},CopyGroup:function(a){var b=Sage.Groups.GroupManager.GetCurrentGroupInfo();void 0!==a&&""!==a||(a=b.Id);var d=["QueryBuilderMain.aspx?gid=",a,"&action=copy","&mode=",b.Family].join(""),e=Sage.Groups.GroupManager.QB_WIDTH,f=Sage.Groups.GroupManager.QB_HEIGHT;window.open(d,"EditGroup",c.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:e,height:f}))},ListGroupsAsSelect:function(a){var b=a;if(!(dojo.isString(b)&&0!==b.length||(b=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family,dojo.isString(b)&&0!==b.length)))return"";var c=Sage.Groups.GroupManager.GMUrl+"GetGroupList&entity="+b,d="";Sage.Groups.GroupManager.GetFromServer(c,"text",function(a){d=a},function(a){},!0);var e=getXMLDoc(d);if(e){var f=e.getElementsByTagName("GroupInfo");if(!f)return"";for(var g="",h=0;h<f.length;h++)g+="<option value = '"+f[h].getElementsByTagName("GroupID")[0].firstChild.nodeValue+"'>"+f[h].getElementsByTagName("DisplayName")[0].firstChild.nodeValue+"</option>";return g}return""},GetGroupId:function(a){var b="";return Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"GetGroupId&name="+encodeURIComponent(a),"text",function(a){b=a},function(a){},!0),b},HideGroup:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id),Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"HideGroup&gid="+a,"",g.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,b,a))},_HideOrShowComplete:function(a,b){var c,d,e,f;a||(e=function(){f&&f.remove&&f.remove();var a=dijit.byId("titlePane");a&&a.resetConfiguration()},c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),f=m.after(c,"onCurrentGroupChanged",e),Sage.Groups.GroupManager._isDefaultGroup(b)||d.CurrentGroupID!==b?Sage.Groups.GroupManager._isDefaultGroup(b)&&d.CurrentGroupID===b?c.setCurrentGroup("LOOKUPRESULTS"):e.call():c.setCurrentGroup(d.DefaultGroupID))},_isDefaultGroup:function(a){var b,c,d;return d=!1,b=Sage.Services.getService("ClientGroupContext"),b&&(c=b.getContext())&&(d=c.DefaultGroupID===a),d},UnHideGroup:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id),Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"UnHideGroup&gid="+a,"",g.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,b,a))},ShowGroups:function(a){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family);var b="ShowGroups.aspx?tablename="+a;window.open(b,"ShowGroups","resizable=yes,centerscreen=yes,width=800,height=646,status=no,toolbar=no,scrollbars=yes")},CreateAdHocGroup:function(a,b,c,d){var e=[Sage.Groups.GroupManager.GMUrl,"CreateAdHocGroup","&name=",encodeURIComponent(b),"&family=",c,"&layoutid=",encodeURIComponent(d)].join();return Sage.Groups.GroupManager.PostToServer(e,a)},EditAdHocGroupAddMember:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupAddMember&groupid="+a+"&entityid="+b)},EditAdHocGroupDeleteMember:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupDeleteMember&groupid="+a+"&entityid="+b)},SetDefault:function(a,b,c){Sage.Groups.GroupManager._saveGroupUserOptions(b,c,"DEFAULTGROUP")},SetLookupLayout:function(a,b,c){Sage.Groups.GroupManager._saveGroupUserOptions(b,c,"LOOKUPLAYOUTGROUP")},_saveGroupUserOptions:function(a,b,d){var e=Sage.Groups.GroupManager.GetCurrentGroupInfo(),f=e.Name,g=a||f,h=b,i=Sage.Services.getService("UserOptions");i&&i.set(b,d,c.substitute("${0}:${1}",[h,g]))},IsAdHoc:function(a){alert("not implemented in this object yet...")},ExportGroup:function(b,c){a.showInfo(Sage.Groups.GroupManager.resources.exportToExcel)},ShareGroup:function(a){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);var b="ShareGroup.aspx?gid="+a;window.open(b,"ShareGroup","resizable=yes,centerscreen=yes,width=500,height=450,status=no,toolbar=no,scrollbars=yes")},GetGroupSQL:function(a,b,c,d){var e=a;if(!(dojo.isString(e)&&0!==e.length||(e=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id,dojo.isString(e)&&0!==e.length)))return"";var f=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+e;void 0!==b&&(dojo.isString(b)?"true"!==b&&"false"!==b||(f+="&UseAliases="+b):"boolean"==typeof b&&(f+="&UseAliases="+b.toString())),dojo.isString(c)&&c.length>0&&(f+="&parts="+c),void 0!==d&&(dojo.isString(d)?"true"!==d&&"false"!==d||(f+="&ApplyFilters="+d):"boolean"==typeof d&&(f+="&ApplyFilters="+d.toString()));var g="";return Sage.Groups.GroupManager.GetFromServer(f,"text",function(a){g=a},function(a){},!0),g},GetGroupSQLFromXML:function(a,b,c){Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"GetGroupSQL",a,b,c)},GetGroupSQLById:function(a,b,c){var d=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+a;Sage.Groups.GroupManager.GetFromServer(d,"json",b,c)},GetAdHocGroupJobRecordLimit:function(){if(!this.GroupAdHocJobRecordLimit||this.GroupAdHocJobRecordLimit<1){var a=Sage.Groups.GroupManager.GMUrl+"GetAdHocGroupJobRecordLimit",b="";Sage.Groups.GroupManager.GetFromServer(a,"text",function(a){b=a},function(a){},!0),this.GroupAdHocJobRecordLimit=b}},saveSelectionsAsNewGroup:function(){var b=Sage.Utility.getSelectionInfo();if(b&&0!==b.selectionCount)Sage.Groups.GroupManager.promptForName("");else if(b.recordCount<1)a.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);else{var d=c.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[b.recordCount]);a.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,d,function(a){!0===a&&(0===b.selectionCount&&Sage.Groups.GroupManager.saveLookupAsGroup(),Sage.Groups.GroupManager.promptForName(""))},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)}},promptForName:function(b,d){var e=Sage.Utility.getSelectionInfo(),f=0===e.selectionCount?e.recordCount:e.selectionCount,g=c.substitute(Sage.Groups.GroupManager.resources.newGroupNamePrompt,[f,b||""]);a.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.newGroupTitle,query:g,callbackFn:function(a,b){
!0===a&&(""===b?window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.newGroupRePrompt,b)},100):null!==b.match(/[\/\\:\*\?"<\>|\.'\r\n]/)?window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg,b)},100):Sage.Groups.GroupManager.saveNewGroupPost(b))},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:d||"",closable:!0})},saveNewGroupPost:function(a){var b=Sage.Utility.getSelectionInfo(),c=j.getSDataService("system"),d=new Sage.SData.Client.SDataSingleResourceRequest(c),e=Sage.Services.getService("ClientGroupContext").getContext(),f=e.CurrentFamily,g=e.CurrentGroupID,h={},i=!1;d.setResourceKind("groups"),0===b.selectionCount&&"LOOKUPRESULTS"!==g&&(i=!0);var k=0===b.selectionCount?b.recordCount:b.selectionCount;this.GetAdHocGroupJobRecordLimit();var l=this.GroupAdHocJobRecordLimit?this.GroupAdHocJobRecordLimit:-1;l>=0&&k>l?(h={family:f,name:a,adHocIds:0===b.selectionCount?null:b.selectedIds,groupId:g},this.createAdHocGroupViaJob(h)):(h={family:f,name:a,adHocIds:b.selectedIds},d.create(h,{success:function(a){i?Sage.Groups.GroupManager.copyFromGroup(g,a.$key):Sage.Groups.GroupManager.newGroupCreated()},failure:function(){},scope:this}))},createAdHocGroupViaJob:function(b){var d=b.groupId;"LOOKUPRESULTS"===d&&(d=this._getDefaultGroupId());var e=[{name:"SelectedIds",value:b.adHocIds},{name:"Family",value:b.family},{name:"EntityName",value:b.family},{name:"GroupName",value:b.name},{name:"GroupId",value:d},{name:"AppliedFilters",value:Sys.Serialization.JavaScriptSerializer.serialize(n.getFiltersForJob())},{name:"LookupConditions",value:Sys.Serialization.JavaScriptSerializer.serialize(n.getLookupConditionsForJob())}],f={descriptor:c.substitute(i.createAdHocGroupJob_Description,[b.name]),closable:!0,title:i.createAdHocGroupJob_Title,key:"Sage.SalesLogix.BusinessRules.Jobs.CreateAdHocGroupJob",infoMessage:i.createAdHocGroupJobProcessingJobMsg,parameters:e,failure:function(b){a.showError(c.substitute(Sage.Groups.GroupManager.resources.createAdHocGroupJobError,[b.result?b.result:""]))},ensureZeroFilters:!0};n.triggerJobAndDisplayProgressDialog(f)},_getDefaultGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().DefaultGroupID}return""},removeSelectionsFromGroup:function(){var b=Sage.Utility.getSelectionInfo();if(0===b.selectionCount)if(b.recordCount<1)a.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);else{var d=c.substitute(Sage.Groups.GroupManager.resources.noneSelectedRemovePromptFmt,[b.recordCount]);a.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,d,function(a){!0===a&&Sage.Groups.GroupManager.removeConfirmed()},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)}else Sage.Groups.GroupManager.removeConfirmed()},removeConfirmed:function(){var a=Sage.Utility.getSelectionInfo(),b=Sage.Services.getService("ClientGroupContext").getContext(),c=b.CurrentFamily,d=b.CurrentName,e=b.CurrentGroupID;Sage.Groups.GroupManager.removeIds(e,d,c,a.selectedIds,function(){Sage.Groups.GroupManager.refreshListView()},function(a){},this)},removeIds:function(a,b,c,d,e,f,h){var i,k,m=j.getSDataService("system"),n=new Sage.SData.Client.SDataServiceOperationRequest(m),o=[];n.setResourceKind("groups"),d&&d.length>0?(n.setOperationName("removeAdHocIds"),o=d):(n.setOperationName("removeAllAdHocIds"),o.push(d)),i={$name:"removeAdHocIds",request:{groupId:a,groupName:b,family:c,adHocIds:d}},k=g.hitch(this,function(){l.publish("/group/adhoc/removed",{groupId:a,groupName:b,family:c,ids:o}),e&&e.call(arguments)}),n.execute(i,{success:k,failure:f,scope:h||this})},addSelectionsToGroup:function(b){var d=Sage.Utility.getCurrentEntityId();if(""!==d)Sage.Groups.GroupManager.postAddToGroup(b,{selectedIds:[d],selectionCount:1});else{var e=Sage.Utility.getSelectionInfo();if(0===e.selectionCount)if(e.recordCount<1)a.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);else{var f=c.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[e.recordCount]);a.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,f,function(a){!0===a&&Sage.Groups.GroupManager.addConfirmed(b)},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)}else Sage.Groups.GroupManager.addConfirmed(b)}},copyFromGroup:function(a,b){var c,d=j.getSDataService("system"),e=new Sage.SData.Client.SDataServiceOperationRequest(d),f=Sage.Services.getService("ClientGroupContext").getContext(),g=f.CurrentFamily,h=f.CurrentName;e.setResourceKind("groups"),e.setOperationName("addAdHocIdsFrom"),c={$name:"addAdHocIdsFrom",request:{groupId:b,groupName:h,family:g,fromGroupId:a}},e.execute(c,{success:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){var c=dijit.byId("titlePane");c&&c.resetConfiguration(),a.setCurrentGroup(b)}},failure:function(){},scope:this})},addConfirmed:function(a){var b=Sage.Utility.getSelectionInfo();Sage.Groups.GroupManager.postAddToGroup(a,b)},postAddToGroup:function(a,b){var c,d=j.getSDataService("system"),e=new Sage.SData.Client.SDataServiceOperationRequest(d),f=Sage.Services.getService("ClientGroupContext").getContext(),g=f.CurrentFamily,h=f.CurrentGroupID,i="addAdHocIds";if(0===b.selectionCount)return void Sage.Groups.GroupManager.copyFromGroup(h,a);e.setResourceKind("groups"),e.setOperationName(i),c={$name:i,request:{groupId:a,family:g,adHocIds:b.selectedIds}},e.execute(c,{success:function(){},failure:function(){},scope:this})},saveLookupAsGroup:function(b,c,d){void 0===d&&(d=Sage.Groups.GroupManager.resources.groupNameText),a.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.saveLookupDlgTitle,query:d,callbackFn:function(a,b){if(!0===a)if(""===b)window.setTimeout(function(){Sage.Groups.GroupManager.saveLookupAsGroup(Sage.Groups.GroupManager.resources.newGroupRePrompt)},100);else if(null!==b.match(/\'|\"|\/|\\|\*|\:|\?|<|\>/))window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg)},100);else{var c="slxdata.ashx/slx/crm/-/groups/adhoc?action=SaveLookupAsGroup&name="+encodeURIComponent(b);k.post({url:c,handleAs:"text",content:{},load:Sage.Groups.GroupManager.newGroupCreated,error:Sage.Groups.GroupManager.handleAjaxError})}},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:"",closable:!0})},handleAjaxError:function(b){if(void 0!==b)if(b.responseXML){var c=b.responseXML.getElementsByTagName("sdata:message");c.length>0&&a.showError(c[0].text||c[0].textContent,"")}else a.alert("an unidentified exception has occured")},newGroupCreated:function(){Sage.Link.toListView()},refreshListView:function(){var a=dijit.byId("list");a&&a.refreshList()},emailSelectionsFromGroup:function(){var a,c,d,e;a="",c="",d=0,e="Email",b.writeEmailToGroupSelection(a,c,d,e)}},window.groupManager=Sage.Groups.GroupManager,window.groupManager})},"Sage/Utility/Email":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/parser","dojox/validate/regexp","dojo/i18n!./nls/Email","dojo/has"],function(Utility,SDataServiceRegistry,Dialogs,parser,regexp,nls,has){return Sage.namespace("Utility.Email"),dojo.mixin(Sage.Utility.Email,{resources:nls,writeEmail:function(recipient,subject,body,isFormatted,nameOrder){if(dojo.isString(recipient)&&recipient.length>0)if(0===recipient.indexOf("{",0)&&recipient.lastIndexOf("}")==recipient.length-1)try{var objValue=dojo.fromJson(recipient);dojo.isObject(objValue)&&(recipient=objValue)}catch(a){return void Dialogs.showError(dojo.substitute(Utility.Email.resources.RecipientInfoError,[a.message]))}else 0===recipient.indexOf("[",0)&&recipient.lastIndexOf("]")===recipient.length-1&&(recipient=eval(recipient));var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(a,b){var c=0;void 0!==nameOrder&&(isNaN(nameOrder)||1==Number(nameOrder)&&(c=1));var d=3,e=2,f=1,g=["to","cc","bcc"],h=0,i=dojo.isArray(recipient)?"array":typeof recipient,j="undefined"!==i&&null!==recipient,k={to:[],cc:[],bcc:[]},l=function(a,b,c,f){if(self.isValidEmailAddress(f||"")){var g=function(a){a.push({firstName:b||"",lastName:c||"",emailAddress:f||""})};switch(a){case e:g(k.cc);break;case d:g(k.bcc);break;default:g(k.to)}}};if(j){var m=function(a,b){dojo.isObject(b)&&l(a,b.firstName||"",b.lastName||"",b.emailAddress||"")};switch(i){case"string":""!==recipient&&l(f,"","",recipient);break;case"array":dojo.forEach(recipient,function(a){dojo.isString(a)?l(f,"","",a):dojo.isObject(a)&&m(f,a)});break;case"object":h=0,dojo.forEach(g,function(a){if(h++,recipient.hasOwnProperty(a))switch(dojo.isArray(recipient[a])?"array":typeof recipient[a]){case"string":l(h,"","",recipient[a]);break;case"array":dojo.forEach(recipient[a],function(a){dojo.isString(a)?l(h,"","",a):dojo.isObject(a)&&m(h,a)});break;case"object":m(h,recipient[a])}})}}recipient=void 0;var n=function(a,b){var d;switch(c){case 1:d=(a.lastName||"").toLocaleUpperCase().localeCompare((b.lastName||"").toLocaleUpperCase()),0===d&&(d=(a.firstName||"").toLocaleUpperCase().localeCompare((b.firstName||"").toLocaleUpperCase()));break;default:d=(a.firstName||"").toLocaleUpperCase().localeCompare((b.firstName||"").toLocaleUpperCase()),0===d&&(d=(a.lastName||"").toLocaleUpperCase().localeCompare((b.lastName||"").toLocaleUpperCase()))}return d},o=dojo.isString(subject)?subject:"",p=dojo.isString(body)?body:"",q=k.to.length+k.cc.length+k.bcc.length;j=q>0;var r=a.GetDesktopService(!1);if(r&&void 0!==r.MailMergeGUI){if(void 0!==r.MailMergeGUI().OutlookIsAvailable&&r.MailMergeGUI().OutlookIsAvailable){var s=r.NewActiveXObject("SLXMMGUIW.MultidimensionalArray"),t=4;if(s.Resize(0,t),j){s.Resize(q,t),h=0;var u=0;dojo.forEach(g,function(a){h++;var b=k[a];dojo.isArray(b)&&b.length>0&&(b.sort(n),dojo.forEach(b,function(a){s.SetValue(u,0,a.firstName||""),s.SetValue(u,1,a.lastName||""),s.SetValue(u,2,a.emailAddress||""),s.SetValue(u,3,h),u++}))})}return void r.MailMergeGUI().WriteEmailEx(s,o,p,c)}"undefined"!=typeof console&&r.MailMergeGUI().OutlookIsAvailable}var v=function(a,b,d){var e="",f=a||"",g=b||"",h=d||"";if(""!==f&&""!==g)switch(c){case 1:e=g+", "+f;break;default:e=f+" "+g}else""===g&&""!==f?e=f:""!==g&&""===f&&(e=g);return""===e?h:e=dojo.string.substitute("${0} <${1}>",[e,h])};if(has("trident")||"undefined"!=typeof ActiveXObject)try{var w=new ActiveXObject("Outlook.Application"),x=w.CreateItem(0);return""!==o&&(x.Subject=o),""!==p&&(isFormatted?x.HTMLBody=p:x.Body=p),h=0,dojo.forEach(g,function(a){h++;var b=k[a];dojo.isArray(b)&&b.length>0&&(b.sort(n),dojo.forEach(b,function(a){var b=v(a.firstName,a.lastName,a.emailAddress);x.Recipients.Add(b).Type=h}))}),void x.Display()}catch(a){}var y=function(a,b,c,d,e,f){"string"==typeof b&&(b=[b]);var g;g=!1===e?function(a){return a}:function(a){return encodeURIComponent(a)};for(var h=0;h<b.length&&a.length<c;h++){var i=c-a.length,j=b[h];if(h>0&&d&&i--,!(0===i||!1===f&&i<j.length)){j=j.substr(0,i);var k=g(j);if(a.length+k.length>c){if(!1===f)continue;for(var l=0,m=k.length-i;m>0;)l++,m-=g(j.charAt(j.length-l)).length;if(l>=j.length)continue;k=g(j.substr(0,j.length-l))}h>0&&d&&(a+=d),a+=k}}return a},z=function(a){var b,c=[];switch(a){case e:b=k.cc;break;case d:b=k.bcc;break;default:b=k.to}return dojo.isArray(b)&&b.length>0&&(b.sort(n),dojo.forEach(b,function(a){var b=v(a.firstName||"",a.lastName||"",a.emailAddress||"");c.push(b)})),c},A=subject||body?1500:2040,B=z(f),C=y("mailto:",dojo.isArray(B)?B:[],A,";",!1,!1),D=!1,E=function(a){var b=D?"&":"?";return b+=a+"=",D=!0,b};dojo.isString(subject)&&""!==subject&&(C+=E("subject"),C=y(C,subject,1700));var F=z(e);dojo.isArray(F)&&F.length>0&&(C+=E("cc"),C=y(C,F,A,";",!1,!1));var G=z(d);dojo.isArray(G)&&G.length>0&&(C+=E("bcc"),C=y(C,G,A,";",!1,!1)),dojo.isString(body)&&""!==body&&(C+=E("body"),C=y(C,body,2e3));try{location.href=C}catch(a){Dialogs.showError(dojo.string.substitute(Utility.Email.resources.MailToProtocolError,[C.length,"function"==typeof a.toMessage?a.toMessage():a.message]))}})},isWriteEmailToIdsSupported:function(a){dojo.isString(a);var b=dojo.isString(a)?a.toUpperCase():"";return"CONTACT"==b||"LEAD"==b},__emailValidationRegEx:null,isValidEmailAddress:function(a){return null===this.__emailValidationRegEx&&(this.__emailValidationRegEx=new RegExp(dojox.validate.regexp.emailAddress())),!!dojo.isString(a)&&this.__emailValidationRegEx.test(a)},writeEmailToIds:function(a,b,c,d,e,f){if(!this.isWriteEmailToIdsSupported(b))return void Dialogs.showError(Utility.Email.resources.InvalidContextError);if(!dojo.isArray(a))return void Dialogs.showError(Utility.Email.resources.InvalidArgumentError);var g=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(h,i){var j=b.toUpperCase(),k=0;a.sort();var l=[];dojo.forEach(a,function(a){-1==dojo.indexOf(l,a)?l.push(a):k++}),a=l,dojo.forEach(a,function(b,c){a[c]="'"+b+"'"});var m=1;a.length>100&&(m=Math.floor(a.length/100),a.length%100!=0&&m++);var n=0;void 0!==e&&(isNaN(e)||1==Number(e)&&(n=1));var o="CONTACT"==j,p="Email";if(dojo.isString(f)&&""!==f&&o){var q=f.toUpperCase();switch(q){case"SECONDARYEMAIL":p="SecondaryEmail";break;case"EMAIL3":p="Email3"}}var r,s=0,t=0,u=0,v={data:[]},w=function(a,b,c,d){v.data.push({key:a||"",firstName:b||"",lastName:c||"",emailAddress:d||""})},x=h.GetDesktopService(!1);for(r=0;r<m;r++){(function(){var b=100;a.length<100&&(b=a.length);var e,f=new Array(b);for(e=0;e<b;e++)f[e]=a.shift();var h=f.length>1?"Id in (${0})":"Id eq ${0}",i=dojo.string.substitute(h,[f.join(",")]),l=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),q=new Sage.SData.Client.SDataResourceCollectionRequest(l);q.setResourceKind("LEAD"==j?"leads":"contacts");var r="FirstName,LastName,DoNotSolicit,DoNotEmail,"+p;q.setQueryArg("select",r),q.setQueryArg("where",i),q.read({httpMethodOverride:!0,success:function(a){u++;var b=void 0!==a&&null!==a?a.$resources:null;if(dojo.isArray(b)&&b.length>0){var e;for(e=0;e<b.length;e++){var f,h=b[e].$key||"";switch(p){case"SecondaryEmail":f=b[e].SecondaryEmail||"";break;case"Email3":f=b[e].Email3||"";break;default:f=b[e].Email||""}var i=b[e].FirstName||"",j=b[e].LastName||"",l=b[e].DoNotEmail||!1,q=b[e].DoNotSolicit||!1;""===f||!g.isValidEmailAddress(f)||l||q?l||q?t++:s++:w(h,i,j,f)}}if(u==m){var r=null;(t>0||s>0||k>0)&&(r=dojo.string.substitute(Utility.Email.resources.FilteredOutMsg,[t,s,k]));var y,z={rtTo:0,rtCC:1,rtBCC:2},A={to:[],cc:[],bcc:[]},B=function(a,b,c,d){var e=function(a){a.push({firstName:b||"",lastName:c||"",emailAddress:d||""})};switch(a){case z.rtCC:e(A.cc);break;case z.rtBCC:e(A.bcc);break;default:e(A.to)}};if(v.data.length>1){var C;if(x){var D=new Sage.SelectEmailInfo;dojo.forEach(v.data,function(a){D.AddInfo("","",a.key,a.emailAddress,a.firstName,a.lastName,"","",!1)});var E=dojo.isString(r)?r:"",F=x.SelectEmailNames(D,MaxTo.maxNoMax,E);if(!(null!==F&&F.Recipients.length>0))return;for(C=0;C<F.Recipients.length;C++)y=F.Recipients[C],B(y.Type,y.FirstName,y.LastName,y.EmailAddress)}else dojo.forEach(v.data,function(a){B(z.rtTo,a.firstName,a.lastName,a.emailAddress)})}else{if(1!=v.data.length){var G=Utility.Email.resources.AllInvalidEmailError;return o&&"Email"!=p&&(G+=dojo.string.substitute(" "+Utility.Email.resources.EmailFieldQueried,["Contact."+p])),void Dialogs.showInfo(G)}y=v.data[0],B(z.rtTo,y.firstName,y.lastName,y.emailAddress)}var H=dojo.isString(c)?c:"",I=dojo.isString(d)?d:"",J=I.length>13&&0===I.indexOf("<HTML",I.substring(0,4).toUpperCase());g.writeEmail(A,H,I,J,n)}},failure:function(a,b){var c={message:Utility.Email.resources.EntityInfoError};Utility.ErrorHandler.handleHttpError(a,b,c)},scope:this})})()}})},writeEmailToGroupSelection:function(a,b,c,d){if("list"!=Utility.getModeId())return void Dialogs.showInfo(Utility.Email.resources.CapabilityModeError);var e=Sage.Services.getService("ClientGroupContext");if(dojo.isObject(e)){var f=e.getContext().CurrentTable;if(!this.isWriteEmailToIdsSupported(f))return void Dialogs.showError(Utility.Email.resources.CapabilityEntityError);var g=dijit.byId("list");if(dojo.isObject(g)){var h=g.getSelectionInfo();if(!dojo.isObject(h)||!h.hasOwnProperty("selectionCount")||h.selectionCount<=0)return void Dialogs.showInfo(Utility.Email.resources.NoRowsSelectedError);var i=new Array(h.selections.length);dojo.forEach(h.selections,function(a,b){i[b]=a.id}),this.writeEmailToIds(i,f,a,b,c,d)}}}}),Sage.Utility.Email})},"Sage/Utility/Jobs":function(){define(["Sage/Utility","dojo/date/locale","dojo/string","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/_base/connect","Sage/UI/Dialogs","dojo/i18n!./nls/Jobs","dijit/ProgressBar","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Data/SDataServiceRegistry","dojo/_base/lang","dojo/_base/array","dijit/registry","dijit/form/Button","dijit/Dialog"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return Sage.namespace("Utility.Jobs"),n.mixin(Sage.Utility.Jobs,{_intervalId:null,_triggerId:null,_jobService:null,_options:null,_pollIntervalInSeconds:5,progressDialog:!1,progressBar:!1,cancelButton:null,triggerJobAndDisplayProgressDialog:function(b){if(this._reset(),this._validateOptions(b)){this._options={key:b.key,closable:"boolean"!=typeof b.closable||b.closable,infoMessage:"string"==typeof b.infoMessage?b.infoMessage:"",title:"string"==typeof b.title?b.title:j.defaultProgressDialogTitle,showDismissButton:"boolean"!=typeof b.showDismissButton||b.showDismissButton,width:"number"==typeof b.width?b.width:400,indeterminate:"boolean"==typeof b.indeterminate&&b.indeterminate,maximum:"number"==typeof b.maximum?b.maximum:100,showCompleteNotification:"boolean"==typeof b.showCompleteNotification&&b.showCompleteNotification,showErrorNotification:"boolean"!=typeof b.showErrorNotification||b.showErrorNotification,failure:b.failure,complete:b.complete,ensureZeroFilters:!0===b.ensureZeroFilters};var c={descriptor:b.descriptor,key:b.key,parameters:b.parameters,success:n.hitch(this,function(a){this._showProgressDialog(a.response?a.response.triggerId:a.$key)}),failure:n.hitch(this,function(b,c){if(this._options.showErrorNotification){var d=this._errorMessageHandlingBaseOffRequestStatus(b.status,!0);""===d?a.ErrorHandler.handleHttpError(b,c):i.showError(d,this._options.title)}if(this._options.failure){var e=this._getErrorMessage(b);this._options.failure(e)}})};this._jobService=Sage.Services.getService("JobService"),this._jobService.scheduleJob(c),h.publish("/job/execution/changed",[this])}},formatElapsedTime:function(a){return a||(a="00:00:00.00000"),a.split(".")[0]},formatJobDescription:function(a){return a?a.$descriptor:""},formatDate:function(a){if(!a)return"";var c=new Date(parseInt(a.substr(6),10));return b.format(c,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},formatUser:function(a){return a?a.$descriptor:""},formatRepeatCount:function(a){return-1===a?j.repeatIndefinitely:a},formatJobResultGrid:function(a,b){var c=a;return c?Sage.Utility.Jobs.formatJobResultLink(c,b.trigger):""},formatJobResult:function(a){var b=a.result;return b?Sage.Utility.Jobs.formatJobResultLink(b,a.trigger):""},formatJob:function(a){return a?Sage.Utility.Jobs.formatJobResultLink(a.result,a.trigger):""},formatJobResultLink:function(a,b){if(a&&"string"==typeof a){var d=a.split("://");if(1===d.length)return d[0];if(d.length>1)switch(d[0]){case"SlxAttachment":return c.substitute('<a href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${1}\');" title="${0}">${0}</a>',[b?b.$descriptor:"",d[1]]);case"GoToEntity":return c.substitute('<a href="${0}.aspx?entityid=${1}&modeid=Detail">${2}</a>',[d[1],d[2],b?b.$descriptor:""]);case"GoToGroup":return c.substitute("<a href=\"javascript: Sage.Utility.Jobs.gotoGroup('${1}','${2}');\" title=\"${0}\">${0}</a>",[b?b.$descriptor:"",d[1],d[2]])}}return""},getTriggerDescription:function(a){return a?a.$descriptor?a.$descriptor:a.$key:""},formatProgress:function(a){return a&&"number"==typeof a||(a=0),new k({indeterminate:!1,maximum:100,value:a}).domNode},getParameterRunAsUser:function(b){if(b){var c=this._getParameterValue(b,"RunAsUserId");return a.getUserName(c)}return""},refreshList:function(a){try{var b=p.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}},getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},getLookupConditionsForJob:function(){var a=[],b=Sage.Services.getService("ClientGroupContext");if(b){var c=b.getContext();if(c&&"LOOKUPRESULTS"===c.CurrentGroupID&&c.LookupResultsConditions){var d=Sys.Serialization.JavaScriptSerializer.deserialize(c.LookupResultsConditions);o.forEach(d,n.hitch(this,function(b){a.push({dataPath:this._getDataPathFromLayout(b.fieldname),op:this._getConditionValue(b.operator),value:b.val})}))}}return a},_getDataPathFromLayout:function(a){for(var b=p.byId("list"),c=b._configurationProvider._currentConfiguration?b._configurationProvider._currentConfiguration.layout:null,d=0;d<c.length;d++){var e=c[d];if(e&&e.alias===a)return e.dataPath}return a},getFiltersForJob:function(){var a,b=[],c=p.byId("list"),d=c.get("filterManager"),e=c._configurationProvider._currentConfiguration?c._configurationProvider._currentConfiguration.layout:null,f=c._configurationProvider._currentConfiguration?c._configurationProvider._currentConfiguration.tableAliases:{},g=null,h=null,i=null;for(var j in d._applied)if(d._applied.hasOwnProperty(j)&&(g=d._applied[j]))switch(h=d._definitionSet[j],a=h.details.rangeFilter&&"rangeFilter"||h.details.distinctFilter&&"distinctFilter"||h.details.lookupFilter&&"lookupFilter",i=this._resolveProperty(e,f,h.propertyName),a){case"rangeFilter":b.push({filterName:h.filterName,tableName:i.tableName,field:i.alias,filterType:"Range",ranges:this._getFilterValues(g,a)});break;case"distinctFilter":b.push({filterName:h.filterName,tableName:i.tableName,field:i.alias,filterType:"Distinct",value:this._getFilterValues(g,a)});break;case"lookupFilter":b.push({filterName:h.filterName,filterType:"Lookup",tableName:i.tableName,field:i.alias,op:g.value.operator,value:[g.value.value]})}return b},_validateOptions:function(a){return!!a&&"string"==typeof a.key},_reset:function(){this._intervalId=null,this._options=null,this._triggerId=null},_getErrorMessage:function(a){return c.substitute(j.errorMessage,[this._options.key,a.status,a.statusText])},_getUnexpectedErrorMessage:function(){return c.substitute(j.unexpectedErrorMessage,[this._options.key])},_getParameterValue:function(a,b){var c="";return a&&o.some(a,function(a,d){if(a.name===b)return c=a.value,!0}),c},_updateProgressDialog:function(a){if(this.progressBar&&(a&&"number"==typeof a.progress&&this.progressBar.update({progress:a.progress}),a&&"string"==typeof a.title&&this.progressBar.update({title:a.title}),a&&"string"==typeof a.infoMessage)){var b=e.byId("progressDialogMessageDiv");b&&(b.innerHTML=a.infoMessage)}},_showProgressDialog:function(a){this._triggerId=a;var b=this._options;this.progressDialog=new r({title:b.title,style:c.substitute("width: ${0}px;",[b.width]),closable:b.closable});var d=new g.create("div",{innerHTML:b.infoMessage,style:"text-align: left; margin-top: 5px; margin-bottom: 10px",id:"progressDialogMessageDiv"});this.progressDialog.containerNode.appendChild(d);var e=new g.create("div",{style:"text-align: left; margin-top: 5px; margin-bottom: 10px",id:"progressDialogLinkDiv",class:"display-none"});if(this.progressDialog.containerNode.appendChild(e),this.progressBar=new k({style:"margin-top: 10px; margin-bottom: 20px",indeterminate:b.indeterminate,maximum:b.maximum,progress:0}),this.progressDialog.containerNode.appendChild(this.progressBar.domNode),b.showDismissButton){this.cancelButton=new q({label:j.cancelButtonCaption,style:"margin-right: 3px;",onClick:n.hitch(this,function(){this._cancelJob()})});var f=new q({label:j.closeButtonCaption,onClick:n.hitch(this,function(){this._closeProgressDialog()})}),h=new g.create("div",{id:"progressDialogButtonDiv",style:"text-align: center;"});h.appendChild(this.cancelButton.domNode),h.appendChild(f.domNode),this.progressDialog.containerNode.appendChild(h)}this.progressDialog.show(),this.progressDialog.helpIcon||(n.mixin(this.progressDialog,new l),this.progressDialog.createHelpIconByTopic("jobsProgressDialog")),this._intervalId=setInterval(function(){Sage.Utility.Jobs._updateProgress()},1e3*this._pollIntervalInSeconds)},_cancelJob:function(){clearInterval(this._intervalId),this.jobService||(this._jobService=Sage.Services.getService("JobService")),this._jobService.interruptExecution(this._options),this._closeProgressDialog()},_closeProgressDialog:function(){clearInterval(this._intervalId),this.progressDialog&&(this.progressDialog.hide(),this.progressDialog.destroyDescendants(),this.cancelButton&&this.cancelButton.destroyRecursive())},_updateProgress:function(){var b=Sage.Services.getService("JobService"),d={triggerId:this._triggerId,success:n.hitch(this,function(b,g){if(d={progress:b.progress},this._updateProgressDialog(d),"Complete"===b.status){f.add(this.cancelButton,"display-none"),clearInterval(this._intervalId);var k=e.byId("progressDialogMessageDiv");k&&(k.innerHTML=j.jobCompletedSuccessfully);var l=e.byId("progressDialogLinkDiv");if(l&&b.result){var m=b.result.split("://");if(m.length>1)switch(f.remove(l,"display-none"),m[0]){case"SlxAttachment":l.innerHTML=c.substitute('<a onclick="Sage.Utility.Jobs._closeProgressDialog();" href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${1}\');" title="${0}">${0}</a>',[b.trigger?b.trigger.$descriptor:"",m[1]]);break;case"GoToEntity":l.innerHTML=c.substitute('<a onclick="Sage.Utility.Jobs._closeProgressDialog();" href="${0}.aspx?entityid=${1}&modeid=Detail">${2}</a>',[m[1],m[2],b.trigger?b.trigger.$descriptor:""]);break;case"GoToGroup":l.innerHTML=c.substitute('<a onclick="Sage.Utility.Jobs._closeProgressDialog();" href="javascript: Sage.Utility.Jobs.gotoGroup(\'${1}\',\'${2}\');" title="${0}">${0}</a>',[b.trigger?b.trigger.$descriptor:"",m[1],m[2]])}}this.cancelButton&&this.cancelButton.destroyRecursive(),this._options.showCompleteNotification&&i.showInfo(j.jobCompletedSuccessfully,this._options.title),this._options.complete&&this._options.complete(b),this._refreshFavorites(),h.publish("/job/execution/changed",[this])}"Error"===b.status&&(clearInterval(this._intervalId),i.closeProgressBar(),this._options.showErrorNotification&&a.ErrorHandler.handleHttpError(b,g),this._options.failure&&this._options.failure(b),this.cancelButton&&this.cancelButton.destroyRecursive())}),failure:n.hitch(this,function(b,c){if(clearInterval(this._intervalId),i.closeProgressBar(),this._options.showErrorNotification){var d=this._errorMessageHandlingBaseOffRequestStatus(b.status,!0);""===d?a.ErrorHandler.handleHttpError(b,c):i.showError(d,this._options.title)}this._options.failure&&this._options.failure(b),this.cancelButton&&this.cancelButton.destroyRecursive()})};b.getExecution(d)},_getConditionValue:function(a){switch(a){case"sw":return"STARTING WITH";case"ne":return"<>";case"gt":return">";case"ge":return">=";case"lt":return"<";case"le":return"<=";case"like":return"LIKE";default:return"="}},_parseProperty:function(a,b){var c=a.split(".");return b?c[c.length-1]:a.substr(0,a.length-c[c.length-1].length-1)},_getFilterValues:function(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d))switch(b){case"rangeFilter":c.push({lower:a[d].lower,upper:a[d].upper});break;case"distinctFilter":c.push(d)}return c},_resolveProperty:function(a,b,c){if(a){var d=this._getFilterDataPath(c,a,b,!1,!1);return d||((d=this._getFilterDataPath(c,a,b,!0,!1))||((d=this._getFilterDataPath(c,a,b,!0,!0))||c))}return c},_resolveAliasProperty:function(a,b){var c=a,d="";if(a.indexOf("_")>-1){var e=a.split("_");2===e[0].length&&(c=a.slice(e[0].length+1),o.forEach(b,function(a){if(e[0]===a.alias)return void(d=a.tableName)}))}return{tableName:d,alias:c}},_getFilterDataPath:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;for(f=0;f<b.length;f++){if(h=b[f],m=h.propertyPath,d&&(l=h.propertyPath&&h.propertyPath.split("."),2===l.length&&(m=l[1])),m===a)return h.propertyPath.indexOf(".")>-1?this._resolveAliasProperty(h.alias,c):(j=h.dataPath&&h.dataPath.split(":")[0],/^[a-z]\d+_/i.test(h.alias)?i=h.alias:(k=j&&c[j.toUpperCase()])&&(i=k+"."+h.alias),{tableName:j,alias:i||h.alias});if(e&&""!==h.dataPath&&(n=h.dataPath.split("."),n.length>1)){var o=n[n.length-1],p=o.split("!");if(p.length>1)for(g=0;g<c.length;g++)if(c[g].tableName===p[0])return{tableName:c[g].tableName,alias:p[1]}}}return null},gotoGroup:function(a,b){var d=m.getSDataService("system"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setOperationName("setGroupContext"),f={request:{currentGroupId:b,"currentFamily:":a,clearCache:!0}};e.execute(f,{success:function(){window.parent.location=c.substitute("${0}.aspx?gid=${1}&modeid=list",[a,b])},scope:this})},getRequestMessageFromStatus:function(a){return this._errorMessageHandlingBaseOffRequestStatus(a,!1)},_errorMessageHandlingBaseOffRequestStatus:function(a,b){var c="";switch(a){case 410:c=j.dataExpiredRefreshPage;break;case 500:c=j.JobServerviceOff;break;default:c=b?"":j.generalCheckJobService}return c},_refreshFavorites:function(){var a=m.getSDataService("system"),b=new Sage.SData.Client.SDataServiceOperationRequest(a),c="refreshFavorites";b.setResourceKind("groups"),b.setOperationName(c);var d={$name:c,request:{}};b.execute(d,{success:function(a){},failure:function(a,b){},scope:this})}}),Sage.Utility.Jobs})},"Sage/Groups/GroupLookup":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Dialog","Sage/UI/ConditionManager","Sage/Data/SDataServiceRegistry","Sage/Groups/GroupContextService","dojo/_base/lang","dojo/_base/declare","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/array","dojo/topic","dojo/aspect","Sage/Data/GroupLayoutSingleton","Sage/Utility","dojo/_base/xhr","Sage/UI/Dialogs","dojo/i18n!./nls/GroupLookup","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=h("Sage.Groups.GroupLookupDialog",[a,b],{widgetsInTemplate:!0,conditionMgr:!1,title:"",widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="groupLookupDialog" title="&nbsp;" dojoAttachPoint="dlg" >',"</div>","</div>"]),constructor:function(a){},show:function(){if(this.conditionMgr){var a=Sage.Services.getService("UserOptions");a&&a.get("defaultLookupCondition","DefaultLookupCondition",g.hitch(this,function(a){this.conditionMgr.setFirstConditionValue("",a.value,"")})),g.mixin(this.dlg,new i),this.dlg.createHelpIconByTopic("lookup"),this.dlg.show()}},hide:function(){this.dlg.hide()},_setConditionMgrAttr:function(a){this.conditionMgr=a,dojo.place(this.conditionMgr.domNode,this.dlg.containerNode,"only")},_setTitleAttr:function(a){this.title=a,this.dlg.set("title",a)}}),t=h("Sage.Groups.GroupLookup",null,{conditions:[],_layouts:{},_currentLayoutFamily:!1,service:!1,_dlgWindow:!1,_conditionMgr:!1,_doSearchConnection:!1,_onSearchNavTo:!1,_stayInDetailView:!1,id:"GroupLookup",constructor:function(){this.isInitialized=!1,this._loadUserOptions(),k.subscribe("userOptions/changed",g.hitch(this,this._onUserOptionsChanged))},showLookup:function(a){if(void 0===a){var b=Sage.Services.getService("ClientGroupContext");this._currentLayoutFamily=b.getContext().CurrentFamily,a={family:this._currentLayoutFamily}}if(this._onSearchNavTo=!!a.returnTo&&a.returnTo,!this._layouts.hasOwnProperty(a.family))return this._currentLayoutFamily=a.family,void this._requestLayout({family:a.family,success:this._showInitializedLookup});this._currentLayoutFamily!==a.family&&(this._currentLayoutFamily=a.family),this._resetConditionManager(),
this._showInitializedLookup()},_showInitializedLookup:function(){var a=Sage.Services.getService("ClientEntityContext"),b=a&&a.getContext(),c=b&&b.DisplayName,d=b&&b.EntityTableName,e=this._layouts[this._currentLayoutFamily].mainTable,f=(this._layouts[this._currentLayoutFamily].entityName,this);f.displayName=c;var g=new Sage.SData.Client.SDataResourceCollectionRequest(r.getSDataService("metadata"));g.setResourceKind("entities('"+e+"')"),g.setQueryArg("include","sdata,bulkAction,import"),g.read({success:function(a){if(void 0!==a&&void 0!==a.$resources&&1==a.$resources.length){var b=a.$resources[0];d!==e&&(f.displayName=b.displayName),f._dlgWindow||(f._dlgWindow=new s({conditionMgr:f._conditionMgr})),f._dlgWindow.conditionMgr||f._dlgWindow.set("conditionMgr",f._conditionMgr),f._dlgWindow.set("title",f.displayName),f._dlgWindow.show()}},failure:function(a){}})},doLookup:function(a){var b=Sage.Services.getService("ClientGroupContext"),c=b.getContext(),d=dijit.byId("GroupList");d&&(d.previousGroupId=c.CurrentGroupID),this._ensureService(),this._dlgWindow.hide();var e=this.getConditionsString(),f=new Sage.SData.Client.SDataServiceOperationRequest(this.service);f.setOperationName("setGroupLookupConditions"),f.execute({request:{family:this._currentLayoutFamily,conditions:e,includeConditionsFrom:""}},{success:function(a){var f=this._shouldStayInDetailView(),h=n.getModeId();if(0===this._getGroupCount())return void p.showInfo(q.txtNoRecordsFound);var i=this._onSearchNavTo+"?modeid=list&gid=LOOKUPRESULTS",j=document.location.toString().toLowerCase(),m=this._onSearchNavTo&&this._onSearchNavTo.toLowerCase();return c.CurrentFamily&&this._currentLayoutFamily&&c.CurrentFamily.toUpperCase()===this._currentLayoutFamily.toUpperCase()&&(l.after(b,"onCurrentGroupChanged",g.hitch(this,function(){k.publish("/group/lookup/success",{conditions:e}),f||"detail"!==h||Sage.Link.toListView()})),d&&!f&&(d.shouldNotUpdate=!0),d&&(d.performingLookup=!0),b.setCurrentGroup("LOOKUPRESULTS","",e)),this._onSearchNavTo&&-1===j.indexOf(m)?void(document.location=i):void 0},scope:this})},resetLookup:function(a){},getConditionsString:function(){return this._conditionMgr.getConditionsJSON()},_ensureService:function(){this.service||(this.service=e.getSDataService("system"))},_requestLayout:function(a){if(this._ensureService(),!a.family){var b=Sage.Services.getService("ClientGroupContext");a.family=b.getContext().CurrentFamily||"ACCOUNT"}var c=dojo.string.substitute("name eq 'Lookup Results' and upper(family) eq '${0}'",[a.family.toUpperCase()]),d=g.hitch(this,this._onReadSuccess,a);(new m).getGroupLayout(c,d,null,"LOOKUPRESULTS")},_onReadSuccess:function(a,b){this._layouts[a.family]=b,this._currentLayoutFamily=a.family,this._resetConditionManager(),"function"==typeof a.success&&a.success.call(a.scope||this,b)},_resetConditionManager:function(){if(this._currentLayoutFamily){this._conditionMgr&&(this._conditionMgr.destroy(!1),this._conditionMgr=null);var a=j.filter(this._layouts[this._currentLayoutFamily].layout,function(a){return a.caption&&""!==a.caption&&a.visible});a=j.map(a,function(a){return a.format&&"None"===a.format&&(a.format=a.fieldType),a}),this._conditionMgr=new d({fields:a,fieldNameProperty:"alias",fieldDisplayNameProperty:"caption",fieldTypeProperty:"format",id:this.id+"-ConditionManager"}),this._dlgWindow&&this._dlgWindow.set("conditionMgr",this._conditionMgr),this._doSearchConnection=dojo.connect(this._conditionMgr,"onDoSearch",this,"doLookup")}},destroy:function(){this._doSearchConnection&&(dojo.disconnect(this._doSearchConnection),this._doSearchConnection=!1),this.inherited(arguments)},_onUserOptionsChanged:function(a){this._stayInDetailView=a.groupLookup.stayInDetailView},_loadUserOptions:function(){var a=Sage.Services.getService("UserOptions");a&&a.get("StayInDetailView","GroupLookup",g.hitch(this,function(a){a&&a.value&&(this._stayInDetailView="T"===a.value)}),null,null,!0)},_shouldStayInDetailView:function(){return"detail"===n.getModeId()&&this._stayInDetailView},_getGroupCount:function(){var a=this._currentLayoutFamily,b=0;if(a){o("GET",{url:"slxdata.ashx/slx/system/-/groups(name eq 'Lookup Results' and upper(family) eq '"+a+"')/$queries/execute?count=0&format=json",handleAs:"json",sync:!0,preventCache:!0}).then(function(a){b=a.$totalResults})}return b}});return Sage.Services.addService("GroupLookupManager",new Sage.Groups.GroupLookup),t})},"Sage/UI/SearchMenuItem":function(){define(["dojo/_base/declare","dijit/MenuItem","dijit/form/TextBox","dijit/form/CheckBox","dijit/form/Button","Sage/UI/ImageButton","dojo/dom-construct","dojo/_base/lang","dojo/has","dojo/_base/sniff","Sage/UI/Controls/_DialogHelpIconMixin","dojo/text!../templates/GridMenuItem.html","dojo/i18n!./nls/SearchMenuItem","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return a("Sage.UI.SearchMenuItem",b,{id:"groupSearchMenuItem",templateString:l,seedQuery:"",findText:"Find: ",clearText:"Clear",textBox:null,findButton:null,clearButton:null,showHiddenCheck:null,registeredWidgets:null,_gridMenuItem:null,startup:function(){this.inherited(arguments);var a=h.hitch(this,function(a){9===a.keyCode&&(a.cancelBubble=!0)});m&&(this.findText=m.findText,this.clearText=m.clearText),this.getParent().on("open",h.hitch(this,this.init)),i("mozilla")?this.getParent().on("keyPress",a):this.getParent().on("keyDown",a)},init:function(){this.started||n.subscribe("sage/ui/groups/gridMenuStarted",h.hitch(this,function(a){this.started||(this.registeredWidgets=[],this._createSearchTextBox()),this._gridMenuItem=a,this._setQuery(),this.started=!0}));var a=h.hitch(this,function(){this.focusText()});setTimeout(a,100)},focusText:function(){this.textBox&&this.textBox.focus&&this.textBox.focus()},_createSearchTextBox:function(){this.textBox=new c,this.textBox.startup(),this.registeredWidgets.push(this.textBox);var a=h.hitch(this,function(a){13===a.keyCode&&this._setQuery(),37!==a.keyCode&&39!==a.keyCode&&9!==a.keyCode||(a.cancelBubble=!0)});i("mozilla")?this.textBox.on("keyPress",a):this.textBox.on("keyDown",a),this.textBox.on("click",function(a){a.cancelBubble=!0}),g.place(this.textBox.domNode,this.containerNode,"only"),g.create("label",{for:this.textBox.id,innerHTML:this.findText+": ",class:"groupMenuLabel"},this.containerNode,"first"),this.findButton=new f({imageClass:"icon_Find_16x16",class:"groupMenuButton",title:this.findText,onClick:h.hitch(this,function(a){a.cancelBubble=!0,this._setQuery()})}),this.clearButton=new e({label:this.clearText,class:"groupMenuButton",title:this.clearText,onClick:h.hitch(this,function(a){a.cancelBubble=!0,this.textBox.set("value",""),this._setQuery()})}),g.place(this.findButton.domNode,this.containerNode,"last"),g.place(this.clearButton.domNode,this.containerNode,"last"),g.create("div",{id:"exceedMaxGroupMsg",innerHTML:"",class:"groupMenuLabel groupMenuMsg"},this.containerNode,"last"),this.titleBar=this.containerNode,h.mixin(this,new k),this.createHelpIconByTopic("Group_Manager"),g.place(this.helpIcon,this.containerNode,"last"),this.registeredWidgets.push(this.findButton),this.registeredWidgets.push(this.clearButton)},_setQuery:function(a){var b=dijit.byId("groupsGridInMenu"),c=this.textBox.get("value").replace(/'/g,"''"),d=[];b&&(this.seedQuery||(this.seedQuery=this._gridMenuItem.store.where?this._gridMenuItem.store.where:""),this.seedQuery&&d.push(this.seedQuery),c&&(c=this._escapeSearchText(c),d.push("upper(displayName) like '%"+c.toUpperCase()+"%'")),this._gridMenuItem.query=d.join(" and "),b.setStore(this._gridMenuItem.store,this._gridMenuItem.query))},_escapeSearchText:function(a){return a=a.replace(/\[/g,"[[]").replace(/_/g,"[_]").replace(/%/g,"[%]")},_onClick:function(a){a.cancelBubble=!0},destroy:function(){var a;if(null!==this.registeredWidgets)for(a=0;a<this.registeredWidgets.length;a++)this.registeredWidgets[a].destroy(!1),this.registeredWidgets.splice(a,1);this.inherited(arguments)}})})},"Sage/Layout/main":function(){define(["Sage/Layout/ContentPane","Sage/Layout/TabContainer","Sage/Layout/MainContentDetailsPane","Sage/Layout/_SplitterEnhancedMixin"],function(){})},"Sage/Layout/ContentPane":function(){define(["dojo/_base/declare","dijit/layout/ContentPane","Sage/Layout/_SplitterEnhancedMixin"],function(a,b,c){return a("Sage.Layout.ContentPane",[b,c],{})})},"Sage/Layout/_SplitterEnhancedMixin":function(){define(["dojo/_base/declare","dojo/_base/connect","dojox/storage/LocalStorageProvider","dojo/dom-style","dojo/_base/sniff"],function(a,b,c,d,e){return a("Sage.Layout._SplitterEnhancedMixin",null,{postCreate:function(){this.inherited(arguments),this.storageId=this.id},startup:function(){if(this.inherited(arguments),e("ie")&&(this._widthPadding=19),!0===this.splitter){this._addEventHandlers(),this._addEventSubscribers();var a=this._getFromLocalStorage(this.storageId);null===a&&(a={h:this.domNode.scrollHeight+5,w:this.domNode.scrollWidth}),this._setupStyle(a),this.resize(a),this._setDefaults(a)}},splitterDblClick:null,splitterStopDrag:null,storageId:null,_defaultHeight:310,_defaultWidth:180,_widthPadding:2,_setDefaults:function(a){"top"!==this.region&&"bottom"!==this.region||a.h===this.minSize||(this._defaultHeight=a.h),("right"===this.region||"left"===this.region)&&a.w>this.minSize+this._widthPadding&&(this._defaultWidth=a.w)},_addEventHandlers:function(){var a=dijit.byId([this.id,"_splitter"].join(""));void 0!==a&&(null===this.splitterStopDrag&&(this.splitterStopDrag=this.connect(a,"_stopDrag",function(){"top"===this.region&&(this.h===this.minSize?b.publish(["Sage/events/",this.id,"/splitterMinSize"].join(""),this):b.publish(["Sage/events/",this.id,"/splitterMovedNotMin"].join(""),this)),this._setDefaults({h:this.h,w:this.w}),this._saveToLocalStorage(this.storageId,{h:this.h,w:this.w})})),null===this.splitterDblClick&&(this.splitterDblClick=this.connect(a,"onDblClick",function(){this.toggleSplitter(),b.publish(["Sage/events/",this.id,"/splitterToggled"].join(""),this)})))},_addEventSubscribers:function(){b.subscribe(["Sage/events/",this.id,"/toggleSplitter"].join(""),this,"toggleSplitter")},toggleSplitter:function(){var a={},b=dijit.byId([this.id,"_splitter"].join("")),c=dijit.byId("Viewport");void 0!==b&&null!==b&&("top"!==this.region&&"bottom"!==this.region||(a=this.h===this.minSize?{h:this._defaultHeight,w:this.w}:{h:this.minSize,w:this.w}),"right"!==this.region&&"left"!==this.region||(a=this.w<this.minSize+this._widthPadding?{h:this.h,w:this._defaultWidth}:{h:this.h,w:this.minSize}),19===a.w&&(a.w=this._defaultWidth),this._setupStyle(a),this.resize(a),c.resize(),this._saveToLocalStorage(this.storageId,a))},_setupStyle:function(a){if(this.domNode){var b=!1;"top"!==this.region&&"bottom"!==this.region||(b=a.h===this.minSize),"right"!==this.region&&"left"!==this.region||(b=a.w<this.minSize+this._widthPadding),b?d.set(this.domNode,"overflow","hidden"):d.set(this.domNode,"overflow","auto")}},_saveToLocalStorage:function(a,b){var d=new c;d.initialize(),d.put(a,b,function(a,b,c){d.FAILED})},_getFromLocalStorage:function(a,b){var d=new c;return d.initialize(),d.get(a,b)}})})},"Sage/Layout/TabContainer":function(){define(["dojo/_base/declare","dojo/ready","dojo/aspect","dijit/layout/TabContainer","Sage/Utility/Workspace"],function(a,b,c,d,e){return a("Sage.Layout.TabContainer",[d],{region:"center",destroyRecursive:function(){this.tablist&&this.tablist.destroy(),this.inherited(arguments)},postCreate:function(){c.after(this,"startup",function(){var a=e.getDetailTabWorkspaceContainer();a.resize(),a.resize()})}})})},"Sage/Layout/MainContentDetailsPane":function(){define(["dojo/_base/declare","dojo/dom-style","Sage/Layout/ContentPane"],function(a,b,c){return a("Sage.Layout.MainContentDetailsPane",[c],{postCreate:function(){this.inherited(arguments);var a=Sage.Services.getService("ClientEntityContext");if(a){var b=a.getContext();this.storageId=[b.EntityType.replace(/\./g,"_"),"_",this.id].join("")}this.connect(this,"startup",this.noContentResize)},mainPaneChildrenExist:!0,tabPaneChildrenExist:!0,tabContentDivExists:!0,noContentResize:function(){var a={h:this.domNode.scrollHeight,w:this.domNode.scrollWidth},c=this,d=function(){c.resize(a),c._splitterWidget&&b.set(c._splitterWidget.domNode,"display","none")};if(!this.tabPaneChildrenExist){var e=dijit.byId("centerContent");a={h:e.domNode.scrollHeight,w:this.domNode.scrollWidth},d()}this.mainPaneChildrenExist||(a={h:1,w:this.domNode.scrollWidth},d()),this.tabContentDivExists||b.set("mainContentDetails","height","100%")},startup:function(){var a=dijit.byId("Viewport"),b=dijit.byId("tabContent");this.tabContentDivExists=void 0!==b;var c=dojo.query("[id$=_inner]",dojo.query(".mainContentContent")[0])[0];if(this.mainPaneChildrenExist=!!c&&(c.children.length>1||dojo.query("#MainContent .formtable").length>0||"GeneralExceptioncontents_inner"===c.id),this.tabPaneChildrenExist=!!this.tabContentDivExists&&b.domNode.children.length>0,this.tabPaneChildrenExist&&this.mainPaneChildrenExist||this.set("splitter",!1),this.splitter){var d=dojo.query("[class$=SecondaryToggle]");if(d)for(var e=0;e<d.length;e++)dojo.style(d[e],"display","none")}a&&a.resize(),this.inherited(arguments)}})})},"Sage/Library/main":function(){define(["Sage/Library/DocumentProperties","Sage/Library/FileHandler","Sage/Library/FolderHandler","Sage/Library/Manager"],function(){})},"Sage/Library/DocumentProperties":function(){define(["Sage/_Templated","dijit/_Widget","dojo/i18n","Sage/Utility","dijit/Dialog","dijit/form/CheckBox","dijit/form/DateTextBox","dijit/form/Form","dijit/form/Textarea","dijit/form/TextBox","dijit/form/ValidationTextBox","dijit/layout/LayoutContainer","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/dom-construct","dojo/i18n!./nls/DocumentProperties","dojo/text!./templates/DocumentProperties.html","dojo/_base/declare"],function(_Templated,_Widget,i18n,Utility,Dialog,CheckBox,DateTextBox,Form,Textarea,TextBox,ValidationTextBox,LayoutContainer,DialogHelpIconMixin,dLang,domConstruct,nls,template,declare){var oDocumentProperties=declare("Sage.Library.DocumentProperties",[_Widget,_Templated],{_cancelClick:function(){this.hide()},_dialog:!1,_doNotExpireChange:function(a){if(this._ready)if(!0===a)this._updateExpires(!1,null);else{var b=dijit.byId("expireDate$originalValue").get("value"),c=new Date;b&&dojo.isString(b)&&Utility.Convert.isDateString(b)&&(c=Utility.Convert.toDateFromString(b),c=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate())),this._updateExpires(!0,c)}},_neverExpireDate:new Date(2099,0,1),_ready:!1,_submitClick:function(){this.hide(),Sage.Library.FileHandler.validateProperties(this.getData())},_updateExpires:function(a,b){if(!1===a){var c=dijit.byId("neverExpireControl");c||(c=new TextBox({},"neverExpireControl"),c.set("disabled","disabled")),c.set("value",this.resources.Never),dijit.byId("expireDate").set("value",this._neverExpireDate),dojo.place(c.domNode,"expiresRoot","only")}else{var d=dijit.byId("expireDateControl");d||(d=new DateTextBox({},"expireDateControl"),d.set("onChange",function(a){dijit.byId("expireDate").set("value",a)})),d.set("value",b),dojo.place(d.domNode,"expiresRoot","only")}},resources:{},constructor:function(){this.inherited(arguments),this.resources={}},postMixInProperties:function(){dLang.mixin(this.resources,nls),this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=dijit.byId("fileName");a&&(a.regExp='[^\\\\/:"*?<>|\r\n]+',a.invalidMessage=this.resources.InvalidFileName),dLang.mixin(this._dialog,new DialogHelpIconMixin),this._dialog.createHelpIconByTopic("libraryfileproperties")},getData:function(){var a=dijit.byId("propertiesForm");return!!a&&a.get("value")},hide:function(){this._dialog.hide()},show:function(a,b){this._ready=!1;var c=this,d=dijit.byId("propertiesForm");this._dialog.onFocusEvent||(this._dialog.onFocusEvent=dojo.connect(this._dialog,"onFocus",function(){d&&(c._updateExpires(a.expires,a.expireDate),d.set("value",a)),c._ready=!0})),this._dialog.onHideEvent||(this._dialog.onHideEvent=dojo.connect(this._dialog,"onHide",function(){dojo.disconnect(c._dialog.onFocusEvent),dojo.disconnect(c._dialog.onHideEvent),c._dialog.onFocusEvent=null,c._dialog.onHideEvent=null,c._ready=!1})),dijit.byId("doNotExpire").set("checked",!1===a.expires),dijit.byId("forceDistribution").set("checked",1===a.flags),dijit.byId("directory.fullPath").set("readOnly",!0),dijit.byId("status").set("readOnly",!0),dijit.byId("fileSize").set("readOnly",!0),b&&(dijit.byId("doNotExpire").set("disabled","disabled"),dijit.byId("forceDistribution").set("disabled","disabled"),dijit.byId("fileName").set("readOnly",!0),dijit.byId("revisionDate").set("disabled","disabled"),dijit.byId("description").set("readOnly",!0),dijit.byId("abstract").set("readOnly",!0),dijit.byId("okButton").set("disabled","disabled")),this._dialog.show()},widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template))});return oDocumentProperties})},"Sage/Library/FileHandler":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Services/RoleSecurityService","Sage/Services/SystemOptions","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/Utility/File/DragDropWatcher","Sage/Utility/File/DefaultDropHandler","Sage/Utility/File/FallbackFilePicker","Sage/Utility/File/LibraryDocument","Sage/Library/DocumentProperties","Sage/UI/Dialogs","Sage/Utility","dijit/ProgressBar","dojo/i18n","dojo/parser","dojo/string","dojo/dom-construct","dojo/dom-attr","dojo/_base/lang","dojo/_base/window","dojo/i18n!./nls/FileHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return Sage.namespace("Library.FileHandler"),dojo.mixin(Sage.Library.FileHandler,{_docPropsDlg:!1,_fileInputBtn:!1,_createFileInputBtn:function(){var a=this;this._fileInputBtn=t.doc.createElement("INPUT"),r.set(this._fileInputBtn,{type:"file",multiple:"true",accept:"*/*",class:"display-none",onchange:function(b){a.handleHTML5Files(b)}}),q.place(this._fileInputBtn,"filePicker")},_getNewRequest:function(){var a=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Library.FileHandler._system);return a.setResourceKind("libraryDocuments"),a.setQueryArg("format","json"),a},_initSecurity:function(){this.can.add=this._roles.hasAccess("Entities/LibraryDocs/Add"),this.can.edit=this._roles.hasAccess("Entities/LibraryDocs/Edit"),this.can.delete=this._roles.hasAccess("Entities/LibraryDocs/Delete"),this.can.manage=this._roles.hasAccess("Administration/Manage/Library")||this._roles.hasAccess("Administration/View")},_remote:!1,_roles:null,_system:null,can:{add:!1,edit:!1,delete:!1,manage:!1},resources:{},init:function(){var b=Sage.Services.getService("SystemOptions");b&&b.get("DbType",function(a){this._remote=a&&2==a},function(){},this),Sage.Library.FileHandler._roles=Sage.Services.getService("RoleSecurityService"),Sage.Library.FileHandler._initSecurity(),Sage.Library.FileHandler._system=a.getSDataService("system"),s.mixin(Sage.Library.FileHandler.resources,u),(Sage.Library.FileHandler.can.add||Sage.Library.FileHandler.can.manage)&&dojo.connect(f,"onFilesDropped",this,"onFilesDropped"),this._createFileInputBtn(),Sage.Utility.File.DefaultDropHandler.fileType=Sage.Utility.File.fileType.ftLibraryDocs},addFiles:function(){if(!Sage.Library.FileHandler.can.add&&!Sage.Library.FileHandler.can.manage)return void Sage.Library.FileHandler.showAccessError();if(d.supportsHTML5File)Sage.Library.FileHandler._fileInputBtn.click();else{var a=dijit.byId("fallbackFilePicker");a||(a=new h({id:"fallbackFilePicker",fileType:Sage.Utility.File.fileType.ftLibraryDocs})),a.show()}},deleteFile:function(a,b,c){if(!Sage.Library.FileHandler.can.delete&&!Sage.Library.FileHandler.can.manage)return void Sage.Library.FileHandler.showAccessError();var d=Sage.Library.FileHandler._getNewRequest();d.setResourceSelector("'"+a+"'"),d.delete({},{scope:this,ignoreETag:!0,success:function(){b&&"function"==typeof b&&b()},failure:function(a,b){c&&"function"==typeof c?c(a,b):l.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FileHandler.resources.FileDeleteError})}})},updateProperties:function(a,b,c,d){if(!Sage.Library.FileHandler.can.edit&&!Sage.Library.FileHandler.can.manage)return void Sage.Library.FileHandler.showAccessError();var e=Sage.Library.FileHandler._getNewRequest();e.setResourceSelector("'"+a+"'"),e.setQueryArg("_includeFile","false"),e.update(b,{scope:this,success:function(a){c&&"function"==typeof c&&c(a)},failure:function(a,b){d&&"function"==typeof d?d(a,b):4==a.readyState&&412==a.status?Sage.UI.Dialogs.showError(Sage.Library.FileHandler.resources.DocumentUpdateConflictError):l.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FileHandler.resources.DocumentPropertiesUpdateError})}})},onFilesDropped:function(a,b){Sage.Utility.File.DefaultDropHandler.fileType=Sage.Utility.File.fileType.ftLibraryDocs},documentProperties:function(){return!1===Sage.Library.FileHandler._docPropsDlg&&(Sage.Library.FileHandler._docPropsDlg=new j),Sage.Library.FileHandler._docPropsDlg},getSelectedRow:function(a){try{a||(a="$key");var b=dijit.byId("libraryGrid");if(b){var c=b.grid.selectedItem;if(c)return c[a]}return!1}catch(a){return!1}},handleHTML5Files:function(a){this._fileInputBtn.files.length>0&&i.createDocuments(this._fileInputBtn.files),q.destroy(Sage.Library.FileHandler._fileInputBtn),this._createFileInputBtn()},handleAddButtonClicked:function(a){Sage.Library.FileHandler.addFiles()},findDirectoryId:function(a){if(!a)return Sage.Library.Manager?Sage.Library.Manager.getOpenFolderId():"";try{var b=dijit.getEnclosingWidget(a);if(b&&"object"==typeof b&&b.isTreeNode&&b.item)return!0!==b.item.root?b.item.id&&dojo.isArray(b.item.id)&&1==b.item.id.length?b.item.id[0]:"":b.item.id}catch(a){}return Sage.Library.Manager?Sage.Library.Manager.getOpenFolderId():""},editLibraryFileProps:function(){var a=Sage.Library.FileHandler.getSelectedRow();if(a){var b=!(Sage.Library.FileHandler.can.edit||Sage.Library.FileHandler.can.manage);Sage.Library.FileHandler.showPropertiesDialog(a,b)}else Sage.UI.Dialogs.showInfo(Sage.Library.FileHandler.resources.PleaseSelectFile)},validateProperties:function(a){if((Sage.Library.FileHandler.can.edit||Sage.Library.FileHandler.can.manage)&&a){if("undefined"!=typeof console)try{dojo.clone(a)}catch(a){}var b=["abstract","createDate","description","expireDate","expires","fileName","flags","revisionDate","doNotExpire","forceDistribution","status","fileSize","directory"];dojo.forEach(b,function(b){if(a.hasOwnProperty(b)){var c,d,e=a[b];switch(b){case"expireDate":case"revisionDate":if((c=a[b+"$originalValue"])&&dojo.isString(c)&&l.Convert.isDateString(c)){var f=l.Convert.toDateFromString(c);f=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),e&&e.toString()===f.toString()&&delete a[b]}break;case"doNotExpire":if(e&&a.hasOwnProperty("expires")){d=dojo.isArray(e)&&e.length>0&&"on"===e[0];var g=a.expires;null===g&&(g="false"),!d&&"true"==g||d&&"false"==g?delete a.expires:a.expires=!d}delete a[b];break;case"forceDistribution":if(e&&a.hasOwnProperty("flags")){d=dojo.isArray(e)&&e.length>0&&"on"===e[0];var h=a.flags;null===h&&(h="0"),!d&&"0"===h||d&&"1"===h?delete a.flags:a.flags=d?1:0}delete a[b];break;case"expires":case"flags":break;case"status":case"createDate":case"fileSize":case"directory":delete a[b];break;default:c=a[b+"$originalValue"],null===e&&null===c?delete a[b]:null!==e&&null===c||null===e&&null!==c||dojo.isString(e)&&dojo.isString(c)&&e==c&&delete a[b]}}a.hasOwnProperty(b+"$originalValue")&&delete a[b+"$originalValue"]});var c=!1;if(dojo.some(b,function(b){return!!a.hasOwnProperty(b)&&(c=!0,!0)}),c){var d=a.$key;delete a.$key,Sage.Library.FileHandler.updateProperties(d,a,function(a){dojo.publish("/sage/library/manager/libraryDocuments/refresh",null)})}}},closePropertiesDialog:function(){Sage.Library.FileHandler.documentProperties().hide()},showPropertiesDialog:function(a,b,c){if(a){var d=Sage.Library.FileHandler._getNewRequest();d.setResourceSelector("'"+a+"'"),d.setQueryArg("_includeFile","false"),d.setQueryArg("include","directory/fullPath"),d.read({scope:this,success:function(a){var c=["abstract","createDate","description","expireDate","expires","fileName","flags","revisionDate","status"];dojo.forEach(c,function(b){var c=a[b];switch("createDate"!=b&&(a[b+"$originalValue"]=c),b){case"createDate":case"expireDate":case"revisionDate":if(c&&dojo.isString(c)&&l.Convert.isDateString(c)){var d=l.Convert.toDateFromString(c);a[b]=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate())}break;case"expires":null===c&&(a[b]="false");break;case"flags":null===c&&(a[b]=0);break;case"abstract":case"description":case"fileName":null===c&&(a[b]="");break;case"status":a[b]=Sage.Library.FileHandler.translateStatus(c)}}),Sage.Library.FileHandler.documentProperties().show(a,b)},failure:function(a,b){c&&"function"==typeof c?c(a,b):l.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FileHandler.resources.DocumentPropertiesError})}})}},handleDeleteButtonClicked:function(a,b){var c=Sage.Library.FileHandler.getSelectedRow("fileName");if(c){var d=p.substitute(Sage.Library.FileHandler.resources.DeleteFileCnfmFmt,[c]);Sage.UI.Dialogs.raiseQueryDialog(Sage.Library.FileHandler.resources.Confirm,d,Sage.Library.FileHandler.handleDeleteConfirmed,Sage.Library.FileHandler.resources.Yes,Sage.Library.FileHandler.resources.No,"questionIcon")}else Sage.UI.Dialogs.showInfo(Sage.Library.FileHandler.resources.PleaseSelectFile)},handleDeleteConfirmed:function(a){if(a){var b=Sage.Library.FileHandler.getSelectedRow();b&&Sage.Library.FileHandler.deleteFile(b,function(){dojo.publish("/sage/library/manager/libraryDocuments/refresh",null)})}},logRemoteDocRequest:function(a){if(this._remote){var b=new Sage.SData.Client.SDataServiceOperationRequest(this._system);b.setResourceKind("libraryDocuments"),b.setQueryArg("format","json"),b.setOperationName("RequestLibraryDocument");var c={$name:"RequestLibraryDocument",request:{entity:{$key:a},LibraryDocumentId:a}};b.execute(c,{scope:this,success:function(a){var b=!1;if(dojo.isObject(a)){var c=a.response||null;null!==c&&(b=c.Result||!1)}!1===b&&k.showError(Sage.Library.FileHandler.resources.LogRequestError)},failure:function(a,b){l.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FileHandler.resources.LogRequestError})}})}},showAccessError:function(){Sage.UI.Dialogs.showError(Sage.Library.FileHandler.resources.AccessError)},translateStatus:function(a){if(!dojo.isString(a))return Sage.Library.FileHandler.resources.Unknown;switch(a){case"Available":return Sage.Library.FileHandler.resources.Available;case"Ordered":return Sage.Library.FileHandler.resources.Ordered;case"Delivered":return Sage.Library.FileHandler.resources.Delivered;case"Revised":return Sage.Library.FileHandler.resources.Revised;case"RevisionOrdered":return Sage.Library.FileHandler.resources.RevisionOrdered;case"DeliveredRead":return Sage.Library.FileHandler.resources.DeliveredRead;default:return Sage.Library.FileHandler.resources.Unknown}},updateRemoteStatus:function(a,b,c,d){if(this._remote){var e=Sage.Library.FileHandler._getNewRequest();e.setResourceSelector("'"+a+"'"),e.setQueryArg("_includeFile","false"),e.update({status:b},{scope:this,success:function(a){c&&"function"==typeof c&&c(a)},failure:function(a,b){d&&"function"==typeof d?d(a,b):l.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FileHandler.resources.FileStatusError})}})}}}),Sage.Library.FileHandler.init(),Sage.Library.FileHandler})},"Sage/Services/RoleSecurityService":function(){define(["dijit/_Widget","Sage/Data/SDataServiceRegistry","Sage/Services/ApplicationStateService","Sage/Utility","Sage/Utility/_LocalStorageMixin","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/string"],function(a,b,c,d,e,f,g,h,i){var j=f("Sage.Services.RoleSecurityService",[a,e],{_currentUserId:"",_accessListCache:!1,_enabled:!0,_nameSpace:"Sage_SalesLogix_RoleSecurityService",_clearCache:!1,_state:null,_clearCacheHandler:!1,constructor:function(a){this.inherited(arguments),dojo.mixin(this,a),this._currentUserId=this._getCurrentUserId(),this._state=(new c).addToListOfServices(),this._clearCacheHandler||(this._clearCacheHandler=g.subscribe("service/RoleSecurity/cacheClear",h.hitch(this,this.clearCache)))},postCreate:function(a){this._getFromCache()},_getCurrentUserId:function(){if(!this._currentUserId){var a=Sage.Services.getService("ClientContextService");a&&a.containsKey("userID")&&(this._currentUserId=a.getValue("userID"))}return this._currentUserId},_virtuald:function(){var a=/^\/([^\/]+)\//.exec(location.pathname);return a?a[1]:""},hasAccess:function(a,b){var c=this._internalHasAccess(a);return b&&b(c),c},_internalHasAccess:function(a){if(!this._enabled)return!0;if(!a)return!0;if(""===a.trim())return!0;if("ADMIN"===this._getCurrentUserId().trim())return!0;var b=this._getAccessList();if(b)for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},_getAccessList:function(){if(this._accessListCache)return this._accessListCache.securedActions;var a=this._getFromCache();return!!a&&a.securedActions},_getFromCache:function(){var a=this,b=this._getCurrentUserId(),c=this.getFromLocalStorage(this._nameSpace,this._nameSpace),e=localStorage.getItem(i.substitute("__${0}_modified_at",[this._nameSpace.replace(/_/g,"-")])),f=new Date,g=this._state.getApplicationState("RoleSecurity",null,"GetRoleSecurityStatus");if(g&&g.modifiedDate&&(f=g.modifiedDate),f=d.Convert.toDateFromString(f,!0),f='"'+d.Convert.toIsoStringFromDate(f)+'"',c&&f<e)for(var h=0;h<c.length;h++)if(c[h].userId===b){if(!this._clearCache)return this._accessListCache=c[h],c[h];c.splice(h,1),h--}return this._loadUserAccessList(function(d){c||(c=[]);for(var e=0;e<c.length;e++)c[e].userId===b&&(c.splice(e,1),e--);a._accessListCache=d,c.push(d),a.saveToLocalStorage(a._nameSpace,c,a._nameSpace)},!0),a._accessListCache},_loadUserAccessList:function(a,c){c=c||!1,new Sage.SData.Client.SDataServiceOperationRequest(b.getSDataService("system")).setContractName("system").setOperationName("getCurrentUser").execute({},{async:c,success:function(b){a&&a(b.response)},failure:function(a){},scope:this})},clearCache:function(){var a=this._nameSpace;this.clear(a.replace(/[^A-Za-z0-9]/g,"-"))}});return Sage.Services.hasService("RoleSecurityService")||Sage.Services.addService("RoleSecurityService",new Sage.Services.RoleSecurityService),j})},"Sage/Services/ApplicationStateService":function(){define(["dijit/_Widget","Sage/Data/SDataServiceRegistry","Sage/Utility","Sage/Utility/_LocalStorageMixin","dojo/_base/declare","dojo/_base/lang","dojo/string"],function(a,b,c,d,e,f,g){return e("Sage.Services.ApplicationStateService",[a,d],{_accessListCache:!1,_enabled:!0,_clearCache:!1,constructor:function(a){this.inherited(arguments),f.mixin(this,a)},setApplicationState:function(a,b,c){b||(b=this._queryForState(a,null,c)),sessionStorage.setItem(a,JSON.stringify(b))},getApplicationState:function(a,b,c){var d=sessionStorage.getItem(a),e=null!==b&&"function"==typeof b;return d?e?void b(d):JSON.parse(d):this._queryForState(a,b,c)},_queryForState:function(a,c,d){d=d||a;var e=null!==c&&"function"==typeof c,f=new Sage.SData.Client.SDataServiceOperationRequest(b.getSDataService("system")).setContractName("system").setOperationName(d),g=null;return f.execute({},{async:e,success:function(b){var d=b.response;d&&sessionStorage.setItem(a,JSON.stringify(d)),g=e?c(d):d},failure:function(a){},scope:this}),g},addToListOfServices:function(){var a=Sage.Services.getService("ApplicationStateService");return a||(Sage.Services.addService("ApplicationStateService",this),a=Sage.Services.getService("ApplicationStateService")),a}})})},"Sage/Services/SystemOptions":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(a,b){var c=b("Sage.Services.SystemOptions",null,{_systemOptions:!1,_systemOptionsByName:!1,notFoundrrorMsg:"A system option was requested that cannot be found.",requestFailedErrorMsg:"A request for system options has failed to return results.",get:function(b,c,d,e){if(this._systemOptions)this._returnOption(b,c,d,e);else{
var f=new Sage.SData.Client.SDataResourceCollectionRequest(a.getSDataService("system",!1,!0,!0));f.setResourceKind("systemoptions"),f.read({success:function(a){this._buildHash(a),this._returnOption(b,c,d,e)},failure:function(a){d.call(e||this,this.requestFailedErrorMsg)},scope:this,async:!1})}},_buildHash:function(a){var b=a.$resources;this._systemOptionsByName={},dojo.forEach(b,function(a){this._systemOptionsByName[a.name]=a},this),this._systemOptions=a.$resources},_returnOption:function(a,b,c,d){this._systemOptionsByName[a]?b.call(d||this,this._systemOptionsByName[a].value):c.call(d||this,this.notFoundrrorMsg)},clearCache:function(){for(var a=sessionStorage.length,b=[],c=0;c<a;c++){var d=sessionStorage.key(c);d.indexOf("systemoptions")>-1&&b.push(d)}for(var e=0;e<b.length;e++)sessionStorage.removeItem(b[e])}});return Sage.Services.addService("SystemOptions",new Sage.Services.SystemOptions),c})},"Sage/Utility/File/DragDropWatcher":function(){define("Sage/Utility/File/DragDropWatcher",["Sage/UI/Dialogs","Sage/Utility/File","dojo/string","dojo/i18n!./nls/DragDropWatcher","dojo/has","dojo/_base/sniff"],function(a,b,c,d,e,f){return Sage.namespace("Utility.File.DragDropWatcher"),Sage.Utility.File.DragDropWatcher={gearsDesktop:!1,allowdDetailDrop:!1,allowdListDrop:!1,init:function(a){Sage.Utility.File.DragDropWatcher.allowdDetailDrop=a.allowDetailDragDrop,Sage.Utility.File.DragDropWatcher.allowdListDrop=a.allowListDragDrop,b.supportsHTML5File?(dojo.connect(dojo.body(),"dragenter",this.handleDragEnter),dojo.connect(dojo.body(),"dragover",this.handleDragOver),dojo.connect(dojo.body(),"dragleave",this.handleDragLeave),dojo.connect(dojo.body(),"drop",this.handleFileDrop)):e("ie")<11?(dojo.connect(dojo.body(),"ondragenter",this.handleGearsDragEnter),dojo.connect(dojo.body(),"ondragover",this.handleGearsDragOver),dojo.connect(dojo.body(),"ondragleave",this.handleGearsDragLeave),e("ie")<9?dojo.connect(dojo.body(),"ondrop",this.handleFileDropNotSupported):dojo.body().attachEvent("ondrop",this.handleFileDropNotSupported)):(dojo.connect(dojo.body(),"dragenter",this.handleDragEnter),dojo.connect(dojo.body(),"dragover",this.handleDragOver),dojo.connect(dojo.body(),"dragleave",this.handleDragLeave),dojo.connect(dojo.body(),"drop",this.handleFileDropNotSupported))},handleDragEnter:function(a){Sage.Utility.File.DragDropWatcher.finishDrag(a,!1)},handleDragLeave:function(a){Sage.Utility.File.DragDropWatcher.finishDrag(a,!1)},handleDragOver:function(a){Sage.Utility.File.DragDropWatcher.finishDrag(a,!1)},handleFileDrop:function(a){if(Sage.Utility.File.DragDropWatcher.finishDrag(a,!0),Sage.Utility.File.DragDropWatcher._AllowDragDrop()){var c=a.dataTransfer.files;if(c&&c.length>0)b.isFileSizeAllowed(c)&&(Sage.Utility.File.DragDropWatcher.onFilesDropped(c,a.target),Sage.Utility.File.DragDropWatcher.finishDrag(a,!1));else if("undefined"!=typeof slx&&slx&&slx.desktop){var d=slx.desktop,e=d.getDragData();(c=e&&e.files)&&c.length>0&&b.isFileSizeAllowed(c)&&(Sage.Utility.File.DragDropWatcher.onFilesDropped(c,a.target),Sage.Utility.File.DragDropWatcher.finishDrag(a,!1))}}},finishDrag:function(a,c){var d=a||window.event;d&&void 0!==d&&(void 0!==this.desktop&&this.desktop.setDropEffect(d,"copy"),dojo.isFF?(c||b.supportsHTML5File)&&(d.stopPropagation(),d.preventDefault()):(Sage.Utility.isIE||dojo.isSafari||dojo.isChrome)&&(c||("function"==typeof d.stopPropagation&&d.stopPropagation(),"function"==typeof d.preventDefault?d.preventDefault():d.returnValue=!1)))},handleGearsDragEnter:function(a){Sage.Utility.File.DragDropWatcher.finishDrag(a,!1)},handleGearsDragLeave:function(a){Sage.Utility.File.DragDropWatcher.finishDrag(a,!1)},handleGearsDragOver:function(a){Sage.Utility.File.DragDropWatcher.finishDrag(a,!1)},handleGearsFileDrop:function(a){if("undefined"!=typeof slx&&slx&&slx.desktop){Sage.Utility.File.DragDropWatcher.finishDrag(a,!0);if(!Sage.Utility.File.DragDropWatcher._AllowDragDrop())return;var b=slx.desktop.getDragData(),c=a.target;c||(c=a.srcElement);var d=b&&b.files;d&&d.length>0&&Sage.Utility.File.isFileSizeAllowed(d)&&Sage.Utility.File.DragDropWatcher.onFilesDropped(d,c)}},onFilesDropped:function(a,b){},_AllowDragDrop:function(){var a=Sage.Utility.getPageName();if("detail"!==Sage.Utility.getModeId()){var b=Sage.Services.getService("ClientEntityContext");if(b){var c=b.getContext();if(c){if("Sage.Entity.Interfaces.IActivity"===c.EntityType)return!0;if("Sage.Entity.Interfaces.IHistory"===c.EntityType)return!0}}return"Library"===(a=a.substring(0,a.indexOf(".")))||!!Sage.Utility.File.DragDropWatcher.allowdListDrop}return!!Sage.Utility.File.DragDropWatcher.allowdDetailDrop},handleFileDropNotSupported:function(b){var e=d.query0||"The feature you are requesting requires the Saleslogix Desktop <br> Integration Module.",f=d.query1||"Find out more...",g=d.query2||"Would you like to install this feature now?",h=d.query3||"Note: This module can be installed at any time from the logon or options pages.",i=Sage.Link.getHelpUrl("desktopintegration"),j=c.substitute('<table><tr><td><span> ${0} <a href="${1}">${2}</a><br><br>${3}<br><br><font style="font-style:italic">${4}<font></span></td></tr></table>',[e,i,f,g,h]),k={title:"Infor CRM",query:j,callbackFn:function(a){a&&slx_installDesktopFeatures()},yesText:null,noText:null,icon:"infoIcon",showNoButton:!0};a.raiseQueryDialogExt(k)}},Sage.Utility.File.DragDropWatcher})},"Sage/Utility/File/DefaultDropHandler":function(){define(["Sage/Utility/File/DragDropWatcher","Sage/Utility/File/Attachment","Sage/Utility/File/LibraryDocument","Sage/UI/Dialogs","dojo/string","Sage/Utility","Sage/Utility/EntityRelationships","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dijit/_Widget","Sage/Services/ActivityService","dojo/i18n","dojo/i18n!./nls/DefaultDropHandler","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/_base/Deferred","dojo/DeferredList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=o("Sage.Utility.File.EmailFileHandler",null,{file:null,histRelIdProperty:"",histRelNameProperty:"",histRelId:"",histRelName:"",extendRelationships:null,entityContext:null,fileMetaData:null,newHistory:null,saveAsMsg:!1,doNotPromptHistory:!1,saveAttachments:!1,emailDroppedText:"Dropped Email",attachmentTitleText:"Save Attachments",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in Infor CRM? <br />The attachments will be stored under the Attachments tab for relevant entities.",deferred:null,handler:null,maxDescriptionLength:64,constructor:function(a){h.mixin(this,a);var b=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("metadata"));b.setResourceKind("entities('History')/properties"),b.setQueryArg("format","json"),b.setQueryArg("Count","500");var c=this;b.read({success:function(a){for(var b=a.$resources,d=0;d<=b.length-1;d++){var e=b[d];if("DESCRIPTION"===e.columnName){c.maxDescriptionLength=e.length;break}}},failure:function(a){}})},handleFile:function(){this.file&&g.getRelationships(this.entityContext,function(a){var b=new i({resourceKind:"history",service:j.getSDataService("dynamic")});b.newItem({onComplete:function(c){var d={};d[this.histRelIdProperty]=this.histRelId,d[this.histRelNameProperty]=this.histRelName,d.Type="atEmail",d.Duration=1,d.Timeless=!1,d.Category=this.emailDroppedText;var e=this.fileMetaData.sentOn?this.fileMetaData.sentOn:this.fileMetaData.receivedTime;e=new Date(e);var g=f.Convert.toIsoStringFromDate(e);d.StartDate=g,d.CompletedDate=g,d.OriginalDate=g,this.fileMetaData.subject&&(d.Description=this.fileMetaData.subject.substring(0,this.maxDescriptionLength)),this.fileMetaData.historyNotes?d.LongNotes=this.fileMetaData.historyNotes:this.fileMetaData.body&&(d.LongNotes=this.fileMetaData.body),"Complete"===c.Result&&(d.Result=n.mailComplete),this.fileMetaData.senderName&&(d.UserDef2=this.fileMetaData.senderName),c=h.mixin(c,d),a&&(c=h.mixin(c,a)),b.saveNewEntity(c,this._historySaved,this._historyFailed,this,!1)},scope:this})},this)},_getAttachmentMixin:function(a,b){var c={};for(var d in b)c[d]=b[d];return c.description=a.filename,c},_historySaved:function(a){this.newHistory=a;var c={};c.HistoryId=a.$key,c.historyId=a.$key;for(var d in a){"ID"===d.substring(d.length-2).toUpperCase()&&a[d]&&(c[d]=a[d])}if(this.saveAsMsg){var e=this._getAttachmentMixin(this.file,c);e.description=a.Description,b.createAttachmentSilent(this.file,e)}if(this.fileMetaData.attachments.length>0&&this.saveAttachments)for(var f=0;f<this.fileMetaData.attachments.length;f++){var g=this.fileMetaData.attachments[f],h=this._getAttachmentMixin(g,c);!g.name&&g.filename&&(g.name=g.filename),b.createAttachmentSilent(g,h)}this._handleTicketActivityCreation(a);try{this.onHistorySaved(a.$key)}catch(a){}},_handleTicketActivityCreation:function(a){var b=a.TicketId,c=a.Type;!dojo.isString(b)||12!==b.length||"atEMail"!==c&&"atAppointment"!==c&&"atPhoneCall"!==c&&"atToDo"!==c||p.publish("/entity/ticketActivity/create",null)},_historyFailed:function(a){},onHistoryFailed:function(){},onHistorySaved:function(a){}});return Sage.namespace("Utility.File.DefaultDropHandler"),Sage.Utility.File.DefaultDropHandler={attachmentTitleText:"Save Attachments",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in Infor CRM? <br />The attachments will be stored under the Attachments tab for relevant entities.",emailDroppedText:"Dropped Email",promptForAttachments:!0,saveAttachments:!1,hasAttachments:!1,options:{},historyQueue:[],historyHandlers:[],fileType:Sage.Utility.File.fileType.ftAttachment,init:function(b){dojo.connect(a,"onFilesDropped",this,"onFilesDropped"),Sage.Utility.File.DefaultDropHandler.options.SAVEMSGFILES=b.saveMSGFiles;var c=Sage.Services.getService("UserOptions");c&&c.get("DoNotPromptHistory","Email",function(a){Sage.Utility.File.DefaultDropHandler.options.DoNotPromptHistory="T"===a.value})},onFilesDropped:function(a,d){var e;if(this.shouldForceAttachments(a,d)){for(var f=[],g=".msg.json",h=0;h<a.length;h++){e=a[h];var i=e.name;-1==i.toLowerCase().indexOf(g,i.length-g.length)&&f.push(e)}return void(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs?b.createAttachments(f):c.createDocuments(f,d))}for(var j=[],k=[],l=0;l<a.length;l++)e=a[l],this.isOutlookEmailFile(e)?j.push(e):k.push(e);j.length>0&&this.handleEmailFiles(j,d),0===j.length&&k.length>0&&(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs?b.createAttachments(k):c.createDocuments(a,d))},shouldForceAttachments:function(a,b){if(b&&Sage.Utility.File.DefaultDropHandler.isTargetAttachmentTab(b.parentElement))return!0;for(var c=".msg.json",d=".msg",e=0;e<a.length;e++){var f=a[e],g=f.name;if(-1!==g.toLowerCase().indexOf(c,g.length-c.length)||-1!==g.toLowerCase().indexOf(d,g.length-d.length))return!1}return!0},isOutlookEmailFile:function(a){var b=".msg.json",c=".msg",d=a.name;return-1!==d.toLowerCase().indexOf(b,d.length-b.length)||-1!==d.toLowerCase().indexOf(c,d.length-c.length)},isMsgFile:function(a){var b=".msg",c=a.name;return-1!==c.toLowerCase().indexOf(b,c.length-b.length)},isTargetAttachmentTab:function(a){return!!a&&(-1==a.id.indexOf("tabContent.dijitContentPane")&&(-1!=a.id.indexOf("AttachmentList")||Sage.Utility.File.DefaultDropHandler.isTargetAttachmentTab(a.parentElement)))},handleEmailFiles:function(a,d){var e=this.fileType===Sage.Utility.File.fileType.ftLibraryDocs;if(!e&&(e=!("undefined"!=typeof slx&&slx&&slx.desktop||Sage.gears)))for(var f=".msg.json",g=0;g<a.length;g++){var h=a[g],i=h.name;if(-1!==i.toLowerCase().indexOf(f,i.length-f.length)){e=!1;break}}if(e)return void(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs?b.createAttachments(a):c.createDocuments(a,d));if(!(a.length<1)){this.hasAttachments=!1;var j=this._buildEmailQueue(a),k=this;new s(j).then(function(a){Sage.Utility.File.DefaultDropHandler.options.DoNotPromptHistory||k._showCompleteDlg()})}},_buildEmailQueue:function(a){var b=this,c=this.getEntityInfo(),d=c.EntityTableName.toUpperCase().substring(0,1)+c.EntityTableName.toLowerCase().substring(1);this.historyHandlers=[],this.historyQueue=[];var e=!1,f=[],g=0,h=!1,i=".msg.json";for(g=0;g<a.length;g++){var j=a[g],k=j.name;if(-1!==k.toLowerCase().indexOf(i,k.length-i.length)){h=!0;var l=new FileReader,m=j,n=k.substring(0,k.length-5).toLowerCase(),o=0;for(o=0;o<a.length;o++)if(a[o].name.toLowerCase()==n){m=a[o];break}!function(a,b,c,d){var g=new r;l.onload=function(f){try{var h=f.target,i=JSON.parse(h.result);i.sentOn=new Date(i.sentOn),i.receivedTime=new Date(i.receivedTime),i.attachments.length>0&&(a.hasAttachments=!0,e||(e=!0,a.saveAttachments=confirm((new t).attachmentQuestionText.replace("<br />","\r\n"))));var j=new t({file:b,histRelIdProperty:c+"Id",histRelNameProperty:c+"Name",histRelId:d.EntityId,histRelName:d.Description,entityContext:d,emailDroppedText:Sage.Utility.File.DefaultDropHandler.emailDroppedText,fileMetaData:i,saveAttachments:a.saveAttachments,saveAsMsg:Sage.Utility.File.DefaultDropHandler.options.SAVEMSGFILES,doNotPromptHistory:Sage.Utility.File.DefaultDropHandler.options.DoNotPromptHistory,deferred:g,handler:a});j.onHistorySaved=dojo.hitch(j,function(a){this.handler.historyQueue.push(a),this.deferred.resolve(this.handler)}),j.onHistoryFailed=dojo.hitch(j,function(){this.deferred.reject(this.handler)}),j.handleFile()}catch(a){g.reject(j)}},f.push(g.promise)}(this,m,d,c),l.readAsText(j)}}if(!h&&("undefined"!=typeof slx&&slx&&slx.desktop||Sage.gears)){var p;if(Sage.gears){p=Sage.gears.factory.create("beta.desktop");var q=p.getDragData(event,"application/x-gears-files");a=q&&q.files}else p=slx.desktop,a=slx.desktop.getDragData().files;for(g=0;g<a.length;g++){var s=null;s=a[g].blob?a[g].blob:a[g];var u=p.extractMetaData(s);u.attachments.length>0&&(b.hasAttachments=!0,e||(e=!0,b.saveAttachments=confirm((new t).attachmentQuestionText.replace("<br />","\r\n"))));var v=new r;f.push(v.promise);try{var w=new t({file:a[g],histRelIdProperty:d+"Id",histRelNameProperty:d+"Name",histRelId:c.EntityId,histRelName:c.Description,entityContext:c,emailDroppedText:Sage.Utility.File.DefaultDropHandler.emailDroppedText,fileMetaData:u,saveAttachments:b.saveAttachments,saveAsMsg:Sage.Utility.File.DefaultDropHandler.options.SAVEMSGFILES,doNotPromptHistory:Sage.Utility.File.DefaultDropHandler.options.DoNotPromptHistory,deferred:v,handler:b});w.onHistorySaved=dojo.hitch(w,function(a){this.handler.historyQueue.push(a),this.deferred.resolve(this.handler)}),w.onHistoryFailed=dojo.hitch(w,function(){this.deferred.reject(this.handler)}),w.handleFile()}catch(a){v.reject(w)}}}return f},_processNextHistoryHandler:function(){if(this.historyHandlers.length>0){var a=this.historyHandlers.pop();a&&(a.saveAttachments=this.saveAttachments,a.handleFile())}else this.saveAttachments=!1,this._hasAttachmnets=!1,this._checkContinueToComplete()},_onHistoryHandlerSuccsess:function(a){this.historyQueue.push(a),this._processNextHistoryHandler()},_onHistoryHandlerFailed:function(){this._processNextHistoryHandler()},_checkContinueToComplete:function(){this.options.DoNotPromptHistory?(dojo.publish("/entity/history/change",null),this.historyQueue=[]):this._showCompleteDlg()},_showCompleteDlg:function(){Sage.Services.getService("ActivityService").completeHistoriesInList(this.historyQueue)},getEntityInfo:function(){if(Sage.Services.hasService("ClientEntityContext")){var a=Sage.Services.getService("ClientEntityContext"),b=a.getContext();return""!==b.EntityId?b:null}return null}},Sage.Utility.File.DefaultDropHandler=dojo.mixin(Sage.Utility.File.DefaultDropHandler,m.getLocalization("Sage.Utility.File","DefaultDropHandler")),Sage.Utility.File.DefaultDropHandler})},"Sage/Utility/File/LibraryDocument":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/ErrorHandler","Sage/Utility/File/DescriptionsForm","dojo/i18n!./nls/LibraryDocument"],function(a,b,c,d,e,f,g,h,i,j){return Sage.namespace("Utility.File.LibraryDocument"),Sage.Utility.File.LibraryDocument={_stateInfo:{total:0,processed:0,successCount:0,failedCount:0},_errors:[],_store:!1,_target:!1,_totalProgress:0,_attachmentTemplate:!1,_files:[],_fileCount:0,_uploadAttemptCount:0,_isUploading:!1,_descriptionsForm:!1,_uploadUrlFmt:"slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file",_uploadUrl:!1,createDocuments:function(a,b){this._target=!(!b||void 0===b)&&b,this._ensureDescriptionsForm(),this._descriptionsForm.set("entityDesc","Library Document"),this._descriptionsForm.set("files",a),this._descriptionsForm.show()},handleDescriptions:function(a,b){var c,d="",e="";for(c=0;c<b.length;c++)b[c][d]=e;for(c=0;c<a.length;c++)this._files.push(a[c]);this.uploadFiles()},_checkState:function(){if(this._stateInfo.processed==this._stateInfo.total){if(d.closeProgressBar(),this._errors.length>0){var a="<br>",b=[];b.push(f.substitute(this.uploadError,[this._stateInfo.failedCount,this._stateInfo.successCount])),b.push(a);var c=this;dojo.forEach(this._errors,function(d,e){d&&"object"==typeof d&&d.hasOwnProperty("message")&&(b.push(f.substitute(c.failureNumber,[e+1])+d.message),e!==c._errors.length-1&&b.push(a))}),this._errors=[],Sage.UI.Dialogs.showError(b.join(a))}dojo.publish("/sage/library/manager/libraryDocuments/refresh",null),this._resetCounts()}},_resetCounts:function(){this._fileCount=0,this._uploadAttemptCount=0,this._isUploading=!1,this._totalProgress=0,this._stateInfo.processed=0,this._stateInfo.total=0,this._stateInfo.failedCount=0,this._stateInfo.successCount=0},_failAdd:function(a){var b={url:this._uploadUrl},c=h.getHttpStatusInfo(a,b);c&&"object"==typeof c?this._errors.push(c):this._errors.push({message:this.unknownError}),this._uploadAttemptCount=this._uploadAttemptCount+1,this._updateProgress(this._fileCount<1?100:this._uploadAttemptCount/this._fileCount*100),this._stateInfo.processed++,this._stateInfo.failedCount++,this._checkState()},_ensureDescriptionsForm:function(){this._descriptionsForm||(this._descriptionsForm=new i({entityDesc:"",fileType:Sage.Utility.File.fileType.ftLibraryDocs,files:this._files||[]}),dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions"))},_successUpload:function(a){this._uploadAttemptCount=this._uploadAttemptCount+1,this._updateProgress(this._fileCount<1?100:this._uploadAttemptCount/this._fileCount*100),this._stateInfo.processed++,this._stateInfo.successCount++,this._checkState()},_updateProgress:function(a){var b=this._totalProgress;if(a&&a.lengthComputable){var c=a.loaded/a.total*100;b+=Math.round(c/this._fileCount)}else a&&(b=a);this._totalProgress=b,b<99&&d.showProgressBar({pct:b,title:this.percentComplete})},uploadFiles:function(a){this._isUploading=!0,this._fileCount=this._files.length,a&&!this._attachmentTemplate&&(this._attachmentTemplate=a);var b="";Sage.Library&&Sage.Library.FileHandler&&(b=Sage.Library.FileHandler.findDirectoryId(this._target));var c=f.substitute(this._uploadUrlFmt,[b]);for(this._uploadUrl=c,this._stateInfo.processed=0,this._stateInfo.total=this._files.length;this._files.length>0;){var d=this._files.pop();Sage.Utility.File.uploadFile(d,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this)}}},e.mixin(Sage.Utility.File.LibraryDocument,j),Sage.Utility.File.LibraryDocument})},"Sage/Utility/EntityRelationships":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility"],function(a,b,c,d,e,f){return Sage.namespace("Utility.EntityRelationships"),Sage.Utility.EntityRelationships={_store:!1,getRelationships:function(a,b,c){var d={};if(""!==a.EntityId){var e=a.EntityId,f=a.EntityType.split(".");switch(f[f.length-1]){case"IAccount":return void this._getAccountRelationships(e,b,c);case"IContact":return void this._getContactRelationships(e,b,c);case"IOpportunity":return void this._getOpportunityRelationships(e,b,c);case"ITicket":return void this._getTicketRelationships(e,b,c);case"ISalesOrder":return void this._getSalesOrderRelationships(e,b,c);case"IActivity":return void this._getActivityRelationships(e,b,c);case"IHistory":return void this._getHistoryRelationships(e,b,c);case"IContract":return void this._getContractRelationships(e,b,c);case"IReturn":return void this._getReturnRelationships(e,b,c)}return d[a.EntityTableName.toLowerCase()+"Id"]=e,void b.call(c||this,d)}b.call(c||this,{})},_getRequest:function(a,c){var d=new Sage.SData.Client.SDataSingleResourceRequest(b.getSDataService("dynamic"));return d.setResourceKind(a),d.setResourceSelector('"'+c+'"'),d.setQueryArg("precedence","0"),d},_getAccountRelationships:function(a,b,c){var d=this._getRequest("accounts",a);d.setQueryArg("include","Contacts,$descriptors"),d.setQueryArg("select","Contacts/IsPrimary"),d.read({success:function(a){var d={AccountId:f.getValue(a,"$key"),AccountName:f.getValue(a,"$descriptor")},e="",g="",h=a.Contacts.$resources;h.length>0&&(e=h[0].$key);for(var i=0;i<h.length;i++)h[i].IsPrimary&&(e=h[i].$key,g=f.getValue(h[i],"$descriptor"));d.ContactId=e,d.ContactName=g,b.call(c||this,d)},failure:function(){b.call(c||this,{AccountId:a})},scope:this})},_getContactRelationships:function(a,b,c){var d=this._getRequest("contacts",a);d.setQueryArg("include","Account,$descriptors"),d.setQueryArg("select","Account"),d.read({success:function(a){var d={AccountId:f.getValue(a,"Account.$key"),AccountName:f.getValue(a,"Account.$descriptor"),ContactId:a.$key,ContactName:f.getValue(a,"$descriptor")};b.call(c||this,d)},failure:function(){b.call(c||this,{ContactId:a})},scope:this})},_getOpportunityRelationships:function(a,b,c){var d=this._getRequest("opportunities",a);d.setQueryArg("include","Account,Contacts,$descriptors"),d.setQueryArg("select","Account,Contacts/IsPrimary,Contacts/Contact/Id"),d.read({success:function(a){var d={AccountId:f.getValue(a,"Account.$key"),AccountName:f.getValue(a,"Account.$descriptor"),OpportunityId:a.$key,OpportunityName:f.getValue(a,"$descriptor")},e="",g="",h=a.Contacts.$resources;h.length>0&&(e=h[0].Contact.$key);for(var i=0;i<h.length;i++)h[i].IsPrimary&&(e=h[i].Contact.$key,g=f.getValue(h[i].Contact,"$descriptor"));d.ContactId=e,d.ContactName=g,b.call(c||this,d)},failure:function(){b.call(c||this,{OpportunityId:a})},scope:this})},_getSalesOrderRelationships:function(a,b,c){var d=this._getRequest("salesorders",a);d.setQueryArg("include","Account,$descriptors"),d.read({success:function(a){var d={AccountId:f.getValue(a,"Account.$key"),SalesOrderId:a.$key};b.call(c||this,d)},failure:function(){b.call(c||this,{SalesOrderId:a})},scope:this})},_getTicketRelationships:function(a,b,c){var d=this._getRequest("tickets",a);d.setQueryArg("include","Account,Contact,$descriptors"),d.read({success:function(a){var d={AccountId:f.getValue(a,"Account.$key"),AccountName:f.getValue(a,"Account.$descriptor"),ContactId:f.getValue(a,"Contact.$key"),ContactName:f.getValue(a,"Contact.$descriptor"),TicketId:a.$key,TicketNumber:f.getValue(a,"$descriptor")};b.call(c||this,d)},failure:function(){b.call(c||this,{ticketId:a})},scope:this})},_getReturnRelationships:function(a,b,c){var d=this._getRequest("returns",a);d.setQueryArg("include","Account,ReturnedBy,Ticket,$descriptors"),d.read({success:function(a){var d={ReturnId:a.$key,ReturnNumber:f.getValue(a,"$descriptor"),AccountId:f.getValue(a,"Account.$key"),AccountName:f.getValue(a,"Account.$descriptor"),TicketId:f.getValue(a,"Ticket.$key"),TicketNumber:f.getValue(a,"Ticket.$descriptor"),ContactId:f.getValue(a,"ReturnedBy.$key"),ContactName:f.getValue(a,"ReturnedBy.$descriptor")};b.call(c||this,d)},failure:function(){b.call(c||this,{returnId:a})},scope:this})},_getActivityRelationships:function(a,b,c){var d=this._getRequest("activities",a);d.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId"),d.read({success:function(a){var d={AccountId:f.getValue(a,"AccountId"),ActivityId:a.$key,ContactId:f.getValue(a,"ContactId"),LeadId:f.getValue(a,"LeadId"),OpportunityId:f.getValue(a,"OpportunityId"),TicketId:f.getValue(a,"TicketId")};b.call(c||this,d)},failure:function(){b.call(c||this,{ActivityId:a})},scope:this})},_getHistoryRelationships:function(a,b,c){var d=this._getRequest("history",a);d.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId"),d.read({success:function(a){var d={AccountId:f.getValue(a,"AccountId"),HistoryId:a.$key,ContactId:f.getValue(a,"ContactId"),LeadId:f.getValue(a,"LeadId"),OpportunityId:f.getValue(a,"OpportunityId"),TicketId:f.getValue(a,"TicketId")};b.call(c||this,d)},failure:function(){b.call(c||this,{HistoryId:a})},scope:this})},_getContractRelationships:function(a,b,c){var d=this._getRequest("contracts",a);d.setQueryArg("include","Account,Contact,$descriptors"),d.read({success:function(a){var d={AccountId:f.getValue(a,"Account.$key"),AccountName:f.getValue(a,"Account.$descriptor"),ContractId:a.$key,ContractNumber:f.getValue(a,".$descriptor"),ContactId:f.getValue(a,"Contact.$key"),ContactName:f.getValue(a,"Contact.$descriptor")};b.call(c||this,d)},failure:function(){b.call(c||this,{ContractId:a})},scope:this})}},Sage.Utility.EntityRelationships})},"Sage/Library/FolderHandler":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Services/RoleSecurityService","Sage/UI/Dialogs","Sage/Utility","dijit/ProgressBar","dojo/i18n","dojo/parser","dojo/string","dojo/_base/lang","dojo/i18n!./nls/FolderHandler"],function(a,b,c,d,e,f,g,h,i,j){return Sage.namespace("Library.FolderHandler"),dojo.mixin(Sage.Library.FolderHandler,{_getNewRequest:function(){var a=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Library.FolderHandler._system);return a.setResourceKind("libraryDirectories"),a.setQueryArg("format","json"),a},_initSecurity:function(){this.can.add=this._roles.hasAccess("Entities/LibraryDirs/Add"),this.can.edit=this._roles.hasAccess("Entities/LibraryDirs/Edit"),this.can.delete=this._roles.hasAccess("Entities/LibraryDirs/Delete"),this.can.manage=this._roles.hasAccess("Administration/Manage/Library")||this._roles.hasAccess("Administration/View")},_roles:null,_system:null,can:{add:!1,edit:!1,delete:!1,manage:!1},resources:{},init:function(){Sage.Library.FolderHandler._roles=Sage.Services.getService("RoleSecurityService"),Sage.Library.FolderHandler._initSecurity(),Sage.Library.FolderHandler._system=a.getSDataService("system"),i.mixin(Sage.Library.FolderHandler.resources,j)},addFolder:function(a,b,c,e){if(!Sage.Library.FolderHandler.can.add&&!Sage.Library.FolderHandler.can.manage)return void Sage.Library.FolderHandler.showAccessError();Sage.Library.FolderHandler._getNewRequest().create({parentId:a,directoryName:b},{scope:this,success:function(a){c&&"function"==typeof c&&c(a)},failure:function(a,b){e&&"function"==typeof e?e(a,b):d.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FolderHandler.resources.AddFolderError})}})},deleteFolder:function(a,b,c){if(!Sage.Library.FolderHandler.can.delete&&!Sage.Library.FolderHandler.can.manage)return void Sage.Library.FolderHandler.showAccessError();var e=Sage.Library.FolderHandler._getNewRequest();e.setResourceSelector("'"+a+"'"),e.delete({},{scope:this,ignoreETag:!0,success:function(){b&&"function"==typeof b&&b()},failure:function(a,b){c&&"function"==typeof c?c(a,b):d.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FolderHandler.resources.DeleteFolderError})}})},getOpenFolderEtag:function(a){if(a)return a.$etag;var b=dijit.byId("libraryTree");return!b.selectedNode||b.selectedNode.item.root?b.selectedNode.item.root.$etag[0]:b.selectedNode.item.$etag[0]},getOpenFolderName:function(){return dijit.byId("libraryTree").selectedNode.label},handleDeleteFolderClicked:function(a,b){if(Sage.Library.Manager.getOpenFolderId()==Sage.Library.Manager.getRootId())return void Sage.UI.Dialogs.showWarning(Sage.Library.FolderHandler.resources.DontDeleteRoot);var c=Sage.Library.FolderHandler.getOpenFolderName();if(""!==c){var d=h.substitute(Sage.Library.FolderHandler.resources.DeleteFolderCnfmFmt,[c]);Sage.UI.Dialogs.raiseQueryDialog(Sage.Library.FolderHandler.resources.Confirm,d,Sage.Library.FolderHandler.handleDeletefolderConfirmed,Sage.Library.FolderHandler.resources.Yes,Sage.Library.FolderHandler.resources.No,"questionIcon")}else Sage.UI.Dialogs.showInfo(Sage.Library.FolderHandler.resources.PleaseSelectFolder)},handleDeletefolderConfirmed:function(a){a&&Sage.Library.FolderHandler.deleteFolder(Sage.Library.Manager.getOpenFolderId(),function(){dojo.publish("/sage/library/manager/libraryDirs/refresh","")})},handleAddFolder:function(a,b){Sage.UI.Dialogs.raiseInputDialog(Sage.Library.FolderHandler.resources.NewFolder,Sage.Library.FolderHandler.resources.EnterFolderName,Sage.Library.FolderHandler.handleAddFolderCallback,Sage.Library.FolderHandler.resources.OK,Sage.Library.FolderHandler.resources.Cancel)},handleAddFolderCallback:function(a,b){if(a){var c=Sage.Library.Manager.getOpenFolderId();c?Sage.Library.FolderHandler.addFolder(c,b,function(a){dojo.publish("/sage/library/manager/libraryDirs/refresh","")}):Sage.Library.FolderHandler.addFolder(null,"Library",function(a){a&&(dojo.publish("/sage/library/manager/libraryDirs/refresh",""),Sage.Library.FolderHandler.addFolder(a.$key,b,function(a){dojo.publish("/sage/library/manager/libraryDirs/refresh","")}))})}},handleEditFolderName:function(a,b){if(Sage.Library.Manager.getOpenFolderId()==Sage.Library.Manager.getRootId())return void Sage.UI.Dialogs.showWarning(Sage.Library.FolderHandler.resources.DontEditRoot);var c=Sage.Library.FolderHandler.getOpenFolderName();Sage.UI.Dialogs.raiseInputDialog(Sage.Library.FolderHandler.resources.NewFolder,Sage.Library.FolderHandler.resources.EnterNewFolderName,Sage.Library.FolderHandler.handleEditFolderNameCallback,Sage.Library.FolderHandler.resources.OK,Sage.Library.FolderHandler.resources.Cancel,c,'[^\\\\/:"*?<>|\r\n]+',Sage.Library.FolderHandler.resources.InvalidFolderName)},handleEditFolderNameCallback:function(a,b){if(a){var c=Sage.Library.Manager.getOpenFolderId(),d=Sage.Library.FolderHandler.getOpenFolderEtag();Sage.Library.FolderHandler.renameFolder(c,b,d,function(a){dojo.publish("/sage/library/manager/libraryDirs/refresh","")})}},handleFolderClicked:function(a,b){var c=dijit.byId("btnDeleteFolder"),d=dijit.byId("btnEditFolder");void 0!==c&&null!==c&&null!==d&&(a.root?(c.set("disabled",!0),d.set("disabled",!0)):(c.set("disabled",!1),d.set("disabled",!1))),dojo.publish("/sage/library/manager/libraryDocuments/refresh",a)},renameFolder:function(a,b,c,e,f){if(!Sage.Library.FolderHandler.can.edit&&!Sage.Library.FolderHandler.can.manage)return void Sage.Library.FolderHandler.showAccessError();var g=Sage.Library.FolderHandler._getNewRequest();g.setResourceSelector("'"+a+"'"),g.update({$etag:c,directoryId:a,directoryName:b},{scope:this,success:function(a){e&&"function"==typeof e&&e(a)},failure:function(a,b){f&&"function"==typeof f?f(a,b):4==a.readyState&&412==a.status?Sage.UI.Dialogs.showError(Sage.Library.FolderHandler.resources.FolderUpdateConflictError):d.ErrorHandler.handleHttpError(a,b,{message:Sage.Library.FolderHandler.resources.RenameFolderError})}})},showAccessError:function(){Sage.UI.Dialogs.showError(Sage.Library.FolderHandler.resources.AccessError)}}),Sage.Library.FolderHandler.init(),Sage.Library.FolderHandler})},"Sage/Library/Manager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Library/FileHandler","Sage/Library/FolderHandler","Sage/Services/RoleSecurityService","Sage/Services/SystemOptions","Sage/UI/Dialogs","Sage/Utility","Sage/UI/ImageButton","dijit/Toolbar","dijit/Tree","dijit/tree/ForestStoreModel","dojo/data/ItemFileWriteStore","dojo/i18n","dojo/string","dojo/_base/array","dojo/date/locale","dojo/dom-construct","dojo/_base/lang","dojo/i18n!./nls/Manager","dojox/widget/Standby","Sage/UI/GridView","dojo/store/Memory","dojo/_base/connect","dojo/domReady!"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return Sage.namespace("Library.Manager"),r.mixin(Sage.Library.Manager,{_convert:g.Convert,_grid:null,_remote:!1,_roles:null,_rootId:null,
_standby:!1,_system:null,_tree:null,_memory:null,_addButtonToToolbar:function(a,b){b.addChild(new h({label:a.label,showLabel:!1,iconClass:a.icon,id:a.id,layoutAlign:"right",onClick:function(){a.clickHandler()}}))},_createGrid:function(){var a=this;this._memory=new v({data:[]});var b={store:this._memory,id:"libraryGrid",columns:[{field:"fileName",label:a.resources.File,formatter:a._renderFileName,width:"160px"},{field:"fileSize",label:a.resources.Size,formatter:a._renderSize,width:"50px"},{field:"createDate",label:a.resources.Created,formatter:a._renderDate,width:"60px"},{field:"revisionDate",label:a.resources.Revised,formatter:a._renderDate,width:"60px"},{field:"expires",label:a.resources.Expires,formatter:a._renderExpires,width:"60px"},{field:"description",label:a.resources.Description,width:"150px"}],placeHolder:"libraryGridPlaceHolder",columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,classNames:"dgrid-autoheight"};if(this._remote){var c={field:"status",label:"Status",formatter:a._renderStatus,width:"150px"};b.columns.unshift(c)}this._grid=new u(b),this._showLoading(),this._grid.createGridView()},_createGridToolbar:function(){var a=new i({},"gridToolbar"),b=[];(Sage.Library.FileHandler.can.add||Sage.Library.FileHandler.can.manage)&&b.push({label:this.resources.AddFiles,id:"btnAddFiles",clickHandler:Sage.Library.FileHandler.handleAddButtonClicked,icon:"libraryIcon addFileIcon"}),b.push({label:this.resources.FileProperties,id:"btnEditFile",clickHandler:Sage.Library.FileHandler.editLibraryFileProps,icon:"libraryIcon editFileIcon"}),(Sage.Library.FileHandler.can.delete||Sage.Library.FileHandler.can.manage)&&b.push({label:this.resources.DeleteSelectedFile,id:"btnDeleteFile",clickHandler:Sage.Library.FileHandler.handleDeleteButtonClicked,icon:"libraryIcon deleteFileIcon"}),b.push({label:this.resources.Help,id:"btnHelp",clickHandler:function(){window.open(Link.getHelpUrl("library"),Link.getHelpUrlTarget())},icon:"libraryIcon helpFileIcon"});for(var c=0;c<b.length;c++)this._addButtonToToolbar(b[c],a)},_createTreeView:function(){this.refreshDirs()},_createTreeViewToolbar:function(){var a=new i({},"treeToolbar"),b=[];if((Sage.Library.FolderHandler.can.add||Sage.Library.FolderHandler.can.manage)&&b.push({label:this.resources.AddFolder,id:"btnAddFolder",clickHandler:Sage.Library.FolderHandler.handleAddFolder,icon:"libraryIcon addFolderIcon"}),(Sage.Library.FolderHandler.can.edit||Sage.Library.FolderHandler.can.manage)&&b.push({label:this.resources.EditFolder,id:"btnEditFolder",clickHandler:Sage.Library.FolderHandler.handleEditFolderName,icon:"libraryIcon editFolderIcon"}),(Sage.Library.FolderHandler.can.delete||Sage.Library.FolderHandler.can.manage)&&b.push({label:this.resources.DeleteFolder,id:"btnDeleteFolder",clickHandler:Sage.Library.FolderHandler.handleDeleteFolderClicked,icon:"libraryIcon deleteFolderIcon"}),b.length>0)for(var c=0;c<b.length;c++)this._addButtonToToolbar(b[c],a)},_createView:function(){this._createTreeViewToolbar(),this._createTreeView(),this._createGridToolbar(),this._createGrid()},_handleDeliveredDocRequest:function(a){Sage.Library.FileHandler.updateRemoteStatus(a,"DeliveredRead",function(){Sage.Library.Manager.refreshGrid();var b=n.substitute("slxdata.ashx/slx/system/-/libraryDocuments('${0}')/file",[a]);window.open(b,"FileWin")})},_handleOrderDocRequest:function(a,b){f.raiseQueryDialog(Sage.Library.Manager.resources.Confirm,Sage.Library.Manager.resources.ConfirmDownload,function(c){c&&Sage.Library.FileHandler.updateRemoteStatus(a,b,function(b){Sage.Library.FileHandler.logRemoteDocRequest(a),Sage.Library.Manager.refreshGrid()})},Sage.Library.Manager.resources.Yes,Sage.Library.Manager.resources.No,"questionIcon")},_handleReorderDocRequest:function(a){f.raiseQueryDialog(Sage.Library.Manager.resources.Confirm,Sage.Library.Manager.resources.ConfirmDownloadReorder,function(b){b&&Sage.Library.FileHandler.logRemoteDocRequest(a)},Sage.Library.Manager.resources.Yes,Sage.Library.Manager.resources.No,"questionIcon")},_renderDate:function(a){try{if(!a)return"";if(r.isString(a)&&Sage.Library.Manager._convert.isDateString(a)){var b=Sage.Library.Manager._convert.toDateFromString(a);return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),p.format(b,{selector:"date",locale:Sys.CultureInfo.CurrentCulture.name})}return""}catch(a){return""}},_renderExpires:function(a,b){try{return!0!==b.expires[0]?Sage.Library.Manager.resources.Never:Sage.Library.Manager._renderDate(b.expireDate[0])}catch(a){return""}},_renderFileName:function(a,b){try{if(!Sage.Library.Manager._remote)return n.substitute('<a id="document_${0}" href="slxdata.ashx/slx/system/-/libraryDocuments(\'${0}\')/file" target="FileWin">${1}</a>',[b.$key,b.fileName||""]);switch(b.status){case"Available":return n.substitute("<a id=\"document_${0}\" href=\"javascript:Sage.Library.Manager._handleOrderDocRequest('${0}', 'Ordered');\">${1}</a>",[b.$key,b.fileName||""]);case"Revised":return n.substitute("<a id=\"document_${0}\" href=\"javascript:Sage.Library.Manager._handleOrderDocRequest('${0}', 'RevisionOrdered');\">${1}</a>",[b.$key,b.fileName||""]);case"Ordered":case"RevisionOrdered":return n.substitute('<a id="document_${0}" href="javascript:Sage.Library.Manager._handleReorderDocRequest(\'${0}\');">${1}</a>',[b.$key,b.fileName||""]);case"Delivered":return n.substitute('<a id="document_${0}" href="javascript:Sage.Library.Manager._handleDeliveredDocRequest(\'${0}\');">${1}</a>',[b.$key,b.fileName||""]);case"DeliveredRead":return n.substitute('<a id="document_${0}" href="slxdata.ashx/slx/system/-/libraryDocuments(\'${0}\')/file" target="FileWin">${1}</a>',[b.$key,b.fileName||""]);default:return b.fileName||""}}catch(a){return""}},_renderFixed:function(a,b){try{"number"!=typeof b&&(b=2);var c=Math.pow(10,b);return Math.floor(parseFloat(a)*c)/c}catch(a){return""}},_renderSize:function(a){try{return a/1048576>.5?Sage.Library.Manager._renderFixed(a/1048576,1)+" MB":a/1024>.05?Sage.Library.Manager._renderFixed(a/1024,1)+" KB":a+" B"}catch(a){return""}},_renderStatus:function(a){return Sage.Library.FileHandler.translateStatus(a)},_showLoading:function(){if(!1===this._standby&&this._grid.domNode){var a=this._grid.domNode;this._standby=new t({target:a,color:"white",image:"images/loader_lg.gif"}),document.body.appendChild(this._standby.domNode),this._standby.startup()}var b=this;window.setTimeout(function(){b._standby.show()},0)},_hideLoading:function(){var a=this;window.setTimeout(function(){a._standby&&(a._standby.hide(),a._standby=!1)},1)},resources:{},init:function(){Sage.Library.Manager._roles=Sage.Services.getService("RoleSecurityService"),Sage.Library.Manager._system=a.getSDataService("system"),r.mixin(Sage.Library.Manager.resources,s),w.subscribe("/sage/library/manager/libraryDirs/refresh",function(){Sage.Library.Manager.refreshDirs()}),w.subscribe("/sage/library/manager/libraryDocuments/refresh",function(a){Sage.Library.Manager.refreshGrid(a)})},createView:function(){var a=Sage.Services.getService("SystemOptions");a?a.get("DbType",function(a){this._remote=a&&2==a,this._createView()},function(){this._createView()},this):this._createView()},getDirs:function(a){var b=this,c=new Sage.SData.Client.SDataResourceCollectionRequest(this._system);return c.setResourceKind("libraryDirectories"),c.setQueryArg("orderBy","fullPath"),c.setQueryArg("format","json"),c.setQueryArg("count",0),c.read({success:function(c){var d=c.$totalResults;b.getAllDirs(a,d)},failure:function(a,c){g.ErrorHandler.handleHttpError(a,c,{message:b.resources.DirectoryInformationError})}}),!0},getAllDirs:function(a,b){var c=this,d=new Sage.SData.Client.SDataResourceCollectionRequest(this._system);return d.setResourceKind("libraryDirectories"),d.setQueryArg("orderBy","fullPath"),d.setQueryArg("format","json"),d.setQueryArg("count",b),d.read({success:function(b){var d=b.$resources;if(d&&r.isArray(d))if(d.length>0){var e,f,g=0,h=!1;try{for(var i=function(a){var b=o.filter(e[a.depth-2].items,function(b){return b.$key==a.parentId});return 1==b.length?b[0]:null},j=d.length-1;j>=0;j--)!1===this._remote&&!1===d[j].directoryExists&&d.splice(j,1);o.some(d,function(a){return"0"==a.parentId.trim()&&(a.parentId="0",a.fullPath="",a.root=!0,c._rootId=a.$key,!0)}),o.forEach(d,function(a){!0!==a.root&&0!==a.fullPath.indexOf("\\")&&(a.fullPath="\\"+a.fullPath,h=!0),a.depth=a.fullPath.split("\\").length,a.depth>g&&(g=a.depth)}),h&&d.sort(function(a,b){return a.fullPath.toLocaleUpperCase().localeCompare(b.fullPath.toLocaleUpperCase())}),d.sort(function(a,b){return a.depth-b.depth}),e=new Array(g),o.forEach(e,function(a,b){e[b]={items:[]}}),o.forEach(d,function(a){e[a.depth-1].items.push(a)}),o.forEach(d,function(a,b){if(0===b){if(!0!==a.root)throw new Error(n.substitute(c.resources.InvalidRoot,[a.directoryName,a.$key]));a.id=a.$key,a.items=[],f=a}else if(a.depth>1)switch(a.depth){case 2:a.id=a.$key,a.children=[],f.items.push(a);break;default:var d=i(a);null!==d&&(a.id=a.$key,a.children=[],d.children||(d.children=[]),d.children.push(a))}}),"function"==typeof a&&a(f)}catch(a){Sage.UI.Dialogs.showError(c.resources.LibraryDataError+" "+a)}}else"function"==typeof a&&a(null)},failure:function(a,b){g.ErrorHandler.handleHttpError(a,b,{message:c.resources.DirectoryInformationError})}}),!0},getOpenFolderId:function(a){var b=this.getRootId();return a&&a.id&&!0!==a.root?(b=a.id,r.isArray(b)&&(b=b[0])):this._tree&&this._tree.attr("selectedItem")&&(b=this._tree.attr("selectedItem").id,r.isArray(b)&&(b=b[0])),b},getRootId:function(){return this._rootId},refreshDirs:function(){var a=this;this.getDirs(function(b){if(a._tree&&a._tree.destroyRecursive(),b){var c=new l({data:b}),d=new k({store:c,rootId:b.$key,rootLabel:Sage.Library.Manager.resources.Library,labelAttr:"directoryName",childrenAttrs:["children"]}),e=new q.create("div",{id:"libraryTree"});a._tree=new j({model:d,onClick:Sage.Library.FolderHandler.handleFolderClicked,persist:!1,_createTreeNode:function(a){return a.id="dijit__TreeNode_"+a.item.id,new j._TreeNode(a)},rootId:b.$key},e);var f=w.connect(a._tree,"onLoad",function(){w.disconnect(f),a.refreshGrid()});q.place(a._tree.domNode,"libraryTreeRoot","after")}else a.refreshGrid()})},refreshGrid:function(a){var b=this,c=this.getOpenFolderId(a);if(!c)return void b._hideLoading();var d=new Sage.SData.Client.SDataResourceCollectionRequest(this._system);d.setResourceKind("libraryDocuments"),d.setQueryArg("where",n.substitute("directory.Id eq '${0}'",[c])),d.setQueryArg("orderBy","fileName"),d.setQueryArg("format","json"),d.setQueryArg("startIndex",1),d.setQueryArg("count",0),this._showLoading(),d.read({success:function(c){try{var d=c.$totalResults;b.refreshAllGrid(a,1,d)}finally{}},failure:function(a,c){b._hideLoading(),g.ErrorHandler.handleHttpError(a,c,{message:b.resources.DocumentInformationError})}})},refreshAllGrid:function(a,c,d){var e=this,f=this.getOpenFolderId(a);if(!f)return void e._hideLoading();d=d||100,1==(c=c||1)&&a&&(e._memory=new v({data:[]}),this._grid.refresh());var h=new Sage.SData.Client.SDataResourceCollectionRequest(this._system);h.setResourceKind("libraryDocuments"),h.setQueryArg("where",n.substitute("directory.Id eq '${0}'",[f])),h.setQueryArg("orderBy","fileName"),h.setQueryArg("format","json"),h.setQueryArg("startIndex",c),h.setQueryArg("count",d),e._showLoading(),h.read({success:function(a){try{a.$totalResults;for(var c={items:a.$resources||[]},d=[],f=0;f<c.items.length;f++)!1===c.items[f].fileExists&&e._remote&&("Delivered"!==c.items[f].status&&"DeliveredRead"!==c.items[f].status||(c.items[f].status="Available",b.updateRemoteStatus(c.items[f].$key,"Available"))),c.items[f].$key&&d.push(c.items[f]);e._memory=new v({data:d,idProperty:"$key"}),e._grid.grid.setStore(e._memory)}finally{e._hideLoading()}},failure:function(a,b){e._hideLoading(),g.ErrorHandler.handleHttpError(a,b,{message:e.resources.DocumentInformationError})}})}}),Sage.Library.Manager.init(),Sage.Library.Manager})},"Sage/MailMerge/main":function(){define(["Sage/MailMerge/Loader","Sage/MailMerge/Helper","Sage/MailMerge/MenuHelper"],function(){})},"Sage/MailMerge/Loader":function(){define(["Sage/Utility/ErrorHandler","Sage/MailMerge/Helper","Sage/MailMerge/MenuHelper","Sage/UI/Dialogs","dijit/_Widget","dojo/i18n","dojo/string","dojox/json/ref","dojo/_base/lang","dojo/i18n!./nls/Loader","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k("Sage.MailMerge.Loader",[e],{constructor:function(){this.inherited(arguments)},postMixInProperties:function(){i.mixin(this,j),this.inherited(arguments)},DecodeMailMergeJsonFromUrl:function(b){var c=null;return dojo.xhrGet({url:b,preventCache:!0,handleAs:"text",sync:!0,load:function(a){if(a&&dojo.isString(a)&&""!==a){var b=a.replace(/":null/gi,'":""');c=h.fromJson(b)}},error:function(b,c){a.handleHttpError(b,c)}}),c},GetClientPath:function(){var a=String(window.location),b=a.lastIndexOf("/");return-1!=b?a.substring(0,b):null}});window.ExecuteWriteAction=function(a,c){b.ExecuteWriteAction(a,c)},window.GetMailMergeService=function(a){return b.GetMailMergeService(a)},window.GetDesktopService=function(a){return b.GetMailMergeService(a)},Sage.Services.hasService("MailMergeServiceLoader")||Sage.Services.addService("MailMergeServiceLoader",new Sage.MailMerge.Loader);var m=!0,n=new c;if(-1!=navigator.userAgent.indexOf("Win")&&Sage&&Sage.Services&&"undefined"!=typeof slxmm&&slxmm&&slxmm.com&&(dojo.addOnLoad(function(){n.attachWriteMenuPopulator()}),m=!1),m){try{"undefined"!=typeof slxmm&&slxmm||window.console,"undefined"!=typeof slxmm&&slxmm&&!slxmm.com&&window.console}catch(a){}dojo.addOnLoad(function(){n.removeWriteMenu()})}return l})},"Sage/MailMerge/Helper":function(){define(["Sage/UI/Dialogs","dijit/_Widget","dojo/i18n","dojo/string","dojo/_base/lang","dojo/i18n!./nls/Helper","dojo/i18n!./nls/Service","dojo/i18n!./nls/Lookup"],function(a,b,c,d,e,f){return Sage.namespace("MailMerge.Helper"),dojo.mixin(Sage.MailMerge.Helper,{desktopErrorsStore:null,infoStore:null,DesktopErrors:function(){if(null!=this.desktopErrorsStore)return this.desktopErrorsStore;var a=Sage.MailMerge.Loader.prototype.GetClientPath();if(null!=a){var b=d.substitute("${0}/SLXMailMergeClient.ashx?method=GetDesktopErrors",[a]),c=this.GetMailMergeLoader().DecodeMailMergeJsonFromUrl(b);if(null!=c)return this.desktopErrorsStore=c,this.desktopErrorsStore}return null},ExecuteWriteAction:function(b,c){try{require(["Sage/MailMerge/Service"],function(){var a=Sage.MailMerge.Helper.GetMailMergeService();if(a)switch(b){case WriteAction.waWriteAddressLabels:a.WriteAddressLabels();break;case WriteAction.waWriteEmail:a.WriteEmail();break;case WriteAction.waWriteEmailUsing:a.WriteEmailUsing(c);break;case WriteAction.waWriteEmailUsingMore:a.WriteEmailUsingMoreTemplates();break;case WriteAction.waWriteFaxUsing:a.WriteFaxUsing(c);break;case WriteAction.waWriteFaxUsingMore:a.WriteFaxUsingMoreTemplates();break;case WriteAction.waWriteLetterUsing:a.WriteLetterUsing(c);break;case WriteAction.waWriteLetterUsingMore:a.WriteLetterUsingMoreTemplates();break;case WriteAction.waWriteMailMerge:a.WriteMailMerge();break;case WriteAction.waWriteTemplates:a.WriteTemplates(!0)}})}catch(b){var e="";this.IsSageGearsObjectError(b)&&(e=this.DesktopErrors().SageGearsObjectError);var f=dojo.isFunction(b.toMessage)?b.toMessage(e,this.MailMergeInfoStore().ShowJavaScriptStack):b.message;a.showError(d.substitute(this.DesktopErrors().WriteActionError,[f]))}},GetDesktopService:function(a){return this.GetMailMergeService(a)},GetMailMergeLoader:function(){return Sage.Services.hasService("MailMergeServiceLoader")?Sage.Services.getService("MailMergeServiceLoader"):null},GetMailMergeService:function(b){var c=!0;return"boolean"==typeof b&&(c=b),Sage&&Sage.Services&&"undefined"!=typeof slxmm&&slxmm&&slxmm.com&&Sage.Services.hasService("MailMergeService")?Sage.Services.getService("MailMergeService"):(c&&a.showError(d.substitute("${0} ${1}",[this.DesktopErrors().MailMergeServiceLoad,this.DesktopErrors().SageGearsObjectError])),null)},IsSageGearsObjectError:function(a){if(a){var b=this.DesktopErrors().SageGearsClassError;if(Sage.Utility.isIE&&-2146827287==a.number||-1!=a.message.indexOf("The specified class name cannot be mapped to a COM object")||-1!=a.message.indexOf(b))return!0}return!1},MailMergeInfoStore:function(){if(null!=this.infoStore)return this.infoStore;var a=Sage.MailMerge.Loader.prototype.GetClientPath();if(null!=a){var b=d.substitute("${0}/SLXMailMergeClient.ashx?method=GetInfoStore",[a]),c=this.GetMailMergeLoader().DecodeMailMergeJsonFromUrl(b);if(null!=c)return this.infoStore=c,this.infoStore}return null}}),e.mixin(Sage.MailMerge.Helper,f),window.WriteAction={waWriteAddressLabels:0,waWriteEmail:1,waWriteEmailUsing:2,waWriteEmailUsingMore:3,waWriteFaxUsing:4,waWriteFaxUsingMore:5,waWriteLetterUsing:6,waWriteLetterUsingMore:7,waWriteMailMerge:8,waWriteTemplates:9},Sage.MailMerge.Helper})},"Sage/MailMerge/MenuHelper":function(){define(["Sage/MailMerge/Helper","dojo/_base/declare"],function(a,b){return b("Sage.MailMerge.MenuHelper",null,{_populateWriteMenu:function(){require(["Sage/MailMerge/Service"],function(){var b=a.GetMailMergeService();b&&(b.MenuPopulated||b.PopulateWriteMenu())})},_getMenuInfo:function(){var a={toolbar:null,menu:null},b=dojo.byId("ToolBar");if(void 0!==b&&null!==b){a.toolbar=b;for(var c=0;c<b.children.length;c++){var d=b.children[c];if("mnuMailMerge"==d.id)return a.menu=d,a}}return a},attachWriteMenuPopulator:function(){var a=this._getMenuInfo();null!==a.menu&&dojo.connect(a.menu,"onclick",this._populateWriteMenu)},removeWriteMenu:function(){var a=this._getMenuInfo();null!==a.toolbar&&null!==a.menu&&a.toolbar.removeChild(a.menu)}})})},"Sage/Services/main":function(){define(["Sage/Services/_ServiceMixin","Sage/Services/ActivityAction","Sage/Services/ApplicationStateService","Sage/Services/UserOptions","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityService","Sage/Services/CalendarSecurityService","Sage/Services/ClientBindingManagerService","Sage/Services/ClientContextService","Sage/Services/ClientEntityContext","Sage/Services/RoleSecurityService","Sage/Services/SelectionContextService","Sage/Services/SystemOptions","Sage/Services/JobService","Sage/Services/EntityService","Sage/Services/ReportingService","Sage/Services/PickListService","Sage/Services/CultureService","Sage/Services/LocalStorageService"],function(){})},"Sage/Services/_ServiceMixin":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(a,b){return b("Sage.Services._ServiceMixin",null,{serviceMap:null,constructor:function(){var a=this.serviceMap;if(a)for(var b in a)this[b]||(this[b]=this._resolveService(a[b]))},_resolveService:function(b){return b&&"sdata"===b.type?a.getSDataService(b.name):Sage.Services.getService(b)}})})},"Sage/Services/ClientBindingManagerService":function(){define(["dojo/_base/declare"],function(a){var b=a("Sage.Services.ClientBindingManagerService",null,{constructor:function(){this._listeners[this.ON_SAVE]=[],this.inherited(arguments)},_WatchChanges:!0,_PageExitWarningMessage:"",_ShowWarningOnPageExit:!1,_SkipCheck:!1,_CurrentEntityIsDirty:!1,_SaveBtnID:"",_MsgDisplayID:"",_entityTransactionID:"",_IgnoreDirtyFlag:!1,_DirtyAjaxItems:[],_listeners:{},_init:function(){this.positionDirtyDataMessage(),dojo.subscribe("Sage/events/markDirty",this,"markDirty")},positionDirtyDataMessage:function(){var a=dojo.query("#PageTitle"),b=dojo.query(".dirtyDataMessage");a&&a.length>0&&b&&b.length>0&&(dojo.place(b[0],a[0],"after"),dojo.style(b[0],"top",dojo.marginBox(a[0]).t+"px"),dojo.style(b[0],"left",dojo.marginBox(a[0]).w+"px"))},addListener:function(a,b,c){this._listeners[a]=this._listeners[a]||[],this._listeners[a].push({listener:b,scope:c})},removeListener:function(a,b){this._listeners[a]=this._listeners[a]||[];for(var c=0;c<this._listeners[a].length&&this._listeners[a][c].listener!=b;c++);this._listeners[a].splice(c,1)},onSave:function(){for(var a=0;a<this._listeners[this.ON_SAVE].length;a++){var b=this._listeners[this.ON_SAVE][a].listener,c=this._listeners[this.ON_SAVE][a].scope||this;"function"==typeof b&&b.call(c)}},SetShowWarningOnPageExit:function(a){this._ShowWarningOnPageExit=a,this._ShowWarningOnPageExit&&(window.onbeforeunload=this.onExit)},onExit:function(a){var b=Sage.Services.getService("ClientBindingManagerService");if(b&&b._ShowWarningOnPageExit){if(b._SkipCheck)return;if(b.hasDirtyData()&&!1===b._IgnoreDirtyFlag||"insert"===Sage.Utility.getModeId()){if(window.setTimeout(function(){Sage.Utility.hideRequestIndicator(null,{})},1e3),!window.event)return b._PageExitWarningMessage;window.event.returnValue=b._PageExitWarningMessage}}},canChangeEntityContext:function(){return!(this._WatchChanges&&this.hasDirtyData()&&this._ShowWarningOnPageExit)||!!confirm(this._PageExitWarningMessage)&&(this.clearDirtyStatus(),this._DirtyAjaxItems=[],!0)},hasDirtyData:function(){return this._CurrentEntityIsDirty||this._DirtyAjaxItems&&this._DirtyAjaxItems.length>0},markDirty:function(a){var b=Sage.Services.getService("ClientBindingManagerService");b&&b._WatchChanges&&(b._CurrentEntityIsDirty=!0,!1===b._IgnoreDirtyFlag&&dojo.style(dojo.byId(b._MsgDisplayID),"display","inline"))},addDirtyAjaxItem:function(a){var b=Sage.Services.getService("ClientBindingManagerService");if(b){for(var c=this._DirtyAjaxItems.length,d=0;d<c;d++)if(this._DirtyAjaxItems[d]===a)return;this._DirtyAjaxItems.push(a),this._WatchChanges&&!1===this._IgnoreDirtyFlag&&dojo.style(dojo.byId(b._MsgDisplayID),"display","inline")}},clearDirtyAjaxItem:function(a){for(var b=this._DirtyAjaxItems.length,c=0;c<b;c++)this._DirtyAjaxItems[c]===a&&this._DirtyAjaxItems.splice(c,1);this.hasDirtyData()||$("#"+this._MsgDisplayID).hide()},clearDirtyStatus:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&(a._CurrentEntityIsDirty=!1,$("#"+a._MsgDisplayID).hide())},notifyIsSaving:function(){if(Sage.Utility.Validate._isValid){var a=Sage.Services.getService("ClientBindingManagerService");a&&(Sys.WebForms.PageRequestManager.getInstance().add_endRequest(a.handleEndSaveRequest),a.clearDirtyStatus(),"insert"===Sage.Utility.getModeId()&&(a._SkipCheck=!0),a.onSave())}},handleEndSaveRequest:function(a,b){var c=Sage.Services.getService("ClientBindingManagerService");c&&(b.get_error()?c.markDirty():c.clearDirtyStatus(),Sys.WebForms.PageRequestManager.getInstance().remove_endRequest(c.handleEndSaveRequest))},saveForm:function(){var a=dojo.byId(this._SaveBtnID);a&&("input"===a.tagName.toLowerCase()&&"image"===a.type?(this.notifyIsSaving(),Sys.WebForms.PageRequestManager.getInstance()._doPostBack(a.name,null)):a.onClick&&(this.notifyIsSaving(),a.onClick()))},registerResetBtn:function(a){if(a){var b=dojo.byId(a);b&&$addHandler(b,"click",this.resetCurrentEntity)}},registerSaveBtn:function(a,b){if(a){var c=dojo.byId(a);c&&(dojo.connect(c,"onclick",function(){Sage.Utility.Validate.onWorkSpaceSave(b)}),$addHandler(c,"click",this.notifyIsSaving),""===this._SaveBtnID&&(this._SaveBtnID=a))}},registerDialogCancelBtn:function(a){if(a){var b=dojo.byId(a);b&&$addHandler(b,"click",this.rollbackCurrentTransaction)}},registerBoundControls:function(a){if(this._WatchChanges&&a)for(var b,c=a.split(","),d=0;d<c.length;d++)dojo.byId(c[d])?b=dojo.byId(c[d]):dijit.byId(c[d])&&(b=dijit.byId(c[d]).focusNode),b&&(b.attributes.slxcompositecontrol?this.findChildControls(b):this.attachChangeHandler(b));this.findWarningExceptions()},findChildControls:function(a){if(a&&a.attributes&&a.attributes.slxchangehook&&!a.attributes.slxcompositecontrol)this.attachChangeHandler(a);else if(a.childNodes)for(var b=0;b<a.childNodes.length;b++)this.findChildControls(a.childNodes[b])},setDijitControlFocus:function(a){var b=dijit.byId(a);if(b)return b.focus(),b.select&&b.select(),!0},setControlFocus:function(a){var b=function(a){if(void 0===a)return!1;if(a&&a.select&&("function"==typeof a.select||"object"==typeof a.select)){a.select();try{a.focus()}catch(a){return!1}return!0}return!1},c=$("#"+a)[0];if(c){if(b(c))return;if((c=$("#"+a+" TEXTAREA")[0])&&b(c))return;if(c=$("#"+a+" INPUT")[0]){if(dojo.hasClass(c,"dijitArrowButtonInner")){if(this.setDijitControlFocus(a+"-SingleSelectPickList-Combo"))return}else if(dojo.hasClass(c,"dijitValidationInner")){if((c=$("#"+a+" INPUT")[1])&&b(c))return}else if("none"==dojo.style(c,"display")&&0===c.classList.length&&(c=$("#"+a+" INPUT")[3])&&b(c))return;if(b(c))return}if((c=$("#"+a+" SELECT")[0])&&b(c))return}},attachChangeHandler:function(a){if(a)if("A"===a.tagName||"INPUT"===a.tagName&&("button"===a.type||"image"===a.type||"submit"===a.type))this.registerChildPostBackWarningExceptions(a);else{try{a._events=a._events||{change:[]},$removeHandler(a,"change",this.markDirty)}catch(a){}$addHandler(a,"change",this.markDirty)}},registerPostBackWarningExceptions:function(a){if(a)for(var b=$("a,input[type='INPUT'],input[type='BUTTON'],input[type='IMAGE'],input[type='SUBMIT']",a).get(),c=0;c<b.length;c++)this.registerChildPostBackWarningExceptions(b[c])},findWarningExceptions:function(){for(var a=$("span[slxcompositecontrol], div[slxcompositecontrol]").get(),b=0;b<a.length;b++)this.registerPostBackWarningExceptions(a[b])},registerChildPostBackWarningExceptions:function(a){if(a){if($(a).hasClass("leavesPage"))return;if("A"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"image"==a.type||"submit"==a.type)){try{$removeHandler(a,"click",this.skipWarning)}catch(a){}$addHandler(a,"click",this.skipWarning)}}},turnOffWarnings:function(){var a=Sage.Services.getService("ClientBindingManagerService");if(a){a._SkipCheck=!0;window.setTimeout(function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&(a._SkipCheck=!0)},500)}},resumeWarning:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&(a._SkipCheck=!1)},skipWarning:function(){var a=Sage.Services.getService("ClientBindingManagerService");if(a){a._SkipCheck=!0;window.setTimeout(function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&(a._SkipCheck=!1)},500)}},resetCurrentEntity:function(){var a=Sage.Services.getService("ClientBindingManagerService");if(a.doFormReset(),a){var b=Sage.Services.getService("ClientContextService");b&&(b.containsKey("ResetCurrentEntity")?b.setValue("ResetCurrentEntity","true"):b.add("ResetCurrentEntity","true")),a.clearDirtyStatus()}},rollbackCurrentTransaction:function(){var a=Sage.Services.getService("ClientBindingManagerService");if(a.doSectionReset("dialog"),a){var b=Sage.Services.getService("ClientContextService");b&&(b.containsKey("RollbackEntityTransaction")?b.setValue("RollbackEntityTransaction",a._entityTransactionID):b.add("RollbackEntityTransaction",a._entityTransactionID))}},doFormReset:function(){document.forms[0].reset()},doSectionReset:function(a){function b(a,b){return"main"==a&&document.getElementById("MainContent")?document.getElementById("MainContent").getElementsByTagName(b):"tabs"==a&&document.getElementById("TabControl")?document.getElementById("TabControl").getElementsByTagName(b):document.getElementById("DialogWorkspace_content")?document.getElementById("DialogWorkspace_content").getElementsByTagName(b):[]}var c,d,e=b(a,"INPUT");if(e.length>0){for(d=0;d<e.length;d++)c=e[d],"checkbox"===c.type||"radio"===c.type?c.checked!=c.defaultChecked&&(c.checked=c.defaultChecked):c.value!=c.defaultValue&&(c.value=c.defaultValue);for(e=b(a,"TEXTAREA"),d=0;d<e.length;d++)c=e[d],c.value!=c.defaultValue&&(c.value=c.defaultValue);for(e=b(a,"SELECT"),d=0;d<e.length;d++){c=e[d];for(var f=0;f<c.options.length;f++)c.options[f].selected=c.options[f].defaultSelected}}else document.forms[0].reset()},setCurrentTransaction:function(a){this._entityTransactionID=a},clearReset:function(){if(Sage.Services){var a=Sage.Services.getService("ClientContextService");a&&(a.containsKey("ResetCurrentEntity")&&a.remove("ResetCurrentEntity"),a.containsKey("RollbackEntityTransaction")&&a.remove("RollbackEntityTransaction"))}}});return Sage.Services.hasService("ClientBindingManagerService")||Sage.Services.addService("ClientBindingManagerService",new Sage.Services.ClientBindingManagerService),b})},"Sage/Services/ClientContextService":function(){define(["dojo/_base/declare"],function(a){return a("Sage.Services.ClientContextService",null,{contextDataFieldId:!1,_items:[],_watches:[],constructor:function(a){dojo.mixin(this,a),this.load()},_toItemLiteral:function(a,b){var c={};return c.itemKey=a,c.itemVal=b,c},_indexOf:function(a){for(var b=0;b<this._items.length;b++)if(this._items[b].itemKey==a)return b;return-1},_indexOfNoCase:function(a){for(var b=0;b<this._items.length;b++)if(this._items[b].itemKey.toUpperCase()==a.toUpperCase())return b;return-1},_throwKeyNotFound:function(a){throw"Entry Not Found: "+a},_throwDuplicateKey:function(a){throw"Entry Already Exists: "+a},add:function(a,b){if(-1===this._indexOf(a)){var c=this._toItemLiteral(a,b);this._items.push(c),this.save()}else this._throwDuplicateKey(a)},remove:function(a){var b=this._indexOf(a);-1!==b&&(this._items.splice(b,1),this.save())},setValue:function(a,b){var c=this._indexOf(a);-1!==c?(this._items[c].itemVal=b,this.save()):this._throwKeyNotFound(a)},getValue:function(a){var b=this._indexOf(a);if(-1!==b)return decodeURIComponent(this._items[b].itemVal);this._throwKeyNotFound(a)},getValueEx:function(a,b){var c;if(-1!==(c=b?this._indexOfNoCase(a):this._indexOf(a)))return decodeURIComponent(this._items[c].itemVal);this._throwKeyNotFound(a)},clear:function(){this._items=[],this.save()},containsKey:function(a){return-1!==this._indexOf(a)},containsKeyEx:function(a,b){return b?-1!==this._indexOfNoCase(a):-1!==this._indexOf(a)},getCount:function(){return this._items.length},hasKeys:function(){return 0===this._items.length},getKeys:function(){var a,b=[];for(a=0;a<this._items.length;a++)b.push(this._items[a].itemKey);return b},valueAt:function(a){return this._items[a]?decodeURIComponent(this._items[a].itemVal):null},keyAt:function(a){return this.load(),this._items[a]?this._items[a].itemKey:null},getValues:function(){var a,b=[];for(a=0;a<this._items.length;a++)b.push(decodeURIComponent(this._items[a].itemVal));return b},save:function(a){var b=document.getElementById(this.contextDataFieldId);b?b.value=this.toString():alert("can't find context data field")},load:function(){var a=document.getElementById(this.contextDataFieldId);a&&a.value&&this.fromString(a.value)},toString:function(){var a,b="";for(a=0;a<this._items.length;a++)b+=this._items[a].itemKey+"="+encodeURIComponent(this._items[a].itemVal),a!==this._items.length-1&&(b+="&");return b},fromString:function(a){if(this._items=[],""!==a){var b,c=a.split("&");for(b=0;b<c.length;b++){var d=c[b].split("=");this._items.push(this._toItemLiteral(d[0],decodeURIComponent(d[1])))}}this.save()}})})},"Sage/Services/SelectionContextService":function(){define(["dojo/_base/declare"],function(a){var b=a("Sage.Services.SelectionContextService",null,{_url:"",constructor:function(){this._url="slxdata.ashx/slx/crm/-/SelectionService"},getSelectionInfo:function(a,b){void 0!==a&&null!==a||(a=""),dojo.xhrGet({url:this._url,handleAs:"json",load:function(a){b(a)},error:function(a,b,c){}})},getSelectedIds:function(a,b){dojo.xhrGet({url:this._url,handleAs:"json",load:function(a){b(a)},error:function(a,b,c){}})},setSelectionContext:function(a,b,c){dojo.xhrPost({url:dojo.string.substitute("${0}/SetSelectionContext?key=${1}",[this._url,a]),handleAs:"json",load:function(a){c(a)},error:function(a,b,d){c(d)},postData:dojo.toJson(b)})}});return Sage.Services.addService("SelectionContextService",new Sage.Services.SelectionContextService),b})},"Sage/Services/JobService":function(){define(["Sage/Utility","Sage/UI/Dialogs","dojo/_base/declare","dojo/string","dojo/i18n!./nls/JobService"],function(a,b,c,d,e){var f=c("Sage.Services.JobService",null,{getSchedulingSDataService:function(){return new Sage.SData.Client.SDataService({serverName:window.location.hostname,virtualDirectory:Sage.Utility.getVirtualDirectoryName()+"/slxdata.ashx",applicationName:"$app",
contractName:"scheduling",port:!(!window.location.port||80===window.location.port)&&window.location.port,protocol:!!/https/i.test(window.location.protocol)&&"https",json:!0})},getJobDefinition:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.key)return void b.showError(d.substitute(e.txtInvalidParameter,["options.key"]),"Job Service");var c=this.getSchedulingSDataService(),f=new Sage.SData.Client.SDataSingleResourceRequest(c);f.setQueryArg("include","$descriptors"),f.setResourceKind(d.substitute("${0}('${1}')",[a.resourceKind,a.key])),f.read({success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtUnexpectedError,[b.status,b.statusText]);a.failure&&a.failure(b,c)}})},getExecution:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.triggerId&&"string"!=typeof a.executionId)return void b.showError(d.substitute(e.txtInvalidParameter,["options.triggerId or options.executionId"]),"Job Service");var c=this.getSchedulingSDataService(),f=new Sage.SData.Client.SDataSingleResourceRequest(c);"string"==typeof a.triggerId&&(f.setResourceKind("executions"),f.setQueryArg("include","$descriptors"),f.setQueryArg("where",d.substitute("triggerId eq '${0}'",[a.triggerId]))),"string"==typeof a.executionId&&f.setResourceKind(d.substitute("executions('${0}')",[a.executionId])),f.read({success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtUnexpectedError,[b.status,b.statusText]);a.failure&&a.failure(b,c)}})},interruptExecution:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.key)return void b.showError(d.substitute(e.txtInvalidParameter,["options.key"]),"Job Service");var c=this.getSchedulingSDataService(),f=new Sage.SData.Client.SDataServiceOperationRequest(c);f.setApplicationName("$app"),f.setOperationName("interrupt"),f.setResourceKind("executions('"+a.key+"')");var g={};f.execute(g,{success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtTriggerJobError,[a.key,b.status,b.statusText]);a.failure&&a.failure(b,c)}})},scheduleJob:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.key)return void b.showError(d.substitute(e.txtInvalidParameter,["options.key"]),"Job Service");var c=this.getSchedulingSDataService(),f={$descriptor:a.descriptor?a.descriptor:"",job:{$key:a.key},startTimeUtc:a.startTime,endTimeUtc:a.endTime,parameters:a.parameters,cronExpression:a.cronExpression},g=new Sage.SData.Client.SDataApplicationRequest(c);g.setResourceKind("triggers"),g.execute=function(a,b){return g.service.executeServiceOperation(g,a,b)},g.execute(f,{success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtScheduleJobError,[a.key,b.status,b.statusText]);a.failure&&a.failure(b,c)}})},getTrigger:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.triggerId)return void b.showError(d.substitute(e.txtInvalidParameter,["options.triggerId"]),"Job Service");var c=this.getSchedulingSDataService(),f=new Sage.SData.Client.SDataSingleResourceRequest(c);f.setResourceKind(d.substitute("triggers('${0}')",[a.triggerId])),f.read({success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtUnexpectedError,[b.status,b.statusText]);a.failure&&a.failure(b,c)}})},updateTrigger:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.key)return void b.showError(d.substitute(e.txtInvalidParameter,["options.key"]),"Job Service");var c=this.getSchedulingSDataService(),f={$descriptor:a.descriptor,job:{$key:a.key},startTimeUtc:a.startTime,endTimeUtc:a.endTime,parameters:a.parameters,cronExpression:a.cronExpression},g=new Sage.SData.Client.SDataSingleResourceRequest(c);g.setResourceKind("triggers"),g.setResourceSelector(d.substitute("'${0}'",[a.key])),g.update(f,{success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtScheduleJobError,[a.key,b.status,b.statusText]);a.failure&&a.failure(b,c)}})},deleteScheduledJob:function(b,c){if(!b)return!1;var e="object"==typeof c&&null!==c,f=this.getSchedulingSDataService(),g=new Sage.SData.Client.SDataApplicationRequest(f);return g.setApplicationName("$app"),g.setQueryArg("format","json"),g.setQueryArg("hasErrorHandler","true"),g.setResourceKind(d.substitute("triggers('${0}')",[b])),dojo.xhrDelete({handleAs:"json",url:g.uri.toString(),preventCache:!0,load:function(a){e&&c.callback(a)},error:function(b,d){a.ErrorHandler.handleHttpError(b,d),e&&c.errback(b)}}),!0},triggerJob:function(a){if(!a)return void b.showError(d.substitute(e.txtInvalidParameter,["options"]),"Job Service");if("string"!=typeof a.key)return void b.showError(d.substitute(e.txtInvalidParameter,["options.key"]),"Job Service");var c=this.getSchedulingSDataService(),f={name:a.key,request:{parameters:a.parameters?a.parameters:[]}},g=new Sage.SData.Client.SDataServiceOperationRequest(c);g.setApplicationName("$app"),g.setOperationName("trigger"),g.setResourceKind("jobs('"+a.key+"')"),g.execute(f,{success:function(b){a.success&&a.success(b)},failure:function(b,c){d.substitute(e.txtTriggerJobError,[a.key,b.status,b.statusText]);a.failure&&a.failure(b,c)}})}});return Sage.Services.hasService("JobService")||Sage.Services.addService("JobService",new Sage.Services.JobService),f})},"Sage/Services/ReportingService":function(){define(["dojo/_base/declare","dojo/string","dojo/i18n!./nls/ReportingService","Sage/Utility","Sage/Utility/Jobs","Sage/Reporting/Enumerations","dojo/json","dojo/_base/array","Sage/MainView/ReportMgr/ReportWizardController","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k){var l=a("Sage.Services.ReportingService",null,{startWizard:function(a){i.startWizard(a)},runReport:function(a){a.key=this._getJobId(a.reportType),e.triggerJobAndDisplayProgressDialog(a)},scheduleReport:function(a){a.key=this._getJobId(a.reportType),Sage.Services.getService("JobService").scheduleJob(a)},getSchedule:function(a){Sage.Services.getService("JobService").getTrigger(a)},updateSchedule:function(a){Sage.Services.getService("JobService").updateTrigger(a)},getReportMetadata:function(a){if(a&&"string"==typeof a.reportId){var e,f,g,h;-1!==a.reportId.indexOf(":")?(e=a.reportId.split(":")[0],g=a.reportId.split(":")[1]):f=a.reportId;var i=Sage.Data.SDataServiceRegistry.getSDataService("system");if(e&&g)return h=new Sage.SData.Client.SDataResourceCollectionRequest(i),h.setResourceKind("reports"),h.setQueryArg("where","family eq '"+e+"' and name eq '"+g+"'"),h.setQueryArg("count","1"),void h.read({success:function(b){b&&b.$resources&&1===b.$resources.length&&a.success&&a.success(b.$resources[0])},failure:function(e,f){b.substitute(c.txtUnexpectedError,[e.status,e.statusText]);a.failure?a.failure(e,f):d.ErrorHandler.handleHttpError(e,f)}});h=new Sage.SData.Client.SDataSingleResourceRequest(i),h.setResourceKind("reports"),h.setResourceSelector("'"+f+"'"),h.read({success:function(b){a.success&&a.success(b)},failure:function(e,f){b.substitute(c.txtUnexpectedError,[e.status,e.statusText]);a.failure?a.failure(e,f):d.ErrorHandler.handleHttpError(e,f)}})}},_getJobId:function(a){switch(a){case f.ReportTypes.CrystalReport:return"Saleslogix.Reporting.Jobs.CrystalReportsJob";default:throw b.substitute(c.txtUnsupportedReportType,[a])}},defaultDetailReports:null,defaultReport:null,reportJob:null,showReport:function(a,b,d){return this.isValidString(a)?this.isValidString(b)?this.isValidString(d)||d instanceof Array?void this.showReportViewer(a,b,d):void k.showError(this.getDisplayError(c.invalidEntityError)):void k.showError(this.getDisplayError(c.invalidTableNameError)):void k.showError(this.getDisplayError(c.invalidReportPluginError))},showDefaultReport:function(){var a=this.getCurrentReport();if(this.isValidString(a)){var b=j.getCurrentEntityCondition(),d={reportId:a,reportOptions:{wizardOptions:{hiddenSteps:[f.CrystalReportWizardStep.Conditions,f.CrystalReportWizardStep.ExportOptions]},scheduleOptions:{executionType:f.ExecutionType.OnDemand},exportOptions:{outputFormat:f.ReportExportFormat.Pdf},conditionOptions:{conditions:[b],conditionsConnector:f.ReportConditionConnector.And}}};this.startWizard(d)}else k.showError(this.getDisplayError(c.noDefaultReportError))},showReportById:function(a){this.showReportViewerInContext(a)},showReportByName:function(a){this.showReportViewerInContext(a)},showReportViewerInContext:function(a){if(!this.isValidString(a))return void k.showError(this.getDisplayError(c.invalidReportPluginError));var b=this.getCurrentContext();this.showReportViewer(a,b.tablename,b.entityid)},showReportViewer:function(a,b,d){return this.isValidString(a)?this.isValidString(b)?this.isValidString(d)||d instanceof Array?(this.setReportJob(a,b,d),void this._showReport()):void k.showError(this.getDisplayError(c.invalidEntityError)):void k.showError(this.getDisplayError(c.invalidTableNameError)):void k.showError(this.getDisplayError(c.invalidReportPluginError))},setReportJob:function(a,b,c){if("string"==typeof a&&"string"==typeof b&&("string"==typeof c||c instanceof Array)){var d=this._getRecordSelectionFormula(b,c);this.reportJob=this.newReportJob(),this.reportJob.pluginid=a,this.reportJob.rsf=d}},_getRecordSelectionFormula:function(a,b){if(this.isValidString(b)&&(b=-1!==b.indexOf(",")?b.split(","):[b]),0!==b.length&&"string"==typeof a&&b instanceof Array){var c,d=a.toUpperCase()+"."+a.toUpperCase()+"ID";if(1===b.length)c="({"+d+'} = "'+b[0]+'")';else{var e=[];h.forEach(b,function(a,b){a='"'+a+'"',e.push(a)}),c="({"+d+"} in ["+e.join(",")+"])"}return c}},newReportJob:function(){return{pluginid:"",rsf:"",sortdirections:"",sortfields:""}},showReportEx:function(a){this.reportJob=a,this._showReport()},_showReport:function(){var a=this.getReportId(this.reportJob.pluginid),b={reportId:a,reportOptions:{wizardOptions:{hiddenSteps:[f.CrystalReportWizardStep.Conditions,f.CrystalReportWizardStep.ExportOptions]},scheduleOptions:{executionType:f.ExecutionType.OnDemand},exportOptions:{outputFormat:f.ReportExportFormat.Pdf},conditionOptions:{conditionsConnector:f.ReportConditionConnector.And,recordSelectionFormula:this.reportJob.rsf}}};this.startWizard(b)},getCurrentReport:function(){var a=this.getCurrentContext();if(""===a.tablename||""===a.entityid)return null;switch(a.tablename){case"ACCOUNT":return this.getAccountReport();case"CONTACT":return this.getContactReport();case"OPPORTUNITY":return this.getOpportunityReport();case"DEFECT":return this.getDefectReport();case"SALESORDER":return this.getSalesOrderReport();case"TICKET":return this.getTicketReport();case"QUOTE":return this.getReport("QUOTE");default:return this.getDefaultReport()}},getDefaultReport:function(){return this.defaultReport},setDefaultReport:function(a){this.defaultReport=a},getReport:function(a){this._initReports();var c=null;return this.isValidString(a)&&dojo.isObject(this.defaultDetailReports)&&dojo.some(this.defaultDetailReports,function(d){if(d.maintable.toUpperCase()==a.toUpperCase()){var e=b.substitute("${0}:${1}",[d.family,d.name]);return c=e,!0}return!1}),c},setReport:function(a,b){var c=this.parseReport(a);if(null!==c){var d=b||c.family.toUpperCase();this.setReportEx(d,c.family,c.name)}},setReportEx:function(a,b,c){if(this._initReports(),this.isValidString(a)&&this.isValidString(b)&&this.isValidString(c)&&dojo.isObject(this.defaultDetailReports)){if(!dojo.some(this.defaultDetailReports,function(d){return d.maintable.toUpperCase()==a.toUpperCase()&&(d.family=b,d.name=c,!0)})){var d={maintable:a,family:b,name:c};this.defaultDetailReports.push(d)}}},getAccountReport:function(){return this.getReport("ACCOUNT")},setAccountReport:function(a){this.setReport(a,"ACCOUNT")},getContactReport:function(){return this.getReport("CONTACT")},setContactReport:function(a){this.setReport(a,"CONTACT")},getOpportunityReport:function(){return this.getReport("OPPORTUNITY")},setOpportunityReport:function(a){this.setReport(a,"OPPORTUNITY")},getDefectReport:function(){return this.getReport("DEFECT")},setDefectReport:function(a){this.setReport(a,"DEFECT")},getSalesOrderReport:function(){return this.getReport("SALESORDER")},setSalesOrderReport:function(a){this.setReport(a,"SALESORDER")},getTicketReport:function(){return this.getReport("TICKET")},setTicketReport:function(a){this.setReport(a,"TICKET")},saveDefaultReports:function(a,b){if(dojo.isObject(this.defaultDetailReports)){var c=Sage.Services.getService("UserOptions");if(c){var d=function(b){"function"==typeof a&&a(b)},e=function(a){"function"==typeof b&&b(a)},f={defaultDetailReports:this.defaultDetailReports},g=dojo.toJson(f);c.set("DefaultDetailReports","Reporting",g,d,e)}}},getReportId:function(a){var b=null;return this.isValidString(a)&&(-1!=a.indexOf(":")?dojo.xhrGet({url:"SLXReportsHelper.ashx?method=GetReportId&report="+encodeURIComponent(a),handleAs:"text",preventCache:!0,sync:!0,load:function(a,c){b=a},error:function(a,b){d.ErrorHandler.handleHttpError(a,b)}}):12==a.length&&(b=a)),b},getCurrentContext:function(){var a={tablename:"",entityid:""};if(Sage.Services.hasService("ClientEntityContext")){var b=Sage.Services.getService("ClientEntityContext");if(!b)return a;var c=b.getContext();if(!c||void 0===c.EntityTableName)return a;a.tablename=c.EntityTableName.toUpperCase(),a.entityid=c.EntityId}return a},parseReport:function(a){if(this.isValidString(a)){var b=a.split(":");if(dojo.isArray(b)&&2==b.length)return{family:b[0],name:b[1]}}return null},isValidString:function(a){return a&&"string"==typeof a},_initReports:function(){if(null===this.defaultDetailReports){var a=this;dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/useroptions/Reporting/DefaultDetailReports",handleAs:"json",preventCache:!0,sync:!0,load:function(b,c){if(dojo.isObject(b)&&void 0!==b.optionValue&&""!==b.optionValue){var d=dojo.fromJson(b.optionValue);d&&void 0!==d.defaultDetailReports&&dojo.isArray(d.defaultDetailReports)&&dojo.mixin(a,d)}},error:function(a,b){}})}null===this.defaultDetailReports&&(this.defaultDetailReports=[{maintable:"ACCOUNT",family:"Account",name:"Account Detail"},{maintable:"CONTACT",family:"Contact",name:"Contact Detail"},{maintable:"OPPORTUNITY",family:"Opportunity",name:"Opportunity Detail"},{maintable:"DEFECT",family:"Defect",name:"Support Defect"},{maintable:"TICKET",family:"Ticket",name:"Support Ticket"},{maintable:"SALESORDER",family:"Sales Order",name:"Sales Order Detail"},{maintable:"QUOTE",family:"Quote",name:"Quote Detail"}])},getDisplayError:function(a){return b.substitute("${0} ${1}",[c.reportCannotBeShownError,a])}});return Sage.Services.hasService("ReportingService")||Sage.Services.addService("ReportingService",new Sage.Services.ReportingService),l})},"Sage/Reporting/Enumerations":function(){define(["dojo/_base/declare","dojo/i18n!./nls/Enumerations","dojo/_base/lang"],function(a,b,c){var d=c.setObject("Sage.Reporting.Enumerations",c.mixin({},{nlsResources:b,ConditionPreset:{CurrentEntity:"CurrentEntity",CurrentGroup:"CurrentGroup",CurrentUser:"CurrentUser",AllRecords:"AllRecords",Custom:"Custom",Preset:"Preset"},ReportConditionConnector:{And:"And",Or:"Or"},FieldDataTypes:{String:"String",Numeric:"Numeric",DateTime:"DateTime"},DateRange:{ThisWeek:"ThisWeek",ThisMonth:"ThisMonth",ThisQuarter:"ThisQuarter",ThisYear:"ThisYear",LastWeek:"LastWeek",LastMonth:"LastMonth",LastQuarter:"LastQuarter",LastYear:"LastYear",MonthToDate:"MonthToDate",QuarterToDate:"QuarterToDate",YearToDate:"QuarterToDate"},ReportExportFormat:{NoFormat:"NoFormat",Pdf:"Pdf",Excel:"Excel",ExcelDataOnly:"ExcelDataOnly",Csv:"Csv",Word:"Word",Xml:"Xml"},ReportTypes:{CrystalReport:"Crystal",ExportToFileReportType:"ExportToFile"},getReportTypeCaption:function(a){switch(a){case this.ReportTypes.CrystalReport:return b.txtCrystalReport;case this.ReportTypes.ExportToFileReportType:return b.txtExportToFileReportType}return b.txtUnknownReportType},ReportConditionType:{Group:"Group",DateRange:"DateRange",User:"User",Query:"Query"},getReportConditionTypeCaption:function(a){switch(String(a)){case String(this.ReportConditionType.Group):return b.txtGroup;case String(this.ReportConditionType.DateRange):return b.txtDateRange;case String(this.ReportConditionType.User):return b.txtUser;case String(this.ReportConditionType.Query):return b.txtQuery}return""},ReportConditionOperator:{IsGreaterThan:"IsGreaterThan",IsLessThan:"IsLessThan",IsInTheRange:"IsInTheRange",IsAfter:"IsAfter",IsBefore:"IsBefore",Contains:"Contains",StartsWith:"StartsWith",EndsWith:"EndsWith",Is:"Is",IsNot:"IsNot"},getReportConditionOperatorCaption:function(a){switch(String(a)){case String(this.ReportConditionOperator.IsGreaterThan):return b.txtIsGreaterThan;case String(this.ReportConditionOperator.IsLessThan):return b.txtIsLessThan;case String(this.ReportConditionOperator.IsInTheRange):return b.txtIsInTheRange;case String(this.ReportConditionOperator.IsAfter):return b.txtIsAfter;case String(this.ReportConditionOperator.IsBefore):return b.txtIsBefore;case String(this.ReportConditionOperator.Contains):return b.txtContains;case String(this.ReportConditionOperator.StartsWith):return b.txtStartsWith;case String(this.ReportConditionOperator.EndsWith):return b.txtEndsWith;case String(this.ReportConditionOperator.Is):return b.txtIs;case String(this.ReportConditionOperator.IsNot):return b.txtIsNot}return""},ExecutionType:{OnDemand:0,Scheduled:1},getExecutionTypeCaption:function(a){switch(a){case this.ExecutionType.OnDemand:return b.txtOnDemand;case this.ExecutionType.Scheduled:return b.txtScheduled}return""},CrystalReportWizardStep:{Init:0,Conditions:1,Parameters:2,ExportOptions:3,Finish:4},SlxParameterValueKind:{NumberParameter:"NumberParameter",CurrencyParameter:"CurrencyParameter",BooleanParameter:"BooleanParameter",DateParameter:"DateParameter",StringParameter:"StringParameter",DateTimeParameter:"DateTimeParameter",TimeParameter:"TimeParameter",UserParameter:"UserParameter"},SlxDefaultValueDisplayType:{Description:"Description",DescriptionAndValue:"DescriptionAndValue"},SlxParameterValueRangeKind:{Range:"Range",Discrete:"Discrete",DiscreteAndRange:"DiscreteAndRange"},SlxRangeBoundType:{NoBound:"NoBound",BoundExclusive:"BoundExclusive",BoundInclusive:"BoundInclusive"},ParameterClassName:{DiscreteValue:"CrystalReports.ParameterFieldDiscreteValue",RangeValue:"CrystalReports.ParameterFieldRangeValue"}}));return c.setObject("Sage.Reporting.Enumerations",d),Sage.Reporting.Enumerations})},"Sage/MainView/ReportMgr/ReportWizardController":function(){define(["Sage/UI/Dialogs","dojo/json","dojo/_base/array","dojo/_base/lang","dojo/i18n!./nls/ReportWizardController","Sage/Reporting/Enumerations","Sage/Utility","Sage/MainView/ReportMgr/Crystal/CrystalReportWizardController"],function(a,b,c,d,e,f,g,h){return Sage.namespace("Sage.MainView.ReportMgr.ReportWizardController"),dojo.mixin(Sage.MainView.ReportMgr.ReportWizardController,{startWizard:function(a){if(a)if(a.reportId)this._getReportMetadata(a.reportId,a.reportOptions,a.reportDisplayName);else{if(!a.triggerId)return;this._getReportSchedule(a.triggerId)}},_getReportSchedule:function(a){var b=this;this._showLoadingIndicator(e.txtLoadingScheduleDetails);var c={triggerId:a,success:function(a){b._closeLoadingIndicator(d.hitch(b,b._triggerReceived,a))},failure:function(a,c){b._closeLoadingIndicator(d.hitch(b,g.ErrorHandler.handleHttpError,a,c))}};Sage.Services.getService("ReportingService").getSchedule(c)},_triggerReceived:function(d){var h=this._getParameterValue(d.parameters,"PluginFamily"),i=this._getParameterValue(d.parameters,"PluginName"),j=this._getParameterValue(d.parameters,"ReportConditions");j=j?"["+j+"]":"[]",j=b.parse(j);var k=this._getParameterValue(d.parameters,"ConditionsConnector");c.forEach(j,function(a,b){a.dataType===f.FieldDataTypes.DateTime&&(g.Convert.isDateString(a.value)&&(a.value=g.Convert.toDateFromString(a.value)),g.Convert.isDateString(a.fromRange)&&(a.fromRange=g.Convert.toDateFromString(a.fromRange)),g.Convert.isDateString(a.toRange)&&(a.toRange=g.Convert.toDateFromString(a.toRange)))});var l=this._getParameterValue(d.parameters,"ReportParameters");l=l?"["+l+"]":"[]",l=b.parse(l);var m=this._getParameterValue(d.parameters,"RunAsUserId"),n=this._getParameterValue(d.parameters,"OutputFormat");this._getParameterValue(d.parameters,"ScheduleName");if(i&&h){var o=Sage.Services.getService("ReportingService"),p=o.getReportId(h+":"+i);if(p){var q={scheduleOptions:{executionType:f.ExecutionType.Scheduled,trigger:d},exportOptions:{outputFormat:n,runAsUserId:m},conditionOptions:{conditions:j,conditionsConnector:k},parameterOptions:{parameters:l}};this._getReportMetadata(p,q)}else a.showError(e.txtCannotDetermineReportId)}else a.showError(e.txtCannotDetermineReportNameOrFamily)},_getReportMetadata:function(a,b,c){var f=this,h=c?e.txtLoading+(e["displayName"+c.replace(/ /g,"")]||c):e.txtLoadingReport;this._showLoadingIndicator(h);var i={reportId:a,success:function(a){f._reportMetadataReceived(a,b)},failure:function(a,b){f._closeLoadingIndicator(d.hitch(f,g.ErrorHandler.handleHttpError,a,b))}};Sage.Services.getService("ReportingService").getReportMetadata(i)},_reportMetadataReceived:function(a,b){c.forEach(a.reportFilters,function(a,b){c.forEach(a.filterConditions,function(a,b){a.dataType===f.FieldDataTypes.DateTime&&(g.Convert.isDateString(a.value)&&(a.value=g.Convert.toDateFromString(a.value)),g.Convert.isDateString(a.fromRange)&&(a.fromRange=g.Convert.toDateFromString(a.fromRange)),g.Convert.isDateString(a.toRange)&&(a.toRange=g.Convert.toDateFromString(a.toRange)))})}),c.forEach(a.parameters,function(a,c){a.currentValues||(a.currentValues=[]),b.parameterOptions&&(b.parameterOptions.parameters[c].defaultValues=a.defaultValues)}),a.localeDisplayName=e["displayName"+a.name.replace(/ /g,"")]||a.displayName,this._closeLoadingIndicator(d.hitch(this,function(){this._getControllerInstance(a,b).startWizard()}))},_getControllerInstance:function(a,b){switch(a.reportType){case f.ReportTypes.CrystalReport:return new h(a,b)}},_showLoadingIndicatorPostCleanup:function(a){var b=new dijit.Dialog({id:"progressDialog",title:a,style:"width: 300px; height: 100px",closable:!1}),c=new dijit.ProgressBar({id:"reportLoadingProgressBar",style:"margin-top: 10px; margin-bottom: 20px",indeterminate:!0});b.containerNode.appendChild(c.domNode),b.show(),dojo.style(b.closeButtonNode,"display","none"),b.onCancel=function(){}},_showLoadingIndicator:function(a){var b=dijit.byId("dlgReportLoading");b?b.destroyRecursive().then(d.partial(this._showLoadingIndicatorPostCleanup,a)):this._showLoadingIndicatorPostCleanup(a)},_closeLoadingIndicator:function(a){var b=dijit.byId("progressDialog");b?setTimeout(function(){b.hide().then(function(){b.destroyRecursive(),a()})},210):a()},_getParameterValue:function(a,b){var d=null;return c.some(a,function(a,c){if(a.name===b)return d=a.value,!0}),d}}),Sage.MainView.ReportMgr.ReportWizardController})},"Sage/MainView/ReportMgr/Crystal/CrystalReportWizardController":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/i18n!./nls/CrystalReportWizardController","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/Crystal/CrystalReportParametersDialog","Sage/MainView/ReportMgr/Crystal/CrystalReportConditionsDialog","Sage/MainView/ReportMgr/Common/ExportOptionsDialog","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/UI/Dialogs","dojo/topic","dojo/string"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.ReportMgr.CrystalReportWizardController",null,{_reportMetadata:null,wizardOptions:null,conditionOptions:null,parameterOptions:null,scheduleOptions:null,exportOptions:null,_mode:null,_nlsResources:d,_subscriptions:[],_dialogIds:["dlgCrystalReportConditions","dlgCrystalReportParameters","dlgExportOptions"],constructor:function(a,b){if(a){this._reportMetadata=a,this._reportMetadata.reportFilters||(this._reportMetadata.reportFilters=[]),this.wizardOptions=b.wizardOptions?b.wizardOptions:this._getDefaultWizardOptions(),this.conditionOptions=b.conditionOptions?b.conditionOptions:this._getDefaultConditionOptions(),this.parameterOptions=b.parameterOptions?b.parameterOptions:this._getDefaultParameterOptions(),this.scheduleOptions=b.scheduleOptions?b.scheduleOptions:this._getDefaultScheduleOptions(),this.exportOptions=b.exportOptions?b.exportOptions:this._getDefaultExportOptions();var c=this;this._subscriptions.push(k.subscribe("/reportManager/reportWizard/nextStep",function(a,b){c._nextStep(a,b)})),this._subscriptions.push(k.subscribe("/reportManager/reportWizard/previousStep",function(a,b){c._previousStep(a,b)})),this._subscriptions.push(k.subscribe("/reportManager/reportWizard/cancel",function(a,b){c._cancel()})),this._mode="new",this.scheduleOptions&&this.scheduleOptions.trigger&&(this._mode="edit")}},startWizard:function(){var a=[];if(this._hasDynamicParameterErrors(a)){var b=l.substitute(d.txtInvalidReportWithDynamicParameters,[this._reportMetadata.family,this._reportMetadata.name,a.join(" ").trim()]);return void j.showError(b,this._nlsResources.txtError)}var c=this._getNextStep(e.CrystalReportWizardStep.Init);this._goToStep(c,null)},_nextStep:function(a,b){this._processCurrentStep(a,b);var c=this._getNextStep(a);this._goToStep(c)},_previousStep:function(a,b){this._processCurrentStep(a,b);var c=this._getPreviousStep(a);this._goToStep(c)},_cancel:function(){var a=this;setTimeout(function(){a._destroyObjects()},dijit.defaultDuration+100)},_getDefaultWizardOptions:function(){return{hiddenSteps:[]}},_getDefaultConditionOptions:function(){return{conditions:[],conditionsConnector:e.ReportConditionConnector.And}},_getDefaultParameterOptions:function(){return{parameters:[]}},_getDefaultScheduleOptions:function(){return{executionType:e.ExecutionType.OnDemand,trigger:null}},_getDefaultExportOptions:function(){return{outputFormat:e.ReportExportFormat.Pdf,runAsUserId:null}},_hasDynamicParameterErrors:function(a){return b.forEach(this._reportMetadata.parameters,function(b,e){b.isDynamic&&!b.isOptionalPrompt&&(!0===b.clientMustQueryDynamicData?a.push(l.substitute(d.txtInvalidDynamicParameterDatasource,{p:b})):!0===b.isInvalidDynamicParameter&&(c.isString(b.invalidDynamicParameterReason)&&""!==b.invalidDynamicParameterReason?a.push(l.substitute(d.txtInvalidDynamicParameterReason,{p:b})):a.push(l.substitute(d.txtInvalidDynamicParameterUnknownReason,{p:b}))))}),a.length>0},_isStepVisible:function(a){var c=!0;if(this.wizardOptions&&this.wizardOptions.hiddenSteps&&b.some(this.wizardOptions.hiddenSteps,function(b,d){if(a===b)return c=!1,!0}),!c)return!1;switch(a){case e.CrystalReportWizardStep.Parameters:return!!(this._reportMetadata.parameters&&this._reportMetadata.parameters.length>0);case e.CrystalReportWizardStep.Conditions:case e.CrystalReportWizardStep.ExportOptions:default:return!0}},_processCurrentStep:function(a,b){switch(a){case e.CrystalReportWizardStep.Conditions:this.conditionOptions=b;break;case e.CrystalReportWizardStep.Parameters:this.parameterOptions=b;break;case e.CrystalReportWizardStep.ExportOptions:this.exportOptions=b.exportOptions,this.scheduleOptions=b.scheduleOptions}},_getNextStep:function(a){for(var b in e.CrystalReportWizardStep){var c=e.CrystalReportWizardStep[b];if(c>a&&this._isStepVisible(c))return c}return null},_getPreviousStep:function(a){var c=[];for(var d in e.CrystalReportWizardStep){var f=e.CrystalReportWizardStep[d];c.unshift(f)}var g=this,h=null;return b.some(c,function(b,c){if(b<a&&g._isStepVisible(b))return h=b,!0}),h},_goToStep:function(a){var b,c,d=this._getNextStep(a),i=null===d||d===e.CrystalReportWizardStep.Finish,j=this._getPreviousStep(a),k=null===j||j===e.CrystalReportWizardStep.Init;switch(a){case e.CrystalReportWizardStep.Conditions:b=dijit.byId("dlgCrystalReportConditions"),b?b.show():(c={reportMetadata:this._reportMetadata,conditionOptions:this.conditionOptions,isLastStep:i,isFirstStep:k},b=new g(c),b.startup(),b.show());break;case e.CrystalReportWizardStep.Parameters:b=dijit.byId("dlgCrystalReportParameters"),b?b.show():(c={reportMetadata:this._reportMetadata,parameters:this.parameterOptions.parameters,isLastStep:i,isFirstStep:k},b=new f(c,this._mode),b.startup(),b.show());break;case e.CrystalReportWizardStep.ExportOptions:b=dijit.byId("dlgExportOptions"),b?b.show():(c={reportMetadata:this._reportMetadata,isLastStep:i,isFirstStep:k,scheduleOptions:this.scheduleOptions,exportOptions:this.exportOptions},b=new h(c),b.startup(),b.show());break;case e.CrystalReportWizardStep.Finish:this._finishWizard()}},_finishWizard:function(){switch(this._destroyObjects(),this._mode){case"new":switch(this.scheduleOptions.executionType){case e.ExecutionType.Scheduled:this._scheduleReport();break;case e.ExecutionType.OnDemand:this._runReport()}break;case"edit":this._updateSchedule()}},_destroyObjects:function(){b.forEach(this._dialogIds,function(a,b){var c=dijit.byId(a);c&&c.destroyRecursive()}),b.forEach(this._subscriptions,function(a,b){a.remove()})},_getJobParameters:function(){var a=[];a.push({name:"PluginFamily",value:this._reportMetadata.family}),a.push({name:"PluginName",value:this._reportMetadata.name}),a.push({name:"TemplateName",value:this._reportMetadata.displayName}),a.push({name:"ReportConditions",value:this.conditionOptions.conditions}),a.push({name:"ConditionsConnector",value:this.conditionOptions.conditionsConnector}),this.conditionOptions.recordSelectionFormula&&a.push({name:"RecordSelectionFormula",value:this.conditionOptions.recordSelectionFormula}),b.forEach(this.parameterOptions.parameters,function(a){a&&(a.defaultValues=null,a.values=null)}),a.push({name:"ReportParameters",value:this.parameterOptions.parameters});var c=this.exportOptions.description?this.exportOptions.description:this._reportMetadata.displayName;return a.push({name:"ScheduleName",value:c}),a.push({name:"OutputFormat",value:this.exportOptions.outputFormat}),this.exportOptions.runAsUserId&&a.push({name:"RunAsUserId",value:this.exportOptions.runAsUserId}),a},_getJobOptions:function(){var a,b=this._getJobParameters(),c=dojo.isString(this.exportOptions.description)&&""!==this.exportOptions.description?this.exportOptions.description:this._reportMetadata.displayName,d=dojo.date.locale.format(new Date,{selector:"date",datePattern:"yyyy_MM_dd_hhmm",locale:Sys.CultureInfo.CurrentCulture.name}),f="";return"string"==typeof this.exportOptions.runAsUserId?(a=i.getUser(this.exportOptions.runAsUserId))&&(f=a.UserName):(a=i.getUser(i.getCurrentUser().userID))&&(f=a.UserName),{descriptor:l.substitute("${0}_${1}_${2}",[c,f,d]),closable:!0,reportType:e.ReportTypes.CrystalReport,parameters:b,title:this.exportOptions.description||this._reportMetadata.localeDisplayName,success:function(a){},failure:function(a){}}},_scheduleReport:function(){var a=this._getJobOptions();a.cronExpression=this.scheduleOptions.cronExpression,a.descriptor=this.scheduleOptions.scheduleDescription,a.startTime=this.scheduleOptions.startTime,a.endTime=this.scheduleOptions.endTime,a.success=function(){j.showInfo(d.txtReportSuccessfullyScheduled,d.dlgScheduleReport_Title)},Sage.Services.getService("ReportingService").scheduleReport(a)},_runReport:function(){var a=this._getJobOptions();Sage.Services.getService("ReportingService").runReport(a)},_updateSchedule:function(){var a=this._getJobOptions();a.cronExpression=this.scheduleOptions.cronExpression,a.descriptor=this.scheduleOptions.scheduleDescription,a.startTime=this.scheduleOptions.startTime,a.endTime=this.scheduleOptions.endTime,a.success=function(){i.refreshList("schedules"),j.showInfo(d.txtScheduleSuccessfullyUpdated,d.dlgScheduleReport_Title)},a.closable=!0,a.key=this.scheduleOptions.trigger.$key,a.descriptor=this.scheduleOptions.scheduleDescription,Sage.Services.getService("ReportingService").updateSchedule(a)}})})},
"Sage/MainView/ReportMgr/Crystal/CrystalReportParametersDialog":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/text!./templates/CrystalReportParametersDialog.html","dojo/i18n!./nls/CrystalReportParametersDialog","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/Common/_WizardDialogBase","Sage/MainView/ReportMgr/Crystal/BooleanParameterEditor","Sage/MainView/ReportMgr/Crystal/DateParameterEditor","Sage/MainView/ReportMgr/Crystal/SimpleParameterEditor","Sage/MainView/ReportMgr/Crystal/MultiSelectParameterEditor","Sage/Utility"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.MainView.ReportMgr.Crystal.CrystalReportParametersDialog",[f],{id:"dlgCrystalReportParameters",widgetTemplate:k.makeTemplateFromString(c.replace("\n","")),mode:null,_nlsResources:d,_helpIconTopic:"RptscheduleWiz",_parameterWidgets:null,_parameters:null,_currentStep:e.CrystalReportWizardStep.Parameters,constructor:function(a,b){this.mode=b,this._initializeWizardOptions(a),this._parameterWidgets=[],this._parameters=a.parameters&&a.parameters.length>0?a.parameters:a.reportMetadata.parameters},destroy:function(){b.forEach(this._parameterWidgets,function(a,b){dojo.publish("entity/report/parameters/control/destroy",[a,this]),a&&a.destroyRecursive()}),this._dialog.destroyRecursive(),this.inherited(arguments)},startup:function(){this.inherited(arguments),this._loadPromptParameters()},isValid:function(){var a=!0;return b.forEach(this._parameterWidgets,function(b,c){a=a&&b.isValid()}),a},_loadPromptParameters:function(){var a=this;b.forEach(this._parameters,function(b,c){if(!b.name.toUpperCase().startsWith("PM-")){var d=a._getParameterEditor(b);d&&(d.paramId=c,d.mode=a.mode,d.placeAt(a.paramsContainerDiv),d.startup(),a._parameterWidgets.push(d))}})},_getDialogTitle:function(){return this._nlsResources.txtDialogTitle+" ["+this._reportMetadata.localeDisplayName+"]"},_getWizardStepResult:function(){var a=[];return b.forEach(this._parameterWidgets,function(b,c){a.push(b.get("value"))}),{parameters:a}},_getParameterEditor:function(a){switch(a.parameterValueKind){case e.SlxParameterValueKind.BooleanParameter:return new g(a);case e.SlxParameterValueKind.StringParameter:case e.SlxParameterValueKind.NumberParameter:case e.SlxParameterValueKind.CurrencyParameter:return a.allowMultiValue?new j(a):new i(a);case e.SlxParameterValueKind.DateParameter:case e.SlxParameterValueKind.DateTimeParameter:return new h(a);case e.SlxParameterValueKind.TimeParameter:break;default:return null}return null}})})},"Sage/MainView/ReportMgr/Common/_WizardDialogBase":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dijit/_Widget","Sage/_Templated","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/Reporting/Enumerations","dojo/i18n!./nls/_WizardDialogBase","Sage/UI/Controls/_DialogHelpIconMixin"],function(a,b,c,d,e,f,g,h,i){return a("Sage.MainView.ReportMgr.Common._WizardDialogBase",[d,e],{_dialog:null,_currentStep:null,_isFirstStep:!1,_isLastStep:!1,_reportMetadata:null,_btnPlusIconPath:"images/icons/plus_16x16.gif",widgetsInTemplate:!0,show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(c.mixin(this._dialog,new i),this._dialog.createHelpIconByTopic(this._helpIconTopic)))},startup:function(){this.inherited(arguments),this._initializeWizardButtons()},isValid:function(){return!0},_dialog_OnCancel:function(){this._checkCurrentStep(),this._dialog.hide(),b.publish("/reportManager/reportWizard/cancel",null)},_cmdBack_OnClick:function(){this._checkCurrentStep();var a=this._getWizardStepResult();this._dialog.hide(),b.publish("/reportManager/reportWizard/previousStep",this._currentStep,a)},_cmdNext_OnClick:function(){if(this.isValid()){this._checkCurrentStep();var a=this._getWizardStepResult();this._dialog.hide(),b.publish("/reportManager/reportWizard/nextStep",this._currentStep,a)}},_cmdCancel_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),b.publish("/reportManager/reportWizard/cancel",null)},_initializeWizardOptions:function(a){a&&(this._isFirstStep=a.isFirstStep,this._isLastStep=a.isLastStep,this._reportMetadata=a.reportMetadata)},_initializeWizardButtons:function(){this._isFirstStep&&f.setDomNodeVisible(this.cmdBack.domNode,!1),this._isLastStep&&this.cmdNext.setLabel(h.txtFinish)},_getWizardStepResult:function(){return null},_checkCurrentStep:function(){this._currentStep}})})},"Sage/MainView/ReportMgr/ReportManagerUtility":function(){define(["dojo/_base/xhr","dojo/i18n!./nls/ReportManagerUtility","Sage/Reporting/Enumerations"],function(a,b,c){return Sage.namespace("Sage.MainView.ReportMgr.ReportManagerUtility"),dojo.mixin(Sage.MainView.ReportMgr.ReportManagerUtility,{_nlsResources:b,getOperators:function(a){switch(String(a)){case String(c.FieldDataTypes.Numeric):return[{operator:c.ReportConditionOperator.Is,caption:c.nlsResources.txtIs},{operator:c.ReportConditionOperator.IsNot,caption:c.nlsResources.txtIsNot},{operator:c.ReportConditionOperator.IsGreaterThan,caption:c.nlsResources.txtIsGreaterThan},{operator:c.ReportConditionOperator.IsLessThan,caption:c.nlsResources.txtIsLessThan},{operator:c.ReportConditionOperator.IsInTheRange,caption:c.nlsResources.txtIsInTheRange}];case String(c.FieldDataTypes.DateTime):return[{operator:c.ReportConditionOperator.Is,caption:c.nlsResources.txtIs},{operator:c.ReportConditionOperator.IsNot,caption:c.nlsResources.txtIsNot},{operator:c.ReportConditionOperator.IsAfter,caption:c.nlsResources.txtIsAfter},{operator:c.ReportConditionOperator.IsBefore,caption:c.nlsResources.txtIsBefore},{operator:c.ReportConditionOperator.IsInTheRange,caption:c.nlsResources.txtIsInTheRange}];case String(c.FieldDataTypes.String):return[{operator:c.ReportConditionOperator.Is,caption:c.nlsResources.txtIs},{operator:c.ReportConditionOperator.IsNot,caption:c.nlsResources.txtIsNot},{operator:c.ReportConditionOperator.Contains,caption:c.nlsResources.txtContains},{operator:c.ReportConditionOperator.StartsWith,caption:c.nlsResources.txtStartsWith},{operator:c.ReportConditionOperator.EndsWith,caption:c.nlsResources.txtEndsWith}]}return""},getUser:function(b){var c=null;return a("GET",{url:"slxdata.ashx/slx/dynamic/-/users('"+b+"')?format=json",handleAs:"json",sync:!0}).then(function(a){c=a}),c},getGroup:function(b){var c=null,d="slxdata.ashx/slx/system/-/groups";if(-1!==b.indexOf(":")){d=d+"?format=json&where=family eq '"+b.split(":")[0]+"' and name eq '"+b.split(":")[1]+"'"}else d=d+"('"+b+"')?format=json";return a("GET",{url:d,handleAs:"json",sync:!0}).then(function(a){a.$resources&&1===a.$resources.length&&(a=a.$resources[0]),c=a}),c},getEntityHistory:function(b){var c={items:[]};a("GET",{url:"slxdata.ashx/slxdata.ashx/slx/crm/-/entityhistory",handleAs:"json",sync:!0}).then(function(a){c=a})},getOutputFormats:function(a){switch(a){case c.ReportTypes.CrystalReport:return[{outputFormat:c.ReportExportFormat.Pdf,caption:c.nlsResources.txtPdf},{outputFormat:c.ReportExportFormat.Word,caption:c.nlsResources.txtWord},{outputFormat:c.ReportExportFormat.Excel,caption:c.nlsResources.txtExcel},{outputFormat:c.ReportExportFormat.ExcelDataOnly,caption:c.nlsResources.txtExcelDataOnly},{outputFormat:c.ReportExportFormat.Csv,caption:c.nlsResources.txtCsv},{outputFormat:c.ReportExportFormat.Xml,caption:c.nlsResources.txtXml}];default:return[]}},getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var a=Sage.Services.getService("ClientEntityContext");if(a)return a.getContext()}return null},getCurrentUser:function(){var a=Sage.Services.getService("ClientContextService"),b=null;return a&&(b={userID:a.getValue("userID"),userPrettyName:a.getValue("userPrettyName")}),b},setDomNodeVisible:function(a,b){a&&b?dojo.removeClass(a,"display-none"):a&&dojo.addClass(a,"display-none")},refreshList:function(a){try{var b=dijit.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}}}),Sage.MainView.ReportMgr.ReportManagerUtility})},"Sage/MainView/ReportMgr/Crystal/BooleanParameterEditor":function(){define(["dojo/_base/declare","dojo/text!./templates/BooleanParameterEditor.html","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/Utility"],function(a,b,c,d,e,f,g){return a("Sage.MainView.ReportMgr.Crystal.BooleanParameterEditor",[d],{widgetTemplate:g.makeTemplateFromString(b),value:null,_setValueAttr:function(a){this._set("value",a)},_getValueAttr:function(){var a=this._getCurrentValue();return a&&(this._promptParameter.currentValues=[a]),this._promptParameter},constructor:function(a){},startup:function(){this._started||(this.inherited(arguments),new c({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer),f.initializeComboBoxValues(this._values,f.getRangeInitialValue(this._initialValues,!1),this.cmbValues),e.setDomNodeVisible(this.divValidationMessage,!1))},isValid:function(){var a=!0;if(dojo.addClass(this.errorInvalidOption,"display-none"),!this.isOptionalPrompt&&!this.allowNullValue){var b="";null===this._getCurrentValue()?(b=this.txtPleaseSpecifyValue,dojo.removeClass(this.errorInvalidOption,"display-none"),this.cmbValues.focus(),a=!1):dojo.addClass(this.errorInvalidOption,"display-none"),this._showValidationMessage(b)}return a&&dojo.removeClass(this.errorInvalidOption,"display-none"),a},_showValidationMessage:function(a){this.spanValidationMessage.innerHTML=Sage.Utility.htmlEncode(a),e.setDomNodeVisible(this.divValidationMessage,""!==a)},_getCurrentValue:function(){var a=this.cmbValues.item;return a&&""!==a.value?this.getOriginalParameterValue(a._id):null}})})},"Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ParameterHeaderWidget.html","Sage/Utility"],function(a,b,c,d,e,f){return a("Sage.MainView.ReportMgr.Crystal.ParameterHeaderWidget",[b,c,d],{templateString:e,promptText:"",parameterFieldName:"",constructor:function(){},postCreate:function(){this.inherited(arguments)}})})},"Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/number","dijit/_Widget","Sage/_Templated","Sage/Utility","Sage/Reporting/Enumerations","dojo/i18n!./nls/_ParameterEditorBase","Sage/UI/TransferBoxWidget","Sage/UI/TransferBoxWidgetEnumerations","dojo/store/Memory","dojo/store/Observable","dojo/date/locale","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dojo/string"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.ReportMgr.Crystal._ParameterEditorBase",[d,e],{widgetsInTemplate:!0,_promptParameter:null,_values:null,_initialValues:null,_initialCustomValues:null,_initialIds:null,_allowCustomValues:!1,_minimum:null,_maximum:null,_paramDiscreteType:!1,_paramDiscreteAndRangeType:!1,_paramRangeType:!1,_showDescriptionAndValue:!1,paramId:null,mode:null,constructor:function(a){dojo.mixin(this,h),this._values=[],this._initialValues=[],this._initialCustomValues=[],this._initialIds=[],this._promptParameter=a,this._initializeParameterProperties(),this._getParameterDataTypes()},isValid:function(){return!0},valueWithinMinMaxRange:function(a){return!(this._minimum&&a<this._minimum)&&!(this._maximum&&a>this._maximum)},ensureNewSelectedValue:function(a,b){var c=!0;return dojo.some(a,function(a){if(a.label===b)return c=!1}),c},initializeTransferBoxWidget:function(a,c){var d=[],e=this;c&&b.forEach(this._values,function(a,b){d[b]={id:a._id,value:a.value?a.value:a.description,displayValue:a.description,__selected:!1}});var f=l(new k({identifier:"id",data:d}));this.transferBox=new i({store:f,sortAttribute:"id",filterProperty:"value",useFilterTypeAhead:!0,selectionMode:this.allowMultiValue?j.SelectionMode.Extended:j.SelectionMode.Single},"transferBox"),b.forEach(e._initialIds,function(a,c){b.forEach(e.transferBox.store.data,function(b,c){a!=b.id&&a.id!=b.id||(b.__selected=!0)})}),b.forEach(this._initialCustomValues,function(a,b){var c={id:"Range"===a.parameterClass?a.description:a._id,value:a.value?a.value:a.description,displayValue:a.description?a.description:a.value,__selected:!0,destroyOnRemove:!1};e.transferBox.addNewItem(c)}),this.transferBox.placeAt(a)},getOriginalParameterValue:function(a){var c=null;return b.some(this._promptParameter.defaultValues,function(b,d){if(b._id==a)return c=dojo.clone(b),delete c._id,!0}),c},getMinMaxValidationMessage:function(a){switch(this.parameterValueKind){case g.SlxParameterValueKind.NumberParameter:if(this._minimum&&a<this._minimum)return dojo.replace(this.txtPleaseSpecifyNumberGreater,[this._minimum]);if(this._maximum&&a>this._maximum)return dojo.replace(this.txtPleaseSpecifyNumberLesser,[this._maximum]);break;case g.SlxParameterValueKind.CurrencyParameter:break;case g.SlxParameterValueKind.DateParameter:case g.SlxParameterValueKind.DateTimeParameter:this._minimum&&a<this._minimum&&(this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateGreater,[n.getDateOnlyFormattedDate(this._minimum)])),this._maximum&&a>this._maximum&&(this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateLesser,[n.getDateOnlyFormattedDate(this._maximum)]));break;case g.SlxParameterValueKind.BooleanParameter:break;default:if(this._minimum&&a.length<this._minimum)return dojo.replace(this.txtTheMinimumLengthForThisField,[this._minimum]);if(this._maximum&&a.length>this._maximum)return dojo.replace(this.txtTheMaximumLengthForThisField,[this._maximum])}return""},getMinMaxInitializationMessage:function(){var a="";switch(this.parameterValueKind){case g.SlxParameterValueKind.NumberParameter:this._minimum&&!this._maximum&&(a=dojo.replace(this.txtPleaseSpecifyNumberGreater,[this._minimum])),!this._minimum&&this._maximum&&(a=dojo.replace(this.txtPleaseSpecifyNumberLesser,[this._maximum])),this._minimum&&this._maximum&&(a=dojo.replace(this.txtPleaseSpecifyNumberBetween,[this._minimum,this._maximum]));break;case g.SlxParameterValueKind.CurrencyParameter:break;case g.SlxParameterValueKind.DateParameter:case g.SlxParameterValueKind.DateTimeParameter:this._minimum&&!this._maximum&&(a=dojo.replace(this.txtPleaseSpecifyDateLesser,[n.getDateOnlyFormattedDate(this._minimum)])),!this._minimum&&this._maximum&&(a=dojo.replace(this.txtPleaseSpecifyDateGreater,[n.getDateOnlyFormattedDate(this._maximum)])),this._minimum&&this._maximum&&(a=dojo.replace(this.txtPleaseSpecifyDateBetween,[n.getDateOnlyFormattedDate(this._minimum),n.getDateOnlyFormattedDate(this._maximum)]));break;case g.SlxParameterValueKind.BooleanParameter:break;default:this._minimum&&!this._maximum&&(a=dojo.replace(this.txtTheMinimumLengthForThisField,[this._minimum])),!this._minimum&&this._maximum&&(a=dojo.replace(this.txtTheMaximumLengthForThisField,[this._maximum])),this._minimum&&this._maximum&&(a=dojo.replace(this.txtTheValueMustBeBetween,[this._minimum,this._maximum]))}return a},_initializeParameterProperties:function(){var a=this;this._allowCustomValues=this._promptParameter.allowCustomCurrentValues,this._showDescriptionAndValue="DescriptionAndValue"===this._promptParameter.defaultValueDisplayType;var d=this._promptParameter.parameterValueKind;this._paramDiscreteType=this._promptParameter.valueRangeKind===g.SlxParameterValueRangeKind.Discrete,this._paramDiscreteAndRangeType=this._promptParameter.valueRangeKind===g.SlxParameterValueRangeKind.DiscreteAndRange,this._paramRangeType=this._promptParameter.valueRangeKind===g.SlxParameterValueRangeKind.Range,null!==this._promptParameter.initialValues&&this._promptParameter.initialValues.length>0&&null===this._promptParameter.values&&null===this._promptParameter.defaultValues&&(this._promptParameter.values=this._promptParameter.initialValues,this._promptParameter.defaultValues=this._promptParameter.initialValues);var e=0;this._promptParameter.defaultValues&&b.forEach(this._promptParameter.defaultValues,function(b,c){var f=a._getZeroPrefixedId(e);b._id=f;var h=b.className===g.ParameterClassName.DiscreteValue?b.discreteValue.actualValue:b.rangeValue,i=b.description;a._showDescriptionAndValue&&dojo.isString(i)&&(i=o.substitute("${0} - ${1}",[h,i])),dojo.isString(i)||(i=h);var j=d===g.SlxParameterValueKind.DateParameter||d===g.SlxParameterValueKind.DateTimeParameter,k={_id:f,value:h,description:j?a._formatDateTimeDescription(i):i,parameterClass:b.className===g.ParameterClassName.DiscreteValue?g.SlxParameterValueRangeKind.Discrete:g.SlxParameterValueRangeKind.Range};a._values.push(k),e++});var h=this._promptParameter.currentValues.length>0?this._promptParameter.currentValues:this._promptParameter.initialValues;switch(h&&b.forEach(h,function(b,c){var d=b.className===g.ParameterClassName.DiscreteValue?b.discreteValue.actualValue:b.rangeValue,e=(b.description,null);b.rangeDateValue&&(e=b.rangeDateValue.split(";"),d.beginValue=e[0],d.endValue=e[1]),b.discreteDateValue&&(e=b.discreteDateValue.split(";"),d=e[0]);var f={value:d,description:b.description?b.description:d,parameterClass:b.className===g.ParameterClassName.DiscreteValue?g.SlxParameterValueRangeKind.Discrete:g.SlxParameterValueRangeKind.Range};a._initialValues.push(f)}),this._initialValues.length>0&&b.forEach(this._initialValues,function(c,d){var e=!1;b.some(a._values,function(b,d){if(b.value===c.value)return a._initialIds.push(b._id),e=!0,!0}),e||a._initialCustomValues.push(c)}),d){case g.SlxParameterValueKind.DateParameter:case g.SlxParameterValueKind.DateTimeParameter:this._promptParameter.minimumValue&&this._promptParameter.minimumValue.discreteValue&&(this._minimum=f.Convert.toDateFromString(this._getDateOnlyIsoString(this._promptParameter.minimumValue.discreteValue.actualValue))),this._promptParameter.maximumValue&&this._promptParameter.maximumValue.discreteValue&&(this._maximum=f.Convert.toDateFromString(this._getDateOnlyIsoString(this._promptParameter.maximumValue.discreteValue.actualValue)));break;case g.SlxParameterValueKind.NumberParameter:case g.SlxParameterValueKind.StringParameter:this._promptParameter.minimumValue&&this._promptParameter.minimumValue.discreteValue&&(this._minimum=c.parse(this._promptParameter.minimumValue.discreteValue.actualValue)),this._promptParameter.maximumValue&&this._promptParameter.maximumValue.discreteValue&&(this._maximum=c.parse(this._promptParameter.maximumValue.discreteValue.actualValue))}},_formatDateTimeDescription:function(a){return this._promptParameter.parameterValueKind===g.SlxParameterValueKind.DateTimeParameter&&"Description"===this._promptParameter.defaultValueDisplayType?a:this._promptParameter.parameterValueKind===g.SlxParameterValueKind.DateTimeParameter?m.format(f.Convert.toDateFromString(a,!1),{fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}):m.format(f.Convert.toDateFromString(a,!1),{fullYear:!0,selector:this.displayTime?null:"date",locale:Sys.CultureInfo.CurrentCulture.name})},_getParameterDataTypes:function(){var a=this._promptParameter.defaultValues;a&&a[0].discreteValue?(this._promptParameter.actualValueType=a[0].discreteValue.actualValueType,this._promptParameter.valueType=a[0].discreteValue.valueType):(this._promptParameter.actualValueType=this._getDataType(this._promptParameter.parameterValueKind),this._promptParameter.valueType=this._promptParameter.actualValueType),a&&a[0].rangeValue?(this._promptParameter.beginValueType=a[0].rangeValue.beginValueType,this._promptParameter.endValueType=a[0].rangeValue.endValueType):(this._promptParameter.beginValueType=this._getDataType(this._promptParameter.parameterValueKind),this._promptParameter.endValueType=this._promptParameter.beginValueType)},_getDataType:function(a){switch(a){case g.SlxParameterValueKind.BooleanParameter:return"Boolean";case g.SlxParameterValueKind.CurrencyParameter:case g.SlxParameterValueKind.NumberParameter:return"Double";case g.SlxParameterValueKind.DateParameter:case g.SlxParameterValueKind.DateTimeParameter:case g.SlxParameterValueKind.TimeParameter:return"DateTime";case g.SlxParameterValueKind.StringParameter:default:return"String"}},_getStringOfZeros:function(a){return Array(a+1).join("0")},_getZeroPrefixedId:function(a){if(isNaN(a))throw"A non-numeric value was passed to _getZeroPrefixedId";var b=a.toString();return b.length<5?this._getStringOfZeros(5-b.length)+b:b},_getValue:function(a){var c=null;return b.some(this._values,function(b,d){if(b._id==a)return c=dojo.clone(b),!0}),c},_getSelectionMode:function(){var a="";return a=this._promptParameter.allowMultiValue?"MultiSelect":"SingleSelect",this._allowCustomValues?a+="WithCustom":a+="NoCustom",a},_getDateOnlyIsoString:function(a){var b=null;return-1!==a.indexOf("T")&&(b=a.split("T")[0]),b}})})},"Sage/UI/TransferBoxWidget":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/UI/TransferBoxWidgetEnumerations","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dgrid/OnDemandList","dgrid/Selection","dgrid/Keyboard","dojo/dom-construct","dojo/text!./templates/TransferBoxWidget.html","dojo/i18n!./nls/TransferBoxWidget","dojo/dom-style","put-selector/put"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return a("Sage.UI.TransferBoxWidget",[d,e,f],{templateString:k,class:"transferBoxWidget",widgetsInTemplate:!0,sortAttribute:"",sortDescending:!1,allowFiltering:!0,allowClearAll:!0,useFilterTypeAhead:!0,selectionMode:c.SelectionMode.Extended,hideTransferBoxOnSingleSelectMode:!0,postMixInProperties:function(){dojo.mixin(this,l)},postCreate:function(){this.inherited(arguments),this._setVisibilityState(),this._declareLists()},addSelectedItem:function(a){var b=this.from.row(a);b.data&&(b.data.__selected=!0,this.store.put(b.data))},addNewItem:function(a,b){var c=!1;if(a.id||(a.id=this._generateUniqueId()),b){var d=this;this.store.query({id:a.id}).forEach(function(a){c=!0,a.__selected||(a.__selected=!0,d.store.put(a))})}c||(this.store.add(a),a.__selected&&this.addSelectedItem(a.id))},getSelectedValues:function(){var a=[];return this.store.query({__selected:!0}).forEach(function(b){a.push(b)}),a},_setVisibilityState:function(){this.addButton.set("disabled",!0),this.removeButton.set("disabled",!0),this.allowFiltering?this.useFilterTypeAhead&&(dojo.connect(this.searchFilter.focusNode,"onkeyup",this,"_onKeyUp",!0),m.set(this.filterButton.domNode,"display","none")):dojo.addClass(this.searchFilterDiv,"display-none"),this.hideTransferBoxOnSingleSelectMode&&this.selectionMode===c.SelectionMode.Single&&(dojo.addClass(this.transferButtons,"display-none"),dojo.addClass(this.toNode,"display-none"),dojo.addClass(this.availableValues,"display-none"),dojo.addClass(this.selectedValues,"display-none"),this.colFromNode.setAttribute("colspan","3")),this.allowClearAll||m.set(this.removeAllButton.domNode,"display","none")},_declareLists:function(){var b=a([g,h,i]),c=this.from=new b({store:this.store,query:function(a){return!a.__selected},sort:[{attribute:this.sortAttribute,descending:this.sortDescending}],selectionMode:this.selectionMode,loadingMessage:this.loadingText,noDataMessage:this.noResultsText,renderRow:this._renderItem},this.fromNode);this.from.startup(),this._selectionToDisable(c,this.addButton);var d=this.to=new b({store:this.store,query:function(a){return a.__selected},sort:[{attribute:this.sortAttribute,descending:this.sortDescending}],renderRow:this._renderItem},this.toNode);this._selectionToDisable(d,this.removeButton)},_renderItem:function(a){return n("div",a.displayValue?a.displayValue:"")},_selectionToDisable:function(a,b){var c=0;a.on("dgrid-select",function(a){c+=a.rows.length,b.set("disabled",!c)}),a.on("dgrid-deselect",function(a){c-=a.rows.length,b.set("disabled",!c)})},_onFilterClick:function(){this.from.set("query",{displayValue:new RegExp(this.prepForRegex(),"i"),__selected:!1})},_onKeyUp:function(){this._onFilterClick()},_onAddClick:function(){for(var a in this.from.selection)this.addSelectedItem(a)},_onAddAllClick:function(){var a=this;this.store.query({displayValue:new RegExp(this.prepForRegex(),"i")}).forEach(function(b){b.__selected=!0,a.store.put(b)})},_onRemoveClick:function(){for(var a in this.to.selection){var b=this.to.row(a);b.data&&b.data.__selected&&(b.data.__selected=!1,this.store.put(b.data))}},_onRemoveAllClick:function(){var a=this;this.store.query({__selected:!0}).forEach(function(b){b.__selected=!1,a.store.put(b)})},_generateUniqueId:function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)})},prepForRegex:function(){var a=this.searchFilter.get("value"),b="$&";return a.search(/[^a-zA-Z0-9]+/)||(b="\\$&"),a=a.replace(new RegExp("%|\\[|[*]|_|[.]|[(]|[)]|[^]|[$]|[\\]|[?]|[+]|[|]","g"),b)}})})},"Sage/UI/TransferBoxWidgetEnumerations":function(){define(["dojo/_base/declare"],function(a){return Sage.namespace("Sage.UI.TransferBoxWidgetEnumerations"),dojo.mixin(Sage.UI.TransferBoxWidgetEnumerations,{SearchConditions:{EqualTo:"EqualTo",Contains:"Contains",StartingWith:"StartingWith"},SelectionMode:{Extended:"extended",Multiple:"multiple",Single:"single",None:"none"}}),Sage.UI.TransferBoxWidgetEnumerations})},"Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility":function(){define(["dojo/date/locale","dojo/i18n!./nls/CrystalReportsUtility","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","dojo/string","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/_base/array","dojo/store/Memory"],function(a,b,c,d,e,f,g,h,i){return Sage.namespace("Sage.MainView.ReportMgr.Crystal.CrystalReportsUtility"),dojo.mixin(Sage.MainView.ReportMgr.Crystal.CrystalReportsUtility,{_nlsResources:b,getConditionTypes:function(a){var b=[];return a&&(a.useDateFilter&&b.push({conditionType:f.ReportConditionType.DateRange,caption:f.getReportConditionTypeCaption(f.ReportConditionType.DateRange)}),a.useGroupFilter&&b.push({conditionType:f.ReportConditionType.Group,caption:f.getReportConditionTypeCaption(f.ReportConditionType.Group)}),b.push({conditionType:f.ReportConditionType.Query,caption:f.getReportConditionTypeCaption(f.ReportConditionType.Query)}),a.useUserFilter&&b.push({conditionType:f.ReportConditionType.User,caption:f.getReportConditionTypeCaption(f.ReportConditionType.User)})),b},getCurrentEntityCondition:function(){var a=null,b=g.getCurrentEntityContext();if(b&&b.EntityTableName&&b.EntityId){var c=b.EntityTableName.toUpperCase()+"ID";a={conditionType:f.ReportConditionType.Query,table:b.EntityTableName.toUpperCase(),field:c,operator:f.ReportConditionOperator.Is,value:b.EntityId,fromRange:null,toRange:null,dataType:f.FieldDataTypes.String,tag:null}}return a},createCustomParameterInputControl:function(a,b,e){var f=null;return f=e.isCurrency?new c({style:"width:95%",id:a,constraints:{currency:""},value:""}):new d({style:"width:90%",id:a}),dojo.place(f.domNode,b,"only"),e.isNumeric&&e.connect(f,"onKeyPress",e._onKeyPress,!0),f},getCustomParameterInputField:function(a,b,c){var d=null;b&&(a=e.substitute("${id}_CurrencyTextBox",{id:a}));var f=e.substitute("input#${id}.dijitReset.dijitInputInner",{id:a});return d=c?dojo.query(f,c.domNode):dojo.query(f),d.length>0?d[0]:null},getCurrentUserCondition:function(){return{conditionType:f.ReportConditionType.User,table:null,field:null,operator:f.ReportConditionOperator.Is,value:b.txtCurrentUser,fromRange:null,toRange:null,dataType:f.FieldDataTypes.String,tag:":UserID"}},getDateOnlyFormattedDate:function(b){return a.format(b,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},initializeComboBoxValues:function(a,b,c){var d=new i({identifier:"id",name:"description",value:"value",data:a});c.set("store",d),c.set("searchAttr","description"),c.set("value","_id"),c.set("maxHeight","150"),c.set("required",!1),""!==b?h.some(a,function(a,d){if(a.value==b)return c.set("displayedValue",a.description),!0}):c.set("displayedValue","")},getRangeInitialValue:function(a,b){var c="";if(a&&a.length>0){var d=a[0];c=d.parameterClass===f.SlxParameterValueRangeKind.Discrete?d.value:b?d.value.beginValue:d.value.endValue}return c}}),Sage.MainView.ReportMgr.Crystal.CrystalReportsUtility})},"Sage/UI/Controls/Currency":function(){define(["dojo/_base/html","dijit/_Widget","Sage/_Templated","dijit/form/CurrencyTextBox","Sage/UI/Controls/CurrencyTextBox","dojo/currency","dojo/string","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){return dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"}),h("Sage.UI.Controls.Currency",[b,c],{displayModes:{AsHyperlink:0,AsControl:1,AsText:2},modeTemplates:{AsHyperlink:new Simplate(['<div data-dojo-type="dijit.form.Button" showLabel="true">{%= $.value %}</div>']),AsControl:new Simplate(['<input  data-dojo-type="Sage.UI.Controls.CurrencyTextBox" ','constraints="{ {%= $.constraintsToString() %} }" ','id="{%= $.id %}_CurrencyTextBox" ','style="width:inherit;"','textAlign="{%= $.textAlign %}"',' name="{%= $.name %}" type="text" ',' value="{%= $.value %}" dojoAttachPoint="focusNode" ',"{% if ( $.multiCurrency ) { %} ",' class="ISOSpace" ',"{% } else { %} ",'lang ="{%= Sys.CultureInfo.CurrentCulture.name %}"',"{% } %}",' hotKey="{%= $.hotKey %}" ','{% if($.disabled === "disabled") { %} ',' disabled="disabled" ',"{% } %}",'{% if($.readonly === "readonly") { %} ',' readonly="readonly" ',"{% } %}",' maxlength="{%= $.maxLength %}" ',' autoPostBack="{%= $.autoPostBack %}" ',' required="{%= $.required %}">',"{% if ( $.multiCurrency ) { %} ",'<label id="{%= $.id %}_ISOLabel" ','dojoAttachPoint="currencyCodeLabel" ','for="${0}_CurrencyTextbox" ','class="ISOLabel" ','wairole="presentation" ','readonly="true" ','tabindex="-1" ','class="dijitInputInner" ','role="presentation">',"</label> ","{% } %}"]),AsText:new Simplate(['<div data-dojo-type="dijit.form.Button" showLabel="true">{%= $.formattedText() %}</div>'])},widgetTemplate:new Simplate(['<div style="width:inherit;" slxcompositecontrol="true" id="{%= $.id %}" >',"{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),postMixInProperties:function(){this.currentCultureSymbol=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,this.multiCurrency?(this.currentCode=this.constraints.currency,this.constraints.currency=null):""!==this.constraints.currency&&null!==this.constraints.currency||(this.constraints.currency=this.currentCode)},postCreate:function(){this.multiCurrency&&(dijit.byId(this.id+"_CurrencyTextBox").domNode.setAttribute("style","width:100% !important;"),this.currencyCodeLabel.innerHTML=this.currentCode),this.class&&this.class.length>0&&this.domNode.firstChild&&(this.domNode.firstChild.className=this.class+" "+this.domNode.firstChild.className),this.inherited(arguments)},value:0,currentCultureSymbol:"",currentCode:"USD",exchangeRate:1,multiCurrency:!1,displayCurrencyCode:!0,autoPostBack:!1,width:15,maxLength:128,required:!1,style:"",enabled:!0,readonly:"",disabled:"",visible:!0,hotKey:"",tabIndex:0,displayMode:"AsControl",widgetsInTemplate:!0,styles:"text-align: right;",name:"",constraints:null,id:"currencyControl",constraintsToString:function(){var a=[];for(var b in this.constraints)if(this.constraints.hasOwnProperty(b)){var c=this.constraints[b];"string"==typeof c&&(c="'"+c+"'"),a.push(b+":"+c)}return a.join(",")},constructor:function(a){this.inherited(arguments)},destroy:function(){this.focusNode&&this.focusNode.destroy(),this.inherited(arguments)}})})},"Sage/UI/Controls/CurrencyTextBox":function(){define(["dijit/form/CurrencyTextBox","dojo/currency","Sage/Utility","dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/_base/config"],function(a,b,c,d,e,f,g){return d("Sage.UI.Controls.CurrencyTextBox",[a],{shouldPublishMarkDirty:!0,autoPostBack:!1,hotKey:"",messagesLoaded:!1,attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"}},onBlur:function(){var a=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalSeparator
;this.textbox.value=c.maximizeDecimalDigit(this.textbox.value,this.constraints.places,a)},_sageUICurrencyTextBox_IsValid:function(){if(this.constraints.places>-1){var a=c.restrictDecimalDigit(this.textbox.value,this.constraints.places);this.textbox.value=e.trim(a.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,"")),this.textbox.value=e.trim(a.replace(this.constraints.currency,""))}this.inherited(arguments)},postCreate:function(){this.connect(this,"isValid",this._sageUICurrencyTextBox_IsValid),this.connect(this,"onChange",this.onChanged),this.connect(this,"onBlur",this.onBlur),this.inherited(arguments)},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty");var b=dojo.query('[name="'+this.name+'"]',this.domNode)[0];b&&""===b.value&&(b.value=this.textbox.value),this.autoPostBack&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null)},getErrorMessage:function(){return this.messagesLoaded||(this.messages=f.getLocalization("dijit.form","validate",g.locale),this.messagesLoaded=!0),this.inherited(arguments)},setAttribute:function(a,b){this.set(a,b)}})})},"Sage/MainView/ReportMgr/Crystal/DateParameterEditor":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","dojo/text!./templates/DateParameterEditor.html","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/Utility","Sage/Reporting/Enumerations","dojo/string"],function(a,b,c,d,e,f,g,h,i,j){return a("Sage.MainView.ReportMgr.Crystal.DateParameterEditor",[e],{widgetTemplate:h.makeTemplateFromString(d),displayTime:!1,_selectedValues:[],_validationMsg:"",_setValueAttr:function(a){this._set("value",a)},_getValueAttr:function(){if(this._promptParameter.currentValues=[],this._selectedValues.length>0){var a=this;b.forEach(this._selectedValues,function(b,c){a._promptParameter.currentValues.push(a._getParameterValue(b))})}else{var c;if(this._paramDiscreteType){var d=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);c=d?{range:null,value:d.value}:{range:null,value:""}}else{var e=this._getRangeValue();c=void 0!==e&&null!==e?{range:e,displayValue:e.displayValue,value:e.startValue?e.startValue:e.endValue}:{range:null,displayValue:"",value:""}}this._promptParameter.currentValues.push(this._getParameterValue(c))}return this._promptParameter},postCreate:function(){this.displayTime=this._promptParameter.parameterValueKind===i.SlxParameterValueKind.DateTimeParameter,this.dtDiscreteFromRange.displayTime=this.displayTime,this.dtToRange.displayTime=this.displayTime,this.dtCustomValue.displayTime=this.displayTime,this.chkIncludeFromRange.set("checked",!0),this.chkIncludeToRange.set("checked",!0)},constructor:function(a){},startup:function(){if(!this._started){switch(this.inherited(arguments),new c({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer),this.valueRangeKind){case i.SlxParameterValueRangeKind.Discrete:this.allowMultiValue?f.setDomNodeVisible(this.tblRange,!1):(f.setDomNodeVisible(this.colEndDefaultValues,!1),f.setDomNodeVisible(this.rowIncludeRangeOptions,!1),f.setDomNodeVisible(this.rowUpperLowerRangeOptions,!1),f.setDomNodeVisible(this.colEndDefaultValuesLabel,!1),f.setDomNodeVisible(this.rowToRange,!1),f.setDomNodeVisible(this.rowToValueLabel,!1),f.setDomNodeVisible(this.rowStartEndOrValue,this._allowCustomValues&&this._values.length>0),f.setDomNodeVisible(this.rowDiscreteFromRange,this._allowCustomValues),this.lblDiscreteStartRange.textContent=this.lblSelectValue_Caption,this._values.length>0?(g.initializeComboBoxValues(this._values,g.getRangeInitialValue(this._initialValues,!1),this.cboDiscreteStartRange),this.cboDiscreteStartRange.setAttribute("style","width:55% !important;"),this.dtDiscreteFromRange.setAttribute("style","width: 55% !important;"),dojo.connect(this.cboDiscreteStartRange,"onBlur",this,"_cboDiscreteStartRange_OnChange",!0),dojo.connect(this.dtDiscreteFromRange,"onChange",this,"_dtDiscreteStartRange_OnChange",!0)):this.initialValues&&this.initialValues.length>0?this.dtDiscreteFromRange.set("value",this.initialValues[0]):this.dtDiscreteFromRange.setAttribute("style","width: 55%!important;"));break;case i.SlxParameterValueRangeKind.Range:case i.SlxParameterValueRangeKind.DiscreteAndRange:f.setDomNodeVisible(this.rowStartEndOrValue,this._allowCustomValues&&this._values.length>0),f.setDomNodeVisible(this.rowCustomRangeValues,this._allowCustomValues),this._values.length>0&&(g.initializeComboBoxValues(this._values,this.allowMultiValue&&"new"!==this.mode?"":g.getRangeInitialValue(this._initialValues,!0),this.cboDiscreteStartRange),dojo.connect(this.dtDiscreteFromRange,"onChange",this,"_dtDiscreteFromRange_OnChange",!0),dojo.connect(this.cboDiscreteStartRange,"onBlur",this,"_cboStartRange_OnChange",!0),g.initializeComboBoxValues(this._values,this.allowMultiValue&&"new"!==this.mode?"":g.getRangeInitialValue(this._initialValues,!1),this.cboEndRangeValues),dojo.connect(this.dtToRange,"onChange",this,"_dtEndRange_OnChange",!0),dojo.connect(this.cboEndRangeValues,"onBlur",this,"_cboEndRange_OnChange",!0))}f.setDomNodeVisible(this.divValidationMessage,!1),f.setDomNodeVisible(this.rowRangeListItems,this._values.length>0),f.setDomNodeVisible(this.rowAddRangeParameter,this.allowMultiValue),f.setDomNodeVisible(this.rowCustomValues,this._allowCustomValues&&this.allowMultiValue&&!this._paramRangeType),this.allowMultiValue&&(this._paramRangeType&&(this._initialIds=[]),this.initializeTransferBoxWidget(this.transferBoxContainer,!this._paramRangeType)),this._assignDefaultRangeValues(),this._initializeMessages()}},isValid:function(){return this._validationMsg="",dojo.addClass(this.rowRangeValidationError,"display-none"),this.isOptionalPrompt||this.allowNullValue||(this.transferBox?(this._selectedValues=this.transferBox.getSelectedValues(),this._selectedValues.length>0?dojo.addClass(this.transferBox.errorValidation,"display-none"):(dojo.removeClass(this.transferBox.errorValidation,"display-none"),this._validationMsg=this.txtPleaseSpecifyValue)):this._verifyRequiredAssignments()&&this._validateMinMaxRange()),this.lblRangeValidationError.textContent=this._validationMsg,""!==this._validationMsg&&dojo.removeClass(this.rowRangeValidationError,"display-none"),""===this._validationMsg},_assignDefaultRangeValues:function(){if(1===this.currentValues.length&&this.currentValues[0].rangeValue){var a=this.currentValues[0],b=a.rangeValue.beginValue;b=b?h.Convert.toDateFromString(b):null,this.chkIncludeFromRange.set("checked",a.rangeValue.lowerBoundType===i.SlxRangeBoundType.BoundInclusive),this.chkNoLowerValue.set("checked",null===b),b=a.rangeValue.endValue,b=b?h.Convert.toDateFromString(b):null,this.chkIncludeToRange.set("checked",a.rangeValue.upperBoundType===i.SlxRangeBoundType.BoundInclusive),this.chkNoUpperValue.set("checked",null===b)}},_cboDiscreteStartRange_OnChange:function(){var a=this.cboDiscreteStartRange.item;a&&""!==a.value&&this.dtDiscreteFromRange.reset()},_dtDiscreteStartRange_OnChange:function(){""!==this.dtDiscreteFromRange.focusNode.value&&this.cboDiscreteStartRange.attr("displayedValue","")},_cboStartRange_OnChange:function(){var a=this.cboDiscreteStartRange.item;a&&""!==a.value&&this.dtDiscreteFromRange.reset()},_cboEndRange_OnChange:function(){var a=this.cboEndRangeValues.item;a&&""!==a.value&&this.dtToRange.reset()},_dtDiscreteFromRange_OnChange:function(){""!==this.dtDiscreteFromRange.focusNode.value&&this.cboDiscreteStartRange.set("displayedValue","")},_dtEndRange_OnChange:function(){""!==this.dtToRange.focusNode.value&&this.cboEndRangeValues.set("displayedValue","")},_initializeMessages:function(){var a=this.getMinMaxInitializationMessage();this.spanMinMaxMessage.innerHTML=h.htmlEncode(a),f.setDomNodeVisible(this.divMinMaxMessage,""!==a)},_validateMinMaxRange:function(){if(this._paramDiscreteType){var a=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);a&&this.getMinMaxInitializationMessage(a.date)}else{var b=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item),c=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);this._minimum&&!this.chkNoLowerValue.checked&&b<this._minimum&&(this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateGreater,[g.getDateOnlyFormattedDate(this._minimum)])),this._minimum&&!this.chkNoUpperValue.checked&&c<this._minimum&&(this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateGreater,[g.getDateOnlyFormattedDate(this._minimum)])),this._maximum&&!this.chkNoUpperValue.checked&&c>this._maximum&&(this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateLesser,[g.getDateOnlyFormattedDate(this._maximum)])),this._maximum&&!this.chkNoLowerValue.checked&&b>this._maximum&&(this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateLesser,[g.getDateOnlyFormattedDate(this._maximum)])),this.chkNoLowerValue.checked||this.chkNoUpperValue.checked||b>c&&(this._validationMsg=this.txtFromMustBeLessThanOrEqualToTo)}},_getParameterValue:function(a){return a.range?{className:i.ParameterClassName.RangeValue,description:a.displayValue,rangeDateValue:j.substitute("${0};${1}",[a.range.startValue?a.range.startValue:"",a.range.endValue?a.range.endValue:""]),rangeValue:{beginValue:a.range.startValue,beginValueType:this.beginValueType,endValue:a.range.endValue,endValueType:this.endValueType,lowerBoundType:a.range.noLowerValue?i.SlxRangeBoundType.NoBound:a.range.includeFromRange?i.SlxRangeBoundType.BoundInclusive:i.SlxRangeBoundType.BoundExclusive,upperBoundType:a.range.noUpperValue?i.SlxRangeBoundType.NoBound:a.range.includeToRange?i.SlxRangeBoundType.BoundInclusive:i.SlxRangeBoundType.BoundExclusive}}:{className:i.ParameterClassName.DiscreteValue,description:a.displayValue,discreteDateValue:j.substitute("${0};",[a.value]),discreteValue:{actualValue:a.value,actualValueType:this.actualValueType,value:a.value,valueType:this.valueType}}},_chkNoLowerValue_OnCheck:function(a){this.chkIncludeFromRange.setAttribute("disabled",a),this.cboDiscreteStartRange.setAttribute("disabled",a),this.chkNoUpperValue.setAttribute("disabled",a),this.dtDiscreteFromRange.setAttribute("disabled",a)},_chkNoUpperValue_OnCheck:function(a){this.chkIncludeToRange.setAttribute("disabled",a),this.cboEndRangeValues.setAttribute("disabled",a),this.chkNoLowerValue.setAttribute("disabled",a),this.dtToRange.setAttribute("disabled",a)},_cmdAddRange_OnClick:function(){if(this._verifyRequiredAssignments()){dojo.addClass(this.rowRangeValidationError,"display-none");var a=this._getRangeValue(),b={range:a,displayValue:a.displayValue,value:a.startValue?a.startValue:a.endValue};this._addToSelectedValues(b)}else dojo.removeClass(this.rowRangeValidationError,"display-none")},_getRangeValue:function(){var a=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item),b=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item),c=""!==a,d=""!==b,e=[];return!this.chkNoLowerValue.get("checked")&&!this.chkNoUpperValue.get("checked")&&c&&d?e={startValue:a.value,endValue:b.value,displayValue:j.substitute("[${0} .. ${1}]",[a.displayValue,b.displayValue])}:this.chkNoLowerValue.get("checked")&&d?e={startValue:null,endValue:b.value,displayValue:j.substitute("( .. ${0}]",[b.displayValue])}:this.chkNoUpperValue.get("checked")&&c&&(e={startValue:a.value,endValue:null,displayValue:j.substitute("[${0} .. )",[a.displayValue])}),e.noLowerValue=this.chkNoLowerValue.checked,e.noUpperValue=this.chkNoUpperValue.checked,e.includeFromRange=this.chkIncludeFromRange.checked,e.includeToRange=this.chkIncludeFromRange.checked,e},_verifyRequiredAssignments:function(){if(this._paramDiscreteType)this._validateDiscreteParameterType();else{var a=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item),b=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);if(this.chkNoUpperValue.checked)return a.displayValue?(this._removeErrorMessages(),!0):(this._allowCustomValues?(this.cboDiscreteStartRange.focus(),dojo.removeClass(this.lstErrorDiscreteStartRange,"display-none"),dojo.addClass(this.lstErrorEndRange,"display-none")):(this.dtDiscreteFromRange.focus(),dojo.removeClass(this.errorDiscreteValue,"display-none"),dojo.addClass(this.errorEndRange,"display-none")),!1);if(this.chkNoLowerValue.checked)return b.displayValue?(this._removeErrorMessages(),!0):(this._allowCustomValues?(this.cboEndRangeValues.focus(),dojo.addClass(this.lstErrorDiscreteStartRange,"display-none"),dojo.removeClass(this.lstErrorEndRange,"display-none")):(this.dtToRange.focus(),dojo.addClass(this.errorDiscreteValue,"display-none"),dojo.removeClass(this.errorEndRange,"display-none")),!1);if(!a.displayValue||!b.displayValue||this._isStartDatePriorToEndDate(a,b))return this._setRangeErrorMessageVisibility(a,b),!1;dojo.addClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none"),dojo.addClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none")}return!0},_validateDiscreteParameterType:function(){dojo.addClass(this.lstErrorDiscreteStartRange,"display-none"),dojo.addClass(this.errorDiscreteValue,"display-none"),""!==this.dtDiscreteFromRange.focusNode.value||this.cboDiscreteStartRange.item?(this._validateMinMaxRange(),""!==this._validationMsg&&(""!==this.dtDiscreteFromRange.focusNode.value?(dojo.removeClass(this.errorDiscreteValue,"display-none"),this.dtDiscreteFromRange.focus()):(dojo.removeClass(this.lstErrorDiscreteStartRange,"display-none"),this.cboDiscreteStartRange.focus()))):(this._validationMsg=this.txtPleaseSpecifyValue,this._values.length>0?(dojo.removeClass(this.lstErrorDiscreteStartRange,"display-none"),this.cboDiscreteStartRange.focus()):(dojo.removeClass(this.errorDiscreteValue,"display-none"),this.dtDiscreteFromRange.focus()))},_removeErrorMessages:function(){dojo.addClass(this.errorDiscreteValue,"display-none"),dojo.addClass(this.errorEndRange,"display-none"),dojo.addClass(this.lstErrorDiscreteStartRange,"display-none"),dojo.addClass(this.lstErrorEndRange,"display-none")},_isStartDatePriorToEndDate:function(a,b){return h.Convert.toDateFromString(a.value)>h.Convert.toDateFromString(b.value)},_setRangeErrorMessageVisibility:function(a,b){this._validationMsg=this.txtPleaseSpecifyValue,a.displayValue||b.displayValue?a.displayValue?b.displayValue?(dojo.addClass(this.errorDiscreteValue,"display-none"),this.dtToRange.focus(),this._validationMsg=this.txtFromMustBeLessThanOrEqualToTo):(dojo.addClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none"),dojo.removeClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none"),this.allowMultiValue?this.cboEndRangeValues.focus():this.dtToRange.focus()):(dojo.addClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none"),dojo.removeClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none"),this.dtDiscreteFromRange.focus()):(dojo.removeClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none"),dojo.removeClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none"),this.allowMultiValue?this.cboDiscreteStartRange.focus():this.dtDiscreteFromRange.focus())},_getRangeDisplayValue:function(){var a=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item),b=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);return this.chkNoLowerValue.get("checked")||this.chkNoUpperValue.get("checked")?this.chkNoLowerValue.get("checked")?j.substitute("( .. ${0}]",[b.displayValue]):j.substitute("[${0} .. )",[a.displayValue]):j.substitute("[${0} .. ${1}]",[a.displayValue,b.displayValue])},_addToSelectedValues:function(a){if(a)if(this.valueWithinMinMaxRange(a.value)){var b={id:a.displayValue,value:a.value,displayValue:a.displayValue,range:a.range,__selected:!0,destroyOnRemove:!1};this.transferBox.addNewItem(b,!0),this._showValidationMessage("")}else this._validateMinMaxRange(),this._showValidationMessage(this._validationMsg);else this._showValidationMessage(this.txtPleaseSpecifyValue)},_showValidationMessage:function(a){this.spanValidationMessage.innerHTML=h.htmlEncode(a),f.setDomNodeVisible(this.divValidationMessage,""!==a)},_cmdAddCustom_OnClick:function(){if(""===this.dtCustomValue.textbox.value)dojo.removeClass(this.errorCustomDate,"display-none"),this._showValidationMessage(this.txtPleaseSpecifyValue),this.dtCustomValue.focus();else{this._showValidationMessage(""),dojo.addClass(this.errorCustomDate,"display-none");var a={range:null,displayValue:this.dtCustomValue.textbox.value,value:h.Convert.toIsoStringFromDate(this.dtCustomValue.get("value"))};this._addToSelectedValues(a)}},_getDateValue:function(a,b){var c=a.textbox.value,d="";return""===c?b&&""!==b.value&&(d={value:b.value,displayValue:b.description,date:h.Convert.toDateFromString(b.value)}):d={displayValue:c,value:h.Convert.toIsoStringFromDate(a.get("value")),date:a.get("value")},d}})})},"Sage/MainView/ReportMgr/Crystal/SimpleParameterEditor":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","dojo/text!./templates/SimpleParameterEditor.html","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/Utility","Sage/Reporting/Enumerations","dojo/string","dojo/number","dojo/currency","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","Sage/MainView/ReportMgr/Crystal/ParameterRangeWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.ReportMgr.Crystal.SimpleParameterEditor",[e],{widgetTemplate:h.makeTemplateFromString(d),isNumeric:!1,isCurrency:!1,txtCustomValue:null,parameterRangeWidget:null,_setValueAttr:function(a){this._set("value",a)},_getValueAttr:function(){this._promptParameter.currentValues=[];var a;if(this._paramRangeType){var b=this.parameterRangeWidget.getRangeValue();a={range:b,displayValue:b.displayValue,value:b.startValue?b.startValue:b.endValue},this._promptParameter.currentValues.push(this._getParameterValue(a))}else{var c=this._getCurrentValue();if(c){var d=this._getParameterValue(c);this._promptParameter.currentValues.push(d)}}return this._promptParameter},constructor:function(a){},startup:function(){if(!this._started){if(this.inherited(arguments),f.setDomNodeVisible(this.divValidationMessage,!1),this.isNumeric=this.parameterValueKind===i.SlxParameterValueKind.NumberParameter,this.isCurrency=this.parameterValueKind===i.SlxParameterValueKind.CurrencyParameter,new c({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer),this._paramRangeType)this.parameterRangeWidget=new o({paramInitialIds:this._initialIds,paramInitialValues:this._initialValues,paramValues:this._values,defaultValues:this._promptParameter.defaultValues,parameterValueKind:this._promptParameter.parameterValueKind,allowCustomValues:this._allowCustomValues,parameterPageId:this.paramId,isAttachedToTransbox:!1},"parameterRangeWidget"),this.parameterRangeWidget.placeAt(this.parameterRangeWidgetContainer),f.setDomNodeVisible(this.rowParameterRange,!0);else{this._values.length>0&&(f.setDomNodeVisible(this.rowSingleValue,!0),g.initializeComboBoxValues(this._values,g.getRangeInitialValue(this._initialValues,!1),this.cmbValues),this.connect(this.cmbValues,"onBlur",this._onComboBoxChange,!0)),f.setDomNodeVisible(this.rowCustomValues,0===this._values.length||this._allowCustomValues);var a=j.substitute("customControl_${id}",{id:this.paramId});this.customValueField=g.createCustomParameterInputControl(a,this.customValueContainer,this),this.txtCustomValue=g.getCustomParameterInputField(a,this.isCurrency,this.customValueField),this.isCurrency?dojo.attr(this.customValueField,"style","width:105% !important;"):dojo.attr(this.customValueField,"style","width:110% !important;"),this.connect(this.customValueField,"onBlur",this._onCustomChange,!0),this.subscribe("entity/report/parameters/control/destroy",function(a){a&&a.id.indexOf("Simple")>-1&&a._destroyObject()})}f.setDomNodeVisible(this.rowOrEnterValue,this._allowCustomValues&&this._values.length>0&&!this._paramRangeType),this._initializeMessages()}},_onKeyPress:function(a){h.restrictToNumberOnKeyPress(a,"number")||dojo.stopEvent(a)},_onCustomChange:function(){""!==dojo.attr(this.txtCustomValue,"value")&&this.cmbValues.set("displayedValue","")},_onComboBoxChange:function(){var a=this.cmbValues.item;a&&""!==a.value&&(dojo.attr(this.txtCustomValue,"value",""),dojo.attr(this.customValueField,"displayedValue",""))},isValid:function(){var a="";if(!this._promptParameter.isOptionalPrompt&&!this._promptParameter.allowNullValue)if(this._paramRangeType)this.parameterRangeWidget.verifyRequiredAssignments()?this.parameterRangeWidget.validateRangeWithinBoundaries()||(a=this.txtFromMustBeLessThanOrEqualToTo):a=this.txtPleaseSpecifyValue;else{var b=this._getCurrentValue();if(null===b)a=this.txtPleaseSpecifyValue;else{var c=this.isNumeric?b:b.length;a=this.getMinMaxValidationMessage(c),0===a.length&&this.isCurrency&&(a=this.customValueField._supportingWidgets[0].message)}}return this._showValidationMessage(a),""===a},_initializeMessages:function(){var a=this.getMinMaxInitializationMessage();this.spanMinMaxMessage.innerHTML=h.htmlEncode(a),f.setDomNodeVisible(this.divMinMaxMessage,""!==a)},_showValidationMessage:function(a){this.spanValidationMessage.innerHTML=h.htmlEncode(a),f.setDomNodeVisible(this.divValidationMessage,""!==a),f.setDomNodeVisible(this.errorEndRange,""!==a),f.setDomNodeVisible(this.errorCustomValue,""!==a),""===a||this._paramRangeType||(this._values.length>0?this.cmbValues.focus():this.txtCustomValue.focus())},_getCurrentValue:function(){var a=null,b=null;if(""!==dojo.attr(this.txtCustomValue,"value"))return this.isNumeric?a=k.parse(dojo.attr(this.txtCustomValue,"value")):this.isCurrency?(a=this.txtCustomField._supportingWidgets[0].value,b=this.txtCustomField._supportingWidgets[0].displayedValue):a=dojo.attr(this.txtCustomValue,"value"),{value:a,displayValue:b||a};var c=this.cmbValues.item;return c&&""!==c.value?(a=this.isNumeric?k.parse(c.value):c.value,{value:a,displayValue:c.description}):a},_getParameterValue:function(a){return a.range?{className:i.ParameterClassName.RangeValue,description:a.displayValue,rangeValue:{beginValue:a.range.startValue,beginValueType:this.beginValueType,endValue:a.range.endValue,endValueType:this.endValueType,lowerBoundType:a.range.noLowerValue?i.SlxRangeBoundType.NoBound:a.range.includeFromRange?i.SlxRangeBoundType.BoundInclusive:i.SlxRangeBoundType.BoundExclusive,upperBoundType:a.range.noUpperValue?i.SlxRangeBoundType.NoBound:a.range.includeToRange?i.SlxRangeBoundType.BoundInclusive:i.SlxRangeBoundType.BoundExclusive}}:{className:"CrystalReports.ParameterFieldDiscreteValue",computedText:this.isNumeric?null:'"'+a.value+'"',description:a.displayValue,discreteValue:{actualValue:a.value,actualValueType:this.actualValueType,value:a.value,valueType:this.valueType}}},_destroyObject:function(){this.customValueField&&this.customValueField.destroyRecursive(),this.parameterRangeWidget&&dojo.publish("entity/report/parameters/control/destroy",[this.parameterRangeWidget,this])}})})},"Sage/MainView/ReportMgr/Crystal/ParameterRangeWidget":function(){define(["dojo/_base/declare","dojo/_base/array","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ParameterRangeWidget.html","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/i18n!./nls/_ParameterEditorBase","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dojo/string","dojo/currency","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","Sage/Reporting/Enumerations","Sage/Utility"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.ReportMgr.Crystal.ParameterRangeWidget",[c,d,e],{templateString:f,paramInitialIds:null,paramValues:null,defaultValues:null,paramInitialValues:null,parameterPageId:null,isNumeric:!1,isCurrency:!1,txtStartCustomValue:null,txtEndCustomValue:null,customStartValueField:null,customEndValueField:null,parameterValueKind:n.SlxParameterValueKind.StringParameter,allowCustomValues:!1,hasParamValues:!1,isAttachedToTransbox:!1,postMixInProperties:function(){dojo.mixin(this,h)},postCreate:function(){this.inherited(arguments),this.chkIncludeFromRange.set("checked",!0),this.chkIncludeToRange.set("checked",!0),this._initializeStartRangeValues()},verifyRequiredAssignments:function(){var a=this._getValue(this._SafelyGetStartValue(),this.cboStartRangeValues.item),b=this._getValue(this._SafelyGetEndValue(),this.cboEndRangeValues.item);return this.chkNoUpperValue.checked?a.displayValue?(this._removeErrorMessages(),!0):(this.cboStartRangeValues.focus(),dojo.removeClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none"),dojo.addClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),!1):this.chkNoLowerValue.checked?b.displayValue?(this._removeErrorMessages(),!0):(this.cboEndRangeValues.focus(),dojo.addClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none"),dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),!1):a.displayValue&&b.displayValue?(dojo.addClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none"),dojo.addClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),!0):(this._setRangeErrorMessageVisibility(a.displayValue,b.displayValue),!1)},validateBasedOnSubContainers:function(){if(this.isCurrency){if(this.customEndValueField._supportingWidgets[0]&&"Error"===this.customEndValueField._supportingWidgets[0].state)return this.customEndValueField._supportingWidgets[0].message;if(this.customStartValueField._supportingWidgets[0]&&"Error"===this.customStartValueField._supportingWidgets[0].state)return this.customStartValueField._supportingWidgets[0].message}return""},validateRangeWithinBoundaries:function(){if(!this.chkNoUpperValue.checked&&!this.chkNoLowerValue.checked){var a=this._getValue(this._SafelyGetStartValue(),this.cboStartRangeValues.item),b=this._getValue(this._SafelyGetEndValue(),this.cboEndRangeValues.item);switch(this.parameterValueKind){case n.SlxParameterValueKind.NumberParameter:if(parseInt(a.value,10)>parseInt(b.value,10))return dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),!1;break;case n.SlxParameterValueKind.CurrencyParameter:if(parseFloat(a.value)>parseFloat(b.value))return dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),!1;break;default:if(a.value.toUpperCase()>b.value.toUpperCase())return dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),!1}}return!0},getRangeValue:function(){var a=this._getValue(dojo.attr(this.txtStartCustomValue,"value"),this.cboStartRangeValues.item),b=this._getValue(dojo.attr(this.txtEndCustomValue,"value"),this.cboEndRangeValues.item),c=[];return c=this.chkNoLowerValue.get("checked")||this.chkNoUpperValue.get("checked")?this.chkNoLowerValue.get("checked")?{startValue:null,endValue:b.value,displayValue:j.substitute("( .. ${0}]",[b.displayValue])}:{startValue:a.value,endValue:null,displayValue:j.substitute("[${0} .. )",[a.displayValue])}:{startValue:a.value,endValue:b.value,displayValue:j.substitute("[${0} .. ${1}]",[a.displayValue,b.displayValue])},c.noLowerValue=this.chkNoLowerValue.checked,c.noUpperValue=this.chkNoUpperValue.checked,c.includeFromRange=this.chkIncludeFromRange.checked,c.includeToRange=this.chkIncludeToRange.checked,c},_SafelyGetStartValue:function(){var a="";return this.txtStartCustomValue||(this.txtStartCustomValue=i.getCustomParameterInputField(j.substitute("startControl_${id}",{id:this.parameterPageId}),this.isCurrency,this.customStartValueField)),this.txtStartCustomValue&&this.txtStartCustomValue.value&&(a=dojo.attr(this.txtStartCustomValue,"value")),a},_SafelyGetEndValue:function(){var a="";return this.txtEndCustomValue||(this.txtEndCustomValue=i.getCustomParameterInputField(j.substitute("endControl_${id}",{id:this.parameterPageId}),this.isCurrency,this.customEndValueField)),this.txtEndCustomValue&&this.txtEndCustomValue.value&&(a=dojo.attr(this.txtEndCustomValue,"value")),a},_initializeStartRangeValues:function(){this.isCurrency=this.parameterValueKind===n.SlxParameterValueKind.CurrencyParameter,this.isNumeric=this.parameterValueKind===n.SlxParameterValueKind.NumberParameter,g.setDomNodeVisible(this.rowStartEndCustomValue,this.allowCustomValues),this.hasParamValues=this.paramValues.length>0;var a=j.substitute("startControl_${id}",{id:this.parameterPageId});this.customStartValueField=i.createCustomParameterInputControl(a,this.startCustomValueContainer,this),this.txtStartCustomValue=i.getCustomParameterInputField(a,this.isCurrency,this.customStartValueField),a=j.substitute("endControl_${id}",{id:this.parameterPageId}),this.customEndValueField=i.createCustomParameterInputControl(a,this.endCustomValueContainer,this),this.txtEndCustomValue=i.getCustomParameterInputField(a,this.isCurrency,this.customEndValueField),this.hasParamValues&&(i.initializeComboBoxValues(this.paramValues,this.isAttachedToTransbox?"":i.getRangeInitialValue(this.paramInitialValues,!0),this.cboStartRangeValues),dojo.connect(this.cboStartRangeValues,"onBlur",this,"_startRangeValue_OnChange",!0),this.isCurrency?dojo.connect(this.customStartValueField._supportingWidgets[0],"onChange",this,"_txtStartCustomValue_OnChange",!0):dojo.connect(this.customStartValueField.domNode,"onChange",this,"_txtStartCustomValue_OnChange",!0),i.initializeComboBoxValues(this.paramValues,this.isAttachedToTransbox?"":i.getRangeInitialValue(this.paramInitialValues,!1),this.cboEndRangeValues),dojo.connect(this.cboEndRangeValues,"onBlur",this,"_endRangeValue_OnChange",!0),this.isCurrency?dojo.connect(this.customEndValueField._supportingWidgets[0],"onChange",this,"_txtEndCustomValue_OnChange",!0):dojo.connect(this.customEndValueField.domNode,"onChange",this,"_txtEndCustomValue_OnChange",!0)),g.setDomNodeVisible(this.rowStartEndRangeValues,this.hasParamValues),g.setDomNodeVisible(this.rowStartEndRangeLabels,this.hasParamValues),g.setDomNodeVisible(this.rowStartEndOrValue,this.allowCustomValues&&this.hasParamValues),dojo.subscribe("entity/report/parameters/control/destroy",function(a){a&&(a.id.indexOf("Range")>-1?a._destroyObject():a.parameterRangeWidget&&a.parameterRangeWidget._destroyObject())}),this._assignDefaultRangeValues()},_assignDefaultRangeValues:function(){if(1===this.paramInitialValues.length&&this.paramInitialValues[0].value){var a=this.paramInitialValues[0];a.value.lowerBoundType&&(this.chkIncludeFromRange.set("checked",a.value.lowerBoundType===n.SlxRangeBoundType.BoundInclusive),this.chkNoLowerValue.set("checked",null===a.value.beginValue),this.chkIncludeToRange.set("checked",a.value.upperBoundType===n.SlxRangeBoundType.BoundInclusive),this.chkNoUpperValue.set("checked",null===a.value.endValue))}},_onKeyPress:function(a){o.restrictToNumberOnKeyPress(a,"number")||dojo.stopEvent(a)},_chkNoLowerValue_OnCheck:function(a){this.chkIncludeFromRange.setAttribute("disabled",a),this.cboStartRangeValues.setAttribute("disabled",a),this.txtStartCustomValue.setAttribute("disabled",a),this.chkNoUpperValue.setAttribute("disabled",a)},_chkNoUpperValue_OnCheck:function(a){this.chkIncludeToRange.setAttribute("disabled",a),this.cboEndRangeValues.setAttribute("disabled",a),this.txtEndCustomValue.setAttribute("disabled",a),this.chkNoLowerValue.setAttribute("disabled",a)},_startRangeValue_OnChange:function(){var a=this.cboStartRangeValues.item
;a&&""!==a.value&&(dojo.attr(this.txtStartCustomValue,"value",""),dojo.attr(this.customStartValueField,"displayedValue",""))},_txtStartCustomValue_OnChange:function(){""!==dojo.attr(this.txtStartCustomValue,"value")&&this.cboStartRangeValues.set("displayedValue","")},_endRangeValue_OnChange:function(){var a=this.cboEndRangeValues.item;a&&""!==a.value&&(dojo.attr(this.txtEndCustomValue,"value",""),dojo.attr(this.customEndValueField,"displayedValue",""))},_txtEndCustomValue_OnChange:function(){""!==dojo.attr(this.txtEndCustomValue,"value")&&this.cboEndRangeValues.set("displayedValue","")},_getValue:function(a,b){var c={displayValue:a,value:a};return""===a&&b&&""!==b.value&&(c={value:b.value,displayValue:b.description}),c},_getOriginalParameterValue:function(a){var c=null;return b.some(this.defaultValues,function(b,d){if(b._id==a)return c=dojo.clone(b),!0}),c},_setRangeErrorMessageVisibility:function(a,b){a||b?a?(dojo.addClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none"),dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),this.cboEndRangeValues.focus()):(dojo.addClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),dojo.removeClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none"),this.cboStartRangeValues.focus()):(dojo.removeClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none"),dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none"),this.cboStartRangeValues.focus())},_removeErrorMessages:function(){dojo.addClass(this.errorStartRange,"display-none"),dojo.addClass(this.errorEndRange,"display-none"),dojo.addClass(this.errorStartCustomValue,"display-none"),dojo.addClass(this.errorEndCustomValue,"display-none")},_destroyObject:function(){this.customEndValueField.destroyRecursive(),this.customStartValueField.destroyRecursive()}})})},"Sage/MainView/ReportMgr/Crystal/MultiSelectParameterEditor":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/string","dojo/number","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","dojo/text!./templates/MultiSelectParameterEditor.html","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dijit/form/MultiSelect","Sage/Utility","Sage/MainView/ReportMgr/Crystal/ParameterRangeWidget","Sage/Reporting/Enumerations"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.ReportMgr.Crystal.MultiSelectParameterEditor",[i],{widgetTemplate:m.makeTemplateFromString(h),parameterRangeWidget:null,isNumeric:!1,isCurrency:!1,txtCustomValue:null,customValueField:null,_setValueAttr:function(a){this._set("value",a)},_getValueAttr:function(){var a=this;return this._promptParameter.currentValues=[],b.forEach(this._selectedValues,function(b,c){var d=a._getParameterValue(b);a._promptParameter.currentValues.push(d)}),this._promptParameter},constructor:function(a){},startup:function(){if(!this._started){this.inherited(arguments),this.isNumeric=this.parameterValueKind===o.SlxParameterValueKind.NumberParameter,this.isCurrency=this.parameterValueKind===o.SlxParameterValueKind.CurrencyParameter,new g({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer),this._paramDiscreteType||(j.setDomNodeVisible(this.parameterRangeDiv,!0),this.parameterRangeWidget=new n({paramInitialIds:this._initialIds,paramInitialValues:this._initialValues,paramValues:this._values,defaultValues:this._promptParameter.defaultValues,parameterValueKind:this._promptParameter.parameterValueKind,allowCustomValues:this._allowCustomValues,parameterPageId:this.paramId,isAttachedToTransbox:"new"!==this.mode},"parameterRangeWidget"),this.parameterRangeWidget.placeAt(this.parameterRangeWidgetContainer)),this.initializeTransferBoxWidget(this.transferBoxContainer,!this._paramRangeType);var a=c.substitute("customControl_${id}",{id:this.paramId});this.customValueField=k.createCustomParameterInputControl(a,this.customValueContainer,this),this.txtCustomValue=k.getCustomParameterInputField(a,this.isCurrency,this.customValueField),this.isCurrency?dojo.attr(this.customValueField,"style","width:97% !important;"):dojo.attr(this.customValueField,"style","width:95% !important;"),dojo.subscribe("entity/report/parameters/control/destroy",function(a){a&&a.id.indexOf("Multi")>-1&&a._destroyObject()}),j.setDomNodeVisible(this.divValidationMessage,!1),j.setDomNodeVisible(this.rowCustomValues,this._allowCustomValues&&!this._paramRangeType),this._initializeMessages()}},isValid:function(){var a=!0,b="";return this._promptParameter.isOptionalPrompt||this._promptParameter.allowNullValue||(this._selectedValues=this.transferBox.getSelectedValues(),this._selectedValues.length>0?dojo.addClass(this.transferBox.errorValidation,"display-none"):(dojo.removeClass(this.transferBox.errorValidation,"display-none"),b=this.txtPleaseSpecifyValue,a=!1)),this._showValidationMessage(b),a},_onKeyPress:function(a){m.restrictToNumberOnKeyPress(a,"number")||dojo.stopEvent(a)},_initializeMessages:function(){var a=this.getMinMaxInitializationMessage();this.spanMinMaxMessage.innerHTML=m.htmlEncode(a),j.setDomNodeVisible(this.divMinMaxMessage,""!==a)},_showValidationMessage:function(a){this.spanValidationMessage.innerHTML=m.htmlEncode(a),j.setDomNodeVisible(this.divValidationMessage,""!==a)},_getParameterValue:function(a){return a.range?{className:o.ParameterClassName.RangeValue,description:a.displayValue,rangeValue:{beginValue:a.range.startValue,beginValueType:this.beginValueType,endValue:a.range.endValue,endValueType:this.endValueType,lowerBoundType:a.range.noLowerValue?o.SlxRangeBoundType.NoBound:a.range.includeFromRange?o.SlxRangeBoundType.BoundInclusive:o.SlxRangeBoundType.BoundExclusive,upperBoundType:a.range.noUpperValue?o.SlxRangeBoundType.NoBound:a.range.includeToRange?o.SlxRangeBoundType.BoundInclusive:o.SlxRangeBoundType.BoundExclusive}}:{className:o.ParameterClassName.DiscreteValue,description:a.displayValue,discreteValue:{actualValue:a.value,actualValueType:this.actualValueType,value:a.value,valueType:this.valueType}}},_cmdAddRange_OnClick:function(){if(this.lblRangeValidationError.textContent=this.txtPleaseSpecifyValue,this.parameterRangeWidget.verifyRequiredAssignments())if(this.parameterRangeWidget.validateRangeWithinBoundaries()){var a=this.parameterRangeWidget.validateBasedOnSubContainers();if(a.length>0)dojo.removeClass(this.lblRangeValidationError,"display-none"),this.lblRangeValidationError.textContent=a;else{dojo.addClass(this.lblRangeValidationError,"display-none");var b=this.parameterRangeWidget.getRangeValue();this.isNumeric&&(b.startValue=b.startValue?d.parse(b.startValue.replace(/\D/g,"")):null,b.endValue=b.endValue?d.parse(b.endValue.replace(/\D/g,"")):null);var c={range:b,displayValue:b.displayValue,value:b.startValue?b.startValue:b.endValue};this._addToSelectedValues(c)}}else dojo.removeClass(this.lblRangeValidationError,"display-none"),this.lblRangeValidationError.textContent=this.txtFromMustBeLessThanOrEqualToTo;else dojo.removeClass(this.lblRangeValidationError,"display-none")},_cmdAddCustom_OnClick:function(){var a=null,b=null;if(this.isCurrency?(a=this.customValueField._supportingWidgets[0].value,b=this.customValueField._supportingWidgets[0].displayedValue):a=dojo.attr(this.txtCustomValue,"value"),""===a)dojo.removeClass(this.errorCustomDate,"display-none"),this._showValidationMessage(this.txtPleaseSpecifyValue),this.txtCustomValue.focus();else{this._showValidationMessage(""),dojo.addClass(this.errorCustomDate,"display-none");var c={value:a,displayValue:b||a};this._addToSelectedValues(c)}},_addToSelectedValues:function(a){if(a)if(this.valueWithinMinMaxRange(a.value)){var b="";if(this.isCurrency&&(b=this.customValueField._supportingWidgets[0].message),0===b.length){var c={id:a.displayValue,value:a.value,displayValue:a.displayValue,range:a.range,__selected:!0,destroyOnRemove:!1};this.transferBox.addNewItem(c,!0),this._showValidationMessage("")}else this._showValidationMessage(b)}else this._showValidationMessage(this.getMinMaxValidationMessage(a.value));else this._showValidationMessage(this.txtPleaseSpecifyValue)},_destroyObject:function(){this.customValueField&&this.customValueField.destroyRecursive(),this.parameterRangeWidget&&dojo.publish("entity/report/parameters/control/destroy",[this.parameterRangeWidget,this])}})})},"Sage/MainView/ReportMgr/Crystal/CrystalReportConditionsDialog":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/store/Memory","dojo/data/ObjectStore","dojo/data/ItemFileWriteStore","dojo/text!./templates/CrystalReportConditionsDialog.html","dojo/i18n!./nls/CrystalReportConditionsDialog","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportConditionEditor","Sage/MainView/ReportMgr/Common/_WizardDialogBase","Sage/MainView/ReportMgr/Crystal/CrystalReportsFormatter","dijit/Dialog","dijit/form/Form","Sage/Utility"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a("Sage.MainView.ReportMgr.Crystal.CrystalReportConditionsDialog",[m],{id:"dlgCrystalReportConditions",widgetTemplate:q.makeTemplateFromString(g),_nlsResources:h,_helpIconTopic:"RptscheduleWiz",_subscriptions:null,_reportFilters:null,_conditionOptions:null,_conditionsCollection:null,_currentStep:i.CrystalReportWizardStep.Conditions,constructor:function(a){this._subscriptions=[],this._conditionsCollection=[],this._initializeWizardOptions(a),this._conditionOptions=a.conditionOptions,this._conditionOptions.conditionsConnector||(this._conditionOptions.conditionsConnector=i.ReportConditionConnector.And);var d=this;this._conditionOptions.conditions&&b.forEach(this._conditionOptions.conditions,function(a,b){d._addNewCondition(a)}),this._reportFilters=dojo.clone(this._reportMetadata.reportFilters),this._subscriptions.push(c.subscribe("/reportManager/reportWizard/createCondition",function(a){d._addNewCondition(a)})),this._subscriptions.push(c.subscribe("/reportManager/reportWizard/updateCondition",function(a){d._updateCondition(a)}))},destroy:function(){this.grdCrystalConditions.destroy(),b.forEach(this._subscriptions,function(a,b){a.remove()}),this._dialog.destroyRecursive(),this.inherited(arguments)},startup:function(){this.inherited(arguments),this._initializeConditionsGrid(),this._initializeConditionPresets(),this._conditionOptions.conditions.length>0&&this.cmbConditionPresets.attr("value",i.ConditionPreset.Custom),this._conditionOptions.conditionsConnector&&this.cmbConnector.attr("value",this._conditionOptions.conditionsConnector)},_btnAddCondition_Click:function(){new l(null,this._reportMetadata).show()},_cmbConditionPresets_OnChange:function(a){var b=this._getSelectedPreset();this._setConditionsVisibility(b),this._showPreset(b)},_addNewCondition:function(a){a._id=this._getConditionId(),this._conditionsCollection.push(a),this._refreshConditionsGrid()},_updateCondition:function(a){var c=this;b.some(this._conditionsCollection,function(b,d){if(b._id===a._id)return c._conditionsCollection[d]=a,!0}),this._refreshConditionsGrid()},_initializeConditionPresets:function(){var a=[{value:i.ConditionPreset.AllRecords,caption:h.txtAllRecords,tag:i.ConditionPreset.AllRecords},{value:i.ConditionPreset.Custom,caption:h.txtSpecificConditions,tag:i.ConditionPreset.Custom}],c=null,d=k.getCurrentUserCondition();d&&this._reportMetadata.useUserFilter&&(c={name:h.txtCurrentUser,id:i.ConditionPreset.CurrentUser,filterConditions:[d]},this._reportFilters.unshift(c)),(d=k.getCurrentEntityCondition())&&(c={name:"["+j.getCurrentEntityContext().Description+"]",id:i.ConditionPreset.CurrentEntity,filterConditions:[d]},this._reportFilters.unshift(c)),b.forEach(this._reportFilters,function(b,c){a.push({value:b.id,caption:b.name,tag:i.ConditionPreset.Preset})});var e={identifier:"value",label:"caption",items:a},g=new f({data:e});this.cmbConditionPresets.setStore(g),this.cmbConditionPresets.startup()},_initializeConditionsGrid:function(){var a={identifier:"_id",items:this._conditionsCollection},b=new e({objectStore:new d({data:a})});this.grdCrystalConditions.setStore(b)},_getDialogTitle:function(){return this._nlsResources.txtDialogTitle+" ["+this._reportMetadata.localeDisplayName+"]"},_getWizardStepResult:function(){return this._conditionOptions.conditions=this._getConditions(),this._conditionOptions.conditionsConnector=this.cmbConnector.value,this._conditionOptions},_setConditionsVisibility:function(a){switch(j.setDomNodeVisible(this.trConnector,!1),j.setDomNodeVisible(this.tbConditions.domNode,!1),j.setDomNodeVisible(this.grdCrystalConditions.domNode,!1),a.tag){case i.ConditionPreset.Preset:case i.ConditionPreset.Custom:j.setDomNodeVisible(this.trConnector,!0),j.setDomNodeVisible(this.tbConditions.domNode,!0),j.setDomNodeVisible(this.grdCrystalConditions.domNode,!0),this.grdCrystalConditions.resize()}},_getSelectedPreset:function(){var a=this.cmbConditionPresets.store._getItemByIdentity(this.cmbConditionPresets.value);return{value:a?this.cmbConditionPresets.store.getValue(a,"value"):null,tag:a?this.cmbConditionPresets.store.getValue(a,"tag"):null}},_showPreset:function(a){switch(a.tag){case i.ConditionPreset.Preset:var c=this;b.some(this._reportFilters,function(d,e){if(d.id===a.value)return c._conditionsCollection=[],b.forEach(d.filterConditions,function(a,b){c._addNewCondition(a)}),d.conditionsConnector&&(c._conditionOptions.conditionsConnector=d.conditionsConnector,c.cmbConnector.attr("value",c._conditionOptions.conditionsConnector)),!0});break;case i.ConditionPreset.CurrentRecord:case i.ConditionPreset.CurrentGroup:case i.ConditionPreset.Custom:}},_getConditions:function(){var a=this._getSelectedPreset(),b=[];switch(a.tag){case i.ConditionPreset.Custom:case i.ConditionPreset.Preset:for(var c=0;c<this._conditionsCollection.length;c++){var d=dojo.clone(this._conditionsCollection[c]);delete d._id,b.push(d)}}return b},_getConditionId:function(){for(var a=0,b=0;b<this._conditionsCollection.length;b++)a<this._conditionsCollection[b]._id&&(a=this._conditionsCollection[b]._id);return a+1},_refreshConditionsGrid:function(){this.grdCrystalConditions&&(this.grdCrystalConditions.store.close(),this._initializeConditionsGrid())},_editCondition:function(a){var b=this.grdCrystalConditions.getItem(a);new l(b,this._reportMetadata).show()},_deleteCondition:function(a){var c=-1;b.some(this._conditionsCollection,function(b,d){if(b._id===a)return c=d,!0}),-1!==c&&this._conditionsCollection.splice(c,1),this._refreshConditionsGrid()}})})},"Sage/MainView/ReportMgr/Crystal/CrystalReportConditionEditor":function(){define(["dojo/_base/declare","dojo/string","dojo/number","dojo/_base/array","dojo/topic","dojo/i18n!./nls/CrystalReportConditionEditor","dojo/text!./templates/CrystalReportConditionEditor.html","dijit/_Widget","Sage/_Templated","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/Lookup","Sage/UI/Dialogs","Sage/Data/SDataServiceRegistry","dojo/data/ItemFileWriteStore","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dijit/form/Select","dijit/form/CheckBox"],function(declare,dojoString,dojoNumber,dojoArray,topic,nlsResources,template,_Widget,_Templated,dojoLang,_DialogHelpIconMixin,Lookup,Dialogs,SDataServiceRegistry,ItemFileWriteStore,Enumerations,ReportManagerUtility,CrystalReportsUtility){var crystalReportConditionEditor=declare("Sage.MainView.ReportMgr.CrystalReportConditionEditor",[_Widget,_Templated],{id:"dlgCrystalReportConditionEditor",_dialog:!1,_reportMetadata:null,widgetTemplate:new Simplate(eval(template)),_nlsResources:nlsResources,widgetsInTemplate:!0,_entity:null,_mode:"new",constructor:function(a,b){this._entity=a,this._reportMetadata=b,a&&(this._mode="edit")},show:function(){this._dialog.show(),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new _DialogHelpIconMixin),this._dialog.createHelpIconByTopic("reportconditions"))},destroy:function(){this.lkpUser.destroy(),this.lkpGroup.destroy(),this.inherited(arguments)},_dialog_OnShow:function(){this._initializeControls()},_closeDialog:function(){var a=this;a._dialog.hide(),a.destroyRecursive()},_cmdOK_OnClick:function(){this._isValid()&&this._save()},_cmdCancel_OnClick:function(){this._closeDialog()},_dialog_OnCancel:function(){this._closeDialog()},_cmbConditionType_OnChange:function(){this._setControlsVisibility()},_cmbDateRange_OnChange:function(){this._setDateRangeControlsVisibility()},_cmbTables_OnChange:function(){this._initializeFieldsDropdown()},_cmbFields_OnChange:function(){this._initializeOperatorsDropdown()},_cmbOperators_OnChange:function(){this._setQueryControlsVisibility()},_chkCurrentUser_OnChange:function(){this.chkCurrentUser.checked&&this.lkpUser.set("selectedObject",null),ReportManagerUtility.setDomNodeVisible(this.trUser,!this.chkCurrentUser.checked)},_isValid:function(){switch(this.cmbConditionType.value){case String(Enumerations.ReportConditionType.Group):if(!this.lkpGroup.get("selectedObject"))return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbGroup_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;break;case String(Enumerations.ReportConditionType.DateRange):if("DateRange"===this.cmbDateRange.value){if(""===this.dtFromDate.focusNode.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtFromDate_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;if(""===this.dtToDate.focusNode.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtToDate_Caption]),this._nlsResources.txtInvalidParameterTitle),!1}break;case String(Enumerations.ReportConditionType.User):this.chkCurrentUser.checked||this.lkpUser.get("selectedObject")||Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.lkpUser_Caption]),this._nlsResources.txtInvalidParameterTitle);break;case String(Enumerations.ReportConditionType.Query):if(!this.cmbTables.value||""===this.cmbTables.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbTable_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;if(!this.cmbFields.value||""===this.cmbFields.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbField_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;if(!this.cmbOperators.value||""===this.cmbOperators.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbOperator_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;var a=this.cmbOperators.value,b=this._getFieldDataType();switch(b){case Enumerations.FieldDataTypes.Numeric:if(a==Enumerations.ReportConditionOperator.IsInTheRange){if(!this.txtNumericValue1.focusNode.textbox.value||""===this.txtNumericValue1.focusNode.textbox.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtNumericValueFrom_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;if(!this.txtNumericValue2.focusNode.textbox.value||""===this.txtNumericValue2.focusNode.textbox.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtNumericValueTo_Caption]),this._nlsResources.txtInvalidParameterTitle),!1}else if(!this.txtNumericValue1.focusNode.textbox.value||""===this.txtNumericValue1.focusNode.textbox.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtValue_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;break;case Enumerations.FieldDataTypes.DateTime:if(a==Enumerations.ReportConditionOperator.IsInTheRange){if(""===this.dtDateValue1.focusNode.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtFromDate_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;if(""===this.dtDateValue2.focusNode.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtToDate_Caption]),this._nlsResources.txtInvalidParameterTitle),!1}else if(""===this.dtDateValue1.focusNode.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtFromDate_Caption]),this._nlsResources.txtInvalidParameterTitle),!1;break;case Enumerations.FieldDataTypes.String:if(!this.txtStringValue1.value||""===this.txtStringValue1.value)return Dialogs.showError(dojoString.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtValue_Caption]),this._nlsResources.txtInvalidParameterTitle),!1}}return!0},_setControlsVisibility:function(){if(ReportManagerUtility.setDomNodeVisible(this.trUser,!1),ReportManagerUtility.setDomNodeVisible(this.trCurrentUser,!1),ReportManagerUtility.setDomNodeVisible(this.trGroup,!1),ReportManagerUtility.setDomNodeVisible(this.trDateRange,!1),ReportManagerUtility.setDomNodeVisible(this.trFromDate,!1),ReportManagerUtility.setDomNodeVisible(this.trToDate,!1),ReportManagerUtility.setDomNodeVisible(this.trTable,!1),ReportManagerUtility.setDomNodeVisible(this.trField,!1),ReportManagerUtility.setDomNodeVisible(this.trOperator,!1),ReportManagerUtility.setDomNodeVisible(this.trValue,!1),this.cmbConditionType)switch(this.cmbConditionType.value){case Enumerations.ReportConditionType.Group:ReportManagerUtility.setDomNodeVisible(this.trGroup,!0);break;case Enumerations.ReportConditionType.DateRange:ReportManagerUtility.setDomNodeVisible(this.trDateRange,!0),ReportManagerUtility.setDomNodeVisible(this.trFromDate,!0),ReportManagerUtility.setDomNodeVisible(this.trToDate,!0);break;case Enumerations.ReportConditionType.User:ReportManagerUtility.setDomNodeVisible(this.trUser,!0),ReportManagerUtility.setDomNodeVisible(this.trCurrentUser,!0);break;case Enumerations.ReportConditionType.Query:ReportManagerUtility.setDomNodeVisible(this.trTable,!0),ReportManagerUtility.setDomNodeVisible(this.trField,!0),ReportManagerUtility.setDomNodeVisible(this.trOperator,!0),ReportManagerUtility.setDomNodeVisible(this.trValue,!0)}this._setQueryControlsVisibility()},_setDateRangeControlsVisibility:function(){if(this.cmbDateRange)switch(this.cmbDateRange.value){case"DateRange":ReportManagerUtility.setDomNodeVisible(this.trFromDate,!0),ReportManagerUtility.setDomNodeVisible(this.trToDate,!0);break;default:ReportManagerUtility.setDomNodeVisible(this.trFromDate,!1),ReportManagerUtility.setDomNodeVisible(this.trToDate,!1)}},_initializeControls:function(){this._initializeConditionTypeDropdown(),this._createUserLookup(),this._createGroupLookup(),this._setControlsVisibility(),this._initializeTablesDropdown(),this._setValues()},_setValues:function(){if(this._entity)switch(this.cmbConditionType.attr("value",this._entity.conditionType),this.cmbConditionType.value){case Enumerations.ReportConditionType.Group:var a=this._entity.value?ReportManagerUtility.getGroup(this._entity.value):null;this.lkpGroup.set("selectedObject",a);break;case Enumerations.ReportConditionType.DateRange:this.cmbDateRange.attr("value",this._entity.value),"DateRange"===this.cmbDateRange.value&&(this.dtFromDate.set("value",this._entity.fromRange),this.dtToDate.set("value",this._entity.toRange));break;case Enumerations.ReportConditionType.User:if(":USERID"===this._entity.tag.toUpperCase())this.chkCurrentUser.set("checked",!0);else{var b=this._entity.value?ReportManagerUtility.getUser(this._entity.tag):null;this.lkpUser.set("selectedObject",b)}break;case Enumerations.ReportConditionType.Query:this.cmbTables.attr("value",this._entity.table);var c=this._entity.operator;switch(this._entity.dataType){case Enumerations.FieldDataTypes.Numeric:c==Enumerations.ReportConditionOperator.IsInTheRange?(this.txtNumericValue1.focusNode.textbox.value=this._entity.fromRange,this.txtNumericValue2.focusNode.textbox.value=this._entity.toRange):this.txtNumericValue1.focusNode.textbox.value=this._entity.value;break;case Enumerations.FieldDataTypes.DateTime:c==Enumerations.ReportConditionOperator.IsInTheRange?(this.dtDateValue1.set("value",this._entity.fromRange),this.dtDateValue2.set("value",this._entity.toRange)):this.dtDateValue1.set("value",this._entity.value);break;case Enumerations.FieldDataTypes.String:this.txtStringValue1.set("value",this._entity.value)}}},_initializeConditionTypeDropdown:function(){var a=CrystalReportsUtility.getConditionTypes(this._reportMetadata),b={identifier:"conditionType",label:"caption",items:a},c=new ItemFileWriteStore({data:b});this.cmbConditionType.setStore(c),this.cmbConditionType.startup()},_createUserLookup:function(){var a={id:"_lkpConditionUser",structure:[{label:nlsResources.txtName,field:"UserInfo.UserName",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"Type ne 5 and Type ne 8 and Type ne 6"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",include:["UserInfo"],sort:[{attribute:"UserInfo.UserName"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:nlsResources.txtSelectUser,dialogButtonText:nlsResources.txtOK};this.lkpUser=new Lookup({id:"lkpConditionUser",readonly:!1,config:a}),dojo.place(this.lkpUser.domNode,this.contentPaneLkpUser.domNode,"only")},_createGroupLookup:function(){var a=dojoString.substitute("(upper(family) eq '${0}' or upper(family) eq '${1}')",[this._reportMetadata.family.toUpperCase(),this._reportMetadata.mainTable.toUpperCase()]),b={id:"_lkpConditionGroup",structure:[{label:nlsResources.txtName,field:"displayName",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return a},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"groups",include:[],select:["displayName","name","family"],sort:[{attribute:"displayName",descending:!1}],service:SDataServiceRegistry.getSDataService("system",!1,!0,!1),contractName:"system"},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:nlsResources.txtSelectGroup,dialogButtonText:nlsResources.txtOK};this.lkpGroup=new Lookup({id:"lkpConditionGroup",readonly:!1,config:b}),dojo.place(this.lkpGroup.domNode,this.contentPaneLkpGroup.domNode,"only")},_getTableMetadata:function(a){var b=null;return this._reportMetadata.tables&&dojoArray.some(this._reportMetadata.tables,function(c,d){if(c.alias===a)return b=c,!0}),b},_getFieldMetadata:function(a,b){var c=this._getTableMetadata(a),d=null;return c&&c.fields&&dojoArray.some(c.fields,function(a,c){if(a.name==b)return d=a,!0}),d},_getFieldDataType:function(){var a=this.cmbTables.value,b=this.cmbFields.value,c=this._getFieldMetadata(a,b);return c&&c.dataType?c.dataType:null},_initializeTablesDropdown:function(){var a=[];this._reportMetadata.tables&&dojoArray.forEach(this._reportMetadata.tables,function(b,c){a.push({alias:b.alias,displayName:b.displayName})});var b={identifier:"alias",label:"displayName",items:a},c=new ItemFileWriteStore({data:b});this.cmbTables.setStore(c),this.cmbTables.startup()},_initializeFieldsDropdown:function(){var a=this.cmbTables.value,b=this._getTableMetadata(a),c=b&&b.fields?b.fields:[],d=[];dojoArray.forEach(c,function(a,b){d.push({name:a.name,displayName:a.displayName})});var e={identifier:"name",label:"displayName",items:d},f=new ItemFileWriteStore({data:e});this.cmbFields.setStore(f),this.cmbFields.startup(),this._entity&&this.cmbFields.attr("value",this._entity.field)},_initializeOperatorsDropdown:function(){var a=this._getFieldDataType(),b=ReportManagerUtility.getOperators(a),c={identifier:"operator",label:"caption",items:b},d=new ItemFileWriteStore({data:c});this.cmbOperators.setStore(d),this.cmbOperators.startup(),this._entity&&this.cmbOperators.attr("value",this._entity.operator)},_save:function(){switch(this._entity||(this._entity={conditionType:this.cmbConditionType.value,tableName:null,fieldName:null,operator:null,value:null,fromValue:null,toValue:null,dataType:null,tag:null}),this._entity.conditionType=this.cmbConditionType.value,this._entity.table=null,this._entity.field=null,this._entity.operator=null,this._entity.value=null,this._entity.fromRange=null,this._entity.toRange=null,this._entity.dataType=null,this._entity.tag=null,this.cmbConditionType.value){case Enumerations.ReportConditionType.Group:var a=this.lkpGroup.get("selectedObject");this._entity.value=a.family+":"+a.name,this._entity.tag=a.$key,this._entity.operator=String(Enumerations.ReportConditionOperator.Is),this._entity.dataType=Enumerations.FieldDataTypes.String;break;case Enumerations.ReportConditionType.DateRange:this._entity.dataType=Enumerations.FieldDataTypes.DateTime,"DateRange"===this.cmbDateRange.value?(this._entity.operator=String(Enumerations.ReportConditionOperator.IsInTheRange),this._entity.value=null,this._entity.fromRange=this.dtFromDate.get("value"),this._entity.toRange=this.dtToDate.get("value")):(this._entity.operator=String(Enumerations.ReportConditionOperator.Is),this._entity.value=this.cmbDateRange.value);break;case Enumerations.ReportConditionType.User:if(this.chkCurrentUser.checked)this._entity.value=nlsResources.chkCurrentUser_Caption,this._entity.tag=":UserID";else{var b=this.lkpUser.get("selectedObject");this._entity.value=b.$descriptor,this._entity.tag=b.$key}this._entity.operator=String(Enumerations.ReportConditionOperator.Is),this._entity.dataType=Enumerations.FieldDataTypes.String;break;case Enumerations.ReportConditionType.Query:var c=this.cmbOperators.value;this._entity.table=this.cmbTables.value,this._entity.field=this.cmbFields.value,this._entity.operator=c;var d=this._getFieldDataType();switch(this._entity.dataType=d,d){case Enumerations.FieldDataTypes.Numeric:var e=dojoNumber.parse(this.txtNumericValue1.focusNode.textbox.value);if(c==Enumerations.ReportConditionOperator.IsInTheRange){var f=dojoNumber.parse(this.txtNumericValue2.focusNode.textbox.value);this._entity.fromRange=parseInt(e,10),this._entity.toRange=parseInt(f,10)}else this._entity.value=parseInt(e,10);break;case Enumerations.FieldDataTypes.DateTime:c==Enumerations.ReportConditionOperator.IsInTheRange?(this._entity.fromRange=this.dtDateValue1.get("value"),this._entity.toRange=this.dtDateValue2.get("value")):this._entity.value=this.dtDateValue1.get("value");break;case Enumerations.FieldDataTypes.String:this._entity.value=this.txtStringValue1.get("value")}}"new"===this._mode?topic.publish("/reportManager/reportWizard/createCondition",this._entity):topic.publish("/reportManager/reportWizard/updateCondition",this._entity),this._closeDialog()},_setQueryControlsVisibility:function(){if(ReportManagerUtility.setDomNodeVisible(this.trStringValue1,!1),ReportManagerUtility.setDomNodeVisible(this.trStringValue2,!1),ReportManagerUtility.setDomNodeVisible(this.trNumericValue1,!1),ReportManagerUtility.setDomNodeVisible(this.trNumericValue2,!1),ReportManagerUtility.setDomNodeVisible(this.trDateValue1,!1),ReportManagerUtility.setDomNodeVisible(this.trDateValue2,!1),this.cmbConditionType.value===Enumerations.ReportConditionType.Query){var a=this._getFieldDataType(),b=this.cmbOperators.value;switch(a){case Enumerations.FieldDataTypes.Numeric:this.lblNumericValue1.innerHTML=this._nlsResources.txtValue_Caption+":",ReportManagerUtility.setDomNodeVisible(this.trNumericValue1,!0),
b==Enumerations.ReportConditionOperator.IsInTheRange&&(this.lblNumericValue1.innerHTML=this._nlsResources.txtNumericValueFrom_Caption+":",ReportManagerUtility.setDomNodeVisible(this.trNumericValue2,!0));break;case Enumerations.FieldDataTypes.DateTime:ReportManagerUtility.setDomNodeVisible(this.trDateValue1,!0),b==Enumerations.ReportConditionOperator.IsInTheRange&&ReportManagerUtility.setDomNodeVisible(this.trDateValue2,!0);break;case Enumerations.FieldDataTypes.String:ReportManagerUtility.setDomNodeVisible(this.trStringValue1,!0);break;default:this._initializeFieldsDropdown(),this._initializeOperatorsDropdown(),ReportManagerUtility.setDomNodeVisible(this.trStringValue1,!0)}}}});return crystalReportConditionEditor})},"Sage/MainView/ReportMgr/Crystal/CrystalReportsFormatter":function(){define(["dojo/_base/declare","dojo/i18n!./nls/CrystalReportsFormatter","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/date/locale","dojo/string"],function(a,b,c,d,e,f){return Sage.namespace("Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter"),dojo.mixin(Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter,{formatConditionType:function(a){return c.getReportConditionTypeCaption(a)},formatOperator:function(a){return c.getReportConditionOperatorCaption(a)},formatEditCondition:function(a,c,d){return"<a href=javascript:dijit.byId('dlgCrystalReportConditions')._editCondition("+c+")>"+b.txtEdit+"</a>"},formatDeleteCondition:function(a){return"<a href=javascript:dijit.byId('dlgCrystalReportConditions')._deleteCondition("+a._id+")>"+b.txtDelete+"</a>"},formatConditionValue:function(a){var g=null,h=null;switch(String(a.conditionType)){case String(c.ReportConditionType.Group):var i=d.getGroup(a.tag);return i?i.$descriptor:"";case String(c.ReportConditionType.DateRange):return a.operator===c.ReportConditionOperator.IsInTheRange?(g=e.format(a.fromRange,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),h=e.format(a.toRange,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),f.substitute(b.txtRangeValue,[g,h])):a.value;case String(c.ReportConditionType.User):return a.value;case String(c.ReportConditionType.Query):var j=a.operator;switch(a.dataType){case c.FieldDataTypes.Numeric:return j==c.ReportConditionOperator.IsInTheRange?f.substitute(b.txtRangeValue,[a.fromRange,a.toRange]):a.value;case c.FieldDataTypes.DateTime:if(j==c.ReportConditionOperator.IsInTheRange)return g=e.format(a.fromRange,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),h=e.format(a.toRange,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),f.substitute(b.txtRangeValue,[g,h]);return e.format(a.value,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name});case c.FieldDataTypes.String:return a.value}}}}),Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter})},"Sage/MainView/ReportMgr/Common/ExportOptionsDialog":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/Reporting/Enumerations","dojo/text!./templates/ExportOptionsDialog.html","dojo/i18n!./nls/ExportOptionsDialog","Sage/UI/Controls/Lookup","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/data/ItemFileWriteStore","Sage/MainView/ReportMgr/Common/_WizardDialogBase","Sage/Utility","Sage/UI/JobSchedulingWidget","dijit/Dialog","dijit/form/Form"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.makeTemplateFromString(d);return a("Sage.MainView.ReportMgr.Common.ExportOptionsDialog",[i],{id:"dlgExportOptions",_nlsResources:e,_helpIconTopic:"RptscheduleWiz",_currentStep:c.CrystalReportWizardStep.ExportOptions,_scheduleOptions:null,_exportOptions:null,widgetTemplate:l,constructor:function(a){this._initializeWizardOptions(a),this._scheduleOptions=a.scheduleOptions,this._exportOptions=a.exportOptions},destroy:function(){this.lkpRunAsUserId.destroyRecursive(),this.cmbOutputFormat.destroyRecursive(),this.jobSchedulingWidget&&this.jobSchedulingWidget.destroyRecursive(),this._dialog.destroyRecursive(),this.inherited(arguments)},show:function(){this.jobSchedulingWidget.initialize({trigger:this._scheduleOptions.trigger}),this.inherited(arguments)},startup:function(){this.inherited(arguments),this._createRunAsLookup(),this._setControlsVisibility(),this._initializeOutputFormatDropdown(),this._initializeTextboxes()},isValid:function(){var a=!0;return this._scheduleOptions.executionType===c.ExecutionType.Scheduled&&(a=this.jobSchedulingWidget.validateSchedule()),a},_initializeTextboxes:function(){var a=this._scheduleOptions.trigger?this._scheduleOptions.trigger.$descriptor:this.reportMetadata.displayName;this.txtScheduleDescription.set("value",a)},_initializeOutputFormatDropdown:function(){var a=g.getOutputFormats(this.reportMetadata.reportType),b={identifier:"outputFormat",label:"caption",items:a},c=new h({data:b});this.cmbOutputFormat.setStore(c),this.cmbOutputFormat.startup(),this._exportOptions.outputFormat&&this.cmbOutputFormat.attr("value",this._exportOptions.outputFormat)},_createRunAsLookup:function(){var a={id:"_lkpRunAsUserId",structure:[{label:e.txtName,field:"UserInfo.UserName",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"Type ne 5 and Type ne 8 and Type ne 6"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",include:["UserInfo"],sort:[{attribute:"UserInfo.UserName"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:e.txtSelectUser,dialogButtonText:e.txtOK};if(this.lkpRunAsUserId=new f({id:"lkpRunAsUserId",readonly:!1,config:a}),dojo.place(this.lkpRunAsUserId.domNode,this.container_lkpRunAsUserId.domNode,"only"),this._exportOptions.runAsUserId){var b=g.getUser(this._exportOptions.runAsUserId);this.lkpRunAsUserId.set("selectedObject",b)}},_getWizardStepResult:function(){return{exportOptions:this._getExportOptions(),scheduleOptions:this._getScheduleOptions()}},_getExportOptions:function(){return this._exportOptions.description=this.txtScheduleDescription.get("value"),this._exportOptions.outputFormat=this.cmbOutputFormat.value,this._exportOptions.runAsUserId=this.lkpRunAsUserId.selectedObject?this.lkpRunAsUserId.selectedObject.$key:null,this._exportOptions},_getScheduleOptions:function(){if(this._scheduleOptions.executionType==c.ExecutionType.OnDemand)this._scheduleOptions.executionType=c.ExecutionType.OnDemand;else{var a=this.jobSchedulingWidget.getJobSchedulingOptions(),b=null,d=null,e=null;a&&(a.startTime&&a.startTime instanceof Date&&(b=j.Convert.toJsonStringFromDate(a.startTime)),a.endTime&&a.endTime instanceof Date&&(d=j.Convert.toJsonStringFromDate(a.endTime)),e=a.cronExpression),this._scheduleOptions.startTime=b,this._scheduleOptions.endTime=d,this._scheduleOptions.cronExpression=e,this._scheduleOptions.scheduleDescription=this.txtScheduleDescription.get("value"),this._scheduleOptions.executionType=c.ExecutionType.Scheduled}return this._scheduleOptions},_setControlsVisibility:function(){var a=Sage.Services.getService("RoleSecurityService");a&&(a.hasAccess("Entities/ReportManager/RunAsUser")||g.setDomNodeVisible(this.trRunAsUserId,!1));var b=this._scheduleOptions.executionType===c.ExecutionType.Scheduled;g.setDomNodeVisible(this.trSchedulingWidget,b)},_getDialogTitle:function(){return this._scheduleOptions.executionType===c.ExecutionType.OnDemand?this._nlsResources.txtDialogTitle+" ["+this._reportMetadata.displayName+"]":this._nlsResources.txtDialogTitleScheduling+" ["+this._reportMetadata.displayName+"]"}})})},"Sage/UI/JobSchedulingWidget":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/Select","dijit/form/Button","Sage/UI/ImageButton","dojo/text!./templates/JobSchedulingWidget.html","dojo/i18n!./nls/JobSchedulingWidget","dojo/_base/declare","dojo/string","Sage/UI/Dialogs","Sage/UI/Controls/DateTimePicker"],function(a,b,c,d,e,f,g,h,i,j,k){return i("Sage.UI.JobSchedulingWidget",[c,a,b],{cronExpression:"",displayStartEndTime:!0,minuteOptions:["1","5","10","15","20","25","30","35","40","45","50","55"],pastHourOptions:["0","5","10","15","20","25","30","35","40","45","50","55"],hourOptions:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],cronFields:{seconds:0,minutes:"*",hours:"*",days:"*",weeks:"*",months:"*",years:"*"},cronExpressionVisible:!0,_initialized:!1,widgetsInTemplate:!0,templateString:g,postMixInProperties:function(){dojo.mixin(this,h)},initialize:function(a){dojo.mixin(this,a),this.trigger?this.cronExpression=this.trigger.cronExpression:this.cronExpressionVisible=!1,this.txtCronExpression.set("value",this.cronExpression),this._parseCronExpression(),this.cboFrequency.set("value",this._getFrequencyType()),this._loadScheduleDetails(),this._initializeControlState(),this.cboFrequency.removeOption("yearly")},_initializeListOptions:function(a,b,c){var d=[];this._clearComboBox(a),dojo.forEach(c,function(a){var c={selected:!1,label:a,value:a};b===a&&(c.selected=!0),d.push(c)}),a.addOption(d)},_parseCronExpression:function(){if(this.cronExpression){var a=this.cronExpression.split(" ");6!==a.length&&7!==a.length||(this.cronFields.seconds=a[0],this.cronFields.minutes=a[1],this.cronFields.hours=a[2],this.cronFields.days=a[3],this.cronFields.weeks=a[4],this.cronFields.months=a[5],this.cronFields.years=6===a.length?a[6]:"*")}},_getFrequencyType:function(){var a="daily";if(!this.cronExpression)return a;var b=[];if("?"===this.cronFields.days){if("MON-FRI"===this.cronFields.months)return this.cronExpressionVisible=!1,"weekday";if(-1!==this.cronFields.months.indexOf("#"))b=["/"],isNaN(this.cronFields.weeks)?this._isValid(this.cronFields.days,b)&&(a="monthly",this.cronExpressionVisible=!1):this.cronExpressionVisible=!0;else if(this._isWeeklyType())return this.cronExpressionVisible=!1,"weekly"}if("?"===this.cronFields.months&&("1/1"===this.cronFields.days||"*"===this.cronFields.days)){if(!isNaN(this.cronFields.hours))return this.cronExpressionVisible=!1,"daily";var c=this.cronFields.hours.split("/");if(c.length>1)return this.cronExpressionVisible=!1,"hourly";if(c=this.cronFields.minutes.split("/"),c.length>1)return this.cronExpressionVisible=!1,"minutes"}return a},_isWeeklyType:function(){var a=[",","-","*","?","/","L","#"];return!!this._isValid(this.cronFields.months,a)},_loadScheduleDetails:function(){this.cronExpression?this._loadCronScheduleDetails():this._loadFromPropScheduleDetails()},_loadFromPropScheduleDetails:function(){this.cronExpressionVisible=!1,this.trigger},_loadCronScheduleDetails:function(){var a;switch(this.cboFrequency.get("value")){case"minutes":a=this.cronFields.minutes.split("/"),this._initializeListOptions(this.cboMinutesHours,a[1],this.minuteOptions);break;case"hourly":a=this.cronFields.hours.split("/"),this._initializeListOptions(this.cboMinutesHours,a[1],this.hourOptions),this.cboMinutesHours.set("value",a[1]),this._initializeListOptions(this.cboMinutesPastHour,this.cronFields.minutes,this.pastHourOptions),this.cboMinutesPastHour.set("value",this.cronFields.minutes);break;case"weekly":this.cboDay.set("value",this._convertDayToStr(this.cronFields.months));break;case"monthly":a=this.cronFields.months.split("#"),this.cboDay.set("value",this._convertDayToStr(a[0])),this.cboMonthDay.set("value",a[1])}},_convertDayToStr:function(a){if(isNaN(a))return a;switch(a){case 1:return"SUN";case 3:return"TUE";case 4:return"WED";case 5:return"THU";case 6:return"FRI";case 7:return"SAT";default:return"MON"}},_convertDayToInt:function(a){switch(a){case"SUN":return 0;case"MON":return 1;case"TUE":return 2;case"WED":return 3;case"THU":return 4;case"FRI":return 5;case"SAT":return 6}},_isValidExpression:function(){var a=[];switch(this.cboFrequency.get("value")){case"minutes":return a=[",","-"],this._isValid(this.cronFields.minutes,a);case"hourly":return a=[",","-"],this._isValid(this.cronFields.hours,a);case"daily":case"weekly":return!0;case"monthly":return a=[",","-","?","/","L"],this._isValid(this.cronFields.months,a);default:return!1}},_isValid:function(a,b){var c=!0;return dojo.every(b,function(b){-1!==a.indexOf(b)&&(c=!1)}),c},_assignDateValues:function(){switch(this.cboFrequency.get("value")){case"daily":case"weekday":case"weekly":case"monthly":case"yearly":var a=new Date,b=[",","-","*"],c=this._getTimePart(this.cronFields.minutes,b);this._isNumber(c)&&a.setMinutes(c);var d=this._getTimePart(this.cronFields.hours,b);this._isNumber(d)&&a.setHours(this.cronFields.hours),this.trigger&&this._isNumber(c)&&this._isNumber(d)&&this.dtRunAtTime.set("value",a)}this.trigger&&(this.trigger.startTimeUtc&&this.dtRunFromDate.set("value",new Date(parseInt(this.trigger.startTimeUtc.substr(6),10))),this.trigger.endTimeUtc&&this.dtRunToDate.set("value",new Date(parseInt(this.trigger.endTimeUtc.substr(6),10))))},_getTimePart:function(a,b){var c="invalid";if(this._isNumber(a))c=parseInt(a,10);else if(this._isValid(a,b)){var d=a.split("/");d.length>1&&(c=d[1])}return c},_isNumber:function(a){return!!new RegExp("^[0-9]+$").test(a)},_initializeControlState:function(){var a=this.cboFrequency.get("value").valueOf();this._setVisibility(this.divMinutesHours,"minutes"===a||"hourly"===a),this._setVisibility(this.lblOnText,"weekly"===a),this._setVisibility(this.lblOnTheText,"monthly"===a),this._setVisibility(this.divMonthDay,"monthly"===a),this._setVisibility(this.divDay,"weekly"===a||"monthly"===a),this._setVisibility(this.lblAtText,"minutes"!==a),this._setVisibility(this.divRunAtTime,"minutes"!==a&&"hourly"!==a),this._setVisibility(this.lblMinutesPastHour,"hourly"===a),this._setVisibility(this.divMinutesPastHour,"hourly"===a),this._setVisibility(this.rowCronExpression,this.cronExpressionVisible)},_onFrequencyChange:function(){var a=this.cboFrequency.get("value").valueOf();"minutes"===a?this.initialized&&this._initializeListOptions(this.cboMinutesHours,"5",this.minuteOptions):"hourly"===a&&(this.initialized&&this._initializeListOptions(this.cboMinutesHours,"1",this.hourOptions),0===this.cboMinutesPastHour.options.length&&this._initializeListOptions(this.cboMinutesPastHour,"0",this.pastHourOptions)),this.initialized||(this.initialized=!0,this._assignDateValues()),this._initializeControlState()},_clearComboBox:function(a){for(var b=a.options.length,c=0;c<b;c++)a.removeOption(0)},_setVisibility:function(a,b){a&&b?dojo.removeClass(a,"display-none"):a&&dojo.addClass(a,"display-none")},_buildCronExpression:function(){return j.substitute("${0} ${1} ${2} ${3} ${4} ${5} ${6}",[this._getFormatedSeconds(),this._getFormatedMinutes(),this._getFormatedHours(),this._getFormatedDaysOfMonth(),this._getFormatedMonths(),this._getFormatedDaysOfWeek(),this._getFormatedYears()])},_getFormatedSeconds:function(){return 0},_getFormatedMinutes:function(){switch(this.cboFrequency.get("value")){case"minutes":return j.substitute("0/${0}",[this.cboMinutesHours.get("value")]);case"hourly":return this.cboMinutesPastHour.get("value");case"daily":case"weekly":case"monthly":case"yearly":return this._getTimePortion(!0);default:return"*"}},_getFormatedHours:function(){switch(this.cboFrequency.get("value")){case"minutes":return"*";case"hourly":return j.substitute("0/${0}",[this.cboMinutesHours.get("value")]);default:return this._getTimePortion(!1)}},_getTimePortion:function(a){if(a){return this.dtRunAtTime.getTimeValue().getMinutes()}return this.dtRunAtTime.getTimeValue().getHours()},_getFormatedDaysOfMonth:function(){switch(this.cboFrequency.get("value")){case"minutes":case"hourly":case"daily":return"*";case"weekday":case"weekly":case"monthly":case"yearly":return"?";default:return"*"}},_getFormatedMonths:function(){return"*"},_getFormatedDaysOfWeek:function(){switch(this.cboFrequency.get("value")){case"minutes":case"daily":case"hourly":return"?";case"weekday":return"MON-FRI";case"weekly":return this.cboDay.get("value");case"monthly":case"yearly":return j.substitute("${0}#${1}",[this.cboDay.get("value"),this.cboMonthDay.get("value")]);default:return"*"}},_getFormatedYears:function(){return"*"},_isSameDate:function(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},_getDaysDateDiff:function(a,b){var c=Math.abs(a.getTime()-b.getTime());return Math.round(c/864e5)},getJobSchedulingOptions:function(){return{startTime:""===this.dtRunFromDate.focusNode.value?null:this.dtRunFromDate.getValue(),endTime:""===this.dtRunToDate.focusNode.value?null:this.dtRunToDate.getValue(),cronExpression:this._buildCronExpression()}},validateSchedule:function(a,b){var c=""===this.dtRunFromDate.focusNode.value?null:this.dtRunFromDate.getValue(),d=""===this.dtRunToDate.focusNode.value?null:this.dtRunToDate.getValue(),e=null;if(a&&!c||b&&!c||b&&!d)return c?k.showError(this.txtInvalidEndDate,this.txtInvalidScheduleTitle):k.showError(this.txtInvalidStartDate,this.txtInvalidScheduleTitle),!1;if(!c&&!d)return!0;if(c&&d&&c>=d||!c&&d)return k.showError(this.txtInvalidDatesMessage,this.txtInvalidScheduleTitle),!1;if(!d)return!0;switch(c=new Date(c),d=new Date(d),this.cboFrequency.get("value")){case"minutes":return!(c.setMinutes(c.getMinutes()+parseInt(this.cboMinutesHours.get("value"),10))>=d)||(k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1);case"hourly":return!(c.setHours(c.getHours()+parseInt(this.cboMinutesHours.get("value"),10))>=d)||(k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1);case"daily":case"weekday":return!this._isSameDate(c,d)||(k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1);case"weekly":if(this._isSameDate(c,d))return k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1;if(d.getDate()-c.getDate()<7){e=this._convertDayToInt(this.cboDay.get("value"));var f=c;if(f.setDate(f.getDate()+(f.getDay()+e)),f>d)return k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1}return!0;case"monthly":if(this._isSameDate(c,d))return k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1;if(this._getDaysDateDiff(d,c)<31){var g=parseInt(this.cboMonthDay.get("value"),10);e=this._convertDayToInt(this.cboDay.get("value"));var h=this._moveToNthOccurrence(c,g,e,"",""),i=this._moveToNthOccurrence(d,g,e,"","");if(h<=c&&(i<=h||i>=d))return k.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle),!1}return!0}return!1},_moveToNthOccurrence:function(a,b,c,d,e){var f=new Date(a);for(f.setDate(1),""!==d&&void 0!==d?f.setMonth(d):d=f.getMonth(),""!==e&&void 0!==e?f.setFullYear(e):e=f.getFullYear();f.getDay()!=c;)f.setDate(f.getDate()+1);switch(b){case 2:f.setDate(f.getDate()+7);break;case 3:f.setDate(f.getDate()+14);break;case 4:f.setDate(f.getDate()+21);break;case 5:f.setDate(f.getDate()+28),f.getMonth()!==d&&(f=null)}return f},destroyWidget:function(){this.destroyRecursive()}})})},"Sage/Services/CultureService":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare","icrm-js-services","dojo/Deferred","Sage/Services/LocalStorageService","Sage/LanguageList"],function(a,b,c,d,e,f){var g={};c&&c.CultureService&&(g=c.CultureService);var h=b("Sage.Services.CultureService",[g],{_request:null,constructor:function(){this._request=new Sage.SData.Client.SDataResourceCollectionRequest(a.getSDataService("system",!1,!0,!1)),this._request.setResourceKind("$service/getLanguageLists"),this.cache=Sage.Services.getService("LocalStorage")},requestAll:function(){var a=new d;return this.getAllCodes(this._request,{onSuccess:function(b){a.resolve(b)}}),a},requestRegion:function(){var a=new d;return this.getRegionCodes(this._request,{onSuccess:function(b){a.resolve(b)}}),a},requestNeutral:function(){var a=new d;return this.getNeutralCodes(this._request,{onSuccess:function(b){a.resolve(b)}}),a},requestActive:function(){var a=new d;return this.getActiveCodes(this._request,{onSuccess:function(b){a.resolve(b)}}),a}});return Sage.Services.hasService("Culture")||Sage.Services.addService("Culture",new Sage.Services.CultureService),h})},"Sage/MainView/main":function(){define(["Sage/MainView/ActivityManager","Sage/MainView/SecurityManager","Sage/MainView/ActivityMgr/ActivityCalendar","Sage/MainView/BindingsManager","Sage/MainView/Contact/ContactSearchForDuplicates","Sage/MainView/Contact/ContactUserAssociationEditor","Sage/MainView/IntegrationContract/MatchingOptionsConfig","Sage/MainView/IntegrationContract/AdvancedSearchOptions","Sage/MainView/JobManager","Sage/MainView/ReportManager","Sage/MainView/EntityManager","Sage/MainView/Options/OptionsDialog","Sage/MainView/FormManager","Sage/MainView/GroupManager","Sage/MainView/IntegrationContract/SyncResultsHistory","Sage/MainView/_BaseListPanelConfig","Sage/MainView/Lead/ImportLeadsWizard","Sage/MainView/ExchangeRate/ExchangeRateDialog","Sage/MainView/IntegrationContract/PromoteWidget","Sage/MainView/IntegrationContract/PricingAvailabilityWidget","Sage/MainView/CountryCodeMapping/CountryAliasConversion","Sage/MainView/CountryCodeMapping/CountryAliasConversionUtility","Sage/MainView/CountryCodeMapping/_CountryAliasConversionDialogBase"],function(){})},"Sage/MainView/ActivityManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/ListPanel","Sage/Utility","Sage/Utility/Activity","Sage/MainView/ActivityMgr/ActivityGroupContextService","Sage/Services/ActivityService","Sage/MainView/ActivityMgr/FilterConfigurationProvider","dojo/i18n!./nls/ActivityManager","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","require","Sage/Extensions/Activity/ActivityListCustomTabs/CustomTabsConfig","Sage/Extensions/Activity/ListPanelOverrides/ListPanelOverridesConfig","Sage/Extensions/ActivityRequirements"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return i("Sage.MainView.ActivityManager",a,{_nlsResources:!1,_currentTabId:!1,_currentTabDescription:!1,_currentUserId:!1,_currentKeyField:"$key",_groupContextService:!1,_tabNameCache:{},_mainViewName:"ActivityManager",store:!1,custTabs:{},custTabConfigs:null,configTypes:null,listPanelOverrides:{},listPanelOverrideConfigs:null,_custTabConfigType:{},constructor:function(a){this._nlsResources=h,this._currentUserId="x";var b=Sage.Services.getService("ClientGroupContext");b&&"Sage.MainView.ActivityMgr.ActivityGroupContextService"===b.declaredClass||(Sage.Services.removeService("ClientGroupContext"),b=new e,Sage.Services.addService("ClientGroupContext",b));var c=b.getContext();this._currentTabId=c.CurrentGroupID,this._currentTabDescription=c.CurrentName;var d=Sage.Services.getService("ClientContextService");if(d&&d.containsKey("userID")&&(this._currentUserId=d.getValue("userID")),this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:this._nlsResources.titleFmtString||"${0}"},dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged"),j.mixin(this.custTabs,m),j.mixin(this.listPanelOverrides,n),this.configTypes=b.groupConfigTypes,this.listPanelOverrides&&this.listPanelOverrides.overrideConfigs){this.listPanelOverrideConfigs=this.listPanelOverrides.overrideConfigs;for(var f=0;f<this.listPanelOverrideConfigs.length;f++)this._overrideTab(this.listPanelOverrideConfigs[f].listId,this.listPanelOverrideConfigs[f].newConfig,b.groupConfigTypes)}if(this.custTabs&&this.custTabs.configTypes){this.custTabConfigs=this.custTabs.configTypes;for(var g=0;g<this.custTabConfigs.length;g++)this._addCustomTab(b.groupConfigTypes,this.custTabConfigs[g])}},_setListPanelConfig:function(){var a=Sage.Services.getService("ClientGroupContext");a&&(this.listPanelConfiguration=a.getCurrentListConfig(),this.store=this.listPanelConfiguration.list.store,this.service=this.listPanelConfiguration.list.store.service)},_getListPanelConfig:function(){return this._setListPanelConfig(),this.listPanelConfiguration},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._getListPanelConfig(),this)},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)},onConfigurationChange:function(a){},onTitlePaneConfigurationChange:function(){},_setUIForNewTab:function(a,b){this._currentTabId=a,this._currentTabDescription=b},_onCurrentGroupChanged:function(a){var b=a.current;if(!b){b=Sage.Services.getService("ClientGroupContext").getContext()}dijit.byId("GroupTabs").selectedChildWidget.id!==b.CurrentGroupID&&dijit.byId("GroupTabs").selectChild(b.CurrentGroupID)},_onTabSelected:function(a){var b=Sage.Services.getService("ClientGroupContext"),c=a.id||a,d=b.getKeyField(c);if(b){if(b.getContext().CurrentGroupID===c)return;this._setUIForNewTab(c,a.title),b.setCurrentGroup(c,a.title,d)}},_getTabsConfig:function(){return{store:!1,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:!1,showTabContextMenus:!1}},_getStaticTabs:function(){return Sage.Services.getService("ClientGroupContext").getStaticTabs()},_getMenuConfig:function(){return!1},_overrideTab:function(a,b,c){this._dynamicRequire(b,function(b){for(var d=0;d<c.length;d++)c[d].key.toUpperCase()===a.toUpperCase()&&(c[d].configProviderType=b)})},_addCustomTab:function(a,b){this._dynamicRequire(b.configProviderType,function(c){b.configProviderType=c,a.push(b)})},_dynamicRequire:function(a,b){var c=new k;l([a],function(a){c.resolve(a)}),c.then(function(a){b(a)},function(a){})}})})},"Sage/UI/SDataMainViewConfigurationProvider":function(){define(["Sage/UI/ListPanel","Sage/_ConfigurationProvider","Sage/UI/TitleContentPane","Sage/UI/DetailPanel","Sage/UI/_DetailPanelConfigurationProvider","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.UI.SDataMainViewConfigurationProvider",[b,Sage.UI._TitlePaneConfigProvider,e],{entityType:"",service:null,listPanelConfiguration:!1,constructor:function(a){this.listPanelConfiguration=this.listPanelConfiguration||{list:{},detail:!1,summary:!1},this.titlePaneConfiguration=this.titlePaneConfiguration||{tabs:!1,menu:!1,titleFmtString:"${0}"};var b=Sage.Services.getService("ClientEntityContext");b&&b.setContext({EntityType:this.entityType});var c=Sage.Services.getService("ClientGroupContext");c&&dojo.connect(c,"onCurrentGroupChanged",this,"handleProfileChanged"),Sage.Services.hasService("MainViewConfigurationProvider")&&Sage.Services.removeService("MainViewConfigurationProvider")},handleProfileChanged:function(a){this.onConfigurationChange(a)},requestConfiguration:function(a){a.success&&this.listPanelConfiguration&&a.success.call(a.scope||this,this.listPanelConfiguration,this)}})})},"Sage/UI/ListPanel":function(){define(["dojo/aspect","dojo/i18n","dojo/dom-class","dijit/layout/BorderContainer","dijit/layout/StackContainer","dijit/layout/ContentPane","dijit/Toolbar","dijit/ToolbarSeparator","Sage/_Templated","Sage/UI/Filters/FilterManager","Sage/UI/ToolBarLabel","dijit/Menu","Sage/Utility","dojox/storage/LocalStorageProvider","Sage/UI/_DetailPane","dijit/_Widget","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/ListPanel","dojo/_base/sniff","dojo/dom-geometry","dijit/registry","dojo/_base/connect","dojo/ready","dojo/dom-construct","Sage/UI/Controls/Grid","dojo/query"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){return s("Sage.UI.ListPanel",[d,p,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["{%! $.menuTemplate %}","{%! $.listTemplate %}","{%! $.detailTemplate %}"]),listTemplate:new Simplate(['<div data-dojo-type="dijit.layout.StackContainer" region="center" splitter="true" data-dojo-attach-point="_gridContainer">','<div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="_noConfigurationPane"></div>','<div id="listGridPane" data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="_listGridPane">','<div dojoattachpoint="_listGrid_Grid" class="HundredPercentHeight"></div>','<div data-dojo-type="dijit.Menu" id="_listContextmenu" dojotAttachPoint="_listContextmenu" style="display:none" ></div>',"</div>",'<div id="summaryGridPane" data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="_summaryGridPane">','<div dojoattachpoint="_summaryGrid_Grid" class="HundredPercentHeight"~></div>',"</div>","</div>"]),menuTemplate:new Simplate(['<div data-dojo-type="dijit.Toolbar" region="top" splitter="false" id="{%= $.id %}_toolbar" style="{%= $.toolbarStyle %}" data-dojo-attach-point="_tbar" class="list-panel-tbar right-tools">','<div data-dojo-type="Sage.UI.ToolBarLabel" label="" data-dojo-attach-point="_tbarLabel" class="list-panel-left-tools"></div>','<div data-dojo-type="Sage.UI.ToolBarLabel" label="" data-dojo-attach-point="_tbarOverflowLabel" class="list-panel-left-tools" style="display:none;"></div>','<div data-dojo-type="Sage.UI.ToolBarLabel" label="{%= $.unsavedDataText %}" data-dojo-attach-point="_unsavedDataLabel" class="display-none"></div>','<div data-dojo-type="Sage.UI.ToolBarLabel" label="" data-dojo-attach-point="_filterSummary" class="filter-summary-view"></div>','<div data-dojo-type="dijit.form.Button" showLabel="true" id="{%= $.id %}_detailBtn" data-dojo-attach-point="_detailButton" dojoAttachEvent="onClick:toggleDetail" class="list-panel-tool-detail">{%= $.detailText %}</div>','<span data-dojo-type="dijit.ToolbarSeparator" data-dojo-attach-point="_buttonSection" class="list-panel-tool-section"></span>','<div data-dojo-type="dijit.form.Button" showLabel="true" id="{%= $.id %}_listBtn" data-dojo-attach-point="_listButton" dojoAttachEvent="onClick:showList" class="list-panel-tool-list">{%= $.listText %}</div>','<div data-dojo-type="dijit.form.Button" showLabel="true" id="{%= $.id %}_summaryBtn" data-dojo-attach-point="_summaryButton" dojoAttachEvent="onClick:showSummary" class="list-panel-tool-summary">{%= $.summaryText %}</div>','<div data-dojo-type="Sage.UI.ImageButton" iconClass="Global_Images icon16x16 icon_refresh"  tooltip="{%: $.refreshText %}" id="refreshBtn" data-dojo-attach-point="_refreshButton" dojoAttachEvent="onClick:refreshView" class="list-panel-tool-help"></div>','<div data-dojo-type="Sage.UI.ImageButton" iconClass="Global_Images icon16x16 icon_Help_16x16" tooltip="{%: $.helpText %}" id="helpBtn" data-dojo-attach-point="_helpButton" dojoAttachEvent="onClick:showHelp" class="list-panel-tool-help"></div>',"</div>"]),detailTemplate:new Simplate(['<div data-dojo-type="{%= $.detailType %}" region="{%= $.detailRegion %}" splitter="true" style="{%= $.detailStyle %}" data-dojo-attach-point="_detailPane">',"</div>"]),_filterGroup:null,_filterSubscriptions:null,_filterManager:null,_toolbarApplied:!1,_configurationProvider:null,_configurationConnects:null,_contextConnects:null,_dataChangeWatchers:[],_gridContainer:null,_noConfigurationPane:null,_listGrid:null,_indirectSelection:"",_summaryGrid:null,_detailPane:null,_tbar:null,_tbarCustom:!1,_tbarLabel:null,_buttonSection:null,_detailButton:null,_listButton:null,_summaryButton:null,_helpButton:null,_filterSummary:null,_unsavedDataLabel:null,_forcedFilterPublish:!1,_selectionInfoObject:null,_contextMenu:null,_listMode:"list",helpTopicName:"listview",gutters:!1,toolbarStyle:"",initialGrid:"list",filterGroup:"default",detailVisible:!1,detailOnSummary:!1,detailRegion:"bottom",detailStyle:"height: 256px;",detailType:"dijit.layout.ContentPane",autoConfigure:!0,hasCheckBox:!1,FILTER_UPDATE_DELAY:0,STORE_KEY_SORT_INFO:"_GRID_SORT_PROPS_",STORE_KEY_STORE_QUERY:"_STORE_QUERY_",STORE_KEY_VIEWSTATE:"LISTPANEL_VIEWSTATE",RECORD_WARNING_SIZE:3e4,constructor:function(){this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments),r.mixin(this,t)},postCreate:function(){this.inherited(arguments),this._listGrid&&this._listGrid.setSelectionMode("extended"),this._gridContainer.selectChild(this._noConfigurationPane),this._detailPane.isInstanceOf(o)&&this._detailPane.set("owner",this),this._setDetailPaneVisibility(!1,!1),this._tbarOverflowLabel&&this._tbarOverflowLabel.set("label",t.overflowText),this._updateToolbarItemVisibility(),this._getGroupListUserOptions(),
this.autoConfigure&&this.requestConfiguration()},startup:function(){this.inherited(arguments)},uninitialize:function(){this.inherited(arguments),this._filterManager&&this._filterManager.destroy(),this._configurationProvider&&this._configurationProvider.destroy()},getAppliedFilterCount:function(){return this._filterManager&&this._filterManager.getAppliedFilterCount()},_getGroupListUserOptions:function(){var a=Sage.Services.getService("UserOptions");a&&a.get&&a.get("GroupCheckboxEnabled","GroupGridView",r.hitch(this,function(a){var b=a&&a.value;this._indirectSelection="True"===b||"T"===b}),null,this,!1)},_getSortingInfo:function(){var a=this._getGridSortKey(),b=this._getFromLocalStorage(a),c=!1,d=this._configuration;return b?!0===b.descending&&(c=!0):d&&d._sort&&d._sort.length&&d._sort.length>0&&(b=d._sort[0],!0===b.descending&&(c=!0)),b&&(b.descending=c),b},_getSortInfo:function(){var a=this._getGridSortKey(),b=this._getFromLocalStorage(a),c=!1,d=this._configuration;return b?!0===b.descending&&(c=!0):d&&d._sort&&d._sort.length&&d._sort.length>0&&(b=d._sort[0],!0===b.descending&&(c=!0)),b&&(this._selectionInfoObject.sortDirection=c?"descending":"ascending",this._selectionInfoObject.sortField=b.attribute,b.descending=c),b},_setSortInfo:function(){var a=(this._configuration,this._getSortInfo());this._listGrid._grid.store&&a&&this._listGrid.setSort(a.attribute,a.descending)},_queryStore:function(a,b){var c=this._configuration,d=this._getSortInfo();d&&(r.isArray(d)||(d=[d]),b.sort=d),this._listGrid.setStore(c.list.store,a,b)},_CheckForCustomReferenceInSort:function(a){for(var b=this._listGrid.columns,c=!1,d=0;d<b.length;d++){switch(typeof b[d].customSort){case"object":var e=null;e=dojo.isArray(b[d].customSort)?b[d].customSort[0]:b[d].customSort,c=e.attribute&&a===e.attribute;break;case"string":c=a===b[d].customSort}if(c)return b[d].field}return a},_setSummarySortInfo:function(a){var b=this._getGridSortKey(),c=this._getFromLocalStorage(b);c&&(a.sort=[c])},_setColumnSizes:function(a){},_updateStructureFromLocalStore:function(){},_isFieldHidden:function(a){},_updateColumnVisibility:function(){},_handleConfigurationChange:function(){this.clearSelection(),this._detailPane&&this._detailPane.clear(),this.requestConfiguration()},_setConfigurationProviderAttr:function(a){this._configurationConnects&&q.forEach(this._configurationConnects,function(a){this.disconnect(a)},this),this._configurationProvider&&this._configurationProvider!==a&&this._configurationProvider.destroy(),this._configurationProvider=a,this._configurationConnects=[],this._configurationProvider&&(this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange)),this._configurationProvider.set("owner",this),this._created&&this.autoConfigure&&this.requestConfiguration())},_getConfigurationProviderAttr:function(){return this._configurationProvider},_setFilterGroupAttr:function(a){this._filterSubscriptions&&q.forEach(this._filterSubscriptions,function(a){this.unsubscribe(a)},this),this._filterGroup=a,this.set("filterManager",new j({filterGroup:this._filterGroup})),this._filterSubscriptions=[],this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onFilterChange));m.debounce(r.hitch(this,this._onFilterRefresh),this.FILTER_UPDATE_DELAY);this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),this._onFilterRefresh)),this._ensureApplyFilterWasPublished()},getTotalSelectionCount:function(){return this._selectionInfoObject.selectionCount},_ensureApplyFilterWasPublished:function(a){if(!this._forcedFilterPublish){var b,c;b=Sage.Services.getService("ClientGroupContext"),c=b&&b.getContext(),c&&c.AppliedFilterInfo&&b.publishFiltersApplied(c.AppliedFilterInfo),this._filterManager&&a&&b.applyFilters&&b.applyFilters(this._filterManager),this._forcedFilterPublish=!0}},_getFilterGroupAttr:function(){return this._filterGroup},_setFilterManagerAttr:function(a){this._filterManager&&this._filterManager!==a&&this._filterManager.destroy(),this._filterManager=a,this._filterManager&&this._filterManager.set("owner",this)},_getFilterManagerAttr:function(){return this._filterManager},_onFilterChange:function(){},_onFilterRefresh:function(a,b,c){this.clearSelection(),this._detailPane&&this._detailPane.clear();var d=c.createQuery(),e=this._getStoreQueryKey();"summary"===this._listMode&&this._hasConfigurationForSummary()?(this._summaryGrid.queryOptions=this._summaryGrid.queryOptions||{},this._summaryGrid.setFilter(d)):(this._listGrid.queryOptions=this._listGrid.queryOptions||{},this._listGrid.queryOptions.httpMethodOverride=!!d,this._listGrid.setFilter(d)),this._saveToLocalStorage(e,{store:this._dojoxStore,query:d})},_setConfigurationAttr:function(a){this._applyConfiguration(a)},_getListAttr:function(){return this._listGrid},_getSummaryAttr:function(){return this._summaryGrid},_getDetailAttr:function(){return this._detailPane},_applyConfigurationFailed:function(a){dojo.publish("/listView/applyConfiguration",this)},_applyConfiguration:function(a){this._forcedFilterPublish=!1,dojo.publish("/listView/applyConfiguration",this);var b=this._getViewStateKey(),c=this._getFromLocalStorage(b,this._getViewNS());c&&(this.initialGrid=c),this._configuration=a,this._gridContainer.selectChild(this._noConfigurationPane),this._listGrid||(this._listGrid=new A({columnHiding:!0,columnResizing:!0,columnReordering:!0,rowSelection:!0,indirectSelection:this._indirectSelection,keyboardNavigation:!0,id:"listGrid",minRowsPerPage:100,farOffRemoval:1e3,queryRowsOverlap:0,forceAutoId:!0,placeHolder:this._listGrid_Grid,pagingMethod:"throttleDelayed",queryOptions:this._configuration.list.queryOptions,sort:this._configuration.list.sort,onContextActivate:r.hitch(this._configurationProvider,this._configuration.list.onSelectedRegionContextMenu),onRowDblClick:r.hitch(this,this._onRowDblClick),onSelection:r.hitch(this,this._addToSelectionInfo),onDeselection:r.hitch(this,this._removeFromSelectionInfo),onGridSort:r.hitch(this,this._onSort),onColumnResize:r.hitch(this,this._onColumnResize),onLoadComplete:r.hitch(this,this._onGridLoadComplete)})),this._summaryGrid||(this._summaryGrid=new A({columnHiding:!1,columnResizing:!1,columnReordering:!1,rowSelection:!0,indirectSelection:!1,keyboardNavigation:!1,id:"summaryGrid",minRowsPerPage:50,queryRowsOverlap:1,placeHolder:this._summaryGrid_Grid,pagingMethod:"throttleDelayed",onRowDblClick:r.hitch(this,this._onRowDblClick),onSelection:r.hitch(this,this._addToSelectionInfo),onDeselection:r.hitch(this,this._removeFromSelectionInfo),onGridSort:r.hitch(this,this._onSort),onColumnResize:r.hitch(this,this._onColumnResize),onLoadComplete:r.hitch(this,this._onGridLoadComplete)})),this.selectionInfoObject||(this._selectionInfoObject={hasCompositeKey:!1,key:"list",keyField:"",mode:"selection",ranges:[],recordCount:0,selectedIds:[],selectionCount:0,selections:[],sortDirection:"",sortField:""}),"list"===this.initialGrid&&this._hasConfigurationForList()&&this.showList(),this._hasConfigurationForSummary()&&(this._configuration.summary.active=!1),"summary"===this.initialGrid&&this._hasConfigurationForSummary()&&this._gridContainer.selectedChildWidget===this._noConfigurationPane&&this.showSummary(),this._applyToolBar(),this._configuration&&this._configuration.list&&this._configuration.list.selectionMode&&"single"===this._configuration.list.selectionMode?this._listGrid.setSelectionMode("single"):this._configuration&&this._configuration.list&&this._configuration.list.selectionMode&&"none"===this._configuration.list.selectionMode?this._listGrid.setSelectionMode("none"):this._listGrid.setSelectionMode("extended");var d=this._configuration.list.selectedRegionContextMenuItems||[];this._contextMenu=new l({targetNodeIds:[this._listGrid.domNode]});for(var e=0;e<d.length;e++)this._contextMenu.addChild(d[e]);var f=Sage.Services.getService("ClientGroupContext");this._selectionInfoObject.keyField=f?f.getContext().CurrentTableKeyField||"":"",this._configuration.hasCompositeKey?this._selectionInfoObject.hasCompositeKey=this._configuration.hasCompositeKey:this._selectionInfoObject.hasCompositeKey=!1},_applyToolBar:function(){var a,b,c;if(this._tbarCustom){for(a=this._tbar.getChildren(),b=0;b<a.length;b++)a[b].custom&&this._tbar.removeChild(a[b]);this._tbarCustom=!1}if(!this._toolbarApplied||this._configuration.updateToolBar){if(this._configuration&&this._configuration.toolBar)for(c=this._configuration.toolBar.items||[],c.length>0&&(this._tbarCustom=!0),b=0;b<c.length;b++)c[b].icon||c[b].imageClass?this._tbar.addChild(new Sage.UI.ImageButton(c[b]),b):this._tbar.addChild(new dijit.form.Button(c[b]),b);this._toolbarApplied=!0}},_setDetailPaneVisibility:function(a,b){if(a){this._hasConfigurationForDetail()&&!this._isConfigurationActiveForDetail()&&(this._detailPane.isInstanceOf(o)&&this._detailPane.set("configuration",this._configuration.detail),this._configuration.detail.active=!0),this._detailButton.set("label",this.hideDetailText),this.addChild(this._detailPane);var c=this._listGrid.getSelectedRowData();c.length>0?this._detailPane._onSelected(0,c[c.length-1],this._listGrid):this._detailPane.clear(),b&&this._hasConfigurationForDetail()&&this._configuration.detailStateKey&&sessionStorage.setItem(this._configuration.detailStateKey,"true")}else this._detailButton.set("label",this.detailText),this.removeChild(this._detailPane),b&&this._hasConfigurationForDetail()&&this._configuration.detailStateKey&&sessionStorage.setItem(this._configuration.detailStateKey,"false")},_updateToolbarItemVisibility:function(){c.toggle(this.domNode,"list-panel-has-summary",this._canShowSummaryLink()),c.toggle(this.domNode,"list-panel-has-detail",this._canShowDetailPane())},_canShowSummaryLink:function(){return this._hasConfigurationForSummary()||this._configurationProvider&&this._configurationProvider.summaryOptions},_canShowDetailPane:function(){return this._hasConfigurationForDetail()&&(this._gridContainer.selectedChildWidget!==this._summaryGrid||this.detailOnSummary)},_shouldShowDetailPane:function(){return this._canShowDetailPane()&&this.detailVisible},_hasConfigurationForList:function(){return this._configuration&&this._configuration.list},_hasConfigurationForSummary:function(){return this._configuration&&this._configuration.summary},_hasConfigurationForDetail:function(){return this._configuration&&this._configuration.detail},_isConfigurationActiveForList:function(){return this._hasConfigurationForList()&&this._configuration.list.active},_isConfigurationActiveForSummary:function(){return this._hasConfigurationForSummary()&&this._configuration.summary.active},_isConfigurationActiveForDetail:function(){return this._hasConfigurationForDetail()&&this._configuration.detail.active},_onColumnResize:function(a){},_onSort:function(a){var b=this._listGrid,c=this._getGridSortKey(),d=b._grid.cell(a),e=this._getSortInfo(),f=null,g=null;b.clearSelection(),null!==d&&void 0!==d.column&&void 0!==d.column.customSort&&(a.preventDefault(),g=d.column,f=r.mixin(g.customSort,{descending:!1}),e&&e.attribute===f.attribute&&(!0===e.descending?f.descending=!1:f.descending=!0),b._grid.set("sort",f.attribute,f.descending),b._grid.updateSortArrow([{attribute:g.field,descending:f.descending}],!1)),null===f&&(f=a.sort[0]),this._saveToLocalStorage(c,f)},_onRowDblClick:function(a){this._configuration.list.onNavigateToDefaultItem&&this._configuration.list.onNavigateToDefaultItem(a.data)},_saveToLocalStorage:function(a,b,c){var d;a=this._alterKeyForLookupResults(a);try{d=new n,d.initialize(),c||(c=this._getGroupNS()),c=this._makeValidNamespace(c),d.put(a,b,function(a,b,c){d.FAILED},c)}catch(a){}},_getFromLocalStorage:function(a,b){var c,d;a=this._alterKeyForLookupResults(a);try{c=new n,c.initialize(),b||(b=this._getGroupNS()),b=this._makeValidNamespace(b),d=c.get(a,b)}catch(a){}return d},_alterKeyForLookupResults:function(a){if(/LOOKUPRESULTS/.test(a)){var b=this._getMainViewName();a=a.replace("LOOKUPRESULTS","LOOKUPRESULTS"+(-1!=b?b:""))}return a},_makeValidNamespace:function(a){return a.replace(/[^0-9^A-Z^a-z^\-]/g,"-")},_getGroupNS:function(){return Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getGroupID()},_getViewNS:function(){return Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getMainViewName()},_getGroupID:function(){var a=Sage.Services.getService("ClientGroupContext"),b=-1,c=null;return a&&(c=a.getContext())&&(b=c.CurrentGroupID),b},_getMainViewName:function(){if(this._configurationProvider._mainViewName)return this._configurationProvider._mainViewName;var a=Sage.Services.getService("ClientGroupContext"),b=-1,c=null;return a&&(c=a.getContext())&&(b=c.CurrentEntity),b},_getGridSortKey:function(){return this._keyGen(this.STORE_KEY_SORT_INFO)},_getViewStateKey:function(){return this.STORE_KEY_VIEWSTATE},_getStoreQueryKey:function(){return this.STORE_KEY_STORE_QUERY+this._getGroupID()},_keyGen:function(a){return this._listGrid.id+a+this._configuration.list.id},_markDirty:function(a){this._unsavedDataLabel.set("style","display:inline")},_markClean:function(){this._unsavedDataLabel.set("style","display:none")},getSelectionInfo:function(a){return this._selectionInfoObject},requestConfiguration:function(){y(r.hitch(this,function(){this._configurationProvider&&this._configurationProvider.requestConfiguration({success:r.hitch(this,this._applyConfiguration),failure:r.hitch(this,this._applyConfigurationFailed)})}))},clearSelection:function(){this._listGrid&&this._listGrid.clearSelection()},refreshView:function(){this._configuration.rebuildOnRefresh&&this.requestConfiguration(),this.refreshList(),dojo.publish("/listView/refresh",this)},refreshList:function(a){if("list"!==this._listMode)return void this.refreshSummary();a?this._configuration._listId===a&&this._listGrid.refresh():this._listGrid.refresh(),this.clearSelection(),this._detailPane&&this._detailPane.clear()},refreshSummary:function(){this._hasConfigurationForSummary()&&"list"!==this._listMode&&this._summaryGrid.refresh()},showHelp:function(){m.openHelp(this.helpTopicName)},refreshGrid:function(){this.clearSelection(),this.refreshList(),this.refreshSummary()},showList:function(){var a,b,c;if(this._listMode="list",this._hasConfigurationForList()){c=this._getViewStateKey(),a=this._filterManager.createQuery(),this._getStoreQueryKey(),b=this._configuration.list.queryOptions||[],b.httpMethodOverride=!!a,this._configuration.list.rowsPerPage,this._listGrid.setStore(null,null),this._listGrid.STORE_NS=this._getGroupNS(),this._listGrid.setColumns(this._configuration.list.structure),this._selectionInfoObject.keyField=this._configuration.list.store.idProperty,this._dojoxStore=this._configuration.list.dojoxStore,this._queryStore(a,b),this._gridContainer.selectChild(this._listGridPane),this._listGrid.setRowRenderFunction(),this._listGrid.setHeaderVisibility(!0),this._configuration.list.active=!0,this._setDetailPaneVisibility(this._shouldShowDetailPane(),!1),this._updateToolbarItemVisibility(),this._isConfigurationActiveForList()||(this._dataChangeWatchers.length>0&&(q.forEach(this._dataChangeWatchers,dojo.disconnect),this._dataChangeWatchers=[]),this._configuration.list.formatterScope&&this._listGrid.formatterScope!==this._configuration.list.formatterScope&&this._listGrid.set("formatterScope",this._configuration.list.formatterScope));var d=this._getSortingInfo();if(d){r.isArray(d)||(d=[d]);for(var e=0;e<d.length;e++)d[e].attribute=this._CheckForCustomReferenceInSort(d[e].attribute);this._listGrid._grid.updateSortArrow(d,!0)}c=this._getViewStateKey(),this._saveToLocalStorage(c,"list",this._getViewNS())}},showSummary:function(){var a;this._listMode="summary",this._summaryGrid.setStore(null,null),this._setDetailPaneVisibility(this._shouldShowDetailPane(),!1),this._updateToolbarItemVisibility();var b=this._filterManager.createQuery();this._hasConfigurationForSummary()||(this._configuration.summary=this._configurationProvider._createConfigurationForSummary()),this._summaryGrid.setRowRenderFunction(r.hitch(this,function(a){return this._configuration.summary.formatterScope.formatSummary(a[this._configuration.summary.keyField])})),this._summaryGrid.setColumns(this._configuration.summary.columns),this._summaryGrid.setStore(this._configuration.summary.store,b,this._configuration.summary.queryOptions),this._gridContainer.selectChild(this._summaryGridPane),this._summaryGrid.setHeaderVisibility(!1),a=this._getViewStateKey(),this._saveToLocalStorage(a,"summary",this._getViewNS())},toggleDetail:function(){this._hasConfigurationForDetail()&&(this.detailVisible=!this.detailVisible,this._setDetailPaneVisibility(this._shouldShowDetailPane(),!0))},_updateRecordCountText:function(){var a=0;this._selectionInfoObject.recordCount=this._listGrid.totalRecords,"list"===this._listMode&&this._hasConfigurationForList&&(a=this._listGrid.totalRecords),"summary"===this._listMode&&this._hasConfigurationForSummary()&&(a=this._summaryGrid.totalRecords),this._tbarLabel.set("label",t.totalRecordsText+a)},onGridLoadComplete:function(a){},_onGridLoadComplete:function(a){this._updateRecordCountText(),this._configurationProvider&&this._configurationProvider.listPanelConfiguration&&this._configurationProvider.listPanelConfiguration.list&&!0===this._configurationProvider.listPanelConfiguration.list.defaultSelectFirst&&this._listGrid._grid.select(B(".dgrid-row",this._listGrid.domNode)[0]),this.onGridLoadComplete(a)},onRowClick:function(a,b,c){},_onRowClick:function(a){this.onRowClick(a.rowIndex,a.grid.getItem(a.rowIndex),a.grid)},onRowContextMenu:function(a,b,c){},_onRowContextMenu:function(a){var b=a.grid.selection;0===b.getSelected().length&&b.select(a.rowIndex),this.onRowContextMenu(a.rowIndex,a.grid.getItem(a.rowIndex),a.grid)},onSelected:function(a,b,c){},_onSelected:function(a,b,c){this._shouldShowDetailPane()&&this._detailPane.clear(),this.onSelected(a,b,c)},onSelectionChanged:function(a){},_onSelectionChanged:function(a){var b=a.type.indexOf("deselect")>=0;a.type.indexOf("select")&&!b&&this._onSelected(this._listGrid.getSelectedRowId(),a.rows[0].data,this._listGrid),this.onSelectionChanged(a)},_addToSelectionInfo:function(a){for(var b=a.rows,c=0;c<b.length;c++){var d=b[c];if(d){var e=d.data[this._selectionInfoObject.keyField];this._selectionInfoObject.selectedIds.push(e),this._selectionInfoObject.selections.push({id:e,rn:d.id,entity:d.data})}}this._selectionInfoObject.selectionCount=this._selectionInfoObject.selectedIds.length,dojo.publish("/sage/ui/list/selectionChanged",this),this._onSelectionChanged(a)},_removeFromSelectionInfo:function(a){for(var b=a.rows,c=0;c<b.length;c++)if(b[c]){this._selectionInfoObject.selectedIds.splice(this._selectionInfoObject.selectedIds.indexOf(b[c],1));var d=this._selectionInfoObject.selections.map(function(a){return a.id}).indexOf(b[c]);this._selectionInfoObject.selections.splice(d,1)}this._selectionInfoObject.selectionCount=this._selectionInfoObject.selectedIds.length,dojo.publish("/sage/ui/list/selectionChanged",this),this._onSelectionChanged(a)},resolveProperty:function(a,b){var c=this._configuration&&this._configuration.list,d=c&&c.layout,e=c&&c.tableAliases||{};if(d){var f=this._getAlias(a,d,e,!1);return f||((f=this._getAlias(a,d,e,!0))||a)}return this._configuration&&"function"==typeof this._configuration.resolveProperty?this._configuration.resolveProperty(a,b):a},propertyFormat:function(a){var b=this._configuration&&this._configuration.list,c=b&&b.layout;b&&b.tableAliases;if(c){var d,e;for(d=0;d<c.length;d++)if(e=c[d],e.propertyPath===a)return e.format}return null},_getAlias:function(a,b,c,d){var e,f,g,h,i,j;for(e=0;e<b.length;e++)if(f=b[e],null!==(j=f.propertyPath)&&(d&&(i=f.propertyPath&&f.propertyPath.split("."),2===i.length&&(j=i[1])),j===a))return/^[a-z]\d+_/i.test(f.alias)?f.alias:(g=f.dataPath&&f.dataPath.split(":")[0],h=g&&c[g.toUpperCase()],h?h+"."+f.alias:f.alias);return null}})})},"Sage/UI/Filters/FilterManager":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/string","dojo/date","dojo/date/locale","Sage/Utility","Sage/Utility/Filters"],function(a,b,c,d,e,f,g,h){return b("Sage.UI.Filters.FilterManager",null,{_connects:null,_subscribes:null,_owner:null,_timeout:null,_applied:null,_definitionSet:null,refreshBufferDelay:500,filterGroup:"default",owner:null,nullName:"SLX_NULL",emptyName:"SLX_EMPTY",constructor:function(b){a.mixin(this,b),this._applied={},this._definitionSet={};var c=g.getValue(window,"Sage.UI.DataStore.Filters"),e=null,f=null;c&&c[this.filterGroup]&&(e=c[this.filterGroup].applied,f=c[this.filterGroup].definitionSet,e&&(this._applied=e),f&&(this._definitionSet=f)),this._connects=[],this._subscribes=[],this._subscribes.push(dojo.subscribe(d.substitute("/ui/filters/${0}/change",[this.filterGroup]),this,this._onChange),dojo.subscribe(d.substitute("/ui/filters/${0}/clear",[this.filterGroup]),this,this._onClear),dojo.subscribe(d.substitute("/ui/filters/${0}/apply",[this.filterGroup]),this,this._onApply))},destroy:function(){c.forEach(this._connects,function(a){a.remove()}),c.forEach(this._subscribes,function(a){a.remove()}),this.uninitialize()},uninitialize:function(){},set:function(a,b){this["_"+a]=b},get:function(a){return this["_"+a]},_onClear:function(a,b){var c=a&&a.$key;c&&this._applied[c]?delete this._applied[c]:this._applied={}},getAppliedFilterCount:function(){var a,b,c,d=0;for(a in this._applied)if(this._applied.hasOwnProperty(a)){c=this._applied[a];for(b in c)c.hasOwnProperty(b)&&(d+=1)}return d},_onApply:function(a,b,c){this._applied=a||{},this._definitionSet=b||{}},_onChange:function(b,c,d,e){this._timeout&&clearTimeout(this._timeout);var f=b&&b.$key,g=null;f&&(this._definitionSet[f]=b,this._applied[f]=this._applied[f]||{},g=this._applied[f],b.details.userLookupFilter||b.details.lookupFilter?g.value=d:!1!==d?g[c]=d:delete g[c]),this._timeout=setTimeout(a.hitch(this,this._onTimeout),this.refreshBufferDelay)},_onTimeout:function(){dojo.publish(d.substitute("/ui/filters/${0}/refresh",[this.filterGroup]),[this._applied,this._definitionSet,this])},_escapeString:function(a,b){return b=b||'"',a.replace(b,b+b)},_transformValue:function(a,b,c,d){if(b){if(c=c||'"',"date"===a)return d&&d.distinctFilter?c+this._escapeString(b,c)+c:(c="@")+this._transformDate(b)+c;if("string"===a||"key"===a||"enum"===a||"boolean"===a||"unknown"===a)return c+this._escapeString(b,c)+c}return b},_transformDate:function(a){var b,c=new Date(Date.now());return this.specialDates.hasOwnProperty(a)?g.Convert.toIsoStringFromDate(this.specialDates[a](c)):(b=f.parse(a),b?g.Convert.toIsoStringFromDate(b):a)},specialDates:g.specialDates,resolveProperty:function(a,b){return this._owner&&this._owner.resolveProperty?this._owner.resolveProperty(a,b):a},getPropertyFormat:function(a){return this._owner&&this._owner.propertyFormat?this._owner.propertyFormat(a):a},resolveTimelessProperty:function(a){return!!(this._owner&&this._owner._configuration&&this._owner._configuration.getTimelessProperty)&&this._owner._configuration.getTimelessProperty(a)},resolveDataType:function(a){return h.resolveDataType(a)},createRangeFragment:function(a,b,e,f){var h=this.resolveDataType(a.propertyDataTypeId),i=this.resolveProperty(b,f),j=a.details.rangeFilter,k=!1,l=[],m=null,n=[],o="and",p=d.substitute,q=null,r=null,s=null,t=function(a){return a},u=[],v=j.characters>0?j.characters:1;"string"===h&&(t=function(a){return p("substring(${0}, 1, ${1})",[a,v])});for(q in e)if(e.hasOwnProperty(q)){if(void 0===(r=e[q])||null===r)continue;if("date"===h&&(k=this.resolveTimelessProperty(i)),k){var w=new Date(Date.now()),x=new Date(Date.now()),y="@",z="",A="";r.lower===r.upper?l.push(this._transformValue(h,r.lower)):(this.specialDates.hasOwnProperty(r.lower)&&(w=this.specialDates[r.lower](w),w.setHours(0),w.setMinutes(0),w.setSeconds(0),z=y+g.Convert.toIsoStringFromDateNonUTC(w)+y),this.specialDates.hasOwnProperty(r.upper)&&(x=this.specialDates[r.upper](x),x.setHours(23),x.setMinutes(59),x.setSeconds(59),A=y+g.Convert.toIsoStringFromDateNonUTC(x)+y),s=[k,t(i),this._transformValue(h,r.lower),this._transformValue(h,r.upper),z,A],null===r.lower?n.push(p("((${0} eq false and ${1} le ${3}) or (${0} eq true and ${1} le ${4}))",s)):null===r.upper?n.push(p("((${0} eq false and ${1} ge ${2}) or (${0} eq true and ${1} le ${5}))",s)):n.push(p("((${0} eq false and ${1} between ${2} and ${3}) or (${0} eq true and ${1} between ${4} and ${5}))",s)),o="or")}else r.lower===r.upper?null!==r.lower&&void 0!==r.lower?l.push(this._transformValue(h,r.lower)):null===m&&(m=p("COALESCE(${0},${1}) eq ${1}",[i,'""'])):(s=[t(i),this._transformValue(h,r.lower),this._transformValue(h,r.upper)],null===r.lower?n.push(p("${0} le ${2}",s)):null===r.upper?n.push(p("${0} ge ${1}",s)):n.push(p("${0} between ${1} and ${2}",s)),o="or")}l.length>0&&("string"===h&&(c.forEach(l,function(a){a&&a.length>2&&u.push(a.substring(0,v+1)+'"')}),l=u),n.push(p("${0} in (${1})",[t(i),l.join(",")])));var B=n.length>0&&"("+n.join(") "+o+" (");if(null!==m){var C=B?p("${0}${1}",[B," OR "]):"(";B=p("${0}${1})",[C,m])}else B=!!B&&p("${0})",[B]);return B},createDistinctFragment:function(a,b,c,e){var f=this.resolveDataType(a.propertyDataTypeId),g=d.substitute,h=null,i=[],j=null,k=!1,l=this.resolveProperty(b,e);for(h in c)c.hasOwnProperty(h)&&(h===this.nullName?j=g("${0} eq null",[l]):h===this.emptyName?i.push("''"):i.push(this._transformValue(f,c[h],null,a.details)));return i.length>0&&("HasFilter"==a.$key&&"filters.filterType"==b?i.length>0&&(k=g("${0} not in (${1})",[l,i.join(",")])):k=g("${0} in (${1})",[l,i.join(",")])),j&&i.length>0?k=g("(${0} or ${1})",[k,j]):j&&(k=j),k},createLookupFragment:function(a,b,c,e){var f,g=this.resolveDataType(a.propertyDataTypeId),h="",i=this.resolveProperty(b,e);if(c.hasOwnProperty("value")&&(f=c.value.operator,h=c.value.value),""===h||null===h)return!1;if("key"===g)try{"User"===this.getPropertyFormat(b)&&(i.indexOf(".")>-1&&(i=i.split(".")[1]),i+="NAME")}catch(a){}return"string"==typeof h&&(i="upper("+i+")",h=h.toUpperCase()),"Display Name"!=a.filterName&&"Entity Name"!=a.filterName||(g="string"),d.substitute("${0} ${1}",[i,this._transformLookupOperator(f,h,g)])},_transformLookupOperator:function(a,b,c){var e,f="${0}";switch(a){case"Equal":e="eq";break;case"NotEqual":e="ne";break;case"LessThan":e="lt";break;case"LessThanEqual":e="le";break;case"GreaterThan":e="gt";break;case"GreaterThanEqual":e="ge";break;case"StartsWith":e="like",f="${0}%";break;case"EndsWith":e="like",f="%${0}";break;case"Contains":e="like",f="%${0}%";break;default:e="eq"}return"string"!==c&&"key"!==c&&"date"!==c||(f='"'+f+'"'),f=d.substitute(f,[b]),d.substitute("${0} ${1}",[e,f])},createQuery:function(){var a,b,c,d,e,f,g,h=[];for(a in this._applied)this._applied.hasOwnProperty(a)&&(b=this._applied[a],c=this._definitionSet[a],d=c.propertyName,e=c.details,g=c.dataPath,e.rangeFilter?f=this.createRangeFragment(c,d,b,g):e.distinctFilter?f=this.createDistinctFragment(c,d,b,g):(e.userLookupFilter||e.lookupFilter)&&(f=this.createLookupFragment(c,d,b,g)),f&&h.push(f));return h.length>0&&"("+h.join(") and (")+")"},createEntityManagerValueSet:function(){var a,b,c,d,e,f,g,h=[];for(g in this._applied)if(this._applied.hasOwnProperty(g)){a=this._applied[g],b=this._definitionSet[g],c=b.details,d=c.rangeFilter&&"rangeValues"||c.distinctFilter&&"distinctValues"||c.userLookupFilter&&"lookupValues",e=null;var i=[];switch(d){case"rangeValues":i=[];for(f in a)a.hasOwnProperty(f)&&i.push(a[f]);e={id:b.$key},e.distinctValues=[],e.lookupValues=[],e.rangeValues=i;break;case"distinctValues":for(f in a){i=[];for(f in a)a.hasOwnProperty(f)&&i.push(a[f]);e={id:b.$key},e.distinctValues=i,e.lookupValues=[],e.rangeValues=[]}break;case"lookupValues":for(f in a){i=[];for(f in a)a.hasOwnProperty(f)&&i.push(a[f]);e={id:b.$key},e.distinctValues=[],e.lookupValues=i,e.rangeValues=[]}}null!==e&&h.push(e)}return h},createValueSet:function(){var a,b,c,d,e,f,g,h=[];for(g in this._applied)if(this._applied.hasOwnProperty(g)){switch(a=this._applied[g],b=this._definitionSet[g],c=b.details,d=c.rangeFilter&&"rangeFilter"||c.distinctFilter&&"distinctFilter"||c.userLookupFilter&&"lookupFilter",e={filterId:b.$key,filterName:b.filterName,appliedValues:[],operator:null},d){case"rangeFilter":for(f in a)a.hasOwnProperty(f)&&e.appliedValues.push(a[f]&&a[f].rangeId);break;case"distinctFilter":for(f in a)a.hasOwnProperty(f)&&e.appliedValues.push(f);break;case"lookupFilter":for(f in a)a.hasOwnProperty(f)&&a[f].hasOwnProperty("operator")&&(e.appliedValues.push(a[f]),e.operator=a[f].operator)}h.push(e)}return h}})})},"Sage/UI/_DetailPane":function(){define(["dijit/_Widget","dojo/_base/declare"],function(a,b){return b("Sage.UI._DetailPane",[a],{constructor:function(){},_applyConfiguration:function(a){this._configuration=a},_setConfigurationAttr:function(a){this._applyConfiguration(a)},_setOwnerAttr:function(a){if(this._owner!==a){if(this._owner)throw new Error("Sage.UI._DetailPane can only be bound to a single Sage.UI.ListPanel.");this._owner=a,this.connect(this._owner,"onRowClick",this._onRowClick),this.connect(this._owner,"onSelected",this._onSelected)}},_getOwnerAttr:function(){return this._owner},_onRowClick:function(a,b,c){},_onSelected:function(a,b,c){}})})},"Sage/UI/TitleContentPane":function(){define(["dijit/MenuSeparator","dijit/Menu","dijit/layout/ContentPane","dijit/MenuItem","dijit/PopupMenuItem","dijit/MenuBar","dijit/MenuBarItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","Sage/UI/ImageButton","Sage/Utility","Sage/Groups/GroupContextService","Sage/Data/BaseSDataStore","Sage/UI/GroupsTitlePaneConfigProvider","dojo/dom-style","dojo/_base/array","dojo/dom-class","dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/i18n!./nls/TitleContentPane"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return r("Sage.UI.TitleContentPane",c,{started:!1,_configurationProvider:null,_configuration:{},_titleFmtString:"${0}",_groupMenuBar:!1,_groupMenu:!1,title:!1,tabConnects:null,startup:function(){this.inherited(arguments);var a,b=k.getModeId();"string"==typeof b&&"list"===b.toLowerCase()?a=dojo.subscribe("/listView/applyConfiguration",s.hitch(this,function(){dojo.disconnect(a),this._doStartup()})):this._doStartup()},_doStartup:function(){if(!this.started){if(this.tabConnects=[],null===this._configurationProvider){var a=Sage.Services.getService("ClientEntityContext");if(a){a.getContext().IsGroupsBasedEntity&&(this._configurationProvider=new n)}}if(null!==this._configurationProvider){var b=dojo.create("div",{id:"GroupMenuSpace",class:"GroupButton"});dojo.place(b,this.domNode),dojo.connect(this._configurationProvider,"onTitlePaneConfigurationChange",this,"resetConfiguration"),this._configurationProvider.requestTitlePaneConfiguration({scope:this,success:function(a){this._setConfiguration(a),this.started=!0,this._displayMsg()}})}else this._hideEmptyTabBar()}},_resize:function(){dijit.byId("GroupTabs").resize()},_setConfiguration:function(a){this._configuration=a,this._configuration&&(this._configuration.menu&&this._addMenu(this._configuration.menu),this._configuration.tabs?(this._showTabBar(),this._addTabs(this._configuration.tabs)):this._hideEmptyTabBar(),this._configuration.titleFmtString&&(this._titleFmtString=this._configuration.titleFmtString))},_displayMsg:function(){if("list"===Sage.Utility.getModeId()){var a=this._configurationProvider.getMaxNumOfFavoriteGroups(),b=this._configurationProvider.getNumOfFavoriteGroups();dojo.byId("reduceSelectedGroups").innerHTML=b>a?dojo.string.substitute(u.reduceSelectedGroups,[a]):""}},resetConfiguration:function(){var a,b,c,d,e;if(a=dijit.byId("GroupTabs")){p.forEach(this.tabConnects,function(a){dojo.disconnect(a)}),this.tabConnects=[];try{for(d=a.getChildren(),c=d.length,b=0;b<c;b++)e=d[b],a.removeChild(e);a.destroyDescendants()}catch(a){}}this.started=!1,this._doStartup()},_setTitleAttr:function(a){
dojo.html.set(dojo.byId("PageTitleText"),dojo.string.substitute(this._titleFmtString,[a]))},_setConfigurationProviderAttr:function(a){this._configurationProvider=a,this._doStartup(),this._resize()},_addMenu:function(a){if(a){if(this._groupMenu)return;this._groupMenuBar=new i({id:"groupMenuBar",title:a.tooltip,orientation:{BR:"TR",BL:"TL"},baseClass:"group-menu-bar"}),q.remove(this._groupMenuBar.containerNode,"dijitMenuBar"),this._groupMenu=new b({id:"groupMenu",style:{width:a.width||"350px"}}),this._addItemsToMenu(this._groupMenu,a.items),this._groupMenuBar.addChild(new h({label:a.text||"...",icon:a.img||this._blankGif,imageClass:a.imageClass||"",baseClass:"group-menu-button",id:a.id||Sage.guid("groupMenuItem"),popup:this._groupMenu,style:"width:80px"})),this._groupMenuBar.placeAt("GroupsWrapper","before"),this._groupMenuBar.startup();if(Sage.Services.getService("RoleSecurityService").hasAccess("Entities/Group/Add")){var c=new j({id:"addGroupButton",imageClass:"fa fa-plus",title:a.addGroupTooltip,onClick:function(){Sage.Groups.GroupManager.CreateGroup()}});c.placeAt("GroupsWrapper","before"),c.startup()}t.create("div",{id:"reduceSelectedGroups",innerHTML:"",class:"dirtyDataMessage",style:"display:inline"},dojo.byId("groupMenuBar"),"before")}},_addItemsToMenu:function(c,e){for(var f,g=e.length,h=0;h<g;h++)if(f=e[h],f.fn)c.addChild(f.fn.call(f.scope||this));else if(f.items&&f.items.length>0){var i=new b({parentMenu:c,id:f.id+"_submenu"});this._addItemsToMenu(i,f.items),c.addChild(new d({label:f.text||"...",icon:f.img||this._blankGif,title:f.tooltip||"",popup:i,id:f.id}))}else f.isSeparator||"-"===f.text?c.addChild(new a):c.addChild(new d({label:f.text||"...",icon:f.img||this._blankGif,title:f.tooltip||"",id:f.id,onClick:f.onClick||function(){document.location=f.href}}))},_addTabs:function(b){try{var e={selectedTabId:"",tabKeyProperty:"$key",tabNameProperty:"$descriptor",tabGroupNameProperty:"name",tabFamilyProperty:"family",tabHiddenProperty:!1};if(dojo.mixin(e,b),e){var f=dijit.byId("GroupTabs");f.startup();var g,h=this._blankGif,i="function"==typeof e.onTabClose;if(e.staticTabs)for(var j=e.staticTabs.length,l=0;l<j;l++){var m=e.staticTabs[l],n=m[e.tabKeyProperty],o=dijit.byId(n),p=o||new c({id:n,title:m[e.tabNameProperty],closable:!0,dataItem:m,onClose:function(){return!1}});f.addChild(p);if(e.selectedTabId===n&&f.selectChild(p),e.showTabContextMenus&&m.contextMenuItems){g=m.contextMenuItems;for(var q=0;q<g.length;q++){var r=g[q];if(r.isspacer||""===r.text)f.addTabMenuItem(n,new a);else{var s=r.href;if(s.indexOf("javascript:")<0)s=dojo.string.substitute("javascript:${0}('${1}','${2}','${3}');",[s,m[e.tabKeyProperty],m[e.tabNameProperty],m[e.tabFamilyProperty]]);else{var t={groupId:m[e.tabKeyProperty],groupName:m[e.tabNameProperty],family:m[e.tabFamilyProperty]};s=dojo.string.substitute(s,t)}var u=m[e.tabKeyProperty]+"_MENU_"+q,v=new d({id:u,label:r.text||"...",icon:r.img||h,title:r.tooltip||"",ref:s,onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}});f.addTabMenuItem(n,v)}}}}e.lookupButton&&(e.lookupButton.startup(),dojo.place(e.lookupButton.domNode,f.domNode,"before"));var w=k.getClientContextByKey("userID"),x={onComplete:function(b){var g,j,k,l=!1;for(j=0;j<b.length;j++)if(g=b[j],!e.tabHiddenProperty||!0!==g[e.tabHiddenProperty]){k=g[e.tabKeyProperty],l=e.selectedTabId===g[e.tabKeyProperty];var m=dijit.byId(k)||new c({id:k,title:g[e.tabNameProperty],closable:i,dataItem:g,selected:l});f.addChild(m),l&&f.selectChild(m),function(b,c){var g=b[e.tabKeyProperty];return function(){var i=!1,j=!1,k="ADMIN"===c.trim();if(j=b.userId!==c,Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus.groupTabContextMenu)for(var l=Sage.UI.DataStore.ContextMenus.groupTabContextMenu.items,m=0;m<l.length;m++){var n=l[m];if(i=!!("gtcDelete"===n.id&&j&&!k||"gtcShare"===n.id&&j),n.isspacer||""===n.text)f.addTabMenuItem(g,new a);else{var o=n.href;if(o.indexOf("javascript:")<0)o=dojo.string.substitute("javascript:${0}('${1}','${2}','${3}');",[o,b[e.tabKeyProperty],b[e.tabGroupNameProperty]||b[e.tabNameProperty],b[e.tabFamilyProperty]]);else{var p={groupId:b[e.tabKeyProperty],groupName:b[e.tabNameProperty]||b[e.tabGroupNameProperty],family:b[e.tabFamilyProperty]||""};o=dojo.string.substitute(o,p)}f.addTabMenuItem(g,new d({id:g+"_tab_"+m,label:n.text||"...",icon:n.img||h,title:n.tooltip||"",ref:o,disabled:i,onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}}))}}}}(g,w)()}}};dojo.mixin(x,e.fetchParams),e.store&&e.store.fetch(x),e.onTabClick&&this.tabConnects.push(dojo.connect(f,"onClick",e,"onTabClick",!0)),e.onTabSelect&&this.tabConnects.push(dojo.connect(f,"selectChild",e,"onTabSelect")),i&&this.tabConnects.push(dojo.connect(f,"closeChild",e,"onTabClose"))}else this._hideEmptyTabBar()}catch(a){}},_hideEmptyTabBar:function(){var a=dijit.byId("GroupTabs");a&&("none"!=dojo.byId("localTitle").style.display?o.set(this.domNode,"height","37px"):o.set(this.domNode,"display","none"),this.getParent().layout(),a.set("style","display:none"))},_showTabBar:function(){var a=dijit.byId("GroupTabs");a&&("none"!=dojo.byId("localTitle").style.display?o.set(this.domNode,"height","67px"):o.set(this.domNode,"display","none"),a.domNode.style.display="block",this.getParent().layout())}})})},"Sage/UI/PopupMenuBarItem":function(){define(["Sage/UI/MenuBarItem","Sage/UI/PopupMenuItem","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.PopupMenuBarItem",[b,a],{})})},"Sage/UI/MenuBarItem":function(){define(["Sage/UI/MenuItem","dojo/text!../templates/MenuBarItem.html","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.MenuBarItem",a,{iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"noIcon",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},templateString:b})})},"Sage/UI/MenuItem":function(){define(["dijit/MenuItem","dijit/_Widget","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/MenuItem.html"],function(a,b,c,d,e){return d("Sage.UI.MenuItem",a,{templateString:e,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"noIcon",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},ref:"",postMixInProperties:function(){this.hasImageClass()&&this.hasIcon()?this.icon=this._blankGif:this.icon=this.icon||this._blankGif,this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.hasImageClass()?(this.set("icon",this._blankGif),c.set(this.iconNode,"display","none")):c.set(this.iconNodeSprite,"display","none")},hasImageClass:function(){return!(!this.imageClass||"noIcon"===this.imageClass)},hasIcon:function(){return!(!this.icon||this.icon===this._blankGif)},destroy:function(){this._setSelected=function(){},this.inherited(arguments)}})})},"Sage/UI/PopupMenuItem":function(){define(["Sage/UI/MenuItem","dijit/PopupMenuItem","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.PopupMenuItem",[a,b],{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);Sage.UI.PopupMenuItem.superclass._fillContent.call(this,a[0]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(this.inherited(arguments),!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode),this.popup.startup(),this.popup.domNode.style.display="none",this.arrowWrapper&&dojo.style(this.arrowWrapper,"visibility",""),dijit.setWaiState(this.focusNode,"haspopup","true")}},destroyDescendants:function(){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(),delete this.popup),this.inherited(arguments)}})})},"Sage/UI/OrientableMenuBar":function(){define(["dijit/MenuBar","dojo/_base/declare"],function(a,b){return b("Sage.UI.OrientableMenuBar",a,{postCreate:function(a){this.inherited(arguments),void 0!==this.orientation&&(this._orient=this.orientation)}})})},"Sage/UI/DetailPanel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/i18n","dijit/registry","dijit/layout/BorderContainer","dijit/Toolbar","dijit/ToolbarSeparator","Sage/_Templated","Sage/UI/_DetailPanelConfigurationProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a("Sage.UI.DetailPanel",[h,k],{widgetsInTemplate:!0,contentTemplate:new Simplate(['<div class="detail-panel-toolbar listPanelToolbar rightTools" data-dojo-type="dijit.Toolbar" style="{%= $.toolbarStyle %}" data-dojo-attach-point="_toolbar" data-dojo-props="region: \'top\', align: \'right\', splitter: false">','<span data-dojo-type="dijit.ToolbarSeparator" data-dojo-attach-point="_buttonSeparator"></span>','<div data-dojo-type="dijit.form.Button" data-dojo-attach-point="_helpButton" data-dojo-attach-event="onClick:showHelp" data-dojo-props="showLabel:true">{%= $.helpText %}</div>',"</div>"]),helpText:"Help",helpTopicName:"detailview",toolbarStyle:"",toolbarActive:!0,id:"detailPanel",buildRendering:function(){this.inherited(arguments),e.add(this.domNode,"detail-panel")},startup:function(){this.inherited(arguments),this.requestConfiguration()},showHelp:function(){Sage.Utility.openHelp(this.helpTopicName)},requestConfiguration:function(){this.configurationProvider&&this.configurationProvider.requestDetailModeConfiguration({scope:this,success:this._applyConfiguration})},_applyConfiguration:function(a){this._configuration=a,this._configureToolbar(a),this._configureContent(a)},_configureContent:function(a){var c=a&&a.content;if(c){var d=c;b.isFunction(d)&&(d=d.call(this,a,this)),d&&(this._content&&(this.removeChild(this._content),this._content.destroyRecursive(),this._content=null),d.set("region","center"),this._content=d,this.addChild(d),this.layout())}},_configureToolbar:function(a){if(!this._toolbarApplied){var b=a&&a.toolBar;!1===b?this.toolbarActive&&(this.removeChild(this._toolbar),this.toolbarActive=!1):b&&(this.toolbarActive||(this.addChild(this._toolbar),this.toolbarActive=!0),c.forEach(b.items,function(a,b){this._toolbar.addChild(new dijit.form.Button(a),b)},this)),this._toolbarApplied=!0}}})})},"Sage/UI/_DetailPanelConfigurationProvider":function(){define(["dojo/_base/declare"],function(a){return a("Sage.UI._DetailPanelConfigurationProvider",null,{detailModeConfiguration:!1,constructor:function(a){dojo.mixin(this,a)},requestDetailModeConfiguration:function(a){a.success&&this.detailModeConfiguration&&a.success.call(a.scope||this,this.detailModeConfiguration,this)}})})},"Sage/MainView/ActivityMgr/ActivityGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","Sage/Services/ActivityService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/ActivityMgr/ActivityListPanelConfig","Sage/MainView/ActivityMgr/AlarmListPanelConfig","Sage/MainView/ActivityMgr/AllOpenListPanelConfig","Sage/MainView/ActivityMgr/ConfirmListPanelConfig","Sage/MainView/ActivityMgr/EventListPanelConfig","Sage/MainView/ActivityMgr/LitRequestListPanelConfig","Sage/MainView/ActivityMgr/PastDueListPanelConfig","dojox/storage/LocalStorageProvider","dojo/_base/declare","dojo/_base/connect","dojo/_base/json","dojo/i18n!./nls/ActivityGroupContextService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=n("Sage.MainView.ActivityMgr.ActivityGroupContextService",a,{_currentContext:null,_currentTabId:!1,_currentTabDescription:!1,_currentUserId:!1,_currentKeyField:"$key",_currentListConfiguration:!1,groupConfigTypes:[{key:"activities",descriptor:q.activityTabDisplayName,keyField:"$key",configProviderType:f},{key:"allopen",descriptor:q.allOpenTabDisplayName,keyField:"$key",configProviderType:h},{key:"pastdue",descriptor:q.pastDueTabDisplayName,keyField:"$key",isCompostie:!0,configProviderType:l},{key:"alarms",descriptor:q.alarmTabDisplayName,keyField:"$key",isCompostie:!0,configProviderType:g},{key:"events",descriptor:q.eventTabDisplayName,keyField:"$key",configProviderType:j},{key:"confirmations",descriptor:q.confirmTabDisplayName,keyField:"$key",configProviderType:i},{key:"literature",descriptor:q.litTabDisplayName,keyField:"$key",configProviderType:k}],_configsHash:!1,_LOCALSTORE_NAMESPACE:"Sage-ActivityManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_tabNameCache:{},constructor:function(){this.inherited(arguments),this._currentContext={},e.mixin(this._currentContext,this._emptyContext),this._currentContext.CurrentTableKeyField="$key",this._currentContext.AppliedFilterInfo={},this._currentContext.CurrentFamily=null,this._currentContext.notGroupBased=!0;var a;a=Sage.Utility.getParameterByName("groupId",document.location.href),a=a&&this._validateTabId(a)?a:this._getDefaultTabId();var b=this.getGroupName(a);this.setContext(a,b),this.unsubscribeConnects(),this._subscribes=[],this._subscribes.push(o.subscribe(c.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh)),this._onDefaultFilterLoad()},buildCurrentEntityContext:function(){var a=this._currentContext.CurrentGroupID;a&&this._currentListConfiguration&&(this._currentContext.CurrentEntity=this._currentListConfiguration.entityName,this._currentContext.CurrentTableKeyField=this.getKeyField(a),this._currentContext.CurrentName||(this._currentContext.CurrentName=this.getGroupName(a)))},_ensureConfigsHash:function(){if(!this._configsHash){for(var a={},b=0;b<this.groupConfigTypes.length;b++){var c=this.groupConfigTypes[b];a[c.key]=e.mixin(c,c.instance?null:{instance:!1})}this.configsHash=a}},_setListConfig:function(){this._ensureConfigsHash();var a=this._currentContext.CurrentGroupID,b=this.configsHash.hasOwnProperty(a)?this.configsHash[a]:this.configsHash.activities;b.instance?b.instance.rebuild():(b.instance=new b.configProviderType,this.onTabConfigCreated(b.instance)),this._currentListConfiguration=b.instance},getCurrentListConfig:function(){return this._setListConfig(),this._currentListConfiguration},getKeyField:function(a){this._ensureConfigsHash();var b="$key";return this.configsHash[a]&&(b=this.configsHash[a].keyField||"$key"),b},getGroupName:function(a){this._ensureConfigsHash();var b="default";return this.configsHash[a]&&(b=this.configsHash[a].descriptor||"default"),b},onCurrentGroupChanged:function(a){this._clearFilterManager();var b=this;this._onDefaultFilterLoad(function(){var c=b.getContext();o.publish("/group/context/changed",[a,b]),b._saveToLocalStorage(b._STORE_KEY_LASTAB,c.CurrentGroupID)})},_clearFilterManager:function(){var a={},b={};o.publish("/ui/filters/default/apply",[a,b,this])},getContext:function(){return null===this._currentContext.CurrentGroupID&&this.requestContext(),this.buildCurrentEntityContext(),this._currentContext},requestContext:function(){this._isRetrievingContext},setContext:function(a,b){this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=b,this._setListConfig(),this.buildCurrentEntityContext(),this._isRetrievingContext=!1,this.onContextSet(this._currentContext)},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},setCurrentGroup:function(a,b,c){this._currentContext.CurrentGroupID!==a&&(b&&c?this._currentContext.CurrentTableKeyField=c:(this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=!1,this.buildCurrentEntityContext(),b=this._currentContext.CurrentName),this.setContext(a,b),this.onCurrentGroupChanged({current:this._currentContext}))},_onDefaultFilterLoad:function(a){var b,c=this.getContext(),f=d.getSDataService("system"),g={$name:"getEntityFilters",request:{entityName:c.CurrentEntity,key:c.CurrentGroupID}};b=new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("getEntityFilters"),b.execute(g,{success:e.hitch(this,function(b){try{b.response.appliedFilterInfo&&(this._currentContext.AppliedFilterInfo.applied=b.response.appliedFilterInfo.applied,this._currentContext.AppliedFilterInfo.definitionSet=b.response.appliedFilterInfo.definitionSet,a&&a())}catch(a){}}),failure:function(a){},async:!1})},_onDefaultFilterRefresh:function(a,b,c){var e=this.getContext(),f=d.getSDataService("system"),g={$name:"applyFilterToEntity",request:{entityName:e.CurrentEntity,filter:p.toJson(c.createValueSet()),key:e.CurrentGroupID}};new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("applyFilterToEntity").execute(g,{})},getStaticTabs:function(){return this.groupConfigTypes},_saveToLocalStorage:function(a,b,c){this._saveToSessionStorage(a,b,c)},_getFromLocalStorage:function(a,b){return this._getFromSessionStorage(a,b)},_getFromSessionStorage:function(a,b){b||(b=this._LOCALSTORE_NAMESPACE);var c=b+"_"+a;return sessionStorage.getItem(c)},_saveToSessionStorage:function(a,b,c){c||(c=this._LOCALSTORE_NAMESPACE);var d=c+"_"+a;sessionStorage.setItem(d,b)},_getDefaultTabId:function(){var a,b="activities",c=this._getUrlTabId();if(c&&(c=this._validateTabId(c)))return c;var d=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(d?b=d:(a=Sage.Services.getService("ActivityService"))&&(b=a.getDefaultActivityManagerTabId()),!this._configsHash)for(var e=0;e<this.groupConfigTypes;e++)if(b===this.groupConfigTypes[e].key)return b;return b},_getUrlTabId:function(){var a=!1,b="[\\?&]tabId=([^%#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d&&(a=d[1]),a},_validateTabId:function(a){if(a)for(var b=0;b<this.groupConfigTypes.length;b++){var c=this.groupConfigTypes[b];if(c.key.toUpperCase()===a.toUpperCase())return c.key}return null},onTabConfigCreated:function(a){}});if(Sage.Services.hasService("ClientGroupContext")){var s=Sage.Services.getService("ClientGroupContext");"Sage.MainView.ActivityMgr.ActivityGroupContextService"!==s.declaredClass&&(s.unsubscribeConnects(),Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",new r))}else Sage.Services.addService("ClientGroupContext",new r);return r})},"Sage/Groups/BaseGroupContextService":function(){define(["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(a,b,c,d,e,f,g){return f("Sage.Groups.BaseGroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:!1,constructor:function(){this._connects=[],this._subscribes=[],this._adHocGroupList=[],this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null},d(e.hitch(this,function(){if(!this.isContextRequired()){var b=a.getValue(window,"Sage.Groups._groupContext"),c=a.getValue(window,"Sage.UI.DataStore.Filters");c&&b.AppliedFilterInfo&&(c.default=this.createFilterExtendedSet(b.AppliedFilterInfo))}this.isContextRequired()&&this.requestContext()}))},createFilterExtendedSet:function(a){var b,c,d,f,g,h=a.definitionSet||[],i=a.applied||[],j={},k={};for(d=0;d<h.length;d++)b=h[d],c={$key:b.id,$partial:!0,filterName:b.filterName,displayName:b.displayName,propertyName:b.propertyName,propertyDataTypeId:b.propertyDataTypeId,details:{}},"rangeFilter"==b.filterType?c.details.rangeFilter={characters:b.characters}:"lookupFilter"==b.filterType?c.details.userLookupFilter={}:c.details.distinctFilter={},j[b.id]=c;for(d=0;d<i.length;d++){for(b=i[d],c={},f=0;f<b.rangeValues.length;f++)g=b.rangeValues[f],c[g.rangeName]=e.mixin({},g);for(f=0;f<b.distinctValues.length;f++)"string"==typeof(g=b.distinctValues[f])&&(c[g]=g);for(f=0;f<b.lookupValues.length;f++)"object"==typeof(g=b.lookupValues[f])&&(c.value=g);k[b.id]=c}return{definitionSet:j,applied:k}},destroy:function(){g.forEach(this._connects,function(a){dojo.disconnect(a)}),this.unsubscribeConnects(),this.uninitialize()},unsubscribeConnects:function(){g.forEach(this._subscribes,function(a){dojo.unsubscribe(a)})},uninitialize:function(){},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},createCompatibleContext:function(a){"LOOKUPRESULTS"==a.currentGroupId&&(a.currentName="Lookup Results");var b={AppliedFilterInfo:a.appliedFilterInfo,ContainsPositionState:a.containsPositionState,CurrentDisplayName:a.currentDisplayName,CurrentEntity:a.currentEntity,CurrentEntityID:a.currentEntityId,CurrentEntityPosition:a.currentEntityPosition,CurrentFamily:a.currentFamily,CurrentGroupCount:a.currentGroupCount,CurrentGroupID:a.currentGroupId,CurrentName:a.currentName,CurrentTable:a.currentTable,CurrentTableKeyField:a.currentTableKeyField,DefaultGroupID:a.defaultGroupId,FirstEntityID:a.firstEntityId,LastEntityID:a.lastEntityId,LookupLayoutGroupName:a.lookupLayoutGroupName,NextEntityID:a.nextEntityId,PreviousEntityID:a.previousEntityId,RetrievedOn:a.retrievedOn,isAdhoc:a.isAdHoc,LookupResultsConditions:a.lookupResultsConditions};return a.appliedFilterInfo||delete b.AppliedFilterInfo,b},_onDefaultFilterRefresh:function(a,b,c){},getContext:function(){},setContext:function(a){var b=Sage&&Sage.Groups;b&&a&&(e.mixin(b._groupContext,a),this.onContextSet(b._groupContext))},setCurrentGroup:function(a,b){},_onSetContextRequestSuccess:function(a){var b=a&&a.response,c=b&&this.createCompatibleContext(b);c&&this.setContext(c),this.onCurrentGroupChanged({current:c})},_onSetContextRequestFailure:function(a,b){},onSuccessfulGroupChanged:function(a){var b=this.getContext();this.setContext(a),this.onCurrentGroupChanged({current:a,previous:b})},onCurrentGroupChanged:function(a){},publishFiltersApplied:function(){var b=this.getContext();b.AppliedFilterInfo&&d(e.hitch(this,function(){var c=this.createFilterExtendedSet(b.AppliedFilterInfo);a.getValue(window,"Sage.UI.DataStore.Filters").default=c,dojo.publish("/ui/filters/default/apply",[c.applied,c.definitionSet,this])}))},applyFilters:function(b){var c=this.getContext();if(c.AppliedFilterInfo){var d=this.createFilterExtendedSet(c.AppliedFilterInfo);a.getValue(window,"Sage.UI.DataStore.Filters").default=d,b&&b._onApply(d.applied,d.definitionSet,this)}},onContextSet:function(a){}})})},"Sage/MainView/ActivityMgr/ActivityListPanelConfig":function(){define(["dojo/i18n","Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility/Activity","Sage/Utility","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Store/SData","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/ActivityDuration","Sage/UI/Controls/GridParts/Columns/ActivityName","Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus","Sage/UI/Controls/GridParts/Columns/ActivityAlarm","Sage/UI/Controls/GridParts/Columns/ActivityAttachment","Sage/UI/Controls/GridParts/Columns/ActivityRecurring","Sage/UI/Controls/GridParts/Columns/ActivityNameType","Sage/UI/Controls/GridParts/Columns/ActivityAccount","Sage/UI/Controls/GridParts/Columns/ActivityLeader","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/dom-construct","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/UserActivityDetailSummary","dojo/i18n!./templates/nls/UserActivityListSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return t("Sage.MainView.ActivityMgr.ActivityListPanelConfig",[b],{constructor:function(){this._nlsResources=x,this._listId="Activities",this._resourceKind="userActivities",this.entityName="UserActivity",this._contextMenu="ActivityListContextMenu",this._scheduleContextMenu="ScheduleContextMenu",this._service=s.getSDataService("system"),this._structure=this._getStructure(),this._select=this._getSelect(),this._include=this._getInclude(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.keyField="$key",this.hasCompositeKey=!0,u.subscribe("/entity/activity/change",this._onListRefresh),u.subscribe("/entity/activity/delete",this._onListRefresh),u.subscribe("/entity/activity/create",this._onListRefresh),u.subscribe("/entity/userActivity/change",this._onListRefresh),u.subscribe("/entity/userActivity/delete",this._onListRefresh),u.subscribe("/entity/userActivity/create",this._onListRefresh),u.subscribe("/entity/activity/confirm",this._onListRefresh),u.subscribe("/entity/activity/decline",this._onListRefresh),u.subscribe("/entity/userNotification/delete",this._onListRefresh),u.subscribe("/entity/activityAttendees/updated",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("activities")},_getSelect:function(){return["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status","Activity/AttendeeCount"]},_getInclude:function(){return["Activity","$descriptors"]},_getSort:function(){return[{attribute:"Activity.StartDate",descending:!0}]},_getWhere:function(){return this._currentUserId?v.substitute('(User.Id eq "${0}") and (Status ne "asDeclned" ) and (Activity.Type ne "atLiterature" ) ',[this._currentUserId]):""},_getStructure:function(){var a=w.toDom("<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />"),b=w.toDom("<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />"),c=w.toDom("<img src='images/icons/Alarm_16x16.gif' title='"+this._nlsResources.colNameAlarm+"' alt='"+this._nlsResources.colNameAlarm+"' />"),d=w.toDom("<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />"),e=this._nlsResources.colNameType||"Activity Type",f=this._nlsResources.colNameStartDate||"Start Date",g=this._nlsResources.colNameDuration||"Duration",s=this._nlsResources.colNameAccount||"Account/Company",t=this._nlsResources.colNameRegarding||"Regarding",u=this._nlsResources.colNamePriority||"Priority",v=this._nlsResources.colNameUserId||"Leader",x=this._nlsResources.colNameTypeName||"Type",y=this._nlsResources.colNameContactName||"Name",z=this._nlsResources.colNameAssociationCount||"Participant Count";return[{field:"Status",renderHeaderCell:function(){return d},type:l,width:20},{field:"Alarm",renderHeaderCell:function(){return c},type:m,width:20},{field:"Activity.Attachment",renderHeaderCell:function(){return a},label:"Attachment",type:n,width:20},{field:"Activity.Recurring",renderHeaderCell:function(){return b},type:o,width:20},{field:"Activity.Type",label:e,type:i,width:90},{field:"Activity.StartDate",label:f,type:h,timelessField:"Activity.Timeless",width:100},{field:"Activity.Duration",label:g,type:j,width:40},{field:"Activity.ContactId",label:x,type:p,width:40},{field:"Activity.ContactName",label:y,type:k,width:200},{field:"Activity.AccountName",label:s,type:q,width:200},{field:"Activity.Description",label:t,get:function(a){for(var b=this.field.split("."),c=a,d=0;d<b.length;d++){if(null===c)return"";c=c[b[d]]}return c},width:100},{field:"Activity.Priority",label:u,get:function(a){for(var b=this.field.split("."),c=a,d=0;d<b.length;d++){if(null===c)return"";c=c[b[d]]}return c},width:40},{field:"Activity.Leader",label:v,type:r,width:200},{field:"Activity.AttendeeCount",label:z,get:function(a){for(var b=this.field.split("."),c=a,d=0;d<b.length;d++){if(null===c)return"";c=c[b[d]]}return c},width:90}]},_getSummaryConfig:function(){return{columns:[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}],layout:"layout",store:new g({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:!1,where:this._where}),keyField:"$key",rowHeight:170,minRowsPerPage:10,formatterScope:this._getFormatterScope()}},_getDetailConfig:function(){this._getFormatterScope();return{resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/UserActivityDetailSummary.html"}},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:!0,expandRecurrences:!1}},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:!0,expandRecurrences:!1}},_getFormatterScope:function(){return new f({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:!0,requestConfiguration:this._getSummaryListRequestConfig()})},_getToolBars:function(){return{items:[]}},getTimelessProperty:function(a){return"Activity.Timeless"}})})},"Sage/MainView/ActivityMgr/BaseListPanelConfig":function(){define(["Sage/_ConfigurationProvider","Sage/Store/SData","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dojo/i18n!./nls/BaseListPanelConfig","dijit/registry","dojo/string","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k){return k("Sage.MainView.ActivityMgr.BaseListPanelConfig",[a],{list:!1,detail:!1,summary:!1,toolBar:!1,_listId:!1,_store:!1,_service:!1,_where:!1,_sort:!1,_select:!1,_include:!1,_structure:!1,_currentUserId:!1,_resourceKind:!1,_nlsResources:!1,_securedAction:"",keyField:"$key",hasCompositeKey:!1,_menuItems:null,_contextMenu:!1,_schedeContextMenu:!1,_activityService:!1,_summaryformaterScope:!1,entityName:!1,rebuildMenus:!0,rebuildOnRefresh:!1,constructor:function(){this._nlsResources=h,this._service=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),this._activityService=Sage.Services.getService("ActivityService");var a=Sage.Services.getService("ClientContextService");a&&a.containsKey("userID")&&(this._currentUserId=a.getValue("userID")),this._include=this._getInclude(),this._menuItems=[]},rebuild:function(){this._where=this._getWhere(),this._structure=this._getStructure(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars()},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList()},_getListConfig:function(){return this._store?this._store.where=this._where:this._store=this._getStore(),{id:this._listId,structure:this._structure,store:this._store,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext}},_getStore:function(){return new b({id:this._listId,service:this._service,
resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where})},_getSelect:function(){return[]},_getInclude:function(){return[]},_getSort:function(){return[]},_getWhere:function(){return""},_getStructure:function(){return[]},_getSummaryConfig:function(){return{columns:[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}],layout:"layout",keyField:"$key",store:new b({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where}),rowHeight:170,rowsPerPage:10,formatterScope:this._getFormatterScope()}},_getFormatterScope:function(){return!1},_getDetailConfig:function(){return!1},_getToolBars:function(){return{items:[]}},_getListContextMenuItems:function(){if(this._contextMenu){if(this._menuItems.length>0)return this._menuItems;if(!Sage.UI.DataStore.ContextMenus)return[];if(!Sage.UI.DataStore.ContextMenus.listContextMenu)return[];this._menuItems.length>0&&this._menuItems[0].destroyDescendants(),this._menuItems=[];for(var a=Sage.UI.DataStore.ContextMenus.listContextMenu.items,b=a.length,c=0;c<b;c++){var g=a[c];if(g.id===this._contextMenu)this._buildChildMenu(g.submenu,null);else if(g.id===this._scheduleContextMenu){var h=new f;this._menuItems.push(h);var i=new d,j=new e({label:g.text,popup:i});this._buildChildMenu(g.submenu,i),this._menuItems.push(j)}}return this._menuItems}},_getGridMenu:function(){return dijit.byId("_listContextmenu")},_buildChildMenu:function(a,b){for(var c=a.length,h=0;h<c;h++){var i=a[h];if(i.submenu.length>0){var k=new d;this._buildChildMenu(i.submenu,k);var l=new e({label:i.text,popup:k});b?b.addChild(l):this._menuItems.push(l)}else{var m=null;if("-"===i.text||" "===i.text||i.isspacer)m=new f;else{var n=i.href;n.indexOf("javascript:")<0&&(n=j.substitute("javascript:${0}()",[n])),m=new g({label:i.text||"...",icon:i.img,title:i.tooltip||"",ref:n,onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}})}b?b.addChild(m):this._menuItems.push(m)}}},_onListContext:function(){},getFilterConfig:function(a,b,d){var e=this._service,f=a,g=this.entityName,h=this._resourceKind,j=this._where,k={};return k.groupId=this._listId,k.store=new c({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(f).setResourceKind("entities").setResourceSelector('"'+g+'"').setResourceProperty("filters").setQueryArg("where",'filterType ne "analyticsMetric"').setQueryArg("count",20).setQueryArg("orderby","displayName")}),k.createStoreForFilter=function(a){return a&&a.filterName?new c({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(e).setResourceKind(h).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",a.filterName).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",j)}):null},k.getFilterManager=function(){var a=i.byId("list");return a&&a.get("filterManager")},k},getTimelessProperty:function(a){return!1}})})},"Sage/UI/SummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","Sage/Data/SummaryViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/lang","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.SummaryFormatterScope",null,{templateLocation:!1,queryName:"",idField:"",dataManager:null,requestConfiguration:!1,widgets:[],constructor:function(a){dojo.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new b,Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)},formatSummary:function(b){var c,d="_sum_"+b;return null===b?"":(null===this.dataManager&&(this.dataManager=Sage.Services.getService("SummaryViewDataManager")),null===this.dataManager&&this._setupDataManager(),c=dijit.byId(d),c&&c.destroy(),c=new a({id:d,templateLocation:this.templateLocation}),this.dataManager.requestData(b,c,this.requestConfiguration),c.domNode)},preFetchResources:function(){for(var a=["Sage"],b=this.templateLocation.split("/"),c=0;c<b.length-1;c++)a.push(b[c]);var e="dojo/i18n!"+a.join("/")+"/nls/"+b[b.length-1].replace(".html","");require([e],d.hitch(this,function(a){d.mixin(this,a)})),dojo.cache("Sage",this.templateLocation)}})})},"Sage/UI/SummaryContainer":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/SummaryContents","dojo/i18n!./nls/SummaryContainer","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.SummaryContainer",[a,b],{widgetsInTemplate:!1,templateLocation:"",contentNode:null,paneContents:null,entity:null,postProcessCallBack:!1,attributeMap:{content:{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(['<div class="EntityCard">','<div dojoAttachPoint="contentNode">'+d.loadingText+"</div>","</div>"]),_setEntityAttr:function(a){this.entity=a;var b=new c({templateLocation:this.templateLocation,entity:a});dojo.place(b.domNode,this.contentNode,"only"),b.startup(),this.paneContents=b,this.postProcessCallBack&&this.postProcessCallBack(this.entity)},startup:function(){if(this.entity){var a=new c({templateLocation:this.templateLocation,entity:this.entity});dojo.place(a.domNode,this.contentNode,"only"),a.startup(),this.paneContents=a,this.postProcessCallBack&&this.postProcessCallBack(this.entity)}},destroy:function(){this.paneContents&&this.paneContents.destroy(arguments),this.inherited(arguments)}})})},"Sage/UI/SummaryContents":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/_base/declare"],function(_Widget,_Templated,lang,declare){var summaryContents=declare("Sage.UI.SummaryContents",[_Widget,_Templated],{widgetsInTemplate:!0,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(config){this.inherited(arguments);for(var moduleNameParts=["Sage"],templateParts=config.templateLocation.split("/"),i=0;i<templateParts.length-1;i++)moduleNameParts.push(templateParts[i]);var path="dojo/i18n!"+moduleNameParts.join("/")+"/nls/"+templateParts[templateParts.length-1].replace(".html","");require([path],lang.hitch(this,function(a){lang.mixin(this,a)}));var location=config.templateLocation||this.templateLocation;dojo.config.isDebug&&(location=location+"?_t="+(new Date).valueOf()),this.templateString=dojo.cache("Sage",location);var template=eval(this.templateString);this.widgetTemplate=new Simplate(template)}});return summaryContents})},"Sage/UI/Controls/SummaryAggregate":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Tooltip","Sage/UI/GridMenuItem","Sage/Store/SData","dojo/i18n!../nls/SDataLookup","dojo/_base/declare"],function(a,b,c,d,e,f,g){var h=g("Sage.UI.Controls.SummaryAggregate",[a,b],{loadingText:f.loadingText,noDataText:f.noDataText,widgetsInTemplate:!0,value:"",content:"",valueNode:null,linkTabName:"",entityId:"",linkPage:"",toolTip:!1,_button:null,_menu:null,store:!1,grid:!1,popupStructure:null,resourceKind:"",select:null,where:"",widgetTemplate:new Simplate(["<span>",'<button data-dojo-type="dijit.form.ComboButton" data-dojo-attach-point="_button" data-dojo-attach-event="onClick:_click" >','<div data-dojo-type="dijit.Menu" data-dojo-attach-point="_menu">',"</div>","</button>","</span>"]),constructor:function(){this.select=[],this.popupStructure=[],this.inherited(arguments)},_click:function(){this.linkPage||this._findlinkPage();var a=this.linkPage+"?entityid="+this.entityId||"";this.linkTabName&&(a=a+"&activetab="+this.linkTabName),document.location=a},_setValueAttr:function(a){this.value=a,this._button.set("label",a)},startup:function(){if(this.inherited(arguments),!this.store){if(0===this.select.length){this.select.push("id");for(var a=0;a<this.popupStructure.length;a++)this.select.push(this.popupStructure[a].field)}this.store=new e({service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),contractName:"dynamic",resourceKind:this.resourceKind,select:this.select})}this.grid||(this.grid=new d({gridOptions:{store:this.store,cssClass:"groupsPopMenu",minRowsPerPage:40,columns:this.popupStructure,loadingMessage:this.loadingText,noDataMessage:this.noDataText,selectionMode:"single",query:this.where.replace(/~magicquote~/g,"'"),height:"250px",width:"300px"}}),this._menu.addChild(this.grid),this._menu.set("style",{width:"350px"}))},_findlinkPage:function(){if(!this.linkPage){var a=document.location.href;a.indexOf("?")>-1&&(this.linkPage=a.substring(0,a.indexOf("?")))}},destroy:function(){this.inherited(arguments),this.grid&&this.grid.destroy()}});return Sage.UI.Controls.SummaryAggregate.markupFactory=function(a,b,c){var d=function(a){var b=e.attr(a,"width")||"auto";return"auto"!=b&&"em"!=b.slice(-2)&&"%"!=b.slice(-1)&&(b=parseInt(b,10)+"px"),b};if(!a.popupStructure){var e=dojo,f=[],g=window.isMultiCurrencyEnabled();e.query("> span",b).forEach(function(a,b){var c={label:e.trim(e.attr(a,"name")||a.innerHTML),type:e.attr(a,"cellType")||!1,field:e.trim(e.attr(a,"field")||""),id:e.trim(e.attr(a,"id")||""),idField:e.trim(e.attr(a,"idField")||""),queryParams:e.trim(e.attr(a,"queryParams")||""),pageName:e.trim(e.attr(a,"pageName")||""),image:e.trim(e.attr(a,"icon")||""),multiCurrency:g,exchangeRateType:e.trim(e.attr(a,"exchangeRateType")||"")};e.hasAttr(a,"width")&&(c.width=d(a)),c.type=c.type?dojo.getObject(c.type):null,c.type&&c.type.markupFactory&&c.type.markupFactory(a,c),"&nbsp;"!==c.name&&""!==c.name||(c.name=c.field),f.push(c)}),a.popupStructure=f}return new c(a,b)},h})},"Sage/UI/SDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/Data/SDataSummaryViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.UI.SDataSummaryFormatterScope",[c],{constructor:function(a){dojo.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new d(this.requestConfiguration),Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)}})})},"Sage/Data/SDataSummaryViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){var e=c("Sage.Data.SDataSummaryRequestQueue",null,{select:[],resourceKind:"",fetching:!1,serviceName:"dynamic",include:[],service:null,useBatchRequest:!1,expandRecurrences:null,constructor:function(a){d.mixin(this,a),this.requestHash={},this.fetching=!1},add:function(a,b){var c=this.requestHash[a];if(c&&c.id!==b.id){c.duplicates||(c.duplicates=[]);for(var d=!1,e=0;e<c.duplicates.length;e++)c.duplicates[e].context.id===b.id&&(d=!0);d||c.duplicates.push({id:b.id,context:b})}else this.requestHash[a]=b},send:function(b,c){this.fetching=!0,this.service=a.getSDataService(this.serviceName);var e=this;if(this.useBatchRequest){var f=new Sage.SData.Client.SDataBatchRequest(this.service);f.setResourceKind(this.resourceKind),f.setQueryArg("select",this.select.join(",")),f.setQueryArg("include",this.include.join(",")),f.using(function(){for(var a in e.requestHash){var b=new Sage.SData.Client.SDataSingleResourceRequest(e.service);b.setResourceKind(e.resourceKind),b.setResourceSelector("'"+a+"'"),null!==e.expandRecurrences&&(b.uri.queryArgs._expandRecurrences=e.expandRecurrences),b.setQueryArg("include",e.include.join(",")),b.read()}}),f.commit({success:d.hitch(c,b,e),failure:d.hitch(this,this.requestFailed,e)})}else{var g=[];for(var h in this.requestHash)g.push("'"+h+"'");var i=new Sage.SData.Client.SDataResourceCollectionRequest(this.service),j="Id in ("+g.join(",")+")";i.setResourceKind(this.resourceKind),i.setQueryArg("select",this.select.join(",")),i.setQueryArg("where",j),i.setQueryArg("include",this.include.join(",")),i.read({success:d.hitch(c,b,e),failure:d.hitch(this,this.requestFailed,e)})}},requestFailed:function(a,b,c){}});return c("Sage.Data.SDataSummaryViewDataManager",null,{keyField:"$key",constructor:function(){this._createNewQueue()},_createNewQueue:function(){this.queue=new e,this.requestTimeout=!1},requestData:function(a,b,c){this.queue.fetching&&(this.oldQueue=this.queue,this._createNewQueue()),c.keyField&&(this.keyField=c.keyField),this.queue.select=c.select,this.queue.resourceKind=c.resourceKind,this.queue.serviceName=c.serviceName,this.queue.include=c.include,this.queue.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(this.queue.expandRecurrences=c.expandRecurrences),this.queue.add(a,b),this.requestTimeout&&window.clearTimeout(this.requestTimeout);var d=this.queue,e=this;this.requestTimeout=window.setTimeout(function(){d.send(e.receiveData,e)},250)},requestDataNoWait:function(a,b,c){var d=new e;c.keyField&&(this.keyField=c.keyField),d.select=c.select,d.resourceKind=c.resourceKind,d.serviceName=c.serviceName,d.include=c.include,d.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(d.expandRecurrences=c.expandRecurrences),d.add(a,b),d.send(this.receiveData,this)},receiveData:function(a,b){var c;for(c=0;c<b.$resources.length;c++){var d=b.$resources[c],e=d.id;e||(e=d[this.keyField],d.id=e);var f=a.requestHash[d.id];if(f)if(f.duplicates)try{if(!f.applied){f.applied=!0,f.set("entity",d);var g;for(g=0;g<f.duplicates.length;g++)try{f.duplicates[g].context.applied||(f.duplicates[g].context.applied=!0,f.duplicates[g].context.set("entity",d))}catch(a){}}}catch(a){}else try{f.applied||(f.applied=!0,f.set("entity",d))}catch(a){}}}})})},"Sage/UI/Controls/GridParts/Columns/ActivityType":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityType",null,{keyField:!1,defaultValue:"",format:function(d,e){if(!e)return this.defaultValue;var f=e.hasOwnProperty("Activity")&&"object"==typeof e.Activity?e.Activity:e;if(!f)return this.defaultValue;var g=a.getValue(f,"$key"),h=a.getValue(f,"Type"),i=!!e.hasOwnProperty("Status")&&e.Status,j='<span onclick="${0}" class="activity-type-link" ><div class="Global_Images icon16x16 ${1}" title="${2}"></div>&nbsp;${2}</span>',k=(a.getValue(f,"RecurrenceState"),b._getReccurenceFlag(f)),l="javascript:Sage.Link.editActivity('"+g+"', "+k+")";if(i){var m=a.getClientContextByKey("userID"),n=e.hasOwnProperty.User?e.User.$key:m;"asUnconfirmed"===i&&m===n&&(l="javascript:Sage.Link.confirmActivityFor('"+g+"', '"+m+"')")}else l="javascript:Sage.Link.editActivityIfConfirmed('"+g+"', "+k+")";return c.substitute(j,[l,b.getActivityImageClass(h,"small"),b.getActivityTypeName(h)])}})})},"Sage/UI/Controls/GridParts/Columns/ActivityDuration":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityDuration",null,{keyField:!1,format:function(c,d){if(!d)return this.defaultValue;var e="",f=d.hasOwnProperty("Activity")&&"object"==typeof d.Activity?d.Activity:d,g=a.getValue(f,"Duration");if(g){var h=a.getValue(f,"Timeless");e=b.formatDuration(g,h)}return e}})})},"Sage/UI/Controls/GridParts/Columns/ActivityName":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityName",null,{keyField:!1,format:function(c,d){if(!d)return this.defaultValue;var e=d.hasOwnProperty("Activity")&&"object"==typeof d.Activity?d.Activity:d,f=a.getValue(e,"ContactName"),g=a.getValue(e,"ContactId");if(b.isValidId(g))return'<a href="Contact.aspx?entityid='+g+'" >'+f+"</a>";var h=a.getValue(e,"LeadName"),i=a.getValue(e,"LeadId");return b.isValidId(i)?'<a href="Lead.aspx?entityid='+i+'" >'+h+"</a>":"<div></div> "}})})},"Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityConfirmStatus",null,{keyField:!1,format:function(b,c){if(!c)return this.defaultValue;var d="<div><div>";return"asUnconfirmed"===a.getValue(c,"Status")&&(d='<div class="Global_Images icon16x16 icon_unconfirmedActivity16x16"></div>'),d}})})},"Sage/UI/Controls/GridParts/Columns/ActivityAlarm":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityAlarm",null,{keyField:!1,format:function(a,b){var c="<div><div>";return a&&(c="<img src='images/icons/Alarm_16x16.gif'/>"),c}})})},"Sage/UI/Controls/GridParts/Columns/ActivityAttachment":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityAttachment",null,{keyField:!1,format:function(b,c){if(!c)return this.defaultValue;var d="<div><div>",e=c.hasOwnProperty("Activity")&&"object"==typeof c.Activity?c.Activity:c;return a.getValue(e,"Attachment")&&(d='<div class="Global_Images icon16x16 icon_attach_to_16"></div>'),d}})})},"Sage/UI/Controls/GridParts/Columns/ActivityRecurring":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityRecurring",null,{keyField:!1,format:function(b,c){if(!c)return this.defaultValue;var d="",e=c.hasOwnProperty("Activity")&&"object"==typeof c.Activity?c.Activity:c,f=a.getValue(e,"Recurring"),g=a.getValue(e,"RecurrenceState");return(f||g&&"rstOccurrence"===g)&&(d='<div class="Global_Images icon16x16 icon_recurring"></div>'),d}})})},"Sage/UI/Controls/GridParts/Columns/ActivityNameType":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityNameType",null,{keyField:!1,format:function(c,d){if(!d)return this.defaultValue;var e=d.hasOwnProperty("Activity")&&"object"==typeof d.Activity?d.Activity:d,f=a.getValue(e,"ContactId");if(b.isValidId(f))return"Contact";var g=a.getValue(e,"LeadId");return b.isValidId(g)?"Lead":""}})})},"Sage/UI/Controls/GridParts/Columns/ActivityAccount":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityAccount",null,{keyField:!1,format:function(c,d){if(!d)return this.defaultValue;var e=d.hasOwnProperty("Activity")&&"object"==typeof d.Activity?d.Activity:d,f=a.getValue(e,"AccountName"),g=a.getValue(e,"AccountId"),h="";b.isValidId(g)&&(h='<a href="Account.aspx?entityid='+g+'" >'+f+"</a>");var i=a.getValue(e,"LeadId");return b.isValidId(i)&&(h='<a href="Lead.aspx?entityid='+i+'" >'+f+"</a>"),h}})})},"Sage/UI/Controls/GridParts/Columns/ActivityLeader":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.ActivityLeader",null,{keyField:!1,format:function(b,c){if(!c)return this.defaultValue;var d,e=c.hasOwnProperty("Activity")&&"object"==typeof c.Activity?c.Activity:null;return d=e?a.getValue(e,"Leader"):c.hasOwnProperty("Leader")&&"object"==typeof c.Leader?c.Leader:c,a.getValue(d,"$descriptor")}})})},"Sage/MainView/ActivityMgr/AlarmListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Store/SData","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/ActivityDuration","Sage/UI/Controls/GridParts/Columns/ActivityName","Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus","Sage/UI/Controls/GridParts/Columns/ActivityAlarm","Sage/UI/Controls/GridParts/Columns/ActivityAttachment","Sage/UI/Controls/GridParts/Columns/ActivityRecurring","Sage/UI/Controls/GridParts/Columns/ActivityNameType","Sage/UI/Controls/GridParts/Columns/ActivityAccount","Sage/UI/Controls/GridParts/Columns/ActivityLeader","Sage/MainView/ActivityMgr/SnoozeButton","Sage/MainView/ActivityMgr/SnoozeOptions","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/dom-construct","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/UserActivityDetailSummary","dojo/i18n!./templates/nls/UserActivityListSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return u("Sage.MainView.ActivityMgr.AlarmListPanelConfig",[a],{constructor:function(){this._nlsResources=y,this._listId="alarms",this._resourceKind="userActivities",this.entityName="UserActivity",this._contextMenu="ActivityListContextMenu",this._scheduleContextMenu="ScheduleContextMenu",this._service=t.getSDataService("system"),this._structure=this._getStructure(),this._select=this._getSelect(),this._include=this._getInclude(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.toolBar=this._getToolBars(),this.keyField="$key",this.hasCompositeKey=!0,this.rebuildOnRefresh=!0,v.subscribe("/entity/activity/change",this._onListRefresh),v.subscribe("/entity/activity/delete",this._onListRefresh),v.subscribe("/entity/activity/create",this._onListRefresh),v.subscribe("/entity/userActivity/change",this._onListRefresh),v.subscribe("/entity/userActivity/delete",this._onListRefresh),v.subscribe("/entity/userActivity/create",this._onListRefresh),v.subscribe("/entity/activity/confirm",this._onListRefresh),v.subscribe("/entity/activity/decline",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("alarms")},_getSelect:function(){return["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/AlarmTime","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"]},_getInclude:function(){return["Activity","$descriptors"]},_getSort:function(){return[]},_getWhere:function(){return w.substitute("(User.Id eq '${0}' and Status ne 'asDeclned') and ((Alarm eq true and AlarmTime ne null and AlarmTime lt '${1}') or (Alarm eq null and AlarmTime eq null and Activity.Alarm eq true and Activity.AlarmTime lt '${1}'))",[this._currentUserId,Sage.Utility.Convert.toIsoStringFromDate(new Date)])},_getStructure:function(){var a=x.toDom("<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />"),b=x.toDom("<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />"),c=x.toDom("<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />"),d=this._nlsResources.colNameType||"Activity Type",e=this._nlsResources.colNameStartDate||"Start Date",f=this._nlsResources.colNameDuration||"Duration",l=this._nlsResources.colNameContact||"Name",r=this._nlsResources.colNameAccount||"Account/Company",s=this._nlsResources.colNameRegarding||"Regarding",t=this._nlsResources.colNamePriority||"Priority",u=this._nlsResources.colNameUserId||"Leader",v=this._nlsResources.colNameTypeName||"Type";return[{field:"Status",renderHeaderCell:function(){return c},type:k,width:20,className:"cell-contents-icon"},{field:"Activity.Attachment",renderHeaderCell:function(){return a},label:"Attachment",type:m,width:20,className:"cell-contents-icon"},{field:"Activity.Recurring",renderHeaderCell:function(){return b},type:n,width:20,className:"cell-contents-icon"},{field:"Activity.Type",label:d,type:h,width:90},{field:"Activity.StartDate",label:e,type:g,timelessField:"Activity.Timeless",width:100},{field:"Activity.Duration",label:f,type:i,width:40},{field:"Activity.ContactId",label:v,type:o,width:40},{field:"Activity.ContactName",label:l,type:j,width:200},{field:"Activity.AccountName",label:r,type:p,width:200},{field:"Activity.Description",label:s,get:function(a){for(var b=this.field.split("."),c=a,d=0;d<b.length;d++){if(null===c)return"";c=c[b[d]]}return c},width:100},{field:"Activity.Priority",label:t,get:function(a){for(var b=this.field.split("."),c=a,d=0;d<b.length;d++){if(null===c)return"";c=c[b[d]]}return c},width:40},{field:"Activity.Leader",label:u,type:q,width:200}]},_getSummaryConfig:function(){return{columns:[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}],layout:"layout",store:new f({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:!1,where:this._where}),keyField:"$key",rowHeight:170,rowsPerPage:10,formatterScope:this._getFormatterScope()}},_getDetailConfig:function(){this._getFormatterScope();return{resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/UserActivityDetailSummary.html"}},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:!0,expandRecurrences:!1}},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:!0,expandRecurrences:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new e({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getToolBars:function(){var a={items:[{custom:!0,imageClass:"icon_SnoozeAlarm_16x16",tooltip:this._nlsResources.SnoozeAlarm||"Snooze Alarm",onClick:function(){(new s).show()}},{custom:!0,imageClass:"icon_DismissAlarm_16x16",tooltip:this._nlsResources.DismissAlarm||"Dismiss Alarm",onClick:function(){Sage.Services.getService("ActivityService").dismissAlarm()}}]};return this.updateToolBar=!0,a},getTimelessProperty:function(a){return"Activity.Timeless"}})})},"Sage/MainView/ActivityMgr/SnoozeButton":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare"],function(a,b,c){return c("Sage.MainView.ActivityMgr.SnoozeButton",[a,b],{widgetsInTemplate:!0,_started:!1,widgetTemplate:new Simplate(['<span class="alarm-button">','<button data-dojo-type="dijit.form.ComboButton" data-dojo-attach-point="_snoozeButton" data-dojo-attach-event="onClick:_cboClick" class="" >','<div data-dojo-type="Sage.MainView.ActivityMgr.SnoozeOptions" data-dojo-attach-point="_snoozeOptions"></div>',"</button>","</span>"]),startup:function(){this._started||(this.inherited(arguments),this._started=!0)},_cboClick:function(){this._snoozeButton.openDropDown()},destroy:function(){this._snoozeButton.destroyRecursive()}})})},"Sage/MainView/ActivityMgr/SnoozeOptions":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/Dialog","dijit/form/Button","dijit/form/FilteringSelect","dojo/_base/declare","dojo/i18n!./nls/SnoozeOptions"],function(a,b,c,d,e,f,g,h){return g("Sage.MainView.ActivityMgr.SnoozeOptions",[c,a,b],{fiveMinText:"5 minutes",tenMinText:"10 minutes",fifteenMinText:"15 minutes",thirtyMinText:"30 minutes",oneHourText:"x1 hour",twoHourText:"2 hours",fourHourText:"4 hours",eightHourText:"8 hours",oneDayText:"1 day",twoDayText:"2 days",threeDayText:"3 days",oneWeekText:"1 week",twoWeekText:"2 weeks",snoozeText:"Snooze",snoozeByText:"Snooze by:",snoozeAllText:"Snooze All",snoozeTitle:"Snooze Alarms",widgetsInTemplate:!0,templateString:["<div>",'<div data-dojo-type="dijit.Dialog" id="_snoozeDialog" title="${snoozeTitle}" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:hide">','<div class="alarm-snoozebar" dojoAttachPoint="_snoozebar">',"<table>","<tr>",'<td class="snoozeText">${snoozeByText}</td>','<td class="snoozeBy">','<select name="selectSnoozeBy" dojoAttachPoint="_selSnoozeBy" data-dojo-type="dijit.form.FilteringSelect">','<option value="5" selected="selected">${fiveMinText}</option>','<option value="10" >${tenMinText}</option>','<option value="15" >${fifteenMinText}</option>','<option value="30" >${thirtyMinText}</option>','<option value="60" >${oneHourText}</option>','<option value="120" >${twoHourText}</option>','<option value="240" >${fourHourText}</option>','<option value="480" >${eightHourText}</option>','<option value="1440" >${oneDayText}</option>','<option value="2880" >${twoDayText}</option>','<option value="4320" >${threeDayText}</option>','<option value="10080" >${oneWeekText}</option>','<option value="20160" >${twoWeekText}</option>',"</select>","</td>",'<td class="snoozeActions">','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_snooze">${snoozeText}</button>',"</td>","</tr>","</table>","</div>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,h)},show:function(){this._showWithUserOptions()},_showWithUserOptions:function(){var a=Sage.Services.getService("UserOptions");a&&a.getByCategory("ActivityAlarm",this._receivedOptions,this)},_receivedOptions:function(a){for(var b=a.$resources,c=0;c<b.length;c++){var d=b[c];if("DEFAULTSNOOZE"===d.name.toUpperCase()){var e=d.value;this._selSnoozeBy.setValue(e)}}this._dialog.show()},hide:function(){this.destroy()},destroy:function(){this._dialog.destroyRecursive()},_snooze:function(a){var b=Sage.Services.getService("ActivityService"),c=this._getNewAlarmTimeOptions();this.hide(),b.snooze(null,c)},_snoozeAll:function(){},_getNewAlarmTime:function(){var a=this._getNewAlarmTimeOptions(),b=dojo.date.add(new Date,a.interval,a.duration);return Sage.Utility.Convert.toIsoStringFromDate(b)},_getNewAlarmTimeOptions:function(){var a=5,b="minute",c=this._selSnoozeBy.get("displayedValue"),d=this._selSnoozeBy.get("value");switch(d){case this.tenMinText:a=10;break;case this.fifteenMinText:a=15;break;case this.thirtyMinText:a=30;break;case this.oneHourText:a=1,b="hour";break;case this.twoHourText:a=2,b="hour";break;case this.fourHourText:a=4,b="hour";break;case this.eightHourText:a=8,b="hour";break;case this.oneDayText:a=1,b="day";break;case this.twoDayText:a=2,b="day";break;case this.threeDayText:a=3,b="day";break;case this.oneWeekText:a=1,b="week";break;case this.twoWeekText:a=2,b="week";break;default:a=d}return{name:c,duration:a,interval:b}},_showSnooze:function(){}})})},"Sage/MainView/ActivityMgr/AllOpenListPanelConfig":function(){
define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SDataSummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/ActivityDuration","Sage/UI/Controls/GridParts/Columns/ActivityName","Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus","Sage/UI/Controls/GridParts/Columns/ActivityAlarm","Sage/UI/Controls/GridParts/Columns/ActivityAttachment","Sage/UI/Controls/GridParts/Columns/ActivityRecurring","Sage/UI/Controls/GridParts/Columns/ActivityNameType","Sage/UI/Controls/GridParts/Columns/ActivityAccount","Sage/UI/Controls/GridParts/Columns/ActivityLeader","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/dom-construct","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/AllOpenListSummary","dojo/i18n!./templates/nls/AllOpenDetailSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return r("Sage.MainView.ActivityMgr.AllOpenListPanelConfig",[a],{constructor:function(){this._nlsResources=u,this._listId="allOpen",this._resourceKind="activities",this.entityName="Activity",this._contextMenu="ActivityListContextMenu",this._scheduleContextMenu="ScheduleContextMenu",this._service=q.getSDataService("system"),this._structure=this._getStructure(),this._select=this._getSelect(),this._include=this._getInclude(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.list.selectionMode="single",this.summary=this._getSummaryConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),s.subscribe("/entity/activity/change",this._onListRefresh),s.subscribe("/entity/activity/delete",this._onListRefresh),s.subscribe("/entity/activity/create",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("allopen")},_getSelect:function(){return["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader","RecurrenceState","AttendeeCount"]},_getInclude:function(){return["$descriptors"]},_getSort:function(){return[{attribute:"StartDate",descending:!0}]},_getWhere:function(){return'(Type ne "atLiterature" )'},_getStructure:function(){var a=t.toDom("<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />"),b=t.toDom("<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />"),c=t.toDom("<img src='images/icons/Alarm_16x16.gif' title='"+this._nlsResources.colNameAlarm+"' alt='"+this._nlsResources.colNameAlarm+"' />"),d=this._nlsResources.colNameType||"Type",e=this._nlsResources.colNameStartDate||"Start Date",j=this._nlsResources.colNameDuration||"Duration",q=this._nlsResources.colNameAccount||"Account",r=this._nlsResources.colNameRegarding||"Regarding",s=this._nlsResources.colNamePriority||"Priority",u=this._nlsResources.colNameUserId||"Leader",v=this._nlsResources.colNameTypeName||"Type",w=this._nlsResources.colNameContactName||"Name",x=this._nlsResources.colNameAssociationCount||"Participant Count";return[{field:"Alarm",renderHeaderCell:function(){return c},type:k,width:20,className:"cell-contents-icon"},{field:"Attachment",renderHeaderCell:function(){return a},label:"Attachment",type:l,width:20,className:"cell-contents-icon"},{field:"Recurring",renderHeaderCell:function(){return b},type:m,width:20,className:"cell-contents-icon"},{field:"Type",label:d,type:g,width:90},{field:"StartDate",label:e,type:f,timelessField:"Timeless",width:100},{field:"Duration",label:j,type:h,width:40},{field:"ContactId",label:v,type:n,width:40},{field:"ContactName",label:w,type:i,width:200},{field:"AccountName",label:q,type:o,width:200},{field:"Description",label:r,width:100},{field:"Priority",label:s,width:40},{field:"Leader",label:u,type:p,width:200},{field:"AttendeeCount",label:x,width:90}]},_getDetailConfig:function(){return{resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/AllOpenDetailSummary.html"}},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader/$descriptor","Location","TicketId","TicketNumber","OpportunityId","OpportunityName","Notes","RecurrenceState","PhoneNumber","AttendeeCount"],include:["$descriptors"],useBatchRequest:!0}},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader/$descriptor","Location","TicketId","TicketNumber","OpportunityId","OpportunityName","LongNotes","RecurrenceState","PhoneNumber","AttendeeCount"],include:["$descriptors"],useBatchRequest:!0}},_getFormatterScope:function(){return new d({templateLocation:"MainView/ActivityMgr/templates/AllOpenListSummary.html",resetDataManager:!0,requestConfiguration:this._getSummaryListRequestConfig()})},_getToolBars:function(){return{items:[]}},getTimelessProperty:function(a){return"Timeless"}})})},"Sage/MainView/ActivityMgr/ConfirmListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/ActivityType","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/i18n!./nls/ConfirmListPanelConfig","dojo/i18n!./templates/nls/ConfirmationListSummary","dojo/i18n!./templates/nls/ConfirmationDetailSummary"],function(a,b,c,d,e,f,g,h,i,j,k){return h("Sage.MainView.ActivityMgr.ConfirmListPanelConfig",[a],{constructor:function(){this._nlsResources=k,this._listId="confirmations",this._resourceKind="UserNotifications",this.entityName="UserNotification",this._contextMenu="ConfimationListContextMenu",this._scheduleContextMenu="ScheduleContextMenu",this._structure=this._getStructure(),this._select=this._getSelect(),this._include=this._getInclude(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.summary=this._getSummaryConfig(),this.toolBar=this._getToolBars(),i.subscribe("/entity/userNotification/change",this._onListRefresh),i.subscribe("/entity/userNotification/delete",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("confirmations")},_getSelect:function(){return["$key","Type","ActivityId","Activity/Type","Activity/StartDate","Activity/Description","FromUserId","ToUserId","FromUser/UserInfo/UserName","ToUser/UserInfo/UserName"]},_getInclude:function(){return["UserInfo"]},_getSort:function(){return[{attribute:"Activity.StartDate",descending:!0}]},_getWhere:function(){return this._currentUserId?j.substitute('ToUser.Id eq "${0}" ',[this._currentUserId]):""},_getStructure:function(){var a=this._nlsResources.colNameType||"Activity Type",d=this._nlsResources.colNameNotification||"Notification",e=this._nlsResources.colNameStartDate||"Start Date",i=this._nlsResources.colNameRegarding||"Regarding",j=this._nlsResources.colNameFromUser||"From",k=this._nlsResources.colNameToUser||"To User";return[{field:"Type",label:d,type:h("Sage.MainView.ActivityMgr.ConfirmListPanelConfig.ActivityConfirmCell",null,{format:function(a,d){var e=b.getValue(d,"$key"),f=b.getValue(d,"Type");return"<a href='javascript:Sage.Link.editConfirmation(\""+e+"\")' >"+c.getConfirmStatusName(f)+"</a>"}}),width:90},{field:"Activity.Type",label:a,type:g,width:90},{field:"Activity.StartDate",label:e,type:f,timelessField:"Timeless",width:150},{field:"Activity.Description",label:i,width:300},{field:"FromUser.UserInfo.UserName",label:j,width:100},{field:"ToUser.UserInfo.UserName",label:k,width:100}]},_getDetailConfig:function(){this._getFormatterScope();return{resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"ConfirmationDetailSummary_query"},templateLocation:"MainView/ActivityMgr/templates/ConfirmationDetailSummary.html",postProcessCallBack:!1}},_getFormatterScope:function(){return new d({requestConfiguration:{mashupName:"ActivityManager",queryName:"ConfirmationListSummary_query"},templateLocation:"MainView/ActivityMgr/templates/ConfirmationListSummary.html"})},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/ActivityMgr/EventListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/ActivityDuration","Sage/UI/Controls/GridParts/Columns/ActivityName","Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus","Sage/UI/Controls/GridParts/Columns/ActivityAlarm","Sage/UI/Controls/GridParts/Columns/ActivityAttachment","Sage/UI/Controls/GridParts/Columns/ActivityRecurring","Sage/UI/Controls/GridParts/Columns/ActivityNameType","Sage/UI/Controls/GridParts/Columns/ActivityAccount","Sage/UI/Controls/GridParts/Columns/ActivityLeader","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/dom-construct","dojo/i18n!./nls/EventListPanelConfig","dojo/i18n!./templates/nls/EventSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return q("Sage.MainView.ActivityMgr.EventListPanelConfig",[a],{constructor:function(){this._nlsResources=u,this._listId="events",this._resourceKind="events",this.entityName="Event",this._contextMenu="EventListContextMenu",this._securedAction="ActivitiesViewEvents",this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.summary=this._getSummaryConfig(),this.toolBar=this._getToolBars(),r.subscribe("/entity/event/create",this._onListRefresh),r.subscribe("/entity/event/change",this._onListRefresh),r.subscribe("/entity/event/delete",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("events")},_getSelect:function(){return["$key","Type","StartDate","EndDate","Location","Description","User/UserInfo/UserName","User/UserAccessToOtherCal/OthersAccessToUserCal/Id"]},_getSort:function(){return[{attribute:"StartDate",descending:!0}]},_getWhere:function(){return this._currentUserId?s.substitute('(User.UserAccessToOtherCal.OthersAccessToUserCal.Id eq "${0}")',[this._currentUserId]):""},_getStructure:function(){var a=this._nlsResources.colNameType||"Type",b=this._nlsResources.colNameStartDate||"Start Date",c=this._nlsResources.colNameEndDate||"End Date",d=this._nlsResources.colNameDescription||"Description",e=this._nlsResources.colNameUser||"User",g=this._nlsResources.colNameLocation||"Location";return q("Sage.MainView.ActivityMgr.EventListPanelConfig.EditEventCell",null,{format:function(a,b){return"<a href='javascript:Sage.Link.editEvent(\""+Sage.Utility.getValue(b,"$key")+"\")' >Edit</a>"}}),q("Sage.MainView.ActivityMgr.EventListPanelConfig.EventTypeCell",null,{format:function(a,b){return"<a href='javascript:Sage.Link.editEvent(\""+Sage.Utility.getValue(b,"$key")+"\")' >"+Sage.Utility.getValue(b,"Type")+"</a>"}}),[{field:"Type",label:a,type:Sage.MainView.ActivityMgr.EventListPanelConfig.EventTypeCell,width:100},{field:"StartDate",label:b,type:f,dateOnly:!0,utc:!1,width:100},{field:"EndDate",label:c,type:f,dateOnly:!0,utc:!1,width:100},{field:"User.UserInfo.UserName",label:e,width:120},{field:"Location",label:g,width:200},{field:"Description",label:d,width:300}]},_getDetailConfig:function(){this._getFormatterScope();return{resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"EventSummary_query"},templateLocation:"MainView/ActivityMgr/templates/EventSummary.html",postProcessCallBack:!1}},_getFormatterScope:function(){return new d({requestConfiguration:{mashupName:"ActivityManager",queryName:"EventSummary_query"},templateLocation:"MainView/ActivityMgr/templates/EventSummary.html"})},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/ActivityMgr/LitRequestListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Controls/GridParts/Columns/DateTime","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/i18n!./nls/LitRequestListPanelConfig","dojo/i18n!./templates/nls/LitRequestSummary"],function(a,b,c,d,e,f,g,h,i,j){return g("Sage.MainView.ActivityMgr.LitRequestListPanelConfig",[a],{constructor:function(){this._nlsResources=j,this._listId="literature",this._resourceKind="litRequests",this.entityName="LitRequest",this._contextMenu="LitRequestListContextMenu",this._securedAction="ActivitiesViewLitratureRequests",this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.toolBar=this._getToolBars(),h.subscribe("/entity/litRequest/change",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("literature")},_getSelect:function(){return["$key","ContactName","Contact/$key","Description","FillDate","FillStatus","Options","Priority","RequestDate","SendDate","SendVia","TotalCost","FillUser/UserInfo/UserName","RequestUser/UserInfo/UserName","Contact/AccountName","Contact/Address/PostalCode","Contact/Account/AccountId","ReqestUser/$key"]},_getSort:function(){return[{attribute:"RequestDate",descending:!0}]},_getWhere:function(){var a=this._nlsResources.litFillStatusComplete||"Completed";return this._currentUserId?i.substitute('(RequestUser.Id eq "${0}") and (FillStatus ne "${1}"  or FillStatus eq null )',[this._currentUserId,a]):""},_getStructure:function(){var a=this._nlsResources.colNameView||"View",c=this._nlsResources.colNameContact||"Contact",d=this._nlsResources.colNameDescription||"Description",e=this._nlsResources.colNameFillStatus||"Status",h=this._nlsResources.colNamePriority||"Priority",i=this._nlsResources.colNameReqestDate||"Request Date",j=this._nlsResources.colNameSendDate||"Send Date",k=this._nlsResources.colNameSendVia||"Send Via",l=this._nlsResources.colNameTotalCost||"Total Cost",m=this._nlsResources.colNameReqestUser||"Request User",n=this._nlsResources.colNameAccount||"Account",o=this._nlsResources.colNamePostalCode||"Postal Code";return g("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitViewCell",null,{format:function(c,d){return'<a href="LitRequest.aspx?entityid='+b.getValue(d,"$key")+'&modeid=Detail" >'+a+"</a>"}}),g("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitContactCell",null,{format:function(a,b){return'<a href="Contact.aspx?entityid='+Sage.Utility.getValue(b,"Contact.$key")+'&modeid=Detail" >'+Sage.Utility.getValue(b,"ContactName")+"</a>"}}),g("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitAccountCell",null,{format:function(a,b){return'<a href="Account.aspx?entityid='+Sage.Utility.getValue(b,"Contact.Account.$key")+'&modeid=Detail" >'+Sage.Utility.getValue(b,"Contact.AccountName")+"</a>"}}),[{field:"$key",label:"",type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitViewCell,width:60},{field:"RequestDate",label:i,type:f,dateOnly:!0,width:90},{field:"Priority",label:h,width:60},{field:"Description",label:d,width:200},{field:"ContactName",label:c,type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitContactCell,width:200},{field:"Contact.AccountName",label:n,type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitAccountCell,width:200},{field:"SendDate",label:j,type:f,dateOnly:!0,width:90},{field:"SendVia",label:k,width:60},{field:"TotalCost",label:l,width:60},{field:"FillStatus",label:e,width:60},{field:"RequestUser.UserInfo.UserName",label:m,width:90},{field:"Contact.Address.PostalCode",label:o,width:60}]},_getDetailConfig:function(){return{resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"LitRequestSummary_query"},templateLocation:"MainView/ActivityMgr/templates/LitRequestSummary.html",postProcessCallBack:!1}},_getFormatterScope:function(){return new d({requestConfiguration:{mashupName:"ActivityManager",queryName:"LitRequestSummary_query"},templateLocation:"MainView/ActivityMgr/templates/LitRequestSummary.html"})},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/ActivityMgr/PastDueListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Store/SData","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/ActivityDuration","Sage/UI/Controls/GridParts/Columns/ActivityName","Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus","Sage/UI/Controls/GridParts/Columns/ActivityAlarm","Sage/UI/Controls/GridParts/Columns/ActivityAttachment","Sage/UI/Controls/GridParts/Columns/ActivityRecurring","Sage/UI/Controls/GridParts/Columns/ActivityNameType","Sage/UI/Controls/GridParts/Columns/ActivityAccount","Sage/UI/Controls/GridParts/Columns/ActivityLeader","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/dom-construct","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/UserActivityDetailSummary","dojo/i18n!./templates/nls/UserActivityListSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return s("Sage.MainView.ActivityMgr.PastDueListPanelConfig",[a],{constructor:function(){this._nlsResources=w,this._listId="pastdue",this._resourceKind="useractivities",this.entityName="UserActivity",this._contextMenu="ActivityListContextMenu",this._scheduleContextMenu="ScheduleContextMenu",this._service=r.getSDataService("system"),this._structure=this._getStructure(),this._select=this._getSelect(),this._include=this._getInclude(),this._sort=this._getSort(),this._where=this._getWhere(),this._store=this._getStore(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.toolBar=this._getToolBars(),this.keyField="$key",this.hasCompositeKey=!0,this.rebuildOnRefresh=!0,t.subscribe("/entity/activity/change",this._onListRefresh),t.subscribe("/entity/activity/delete",this._onListRefresh),t.subscribe("/entity/activity/create",this._onListRefresh),t.subscribe("/entity/userActivity/change",this._onListRefresh),t.subscribe("/entity/userActivity/delete",this._onListRefresh),t.subscribe("/entity/userActivity/create",this._onListRefresh),t.subscribe("/entity/activity/confirm",this._onListRefresh),t.subscribe("/entity/activity/decline",this._onListRefresh),t.subscribe("/entity/userNotification/delete",this._onListRefresh)},_onListRefresh:function(a){Sage.Services.getService("ActivityService").refreshList("pastdue")},_getSelect:function(){return["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"]},_getInclude:function(){return["Activity","$descriptors"]},_getSort:function(){return[]},_getWhere:function(){var a=new Date,b=Sage.Utility.Convert.toIsoStringFromDate(a),d=c.formatTimelessEndDate(a,"day",-1);return u.substitute("(User.Id eq '${0}') and ( Activity.Type ne \"atLiterature\" ) and ((Alarm eq 'false') or (Alarm eq null)) and ((Activity.StartDate lt '${1}') and ((Activity.Timeless eq 'false') or (Activity.Timeless eq null )) or ((Activity.StartDate lt '${2}') and (Activity.Timeless eq 'true' )))",[this._currentUserId,b,d])},_getStructure:function(){var a=v.toDom("<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />"),b=v.toDom("<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />"),c=v.toDom("<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />"),d=this._nlsResources.colNameType||"Activity Type",e=this._nlsResources.colNameStartDate||"Start Date",f=this._nlsResources.colNameDuration||"Duration",l=this._nlsResources.colNameContact||"Name",r=this._nlsResources.colNameAccount||"Account/Company",s=this._nlsResources.colNameRegarding||"Regarding",t=this._nlsResources.colNamePriority||"Priority",u=this._nlsResources.colNameUserId||"Leader",w=this._nlsResources.colNameTypeName||"Type";return[{field:"Status",renderHeaderCell:function(){return c},type:k,width:20,className:"cell-contents-icon"},{field:"Activity.Attachment",renderHeaderCell:function(){return a},label:"Attachment",type:m,width:20,className:"cell-contents-icon"},{field:"Activity.Recurring",renderHeaderCell:function(){return b},type:n,width:20,className:"cell-contents-icon"},{field:"Activity.Type",label:d,type:h,width:90},{field:"Activity.StartDate",label:e,type:g,timelessField:"Activity.Timeless",width:100},{field:"Activity.Duration",label:f,type:i,width:40},{field:"Activity.ContactId",label:w,type:o,width:40},{field:"Activity.ContactName",label:l,type:j,width:200},{field:"Activity.AccountName",label:r,type:p,width:200},{field:"Activity.Description",label:s,width:100},{field:"Activity.Priority",label:t,width:40},{field:"Activity.Leader",label:u,type:q,width:200}]},_getSummaryConfig:function(){return{columns:[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}],layout:"layout",store:new f({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:!1,where:this._where}),keyField:"$key",rowHeight:120,rowsPerPage:10,formatterScope:this._getFormatterScope()}},_getDetailConfig:function(){this._getFormatterScope();return{resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/UserActivityDetailSummary.html"}},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:!0,expandRecurrences:!1}},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:!0,expandRecurrences:!1}},_getFormatterScope:function(){return new e({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:!0,requestConfiguration:this._getSummaryListRequestConfig()})},_getToolBars:function(){return{items:[]}},getTimelessProperty:function(a){return"Activity.Timeless"}})})},"Sage/MainView/ActivityMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Utility","Sage/Utility/Activity","Sage/Data/SDataStore","Sage/Services/ActivityService","Sage/MainView/ActivityMgr/ActivityGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f,g,h,i,j,k,l){return i("Sage.MainView.ActivityMgr.FilterConfigurationProvider",[b,a],{_configuration:null,_hasLayoutConfiguration:!1,_hasFilterHiddenConfiguration:!1,_currentUserId:!1,serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"},systemDataService:{type:"sdata",name:"system"}},constructor:function(a){this.inherited(arguments),"Sage.MainView.ActivityMgr.ActivityGroupContextService"!==this.groupContextService.declaredClass&&(Sage.Services.removeService("ClientGroupContext"),this.groupContextService=new g,Sage.Services.addService("ClientGroupContext",this.groupContextService));var b=Sage.Services.getService("ClientContextService");b&&b.containsKey("userID")&&(this._currentUserId=b.getValue("userID")),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},_onGroupContextChanged:function(){this.onConfigurationChange()},onConfigurationChange:function(){},_createConfiguration:function(a,b){var c=this.groupContextService.getCurrentListConfig();this._configuration=c.getFilterConfig(this.metaDataService,a,b),this._configuration||(this._configuration={}),this._configuration.getFilterManager=function(){var a=h.byId("list");return a&&a.get("filterManager")},this._hasLayoutConfiguration=!0},requestConfiguration:function(a){this._configuration={},this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1,this._onRequestConfigurationSuccess(a,null),this._getHiddenFilters(a)},_onRequestConfigurationSuccess:function(a,b){this._createConfiguration(b,a),this._callOptionsSuccess(a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},getFilterFormatter:function(a){return!(!a||"Duration"!==a.filterName)&&d.formatDuration},ModifyFilterQuery:function(a,b){var c=!1;return b&&(c=!0),"Activity.Duration"===a.propertyName?b=c?"("+b+") and (Activity.Timeless ne true)":"(Activity.Timeless ne true)":"Duration"===a.propertyName&&(b=c?"("+b+") and (Timeless ne true)":"(Timeless ne true)"),b},_getHiddenFilters:function(a){var b=this._getHiddenFiltersKey();b&&j.getHiddenFilters(b,k.hitch(this,this._onHiddenFiltersFetchComplete,a||{}),function(a){})},_getHiddenFiltersKey:function(){return j.getHiddenFiltersKey()},_onHiddenFiltersFetchComplete:function(a,b){b&&b.response&&b.response.value&&(this._configuration._hiddenFilters=l.parse(b.response.value),this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array&&(this._configuration._hiddenFilters={})),this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey(),this._hasFilterHiddenConfiguration=!0,this._callOptionsSuccess(a)},_callOptionsSuccess:function(a){this._hasLayoutConfiguration&&this._hasFilterHiddenConfiguration&&a.success&&(a.success.call(a.scope||this,this._configuration,a,this),this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1)}})})},"Sage/Extensions/Activity/ActivityListCustomTabs/CustomTabsConfig":function(){define([],function(){return{}})},"Sage/Extensions/Activity/ListPanelOverrides/ListPanelOverridesConfig":function(){define([],function(){return{overrideConfigs:[]}})},"Sage/Extensions/ActivityRequirements":function(){define(["Sage/Extensions/Activity/ListPanelOverrides/ActivityListPanelConfig","Sage/Extensions/Activity/ListPanelOverrides/AllOpenListPanelConfig"],function(){return!0})},"Sage/Extensions/Activity/ListPanelOverrides/ActivityListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/ActivityListPanelConfig","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/ActivityListPanelConfig"],function(a,b,c,d){return b("Sage.Extensions.Activity.ListPanelOverrides.ActivityListPanelConfig",[a],{constructor:function(){c.mixin(this,d),this._select.push("Activity/AttendeeCount"),this._structure.push({field:"Activity.AttendeeCount",name:this.colNameAssociationCount,width:"90px"})}})})},"Sage/Extensions/Activity/ListPanelOverrides/AllOpenListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/AllOpenListPanelConfig","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/AllOpenListPanelConfig"],function(a,b,c,d){return b("Sage.Extensions.Activity.ListPanelOverrides.AllOpenListPanelConfig",[a],{constructor:function(){c.mixin(this,d),this._select.push("AttendeeCount"),this._structure.push({field:"AttendeeCount",name:this.colNameAssociationCount,width:"90px"})}})})},"Sage/MainView/SecurityManager":function(){define(["dijit/registry","dijit/form/RadioButton","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/i18n!./nls/SecurityManager","dojo/query","dojo/string","Sage/Data/WritableSDataStore","Sage/MainView/SecurityMgr/SecurityManagerGroupContext","Sage/Store/SData","Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/Columns/RadioGroup"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return d("Sage.MainView.SecurityManager",m,{_profilesStore:!1,_currentProfileId:!1,_currentProfileDescription:!1,_profileNameCache:{},store:!1,entityType:"securityProfileColumns",mainGridCache:[],constructor:function(a){e.mixin(this,g);var b=Sage.Services.getService("ClientGroupContext");if(b&&"Sage.MainView.SecurityMgr.SecurityManagerGroupContext"==b.declaredClass||(Sage.Services.removeService("ClientGroupContext"),b=new k,Sage.Services.addService("ClientGroupContext",b)),b){var d=b.getContext();this._currentProfileId=d.CurrentGroupID,this._currentProfileDescription=d.CurrentName}this.service=Sage.Data.SDataServiceRegistry.getSDataService("system"),this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:this.securityManagerText+": ${0}"},c.subscribe("/group/context/changed",this,"onConfigurationChange")},_getListPanelConfig:function(){var d=this,g=a.byId("refreshBtn");this.refreshEvent||(this.refreshEvent=c.connect(g,"onClick",this,function(){a.byId("list")._markClean()}));var j=function(a,c,f,g,h){var i=c.access===a;new b({checked:i,shouldPublishMarkDirty:!1,name:c.$key+"_access",value:a,onChange:function(b){c=e.mixin(c,{type:a});var f=e.mixin(e.clone(c),{access:a}),h=-1;if(b){for(var i=0;i<d.mainGridCache.length&&-1===h;i++){var j=d.mainGridCache[i];c.$key===j.old.$key&&(h=i)}if(-1===h)d.mainGridCache.push({node:g,old:c,new:f});else{var k=d.mainGridCache[h];k.old.access===f.access?d.mainGridCache.splice(h,1):k.new=f}}}}).placeAt(g)},k=[{field:"table",label:this.tableText,width:"155px"},{field:"entity",label:this.entityText,width:"130px"},{field:"column",label:this.columnText,width:"140px"},{field:"property",label:this.propertyText,width:"100px"},{field:"access",label:this.readWriteText,renderCell:e.hitch(this,j,"ReadWrite"),width:"70px",sortable:!1},{field:"access",label:this.readOnlyText,renderCell:e.hitch(this,j,"ReadOnly"),width:"70px",sortable:!1},{field:"access",label:this.noAccessText,renderCell:e.hitch(this,j,"NoAccess"),
width:"70px",sortable:!1}],m=this._currentProfileId?i.substitute('profile.id eq "${0}"',[this._currentProfileId]):"";return this.store?this.store.where=m:this.store=new l({id:"securityProfileColumns",service:this.service,isSecurityManager:!0,resourceKind:"securityProfileColumns",include:[],select:["table","entity","column","property","access"],sort:[{attribute:"table",descending:!0}],where:m}),this.listPanelConfiguration={list:{structure:k,store:this.store,selectionMode:"none",id:"securityManagerListConfig",queryOptions:{sort:"table"}},_sort:[{attribute:"table"}],detail:!1,summary:!1,toolBar:{items:[{icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Save_16x16",title:this.saveText,onClick:e.hitch(this,function(){for(var a=0;a<this.mainGridCache.length;a++){var b=this.mainGridCache[a].new;this.store.put(b,{create:!1})}this.mainGridCache=[]})},{icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Reset_16x16",title:this.resetText,onClick:e.hitch(this,function(){for(var b=0;b<this.mainGridCache.length;b++){var c=this.mainGridCache[b].old;h('[name="'+c.$key+'_access"]').forEach(function(b){b=a.getEnclosingWidget(b).set("value",b.value===c.access,!1)})}this.mainGridCache=[]})}]}},f.set(a.byId("addGroupButton").domNode,"display","none"),this.listPanelConfiguration},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._getListPanelConfig(),this)},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)},onConfigurationChange:function(a){this._currentProfileId=a.current.CurrentGroupID,this._currentProfileDescription=a.current.CurrentName,this._currentProfileId&&12===this._currentProfileId.length&&(this._profileNameCache&&this._profileNameCache.hasOwnProperty(this._currentProfileId)?this._setUIForNewGroup(!1):this._profilesStore.fetch({onComplete:e.hitch(this,"_setUIForNewGroup")}))},onTitlePaneConfigurationChange:function(){},_setUIForNewGroup:function(a){var b;if(a)for(this._profileNameCache={},b=0;b<a.length;b++)this._profileNameCache[a[b].$key]=a[b].$descriptor;var c=dijit.byId("titlePane");c&&c.set("title",this._profileNameCache[this._currentProfileId]);var d=dijit.byId("GroupTabs");if(d){var e=d.getChildren();for(b=0;b<e.length;b++)if(e[b].id===this._currentProfileId){d.selectChild(e[b],!1);break}}},_getTabsConfig:function(){return this._setProfilesStore(),this._profilesStore.fetch({onComplete:e.hitch(this,"_setUIForNewGroup")}),{store:this._profilesStore,selectedTabId:this._currentProfileId,tabKeyProperty:"$key",tabNameProperty:"profileDescription",fetchParams:{},staticTabs:[],onTabSelect:function(b){var c=Sage.Services.getService("ClientGroupContext");if(c){var d=c.getContext(),e=b.id||b;if(d.CurrentGroupID===e)return;a.byId("list")._markClean(),c.setCurrentGroup(e,b.title)}},onTabClose:!1}},_setProfilesStore:function(){this._profilesStore=this._profilesStore||new j({id:"securityProfilesstore",service:this.service,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"],orderby:"profileDescription"})},_getMenuConfig:function(){return this._setProfilesStore(),{id:"profileMenu",img:"images/icons/Groups_16x16.gif",text:this.profilesText,tooltip:this.profilesText,width:"300px",items:[{fn:this._getProfileMenuGrid,scope:this}]}},_getProfileMenuGrid:function(){return new Sage.UI.GridMenuItem({gridOptions:{id:"profileGridInMenu",cssClass:"groupsPopMenu",store:new l({service:this._profilesStore.service,resourceKind:this._profilesStore.resourceKind,include:this._profilesStore.include,sort:this._profilesStore.orderby,select:this._profilesStore.select}),minRowsPerPage:40,columns:[{field:"profileDescription",label:this.descriptionText,width:"290px"}],selectionMode:"single",query:{},height:"400px",width:"350px",onRowClick:function(b,c,d){var e=c.data,f=Sage.Services.getService("ClientGroupContext");if(f){if(f.getContext().CurrentGroupID===e.$key)return;for(var g=a.byId("GroupTabs"),h=g.getChildren(),i=0;i<h.length;i++)if(h[i].id==e.$key)return g.selectChild(h[i]),void f.setCurrentGroup(e.$key,e.profileDescription)}}}})}})})},"Sage/MainView/SecurityMgr/SecurityManagerGroupContext":function(){define(["Sage/Groups/GroupContextService","dojo/_base/declare"],function(a,b){return b("Sage.MainView.SecurityMgr.SecurityManagerGroupContext",a,{_currentContext:{},constructor:function(){dojo.mixin(this._currentContext,this._emptyContext)},getContext:function(){return null===this._currentContext.CurrentGroupID&&this.requestContext(),this._currentContext},requestContext:function(){!0!==this._isRetrievingContext&&this.setContext("PROF00000001","Read/Write Default")},setContext:function(a,b){this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=b,this._isRetrievingContext=!1},setCurrentGroup:function(a,b){this.setContext(a,b),this.onCurrentGroupChanged({current:this._currentContext})}})})},"Sage/UI/Columns/RadioGroup":function(){define(["dojox/grid/cells/_base","dojo/_base/declare"],function(a,b){return b("Sage.UI.Columns.RadioGroup",dojox.grid.cells.AlwaysEdit,{options:null,values:null,labels:[],constructor:function(a){if(this.values=this.values||this.options,this.labels&&this.labels.length>0){for(var b=['<table style="width:100%"><tr>'],c=0;c<this.labels.length;c++)b.push('<td style="text-align: center;">'+this.labels[c]+"</td>");this.name=b.join("")}},formatEditing:function(a,b){for(var c=['<table style="width:100%"><tr>'],d=0;d<this.values.length;d++)c.push(['<td style="text-align: center;">','<input type="radio"',' id="'+this.values[d]+"_"+b+'"',' name="'+this.field+"_"+b+'"',' value="'+this.values[d]+'"',a===this.values[d]?' checked="checked" />':" />"].join(""));return c.push("</tr></table>"),c.join("")},doclick:function(a){if("INPUT"===a.target.tagName){this.grid.edit.applyCellEdit(a.target.value,this,a.rowIndex)}}})})},"Sage/MainView/ActivityMgr/ActivityCalendar":function(){define(["Sage/Data/WritableSDataStore","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/date/locale","dojo/string","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/ActivityCalendar","Sage/Array"],function(a,b,c,d,e,f,g,h,i){return h("Sage.MainView.ActivityMgr.ActivityCalendar",null,{_contentWindow:null,_activitiesData:null,_eventsData:null,_allData:null,_schedulerEvents:[],_schedulerEvents1:[],_schedulerLoaded:!1,_loadHistoryOnStart:!1,self:this,_calendarUsers:[],_selectedUsers:[],_currentUser:null,_userOptions:{},_userActivityData:[],_reccurring:[],_currentUserId:null,_currentUserColor:[],_dateRangeStart:null,_dateRangeEnd:null,completedText:"(Completed)",meetingIconUrl:"../../images/icons/meeting_14x14.png",toDoIconUrl:"../../images/icons/To_Do_14x14.png",phoneCallIconUrl:"../../images/icons/Call_14x14.png",personalActivityIconUrl:"../../images/icons/personal_14x14.png",_userColors:[],constructor:function(a,b){!function(){this._contentWindow=a}(),this._currentUserId=g.trim(d.getClientContextByKey("userID"))||"",this._userOptions=b,this._userColors.user1="#D5E2BD",this._userColors.user2="#CFDEF5",this._userColors.user3="#FBDBB5",this._userColors.user4="#DFC9F6",this._currentUserColor=[],this._nlsResources=i;var c=function(a){return dojo.date.locale.format(new Date(a),{selector:"date",datePattern:"EEE MMM d yyyy 00:00:00 ZZZZ",locale:Sys.CultureInfo.CurrentCulture.name})},e=function(a){return dojo.date.locale.format(new Date(a),{selector:"date",datePattern:"EEE MMM d yyyy 24:00:00 ZZZZ",locale:Sys.CultureInfo.CurrentCulture.name})},f=function(a){return[{StartDate:c(Sage.Utility.Convert.toDateFromString(a.StartDate)),EndDate:e(Sage.Utility.Convert.toDateFromString(a.EndDate)),Text:a.Type,Id:a.$key+"-evt"}]},h=this;dojo.subscribe("/entity/history/create",function(a){if(null!=a){var b=a.HistoryId||a.$key;b&&h._getHistoryItem(b)}}),dojo.subscribe("/entity/history/delete",function(a){null!=a&&h._deleteHistoryItem(a)}),dojo.subscribe("/entity/activity/create",function(a){if(null!=a&&!a.Timeless){var b=a.Leader.$key;if(b=g.trim(b),h._isUserSelected(b))if(a.Recurring)h._refreshSchedulerEvents();else{var c=h._formatActivityObject(a,b);h._userActivityData[b]||(h._userActivityData[b]=[],h._userActivityData[b].activities=[]),h._userActivityData[b].activities.push(c),dojo.publish("/entity/activity/addToScheduler",[c,this])}}}),dojo.subscribe("/entity/userActivity/create",function(a){if(null!=a&&a.Activity){var b=a.Activity.$key,c=a.User.$key,d=a.Status;if(h._isUserSelected(c))if(h._reccurring[b])h._removeReccurringFromScheduler(b),window.setTimeout(function(){h._reloadAllActivitiesByActivityId(b)},1);else{var e=h._getActivityObjectFromCollection(b);if(e){var f=h._getUserActivityFromActivity(e,b,c,d);dojo.publish("/entity/activity/addToScheduler",[f,this]),h._userActivityData[c]||(h._userActivityData[c]=[],h._userActivityData[c].activities=[]),h._userActivityData[c].activities.push(f)}}}}),dojo.subscribe("/entity/activity/activityScheduler/reloadActivity",function(a){h._reloadAllActivitiesByActivityId(a)}),dojo.subscribe("/entity/userActivity/delete",function(a){if(null!=a){var b=a.split(";")[0],c=a.split(";")[1],e=b.split("=")[1];if(h._reccurring[e])h._removeReccurringFromScheduler(e),window.setTimeout(function(){h._reloadAllActivitiesByActivityId(e)},1);else{var f=c.split("=")[1];f=f.replace("'","");var i=e+"-"+f+"-act";g.trim(d.getClientContextByKey("userID"))==f&&(i="0:"+i),dojo.publish("/entity/activity/deleteFromScheduler",[i,this]),h._removeActivityObjectFromCollection(e,f)}}}),dojo.subscribe("/entity/activity/change",function(a){if(null==a||a.Timeless)null!=a&&a.TimelessChanged&&h._deleteFromSchedulerByActivity(a.$key);else if(a.Recurring||"rsnotrecurring"!==a.RecurrenceState.toLowerCase())h._refreshSchedulerEvents();else{a.LeaderChanged&&h._deleteFromSchedulerByActivity(a.$key);var b=null;if(a.Leader&&a.Leader.$key&&(b=g.trim(a.Leader.$key)),h._isUserSelected(b)){var c=h._formatActivityObject(a,b);dojo.publish("/entity/activity/updateScheduler",[c,this]),h._removeActivityObjectFromCollection(a.$key,b),h._userActivityData[b].activities.push(c)}var d=h._getMembersOfActivity(a.$key);if(d)for(var e=0;e<d.length;e++)d[e]!==b&&(c=h._formatActivityObject(a,d[e]),dojo.publish("/entity/activity/updateScheduler",[c,this]),h._removeActivityObjectFromCollection(a.$key,d[e]),h._userActivityData[d[e]]||(h._userActivityData[d[e]]=[],h._userActivityData[d[e]].activities=[]),h._userActivityData[d[e]].activities.push(c))}}),dojo.subscribe("/entity/activity/delete/single",function(a){h._deleteFromSchedulerByActivity(a)}),dojo.subscribe("/entity/activity/confirm",function(a){a&&h._refreshSchedulerByActivity(a.activityId)}),dojo.subscribe("/entity/activity/decline",function(a){a&&h._refreshSchedulerByActivity(a.activityId)}),dojo.subscribe("/entity/activity/delete/recurrence",function(a){var b;if(a&&(b=a.substring(0,13),h._userActivityData))for(var c in h._userActivityData)if(null!=h._userActivityData[c]){var d=[];if(h._userActivityData[c].activities){for(var e=0;e<h._userActivityData[c].activities.length;e++)if(h._userActivityData[c].activities[e]){var f=h._userActivityData[c].activities[e].id;f.indexOf(b)>-1&&d.push(f)}d.length>0&&dojo.publish("/entity/activity/clearSchedulerEvents",[d,this])}}}),dojo.subscribe("/entity/activity/delete",function(a){h._deleteFromSchedulerByActivity(a)}),dojo.subscribe("/entity/event/create",function(a){if(null!=a){var b=a.UserId;b=g.trim(b);var c=h._formatEventObject(a,b);dojo.publish("/entity/activity/addToScheduler",[c,this])}}),dojo.subscribe("/entity/event/change",function(a){if(null!=a){var b=a.UserId;b=g.trim(b);var c=h._formatEventObject(a,b);dojo.publish("/entity/activity/updateScheduler",[c,this])}}),dojo.subscribe("/entity/event/delete/single",function(a){var b=a+"-evt";dojo.publish("/entity/activity/deleteFromScheduler",[b,this])}),dojo.subscribe("/entity/calendar/userlist/add",function(a){!function(){dojo.publish("/entity/activity/updateScheduler",[f(a),this])}()}),completedText=this._nlsResources.completedText||"(Completed)"},_deleteHistoryItem:function(a){if(this._userActivityData)for(var b in this._userActivityData)if(null!=this._userActivityData[b]&&this._userActivityData[b].history)for(var c=0;c<this._userActivityData[b].history.length;c++)if(this._userActivityData[b].history[c]){var d=this._userActivityData[b].history[c].id;if(d.indexOf(a)>-1){delete this._userActivityData[b].history[c],dojo.publish("/entity/activity/deleteFromScheduler",[d,this]);break}}},_deleteFromSchedulerByActivity:function(a){if(a&&-1==a.indexOf("{"))for(var b=this._getAllActivitiesFromCollectionById(a),c=0;c<b.length;c++)dojo.publish("/entity/activity/deleteFromScheduler",[b[c],this]),this._removeActivityObjectFromCollectionByActivityId(b[c])},_isUserSelected:function(a){var b=!1;for(var c in this._selectedUsers)if(this._selectedUsers[c].userId&&this._selectedUsers[c].userId.toString()==a){b=!0;break}return b},_refreshSchedulerByActivity:function(a){a&&(this._deleteFromSchedulerByActivity(a),this._reloadAllActivitiesByActivityId(a))},_getUserActivityFromActivity:function(a,b,c,d){var e=dojo.clone(a),f=a.start_date,g=a.end_date,h=!1;if(e){if(e.id=b+"-"+c+"-act",d)switch(d){case"asAccepted":h=!0;break;case"asUnconfirmed":h=!1}e.userColor=this._currentUserColor[c],e.end_date=g,e.start_date=f,e.confirmed=h}return e},_getActivityObjectFromCollection:function(a){var b=null,c=!1;if(this._userActivityData)for(var d in this._userActivityData){if(null!=this._userActivityData[d]&&this._userActivityData[d].activities)for(var e=0;e<this._userActivityData[d].activities.length;e++)if(this._userActivityData[d].activities[e]){var f=this._userActivityData[d].activities[e].id;if(f.indexOf(a)>-1){b=this._userActivityData[d].activities[e],c=!0;break}}if(c)break}return b},_getAllActivitiesFromCollectionById:function(a){var b=[];if(this._userActivityData)for(var c in this._userActivityData)if(null!=this._userActivityData[c]&&this._userActivityData[c].activities)for(var d=0;d<this._userActivityData[c].activities.length;d++)if(this._userActivityData[c].activities[d]){var e=this._userActivityData[c].activities[d].id;e.indexOf(a)>-1&&b.push(e)}return b},_removeActivityObjectFromCollection:function(a,b){if(this._userActivityData&&null!=this._userActivityData[b]&&this._userActivityData[b].activities)for(var c=0;c<this._userActivityData[b].activities.length;c++)if(this._userActivityData[b].activities[c]){var d=this._userActivityData[b].activities[c].id;if(d.indexOf(a)>-1){delete this._userActivityData[b].activities[c];break}}},_removeActivityObjectFromCollectionByActivityId:function(a){var b=!1;if(this._userActivityData)for(var c in this._userActivityData){if(null!=this._userActivityData[c]&&this._userActivityData[c].activities)for(var d=0;d<this._userActivityData[c].activities.length;d++)if(this._userActivityData[c].activities[d]){var e=this._userActivityData[c].activities[d].id;if(e==a){delete this._userActivityData[c].activities[d],b=!0;break}}if(b)break}},_getMembersOfActivity:function(a){var b,c=[];if(this._userActivityData)for(var d in this._selectedUsers)if(this._selectedUsers[d]&&this._selectedUsers[d].userId){var e=this._selectedUsers[d].userId.toString();null!=this._userActivityData[e]&&this._userActivityData[e].activities&&(b=this._userActivityData[e].activities.filter(function(b){return b.id.indexOf(a)>-1}),b.length>0&&c.push(e))}return c},_getWeekStart:function(a,b){null==b&&(b=new Date);var c=b.getDay();c=a-c;var d=dojo.date.add(b,"day",c);return d>b&&(d=dojo.date.add(d,"day",-7)),d},_setQueryDates:function(a){var b=a.date.valueOf();switch(a.mode){case"day":case"week":case"workweek":case"month":var c=dojo.date.getDaysInMonth(new Date(b)),d=new Date(new Date(b).setDate(1));d.setHours(0,0,0,0);var e=new Date(new Date(b).setDate(c));e.setHours(0,0,0,0);var f=this._dateAdd(d,"day",-7),g=this._dateAdd(e,"day",8);this._dateRangeStart=Sage.Utility.Convert.toIsoStringFromDate(f),this._dateRangeEnd=Sage.Utility.Convert.toIsoStringFromDate(g)}},_updateDateRange:function(a,b){if(b||this._schedulerLoaded){var c=!1,d=a.date;if(Sage.Utility.Convert.isDateString(d)&&(d=Sage.Utility.Convert.toDateFromString(d)),d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes()),this._dateRangeStart&&this._dateRangeEnd){var e=this._dateRangeStart;Sage.Utility.Convert.isDateString(e)&&(e=Sage.Utility.Convert.toDateFromString(e)),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());var f=this._dateRangeEnd;Sage.Utility.Convert.isDateString(f)&&(f=Sage.Utility.Convert.toDateFromString(f)),f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes());var g=null,h=null;switch(a.mode){case"day":(dojo.date.compare(d,f,"date")>0||dojo.date.compare(e,d,"date")>0)&&(c=!0);break;case"week":g=this._formatDateToCompare(a.weekStartDate),h=this._formatDateToCompare(a.weekEndDate),h=dojo.date.add(h,"day",1),c=dojo.date.compare(g,e,"date")<0||dojo.date.compare(g,f,"date")>0||dojo.date.compare(h,e,"date")<0||dojo.date.compare(h,f,"date")>0;break;case"workweek":g=this._formatDateToCompare(a.workWeekStartDate),h=this._formatDateToCompare(a.workWeekEndDate),h=dojo.date.add(h,"day",1),c=dojo.date.compare(g,e,"date")<0||dojo.date.compare(g,f,"date")>0||dojo.date.compare(h,e,"date")<0||dojo.date.compare(h,f,"date")>0;break;case"month":c=!0}}else c=!0;c&&(this._setQueryDates(a),this._refreshSchedulerEvents())}},_formatDateToCompare:function(a){var b=a;return Sage.Utility.Convert.isDateString(b)&&(b=Sage.Utility.Convert.toDateFromString(b)),b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes())},_updateCalendarUsers:function(a,b){var c=dojo.indexOf(this._calendarUsers,a);"add"===b?(-1!=c&&this._calendarUsers.splice(c),this._calendarUsers.push(a)):"remove"===b&&-1!=c&&this._calendarUsers.splice(c)},_updateReccurring:function(a){if(a){var b=a.replace("0:","").split(";"),c=b[0];this._reccurring[c]||(this._reccurring[c]=[]),this._reccurring[c].push(a)}},_dateAdd:function(a,b,c){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return d=dojo.date.add(d,b,c)},_reloadUserCalendars:function(a){if(this._userActivityData&&null!=this._userActivityData[a]){var b=[],c=[],d=[];if(this._userActivityData[a].activities){for(var e=0;e<this._userActivityData[a].activities.length;e++)this._userActivityData[a].activities[e]&&b.push(this._userActivityData[a].activities[e].id);dojo.publish("/entity/activity/clearSchedulerEvents",[b,this])}if(this._userActivityData[a].events){for(var f=0;f<this._userActivityData[a].events.length;f++)this._userActivityData[a].events[f]&&c.push(this._userActivityData[a].events[f].id);dojo.publish("/entity/activity/clearSchedulerEvents",[c,this])}if(this._userActivityData[a].history){for(var g=0;g<this._userActivityData[a].history.length;g++)this._userActivityData[a].history[g]&&d.push(this._userActivityData[a].history[g].id);dojo.publish("/entity/activity/clearSchedulerEvents",[d,this])}}},_updateSelectedUsers:function(a,b,c){if(a)if(null==this._selectedUsers||0==this._selectedUsers.length)this._selectedUsers=g.clone(a);else{var e;if(b)for(var f in a)(e=a[f].userId)&&delete this._selectedUsers[e];else for(var f in a)if(e=a[f].userId,userColor=a[f].usercolor,e)if(this._selectedUsers[e]=a[f],this._currentUserId==e)this._updateCalendarUsers(e.toString(),"add"),this._getActivities(e.toString(),userColor.toString()),this._getEvents(e.toString(),userColor.toString()),c&&this._getHistory(e.toString(),userColor.toString());else{var h={userId:e,userColor:userColor};this._getSecurityAccessData(g.trim(d.getClientContextByKey("userID")),e,h,function(a){this._updateCalendarUsers(a.userId.toString(),"add"),this._getActivities(a.userId.toString(),a.userColor.toString()),this._getEvents(a.userId.toString(),a.userColor.toString()),c&&this._getHistory(a.userId.toString(),a.userColor.toString())},this)}}},_refreshSchedulerEvents:function(){if(dojo.publish("/entity/activity/clearScheduler",[null,this]),this._selectedUsers){var a,b,c=g.trim(d.getClientContextByKey("userID")),e=!1;this._selectedUsers[c]&&(e=this._selectedUsers[c].loadHistoryOnStart);for(var f in this._selectedUsers){a=this._selectedUsers[f].userId,b=this._selectedUsers[f].usercolor;var h={userId:a,userColor:b};a==c?(this._getActivities(a,b),this._getEvents(a,b),e&&this._getHistory(a,b)):a&&this._getSecurityAccessData(c,a,h,function(a){this._getActivities(a.userId,a.userColor),this._getEvents(a.userId,a.userColor),e&&this._getHistory(a.userId,a.userColor)},this)}}this._schedulerLoaded=!0},_removeReccurringFromScheduler:function(a){if(this._reccurring){var b=this._reccurring[a];b&&b.length>0&&dojo.publish("/entity/activity/clearSchedulerEvents",[b,this])}},_checkSecurityAccess:function(a,d,e,f){this.accessData=!1,this._accessStore||(this._accessStore=new b({include:["$descriptors"],resourceKind:"activityresourceviews",service:c.getSDataService("dynamic")})),this._accessStore.fetch({predicate:"'"+d+"-"+a+"'",onComplete:function(a){e.call(f,a)},onError:function(){e.call(f,null)},scope:this})},_getSecurityAccessData:function(a,b,c,d,e){this._selectedUsers[b]&&this._selectedUsers[b].access?d.call(e,c):this._checkSecurityAccess(a,b,function(a){a&&(this._selectedUsers[b].access=[],this._selectedUsers[b].access.allowAdd=a.AllowAdd,this._selectedUsers[b].access.allowEdit=a.AllowEdit,this._selectedUsers[b].access.allowDelete=a.AllowDelete),d.call(e,c)},this)},_reloadAllActivitiesByActivityId:function(b){this.allActivitiesStore||(this.allActivitiesStore=a({service:c.getSDataService("system"),resourceKind:"activities",include:["$descriptors,UserInfo"],select:["$key","Alarm","AlarmTime","Status","AccountId","AccountName","ActivityId","ContactId","ContactName","Description","Duration","LeadId","LeadName","OpportunityId","OpportunityName","TicketId","Recurring","StartDate","Timeless","Type","Priority","Notes","Phonenumber","Location","AllowEdit","Leader/Userinfo/UserName","Useractivities/status","Useractivities/User/$key"],sort:[{attribute:"StartDate",descending:!0}]})),this.allActivitiesStore.fetch({query:f.substitute("Id eq '${0}' and not Timeless and UserActivities.Status ne 'asDeclned'",[b]),count:80,start:0,onComplete:this._onallActivitiesRequestComplete,scope:this})},_onallActivitiesRequestComplete:function(a){if(dojo.require("Sage.Utility"),dojo.require("dojo.date.locale"),null!=a&&void 0!=a){this._schedulerEventsx=[];for(var b=null,c=0;c<a.length;c++){var d={};if(!a[c].Timeless)if(a[c].UserActivities){var e=a[c].UserActivities.$resources;if(e&&e.length>0)for(var f=0;f<e.length;f++)b=e[f].User.$key,b=g.trim(b),this._isUserSelected(b)&&"asDeclned"!=e[f].Status&&(d=this._formatActivityObject(a[c],b,e[f].Status))&&(this._schedulerEventsx.push(d),this._updateUserActivityDataCollection(b,d,!0))}else a[c].Leader&&(b=a[c].Leader.$key,b=g.trim(b),d=this._formatActivityObject(a[c],b),this._schedulerEventsx.push(d),this._updateUserActivityDataCollection(b,d,!0))}dojo.publish("/entity/activity/loadScheduler",[dojo.clone(this._schedulerEventsx),this])}},_getActivities:function(b,e,h,i){null==b&&(b=d.getClientContextByKey("userID")),b=g.trim(b),self._currentUser=b,null!=e&&void 0!=e||(e="user1"),this._currentUserColor[b]=e,this.activitiesStore||(this.activitiesStore=a({service:c.getSDataService("system"),resourceKind:"activities",include:["$descriptors"],select:["Alarm","AlarmTime","Attachment","Status","AccountId","AccountName","ActivityId","ContactId","ContactName","Description","Duration","LeadId","LeadName","OpportunityId","OpportunityName","TicketId","Recurring","StartDate","Timeless","Type","Priority","Notes","Phonenumber","Location","AllowEdit","AllowDelete","Leader/Userinfo/UserName","UserActivities","UserActivities/User","UserActivities/Status"],sort:[{attribute:"StartDate"}]})),i=i||100,h=h||1;var j={me:this,userId:b,start:h,count:i,color:e};this.activitiesStore.fetch({query:f.substitute("UserActivities.UserId eq '${0}' and not Timeless and UserActivities.Status ne 'asDeclned' and StartDate gt @${1}@ and StartDate lt @${2}@",[b,this._dateRangeStart,this._dateRangeEnd]),onComplete:this._onActivitiesRequestComplete,onBegin:this._onActivitiesRequestBegin,scope:j,count:i,start:h})},_onActivitiesRequestBegin:function(a,b){var c=b.scope.me,d=b.scope.userId,e=b.scope.count,f=b.scope.start,g=b.scope.color;a>100&&a>f+e&&(a<=300&&1==f?c._getActivities(d,g,f+e-1,a):(f=1==f?f+e-1:f+e,c._getActivities(d,g,f,100)))},_getEvents:function(b,e,h,i){null==b&&(b=d.getClientContextByKey("userID")),b=g.trim(b),this._currentUserColor[b]=e,this.eventsStore||(this.eventsStore=a({service:c.getSDataService("dynamic"),resourceKind:"events",include:[],select:["Type","StartDate","EndDate","Location","Description","User"],sort:[{attribute:"StartDate",descending:!0}]})),i=i||100,h=h||0;var j={me:this,userId:b,start:h,count:i,color:e};this.eventsStore.fetch({query:{conditions:f.substitute("UserId eq '${0}' and StartDate gt @${1}@ and StartDate lt @${2}@",[b,this._dateRangeStart,this._dateRangeEnd])},onComplete:this._onEventsRequestComplete,onBegin:this._onEventsRequestBegin,scope:j,count:i,start:h})},_onEventsRequestBegin:function(a,b){var c=b.scope.me,d=b.scope.userId,e=b.scope.count,f=b.scope.start,g=b.scope.color,h=f+e,i=a-h;i>0&&(i>=100?c._getEvents(d,g,h,100):c._getEvents(d,g,h,i))},_getHistory:function(b,e,g,h){null==b&&(b=d.getClientContextByKey("userID")),this._currentUserColor[b]=e,h=h||100,g=g||1,this.historyActivitiesStore||(this.historyActivitiesStore=a({service:c.getSDataService("dynamic"),resourceKind:"history",include:["History"],select:["$key","UserId","ActivityId","AccountName","Category","CompletedDate","ContactId","ContactName","Description","Duration","LeadId","LeadName","LongNotes","Notes","OpportunityId","OpportunityName","Priority","Timeless","Type","Location","StartDate","EndDate"],sort:[{attribute:"StartDate"}]}));var i={me:this,userId:b,start:g,count:h,color:e};this.historyActivitiesStore.fetch({query:f.substitute("UserId eq '${0}' and not Timeless and StartDate gt @${1}@ and StartDate lt @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[b,this._dateRangeStart,this._dateRangeEnd]),onComplete:this._onHistoryRequestComplete,onBegin:this._onHistoryRequestBegin,scope:i,count:h,start:g})},_onHistoryRequestBegin:function(a,b){var c=b.scope.me,d=b.scope.userId,e=b.scope.count,f=b.scope.start,g=b.scope.color;a>100&&a>f+e&&(a<=300&&1==f?c._getHistory(d,g,f+e-1,a):(f=1==f?f+e-1:f+e,c._getHistory(d,g,f,100)))},_getHistoryItem:function(a){this._historyStore||(this._historyStore=new b({include:[],resourceKind:"history",service:c.getSDataService("dynamic")})),this._historyStore.fetch({predicate:'"'+a+'"',onComplete:this._receivedHistoryItem,scope:this})},_receivedHistoryItem:function(a){var b,c=g.trim(d.getClientContextByKey("userID"));if(null!=a&&void 0!=a&&(b=a.UserId,this._selectedUsers[b])){var e=!1;if(this._selectedUsers[b]&&(e=this._selectedUsers[b].loadHistoryOnStart),e){var f={};f=this._formatHistoryObject(b,a,c),this._isEmptyObject(f)||(this._userActivityData[b]||(this._userActivityData[b]={}),this._userActivityData[b].history||(this._userActivityData[b].history=[]),this._userActivityData[b].history.push(f),dojo.publish("/entity/activity/addToScheduler",[dojo.clone(f),this]))}}},iframeRef:function(a){return a.contentWindow?a.contentWindow.document:a.contentDocument},_getActivityUserId:function(a){var b=null;if(a){var c=a.split(";");c&&c.length>1&&(b=c[1].split("=")[1])}return b},_getAccessData:function(a,b){var c=!1;if(this._selectedUsers&&this._selectedUsers[a]&&this._selectedUsers[a].access)switch(b){case"allowAdd":c=this._selectedUsers[a].access.allowAdd;break;case"allowEdit":c=this._selectedUsers[a].access.allowEdit;break;case"allowDelete":c=this._selectedUsers[a].access.allowDelete}return c},_formatActivityObject:function(a,b,c,e){var f,h,i={},j=!1;if(e||(e=g.trim(d.getClientContextByKey("userID"))),b===g.trim(e)&&(j=!0),null!=a){switch(j?(i.id="0:",i.id+=a.$key):i.id=a.$key,i.currentUser=j,i.id+="-"+b,i.id+="-act",i.type="userActivity",i.subType=a.Type,a.StartDate,f=a.ContactName,i.text=null==f?"":f,i.timeless=a.Timeless,i.alarm=a.Alarm,a.Leader&&(i.leaderUserId=a.Leader.$key),i.alarmTime=Sage.Utility.Convert.toDateFromString(a.AlarmTime),i.duration=a.Duration,i.description=d.htmlEncode(a.Description),i.contactId=a.ContactId,i.contactName=a.ContactName,i.accountId=a.AccountId,i.accountName=a.AccountName,i.leadId=a.LeadId,i.leadName=a.LeadName,i.regarding='<span style="max-width:500px;display:block">'+d.htmlEncode(a.Description)+"</span>",i.priority=a.Priority,i.notes=d.htmlEncode(a.Notes),i.phoneNumber=a.PhoneNumber,i.opportunityId=a.OpportunityId,i.opportunity=a.OpportunityName,i.recurring=a.$key.indexOf(";")>0,j?(i.allowDelete=!0,i.allowEdit=a.AllowEdit):(i.allowDelete=this._getAccessData(b,"allowDelete"),i.allowEdit=this._getAccessData(b,"allowEdit")),i.ticketId=a.TicketId,i.recurring&&this._updateReccurring(i.id),i.attachment=a.Attachment,i.location=d.htmlEncode(a.Location),a.Type.toUpperCase()){case"ATTODO":h=this.toDoIconUrl;break;case"ATAPPOINTMENT":h=this.meetingIconUrl;break;case"ATPHONECALL":h=this.phoneCallIconUrl;break;case"ATPERSONAL":h=this.personalActivityIconUrl}i.iconSrc=h,i.userColor=this._currentUserColor[b];var k=!0;if(c)switch(c){case"asAccepted":k=!0;break;case"asUnconfirmed":k=!1}i.confirmed=k,i.start_date=d.Activity.formatActivityStartDateForCalendar(a.StartDate),i.end_date=d.Activity.formatActivityEndDateForCalendar(a.StartDate,i.duration),i.alarmTime&&(i.alarmMinutesBefore=dojo.date.difference(Sage.Utility.Convert.toDateFromString(a.StartDate),i.alarmTime,"minute")),Sage.Utility.Convert.isDateString(a.StartDate)&&(a.StartDate=Sage.Utility.Convert.toDateFromString(a.StartDate));var l=new Date(a.StartDate.getFullYear(),a.StartDate.getMonth(),a.StartDate.getDate(),a.StartDate.getHours(),a.StartDate.getMinutes()),m=dojo.date.add(l,"minute",i.duration);dojo.date.compare(m,l,"date")>0&&(i.endsAfterMidnight=!0,i.actualEndDate=m)}return i},_formatEventObject:function(a,b){var c={};return null!=a&&(c.id=a.$key,c.id+="-evt",c.type="event",c.subType=a.Type,c.description=a.Description,c.location=a.Location,c.text=a.Type,c.userColor=this._currentUserColor[b],c.start_date=d.Activity.formatEventDateForCalendar(a.StartDate,"MM/d/yy 0:00"),c.end_date=d.Activity.formatEventDateForCalendar(a.EndDate,"MM/d/yy 24:00")),c},_updateUserActivityDataCollection:function(a,b,c){if(this._userActivityData[a]||(this._userActivityData[a]=[]),this._userActivityData[a].activities){if(c)try{this._userActivityData[a].activities.removeByAttr("id",b.id)}catch(a){}}else this._userActivityData[a].activities=[];this._userActivityData[a].activities.push(b)},_onActivitiesRequestComplete:function(a,b){var c=b.scope.userId,e=b.scope.me;if(null!=a&&void 0!=a){e._schedulerEvents=[];for(var f=null,h=null,i=d.getClientContextByKey("userID"),j=0;j<a.length;j++){var k={};if(!a[j].Timeless)if(a[j].UserActivities){if(a[j].UserActivities.$resources)for(var l=0;l<a[j].UserActivities.$resources.length;l++)a[j].UserActivities.$resources[l].User&&c==a[j].UserActivities.$resources[l].User.$key&&(f=a[j].UserActivities.$resources[l].User.$key,f=g.trim(f),h=a[j].UserActivities.$resources[l].Status,k=e._formatActivityObject(a[j],f,h,i),e._updateUserActivityDataCollection(f,k))}else a[j].Leader&&(f=a[j].Leader.$key,f=g.trim(f),k=e._formatActivityObject(a[j],f,null,i),e._updateUserActivityDataCollection(f,k),f=null);e._isEmptyObject(k)||e._schedulerEvents.push(k)}dojo.publish("/entity/activity/loadScheduler",[dojo.clone(e._schedulerEvents),e])}},_onEventsRequestComplete:function(a){if(dojo.require("Sage.Utility"),dojo.require("dojo.date.locale"),null!=a&&void 0!=a){var b=this.me;b._schedulerEvents1=[];for(var c=null,d=0;d<a.length;d++){var e={};c||(c=a[d].User.$key),c=g.trim(c),e=b._formatEventObject(a[d],c),
e&&b._schedulerEvents1.push(e)}b._userActivityData[c]||(b._userActivityData[c]={}),b._userActivityData[c].events=b._schedulerEvents1,dojo.publish("/entity/activity/loadScheduler",[dojo.clone(b._schedulerEvents1),b])}},_formatHistoryObject:function(a,b,c){var e,f={},h="";if(a=g.trim(a),!b.Timeless){switch(a==g.trim(c)?(f.id="0:",f.id+=b.$key):f.id=b.$key,f.id+="-"+a,f.id+="-hist",f.type="userHistoryActivity",f.activityId=b.ActivityId,f.subType=b.Type,e=b.ContactName,f.text=null==e?"":e,f.timeless=b.Timeless,f.duration=b.Duration,f.description=b.Description,f.contactName=b.ContactName,f.contactId=b.ContactId,f.accountName=b.AccountName,f.accountId=b.AccountId,f.leadName=b.LeadName,f.leadId=b.LeadId,f.regarding='<span style="max-width:500px;display:block">'+b.Description+"</span>",f.priority=b.Priority,f.notes=b.Notes,f.location=b.Location,f.opportunity=b.OpportunityName,f.opportunityId=b.OpportunityId,f.userColor=this._currentUserColor[a],f.confirmed=!0,b.Type.toUpperCase()){case"ATTODO":h=this.toDoIconUrl;break;case"ATAPPOINTMENT":h=this.meetingIconUrl;break;case"ATPHONECALL":h=this.phoneCallIconUrl;break;case"ATPERSONALACTIVITY":h=this.personalActivityIconUrl}f.iconSrc=h,f.start_date=d.Activity.formatActivityEndDateForCalendar(b.CompletedDate,-1*f.duration),f.end_date=d.Activity.formatActivityStartDateForCalendar(b.CompletedDate)}return f},_onHistoryRequestComplete:function(a,b){if(null!=a&&void 0!=a){for(var c=(b.scope.userId,b.scope.me),e=[],f=null,h=g.trim(d.getClientContextByKey("userID")),i=0;i<a.length;i++){var j={};f=a[i].UserId,j=c._formatHistoryObject(f,a[i],h),c._isEmptyObject(j)||e.push(j)}null!=f&&(c._userActivityData[f]||(c._userActivityData[f]={}),c._userActivityData[f].history=e,dojo.publish("/entity/activity/loadScheduler",[dojo.clone(e),c]))}},_getEventColorByUser:function(a){for(var b="#d5e2bd",c=0;c<this._calendarUsers.length;c++)this._calendarUsers[c].userId==a&&(b=this._calendarUsers[c].eventColor);return b},_isEmptyObject:function(a){for(var b in a)return!1;return!0}})})},"Sage/MainView/Contact/ContactSearchForDuplicates":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ContactSearchForDuplicates","dijit/_Widget","Sage/_Templated","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/Dialogs","dijit/Dialog","dojo/i18n!./nls/ContactSearchForDuplicates","dojo/text!./templates/ContactDetailSummary.html","dojo/text!../Lead/templates/LeadDetailSummary.html","dojo/text!../Account/templates/AccountDetailSummary.html"],function(declare,i18nStrings,_Widget,_Templated,Utility,_DialogHelpIconMixin,dojoLang,_DialogLoadingMixin,Dialogs,Dialog,nls,contactTemplate,leadTemplate,accountTemplate){var contactSearchForDuplicates=declare("Sage.MainView.Contact.ContactSearchForDuplicates",[_Widget,_Templated],{workSpace:{},templateDialog:!1,templateData:"",rootUrl:"slxdata.ashx/slx/crm/-/namedqueries?format=json&",widgetsInTemplate:!0,constructor:function(){dojo.mixin(this,i18nStrings)},init:function(a){this.workSpace=a},onTabFiltersClick:function(){this.setDivDisplay(this.workSpace.divFiltersId,"inline"),this.setDivDisplay(this.workSpace.divOptionsId,"none"),this.setTabDisplay(this.workSpace.tabFiltersId,"tws-tab-button tws-active-tab-button"),this.setTabDisplay(this.workSpace.tabOptionsId,"tws-tab-button")},onTabOptionsClick:function(){this.setDivDisplay(this.workSpace.divOptionsId,"inline"),this.setDivDisplay(this.workSpace.divFiltersId,"none"),this.setTabDisplay(this.workSpace.tabOptionsId,"tws-tab-button tws-active-tab-button"),this.setTabDisplay(this.workSpace.tabFiltersId,"tws-tab-button")},setDivDisplay:function(a,b){var c=dojo.byId(a);null!==c&&(c.style.display=b)},setTabDisplay:function(a,b){var c=dojo.byId(a);null!==c&&(c.className=b)},showSummaryView:function(a,b){var c=this.getReqestUrl(a,b);this.showData(c,this.successRequest,this.errorRequest,a,b)},getReqestUrl:function(a,b){var c=null;return"Contact"===a&&(c=this.getReqeustUrlEx(b,"ContactSearch")),"Lead"===a&&(c=this.getReqeustUrlEx(b,"LeadSearch")),"Account"===a&&(c=this.getReqeustUrlEx(b,"AccountSearch")),c},getReqeustUrlEx:function(a,b){var c="mainentity.id eq '${0}'",d={name:b,where:dojo.string.substitute(c,[a])};return this.rootUrl+this.buildQParamStr(d)},buildQParamStr:function(a){var b=a,c=[];if("object"==typeof b)for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));else"string"==typeof b&&c.push(b);return c.join("&")},showData:function(a,b,c,d,e){void 0===b&&(b=function(a){}),void 0===c&&(c=function(){}),void 0===d&&(d=""),void 0===e&&(e="");var f=this;dojo.xhrGet({url:a,cache:!1,preventCache:!0,handleAs:"json",load:function(a){b(f,d,a)},error:function(a,b,d){c(f,d)}})},successRequest:function(a,b,c){a.show(b,c)},show:function(a,b){this.templateData=b.items[0],this.templateDialog=new Dialog({title:this.getSummaryTitle(a),id:[this.id,"-Dialog"].join(""),content:this.getTemplate(a).apply(this)}),this.connect(this.templateDialog,"onCancel",this._close),this.templateDialog.show()},errorRequest:function(a,b){Dialogs.showError(dojo.string.substitute(a.errorLoadingSummaryView,[b]))},getSummaryTitle:function(a){var b=null;return"Contact"===a&&(b=this.ContactSummaryView_Title),"Lead"===a&&(b=this.LeadSummaryView_Title),"Account"===a&&(b=this.AccountSummaryView_Title),b},getTemplate:function(entityType){var tpl=null;return"Contact"===entityType&&(tpl=new Simplate(eval(contactTemplate))),"Lead"===entityType&&(tpl=new Simplate(eval(leadTemplate))),"Account"===entityType&&(tpl=new Simplate(eval(accountTemplate))),tpl},_close:function(){this.templateDialog.destroyRecursive()}});return contactSearchForDuplicates})},"Sage/MainView/Contact/ContactUserAssociationEditor":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ContactUserAssociationEditor","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/string","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dojo/text!./templates/ContactUserAssociationEditor.html","Sage/UI/Controls/SingleSelectPickList","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/Form"],function(declare,i18nStrings,singleEntrySDataStore,writableSDataStore,sDataServiceRegistry,_DialogHelpIconMixin,dojoLang,dstring,dijitDialog,_Widget,_Templated,Dialogs,Lookup,template){var contactUserAssociationEditor=declare("Sage.TaskPane.ContactUserAssociationEditor",[_Widget,_Templated],{id:"dlgContactUserAssociation",actionType:!1,_dialog:!1,_updateableProperties:!1,selectedFieldIndex:1,lup_User:!1,_selectionInfo:!1,widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(a){this._selectionInfo=a.selectionInfo.selectedIds,this.actionType=a.action,dojo.mixin(this,i18nStrings),this.actionType},associationExists:function(a,b,c,d){this._setupStore();var e=dstring.substitute("UserId eq '${0}' ",[c.UserId]);this._contactUserStore.fetch({query:e,onComplete:function(e){e&&e.length>0?b.call(d,e,c):a.call(d,c)},onError:function(){a.call(d,c)},scope:this})},loadContactData:function(a,b,c){if(a){this._setupStore();var d=dstring.substitute("ContactId in ['${0}'] ",[this._selectionInfo.join("','")]);this._contactUserStore.fetch({query:d,onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this}),this._contactUserStore.fetch({predicate:"'"+a+"'",onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this})}},setSelectionInfo:function(a){this._selectionInfo=a.selectionInfo.selectedIds,this.actionType=a.action},show:function(){this._dialog.show(),this.lup_User||this.createUserLookup()},createUserLookup:function(){this.userLookupConfig={id:"_acctMgr",structure:[{label:this.lookupNameColText,field:"UserInfo.UserName",sortable:!0},{label:this.lookupTitleColText,field:"UserInfo.Title",sortable:!0},{label:this.lookupDepartmentColText,field:"UserInfo.Department",sortable:!0},{label:this.lookupRegionColText,field:"UserInfo.Region",sortable:!0},{label:this.lookupTypeColText,field:"Type",propertyType:"Sage.Entity.Interfaces.UserType",sortable:!0}],gridOptions:{contextualCondition:function(){return"Type ne '5' and Type ne '6' and Type ne '7' and Type ne '8'"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.UserName"}]},isModal:!0,initialLookup:!0,returnPrimaryKey:!0,dialogTitle:this.lookupUserText,dialogButtonText:this.btnOK_Caption},this.lup_User=new Lookup({id:"lu_User",config:this.userLookupConfig,style:"width:100%"}),dojo.place(this.lup_User.domNode,this.userLookup_Container.domNode,"only")},_setupStore:function(){this._contactUserStore||(this._contactUserStore=new writableSDataStore({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")}))},_okClick:function(){var a=this.lup_User.selectedObject.$key;if(this._selectionInfo&&a)if(this._setupStore(),"associate"===this.actionType){var b={ContactId:this._selectionInfo[0],UserId:a};this.associationExists(this._insertAssociation,function(){Sage.UI.Dialogs.showError(this.associationExistsMessage)},b,this)}else if("disassociate"===this.actionType)for(var c=0;c<this._selectionInfo.count;c++);},_insertAssociation:function(a,b){this._contactUserStore.saveNewEntity(a,this._successfulContactUserSave,this._failedContactUserSave,this)},_successfulContactUserSave:function(a){this._dialog.hide()},_failedContactUserSave:function(a){this._dialog.hide()},_close:function(){this._dialog.hide()}});return contactUserAssociationEditor})},"Sage/MainView/IntegrationContract/MatchingOptionsConfig":function(){define(["dojo/_base/declare","dojo/i18n!./nls/MatchingOptionsConfig","dojo/_base/array","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/MatchingOptionsConfig.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(declare,i18nStrings,array,_Widget,_Templated,Dialogs,template){var matchingOptionsConfig=declare("Sage.MainView.IntegrationContract.MatchingOptionsConfig",[_Widget,_Templated],{resourceKind:"",resourceDisplayName:"",id:"",index:0,selectedFieldIndex:0,matchingId:"",fields:[{FieldName:"",DisplayName:""}],operators:[],selectedFilters:[],hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){dojo.mixin(this,i18nStrings)},init:function(a){this.id=a.Id},conditionTemplate:new Simplate(["<div>",'<div id="filterCondition_{%= $.index %}" class="lookup-condition-row" style="padding-left:12px">','<select dojoType="dijit.form.select" id="fieldnames_{%= $.index %}" class="lookup-fieldnames-list" style="width:160px" >',"{% for (var i=0; i < $.fields.length; i++) { %}",'<option value="{%= $.fields[i].FieldName %}" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.fields[i].DisplayName %}</option>',"{% } %}","</select>",'<select dojoType="dijit.form.select" id="operators_{%= $.index %}" class="lookup-operators-list" style="width:160px; margin-left:130px">',"{% for (var i=0;i<$.operators.length;i++) { %}",'<option value="{%= $.operators[i].symbol %}"  {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.operators[i].display %}</option>',"{% } %}","</select>","{% if ($.index == 1 ) { %}",'<img id="addCondition_{%= $.index %}" src="{%= $.addimgurl %}" alt="{%= $.filter_AddCondition %}" style="cursor:pointer;padding:0px 5px;" onclick="dijit.byId(\'{%= $.matchingId %}\').matchingObject.addLookupCondition();" />',"{% } %}","{% if ($.index > 1 ) { %}",'<img src="{%= $.hideimgurl %}" alt="{%= $.filter_RemoveCondition %}" style="cursor:pointer;padding:0px 5px;" onclick="dijit.byId(\'{%= $.matchingId %}\').matchingObject.removeLookupCondition({%= $.index %});" />',"{% } %}","</div>","</div>"]),onEditMatchConfig:function(a,b){this.resourceDisplayName=b,this.resourceKind=a,this.showDialog()},showDialog:function(){this.index=0;var a=new dijit.Dialog({title:this.matchingCaption,id:[this.id,"-Dialog"].join(""),style:["height:",300,"px;width:",600,"px;"].join(""),matchingObject:this});a.attr("content",this.widgetTemplate.apply(this)),this.connect(a,"onCancel",this.destroyDialog),this.matchingId=a.id,a.show(),this.getMatchProperties()},getMatchProperties:function(){var a=this;dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/resources/getmatchproperties?resourceKind=${0}",[a.resourceKind]),cache:!1,preventCache:!0,handleAs:"json",load:function(b){a.fields=b.fields,a.operators=b.operators,a.selectedFilters=b.filters,dojo.query(dojo.byId([a.id,"-Loading-container"].join(""))).orphan(),a.loadMatchingFilters()},error:function(b,c,d){dojo.byId([a.id,"-Loading-container"].join("")).innerHTML=a.error_InvalidEndpoint}})},loadMatchingFilters:function(){for(var a=0;a<this.selectedFilters.length;a++){this.addLookupCondition();var b=dojo.byId(["fieldnames_",this.index].join(""));null!=b&&(b.value=this.selectedFilters[a].Property),operator=dojo.byId(["operators_",this.index].join("")),null!=operator&&(operator.value=this.selectedFilters[a].Operator,operator.symbol=this.selectedFilters[a].Operator)}},dialogResize:function(){dojo.style([this.id,"-Dialog"].join(""),"height","auto")},addLookupCondition:function(){this.index++;var a=dojo.byId([this.id,"-Condition-container"].join("")),b=this.conditionTemplate.apply(this);dojo.place(b,a),this.dialogResize()},removeLookupCondition:function(a){dojo.query(dojo.byId(["filterCondition_",a].join(""))).orphan()},updateMatchProperties:function(){var a=this;dojo.xhrPost({url:"slxdata.ashx/slx/crm/-/resources/updateconfiguration",sync:!0,postData:a.getSelections(),load:function(){a.destroyDialog()},error:function(a,b,c){Dialogs.showError(c)}})},getSelections:function(){for(var a=[],b=dojo.query(".lookup-condition-row"),c=0;c<b.length;c++){var d=dojo.query(".lookup-fieldnames-list",b[c]),e=dojo.query(".lookup-operators-list",b[c]),f={fieldName:d[0].value,operator:e[0].value};a.push(f)}return Sys.Serialization.JavaScriptSerializer.serialize(a)},reloadOperators:function(a,b){this.selectedFieldIndex=a,this.index=b;var c=this.conditionTemplate.apply(this);dojo.place(c,["filterCondition_",b].join(""),"replace")},destroyDialog:function(){var a=dojo.query(".lookup-condition-row");null!=a&&array.forEach(a,"dojo.query(item).orphan();");var b=dijit.byId([this.id,"-Dialog"].join(""));b&&b.destroy()}});return matchingOptionsConfig})},"Sage/MainView/IntegrationContract/AdvancedSearchOptions":function(){define(["dojo/_base/declare","dojo/i18n!./nls/AdvancedSearchOptions","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/AdvancedSearchOptions.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(declare,i18nStrings,_Widget,_Templated,Dialogs,templateString){var advancedSearchOptions=declare("Sage.MainView.IntegrationContract.AdvancedSearchOptions",[_Widget,_Templated],{configOptions:[],id:"",refineSearchId:"",index:0,selectedFieldIndex:0,fields:[{FieldName:"",DisplayName:""}],operators:[],selectedFilters:[],hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",widgetsInTemplate:!0,constructor:function(){dojo.mixin(this,i18nStrings)},init:function(a){this.id=a.Id,this.configOptions=a},conditionTemplate:new Simplate(["<div >",'<div id="filterCondition_{%= $.index %}" class="lookup-condition-row" style="padding-left:10px">','<select id="fieldnames_{%= $.index %}" class="lookup-fieldnames-list" style="width:160px" onchange="dijit.byId(\'{%= $.refineSearchId %}\').refineSearchObject.onPropertyChange({%= $.index %});" >',"{% for (var i=0;i<$.fields.length;i++) { %}",'<option value="{%= $.fields[i].FieldName %}" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.fields[i].DisplayName %}</option>',"{% } %}","</select>",'<select id="operators_{%= $.index %}" class="lookup-operators-list" style="width:160px; margin-left:20px">',"{% for (var i=0;i<$.operators.length;i++) { %}",'<option value="{%= $.operators[i].symbol %}"  {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.operators[i].display %}</option>',"{% } %}","</select>",'<input type="text" id="searchValue_{%= $.index %}" class="search-value-list" style="width:160px;margin-left:5px" />',"{% if ($.index == 1 ) { %}",'<img id="addCondition_{%= $.index %}" src="{%= $.addimgurl %}" alt="{%= $.addImgAltText %}" style="cursor:pointer;padding:0px 5px;" onclick="dijit.byId(\'{%= $.id %}-Dialog\').refineSearchObject.addLookupCondition();" />',"{% } %}","{% if ($.index > 1 ) { %}",'<img src="{%= $.hideimgurl %}" alt="{%= $.hideImgAltText %}" style="cursor:pointer;padding:0px 5px;" onclick="dijit.byId(\'{%= $.id %}-Dialog\').refineSearchObject.removeLookupCondition({%= $.index %});" />',"{% } %}","</div>","</div>"]),onRefineSearch:function(){var a=dojo.byId(this.configOptions.optionRefineSearchId);return!(null==a||!a.checked)&&(this.getDefaultMatchProperties(),!0)},getDefaultMatchProperties:function(){var a=this;dijit.byId([this.id,"-Dialog"].join(""))?a.showDialog():dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/resources/getmatchproperties?resourceKind=${0}&targetMapping=${1}",[this.configOptions.resourceKind,!0]),cache:!1,preventCache:!0,handleAs:"json",load:function(b){a.fields=b.fields,a.operators=b.operators,a.selectedFilters=b.filters,a.showDialog()},error:function(a,b,c){Dialogs.ShowError("request: "+a+" \nstatus: "+b+" \nerror: "+c)}})},showDialog:function(){this.index=0;var refineSearchDialog=dijit.byId([this.id,"-Dialog"].join(""));if(!refineSearchDialog){refineSearchDialog=new dijit.Dialog({title:this.dialogCaption,id:[this.id,"-Dialog"].join(""),style:["height:",300,"px;width:",600,"px;"].join(""),closable:!0,loadingMessage:this.loadingText,refineSearchObject:this});var template=new Simplate(eval(templateString));refineSearchDialog.attr("content",template.apply(this))}this.refineSearchId=refineSearchDialog.id,refineSearchDialog.show(),this.loadMatchingFilters(),dojo.style(refineSearchDialog.domNode,"zIndex",9050)},loadMatchingFilters:function(){for(var a=0;a<this.selectedFilters.length;a++){this.addLookupCondition();var b=dojo.byId(["fieldnames_",this.index].join(""));null!=b&&(b.value=this.selectedFilters[a].Property);var c=dojo.byId(["operators_",this.index].join(""));null!=c&&(c.value=this.selectedFilters[a].Operator,c.symbol=this.selectedFilters[a].Operator);var d=dojo.byId(["searchValue_",this.index].join(""));null!=d&&(d.value=this.selectedFilters[a].SearchValue)}},getSelections:function(){var a=[];this.updateDisplay();for(var b=dojo.query(".lookup-condition-row"),c=0;c<b.length;c++){var d=dojo.query(".lookup-fieldnames-list",b[c]),e=dojo.query(".lookup-operators-list",b[c]),f=dojo.query(".search-value-list",b[c]),g={fieldName:d[0].value,operator:e[0].value,searchValue:f[0].value};a.push(g)}var h=dojo.byId(this.configOptions.filtersId);null!=h&&(h.value=Sys.Serialization.JavaScriptSerializer.serialize(a)),this.invokeClickEvent(dojo.byId(this.configOptions.refreshGridId))},updateDisplay:function(){var a=dojo.byId(this.configOptions.resultsMsgId);null!=a&&(a.innerHTML=this.loadingDisplay),a=dojo.byId(this.configOptions.rowSearchResultsId),null!=a&&(a.style.display="none"),null!=(a=dojo.byId(this.configOptions.rowLinkToId))&&(a.style.display="none")},invokeClickEvent:function(a){if(document.createEvent){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0),a.dispatchEvent(b)}else a.click()},onPropertyChange:function(a){var b=dojo.byId(["searchValue_",a].join(""));null!=b&&(b.value="")},addLookupCondition:function(){this.index++;var a=dojo.byId([this.id,"-Condition-container"].join("")),b=this.conditionTemplate.apply(this);dojo.place(b,a),this.dialogResize()},dialogResize:function(){dojo.style([this.id,"-Dialog"].join(""),"height","auto")},removeLookupCondition:function(a){dojo.query(dojo.byId(["filterCondition_",a].join(""))).orphan()},reloadOperators:function(a,b){this.selectedFieldIndex=a,this.index=b;var c=this.conditionTemplate.apply(this);dojo.place(c,["filterCondition_",b].join(""),"replace")},clearTargetSelection:function(){var a=document.getElementsByName("TargetsGroup");if(null!=a)for(var b=0;b<a.length;b++)a[b].checked=!1},onMatchSelection:function(a){var b=document.getElementById(a);null!=b&&(b.checked=!0)},closeDetailsDialog:function(){}});return advancedSearchOptions})},"Sage/MainView/JobManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/ListPanel","Sage/Utility","Sage/MainView/JobMgr/JobManagerGroupContextService","Sage/MainView/JobMgr/FilterConfigurationProvider","dojo/_base/declare","Sage/MainView/JobMgr/JobManagerActions"],function(a,b,c,d,e,f){return f("Sage.MainView.JobManager",a,{_currentTabId:!1,_currentTabDescription:!1,_currentKeyField:"$key",_groupContextService:!1,_tabNameCache:{},_mainViewName:"JobManager",store:!1,constructor:function(a){var b=Sage.Services.getService("ClientGroupContext");b&&"Sage.MainView.JobMgr.JobManagerGroupContextService"===b.declaredClass||(Sage.Services.removeService("ClientGroupContext"),b=new JobManagerGroupContextService,Sage.Services.addService("ClientGroupContext",b));var c=b.getContext();this._currentTabId=c.CurrentGroupID,this._currentTabDescription=c.CurrentName,this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"},dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged")},_setListPanelConfig:function(){var a=Sage.Services.getService("ClientGroupContext");a&&(this.listPanelConfiguration=a.getCurrentListConfig(),this.store=this.listPanelConfiguration.list.store,this.service=this.listPanelConfiguration.list.store.service)},_getListPanelConfig:function(){return this._setListPanelConfig(),this.listPanelConfiguration},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._getListPanelConfig(),this)},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)},_setUIForNewTab:function(a,b){this._currentTabId=a,this._currentTabDescription=b},_onCurrentGroupChanged:function(a){var b=a.current;if(!b){b=Sage.Services.getService("ClientGroupContext").getContext()}dijit.byId("GroupTabs").selectedChildWidget.id!==b.CurrentGroupID&&dijit.byId("GroupTabs").selectChild(b.CurrentGroupID)},_onTabSelected:function(a){var b=Sage.Services.getService("ClientGroupContext"),c=a.id||a,d=b.getKeyField(c);if(b){if(b.getContext().CurrentGroupID===c)return;this._setUIForNewTab(c,a.title),b.setCurrentGroup(c,a.title,d)}},_getTabsConfig:function(){return{store:!1,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:!1,showTabContextMenus:!1}},_getStaticTabs:function(){return Sage.Services.getService("ClientGroupContext").getStaticTabs()},_getMenuConfig:function(){return!1}})})},"Sage/MainView/JobMgr/JobManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/JobMgr/ExecutionsListPanelConfig","Sage/MainView/JobMgr/JobDefinitionsListPanelConfig","Sage/MainView/JobMgr/SchedulesListPanelConfig","dojox/storage/LocalStorageProvider","dojo/_base/declare","dojo/i18n!./nls/JobManagerGroupContextService"],function(a,b,c,d,e,f,g,h,i,j){var k=i("Sage.MainView.JobMgr.JobManagerGroupContextService",a,{_currentContext:null,_currentTabId:!1,_currentTabDescription:!1,_currentUserId:!1,_currentKeyField:"$key",_currentListConfiguration:!1,groupConfigTypes:[{key:"executions",descriptor:j.executionsTabDisplayName,keyField:"$key",configProviderType:e},{key:"jobDefinitions",descriptor:j.jobDefinitionsTabDisplayName,keyField:"$key",configProviderType:f},{key:"schedules",descriptor:j.schedulesTabDisplayName,keyField:"$key",configProviderType:g}],_configsHash:!1,_LOCALSTORE_NAMESPACE:"JobManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_tabNameCache:{},constructor:function(){this.inherited(arguments),this._currentContext={},dojo.mixin(this._currentContext,this._emptyContext),this._currentContext.CurrentTableKeyField="$key",this._currentContext.AppliedFilterInfo={},this._currentContext.CurrentFamily=null,this._currentContext.notGroupBased=!0;var a;a=Sage.Utility.getParameterByName("groupId",document.location.href),a=a&&this._validateTabId(a)?a:this._getDefaultTabId();var c=this.getGroupName(a);this.setContext(a,c),this.unsubscribeConnects(),this._subscribes=[],this._subscribes.push(dojo.subscribe(b.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh)),this._onDefaultFilterLoad()},buildCurrentEntityContext:function(){var a=this._currentContext.CurrentGroupID;a&&this._currentListConfiguration&&(this._currentContext.CurrentEntity=this._currentListConfiguration.entityName,this._currentContext.CurrentTableKeyField=this.getKeyField(a),this._currentContext.CurrentName||(this._currentContext.CurrentName=this.getGroupName(a)))},_ensureConfigsHash:function(){if(!this._configsHash){for(var a={},b=0;b<this.groupConfigTypes.length;b++){var c=this.groupConfigTypes[b];a[c.key]=d.mixin(c,c.instance?null:{instance:!1})}this.configsHash=a}},_setListConfig:function(){this._ensureConfigsHash();var a=this._currentContext.CurrentGroupID,b=this.configsHash.hasOwnProperty(a)?this.configsHash[a]:this.configsHash.groups;b.instance?b.instance.rebuild():(b.instance=new b.configProviderType,this.onTabConfigCreated(b.instance)),this._currentListConfiguration=b.instance;var c=Sage.Services.getService("JobService"),d=c.getSchedulingSDataService();this._currentListConfiguration.list.service=d},getCurrentListConfig:function(){return this._setListConfig(),this._currentListConfiguration},getKeyField:function(a){this._ensureConfigsHash();var b="$key";return this.configsHash[a]&&(b=this.configsHash[a].keyField||"$key"),b},getGroupName:function(a){this._ensureConfigsHash();var b="default";return this.configsHash[a]&&(b=this.configsHash[a].descriptor||"default"),b},onCurrentGroupChanged:function(a){var b=this;dojo.publish("/group/context/changed",[a,this]),this._clearFilterManager(),this._onDefaultFilterLoad(function(){var a=b.getContext();b._saveToLocalStorage(b._STORE_KEY_LASTAB,a.CurrentGroupID)})},_clearFilterManager:function(){var a={},b={};dojo.publish("/ui/filters/default/apply",[a,b,this])},getContext:function(){return null===this._currentContext.CurrentGroupID&&this.requestContext(),this.buildCurrentEntityContext(),this._currentContext},requestContext:function(){this._isRetrievingContext},setContext:function(a,b){this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=b,this._setListConfig(),this.buildCurrentEntityContext(),this._isRetrievingContext=!1,this.onContextSet(this._currentContext)},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},setCurrentGroup:function(a,b,c){this._currentContext.CurrentGroupID!==a&&(b&&c?this._currentContext.CurrentTableKeyField=c:(this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=!1,this.buildCurrentEntityContext(),b=this._currentContext.CurrentName),this.setContext(a,b),this.onCurrentGroupChanged({current:this._currentContext}))},_onDefaultFilterLoad:function(a){},_onDefaultFilterRefresh:function(a,b,d){var e=this.getContext(),f=c.getSDataService("system"),g={$name:"applyFilterToEntity",request:{entityName:e.CurrentEntity,filter:dojo.toJson(d.createValueSet()),key:e.CurrentGroupID}};new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("applyFilterToEntity").execute(g,{})},getStaticTabs:function(){return this.groupConfigTypes},_saveToLocalStorage:function(a,b,c){this._saveToSessionStorage(a,b,c)},_getFromLocalStorage:function(a,b){return this._getFromSessionStorage(a,b)},_getFromSessionStorage:function(a,b){b||(b=this._LOCALSTORE_NAMESPACE);var c=b+"_"+a;return sessionStorage.getItem(c)},_saveToSessionStorage:function(a,b,c){c||(c=this._LOCALSTORE_NAMESPACE);var d=c+"_"+a;sessionStorage.setItem(d,b)},_getDefaultTabId:function(){var a="executions",b=this._getUrlTabId();if(b&&(b=this._validateTabId(b)))return b;var c=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(c&&(a=c),!this._configsHash)for(var d=0;d<this.groupConfigTypes;d++)if(a===this.groupConfigTypes[d].key)return a;return a},_getUrlTabId:function(){var a=!1,b="[\\?&]tabId=([^%#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d&&(a=d[1]),a},_validateTabId:function(a){if(a)for(var b=0;b<this.groupConfigTypes.length;b++){var c=this.groupConfigTypes[b];if(c.key.toUpperCase()===a.toUpperCase())return c.key}return null},onTabConfigCreated:function(a){}});if(Sage.Services.hasService("ClientGroupContext")){var l=Sage.Services.getService("ClientGroupContext");"Sage.MainView.JobMgr.JobManagerGroupContextService"!==l.declaredClass&&(l.unsubscribeConnects(),Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",new k))}else Sage.Services.addService("ClientGroupContext",new k);return k})},"Sage/MainView/JobMgr/ExecutionsListPanelConfig":function(){define(["Sage/MainView/JobMgr/BaseListPanelConfig","Sage/MainView/JobMgr/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/ExecutionsListPanelConfig","dojo/_base/lang","Sage/Utility/Jobs","dijit/ProgressBar","dojo/i18n!./templates/nls/ExecutionsListSummary","dojo/i18n!./templates/nls/ExecutionDetailSummary"],function(a,b,c,d,e,f){return c("Sage.MainView.JobMgr.ExecutionsListPanelConfig",[a],{constructor:function(){e.mixin(this,d),this._listId="Executions",this._resourceKind="executions",this.entityName="Execution",this._contextMenu="JobManagerListContextMenu",this._currentListContextSubMenu="ExecutionsListContextMenu",this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this._where=this._getWhere(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.keyField="$key"},_getStructure:function(){return[{field:"job",label:this.colNameJobName,width:"75px",formatter:f.formatJobDescription},{field:"user",label:this.colNameUser,width:"50px",formatter:f.formatUser},{field:"phase",label:this.colNamePhase,width:"50px"},{field:"phaseDetail",label:this.colNamePhaseDetail,width:"50px"},{field:"progress",label:this.colNameProgress,width:"50px",renderCell:function(a,b,c,d){c.appendChild(f.formatProgress(b))}},{field:"elapsed",label:this.colNameElapsed,width:"50px",formatter:f.formatElapsedTime},{field:"status",label:this.colNameStatus,width:"50px"},{field:"result",label:this.colNameResult,width:"50px",formatter:f.formatJobResultGrid}]},_getSelect:function(){return["$key","job","trigger","user","phase","phaseDetail","progress","elapsed","status","result"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"job"}]},_getInclude:function(){return["$descriptors"]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/JobMgr/templates/ExecutionsListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","phase","phaseDetail","progress","elapsed","status","result"],include:["$descriptors"],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,
requestConfiguration:a,templateLocation:"MainView/JobMgr/templates/ExecutionDetailSummary.html"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}},_getResult:function(){return this._nlsResources.loadingText}})})},"Sage/MainView/JobMgr/BaseListPanelConfig":function(){define(["Sage/_ConfigurationProvider","Sage/Services/JobService","Sage/Data/SDataServiceRegistry","Sage/Store/SData","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dojo/i18n!./nls/BaseListPanelConfig","dijit/registry","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l){return l("Sage.MainView.JobMgr.BaseListPanelConfig",[a],{list:!1,detail:!1,summary:!1,toolBar:!1,_listId:!1,_store:!1,_sDataService:!1,_where:!1,_sort:!1,_select:!1,_include:!1,_structure:!1,_currentUserId:!1,_resourceKind:!1,_nlsResources:!1,_securedAction:"",keyField:"$key",hasCompositeKey:!1,_menuItems:null,_contextMenu:!1,_summaryformaterScope:!1,entityName:!1,rebuildMenus:!0,rebuildOnRefresh:!1,constructor:function(){var a=Sage.Services.getService("JobService");this._sDataService=a.getSchedulingSDataService(),this._nlsResources=j;var b=Sage.Services.getService("ClientContextService");b&&b.containsKey("userID")&&(this._currentUserId=b.getValue("userID")),this._include=this._getInclude(),this._menuItems=[]},rebuild:function(){this._where=this._getWhere(),this._structure=this._getStructure(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars()},_getListConfig:function(){return this._store?this._store.where=this._where:this._store=this._getStore(),{id:this._listId,structure:this._structure,store:this._store,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext,selectionMode:"single"}},_getStore:function(){return new d({id:this._listId,service:this._sDataService,resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where})},_getSelect:function(){return[]},_getInclude:function(){return[]},_getSort:function(){return[]},_getWhere:function(){return""},_getStructure:function(){return[]},_getSummaryConfig:function(){return{structure:[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}],layout:"layout",store:new d({id:this._listId,service:this._sDataService,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where}),rowHeight:170,rowsPerPage:10,formatterScope:this._getFormatterScope()}},_getFormatterScope:function(){return!1},_getDetailConfig:function(){return!1},_getToolBars:function(){return{items:[]}},_getListContextMenuItems:function(){if(this._contextMenu){if(this._menuItems.length>0)return this._menuItems;if(!Sage.UI.DataStore.ContextMenus)return[];if(!Sage.UI.DataStore.ContextMenus.listContextMenu)return[];this._menuItems.length>0&&this._menuItems[0].destroyDescendants(),this._menuItems=[];for(var a=Sage.UI.DataStore.ContextMenus.listContextMenu.items,b=a.length,c=0;c<b;c++){var d=a[c];d.id===this._currentListContextSubMenu&&this._buildChildMenu(d.submenu,null)}return this._menuItems}},_getGridMenu:function(){return dijit.byId("_listContextmenu")},_buildChildMenu:function(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d];if(e.submenu.length>0){var j=new f;this._buildChildMenu(e.submenu,j);var k=new g({label:e.text,popup:j});b?b.addChild(k):this._menuItems.push(k)}else{var l=null;if("-"===e.text||" "===e.text||e.isspacer)l=new h;else{var m=e.href;m.indexOf("javascript:")<0&&(m=dojo.string.substitute("javascript:${0}()",[m])),l=new i({label:e.text||"...",icon:e.img,title:e.tooltip||"",ref:m,onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}})}b?b.addChild(l):this._menuItems.push(l)}}},_onListContext:function(){},getFilterConfig:function(a,b,c){var d=this._sDataService,f=a,g=this.entityName,h=this._resourceKind,i=this._where,j={},l=new Sage.SData.Client.SDataResourcePropertyRequest(f);l.setResourceKind("executions"),l.setResourceSelector('"'+g+'"'),l.setResourceProperty("filters"),l.setQueryArg("where",'filterType ne "analyticsMetric"'),l.setQueryArg("count",20),j.groupId=this._listId,j.store=new e({executeReadWith:"readFeed",request:l});var m=new Sage.SData.Client.SDataResourcePropertyRequest(d);return m.setResourceKind(h),m.setResourceProperty("$queries/executeMetric"),m.setQueryArg("_filterName",filter.filterName),m.setQueryArg("orderby","displayName"),m.setQueryArg("_activeFilter",i),j.createStoreForFilter=function(a){return a&&a.filterName?new e({executeReadWith:"readFeed",request:m}):null},j.getFilterManager=function(){var a=k.byId("list");return a&&a.get("filterManager")},j}})})},"Sage/MainView/JobMgr/SDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/JobMgr/SDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.MainView.JobMgr.SDataSummaryFormatterScope",[c],{constructor:function(a){dojo.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new d(this.requestConfiguration),Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)}})})},"Sage/MainView/JobMgr/SDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang","Sage/Utility/nls/Jobs"],function(a,b,c,d,e){var f=c("Sage.MainView.JobMgr.SDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:!1,include:[],service:null,constructor:function(a){d.mixin(this,a),this.requestHash={},this.fetching=!1;var b=Sage.Services.getService("JobService");this.service=b.getSchedulingSDataService()},add:function(a,b){var c=this.requestHash[a];if(c&&c.id!==b.id){c.duplicates||(c.duplicates=[]);for(var d=!1,e=0;e<c.duplicates.length;e++)c.duplicates[e].context.id===b.id&&(d=!0);d||c.duplicates.push({id:b.id,context:b})}else this.requestHash[a]=b},send:function(a,b){this.fetching=!0;var c=this,e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind);for(var f in this.requestHash)e.setResourceSelector("'"+f+"'");e.setQueryArg("include",this.include.join(",")),e.read({success:d.hitch(b,a,c),failure:d.hitch(this,this.requestFailed,c)})},requestFailed:function(a,b,c){for(var d in a.requestHash){var f=a.requestHash[d];f&&f.contentNode&&(f.contentNode.innerHTML=e.getRequestMessageFromStatus(a.status))}}});return c("Sage.MainView.JobMgr.SDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new f,this.requestTimeout=!1},requestDataNoWait:function(a,b,c){var d=new f;c.keyField&&(this.keyField=c.keyField),d.select=c.select,d.resourceKind=c.resourceKind,d.serviceName=c.serviceName,d.include=c.include,d.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(d.expandRecurrences=c.expandRecurrences),d.add(a,b),d.send(this.receiveData,this)},receiveData:function(a,b){var c=b,d=c.id;d||(d=c[this.keyField],c.id=d);var e=a.requestHash[c.id];if(e)try{e.applied||(e.applied=!0,e.set("entity",c))}catch(a){}}})})},"Sage/MainView/JobMgr/JobDefinitionsListPanelConfig":function(){define(["Sage/MainView/JobMgr/BaseListPanelConfig","Sage/MainView/JobMgr/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/JobDefinitionsListPanelConfig","dojo/i18n!./templates/nls/JobDefinitionsListSummary","dojo/i18n!./templates/nls/JobDefinitionDetailSummary"],function(a,b,c,d){return c("Sage.MainView.JobMgr.JobDefinitionsListPanelConfig",[a],{constructor:function(){this._nlsResources=d,this._listId="JobDefinitions",this._resourceKind="jobs",this.entityName="Job",this._contextMenu="JobManagerListContextMenu",this._currentListContextSubMenu="JobDefinitionsListContextMenu",this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this._where=this._getWhere(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.keyField="$key"},_getStructure:function(){return[{field:"$descriptor",label:this._nlsResources.colNameJobName||"Job Name",width:"100px"},{field:"description",label:this._nlsResources.colNameDescription||"Description",width:"100px"},{field:"type",label:this._nlsResources.colNameType||"Type",width:"50px"}]},_getSelect:function(){return["$key","description","type"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"$descriptor"}]},_getInclude:function(){return[]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","description"],include:[],useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/JobMgr/templates/JobDefinitionsListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","description"],include:["$descriptors"],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/JobMgr/templates/JobDefinitionDetailSummary.html"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/JobMgr/SchedulesListPanelConfig":function(){define(["Sage/MainView/JobMgr/BaseListPanelConfig","Sage/MainView/JobMgr/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/SchedulesListPanelConfig","dojo/_base/lang","Sage/Utility/Jobs","dojo/i18n!./templates/nls/SchedulesListSummary","dojo/i18n!./templates/nls/ScheduleDetailSummary"],function(a,b,c,d,e,f){return c("Sage.MainView.JobMgr.SchedulesListPanelConfig",[a],{constructor:function(){e.mixin(this,d),this._listId="Schedules",this._resourceKind="triggers",this._contextMenu="JobManagerListContextMenu",this._currentListContextSubMenu="SchedulesListContextMenu",this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this._where=this._getWhere(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.keyField="$key"},_getStructure:function(){return[{field:"$descriptor",label:this.colNameTriggerName,width:"100px"},{field:"job",label:this.colNameJobName,width:"100px",formatter:f.formatJobDescription},{field:"user",label:this.colNameUser,width:"100px",formatter:f.formatUser},{field:"startTimeUtc",label:this.colNameStartTimeUtc,width:"100px",formatter:f.formatDate},{field:"endTimeUtc",label:this.colNameEndTimeUtc,width:"100px",formatter:f.formatDate},{field:"priority",label:this.colNamePriority,width:"100px"},{field:"status",label:this.colNameStatus,width:"100px"},{field:"timesTriggered",label:this.colNameTimesTriggered,width:"100px"}]},_getSelect:function(){return["$key","job","user","startTimeUtc","endTimeUtc","repeatCount","repeatInterval","priority","status","timesTriggered"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"job"}]},_getInclude:function(){return["$descriptors,$key"]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:!1,sort:this._getSort()}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/JobMgr/templates/SchedulesListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","description","job","user"],include:["$descriptors"],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/JobMgr/templates/ScheduleDetailSummary.html"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/JobMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Utility","Sage/Data/SDataStore","Sage/MainView/JobMgr/JobManagerGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f,g,h,i,j){return g("Sage.MainView.JobMgr.FilterConfigurationProvider",[b,a],{_configuration:null,_hasLayoutConfiguration:!1,_hasFilterHiddenConfiguration:!1,serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"},systemDataService:{type:"sdata",name:"system"}},constructor:function(a){this.inherited(arguments),"Sage.MainView.JobMgr.JobManagerGroupContextService"!==this.groupContextService.declaredClass&&(Sage.Services.removeService("ClientGroupContext"),this.groupContextService=new GroupManagerGroupContextService,Sage.Services.addService("ClientGroupContext",this.groupContextService)),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},_onGroupContextChanged:function(){this.onConfigurationChange()},onConfigurationChange:function(){},_createConfiguration:function(a,b){var c=this.groupContextService.getCurrentListConfig();this._configuration=c.getFilterConfig(this.metaDataService,a,b),this._configuration||(this._configuration={}),this._configuration.getFilterManager=function(){var a=f.byId("list");return a&&a.get("filterManager")},this._hasLayoutConfiguration=!0},requestConfiguration:function(a){this._configuration={},this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1,this._onRequestConfigurationSuccess(a,null),this._getHiddenFilters(a)},_onRequestConfigurationSuccess:function(a,b){this._createConfiguration(b,a),this._callOptionsSuccess(a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},getFilterFormatter:function(a){return!1},ModifyFilterQuery:function(a,b){return b},_getHiddenFilters:function(a){var b=this._getHiddenFiltersKey();b&&h.getHiddenFilters(b,i.hitch(this,this._onHiddenFiltersFetchComplete,a||{}),function(a){})},_getHiddenFiltersKey:function(){return h.getHiddenFiltersKey()},_onHiddenFiltersFetchComplete:function(a,b){b&&b.response&&b.response.value&&(this._configuration._hiddenFilters=j.parse(b.response.value),this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array&&(this._configuration._hiddenFilters={})),this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey(),this._hasFilterHiddenConfiguration=!0,this._callOptionsSuccess(a)},_callOptionsSuccess:function(a){this._hasLayoutConfiguration&&this._hasFilterHiddenConfiguration&&a.success&&(a.success.call(a.scope||this,this._configuration,a,this),this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1)}})})},"Sage/MainView/JobMgr/JobManagerActions":function(){define(["dojo/_base/declare","Sage/MainView/JobMgr/RunJobDialog","Sage/UI/Dialogs","dojo/i18n!./nls/JobManagerActions","dojo/string","Sage/Utility","Sage/Utility/Jobs"],function(a,b,c,d,e,f,g){return Sage.namespace("Sage.MainView.JobMgr.JobManagerActions"),dojo.mixin(Sage.MainView.JobMgr.JobManagerActions,{_getSelectedId:function(){var a=f.getSelectionInfo();return a&&1===a.selectedIds.length?a.selectedIds[0]:null},showRunJobDialog:function(a){var e=this._getSelectedId();if(e){var f=g.getCurrentGroupId(),h=dijit.byId("dlgRunJob");h||(h=new b);var i="schedules"===f?e:null,j={key:e,currentGroupId:f,isNew:a,triggerId:i};h.show(j)}else c.showInfo(d.error_NoRecordSelected)},showScheduleRunJobDialog:function(a){var c=dijit.byId("dlgRunJob");c||(c=new b),c.show(a)},deleteScheduledJob:function(){var a=this._getSelectedId();a?c.raiseQueryDialog("Infor CRM",d.confirm_ScheduleDeletion,function(b){if(b){var c=g.getCurrentGroupId();Sage.Services.getService("JobService").deleteScheduledJob(a)&&g.refreshList(c)}},d.txtYes,d.txtNo):c.showInfo(d.error_NoRecordSelected)},showCancelExecutionDialog:function(){var a=this._getSelectedId();if(a){var b={key:a,executionId:a,success:function(b){if(b&&b.status===d.jobStatusComplete)c.showInfo(d.completedJobMessage);else{var g={title:d.txtInterruptExecutionTitle,query:e.substitute(d.txtInterruptExecutionConfirmationMessage,[""]),callbackFn:function(b){if(!0===b){var e={key:a,success:function(a){c.showInfo(d.txtInterruptExecutionMessage,d.txtInterruptExecutionTitle)},failure:function(a){}};f.interruptExecution(e)}},yesText:d.txtYes,noText:d.txtNo,icon:"warningIcon"};c.raiseQueryDialogExt(g)}},failure:function(a){return!0}},f=Sage.Services.getService("JobService");f.getExecution(b)}else c.showInfo(d.error_NoRecordSelected)}}),Sage.MainView.JobMgr.JobManagerActions})},"Sage/MainView/JobMgr/RunJobDialog":function(){define(["dojo/_base/declare","dojo/string","dojo/i18n!./nls/RunJobDialog","dojo/text!./templates/RunJobDialog.html","Sage/UI/JobSchedulingWidget","dijit/_Widget","Sage/_Templated","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin","dojo/data/ItemFileWriteStore","Sage/Utility/Jobs","Sage/Utility","Sage/UI/Dialogs"],function(declare,dojoString,i18nStrings,template,jobSchedulingWidget,_Widget,_Templated,dojoLang,dialogHelpIconMixin,itemFileWriteStore,jobUtility,slxUtility,dialogs){var runJobDialog=declare("Sage.MainView.JobMgr.RunJobDialog",[_Widget,_Templated],{id:"dlgRunJob",_dialog:!1,_configMgr:!1,_key:null,_trigger:null,_currentGroupId:null,widgetTemplate:new Simplate(eval(template)),nlsResources:i18nStrings,widgetsInTemplate:!0,show:function(a){this._key=a.key,this._currentGroupId=a.currentGroupId,a.triggerId&&(this._getTriggerRequest(a.triggerId),this.cmbScheduleType.set("value","scheduled"),this.cmbScheduleType.set("disabled",!0)),this._setVisible(this.jobSchedulingWidget.divJobSchedulingWidget,!1),this.jobSchedulingWidget.initialize({trigger:this._trigger}),this._dialog.show(),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new dialogHelpIconMixin),this._dialog.createHelpIconByTopic("runjob"))},_getTriggerRequest:function(a){var b=Sage.Services.getService("JobService"),c=new Sage.SData.Client.SDataSingleResourceRequest(b.getSchedulingSDataService());c.setResourceKind(dojoString.substitute("triggers('${0}')",[a]));var d=this;c.read({async:!1,success:function(a){d._trigger=a}})},_dialog_OnShow:function(){var a=this;a.txtJobName.set("value",a._key),window.setTimeout(function(){a._getAndDisplayJobDetails()},250)},_triggerJob:function(){var a=this.jobSchedulingWidget.getJobSchedulingOptions();if("scheduled"!==this.cmbScheduleType.value||this.jobSchedulingWidget.validateSchedule(!1,!1)){var b=[],c=!this._trigger;this.grdJobParameters&&this.grdJobParameters.store&&dojo.forEach(this.grdJobParameters.store._getItemsArray(),function(a){if(a&&a.name&&a.name.length){var d=c?a.defaultValue.length>0?a.defaultValue[0]:"":a.value.length>0?a.value[0]:"";b.push({name:a.name[0],value:d})}});var d=null;a.startTime&&a.startTime instanceof Date&&(d=slxUtility.Convert.toJsonStringFromDate(a.startTime));var e=null;a.endTime&&a.endTime instanceof Date&&(e=slxUtility.Convert.toJsonStringFromDate(a.endTime));var f=this._currentGroupId,g={closable:!0,key:this._key,descriptor:this.txtTriggerDescription.get("value"),frequency:"scheduled"===this.cmbScheduleType.value?a.frequency:null,startTime:d,endTime:e,user:{$key:this._getCurrentUserId()},parameters:b,infoMessage:"",cronExpression:a.cronExpression,title:this.txtTriggerDescription.get("value")||this.txtJobName.get("value"),success:function(a){jobUtility.refreshList(f)},failure:function(a){}};"scheduled"===this.cmbScheduleType.value?c?this._scheduleJob(g):this._updateTrigger(g):jobUtility.triggerJobAndDisplayProgressDialog(g),this._closeDialog()}},_getCurrentUserId:function(){var a=null,b=Sage.Services.getService("ClientContextService");return b&&b.containsKey("userID")&&(a=b.getValue("userID")),a},_scheduleJob:function(a){Sage.Services.getService("JobService").scheduleJob(a)},_updateTrigger:function(a){Sage.Services.getService("JobService").updateTrigger(a)},_cmbScheduleType_OnChange:function(){if(this.cmbScheduleType){var a="scheduled"===this.cmbScheduleType.value;this._setVisible(this.jobSchedulingWidget.divJobSchedulingWidget,a)}},_setVisible:function(a,b){a&&b?dojo.removeClass(a,"display-none"):a&&dojo.addClass(a,"display-none")},_closeDialog:function(){var a=this;this.jobSchedulingWidget.destroyWidget(),a._dialog.hide(),setTimeout(function(){a.destroyRecursive()},1e3)},_validateJobOptions:function(){return"string"!=typeof this._key||""===this._key?(dialogs.showError(dojoString.substitute(this.nlsResources.txtInvalidParameterMessage,[this.nlsResources.txtJobName_Caption]),this.nlsResources.txtInvalidParameterTitle),!1):"scheduled"!==this.cmbScheduleType.value||""!==this.jobSchedulingWidget.cboFrequency.get("value")||(dialogs.showError(dojoString.substitute(this.nlsResources.txtInvalidParameterMessage,[this.nlsResources.cbofrequency_Caption]),this.nlsResources.txtInvalidParameterTitle),!1)},_cmdOK_OnClick:function(){this._validateJobOptions()&&this._triggerJob()},_cmdCancel_OnClick:function(){this._closeDialog()},_dialog_OnCancel:function(){this._closeDialog()},_getAndDisplayJobDetails:function(){var a=this,b=Sage.Services.getService("JobService"),c=this._key,d="jobs";this._trigger&&(d="triggers",c=this._trigger.$key);var e={key:c,resourceKind:d,success:function(b){b.job&&a.txtJobName.set("value",b.job.$descriptor||b.job.$key),a.txtTriggerDescription.set("value",b.$descriptor||b.$key),a._setJobParametersGridStore(b.parameters)}};b.getJobDefinition(e)},_setJobParametersGridStore:function(a){var b=[];if(this._trigger){var c=this._getJobParameters(),d=this;dojo.forEach(a,function(a){var e=d._getParameterDescription(c,a.name);b.push({name:a.name,value:a.value,description:e})})}else b=a;var e={identifier:"name",items:b};this._setParameterValueColumnBinding(this._trigger?"value":"defaultValue");var f=new itemFileWriteStore({data:e});this.grdJobParameters.setStore(f)},_getParameterDescription:function(a,b){var c="";return dojo.forEach(a,function(a){a.name===b&&(c=a.description)}),c},_getJobParameters:function(){var a=null,b=Sage.Services.getService("JobService"),c=new Sage.SData.Client.SDataSingleResourceRequest(b.getSchedulingSDataService());return c.setResourceKind(dojoString.substitute("jobs('${0}')",[this._trigger.job.$key])),c.setQueryArg("select","parameters/*"),c.read({async:!1,success:function(b){a=b}}),a?a.parameters:a},_setParameterValueColumnBinding:function(a){var b=this;dojo.forEach(this.grdJobParameters.layout.cells,function(c,d){"parameterValue"===c.id&&(b.grdJobParameters.layout.cells[d].field=a)})}});return runJobDialog})},"Sage/MainView/ReportManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/MainView/ReportMgr/ReportManagerGroupContextService","Sage/MainView/ReportMgr/FilterConfigurationProvider","dojo/_base/declare","Sage/MainView/ReportMgr/ReportManagerActions","Sage/MainView/ReportMgr/ReportWizardController"],function(a,b,c,d){return d("Sage.MainView.ReportManager",a,{_currentTabId:!1,_currentTabDescription:!1,_mainViewName:"ReportManager",store:!1,constructor:function(a){var c=Sage.Services.getService("ClientGroupContext");c&&"Sage.MainView.ReportMgr.ReportManagerGroupContextService"===c.declaredClass||(c=new b,Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",c));var d=c.getContext();this._currentTabId=d.CurrentGroupID,this._currentTabDescription=d.CurrentName,this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"},dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged")},_getListPanelConfig:function(){var a=Sage.Services.getService("ClientGroupContext");return a&&(this.listPanelConfiguration=a.getCurrentListConfig(),this.store=this.listPanelConfiguration.list.store,this.service=this.listPanelConfiguration.list.store.service),this.listPanelConfiguration},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._getListPanelConfig(),this)},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)},_getTabsConfig:function(){return{store:!1,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:!1,showTabContextMenus:!1}},_getStaticTabs:function(){return Sage.Services.getService("ClientGroupContext").getStaticTabs()},_onTabSelected:function(a){var b=Sage.Services.getService("ClientGroupContext");if(b){var c=b.getContext(),d=a.id||a;if(c.CurrentGroupID===d)return;b._currentListConfiguration=null,b.setCurrentGroup(d,a.title)}},_onCurrentGroupChanged:function(a){var b=a.current;this._currentTabId=b.CurrentGroupID,this._currentTabDescription=b.CurrentName,dijit.byId("GroupTabs").selectedChildWidget.id!==b.CurrentGroupID&&dijit.byId("GroupTabs").selectChild(b.CurrentGroupID)},_getMenuConfig:function(){return!1}})})},"Sage/MainView/ReportMgr/ReportManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/ReportMgr/ReportsListPanelConfig","Sage/MainView/ReportMgr/SchedulesListPanelConfig","Sage/MainView/ReportMgr/HistoryListPanelConfig","dojo/_base/declare","dojo/i18n!./nls/ReportManagerGroupContextService"],function(a,b,c,d,e,f,g,h,i){var j=h("Sage.MainView.ReportMgr.ReportManagerGroupContextService",a,{_currentContext:null,_currentTabId:!1,_currentTabDescription:!1,_currentListConfiguration:!1,defaultTabId:"reports",staticTabsConfiguration:[{key:"reports",descriptor:i.reportsTabDisplayName,keyField:"$key",configProviderType:e,entityName:"Reports",isNonEntityBased:!0},{key:"schedules",descriptor:i.schedulesTabDisplayName,keyField:"$key",configProviderType:f,entityName:!1,isNonEntityBased:!0},{key:"history",descriptor:i.historyTabDisplayName,keyField:"$key",configProviderType:g,entityName:"ReportHistory",isNonEntityBased:!1}],_configsHash:!1,_LOCALSTORE_NAMESPACE:"ReportManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_REPORT_FILTERS_KEY:"_REPORTFILTERS",_tabNameCache:{},constructor:function(){this.inherited(arguments),this._currentContext={},dojo.mixin(this._currentContext,this._emptyContext),this._currentContext.CurrentTableKeyField="$key",this._currentContext.AppliedFilterInfo={},this._currentContext.CurrentFamily=null,this._currentContext.notGroupBased=!0,this.setContext(this._getDefaultTabId(),"default"),this.unsubscribeConnects(),this._subscribes=[],this._subscribes.push(dojo.subscribe("/ui/filters/default/refresh",this,this._onDefaultFilterRefresh)),this._onDefaultFilterLoad()},getStaticTabs:function(){return this.staticTabsConfiguration},setCurrentGroup:function(a,b,c){this._currentContext.CurrentGroupID!==a&&(this._currentContext.CurrentTableKeyField=c||this.getKeyField(a),this.setContext(a,b||this.getGroupName(a)),this.onCurrentGroupChanged({current:this._currentContext}))},getContext:function(){return this._currentContext},_ensureConfigsHash:function(){if(!this._configsHash){for(var a={},b=0;b<this.staticTabsConfiguration.length;b++){var c=this.staticTabsConfiguration[b];a[c.key]=d.mixin(c,c.instance?null:{instance:!1})}this.configsHash=a}},_setListConfig:function(){this._ensureConfigsHash();var a=this._currentContext.CurrentGroupID,b=this.configsHash.hasOwnProperty(a)?this.configsHash[a]:this.configsHash.groups;b.instance?b.instance.rebuild():b.instance=new b.configProviderType,this._currentListConfiguration=b.instance,this._currentListConfiguration.isNonEntityBased=b.isNonEntityBased,this._currentListConfiguration.entityName=b.entityName},getCurrentListConfig:function(){return this._setListConfig(),this._currentListConfiguration},getKeyField:function(a){this._ensureConfigsHash();var b="$key";return this.configsHash[a]&&(b=this.configsHash[a].keyField||"$key"),b},getGroupName:function(a){this._ensureConfigsHash();var b="default";return this.configsHash[a]&&(b=this.configsHash[a].descriptor||"default"),b},onCurrentGroupChanged:function(a){this._clearFilterManager();var b=this;this._onDefaultFilterLoad(function(){dojo.publish("/group/context/changed",[a,b]),b._saveToLocalStorage(b._STORE_KEY_LASTAB,b.getContext().CurrentGroupID)})},_clearFilterManager:function(){dojo.publish("/ui/filters/default/apply",[{},{},this])},setContext:function(a,b){this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=b,this._currentContext.AppliedFilterInfo={},this._currentContext.filtersForEntity="",this._setListConfig(),this._currentContext.CurrentEntity=this._currentListConfiguration.entityName,this._currentContext.isNonEntityBased=this._currentListConfiguration.isNonEntityBased,this._isRetrievingContext=!1,this.onContextSet(this._currentContext)},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},_onDefaultFilterLoad:function(a){"schedules"===this._currentContext.CurrentGroupID?(dojo.publish("/group/context/changedTask",[this]),this._saveToLocalStorage(this._STORE_KEY_LASTAB,this.getContext().CurrentGroupID),dojo.publish("/ui/filters/default/destroyFilters",[this])):"history"===this._currentContext.CurrentGroupID?this._requestFilters(a):this._requestReportFilters(a)},_requestReportFilters:function(a){var b=this.getContext(),d=this,e=c.getSDataService("system"),f=new Sage.SData.Client.SDataResourcePropertyRequest(e);f.setResourceKind("reports"),f.setResourceProperty("$queries/filters"),f.readFeed({success:function(c){c&&(b.filtersForEntity=dojo.toJson(c.$resources),d._requestFilters(a))},error:function(a){},scope:this,async:!1})},_requestFilters:function(a){var b=this.getContext(),e=c.getSDataService("system"),f={$name:"getEntityFilters",request:{entityName:b.CurrentEntity,key:b.CurrentGroupID,isNonEntityBased:b.isNonEntityBased,filtersForEntity:b.filtersForEntity}},g=new Sage.SData.Client.SDataServiceOperationRequest(e);g.setOperationName("getEntityFilters"),g.execute(f,{success:d.hitch(this,function(b){try{b.response.appliedFilterInfo&&(this._currentContext.AppliedFilterInfo.applied=b.response.appliedFilterInfo.applied,this._currentContext.AppliedFilterInfo.definitionSet=b.response.appliedFilterInfo.definitionSet),a&&a()}catch(a){}}),failure:function(a){},async:!1})},_onDefaultFilterRefresh:function(a,b,d){var e=this.getContext(),f=c.getSDataService("system"),g={$name:"applyFilterToEntity",request:{entityName:e.CurrentEntity,filter:dojo.toJson(d.createValueSet()),key:e.CurrentGroupID,isNonEntityBased:e.isNonEntityBased,filtersForEntity:e.filtersForEntity}};new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("applyFilterToEntity").execute(g,{})},_saveToLocalStorage:function(a,b,c){this._saveToSessionStorage(a,b,c)},_getFromLocalStorage:function(a,b){return this._getFromSessionStorage(a,b)},_getFromSessionStorage:function(a,b){b||(b=this._LOCALSTORE_NAMESPACE);var c=b+"_"+a;return sessionStorage.getItem(c)},_saveToSessionStorage:function(a,b,c){c||(c=this._LOCALSTORE_NAMESPACE);var d=c+"_"+a;sessionStorage.setItem(d,b)},_getDefaultTabId:function(){var a=this._getUrlTabId();if(a&&(a=this._validateTabId(a)))return a;var b=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(b&&(this.defaultTabId=b),!this._configsHash)for(var c=0;c<this.staticTabsConfiguration;c++)if(this.defaultTabId===this.staticTabsConfiguration[c].key)return this.defaultTabId;return this.defaultTabId},_getUrlTabId:function(){
var a=!1,b="[\\?&]tabId=([^%#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d&&(a=d[1]),a},_validateTabId:function(a){if(a)for(var b=0;b<this.staticTabsConfiguration.length;b++){var c=this.staticTabsConfiguration[b];if(c.key.toUpperCase()===a.toUpperCase())return c.key}return null}});if(Sage.Services.hasService("ClientGroupContext")){var k=Sage.Services.getService("ClientGroupContext");"Sage.MainView.ReportMgr.ReportManagerGroupContextService"!==k.declaredClass&&(k.unsubscribeConnects(),Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",new j))}else Sage.Services.addService("ClientGroupContext",new j);return j})},"Sage/MainView/ReportMgr/ReportsListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/ReportMgr/ReportsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/ReportsListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/GridParts/Columns/DateTime","dojo/_base/lang","Sage/MainView/ReportMgr/ReportManagerFormatter","dojo/i18n!./templates/nls/ReportsListSummary","dojo/i18n!./templates/nls/ReportDetailSummary"],function(a,b,c,d,e,f,g,h){return c("Sage.MainView.ReportMgr.ReportsListPanelConfig",[a],{keyField:"$key",_listId:"Reports",_resourceKind:"reports",_contextMenu:"ReportManagerListContextMenu",_currentListContextSubMenu:"ReportsListContextMenu",constructor:function(){g.mixin(this,d),this._service=e.getSDataService("system"),this._structure=this._getStructure(),this._select=this._getSelect(),this._where=this._getWhere(),this._include=this._getInclude(),this._store=this._getStore(),this.sort=this._getSort(),this._sort=this._getSort(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.list.selectionMode="single"},_getStructure:function(){return[{field:"displayName",label:this.colNameReportName,width:"100px"},{field:"mainTable",label:this.colNameTable,width:"50px",formatter:h.formatProperCase},{field:"createUser",label:this.colNameCreateUser,width:"50px",formatter:h.formatGetUserById},{field:"createDate",label:this.colNameCreateDate,width:"50px",type:f},{field:"modifyUser",label:this.colNameModifyUser,width:"50px",formatter:h.formatGetUserById},{field:"modifyDate",label:this.colNameModifyDate,width:"50px",type:f}]},_getSelect:function(){return["displayName","mainTable","createUser","createDate","modifyUser","modifyDate"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"displayName",descending:!1}]},_getInclude:function(){return[]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["displayName","mainTable","createUser","createDate","modifyUser","modifyDate"],include:[],sort:this._getSort(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/ReportMgr/templates/ReportsListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["displayName","mainTable","createUser","createDate","modifyUser","modifyDate"],include:[],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/ReportMgr/templates/ReportDetailSummary.html"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/_BaseListPanelConfig":function(){define(["Sage/_ConfigurationProvider","Sage/Store/SData","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dijit/registry","dojo/_base/declare","dojo/string","Sage/Data/SDataServiceRegistry","Sage/Services/JobService"],function(a,b,c,d,e,f,g,h,i,j,k,l){return i("Sage.MainView._BaseListPanelConfig",[a],{list:!1,detail:!1,summary:!1,toolBar:!1,_listId:!1,_store:!1,_service:!1,_where:!1,_sort:!1,_select:!1,_include:!1,_structure:!1,_currentUserId:!1,_resourceKind:!1,_securedAction:"",keyField:"$key",hasCompositeKey:!1,_menuItems:null,_contextMenu:!1,_summaryformaterScope:!1,entityName:!1,rebuildMenus:!0,rebuildOnRefresh:!1,detailStateKey:!1,defaultSelectFirst:!1,constructor:function(){var a=Sage.Services.getService("ClientContextService");a&&a.containsKey("userID")&&(this._currentUserId=a.getValue("userID")),this._include=this._getInclude(),this._menuItems=[]},rebuild:function(){this._where=this._getWhere(),this._structure=this._getStructure(),this.list=this._getListConfig(),this.summary=this._getSummaryConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars()},_onListRefresh:function(a){},_getListConfig:function(){return this._store?this._store.where=this._where:this._store=this._getStore(),{id:this._listId,structure:this._structure,store:this._store,defaultSelectFirst:this.defaultSelectFirst,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext}},_getStore:function(){return new b({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where})},_getSelect:function(){return[]},_getInclude:function(){return[]},_getSort:function(){return[]},_getWhere:function(){return""},_getStructure:function(){return[]},_getSummaryConfig:function(){return{structure:[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}],layout:"layout",store:new b({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where}),rowHeight:170,rowsPerPage:10,formatterScope:this._getFormatterScope()}},_getFormatterScope:function(){return!1},_getDetailConfig:function(){return!1},_getToolBars:function(){return{items:[]}},_getListContextMenuItems:function(){if(this._contextMenu){if(this._menuItems.length>0)return this._menuItems;if(!Sage.UI.DataStore.ContextMenus)return[];if(!Sage.UI.DataStore.ContextMenus.listContextMenu)return[];this._menuItems.length>0&&this._menuItems[0].destroyDescendants(),this._menuItems=[];for(var a=Sage.UI.DataStore.ContextMenus.listContextMenu.items,b=a.length,c=0;c<b;c++){var d=a[c];d.id===this._currentListContextSubMenu&&this._buildChildMenu(d.submenu,null)}return this._menuItems}},_getGridMenu:function(){return dijit.byId("_listContextmenu")},_buildChildMenu:function(a,b){for(var c=a.length,h=0;h<c;h++){var i=a[h];if(i.submenu.length>0){var j=new d;this._buildChildMenu(i.submenu,j);var k=new e({label:i.text,popup:j});b?b.addChild(k):this._menuItems.push(k)}else{var l=null;if("-"===i.text||" "===i.text||i.isspacer)l=new f;else{var m=i.href;m.indexOf("javascript:")<0&&(m=dojo.string.substitute("javascript:${0}()",[m])),l=new g({label:i.text||"...",icon:i.img,title:i.tooltip||"",ref:m,onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}})}b?b.addChild(l):this._menuItems.push(l)}}},_onListContext:function(){},getNonEntityBasedFilterConfig:function(a){var b=this;return{groupId:this._listId,store:new c({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(k.getSDataService("system")).setResourceKind(b._resourceKind).setResourceProperty("$queries/filters").setQueryArg("count",20).setQueryArg("orderby","filterName")}),createStoreForFilter:function(a){return a&&a.filterName?new c({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(b._service).setResourceKind(b._resourceKind).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",a.filterName).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",b._where||"")}):null},getFilterManager:function(){var a=h.byId("list");return a&&a.get("filterManager")}}},getFilterConfig:function(a,b,d){var e=this;return{groupId:this._listId,store:new c({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(a).setResourceKind("entities").setResourceSelector(j.substitute('"${0}"',[e.entityName])).setResourceProperty("filters").setQueryArg("where",'filterType ne "analyticsMetric"').setQueryArg("count",20).setQueryArg("orderby","displayName")}),createStoreForFilter:function(a){return a&&a.filterName?new c({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(e._service).setResourceKind(e._resourceKind).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",a.filterName).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",e._where||"")}):null},getFilterManager:function(){var a=h.byId("list");return a&&a.get("filterManager")}}}})})},"Sage/MainView/ReportMgr/ReportsSDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/ReportMgr/ReportsSDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.MainView.ReportMgr.ReportsSDataSummaryFormatterScope",[c],{constructor:function(a){dojo.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new d(this.requestConfiguration),Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)}})})},"Sage/MainView/ReportMgr/ReportsSDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){var e=c("Sage.MainView.ReportMgr.ReportsSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:!1,include:[],service:null,constructor:function(a){d.mixin(this,a),this.requestHash={},this.fetching=!1,this.service=Sage.Data.SDataServiceRegistry.getSDataService("system")},add:function(a,b){var c=this.requestHash[a];if(c&&c.id!==b.id){c.duplicates||(c.duplicates=[]);for(var d=!1,e=0;e<c.duplicates.length;e++)c.duplicates[e].context.id===b.id&&(d=!0);d||c.duplicates.push({id:b.id,context:b})}else this.requestHash[a]=b},send:function(a,b){this.fetching=!0;var c=this,e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind);for(var f in this.requestHash)e.setResourceSelector("'"+f+"'");e.setQueryArg("include",this.include.join(",")),e.read({success:d.hitch(b,a,c),failure:d.hitch(this,this.requestFailed,c)})},requestFailed:function(a,b,c){}});return c("Sage.MainView.ReportMgr.ReportsSDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new e,this.requestTimeout=!1},requestDataNoWait:function(a,b,c){var d=new e;c.keyField&&(this.keyField=c.keyField),d.select=c.select,d.resourceKind=c.resourceKind,d.serviceName=c.serviceName,d.include=c.include,d.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(d.expandRecurrences=c.expandRecurrences),d.add(a,b),d.send(this.receiveData,this)},receiveData:function(a,b){var c=b,d=c.id;d||(d=c[this.keyField],c.id=d);var e=a.requestHash[c.id];if(e)try{e.applied||(e.applied=!0,e.set("entity",c))}catch(a){}}})})},"Sage/MainView/ReportMgr/ReportManagerFormatter":function(){define(["Sage/Utility","dojo/date/locale","dojo/number","dojo/string","dojo/_base/array","dojo/i18n!./nls/ReportManagerFormatter","Sage/Reporting/Enumerations","dojo/_base/lang"],function(a,b,c,d,e,f,g,h){var i=h.setObject("Sage.MainView.ReportMgr.ReportManagerFormatter",h.mixin({},{_isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},formatDate:function(c){if(a.Convert.isDateString(c)){var d=a.Convert.toDateFromString(c);return b.format(d,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return""},formatFileSize:function(a){var b=Sage.MainView.ReportMgr.ReportManagerFormatter;return a&&b._isNumeric(a)?c.round(a/1024,0)+" KB":""},formatElapsedTime:function(a){var b=Sage.MainView.ReportMgr.ReportManagerFormatter;if(a&&b._isNumeric(a)){var c=Math.floor(a/86400),e=Math.floor((a-24*c*3600)/3600),f=Math.floor((a-3600*e)/60),g=a-24*c*3600-3600*e-60*f;return d.pad(e,2)+":"+d.pad(f,2)+":"+d.pad(g,2)}return""},formatBoolean:function(b){return a.isTrue(b)?f.txtTrue:f.txtFalse},_getParameterValue:function(a,b){var c="";return a&&e.some(a,function(a,d){if(a.name===b)return c=a.value,!0}),c},formatGetUserById:function(b){return b?a.getUserName(b):""},getParameterRunAsUser:function(b){if(b){var c=Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(b,"RunAsUserId");return a.getUserName(c)}return""},formatScheduleName:function(a){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(a.parameters,"ScheduleName")},formatScheduleDescription:function(a){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(a.parameters,"Description")},formatPluginName:function(a){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(a.parameters,"PluginName")},formatTemplateName:function(a){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(a,"TemplateName")},formatOutputFormat:function(a){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(a.parameters,"OutputFormat")},formatScheduleUser:function(a){return a&&a.$descriptor?a.$descriptor:""},formatCronExpression:function(a){return a.cronExpression},formatAttachment:function(a,b,c,e){c.innerHTML=d.substitute('<a href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${0}\');" title="${1}">${1}</a>',[a.AttachId,a.ScheduleName])},formatExecutionType:function(a){return g.getExecutionTypeCaption(a)},formatReportType:function(a){return g.getReportTypeCaption(a)},formatProperCase:function(a){return"string"==typeof a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}}));return h.setObject("Sage.MainView.ReportMgr.ReportManagerFormatter",i),Sage.MainView.ReportMgr.ReportManagerFormatter})},"Sage/MainView/ReportMgr/SchedulesListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/ReportMgr/SchedulesSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/SchedulesListPanelConfig","Sage/Utility/Jobs","Sage/UI/Controls/GridParts/Columns/DateTime","dojo/_base/lang","dojo/i18n!./templates/nls/SchedulesListSummary","dojo/i18n!./templates/nls/ScheduleDetailSummary"],function(a,b,c,d,e,f,g){return c("Sage.MainView.ReportMgr.SchedulesListPanelConfig",[a],{_listId:"Schedules",_resourceKind:"triggers",_contextMenu:"ReportManagerListContextMenu",_currentListContextSubMenu:"ReportSchedulesListContextMenu",constructor:function(){g.mixin(this,d);var a=Sage.Services.getService("JobService");this._service=a.getSchedulingSDataService(),this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this._where=this._getWhere(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.list.selectionMode="single"},_getStructure:function(){return[{field:"job",label:this.colJobName,width:"100px",formatter:e.formatJobDescription},{field:"$descriptor",label:this.colNameDescription,width:"100px"},{field:"user",label:this.colNameRunAsUser,width:"100px",formatter:e.formatUser},{field:"startTimeUtc",type:f,label:this.colNameStartTimeUtc,width:"100px"},{field:"endTimeUtc",type:f,label:this.colNameEndTimeUtc,width:"100px"},{field:"priority",label:this.colNamePriority,width:"100px"},{field:"status",label:this.colNameStatus,width:"100px"},{field:"timesTriggered",label:this.colNameExecutionCount,width:"100px"}]},_getSelect:function(){return["$key","job","user","startTimeUtc","endTimeUtc","repeatCount","repeatInterval","priority","status","timesTriggered"]},_getInclude:function(){return["$descriptors,$key"]},_getWhere:function(){return"jobId like 'Saleslogix.Reporting%'"},_getSort:function(){return[{attribute:"job"}]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:!1,sort:this._getSort()}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/ReportMgr/templates/SchedulesListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:!1}},_getDetailConfig:function(){this._getFormatterScope();return{resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ReportMgr/templates/ScheduleDetailSummary.html"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/ReportMgr/SchedulesSDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/ReportMgr/SchedulesSDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.MainView.ReportMgr.SchedulesSDataSummaryFormatterScope",[c],{constructor:function(a){dojo.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new d(this.requestConfiguration),Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)}})})},"Sage/MainView/ReportMgr/SchedulesSDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){var e=c("Sage.MainView.ReportMgr.SchedulesSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:!1,include:[],service:null,constructor:function(a){d.mixin(this,a),this.requestHash={},this.fetching=!1;var b=Sage.Services.getService("JobService");this.service=b.getSchedulingSDataService()},add:function(a,b){var c=this.requestHash[a];if(c&&c.id!==b.id){c.duplicates||(c.duplicates=[]);for(var d=!1,e=0;e<c.duplicates.length;e++)c.duplicates[e].context.id===b.id&&(d=!0);d||c.duplicates.push({id:b.id,context:b})}else this.requestHash[a]=b},send:function(a,b){this.fetching=!0;var c=this,e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind);for(var f in this.requestHash)e.setResourceSelector("'"+f+"'");e.setQueryArg("include",this.include.join(",")),e.read({success:d.hitch(b,a,c),failure:d.hitch(this,this.requestFailed,c)})},requestFailed:function(a,b,c){}});return c("Sage.MainView.ReportMgr.SchedulesSDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new e,this.requestTimeout=!1},requestDataNoWait:function(a,b,c){var d=new e;c.keyField&&(this.keyField=c.keyField),d.select=c.select,d.resourceKind=c.resourceKind,d.serviceName=c.serviceName,d.include=c.include,d.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(d.expandRecurrences=c.expandRecurrences),d.add(a,b),d.send(this.receiveData,this)},receiveData:function(a,b){var c=b,d=c.id;d||(d=c[this.keyField],c.id=d);var e=a.requestHash[c.id];if(e)try{e.applied||(e.applied=!0,e.set("entity",c))}catch(a){}}})})},"Sage/MainView/ReportMgr/HistoryListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/UI/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/HistoryListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/GridParts/Columns/DateTime","dojo/_base/lang","Sage/MainView/ReportMgr/ReportManagerFormatter","Sage/Utility/Jobs","dojo/i18n!./templates/nls/HistoryListSummary","dojo/i18n!./templates/nls/HistoryDetailSummary"],function(a,b,c,d,e,f,g,h,i){return c("Sage.MainView.ReportMgr.HistoryListPanelConfig",[a],{keyField:"$key",_listId:"History",_resourceKind:"reportHistory",_contextMenu:"ReportManagerListContextMenu",_currentListContextSubMenu:"HistoryListContextMenu",entityName:"ReportHistory",constructor:function(){g.mixin(this,d),this._service=e.getSDataService("dynamic"),this._structure=this._getStructure(),this._select=this._getSelect(),this._where=this._getWhere(),this._include=this._getInclude(),this._store=this._getStore(),this.sort=this._getSort(),this._sort=this._getSort(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars()},_getStructure:function(){return[{field:"CreateDate",label:this.colNameDate,width:"65px",type:f},{field:"ScheduleName",label:this.colNameReportName,width:"125px",renderCell:h.formatAttachment},{field:"ReportType",label:this.colNameReportType,width:"50px",formatter:h.formatReportType},{field:"ExecutionType",label:this.colNameExecutionType,width:"50px",formatter:h.formatExecutionType},{field:"DocumentType",label:this.colNameOutputFormat,width:"50px"},{field:"RunAs",label:this.colNameRunAs,width:"50px",formatter:i.formatUser},{field:"ScheduledBy",label:this.colNameScheduledBy,width:"50px",formatter:i.formatUser},{field:"FileSize",label:this.colNameSize,width:"50px",formatter:h.formatFileSize}]},_getSelect:function(){return["CreateDate","ExecutionType","ScheduledBy","RunAs","CreateUser","ScheduleName","DocumentType","FileSize","ElapsedTimeInSeconds","ReportType","AttachId"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"ScheduleName",descending:!1}]},_getInclude:function(){return["$descriptors"]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/ReportMgr/templates/HistoryListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:this._getSelect(),include:["$descriptors"],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/ReportMgr/templates/HistoryDetailSummary.html"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}},resolveProperty:function(a,b){return"ScheduledBy"===a?"ScheduledBy.Id":a}})})},"Sage/MainView/ReportMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/MainView/ReportMgr/ReportManagerGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f,g,h){return e("Sage.MainView.ReportMgr.FilterConfigurationProvider",[b,a],{_configuration:null,_hasLayoutConfiguration:!1,_hasFilterHiddenConfiguration:!1,_currentUserId:!1,serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"},systemDataService:{type:"sdata",name:"system"}},constructor:function(a){this.inherited(arguments),"Sage.MainView.ReportMgr.ReportManagerGroupContextService"!==this.groupContextService.declaredClass&&(Sage.Services.removeService("ClientGroupContext"),this.groupContextService=new c,Sage.Services.addService("ClientGroupContext",this.groupContextService)),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},requestConfiguration:function(a){this._configuration={},this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1,this._onRequestConfigurationSuccess(a,null),this._getHiddenFilters(a)},onConfigurationChange:function(){},getFilterFormatter:function(a){return a&&a.filterName,!1},_onGroupContextChanged:function(){this.onConfigurationChange()},_createConfiguration:function(a,b){var c=this.groupContextService.getCurrentListConfig();this.groupContextService._currentContext.isNonEntityBased?this._configuration=c.getNonEntityBasedFilterConfig(b):this._configuration=c.getFilterConfig(this.metaDataService,a,b),this._configuration||(this._configuration={}),this._configuration.getFilterManager=function(){var a=d.byId("list");return a&&a.get("filterManager")},this._hasLayoutConfiguration=!0},_onRequestConfigurationSuccess:function(a,b){this._createConfiguration(b,a),this._callOptionsSuccess(a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},_getHiddenFilters:function(a){var b=this._getHiddenFiltersKey();b&&f.getHiddenFilters(b,g.hitch(this,this._onHiddenFiltersFetchComplete,a||{}),function(a){})},_getHiddenFiltersKey:function(){return f.getHiddenFiltersKey()},_onHiddenFiltersFetchComplete:function(a,b){b&&b.response&&b.response.value&&(this._configuration._hiddenFilters=h.parse(b.response.value),this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array&&(this._configuration._hiddenFilters={})),this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey(),this._hasFilterHiddenConfiguration=!0,this._callOptionsSuccess(a)},_callOptionsSuccess:function(a){this._hasLayoutConfiguration&&this._hasFilterHiddenConfiguration&&a.success&&(a.success.call(a.scope||this,this._configuration,a,this),this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1)}})})},"Sage/MainView/ReportMgr/ReportManagerActions":function(){define(["dojo/_base/declare","Sage/UI/Dialogs","dojo/i18n!./nls/ReportManagerActions","dojo/string","Sage/MainView/ReportMgr/ReportWizardController","Sage/Reporting/Enumerations","Sage/Utility/Jobs","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h){return Sage.namespace("Sage.MainView.ReportMgr.ReportManagerActions"),dojo.mixin(Sage.MainView.ReportMgr.ReportManagerActions,{runReport:function(){this._runReport(f.ExecutionType.OnDemand)},deleteReport:function(){var a=this._getSelectedId();if(a){var e=this;b.raiseQueryDialog("Infor CRM",d.substitute(c.confirm_Deletion,[c.confirm_Report]),function(b){if(b){var c=g.getCurrentGroupId();e._deleteReport(a)&&g.refreshList(c)}},c.txtYes,c.txtNo)}else b.showInfo(c.txtSelectRecord)},_getSelectedId:function(){var a=Sage.Utility.getSelectionInfo();return a&&1===a.selectedIds.length?a.selectedIds[0]:null},scheduleReport:function(){this._runReport(f.ExecutionType.Scheduled)},editSchedule:function(){var a=this._getSelectedId();if(a){var d={triggerId:a};e.startWizard(d)}else b.showInfo(c.txtSelectRecord)},deleteSchedule:function(){var a=this._getSelectedId();a?b.raiseQueryDialog("Infor CRM",d.substitute(c.confirm_Deletion,[c.confirm_Schedule]),function(b){if(b){var c=g.getCurrentGroupId(),d=Sage.Services.getService("JobService"),e=new dojo.Deferred;d.deleteScheduledJob(a,e)&&e.then(function(){g.refreshList(c)},function(a){})}},c.txtYes,c.txtNo):b.showInfo(c.txtSelectRecord)},deleteHistory:function(){if(Sage.Utility.getSelectionInfo().selectedIds.length<=0)b.showInfo(c.txtInvalidSelectionCount);else{var a=this;b.raiseQueryDialog("Infor CRM",d.substitute(c.confirm_Deletion,[c.confirm_ReportHistory]),function(b){b&&a._deleteHistory()},c.txtYes,c.txtNo)}},_runReport:function(a){var d,f,g,h=!1,i=dijit.byId("list"),j=i.getSelectionInfo();if(j&&j.selections&&j.selections.length>0){var k=j.selections[0].entity;k&&(d=k.displayName,f=k[j.keyField],g={reportId:f,reportDisplayName:d,reportOptions:{wizardOptions:{},scheduleOptions:{executionType:a},exportOptions:{},conditions:[],parameterValues:[]}},e.startWizard(g),h=!0)}h||b.showInfo(c.txtSelectRecord)},_getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},_deleteReport:function(a){var e=h.getSDataService("system",!1,!0,!1),f=new Sage.SData.Client.SDataApplicationRequest(e);f.setResourceKind(d.substitute("reports('${0}')",[a]));var g=f.uri;return dojo.xhrDelete({handleAs:"json",url:g,error:function(a){return b.showError(d.substitute(c.txtErrorDeleteReport,[a.status])),!1}}),!0},_getCurrentUserId:function(){var a=null,b=Sage.Services.getService("ClientContextService");return b&&b.containsKey("userID")&&(a=b.getValue("userID")),a},_deleteHistory:function(){var a=Sage.Utility.getSelectionInfo(),d=[{name:"EntityName",value:"ReportHistory"},{name:"SelectedIds",value:a.selectionCount>0?a.selectedIds.join(",")||"":""}],e=g.getCurrentGroupId(),f={closable:!0,key:"Sage.SalesLogix.BusinessRules.Jobs.DeleteEntityJob",descriptor:c.txtDeleteHistory,user:{$key:this._getCurrentUserId()},parameters:d,infoMessage:c.txtDeleteHistory,title:c.txtDeleteTitle,complete:function(a){g.refreshList(e)},failure:function(a){b.showError(dojo.string.substitute(c.deleteJobError,[a.statusText]))}};g.triggerJobAndDisplayProgressDialog(f)}}),Sage.MainView.ReportMgr.ReportManagerActions})},"Sage/MainView/EntityManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/MainView/EntityMgr/EntityManagerGroupContextService","Sage/MainView/EntityMgr/EntityFilterConfigurationProvider","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){return d("Sage.MainView.EntityManager",a,{_currentTabId:!1,_currentTabDescription:!1,_mainViewName:"EntityManager",store:!1,constructor:function(a){var c=Sage.Services.getService("ClientGroupContext");c&&"Sage.MainView.EntityMgr.EntityManagerGroupContextService"===c.declaredClass||(c=new b,Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",c));var d=c.getContext();this._currentTabId=d.CurrentGroupID,this._currentTabDescription=d.CurrentName,this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"}},_getListPanelConfig:function(){var a=Sage.Services.getService("ClientGroupContext");return a&&(this.listPanelConfiguration=a.getCurrentListConfig(),this.store=this.listPanelConfiguration.list.store,this.service=this.listPanelConfiguration.list.store.service),this.listPanelConfiguration},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._getListPanelConfig(),this)},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)},_getTabsConfig:function(){return{store:!1,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:e.hitch(this,"_onTabSelected"),onTabClose:!1,showTabContextMenus:!1}},_getStaticTabs:function(){return Sage.Services.getService("ClientGroupContext").getStaticTabs()},_onTabSelected:function(a){var b=Sage.Services.getService("ClientGroupContext");if(b){var c=b.getContext(),d=a.id||a;if(c.CurrentGroupID===d)return;b._currentListConfiguration=null,b.setCurrentGroup(d,a.title)}},_onCurrentGroupChanged:function(a){var b=a.current;this._currentTabId=b.CurrentGroupID,this._currentTabDescription=b.CurrentName,dijit.byId("GroupTabs").selectedChildWidget.id!==b.CurrentGroupID&&dijit.byId("GroupTabs").selectChild(b.CurrentGroupID)},_getMenuConfig:function(){return!1}})})},"Sage/MainView/EntityMgr/EntityManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","dojo/_base/lang","dojo/_base/json","dojo/_base/connect","Sage/MainView/EntityMgr/EntityListPanelConfig","dojo/_base/declare","Sage/Services/UserOptions","dojo/i18n!./nls/EntityManagerGroupContextService"],function(a,b,c,d,e,f,g,h,i){var j=g("Sage.MainView.EntityMgr.EntityManagerGroupContextService",a,{_currentContext:null,_currentTabId:!1,_currentTabDescription:!1,_currentListConfiguration:!1,defaultTabId:"entity",staticTabsConfiguration:[{key:"entity",descriptor:i.entityTabDisplayName,keyField:"$key",configProviderType:f,entityName:"Entities",isNonEntityBased:!0}],_configsHash:!1,_LOCALSTORE_NAMESPACE:"EntityManagerView",
_STORE_KEY_LASTAB:"_LASTTAB",_ENTITY_FILTERS_KEY:"_ENTITYFILTERS",_tabNameCache:{},constructor:function(){this.inherited(arguments),this._currentContext={},c.mixin(this._currentContext,this._emptyContext),c.mixin(this,i),this._currentContext.CurrentTableKeyField="$key",this._currentContext.AppliedFilterInfo={},this._currentContext.CurrentFamily=null,this._currentContext.notGroupBased=!0,this.setContext(this._getDefaultTabId(),"default"),this.unsubscribeConnects(),this._subscribes=[],this._subscribes.push(e.subscribe(b.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh)),this._onDefaultFilterLoad()},getStaticTabs:function(){return this.staticTabsConfiguration},setCurrentGroup:function(a,b,c){this._currentContext.CurrentGroupID!==a&&(this._currentContext.CurrentTableKeyField=c||this.getKeyField(a),this.setContext(a,b||this.getGroupName(a)),this.onCurrentGroupChanged({current:this._currentContext}))},getContext:function(){return this._currentContext},_ensureConfigsHash:function(){if(!this._configsHash){for(var a={},b=0;b<this.staticTabsConfiguration.length;b++){var d=this.staticTabsConfiguration[b];a[d.key]=c.mixin(d,d.instance?null:{instance:!1})}this.configsHash=a}},_setListConfig:function(){this._ensureConfigsHash();var a=this._currentContext.CurrentGroupID,b=this.configsHash.hasOwnProperty(a)?this.configsHash[a]:this.configsHash.groups;b.instance?b.instance.rebuild():b.instance=new b.configProviderType,this._currentListConfiguration=b.instance,this._currentListConfiguration.isNonEntityBased=b.isNonEntityBased,this._currentListConfiguration.entityName=b.entityName},getCurrentListConfig:function(){return this._setListConfig(),this._currentListConfiguration},getKeyField:function(a){this._ensureConfigsHash();var b="$key";return this.configsHash[a]&&(b=this.configsHash[a].keyField||"$key"),b},getGroupName:function(a){this._ensureConfigsHash();var b="default";return this.configsHash[a]&&(b=this.configsHash[a].descriptor||"default"),b},onCurrentGroupChanged:function(a){this._clearFilterManager();var b=this;this._onDefaultFilterLoad(function(){e.publish("/group/context/changed",[a,b]),b._saveToLocalStorage(b._STORE_KEY_LASTAB,b.getContext().CurrentGroupID)})},_clearFilterManager:function(){e.publish("/ui/filters/default/apply",[{},{},this])},setContext:function(a,b){this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=b,this._currentContext.AppliedFilterInfo={},this._currentContext.filtersForEntity="",this._setListConfig(),this._currentContext.CurrentEntity=this._currentListConfiguration.entityName,this._currentContext.isNonEntityBased=this._currentListConfiguration.isNonEntityBased,this._isRetrievingContext=!1,this.onContextSet(this._currentContext)},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},_onDefaultFilterLoad:function(a){this._requestFilters(a)},_requestFilters:function(a){var b=[{id:"DisplayName",propertyName:"$descriptor",$descriptor:"DisplayName",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",displayName:this.filterDisplayName,filterName:"DisplayName",filterType:"lookupFilter",characters:0},{id:"EntityName",propertyName:"name",$descriptor:"EntityName",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",displayName:this.filterName,filterName:"EntityName",filterType:"lookupFilter",characters:0},{id:"ModifiedDate",displayName:this.filterModifiedDate,filterName:"ModifiedDate",propertyName:"$updated",$descriptor:"ModifiedDate",filterType:"rangeFilter",propertyDataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5",characters:0},{id:"HasMeasure",displayName:this.filterHasMetric,filterName:"HasMeasure",propertyName:"filters.filterType",$descriptor:"HasMeasure",filterType:"checkedList",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",characters:0},{id:"HasFilter",displayName:this.filterHasFilter,filterName:"HasFilter",propertyName:"filters.filterType",$descriptor:"HasFilter",filterType:"checkedList",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",characters:0}],d=new h;this._indirectSelection="false",d&&d.get&&d.get("FilterSearchCriteria","EntityManager",c.hitch(this,function(a){a&&a.value&&(this._currentContext.AppliedFilterInfo.applied=JSON.parse(a&&a.value)),this._currentContext.AppliedFilterInfo.definitionSet=b}),null,this,!1)},_onDefaultFilterRefresh:function(a,b,c){var e=d.toJson(c.createEntityManagerValueSet()),f=new h;f&&f.set("FilterSearchCriteria","EntityManager",e,null,null,this)},_saveToLocalStorage:function(a,b,c){this._saveToSessionStorage(a,b,c)},_getFromLocalStorage:function(a,b){return this._getFromSessionStorage(a,b)},_getFromSessionStorage:function(a,b){b||(b=this._LOCALSTORE_NAMESPACE);var c=b+"_"+a;return sessionStorage.getItem(c)},_saveToSessionStorage:function(a,b,c){c||(c=this._LOCALSTORE_NAMESPACE);var d=c+"_"+a;sessionStorage.setItem(d,b)},_getDefaultTabId:function(){var a=this._getUrlTabId();if(a&&(a=this._validateTabId(a)))return a;var b=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(b&&(this.defaultTabId=b),!this._configsHash)for(var c=0;c<this.staticTabsConfiguration;c++)if(this.defaultTabId===this.staticTabsConfiguration[c].key)return this.defaultTabId;return this.defaultTabId},_getUrlTabId:function(){var a=!1,b="[\\?&]tabId=([^%#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d&&(a=d[1]),a},_validateTabId:function(a){if(a)for(var b=0;b<this.staticTabsConfiguration.length;b++){var c=this.staticTabsConfiguration[b];if(c.key.toUpperCase()===a.toUpperCase())return c.key}return null}});if(Sage.Services.hasService("ClientGroupContext")){var k=Sage.Services.getService("ClientGroupContext");"Sage.MainView.EntityMgr.EntityManagerGroupContextService"!==k.declaredClass&&(k.unsubscribeConnects(),Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",new j))}else Sage.Services.addService("ClientGroupContext",new j);return j})},"Sage/MainView/EntityMgr/EntityListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/EntityMgr/EntitySDataSummaryFormatterScope","dojo/_base/declare","dojo/_base/connect","dojo/i18n!./nls/EntityListPanelConfig","dijit/registry","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/GridParts/Columns/DateTime","dojo/_base/lang","Sage/Utility/Entity","dojo/i18n!./templates/nls/EntityListSummary","dojo/i18n!./templates/nls/EntityDetailSummary","Sage/MainView/EntityMgr/EntityManagerFormatter","Sage/Services/RoleSecurityService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return c("Sage.MainView.EntityMgr.EntityListPanelConfig",[a],{keyField:"$key",_listId:"Entity",_resourceKind:"entities",_contextMenu:"EntityManagerListContextMenu",_currentListContextSubMenu:"EntityListContextMenu",defaultSelectFirst:!0,constructor:function(){i.mixin(this,e),this._service="";var a=Sage.Services.getService("RoleSecurityService");if(a){if(!a.hasAccess("Administration/EntityManager/Entities/View"))return;this._service=g.getSDataService("metadata")}this._structure=this._getStructure(),this._select=this._getSelect(),this._sort=this._getSort(),this.sort=this._getSort(),this._where=this._getWhere(),this._include=this._getInclude(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.list.selectionMode="single"},_getStructure:function(){return[{field:"$descriptor",label:this.colNameEntityDisplayName,width:"100px"},{field:"name",label:this.colNameEntityName,type:j.entityNameCell,width:"100px"},{field:"tableName",label:this.colNameEntityTableName,width:"100px",formatter:m.formatProperCaseValue},{field:"$updated",label:this.colNameModifyDate,width:"100px",type:h},{field:"properties",label:this.colNamePropertyCount,width:"50px",formatter:m.formatCountProps,sortable:!1},{field:"filters",label:this.colNameFilterCount,width:"50px",formatter:m.formatCountFilter,sortable:!1},{field:"filters",label:this.colNameMetricCount,width:"50px",formatter:m.formatCountMetric,sortable:!1},{field:"package.$key",label:this.colNamePackage,width:"100px"}]},_getSelect:function(){return["$descriptor","name","tableName","properties","package","filters/filterType"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"$descriptor",descending:!1}]},_getInclude:function(){return[]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"metadata",keyField:"$key",include:[],sort:this._getSort(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/EntityMgr/templates/EntityListSummary.html",resetDataManager:!0,requestConfiguration:a})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"metadata",keyField:"$key",select:["$key","filterName","displayName","propertyName","filterType","analyticsAvailable","$updated","details"],sort:[{attribute:"filterName",descending:!0}],include:[],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/EntityMgr/EntitySDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryFormatterScope","Sage/MainView/EntityMgr/EntitySDataDetailViewDataManager","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.MainView.EntityMgr.EntitySDataSummaryFormatterScope",[a],{constructor:function(a){d.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new b(this.requestConfiguration),Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)}})})},"Sage/MainView/EntityMgr/EntitySDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","Sage/MainView/EntityMgr/EntityDetailTabManager","dojo/dom-class"],function(a,b,c,d,e,f,g){var h=c("Sage.MainView.EntityMgr.ReportsSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:!1,include:[],service:null,detailTabManager:null,constructor:function(b){d.mixin(this,b),this.requestHash={},this.fetching=!1,this.service=a.getSDataService("metadata")},add:function(a,b){var c=this.requestHash[a];if(c&&c.id!==b.id){c.duplicates||(c.duplicates=[]);for(var d=!1,e=0;e<c.duplicates.length;e++)c.duplicates[e].context.id===b.id&&(d=!0);d||c.duplicates.push({id:b.id,context:b})}else this.requestHash[a]=b},send:function(a,b){this.fetching=!0;var c=this,e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind);for(var f in this.requestHash)e.setResourceSelector("'"+f+"'");e.setQueryArg("include",this.include.join(",")),e.read({success:d.hitch(b,a,c),failure:d.hitch(this,this.requestFailed,c)})},requestFailed:function(a,b,c){}});return c("Sage.MainView.EntityMgr.EntitySDataDetailViewDataManager",null,{keyField:"$key",entity:null,constructor:function(){this.queue=new h,this.requestTimeout=!1},requestDataNoWait:function(a,b,c){if(this.entity===a){var d=dijit.byId("tabContainer");return void(d&&d.resize())}this.entity=a;var e=new h;c.keyField&&(this.keyField=c.keyField),e.select=c.select,e.resourceKind=c.resourceKind,e.serviceName=c.serviceName,e.include=c.include,e.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(e.expandRecurrences=c.expandRecurrences),e.add(a,b),e.send(this.receiveData,this)},receiveData:function(a,b){this.detailTabManager&&this.detailTabManager.destroyRecursive();var c=dijit.byId("Sage_UI_SummaryDetailPane_0");this.detailTabManager=new f(b),e.place(this.detailTabManager.domNode,c.domNode,"only"),g.add(c.domNode,"overflowNone");var d=dijit.byId("tabContainer");if(d){for(var h=d._attachPoints,i=0;i<h.length;i++){var j=h[i],k=d[j];g.add(k,"HundredPercentHeight HundredPercentWidth")}d.startup(),d.resize(),d.resize()}}})})},"Sage/MainView/EntityMgr/EntityDetailTabManager":function(){define(["dijit/_Widget","dijit/registry","Sage/_Templated","dojo/text!./templates/EntityDetailTabManager.html","dojo/_base/declare","Sage/MainView/EntityMgr/EntityDetailFilterGrid","Sage/MainView/EntityMgr/EntityDetailPropertyGrid","Sage/MainView/EntityMgr/EntityDetailRelationGrid","dojo/dom-style","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/EntityDetailUtility","dojo/dom","dojo/_base/connect","dojo/_base/lang","dojo/dom-class"],function(_Widget,registry,_Templated,template,declare,EntityDetailFilterGrid,EntityDetailPropertyGrid,EntityDetailRelationGrid,domStyle,nlsResource,EntityDetailUtility,dom,dojoConnect,lang,domClass){var entityDetailTabManager=declare("Sage.MainView.EntityMgr.EntityDetailTabManager",[_Widget,_Templated],{workspace:"TabWorkspace",widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),filterGrid:!1,metricGrid:!1,propertiesGrid:!1,relationsGrid:!1,entityGrid:!1,mainListItemSelected:"",edtmdataStore:!1,detailUtility:!1,constructor:function(a){registry.byId("tabContainer_tablist_menuBtn")&&registry.byId("tabContainer_tablist_menuBtn").destroy&&registry.byId("tabContainer_tablist_menuBtn").destroy(),registry.byId("tabContainer_tablist_leftBtn")&&registry.byId("tabContainer_tablist_leftBtn").destroy&&registry.byId("tabContainer_tablist_leftBtn").destroy(),registry.byId("tabContainer_tablist_filterDetailGridPane")&&registry.byId("tabContainer_tablist_filterDetailGridPane").destroy&&registry.byId("tabContainer_tablist_filterDetailGridPane").destroy(),registry.byId("tabContainer_tablist_metricDetailGridPane")&&registry.byId("tabContainer_tablist_metricDetailGridPane").destroy&&registry.byId("tabContainer_tablist_metricDetailGridPane").destroy(),registry.byId("tabContainer_tablist_relationDetailGridPane")&&registry.byId("tabContainer_tablist_relationDetailGridPane").destroy&&registry.byId("tabContainer_tablist_relationDetailGridPane").destroy(),registry.byId("tabContainer_tablist_rightBtn")&&registry.byId("tabContainer_tablist_rightBtn").destroy&&registry.byId("tabContainer_tablist_rightBtn").destroy(),registry.byId("filterGrid_Account_addFilter")&&registry.byId("filterGrid_Account_addFilter").destroy&&registry.byId("filterGrid_Account_addFilter").destroy(),registry.byId("filterGrid_Account_editFilter")&&registry.byId("filterGrid_Account_editFilter").destroy&&registry.byId("filterGrid_Account_editFilter").destroy(),registry.byId("filterGrid_Account_removeFilter")&&registry.byId("filterGrid_Account_removeFilter").destroy&&registry.byId("filterGrid_Account_removeFilter").destroy(),registry.byId("filterGrid_Account_helpFilter")&&registry.byId("filterGrid_Account_helpFilter").destroy&&registry.byId("filterGrid_Account_helpFilter").destroy(),registry.byId("filters_Account")&&registry.byId("filters_Account").destroy&&registry.byId("filters_Account").destroy(),registry.byId("filters_Account_HeaderBar")&&registry.byId("filters_Account_HeaderBar").destroy&&registry.byId("filters_Account_HeaderBar").destroy(),registry.byId("filters_Account_HeaderBar_splitter")&&registry.byId("filters_Account_HeaderBar_splitter").destroy&&registry.byId("filters_Account_HeaderBar_splitter").destroy(),registry.byId("tp1f")&&registry.byId("tp1f").destroy&&registry.byId("tp1f").destroy(),registry.byId("tp2m")&&registry.byId("tp2m").destroy&&registry.byId("tp2m").destroy(),registry.byId("tabContainer")&&registry.byId("tabContainer").destroy&&registry.byId("tabContainer").destroy(),registry.byId("filterDetailGridPane")&&registry.byId("filterDetailGridPane").destroy&&registry.byId("filterDetailGridPane").destroy(),registry.byId("metricDetailGridPane")&&registry.byId("metricDetailGridPane").destroy&&registry.byId("metricDetailGridPane").destroy(),registry.byId("relationDetailGridPane")&&registry.byId("relationDetailGridPane").destroy&&registry.byId("relationDetailGridPane").destroy(),registry.byId("filters")&&registry.byId("filters").destroy&&registry.byId("filters").destroy(),registry.byId("Metrics")&&registry.byId("Metrics").destroy&&registry.byId("Metrics").destroy(),this.mainListItemSelected=a,this.detailUtility=new EntityDetailUtility,this.detailUtility.getSchemasInformationFromSData(),this.detailUtility.getPropertiesAssociatedWithFilters(a),this.detailUtility.getSpecialValues(),this.detailUtility.refreshPropertyStore(a.name),this.filterGrid=new EntityDetailFilterGrid({id:"filterGrid",entityName:a.name}),this.metricGrid=new EntityDetailFilterGrid({id:"metricGrid",entityName:a.name}),this.propertiesGrid=new EntityDetailPropertyGrid({id:"propertyGrid",entityName:a.name}),this.relationsGrid=new EntityDetailRelationGrid({id:"relationGrid",entityName:a.name}),domClass.add(this.filterGrid,"HundredPercentHeight HundredPercentWidth"),domClass.add(this.metricGrid,"HundredPercentHeight HundredPercentWidth"),domClass.add(this.propertiesGrid,"HundredPercentHeight HundredPercentWidth"),domClass.add(this.relationsGrid,"HundredPercentHeight HundredPercentWidth")},postCreate:function(){var a=this.$descriptor;this.filterGrid&&(registry.byId("filterDetailGridPane").set("title",nlsResource.FilterTabTitle),dojoConnect.connect(registry.byId("filterDetailGridPane"),"onShow",lang.partial(this.loadfilters,this)),window.setTimeout(function(){registry.byId("tabContainer_tablist_filterDetailGridPane").set("title",nlsResource.filtersFor+" "+a),domClass.add(registry.byId("filterDetailGridPane").domNode.parentNode,"HundredPercentHeight HundredPercentWidth")})),this.metricGrid&&(registry.byId("metricDetailGridPane").set("title",nlsResource.MetricTabTitle),dojoConnect.connect(registry.byId("metricDetailGridPane"),"onShow",lang.partial(this.loadmetrics,this)),window.setTimeout(function(){registry.byId("tabContainer_tablist_metricDetailGridPane").set("title",nlsResource.metricsFor+" "+a),domClass.add(registry.byId("metricDetailGridPane").domNode.parentNode,"HundredPercentHeight HundredPercentWidth")})),this.propertiesGrid&&(registry.byId("propertyDetailGridPane").set("title",nlsResource.PropertyTabTitle),dojoConnect.connect(registry.byId("propertyDetailGridPane"),"onShow",lang.partial(this.loadproperties,this)),window.setTimeout(function(){registry.byId("tabContainer_tablist_propertyDetailGridPane").set("title",nlsResource.propertyFor+" "+a),domClass.add(registry.byId("propertyDetailGridPane").domNode.parentNode,"HundredPercentHeight HundredPercentWidth")})),this.relationsGrid&&(registry.byId("relationDetailGridPane").set("title",nlsResource.RelationTabTitle),dojoConnect.connect(registry.byId("relationDetailGridPane"),"onShow",lang.partial(this.loadrelations,this)),window.setTimeout(function(){registry.byId("tabContainer_tablist_relationDetailGridPane").set("title","Relationships for "+a),domClass.add(registry.byId("relationDetailGridPane").domNode.parentNode,"HundredPercentHeight HundredPercentWidth")}))},loadfilters:function(a){a.filterGrid.setUtility(a.detailUtility),a.filterGrid.placeAt(this.containerNode),a.filterGrid._where="filterType ne 'analyticsMetric'",a.filterGrid.onOpen(this.id,"filters",a.mainListItemSelected),a.filterGrid.startup()},loadmetrics:function(a){a.metricGrid.setUtility(a.detailUtility),a.metricGrid.placeAt(this.containerNode),a.metricGrid._where="filterType eq 'analyticsMetric'",a.metricGrid.onOpen(this.id,"metrics",a.mainListItemSelected),a.metricGrid.startup()},loadproperties:function(a){a.propertiesGrid.setUtility(a.detailUtility),a.propertiesGrid.placeAt(this.containerNode),a.propertiesGrid.onOpen(this.id,"fields",a.mainListItemSelected),a.propertiesGrid.startup()},loadrelations:function(a){a.relationsGrid.setUtility(a.detailUtility),a.relationsGrid.placeAt(this.containerNode),a.relationsGrid.onOpen(this.id,"relations",a.mainListItemSelected),a.relationsGrid.startup()}});return entityDetailTabManager})},"Sage/MainView/EntityMgr/EntityDetailFilterGrid":function(){define(["dojo/string","dojo/_base/declare","dojo/data/ObjectStore","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/Utility","Sage/MainView/EntityMgr/_EntityDetailGrid","Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditFiltersDialog","Sage/UI/Controls/CheckBox","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j){return b("Sage.MainView.EntityMgr.EntityDetailFilterGrid",[f],{metric:!1,_createDetailsGrid:function(b,c,e){var f=c||this;this.entityTag=a.substitute("entities('${0}')/filters",[this.entityName]);var g={service:f.service,resourceKind:this.entityTag,resourcePredicate:null,format:"json",include:[],select:["$key","filterName","displayName","propertyName","filterType","analyticsAvailable","$updated","details"],queryArgs:{format:"json",_expandSpecialRanges:!1},where:a.substitute("${0}",[f._where]),scope:this};this.metric=this.id.indexOf("metric")>=0,this.helpPath=this.metric?"MetricsInDetailGrid":"FiltersInDetailGrid";var j=[{field:"$key",label:"Id",editable:!1,hidden:!0,unhidable:!0},{field:"displayName",label:d.FilterGridColumnDisplay,editable:!1,hidden:!1,unhidable:!0,width:250},{field:"filterName",label:this.id.search("metric")>=0?d.MetricGridColumnMetric:d.FilterGridColumnFilter,editable:!1,hidden:!1,unhidable:!1,width:250},{field:"propertyName",label:d.FilterGridColumnProperty,editable:!1,hidden:!1,unhidable:!0,width:250},{field:"analyticsAvailable",label:d.FilterGridColumnIsMetric,editable:!1,hidden:!1,unhidable:!0,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:250},{field:"$updated",label:d.FilterGridColumnLastUpdated,type:i,editable:!1,hidden:!1,unhidable:!0,width:250},{field:"details",label:d.FilterGridColumnDetails,formatter:function(a){return c.detailUtility.formatDetails(a).detailsLocalizedName},editable:!1,hidden:!1,unhidable:!0,sortable:!1,width:300}];this.metric&&j.push({field:"details",label:d.editable,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),g=f._IsTheMetricEditable(b);e.setChecked(g),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!0,sortable:!1,width:300}),this._loadAndPlace(g,j,this.metric?d.metricsFor:d.filtersFor,{add:!0,edit:!0,delete:!0},"displayName","Filters")},_IsTheMetricEditable:function(a){if(a){var b=a.dateDiffMetricFilter;if(b)return":now"!==b.fromPropertyName&&":now"!==b.toPropertyName}return!0},addItem:function(a){var b=a.id,c=new g(a.entityName,a._getDialogTitleMarker(),a.detailUtility,null,null,b);a._displayAddEditDialogue(c,a)},editItem:function(a){var b=a.getSelectedItem();if(b)if(a._IsTheMetricEditable(b.details)){var c=new g(a.entityName,a._getDialogTitleMarker(b),a.detailUtility,b);a._displayAddEditDialogue(c,a)}else j.showWarning(d.metricNotEditable,"Infor CRM")},_getDialogTitleMarker:function(b){var c=this._truncateInputValuesInDialogTitle(this.entityName),e="";return b?(e=this._truncateInputValuesInDialogTitle(b.filterName),a.substitute(d.editDialogTitle,[e,c])):this.metric?a.substitute(d.dialogTitleAddMetric,[c]):a.substitute(d.dialogTitleAddFilter,[c])},showHelp:function(a,b,c){c(a,b)}})})},"Sage/MainView/EntityMgr/_EntityDetailGrid":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Utility","dojo/on","dojo/_base/connect","dojo/string","dijit/registry","dojo/_base/lang","dojo/_base/declare","dojo/text!./templates/DetailTabContentGrid.html","dojo/i18n!./nls/_BaseEntityDetailContent","dojo/dom-style","dijit/popup","Sage/Data/SDataServiceRegistry","dojo/_base/array","Sage/UI/Dialogs","dojo/dom-class","Sage/UI/GridView","Sage/UI/_DialogLoadingMixin","Sage/UI/Controls/CheckBox","Sage/MainView/EntityMgr/EntityDetailUtility"],function(_Widget,_Templated,utility,dojoOn,dojoConnect,dString,registry,lang,declare,template,nlsResource,dojoStyle,popup,sDataServiceRegistry,arrayUtil,dialogs,domClass,GridView,_DialogLoadingMixin,CheckBox,EntityDetailUtility){var widget=declare("Sage.MainView.EntityMgr._EntityDetailGrid",[_Widget,_Templated],{_dataRequested:!1,widgetsInTemplate:!0,isOpen:!1,entityName:"",grid:null,dataStore:null,widgetTemplate:new Simplate(eval(template)),service:null,detailUtility:null,content:!1,_where:!1,containerid:!1,entityDisplayName:!1,entityTag:"",helpPath:"",helpContainer:"MCWebHelp",constructor:function(a){this.service=sDataServiceRegistry.getSDataService("metadata",!1,!0,!1),a&&a.id&&(this.containerid=a.id,registry.byId(a.id)&&registry.byId(a.id).destroy&&registry.byId(a.id).destroy(!0))},postCreate:function(){lang.mixin(this,new _DialogLoadingMixin)},CustomChkBox:function(){return declare("Sage.MainView.EntityMgr.AddEditEntityDetail.chkBox",CheckBox,{shouldPublishMarkDirty:!1,readonly:!0,disabled:!0,constructor:function(){},postCreate:function(){""!==this.hotKey&&(this.focusNode.accessKey=this.hotKey),this.connect(this,"onChange",this.onChanged)},_onClick:function(){}})},setUtility:function(a){this.showLoading(),this.detailUtility=a},onOpen:function(a,b,c){this.isOpen=!0,this.entityName=c.name,this.entityDisplayName=c.$descriptor,this._createDetailsGrid(!1,this,!0)},getSelectedItem:function(){var a=this.grid.getSelectedRowData();return 1===a.length?a[0]:(dialogs.showWarning(nlsResource.lblWarning,"Infor CRM"),null)},_loadAndPlace:function(a,b,c,d,e,f){var g=[],h=Sage.Services.getService("RoleSecurityService");if(f&&h){var i=dString.substitute("Administration/EntityManager/${0}/Add",[f]);h.hasAccess(i)&&d.add&&g.push("add");var j=dString.substitute("Administration/EntityManager/${0}/Edit",[f]);h.hasAccess(j)&&d.edit&&g.push("edit");var k=dString.substitute("Administration/EntityManager/${0}/Delete",[f]);h.hasAccess(k)&&d.delete&&g.push("delete")}g.push("help");var l={tools:g,gridLabel:dString.substitute("${0} ${1}",[c,this.entityDisplayName]),addNew:lang.partial(this.addItem,this),deleteSelected:lang.partial(this.removeItem,this),editItem:lang.partial(this.editItem,this),showHelp:lang.partial(this.showHelp,this.helpPath,this.helpContainer,utility.openHelp),sort:[{attribute:e}],storeOptions:a,columns:b,placeHolder:this.entityFilter_Grid,height:"auto",columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,classNames:"entityFilter_Grid",minRowsPerPage:20},m=this.grid=new GridView(l);m.createGridView(),dojoConnect.connect(registry.byId("list"),"resize",function(){m.grid.resize()}),m.grid.resize(),this.hideLoading()},addItem:function(a){},editItem:function(a){},_displayAddEditDialogue:function(a,b){a.service=this.service,a.show(),dojoConnect.connect(a._dialog,"hide",lang.partial(b.onReset,b))},onReset:function(a){popup.close(),a.grid.refresh(),a.hideLoading()},_getDialogTitleMarker:function(){},_truncateInputValuesInDialogTitle:function(a){var b=a,c=40;return b.length>c&&(b=dString.substitute("${0}...",[b.substring(0,c)])),b},removeItem:function(a){var b={title:"Infor CRM",query:dString.substitute(nlsResource.confirmDeleteFmtTxt,[1]),callbackFn:function(b){if(!0===b){var c=a.getSelectedItem();if(c){var d=new Sage.SData.Client.SDataSingleResourceRequest(a.service).setResourceKind(a.entityTag);d.setResourceSelector("'"+c.$key+"'"),a.showLoading(),d.delete({},{scope:a,ignoreETag:!0,success:function(){this.onReset(this)},failure:function(){popup.close(),a.hideLoading()}})}}},yesText:nlsResource.lblOkButton,noText:nlsResource.lblCancelButton};dialogs.raiseQueryDialogExt(b)},onClose:function(){this.isOpen=!1},startup:function(){this.inherited(arguments)},showHelp:function(){}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditFiltersDialog":function(){define(["dijit/_Widget","dijit/registry","dojo/dom-construct","dojo/dom-class","dojo/query","dojo/string","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/AddEditDialog","dojo/text!./templates/AddEditFiltersDialogMain.html","Sage/_Templated","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","Sage/UI/Dialogs","Sage/UI/FilteringSelect","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/TextBox","Sage/MainView/EntityMgr/AddEditEntityDetail/DisplayName"],function(_Widget,registry,domConstruct,domClass,query,dojoString,dojoConnect,declare,lang,nlsResources,template,_Templated,SDataServiceRegistry,_DialogLoadingMixin,crmDialogue,crmDropDowns,_DialogHelpIconMixin,PropertyDropDown,crmTextBox,displayNameCNTRL){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.AddEditFiltersDialog",[_Widget,_Templated],{_dialog:null,widgetTemplate:new Simplate(eval(template)),_nlsResources:nlsResources,widgetsInTemplate:!0,filterNameTextBox:!1,displayNameTextBox:!1,analyticsCheckBox:!1,propertiesDropDowns:!1,propertyValueHolder:"",propertyDataLoad:!1,typeDropDowns:!1,typeDataLoad:!1,detailContent:!1,_EditData:!1,entityName:!1,detailUtility:!1,service:!1,_title:!1,_idForTypeDropDown:"typeDpItems",_idForPropertyDropDown:"filtersDpItems",isMetric:!1,PropertyTextBox:null,constructor:function(a,b,c,d,e,f){if("metricGrid"===f&&(this.isMetric=!0),this.entityName=a,registry.byId(this._idForTypeDropDown)&&this.destroy(registry.byId(this._idForTypeDropDown)),registry.byId(this._idForPropertyDropDown)&&this.destroy(registry.byId(this._idForPropertyDropDown)),registry.byId("propertyDp")&&this.destroy(registry.byId("propertyDp")),this._EditData=d,null===b){var g=this._EditData?nlsResources.editDialogTitle:this.isMetric?nlsResources.dialogTitleAddMetric:nlsResources.dialogTitleAddFilter;this._title=dojoString.substitute(g,[this.entityName])}else this._title=b;if(null===c){var h={name:a};c=new Sage.MainView.EntityMgr.EntityDetailUtility,c.getSchemasInformationFromSData(!1),c.getPropertiesAssociatedWithFilters(h),c.getSpecialValues(),c.refreshPropertyStore(h.name),this.service||(this.service=c.service)}c&&(this.detailUtility=c,this.detailUtility.refreshPropertyStore()),dojoConnect.connect(registry.byId("filterDetailGridPane"),"onShow",lang.partial(this.loadfilters,this))},destroy:function(a){a.destroy(),dijit.popup.close()},postCreate:function(){this._createFilterNameController(),this._createTypeController(),this._createPropertyController(),this.setUpDetailsSection(this,!0),this.cmdSave.containerNode.innerHTML=this._nlsResources.lblSaveButton,this.cmdCancel.containerNode.innerHTML=this._nlsResources.lblCancelButton,lang.mixin(this._dialog,new _DialogHelpIconMixin({titleBar:this._dialog.titleBar})),this._dialog.createHelpIconByTopic(this.isMetric?"Adding_Editing_Metrics":"Adding_Editing_Filters"),lang.mixin(this._dialog,new _DialogLoadingMixin),dojoConnect.connect(this._dialog,"onCancel",lang.partial(this._cmdCancel_OnClick,this)),this.startup(),query(".dijitDialog").on("click",function(a){"button"!==(a.target||a.srcElement).type&&dijit.popup.close()})},_createFilterNameController:function(){var a="";this._EditData&&this._EditData.filterName&&(a=this._EditData.filterName);var b="";this._EditData&&this._EditData.displayName&&(b=this._EditData.displayName),this.filterNameTextBox=new displayNameCNTRL({dUtility:this.detailUtility,editMode:void 0!==this._EditData,query:{entityName:this.entityName,resourceKind:dojoString.substitute('entities("${0}")/filters',[this.entityName]),name:"filterName",displayName:"displayName"},values:{display:{data:b,mapDisplayToName:this._filterNameToDisplayMap},name:{data:a,validation:this._filterNameValidator,invalidMessage:this._nlsResources.InvalidFilterName,disabled:void 0!==this._EditData}}}),domConstruct.place(this.filterNameTextBox.domNode,this._filterNameSection,"replace")},_filterNameToDisplayMap:function(a){var b=new RegExp(/([a-z]|[A-Z]|_\w*)/gm),c=a.match(b);return c?lang.isArray(c)?c.join(""):c:""},_filterNameValidator:function(a,b){var c="^([a-z]|[A-Z]|_)(\\w)*",d=a.match(c,"g");return!!d&&(lang.isArray(d),d[0].length==a.length)},_createDisplayNameController:function(){this.lblDisplayName.innerHTML=this._nlsResources.lblDisplayName,this.displayNameTextBox=new crmTextBox({shouldPublishMarkDirty:!1}),
domConstruct.place(this.displayNameTextBox.domNode,this.displayName,"only");var a="";this._EditData&&this._EditData.displayName&&(a=this._EditData.displayName),this.displayNameTextBox.textbox.value=a},_createPropertyController:function(){this.lblFilterDp.innerHTML=this._nlsResources.lblFilterDp,this.PropertyTextBox=new PropertyDropDown({entityName:this.entityName}),domConstruct.place(this.PropertyTextBox.domNode,this.fieldsContainer,"replace");var a="";this._EditData&&this._EditData.propertyName&&(a=this._EditData.propertyName),this.PropertyTextBox.entitySelected.textbox.value=a},_createTypeController:function(){this.lblTypeDp.innerHTML=this._nlsResources.lblTypeDp;var a=this.isMetric?"metricFilter":"distinctFilter";this._EditData&&this._EditData.details&&(a=this.detailUtility.formatDetails(this._EditData.details).detailsKey),this.typeDropDowns=new crmDropDowns({id:this._idForTypeDropDown,name:"types",value:a,store:this.detailUtility.filterTypeDataLoad,searchAttr:"name",query:{type:this.isMetric?"metric":"filter"},fetchProperties:{sort:[{attribute:"name",descending:!1}]}},this._idForTypeDropDown),this._EditData&&this._EditData.details&&this.typeDropDowns.set("disabled",!0),domConstruct.place(this.typeDropDowns.domNode,this.typeDp,"only"),dojoConnect.connect(this.typeDropDowns,"onChange",lang.partial(this.setUpDetailsSection,this,!1))},startup:function(){this.inherited(arguments)},setUpDetailsSection:function(a,b){void 0!==a._EditData&&null!==a._EditData&&(a._EditData.details.propertyInfo=a.PropertyTextBox),a.detailContent=a.detailUtility.getDetailsSection(a,b).detailsObject,void 0!==a.detailContent&&(domConstruct.place(a.detailContent.domNode,a._TypeSpecificDetailsSection,"only"),!1!==a.detailContent&&void 0!==a.detailContent&&!1===a.detailContent.hasProperties?(domClass.add(a.PropertyTextBox.entitySelected.domNode,"dijitTextBoxDisabled"),a.PropertyTextBox.entitySelected.set("value",""),a.PropertyTextBox.entitySelected.set("disabled",!0),a.PropertyTextBox.transparentDropDown.set("disabled",!0)):(!1!==a.PropertyTextBox.entitySelected&&void 0!==a.PropertyTextBox.entitySelected&&(domClass.remove(a.PropertyTextBox.entitySelected.domNode,"dijitTextBoxDisabled"),a.PropertyTextBox.entitySelected.set("disabled",!1)),!1!==a.PropertyTextBox.transparentDropDown&&void 0!==a.PropertyTextBox.transparentDropDown&&a.PropertyTextBox.transparentDropDown.set("disabled",!1)))},show:function(){this._EditData,this._dialog.titleNode.innerHTML=this._title,this._dialog.show(),this.inherited(arguments)},_cmdSave_OnClick:function(){this.isValid()||this._dialog.hideLoading()},onSaveSuccess:function(a){},_onSaveSuccess:function(a){SDataServiceRegistry._removeFromLocalStorage(this.entityName),this.onSaveSuccess(a),this._dialog.hideLoading(),this._dialog.hide()},_cmdCancel_OnClick:function(a){this._dialog?(this._dialog.hideLoading(),this._dialog.hide()):a._dialog&&(a._dialog.hideLoading(),a._dialog.hide()),dojoConnect.publish("Sage/EntityManager/FilterCanceled")},isValid:function(){var a=!1;this.divValidationMessage.innerHTML="",this.addEditFiltersForm.validate();var b=this.filterNameTextBox.isValid(void 0===this._EditData);if("object"==typeof b&&(b=b.value),a=!b,a&&b.error&&(this.divValidationMessage.innerHTML=b.error),this.PropertyTextBox.entitySelected.disabled||this.PropertyTextBox.entitySelected.validate(!0)||(this.PropertyTextBox.entitySelected.set("state","Error"),a=!0),!a){var c=this.detailContent.isValid();"boolean"!=typeof c?(this.divValidationMessage.innerHTML=dojoString.substitute("${0}<div>${1}</div>",[this.divValidationMessage.innerHTML,c]),a=!0):a=!c}if(a)return this._dialog.hideLoading(),!1;this._continueSaveEdit(this)},_continueSaveEdit:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(a.service).setResourceKind(dojoString.substitute('entities("${0}")/filters',[a.entityName]));b.setQueryArg("language",cookie.getCookie("SLXLanguageSetting"));var c=a.filterNameTextBox.getDetails();if(a._EditData){a._EditData.filterName=c.filterName,c.displayName.length>0&&(a._EditData.displayName=c.displayName),a._EditData.details=a.detailContent.getDetails();var d=!0;a._EditData.details&&a._EditData.details.dateDiffMetricFilter||(a.PropertyTextBox.entitySelected.value.length>0?a._EditData.propertyName=a.PropertyTextBox.entitySelected.value:a._EditData.propertyName.length>0?a._EditData.propertyName=a._EditData.propertyName:a._EditData.propertyName="",d=!1);var e=a._EditData;d&&delete e.propertyName,b.setResourceSelector(dojoString.substitute("'${0}'",[e.$key])),b.update(e,{isSecurityManager:!0,scope:a,ignoreETag:!1,success:a._onSaveSuccess,failure:function(b,c){var d=JSON.parse(b.response),e=dojoString.substitute("${0}(${1})",[b.statusText,b.status]);d.length>0&&void 0!==d[0].message&&(e=dojoString.substitute("${0}: {${1}",[e,d[0].message])),a.divValidationMessage.innerHTML=dojoString.substitute("${0}<div>${1}</div>",[a.divValidationMessage.innerHTML,e]),a._dialog.hideLoading()}})}else{var f={filterName:c.filterName,analyticsAvailable:!0,details:a.detailContent.getDetails()};c.displayName.length>0&&(f.displayName=c.displayName,f.analyticsDescription=c.displayName),f.details.dateDiffMetricFilter||(f.propertyName=a.PropertyTextBox.entitySelected.value),b.create(f,{scope:a,ignoreETag:!0,success:lang.hitch(a,a._onSaveSuccess),failure:function(b,c){var d=JSON.parse(b.response),e=dojoString.substitute("${0}(${1})",[b.statusText,b.status]);d.length>0&&void 0!==d[0].message&&(e=dojoString.substitute("${0}: ${1}",[e,d[0].message])),a.divValidationMessage.innerHTML=dojoString.substitute("${0}<div>${1}</div>",[a.divValidationMessage.innerHTML,e]),a._dialog.hideLoading()}})}}});return widget})},"Sage/MainView/EntityMgr/EntityDetailPropertyGrid":function(){define(["dojo/string","dojo/_base/declare","dojo/data/ObjectStore","dojo/dom-construct","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/_EntityDetailGrid","Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditPropertiesDialog","Sage/UI/Controls/GridParts/Columns/CheckBox","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Dialogs","Sage/UI/ImageButton"],function(a,b,c,d,e,f,g,h,i){return b("Sage.MainView.EntityMgr.EntityDetailPropertyGrid",[f],{_createDetailsGrid:function(b,c,d){var f=c||this;this.entityTag=a.substitute("entities('${0}')/properties",[this.entityName]);var g={service:f.service,resourceKind:this.entityTag,format:"json",resourcePredicate:null,include:[],select:["*","bulkAction/*","import/*","sdata/*","dataTypedata/*"],queryArgs:{format:"json"},scope:this};this.helpPath="PropertiesInDetailGrid";var i=[{field:"$key",label:"Id",editable:!1,hidden:!0,unhidable:!0},{field:"propertyName",label:e.propertyName,editable:!1,hidden:!1,width:250},{field:"displayName",label:e.Description,editable:!1,hidden:!1,width:250},{field:"dataTypeId",label:e.propertyType,editable:!1,hidden:!1,formatter:function(a){var b=f.detailUtility.typeStore.index[a];if(b>=0){return f.detailUtility.typeStore.data[b].name}return""},width:250},{field:"isIncluded",label:e.included,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"isReadOnly",label:e.calculatedFields,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"isDynamic",label:e.editable,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"isKey",label:e.key,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"audited",label:e.lblAudited,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"import.canMatch",label:e.lblMatch,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"import.canImport",label:e.lblImport,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100},{field:"bulkAction.canBulkUpdate",label:e.lblBulkUpdate,editable:!1,hidden:!1,renderCell:function(a,b,c,d){var e=new h({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},width:100}],j=!1,k=Sage.Services.getService("ClientContextService");k&&(j=k.containsKey("schemaCreationService")),this._loadAndPlace(g,i,e.propertyFor,{add:j,edit:!0,delete:!1},"propertyName","Fields")},addItem:function(a){var b=new g(a.entityName,a._getDialogTitleMarker(),a.detailUtility,!1);a._displayAddEditDialogue(b,a)},editItem:function(a){var b=a.getSelectedItem();if(b){var c=new g(a.entityName,a._getDialogTitleMarker(b),a.detailUtility,!1,b);a._displayAddEditDialogue(c,a)}},_getDialogTitleMarker:function(b){var c=this._truncateInputValuesInDialogTitle(this.entityName),d="";return b?(d=this._truncateInputValuesInDialogTitle(b.propertyName),a.substitute(e.editDialogTitle,[d,c])):a.substitute(e.dialogTitleAddField,[c])},showHelp:function(a,b,c){c(a,b)}})})},"Sage/MainView/EntityMgr/EntityDetailRelationGrid":function(){define(["dojo/_base/declare","dojo/data/ObjectStore","dojo/date/locale","dojo/string","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/_EntityDetailGrid","Sage/Utility","Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditRelationshipsDialog","Sage/MainView/EntityMgr/AddEditEntityDetail/EditRelationshipsDialog","Sage/UI/Controls/CheckBox","dojo/dom-construct"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.MainView.EntityMgr.EntityDetailRelationGrid",[f],{_createDetailsGrid:function(a,b,f){var h=b||this;this.entityTag="relationships";var i='(parentEntity.name eq "${0}" or childEntity.name eq "${0}")',k={service:h.service,resourceKind:this.entityTag,where:d.substitute(i,[h.entityName]),select:["$key","$descriptor","cardinality","isdynamic","parentEntity","childEntity","parentProperty/*","parentProperty/Import/*","childProperty/*","childProperty/Import/*","$updated"],queryArgs:{format:"json",_expandSpecialRanges:!1},scope:this};this.helpPath="RelationsInDetailGrid";var l=[{field:"$key",label:"Id",editable:!1,hidden:!0,unhidable:!0},{field:"$descriptor",label:e.FilterGridColumnDisplay,editable:!1,hidden:!1,unhidable:!0,width:250},{field:"cardinality",label:e.relationship,editable:!1,hidden:!1,unhidable:!1,width:110},{field:"parentEntity.$key",label:e.parentEntity,editable:!1,hidden:!1,unhidable:!0,width:150},{field:"childEntity.$key",label:e.childEntity,editable:!1,hidden:!1,unhidable:!0,width:150},{field:"parentProperty.import.canImport",label:e.parentImport,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0,name:"canImport"}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"childProperty.import.canImport",label:e.childImport,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"parentProperty.import.canMatch",label:e.parentMatch,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"childProperty.import.canMatch",label:e.childMatch,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"parentProperty.audited",label:e.parentAudit,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"childProperty.audited",label:e.childAudit,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"parentProperty.isIncluded",label:e.parentIncluded,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"childProperty.isIncluded",label:e.childIncluded,renderCell:function(a,b,c,d){var e=new j({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:120},{field:"$updated",label:e.FilterGridColumnLastUpdated,formatter:function(a){if(void 0!==a){var b=g.Convert.toDateFromString(a,!0);if(void 0!==b)return c.format(b,{selector:"date/time",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return c.format(new Date,{selector:"date/time",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},editable:!1,hidden:!1,unhidable:!1,sortable:!0,width:250}];this._loadAndPlace(k,l,e.relationFor,{add:!0,edit:!0,delete:!0},"$descriptor","Relationship")},addItem:function(a){var b=new h(a.entityName,a._getDialogTitleMarker(),a.detailUtility);a._displayAddEditDialogue(b,a)},editItem:function(a){var b=a.getSelectedItem();if(b){var c=new i(a.entityName,a._getDialogTitleMarker(b),a.detailUtility,b);a._displayAddEditDialogue(c,a)}},_getDialogTitleMarker:function(a){var b=this._truncateInputValuesInDialogTitle(this.entityName),c="";return a?(c=this._truncateInputValuesInDialogTitle(a.$descriptor),d.substitute(e.editDialogTitle,[c,b])):d.substitute(e.dialogTitleAddRelationship,[b])},showHelp:function(a,b,c){c(a,b)}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditRelationshipsDialog":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Utility","dojo/string","dojo/_base/declare","dojo/text!./templates/AddEditRelationshipsDialog.html","dojo/i18n!./nls/AddEditDialog","dojo/dom-style","Sage/UI/Dialogs","Sage/UI/FilteringSelect","dojo/store/Memory","Sage/Data/SDataServiceRegistry","dijit/registry","dojo/_base/lang","dojo/request","dojo/query","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/_DialogLoadingMixin","dojo/dom","dijit/form/RadioButton","dojo/_base/window","dojo/dom-construct"],function(_Widget,_Templated,utility,dString,declare,template,nlsResources,dojoStyle,crmDialogue,crmDropDowns,memory,SDataServiceRegistry,registry,lang,request,query,_DialogHelpIconMixin,_DialogLoadingMixin,dom,RadioButton,win,domConstruct){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityFilter.AddEditRelationshipsDialog",[_Widget,_Templated],{_dialog:null,widgetTemplate:new Simplate(eval(template)),_nlsResources:nlsResources,widgetsInTemplate:!0,detailUtility:!1,typeDropDowns:!1,dpVisibility:!1,dpCascadeType:!1,parentTable:!1,childTable:!1,dptypeParentTableField:!1,dptypeChildTableField:!1,typeDataLoad:!1,entities:!1,properties:!1,_title:!1,entityName:!1,constructor:function(a,b,c,d){this.detailUtility=c,this._title=b,this.entityName=a,this.service=Sage.Data.SDataServiceRegistry.getSDataService("metadata"),this.entities=new memory,this.childEntities=new memory,this.parentProperties=new memory,this.childProperties=new memory},destroy:function(a){a.destroy(),dijit.popup.close()},postCreate:function(){this.parent.innerHTML=this._nlsResources.parent,this.child.innerHTML=this._nlsResources.child,this.cardinality.innerHTML=this._nlsResources.cardinality,this._grabEntities(),this._createParentTableontroller(),this._createChildTableontroller(),this._createCardinalityFieldController(),this.cmdSave.containerNode.innerHTML=this._nlsResources.lblSaveButton,this.cmdCancel.containerNode.innerHTML=this._nlsResources.lblCancelButton,lang.mixin(this._dialog,new _DialogHelpIconMixin({titleBar:this._dialog.titleBar})),this._dialog.createHelpIconByTopic("Adding_Editing_Relationships"),lang.mixin(this._dialog,new _DialogLoadingMixin),dojo.connect(this._dialog,"onCancel",lang.partial(this._cmdCancel_OnClick,this)),this.startup(),this._dialog.showLoading(),query(".dijitDialog").on("click",function(a){"button"!==(a.target||a.srcElement).type&&dijit.popup.close()}),this.divValidationMessage.innerHTML=" "},show:function(){this._dialog.titleNode.innerHTML=this._title,this._dialog.show(),this.inherited(arguments)},_grabEntities:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);a.setResourceKind("entities").setQueryArg("select","$descriptor").setQueryArg("orderby","$descriptor"),a.setQueryArg("count",1e3);var b=this;a.read({success:function(a){for(var c,d,e=a.$resources,f=0;f<=e.length-1;f++)b.entityName===e[f].$key&&(c=f),b.entities.add({id:e[f].$key,name:e[f].$descriptor}),b.childEntities.add({id:e[f].$key,name:e[f].$descriptor});b.parentTable.set("item",b.entities.data[c]),b.childEntities.remove(e[c].$key),b.childTable.set("item",b.childEntities.data[d])},failure:function(a){}})},_createParentTableontroller:function(){this.parentTable=new crmDropDowns({id:this._idParentTable,style:{width:"220px"},name:"",value:"",store:this.entities,searchAttr:"name",disabled:!0},this._idParentTable),domConstruct.place(this.parentTable.domNode,this.typeParentTable,"only"),dojo.connect(this.parentTable,"onChange",lang.partial(this.setParentFieldsDropdown,this,"parent"))},_createChildTableontroller:function(){this.childTable=new crmDropDowns({id:this._idChildTable,style:{width:"220px"},name:"",value:"",store:this.childEntities,searchAttr:"name"},this._idChildTable),domConstruct.place(this.childTable.domNode,this.typeChildTable,"only"),dojo.connect(this.childTable,"onChange",lang.partial(this.setParentFieldsDropdown,this,"child"))},setParentFieldsDropdown:function(a,b){var c,d,e=a;"parent"===b?(c=e.parentProperties,d=a.parentTable.value):(c=e.childProperties,d=a.childTable.value),c.domNode.options.length>0&&(c.domNode.options.length=0);var f=dString.substitute("entities('${0}')/properties",[d]);new Sage.SData.Client.SDataResourcePropertyRequest(a.service).setResourceKind(f).setQueryArg("Select","id,$key,propertyName,displayName,dataTypeId").setQueryArg("where","dataTypeId eq '30053f5a-8d40-4db1-b185-1e4128eb26cc' ").setQueryArg("format","json").setQueryArg("Count","200").readFeed({success:function(b){var d,e,f,g=b.$resources,h=[],i=[];for(h.length=0,i.length=0,f=0;f<g.length;f++)d=g[f].displayName?g[f].displayName:g[f].propertyName,e=win.doc.createElement("option"),e.innerHTML=d,e.value=g[f].id,c.domNode.appendChild(e);a._dialog.hideLoading()},error:function(a){}})},_createCardinalityFieldController:function(){var a=new memory({data:[{id:"1:M",name:"1:M"},{id:"M:1",name:"M:1"}]});this.dptypeParentTableField=new crmDropDowns({id:this._idParentTableField,style:{width:"220px"},name:"",value:"1:M",store:a,searchAttr:"name"},this._idParentTableField),domConstruct.place(this.dptypeParentTableField.domNode,this.dpCardinality,"only")},startup:function(){this.inherited(arguments)},isValid:function(){var a=this.addEditRelationshipsForm,b=a.validate();if(b){if(0===this.parentProperties.get("value").length)return this.divValidationMessage.innerHTML=this._nlsResources.SelectField,this.divValidationMessageChild.innerHTML=" ",!1;if(this.parentProperties.get("value").length>1)return this.divValidationMessage.innerHTML=this._nlsResources.SelectOneField,this.divValidationMessageChild.innerHTML=" ",!1;if(this.divValidationMessage.innerHTML=" ",0===this.childProperties.get("value").length)return this.divValidationMessageChild.innerHTML=this._nlsResources.SelectField,!1;if(this.childProperties.get("value").length>1)return this.divValidationMessageChild.innerHTML=this._nlsResources.SelectOneField,!1;this.divValidationMessageChild.innerHTML=" "}return b},checkDuplicateRelation:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(SDataServiceRegistry.getSDataService("metadata"));a.setResourceKind(dString.substitute("relationships")),a.setQueryArg("count",30),a.setQueryArg("format","json"),a.setQueryArg("select",["parentEntity","childEntity","columns/*"]),a.setQueryArg("where",dString.substitute("parentEntity.name eq '${0}'",[this.parentTable.value]));var b=this,c=!1;return a.read({async:!1,success:function(a){for(var d=a.$resources,e=0;e<=d.length-1;e++)if(d[e].childEntity.$key===b.childTable.value){var f=d[e].columns.$resources;if(f[0].parentPropertyId===b.parentProperties.get("value")[0]&&f[0].childPropertyId===b.childProperties.get("value")[0]){c=!0;break}}},failure:function(a){b._dialog.hideLoading(),c=!1}}),c},_cmdSave_OnClick:function(){if(this.isValid()){this._dialog.showLoading();var a=new Sage.SData.Client.SDataSingleResourceRequest(SDataServiceRegistry.getSDataService("metadata")),b={},c=!1;b.cardinality=this.dptypeParentTableField.value,b.cascadeOption="SaveUpdate",b.parentEntity={$key:this.parentTable.value},b.childEntity={$key:this.childTable.value},"1:M"===this.dptypeParentTableField.value?(c=!0,b.parentProperty={propertyName:utility.pluralize(this.childTable.value),displayName:utility.pluralize(this.childTable.displayedValue),isIncluded:!0}):b.parentProperty={propertyName:this.childTable.value,displayName:this.childTable.displayedValue,isIncluded:!0},b.childProperty={propertyName:this.parentTable.value,displayName:this.parentTable.displayedValue,isIncluded:c},b.columns={$resources:[{parentPropertyId:this.parentProperties.get("value")[0],childPropertyId:this.childProperties.get("value")[0]}]};if(this.checkDuplicateRelation())return this.divValidationMessage.innerHTML=this._nlsResources.existingRelaton,void this._dialog.hideLoading();a.setResourceKind(dString.substitute("relationships")),a.create(b,{success:function(a){this._dialog.hideLoading(),this._dialog.hide()},failure:function(a){this._dialog.hideLoading(),this._dialog.hide()},scope:this})}},_onSaveSuccess:function(a){SDataServiceRegistry._removeFromLocalStorage(this.entityName),this._dialog.hideLoading(),this._dialog.hide()},_cmdCancel_OnClick:function(a){this._dialog?(this._dialog.hideLoading(),this._dialog.hide()):a._dialog&&(a._dialog.hideLoading(),a._dialog.hide())}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/EditRelationshipsDialog":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Utility","dojo/string","dojo/_base/declare","dojo/text!./templates/EditRelationshipsDialog.html","dojo/i18n!./nls/AddEditDialog","dojo/dom-style","Sage/UI/Dialogs","Sage/UI/FilteringSelect","dojo/store/Memory","Sage/Data/SDataServiceRegistry","dijit/registry","dojo/_base/lang","dojo/request","dojo/query","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/_DialogLoadingMixin","dojo/dom","dijit/form/RadioButton","dojo/_base/window","dojo/dom-construct"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return e("Sage.MainView.EntityMgr.AddEditEntityFilter.EditRelationshipsDialog",[a,b],{_dialog:null,widgetTemplate:c.makeTemplateFromString(f),_nlsResources:g,widgetsInTemplate:!0,detailUtility:!1,typeDropDowns:!1,dpVisibility:!1,dpCascadeType:!1,parentTable:!1,childTable:!1,dptypeParentTableField:!1,dptypeChildTableField:!1,typeDataLoad:!1,entities:!1,properties:!1,_title:!1,entityName:!1,_EditData:!1,constructor:function(a,b,c,d){this._title=b,this._EditData=d,this.entityName=a},destroy:function(a){a.destroy(),dijit.popup.close()},postCreate:function(){this.lblIncludeChild.innerHTML=this._nlsResources.includeChild,this.lblName.innerHTML=this._nlsResources.propertyName,this.lblDisplayName.innerHTML=this._nlsResources.displayName,this.lblImport.innerHTML=this._nlsResources.canImport,this.lblMatch.innerHTML=this._nlsResources.canMatch,this.lblAudit.innerHTML=this._nlsResources.audited,this.lblRelationship.innerHTML=this._nlsResources.cardinality,this.lblIncludeParent.innerHTML=this._nlsResources.includeParent,this.lblParentName.innerHTML=this._nlsResources.propertyName,this.lblParentDisplayName.innerHTML=this._nlsResources.displayName,this.lblParentImport.innerHTML=this._nlsResources.canImport,this.lblParentMatch.innerHTML=this._nlsResources.canMatch,this.lblParentAudit.innerHTML=this._nlsResources.audited,n.mixin(this._dialog,new q),this._dialog.createHelpIconByTopic("Editing_Relationships"),dojo.mixin(this._dialog,new r),this.lblParent.innerHTML="("+this._EditData.parentEntity.$key+")",this.lblChild.innerHTML="("+this._EditData.childEntity.$key+")",this.IncludeChild.set("value",this._EditData.parentProperty.isIncluded),this.IncludeParent.set("value",this._EditData.childProperty.isIncluded),this._createCardinalityFieldController(),this._EditData.parentProperty.isIncluded?(this.childName.textbox.value=this._EditData.parentProperty.propertyName,this.childDisplayName.textbox.value=this._EditData.parentProperty.displayName,this.childCanMatch.set("value",this._EditData.parentProperty.import.canMatch),this.childCanImport.set("value",this._EditData.parentProperty.import.canImport),this.childAudited.set("value",this._EditData.parentProperty.audited)):(this.childName.textbox.value=this._EditData.childEntity.$key,this.childDisplayName.textbox.value=this._EditData.childEntity.$key,this.disableEnableChildControls(this,!0)),this._EditData.childProperty.isIncluded?(this.parentName.textbox.value=this._EditData.childProperty.propertyName,this.parentDisplayName.textbox.value=this._EditData.childProperty.displayName,this.parentCanMatch.set("value",this._EditData.childProperty.import.canMatch),this.parentCanImport.set("value",this._EditData.childProperty.import.canImport),this.parentAudited.set("value",this._EditData.childProperty.audited)):(this.parentName.textbox.value=this._EditData.parentEntity.$key,this.parentDisplayName.textbox.value=this._EditData.parentEntity.$key,this.disableEnableParentControls(this,!0));var a=this;this.IncludeChild.on("change",function(b){b?a.disableEnableChildControls(a,!1):a.disableEnableChildControls(a,!0)},!0),this.IncludeParent.on("change",function(b){b?a.disableEnableParentControls(a,!1):a.disableEnableParentControls(a,!0)},!0)},disableEnableChildControls:function(a,b){a.childDisplayName.set("disabled",b),a.childCanImport.set("disabled",b),a.childCanMatch.set("disabled",b),a.childAudited.set("disabled",b)},disableEnableParentControls:function(a,b){a.parentDisplayName.set("disabled",b),a.parentCanImport.set("disabled",b),a.parentCanMatch.set("disabled",b),a.parentAudited.set("disabled",b)},show:function(){this._EditData,this._dialog.titleNode.innerHTML=this._title,this._dialog.show(),this.inherited(arguments)},_createCardinalityFieldController:function(){var a="1:M";this._EditData&&(a=this._EditData.cardinality);var b=new k({data:[{id:"1:M",name:"1:M"},{id:"M:1",name:"M:1"}]});this.dptypeParentTableField=new j({id:this._idParentTableField,style:{width:"220px"},name:"",value:a,store:b,searchAttr:"name"},this._idParentTableField),this._EditData&&this._EditData.details&&this.dptypeParentTableField.set("disabled",!0),v.place(this.dptypeParentTableField.domNode,this.dpCardinality,"only")},isValid:function(){return this.EditRelationshipsForm.validate()},_okClick:function(){if(this.isValid()){this._dialog.showLoading();var a=new Sage.SData.Client.SDataSingleResourceRequest(l.getSDataService("metadata"));this._EditData.cardinality=this.dptypeParentTableField.value,!1===this.IncludeChild.get("value")?this._EditData.parentProperty.isIncluded=!1:(this._EditData.parentProperty.isIncluded=!0,this._EditData.parentProperty.propertyName=this.childName.textbox.value,this._EditData.parentProperty.displayName=this.childDisplayName.textbox.value,this._EditData.parentProperty.import.canMatch=!1!==this.childCanMatch.get("value"),this._EditData.parentProperty.import.canImport=!1!==this.childCanImport.get("value"),this._EditData.parentProperty.audited=!1!==this.childAudited.get("value")),!1===this.IncludeParent.get("value")?this._EditData.childProperty.isIncluded=!1:(this._EditData.childProperty.isIncluded=!0,this._EditData.childProperty.propertyName=this.parentName.textbox.value,this._EditData.childProperty.displayName=this.parentDisplayName.textbox.value,this._EditData.childProperty.import.canMatch=!1!==this.parentCanMatch.get("value"),this._EditData.childProperty.import.canImport=!1!==this.parentCanImport.get("value"),this._EditData.childProperty.audited=!1!==this.parentAudited.get("value")),a.setResourceKind(d.substitute('relationships("${0}")',[this._EditData.$key])),a.update(this._EditData,{scope:this,success:function(){this._dialog.hideLoading(),this._dialog.hide()},failure:function(a,b){this._dialog.hideLoading(),this._dialog.hide()}})}},startup:function(){this.inherited(arguments)},_onDlgHide:function(){this.entityName=""},_cmdSave_OnClick:function(){},_cancelClick:function(){this.hide()},hide:function(){this._dialog.hide()},_onSaveSuccess:function(a){},_cmdCancel_OnClick:function(a){}})})},"Sage/Utility/Entity":function(){define(["dojo/date/locale","dojox/grid/cells/_base","Sage/Utility","dojo/string","dojo/i18n!./nls/Activity","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore"],function(a,b,c,d,e,f,g,h){var i=f("Sage.Utility.Entity.TypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="javascript:Sage.Link.editEntityOptions('"+b.name+"', "+!1+")";return d.substitute('<span onclick="${0}" class="activity-type-link" ><div class="${1}" title="${2}"></div>&nbsp;${2}</span>',[c,"",b.name])}});return Sage.namespace("Utility.Entity"),Sage.Utility.Entity={entityNameCell:i},Sage.Utility.Entity})},"Sage/MainView/EntityMgr/EntityManagerFormatter":function(){define(["dojo/_base/lang"],function(a){var b=a.setObject("EntityManagerFormatter",a.mixin({},{formatCountProps:function(a){return a.$resources.length},formatCountFilter:function(a){for(var b=0,c=0,d=0;d<a.$resources.length;d++)a.$resources[d].filterType.indexOf("analyticsMetric")>-1?++b:++c;return c},formatCountMetric:function(a){for(var b=0,c=0,d=0;d<a.$resources.length;d++)a.$resources[d].filterType.indexOf("analyticsMetric")>-1?++b:++c;return b},formatProperCaseValue:function(a){try{return"string"==typeof a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}catch(a){}return""}}));return a.setObject("Sage.MainView.EntityMgr.EntityManagerFormatter",b),Sage.MainView.EntityMgr.EntityManagerFormatter})},"Sage/MainView/EntityMgr/EntityFilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/MainView/EntityMgr/EntityManagerGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f,g,h){return e("Sage.MainView.EntityMgr.EntityFilterConfigurationProvider",[b,a],{_configuration:null,_hasLayoutConfiguration:!1,_hasFilterHiddenConfiguration:!1,_currentUserId:!1,serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"},systemDataService:{type:"sdata",name:"system"}},constructor:function(a){this.inherited(arguments),"Sage.MainView.EntityMgr.EntityManagerGroupContextService"!==this.groupContextService.declaredClass&&(Sage.Services.removeService("ClientGroupContext"),this.groupContextService=new c,Sage.Services.addService("ClientGroupContext",this.groupContextService)),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},requestConfiguration:function(a){this._configuration={},this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1,this._onRequestConfigurationSuccess(a,null),this._getHiddenFilters(a)},onConfigurationChange:function(){},getFilterFormatter:function(a){return a&&a.filterName,!1},_onGroupContextChanged:function(){this.onConfigurationChange()},
_createConfiguration:function(a,b){var c=this.groupContextService.getCurrentListConfig();this.groupContextService._currentContext.isNonEntityBased?this._configuration=c.getNonEntityBasedFilterConfig(b):this._configuration=c.getFilterConfig(this.metaDataService,a,b),this._configuration||(this._configuration={}),this._configuration.getFilterManager=function(){var a=d.byId("list");return a&&a.get("filterManager")},this._hasLayoutConfiguration=!0},_onRequestConfigurationSuccess:function(a,b){this._createConfiguration(b,a),this._callOptionsSuccess(a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},_getHiddenFilters:function(a){var b=this._getHiddenFiltersKey();b&&f.getHiddenFilters(b,g.hitch(this,this._onHiddenFiltersFetchComplete,a||{}),function(a){})},_getHiddenFiltersKey:function(){return f.getHiddenFiltersKey()},_onHiddenFiltersFetchComplete:function(a,b){b&&b.response&&b.response.value&&(this._configuration._hiddenFilters=h.parse(b.response.value),this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array&&(this._configuration._hiddenFilters={})),this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey(),this._hasFilterHiddenConfiguration=!0,this._callOptionsSuccess(a)},_callOptionsSuccess:function(a){this._hasLayoutConfiguration&&this._hasFilterHiddenConfiguration&&a.success&&(a.success.call(a.scope||this,this._configuration,a,this),this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1)}})})},"Sage/MainView/Options/OptionsDialog":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/topic","Sage/UI/Controls/_DialogHelpIconMixin","dojo/text!./templates/OptionsDialog.html","dojo/i18n!./nls/OptionsDialog","Sage/Utility","dijit/_Widget","Sage/_Templated","dijit/Dialog","dijit/form/Form","dijit/form/Select"],function(a,b,c,d,e,f,g,h,i,j){return a("Sage.MainView.Options.OptionsDialog",[i,j],{id:"dlgOptions",_nlsResources:g,_dialog:null,widgetsInTemplate:!0,_helpIconTopic:"GroupListOptions",widgetTemplate:h.makeTemplateFromString(f),constructor:function(){},destroy:function(){this.inherited(arguments)},show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(c.mixin(this._dialog,new e),this._dialog.createHelpIconByTopic(this._helpIconTopic)))},startup:function(){var a=Sage.Services.getService("UserOptions");a&&(a.get("FieldCount","ExtendedGroupList",c.hitch(this,function(a){a&&a.value?(this.txtFieldCount.set("value",a.value),this.txtFieldCount.focusNode.textbox.value=a.value):(this.txtFieldCount.set("value",0),this.txtFieldCount.focusNode.textbox.value=0)})),a.get("HideOnSelection","ExtendedGroupList",c.hitch(this,function(a){a&&a.value&&"T"===a.value?this.chkHideOnSelection.set("checked",!0):this.chkHideOnSelection.set("checked",!1)})),a.get("ShowOnLookup","ExtendedGroupList",c.hitch(this,function(a){a&&a.value&&"T"===a.value?this.chkShowOnLookup.set("checked",!0):this.chkShowOnLookup.set("checked",!1)})),a.get("StayInDetailView","GroupLookup",c.hitch(this,function(a){a&&a.value&&"T"===a.value?this.chkStayInDetailView.set("checked",!0):this.chkStayInDetailView.set("checked",!1)})))},_cmdOk_OnClick:function(){this._saveUserOptions(),this._dialog.hide()},_cmdCancel_OnClick:function(){this._dialog.hide()},_dialog_OnCancel:function(){this._dialog.hide()},_saveUserOptions:function(){var a=Sage.Services.getService("UserOptions");if(a){var b={extendedGroupList:{},groupLookup:{}};"all"===this.frmOptions.attr("value").rbLayout?b.extendedGroupList.fieldCount=0:b.extendedGroupList.fieldCount=parseInt(this.txtFieldCount.focusNode.textbox.value,10),a.set("FieldCount","ExtendedGroupList",b.extendedGroupList.fieldCount);var c=this.chkHideOnSelection.checked?"T":"F";a.set("HideOnSelection","ExtendedGroupList",c),b.extendedGroupList.hideOnSelection=this.chkHideOnSelection.checked,c=this.chkShowOnLookup.checked?"T":"F",a.set("ShowOnLookup","ExtendedGroupList",c),b.extendedGroupList.showOnLookup=this.chkShowOnLookup.checked,c=this.chkStayInDetailView.checked?"T":"F",a.set("StayInDetailView","GroupLookup",c),b.groupLookup.stayInDetailView=this.chkStayInDetailView.checked,d.publish("userOptions/changed",b)}}})})},"Sage/MainView/FormManager":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/topic","dojo/i18n","dijit/registry","Sage/Services/_ServiceMixin","Sage/UI/Controls/GridParts/Columns/SlxLink","Sage/UI/SDataMainViewConfigurationProvider","Sage/QuickForms/Design/DesignPanel","Sage/Store/SData","dojo/i18n!./nls/FormManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return b("Sage.MainView.FormManager",[k,i],{serviceMap:{dataService:{type:"sdata",name:"metadata"}},constructor:function(){c.mixin(this,n),this._designGroupTopics=[f.subscribe("/quickforms/design/default/load",c.hitch(this,this._onQuickFormLoad))]},_onQuickFormLoad:function(a,b){var d=dijit.byId("titlePane");d&&d.set("title",c.getObject("entity.Name",!1,a)),document.title=this.pageTitle},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._createListConfiguration(),this)},_createListConfiguration:function(){var a=new m({service:this.dataService,resourceKind:"forms"}),b=[{field:"name",label:this.nameText,width:200,get:function(a){if(a&&a.entity&&a.entity.Name)return a.entity.Name},idField:"entity.Name",type:j,sortable:!0,customSort:{attribute:"name",descending:!1}}];return this.listPanelConfiguration={list:{structure:b,store:a,queryOptions:{sort:"name"},id:"formManagerListConfig"},_sort:[{attribute:"name",descending:!1}],detail:!1,summary:!1,toolBar:{}},this.listPanelConfiguration},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._createTitlePaneConfiguration(),this)},_createTitlePaneConfiguration:function(){return this.titlePaneConfiguration={tabs:!1,menu:!1,titleFmtString:this.titleFmtString},this.titlePaneConfiguration},requestDetailModeConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._createDetailModeConfiguration(),this),this.designPanel&&this.designPanel.read(this._getQueryStringParam("entityid"))},_createDetailModeConfiguration:function(){return{content:this.designPanel=new l,toolBar:!1}},_getQueryStringParam:function(a){var b=document.location.href.split("?")[1];if(void 0===b)return!1;for(var c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0].toLowerCase()===a.toLowerCase())return e[1]}return!1}})})},"Sage/UI/Controls/GridParts/Columns/SlxLink":function(){define(["Sage/Format","Sage/Utility","dojo/_base/declare","dojo/_base/lang","dojo/string"],function(a,b,c,d,e){Sage.Region={decimalSeparator:".",numberGroupSeparator:",",numberGroupDigits:3,decimalDigits:2,currencySymbol:"$",positiveCurrencyPattern:0,negativeCurrencyPattern:0,numberNegativeSign:"-"};var f=c("Sage.UI.Controls.GridParts.Columns.SlxLink",null,{constructor:function(a){d.mixin(this,a)},_dataTypeChecked:null,_layout:null,_getDisplayValue:function(a,c,d){var e=d||"";if(null===this._layout){var f=d||(this.value||this.defaultValue);if(null!==this._dataTypeChecked||!b.isStringWithLength(f))return e;if(this._dataTypeChecked=!0,!g.isDateString(f))return e;this._layout={fieldType:"DateTime",format:"DateTime",formatString:this.displayFormatString||""}}if("DateTime"===this._layout.fieldType&&"DateTime"===this._layout.format){var h=a||(this.value||this.defaultValue);if(dojo.isString(h)&&g.isDateString(h)){var i="list"==b.getModeId(),j=g.toDateFromString(h,i);if(j=new Date(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate()),!b.isStringWithLength(this._layout.formatString))return dojo.date.locale.format(j,{selector:"date",fullYear:!0});try{return dojo.date.locale.format(j,{selector:"date",datePattern:this._layout.formatString})}catch(a){return dojo.date.locale.format(j,{selector:"date",fullYear:!0})}}}return e},displayFields:[],displayFormatString:"",idField:"",pageName:"",appliedSecurity:"",urlFields:[],urlFormatString:"",target:"",image:"",queryParams:null,getPageName:function(a){if(""===this.pageName){var c=document.location.href;return c.indexOf("?")>-1&&(c=c.substring(0,c.indexOf("?"))),c=c.substring(c.lastIndexOf("/")+1),this.pageName=c.replace(".aspx",""),this.pageName}if("list"==b.getModeId())return this.pageName;var d=b.getValue(a,this.property);return""!==d&&"string"==typeof d?d:this.pageName},formatEditing:function(a,b){},format:function(a,c){if(null===c)return this.defaultValue;var d,f,g=[],h="",i="",j={},k=0,l=a||"";if(this.displayFormatString&&""!==this.displayFormatString){for(this.displayFields.length<1&&g.push(l),k;k<this.displayFields.length;k++)g.push(b.getValue(c,this.displayFields[k].trim()));l=dojo.string.substitute(this.displayFormatString,g)}if(this.target&&""!==this.target&&(h=dojo.string.substitute(' target="${0}" ',[this.target])),this.queryParams&&("object"==typeof this.queryParams?i="&"+dojo.objectToQuery(this.queryParams):"string"==typeof this.queryParams&&(i="&"+this.queryParams)),this.editable&&(this.alwaysEditing||j.rowIndex==a&&j.cell==this))return this.formatEditing(l,a);if(f=l,this.image&&""!==this.image&&(f=dojo.string.substitute('<img src="${0}" alt="${1}" />',[this.image.replace(/^~\//,""),f])),this.appliedSecurity&&""!==this.appliedSecurity){var m=Sage.Services.getService("RoleSecurityService");if(m&&!m.hasAccess(this.appliedSecurity))return f=this._getDisplayValue(a,c,f)}if(!this.idField||""===this.idField){""!==this.urlFormatString&&this.urlFormatString;for(g=[],this.urlFields.length<1&&g.push(l),k=0;k<this.urlFields.length;k++)g.push(b.getValue(c,dojo.trim(this.urlFields[k])));return f=b.htmlEncode(this._getDisplayValue(a,c,f)),dojo.string.substitute('<a href="http://${0}${1}"${2}>${3}</a>',[dojo.string.substitute(this.urlFormatString,g),i,h,f])}var n=this.getPageName(c);if(!(d=b.getValue(c,this.idField))){var o="id"===this.idField?"$key":this.idField.replace(/\.[iI]d/g,".$key");d=b.getValue(c,o)}return d?(f=b.htmlEncode(this._getDisplayValue(a,c,f)),"HISTORY"===n.toUpperCase()?dojo.string.substitute('<span onclick="javascript:Sage.Link.editHistory(\'${0}\')" id="${0}" title="${1}" class="activity-type-link">${1}</span>',[d,f]):"ACTIVITY"===n.toUpperCase()?dojo.string.substitute('<span onclick="javascript:Sage.Link.editActivity(\'${0}\')" id="${0}" title="${1}" class="activity-type-link">${1}</span>',[d,f]):("RMA"===n.toUpperCase()&&(n="Return"),"QUOTE"==n.toUpperCase()&&b.isEQEnabled()?e.substitute("<span onclick=\"Sage.Utility.showDetailForm('${0}','${1}')\" class=\"activity-type-link\">${2}</span>",[n,d,f]):e.substitute('<a href="${0}.aspx?entityid=${1}&modeid=Detail${2}"${3} id="${1}" title="${4}">${4}</a>',[n,d,i,h,f]))):f}}),g=b.Convert;return f})},"Sage/QuickForms/Design/DesignPanel":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/string","dojo/topic","dojo/dom-construct","dojo/dom-class","dojo/dom-attr","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/form/Select","Sage/Services/_ServiceMixin","Sage/_Templated","Sage/Data/SDataServiceRegistry","Sage/Services/CultureService","Sage/Utility","Sage/UI/ImageButton","./Help","./DesignSurface","./FormDesigner","./NonVisibleControlContainer","./PropertyEditorContainer","dojo/i18n!./nls/DesignPanel"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return a("Sage.QuickForms.Design.DesignPanel",[j,m,n],{serviceMap:{dataService:{type:"sdata",name:"metadata"}},widgetsInTemplate:!0,contentTemplate:new Simplate(['<div class="design-panel-toolbar" data-dojo-type="dijit.Toolbar" data-dojo-props="region: \'top\', align: \'right\', splitter: false">','<span class="design-panel-culture-label">{%: $.cultureText %}</span><div class="design-panel-culture" data-dojo-type="dijit.form.Select" data-dojo-attach-point="_cultureSelect" data-dojo-attach-event="onChange:_onCultureChange"></div>','<div data-dojo-type="Sage.UI.ImageButton" icon="images/icons/Save_16x16.gif" tooltip="{%: $.saveText %}" data-dojo-attach-point="saveIcon" data-dojo-attach-event="onClick:save" class="design-panel-save"></div>','<div data-dojo-type="Sage.UI.ImageButton" icon="images/icons/Help_16x16.png" tooltip="{%: $.helpText %}" data-dojo-attach-event="onClick:help" class="design-panel-help"></div>',"</div>",'<div class="design-panel-surface" data-dojo-type="Sage.QuickForms.Design.DesignSurface"  data-dojo-attach-point="designSurface" data-dojo-props="region: \'center\'"></div>','<div class="design-panel-hidden" data-dojo-type="Sage.QuickForms.Design.NonVisibleControlContainer" data-dojo-attach-point="nonVisibleContainer" data-dojo-props="region: \'bottom\', layoutPriority:2, splitter: true"></div>','<div class="design-panel-editor" data-dojo-type="Sage.QuickForms.Design.PropertyEditorContainer" data-dojo-attach-point="editorContainer" data-dojo-props="region: \'bottom\', layoutPriority:1, splitter: true"></div>']),loadingTemplate:new Simplate(['<div class="design-panel-loading-indicator"><span>{%: $.loadingText %}</span></div>']),savingTemplate:new Simplate(['<div class="design-panel-saving-indicator"><span>{%: $.savingText %}</span></div>']),_designGroup:null,_designGroupTopics:null,_cultureSelect:null,_previousName:null,_previousEntry:null,currentCulture:"iv",_cultureService:null,designSurface:null,nonVisibleContainer:null,editorContainer:null,form:null,formDirty:!1,helpTopicName:"Working_with_forms",helpSubSystemName:"WebForms",designGroup:"default",_saveMode:!1,cultureList:["iv","de-DE","fr-FR","it-IT","ru-RU"],cultureListText:{iv:"[invariant]",de_DE:"de-DE",fr_FR:"fr-FR",it_IT:"it-IT",ru_RU:"ru-RU"},helpText:"Help",saveText:"Save",cultureText:"Culture:",loadingText:"Loading...",savingText:"Saving...",saveErrorText:"An error occurred saving the form.",readErrorText:"Could not load the requested form.",cultureReloadConfirmText:"You have unsaved changes.  Are you sure you want to reload the form with a different culture?",constructor:function(){c.mixin(this,x),this._cultureService=Sage.Services.getService("Culture")},_getDesignGroupAttr:function(){return this._designGroup},_setDesignGroupAttr:function(a){this._designGroupTopics&&b.forEach(this._designGroupTopics,function(a){this.unsubscribe(a)},this),this._designGroup=a,this._designGroupTopics=[this.subscribe("/quickforms/design/designerModified",this._onDesignerModified)]},_ignoreModifiedOn:{focused:!0},_onDesignerModified:function(a,b,c,d,e){this._ignoreModifiedOn[b]||a.get("form")!==this.form||(this.formDirty=!0)},buildRendering:function(){this.inherited(arguments),h.add(this.domNode,"design-panel"),g.place(this.loadingTemplate.apply(this),this.designSurface.domNode),g.place(this.savingTemplate.apply(this),this.designSurface.domNode)},startup:function(){this.inherited(arguments);var a=this._cultureService.requestActive();if(a){var c=this;a.then(function(a){c.cultureList=a,c.cultureList.splice(0,0,{CultureCode:"iv",DisplayText:"[invariant]"}),b.forEach(c.cultureList,function(a){c._cultureSelect.addOption({value:a.CultureCode,label:a.DisplayText,selected:a.CultureCode==c.currentCulture})},c)})}},_onCultureChange:function(a){if(this.currentCulture!==a){if(this.form&&this.formDirty&&!confirm(this.cultureReloadConfirmText))return this._cultureSelect._onChangeActive=!1,this._cultureSelect.set("value",this.currentCulture),void(this._cultureSelect._onChangeActive=!0);this.currentCulture=a,this._previousName?this.read(this._previousName):this._previousEntry&&this.load(this._previousEntry)}},help:function(){s.open(this.helpTopicName,this.helpSubSystemName)},save:function(){if(!this._saveMode){this._saveMode=!0;var a=new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("forms").setResourceSelector(e.substitute('"${0}"',[this.form.get("name")])).setQueryArg("language","iv"!=this.currentCulture?this.currentCulture:""),b=c.clone(this.form.get("entry"));b.$etag=b.etag,delete b.etag,delete b.ifMatch,delete b.httpStatus,this._showSavingIndicator(),a.update(b,{success:c.hitch(this,this._onSaveFormSuccess,this.form),failure:c.hitch(this,this._onSaveFormFailure,this.form)})}},_onSaveFormSuccess:function(a,b){this._hideSavingIndicator(),this._saveMode=!1,a.set("etag",b.etag),this.formDirty=!1},_onSaveFormFailure:function(a,b){this._hideSavingIndicator(),this._saveMode=!1,alert(this.saveErrorText)},_showLoadingIndicator:function(){h.add(this.domNode,"design-panel-loading")},_showSavingIndicator:function(){i.set(this.saveIcon,"disabled",!0),h.add(this.domNode,"design-panel-saving")},_hideLoadingIndicator:function(){h.remove(this.domNode,"design-panel-loading")},_hideSavingIndicator:function(){h.remove(this.domNode,"design-panel-saving"),i.set(this.saveIcon,"disabled",!1)},read:function(a){this.clear(),this._previousName=a,this._previousEntry=null;var b=new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("forms").setResourceSelector(e.substitute('"${0}"',[a])).setQueryArg("language","iv"!=this.currentCulture?this.currentCulture:"");this._showLoadingIndicator(),b.read({success:c.hitch(this,this._onRequestFormSuccess),failure:c.hitch(this,this._onRequestFormFailure)})},_onRequestFormSuccess:function(a){this._hideLoadingIndicator(),this._apply(a)},_onRequestFormFailure:function(a){this._hideLoadingIndicator(),alert(this.readErrorText)},clear:function(){f.publish(e.substitute("/quickforms/design/${0}/clear",[this._designGroup]),this),this.designSurface.clear(),this.nonVisibleContainer.clear(),this.editorContainer.clear(),this.form&&this.form.destroy(),this.form=null,this.formDirty=!1},load:function(a){this.clear(),this._previousName=null,this._previousEntry=a,this._apply(a)},_apply:function(a){this.original=a,this.form=new u({entry:c.clone(a)}),this.designSurface.set("form",this.form),b.forEach(this.form.get("controls"),function(a){a.designSupport&&a.designSupport.visible?this.designSurface.addChild(a):this.nonVisibleContainer.addChild(a)},this),this.designSurface.layout(),this.nonVisibleContainer.layout(),f.publish(e.substitute("/quickforms/design/${0}/load",[this._designGroup]),a,this),f.publish(e.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this.form,!1,this)}})})},"Sage/QuickForms/Design/Help":function(){define(["dojo/string"],function(a){return{defaultTarget:"MCWebHelp",defaultTopic:null,defaultSubSystem:null,defaultUrlFormat:"/index_csh.htm#${0}",open:function(a,b,c){var d=Sage.Link.getHelpUrl(a,b);window.open(d,c||this.defaultTarget)}}})},"Sage/QuickForms/Design/DesignSurface":function(){define(["dojo/query","dojo/keys","dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/NodeList-traverse","dojo/NodeList-manipulate","dijit/registry","dijit/focus","dijit/layout/_LayoutWidget","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dijit/PopupMenuItem","Sage/_EventMapMixin","dojo/dnd/Source","dojo/dnd/Manager","./ControlDesignerRegistry","./ControlDesigner","./FormDesigner","./RowDesigner","./ColumnDesigner","dojo/i18n!./nls/DesignSurface"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){var F=e([x],{owner:null,accept:["designer","property"],constructor:function(){this.creator=!0},checkAcceptance:function(a,b){return a!=this&&this.inherited(arguments)},onDropInternal:function(a,b,c){},onDropExternal:function(a,b,c){var d,e;a.isInstanceOf(F)?(d=b[0],(e=d&&a.getItem(d.id))&&(a.selectNone(),this.selectNone(),this.onDropDesigner(this,p.byId(e.data)))):(d=b[0],(e=d&&a.getItem(d.id))&&f.indexOf(e.type,"property")>=0&&(a.selectNone(),this.selectNone(),this.onDropProperty(this,e.context)))},onDropProperty:function(a,b){},onDropDesigner:function(a,b){},onDndStart:function(a,b,c){this.inherited(arguments)},onDndCancel:function(){this.inherited(arguments)},_normalizedCreator:function(a,b){var c=p.byId(a),d=m.toDom(c.domNode.parentNode.innerHTML),e=m.create("div",{class:"design-surface-dnd-avatar"});return m.place(d,e),{node:e}},onDraggingOver:function(){if(this.inherited(arguments),this.empty){var a=y.manager();if(a.source.isInstanceOf(F)){var b=this.owner.validateMoveFromSource(this,a.source);a.canDrop(!b)}}},onMouseMove:function(a){var b,c;if(this.isDragging&&!this.empty&&(b=this.before,c=this.targetAnchor),this.inherited(arguments),this.isDragging&&!this.empty&&(this.targetAnchor!=c||this.before!=b)){var d=y.manager();if(d.source.isInstanceOf(F)){var e=this.owner.validateMoveFromSource(this,d.source);d.canDrop(!e)}}}}),G=e([s],{owner:null,constructor:function(){g.mixin(this,E)},postCreate:function(){this.inherited(arguments);var a=new s,b=new s;a.addChild(new t({label:this.aboveText,onClick:g.hitch(this,this._insertRow,!0)})),a.addChild(new t({label:this.belowText,onClick:g.hitch(this,this._insertRow,!1)})),b.addChild(new t({label:this.leftText,onClick:g.hitch(this,this._insertColumn,!0)})),b.addChild(new t({label:this.rightText,onClick:g.hitch(this,this._insertColumn,!1)})),this.addChild(new v({label:this.insertRowText,popup:a})),this.addChild(new v({label:this.insertColumnText,popup:b}))},_insertColumn:function(a){this.owner&&this.owner.insertColumnAround(this.target,a)},_insertRow:function(a){this.owner&&this.owner.insertRowAround(this.target,a)},open:function(a,b,c){this.target=a,this.target&&this._scheduleOpen(b,null,c)}}),H=e([s],{owner:null,constructor:function(){g.mixin(this,E)},postCreate:function(){this.inherited(arguments);var a=new s;a.addChild(new t({label:this.aboveText,onClick:g.hitch(this,this._insertRow,!0)})),a.addChild(new t({label:this.belowText,onClick:g.hitch(this,this._insertRow,!1)})),this.addChild(new v({label:this.insertRowText,popup:a})),this.addChild(this._delete=new t({label:this.deleteRowText,onClick:g.hitch(this,this._deleteRow,!1)}))},open:function(a,b,c){this.target=a,this.target&&(this._delete.set("disabled",this.owner.validateDeleteRowAt(this.target.index)),this._scheduleOpen(b,null,c))},_insertRow:function(a){if(this.owner){var b=a?this.target.get("index"):this.target.get("index")+1;this.owner.insertRowAt(b)}},_deleteRow:function(){this.owner&&this.owner.deleteRowAt(this.target.index)}}),I=e([s],{owner:null,constructor:function(){g.mixin(this,E)},postCreate:function(){this.inherited(arguments);var a=new s;a.addChild(new t({label:this.leftText,onClick:g.hitch(this,this._insertColumn,!0)})),a.addChild(new t({label:this.rightText,onClick:g.hitch(this,this._insertColumn,!1)})),this.addChild(new v({label:this.insertColumnText,popup:a})),this.addChild(this._delete=new t({label:this.deleteColumnText,onClick:g.hitch(this,this._deleteColumn)}))},open:function(a,b,c){this.target=a,this.target&&(this._delete.set("disabled",!!this.owner.validateDeleteColumnAt(this.target.index)),this._scheduleOpen(b,null,c))},_insertColumn:function(a){if(this.owner){var b=a?this.target.get("index"):this.target.get("index")+1;this.owner.insertColumnAt(b)}},_deleteColumn:function(){this.owner&&this.owner.deleteColumnAt(this.target.index)}}),J=e("Sage.QuickForms.Design.DesignSurface",[r,w],{events:{click:"_onClick",keydown:"_onKeyDown",".design-surface-selector-cell[data-select-row]:contextmenu":"_onRowContextMenu",".design-surface-selector-cell[data-select-column]:contextmenu":"_onColumnContextMenu",".dojoDndSource:contextmenu":"_onCellContextMenu"},_designGroup:null,_designGroupTopics:null,_rowContextMenu:null,_columnContextMenu:null,_cellContextMenu:null,baseClass:"design-surface",selections:null,form:null,columns:null,rows:null,columnCount:3,currentLayout:null,tableNode:null,singleSelection:!0,designGroup:"default",_getDesignGroupAttr:function(){return this._designGroup},_setDesignGroupAttr:function(a){this._designGroupTopics&&f.forEach(this._designGroupTopics,function(a){this.unsubscribe(a)},this),this._designGroup=a,this._designGroupTopics=[this.subscribe(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected)]},_onRowContextMenu:function(a){h.stop(a),this._rowContextMenu&&this._rowContextMenu.open(this.findDesignerByNode(a.target),a.target,{x:a.pageX,y:a.pageY})},_onColumnContextMenu:function(a){h.stop(a),this._columnContextMenu&&this._columnContextMenu.open(this.findDesignerByNode(a.target),a.target,{x:a.pageX,y:a.pageY})},_onCellContextMenu:function(a){h.stop(a),this._cellContextMenu&&this._cellContextMenu.open(this.findDesignerByNode(a.target),a.target,{x:a.pageX,y:a.pageY})},constructor:function(){this.selections=[],g.mixin(this,E)},buildRendering:function(){this.inherited(arguments),i.set(this.domNode,"tabIndex",0)},createContextMenus:function(){this._rowContextMenu=new H({owner:this}),this._rowContextMenu.startup(),this._columnContextMenu=new I({owner:this}),this._columnContextMenu.startup(),this._cellContextMenu=new G({owner:this}),this._cellContextMenu.startup()},postCreate:function(){this.inherited(arguments)},uninitialize:function(){this._sources&&f.forEach(this._sources,function(a){a.destroy()}),this._contextMenu&&this._contextMenu.destroyRecursive(),this._sources=[],this.inherited(arguments)},startup:function(){this._started||(this.inherited(arguments),this.createContextMenus())},resize:function(){this.inherited(arguments),f.forEach(this.getChildren(),function(a){"function"==typeof a.resize&&a.resize()}),this._sources&&f.forEach(this._sources,function(a){a.sync()})},_buildKeyHandlerMap:function(){var a={};return a[this.isLeftToRight()?b.LEFT_ARROW:b.RIGHT_ARROW]="_onLeftArrow",a[this.isLeftToRight()?b.RIGHT_ARROW:b.LEFT_ARROW]="_onRightArrow",a[b.UP_ARROW]="_onUpArrow",a[b.DOWN_ARROW]="_onDownArrow",a},_onKeyDown:function(a){var b=a.keyCode,c=this._keyHandlerMap||(this._keyHandlerMap=this._buildKeyHandlerMap());c[b]&&this[c[b]]&&(this[c[b]](a),h.stop(a))},_onLeftArrow:function(a){this._moveSelectionIndicator("l")},_onRightArrow:function(a){this._moveSelectionIndicator("r")},_onUpArrow:function(a){this._moveSelectionIndicator("u")},_onDownArrow:function(a){this._moveSelectionIndicator("d")},_moveSelectionIndicator:function(b){var c=1==this.selections.length?this.selections[0]:null,d=c&&c.designer;if(d&&d.isInstanceOf(A)){var e=this._findNextWidget(d,b),f=e&&a(e.domNode).closest(".design-surface-cell")[0];e&&this._handleSelectionOf(e,!1,f,e.domNode)}},_findNextWidget:function(a,b){var c,d,e,f,g=this.currentLayout,h=a.get("row")||0,i=a.get("column")||0,j=a.get("rowSpan")||1,k=a.get("columnSpan")||1,l=[h,h+j-1],m=[i,i+k-1];switch(b){case"u":c=[h-1,0],d=-1,e=m,f=1;break;case"d":c=[h+j,g.rows.length-1],d=1,e=m,f=1;break;case"l":c=l,d=1,e=[i-1,0],f=-1;break;case"r":c=l,d=1,e=[i+k,g.columnCount-1],f=1}for(var n=c[0];d*n<=c[1];n+=d)for(var o=e[0];f*o<=e[1];o+=f){var p=this._readFromLayout(g,n,o);if(p){var q=p.widget;if(q!==a)return q}}return null},_handleSelectionOf:function(a,b,e,g){if(a){var h=f.some(this.selections,function(b){return b.designer===a});b&&!this.singleSelection?h||(f.forEach(this.selections,function(a){a.focusNode&&i.set(a.focusNode,"tabIndex","-1")}),this.selections.push({designer:a,styleNode:e,focusNode:g}),g&&(i.set(g,"tabIndex",0),q.focus(g)),e&&j.add(e,"design-surface-cell-selected"),this.onSelectionChanged(this.selections,!0),d.publish(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),a,!0,this)):(this._clearSelectionDom(),this._clearSelectionState(!1),this.selections=[{designer:a,styleNode:e,focusNode:g}],g&&(i.set(g,"tabIndex",0),q.focus(g)),e&&j.add(e,"design-surface-cell-selected"),this.onSelectionChanged(this.selections,!1),d.publish(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),a,!1,this))}else!this.singleSelection&&b||(this._clearSelectionDom(),this._clearSelectionState())},findDesignerByNode:function(a){var b=this._findSelectableDesignerByNode(a);return b&&b.designer},_findSelectableDesignerByNode:function(b){var c=a(b).closest(".design-surface-cell")[0],d=c&&a(".dojoDndItem > *",c)[0],e=d&&p.byNode(d);return e?{designer:e,styleNode:c,focusNode:e.domNode}:c&&i.has(c,"data-select-row")?{designer:this.form&&this.form.get("rows")[parseInt(i.get(c,"data-select-row"),10)],styleNode:c,focusNode:c}:c&&i.has(c,"data-select-column")?{designer:this.form&&this.form.get("columns")[parseInt(i.get(c,"data-select-column"),10)],styleNode:c,focusNode:c}:null},_onClick:function(a){var b=a.shiftKey,c=this._findSelectableDesignerByNode(a.target);c?c.designer.isInstanceOf(A)?this._handleSelectionOf(c.designer,b,c.styleNode,c.focusNode):this._handleSelectionOf(c.designer,!1,c.styleNode,c.focusNode):this._handleSelectionOf(this.form,b)},onSelectionChanged:function(a,b){},_clearSelectionDom:function(){this.selections.length>0&&f.forEach(this.selections,function(a){a.focusNode&&i.set(a.focusNode,"tabIndex","-1"),a.styleNode&&j.remove(a.styleNode,"design-surface-cell-selected")})},_clearSelectionState:function(a){this.selections.length>0&&(this.selections=[],!1!==a&&(this.onSelectionChanged(this.selections),d.publish(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),!1,!1,this)))},_syncDomWithSelectionState:function(){f.forEach(this.selections,function(b){var d=b.designer;d.isInstanceOf(A)?(b.styleNode=a(d.domNode).closest(".design-surface-cell")[0],b.focusNode=d.domNode):d.isInstanceOf(C)?(b.styleNode=a(c.substitute('.design-surface-selector-cell[data-select-row="${0}"]',[d.index]),this.domNode)[0],b.focusNode=b.styleNode):d.isInstanceOf(D)&&(b.styleNode=a(c.substitute('.design-surface-selector-cell[data-select-column="${0}"]',[d.index]),this.domNode)[0],b.focusNode=b.styleNode),i.set(b.focusNode,"tabIndex",0),q.focus(b.focusNode),j.add(b.styleNode,"design-surface-cell-selected")},this)},_onDesignerSelected:function(a,b,c){a&&c!==this&&(this._clearSelectionDom(),this._clearSelectionState(!1))},_buildLayoutFor:function(a){var b=[],c=this.form?this.form.get("columnCount"):this.columnCount;return f.forEach(a,function(a){var d,e,f,g,h=a.get("row")||0,i=a.get("column")||0,j=a.get("rowSpan")||1,k=a.get("columnSpan")||1;if(j>1||k>1)for(e=[i,i+(k-1)],f=0;f<j;f++)for(d=b[h+f]||(b[h+f]=[]),g=0;g<k;g++)d[i+g]={widget:a,span:f>0||g>0,edge:e};else d=b[h]||(b[h]=[]),d[i]={widget:a,span:!1,edge:[i,i]};i+k>c&&(c=i+k)},this),{rows:b,columnCount:c,children:a}},_syncNonVisibleDesigners:function(a){if(this.form){var b,c,d,e,f=a.rows,g=f.length,h=a.columnCount;if(this.form.get("rowCount")>g)for(b=this.form.get("rows"),e=b.length-1;e>g-1&&b[e].added;e--)this.form.removeRow(e);else if(this.form.get("rowCount")<g)for(b=this.form.get("rows"),c=b.length,e=0;e<g-c;e++)this.form.addRow(new C({entry:{Height:35,SizeType:"Absolute"},form:this.form,index:c+e,added:!0}));if(this.form.get("columnCount")>h)for(d=this.form.get("columns"),e=d.length-1;e>h-1&&d[e].added;e--)this.form.removeColumn(e);else if(this.form.get("columnCount")<h)for(d=this.form.get("columns"),c=d.length,e=0;e<h-c;e++)this.form.addColumn(new D({entry:{Width:10,SizeType:"Percent"},form:this.form,index:c+e,added:!0}))}},_renderLayout:function(a){this._sources&&f.forEach(this._sources,function(a){a.destroy()}),this._sources=[];var b,c,d,e,h,i,j=a.rows,n=a.children,o=Math.max(this.form&&this.form.get("rowCount")||0,j.length),p=Math.max(this.form&&this.form.get("columnCount")||0,a.columnCount),q=m.create("table",{class:"design-surface-table"},this.domNode),r=m.create("colgroup",null,q),s=m.create("tbody",null,q);m.create("col",{},r);var t=100/p;for(h=0;h<p;h++)m.create("col",{width:t+"%"},r);var u=[];if(j.length>0)for(b=m.create("tr",{class:"design-surface-selector-row"},s),i=0;i<p+1;i++)c=m.create("td",{class:"design-surface-cell design-surface-selector-cell","data-select-column":i-1},b);for(h=0;h<o;h++){var v=j[h];for(b=m.create("tr",{class:"design-surface-row"},s),c=m.create("td",{class:"design-surface-cell design-surface-selector-cell","data-select-row":h},b),i=0;i<p;i++){var w=v&&v[i];if(w){if(w.span)continue;var x=w.widget,y=x.get("row")||0,z=x.get("rowSpan")||1,A=x.get("column")||0,B=x.get("columnSpan")||1;c=m.create("td",{colspan:B,rowspan:z,class:"design-surface-cell",
"data-design-row":y,"data-design-column":A},b),u.push({node:c,widget:x})}else c=m.create("td",{class:"design-surface-cell design-surface-cell-empty"},b);e=new J.Source(c,{owner:this,empty:!w,row:h,column:i,copyOnly:!0,selfAccept:!1,onDropProperty:g.hitch(this,this._onDropProperty),onDropDesigner:g.hitch(this,this._onDropDesigner)}),e.startup(),this._sources.push(e)}}f.forEach(u,function(a){var b=k.getComputedStyle(a.node),c=l.getMarginBox(a.node,b),e=l.getPadExtents(a.node,b),f=l.getBorderExtents(a.node,b);d=m.create("div",{dndType:"designer",dndData:a.widget.id,class:"dojoDndItem",style:{padding:"0px"}},a.node);var g=k.getComputedStyle(d),h=l.getBorderExtents(d,g);l.setContentSize(d,{h:c.h-e.h-f.h-h.h}),d.appendChild(a.widget.domNode)},this),this.tableNode&&this.tableNode.parentNode.removeChild(this.tableNode),f.forEach(n,function(a){"function"==typeof a.layout&&a.layout()}),this.currentLayout=a,this.tableNode=q,this._sources&&f.forEach(this._sources,function(a){a.sync()})},_readFromLayout:function(a,b,c){return a.rows[b]&&a.rows[b][c]},_applyPushToConnectionTree:function(a,b,c){c=c||{};for(var d=0;d<b.children.length;d++){var e=b.children[d],f=a-e.distance,g=e.node;c[g.id]?f>c[g.id].value&&(c[g.id].value=f):c[g.id]={widget:g.widget,value:f},this._applyPushToConnectionTree(f,g,c)}return c},_buildConnectionTree:function(a,b,c,d){for(var e=[b.column,b.column+b.columnSpan],f=a.rows.length,g=(a.columnCount,{}),h=c||{},i=d||b,j=e[0];j<e[1];j++)for(var k=b.row+b.rowSpan;k<f;k++){var l=this._readFromLayout(a,k,j);if(l){var m=l.widget;if(m!==b.widget&&m!==i.widget&&!g[m.id]){if(g[m.id]=!0,h[m.id])b.children.push({distance:k-(b.row+b.rowSpan),node:h[m.id]});else{var n={id:m.id,widget:m,row:m.get("row"),rowSpan:m.get("rowSpan")||1,column:m.get("column"),columnSpan:m.get("columnSpan")||1,children:[]};h[m.id]=n,b.children.push({distance:k-(b.row+b.rowSpan),node:n}),this._buildConnectionTree(a,n,h,i)}break}}}},moveWidget:function(a,b,e){var f=this.currentLayout,h=a.get("rowSpan")||1,i=a.get("columnSpan")||1,j={id:a.id,widget:a,row:b,rowSpan:0,column:e,columnSpan:i,children:[]};this._buildConnectionTree(f,j);var k=this._applyPushToConnectionTree(h,j);for(var l in k){var m=k[l].widget,n=k[l].value;n>0&&m.unchecked(function(){this.set("row",this.get("row")+n)})}a.unchecked(function(){this.set("row",b),this.set("column",e)}),d.publish(c.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),a,this),setTimeout(g.hitch(this,function(){this.layout(!0)}),50)},_onDropProperty:function(a,b){var c=z.getDesignerForDataType(b.data.dataTypeId);if(c){var d=new c({form:this.form});d.setupFor(b),this.form.addControl(d),this.addChild(d),this._handleSelectionOf(d,!1),this._onDropDesigner(a,d)}},_onDropDesigner:function(a,b){var c=this.currentLayout,d=c.columnCount,e=this._readFromLayout(c,a.row,a.column),f=e&&e.widget,g=f&&f.get("rowSpan")||1,h=(b&&b.get("rowSpan"),b&&b.get("columnSpan")||1),i=!e||a.before?a.row:a.row+g,j=a.column+h>d?d-h:a.column;this.moveWidget(b,i,j)},insertRowAround:function(a,b){var c=a.get("row")||0,d=a.get("rowSpan")||1,e=b?c:c+d;this.insertRowAt(e)},insertRowAt:function(a){this.form.addRow(new C({entry:{Height:35,SizeType:"Absolute"},form:this.form,index:a}),a),f.forEach(this.getChildren(),function(b){(b.get("row")||0)>=a&&(b.unchecked(function(){this.set("row",this.get("row")+1)}),d.publish(c.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),b,this))},this),setTimeout(g.hitch(this,function(){this.layout(!0)}),50)},deleteRowAt:function(a){for(var b=this.currentLayout,e=(b.rows.length,b.columnCount),h=0;h<e;h++){if(this._readFromLayout(b,a,h))return}this.form.removeRow(a),f.forEach(this.getChildren(),function(b){(b.get("row")||0)>=a&&(b.unchecked(function(){this.set("row",this.get("row")-1)}),d.publish(c.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),b,this))},this),setTimeout(g.hitch(this,function(){this.layout(!0)}),50)},validateDeleteRowAt:function(a){for(var b=this.currentLayout,c=(b.rows.length,b.columnCount),d=0;d<c;d++){if(this._readFromLayout(b,a,d))return{error:"occupied"}}return!1},insertColumnAround:function(a,b){var c=a.get("column")||0,d=a.get("columnSpan")||1,e=b?c:c+d;this.insertColumnAt(e)},insertColumnAt:function(a){this.form.addColumn(new D({entry:{Width:10,SizeType:"Percent"},form:this.form,index:a}),a),f.forEach(this.getChildren(),function(b){(b.get("column")||0)>=a&&(b.unchecked(function(){this.set("column",this.get("column")+1)}),d.publish(c.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),b,this))},this),setTimeout(g.hitch(this,function(){this.layout(!0)}),50)},deleteColumnAt:function(a){for(var b=this.currentLayout,e=b.rows.length,h=(b.columnCount,0);h<e;h++){if(this._readFromLayout(b,h,a))return}this.form.removeColumn(a),f.forEach(this.getChildren(),function(b){(b.get("column")||0)>=a&&(b.unchecked(function(){this.set("column",this.get("column")-1)}),d.publish(c.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),b,this))},this),setTimeout(g.hitch(this,function(){this.layout(!0)}),50)},validateDeleteColumnAt:function(a){for(var b=this.currentLayout,c=b.rows.length,d=(b.columnCount,0);d<c;d++){if(this._readFromLayout(b,d,a))return{error:"occupied"}}return!1},validateSize:function(a,b,c){var d=this.currentLayout,e=d.rows.length,f=d.columnCount,g=a.get("row")||0,h=a.get("rowSpan")||1,i=a.get("column")||0,j=a.get("columnSpan")||1;if(b<1)return{error:"bounds",what:"rowSpan",message:this.rowSpanBoundsErrorText};if(c<1)return{error:"bounds",what:"columnSpan",message:this.columnSpanBoundsErrorText};if(b<=h&&c<=j)return!1;if(f<i+c)return{error:"bounds",what:"column",message:this.columnBoundsErrorText};for(var k=g;k<g+b&&k<e;k++)for(var l=[k<g+h?i+j:i,i+c],m=l[0];m<l[1];m++){var n=this._readFromLayout(d,k,m);if(n){var o=n.widget;if(o!==a)return{error:"occupied",what:o.id,message:this.occupiedErrorText}}}return!1},validateMove:function(a,b,c){var d=this.currentLayout,e=d.columnCount,f=a.get("columnSpan")||1,g={};if(b<0)return{error:"bounds",what:"row",message:this.rowBoundsErrorText};if(c<0)return{error:"bounds",what:"column",message:this.columnBoundsErrorText};if(e<c+f)return{error:"bounds",what:"column",message:this.columnBoundsErrorText};for(var h=c;h<c+f;h++){var i=this._readFromLayout(d,b,h);if(i){var j=i.widget;if(j!==a){if(i.span){if(g[j.id])continue;return{error:"bisection",what:j.id,message:this.bisectionErrorText}}g[j.id]=!0}}}return!1},validateMoveFromSource:function(a,b){var c=this.currentLayout,d=c.columnCount,e=this._readFromLayout(c,a.row,a.column),f=e&&e.widget,g=f&&f.get("rowSpan")||1,h=b.row,i=b.column,j=this._readFromLayout(c,h,i),k=j&&j.widget,l=(k&&k.get("rowSpan"),k&&k.get("columnSpan")||1),m=!e||a.before?a.row:a.row+g,n=a.column+l>d?d-l:a.column;return this.validateMove(k,m,n)},clearSelections:function(){this._clearSelectionDom(),this._clearSelectionState()},clear:function(){this._clearSelectionState(),f.forEach(this.getChildren(),function(a){this.removeChild(a)},this),this.form=null,this.layout()},layout:function(a){if(this._borderBox&&this._borderBox.h){var b=this.currentLayout,c=this.getChildren(),d={},e=!1;if(b){f.forEach(b.children,function(a){d[a.id]=!0});for(var g=0;g<c.length&&d[c[g].id];g++);e=c.length!=g||c.length!=b.children.length}else e=!0;(e||a)&&(b=this._buildLayoutFor(c),this._syncNonVisibleDesigners(b),this._renderLayout(b),this._syncDomWithSelectionState())}}});return J.Source=F,J.RowContextMenu=H,J.ColumnContextMenu=I,J.CellContextMenu=G,J})},"Sage/_EventMapMixin":function(){define(["dojo/on","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr","dojo/query"],function(a,b,c,d,e,f){var g=function(a,b){return function(c){a.call(b,c,this)}};return b("Sage._EventMapMixin",null,{events:null,_eventSignals:null,postCreate:function(){if(this.inherited(arguments),this._eventSignals=this._eventSignals||[],this.events)for(var b in this.events){var c=this.events[b];if(c){var e=null,f=null;d.isObject(c)?(e=c.selector?a.selector(c.selector,c.event||b):c.event||b,f=d.isFunction(this[c.action])?this[c.action]:this._invokeDynamicAction):(e=b,f=d.isFunction(this[c])?this[c]:this._invokeDynamicAction),this._eventSignals.push(a(this.domNode,e,g(f,this)))}}},_invokeDynamicAction:function(a,b){var c=e.get(b,"data-action"),f=d.isFunction(this[c])?this[c]:null;f&&f.call(this,a,b)},uninitialize:function(){this.inherited(arguments),c.forEach(this._eventSignals,function(a){a.remove()})}})})},"Sage/QuickForms/Design/ControlDesignerRegistry":function(){define(["dojo/_base/lang","./GenericControlDesigner","./HiddenControlDesigner","./TextBoxControlDesigner","./UrlControlDesigner","./PhoneControlDesigner","./EmailControlDesigner","./CheckBoxControlDesigner","./PickListControlDesigner","./ComboBoxControlDesigner","./UserControlDesigner","./OwnerControlDesigner","./DateTimePickerControlDesigner","./DataGridControlDesigner","./NumericControlDesigner","./DataSourceDesigner","./CurrencyControlDesigner","./EditableGridControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s={"Sage.Platform.QuickForms.Controls.QFTextBox, Sage.Platform.QuickForms":d,"Sage.Platform.QuickForms.QFControls.QFHidden, Sage.Platform.QuickForms.QFControls":c,"Sage.SalesLogix.QuickForms.QFControls.QFSLXUrl, Sage.SalesLogix.QuickForms.QFControls":e,"Sage.SalesLogix.QuickForms.QFControls.QFSLXPhone, Sage.SalesLogix.QuickForms.QFControls":f,"Sage.SalesLogix.QuickForms.QFControls.QFSLXEmail, Sage.SalesLogix.QuickForms.QFControls":g,"Sage.Platform.QuickForms.QFControls.QFCheckBox, Sage.Platform.QuickForms.QFControls":h,"Sage.SalesLogix.QuickForms.QFControls.QFSLXPickList, Sage.SalesLogix.QuickForms.QFControls":i,"Sage.Platform.QuickForms.QFControls.QFListBox, Sage.Platform.QuickForms.QFControls":j,"Sage.SalesLogix.QuickForms.QFControls.QFSLXUser, Sage.SalesLogix.QuickForms.QFControls":k,"Sage.SalesLogix.QuickForms.QFControls.QFSLXOwner, Sage.SalesLogix.QuickForms.QFControls":l,"Sage.SalesLogix.QuickForms.QFControls.QFDateTimePicker, Sage.SalesLogix.QuickForms.QFControls":m,"Sage.SalesLogix.QuickForms.QFControls.QFDataGrid, Sage.SalesLogix.QuickForms.QFControls":n,"Sage.SalesLogix.QuickForms.QFControls.QFSLXNumeric, Sage.SalesLogix.QuickForms.QFControls":o,"Sage.Platform.QuickForms.QFControls.QFDataSource, Sage.Platform.QuickForms.QFControls":p,"Sage.Platform.QuickForms.QFControls.QFHqlDataSource, Sage.Platform.QuickForms.QFControls":p,"Sage.Platform.QuickForms.QFControls.QFMashupDataSource, Sage.Platform.QuickForms.QFControls":p,"Sage.Platform.QuickForms.QFControls.QFSDataDataSource, Sage.Platform.QuickForms.QFControls":p,"Sage.SalesLogix.QuickForms.QFControls.QFSLXCurrency, Sage.SalesLogix.QuickForms.QFControls":q,"Sage.SalesLogix.QuickForms.QFControls.SDataGrid.QFSDataGrid, Sage.SalesLogix.QuickForms.QFControls":r},t={"ccc0f01d-7ba5-408e-8526-a3f942354b3a":d,"f4ca6023-9f5f-4e41-8571-50ba94e8f233":d,"76c537a8-8b08-4b35-84cf-fa95c6c133b0":d,"b2ed309e-ea89-4eef-8051-6244987953a4":d,"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":d,"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":o,"f37c635c-9fbf-40d8-98d5-750a54a3cca1":o,"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":o,"a6bf2690-3477-4a18-9849-56abf8693934":o,"2596d57d-89d6-4b72-9036-b18c64c5324c":o,"6b0b3d51-0728-4b67-9473-52836a81da53":o,"30053f5a-8d40-4db1-b185-1e4128eb26cc":d,"92432b4d-8206-4a96-ba7b-e4cbd374f148":h,"95ca9d52-6f0b-4a96-bd40-43583f41faf8":h,"3edc7c52-e711-431d-b150-969d88ebabf4":h,"1f08f2eb-87c8-443b-a7c2-a51f590923f5":m,"31e8638d-4232-4c61-8827-d94132a33887":g,"85f2bba5-1fb7-4ecf-941a-d98d4739c305":f,"b71918bf-fac1-4b62-9ed5-0b0294bc9900":i,"17541523-fc31-4269-ac97-df63290d0e31":l,"a3b52518-801b-44be-96bf-fdca3de84f7f":null,"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":null,"189a1a4e-396c-4146-95c0-93b5d9e7d160":null,"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":null,"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":null,"68e04249-f7e2-4b63-90be-55fbb1f4aa77":null,"07370ef3-ad24-409f-86a8-ff2db5ee6d69":null,"5685161e-5f0a-4a36-83fe-89e8e462e9e7":e};return a.setObject("Sage.QuickForms.Design.ControlDesignerRegistry",{fromType:s,fromDataType:t,getDesignerFor:function(a,c){var d=a&&a.$type;return this.fromType[d]||!1!==c&&b},getDesignerForDataType:function(a,b){return this.fromDataType[a]||!1!==b&&d}})})},"Sage/QuickForms/Design/GenericControlDesigner":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/GenericBasicPropertyEditor","./Editors/GenericAdvancedPropertyEditor","dojo/i18n!./nls/GenericControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return b("Sage.QuickForms.Design.GenericControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div data-dojo-attach-point="containerNode">','<span data-dojo-attach-point="designCaptionNode"></span>',"</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"visual_control",displayNameText:"Unknown",constructor:function(){c.mixin(this,k)},_setControlIdAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},getFormattedType:function(){var a=c.getObject("$type",!1,this.entry)||this.displayNameText,b=-1!==a.indexOf(", ")?a.split(", ")[0]:a,d=-1!==a.indexOf(".")?b.split("."):[b];return d[d.length-1]},startup:function(){this.inherited(arguments),this.displayNameText=this.getFormattedType(),this.set("designCaption",this.get("controlId")),this.applyVisibility()}})})},"Sage/QuickForms/Design/ControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","require","dojo/string","dojo/topic","dojo/dom-class","dojo/query","dijit/_Contained","./PropertyValueError","dojo/NodeList-traverse","dojo/i18n!./nls/ControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.ControlDesigner",[i],{designSupport:{visible:!0},_checked:!0,entry:null,editors:null,form:null,helpTopicName:"",column:0,row:0,displayNameText:null,constructor:function(){b.mixin(this,l)},set:function(a,c){var d=this.inherited(arguments),e=this._getAttrNames(a),g=this[e.s];return b.isFunction(g)&&f.publish("/quickforms/design/designerModified",this,a,c,d,this),d},_isOnDesignSurface:function(){var a=this._surfaceType||(this._surfaceType=d("./DesignSurface")),b=this.getParent();return b&&b.isInstanceOf(a)},_getControlIdAttr:function(){return b.getObject("ControlId",!1,this.entry)},_setControlIdAttr:function(a){b.setObject("ControlId",a,this.entry)},_getCaptionAttr:function(){return b.getObject("Caption",!1,this.entry)},_setCaptionAttr:function(a){b.setObject("Caption",a,this.entry)},_getCaptionAlignmentAttr:function(){return b.getObject("CaptionAlignment",!1,this.entry)},_setCaptionAlignmentAttr:function(a){b.setObject("CaptionAlignment",a,this.entry),this.applyCaptionAlignment(a)},_getControlNameAttr:function(){return this.displayNameText},_getEnabledAttr:function(){return b.getObject("Enabled",!1,this.entry)},_setEnabledAttr:function(a){b.setObject("Enabled",a,this.entry)},_getFormAttr:function(){return this.form},_getIsReadOnlyAttr:function(){return b.getObject("IsReadOnly",!1,this.entry)},_setIsReadOnlyAttr:function(a){b.setObject("IsReadOnly",a,this.entry)},_getToolTipAttr:function(){return b.getObject("ToolTip",!1,this.entry)},_setToolTipAttr:function(a){b.setObject("ToolTip",a,this.entry)},_getVisibleAttr:function(){return b.getObject("Visible",!1,this.entry)},_setVisibleAttr:function(a){b.setObject("Visible",a,this.entry),this.applyVisibility(a)},_getRowAttr:function(){return b.getObject("Row",!1,this.entry)},_setRowAttr:function(a){if(a!==this.get("row")){if(this._checked&&this._isOnDesignSurface()){var c=this.getParent().validateMove(this,a,this.get("column"));if(c)throw new j(c,this.get("row"))}this._checked&&this._isOnDesignSurface()?this.getParent().moveWidget(this,a,this.get("column")):b.setObject("Row",a,this.entry)}},_getRowSpanAttr:function(){return b.getObject("RowSpan",!1,this.entry)},_setRowSpanAttr:function(a){if(a!==this.get("rowSpan")){if(this._checked&&this._isOnDesignSurface()){var c=this.getParent().validateSize(this,a,this.get("columnSpan"));if(c)throw new j(c,this.get("rowSpan"))}b.setObject("RowSpan",a,this.entry),this._checked&&this._isOnDesignSurface()&&this.getParent().layout(!0)}},_getColumnAttr:function(){return b.getObject("Column",!1,this.entry)},_setColumnAttr:function(a){if(a!==this.get("column")){if(this._checked&&this._isOnDesignSurface()){var c=this.getParent().validateMove(this,this.get("row"),a);if(c)throw new j(c,this.get("column"))}this._checked&&this._isOnDesignSurface()?this.getParent().moveWidget(this,this.get("row"),a):b.setObject("Column",a,this.entry)}},_getColumnSpanAttr:function(){return b.getObject("ColumnSpan",!1,this.entry)},_setColumnSpanAttr:function(a){if(a!==this.get("columnSpan")){if(this._checked&&this._isOnDesignSurface()){var c=this.getParent().validateSize(this,this.get("rowSpan"),a);if(c)throw new j(c,this.get("columnSpan"))}b.setObject("ColumnSpan",a,this.entry),this._checked&&this._isOnDesignSurface()&&this.getParent().layout(!0)}},_getDataBindingsAttr:function(){return b.getObject("DataBindings",!1,this.entry)},_setDataBindingsAttr:function(a){b.setObject("DataBindings",a,this.entry)},findDataBinding:function(a){var b=this.get("dataBindings");if(b)for(var c=0;c<b.length;c++)if(a&&a(b[c]))return b[c];return null},unchecked:function(a){this._checked=!1;try{a.call(this,this)}finally{this._checked=!0}},applyCaptionAlignment:function(a){this.designCaptionNode&&this.fieldClass&&(a=a||this.get("captionAlignment"),g.remove(this.designCaptionNode,e.substitute("${0}-left ${0}-center ${0}-right",[this.fieldClass+"-caption"])),g.add(this.designCaptionNode,e.substitute("${0}-caption-${1}",[this.fieldClass,a])))},applyVisibility:function(a){this.containerNode&&(void 0===a&&(a=this.get("visible")),g.toggle(this.containerNode,"design-visible-false",!a))},setupFor:function(a){this.entry={$type:this.quickFormControlType,Row:0,RowSpan:1,Column:0,ColumnSpan:1},this.set("caption",a.displayName),this.set("captionAlignment","left"),this.set("controlId",this.form.createUniqueId(a.propertyName)),this.set("controlLabelPlacement","left"),this.set("enabled",!0),this.set("isReadOnly",!1),this.set("toolTip",""),this.set("visible",!0)}})})},"Sage/QuickForms/Design/PropertyValueError":function(){define(["dojo/string","dojo/_base/lang"],function(a,b){var c=function(b,c,d){this.result=b,this.value=c,this.message=d||a.substitute(this.messageText,[c])};return b.extend(c,{messageText:"The value ${0} is not allowed.",toString:function(){return this.message}}),b.setObject("Sage.QuickForms.Design.PropertyValueError",c)})},"Sage/QuickForms/Design/Editors/LayoutPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/LayoutPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j){return a("Sage.QuickForms.Design.Editors.LayoutPropertyEditor",[c,h,g],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.positionText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.rowTooltipText %}">',"<label>{%= $.rowText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_row" data-dojo-attach-event="onChange:_onRowChange" required="true" data-dojo-props="constraints:{min:0,max:100,places:0}"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.columnTooltipText %}">',"<label>{%= $.columnText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_column" data-dojo-attach-event="onChange:_onColumnChange" required="true" data-dojo-props="constraints:{min:0,max:100,places:0}"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.sizeText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.rowSpanTooltipText %}">',"<label>{%= $.rowSpanText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_rowSpan" data-dojo-attach-event="onChange:_onRowSpanChange" required="true" data-dojo-props="constraints:{min:1,max:100,places:0}"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.columnSpanTooltipText %}">',"<label>{%= $.columnSpanText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_columnSpan" data-dojo-attach-event="onChange:_onColumnSpanChange" required="true" data-dojo-props="constraints:{min:1,max:100,places:0}"></div>',"</div>","</div>","</fieldset>"]),_row:null,_column:null,_rowSpan:null,_columnSpan:null,titleText:"Layout",positionText:"Position",sizeText:"Size",rowText:"Row:",rowTooltipText:"Row number of the control.",columnText:"Column:",columnTooltipText:"Column number of the control.",rowSpanText:"Row Span:",rowSpanTooltipText:"Number of cells the control occupies vertically.",columnSpanText:"Column Span:",columnSpanTooltipText:"Number of cells the control occupies horizontally.",constructor:function(){b.mixin(this,j)},setup:function(){this.inherited(arguments),this._row.set("value",this._designer.get("row")),this._column.set("value",this._designer.get("column")),this._rowSpan.set("value",this._designer.get("rowSpan")),this._columnSpan.set("value",this._designer.get("columnSpan"))},_onRowChange:function(a){if(!this.isSuspended()&&this._row.isValid())try{this._designer.set("row",parseInt(a,10)||0)}catch(a){this._row.setValue(a.value),console}},_onColumnChange:function(a){if(!this.isSuspended()&&this._column.isValid())try{this._designer.set("column",parseInt(a,10)||0)}catch(a){this._column.setValue(a.value),console}},_onRowSpanChange:function(a){if(!this.isSuspended()&&this._rowSpan.isValid())try{this._designer.set("rowSpan",parseInt(a,10)||1)}catch(a){this._rowSpan.setValue(a.value),console}},_onColumnSpanChange:function(a){if(!this.isSuspended()&&this._columnSpan.isValid())try{this._designer.set("columnSpan",parseInt(a,10)||1)}catch(a){this._columnSpan.setValue(a.value),console}}})})},"Sage/QuickForms/Design/Editors/_PropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-class","../PropertyValueError","dojo/i18n!./nls/_PropertyEditor"],function(a,b,c,d,e,f){return a("Sage.QuickForms.Design.Editors._PropertyEditor",null,{_designer:null,_suspended:!1,titleText:"Properties",_setTitleTextAttr:function(a){this.set("title",a)},designer:null,constructor:function(){b.mixin(this,f)},buildRendering:function(){this.inherited(arguments),d.add(this.domNode,"design-property-editor")},suspend:function(){this._suspended=!0},resume:function(){this._suspended=!1},isSuspended:function(){return this._suspended},setup:function(a){},_setDesignerAttr:function(a){this.suspend(),this._designer=a,this.setup(a),setTimeout(b.hitch(this,this.resume),0)},_getDesignerAttr:function(){return this._designer}})})},"Sage/QuickForms/Design/Editors/GenericBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/GenericBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.GenericBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,titleText:"Basic",appearanceText:"Appearance",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)}})})},"Sage/QuickForms/Design/Editors/GenericAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/GenericAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.GenericAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._visible.set("value",this._designer.get("visible"))},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/HiddenControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/NonVisibleAdvancedPropertyEditor","dojo/i18n!./nls/HiddenControlDesigner"],function(a,b,c,d,e,f,g,h,i){return a("Sage.QuickForms.Design.HiddenControlDesigner",[e,f,d,g],{designSupport:{visible:!1},editors:[h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div data-dojo-attach-point="containerNode">','<span data-dojo-attach-point="designCaptionNode"></span>',"</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"Hidden_Text_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFHidden, Sage.Platform.QuickForms.QFControls",displayNameText:"Hidden Text",constructor:function(){c.mixin(this,i)},_setControlIdAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},startup:function(){this.inherited(arguments),this.set("designCaption",this.get("controlId"))}})})},"Sage/QuickForms/Design/Editors/NonVisibleAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NonVisibleAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.NonVisibleAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,titleText:"Advanced",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId"))},_onControlTypeChange:function(a){},_onControlIdChange:function(a){}})})},"Sage/QuickForms/Design/TextBoxControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/TextBoxControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.TextBoxControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-textbox",helpTopicName:"Textbox_control",quickFormControlType:"Sage.Platform.QuickForms.Controls.QFTextBox, Sage.Platform.QuickForms",displayNameText:"TextBox",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"Text"==a.ControlItemName})},_getLinesAttr:function(){return c.getObject("Lines",!1,this.entry)},
_setLinesAttr:function(a){c.setObject("Lines",a,this.entry)},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getMaxLengthAttr:function(){return c.getObject("MaxLength",!1,this.entry)},_setMaxLengthAttr:function(a){c.setObject("MaxLength",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("lines",1),this.set("maxLength",parseInt(a.data.length,10)||-1),this.set("required",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/TextBoxBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/TextBoxBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.TextBoxBasicPropertyEditor",[d,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.linesTooltipText %}">',"<label>{%= $.linesText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_lines" data-dojo-props="constraints:{min:0,max:1000,places:0}" data-dojo-attach-event="onChange:_onLinesChange"></div>',"</div>",'<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_lines:null,_isReadOnly:null,_tooltip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",linesText:"Lines:",linesTooltipText:"Number of lines of text displayed.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._lines.set("value",this._designer.get("lines")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"));var a=Sage.QuickForms.Design,b=this._designer;(b instanceof a.PhoneControlDesigner||b instanceof a.UrlControlDesigner||b instanceof a.EmailControlDesigner)&&c.set(this._lines.domNode.parentNode,"display","none")},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onLinesChange:function(a){!this.isSuspended()&&this._lines.isValid()&&this._designer.set("lines",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/TextBoxAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/TextBoxAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j){return a("Sage.QuickForms.Design.Editors.TextBoxAdvancedPropertyEditor",[c,h,g],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>",'<div class="editor-field" title="{%= $.maxLengthTooltipText %}">',"<label>{%= $.maxLengthText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_maxLength" data-dojo-attach-event="onChange:_onMaxLengthChange" data-dojo-props="constraints:{min:-1,places:0}"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_maxLength:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},constructor:function(){b.mixin(this,j)},setup:function(){this.inherited(arguments),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._enabled.set("value",this._designer.get("enabled")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._maxLength.set("value",this._designer.get("maxLength")),this._required.set("value",this._designer.get("required")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDefaultDataBindingChange:function(a){},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onMaxLengthChange:function(a){!this.isSuspended()&&this._maxLength.isValid()&&this._designer.set("maxLength",a)},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/UrlControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/UrlControlDesigner"],function(a,b,c,d,e,f,g,h){return a("Sage.QuickForms.Design.UrlControlDesigner",[d],{designSupport:{visible:!0},editors:[f,g,e],widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %} design-url" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="design-url-icon"></div>',"</div>","</div>"]),helpTopicName:"URL_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXUrl, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Url",constructor:function(){c.mixin(this,h)}})})},"Sage/QuickForms/Design/PhoneControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/PhoneControlDesigner"],function(a,b,c,d,e,f,g,h){return a("Sage.QuickForms.Design.PhoneControlDesigner",[d],{designSupport:{visible:!0},editors:[f,g,e],widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %} design-phone" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="design-phone-icon"></div>',"</div>","</div>"]),helpTopicName:"Phone_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXPhone, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Phone",constructor:function(){c.mixin(this,h)}})})},"Sage/QuickForms/Design/EmailControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/EmailControlDesigner"],function(a,b,c,d,e,f,g,h){return a("Sage.QuickForms.Design.EmailControlDesigner",[d],{designSupport:{visible:!0},editors:[f,g,e],widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %} design-email" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="design-email-icon"></div>',"</div>","</div>"]),helpTopicName:"Email_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXEmail, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Email",constructor:function(){c.mixin(this,h)}})})},"Sage/QuickForms/Design/CheckBoxControlDesigner":function(){define(["dojo/dom-class","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/CheckBoxBasicPropertyEditor","./Editors/CheckBoxAdvancedPropertyEditor","dojo/i18n!./nls/CheckBoxControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k,l){return b("Sage.QuickForms.Design.CheckBoxControlDesigner",[f,g,e,h],{designSupport:{visible:!0},editors:[j,k,i],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="design-checkbox" data-dojo-attach-point="containerNode">','<span class="{%= $.fieldClass %}-icon" data-dojo-attach-point="designCheckedNode"></span>','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field" data-dojo-attach-point="designBindingNode"></div>',"</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-checkbox",helpTopicName:"Checkbox_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFCheckBox, Sage.Platform.QuickForms.QFControls",displayNameText:"CheckBox",constructor:function(){d.mixin(this,l)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"Checked"==a.ControlItemName})},_getControlLabelPlacementAttr:function(){return d.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){d.setObject("ControlLabelPlacement",a,this.entry)},_getCheckedAttr:function(){return d.getObject("Checked",!1,this.entry)},_setCheckedAttr:function(b){d.setObject("Checked",b,this.entry),b?a.add(this.designCheckedNode,"design-checkbox-icon-checked"):a.remove(this.designCheckedNode,"design-checkbox-icon-checked")},setupFor:function(a){this.inherited(arguments),this.set("checked",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Checked",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/CheckBoxBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CheckBoxBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.CheckBoxBasicPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/CheckBoxAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CheckBoxAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.CheckBoxAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" style="display:none;" title="{%= $.checkedTooltipText %}">',"<label>{%= $.checkedText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_checked" data-dojo-attach-event="onChange:_onCheckedChange"></div>',"</div>",'<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_checked:null,_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",checkedText:"Checked:",checkedTooltipText:"Sets default state of checkbox to selected.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._checked.set("value",this._designer.get("checked")),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._enabled.set("value",this._designer.get("enabled")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onCheckedChange:function(a){this.isSuspended()||this._designer.set("checked",a)},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDefaultDataBindingChange:function(a){},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/PickListControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/PickListBasicPropertyEditor","./Editors/PickListAdvancedPropertyEditor","dojo/i18n!./nls/PickListControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.PickListControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="{%= $.fieldClass %}-icon">...</div>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-picklist",helpTopicName:"Pick_List_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXPickList, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Pick List",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"PickListValue"==a.ControlItemName})},_getStorageModeAttr:function(){var a=c.getObject("StorageMode",!1,this.entry);return"ID"===a?"Id":a},_setStorageModeAttr:function(a){c.setObject("StorageMode",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},_getPickListNameAttr:function(){return c.getObject("PickListName",!1,this.entry)},_setPickListNameAttr:function(a){c.setObject("PickListName",a,this.entry)},_getPickListIdAttr:function(){return c.getObject("PickListId",!1,this.entry)},_setPickListIdAttr:function(a){c.setObject("PickListId",a,this.entry)},_getMustExistInListAttr:function(){return c.getObject("MustExistInList",!1,this.entry)},_setMustExistInListAttr:function(a){c.setObject("MustExistInList",a,this.entry)},_getMaxLengthAttr:function(){return c.getObject("MaxLength",!1,this.entry)},_setMaxLengthAttr:function(a){c.setObject("MaxLength",a,this.entry)},_getDisplayModeAttr:function(){return c.getObject("DisplayMode",!1,this.entry)},_setDisplayModeAttr:function(a){c.setObject("DisplayMode",a,this.entry)},_getCanEditTextAttr:function(){return c.getObject("CanEditText",!1,this.entry)},_setCanEditTextAttr:function(a){c.setObject("CanEditText",a,this.entry)},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getAllowMultiplesAttr:function(){return c.getObject("AllowMultiples",!1,this.entry)},_setAllowMultiplesAttr:function(a){c.setObject("AllowMultiples",a,this.entry)},setupFor:function(a){this.inherited(arguments);var b=a.dataTypeData,c=b.Storage;c=c&&"number"!==c.toLowerCase()?c:"Text",c=c.replace("Unicode","");var d=b.MustExistInList;d=d||!1;var e=b.AllowMultiples;e=e||!1;var f=b.CanEditText;f=!1!==f||f,this.set("allowMultiples",e),this.set("canEditText",f),this.set("displayMode","AsControl"),this.set("maxLength",a.data.length||-1),this.set("mustExistInList",d),this.set("required",!1),this.set("storageMode",c),this.set("pickListName",b.PickListName),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"PickListValue",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/PickListBasicPropertyEditor":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","dijit/form/ComboBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","Sage/Services/_ServiceMixin","dojo/i18n!./nls/PickListBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return b("Sage.QuickForms.Design.Editors.PickListBasicPropertyEditor",[d,l,k,n],{serviceMap:{dataService:{type:"sdata",name:"system"}},widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",
center:"Center",right:"Right"},constructor:function(){c.mixin(this,o)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/PickListAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dojo/data/ItemFileWriteStore","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/PickListAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a("Sage.QuickForms.Design.Editors.PickListAdvancedPropertyEditor",[d,k,j],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.displayModeTooltipText %}">',"<label>{%= $.displayModeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_displayMode" data-dojo-attach-event="onChange:_onDisplayModeChange">',"{% for (var mode in $.displayModeTypeText) { %}",'<span value="{%= mode %}">{%= $.displayModeTypeText[mode] %}</span>',"{% } %}","</div>","</div>",'<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.allowMultiplesTooltipText %}">',"<label>{%= $.allowMultiplesText %}</label>",'<div data-dojo-attach-point="_allowMultiples" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onAllowMultiplesChange"></div>',"</div>",'<div class="editor-field" title="{%= $.canEditTextTooltipText %}">',"<label>{%= $.canEditTextText %}</label>",'<div data-dojo-attach-point="_canEditText" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onCanEditTextChange"></div>',"</div>",'<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.mustExistInListTooltipText %}">',"<label>{%= $.mustExistInListText %}</label>",'<div data-dojo-attach-point="_mustExistInList" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onMustExistInListChange"></div>',"</div>",'<div class="editor-field" title="{%= $.maxLengthTooltipText %}">',"<label>{%= $.maxLengthText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_maxLength" data-dojo-attach-event="onChange:_onMaxLengthChange" data-dojo-props="constraints:{min:-1,places:0}"></div>',"</div>",'<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>",'<div class="editor-field" title="{%= $.pickListNameTooltipText %}">',"<label>{%= $.pickListNameText %}</label>",'<div data-dojo-type="dijit.form.ComboBox" data-dojo-attach-point="_pickListName" data-dojo-attach-event="onChange:_onPickListNameChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.storageModeTooltipText %}">',"<label>{%= $.storageModeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_storageMode" data-dojo-attach-event="onChange:_onStorageModeChange" data-dojo-props="disabled:true">',"{% for (var mode in $.storageModeTypeText) { %}",'<span value="{%= mode %}">{%= $.storageModeTypeText[mode] %}</span>',"{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_allowMultiples:null,_canEditText:null,_controlType:null,_controlId:null,_controlLabelPlacement:null,_defaultDataBinding:null,_displayMode:null,_enabled:null,_maxLength:null,_mustExistInList:null,_pickListName:null,_required:null,_storageMode:null,_visible:null,pickListRequest:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",allowMultiplesText:"Allow Multiple Selections:",allowMultiplesTooltipText:"Allows user to select more than one item.",canEditTextText:"Can Edit Text:",canEditTextTooltipText:"Allows user to type value.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",mustExistInListText:"Item Must Exist:",mustExistInListTooltipText:"Requires typed value to be on list.",pickListNameText:"Pick List Name:",pickListNameTooltipText:"Name of the list of values the user can select from when entering data.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",storageModeText:"Storage Mode:",storageModeTooltipText:"How the value is stored: Text, Id, or Code.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},displayModeTypeText:{AsControl:"As Control",AsText:"As Text",AsHyperlink:"As Hyperlink"},storageModeTypeText:{Text:"Text",Id:"ID",Code:"Code"},pickListRequestErrorText:"Unable to retrieve picklists from server.",constructor:function(){b.mixin(this,m)},setup:function(){this.inherited(arguments),this._allowMultiples.set("value",this._designer.get("allowMultiples")),this._canEditText.set("value",this._designer.get("canEditText")),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._displayMode.set("value",this._designer.get("displayMode")),this._enabled.set("value",this._designer.get("enabled")),this._maxLength.set("value",this._designer.get("maxLength")),this._mustExistInList.set("value",this._designer.get("mustExistInList")),this._pickListName.set("value",this._designer.get("pickListName")),this._required.set("value",this._designer.get("required")),this._storageMode.set("value",this._designer.get("storageMode")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},destroy:function(){this.pickListRequest&&this.pickListRequest.abort(),this.inherited(arguments)},createPickListRequest:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setCount(300).setStartIndex(0);return a.setResourceKind("picklists"),a.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.OrderBy,"name asc"),a},requestPickListNames:function(){var a=this.createPickListRequest();a&&(this.pickListRequest=a.read({success:this.onRequestPickListNamesSuccess,failure:this.onRequestPickListNamesFailure,scope:this}))},onRequestPickListNamesSuccess:function(a){this.pickListRequest=null,this.processPickListFeed(a)},onRequestPickListNamesFailure:function(a,b){this.pickListRequest=null,alert(c.substitute(this.pickListRequestErrorText,[a,b]))},processPickListFeed:function(a){if(a.$resources){for(var b=new i({data:{identifier:"$key",label:"name",items:[]}}),c=0;c<a.$resources.length;c++){var d=a.$resources[c];d.name&&b.newItem(d)}this._pickListName.set({store:b,disabled:!1})}},_onAllowMultiplesChange:function(a){this.isSuspended()||this._designer.set("allowMultiples",a)},_onCanEditTextChange:function(a){this.isSuspended()||this._designer.set("canEditText",a)},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onDefaultDataBindingChange:function(a){},_onDisplayModeChange:function(a){this.isSuspended()||this._designer.set("displayMode",a)},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onMaxLengthChange:function(a){this.isSuspended()||this._designer.set("maxLength",a)},_onMustExistInListChange:function(a){this.isSuspended()||this._designer.set("mustExistInList",a)},_onPickListNameChange:function(a){if(!this.isSuspended()){this._designer.set("pickListName",a);var b=this._pickListName.get("item");this._designer.set("pickListId",b.$key[0])}},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onStorageModeChange:function(a){this.isSuspended()||this._designer.set("storageMode",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/ComboBoxControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/ComboBoxBasicPropertyEditor","./Editors/ComboBoxAdvancedPropertyEditor","dojo/i18n!./nls/ComboBoxControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.ComboBoxControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="{%= $.fieldClass %}-icon"></div>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-combobox",helpTopicName:"ComboBox_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFListBox, Sage.Platform.QuickForms.QFControls",displayNameText:"ComboBox",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"SelectedValue"==a.ControlItemName})},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getDataSourceAttr:function(){return c.getObject("DataSource",!1,this.entry)},_setDataSourceAttr:function(a){c.setObject("DataSource",a,this.entry)},_getHasItemsAttr:function(){var a=c.getObject("ItemValues",!1,this.entry);return c.isArray(a)&&a.length>0},_getItemValuesAttr:function(){return c.getObject("ItemValues",!1,this.entry)},_setItemValuesAttr:function(a){c.setObject("ItemValues",a,this.entry)},_getTextFieldAttr:function(){return c.getObject("TextField",!1,this.entry)},_setTextFieldAttr:function(a){c.setObject("TextField",a,this.entry)},_getValueFieldAttr:function(){return c.getObject("ValueField",!1,this.entry)},_setValueFieldAttr:function(a){c.setObject("ValueField",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("dataSource",null),this.set("textField",""),this.set("valueField",""),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"SelectedValue",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/ComboBoxBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ComboBoxBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.ComboBoxBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/ComboBoxAdvancedPropertyEditor":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dojo/store/Memory","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ComboBoxAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return b("Sage.QuickForms.Design.Editors.ComboBoxAdvancedPropertyEditor",[e,l,k],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.itemGroupText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.dataSourceTooltipText %}">',"<label>{%= $.dataSourceText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_dataSource" data-dojo-attach-event="onChange:_onDataSourceChange" data-dojo-props="disabled:true"></div>',"</div>",'<div class="editor-field" title="{%= $.itemsTooltipText %}">',"<label>{%= $.itemsText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_items" data-dojo-attach-event="onChange:_onItemsChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.textFieldTooltipText %}">',"<label>{%= $.textFieldText %}</label>",'<div data-dojo-type="dijit.form.ComboBox" data-dojo-attach-point="_textField" data-dojo-attach-event="onChange:_onTextFieldChange" data-dojo-props="disabled:true"></div>',"</div>",'<div class="editor-field" title="{%= $.valueFieldTooltipText %}">',"<label>{%= $.valueFieldText %}</label>",'<div data-dojo-type="dijit.form.ComboBox" data-dojo-attach-point="_valueField" data-dojo-attach-event="onChange:_onValueFieldChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlId:null,_controlLabelPlacement:null,_controlType:null,_dataSource:null,_defaultDataBinding:null,_enabled:null,_items:null,_textField:null,_valueField:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",itemGroupText:"Items",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",itemsText:"Items:",itemsTooltipText:"Values the user can select.",textFieldText:"Text Field:",textFieldTooltipText:"The name of the data source field used to populate the visible text portion of the list items.",valueFieldText:"Value Field:",valueFieldTooltipText:"The name of the data source field used to populate the value portion of the list items.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},hasItemsText:"Set",noItemsText:"Not Set",constructor:function(){c.mixin(this,n)},setup:function(){this.inherited(arguments),this._controlId.set("value",this._designer.get("controlId")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._controlType.set("value",this._designer.get("controlName")),this._enabled.set("value",this._designer.get("enabled")),this._items.set("value",this._designer.get("hasItems")?this.hasItemsText:this.noItemsText),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||""),this.setDataSources(),this._dataSource.set("value",this._designer.get("dataSource")),this._textField.set("value",this._designer.get("textField")),this._valueField.set("value",this._designer.get("valueField"))},setDataSources:function(){var a=this.getDataSources(),b=this._dataSource;b.removeOption(b.getOptions()),b.addOption({label:"",value:"_-1"}),b.addOption({label:"MainEntity",value:"MainEntity"}),d.forEach(a,function(a){this.addOption(c.mixin({label:a.get("controlId"),value:a.get("controlId")},a.entry))},b)},getDataSources:function(){var a=this._designer.get("form").get("controls"),b=[];return d.forEach(a,function(a){a instanceof Sage.QuickForms.Design.DataSourceDesigner&&this.push(a)},b),b},getSelectedItem:function(a){for(var b=this._dataSource,c=0;c<b.options.length;c++){var d=b.options[c];if(d.value===a)return d||null}return null},updateFieldStore:function(a,b,c){a.store.destroy&&a.store.destroy(),a.set("store",b),a.set("searchAttr",c),a.set("disabled",!1)},createSDataPropertyStore:function(b){return new Sage.Data.SDataStore({service:Sage.Data.SDataServiceRegistry.getService("metadata"),collection:"$resources.0.properties.$resources",resourceKind:"entities",resourcePredicate:a.substitute("'${0}'",[b])})},_onControlIdChange:function(a){},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onControlTypeChange:function(a){},_onDefaultDataBindingChange:function(a){},_onDataSourceChange:function(a){},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onItemsChange:function(a){},_onTextFieldChange:function(a){this.isSuspended()||this._designer.set("textField",a)},_onValueFieldChange:function(a){this.isSuspended()||this._designer.set("valueField",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/UserControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/UserBasicPropertyEditor","./Editors/UserAdvancedPropertyEditor","dojo/i18n!./nls/UserControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.UserControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="{%= $.fieldClass %}-icon"></div>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-user",helpTopicName:"User_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXUser, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"User",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"LookupResultValue"==a.ControlItemName})},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},_getLookupBindingModeAttr:function(){return c.getObject("LookupBindingMode",!1,this.entry)},_setLookupBindingModeAttr:function(a){c.setObject("LookupBindingMode",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("lookupBindingMode","Object"),this.set("required",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"LookupResultValue",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:"null"}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/UserBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/UserBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.UserBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){
this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/UserAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/UserAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.UserAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>",'<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.lookupBindingModeTooltipText %}">',"<label>{%= $.lookupBindingModeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_lookupBindingMode" data-dojo-attach-event="onChange:_onLookupBindingModeChange">',"{% for (var mode in $.bindingModeText) { %}",'<span value="{%= mode %}">{%= $.bindingModeText[mode] %}</span>',"{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_lookupBindingMode:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",lookupBindingModeText:"Lookup Binding Mode:",lookupBindingModeTooltipText:"Indicates whether you want to bind to an entity object or to a string value.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},bindingModeText:{Object:"Object",String:"String"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._enabled.set("value",this._designer.get("enabled")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._lookupBindingMode.set("value",this._designer.get("lookupBindingMode")),this._required.set("value",this._designer.get("required")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDefaultDataBindingChange:function(a){},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onLookupBindingModeChange:function(a){this.isSuspended()||this._designer.set("lookupBindingMode",a)},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/OwnerControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/OwnerBasicPropertyEditor","./Editors/OwnerAdvancedPropertyEditor","dojo/i18n!./nls/OwnerControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.OwnerControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="{%= $.fieldClass %}-icon"></div>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-owner",helpTopicName:"Owner_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXOwner, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Owner",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"LookupResultValue"==a.ControlItemName})},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("required",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"LookupResultValue",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:"null"}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/OwnerBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/OwnerBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.OwnerBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/OwnerAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/OwnerAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.OwnerAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>",'<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._enabled.set("value",this._designer.get("enabled")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._required.set("value",this._designer.get("required")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDefaultDataBindingChange:function(a){},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/DateTimePickerControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/DateTimePickerBasicPropertyEditor","./Editors/DateTimePickerAdvancedPropertyEditor","dojo/i18n!./nls/DateTimePickerControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.DateTimePickerControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>','<div class="{%= $.fieldClass %}-icon"></div>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-datetimepicker",helpTopicName:"DateTime_Picker_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFDateTimePicker, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"DateTime Picker",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"DateTimeValue"==a.ControlItemName})},_getButtonToolTipAttr:function(){return c.getObject("ButtonToolTip",!1,this.entry)},_setButtonToolTipAttr:function(a){c.setObject("ButtonToolTip",a,this.entry)},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getDisplayDateAttr:function(){return c.getObject("DisplayDate",!1,this.entry)},_setDisplayDateAttr:function(a){c.setObject("DisplayDate",a,this.entry)},_getDisplayModeAttr:function(){return c.getObject("DisplayMode",!1,this.entry)},_setDisplayModeAttr:function(a){c.setObject("DisplayMode",a,this.entry)},_getDisplayTimeAttr:function(){return c.getObject("DisplayTime",!1,this.entry)},_setDisplayTimeAttr:function(a){c.setObject("DisplayTime",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},_getTimelessAttr:function(){return c.getObject("Timeless",!1,this.entry)},_setTimelessAttr:function(a){c.setObject("Timeless",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("displayDate",!0),this.set("displayTime",!1),this.set("buttonToolTip",""),this.set("displayMode","AsControl"),this.set("required",!1),this.set("timeless",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"DateTimeValue",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/DateTimePickerBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DateTimePickerBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.DateTimePickerBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.displayDateTooltipText %}">',"<label>{%= $.displayDateText %}</label>",'<div data-dojo-attach-point="_displayDate" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onDisplayDateChange"></div>',"</div>",'<div class="editor-field" title="{%= $.displayTimeTooltipText %}">',"<label>{%= $.displayTimeText %}</label>",'<div data-dojo-attach-point="_displayTime" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onDisplayTimeChange"></div>',"</div>",'<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_displayDate:null,_displayTime:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",displayDateText:"Display Date:",displayDateTooltipText:"Display the date portion.",displayTimeText:"Display Time:",displayTimeTooltipText:"Display the time portion.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._displayDate.set("value",this._designer.get("displayDate")),this._displayTime.set("value",this._designer.get("displayTime")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onDisplayDateChange:function(a){this.isSuspended()||this._designer.set("displayDate",a)},_onDisplayTimeChange:function(a){this.isSuspended()||this._designer.set("displayTime",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/DateTimePickerAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DateTimePickerAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.DateTimePickerAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.buttonToolTipTooltipText %}">',"<label>{%= $.buttonToolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_buttonToolTip" data-dojo-attach-event="onChange:_onButtonToolTipChange"></div>',"</div>",'<div class="editor-field" title="{%= $.displayModeTooltipText %}">',"<label>{%= $.displayModeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_displayMode" data-dojo-attach-event="onChange:_onDisplayModeChange">',"{% for (var mode in $.displayModeTypeText) { %}",'<span value="{%= mode %}">{%= $.displayModeTypeText[mode] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>",'<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>",'<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.timelessTooltipText %}">',"<label>{%= $.timelessText %}</label>",'<div data-dojo-attach-point="_timeless" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onTimelessChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_buttonToolTip:null,_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_displayMode:null,_required:null,_timeless:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",buttonToolTipText:"Button Tooltip:",buttonToolTipTooltipText:"The tooltip  to display when the user's mouse hovers over the button part of the control.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",timelessText:"Timeless:",timelessTooltipText:"Use date without time and no DST conversion.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},displayModeTypeText:{AsControl:"As Control",AsText:"As Text",AsHyperlink:"As Hyperlink"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._buttonToolTip.set("value",this._designer.get("buttonToolTip")),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._displayMode.set("value",this._designer.get("displayMode")),this._enabled.set("value",this._designer.get("enabled")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._required.set("value",this._designer.get("required")),this._timeless.set("value",this._designer.get("timeless")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onButtonToolTipChange:function(a){this.isSuspended()||this._designer.set("buttonToolTip",a)},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDefaultDataBindingChange:function(a){},_onDisplayModeChange:function(a){this.isSuspended()||this._designer.set("displayMode",a)},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onTimelessChange:function(a){this.isSuspended()||this._designer.set("timeless",a)},_onVisibleChange:function(a){
this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/DataGridControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/DataGridBasicPropertyEditor","./Editors/DataGridAdvancedPropertyEditor","dojo/i18n!./nls/DataGridControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a("Sage.QuickForms.Design.DataGridControlDesigner",[g,h,f,i],{designSupport:{visible:!0},editors:[k,l,j],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<table class="{%= $.fieldClass %}-table" data-dojo-attach-point="tableNode">',"</table>","</div>"]),tableHeaderTemplate:new Simplate(['<th style="width:{%= $.widthStyle %}">{%: $.ColumnHeading || $.Text %}</th>']),fieldClass:"design-datagrid",helpTopicName:"Data_Grid_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFDataGrid, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Data Grid",emptyTableRowStringText:"No records match the selection criteria.",constructor:function(){c.mixin(this,m)},_getDataSourceAttr:function(){return c.getObject("DataSource",!1,this.entry)},_setDataSourceAttr:function(a){c.setObject("DataSource",a,this.entry)},_getPageSizeAttr:function(){return c.getObject("PageSize",!1,this.entry)},_setPageSizeAttr:function(a){c.setObject("PageSize",a,this.entry)},_getResizableColumnsAttr:function(){return c.getObject("ResizableColumns",!1,this.entry)},_setResizableColumnsAttr:function(a){c.setObject("ResizableColumns",a,this.entry)},_getColumnsAttr:function(){return c.getObject("Columns",!1,this.entry)},_setColumnsAttr:function(a){c.setObject("Columns",a,this.entry)},_getEmptyTableRowTextAttr:function(){return c.getObject("EmptyTableRowText",!1,this.entry)},_setEmptyTableRowTextAttr:function(a){c.setObject("EmptyTableRowText",a,this.entry)},_getExpandableRowsAttr:function(){return c.getObject("ExpandableRows",!1,this.entry)},_setExpandableRowsAttr:function(a){c.setObject("ExpandableRows",a,this.entry)},_getRenderVerticalAttr:function(){return c.getObject("RenderVertical",!1,this.entry)},_setRenderVerticalAttr:function(a){c.setObject("RenderVertical",a,this.entry)},_getShowSortIconAttr:function(){return c.getObject("ShowSortIcon",!1,this.entry)},_setShowSortIconAttr:function(a){c.setObject("ShowSortIcon",a,this.entry)},renderColumns:function(){for(var a=this.get("columns"),b=d.create("tr"),e=0;e<a.length;e++){var f=c.clone(a[e]);f.widthStyle=f.Width>0?f.Width+"em":"auto",d.place(this.tableHeaderTemplate.apply(f,this),b,"last")}d.place(b,this.tableNode,"only")},setupFor:function(a){this.inherited(arguments),this.set("dataSource",null),this.set("pageSize",20),this.set("resizableColumns",!0),this.set("emptyTableRowString",this.emptyTableRowStringText),this.set("expandableRows",!1),this.set("renderVertical",!1),this.set("showSortIcon",!0)},startup:function(){this.inherited(arguments),this.renderColumns(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/DataGridBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DataGridBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.DataGridBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>","</fieldset>",'<fieldset style="display:none;"><legend>{%= $.behaviorText %}</legend>','<div class="editor-content-half">','<div class="editor-field" title="{%= $.pageSizeTooltipText %}">',"<label>{%= $.pageSizeText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_pageSize" data-dojo-attach-event="onChange:_onPageSizeChange" data-dojo-props="constraints:{min:0,max:1000,places:0}"></div>',"</div>",'<div class="editor-field" title="{%= $.resizableColumnsTooltipText %}">',"<label>{%= $.resizableColumnsText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_resizableColumns" data-dojo-attach-event="onChange:_onResizableColumnsChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_pageSize:null,_resizableColumns:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",dataText:"Data",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",pageSizeText:"Page Size:",pageSizeTooltipText:"The number of grid records to display on a single page.",resizableColumnsText:"Resizable Columns:",resizableColumnsTooltipText:"Allows user to resize columns.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._pageSize.set("value",this._designer.get("pageSize")),this._resizableColumns.set("value",this._designer.get("resizableColumns"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onPageSizeChange:function(a){!this.isSuspended()&&this._pageSize.isValid()&&this._designer.set("pageSize",a)},_onResizableColumnsChange:function(a){this.isSuspended()||this._designer.set("resizableColumns",a)}})})},"Sage/QuickForms/Design/Editors/DataGridAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DataGridAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.DataGridAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.renderVerticalTooltipText %}">',"<label>{%= $.renderVerticalText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_renderVertical" data-dojo-attach-event="onChange:_onRenderVerticalChange"></div>',"</div>",'<div class="editor-field" style="display:none;" title="{%= $.showSortIconTooltipText %}">',"<label>{%= $.showSortIconText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_showSortIcon" data-dojo-attach-event="onChange:_onShowSortIconChange"></div>',"</div>",'<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.emptyTableRowTooltipText %}">',"<label>{%= $.emptyTableRowText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_emptyTableRowString" data-dojo-attach-event="onChange:_onEmptyTableRowStringChange"></div>',"</div>",'<div class="editor-field" title="{%= $.expandableRowsTooltipText %}">',"<label>{%= $.expandableRowsText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_expandableRows" data-dojo-attach-event="onChange:_onExpandableRowsChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.dataSourceTooltipText %}">',"<label>{%= $.dataSourceText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_dataSource" data-dojo-attach-event="onChange:_onDataSourceChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlId:null,_controlType:null,_dataSource:null,_emptyTableRowString:null,_expandableRows:null,_renderVertical:null,_showSortIcon:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",emptyTableRowText:"Empty Table Row Text:",emptyTableRowTooltipText:"Text to display if grid shows no data.",expandableRowsText:"Expandable Rows:",expandableRowsTooltipText:"Allows user to expand grid rows to show more text.",renderVerticalText:"Render Vertically:",renderVerticalTooltipText:"Show grid rows as columns.",showSortIconText:"Show Sort Icon:",showSortIconTooltipText:"Show sort icon on columns that are sortable.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlType.set("value",this._designer.get("controlName")),this._controlId.set("value",this._designer.get("controlId")),this._dataSource.set("value",this._designer.get("dataSource")),this._emptyTableRowString.set("value",this._designer.get("emptyTableRowText")),this._expandableRows.set("value",this._designer.get("expandableRows")),this._renderVertical.set("value",this._designer.get("renderVertical")),this._showSortIcon.set("value",this._designer.get("showSortIcon")),this._visible.set("value",this._designer.get("visible"))},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDataSourceChange:function(a){},_onEmptyTableRowStringChange:function(a){this.isSuspended()||this._designer.set("emptyTableRowText",a)},_onExpandableRowsChange:function(a){this.isSuspended()||this._designer.set("expandableRows",a)},_onRenderVerticalChange:function(a){this.isSuspended()||this._designer.set("renderVertical",a)},_onShowSortIconChange:function(a){this.isSuspended()||this._designer.set("showSortIcon",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/NumericControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/NumericBasicPropertyEditor","./Editors/NumericAdvancedPropertyEditor","dojo/i18n!./nls/NumericControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.NumericControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-numeric",helpTopicName:"Numeric_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXNumeric, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Numeric",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"Text"==a.ControlItemName})},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getDecimalDigitsAttr:function(){return c.getObject("DecimalDigits.DecimalDigits",!1,this.entry)},_setDecimalDigitsAttr:function(a){c.setObject("DecimalDigits.DecimalDigits",a,this.entry)},_getFormatTypeAttr:function(){return c.getObject("FormatType",!1,this.entry)},_setFormatTypeAttr:function(a){c.setObject("FormatType",a,this.entry)},_getMaxLengthAttr:function(){return c.getObject("MaxLength",!1,this.entry)},_setMaxLengthAttr:function(a){c.setObject("MaxLength",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},_getStrictAttr:function(){return c.getObject("DecimalDigits.Strict",!1,this.entry)},_setStrictAttr:function(a){c.setObject("DecimalDigits.Strict",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("decimalDigits",-1),this.set("formatType","Number"),this.set("maxLength",a.data.length||-1),this.set("strict",!1),this.set("required",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||this.get("text")||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/NumericBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NumericBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.NumericBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/NumericAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NumericAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.NumericAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>",'<div class="editor-field" title="{%= $.formatTypeTooltipText %}">',"<label>{%= $.formatTypeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_formatType" data-dojo-attach-event="onChange:_onFormatTypeChange">',"{% for (var format in $.numberFormatText) { %}",'<span value="{%= format %}">{%= $.numberFormatText[format] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>",'<div class="editor-field" title="{%= $.maxLengthTooltipText %}">',"<label>{%= $.maxLengthText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_maxLength" data-dojo-attach-event="onChange:_onMaxLengthChange" data-dojo-props="constraints:{min:-1,places:0}"></div>',"</div>",'<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.decimalDigitsTooltipText %}">',"<label>{%= $.decimalDigitsText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_decimalDigits" data-dojo-props="constraints:{min:-1,max:100,places:0}" data-dojo-attach-event="onChange:_onDecimalDigitsChange"></div>',"</div>",'<div class="editor-field" title="{%= $.strictTooltipText %}">',"<label>{%= $.strictText %}</label>",'<div data-dojo-attach-point="_strict" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onStrictChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_isReadOnly:null,_defaultDataBinding:null,_formatType:null,_maxLength:null,_required:null,_strict:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",formatTypeText:"Format Type:",formatTypeTooltipText:"Type of format to use when converting number to string.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",strictText:"Strict:",strictTooltipText:"Pads display of number with trailing zeros as necessary.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",numberFormatText:{Number:"Number",Percent:"Percent",Decimal:"Decimal",Scientific:"Scientific"},labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlId.set("value",this._designer.get("controlId")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._controlType.set("value",this._designer.get("controlName")),this._decimalDigits.set("value",this._designer.get("decimalDigits")),this._enabled.set("value",this._designer.get("enabled")),this._formatType.set("value",this._designer.get("formatType")),this._maxLength.set("value",this._designer.get("maxLength")),this._required.set("value",this._designer.get("required")),this._strict.set("value",this._designer.get("strict")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onControlTypeChange:function(a){},_onControlIdChange:function(a){},_onDefaultDataBindingChange:function(a){},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onDecimalDigitsChange:function(a){!this.isSuspended()&&this._decimalDigits.isValid()&&this._designer.set("decimalDigits",a)},_onFormatTypeChange:function(a){this.isSuspended()||this._designer.set("formatType",a)},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onMaxLengthChange:function(a){!this.isSuspended()&&this._maxLength.isValid()&&this._designer.set("maxLength",a)},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onStrictChange:function(a){this.isSuspended()||this._designer.set("strict",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/DataSourceDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/NonVisibleAdvancedPropertyEditor","dojo/i18n!./nls/DesignPanel"],function(a,b,c,d,e,f,g,h,i){return a("Sage.QuickForms.Design.DataSourceDesigner",[e,f,d,g],{designSupport:{visible:!1},editors:[h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div data-dojo-attach-point="containerNode">','<span data-dojo-attach-point="designCaptionNode"></span>',"</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"Data_Source_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFDataSource, Sage.Platform.QuickForms.QFControls",displayNameText:"Data Source",constructor:function(){c.mixin(this,i)},_setControlIdAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},startup:function(){this.inherited(arguments),this.set("designCaption",this.get("controlId"))}})})},"Sage/QuickForms/Design/CurrencyControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/CurrencyBasicPropertyEditor","./Editors/CurrencyAdvancedPropertyEditor","dojo/i18n!./nls/CurrencyControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.CurrencyControlDesigner",[e,f,d,g],{designSupport:{visible:!0},editors:[i,j,h],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<div class="{%= $.fieldClass %}-caption" data-dojo-attach-point="designCaptionNode"></div>','<div class="{%= $.fieldClass %}-field">','<span data-dojo-attach-point="designBindingNode"></span>',"</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-currency",helpTopicName:"Currency_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXCurrency, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Currency",constructor:function(){c.mixin(this,k)},_setCaptionAttr:function(a){this.inherited(arguments),this.set("designCaption",a)},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(a){return"Text"==a.ControlItemName})},_getControlLabelPlacementAttr:function(){return c.getObject("ControlLabelPlacement",!1,this.entry)},_setControlLabelPlacementAttr:function(a){c.setObject("ControlLabelPlacement",a,this.entry)},_getDecimalDigitsAttr:function(){return c.getObject("DecimalDigits",!1,this.entry)},_setDecimalDigitsAttr:function(a){c.setObject("DecimalDigits",a,this.entry)},_getDisplayCurrencyCodeAttr:function(){return c.getObject("DisplayCurrencyCode",!1,this.entry)},_setDisplayCurrencyCodeAttr:function(a){c.setObject("DisplayCurrencyCode",a,this.entry)},_getDisplayModeAttr:function(){return c.getObject("DisplayMode",!1,this.entry)},_setDisplayModeAttr:function(a){c.setObject("DisplayMode",a,this.entry)},_getExchangeRateTypeAttr:function(){return c.getObject("ExchangeRateType",!1,this.entry)},_setExchangeRateTypeAttr:function(a){c.setObject("ExchangeRateType",a,this.entry)},_getMaxLengthAttr:function(){return c.getObject("MaxLength",!1,this.entry)},_setMaxLengthAttr:function(a){c.setObject("MaxLength",a,this.entry)},_getRequiredAttr:function(){return c.getObject("Required",!1,this.entry)},_setRequiredAttr:function(a){c.setObject("Required",a,this.entry)},setupFor:function(a){this.inherited(arguments),this.set("decimalDigits",-1),this.set("currentCode",null),this.set("displayCurrencyCode",!0),this.set("displayMode","AsControl"),this.set("exchangeRateType","BaseRate"),this.set("maxLength",a.data.length||""),this.set("required",!1),this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:a.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]),this.set("designBinding",a.propertyPath||"")},startup:function(){this.inherited(arguments);var a=this.get("defaultDataBinding");this.set("designCaption",this.get("caption")),this.set("designBinding",a&&a.DataItemName||""),this.applyCaptionAlignment(),this.applyVisibility()}})})},"Sage/QuickForms/Design/Editors/CurrencyBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CurrencyBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.QuickForms.Design.Editors.CurrencyBasicPropertyEditor",[c,j,i],{widgetsInTemplate:!0,
contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.captionTooltipText %}">',"<label>{%= $.captionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_caption" data-dojo-attach-event="onChange:_onCaptionChange"></div>',"</div>",'<div class="editor-field" title="{%= $.captionAlignmentTooltipText %}">',"<label>{%= $.captionAlignmentText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_captionAlignment" data-dojo-attach-event="onChange:_onCaptionAlignmentChange">',"{% for (var alignment in $.alignmentText) { %}",'<span value="{%= alignment %}">{%= $.alignmentText[alignment] %}</span>',"{% } %}","</div>","</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.toolTipTooltipText %}">',"<label>{%= $.toolTipText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_toolTip" data-dojo-attach-event="onChange:_onToolTipChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.isReadOnlyTooltipText %}">',"<label>{%= $.isReadOnlyText %}</label>",'<div data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="_isReadOnly" data-dojo-attach-event="onChange:_onIsReadOnlyChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"},constructor:function(){b.mixin(this,l)},setup:function(){this.inherited(arguments),this._caption.set("value",this._designer.get("caption")),this._captionAlignment.set("value",this._designer.get("captionAlignment")),this._isReadOnly.set("value",this._designer.get("isReadOnly")),this._toolTip.set("value",this._designer.get("toolTip"))},_onCaptionChange:function(a){this.isSuspended()||this._designer.set("caption",a)},_onCaptionAlignmentChange:function(a){this.isSuspended()||this._designer.set("captionAlignment",a)},_onIsReadOnlyChange:function(a){this.isSuspended()||this._designer.set("isReadOnly",a)},_onToolTipChange:function(a){this.isSuspended()||this._designer.set("toolTip",a)}})})},"Sage/QuickForms/Design/Editors/CurrencyAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CurrencyAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.CurrencyAdvancedPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.displayModeTooltipText %}">',"<label>{%= $.displayModeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_displayMode" data-dojo-attach-event="onChange:_onDisplayModeChange">',"{% for (var type in $.displayTypeText) { %}",'<span value="{%= type %}">{%= $.displayTypeText[type] %}</span>',"{% } %}","</div>","</div>",'<div class="editor-field" title="{%= $.visibleTooltipText %}">',"<label>{%= $.visibleText %}</label>",'<div data-dojo-attach-point="_visible" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onVisibleChange"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlLabelPlacementTooltipText %}">',"<label>{%= $.controlLabelPlacementText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_controlLabelPlacement" data-dojo-attach-event="onChange:_onControlLabelPlacementChange">',"{% for (var placement in $.labelPlacementText) { %}",'<span value="{%= placement %}">{%= $.labelPlacementText[placement] %}</span>',"{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.decimalDigitsTooltipText %}">',"<label>{%= $.decimalDigitsText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_decimalDigits" data-dojo-props="constraints:{min:-1,max:100,places:0}" data-dojo-attach-event="onChange:_onDecimalDigitsChange"></div>',"</div>",'<div class="editor-field" title="{%= $.enabledTooltipText %}">',"<label>{%= $.enabledText %}</label>",'<div data-dojo-attach-point="_enabled" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onEnabledChange"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.maxLengthTooltipText %}">',"<label>{%= $.maxLengthText %}</label>",'<div data-dojo-attach-point="_maxLength" data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-event="onChange:_onMaxLengthChange" data-dojo-props="constraints:{min:-1,places:0}"></div>',"</div>",'<div class="editor-field" title="{%= $.requiredTooltipText %}">',"<label>{%= $.requiredText %}</label>",'<div data-dojo-attach-point="_required" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onRequiredChange"></div>',"</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.defaultDataBindingTooltipText %}">',"<label>{%= $.defaultDataBindingText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_defaultDataBinding" data-dojo-attach-event="onChange:_onDefaultDataBindingChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.exchangeRateTypeTooltipText %}">',"<label>{%= $.exchangeRateTypeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_exchangeRateType" data-dojo-attach-event="onChange:_onExchangeRateTypeChange">',"{% for (var rate in $.exchangeTypeText) { %}",'<span value="{%= rate %}">{%= $.exchangeTypeText[rate] %}</span>',"{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlIdTooltipText %}">',"<label>{%= $.controlIdText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlId" data-dojo-attach-event="onChange:_onControlIdChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.controlTypeTooltipText %}">',"<label>{%= $.controlTypeText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_controlType" data-dojo-attach-event="onChange:_onControlTypeChange" data-dojo-props="disabled:true"></div>',"</div>","</div>","</fieldset>"]),_controlId:null,_controlLabelPlacement:null,_controlType:null,_decimalDigits:null,_defaultDataBinding:null,_displayCurrencyCode:null,_displayMode:null,_enabled:null,_exchangeRateType:null,_maxLength:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",exchangeRateTypeText:"Exchange Rate Type:",exchangeRateTypeTooltipText:"Type of exchange rate to show in currency fields.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",displayTypeText:{AsHyperlink:"As Hyperlink",AsControl:"As Control",AsText:"As Text"},exchangeTypeText:{BaseRate:"Base Rate",OpportunityRate:"Opportunity Rate (Deprecated)",MyRate:"My Rate",SalesOrderRate:"Sales Order Rate (Deprecated)",EntityRate:"Entity Rate"},labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._controlId.set("value",this._designer.get("controlId")),this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement")),this._controlType.set("value",this._designer.get("controlName")),this._decimalDigits.set("value",this._designer.get("decimalDigits")),this._displayMode.set("value",this._designer.get("displayMode")),this._enabled.set("value",this._designer.get("enabled")),this._exchangeRateType.set("value",this._designer.get("exchangeRateType")),this._maxLength.set("value",this._designer.get("maxLength")),this._required.set("value",this._designer.get("required")),this._visible.set("value",this._designer.get("visible"));var a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",a&&a.DataItemName||"")},_onControlIdChange:function(a){},_onControlLabelPlacementChange:function(a){this.isSuspended()||this._designer.set("controlLabelPlacement",a)},_onControlTypeChange:function(a){},_onDecimalDigitsChange:function(a){!this.isSuspended()&&this._decimalDigits.isValid()&&this._designer.set("decimalDigits",a)},_onDefaultDataBindingChange:function(a){},_onDisplayModeChange:function(a){this.isSuspended()||this._designer.set("displayMode",a)},_onEnabledChange:function(a){this.isSuspended()||this._designer.set("enabled",a)},_onExchangeRateTypeChange:function(a){this.isSuspended()||this._designer.set("exchangeRateType",a)},_onMaxLengthChange:function(a){!this.isSuspended()&&this._maxLength.isValid()&&this._designer.set("maxLength",a)},_onRequiredChange:function(a){this.isSuspended()||this._designer.set("required",a)},_onVisibleChange:function(a){this.isSuspended()||this._designer.set("visible",a)}})})},"Sage/QuickForms/Design/EditableGridControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/GenericBasicPropertyEditor","./Editors/GenericAdvancedPropertyEditor","dojo/i18n!./nls/EditableGridControlDesigner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a("Sage.QuickForms.Design.EditableGridControlDesigner",[g,h,f,i],{designSupport:{visible:!0},editors:[k,l,j],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="{%= $.fieldClass %}" data-dojo-attach-point="containerNode">','<table class="{%= $.fieldClass %}-table" data-dojo-attach-point="tableNode">',"</table>","</div>"]),tableHeaderTemplate:new Simplate(["<th>{%: $.ColumnHeading || $.Text %}</th>"]),fieldClass:"design-editablegrid",helpTopicName:"visual_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.SDataGrid.QFSDataGrid, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Editable Grid",constructor:function(){c.mixin(this,m)},_getColumnsAttr:function(){return c.getObject("Columns",!1,this.entry)},_setColumnsAttr:function(a){c.setObject("Columns",a,this.entry)},renderColumns:function(){for(var a=this.get("columns"),b=d.create("tr"),e=0;e<a.length;e++){var f=c.clone(a[e]);f.widthStyle=f.Width>0?f.Width+"em":"auto",d.place(this.tableHeaderTemplate.apply(f,this),b,"last")}d.place(b,this.tableNode,"only")},startup:function(){this.inherited(arguments),this.renderColumns()}})})},"Sage/QuickForms/Design/FormDesigner":function(){define(["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./ControlDesignerRegistry","./RowDesigner","./ColumnDesigner","./Editors/FormBasicPropertyEditor","./Editors/FormAdvancedPropertyEditor","./Editors/FormUsagesPropertyEditor","dojo/i18n!./nls/FormDesigner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return c("Sage.QuickForms.Design.FormDesigner",[f],{entry:null,editors:[j,k,l],helpTopicName:"Form_properties",_controls:null,_rows:null,_columns:null,displayNameText:"Form",constructor:function(){d.mixin(this,m)},uninitialize:function(){this.inherited(arguments),e.forEach(this._controls,function(a){a.destroyRecursive()}),e.forEach(this._rows,function(a){a.destroyRecursive()}),e.forEach(this._columns,function(a){a.destroyRecursive()})},set:function(a,c){var e=this.inherited(arguments),f=this._getAttrNames(a),g=this[f.s];return d.isFunction(g)&&b.publish("/quickforms/design/designerModified",this,a,c,e,this),e},_getNameAttr:function(){return d.getObject("entity.Name",!1,this.entry)},_setNameAttr:function(a){d.setObject("entity.Name",a,this.entry)},_getDescriptionAttr:function(){return d.getObject("entity.Description",!1,this.entry)},_setDescriptionAttr:function(a){d.setObject("entity.Description",a,this.entry)},_getActiveControlAttr:function(){return d.getObject("entity.ActiveControl",!1,this.entry)},_setActiveControlAttr:function(a){d.setObject("entity.ActiveControl",a,this.entry)},_getUseEntityNameAsTitleAttr:function(){return d.getObject("entity.UseEntityNameAsTitle",!1,this.entry)},_setUseEntityNameAsTitleAttr:function(a){d.setObject("entity.UseEntityNameAsTitle",a,this.entry)},_getEtagAttr:function(){return d.getObject("etag",!1,this.entry)},_setEtagAttr:function(a){d.setObject("etag",a,this.entry)},_getRowsAttr:function(){return this._rows||(this._rows=this._createRowDesigners())},_getRowCountAttr:function(){return this.get("rows").length},_createRowDesigners:function(){var a=d.getObject("entity.Rows",!1,this.entry),b=[];return e.forEach(a,function(a,c){var d=new h({entry:a,form:this,index:c});b.push(d)},this),b},_getColumnsAttr:function(){return this._columns||(this._columns=this._createColumnDesigners())},_getColumnCountAttr:function(){return this.get("columns").length},_createColumnDesigners:function(){var a=d.getObject("entity.Columns",!1,this.entry),b=[];return e.forEach(a,function(a,c){var d=new i({entry:a,form:this,index:c});b.push(d)},this),b},_getControlsAttr:function(){return this._controls||(this._controls=this._createControlDesigners())},_createControlDesigners:function(){var a=d.getObject("entity.Controls",!1,this.entry),b=[];return e.forEach(a,function(a){var c=g.getDesignerFor(a);if(!c)throw new Error('Could not find designer for type: "'+a.$type+'".');var d=new c({entry:a,form:this});b.push(d)},this),b},addControl:function(a){var b=this.get("controls"),c=d.getObject("entity.Controls",!1,this.entry)||[];b.push(a),c.push(a.get("entry")),d.setObject("entity.Controls",c,this.entry)},addRow:function(a,b){var c=this.get("rows"),e=d.getObject("entity.Rows",!1,this.entry)||[];a.index=b||a.index||c.length;for(var f=a.index;f<c.length;f++)c[f].index+=1;c.splice(a.index,0,a),e.splice(a.index,0,a.get("entry")),d.setObject("entity.Rows",e,this.entry)},removeRow:function(a){for(var b=this.get("rows"),c=d.getObject("entity.Rows",!1,this.entry)||[],e=a;e<b.length;e++)b[e].index-=1;b.splice(a,1),c.splice(a,1)},addColumn:function(a,b){var c=this.get("columns"),e=d.getObject("entity.Columns",!1,this.entry)||[];a.index=b||a.index||c.length;for(var f=a.index;f<c.length;f++)c[f].index+=1;c.splice(a.index,0,a),e.splice(a.index,0,a.get("entry")),d.setObject("entity.Columns",e,this.entry)},removeColumn:function(a){for(var b=this.get("columns"),c=d.getObject("entity.Columns",!1,this.entry)||[],e=a;e<b.length;e++)b[e].index-=1;b.splice(a,1),c.splice(a,1)},createUniqueId:function(a){var b={},c=a,d=1;return e.forEach(this.get("controls"),function(e){var f=e.get("controlId");if(c==f)do{c=a+d++}while(b[c]);b[f]=!0}),c}})})},"Sage/QuickForms/Design/RowDesigner":function(){define(["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./Editors/RowBasicPropertyEditor","dojo/i18n!./nls/RowDesigner"],function(a,b,c,d,e,f,g,h){return c("Sage.QuickForms.Design.RowDesigner",[f],{entry:null,editors:[g],helpTopicName:"Row_properties",displayNameText:"Row",constructor:function(){d.mixin(this,h)},set:function(a,c){var e=this.inherited(arguments),f=this._getAttrNames(a),g=this[f.s];return d.isFunction(g)&&b.publish("/quickforms/design/designerModified",this,a,c,e,this),e}})})},"Sage/QuickForms/Design/Editors/RowBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/RowBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.RowBasicPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.indexTooltipText %}">',"<label>{%= $.indexText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_index" data-dojo-attach-event="onChange:_onIndexChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_index:null,titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._index.set("value",this._designer.get("index"))},_onIndexChange:function(a){}})})},"Sage/QuickForms/Design/ColumnDesigner":function(){define(["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./Editors/ColumnBasicPropertyEditor","dojo/i18n!./nls/ColumnDesigner"],function(a,b,c,d,e,f,g,h){return c("Sage.QuickForms.Design.ColumnDesigner",[f],{entry:null,editors:[g],helpTopicName:"Column_properties",displayNameText:"Column",constructor:function(){d.mixin(this,h)},set:function(a,c){var e=this.inherited(arguments),f=this._getAttrNames(a),g=this[f.s];return d.isFunction(g)&&b.publish("/quickforms/design/designerModified",this,a,c,e,this),e},_getWidthAttr:function(){return d.getObject("Width",!1,this.entry)},_setWidthAttr:function(a){d.setObject("Width",a,this.entry)},_getSizeTypeAttr:function(){return d.getObject("SizeType",!1,this.entry)},_setSizeTypeAttr:function(a){d.setObject("SizeType",a,this.entry)}})})},"Sage/QuickForms/Design/Editors/ColumnBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ColumnBasicPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.QuickForms.Design.Editors.ColumnBasicPropertyEditor",[c,i,h],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.indexTooltipText %}">',"<label>{%= $.indexText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_index" data-dojo-attach-event="onChange:_onIndexChange" data-dojo-props="disabled:true"></div>',"</div>",'<div class="editor-field" title="{%= $.widthTooltipText %}">',"<label>{%= $.widthText %}</label>",'<div data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_width" data-dojo-attach-event="onChange:_onWidthChange" required="true" data-dojo-props="constraints:{min:0}"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.sizeTypeTooltipText %}">',"<label>{%= $.sizeTypeText %}</label>",'<div data-dojo-type="dijit.form.Select" data-dojo-attach-point="_sizeType" data-dojo-attach-event="onChange:_onSizeTypeChange">',"{% for (var type in $.rowSizeTypeText) { %}",'<span value="{%= type %}">{%= $.rowSizeTypeText[type] %}</span>',"{% } %}","</div>","</div>","</div>","</fieldset>"]),_index:null,_width:null,_sizeType:null,titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",widthText:"Width:",widthTooltipText:"Width of this column of controls.",sizeTypeText:"Size Type:",sizeTypeTooltipText:"Method of sizing: Absolute, AutoSize, or Percent.",rowSizeTypeText:{Absolute:"Absolute",Percent:"Percent",AutoSize:"AutoSize"},constructor:function(){b.mixin(this,k)},setup:function(){this.inherited(arguments),this._index.set("value",this._designer.get("index")),this._width.set("value",this._designer.get("width")),this._sizeType.set("value",this._designer.get("sizeType"))},_onWidthChange:function(a){this.isSuspended()||this._designer.set("width",a)},_onSizeTypeChange:function(a){this.isSuspended()||this._designer.set("sizeType",a)},_onIndexChange:function(a){this.isSuspended()||this._designer.set("index",a)}})})},"Sage/QuickForms/Design/Editors/FormBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dojo/data/ItemFileWriteStore","Sage/_Templated","./_PropertyEditor","dojo/i18n!./nls/FormBasicPropertyEditor"],function(a,b,c,d,e,f,g,h){return a("Sage.QuickForms.Design.Editors.FormBasicPropertyEditor",[c,g,f],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.generalText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.activeControlTooltipText %}">',"<label>{%= $.activeControlText %}</label>",'<div data-dojo-type="dijit.form.ComboBox" data-dojo-attach-point="_activeControl" data-dojo-attach-event="onChange:_onActiveControlChange" data-dojo-props="disabled:true"></div>',"</div>",'<div class="editor-field" title="{%= $.nameTooltipText %}">',"<label>{%= $.nameText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_name" data-dojo-attach-event="onChange:_onNameChange" data-dojo-props="disabled:true"></div>',"</div>","</div>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.descriptionTooltipText %}">',"<label>{%= $.descriptionText %}</label>",'<div data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="_description" data-dojo-attach-event="onChange:_onDescriptionChange"></div>',"</div>","</div>","</fieldset>"]),_activeControl:null,_description:null,_name:null,titleText:"Basic",generalText:"General",activeControlText:"Active Control:",activeControlTooltipText:"The control the user's cursor starts on.",descriptionText:"Description:",descriptionTooltipText:"Optional description of the purpose of the form.",nameText:"Name:",nameTooltipText:"Form identifier used by the system.",constructor:function(){b.mixin(this,h)},setup:function(){this.inherited(arguments),this.setActiveControlList(),this._activeControl.set("value",this._designer.get("activeControl")),this._description.set("value",this._designer.get("description")),this._name.set("value",this._designer.get("name"))},setActiveControlList:function(){for(var a=this._designer.get("controls"),b=new e({data:{identifier:"key",label:"name",items:[]}}),c=0;c<a.length;c++){var d=a[c];d.entry&&d.entry.ControlId&&b.newItem({key:"control_"+c,name:d.entry.ControlId})}this._activeControl.set({store:b,disabled:!1})},_onActiveControlChange:function(a){this.isSuspended()||this._designer.set("activeControl",a)},_onNameChange:function(a){},_onDescriptionChange:function(a){this.isSuspended()||this._designer.set("description",a)}})})},"Sage/QuickForms/Design/Editors/FormAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/FormAdvancedPropertyEditor"],function(a,b,c,d,e,f,g,h,i,j){return a("Sage.QuickForms.Design.Editors.FormAdvancedPropertyEditor",[c,h,g],{widgetsInTemplate:!0,contentTemplate:new Simplate(["<fieldset><legend>{%= $.generalText %}</legend>",'<div class="editor-content-half">','<div class="editor-field" title="{%= $.useEntityNameAsTitleTooltipText %}">',"<label>{%= $.useEntityNameAsTitleText %}</label>",'<div data-dojo-attach-point="_useEntityNameAsTitle" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onChange:_onUseEntityNameAsTitleChange"></div>',"</div>","</div>",'<div class="editor-content-half">',"</div>","</fieldset>"]),_useEntityNameAsTitle:null,titleText:"Advanced",generalText:"General",useEntityNameAsTitleText:"Use Entity Name As Title:",useEntityNameAsTitleTooltipText:"Use name of current entity in form title.",constructor:function(){b.mixin(this,j)},setup:function(){this.inherited(arguments),this._useEntityNameAsTitle.set("value",this._designer.get("useEntityNameAsTitle"))},_onUseEntityNameAsTitleChange:function(a){this.isSuspended()||this._designer.set("useEntityNameAsTitle",a)}})})},"Sage/QuickForms/Design/Editors/FormUsagesPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojox/grid/EnhancedGrid","./_PropertyEditor","Sage/Services/_ServiceMixin","dojo/i18n!./nls/FormUsagesPropertyEditor"],function(a,b,c,d,e,f,g){return a("Sage.QuickForms.Design.Editors.FormUsagesPropertyEditor",[d,e,f],{serviceMap:{dataService:{type:"sdata",name:"metadata"}},titleText:"Usage",portalText:"Portal",viewText:"View",modesText:"Modes",descriptionText:"Description",selectionMode:"none",canSort:function(){return!1},constructor:function(){b.mixin(this,g)},setup:function(){this.inherited(arguments);var a=this._designer.get("name")||"",b=new Sage.Data.SDataStore({service:this.dataService,resourceKind:"formUsages",select:["showInMode","portalPage/portalAlias","portalPage/pagetitle","portalPage/description"],where:c.substitute('smartPartId eq "${0}"',[a])});this.setStore(b),this.set("structure",[{field:"portalPage.portalAlias",name:this.portalText,width:"auto"},{field:"portalPage.pagetitle",name:this.viewText,width:"auto"},{field:"showInMode",name:this.modesText,formatter:this.formatModes,width:"auto"},{field:"portalPage.description",name:this.descriptionText,width:"auto"}])},formatModes:function(a){return a?b.isArray(a)?a.join(", "):a:""}})})},"Sage/QuickForms/Design/NonVisibleControlContainer":function(){define(["dojo/query","dojo/topic","dojo/string","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/NodeList-traverse","dojo/NodeList-manipulate","dijit/registry","dijit/focus","dijit/layout/_LayoutWidget","Sage/_EventMapMixin","Sage/_Templated","dojo/i18n!./nls/NonVisibleControlContainer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return d("Sage.QuickForms.Design.NonVisibleControlContainer",[n,o,p],{events:{click:"_onClick",keydown:"_onKeyDown"},widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="design-hidden-container">','<div class="design-hidden-container-header dijit dijitToolbar">{%: $.headerText %}</div>','<div class="design-hidden-container-content" data-dojo-attach-point="containerNode"></div>',"<div>"]),_designGroup:null,_designGroupTopics:null,selections:null,singleSelection:!1,designGroup:"default",headerText:"Non-Visual Controls",_getDesignGroupAttr:function(){return this._designGroup},_setDesignGroupAttr:function(a){this._designGroupTopics&&e.forEach(this._designGroupTopics,function(a){this.unsubscribe(a)},this),this._designGroup=a,this._designGroupTopics=[this.subscribe(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected)]},constructor:function(){this.selections=[],f.mixin(this,q)},buildRendering:function(){this.inherited(arguments),h.set(this.domNode,"tabIndex",0)},_onKeyDown:function(a){},_handleSelectionFor:function(d,f){if(d){var g=e.indexOf(this.selections,d)>-1;f&&!this.singleSelection?g||(e.forEach(this.selections,function(b){a(b.domNode).attr("tabIndex","-1")}),this.selections.push(d),h.set(d.domNode,"tabIndex",0),m.focus(d.domNode),i.add(d.domNode,"design-hidden-item-selected"),this.onSelectionChanged(this.selections,!0),b.publish(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),d,!0,this)):(this._clearSelectionDom(),this._clearSelectionState(!1),this.selections=[d],h.set(d.domNode,"tabIndex",0),m.focus(d.domNode),i.add(d.domNode,"design-hidden-item-selected"),this.onSelectionChanged(this.selections),b.publish(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),d,!0,this))}else!this.singleSelection&&f||(this._clearSelectionDom(),this._clearSelectionState())},_onClick:function(b){var c=a(b.target).closest(".dijitLayoutContainer-child")[0],d=c&&l.byNode(c),e=b.shiftKey;this._handleSelectionFor(d,e)},onSelectionChanged:function(a,b){},_clearSelectionDom:function(){this.selections.length>0&&e.forEach(this.selections,function(b){a(b.domNode).attr("tabIndex","-1").removeClass("design-hidden-item-selected")})},_clearSelectionState:function(a){this.selections.length>0&&(this.selections=[],!1!==a&&(this.onSelectionChanged(this.selections),b.publish(c.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),!1,!1,this)))},_onDesignerSelected:function(a,b,c){a&&c!==this&&(this._clearSelectionDom(),this._clearSelectionState(!1))},clearSelections:function(){this._clearSelectionDom(),this._clearSelectionState()},clear:function(){this._clearSelectionState(),e.forEach(this.getChildren(),function(a){this.removeChild(a)},this),this.layout()}})})},"Sage/QuickForms/Design/PropertyEditorContainer":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dijit/layout/TabContainer","dijit/layout/BorderContainer","Sage/_EventMapMixin","Sage/_Templated","Sage/Utility","./ControlDesigner","./Help","dojo/i18n!./nls/PropertyEditorContainer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return b("Sage.QuickForms.Design.PropertyEditorContainer",[h,j],{widgetsInTemplate:!0,contentTemplate:new Simplate(['<div class="design-editor-container-toolbar" data-dojo-type="dijit.Toolbar" data-dojo-props="region: \'top\', align: \'right\', splitter: false">','<span class="design-editor-title" data-dojo-attach-point="titleNode"></span>','<div data-dojo-type="Sage.UI.ImageButton" icon="images/icons/Help_16x16.png" tooltip="{%: $.helpText %}" data-dojo-attach-event="onClick:help" class="design-panel-help"></div>',"</div>",'<div data-dojo-type="dijit.layout.TabContainer" data-dojo-attach-point="editorTabContainer" data-dojo-props="region: \'center\'"></div>']),_setTitleAttr:{node:"titleNode",type:"innerText"},_designGroup:null,_designGroupTopics:null,_designer:null,_designerSource:null,editorTabContainer:null,titleNode:null,helpTopicName:"webFormDesigner",helpSubSystemName:"WebForms",designGroup:"default",specificTitleFormatText:"${0} Properties (${1})",genericTitleFormatText:"${0} Properties",constructor:function(){d.mixin(this,n)},_getDesignGroupAttr:function(){
return this._designGroup},_setDesignGroupAttr:function(b){this._designGroupTopics&&c.forEach(this._designGroupTopics,function(a){this.unsubscribe(a)},this),this._designGroup=b,this._designGroupTopics=[this.subscribe(a.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected),this.subscribe(a.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),this._onDesignerMoved)]},help:function(){this._designer?m.open(this._designer.helpTopicName,this.helpSubSystemName):m.open(this.helpTopicName,this.helpSubSystemName)},buildRendering:function(){this.inherited(arguments),e.add(this.domNode,"design-editor-container")},uninitialize:function(){this.inherited(arguments)},clear:function(){c.forEach(this.editorTabContainer.getChildren(),function(a){this.editorTabContainer.removeChild(a),a.destroyRecursive(!1)},this),this._designer=null,this.set("title",""),this.layout()},_setDesignerAttr:function(b,d){if(b!==this._designer){var e,f=this.editorTabContainer.selectedChildWidget&&this.editorTabContainer.selectedChildWidget.constructor;this.clear(),c.forEach(b.editors,function(a){var b=new a({});this.editorTabContainer.addChild(b),a===f&&(e=b)},this),b.get("controlId")?this.set("title",a.substitute(this.specificTitleFormatText,[b.displayNameText,b.get("controlId")])):this.set("title",a.substitute(this.genericTitleFormatText,[b.displayNameText])),this._designer=b,this._designerSource=d,e&&this.editorTabContainer.selectChild(e),this.layout(),c.forEach(this.editorTabContainer.getChildren(),function(a){a.set("designer",this._designer)},this)}},_getDesignerAttr:function(){return this._designer},_onDesignerSelected:function(a,b,c){a&&a.editors?this.set("designer",a,c):this.clear()},_onDesignerMoved:function(a,b){a===this._designer&&c.forEach(this.editorTabContainer.getChildren(),function(a){a.set("designer",this._designer)},this)}})})},"Sage/MainView/GroupManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/MainView/GroupMgr/GroupManagerGroupContextService","Sage/MainView/GroupMgr/FilterConfigurationProvider","dojo/_base/declare","Sage/MainView/GroupMgr/GroupManagerActions"],function(a,b,c,d){return d("Sage.MainView.GroupManager",a,{_currentTabId:!1,_currentTabDescription:!1,_mainViewName:"GroupManager",store:!1,constructor:function(a){var c=Sage.Services.getService("ClientGroupContext");c&&"Sage.MainView.GroupMgr.GroupManagerGroupContextService"===c.declaredClass||(c=new b,Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",c));var d=c.getContext();this._currentTabId=d.CurrentGroupID,this._currentTabDescription=d.CurrentName,this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"},dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged")},_getListPanelConfig:function(){var a=Sage.Services.getService("ClientGroupContext");return a&&(this.listPanelConfiguration=a.getCurrentListConfig(),this.store=this.listPanelConfiguration.list.store,this.service=this.listPanelConfiguration.list.store.service),this.listPanelConfiguration},requestConfiguration:function(a){a.success&&a.success.call(a.scope||this,this._getListPanelConfig(),this)},requestTitlePaneConfiguration:function(a){a.success&&a.success.call(a.scope||this,this.titlePaneConfiguration,this)},_getTabsConfig:function(){return{store:!1,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:!1,showTabContextMenus:!1}},_getStaticTabs:function(){return Sage.Services.getService("ClientGroupContext").getStaticTabs()},_onTabSelected:function(a){var b=Sage.Services.getService("ClientGroupContext");if(b){var c=b.getContext(),d=a.id||a;if(c.CurrentGroupID===d)return;b._currentListConfiguration=null,b.setCurrentGroup(d,a.title)}},_onCurrentGroupChanged:function(a){var b=a.current;this._currentTabId=b.CurrentGroupID,this._currentTabDescription=b.CurrentName,dijit.byId("GroupTabs").selectedChildWidget.id!==b.CurrentGroupID&&dijit.byId("GroupTabs").selectChild(b.CurrentGroupID)},_getMenuConfig:function(){return!1}})})},"Sage/MainView/GroupMgr/GroupManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/GroupMgr/GroupsListPanelConfig","Sage/MainView/GroupMgr/ReleasesListPanelConfig","Sage/MainView/GroupMgr/StatisticsListPanelConfig","dojo/_base/declare","dojo/i18n!./nls/GroupManagerGroupContextService","Sage/Services/RoleSecurityService"],function(a,b,c,d,e,f,g,h,i){var j=h("Sage.MainView.GroupMgr.GroupManagerGroupContextService",a,{_currentContext:null,_currentTabId:!1,_currentTabDescription:!1,_currentListConfiguration:!1,defaultTabId:"all_groups",staticTabsConfiguration:[],_configsHash:!1,_LOCALSTORE_NAMESPACE:"GroupManagerView",_STORE_KEY_LASTAB:"_GroupManagerLASTTAB",_Group_FILTERS_KEY:"_GroupManagerFILTERS",_tabNameCache:{},constructor:function(){this.inherited(arguments);var a=Sage.Services.getService("RoleSecurityService");a?a.hasAccess("Administration/GroupManager/View")?(this._addConfig(0),this._addConfig(1),this._addConfig(2)):(a.hasAccess("Administration/GroupManager/Groups/View")&&this._addConfig(0),a.hasAccess("Administration/GroupManager/Shared/View")&&this._addConfig(1),a.hasAccess("Administration/GroupManager/UsageStatistics/View")&&this._addConfig(2)):(this._addConfig(0),this._addConfig(1),this._addConfig(2)),this._currentContext={},dojo.mixin(this._currentContext,this._emptyContext),this._currentContext.CurrentTableKeyField="$key",this._currentContext.AppliedFilterInfo={},this._currentContext.CurrentFamily=null,this._currentContext.notGroupBased=!0;var c;c=Sage.Utility.getParameterByName("groupId",document.location.href),c=c&&this._validateTabId(c)?c:this._getDefaultTabId();var d=this.getGroupName(c);this.setContext(c,d),this.unsubscribeConnects(),this._subscribes=[],this._subscribes.push(dojo.subscribe(b.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh)),this._onDefaultFilterLoad()},getStaticTabs:function(){return this.staticTabsConfiguration},setCurrentGroup:function(a,b,c){this._currentContext.CurrentGroupID!==a&&(this._currentContext.CurrentTableKeyField=c||this.getKeyField(a),this.setContext(a,b||this.getGroupName(a)),this.onCurrentGroupChanged({current:this._currentContext}))},getContext:function(){return this._currentContext},_addConfig:function(a){switch(a){case 0:this.staticTabsConfiguration.push({key:"all_groups",descriptor:i.AllGroups,keyField:"$key",configProviderType:e,entityName:"groups",isNonEntityBased:!0});break;case 1:this.staticTabsConfiguration.push({key:"releases",descriptor:i.Shares,keyField:"$key",configProviderType:f,entityName:"groupReleasesView",isNonEntityBased:!1});break;case 2:this.staticTabsConfiguration.push({key:"statistics",descriptor:i.UsageStatistics,keyField:"$key",configProviderType:g,entityName:"groupStatisticsView",isNonEntityBased:!1})}},_ensureConfigsHash:function(){if(!this._configsHash){for(var a={},b=0;b<this.staticTabsConfiguration.length;b++){var c=this.staticTabsConfiguration[b];a[c.key]=d.mixin(c,c.instance?null:{instance:!1})}this.configsHash=a}},_setListConfig:function(){this._ensureConfigsHash();var a=this._currentContext.CurrentGroupID,b=this.configsHash.hasOwnProperty(a)?this.configsHash[a]:this.configsHash.groups;void 0!==b&&b&&(b.instance?b.instance.rebuild():b.instance=new b.configProviderType,this._currentListConfiguration=b.instance,this._currentListConfiguration.isNonEntityBased=b.isNonEntityBased,this._currentListConfiguration.entityName=b.entityName)},getCurrentListConfig:function(){return this._setListConfig(),this._currentListConfiguration},getKeyField:function(a){this._ensureConfigsHash();var b="$key";return this.configsHash[a]&&(b=this.configsHash[a].keyField||"$key"),b},getGroupName:function(a){this._ensureConfigsHash();var b="default";return this.configsHash[a]&&(b=this.configsHash[a].descriptor||"default"),b},onCurrentGroupChanged:function(a){this._clearFilterManager();var b=this;this._onDefaultFilterLoad(function(){dojo.publish("/group/context/changed",[a,b]),b._saveToLocalStorage(b._STORE_KEY_LASTAB,b.getContext().CurrentGroupID)})},_clearFilterManager:function(){dojo.publish("/ui/filters/default/apply",[{},{},this])},setContext:function(a,b){this._currentContext.CurrentGroupID=a,this._currentContext.CurrentName=b,this._currentContext.AppliedFilterInfo={},this._currentContext.filtersForEntity="",this._setListConfig(),this._currentContext.CurrentEntity=this._currentListConfiguration.entityName,this._currentContext.isNonEntityBased=this._currentListConfiguration.isNonEntityBased,this._isRetrievingContext=!1,this.onContextSet(this._currentContext)},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},_onDefaultFilterLoad:function(a){this._requestGroupFilters(a)},_requestGroupFilters:function(a){var b=this.getContext(),d=this,e=c.getSDataService("system"),f=new Sage.SData.Client.SDataResourcePropertyRequest(e);f.setResourceKind("groups"),f.setResourceProperty("$queries/filters"),f.setQueryArg("count",20),f.readFeed({success:function(c){c&&(b.filtersForEntity=dojo.toJson(c.$resources),d._requestFilters(a))},error:function(a){},scope:this,async:!1})},_requestFilters:function(a){var b=this.getContext(),e=c.getSDataService("system"),f={$name:"getEntityFilters",request:{entityName:b.CurrentEntity,key:b.CurrentGroupID,isNonEntityBased:b.isNonEntityBased,filtersForEntity:b.filtersForEntity}},g=new Sage.SData.Client.SDataServiceOperationRequest(e);g.setOperationName("getEntityFilters"),g.execute(f,{success:d.hitch(this,function(b){try{b.response.appliedFilterInfo&&(this._currentContext.AppliedFilterInfo.applied=b.response.appliedFilterInfo.applied,this._currentContext.AppliedFilterInfo.definitionSet=b.response.appliedFilterInfo.definitionSet),a&&a()}catch(a){}}),failure:function(a){},async:!1})},_onDefaultFilterRefresh:function(a,b,d){var e=this.getContext(),f=c.getSDataService("system"),g={$name:"applyFilterToEntity",request:{entityName:e.CurrentEntity,filter:dojo.toJson(d.createValueSet()),key:e.CurrentGroupID,isNonEntityBased:e.isNonEntityBased,filtersForEntity:e.filtersForEntity}};new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("applyFilterToEntity").execute(g,{})},_saveToLocalStorage:function(a,b,c){this._saveToSessionStorage(a,b,c)},_getFromLocalStorage:function(a,b){return this._getFromSessionStorage(a,b)},_getFromSessionStorage:function(a,b){b||(b=this._LOCALSTORE_NAMESPACE);var c=b+"_"+a;return sessionStorage.getItem(c)},_saveToSessionStorage:function(a,b,c){c||(c=this._LOCALSTORE_NAMESPACE);var d=c+"_"+a;sessionStorage.setItem(d,b)},_getDefaultTabId:function(){var a=this._getUrlTabId();if(a&&(a=this._validateTabId(a)))return a;var b=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(b&&(this.defaultTabId=b),!this._configsHash)for(var c=0;c<this.staticTabsConfiguration;c++)if(this.defaultTabId===this.staticTabsConfiguration[c].key)return this.defaultTabId;return this.defaultTabId},_getUrlTabId:function(){var a=!1,b="[\\?&]tabId=([^%#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d&&(a=d[1]),a},_validateTabId:function(a){if(a)for(var b=0;b<this.staticTabsConfiguration.length;b++){var c=this.staticTabsConfiguration[b];if(c.key.toUpperCase()===a.toUpperCase())return c.key}return null}});if(Sage.Services.hasService("ClientGroupContext")){var k=Sage.Services.getService("ClientGroupContext");"Sage.MainView.GroupMgr.GroupManagerGroupContextService"!==k.declaredClass&&(k.unsubscribeConnects(),Sage.Services.removeService("ClientGroupContext"),Sage.Services.addService("ClientGroupContext",new j))}else Sage.Services.addService("ClientGroupContext",new j);return j})},"Sage/MainView/GroupMgr/GroupsListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/GroupsListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/GridParts/Columns/Boolean","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Numeric","Sage/UI/Controls/GridParts/Columns/SlxUser","dojo/_base/lang","dijit/registry","Sage/MainView/GroupMgr/GroupManagerActions","Sage/MainView/GroupMgr/GroupManagerFormatter","Sage/Utility/_LocalStorageMixin","dojo/i18n!./templates/nls/GroupsListSummary","dojo/i18n!./templates/nls/GroupDetailSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return c("Sage.MainView.GroupMgr.GroupsListPanelConfig",[a],{keyField:"$key",_listId:"all_groups",_resourceKind:"groups",_contextMenu:"GroupManagerListContextMenu",_currentListContextSubMenu:"GroupsListContextMenu",defaultSelectFirst:!0,constructor:function(){this.inherited(arguments),j.mixin(this,d),this.detailStateKey="GroupMgrShowDetail",this._service=e.getSDataService("system"),this._structure=this._getStructure(),this._select=this._getSelect(),this._where=this._getWhere(),this._sort=this._getSort(),this.sort=this._getSort(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.list.selectionMode="multiple",l.initShowHideDetail(this)},_getShowDetail:function(){if(this.detailStateKey){var a=sessionStorage.getItem(this.detailStateKey);return null===a?"true":a}return"true"},_getStructure:function(){return[{field:"family",label:d.Family,width:"50px",formatter:m.formatProperCase},{field:"name",label:d.Name,width:"90px"},{field:"displayName",label:d.DisplayName,width:"90px"},{field:"isAdHoc",label:d.AdHoc,width:"30px",type:f},{field:"createDate",label:d.CreateDate,width:"70px",type:g},{field:"modifyDate",label:d.ModifyDate,width:"70px",type:g},{field:"releasedDate",label:d.SharedDate,width:"70px",type:g},{field:"userId",label:d.Owner,width:"50px",formatter:m.formatOwnerName},{field:"groupAuthor",label:d.Author,width:"50px"},{field:"company",label:d.Company,width:"50px"},{field:"companyVersion",label:d.Version,width:"50px",type:h},{field:"isDeveloperVersion",label:d.Dev,width:"30px",type:f},{field:"released",label:d.Rel,width:"30px",type:f},{field:"isUserDefault",label:d.UserDefault,width:"50px",type:f,sortable:!1}]},_getSelect:function(){return["isDeveloperVersion","released","family","name","displayName","createDate","modifyDate","releasedDate","groupAuthor","company","companyVersion","userId","maintable","dataCode","isAdHoc","basedOn","entityName","isUserDefault"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"isDeveloperVersion",descending:!0},{attribute:"family",descending:!1},{attribute:"displayName",descending:!1},{attribute:"name",descending:!1}]},_getInclude:function(){return[]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["legacyType","displayName","mainTable","createUser","createDate","modifyUser","modifyDate","releasedDate","name","isUserDefault"],include:[],sort:this._getSort(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/GroupMgr/templates/GroupsListSummary.html",resetDataManager:!0,requestConfiguration:a,serviceName:"system"})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["isDeveloperVersion","released","family","displayName","createDate","createUser","modifyDate","modifyUser","releasedDate","groupAuthor","company","companyVersion","userId","legacyType","mainTable","dataCode","keyField","entityName","isHidden","isAdHoc","description","installationDate","isUserDefault"],include:[],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/GroupMgr/templates/GroupDetailSummary.html",serviceName:"system"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/GroupMgr/GroupsSDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.MainView.GroupMgr.GroupsSDataSummaryFormatterScope",[c],{constructor:function(a){this.inherited(arguments),dojo.mixin(this,a),this.widgets=[],this.preFetchResources(),this._setupDataManager()},_setupDataManager:function(){this.dataManager=new d(this.requestConfiguration),Sage.Services.hasService("SummaryViewDataManager")&&Sage.Services.removeService("SummaryViewDataManager"),Sage.Services.addService("SummaryViewDataManager",this.dataManager)}})})},"Sage/MainView/GroupMgr/GroupsSDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){var e=c("Sage.MainView.GroupMgr.GroupsSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:!1,include:[],service:null,constructor:function(a){d.mixin(this,a),this.requestHash={},this.fetching=!1;var b=void 0!==a&&null!==a?a.serviceName||"system":"system";this.service=Sage.Data.SDataServiceRegistry.getSDataService(b)},add:function(a,b){var c=this.requestHash[a];if(c&&c.id!==b.id){c.duplicates||(c.duplicates=[]);for(var d=!1,e=0;e<c.duplicates.length;e++)c.duplicates[e].context.id===b.id&&(d=!0);d||c.duplicates.push({id:b.id,context:b})}else this.requestHash[a]=b},send:function(a,b){this.fetching=!0;var c=this,e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind);for(var f in this.requestHash)e.setResourceSelector("'"+f+"'");e.setQueryArg("include",this.include.join(",")),e.read({success:d.hitch(b,a,c),failure:d.hitch(this,this.requestFailed,c)})},requestFailed:function(a,b,c){}});return c("Sage.MainView.GroupMgr.GroupsSDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new e,this.requestTimeout=!1},requestDataNoWait:function(a,b,c){var d=new e(c);c.keyField&&(this.keyField=c.keyField),d.select=c.select,d.resourceKind=c.resourceKind,d.serviceName=c.serviceName,d.include=c.include,d.useBatchRequest=c.useBatchRequest,null!==c.expandRecurrences&&(d.expandRecurrences=c.expandRecurrences),d.add(a,b),d.send(this.receiveData,this)},receiveData:function(a,b){var c=b,e=c.id;if(e||(e=c[this.keyField],c.id=e),"groupReleasesView"===a.resourceKind){var f=Sage.Services.getService("UserOptions");f&&f.getByCategory("MainView",function(a){var b,d,f=a.$resources;for(b=0;b<f.length;b++)if(d=f[b],"HiddenGroups"===d.name){c.IsHidden=d.value.indexOf(e)>=0||d.value.indexOf(c.BasedOn)>=0;break}},this)}var g=a.requestHash[c.id];if(g&&d.isArray(g._attachPoints)&&g._attachPoints.length>0)try{g.applied||(g.applied=!0,g.set("entity",c))}catch(a){}}})})},"Sage/UI/Controls/GridParts/Columns/Boolean":function(){define(["dojo/i18n","Sage/Utility","dojo/i18n!../../../nls/Boolean","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){return d("Sage.UI.Controls.GridParts.Columns.Boolean",null,{constructor:function(a){e.mixin(this,c),e.mixin(this,a),this.inherited(arguments)},format:function(a){var c={T:!0,t:!0,Y:!0,y:!0,1:!0,"+":!0,true:!0};if(!this.formatString)return a in c?this.yesText:this.noText;var d=this.formatString.split("/");if(d.length&&2===d.length){var e=a in c?d[0]:d[1];return e?b.htmlEncode(e):a in c?this.yesText:this.noText}return a in c?this.yesText:this.noText}})})},"Sage/UI/Controls/GridParts/Columns/Numeric":function(){define(["Sage/UI/Controls/Numeric","dojo/_base/declare","dojo/_base/lang"],function(a,b,c){return b("Sage.UI.Controls.GridParts.Columns.Numeric",null,{constructor:function(a){c.mixin(this,a),c.mixin(this,a.editorArgs)},widgetClass:a,isWholeNumberPercent:!1,format:function(a){var b=[];if(0===a||null===a)return 0;if(this.isWholeNumberPercent&&"Percent"===this.formatType&&(a=Math.round(100*a)/1e4),this.displayFormatString&&""!==this.displayFormatString){this.displayFields.length<1&&b.push(a);for(var d=0;d<this.displayFields.length;d++);return a=Sage.Format.stringFromArray(this.displayFormatString,b)}if("Percent"===this.formatType&&(this.constraints.type="percent",this.constraints.round=0),a=dojo.number.format(a,c.mixin(this.constraints,{locale:Sys.CultureInfo.CurrentCulture.name})),this.constraints&&0===this.constraints.places&&-1===this.constraints.round&&a.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)>-1&&(a=a.slice(0,a.length-1)),this.abbreviationLength){a=Sage.Format.abbreviationFormatter(this.abbreviationLength)(a)}return a}})})},"Sage/UI/Controls/GridParts/Columns/SlxUser":function(){define(["dijit/_Widget","dijit/form/FilteringSelect","dojo/_base/declare","Sage/Utility","dojo/_base/lang"],function(a,b,c,d,e){return c("Sage.UI.Controls.GridParts.Columns.SlxUser",null,{field:"",constructor:function(a){e.mixin(this,a)},format:function(a,b){if(b){var c=b[this.field],e=c?d.getUserName(c):"";return d.htmlEncode(e)}}})})},"Sage/MainView/GroupMgr/GroupManagerActions":function(){define(["dojo/_base/declare","dojo/_base/lang","Sage/UI/Dialogs","dojo/i18n!./nls/GroupManagerActions","dojo/string","dojo/_base/Deferred","Sage/Groups/GroupManager","Sage/Utility/Jobs","Sage/UI/SDataLookup","Sage/Data/SDataServiceRegistry","Sage/Services/RoleSecurityService"],function(a,b,c,d,e,f,g,h,i,j){return Sage.namespace("Sage.MainView.GroupMgr.GroupManagerActions"),dojo.mixin(Sage.MainView.GroupMgr.GroupManagerActions,{_currentUserId:!1,DeleteKind:{Group:0,Release:1,Statistics:2},_batchDelete:function(a,b,c,d,f){var g=j.getSDataService(a,!1,!0,!1),h=new Sage.SData.Client.SDataBatchRequest(g);h.setResourceKind(b),h.setQueryArg("_allowBasedOn","T"),h.using(function(){for(var a=0;a<d.selections.length;a++){var f=new Sage.SData.Client.SDataSingleResourceRequest(g);f.setResourceKind(b),f.setResourceSelector(e.substitute("${0}'${1}'",[c||"",d.selections[a].id])),f.delete({},{scope:this,ignoreETag:!0})}}),h.commit({scope:this,ignoreETag:!0,success:function(a){f&&f.callback(a)},failure:function(a,b){f&&f.errback(a,b)}})},_canModifyGroup:function(a){if(a&&a.selectionCount>=1){var b=a.selections[0];if(b.entity){if(b.entity.basedOn&&""!==b.entity.basedOn)return c.showInfo(d.InvalidSelectedGroup),!1;if(!1===b.entity.isDeveloperVersion)return c.showInfo(d.NotDeveloperGroup),!1;var e=this._getCurrentUserId();return!e||"ADMIN"===e.toUpperCase()||!b.entity.userId||e===b.entity.userId.toUpperCase()||(c.showInfo(d.NotGroupOwner),!1)}}return!1},_delete:function(a){var b=dijit.byId("list");if(b){var e=b.getSelectionInfo(!0);if(e&&e.selectionCount>=1){var g,h,i,j;switch(a){case this.DeleteKind.Group:if(!this._canModifyGroup(e))return;g="system",h="groups",i=null,j=d.ConfirmDeletionMsgSelectedGroups;break;case this.DeleteKind.Release:g="system",h="groups",i=null,j=d.ConfirmDeletionMsgSelectedReleases;break;case this.DeleteKind.Statistics:g="dynamic",h="groupStatistics",i="PluginId eq ",j=d.ConfirmResetMsgSelectedStatics;break;default:return}var k=this;c.raiseQueryDialog("Infor CRM",j,function(a){if(a){var c=new f;k._batchDelete(g,h,i,e,c),c.then(function(a){b&&b.refreshView("groups")},function(a,b){})}},d.Yes,d.No)}else c.showInfo(d.SelectRecordMsg)}},_getSelectedId:function(){var a=Sage.Utility.getSelectionInfo();return a&&1===a.selectedIds.length?a.selectedIds[0]:null},_getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},_getCurrentUserId:function(){if(this._currentUserId)return this._currentUserId;var a=Sage.Services.getService("ClientContextService");if(a&&a.containsKey("userID")){var b=a.getValue("userID");b&&(this._currentUserId=b.trim())}return this._currentUserId},_assignOwner:function(a,b){var c=j.getSDataService("system"),d=new Sage.SData.Client.SDataServiceOperationRequest(c),e="assignOwner";d.setResourceKind("groups"),d.setOperationName(e);var f={$name:e,request:{userId:a,groupIds:b.selectedIds}};d.execute(f,{success:function(a){var b=dijit.byId("list");b&&b.refreshView("groups")},failure:function(a,b){},scope:this})},_toggleUserDefault:function(a){var b=j.getSDataService("system"),c=new Sage.SData.Client.SDataServiceOperationRequest(b),d="toggleUserDefault";c.setResourceKind("groups"),c.setOperationName(d);var e={$name:d,request:{groupIds:a.selectedIds}};c.execute(e,{success:function(a){var b=dijit.byId("list");b&&b.refreshView("groups")},failure:function(a,b){},scope:this})},assignGroupOwner:function(){var a=dijit.byId("list");if(a){var b=a.getSelectionInfo(!0);if(b&&b.selectionCount>=1){if(!this._canModifyGroup(b))return;if(b.selections[0].entity){var e,f={id:"UserLookup",structure:[{label:d.FirstName,field:"UserInfo.FirstName",sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""},{label:d.LastName,field:"UserInfo.LastName",sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""},{label:d.UserName,field:"UserName",sortable:!0,width:"75px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""},{label:d.Type,field:"Type",sortable:!0,width:"100px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",include:["UserInfo"],sort:[{attribute:"UserInfo.UserName"}],where:"Type ne 5 and Type ne 6"},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:d.SelectOwner,dialogButtonText:d.OK},g=this,h=function(a){a&&g._assignOwner(a[0].$key,b)},j=function(){e.destroyRecursive()};e=dijit.byId("UserLookup"),e&&e.destroyRecursive(),e=new i(f),e.onDoubleClick=function(a){e.doSelected(a)},e.doSelected=function(a){dojo.disconnect(k),h(a),dojo.isObject(e.lookupDialog)&&dojo.isFunction(e.lookupDialog.hide)&&e.lookupDialog.hide(),e.destroyRecursive()},e.showLookup();var k=dojo.connect(e.lookupDialog,"onHide",function(){dojo.disconnect(k),j(),e.destroyRecursive()})}}else c.showInfo(d.SelectRecordMsg)}},deleteGroup:function(){this._delete(this.DeleteKind.Group)},deleteReleases:function(){this._delete(this.DeleteKind.Release)},deleteStatistics:function(){this._delete(this.DeleteKind.Statistics)},disableStatistics:function(){c.showInfo("Not implemented.")},editGroup:function(){var a=dijit.byId("list");if(a){var b=a.getSelectionInfo(!0);if(b&&1==b.selectionCount){if(!this._canModifyGroup(b))return;var f=e.substitute("QueryBuilderMain.aspx?gid=${groupid}&mode=${family}",{groupid:b.selections[0].id,family:b.selections[0].entity.family}),g=Sage.Groups.GroupManager.QB_WIDTH,h=Sage.Groups.GroupManager.QB_HEIGHT;window.open(f,"EditGroup",e.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:g,height:h}))}else c.showInfo(d.SelectRecordMsgSingle)}},exportToExcel:function(){c.showInfo("Not implemented.")},exportToPdf:function(){c.showInfo("Not implemented.")},initShowHideDetail:function(a){var c=dijit.byId("list");if(c)var d=dojo.connect(c._listGrid,"_onFetchComplete",c,b.hitch(c,function(){dojo.disconnect(d),"true"===a._getShowDetail()?(c.detailVisible||c.toggleDetail(),c._onSelectedInList(0)):c.detailVisible&&c.toggleDetail()}))},shareGroup:function(){var a=dijit.byId("list");if(a){var b=a.getSelectionInfo(!0);if(b&&1==b.selectionCount){if(!this._canModifyGroup(b))return;var f=e.substitute("ShareGroup.aspx?gid=${groupid}",{groupid:b.selections[0].id});window.open(f,"ShareGroup","resizable=yes,centerscreen=yes,width=500,height=450,status=no,toolbar=no,scrollbars=yes")}else c.showInfo(d.SelectRecordMsgSingle)}},viewGroup:function(){var a=dijit.byId("list");if(a){var b=a.getSelectionInfo(!0);b&&1==b.selectionCount?window.location.href=e.substitute("${mainTable}.aspx?gid=${groupid}&mode=list",{mainTable:b.selections[0].entity.entityName,groupid:b.selections[0].id}):c.showInfo(d.SelectRecordMsgSingle)}},toggleUserDefault:function(){var a=dijit.byId("list");if(a){var b=a.getSelectionInfo(!0);if(b&&b.selectionCount>=1){if(!this._canModifyGroup(b))return;this._toggleUserDefault(b)}else c.showInfo(d.SelectRecordMsg)}}}),Sage.MainView.GroupMgr.GroupManagerActions})},"Sage/MainView/GroupMgr/GroupManagerFormatter":function(){define(["Sage/Utility","dojo/date/locale","dojo/i18n!./nls/GroupManagerFormatter"],function(a,b,c){return Sage.namespace("Sage.MainView.GroupMgr.GroupManagerFormatter"),dojo.mixin(Sage.MainView.GroupMgr.GroupManagerFormatter,{_isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},formatLegacyType:function(a){if(a&&Sage.MainView.GroupMgr.GroupManagerFormatter._isNumeric(a))switch(a){case 8:return c.ACOGroup;case 23:return c.Group}return c.Unknown},formatDate:function(c){if(a.Convert.isDateString(c)){var d=a.Convert.toDateFromString(c);return b.format(d,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return""},formatBoolean:function(a){return!a||!0!==a&&"True"!==a?c.No:c.Yes},formatGetUserById:function(b){return b?a.getUserName(b):""},formatProperCase:function(a){return"string"==typeof a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""},formatOwnerName:function(b){if(b){var c=a.getOwnerName(b);if(c!==b)return a.htmlEncode(c);var d=a.getUserName(b);return d?a.htmlEncode(d):b}return b},formatInteger:function(a){return!a||isNaN(a)?0:a}}),Sage.MainView.GroupMgr.GroupManagerFormatter})},"Sage/MainView/GroupMgr/ReleasesListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/ReleasesListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/GridParts/Columns/Boolean","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Numeric","Sage/UI/Controls/GridParts/Columns/SlxUser","dojo/_base/lang","Sage/MainView/GroupMgr/GroupManagerActions","Sage/MainView/GroupMgr/GroupManagerFormatter","dojo/i18n!./templates/nls/ReleasesListSummary","dojo/i18n!./templates/nls/ReleasesDetailSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l){return c("Sage.MainView.GroupMgr.ReleasesListPanelConfig",[a],{keyField:"$key",_listId:"releases",_resourceKind:"groupReleasesView",_contextMenu:"GroupManagerListContextMenu",_currentListContextSubMenu:"SharesListContextMenu",defaultSelectFirst:!0,constructor:function(){this.inherited(arguments),j.mixin(this,d),this.detailStateKey="GroupMgrShowDetail",this._service=e.getSDataService("dynamic"),this._structure=this._getStructure(),this._select=this._getSelect(),this._where=this._getWhere(),this._sort=this._getSort(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.list.selectionMode="multiple",k.initShowHideDetail(this)},_getShowDetail:function(){if(this.detailStateKey){var a=sessionStorage.getItem(this.detailStateKey);return null===a?"true":a}return"true"},_getStructure:function(){return[{field:"Family",label:d.Family,width:"50px",formatter:l.formatProperCase},{field:"Name",label:d.Name,width:"100px"},{field:"DisplayName",label:d.DisplayName,width:"100px"},{field:"CreateDate",label:d.CreateDate,width:"75px",type:g},{field:"ModifyDate",label:d.ModifyDate,width:"75px",type:g},{field:"ReleasedDate",label:d.SharedDate,width:"75px",type:g},{field:"ReleasedTo",label:d.SharedToName,width:"50px"},{field:"ReleasedToType",label:d.SharedToType,width:"50px"},{field:"UserType",label:d.UserType,width:"50px"},{field:"Company",label:d.Company,width:"50px"},{field:"CompanyVersion",label:d.Version,width:"50px",type:h},{field:"BasedOn",label:d.BasedOn,width:"60px"},{
field:"IsDeveloperVersion",label:d.Dev,width:"30px",type:f}]},_getSelect:function(){return["Family","Name","BasedOn","DisplayName","CreateDate","ModifyDate","ReleasedDate","ReleasedToType","ReleasedTo","Company","CompanyVersion","ReleasedTo","DataCode","UserType","IsDeveloperVersion"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"Family",descending:!1},{attribute:"DisplayName",descending:!1},{attribute:"Name",descending:!1}]},_getInclude:function(){return[]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["DisplayName","CreateUser","CreateDate","ModifyUser","ModifyDate","Name"],include:[],sort:this._getSort(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/GroupMgr/templates/ReleasesListSummary.html",resetDataManager:!0,requestConfiguration:a,serviceName:"dynamic"})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["Family","DisplayName","CreateDate","CreateUser","ModifyDate","ModifyUser","Company","CompanyVersion","OwnerId","DataCode","IsAdHoc","Description"],include:[],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/GroupMgr/templates/ReleasesDetailSummary.html",serviceName:"dynamic"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/MainView/GroupMgr/StatisticsListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/StatisticsListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/GridParts/Columns/Boolean","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Numeric","Sage/UI/Controls/GridParts/Columns/Owner","Sage/UI/Controls/GridParts/Columns/SlxUser","dojo/_base/lang","Sage/MainView/GroupMgr/GroupManagerActions","Sage/MainView/GroupMgr/GroupManagerFormatter","dojo/i18n!./templates/nls/StatisticsListSummary","dojo/i18n!./templates/nls/StatisticsDetailSummary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return c("Sage.MainView.GroupMgr.StatisticsListPanelConfig",[a],{keyField:"$key",_listId:"statistics",_resourceKind:"groupStatisticsView",_contextMenu:"GroupManagerListContextMenu",_currentListContextSubMenu:"SharesListContextMenu",defaultSelectFirst:!0,constructor:function(){this.inherited(arguments),k.mixin(this,d),this.detailStateKey="GroupMgrShowDetail",this._service=e.getSDataService("dynamic"),this._structure=this._getStructure(),this._select=this._getSelect(),this._where=this._getWhere(),this._sort=this._getSort(),this._include=this._getInclude(),this._store=this._getStore(),this.list=this._getListConfig(),this.detail=this._getDetailConfig(),this.toolBar=this._getToolBars(),this.list.selectionMode="multiple",l.initShowHideDetail(this)},_getShowDetail:function(){if(this.detailStateKey){var a=sessionStorage.getItem(this.detailStateKey);return null===a?"true":a}return"true"},_getStructure:function(){return[{field:"Family",label:d.Family,width:"50px",formatter:m.formatProperCase},{field:"Name",label:d.Name,width:"100px"},{field:"DisplayName",label:d.DisplayName,width:"100px"},{field:"UserId",label:d.Owner,width:"50px",type:i},{field:"OwnerUsageCount",label:d.OwnerUsage,width:"50px",type:h},{field:"ReleaseUsageCount",label:d.ShareUsage,width:"50px",type:h},{field:"ReleasedDate",label:d.SharedDate,width:"75px",type:g},{field:"FirstUser",label:d.FirstUsedBy,width:"50px",type:j},{field:"FirstUseDate",label:d.FirstUsed,width:"75px",type:g},{field:"LastUser",label:d.LastUsedBy,width:"50px",type:j},{field:"LastUseDate",label:d.LastUsed,width:"75px",type:g},{field:"Development",label:d.Dev,width:"30px",type:f},{field:"Released",label:d.Rel,width:"30px",type:f}]},_getSelect:function(){return["Family","Name","UserId","OwnerUsageCount","ReleaseUsageCount","Development","Released","ReleasedDate","DataCode","Description","DisplayName","FirstUser","FirstUseDate","LastUser","LastUseDate","CreateDate"]},_getWhere:function(){return""},_getSort:function(){return[{attribute:"Development",descending:!1},{attribute:"Family",descending:!1},{attribute:"DisplayName",descending:!1},{attribute:"Name",descending:!1}]},_getInclude:function(){return[]},_getSummaryListRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["Family","Name","Type","UserId","OwnerUsageCount","ReleaseUsageCount","Development","Released","ReleasedDate","DataCode","Description","DisplayName","FirstUser","FirstUseDate","LastUser","LastUseDate","CreateDate"],include:[],sort:this._getSort(),useBatchRequest:!1}},_getFormatterScope:function(){var a=this._getSummaryListRequestConfig();return new b({templateLocation:"MainView/GroupMgr/templates/StatisticsListSummary.html",resetDataManager:!0,requestConfiguration:a,serviceName:"dynamic"})},_getSummaryDetailRequestConfig:function(){return{resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["Family","Name","Type","UserId","OwnerUsageCount","ReleaseUsageCount","Development","Released","ReleasedDate","DataCode","Description","DisplayName","FirstUser","FirstUseDate","LastUser","LastUseDate","CreateDate"],include:[],useBatchRequest:!1}},_getDetailConfig:function(){var a=(this._getFormatterScope(),this._getSummaryDetailRequestConfig());return{resourceKind:this._resourceKind,requestConfiguration:a,templateLocation:"MainView/GroupMgr/templates/StatisticsDetailSummary.html",serviceName:"dynamic"}},_getSummaryConfig:function(){return!1},_getToolBars:function(){return{items:[]}}})})},"Sage/UI/Controls/GridParts/Columns/Owner":function(){define(["dojo/_base/declare","Sage/Utility"],function(a,b){return a("Sage.UI.Controls.GridParts.Columns.Owner",null,{format:function(a,c){if(a){var d=b.getOwnerName(a);if(d!==a)return b.htmlEncode(d);var e=b.getUserName(a);return e?b.htmlEncode(e):a}return a}})})},"Sage/MainView/GroupMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/MainView/GroupMgr/GroupManagerGroupContextService","Sage/MainView/GroupMgr/GroupManagerFormatter","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f,g,h,i){return f("Sage.MainView.GroupMgr.FilterConfigurationProvider",[b,a],{_configuration:null,_hasLayoutConfiguration:!1,_hasFilterHiddenConfiguration:!1,_currentUserId:!1,serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"},systemDataService:{type:"sdata",name:"system"}},constructor:function(a){this.inherited(arguments),"Sage.MainView.GroupMgr.GroupManagerGroupContextService"!==this.groupContextService.declaredClass&&(Sage.Services.removeService("ClientGroupContext"),this.groupContextService=new c,Sage.Services.addService("ClientGroupContext",this.groupContextService)),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},requestConfiguration:function(a){this._configuration={},this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1,this._onRequestConfigurationSuccess(a,null),this._getHiddenFilters(a)},onConfigurationChange:function(){},getFilterFormatter:function(a){if(a){if("Owner"===a.filterName&&"4493728e-4874-49ce-8b92-fa73eb0ce19e"===a.$key)return d.formatOwnerName;if("Dev"===a.filterName&&("88834cef-0de9-4eeb-b3e1-a88df70a9801"===a.$key||"1771b223-501f-4002-99f4-bba7ea0fb381"===a.$key)||"Released"===a.filterName&&"d5b8084e-8758-4921-999a-018b7283becb"===a.$key||"Adhoc"===a.filterName&&"89c6c3b2-7c94-45d8-a5e2-35931d70d236"===a.$key||"Shared"===a.filterName&&"e6d6c56c-b861-4b52-9b70-9446d0a2f483"===a.$key)return d.formatBoolean}return!1},_onGroupContextChanged:function(){this.onConfigurationChange()},_createConfiguration:function(a,b){var c=this.groupContextService.getCurrentListConfig();this.groupContextService._currentContext.isNonEntityBased?this._configuration=c.getNonEntityBasedFilterConfig(b):this._configuration=c.getFilterConfig(this.metaDataService,a,b),this._configuration||(this._configuration={}),this._configuration.getFilterManager=function(){var a=e.byId("list");return a&&a.get("filterManager")},this._hasLayoutConfiguration=!0},_onRequestConfigurationSuccess:function(a,b){this._createConfiguration(b,a),this._callOptionsSuccess(a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},_getHiddenFilters:function(a){var b=this._getHiddenFiltersKey();b&&g.getHiddenFilters(b,h.hitch(this,this._onHiddenFiltersFetchComplete,a||{}),function(a){})},_getHiddenFiltersKey:function(){return g.getHiddenFiltersKey()},_onHiddenFiltersFetchComplete:function(a,b){b&&b.response&&b.response.value&&(this._configuration._hiddenFilters=i.parse(b.response.value),this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array&&(this._configuration._hiddenFilters={})),this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey(),this._hasFilterHiddenConfiguration=!0,this._callOptionsSuccess(a)},_callOptionsSuccess:function(a){this._hasLayoutConfiguration&&this._hasFilterHiddenConfiguration&&a.success&&(a.success.call(a.scope||this,this._configuration,a,this),this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1)}})})},"Sage/MainView/IntegrationContract/SyncResultsHistory":function(){define(["dojo/_base/declare","dojo/i18n!./nls/SyncResultsHistory","dijit/_Widget","Sage/UI/GridView","Sage/UI/Controls/GridParts/Columns/SlxLink","Sage/UI/Controls/GridParts/Columns/DateTime","dojo/_base/lang","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h){return a("Sage.MainView.IntegrationContract.SyncResultsHistory",[c],{grid:"",globalSyncId:"",entityId:"",constructor:function(){g.mixin(this,b)},loadSyncResults:function(){var a={readOnly:!0,columns:[{field:"RunName",label:this.grdSyncHistory_RunName,sortable:!0,type:e,editable:!1,pageName:"SyncResult",idField:"$key"},{field:"CreateDate",type:f,formatType:"date/time",label:this.grdSyncHistory_CreateDate,editable:!1,sortable:!0},{field:"HttpStatus",label:this.grdSyncHistory_Status,editable:!1,sortable:!0},{field:"DiagnosisCode",label:this.grdSyncHistory_DiagnosisCode,editable:!1,sortable:!0},{field:"ErrorMessage",label:this.grdSyncHistory_ErrorMessage,editable:!1,sortable:!1},{field:"SyncJob.JobName",label:this.grdSyncHistory_JobName,sortable:!0,type:e,editable:!1,pageName:"SyncJob",idField:"SyncJob.$key"}],storeOptions:{service:h.getSDataService("dynamic"),resourceKind:"syncResults",include:[],select:["Id","RunName","CreateDate","HttpStatus","DiagnosisCode","ErrorMessage","SyncJob.JobName"],where:g.hitch(this,function(){return dojo.string.substitute("$uuid eq '${0}' or EntityId eq '${1}'",[this.globalSyncId,this.entityId])}),scope:this},tools:[],minRowsPerPage:25,placeHolder:this.placeHolder,columnHiding:!0,columnResizing:!0,columnReordering:!0};(this.grid=new d(a)).createGridView()}})})},"Sage/MainView/Lead/ImportLeadsWizard":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ImportLeadsWizard","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/ImportLeadsProgressDisplay.html","dijit/ProgressBar","dojo/string","dijit/form/Form","dijit/layout/ContentPane","dojox/layout/TableContainer"],function(declare,i18NStrings,widget,templated,dialogs,importLeadsProgressDisplay,progressBar,dojoString){var importLeadsWizard=declare("Sage.MainView.Lead.ImportLeadsWizard",[widget,templated],{statusEnum:{Initialize:0,Started:1,Processing:2,Completed:3,Abort:4},importHistoryId:"",startProcessCtrlId:"",isActualImport:!0,widgetsInTemplate:!0,progressBar:"",secondaryProgressBar:null,secondaryProgressCounter:0,widgetTemplate:new Simplate(eval(importLeadsProgressDisplay)),constructor:function(){dojo.mixin(this,i18NStrings)},onAddHocGroupChecked:function(a,b){var c=dojo.byId(b);if(c){var d=c.checked,e=dojo.byId(a);d?dojo.style(e,"display",""):dojo.style(e,"display","none")}},onGridViewRowSelected:function(a,b,c){var d=dojo.byId(b),e=dojo.byId(c),f=this.getSelectedRow(e.value,d);f&&(f.style.backgroundColor="#ffffff"),null!==(f=this.getSelectedRow(a,d))&&(e.value=a,f.style.backgroundColor="#E3F2FF")},getSelectedRow:function(a,b){return b?b.rows[a]:null},enableDisableControl:function(a,b){a&&(a.disabled=b)},showImportProcess:function(a){this.isActualImport=!0,this.startProcessCtrlId=a,this.showProcess()},showTestImportProcess:function(a){this.isActualImport=!1,this.startProcessCtrlId=a,this.showProcess()},showProcess:function(){this.clearResults(),this._dialog.show();var a=this;setTimeout(function(){a.getImportHistory()},1e3)},setDisplayProperty:function(a,b){a&&b?dojo.removeClass(a,"display-none"):a&&dojo.addClass(a,"display-none")},getImportHistory:function(){if(""===this.importHistoryId){this.invokeClickEvent(dojo.byId(this.startProcessCtrlId));var a=Sage.Services.getService("ClientContextService");a&&a.containsKey("ImportHistoryId")&&(this.importHistoryId=a.getValue("ImportHistoryId"))}if(""!==this.importHistoryId){var b="select=ImportNumber,Status,StatusCode,RecordCount,ProcessedCount,DuplicateCount,ImportedCount,MergeCount,ErrorCount,WarningCount",c=this,d=dojoString.substitute("slxdata.ashx/slx/dynamic/-/importHistory('${0}')?${1}&format=json",[this.importHistoryId,b]);dojo.xhrGet({cache:!1,preventCache:!0,handleAs:"json",url:d,load:function(a){c.updateProgress(a)},data:{},error:function(a,b,c){dialogs.showError(this.errorRequestImportHistory)}})}},updateProgress:function(a){var b,c,d,e;null!==a&&(b=this,this.totalRecordCount.set("value",a.RecordCount),a.ProcessedCount>0&&(this.processedCount.set("value",a.ProcessedCount),this.duplicateCount.set("value",a.DuplicateCount),this.importedCount.set("value",a.ImportedCount),this.mergedCount.set("value",a.MergeCount),c=a.ProcessedCount>0?a.DuplicateCount/a.ProcessedCount:0,d=c*a.RecordCount,this.projectedDuplicateCount.set("value",d),this.duplicateRate.focusNode.set("value",c),this.errorCount.set("value",a.ErrorCount),this.progressBar||(this.setDisplayProperty(this.lblProcessingLabelContainer,!1),this.progressBar=new progressBar({id:"importPrimaryProgressBar",maximum:a.RecordCount}),dojo.place(this.progressBar.domNode,this.importPrimaryProgressBarContainer,"only"),this.importHistoryLink.href=dojoString.substitute("ImportHistory.aspx?entityid=${0}&modeid=Detail",[this.importHistoryId]),this.importHistoryLink.innerHTML=a.ImportNumber,this.setDisplayProperty(this.importHistoryLinkContainer,this.isActualImport)),this.secondaryProgressBar||(this.secondaryProgressBar=new progressBar({id:"secondaryImportProgressBar",maximum:10}),dojo.place(this.secondaryProgressBar.domNode,this.importSecondaryProgressBarContainer,"only"),this.secondaryProgressBar.set("label","")),a.RecordCount>0?this.processedCount.value/a.RecordCount*100:100,this.secondaryProgressCounter<10?this.secondaryProgressCounter++:this.secondaryProgressCounter=0,this.progressBar.set("value",a.ProcessedCount),this.secondaryProgressBar.set("value",this.secondaryProgressCounter),this.secondaryProgressBar.set("label",this.importStatusProcessing)),a.StatusCode===this.statusEnum.Processing?(e=500,a.RecordCount>100&&(e=1e3),setTimeout(function(){b.getImportHistory()},e)):a.StatusCode===this.statusEnum.Completed&&(this.progressBar.set("value",this.progressBar.maximum),this.secondaryProgressBar.set("value",this.secondaryProgressBar.maximum),this.setDisplayProperty(this.secondaryProgressBar,!1),this.secondaryProgressBar.set("label",this.importStatusCompleted),this.setDisplayProperty(this.btn_Cancel.domNode,!1),this.isActualImport||this.deleteImportHistory()))},deleteImportHistory:function(){var a=dojoString.substitute("slxdata.ashx/slx/dynamic/-/importHistory('${0}')",[this.importHistoryId]);dojo.xhrDelete({handleAs:"json",url:a,error:function(a,b,c){}})},invokeClickEvent:function(a){if(dojo.isIE)a.click();else{var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0),a.dispatchEvent(b)}},clearResults:function(){this.setDisplayProperty(this.btn_Cancel.domNode,this.isActualImport),this.setDisplayProperty(this.importHistoryLinkContainer,!1),this.totalRecordCount.set("value",this.calculatingText),this.processedCount.set("value",this.calculatingText),this.importedCount.set("value",this.calculatingText),this.mergedCount.set("value",this.calculatingText),this.duplicateCount.set("value",this.calculatingText),this.projectedDuplicateCount.set("value",this.calculatingText),this.duplicateRate.focusNode.set("value",0),this.duplicateCount.set("value",this.calculatingText),this.errorCount.set("value",this.calculatingText)},_cancel:function(){this.abortImport(),this._close()},abortImport:function(){var a=Sage.Data.SDataServiceRegistry.getSDataService("dynamic",!1,!0,!0),b=new Sage.SData.Client.SDataSingleResourceRequest(a);if(""!==this.importHistoryId){b.setResourceSelector(dojo.string.substitute("'${0}'",[this.importHistoryId])),b.setResourceKind("importHistory");var c=this.abortImportProcessStatus;b.update({Status:c,ProcessState:c},{scope:this,success:function(a){},failure:function(a){}})}},_close:function(){this._dialog.hide(),this.progressBar&&this.progressBar.destroy(),this.secondaryProgressBar&&this.secondaryProgressBar.destroy()}});return importLeadsWizard})},"Sage/MainView/ExchangeRate/ExchangeRateDialog":function(){define(["dijit/_Widget","dojo/string","Sage/_Templated","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/declare","dojo/i18n!./nls/ExchangeRateDialog","Sage/Utility/Jobs","dojo/_base/lang","dojo/request","dojo/json","dojo/promise/all","Sage/UI/_DialogLoadingMixin","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return e("Sage.MainView.ExchangeRateDialog",[a,c],{_dialog:!1,widgetsInTemplate:!0,_baseCurrency:null,_oppCount:null,_soCount:null,_quotesCount:null,widgetTemplate:new Simplate(["<div>",'<div  data-dojo-type="dijit.Dialog" style="width:600px;"  dojoAttachPoint="_dialog"  data-dojo-type="dijit.Dialog" title="{%= $.lblUpdateCurrency %}">','<div style="padding-bottom:10px;">',"<label >{%= $.lblSelectEntity %}:</label>","</div>",'<div style="padding-bottom:20px;padding-left:20px;">','<label style="font-weight: bold;" >{%= $.lblNote %}: </label><label >{%= $.lblLockedUpdate %}.</label>',"</div>",'<table class="detailTableContainer formtable HundredPercentWidth">',"<tr>",'<th class="">','<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label class="alignleft" data-dojo-attach-point="lblName">{%= $.lblEntity %} </label>',"</div>","</th>",'<th style="text-align:left;">','<label style="text-align:left;" data-dojo-attach-point="lblName">{%= $.lblRecordsToUpdate %}</label>',"</th>","</tr>","<tr>",'<td class="">','<div style="padding:0 !important;" class="lbl alignright">','<input type="checkbox" data-dojo-attach-point="opportunities"  data-dojo-type="dijit.form.CheckBox" checked="checked" />',"</div>",'<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label data-dojo-attach-point="lblName">{%= $.lblOpportunities %} </label>',"</div>","</td>",'<td class="">','<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label data-dojo-attach-point="oppCount" >0</label>',"</div>","</td>","</tr>","<tr>",'<td class="">','<div style="padding:0 !important;" class="lbl alignright">','<input type="checkbox" data-dojo-attach-point="salesOrders"  data-dojo-type="dijit.form.CheckBox" checked="checked" />',"</div>",'<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label data-dojo-attach-point="lblName">{%= $.lblSalesOrders %} </label>',"</div>","</td>",'<td class="">','<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label data-dojo-attach-point="soCount" >0</label>',"</div>","</td>","</tr>"," <tr>",' <td class="">','<div style="padding:0 !important;" class="lbl alignright">','<input type="checkbox" data-dojo-attach-point="quotes"  data-dojo-type="dijit.form.CheckBox" checked="checked" />',"</div>",'<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label data-dojo-attach-point="lblName">{%= $.lblQuotes %} </label>',"</div>","</td>",'<td class="">','<div class="fld  dijitInline" data-dojo-attach-point="filterName">','<label data-dojo-attach-point="quCount" >0</label>',"</div>","</td>","</tr>","</table>",'<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button" name="btn_OK" dojoattachpoint="btn_OK" dojoAttachEvent="onClick:_okClick"">{%= $.lblOK %}</div>','<div data-dojo-type="dijit.form.Button" name="btn_Cancel" dojoattachpoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.lblClose %}</div>',"</div>","</div>","</div>"]),constructor:function(a){this._baseCurrency=a,dojo.mixin(this,f)},postCreate:function(){h.mixin(this._dialog,new d),this._dialog.createHelpIconByTopic("ExchangeRateUpdate"),dojo.mixin(this._dialog,new l),this._dialog.showLoading();var a=this,c=[],e=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("Opportunities").setQueryArg("select","$key").setQueryArg("format","json").setQueryArg("where",b.substitute("ExchangeRateCode ne '${0}' and ExchangeRateLocked eq '${1}' and Status eq '${2}'",[this._baseCurrency,!1,this.Open])).setQueryArg("_t",(new Date).getTime())).then(function(b){var c=j.parse(b);a.oppCount.innerHTML=c.$resources.length},function(a){});c.push(e);var f=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("salesorders").setQueryArg("select","$key").setQueryArg("format","json").setQueryArg("where",b.substitute("CurrencyCode ne '${0}' and (ExchangeRateLocked eq '${1}' or ExchangeRateLocked eq null) and Status  eq '${2}' and ErpExtId eq null",[this._baseCurrency,!1,this.SalesOrder])).setQueryArg("_t",(new Date).getTime())).then(function(b){var c=j.parse(b);a.soCount.innerHTML=c.$resources.length},function(a){});c.push(f);var g=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("quotes").setQueryArg("select","$key").setQueryArg("format","json").setQueryArg("where",b.substitute("CurrencyCode ne '${0}' and (ExchangeRateLocked eq '${1}' or ExchangeRateLocked eq null) and Status eq '${2}'  and ErpExtId eq null",[this._baseCurrency,!1,this.New])).setQueryArg("_t",(new Date).getTime())).then(function(b){var c=j.parse(b);a.quCount.innerHTML=c.$resources.length},function(a){});c.push(g),k(c).then(function(b){a._dialog.hideLoading()})},destroy:function(){this._dialog.destroy()},show:function(){this._dialog.show()},hide:function(){this._dialog.destroy()},_okClick:function(){var a=[],c=[];this.opportunities.checked&&c.push("Opportunity"),this.salesOrders.checked&&c.push("SalesOrder"),this.quotes.checked&&c.push("Quote"),c.forEach(function(b){var c="CurrencyCode,ExchangeRateLocked,Status",d=":exchangeCode,false,Open";"Opportunity"===b?c="ExchangeRateCode,ExchangeRateLocked,Status":d="Quote"===b?":exchangeCode,false,New":":exchangeCode,false,Sales Order",a.push({entityName:b,conditionalProperties:c,conditionalValues:d,propertyNames:"ExchangeRate,ExchangeRateDate",propertyValues:":rateValue,:rateDate"})});var d={descriptor:this.job_Description,showErrorNotification:!1,closable:!0,title:this.updateRecords_Caption,key:"Sage.SalesLogix.BusinessRules.Jobs.UpdateExchangeRateJob",parameters:[{name:"Entities",value:Sys.Serialization.JavaScriptSerializer.serialize(a)}],success:function(){},failure:function(a){m.showError(b.substitute(this.errorRequestingJobMgr,[a.statusText]))},ensureZeroFilters:!0};g.triggerJobAndDisplayProgressDialog(d)},_cancelClick:function(){this._dialog.hide(),this._dialog.destroy()}})})},"Sage/MainView/IntegrationContract/PromoteWidget":function(){define(["dojo/_base/declare","dijit/_Widget","Sage/_Templated","dojo/_base/connect","dojo/string","dojo/on","dojo/store/Memory","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/_base/array","dojo/text!./templates/PromoteWidget.html","dojo/i18n!./nls/PromoteWidget","Sage/Utility","Sage/UI/Dialogs","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Data/SDataServiceRegistry","dijit/form/FilteringSelect"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return a("Sage.MainView.IntegrationContract.PromoteWidget",[b,c],{id:"dlgPromoteWidget",widgetTemplate:n.makeTemplateFromString(l),widgetsInTemplate:!0,_helpIconTopic:"Search_for_Matches",constructor:function(a){this.initialize(a),j.mixin(this,m)},initialize:function(a){j.mixin(this,a)},show:function(a){this.initialize(a),this._dialog.titleNode.innerHTML=e.substitute(this.title_Caption,[this.entityPrettyName]),this._dialog.show(),i.add(this.divValidationMessage,"display-none"),this._helpIconTopic&&(this._dialog.helpIcon||(j.mixin(this._dialog,new p),this._dialog.createHelpIconByTopic(this._helpIconTopic))),this._requestBackOffices(),i.add(this.divLoadingMessage,"display-none")},promoteEntity:function(a,b){var c=new Sage.SData.Client.SDataServiceOperationRequest(q.getSDataService("dynamic"));c.setResourceKind("backOffices"),c.setOperationName("PromoteToBackOffice");var d={$name:this.operationName,request:{entityName:this.entityName,entityId:this.entityId,logicalId:a,accountingEntityId:b}};c.execute(d,{success:j.hitch(this,function(a){o.showInfo(e.substitute(this.requestSuccessfullSubmitted,[this.entityPrettyName,this.entityDisplayValue]))}),failure:j.hitch(this,function(a){o.showError(e.substitute(this.errorPromotion,[this.entityPrettyName,a]))})}),this._close()},_requestBackOffices:function(){var a=q.getSDataService("dynamic"),b=new Sage.SData.Client.SDataServiceOperationRequest(a).setResourceKind("backOffices").setOperationName("RequestActiveBackOffices"),c={$name:"RequestActiveBackOffices",request:{BackOfficeId:"",entityName:this.entityName}};b.execute(c,{async:!1,success:j.hitch(this,function(a){if(a.response.Result){var b=a.response.Result.$resources,c=b.length,d=this.logicalId?this.logicalId:1===c&&b[0].BackOffice.BackOfficeName,e=[];k.forEach(b,dojo.hitch(this,function(a){e.push(a)})),this.backOffices=this._initializeList(e,"BackOfficeName","LogicalId",d),this.backOffices.placeAt(this.backOffice_Container),d||(this.accountingEntities=this._initializeList(null,"AcctEntityExtId","$key",!1),this.accountingEntities.placeAt(this.accountingEntity_Container)),f(this.backOffices,"change",j.hitch(this,function(){this.loading||this._requestAccountingEntities()}))}}),failure:function(a){o.showError(a)}})},_requestAccountingEntities:function(){this.accountingEntities&&this.accountingEntities.destroyRecursive();var a=new Sage.SData.Client.SDataResourceCollectionRequest(q.getSDataService("dynamic"));a.setResourceKind("backOfficeAccountingEntities"),a.setQueryArg("select","AcctEntityExtId"),a.setQueryArg("where",e.substitute("BackOffice.Id eq '${0}'",[this.backOffices.item.$key])),a.setQueryArg("orderby","AcctEntityExtId asc"),a.read({success:j.hitch(this,function(a){if(a){var b=1===a.$resources.length&&a.$resources[0].$key;this.accountingEntities=this._initializeList(a.$resources,"AcctEntityExtId","$key",b),this.accountingEntities.placeAt(this.accountingEntity_Container),f(this.accountingEntities,"change",j.hitch(this,function(){i.add(this.divValidationMessage,"display-none")}))}}),failure:function(a){o.showError(e.substitute(this.errorRequestListOptions,[this.errorAccountingEntities,a]))}})},_initializeList:function(a,b,c,d){var e=new r({store:new g({data:a,idProperty:c}),maxHeight:150,searchAttr:b,labelAttr:b,placeHolder:this.selectOption_Caption,required:!0,style:"width:250px"});return e.attr("value",d),e},_btnOk_OnClick:function(){if(!this.backOffices.value||!this.accountingEntities.value)return void i.remove(this.divValidationMessage,"display-none");this.promoteEntity(this.backOffices.item.LogicalId,this.accountingEntities.item.AcctEntityExtId)},_btnCancel_OnClick:function(){this._close()},_close:function(){this._dialog.hide(),this.backOffices&&this.backOffices.destroyRecursive(),this.accountingEntities&&this.accountingEntities.destroyRecursive()}})})},"Sage/MainView/IntegrationContract/PricingAvailabilityWidget":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/string","dojo/_base/lang","dojo/dom-class","dojo/store/Memory","dojo/text!./templates/PricingAvailabilityWidget.html","dojo/i18n!./nls/PricingAvailabilityWidget","Sage/Utility","Sage/UI/Controls/Grid","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return c("Sage.MainView.IntegrationContract.PricingAvailabilityWidget",[a,b],{id:"dlgPricingAvailabilityWidget",widgetTemplate:j.makeTemplateFromString(h),widgetsInTemplate:!0,_helpIconTopic:"",warehouseGrid:null,constructor:function(){e.mixin(this,i),this.inherited(arguments)},initialize:function(a){e.mixin(this,a)},show:function(){this._dialog.titleNode.innerHTML=this.title_Caption,f.add(this.divErrorMessage,"display-none"),f.remove(this.divLoadingMessage,"display-none"),this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(e.mixin(this._dialog,new m),this._dialog.createHelpIconByTopic(this._helpIconTopic))),this.errorMessage||this._requestWarehouses(),this.inherited(arguments)},destroy:function(){this.inherited(arguments)},_requestWarehouses:function(){var a=[],b="",c="",g="",h="",i=Sage.Utility.getCurrentEntityName();"Opportunity"===i?h="OpportunityAvailableToPromise":"Sales Order"===i?h="AvailableToPromise":"Quote"===i&&(h="QuoteAvailableToPromise");var j={resourceKind:this.resourceKind,operationName:"RequestPricingAvailability",callback:e.hitch(this,function(e){if(e)for(var h=0;h<e.Children.length;h++){var i=e.Children[h],j=e.Children[0];b=j.Properties.messageText,c=j.Properties.ErrorCode,g=j.Properties.ErrorDescription;var k=b||(c?g:"Unknown Error");if(void 0!=b&&null!=b||void 0!=g&&null!=g||!c||(k=c),b||c)return f.add(this.divLoadingMessage,"display-none"),f.remove(this.divErrorMessage,"display-none"),f.add(this.btnOK.domNode,"display-none"),this.btnCancel.setAttribute("label",this.close_Caption),void(this.lblErrorMessage.textContent=d.substitute(this.errorPageLoading_Caption,[k]));var l={};for(var m in i.Properties)if("ProductCode"!=m)if(m.indexOf(".")>0&&m.indexOf("ErpExtId")>0){var n=m.split("."),o=i.Properties[m].split("#");l[n[0]]=o[0],l[n[0]+"ID"]=o[1]}else l[m]=i.Properties[m];a.push(l)}this._loadWarehouseGrid(a)}),requestOptions:{childEntityName:this.childEntityName,entityName:this.entityName,entityId:this.entityId,serviceName:h,childEntityIds:this.childEntityIds,quantity:this.item.Quantity,unitOfMeasureId:this.item.UnitOfMeasure?this.item.UnitOfMeasure.$key:"null"}};Sage.Utility.PricingAndAvailability.requestPricingAvailability(j)},_loadWarehouseGrid:function(a){f.remove(this.divLoadingMessage,"display-none"),f.add(this.divErrorMessage,"display-none"),f.remove(this.btnOK.domNode,"display-none"),a.length<=0&&f.add(this.btnOK.domNode,"display-none");var b=new k({classNames:"dgrid-autoheight dgrid-no-data",store:new g({data:a,idProperty:"SlxLocationID"}),columns:{ATPDate:this.grdColumn_ATPDate,SlxLocation:this.grdColumn_Warehouse,AvailableQuantity:this.grdColumn_AvailableQty},loadingMessage:this.gridLoading_Caption,noDataMessage:this.gridNoResults_Caption,placeHolder:this.warehouses_Container.id,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0});b.resize(),this.warehouseGrid=b,f.add(this.divLoadingMessage,"display-none")},_btnOk_OnClick:function(){if(!this.errorMessage){var a="",b=Sage.Utility.getCurrentEntityName();"Opportunity"===b?a="OpportunityOrderLineTotal":"Sales Order"===b?a="OrderLineTotal":"Quote"===b&&(a="QuoteOrderLineTotal");var c={gridId:this.gridId,item:this.item,
SlxLocationExtID:this.warehouseGrid.selectedItem.SlxLocation,SlxLocationID:this.warehouseGrid.selectedItem.SlxLocationID,ATPDate:this.warehouseGrid.selectedItem.ATPDate,AvailableQuantity:this.warehouseGrid.selectedItem.AvailableQuantity,resourceKind:this.resourceKind,childEntityName:this.childEntityName,serviceName:a,entityName:this.entityName};Sage.Utility.PricingAndAvailability._updateItemWithSelectedWarehouse(c)}this._close()},_btnCancel_OnClick:function(){this._close()},_close:function(){this.warehouseGrid&&(this.warehouses_Container.removeChild(this.warehouseGrid),this.warehouseGrid.destroy()),this._dialog.hide()}})})},"Sage/MainView/CountryCodeMapping/CountryAliasConversion":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","Sage/MainView/CountryCodeMapping/_CountryAliasConversionDialogBase","dojo/text!./templates/CountryAliasConversion.html","dojo/i18n!./nls/CountryAliasConversion","Sage/Utility","Sage/UI/Dialogs","Sage/MainView/CountryCodeMapping/CountryAliasConversionUtility","Sage/UI/GridView","Sage/Data/SDataServiceRegistry","dgrid/editor","dijit/form/FilteringSelect","dojo/_base/connect","dijit/registry","Sage/UI/Controls/GridParts/Columns/Lookup","Sage/Store/SData","dojo/_base/array","dojo/dom-style"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=g.makeTemplateFromString(e);a("Sage.MainView.CountryCodeMapping.CountryAliasConversion",[d],{id:"dlgCountryAliasConversion",widgetTemplate:t,_nlsResources:f,countryAliasGrd:"",helpPath:"countryconfig",helpContainer:"MCWebHelp",dirtyAliases:[],constructor:function(){this.inherited(arguments)},startup:function(){this._loadAndPlace()},_loadAndPlace:function(a,c,d){var e=[],h=Sage.Services.getService("RoleSecurityService");if(d&&h){h.hasAccess("Entities/CountryCodeMapping/Add")&&e.push("add");h.hasAccess("Entities/CountryCodeMapping//Edit")&&e.push("edit");h.hasAccess("Entities/CountryCodeMapping/Delete")&&e.push("delete")}e.push("help");var l=function(a,b){var c={$descriptor:"",$key:"",AlternateCode:"",CountryCode:"",CountryName:""};a.splice(0,0,c)},n=new q({select:[""],include:[""],resourceKind:"countryCodeMappings",service:k.getSDataService("dynamic"),labelProperty:"CountryName",idProperty:"$key",queryArgs:{count:1e3},onComplete:l}),o=function(a,b,c){},r={tools:e,gridLabel:f.grdLabel,deleteSelected:b.partial(this.removeItem,this),editItem:b.partial(this.editItem,this),showHelp:b.partial(this.showHelp,this.helpPath,this.helpContainer,g.openHelp),sort:[{attribute:"Alias"}],minRowsPerPage:1e3,storeOptions:{service:k.getSDataService("dynamic"),resourceKind:"countryAliases",include:["CountryCodeMapping"],select:["Alias","CountryCodeMappingId"],where:"CountryCodeMappingId eq null",queryArgs:{format:"json"}},query:!1,columns:[{field:"$key",label:"Id",hidden:!0,unhidable:!0},{field:"Alias",label:f.colUnmatchedAlias_Caption,hidden:!1,editable:!1,unhidable:!0},{field:"CountryCodeMapping.CountryName",label:f.colCountryName,editable:!0,type:p,editor:m,editOn:"",editorArgs:{store:n,onDataChange:o,searchAttr:"CountryName",labelAttr:"CountryName",pageSize:1e3,placeHolder:f.colCountryNamePlaceHolder,fetchProperties:{sort:[{attribute:"CountryName",descending:!1}]}}}],placeHolder:this.countryAliasGrid,height:"300px",columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,classNames:"countryAliasConversion_Grid",id:"grdOrphanedAliases"},t=this.grid=new j(r);t.createGridView(),s.set([t.id,"_helpBtn"].join(""),"display","none"),i.setDomNodeVisible(this.divLoadingMessage,!1),this.grid.grid.onDataChange=b.hitch(this,function(a){if(this.grid.markClean(),"CountryCodeMapping.CountryName"===a.cell.column.field){if(a.value){var b=a.value,c=a.cell.row,d=c.data.$key,e={countryCodeMappingId:b,countryAliasId:d};this.grid.markDirty(),this.dirtyAliases.push(e)}if(""===a.value)for(var f=this.dirtyAliases.length;f--;)this.dirtyAliases[f].countryAliasId===a.cell.row.data.$key&&this.dirtyAliases.splice(f,1)}})},_saveAliases:function(){r.forEach(this.dirtyAliases,b.hitch(this,function(a){this.saveCountryAliasConversion(a)}))},_btnSave_OnClick:function(){this._saveAliases(),this.grid.markClean(),this._dialog.hide(),this._destroy()},_btnCancel_OnClick:function(){this._dialog.hide(),this._destroy()},showHelp:function(a,b,c){c(a,b)},_destroy:function(){r.forEach(this._dialogIds,function(a){var b=o.byId(a);b&&(r.forEach(o.findWidgets(o.byId(a)),function(a){a.destroyRecursive()}),b.grid.destroy(),b.destroyRecursive(),b.destroyDescendants())})}});return Sage.MainView.CountryCodeMapping.CountryAliasConversion})},"Sage/MainView/CountryCodeMapping/_CountryAliasConversionDialogBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/store/Memory","dijit/_Widget","Sage/_Templated","Sage/MainView/CountryCodeMapping/CountryAliasConversionUtility","dojo/i18n!./nls/_CountryAliasConversionDialogBase","Sage/UI/Controls/_DialogHelpIconMixin"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.MainView.Import._CountryAliasConversionDialogBase",[f,g],{_dialog:null,baseNlsResources:i,_helpIconTopic:"countryaliasconversion",widgetsInTemplate:!0,subscriptions:[],importOptions:[],lookupTypeField:"LookupField",_dialogIds:["dlgCountryAliasConversion"],constructor:function(){this.subscriptions=[],dojo.mixin(this,i)},show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(d.mixin(this._dialog,new j),this._dialog.createHelpIconByTopic(this._helpIconTopic),this._dialog.helpIcon.tabIndex="-1"))},startup:function(){this.inherited(arguments)},preformValidation:function(a,b){a()},saveCountryAliasConversion:function(a){var b={countryAliasId:a.countryAliasId,entry:{$name:"SaveOrphanedCountryAlias",request:{countryAliasId:a.countryAliasId,countryCodeMappingId:a.countryCodeMappingId}},businessRuleMethod:"SaveOrphanedCountryAlias",onSuccess:dojo.hitch(this,function(b){a.isNew&&(this.aliasOptions.countryAliasId=b)}),onFailure:function(b){a.onFailure&&a.onFailure(b)}};h.countryRuleRequest(b,"countryAliases")},_dialog_OnCancel:function(){this._btnCancel_OnClick()},_btnCancel_OnClick:function(){this._dialog.hide()},finishConversion:function(){this._destroyObjects()}})})},"Sage/MainView/CountryCodeMapping/CountryAliasConversionUtility":function(){define(["dojo/_base/xhr","dojo/string","dojo/date/locale","dojo/dom-class","dojo/_base/lang","Sage/Data/SDataServiceRegistry","Sage/Utility"],function(a,b,c,d,e,f,g){return Sage.namespace("Sage.MainView.CountryCodeMapping.CountryAliasConversionUtility"),e.mixin(Sage.MainView.CountryCodeMapping.CountryAliasConversionUtility,{getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var a=Sage.Services.getService("ClientEntityContext");if(a)return a.getContext()}return null},setDomNodeVisible:function(a,b){a&&b?d.remove(a,"display-none"):a&&d.add(a,"display-none")},requestCountryData:function(a){var b=new Sage.SData.Client.SDataResourceCollectionRequest(f.getSDataService("dynamic"));b.setResourceKind(a.resourceKind),b.setQueryArg("select",a.select),b.setQueryArg("where",a.where),b.setQueryArg("count",a.count),b.read({preventCache:!0,scope:this,success:function(b){a.onSuccess&&a.onSuccess(b.$resources)},failure:function(b){a.onFailure&&a.onFailure(b)}})},countryRuleRequest:function(a,b,c){var d=void 0===c||c,e=f.getSDataService("dynamic");new Sage.SData.Client.SDataServiceOperationRequest(e).setResourceKind(b).setContractName("dynamic").setOperationName(a.businessRuleMethod).execute(a.entry,{async:d,success:function(b){a.onSuccess&&(b.response&&"string"==typeof b.response.Result?a.onSuccess(Sys.Serialization.JavaScriptSerializer.deserialize(b.response.Result)):b.response&&a.onSuccess(b.response.Result))},failure:function(b){a.onFailure&&a.onFailure(b)}})}}),Sage.MainView.CountryCodeMapping.CountryAliasConversionUtility})},"Sage/UI/Controls/GridParts/Columns/Lookup":function(){define(["Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(a,b,c){return b("Sage.UI.Controls.GridParts.Columns.Lookup",null,{constructor:function(a){c.mixin(this,a)},format:function(a,b){return a?("object"==typeof a&&(a=this._getFieldValue(a)),a):(null!==b&&(a=this._getFieldValue(b)),null===a||void 0===a?"":a)},_getFieldValue:function(a){for(var b=this.editorArgs.lookupOptions.field.split("."),c=a,d=0;d<b.length;d++)c&&(c=c[b[d]]);return c}})})},"Sage/ProximitySearch/main":function(){define(["Sage/ProximitySearch/Ajax","Sage/ProximitySearch/AjaxIndicatorModule","Sage/ProximitySearch/All","Sage/ProximitySearch/BingGeocodeModule","Sage/ProximitySearch/BingMapModule","Sage/ProximitySearch/BingRouteModule","Sage/ProximitySearch/DataNavigationModule","Sage/ProximitySearch/DirectionView","Sage/ProximitySearch/Events","Sage/ProximitySearch/GoogleGeocodeModule","Sage/ProximitySearch/GoogleMapModule","Sage/ProximitySearch/GoogleRouteModule","Sage/ProximitySearch/MapData","Sage/ProximitySearch/PointEditModule","Sage/ProximitySearch/RouteModel","Sage/ProximitySearch/Sandbox","Sage/ProximitySearch/SelectionModule","Sage/ProximitySearch/SlxDataPoint","Sage/ProximitySearch/ToolbarModule","Sage/ProximitySearch/Utilities"],function(){})},"Sage/ProximitySearch/Ajax":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events"],function(a,b){var c=0;return a("Sage.ProximitySearch.Ajax",null,{initModule:function(a){this._sandbox=a},ajax:function(a){},ajaxp:function(a,d,e,f){var g="",h=a.indexOf("?")>=0;c++;var i=this._sandbox;i.publish(b.AjaxStart),Sage.ProximitySearch.Ajax["callback"+c]=function(){i.publish(b.AjaxEnd),f.apply(this,arguments)},d[e]="Sage.ProximitySearch.Ajax.callback"+c;for(var j in d)h?g+="&":(g+="?",h=!0),g+=j,g+="="+encodeURIComponent(d[j]);a+=g;var k=document.createElement("script");k.setAttribute("type","text/javascript"),k.setAttribute("src",a),document.body.appendChild(k)}})})},"Sage/ProximitySearch/Events":function(){define(["dojo/_base/declare"],function(a){var b=a("Sage.ProximitySearch.Events",null,{});return b.AjaxStart="Ajax/Start",b.AjaxEnd="Ajax/End",b.MapRefresh="Map/Refresh",b.MapSession="Map/Session",b.SelectionNew="Selection/New",b.SelectionCreate="Selection/Create",b.SelectionAdd="Selection/Add",b.SelectionRemove="Selection/Remove",b.SelectionReorder="Selection/Reorder",b.ItemHighlight="Item/Highlight",b.ItemUnhighlight="Item/Unhighlight",b.ItemCenter="Item/Center",b.RouteCalculate="Route/Calculate",b.RouteOptimize="Route/Optimize",b.RouteUpdated="Route/Updated",b.RouteSegmentHighlight="Route/SegmentHighlight",b.RouteSegmentUnhighlight="Route/SegmentUnhighlight",b.DataNavigate="Data/Navigate",b})},"Sage/ProximitySearch/AjaxIndicatorModule":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events"],function(a,b){return a("Sage.ProximitySearch.AjaxIndicatorModule",null,{constructor:function(a){this._div=dojo.byId(a),this._div.style.display="none"},initModule:function(a){a.subscribe(b.AjaxStart,dojo.hitch(this,"_showIndicator")),a.subscribe(b.AjaxEnd,dojo.hitch(this,"_hideIndicator"))},_showIndicator:function(){this._div.style.display="block"},_hideIndicator:function(){this._div.style.display="none"}})})},"Sage/ProximitySearch/All":function(){require(["dijit/_Widget","dijit/_Templated","dijit/layout/BorderContainer","dijit/layout/ContentPane","Sage/ProximitySearch/Events","Sage/ProximitySearch/Utilities","Sage/ProximitySearch/BingGeocodeModule","Sage/ProximitySearch/BingMapModule","Sage/ProximitySearch/BingRouteModule","Sage/ProximitySearch/GoogleGeocodeModule","Sage/ProximitySearch/GoogleMapModule","Sage/ProximitySearch/GoogleRouteModule","Sage/ProximitySearch/DataNavigationModule","Sage/ProximitySearch/DirectionView","Sage/ProximitySearch/PointEditModule","Sage/ProximitySearch/SelectionModule","Sage/ProximitySearch/ToolbarModule","Sage/ProximitySearch/RouteModel","Sage/ProximitySearch/MapData","Sage/ProximitySearch/Ajax","Sage/ProximitySearch/AjaxIndicatorModule","Sage/ProximitySearch/SlxDataPoint"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){dojo.provide("Sage.ProximitySearch.All")})},"Sage/ProximitySearch/Utilities":function(){define(["dojo/_base/declare"],function(a){var b=a("Sage.ProximitySearch.Utilities",null,{});return b.escapeHTML=function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},c=function(a){return b[a]};return a?a.replace(/[&<>'"]/g,c):""},b})},"Sage/ProximitySearch/BingGeocodeModule":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events","dojo/_base/lang","dojo/i18n!./nls/GeocodeModule"],function(a,b,c,d){return a("Sage.ProximitySearch.BingGeocodeModule",null,{_bingKey:null,constructor:function(a){this._bingKey=a},initModule:function(a){this._sandbox=a,a.subscribe(b.SelectionCreate,this._onSelectionCreate),a.subscribe(b.MapSession,dojo.hitch(this,"onMapSession"),9)},onMapSession:function(a){a&&(this._bingKey=a)},_onSelectionCreate:function(a){var c={output:"json",key:this._bingKey,query:a.address};this._sandbox.ajax.ajaxp("http://dev.virtualearth.net/REST/v1/Locations",c,"jsonp",dojo.hitch(this,function(c){if(200==c.statusCode&&c.resourceSets[0].estimatedTotal>0){var e=c.resourceSets[0].resources[0].point.coordinates;a.latitude=e[0],a.longitude=e[1],this._sandbox.publish(b.SelectionAdd,[a])}else this._sandbox.error(d.geocodeError)}))}})})},"Sage/ProximitySearch/BingMapModule":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events","dojo/_base/lang","dojo/i18n!./nls/MapModule","dojo/query"],function(a,b,c,d,e){return a("Sage.ProximitySearch.BingMapModule",null,{_bingKey:null,constructor:function(a,b){this._mapDiv=a,this._bingKey=b,this._map=null,this._mapModel=null,this._pushpins=null,this._sandbox=null},initModule:function(a){this._sandbox=a,a.subscribe(b.MapRefresh,dojo.hitch(this,"onMapRefresh")),a.subscribe(b.RouteUpdated,dojo.hitch(this,"onRouteUpdated")),a.subscribe(b.RouteSegmentHighlight,dojo.hitch(this,"onRouteSegmentHighlight")),a.subscribe(b.RouteSegmentUnhighlight,dojo.hitch(this,"onRouteSegmentUnhighlight")),a.subscribe(b.SelectionAdd,dojo.hitch(this,"onSelectionAdd"),9),a.subscribe(b.SelectionRemove,dojo.hitch(this,"onSelectionRemove"),9),a.subscribe(b.SelectionReorder,dojo.hitch(this,"onSelectionReorder"),9),a.subscribe(b.ItemHighlight,dojo.hitch(this,"onItemHighlight")),a.subscribe(b.ItemUnhighlight,dojo.hitch(this,"onItemUnhighlight")),a.subscribe(b.ItemCenter,dojo.hitch(this,"onItemCenter"))},onMapRefresh:function(a){this._mapModel=a,this._buildMap()},onRouteSegmentHighlight:function(a){},onRouteSegmentUnhighlight:function(a){},onRouteUpdated:function(a){this._map&&this._mapModel&&(this._removeRoute(),this._displayRoute(a))},onSelectionAdd:function(a){if(a&&this._map&&this._mapModel){for(var b=0;b<a.length;b++){var c=a[b];this._addPushpin(c)}this._renumberSelected();var d=this.calculateBounds(this._mapModel.getSelected()),e=Microsoft.Maps.LocationRect.fromCorners(new Microsoft.Maps.Location(d[0].latitude,d[0].longitude),new Microsoft.Maps.Location(d[1].latitude,d[1].longitude));this._map.setView({bounds:e})}},onSelectionRemove:function(a){if(a&&this._map&&this._mapModel){for(var b=0;b<a.length;b++){var c=a[b];this._removePushpin(c)}this._renumberSelected()}},onSelectionReorder:function(){this._renumberSelected()},calculateBounds:function(a){for(var b=a[0],c={latitude:b.latitude+.001,longitude:b.longitude-.001},d={latitude:b.latitude-.001,longitude:b.longitude+.001},e=a.length-1;e>0;e--){var f=a[e];f.latitude<d.latitude&&(d.latitude=f.latitude),f.latitude>c.latitude&&(c.latitude=f.latitude),f.longitude>d.longitude&&(d.longitude=f.longitude),f.longitude<c.longitude&&(c.longitude=f.longitude)}return[c,d]},_buildMap:function(){if("undefined"==typeof Microsoft)throw d.microsoftError;var a=this._map=this._map||new Microsoft.Maps.Map(dojo.byId(this._mapDiv),{credentials:this._bingKey,mapTypeId:"r"}),b=(this._pushpins=[],this._mapModel.getSelected());if(b&&0!==b.length){var c=this.calculateBounds(b),e=Microsoft.Maps.LocationRect.fromCorners(new Microsoft.Maps.Location(c[0].latitude,c[0].longitude),new Microsoft.Maps.Location(c[1].latitude,c[1].longitude));a.setView({bounds:e}),this._addPushpin(b[0]);for(var f=1;f<b.length;f++)this._addPushpin(b[f]);a.getCredentials(dojo.hitch(this,"_updateSessionKey"))}},_updateSessionKey:function(a){var c=this._sandbox;a&&c.publish(b.MapSession,a);var f=d.credentialsOrOverLimit;e(dojo.byId(this._mapDiv)).forEach(function(a){for(var b=a.getElementsByTagName("div"),c=0;c<b.length;c++)-1===b[c].innerHTML.indexOf("<div")&&(b[c].innerHTML.indexOf("Invalid Credentials")>-1||b[c].innerHTML.indexOf("Unable to contact Server")>-1||b[c].innerHTML.indexOf("credentials are invalid")>-1)&&(b[c].innerHTML=f)})},_addPushpin:function(a){var c=this._map,d=this._sandbox,e=a.img||this._selectPushpinImage(this._getItemType(a)),f=new Microsoft.Maps.Location(a.latitude,a.longitude),g={text:String(a.order),typeName:"pushpin",textOffset:new Microsoft.Maps.Point(0,11)};e&&(g.icon=this._sandbox.getParameter("IMG_URL")+e);var h=new Microsoft.Maps.Pushpin(f,g),i=null;if(a.name||a.description){var j=a.address;a.description&&(j=a.description+"<br/>"+a.address);var k={title:a.name,description:j,visible:!1,actions:[{label:"Deselect",eventHandler:dojo.hitch(this,function(){d.publish(b.SelectionRemove,[a]),this.onSelectionRemove(a),m()})}],offset:new Microsoft.Maps.Point(0,32)};a.url&&(k.titleClickHandler=function(){d.publish(b.DataNavigate,a.url)}),i=new Microsoft.Maps.Infobox(h.getLocation(),k),i.setMap(c);var l=function(){i.setOptions({visible:!0})};Microsoft.Maps.Events.addHandler(h,"click",l);var m=function(){i.setOptions({visible:!1})};Microsoft.Maps.Events.addHandler(c,"viewchange",m),c.entities.push(i)}c.entities.push(h),this._pushpins.push({point:a,pushpin:h,infobox:i})},_selectPushpinImage:function(a){if(!a)return"bluepin.png";switch(a){case"poi":return"bluepin.png";case"data":return"orangepin.png";case"waypoint":return null;case"highlight":return"yellowpin.png"}return"redpin.png"},_removePushpin:function(a){for(var b=0;b<this._pushpins.length;b++){var c=this._pushpins[b];if(c.point===a)return this._map.entities.remove(c.pushpin),c.infoBox&&this._map.entities.remove(c.infoBox),void this._pushpins.splice(b,1)}},_removeRoute:function(){this._routeShape&&(this._map.entities.remove(this._routeShape),this._routeShape=null)},_displayRoute:function(a,b){if(a&&0!==a._legs.length){for(var c=[],d=0;d<a.path.length;d++){var e=a.path[d];c.push(new Microsoft.Maps.Location(e[0],e[1]))}b=b||new Microsoft.Maps.Color(200,0,0,200);var f=this._routeShape=new Microsoft.Maps.Polyline(c,{strokeColor:b});this._map.entities.push(f)}},_renumberSelected:function(){dojo.forEach(this._pushpins,function(a){a.pushpin.setOptions({text:String(a.point.order)})})},onItemHighlight:function(a){for(var b=0;b<this._pushpins.length;b++){var c=this._pushpins[b];if(c.point===a){var d=this._selectPushpinImage("highlight");return void c.pushpin.setOptions({icon:this._sandbox.getParameter("IMG_URL")+d})}}},onItemUnhighlight:function(a){for(var b=0;b<this._pushpins.length;b++){var c=this._pushpins[b];if(c.point===a){var d=a.img||this._selectPushpinImage(this._getItemType(a));return void c.pushpin.setOptions({icon:d?this._sandbox.getParameter("IMG_URL")+d:null})}}},onItemCenter:function(a){this._map.setView({center:new Microsoft.Maps.Location(a.latitude,a.longitude)})},_getItemType:function(a){return 0===a.latitude&&0===a.longitude?"invalid":a.type}})})},"Sage/ProximitySearch/BingRouteModule":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events","Sage/ProximitySearch/RouteModel","dojo/_base/lang","dojo/i18n!./nls/RouteModule"],function(a,b,c,d,e){return a("Sage.ProximitySearch.BingRouteModule",null,{_bingKey:null,_isMetric:!1,_culture:"en-US",constructor:function(a,b,c){this._routeModel=null,this._bingKey=a,this._isMetric=b,this._culture=c||"en-US",this._ajaxInProgress=!1,this._requestedRoute=null},initModule:function(a){this._sandbox=a,a.subscribe(b.MapRefresh,dojo.hitch(this,"onMapRefresh")),a.subscribe(b.RouteCalculate,dojo.hitch(this,"onRouteCalculate")),a.subscribe(b.SelectionAdd,dojo.hitch(this,"onSelectionChange"),9),a.subscribe(b.SelectionRemove,dojo.hitch(this,"onSelectionChange"),9),a.subscribe(b.SelectionReorder,dojo.hitch(this,"onSelectionChange"),9),a.subscribe(b.MapSession,dojo.hitch(this,"onMapSession"),9)},onMapSession:function(a){a&&(this._bingKey=a)},onMapRefresh:function(a){this._mapModel=a,this._routeModel&&this.onRouteCalculate()},onSelectionChange:function(){this._routeModel&&this.onRouteCalculate()},onRouteCalculate:function(){if(!this._queuedCalculate){if(this._ajaxInProgress)return this._sandbox.warn(e.inProgressError),void(this._queuedCalculate=!0);this._queuedCalculate=!0,setTimeout(dojo.hitch(this,function(){this._queuedCalculate=!1;var a="http://dev.virtualearth.net/REST/v1/Routes",c={},d=this._requestedRoute=dojo.clone(this._mapModel.getSelected());if(0===d.length){var f=this._routeModel;return f.clear(),this._sandbox.publish(b.RouteUpdated,f),void(this._routeModel=null)}if(d.length<2||d.length>25)return void this._sandbox.error(e.bingRouteOutOfRangeError);for(var g=0;g<d.length;g++){var h=d[g];c["waypoint."+(g+1)]=h.latitude+","+h.longitude}c.key=this._bingKey,c.rpo="Points",c.distanceUnit=this._isMetric?"km":"mi",c.culture=this._culture,this._ajaxInProgress=!0,this._sandbox.ajax.ajaxp(a,c,"jsonp",dojo.hitch(this,"onRouteCalculateCallback"))}),500)}},onRouteCalculateCallback:function(a){if(this._ajaxInProgress=!1,this._queuedCalculate)return this._queuedCalculate=!1,void this.onRouteCalculate();if(200!=a.statusCode)return void this._sandbox.error(a.errorDetails?a.errorDetails[0]:a.statusDescription);this._routeModel||(this._routeModel=new c("Bing",this._isMetric)),this._routeModel.resultData=a;var d=this._requestedRoute,e=this._routeModel;e.clear();var f=a.resourceSets[0].resources[0];e.path=f.routePath.line.coordinates,e.totalDistance=f.travelDistance,e.totalDuration=f.travelDuration,e.originPoint=d[0],e.originActual=f.routeLegs[0].actualStart.coordinates,e.destinationPoint=d[d.length-1],e.destinationActual=f.routeLegs[f.routeLegs.length-1].actualEnd.coordinates;for(var g=0;g<f.routeLegs.length;g++){var h=new c("Bing",this._isMetric),i=f.routeLegs[g];h.totalDistance=i.travelDistance,h.totalDuration=i.travelDuration,h.originPoint=d[g],h.destinationPoint=d[g+1],h.originActual=i.actualStart.coordinates,h.destinationActual=i.actualEnd.coordinates,h.path=null;for(var j=0;j<i.itineraryItems.length;j++){var k=i.itineraryItems[j],l={instruction:k.instruction.text,direction:k.compassDirection,coordinates:k.maneuverPoint.coordinates};h.addLeg(l)}e.addLeg(h)}this._sandbox.publish(b.RouteUpdated,e)}})})},"Sage/ProximitySearch/RouteModel":function(){define(["dijit/_Widget","dijit/_Templated","dojo/_base/declare","Sage/ProximitySearch/Utilities","dojo/_base/lang","dojo/i18n!./nls/RouteModel"],function(a,b,c,d,e,f){return dojo.declare("Sage.ProximitySearch.RouteModel",null,{mileAbbrevText:f.mileAbbrevText,kilometerAbbrevText:f.kilometerAbbrevText,_isMetric:!1,constructor:function(a,b){this.clear(),this._isMetric=b,this.mapProvider=a},mapProvider:null,totalDistance:0,totalDuration:0,originPoint:null,destinationPoint:null,originActual:null,destinationActual:null,path:null,resultData:null,clear:function(){this._legs=[]},addLeg:function(a){this._legs.push(a)},getLegs:function(){return this._legs},metersToMi:function(a){return Math.round(.000621371192*a*100)/100},metersToKm:function(a){return Math.round(a/1e3*100)/100},milesToMi:function(a){return Math.round(100*a)/100},getSummaryHTML:function(){var a=d.escapeHTML(this.originPoint.name)+" &rarr; "+d.escapeHTML(this.destinationPoint.name),b=[];if(this.totalDistance)if(isNaN(this.totalDistance))b.push(this.totalDistance);else switch(this.mapProvider){case"Google":b.push(String(this._isMetric?this.metersToKm(this.totalDistance):this.metersToMi(this.totalDistance))+" "+(this._isMetric?this.kilometerAbbrevText:this.mileAbbrevText));break;default:b.push(String(this.milesToMi(this.totalDistance))+" "+(this._isMetric?this.kilometerAbbrevText:this.mileAbbrevText))}if(this.totalDuration)if(isNaN(this.totalDuration))b.push(this.totalDuration);else{var c=Math.round(this.totalDuration/60),e=c%60;e<10&&(e="0"+e),b.push(Math.floor(c/60)+"h"+e)}return b.length>0&&(a+=" <span class='distance'>("+b.join("; ")+")</span>"),a}})})},"Sage/ProximitySearch/GoogleGeocodeModule":function(){define(["dojo/_base/declare","dojo/io-query","Sage/ProximitySearch/Events","dojo/_base/lang","dojo/i18n!./nls/GeocodeModule"],function(a,b,c,d,e){return a("Sage.ProximitySearch.GoogleGeocodeModule",null,{_googleKey:null,_sandbox:null,constructor:function(a){this._googleKey=a},initModule:function(a){this._sandbox=a,a.subscribe(c.SelectionCreate,this._onSelectionCreate),a.subscribe(c.MapSession,dojo.hitch(this,"onMapSession"),9)},onMapSession:function(a){a&&(this._googleKey=a)},_onSelectionCreate:function(a){var b=this._sandbox;(new google.maps.Geocoder).geocode({address:a.address.replace(/(\r\n|\n|\r)/gm,"")},function(d,f){if(f==google.maps.GeocoderStatus.OK){var g=d[0].geometry.location;a.latitude=g.lat(),a.longitude=g.lng(),b.publish(c.SelectionAdd,[a])}else b.error(e.geocodeError)})}})})},"Sage/ProximitySearch/GoogleMapModule":function(){define(["dojo/_base/declare","dojo/string","Sage/ProximitySearch/Events","dojo/_base/lang","dojo/i18n!./nls/MapModule"],function(a,b,c,d,e){return a("Sage.ProximitySearch.GoogleMapModule",null,{_googleKey:null,_dirDisplay:null,constructor:function(a,b){this._mapDiv=a,this._googleKey=b,this._map=null,this._mapModel=null,this._pushpins=null,this._sandbox=null},initModule:function(a){this._sandbox=a,a.subscribe(c.MapRefresh,dojo.hitch(this,"onMapRefresh")),a.subscribe(c.RouteUpdated,dojo.hitch(this,"onRouteUpdated")),a.subscribe(c.RouteSegmentHighlight,dojo.hitch(this,"onRouteSegmentHighlight")),a.subscribe(c.RouteSegmentUnhighlight,dojo.hitch(this,"onRouteSegmentUnhighlight")),a.subscribe(c.SelectionAdd,dojo.hitch(this,"onSelectionAdd"),9),a.subscribe(c.SelectionRemove,dojo.hitch(this,"onSelectionRemove"),9),a.subscribe(c.SelectionReorder,dojo.hitch(this,"onSelectionReorder"),9),a.subscribe(c.ItemHighlight,dojo.hitch(this,"onItemHighlight")),a.subscribe(c.ItemUnhighlight,dojo.hitch(this,"onItemUnhighlight")),a.subscribe(c.ItemCenter,dojo.hitch(this,"onItemCenter"))},onMapRefresh:function(a){this._mapModel=a,this._buildMap()},onRouteSegmentHighlight:function(a){},onRouteSegmentUnhighlight:function(a){},onRouteUpdated:function(a){this._map&&this._mapModel&&(this._removeRoute(),this._displayRoute(a))},onSelectionAdd:function(a){if(a&&this._map&&this._mapModel){for(var b=0;b<a.length;b++){var c=a[b];this._addPushpin(c)}this._renumberSelected();var d=this.calculateBounds(this._mapModel.getSelected());this._map.fitBounds(d)}},onSelectionRemove:function(a){if(a&&this._map&&this._mapModel){for(var b=0;b<a.length;b++){var c=a[b];this._removePushpin(c)}this._renumberSelected()}},onSelectionReorder:function(){this._renumberSelected()},calculateBounds:function(a){for(var b=a[0],c={latitude:b.latitude+.001,longitude:b.longitude-.001},d={latitude:b.latitude-.001,longitude:b.longitude+.001},e=a.length-1;e>0;e--){var f=a[e];f.latitude<d.latitude&&(d.latitude=f.latitude),f.latitude>c.latitude&&(c.latitude=f.latitude),f.longitude>d.longitude&&(d.longitude=f.longitude),f.longitude<c.longitude&&(c.longitude=f.longitude)}return{north:d.latitude,south:c.latitude,east:d.longitude,west:c.longitude}},_buildMap:function(){if("undefined"==typeof google)throw e.googleError;var a=this._mapModel.getSelected(),b=this._map=this._map||new google.maps.Map(dojo.byId(this._mapDiv),{center:{lat:a[0].latitude,lng:a[0].longitude},zoom:8});this._pushpins=[];if(a&&0!==a.length){this._addPushpin(a[0]);for(var c=1;c<a.length;c++)this._addPushpin(a[c]);var d=this.calculateBounds(a);b.fitBounds(d)}},_addPushpin:function(a){var c=this._map,d=(this._sandbox,a.img||this._selectPushpinImage(this._getItemType(a))),e={lat:a.latitude,lng:a.longitude},f={position:e,label:this._getPinLabel(a),map:c,title:a.Name};d&&(f.icon=this._sandbox.getParameter("IMG_URL")+d);var g=new google.maps.Marker(f),h=null;if(a.name||a.description){var i=a.address;a.description&&(i=a.description+"<br/>"+a.address);var j=b.substitute("<h1>${0}</h1><div>${1}</div>",[a.name,i]),k={content:j,position:g.getPosition()};h=new google.maps.InfoWindow(k);var l=function(){h.open(c,g)};g.addListener("click",l);var m=function(){h.close()};c.addListener("drag",m)}this._pushpins.push({point:a,pushpin:g,infobox:h})},_selectPushpinImage:function(a){if(!a)return"bluepin.png";switch(a){case"poi":return"bluepin.png";case"data":return"orangepin.png";case"waypoint":return null;case"highlight":return"yellowpin.png"}return"redpin.png"},_removePushpin:function(a){for(var b=0;b<this._pushpins.length;b++){var c=this._pushpins[b];if(c.point===a)return c.pushpin.setMap(null),c.infoBox&&c.infoBox.setMap(null),void this._pushpins.splice(b,1)}},_removeRoute:function(){this._dirDisplay&&this._dirDisplay.set("directions",null)},_displayRoute:function(a){if(a&&0!==a._legs.length){var b=this._dirDisplay;b||(this._dirDisplay=new google.maps.DirectionsRenderer({draggable:!1,hideRouteList:!0,suppressMarkers:!0}),this._dirDisplay.setMap(this._map),b=this._dirDisplay),b.setDirections(a.resultData)}},_renumberSelected:function(){for(var a=0;a<this._pushpins.length;a++){var b=this._pushpins[a],c=this._getPinLabel(b.point);b.pushpin.setOptions({label:c})}},_getPinLabel:function(a){return a.order<10?String(a.order):a.name?a.name.charAt(0):""},onItemHighlight:function(a){for(var b=0;b<this._pushpins.length;b++){var c=this._pushpins[b];if(c.point===a){var d=this._selectPushpinImage("highlight");return void c.pushpin.setOptions({icon:this._sandbox.getParameter("IMG_URL")+d})}}},onItemUnhighlight:function(a){for(var b=0;b<this._pushpins.length;b++){var c=this._pushpins[b];if(c.point===a){var d=a.img||this._selectPushpinImage(this._getItemType(a));return void c.pushpin.setOptions({icon:d?this._sandbox.getParameter("IMG_URL")+d:null})}}},onItemCenter:function(a){var b=new google.maps.LatLng(a.latitude,a.longitude);this._map.panTo(b)},_getItemType:function(a){return 0===a.latitude&&0===a.longitude?"invalid":a.type}})})},"Sage/ProximitySearch/GoogleRouteModule":function(){define(["dojo/_base/declare","dojo/io-query","dojo/string","Sage/ProximitySearch/Events","Sage/ProximitySearch/RouteModel","dojo/_base/lang","dojo/i18n!./nls/RouteModule"],function(a,b,c,d,e,f,g){return a("Sage.ProximitySearch.GoogleRouteModule",null,{_googleKey:null,_isMetric:!1,constructor:function(a,b){this._routeModel=null,this._googleKey=a,this._isMetric=b,this._ajaxInProgress=!1,this._requestedRoute=null},initModule:function(a){this._sandbox=a,a.subscribe(d.MapRefresh,dojo.hitch(this,"onMapRefresh")),a.subscribe(d.RouteCalculate,dojo.hitch(this,"onRouteCalculate")),a.subscribe(d.SelectionAdd,dojo.hitch(this,"onSelectionChange"),9),a.subscribe(d.SelectionRemove,dojo.hitch(this,"onSelectionChange"),9),a.subscribe(d.SelectionReorder,dojo.hitch(this,"onSelectionChange"),9),a.subscribe(d.MapSession,dojo.hitch(this,"onMapSession"),9)},onMapSession:function(a){a&&(this._googleKey=a)},onMapRefresh:function(a){this._mapModel=a,this._routeModel&&this.onRouteCalculate()},onSelectionChange:function(){this._routeModel&&this.onRouteCalculate()},onRouteCalculate:function(){if(!this._queuedCalculate){if(this._ajaxInProgress)return this._sandbox.warn(g.inProgressError),void(this._queuedCalculate=!0);this._queuedCalculate=!0;var a=this._isMetric?google.maps.UnitSystem.METRIC:google.maps.UnitSystem.IMPERIAL;setTimeout(dojo.hitch(this,function(){this._queuedCalculate=!1;var b=new google.maps.DirectionsService,e=this._requestedRoute=dojo.clone(this._mapModel.getSelected());if(0===e.length){var f=this._routeModel;return f.clear(),this._sandbox.publish(d.RouteUpdated,f),void(this._routeModel=null)}if(e.length<2||e.length>10)return void this._sandbox.error(g.googleRouteOutOfRangeError);var h=[];if(e.length>2)for(var i=1;i<e.length-1;i++){
var j=e[i];h.push({location:{lat:j.latitude,lng:j.longitude},stopover:!0})}this._ajaxInProgress=!0,b.route({origin:c.substitute("${0},${1}",[e[0].latitude,e[0].longitude]),destination:c.substitute("${0},${1}",[e[e.length-1].latitude,e[e.length-1].longitude]),waypoints:h,travelMode:"DRIVING",unitSystem:a},dojo.hitch(this,"onRouteCalculateCallback"))}),500)}},onRouteCalculateCallback:function(a,b){if(this._ajaxInProgress=!1,this._queuedCalculate)return this._queuedCalculate=!1,void this.onRouteCalculate();if("OK"!==b)return void this._sandbox.error(b);this._routeModel||(this._routeModel=new e("Google",this._isMetric)),this._routeModel.resultData=a;var c=this._requestedRoute,f=this._routeModel;f.clear();var g=0,h=0,i=a.routes[0];f.path=i.overview_path,f.originPoint=c[0],f.originActual=i.legs[0].start_location,f.destinationPoint=c[c.length-1],f.destinationActual=i.legs[i.legs.length-1].end_location;for(var j=0;j<i.legs.length;j++){var k=new e("Google",this._isMetric),l=i.legs[j];k.totalDistance=l.distance.text,k.totalDuration=l.duration.text,g+=l.distance.value,h+=l.duration.value,k.originPoint=c[j],k.destinationPoint=c[j+1],k.originActual=l.start_location,k.destinationActual=l.end_location,k.path=null;for(var m=0;m<l.steps.length;m++){var n=l.steps[m],o={instruction:n.instructions,direction:"",coordinates:[n.start_location,n.end_location]};k.addLeg(o)}f.addLeg(k)}f.totalDistance=g,f.totalDuration=h,this._sandbox.publish(d.RouteUpdated,f)}})})},"Sage/ProximitySearch/DataNavigationModule":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events"],function(a,b){return a("Sage.ProximitySearch.DataNavigationModule",null,{initModule:function(a){a.subscribe(b.DataNavigate,function(a){window.opener?window.opener.location.href=a:window.open(a,"PxSearch-DataNavigation")})}})})},"Sage/ProximitySearch/DirectionView":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Events","Sage/ProximitySearch/RouteModel","dojo/_base/lang","dojo/i18n!./nls/DirectionView"],function(a,b,c,d,e){return a("Sage.ProximitySearch.DirectionView",null,{constructor:function(a){this._div=dojo.byId(a),this._div.innerHTML="<p>"+e.placeHolderText+"</p>"},initModule:function(a){this._sandbox=a,a.subscribe(b.RouteUpdated,dojo.hitch(this,"onRouteUpdated"))},onRouteUpdated:function(a){this._div.innerHTML=this._showRouteSummary(a);for(var b=a.getLegs(),c=document.createElement("ul"),d=0;d<b.length;d++)this._showRouteLeg(c,b[d]);this._div.appendChild(c)},_showRouteSummary:function(a){return a.getLegs().length<=1?e.placeHolderText:"<div class='routesummary'>"+a.getSummaryHTML()+"</div>"},_showRouteLeg:function(a,b){b.constructor===c?this._showWaypoint(a,b):this._showTurn(a,b)},_showWaypoint:function(a,c){if(c.originPoint.latitude!=c.destinationPoint.latitude||c.originPoint.longitude!=c.destinationPoint.longitude){var d=document.createElement("li"),e=document.createElement("div"),f=this._sandbox;e.className="waypoint",e.innerHTML=c.getSummaryHTML(),e.onmouseover=function(){f.publish(b.RouteSegmentHighlight,c)},e.onmouseout=function(){f.publish(b.RouteSegmentUnhighlight,c)},d.appendChild(e),a.appendChild(d);for(var g=document.createElement("ul"),h=c.getLegs(),i=0;i<h.length;i++)this._showRouteLeg(g,h[i]);d.appendChild(g)}},_showTurn:function(a,b){var c=document.createElement("li");c.innerHTML=b.instruction,c.className="turn",a.appendChild(c)}})})},"Sage/ProximitySearch/PointEditModule":function(){define(["dijit/_Widget","dijit/_Templated","dijit/form/Button","dijit/form/ValidationTextBox","dijit/Dialog","dojo/_base/declare","Sage/ProximitySearch/Events","dojo/_base/lang","dojo/i18n!./nls/PointEditModule"],function(a,b,c,d,e,f,g,h,i){var j=f([a,b],{newPlaceText:i.newPlaceText,addPlaceText:i.addPlaceText,okText:i.okText,cancelText:i.cancelText,nameText:i.nameText,addressText:i.addressText,cityText:i.cityText,stateText:i.stateText,postalCodeText:i.postalCodeText,countryText:i.countryText,helpText:i.helpText,errorText:i.errorText,templateString:"<table style='width: 100%;'><tr><td>${nameText}</td><td><input dojoType='dijit.form.ValidationTextBox' required='true' dojoAttachPoint='txtName' dojoAttachEvent='onKeyPress:textboxKeyPress' style='width: 100%;'/></td></tr><tr><td>${addressText}</td><td><input dojoType='dijit.form.ValidationTextBox' required='true' dojoAttachPoint='txtAddress' dojoAttachEvent='onKeyPress:textboxKeyPress,onKeyUp:textboxKeyUp' style='width: 100%;'/></td></tr><tr><td>${cityText}</td><td><input dojoType='dijit.form.ValidationTextBox' required='true' dojoAttachPoint='txtCity' dojoAttachEvent='onKeyPress:textboxKeyPress,onKeyUp:textboxKeyUp' style='width: 100%;'/></td></tr><tr><td>${stateText}</td><td><input dojoType='dijit.form.ValidationTextBox' required='true' dojoAttachPoint='txtState' dojoAttachEvent='onKeyPress:textboxKeyPress,onKeyUp:textboxKeyUp' style='width: 100%;'/></td></tr><tr><td>${postalCodeText}</td><td><input dojoType='dijit.form.ValidationTextBox' required='true' dojoAttachPoint='txtPostalCode' dojoAttachEvent='onKeyPress:textboxKeyPress,onKeyUp:textboxKeyUp' style='width: 100%;'/></td></tr><tr><td>${countryText}</td><td><input dojoType='dijit.form.ValidationTextBox' required='true' dojoAttachPoint='txtCountry' dojoAttachEvent='onKeyPress:textboxKeyPress,onKeyUp:textboxKeyUp' style='width: 100%;'/></td></tr><tr><td colspan='2' style='text-align: right'>${helpText}</td></tr><tr><td colspan='2' style='text-align: right'><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:okBtnClick'>${okText}</div><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:cancelBtnClick'>${cancelText}</div></td></tr></table>",widgetsInTemplate:!0,onExecute:function(){},onCancel:function(a){},postCreate:function(){this.inherited(arguments),this._popup=new e({title:this.addPlaceText,style:"width: 375px"}),this._popup.set("content",this.domNode)},show:function(){this._reset(),this._popup.show()},hide:function(){this._popup.hide()},onCreateItem:function(a,b,c,d,e,f){},okBtnClick:function(){this._validate()?(this.onCreateItem(this.txtName.get("value"),this.txtAddress.get("value"),this.txtCity.get("value"),this.txtState.get("value"),this.txtPostalCode.get("value"),this.txtCountry.get("value")),this.hide()):alert(this.errorText)},cancelBtnClick:function(){this.hide()},textboxKeyPress:function(a){13==a.keyCode&&this.okBtnClick()},textboxKeyUp:function(a){0===this.txtAddress.get("value").length&&0===this.txtCity.get("value").length&&0===this.txtState.get("value").length&&0===this.txtPostalCode.get("value").length&&0===this.txtCountry.get("value").length?(this.txtAddress.required=!0,this.txtCity.required=!0,this.txtState.required=!0,this.txtPostalCode.required=!0,this.txtCountry.required=!0):(this.txtAddress.required=this.txtAddress.get("value").length>0,this.txtCity.required=this.txtCity.get("value").length>0,this.txtState.required=this.txtState.get("value").length>0,this.txtPostalCode.required=this.txtPostalCode.get("value").length>0,this.txtCountry.required=this.txtCountry.get("value").length>0,this.txtAddress.validate(!0),this.txtCity.validate(!0),this.txtState.validate(!0),this.txtPostalCode.validate(!0),this.txtCountry.validate(!0))},_reset:function(){this.txtName.set("value",this.newPlaceText),this.txtAddress.set("value",""),this.txtCity.set("value",""),this.txtState.set("value",""),this.txtPostalCode.set("value",""),this.txtCountry.set("value",""),this.txtAddress.required=!1,this.txtCity.required=!1,this.txtState.required=!1,this.txtPostalCode.required=!1,this.txtCountry.required=!1,this.txtAddress.validate(!0),this.txtCity.validate(!0),this.txtState.validate(!0),this.txtPostalCode.validate(!0),this.txtCountry.validate(!0),this.textboxKeyUp(null)},_validate:function(){var a=!0;return this.txtName._maskValidSubsetError=!1,a=this.txtName.validate(!0)&&a,this.txtAddress._maskValidSubsetError=!1,this.txtCity._maskValidSubsetError=!1,this.txtState._maskValidSubsetError=!1,this.txtPostalCode._maskValidSubsetError=!1,this.txtCountry._maskValidSubsetError=!1,a=(this.txtAddress.validate(!0)||this.txtCity.validate(!0)||this.txtState.validate(!0)||this.txtPostalCode.validate(!0)||this.txtCountry.validate(!0))&&a}});return f("Sage.ProximitySearch.PointEditModule",null,{constructor:function(){},initModule:function(a){this._sandbox=a,a.subscribe(g.SelectionNew,dojo.hitch(this,"onSelectionNew"))},onSelectionNew:function(){this._dlg||(this._dlg=new j,this._dlg.startup(),dojo.connect(this._dlg,"onCreateItem",this,"_onCreateItem")),this._dlg.show()},_onCreateItem:function(a,b,c,d,e,f){var h={name:a,description:"",address:b+"\n"+c+", "+d+" "+e+"\n"+f};this._sandbox.publish(g.SelectionCreate,h)}})})},"Sage/ProximitySearch/SelectionModule":function(){define(["dojo/dnd/AutoSource","dijit/_Widget","dojo/_base/declare","Sage/ProximitySearch/Events","Sage/ProximitySearch/Utilities"],function(a,b,c,d,e){var f=c([b],{parentView:null,dataItem:null,dndHint:null,selected:!1,buildRendering:function(){this.inherited(arguments);var a=this.parentView,b=this.dataItem,c=this.domNode,d=this.dndHint,e=this.selected;this.parentView.setRowWidget(b.id,this);var f=document.createElement("td");if(f.className="avatar"==d?"avatar":e?"selected":"deselected","avatar"==d){var g=document.createElement("table"),h=document.createElement("tbody");h.appendChild(c),g.appendChild(h)}else{var i=document.createElement("input");if(i.type="checkbox",e&&(i.checked="checked"),i.onclick=function(){var d=c.parentNode;e?dojo.fadeOut({node:c,onEnd:function(){c.parentNode===d&&(c.parentNode.removeChild(c),a.divSelected.sync(),a.divDeselected.insertNodes(!1,[b]),a.onDeselectItem(b))}}).play():dojo.fadeOut({node:c,onEnd:function(){c.parentNode===d&&(c.parentNode.removeChild(c),a.divDeselected.sync(),a.divSelected.insertNodes(!1,[b]),a.onSelectItem(b))}}).play()},f.appendChild(i),e&&(dojo.connect(f,"onmouseover",function(){a.onItemHighlight(b)}),dojo.connect(f,"onmouseout",function(){a.onItemUnhighlight(b)})),e){var j=document.createElement("span");j.className="lblOrder",j.innerHTML=b.order+" - ",f.appendChild(j)}dojo.connect(this.domNode,"ondblclick",function(){a.onItemCenter(b)})}var k=document.createTextNode(b.name);if(f.appendChild(k),e&&"avatar"!=d){var l=document.createElement("div");if(l.className="details",l.innerHTML=(b.address+"<br/>"+b.description).replace(/\n/g,"<br/>"),"data"==b.type){var m=document.createElement("div");m.className="links";var n=document.createElement("a");n.innerHTML="View Record",n.onclick=dojo.hitch(this,function(){a.onItemNavigate(b)}),m.appendChild(n),l.appendChild(m)}f.appendChild(l)}c.appendChild(f)}}),g=c([b],{postCreate:function(){var b=this;this._rowWidgets={};var c=function(a){return function(c,d){var e=document.createElement("tr");return{node:new f({dndHint:d,dataItem:c,parentView:b,selected:a},e).domNode,data:c}}},d=document.createElement("table");d.style.width="100%",this.domNode.appendChild(d),this.divSelected=new a(d,{creator:c(!0)}),dojo.connect(this.divSelected,"onDndDrop",dojo.hitch(this,"onSelectDrop")),d=document.createElement("table"),this.domNode.appendChild(d),this.divDeselected=new a(d,{creator:c(!1)}),this.divDeselected.checkAcceptance=function(a,b){return this!==a},dojo.connect(this.divDeselected,"onDndDrop",dojo.hitch(this,"onDeselectDrop"))},setItems:function(a){for(;this.divDeselected.node.firstChild;)dojo.destroy(this.divDeselected.node.firstChild);this.divDeselected.clearItems(),this.divDeselected.insertNodes(!1,a.getDeselected()),this.setSelectionOrder(a.getSelected())},setSelectionOrder:function(a){for(;this.divSelected.node.firstChild;)dojo.destroy(this.divSelected.node.firstChild);this.divDeselected.clearItems(),this.divSelected.insertNodes(!1,a),this._renumberSelected()},selectPoints:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.getRowWidget(c.id);d&&d.destroy()}this.divDeselected.sync(),this.divSelected.insertNodes(!1,a),this._renumberSelected()},deselectPoints:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.getRowWidget(c.id);d&&d.destroy()}this.divSelected.sync(),this.divDeselected.insertNodes(!1,a),this._renumberSelected()},setRowWidget:function(a,b){this._rowWidgets[a]=b},getRowWidget:function(a){return this._rowWidgets[a]},onDeselectDrop:function(a,b,c,d){if(d===this.divDeselected)for(var e=0;e<b.length;e++){var f=b[e].id.split("_")[1];this.onDeselectItem(d.getItem("desel_"+f).data)}},onSelectDrop:function(a,b,c,d){if(a===this.divDeselected)for(var e=0;e<b.length;e++){var f=b[e].id;this.onSelectItem(dijit.byId(f).dataItem)}setTimeout(dojo.hitch(this,function(){for(var a=d.node.children,b=[],c=a.length-1;c>=0;c--){var e=a[c].id;b.unshift(dijit.byId(e).dataItem)}this.onMoveItems(b),this._renumberSelected()}),300)},onDeselectItem:function(a){this._renumberSelected()},onSelectItem:function(a){this._renumberSelected()},onMoveItems:function(a){},onItemNavigate:function(a){},onItemHighlight:function(a){},onItemUnhighlight:function(a){},onItemCenter:function(a){},_renumberSelected:function(){var a=this.divSelected;dojo.query(".lblOrder",a.domNode).forEach(function(a,b,c){a.innerHTML=b+1+" - "}),dojo.query("td.selected",a.domNode).forEach(function(a,b,c){b%2==0?dojo.addClass(a,"rowEven"):dojo.removeClass(a,"rowEven")})}}),h=c("Sage.ProximitySearch.SelectionViewModule",null,{constructor:function(a){this._div=a},initModule:function(a){this._sandbox=a,a.subscribe(d.MapRefresh,dojo.hitch(this,"onMapRefresh")),a.subscribe(d.SelectionReorder,dojo.hitch(this,"onSelectionReorder")),a.subscribe(d.SelectionAdd,dojo.hitch(this,"onSelectionAdd"),9),a.subscribe(d.SelectionRemove,dojo.hitch(this,"onSelectionRemove"),9),this._widget=new g({},this._div),this._widget.startup(),dojo.connect(this._widget,"onDeselectItem",function(b){a.publish(d.SelectionRemove,[b])}),dojo.connect(this._widget,"onSelectItem",function(b){a.publish(d.SelectionAdd,[b])}),dojo.connect(this._widget,"onMoveItems",function(b){a.publish(d.SelectionReorder,b)}),dojo.connect(this._widget,"onItemNavigate",function(b){a.publish(d.DataNavigate,b.url)}),dojo.connect(this._widget,"onItemHighlight",function(b){a.publish(d.ItemHighlight,b)}),dojo.connect(this._widget,"onItemUnhighlight",function(b){a.publish(d.ItemUnhighlight,b)}),dojo.connect(this._widget,"onItemCenter",function(b){a.publish(d.ItemCenter,b)})},onMapRefresh:function(a){this._widget.setItems(a)},onSelectionAdd:function(a){this._widget.selectPoints(a)},onSelectionRemove:function(a){this._widget.deselectPoints(a)},onSelectionReorder:function(a){this._widget.setSelectionOrder(a)}});return c("Sage.ProximitySearch.SelectionModule",null,{constructor:function(a){this._div=a},initModule:function(a){this._sandbox=a,this._div&&a.addSubModule(new h(this._div)),a.subscribe(d.SelectionAdd,dojo.hitch(this,"onSelectionAdd")),a.subscribe(d.SelectionRemove,dojo.hitch(this,"onSelectionRemove")),a.subscribe(d.SelectionReorder,dojo.hitch(this,"onSelectionReorder")),a.subscribe(d.MapRefresh,dojo.hitch(this,"onMapRefresh"))},onMapRefresh:function(a){this._mapData=a},onSelectionAdd:function(a){if(this._mapData)for(var b=0;b<a.length;b++){var c=a[b];this._mapData.selectPoint(c)}},onSelectionRemove:function(a){if(this._mapData)for(var b=0;b<a.length;b++){var c=a[b];this._mapData.deselectPoint(c)}},onSelectionReorder:function(a){if(this._mapData){for(var b=0;b<a.length;b++)this._mapData.movePoint(a[b],b,!1);this._mapData.renumberSelected()}}})})},"Sage/ProximitySearch/ToolbarModule":function(){define(["dijit/_Widget","dijit/_Templated","dojo/_base/declare","Sage/ProximitySearch/Events","dojo/_base/lang","dojo/i18n!./nls/ToolbarModule"],function(a,b,c,d,e,f){return c("Sage.ProximitySearch.ToolbarModule",[a,b],{getDirectionsText:f.getDirectionsText,addPlaceText:f.addPlaceText,selectAllText:f.selectAllText,deselectAllText:f.deselectAllText,templateString:"<div style='text-align: center'><div style='padding: 10px 0px;'><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:getDirectionsClick'>${getDirectionsText}</div><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:addPointClick'>${addPlaceText}</div><br></div><div><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:selectAllClick'>${selectAllText}</div><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:deselectAllClick'>${deselectAllText}</div></div>",widgetsInTemplate:!0,initModule:function(a){this._sandbox=a,this.startup(),a.subscribe(d.MapRefresh,this.onMapRefresh)},onMapRefresh:function(a){this._mapData=a},addPointClick:function(a){return this._sandbox.publish(d.SelectionNew),!1},getDirectionsClick:function(a){return this._sandbox.publish(d.RouteCalculate),!1},selectAllClick:function(a){var b=this._mapData.getDeselected();return b=b.slice(0),this._sandbox.publish(d.SelectionAdd,b),!1},deselectAllClick:function(a){var b=this._mapData.getSelected();return b=b.slice(0),this._sandbox.publish(d.SelectionRemove,b),!1}})})},"Sage/ProximitySearch/MapData":function(){define(["dojo/_base/declare"],function(a){return a("Sage.ProximitySearch.MapData",null,{constructor:function(){this._selected=[],this._deselected=[]},clear:function(){this._selected=[],this._deselected=[]},addPoint:function(a,b){b?(a.order=this._selected.length+1,this._selected.push(a)):this._deselected.push(a)},getSelected:function(){return this._selected},getDeselected:function(){return this._deselected},selectPoint:function(a){var b=dojo.indexOf(this._deselected,a);if(b>=0)a=this._deselected[b],this._deselected.splice(b,1);else if(dojo.indexOf(this._selected,a)>=0)return!1;return a.id||(a.id="poi"+this._selected.length+this._deselected.length+1),a.order=this._selected.length+1,this._selected.push(a),!0},deselectPoint:function(a){var b=dojo.indexOf(this._selected,a);if(b>=0){a=this._selected[b],this._selected.splice(b,1),this._deselected.push(a);for(var c=b;c<this._selected.length;c++)this._selected[c].order=c+1;return!0}return!1},movePoint:function(a,b,c){var d=dojo.indexOf(this._selected,a);return d>=0&&d!=b&&(this._selected.splice(d,1),b>d&&b--,this._selected.splice(b,0,a),c&&this.renumberSelected(),!0)},renumberSelected:function(){for(var a=0;a<this._selected.length;a++)this._selected[a].order=a+1}})})},"Sage/ProximitySearch/SlxDataPoint":function(){define(["dojo/_base/declare"],function(a){return a("Sage.ProximitySearch.SlxDataPoint",null,{constructor:function(a){dojo.mixin(this,a)}})})},"Sage/ProximitySearch/Sandbox":function(){define(["dojo/_base/declare","Sage/ProximitySearch/Ajax","Sage/ProximitySearch/AjaxIndicatorModule","Sage/ProximitySearch/Events"],function(a,b,c,d){var e=a(null,{constructor:function(a,b){this._core=a,this._module=b},subscribe:function(a,b){Array.prototype.unshift.call(arguments,this._module),this._core.subscribe.apply(this._core,arguments)},publish:function(a){Array.prototype.unshift.call(arguments,this._module),this._core.publish.apply(this._core,arguments)},getParameter:function(a){return this._core.getParameter(a)},addSubModule:function(a){this._core.addModule(a)},error:function(a){this.publish("Error",a)},warn:function(a){this.publish("Warning",a)}});return a("Sage.ProximitySearch.Sandbox",null,{_evtHandlers:null,constructor:function(){this._evtHandlers=[],this._parameters={}},subscribe:function(a,b,c,d){this._evtHandlers[b]||(this._evtHandlers[b]=[]),c={scope:a,handler:c,priority:d||0};for(var e=this._evtHandlers[b],f=0;f<e.length;f++)if(e[f].priority>c.priority)return void e.splice(f,0,c);e.push(c)},publish:function(a,b){if(this._evtHandlers[b])for(var c=Array.prototype.slice.call(arguments,2),d=this._evtHandlers[b],e=0;e<d.length;e++)a&&d[e].scope===a||d[e].handler.apply(d[e].scope||window,c)},addModule:function(a){var b=new e(this,a);a.initModule(b)},startAll:function(){},getParameter:function(a){return this._parameters[a]},setParameter:function(a,b){this._parameters[a]=b},addExtension:function(a,b){b.initModule(new e(this)),e.prototype[a]=b}})})},"Sage/QuickForms/Design/main":function(){define(["Sage/QuickForms/Design/CheckBoxControlDesigner","Sage/QuickForms/Design/ColumnDesigner","Sage/QuickForms/Design/ComboBoxControlDesigner","Sage/QuickForms/Design/ControlDesigner","Sage/QuickForms/Design/ControlDesignerRegistry","Sage/QuickForms/Design/CurrencyControlDesigner","Sage/QuickForms/Design/DataGridControlDesigner","Sage/QuickForms/Design/DataSourceDesigner","Sage/QuickForms/Design/DataSourcePanel","Sage/QuickForms/Design/DateTimePickerControlDesigner","Sage/QuickForms/Design/DesignPanel","Sage/QuickForms/Design/DesignSurface","Sage/QuickForms/Design/EmailControlDesigner","Sage/QuickForms/Design/FormDesigner","Sage/QuickForms/Design/GenericControlDesigner","Sage/QuickForms/Design/Help","Sage/QuickForms/Design/HiddenControlDesigner","Sage/QuickForms/Design/NonVisibleControlContainer","Sage/QuickForms/Design/NumericControlDesigner","Sage/QuickForms/Design/OwnerControlDesigner","Sage/QuickForms/Design/PhoneControlDesigner","Sage/QuickForms/Design/PickListControlDesigner","Sage/QuickForms/Design/PropertyEditorContainer","Sage/QuickForms/Design/PropertyValueError","Sage/QuickForms/Design/RowDesigner","Sage/QuickForms/Design/TextBoxControlDesigner","Sage/QuickForms/Design/UrlControlDesigner","Sage/QuickForms/Design/UserControlDesigner","Sage/QuickForms/Design/EditableGridControlDesigner"],function(){})},"Sage/QuickForms/Design/DataSourcePanel":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/string","dojo/dom","dojo/on","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/DeferredList","dijit/_Widget","Sage/Services/_ServiceMixin","Sage/_EventMapMixin","Sage/_Templated","dojo/dnd/Source","dojo/dnd/Manager","dojo/i18n!./nls/DataSourcePanel"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=a("Sage.QuickForms.Design.DataSourcePanelDnDSource",[p],{avatarTemplate:new Simplate(['<div class="design-property" data-property-type="{%: $.data.dataTypeId %}">','<div class="design-property-icon"></div>',"<span>{%: $.propertyPath %}</span>","</div>"]),owner:null,accept:["none"],constructor:function(){this.creator=!0,c.mixin(this,r);var a=dojo.byId("TaskPane_taskPaneHelp");a&&(a.target="",a.href='javascript:Sage.Utility.openHelp("Adding_Data_Field");')},checkAcceptance:function(a,b){return a!=this&&this.inherited(arguments)},onDropInternal:function(a,b,c){},onDropExternal:function(a,b,c){},onDndStart:function(a,b,c){this.inherited(arguments)},onDndCancel:function(){this.inherited(arguments)},getItem:function(a){var b=this.inherited(arguments),d=f.byId(a),e=h.get(d,"data-property"),g=d&&this.owner._context[e];return c.mixin({context:g},b)},_normalizedCreator:function(a,b){var c=this.owner._context[a],d=j.toDom(this.avatarTemplate.apply(c,this)),e=j.create("div",{class:"design-surface-dnd-avatar"});return j.place(d,e),{node:e}}}),t=a("Sage.QuickForms.Design.DataSourcePanel",[l,m,n,o],{events:{"li:click":!0},serviceMap:{dataService:{type:"sdata",name:"metadata"}},widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="design-property-panel">','<div class="design-property-panel-search">',"<div>",'<input type="text" data-dojo-attach-point="queryNode" />',"</div>",'<input type="button" />',"</div>",'<div class="design-property-panel-tree" data-dojo-attach-point="treeNode">',"</div>","</div>"]),containerTemplate:new Simplate(["<ul></ul>"]),propertyTemplate:new Simplate(['<li class="design-property" data-property="{%: $.propertyPath %}" data-property-category="{%: $.type %}" data-property-type="{%: $.data.dataTypeId %}" data-action="_toggle">','<div class="design-property-expando"></div>','<div class="design-property-icon"></div>',"<span>{%: $.displayName %}</span>","</li>"]),loadingTemplate:new Simplate(['<ul class="design-property-loading"><li>{%: $.loadingText %}</li></ul>']),_context:null,_designGroup:null,_designGroupTopics:null,designGroup:"default",queryNode:null,treeNode:null,sortProperty:"propertyName",loadingText:"Loading...",_getDesignGroupAttr:function(){return this._designGroup},_setDesignGroupAttr:function(a){this._designGroupTopics&&b.forEach(this._designGroupTopics,function(a){this.unsubscribe(a)},this),this._designGroup=a,this._designGroupTopics=[this.subscribe(e.substitute("/quickforms/design/${0}/clear",[this._designGroup]),this._onFormCleared),this.subscribe(e.substitute("/quickforms/design/${0}/load",[this._designGroup]),this._onFormLoaded)]},constructor:function(){this._context={},this._sources=[]},uninitialize:function(){this._sources&&b.forEach(this._sources,function(a){a.destroy()}),this._sources=[]},clear:function(){j.empty(this.treeNode),this._context={}},_onFormCleared:function(){this.clear()},_onFormLoaded:function(a){var b=a.entity.EntityTypeName.substr(1);this._load(b,this.treeNode)},_toggle:function(a,b){var c=h.get(b,"data-property"),d=this._context[c];d&&d.data.entityName&&(d.loaded?i.toggle(b,"design-property-expanded"):(i.add(b,"design-property-expanded"),d.loaded=!0,this._load(d.data.entityName,b)))},_load:function(a,b){var f,g=j.place(this.loadingTemplate.apply(this,this),b),h=[];f=new d,new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("entities").setResourceSelector('"'+a+'"').setQueryArg("select","properties/*").read({success:c.hitch(this,this._onPropertyRequestSuccess,f,a),failure:c.hitch(this,this._onRequestFailure,f)}),h.push(f),f=new d,new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setResourceKind("relationships").setQueryArg("where",e.substitute('(parentEntity.name eq "${0}" and cardinality eq "M:1") or (childEntity.name eq "${0}" and cardinality eq "1:M")',[a])).read({success:c.hitch(this,this._onRelationshipRequestSuccess,f,a),failure:c.hitch(this,this._onRequestFailure,f)}),h.push(f),f=new d,new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setResourceKind("entities").setQueryArg("where",e.substitute('extendedEntity.name eq "${0}"',[a])).setQueryArg("select","extendedEntityPropertyName").read({success:c.hitch(this,this._onExtendedRequestSuccess,f,a),failure:c.hitch(this,this._onRequestFailure,f)}),h.push(f),new k(h,!1,!0,!0).then(c.hitch(this,this._process,b,g),c.hitch(this,this._error,b,g))},_onPropertyRequestSuccess:function(a,b,c){a.resolve(c.properties.$resources)},_onExtendedRequestSuccess:function(a,c,d){var e=b.map(d.$resources,function(a){return{displayName:a.$descriptor,propertyName:a.$key,entityName:a.$key}});a.resolve(e)},_onRelationshipRequestSuccess:function(a,c,d){var e=[],f=d.$resources;b.forEach(f,function(a){c==a.parentEntity.$key&&a.parentProperty.isIncluded?e.push({displayName:a.parentProperty.displayName,propertyName:a.parentProperty.propertyName,propertyId:a.parentProperty.id,entityName:a.childEntity.$key,includes:b.map(a.columns.$resources,function(a){return a.parentPropertyId})}):c==a.childEntity.$key&&a.childProperty.isIncluded&&e.push({displayName:a.childProperty.displayName,propertyName:a.childProperty.propertyName,propertyId:a.childProperty.id,entityName:a.parentEntity.$key,includes:b.map(a.columns.$resources,function(a){return a.childPropertyId})})},this),a.resolve(e)},_onRequestFailure:function(a,b){a.reject(b)},_error:function(a,b,c){j.destroy(b)},_process:function(a,c,d){var e,f=h.get(a,"data-property"),g={},i=[],k=[];b.forEach(d[1][1],function(a){b.forEach(a.includes,function(a){g[a]=!0}),i.push({propertyPath:f?f+"."+a.propertyName:a.propertyName,propertyName:a.propertyName,displayName:a.displayName||a.propertyName,type:"relationship",data:a})}),b.forEach(d[0][1],function(a){g[a.id]||a.isIncluded&&k.push({propertyPath:f?f+"."+a.propertyName:a.propertyName,propertyName:a.propertyName,displayName:a.displayName||a.propertyName,type:"standard",data:a,dataTypeData:a.dataTypeData?dojo.fromJson(a.dataTypeData):{}})}),e=b.map(d[2][1],function(a){return{propertyPath:f?f+"."+a.propertyName:a.propertyName,propertyName:a.propertyName,displayName:a.displayName||a.propertyName,type:"extended",data:a}});var l=k.concat(i,e),m=this.sortProperty;l.sort(function(a,b){var c=a[m],d=b[m];return c<d?-1:c>d?1:0}),j.destroy(c),this.render(a,l)},render:function(a,c){var d=j.place(this.containerTemplate.apply(this,this),a),e=this;b.forEach(c,function(a){this._context[a.propertyPath]=a;var b=j.place(this.propertyTemplate.apply(a,this),d);b&&"standard"==a.type?(h.set(b,"dndType","property"),h.set(b,"dndData",a.propertyPath),i.add(b,"dojoDndItem")):g(b,"mousedown",function(){e._sources&&e._sources.length>0&&e._sources[0].selectNone()})},this);var f=new t.Source(d,{owner:this,copyOnly:!0,selfAccept:!1});f.startup(),this._sources.push(f)}});return t.Source=s,t})},"Sage/TaskPane/main":function(){define(["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/UserTasklet","Sage/TaskPane/AccountingTasksTasklet","Sage/TaskPane/ActivityManagerTasklet","Sage/TaskPane/ActivityTaskConfigurationProvider","Sage/TaskPane/ActivityTaskContents","Sage/TaskPane/ActivityTaskPaneActions","Sage/TaskPane/ActivityTaskPaneItem","Sage/TaskPane/CommonTasksTasklet","Sage/TaskPane/ContactTasksTasklet","Sage/TaskPane/CountryTasksTasklet","Sage/TaskPane/GroupListTasklet","Sage/TaskPane/LiteratureManagementTasks","Sage/TaskPane/QuoteTasksTasklet","Sage/TaskPane/OpportunityTasksTasklet","Sage/TaskPane/SecuredActionTasklet","Sage/TaskPane/TaskPaneContent","Sage/TaskPane/TaskPaneItem","Sage/TaskPane/SecurityManagerTasksTasklet","Sage/TaskPane/JobManagerTasksTasklet","Sage/TaskPane/ReportManagerTasksTasklet","Sage/TaskPane/GroupManagerTasksTasklet","Sage/TaskPane/EntityManagerTasklet","Sage/TaskPane/EntityTaskConfigurationProvider","Sage/TaskPane/EntityTaskContents","Sage/TaskPane/ExchangeRateTasksTasklet","Sage/TaskPane/SalesOrderTasksTasklet","Sage/TaskPane/SyncHistoryTasksTasklet","Sage/TaskPane/ERPBillToTasksTasklet","Sage/TaskPane/ERPShipToTasksTasklet","Sage/TaskPane/ERPPayFromTasksTasklet"],function(){})},"Sage/TaskPane/_BaseTaskPaneTasklet":function(){define(["Sage/UI/Dialogs","dojo/i18n!./nls/_BaseTaskPaneTasklet","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.TaskPane._BaseTaskPaneTasklet",null,{currentEntityId:"",currentEntityTableName:"",currentEntityType:"",currentEntityDisplayName:"",contextService:null,selectedRecordActionCallback:"",selectionContainer:"_hfSelections",constructor:function(a){dojo.mixin(this,a),dojo.mixin(this,b)},getSelectionInfo:function(){try{var b=Sage.Utility.getSelectionInfo();if(!b&&(this.getCurrentEntity(),this.currentEntityId)){b={},b.key=this.currentEntityId,b.mode="selection",b.ranges=[],b.recordCount=1,b.selectedIds=[],b.selectedIds.push(this.currentEntityId),b.selectionCount=1,b.selections=[];var c={};c.id=this.currentEntityId,c.rn=0,b.selections.push(c)}return b}catch(b){return a.alert(this.errorNoData),null}},confirmBeforePrepareSelectedRecords:function(a,b){confirm(a)&&this.prepareSelectedRecords(b)},prepareSelectedRecords:function(b){this.selectedRecordActionCallback=b;var c=this;try{this.selectionInfo=this.getSelectionInfo()}catch(b){a.showInfo(this.errorNoData)}if(0===this.selectionInfo.selectionCount&&this.selectionInfo.recordCount>0){var d=dojo.string.substitute(this.noRecordsSelectedProcessAll,[this.selectionInfo.recordCount]);a.raiseQueryDialog(this.salesLogixPageTitle,d,function(a){c.storeAllSelectionsOrCancel(a,c.selectionInfo)},this.yesButtonText,this.noButtonText)}else this.selectionInfo.recordCount>0?(this.selectionInfo.mode="selection",this.saveSelections(this.selectedRecordActionCallback,this.selectionInfo)):a.showInfo(this.errorNoData)},storeAllSelectionsOrCancel:function(a,b){if(a)b.mode="selectAll",this.saveSelections(this.selectedRecordActionCallback,b);else{var c=dojo.byId([this.clientId,this.selectionContainer].join(""));c&&(c.value="cancel")}},saveSelections:function(a,b){if(null!==b){var c=Sage.Services.getService("SelectionContextService"),e=[this.clientId,this.selectionContainer].join("");c.setSelectionContext(b.key,b,d.partial(a,e));var f=dojo.byId([this.clientId,this.selectionContainer].join(""));f&&(f.value=b.key)}},verifySelection:function(a){return null!==a&&0!==a.selectionCount},verifySingleSelection:function(a){return null!==a&&1===a.selectionCount},
getCurrentEntity:function(){if(Sage.Services.hasService("ClientEntityContext")){this.contextService=Sage.Services.getService("ClientEntityContext"),this.context=this.contextService.getContext(),this.currentEntityId=this.context.EntityId,this.currentEntityType=this.context.EntityType,this.currentEntityTableName=this.context.EntityTableName,this.currentEntityDisplayName=this.context.DisplayName;var a=this.currentEntityType.split("Sage.Entity.Interfaces.I");a&&(this.currentEntityPrettyName=a[1])}},setSelectionCount:function(){try{var a=dijit.byId("list");a&&dojo.byId("selectionCount").text(a.getTotalSelectionCount())}catch(a){}},getSelectionCount:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupCount},getCurrentGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().CurrentGroupID}return""},getCurrentGroupName:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().CurrentDisplayName}return""},getDefaultGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().DefaultGroupID}return""}})})},"Sage/TaskPane/UserTasklet":function(){define(["dojo/i18n!./nls/UserTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/string","Sage/Utility","dojo/_base/declare","Sage/TaskPane/User/ContactUserAssociationEditor","Sage/Data/SingleEntrySDataStore","Sage/UI/Dialogs","Sage/MainView/CopyUserProfile/CopyUserProfileController"],function(a,b,c,d,e,f,g,h,i,j){return f("Sage.TaskPane.UserTasklet",[b,c],{addToRoleTitle:"Add to Role",resetUsersTitle:"Reset Users",taskItems:[],constructor:function(){dojo.mixin(this,a),"detail"===e.getModeId()?this.taskItems=[{taskId:"promoteUsers",type:"Link",displayName:this.promoteTitle,clientAction:"userTaskletActions.promoteUsers();",securedAction:"Entities/User/Promote"}]:this.taskItems=[{taskId:"AddToRole",type:"Link",displayName:this.addToRoleTitle,clientAction:"userTaskletActions.addUsersToRole();",securedAction:"Entities/User/Add"},{taskId:"ResetUsers",type:"Link",displayName:this.resetUsersTitle,clientAction:"userTaskletActions.resetUsers();",securedAction:"Entities/User/Add"},{taskId:"tskActionCopyUserProfile",type:"Link",displayName:this.taskText_CopyUserProfile,clientAction:"userTaskletActions.actionCopyUserProfile();",securedAction:"Entities/User/Add"},{taskId:"Associate Contact",type:"Link",displayName:this.associateContactTitle,clientAction:"userTaskletActions.associateContact();",securedAction:"Entities/User/AssociateUser"},{taskId:"Disassociate Contact",type:"Link",displayName:this.disAssociateContactTitle,clientAction:"userTaskletActions.disAssociateContact();",securedAction:"Entities/User/DisAssociateUser"},{taskId:"AddToTeamCaption",type:"Link",displayName:this.addToTeamCaption,clientAction:"commonTaskActions.prepareSelectedRecords(commonTaskActions.addToTeam);",securedAction:"Entities/User/Add"},{taskId:"tskRemoveFromAllTeams",type:"Link",displayName:this.removeFromAllTeamsCaption,clientAction:d.substitute("commonTaskActions.confirmBeforePrepareSelectedRecords('${0}',commonTaskActions.removeFromAllTeams);",[this.areYouSure]),securedAction:"Entities/User/Add"},{taskId:"promoteUsers",type:"Link",displayName:this.promoteTitle,clientAction:"userTaskletActions.promoteUsers();",securedAction:"Entities/User/Promote"}]},actionCopyUserProfile:function(){this.getCurrentEntity();var a=function(){new j(this.currentEntityPrettyName,this.currentEntityTableName,this.selectionInfo).startDialog()}.bind(this);this.prepareSelectedRecords(a)},resetUsers:function(){"detail"===e.getModeId()?this.onResetUsersClick():this.prepareSelectedRecords(this.resetUsersAction(this))},addUsersToRole:function(){"detail"===e.getModeId()?this.onAddUserClick():this.prepareSelectedRecords(this.actionItem(this))},actionItem:function(a){return function(){a.onAddUserClick()}},resetUsersAction:function(a){return function(){a.onResetUsersClick()}},onAddUserClick:function(){var a=dojo.byId([this.clientId,"_tskAddUserToRole"].join(""));a&&a.click()},onResetUsersClick:function(){var a=dojo.byId([this.clientId,"_tskResetUsers"].join(""));a&&a.click()},associateContact:function(a){var b=this;if(a||(a="associate"),this._selectionInfo=this.getSelectionInfo(),0===this._selectionInfo.selectionCount)Sage.UI.Dialogs.showError(this.singleSelectionErrorMessage);else if(this._selectionInfo.selectionCount>1)Sage.UI.Dialogs.showError(this.multipleSelectionErrorMessage);else{var c={selectionInfo:this._selectionInfo,action:a};this._setupStore(),this._contactUserStore.fetch({predicate:"UserId eq '"+this._selectionInfo.selectedIds[0]+"'",onComplete:function(a){Sage.UI.Dialogs.showError(b.associationExistsMessage)},onError:function(){b.prepareSelectedRecords(this.associateContactActionItem(c))},scope:this})}},_setupStore:function(){this._contactUserStore||(this._contactUserStore=new h({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")}))},associateContactActionItem:function(a,b){return function(){var c=dijit.byId("dlgContactUserAssociation");c?c.setSelectionInfo(a,b):c=new g(a,b),c.show()}},disAssociateContact:function(){this._selectionInfo=this.getSelectionInfo(),0===this._selectionInfo.selectionCount?Sage.UI.Dialogs.showError(this.noSelectionErrorMessage):this.prepareSelectedRecords(this.confirmDisassociate(this))},confirmDisassociate:function(a){return function(){var b=a.confirmDisAssociate;a._selectionInfo.selectionCount>1&&(b=a.confirmDisAssociateMultiple),i.raiseQueryDialog(a.disAssociateDialogTitle,dojo.string.substitute(b,[a._selectionInfo.selectionCount]),function(b){a.disAssociateActionItem(b,a)},a.okButtonText,a.cancelButtonText)}},disAssociateActionItem:function(a,b){if(a){b.getSelectionInfo();var c=this.selectionInfo.selectedIds.join();this._removeContactUsers(c,b._successfulContactUserDelete,b)}},_removeContactUsers:function(a,b,c){var d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("ContactUsers").setOperationName("RemoveContactUserAssociations"),f={$name:"RemoveContactUserAssociations",request:{ContactUserId:null,contactIds:null,userIds:a}};e.execute(f,{success:function(){},failure:function(){},scope:c||this})},promoteUsers:function(a){this.prepareSelectedRecords(this.promoteSelectedUser(this.getSelectionInfo()))},promoteSelectedUser:function(a){var b=this,c=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(c).setResourceKind("Users").setOperationName("PromoteUser"),f={$name:"PromoteUser",request:{entityIds:a.selectionCount>0?a.selectedIds.join(",")||"":""}};e.execute(f,{success:function(){1==a.selectionCount?i.showInfo(b.promotedsuccessfully):a.selectionCount>1?i.showInfo(d.substitute(b.requestsuccessfullcompleted,[a.selectionCount])):i.showError(b.promoteNoneSelected)},failure:function(){}})}})})},"Sage/TaskPane/TaskPaneContent":function(){define(["dijit/_Widget","Sage/_Templated","Sage/TaskPane/TaskPaneItem","dojo/_base/declare"],function(a,b,c,d){return d("Sage.TaskPane.TaskPaneContent",[a,b],{widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div dojoAttachPoint="taskletContainerNode" class="task-pane-item-common-tasklist">',"{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}",'<div data-dojo-type="Sage.TaskPane.TaskPaneItem" linkText="{%= task.displayName %}" securedAction="{%= task.securedAction %}" action="javascript: {%= task.clientAction %}"></div>',"<br />","{% } %}","</div>"])})})},"Sage/TaskPane/TaskPaneItem":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(a,b,c){return c("Sage.TaskPane.TaskPaneItem",[a,b],{securedAction:"",linkText:"",confirmMsg:"",clientAction:"",serverAction:"",currentActionIndex:-1,actions:[],selectedItemList:{},action:"",type:"",postCreate:function(a){this.checkSecurityAccess()},templateString:'<span class="activity-type-link" dojoAttachPoint="linkTextNode"></span>',attributeMap:dojo.delegate(a.prototype.attributeMap,{linkText:{node:"linkTextNode",type:"innerHTML"},action:{node:"linkTextNode",type:"attribute",attribute:"onclick"}}),setActionList:function(){this.actions.push(this.startConfirm),this.actions.push(this.startGetSelectedItems),this.actions.push(this.startClientAction),this.actions.push(this.startServerAction)},doNextAction:function(){this.currentActionIndex++,this.actions[this.currentActionIndex].call()},startConfirm:function(){var a=!0;this.confirmMsg&&(a=confirm(this.confirmMsg)),this.processConfirmResult(a)},processConfirmResult:function(a){!0===a&&this.doNextAction()},startClientAction:function(){var a=!0;this.clientAction&&"function"==typeof this.clientAction&&(a=this.clientAction.call()),this.processClientActionResult(a)},processClientActionResult:function(a){this.doNextAction()},startServerAction:function(){this.serverAction&&this.selectedItemList.length>0&&__doPostBack(this.serverAction,this.selectedItemList)},startGetSelectedItems:function(){var a={key:"selectAll"},b=Sage.Services.getService("SelectionContextService");b&&b.getSelectedIds(a,this.processGetSelectedItemsResult)},processGetSelectedItemsResult:function(a){this.selectedItemList=a,this.doNextAction()},getCurrentUserId:function(){var a="",b=Sage.Services.getService("ClientContextService");return b&&(a=b.getValue("userID")),a},checkSecurityAccess:function(){var a="none";if(this.securedAction.length>0){Sage.Services.getService("RoleSecurityService").hasAccess(this.securedAction,function(b){b&&(a="inline")})}dojo.style(this.domNode,{display:a}),"none"===a&&this.domNode.nextSibling&&"BR"===this.domNode.nextSibling.nodeName&&dojo.style(this.domNode.nextSibling,{display:a})}})})},"Sage/TaskPane/User/ContactUserAssociationEditor":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ContactUserAssociationEditor","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/string","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dojo/text!./templates/ContactUserAssociationEditor.html","Sage/UI/Controls/SingleSelectPickList","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/Form"],function(declare,i18nStrings,singleEntrySDataStore,writableSDataStore,sDataServiceRegistry,_DialogHelpIconMixin,dojoLang,dstring,dijitDialog,_Widget,_Templated,Dialogs,Lookup,template){var contactUserAssociationEditor=declare("Sage.TaskPane.User.ContactUserAssociationEditor",[_Widget,_Templated],{id:"dlgContactUserAssociation",actionType:!1,_dialog:!1,_updateableProperties:!1,selectedFieldIndex:1,lup_User:!1,_selectionInfo:!1,widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(a){this._selectionInfo=a.selectionInfo.selectedIds,this.actionType=a.action,dojo.mixin(this,i18nStrings),this.actionType},associationExists:function(a,b,c,d){this._setupStore();var e=dstring.substitute("UserId eq '${0}' ",[c.UserId]);this._contactUserStore.fetch({query:e,onComplete:function(e){e&&e.length>0?b.call(d,e,c):a.call(d,c)},onError:function(){a.call(d,c)},scope:this})},loadContactData:function(a,b,c){if(a){this._setupStore();var d=dstring.substitute("ContactId in ['${0}'] ",[this._selectionInfo.join("','")]);this._contactUserStore.fetch({query:d,onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this}),this._contactUserStore.fetch({predicate:"'"+a+"'",onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this})}},setSelectionInfo:function(a){this._selectionInfo=a.selectionInfo.selectedIds,this.actionType=a.action},show:function(){this._dialog.show(),this.lup_User||this.createContactLookup()},createContactLookup:function(){this.contactLookupConfig={id:"_contactLookup",structure:[{label:this.lookupFirstNameColText,field:"FirstName",sortable:!0},{label:this.lookupLastNameColText,field:"LastName",sortable:!0},{label:this.lookupTitleColText,field:"Title",sortable:!0},{label:this.lookupAccountColText,field:"AccountName",sortable:!0},{label:this.lookupWorkPhoneColText,field:"WorkPhone",sortable:!0},{label:this.lookupEmailText,field:"Email",sortable:!0}],gridOptions:{contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"LastName"}]},isModal:!0,initialLookup:!0,returnPrimaryKey:!0,dialogTitle:this.lookupContactText,dialogButtonText:this.btnOK_Caption},this.lup_Contact=new Lookup({id:"lu_Contact",config:this.contactLookupConfig,style:"width:100%"}),dojo.place(this.lup_Contact.domNode,this.contactLookup_Container.domNode,"only")},_setupStore:function(){this._contactUserStore||(this._contactUserStore=new writableSDataStore({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")}))},_okClick:function(){var a=this.lup_Contact.selectedObject.$key;if(this._selectionInfo&&a)if(this._setupStore(),"associate"===this.actionType){var b={UserId:this._selectionInfo[0],ContactId:a};this.associationExists(this._insertAssociation,function(){Sage.UI.Dialogs.showError(this.associationExistsMessage)},b,this)}else if("disassociate"===this.actionType)for(var c=0;c<this._selectionInfo.count;c++);},_insertAssociation:function(a,b){this._contactUserStore.saveNewEntity(a,this._successfulContactUserSave,this._failedContactUserSave,this)},_successfulContactUserSave:function(a){this._dialog.hide()},_failedContactUserSave:function(a){this._dialog.hide()},_close:function(){this._dialog.hide()}});return contactUserAssociationEditor})},"Sage/MainView/CopyUserProfile/CopyUserProfileController":function(){define(["dojo/_base/declare","dojo/string","dojo/_base/array","Sage/MainView/CopyUserProfile/_CopyUserProfileBase","Sage/MainView/CopyUserProfile/CopyUserProfile","dojo/topic"],function(a,b,c,d,e,f){return a("Sage.MainView.CopyUserProfile.CopyUserProfileController",null,{_dialog:null,_selectionInfo:null,_entityPrettyName:null,_entityTableName:null,constructor:function(a,b,c){this._entityPrettyName=a,this._entityTableName=b,this._selectionInfo=c},startDialog:function(){if(this._dialog=dijit.byId("dlgCopyUserProfile"),!this._dialog){var a=this._getCurrentGroupId();"LOOKUPRESULTS"===a&&(a=this._getDefaultGroupId()),this._dialog=new e({_entityPrettyName:this._entityPrettyName,_entityTableName:this._entityTableName,selectionInfo:this._selectionInfo,_groupToProcess:a,id:"dlgCopyUserProfile"}),this._dialog.startup()}this._dialog.show()},_getCurrentGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().CurrentGroupID}return""},_getDefaultGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().DefaultGroupID}return""}})})},"Sage/MainView/CopyUserProfile/_CopyUserProfileBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/store/Memory","dijit/_Widget","Sage/_Templated","dojo/i18n!./nls/_CopyUserProfileBase","Sage/UI/Controls/_DialogHelpIconMixin","dijit/form/FilteringSelect"],function(a,b,c,d,e,f,g,h,i,j){return a("Sage.MainView.CopyUserProfile._CopyUserProfileBase",[f,g],{_dialog:null,baseNlsResources:h,_helpIconTopic:"CopyUserProfile",widgetsInTemplate:!0,constructor:function(){dojo.mixin(this,h)},show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(d.mixin(this._dialog,new i),this._dialog.createHelpIconByTopic(this._helpIconTopic),this._dialog.helpIcon.tabIndex="-1"))},startup:function(){this.inherited(arguments)},_destroyObjects:function(){this.destroyRecursive()},_btnCancel_OnClick:function(){this._dialog.hide(),this._destroyObjects()}})})},"Sage/MainView/CopyUserProfile/CopyUserProfile":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","dojo/store/Memory","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","Sage/MainView/CopyUserProfile/_CopyUserProfileBase","dojo/text!./templates/CopyUserProfile.html","dojo/i18n!./nls/CopyUserProfile","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/Dialogs","Sage/Utility/Jobs","Sage/UI/Controls/Lookup"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return a("Sage.MainView.CopyUserProfile.CopyUserProfile",[i],{id:"dlgCopyUserProfile",useUser:!1,widgetTemplate:l.makeTemplateFromString(j),_nlsResources:k,selectionInfo:null,_groupToProcess:null,_entityPrettyName:null,_entityTableName:null,constructor:function(a){h.mixin(this,a)},startup:function(){this._initUserLookup(),this._initTemplateLookup(),this.radUser.checked=!0,this._radUser_OnChange(),this.inherited(arguments)},destroy:function(){this.lueUser&&this.lueUser.destroy(),this.lueTemplate&&this.lueTemplate.destroy(),this.radUser&&this.radUser.destroy(),this.radTemplate&&this.radTemplate.destroy(),this.inherited(arguments)},_btnOk_OnClick:function(){this._startCopyProfileJob()},_initUserLookup:function(){this.userLookupConfig={id:"user",structure:[{label:k.lookupUserNameColText,field:"UserName"},{label:k.lookupTitleColText,field:"UserInfo.Title"},{label:k.lookupDepartmentColText,field:"UserInfo.Department"},{label:k.lookupRegionColText,field:"UserInfo.Region"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserName"}]},isModal:!0,initialLookup:!0,preFilters:[{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"5"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"6"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"8"}],returnPrimaryKey:!0,dialogTitle:k.lookupUser_Caption,dialogButtonText:this.btnOK_Caption},this.lueUser=new p({id:"lu_User",config:this.userLookupConfig,allowClearingResult:!0,style:"width:100%"}),f.place(this.lueUser.domNode,this.user_Container.domNode,"only")},_initTemplateLookup:function(){this.templateLookupConfig={id:"template",structure:[{label:k.lookupUserNameTemplateColText,field:"UserName"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserName"}]},isModal:!0,initialLookup:!0,preFilters:[{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"=",filterValue:"6"}],returnPrimaryKey:!0,dialogTitle:k.lookupUser_Caption,dialogButtonText:this.btnOK_Caption},this.lueTemplate=new p({id:"lu_Template",config:this.templateLookupConfig,allowClearingResult:!0,style:"width:100%"}),f.place(this.lueTemplate.domNode,this.template_Container.domNode,"only")},_setDomNodeVisible:function(a,b){a&&b?g.remove(a,"display-none"):a&&g.add(a,"display-none")},_radUser_OnChange:function(){this.useUser=this.radUser.checked,this._setDomNodeVisible(this.userControlPoint,this.useUser),this._setDomNodeVisible(this.templateControlPoint,!this.useUser)},_getCopyParameters:function(){var a={General:this.chkGeneral.checked,Calendar:this.chkCalendar.checked,Employee:this.chkEmployee.checked,ClientOptions:this.chkClient.checked,Security:this.chkSecurity.checked,Service:this.chkService.checked,Teams:this.chkTeams.checked};return this.useUser?a.SourceUserId=this.lueUser.selectedObject.$key:a.SourceUserId=this.lueTemplate.selectedObject.$key,a},_startCopyProfileJob:function(){var a={descriptor:k.txtJobDescriptor,closable:!0,title:k.dlg_Title,key:"Sage.SalesLogix.BusinessRules.Jobs.EntityIdMasterJob",parameters:[{name:"EntityName",value:this._entityPrettyName},{name:"SelectedIds",value:this.selectionInfo.selectionCount>0?this.selectionInfo.selectedIds.join(",")||"":""},{name:"GroupId",value:this._groupToProcess},{name:"AppliedFilters",value:Sys.Serialization.JavaScriptSerializer.serialize(o.getFiltersForJob())},{name:"LookupConditions",value:Sys.Serialization.JavaScriptSerializer.serialize(o.getLookupConditionsForJob())},{name:"EntityTableName",value:this.currentEntityTableName},{name:"Parameters",value:Sys.Serialization.JavaScriptSerializer.serialize(this._getCopyParameters())},{name:"FullTypeQualifiedJobName",value:"Sage.SalesLogix.BusinessRules.Jobs.CopyUserProfileJob"}],failure:function(a){n.showError(k.jobFailer)},ensureZeroFilters:!0};o.triggerJobAndDisplayProgressDialog(a)}})})},"Sage/TaskPane/AccountingTasksTasklet":function(){define(["dojo/_base/lang","dojo/i18n!./nls/AccountingTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","dojo/string","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/MainView/IntegrationContract/PromoteWidget","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j){return e("Sage.TaskPane.AccountingTasksTasklet",[c,d],{taskItems:[],constructor:function(){a.mixin(this,b),isIntegrationContractEnabled&&(this.taskItems=[{taskId:"promoteAccount",type:"Link",displayName:this.promoteTitle,clientAction:"accountingTasksActions.validateCanPromote()",securedAction:"Entities/Account/PromoteAccount"}])},validateCanPromote:function(){this.getCurrentEntity();var b;if("detail"===Sage.Utility.getModeId())b=this.currentEntityId;else{var c=this.getSelectionInfo();if(!this.verifySingleSelection(c))return j.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;b=c.selectedIds[0]}if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return j.showError(this.integrationNotEnabled),!1;var d=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));d.setResourceKind("accounts"),d.setOperationName("CanPromoteAccount");var e={$name:"CanPromoteAccount",request:{AccountId:b}};d.execute(e,{success:a.hitch(this,function(){this._promoteAccount(b)})})},_promoteAccount:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(h.getSDataService("dynamic"));b.setResourceKind("accounts"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",f.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new i(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})}})})},"Sage/TaskPane/ActivityManagerTasklet":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/UI/Dialogs","Sage/Services/ActivityService","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.TaskPane.ActivityManagerTasklet",[a,b,d,c],{serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"}},widgetsInTemplate:!1,widgetTemplate:new Simplate(['<div class="activityTask-panel"  dojoAttachPoint="containerNode">',"</div>"]),_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:!0,taskGroup:"default",paneContents:null,constructor:function(){},postCreate:function(){this.inherited(arguments),!this._configurationProvider&&this._configurationProviderType&&this.set("configurationProvider",new this._configurationProviderType),this.autoConfigure&&this.requestConfiguration()},uninitialize:function(){this.inherited(arguments),this._configurationProvider&&this._configurationProvider.destroy()},_handleConfigurationChange:function(){this.requestConfiguration()},_setConfigurationProviderAttr:function(a){this._configurationConnects&&dojo.forEach(this._configurationConnects,function(a){this.disconnect(a)},this),this._configurationProvider&&this._configurationProvider.destroy(),this._configurationProvider=a,this._configurationConnects=[],this._configurationProvider&&(this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange)),this._configurationProvider.set("owner",this),this._created&&this.autoConfigure&&this.requestConfiguration())},_getConfigurationProviderAttr:function(){return this._configurationProvider},_setConfigurationProviderTypeAttr:function(a){this._configurationProviderType=a},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType},requestConfiguration:function(){this._configurationProvider&&this._configurationProvider.requestConfiguration({success:dojo.hitch(this,this._applyConfiguration)})},_applyConfiguration:function(a){this._configuration=a,this._configuration&&(this.paneContents&&this.paneContents.destroyRecursive(),dojo.place(this._configuration.taskPane.domNode,this.containerNode,"only"),this.paneContents=this._configuration.taskPane)}})})},"Sage/TaskPane/ActivityTaskConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Services/ActivityService","Sage/TaskPane/ActivityTaskContents","Sage/TaskPane/ActivityTaskPaneItem","dojo/on","dojo/_base/lang","dojo/i18n!./nls/ActivityTaskConfigurationProvider","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.TaskPane.ActivityTaskConfigurationProvider",[b,a],{serviceMap:{groupContextService:"ClientGroupContext"},_roleSecurityService:null,_currentUserId:null,scheduleText:"Schedule",eventText:"Event",phoneCallText:"Phone Call",toDoText:"To-Do",meetingText:"Meeting",personalActivityText:"Personal Activity",deleteConfirmationText:"Delete Confirmation",acceptConfirmationText:"Accept Confirmation",declineConfirmationText:"Decline Confirmation",completeActivityText:"Complete Activity",deleteActivityText:"Delete Activity",deleteEventText:"Delete Event",scheduleEventText:"Schedule Event",scheduleRequestText:"Schedule Request",deleteRequestText:"Delete Request",recordsSelectedText:"record(s) selected",clearText:"Clear",actionNameSpace:"Sage.TaskPane.ActivityTaskPaneActions",_taskConfigs:!1,constructor:function(a){g.mixin(this,h),this.inherited(arguments),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));var b=Sage.Services.getService("ClientContextService");b&&b.containsKey("userID")&&(this._currentUserId=b.getValue("userID")),this._roleSecurityService=Sage.Services.getService("RoleSecurityService")},_onGroupContextChanged:function(){this.onConfigurationChange()},onConfigurationChange:function(){},_createConfiguration:function(){var a=this.groupContextService&&this.groupContextService.getContext(),b=a&&a.CurrentGroupID,c=this.getTaskConfiguration(b),e=new d({taskTemplate:c.configuration.taskTemplate});return e.startup(),{tabId:c.configuration.key,taskPane:e}},getTaskConfiguration:function(a){for(var b=this.getTaskConfigurations(),c=0;c<b.length;c++)if(b[c].key.toUpperCase()===a.toUpperCase())return b[c];return{key:"default",configuration:this._getDefaultConfig()}},getTaskConfigurations:function(){return this._taskConfigs?this._taskConfigs:(this._taskConfigs=[{key:"activities",configuration:this._getActivityConfig()},{key:"allopen",configuration:this._getActivityConfig()},{key:"pastdue",configuration:this._getPastDueConfig()},{key:"alarms",configuration:this._getAlarmConfig()},{key:"events",configuration:this._getEventConfig()},{key:"confirmations",configuration:this._getConfirmConfig()},{key:"literature",configuration:this._getLitRequestConfig()}],this._taskConfigs)},_getTaskTemplateString:function(a,b){var c=[];c.push('<div class="task-pane-item-common-tasklist">'),c.push('<span id="selectionCount" class="task-pane-item-common-selectionText"> 0 </span><span id="selectionText"> '+this.recordsSelectedText+"</span><br>"),c.push('<a id="clearSelection" href="#" class="task-pane-item-common-clearselection" dojoAttachEvent="click:_clearSelection">'+this.clearText+"</a><br>"),c.push("<hr>");for(var d=0;d<a.length;d++){var e=a[d],f=this.actionNameSpace;if(e.actionNameSpace&&(f=e.actionNameSpace),e.template)c.push(e.template);else{c.push("<li>");var g="";e.style&&(g=e.style),c.push(dojo.string.substitute('<div dojotype="Sage.TaskPane.ActivityTaskPaneItem" class="task-pane-item-common-tasklist" style="${4}"  linkText="${3}" securedAction="${4}" action="javascript: ${1}.${2}"></div>',[e.taskId,f,e.action,e.displayName,e.securedAction,g]))}}return c.push("</div>"),c},_getCommonTasks:function(){return[]},_getCommonActivityTasks:function(){var a=this._getCommonTasks();return a.push({template:"<div class='slxLabel'>"+this.scheduleText+"</div>"}),a.push({template:"<div>"}),a.push({taskId:"SchedulePhoneCall",type:"Link",displayName:this.phoneCallText,action:"schedulePhoneCall();",securedAction:"",style:"padding-left:15px;"}),a.push({taskId:"ScheduleMeeting",displayName:this.meetingText,action:"scheduleMeeting()",securedAction:"",style:"padding-left:15px;"}),a.push({taskId:"ScheduleToDo",type:"Link",displayName:this.toDoText,action:"scheduleToDo();",securedAction:"",style:"padding-left:15px;"}),a.push({taskId:"SchedulePersonal",type:"Link",displayName:this.personalActivityText,action:"schedulePerosnalActivity();",securedAction:"",style:"padding-left:15px;"}),a.push({template:"</div>"}),a.push({taskId:"Complete",type:"Link",displayName:this.completeActivityText,action:"completeActivity();",securedAction:""}),a.push({taskId:"Delete",type:"Link",displayName:this.deleteActivityText,action:"deleteActivity();",securedAction:""}),a},_getActivityConfig:function(a,b){var c=this._getCommonActivityTasks(),d="Activities",e=this._getTaskTemplateString(c,d);return{key:"activities",taskTemplate:new Simplate(e)}},_getPastDueConfig:function(a,b){var c=this._getCommonActivityTasks(),d="Past Due",e=this._getTaskTemplateString(c,d);return{key:"PastDue",taskTemplate:new Simplate(e)}},_getAlarmConfig:function(a,b){var c=this._getCommonActivityTasks(),d="Alarms",e=this._getTaskTemplateString(c,d);return{key:"Alarms",taskTemplate:new Simplate(e)}},_getLitRequestConfig:function(a,b){var c=this._getCommonTasks();c.push({taskId:"ScheduleLitRequest",displayName:this.scheduleRequestText,action:"scheduleLitRequest();",securedAction:"",style:"padding-left:15px;"}),c.push({taskId:"DeleteRequest",displayName:this.deleteRequestText,action:"deleteLitRequest();",securedAction:""});var d="Litature Requests",e=this._getTaskTemplateString(c,d);return{key:"LitRequests",taskTemplate:new Simplate(e)}},_getEventConfig:function(a,b){var c=this._getCommonTasks();c.push({taskId:"ScheduleEvent",displayName:this.scheduleEventText,action:"scheduleEvent();",securedAction:"",style:"padding-left:15px;"}),c.push({taskId:"DeleteEvent",displayName:this.deleteEventText,action:"deleteEvent();",securedAction:""});var d="Events",e=this._getTaskTemplateString(c,d);return{key:"Events",taskTemplate:new Simplate(e)}},_getConfirmConfig:function(a,b){var c=this._getCommonTasks();c.push({taskId:"AcceptConfirmation",displayName:this.acceptConfirmationText,action:"acceptConfirmation();",securedAction:""}),c.push({taskId:"DeclineConfirmation",displayName:this.declineConfirmationText,action:"declineConfirmation();",securedAction:""}),c.push({taskId:"DeleteConfirmation",displayName:this.deleteConfirmationText,action:"deleteConfirmation();",securedAction:""});var d="Confirmations",e=this._getTaskTemplateString(c,d);return{key:"Confirmations",taskTemplate:new Simplate(e)}},_getDefaultConfig:function(a,b){var c={},d="Default",e=this._getTaskTemplateString(c,d);return{key:"Default",taskTemplate:new Simplate(e)}},buildTaskConfiguration:function(a,b,c){var d=this._getTaskTemplateString(c,b);return{key:a,taskTemplate:new Simplate(d)}},addTaskConfiguration:function(a){var b=this.getTaskConfiguration(a.key);if("default"===b.key){var c={key:a.key,configuration:a};this.getTaskConfigurations().push(c)}else b.configuration=a},requestConfiguration:function(a){this._onRequestConfigurationSuccess(a,null)},
_onRequestConfigurationSuccess:function(a,b){a.success&&a.success.call(a.scope||this,this._createConfiguration(b,a),a,this),this._createConfiguration(b,a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},_scheduleMeeting:function(a){}})})},"Sage/TaskPane/ActivityTaskContents":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare"],function(a,b,c){return c("Sage.TaskPane.ActivityTaskContents",[a,b],{widgetsInTemplate:!0,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(a){this.widgetTemplate=a.taskTemplate,dojo.subscribe("/sage/ui/list/selectionChanged",function(a){var b=dojo.byId("selectionCount");b&&(b.innerHTML=a.getTotalSelectionCount())})},_clearSelection:function(a){var b=dijit.byId("list");b&&b.clearSelection()}})})},"Sage/TaskPane/ActivityTaskPaneItem":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(a,b,c){return c("Sage.TaskPane.ActivityTaskPaneItem",[a,b],{securedAction:"",linkText:"",action:"",postCreate:function(){this.checkSecurityAccess()},templateString:'<a dojoAttachPoint="linkTextNode" href="#"></a>',attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{linkText:{node:"linkTextNode",type:"innerHTML"},action:{node:"linkTextNode",type:"attribute",attribute:"onclick"}}),_getCurrentUserId:function(){var a="",b=Sage.Services.getService("ClientContextService");return b&&(a=b.getValue("userID")),a},checkSecurityAccess:function(){if(this.securedAction.length>0){var a=(this._getCurrentUserId(),this.linkTextNode);Sage.Services.getService("RoleSecurityService").hasAccess(this.securedAction,function(b){var c="none";b&&(c="inline"),dojo.style(a,{display:c})})}else dojo.style(this.linkTextNode,{display:"inline"})}})})},"Sage/TaskPane/ActivityTaskPaneActions":function(){define(["dojo/parser","dojo/ready"],function(a,b){return Sage.namespace("TaskPane.ActivityTaskPaneActions"),Sage.TaskPane.ActivityTaskPaneActions={scheduleMeeting:function(){this._getActivityService().scheduleActivity({type:"Meeting"})},scheduleToDo:function(){this._getActivityService().scheduleActivity({type:"ToDo"})},schedulePhoneCall:function(){this._getActivityService().scheduleActivity({type:"PhoneCall"})},schedulePerosnalActivity:function(){this._getActivityService().scheduleActivity({type:"Personal"})},completeActivity:function(){this._getActivityService().completeActivity()},deleteActivity:function(){this._getActivityService().deleteActivity()},acceptConfirmation:function(){this._getActivityService().acceptConfirmation()},declineConfirmation:function(){this._getActivityService().declineConfirmation()},deleteConfirmation:function(){this._getActivityService().deleteConfirmation()},scheduleEvent:function(){this._getActivityService().scheduleEvent()},deleteEvent:function(){this._getActivityService().deleteEvent()},scheduleLitRequest:function(){this._getActivityService().scheduleLitRequest()},deleteLitRequest:function(){this._getActivityService().deleteLitRequest()},_getActivityService:function(){return Sage.Services.getService("ActivityService")}},Sage.TaskPane.ActivityTaskPaneActions})},"Sage/TaskPane/CommonTasksTasklet":function(){define(["dijit/Menu","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/MenuItem","Sage/UI/Dialogs","Sage/Utility","Sage/Utility/Email","Sage/Groups/GroupManager","dojo/_base/xhr","dojo/_base/lang","dojo/_base/declare","dojo/string","dojo/i18n!./nls/CommonTasksTasklet","dojo/dom-class","dojo/topic","Sage/Utility/Jobs","Sage/MainView/Import/ImportWizardController","Sage/MainView/Import/ImportManagerUtility","Sage/MainView/CopyUserProfile/CopyUserProfileController","Sage/UI/BulkUpdateWidget","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return m("Sage.TaskPane.CommonTasksTasklet",e,{excelSupported:!1,_exportToFile:function(){var a=0;h.isIE&&(a=3e3);var b=this;window.setTimeout(function(){b.onExportToFileClick()},a)},constructor:function(a){l.mixin(this,o)},removeCurrentFromGroup:function(){this.getCurrentEntity();var a,b,c=Sage.Services.getService("ClientGroupContext");null!==c&&(a=c.getContext(),b=a.FirstEntityID,b===this.currentEntityId&&(b=a.NextEntityID),""!==b&&this.contextService&&this.contextService.navigateSLXGroupEntity(b,this.currentEntityId),Sage.Groups.GroupManager.removeIds(a.CurrentGroupID,a.CurrentName,a.CurrentFamily,[this.currentEntityId],function(){__doPostBack("MainContent","")},function(a){},this))},removeSelectionsFromGroup:function(){j.removeSelectionsFromGroup()},saveSelectionsAsNewGroup:function(){j.saveSelectionsAsNewGroup()},showAdHocList:function(b){var c,d,e,g=Sage.Services.getService("ClientGroupContext");"undefined"==typeof GroupAdHocListMenu&&(GroupAdHocListMenu=new a({id:"GroupAdHocList"}),GroupAdHocListMenu.addChild(new f({label:this.loadingText}))),g.getAdHocGroupList(function(a){for(GroupAdHocListMenu.destroyDescendants(),c=0;c<a.length;c++)d=a[c],GroupAdHocListMenu.addChild(new f({label:d.$descriptor||d.name,ref:n.substitute("javascript:Sage.Groups.GroupManager.addSelectionsToGroup('${0}')",[d.$key]),onClick:function(){if(""!==this.ref)try{window.location.href=this.ref,dijit.popup.close(GroupAdHocListMenu)}catch(a){}}}));GroupAdHocListMenu.on("blur",function(){dijit.popup.close(GroupAdHocListMenu)}),GroupAdHocListMenu.startup()},this),b.pageX||b.pageY||(b.pageX=b.clientX+document.body.scrollLeft,b.pageY=b.clientY+document.body.scrollTop),dijit.popup.open({popup:GroupAdHocListMenu,x:b.pageX||250,y:b.pageY||250}),(e=GroupAdHocListMenu.domNode.parentNode)&&!p.contains(e,"commonTaskAdHoc")&&p.add(e,"commonTaskAdHoc")},exportToExcel:function(){this.prepareSelectedRecords(this.getExcelJob(this.getSelectionInfo(),this))},getExcelJob:function(a,b){var c=this.getCurrentGroupId();return"LOOKUPRESULTS"===c&&(c=this.getDefaultGroupId()),function(){var d=cookie.getCookie("format"),e=[{name:"SelectedIds",value:a.selectionCount>0?a.selectedIds.join(",")||"":""},{name:"GroupId",value:c},{name:"AppliedFilters",value:Sys.Serialization.JavaScriptSerializer.serialize(r.getFiltersForJob())},{name:"LookupConditions",value:Sys.Serialization.JavaScriptSerializer.serialize(r.getLookupConditionsForJob())},{name:"ExportType",value:d}],f=b.getCurrentGroupName(),h=dojo.date.locale.format(new Date,{selector:"date",datePattern:"yyyy_MM_dd_hhmm",locale:Sys.CultureInfo.CurrentCulture.name}),i="",j=Sage.Services.getService("ClientContextService");j&&j.containsKey("userPrettyName")&&(i=j.getValue("userPrettyName"));var k=n.substitute("${0}_${1}_${2}",[f,i,h]),l={descriptor:k,closable:!0,title:b.exportToExcel_Caption,key:"Sage.SalesLogix.BusinessRules.Jobs.ExportToExcelJob",parameters:e,infoMessage:b.exportProcessingJobMsg,success:function(a){},failure:function(a){g.showError(n.substitute(b.errorRequestingJobMgr,[a.result]))},ensureZeroFilters:!0};r.triggerJobAndDisplayProgressDialog(l)}},exportToFile:function(){this.getCurrentEntity(),this.prepareSelectedRecords(this.fileFormatCheck(this))},fileFormatCheck:function(a){return function(){var b=cookie.getCookie("formatIsSaved"),c=cookie.getCookie("format");"true"===b&&c.length>0?a.onDoExport(c):a.promptForFileFormat()}},promptForFileFormat:function(){var a=this,c="promptForFileFormat-Dialog",d=dijit.byId(c);d||(d=new b({id:c,title:a.exportToFile_DialogTitle})),d.attr("content",this.getPromptForFileFormatTemplate().apply({dialogId:c})),d.show()},getPromptForFileFormatTemplate:function(){return this.excelSupported?new Simplate(["<div>",'<label style="padding-left:5px">{%= commonTaskActions.selectFileFormat %}</label>',"<br />",'<div style="padding-left:10px; padding-top:7px">','<input id="radioExcel" name="format_type" type="radio" data-dojo-type="dijit.form.RadioButton" value="excel" checked="true" />{%= commonTaskActions.exportToFile_OptionExcel %}',"</div>",'<div style="padding-left:10px; padding-top:7px">','<input id="radioCSV" name="format_type" type="radio" data-dojo-type="dijit.form.RadioButton" value="csv" />{%= commonTaskActions.exportToFile_OptionCSV %}',"</div>",'<div style="padding-left:10px; padding-top:7px">','<input id="radioTab" name="format_type" type="radio" data-dojo-type="dijit.form.RadioButton" value="tab" />{%= commonTaskActions.exportToFile_OptionTab %}',"</div>",'<div style="padding-left:11px; padding-top:7px">','<input id="exportFormatSaved" dojoAttachPoint="exportFormatSaved" data-dojo-type="dijit.form.CheckBox" value="true" />{%= commonTaskActions.exportToFile_OptionSaveFormat %}',"</div>",'<div style="padding-right:5px; padding-bottom:5px; text-align:right;">','<button data-dojo-type="dijit.form.Button" type="submit" class="ok-button" onClick="commonTaskActions._exportToFile();">{%= commonTaskActions.exportToFile_OK %}</button>','<button data-dojo-type="dijit.form.Button" type="button" class="cancel-button" onClick="dijit.byId(\'promptForFileFormat-Dialog\').hide();">{%= commonTaskActions.exportToFile_Cancel %}</button>',"</div>","</div>"]):new Simplate(["<div>",'<label style="padding-left:5px">{%= commonTaskActions.selectFileFormat %}</label>',"<br />",'<div style="padding-left:10px; padding-top:7px">','<input id="radioCSV" name="format_type" type="radio" data-dojo-type="dijit.form.RadioButton" value="csv" checked="true" />{%= commonTaskActions.exportToFile_OptionCSV %}',"</div>",'<div style="padding-left:10px; padding-top:7px">','<input id="radioTab" name="format_type" type="radio" data-dojo-type="dijit.form.RadioButton" value="tab" />{%= commonTaskActions.exportToFile_OptionTab %}',"</div>",'<div style="padding-left:11px; padding-top:7px">','<input id="exportFormatSaved" dojoAttachPoint="exportFormatSaved" data-dojo-type="dijit.form.CheckBox" value="true" />{%= commonTaskActions.exportToFile_OptionSaveFormat %}',"</div>",'<div style="padding-right:5px; padding-bottom:5px; text-align:right;">','<button data-dojo-type="dijit.form.Button" type="submit" class="ok-button" onClick="commonTaskActions._exportToFile();">{%= commonTaskActions.exportToFile_OK %}</button>','<button data-dojo-type="dijit.form.Button" type="button" class="cancel-button" onClick="dijit.byId(\'promptForFileFormat-Dialog\').hide();">{%= commonTaskActions.exportToFile_Cancel %}</button>',"</div>","</div>"])},onDoExport:function(a){if(this.getSelectionInfo().selectionCount>0)dojo.byId("tskExportToExcel").click();else{var b=this.getExcelJob(this.getSelectionInfo(),this);b&&b()}},onExportToFileClick:function(){var a,b=dojo.byId("exportFormatSaved");void 0!==b&&b.checked&&(document.cookie="formatIsSaved=true; expires=1/01/2020"),a=dojo.byId("radioCSV").checked?"csv":dojo.byId("radioTab").checked?"tab":dojo.byId("radioExcel").checked?"excel":"csv",document.cookie="format="+a+"; expires=1/01/2020",this.onDoExport(a)},emailSend:function(){this.getCurrentEntity();var a="slxdata.ashx/slx/crm/-/namedqueries?columnaliases=email&format=json&hql=",b=this.getURL(this.currentEntityTableName);if(null===b)return void g.showError(this.noPrimaryEmail);a+=b;var c=this;dojo.xhrGet({url:a,handleAs:"json",load:function(a){c.sendEmail(a)},error:function(a){g.showError(a.StatusText)}})},getURL:function(a){var b=null;switch(a){case"CONTACT":b=n.substitute("select con.Email from Contact con where con.id like '${0}'",[this.currentEntityId]);break;case"ACCOUNT":b=n.substitute("select con.Email from Contact as con where con.Account.id like '${0}' and con.IsPrimary like 'T'",[this.currentEntityId]);break;case"OPPORTUNITY":b=n.substitute("select con.Email from Opportunity as opp left join opp.Contacts as oppCon left join oppCon.Contact as con where opp.id like '${0}' and oppCon.IsPrimary like 'T'",[this.currentEntityId]);break;case"LEAD":b=n.substitute("select le.Email from Lead le where le.id like '${0}'",[this.currentEntityId]);break;case"CAMPAIGN":b=n.substitute("select ufo.Email from Campaign as cam left join cam.AccountManager as usr left join usr.UserInfo as ufo where cam.id like '${0}'",[this.currentEntityId]);break;case"TICKET":b=n.substitute("select ufo.Email from User as usr left join usr.UserInfo as ufo where usr.DefaultOwner in  (select own.id from Ticket as tic left join tic.AssignedTo as own where tic.id like '${0}')",[this.currentEntityId]);break;case"DEFECT":b=n.substitute("select ufo.Email from User as usr left join usr.UserInfo as ufo where usr.DefaultOwner in (select own.id from Defect as def left join def.AssignedTo as own where def.id like '${0}')",[this.currentEntityId]);break;case"CONTRACT":b=n.substitute("select con.Email from Contract as crt left join crt.Contact as con where crt.id like '${0}'",[this.currentEntityId]);break;case"SALESORDER":b=n.substitute("select so.ShippingContact.Email from SalesOrder as so where so.Id eq '${0}'",[this.currentEntityId]);break;case"RMA":b=n.substitute("select con.Email from Return as ret left join ret.ReturnedBy as con where ret.id like '${0}'",[this.currentEntityId])}return b},sendEmail:function(a){if(a.count>0){var b=a.items[0].email;if(b)return b="mailto:"+b,void(document.location.href=b)}g.showError(this.noPrimaryEmail)},copyUser:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyUser",selectionInfoKey:b})},copyUserProfile:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyUserProfile",selectionInfoKey:b})},deleteUsers:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteUsers",selectionInfoKey:b})},addToTeam:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"AddToTeam",selectionInfoKey:b})},removeFromTeam:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"RemoveFromTeam",selectionInfoKey:b})},removeFromAllTeams:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"RemoveFromAllTeams",selectionInfoKey:b})},assignRole:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"AssignRole",selectionInfoKey:b})},replaceTeamMember:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"ReplaceTeamMember",selectionInfoKey:b})},deleteTeam:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteTeam",selectionInfoKey:b})},deleteDepartment:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteDepartment",selectionInfoKey:b})},copyTeam:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyTeam",selectionInfoKey:b})},copyDepartment:function(a){a=a||"hfSelections";var b=dojo.byId(a).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyDepartment",selectionInfoKey:b})},showDetailReport:function(){var a=Sage.Services.getService("ReportingService");a&&a.showDefaultReport()},writeEmailToGroupSelection:function(){i.writeEmailToGroupSelection()},importFromFile:function(){if(this.getCurrentEntity(),this.currentEntityPrettyName){var a={entry:{$name:"IsImportEnabledForEntity",request:{ImportHistoryId:null,entityName:this.currentEntityPrettyName}},businessRuleMethod:"IsImportEnabledForEntity",onSuccess:dojo.hitch(this,function(a){if(a){new s(this.currentEntityPrettyName,this.currentEntityDisplayName,n.substitute("${0}, Sage.Entity.Interfaces",[this.currentEntityType])).startWizard()}else g.showError(n.substitute(this.entityNotImportable,[this.currentEntityDisplayName]))}),onFailure:function(a){g.showError(n.substitute(this.errorRequestEntityImportable,[a]))}};t.importRuleRequest(a,"importHistory",!1)}},bulkActionDeleteJob:function(){this.getCurrentEntity(),this.prepareSelectedRecords(this.confirmBulkActionDelete(this.getSelectionInfo()))},confirmBulkActionDelete:function(a){return dojo.hitch(this,function(){g.raiseQueryDialog(n.substitute(this.deleteSelectedRecords,[this.currentEntityDisplayName]),n.substitute("${0}",[this.confirmBulkDeleteJob]),dojo.hitch(this,function(b){this.deleteBulkActionItem(b,a)}),this.yesButtonText,this.noButtonText)})},deleteBulkActionItem:function(a,b){if(a){var c=this.getCurrentGroupId();if("LOOKUPRESULTS"===c&&(c=this.getDefaultGroupId()),this.currentEntityPrettyName){var d=[{name:"EntityName",value:this.currentEntityPrettyName},{name:"SelectedIds",value:b.selectionCount>0?b.selectedIds.join(",")||"":""},{name:"GroupId",value:c},{name:"AppliedFilters",value:Sys.Serialization.JavaScriptSerializer.serialize(r.getFiltersForJob())},{name:"LookupConditions",value:Sys.Serialization.JavaScriptSerializer.serialize(r.getLookupConditionsForJob())},{name:"EntityTableName",value:this.currentEntityTableName}],e={descriptor:this.deleteJob_Description,showErrorNotification:!1,closable:!0,title:n.substitute(this.deleteBulkJobTitle,[this.currentEntityDisplayName]),key:"Sage.SalesLogix.BusinessRules.Jobs.DeleteEntityJob",parameters:d,success:function(){},failure:function(a){g.showError(n.substitute(this.deleteJobError,[this.currentEntityDisplayName,a.statusText]))},ensureZeroFilters:!0};r.triggerJobAndDisplayProgressDialog(e)}}},bulkActionUpdateJob:function(){this.getCurrentEntity(),this._metaDataService=w.getSDataService("metadata");var a=new Sage.SData.Client.SDataResourceCollectionRequest(this._metaDataService);a.setResourceKind(n.substitute("entities('${0}')",[this.currentEntityPrettyName])),a.setQueryArg("select","bulkAction/*"),a.read({success:dojo.hitch(this,function(a){a&&a.$resources&&a.$resources[0].bulkAction.canBulkUpdate?this.prepareSelectedRecords(this.confirmBulkActionUpdate(this.getSelectionInfo())):g.showError(n.substitute(this.errorBulkActionNotSupported,[this.currentEntityDisplayName]))}),failure:function(a){g.showError(this.errorBulkActionRequest)}})},confirmBulkActionUpdate:function(a){return dojo.hitch(this,function(){var b=dijit.byId("dlgBulkUpdateWidget");if(!b){var c={currentEntityPrettyName:this.currentEntityPrettyName,currentEntityTableName:this.currentEntityTableName,selectionInfo:a};b=new v(c)}b.show()})},mapGroup:function(a,b,c){var d,e=Sage.Services.getService("ClientGroupContext");if(null!==e&&(d=e.getContext()),this.getCurrentEntity(),a&&("Account"===this.currentEntityPrettyName||"Contact"===this.currentEntityPrettyName)){try{this.selectionInfo=this.getSelectionInfo()}catch(a){g.showInfo(this.errorNoData)}null!==this.selectionInfo&&this.selectionInfo.selectionCount>0?window.open(a+"?type=I"+encodeURIComponent(this.currentEntityPrettyName)+"&grp="+encodeURIComponent(d.CurrentGroupID)+"&sort="+encodeURIComponent("Account")+"&asc="+encodeURIComponent("True")+"&selected="+encodeURIComponent(this.selectionInfo.selectedIds.join(";"))+"&lcid="+encodeURIComponent(c),"_blank")||g.showError(b):window.open(a+"?type=I"+encodeURIComponent(this.currentEntityPrettyName)+"&grp="+encodeURIComponent(d.CurrentGroupID)+"&sort="+encodeURIComponent("Account")+"&asc="+encodeURIComponent("True")+"&lcid="+encodeURIComponent(c),"_blank")||g.showError(b)}},showNearby:function(a,b){this.getCurrentEntity(),a&&this.currentEntityId&&("Account"===this.currentEntityPrettyName||"Contact"===this.currentEntityPrettyName)&&(window.open(a+"?start="+encodeURIComponent(this.currentEntityId),"_self")||g.showError(b))}})})},"Sage/MainView/Import/ImportWizardController":function(){define(["dojo/_base/declare","dojo/string","dojo/_base/array","Sage/MainView/Import/_WizardDialogBase","Sage/MainView/Import/ImportManagerUtility","Sage/MainView/Import/SelectFile","Sage/MainView/Import/DefineDelimiter","Sage/MainView/Import/MapFields","Sage/MainView/Import/ManageImportOptions","Sage/MainView/Import/AddActions","Sage/MainView/Import/Review","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.Import.ImportWizardController",[d],{wizardOptions:null,constructor:function(a,b,c){this._initializeImportOptions(a,b,c),this.wizardOptions=this.wizardOptions?this.wizardOptions:this._getDefaultWizardOptions(),this.subscriptions.push(l.subscribe("/importController/importWizard/nextStep",dojo.hitch(this,function(a){this._nextStep(a)}))),this.subscriptions.push(l.subscribe("/importController/importWizard/previousStep",dojo.hitch(this,function(a){this._previousStep(a)}))),this.subscriptions.push(l.subscribe("/importController/importWizard/cancel",dojo.hitch(this,function(){this._cancel()})))},startWizard:function(){this._goToStep(e.importWizardStep.SelectFile,null)},_initializeImportOptions:function(a,b,c){this.importOptions.isInitialized=!1,this.importOptions.importEntity=a,this.importOptions.importEntityDisplayName=b,this.importOptions.importEntityType=c,this.importOptions.attachmentId=null,this.importOptions.importTemplateId=null,this.importOptions.sourceModel=null,this.importOptions.sourceColumns=null,this._assignDefaultAdHocGroupName(),this.importOptions.metaDataObject=null,this.importOptions.defaultOwnerId=null,this.importOptions.matchOptions=null,this.importOptions.targetList=null,this.importOptions.engineOptions=null,this.importOptions.mappings=null},_assignDefaultAdHocGroupName:function(){this.importOptions.groupSettings={},this.importOptions.groupSettings.id=null,this.importOptions.groupSettings.name=null;var a=Sage.Services.getService("ClientContextService");if(a){var c=a.containsKey("userPrettyName")?a.getValue("userPrettyName"):"",d=a.containsKey("userDateFmtStr")?a.getValue("userDateFmtStr"):"yyyy_MM_dd_hhmm",e=dojo.date.locale.format(new Date,{datePattern:b.substitute("${0} h:mm:ss",[d]),locale:Sys.CultureInfo.CurrentCulture.name});this.importOptions.groupSettings.name=b.substitute(this.defaultAdHoc_Caption,[e,c])}},_nextStep:function(a){var b=this._getNextStep(a);this._goToStep(b)},_previousStep:function(a){var b=this._getPreviousStep(a);this._goToStep(b)},_cancel:function(){setTimeout(dojo.hitch(this,function(){this._destroyObjects()}),dijit.defaultDuration+100)},_getDefaultWizardOptions:function(){return{hiddenSteps:[e.importWizardStep.AddActions]}},_isStepVisible:function(a){var b=!0;return this.wizardOptions&&this.wizardOptions.hiddenSteps&&c.some(this.wizardOptions.hiddenSteps,function(c,d){if(a===c)return b=!1,!0}),!!b},_getNextStep:function(a){for(var b in e.importWizardStep){var c=e.importWizardStep[b];if(c>a&&this._isStepVisible(c))return c}return null},_getPreviousStep:function(a){var b=[];for(var d in e.importWizardStep)b.unshift(e.importWizardStep[d]);var f=null;return c.some(b,dojo.hitch(this,function(b){if(b<a&&this._isStepVisible(b))return f=b,!0})),f},_goToStep:function(a){var b,c=this._getNextStep(a),d=null===c||c===e.importWizardStep.Review,l=this._getPreviousStep(a),m=null===l||l===e.importWizardStep.ImportFile,n={isLastStep:d,isFirstStep:m,currentStep:null};switch(a){case e.importWizardStep.SelectFile:b=dijit.byId("dlgSelectFile"),b||(n.currentStep=e.importWizardStep.SelectFile,b=new f(n),b.startup()),b.show();break;case e.importWizardStep.DefineDelimiter:b=dijit.byId("dlgDefineDelimiter"),b||(n.currentStep=e.importWizardStep.DefineDelimiter,b=new g(n)),b.show();break;case e.importWizardStep.MapFields:b=dijit.byId("dlgMapFields"),b||(n.currentStep=e.importWizardStep.MapFields,b=new h(n),b.startup()),b.show();break;case e.importWizardStep.ManageImportOptions:b=dijit.byId("dlgManageImportOptions"),b||(n.currentStep=e.importWizardStep.ManageImportOptions,b=new i(n),b.startup()),b.show();break;case e.importWizardStep.AddActions:b=dijit.byId("dlgAddActions"),b||(n.currentStep=e.importWizardStep.AddActions,b=new j(n),b.startup()),b.show();break;case e.importWizardStep.Review:b=dijit.byId("dlgReview"),b||(n.currentStep=e.importWizardStep.Review,b=new k(n)),b.show()}}})})},"Sage/MainView/Import/_WizardDialogBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/store/Memory","dijit/_Widget","Sage/_Templated","Sage/MainView/Import/ImportManagerUtility","dojo/i18n!./nls/_WizardDialogBase","Sage/UI/Controls/_DialogHelpIconMixin","dijit/form/FilteringSelect"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.MainView.Import._WizardDialogBase",[f,g],{_dialog:null,baseNlsResources:i,_currentStep:null,_isFirstStep:!1,_isLastStep:!1,_helpIconTopic:"ImportingRecords",widgetsInTemplate:!0,subscriptions:[],importOptions:[],lookupTypeField:"LookupField",_dialogIds:["dlgSelectFile","dlgDefineDelimiter","dlgMapFields","dlgManageImportOptions","dlgAddActions","dlgReview","dlgManageImportTemplate"],constructor:function(){this.subscriptions=[],dojo.mixin(this,i)},show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(d.mixin(this._dialog,new j),this._dialog.createHelpIconByTopic(this._helpIconTopic),this._dialog.helpIcon.tabIndex="-1"))},startup:function(){this.inherited(arguments),this._initializeWizardButtons()},preformValidation:function(a,b){a()},_initializeTemplates:function(a){var b=new k({store:new e({data:a,idProperty:"$key"}),maxHeight:150,searchAttr:"$descriptor",labelAttr:"$descriptor",placeHolder:this.selectOption_Caption,required:!1});return this.importOptions.importTemplateId&&b.attr("value",this.importOptions.importTemplateId),b},getConfigurationOptions:function(){return this._commonConfigurationOptions()},getTemplateConfigurationOptions:function(a){var b=this._commonConfigurationOptions();return b.importTemplateId=a?null:this.importOptions.importTemplateId,b.templateName=this.importOptions.templateName,b.isNew=a,b},_commonConfigurationOptions:function(){return{importEntity:this.importOptions.importEntity,importEntityType:this.importOptions.importEntityType,importEntityDisplayName:this.importOptions.importEntityDisplayName,defaultOwnerId:this.importOptions.defaultOwnerId,mappings:this.importOptions.mappings,groupSettings:this.importOptions.groupSettings,metaDataObject:this.importOptions.metaDataObject,sourceModel:this.importOptions.sourceModel,sourceColumns:this.importOptions.sourceColumns,targetColumns:this.importOptions.targetList?this.importOptions.targetList.data:this.importOptions.targetList,matchOptions:this.importOptions.matchOptions,engineOptions:this.importOptions.engineOptions,importTemplateId:this.importOptions.importTemplateId,attachmentId:this.importOptions.attachmentId,buildSecondaryAccountName:this.importOptions.buildSecondaryAccountName}},getTargetProperty:function(a,b,c,d){var e={dataType:a.dataType,displayName:a.displayName,value:a.value,name:b,required:a.required,fieldType:a.fieldType,entityDisplayName:a.entityDisplayName,maxLength:a.maxLength,visableToUsers:a.visableToUsers};return a.fieldType.indexOf(this.lookupTypeField)>0&&(e.entityName=a.entityName,e.searchProperty=c||null,e.searchValue=d||null,e.entityDisplayName=a.entityDisplayName),e},saveImportJobTemplate:function(a){var b={importTemplateId:a.importTemplateId,entry:{$name:"SaveImportJobTemplate",request:{ImportTemplateId:a.importTemplateId,templateOptions:Sys.Serialization.JavaScriptSerializer.serialize(a)}},businessRuleMethod:"SaveImportJobTemplate",onSuccess:dojo.hitch(this,function(b){a.isNew&&(this.importOptions.importTemplateId=b,c.publish("/importController/importWizard/savedImportTemplate",b))}),onFailure:function(b){a.onFailure&&a.onFailure(b)}};h.importRuleRequest(b,"importTemplates")},_dialog_OnCancel:function(){this._btnCancel_OnClick()},_btnBack_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/importController/importWizard/previousStep",this._currentStep)},_btnNext_OnClick:function(){this.preformValidation(this._validationSuceeded.bind(this),this._validationFailed.bind(this))},_validationSuceeded:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/importController/importWizard/nextStep",this._currentStep)},_validationFailed:function(){},_btnCancel_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/importController/importWizard/cancel",null)},_initializeWizardButtons:function(){this._isFirstStep&&h.setDomNodeVisible(this.btnBack.domNode,!1),this._isLastStep&&this.btnNext.setLabel(i.txtFinish)},_checkCurrentStep:function(){this._currentStep},finishWizard:function(){this._destroyObjects()},_destroyObjects:function(){b.forEach(this._dialogIds,function(a){var b=dijit.byId(a);b&&b.destroyRecursive()}),b.forEach(this.subscriptions,function(a){a.remove()})}})})},"Sage/MainView/Import/ImportManagerUtility":function(){define(["dojo/_base/xhr","dojo/string","dojo/date/locale","dojo/dom-class","dojo/_base/lang","Sage/Data/SDataServiceRegistry","Sage/Utility"],function(a,b,c,d,e,f,g){return Sage.namespace("Sage.MainView.Import.ImportManagerUtility"),e.mixin(Sage.MainView.Import.ImportManagerUtility,{importWizardStep:{SelectFile:0,DefineDelimiter:1,ManageImportOptions:2,MapFields:3,AddActions:4,Review:5},getUserName:function(b){var c=null;return a("GET",{url:"slxdata.ashx/slx/dynamic/-/users('"+b+"')?format=json&select=$key,$descriptor",handleAs:"json",sync:!0}).then(function(a){c=a}),c},getOwner:function(a,c){if(a&&c){var d=new Sage.SData.Client.SDataSingleResourceRequest(f.getSDataService("dynamic"));d.setResourceKind("owners"),d.setResourceSelector(b.substitute("'${0}'",[a])),d.setQueryArg("select","$key,$description"),d.read({success:function(a){c.set("selectedObject",a)},scope:this,failure:function(){}})}},getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var a=Sage.Services.getService("ClientEntityContext");if(a)return a.getContext()}return null},setDomNodeVisible:function(a,b){a&&b?d.remove(a,"display-none"):a&&d.add(a,"display-none")},requestImportTemplates:function(a){var b=new Sage.SData.Client.SDataResourceCollectionRequest(f.getSDataService("dynamic"));b.setResourceKind("importTemplates"),b.setQueryArg("select","TemplateName,EntityName,IsSystemTemplate,CreateUser,CreateDate,ModifyUser,ModifyDate"),a.where&&b.setQueryArg("where",a.where),b.read({preventCache:!0,scope:this,success:function(b){a.onSuccess&&a.onSuccess(b.$resources)},failure:function(b){a.onFailure&&a.onFailure(b)}})},importRuleRequest:function(a,b,c){var d=void 0===c||c,e=f.getSDataService("dynamic");new Sage.SData.Client.SDataServiceOperationRequest(e).setResourceKind(b).setOperationName(a.businessRuleMethod).execute(a.entry,{async:d,success:function(b){a.onSuccess&&("string"==typeof b.response.Result?a.onSuccess(Sys.Serialization.JavaScriptSerializer.deserialize(b.response.Result)):a.onSuccess(b.response.Result))},failure:function(b){a.onFailure&&a.onFailure(b)}})},formatDate:function(a){if(g.Convert.isDateString(a)){var b=g.Convert.toDateFromString(a);return c.format(b,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return""}}),Sage.MainView.Import.ImportManagerUtility})},"Sage/MainView/Import/SelectFile":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","dojo/store/Memory","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/SelectFile.html","dojo/i18n!./nls/SelectFile","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.Import.SelectFile",[f],{id:"dlgSelectFile",widgetTemplate:j.makeTemplateFromString(g),_nlsResources:h,_currentStep:i.importWizardStep.SelectFile,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this._initializeFileUploadControl(),this._initializeTemplateList(),this.inherited(arguments)},preformValidation:function(a,b){this.validate()?a():b()},validate:function(){var a="";return dojo.addClass(this.errorNoUploadFile,"display-none"),this.importOptions.attachmentId||(a=h.errorNoUploadFile,dojo.removeClass(this.errorNoUploadFile,"display-none"),this.spanValidationMessage.innerHTML=j.htmlEncode(a)),
i.setDomNodeVisible(this.divValidationMessage,""!==a),""===a&&(a=h.errorNoUploadFile,dojo.removeClass(this.errorNoUploadFile,"display-none"),this._updateImportOptions(),!0)},destroy:function(){this.importTemplates.destroyRecursive(),this.inherited(arguments)},_initializeFileUploadControl:function(){this._fileInputOnChange=dojo.hitch(this,b.connect(this.fileInputBtn,"onchange",this,this._handleFiles)),this.subscriptions.push(dojo.subscribe("/entity/attachment/create",this,this._onNewFileUpload))},_initializeTemplateList:function(){var a={where:d.substitute("EntityName eq '${0}'",[this.importOptions.importEntity]),onSuccess:dojo.hitch(this,function(a){this.importTemplates=this._initializeTemplates(a),this.importTemplates.placeAt(this.templates_Container)})};i.requestImportTemplates(a)},_btnUploadFile_OnClick:function(){this.fileInputBtn.click()},_handleFiles:function(a){this._createAttachments(this.fileInputBtn.files)},_createAttachments:function(a){a.length>0&&(this.importOptions.isInitialized=!1,this.lblFileUpload.textContent=d.substitute(h.txtFileContents_Caption,[a[0].name,c.round(a[0].size/1024,0)]),this.txtFakeUploadFile.set("value",a[0].name),k.createAttachmentSilent(a[0],{}))},_onNewFileUpload:function(a){this.importOptions.attachmentId=a.$key,this.importOptions.attachmentName=a.$descriptor,this.importOptions.fileName=a.fileName,this.importOptions.refreshDelimiterPage=!0,this.importOptions.refreshMapFieldsPage=!0,this.validate()},_updateImportOptions:function(){if(this.importOptions.refreshDelimiterPage||(this.importOptions.refreshDelimiterPage=this.importTemplates.value!==this.importOptions.importTemplateId),!!this.importOptions.refreshMapFiledsPage||this.importTemplates.value!==this.importOptions.importTemplateId){var a=dijit.byId("dlgMapFields");a&&a.destroyRecursive(),this.importOptions.refreshMapFieldsPage=!1}if(this.importOptions.refreshMapFieldsPage=this.importTemplates.value!==this.importOptions.importTemplateId,this.importOptions.importTemplateId=""!==this.importTemplates.value?this.importTemplates.value:null,this.importOptions.isSystemTemplate=!(!this.importTemplates.item||!this.importTemplates.item.IsSystemTemplate),this.importOptions.optionsFromTemplate=!1,this._currentStep=i.importWizardStep.SelectFile,null!==this.importOptions.importTemplateId&&(this._currentStep=i.importWizardStep.MapFields,!this.importOptions.targetColumns||null===this.importOptions.targetColumns)){var b=h.txtLoadTemplate_Caption;dojo.removeClass(this.errorNoUploadFile,"display-none"),this.spanValidationMessage.innerHTML=j.htmlEncode(b);var c={importEntity:this.importOptions.importEntity,importEntityType:this.importOptions.importEntityType,attachmentId:this.importOptions.attachmentId,importTemplateId:this.importOptions.importTemplateId,delimiter:this.importOptions.sourceModel?this.importOptions.sourceModel.Options.delimiter.value:null,qualifier:this.importOptions.sourceModel?this.importOptions.sourceModel.Options.qualifier.value:null,firstRowFieldNames:this.importOptions.firstRowFieldNames,numberRecordBack:"5",isInitialized:this.importOptions.isInitialized,sourceModel:this.importOptions.sourceModel,sourceColumns:this.importOptions.sourceColumns,defaultOwnerId:this.importOptions.defaultOwnerId,groupSettings:this.importOptions.groupSettings,metaDataObject:this.importOptions.metaDataObject,targetColumns:this.importOptions.targetList?this.importOptions.targetList.data:this.importOptions.targetList,matchOptions:this.importOptions.matchOptions,engineOptions:this.importOptions.engineOptions,defaultAdHocGroupName:this.importOptions.groupSettings.name},f={entry:{$name:"ReadImportData",request:{ImportHistoryId:null,importOptions:Sys.Serialization.JavaScriptSerializer.serialize(c)}},businessRuleMethod:"ReadImportData",onSuccess:dojo.hitch(this,function(a){this.importOptions.optionsFromTemplate=!0,this.importOptions.buildSecondaryAccountName=a.buildSecondaryAccountName,this.importOptions.defaultOwnerId=a.defaultOwnerId,this.importOptions.groupSettings=a.groupSettings?a.groupSettings:{},this.importOptions.previewAdHocGroup=a.groupSettings?a.groupSettings.name:"",this.importOptions.isInitialized=!0,this.importOptions.metaDataObject=a.metaDataObject,this.importOptions.mappings=a.mappings,this.importOptions.sourceColumns=JSON.parse(JSON.stringify(a.sourceColumns)),this.importOptions.sourceModel=a.sourceModel,this.importOptions.targetList=new e({data:a.targetColumns,idProperty:"name"}),this.importOptions.matchOptions=a.matchOptions,this.importOptions.totalRecordCount=a.totalRecordCount,this.importOptions.engineOptions=a.engineOptions,"0"==a.engineOptions.mode.value?this.importOptions.previewDataMode=h.lstImportOption_Insert:"1"==a.engineOptions.mode.value?this.importOptions.previewDataMode=h.lstImportOption_Update:"2"==a.engineOptions.mode.value?this.importOptions.previewDataMode=h.lstImportOption_InsertUpdate:this.importOptions.previewDataMode=h.lstImportOption_Insert,dojo.addClass(this.errorNoUploadFile,"display-none")}),onFailure:function(a){l.showError(d.substitute(h.errorRequestFileOptions,[a]))}};i.importRuleRequest(f,"importHistory",!1)}}})})},"Sage/MainView/Import/DefineDelimiter":function(){define(["dojo/_base/declare","dojo/string","dojo/on","dojo/_base/array","dojo/store/Memory","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/DefineDelimiter.html","dojo/i18n!./nls/DefineDelimiter","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/UI/Dialogs","Sage/UI/Controls/Grid"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.Import.DefineDelimiter",[f],{id:"dlgDefineDelimiter",previewGrid:null,widgetTemplate:j.makeTemplateFromString(g),_nlsResources:h,_currentStep:i.importWizardStep.DefineDelimiter,constructor:function(){this.inherited(arguments)},show:function(){this.importOptions.refreshDelimiterPage&&(this.btnNext.setDisabled(!0),i.setDomNodeVisible(this.divLoadingMessage,!0),this._requestPreviewData(),c(this.cmbQualifiers,"change",dojo.hitch(this,this._requestPreviewData)),this.importOptions.refreshDelimiterPage=!1),this.inherited(arguments)},_requestPreviewData:function(){this._updateImportOptions();var a={importEntity:this.importOptions.importEntity,importEntityType:this.importOptions.importEntityType,attachmentId:this.importOptions.attachmentId,importTemplateId:this.importOptions.importTemplateId,delimiter:this.importOptions.sourceModel?this.importOptions.sourceModel.Options.delimiter.value:null,qualifier:this.importOptions.sourceModel?this.importOptions.sourceModel.Options.qualifier.value:null,firstRowFieldNames:this.importOptions.firstRowFieldNames,numberRecordBack:"5",isInitialized:this.importOptions.isInitialized,sourceModel:this.importOptions.sourceModel,sourceColumns:this.importOptions.sourceColumns,defaultOwnerId:this.importOptions.defaultOwnerId,groupSettings:this.importOptions.groupSettings,metaDataObject:this.importOptions.metaDataObject,targetColumns:this.importOptions.targetList?this.importOptions.targetList.data:this.importOptions.targetList,matchOptions:this.importOptions.matchOptions,engineOptions:this.importOptions.engineOptions,defaultAdHocGroupName:this.importOptions.groupSettings.name},c={entry:{$name:"ReadImportData",request:{ImportHistoryId:null,importOptions:Sys.Serialization.JavaScriptSerializer.serialize(a)}},businessRuleMethod:"ReadImportData",onSuccess:dojo.hitch(this,function(a){this.importOptions.buildSecondaryAccountName=a.buildSecondaryAccountName,this.importOptions.defaultOwnerId=a.defaultOwnerId,this.importOptions.groupSettings=a.groupSettings?a.groupSettings:{},this.importOptions.isInitialized=!0,this.importOptions.metaDataObject=a.metaDataObject,this.importOptions.mappings=a.mappings,this.importOptions.sourceColumns=JSON.parse(JSON.stringify(a.sourceColumns)),this.importOptions.sourceModel=a.sourceModel,this.importOptions.targetList=new e({data:a.targetColumns,idProperty:"name"}),this.importOptions.matchOptions=a.matchOptions,this.importOptions.totalRecordCount=a.totalRecordCount,this.importOptions.engineOptions=a.engineOptions,this.lblPreviewData.textContent=b.substitute(h.txtPreview,[a.totalRecordCount,a.sourceColumns.length]),this._loadDefaults(a.sourceModel.Options),i.setDomNodeVisible(this.divLoadingMessage,!1),this._loadPreviewData(a),this.btnNext.setDisabled(!1)}),onFailure:function(a){k.showError(b.substitute(h.errorRequestFileOptions,[a]))}};i.importRuleRequest(c,"importHistory")},_loadDefaults:function(a){switch(this.cmbQualifiers.attr("value",a.qualifier.value,!1),a.delimiter.value){case",":this.rdoCommaOption.set("checked",!0);break;case"\t":this.rdoTabOption.set("checked",!0);break;case";":this.rdoSemiColonOption.set("checked",!0);break;case" ":this.rdoSpaceOption.set("checked",!0);break;default:this.rdoOtherOption.set("checked",!0)}},_loadPreviewData:function(a){var b={};d.forEach(a.sourceColumns,function(a,c){b[c]=a.displayName}),this.previewGrid&&(this.previewGrid_Container.removeChild(this.previewGrid),this.previewGrid.destroy());var c=new l({classNames:"dgrid-autoheight",columns:b,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,store:new e({data:a.records}),placeHolder:this.previewGrid_Container.id});c.resize(),this.previewGrid=c},_rdoOption_OnClick:function(a){this.txtOtherOption.attr("disabled",!this.rdoOtherOption.checked),this.rdoOtherOption.checked&&""===this.txtOtherOption.value||(this.importOptions.sourceModel.Options.delimiter.value=a.currentTarget.getAttribute("value"),this._requestPreviewData())},_txtOtherOption_OnChange:function(){""!==this.txtOtherOption.value&&(this.importOptions.sourceModel.Options.delimiter.value=this.txtOtherOption.get("value"),this._requestPreviewData())},_txtQualifier_OnChange:function(){this._requestPreviewData()},_chkFirstRowFieldNames_OnChange:function(){this.importOptions.firstRowFieldNames=!this.importOptions.firstRowFieldNames,this.importOptions.sourceColumns=null,this.importOptions.defaultMappings=null,this.importOptions.mappings=null,this._requestPreviewData()},_updateImportOptions:function(){"None"!==this.cmbQualifiers.value&&(this.importOptions.sourceModel.Options.qualifier.value=this.cmbQualifiers.value),this.importOptions.firstRowFieldNames=this.chkFirstRowFieldNames.checked.toString()}})})},"Sage/MainView/Import/MapFields":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/string","dojo/store/Memory","dojo/store/Observable","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/MapFields.html","dojo/i18n!./nls/MapFields","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/UI/Dialogs","Sage/UI/Controls/Grid","dijit/form/FilteringSelect","dgrid/editor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.Import.MapFields",[g],{id:"dlgMapFields",widgetTemplate:k.makeTemplateFromString(h),_nlsResources:i,_currentStep:j.importWizardStep.MapFields,_grid:"",_mappingCount:0,_requiredFields:"",accountPropertyName:"Account.AccountName",lastNamePropertyName:"LastName",firstNamePropertyName:"FirstName",constructor:function(){this.inherited(arguments)},startup:function(){},show:function(){this._requestMappings(),this._setRequiredMappingsMsg(),this.inherited(arguments)},btnMapped_OnClick:function(){this._setEntityColumnState(!1,"entityDisplayName"),this._grid.setFilter(function(a){return""!==a.targetProperty})},btnAll_OnClick:function(){this._setEntityColumnState(!1,"entityDisplayName"),this._grid.setFilter(function(a){return!0}),this._grid._grid.columns.entityDisplayName.hidden=!1},preformValidation:function(a,c){var e="";this._generateMappings(),this._generateMatchMappings()||(e=i.errorRequiredMappings);var f=[],g=[];b.forEach(this.importOptions.mappings,dojo.hitch(this,function(a){var b=a.target.name;f.indexOf(b)<0?f.push(b):g.push(a.target.displayName)})),b.forEach(g,dojo.hitch(this,function(a){e=e.concat(a).concat(" ")}));var h=!1;g.length>0&&(e=d.substitute(1===g.length?i.multipleDestinationPropTag_Is:i.multipleDestinationPropTag_Are,[e]),h=!0),h&&(this.spanValidationMessage.innerHTML=k.htmlEncode(e)),j.setDomNodeVisible(this.divValidationMessage,""!==e),h?c():a()},_requestMappings:function(){var a={entry:{$name:"GetImportMappings",request:{ImportHistoryId:null,importOptions:Sys.Serialization.JavaScriptSerializer.serialize(this.getConfigurationOptions())}},businessRuleMethod:"GetImportMappings",onSuccess:dojo.hitch(this,function(a){this._mappingCount=this._getMappingCount(a.defaultMappings),this._updateCaptions(),this._loadMappingsData(a),this._resolveDefaultMappings(),this._setRequiredMappingsMsg()}),onFailure:function(a){l.showError(d.substitute(i.errorRequestMappings,[a]))}};j.importRuleRequest(a,"importHistory")},_getMappingCount:function(a){var b=a.filter(dojo.hitch(this,function(a){return-1===a.target.fieldType.indexOf(this.lookupTypeField)}));return a?b.length:0},_loadMappingsData:function(a){var d=[],g=new e({data:this._filterTargetFields(),idProperty:"name"});this.importOptions.defaultMappings=a.defaultMappings,b.forEach(this.importOptions.sourceColumns,function(a,b){d.push({id:b,sourceProperty:a.displayName,targetProperty:"",entityDisplayName:""})});var h=dijit.byId("mapFields_grid");h&&h.destroyRecursive(),this._grid=new m({store:new f(new e({data:d,idProperty:"sourceProperty"})),sort:"id",id:"mapFields_grid",columns:{id:{field:"id",hidden:!0,unhidable:!0},sourceProperty:i.colImportField_Caption,targetProperty:o({selectedValue:"FirstName",label:i.colInforField_Caption,field:"targetProperty",autoSave:!0,autoSelect:!0,editorArgs:{store:g,maxHeight:150,required:!1,searchAttr:"displayName",labelAttr:"displayName"}},n),entityDisplayName:{label:i.colType_Caption,hidden:!0}},placeHolder:this.mappingsGrid,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0}),this._grid.resize(),this._grid.onDataChange=c.hitch(this,function(a){var b=this._grid._grid.cell(a);if("targetProperty"===b.column.field){if(""===a.value)this._mappingCount--;else{this._mappingCount++;var c=this.importOptions.targetList.get(a.value),d=this._grid._grid.cell(a),e=d.row.data.sourceProperty,f=this._grid.store.get(e);f.entityDisplayName=c.entityDisplayName,f.targetProperty=c.name,c=dojo.byId(b.element.children[0].id),this._grid.store.put(f),c.setAttribute("value",a.value)}this._updateCaptions(),this._setRequiredMappingsMsg()}}),this._grid.setFilter({targetProperty:""})},_setRequiredMappingsMsg:function(){if(this._requiredFields="",this._grid.store&&(b.forEach(this.importOptions.selectedMatchOptions,dojo.hitch(this,function(a){if(""!==a.property){var b=this.importOptions.importEntity;b=b!==a.entity?d.substitute("${0}.${1}",[a.entity,a.property]):a.property,this._addRequiredField(b,a.displayValue)}})),this.importOptions.buildSecondaryAccountName)){var a=this._getTargetField(this.accountPropertyName);this._addRequiredField(this.accountPropertyName,a.displayName),a=this._getTargetField(this.lastNamePropertyName),this._addRequiredField(this.lastNamePropertyName,a.displayName),a=this._getTargetField(this.firstNamePropertyName),this._addRequiredField(this.firstNamePropertyName,a.displayName)}this.lblRequiredFields.textContent=d.substitute(i.txtRequired_Caption,[this._requiredFields]),j.setDomNodeVisible(this.divRequiredFields,""!==this._requiredFields)},_addRequiredField:function(a,b){this._grid._grid.store.query({targetProperty:a})[0]||(""===this._requiredFields?this._requiredFields=b:this._requiredFields.indexOf(b)<0&&(this._requiredFields+=d.substitute(", ${0}",[b])))},_getTargetField:function(a){return this.importOptions.targetList.data.filter(dojo.hitch(this,function(b){return b.name===a}))[0]},_getMapping:function(a){var c=null;return b.some(this.importOptions.mappings,function(b){return b.target.name===a&&(c=b,!0)}),c},btnUnMapped_OnClick:function(){this._setEntityColumnState(!0,"entityDisplayName"),this._grid.setFilter({targetProperty:""})},_updateCaptions:function(){this.lblMatchedFields.textContent=d.substitute(i.txtHeader_Caption,[this._mappingCount,this.importOptions.sourceColumns.length]),this.btnMapped.setAttribute("label",d.substitute(i.btnMapped_Caption,[this._mappingCount])),this.btnUnMapped.setAttribute("label",d.substitute(i.btnUnMapped_Caption,[this.importOptions.sourceColumns.length-this._mappingCount])),this.btnAll.setAttribute("label",d.substitute(i.btnAll_Caption,[this.importOptions.sourceColumns.length]))},_filterTargetFields:function(){var a=[];return b.forEach(this.importOptions.targetList.data,dojo.hitch(this,function(b){-1===b.fieldType.indexOf(this.lookupTypeField)&&b.visableToUsers&&a.push(b)})),a},_setEntityColumnState:function(a,b){this._grid._grid.columns.entityDisplayName.hidden=a,this._grid._grid._columnHiderCheckboxes.entityDisplayName.checked=!a,a?this._grid._grid.styleColumn(b,"display: none;"):this._grid._grid.styleColumn(b,"display: table-cell;")},_resolveDefaultMappings:function(){b.forEach(this.importOptions.defaultMappings.filter(dojo.hitch(this,function(a){return-1===a.target.fieldType.indexOf(this.lookupTypeField)})),dojo.hitch(this,function(a){var b=this._grid._grid.store.get(a.primarySources[0].name);if(b){var c=this.importOptions.targetList.get(a.target.name);c&&-1===c.fieldType.indexOf(this.lookupTypeField)&&(b.targetProperty=c.name,b.dataType=c.dataType,b.entityDisplayName=c.entityDisplayName)}})),this._grid.refresh()},_generateMappings:function(){if(this._grid&&this._grid.store){var a=[],c=null,d=null,e=null;b.forEach(this._grid._grid.store.data,dojo.hitch(this,function(b){if(""!==b.targetProperty){var f={};f.target=this.getTargetProperty(this.importOptions.targetList.get(b.targetProperty),b.targetProperty),b.targetProperty==this.accountPropertyName&&(c=f),f.primarySources=[];var g={name:b.sourceProperty,value:b.sourceProperty,displayName:""};b.targetProperty==this.lastNamePropertyName&&(d=g),b.targetProperty==this.firstNamePropertyName&&(e=g),f.primarySources.push(g),a.push(f)}})),this.importOptions.buildSecondaryAccountName&&null!==c&&(c.secondarySources=[],c.secondarySources.push(d),c.secondarySources.push(e)),this.importOptions.mappings=a}},_generateMatchMappings:function(){var a=!0;return b.forEach(this.importOptions.selectedMatchOptions,dojo.hitch(this,function(c){if(""!==c.property){var e=this.importOptions.importEntity;e=e!==c.entity?d.substitute("${0}.${1}",[c.entity,c.property]):c.property;var f=this._grid.store.query({targetProperty:e});if(f[0]){var g=this._getMapping(c.entity);g?g.target.searchProperty=c.property:this.importOptions.mappings.push({source:{name:f[0].sourceProperty,value:f[0].sourceProperty,displayName:""},target:this.getTargetProperty(this.importOptions.targetList.get(c.entity),c.entity,c.property)})}else a=!1}else b.some(this.importOptions.mappings,dojo.hitch(this,function(a,b){return a.target.name===c.entity&&(this.importOptions.mappings.splice(b,1),!0)}))})),a}})})},"Sage/MainView/Import/ManageImportOptions":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/string","dijit/registry","dojo/dom-class","dojo/store/Memory","dojo/dom-construct","dojo/_base/lang","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/ManageImportOptions.html","dojo/i18n!./nls/ManageImportOptions","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/UI/Controls/Lookup","dijit/form/FilteringSelect","dojox/layout/TableContainer","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a("Sage.MainView.Import.ManageDuplicates",[i],{id:"dlgManageImportOptions",widgetTemplate:m.makeTemplateFromString(j),_nlsResources:k,_currentStep:l.importWizardStep.ManageImportOptions,constructor:function(){this.inherited(arguments)},startup:function(){l.setDomNodeVisible(this.divAssociations,this.importOptions.matchOptions&&this.importOptions.matchOptions.length>0),this._loadMatchOptions(),this._initializeDefaultOwner(),this._assignDefaultValues()},show:function(){l.setDomNodeVisible(this.divValidationMessage,!1),b.forEach(this.importOptions.matchOptions,function(a){var b=d.byId(c.substitute("${0}_ErrorTag",[a.name]));b&&l.setDomNodeVisible(b,!1)}),"Contact"!=this.importOptions.importEntity?(l.setDomNodeVisible(this.chkAccountNameControlNode,!1),this.importOptions.buildSecondaryAccountName=!1):(l.setDomNodeVisible(this.chkAccountNameControlNode,!0),this.importOptions.buildSecondaryAccountName=!0,this.chkAccountName.set("checked",this.importOptions.buildSecondaryAccountName)),this.inherited(arguments)},preformValidation:function(a,b){var c="";if(e.add(this.errorNoAddHocGroupName,"display-none"),e.add(this.errorNoOwner,"display-none"),this.rdoCreateAdHoc.checked)if(""===this.txtAdHocGroupName.value)c=k.errorNoAddHocGroupName,e.remove(this.errorNoAddHocGroupName,"display-none"),this.spanValidationMessage.innerHTML=m.htmlEncode(c),l.setDomNodeVisible(this.divValidationMessage,""!==c),this._updateImportOptions(),b();else{var d=new Sage.Data.BaseSDataStore({service:q.getSDataService("system"),resourceKind:"groups",include:[],select:["name","family","isHidden","isAdHoc","mainTable","keyField","entityName"],where:"name eq "+this.txtAdHocGroupName.value});Sage.Groups._groupContext.CurrentFamily=Sage.Groups._groupContext.CurrentFamily.toUpperCase();var f=dojo.string.substitute("upper(family) eq '${CurrentFamily}'",Sage.Groups._groupContext)+" and name eq '"+this.txtAdHocGroupName.value+"'";d.fetch({query:f,count:1e3,sort:[{attribute:"name"}],start:0,onComplete:function(d){d.length>0?(c=k.errorDuplicateAddHocGroupName,e.remove(this.errorNoAddHocGroupName,"display-none"),this.spanValidationMessage.innerHTML=m.htmlEncode(c),l.setDomNodeVisible(this.divValidationMessage,""!==c),this._updateImportOptions(),b()):(l.setDomNodeVisible(this.divValidationMessage,""!==c),this._updateImportOptions(),a())},scope:this})}else this.lueDefaultOwner&&!this.lueDefaultOwner.selectedObject?(c=k.errorNoOwner,e.remove(this.errorNoOwner,"display-none"),this.spanValidationMessage.innerHTML=m.htmlEncode(c),l.setDomNodeVisible(this.divValidationMessage,""!==c),this._updateImportOptions(),b()):(l.setDomNodeVisible(this.divValidationMessage,""!==c),this._updateImportOptions(),a())},destroy:function(){this.associations_Container.destroyRecursive(),this.lueDefaultOwner&&this.lueDefaultOwner.destroy(),this.inherited(arguments)},_loadMatchOptions:function(){b.forEach(this.importOptions.matchOptions,h.hitch(this,function(a){this._addMatchOption(a)}))},_addMatchOption:function(a){var b=new p({showLabels:!0,orientation:"horiz",labelWidth:"",customClass:"ManageImportOptions",style:"display:inline-block;padding-right:25px"}),d=new o({id:c.substitute("${0}_Association",[a.name]),store:new f({data:a.properties,idProperty:"name"}),maxHeight:150,searchAttr:"displayName",labelAttr:"displayName",placeHolder:this.selectOption_Caption,required:!1,title:c.substitute("${0} ${1}",[a.displayName,k.match_Caption])}),e=this._getDefaultValue(a);e&&d.attr("value",e);var h=new g.create("span",{id:c.substitute("${0}_ErrorTag",[a.name]),style:"color: red;padding:25px 25px;",innerHTML:"*",class:"display-none"});b.addChild(d),this.associations_Container.addChild(b),this.associations_Container.containerNode.appendChild(h)},_getDefaultValue:function(a){switch(a.name){case"Account":return this.importOptions.importTemplateId||a.selectedValue?a.selectedValue:"AccountName";case"Contact":return this.importOptions.importTemplateId||a.selectedValue?a.selectedValue:"Email"}return a.selectedValue},_ensureOwnerProperty:function(){var a=this.importOptions.targetList.get("Owner"),b=!1;return a&&a.visableToUsers&&(b=!0),l.setDomNodeVisible(this.rowDefaultOwner,b),b},_initializeDefaultOwner:function(){this._ensureOwnerProperty()&&(this.defaultOwnerLookupConfig={id:"_defaultOwner",structure:[{label:k.lookupDescriptionColText,field:"Description"},{label:k.lookupTypeColText,field:"Type"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"ownerViews",sort:[{attribute:"Description"}]},isModal:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:k.lookupDefaultOwner_Caption,dialogButtonText:this.btnOK_Caption},this.lueDefaultOwner=new n({id:"lu_DefaultOwner",config:this.defaultOwnerLookupConfig,allowClearingResult:!0,style:"width:100%"}),g.place(this.lueDefaultOwner.domNode,this.defaultOwner_Container.domNode,"only"))},_assignDefaultValues:function(){l.getOwner(this.importOptions.defaultOwnerId,this.lueDefaultOwner),this.lblImportOption.textContent=k.txtOption_Insert,this._initializeAdHocGroups()},_initializeAdHocGroups:function(){this.adHocGroups||Sage.Services.getService("ClientGroupContext").getAdHocGroupList(function(a){this.adHocGroups=new o({store:new f({data:a,idProperty:"$key"}),maxHeight:150,searchAttr:"name",labelAttr:"name",required:!1,placeHolder:this.selectOption_Caption}),this.adHocGroups.startup(),this.adHocGroups_Container.addChild(this.adHocGroups),this.importOptions.groupSettings&&(this.importOptions.groupSettings.id?(this.rdoExistingAdHoc.set("checked",!0),this.adHocGroups.attr("value",this.importOptions.groupSettings.id)):this.importOptions.groupSettings.name&&(this.rdoCreateAdHoc.set("checked",!0),this.txtAdHocGroupName.set("value",this.importOptions.groupSettings.name)))},this)},_updateImportOptions:function(){this.importOptions.previewDataMode=this.cmbImportTypes.attr("displayedValue"),this.importOptions.defaultOwnerId=this.lueDefaultOwner&&this.lueDefaultOwner.selectedObject?this.lueDefaultOwner.selectedObject.$key:null,this.importOptions.groupSettings.name=this.rdoCreateAdHoc.checked?this.txtAdHocGroupName.value:null,this.importOptions.groupSettings.id=this.rdoExistingAdHoc.checked&&this.adHocGroups.value?this.adHocGroups.value:null,this.importOptions.previewAdHocGroup=this.rdoExistingAdHoc.checked?this.adHocGroups.attr("displayedValue"):this.txtAdHocGroupName.value,this.importOptions.selectedMatchOptions=[],b.forEach(this.importOptions.matchOptions,h.hitch(this,function(a){var b=d.byId(c.substitute("${0}_Association",[a.name]));if(a.selectedValue=null,b&&(a.selectedValue=b.value),b){var e=this.importOptions.importEntity,f="";f=e!==a.name?c.substitute("${0}.${1}",[a.name,b.displayedValue]):b.displayedValue,this.importOptions.selectedMatchOptions.push({property:b.value,entity:a.name,displayValue:f})}}))},_chkAccountName_OnChange:function(){this.importOptions.buildSecondaryAccountName=this.chkAccountName.checked},_cmbImportTypes_OnChange:function(){switch(this.cmbImportTypes.value){case"insert":this.lblImportOption.textContent=k.txtOption_Insert;break;case"update":this.lblImportOption.textContent=k.txtOption_Update;break;case"insertAndUpdate":this.lblImportOption.textContent=k.txtOption_InsertUpdate}}})})},"Sage/MainView/Import/AddActions":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/AddActions.html","dojo/i18n!./nls/AddActions","Sage/MainView/Import/ImportManagerUtility","Sage/Utility"],function(a,b,c,d,e,f,g,h){return a("Sage.MainView.Import.AddActions",[d],{id:"dlgAddActions",widgetTemplate:h.makeTemplateFromString(e),_nlsResources:f,_currentStep:g.importWizardStep.AddActions,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)}})})},"Sage/MainView/Import/Review":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/string","dojo/topic","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/Review.html","dojo/i18n!./nls/Review","Sage/MainView/Import/ImportManagerUtility","Sage/MainView/Import/ManageImportTemplate","Sage/Utility","Sage/Utility/Jobs","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a("Sage.MainView.Import.Review",[f],{id:"dlgReview",templateDialogId:"dlgManageImportTemplate",widgetTemplate:k.makeTemplateFromString(g),_nlsResources:h,_currentStep:i.importWizardStep.Review,_checkCurrentStep:function(){!0===this.importOptions.optionsFromTemplate?this._currentStep=i.importWizardStep.ManageImportOptions:this._currentStep=i.importWizardStep.Review},constructor:function(){this.inherited(arguments)},show:function(){!0===this.importOptions.optionsFromTemplate?this.btnBack.setAttribute("label",h.btnBack_Edit_Caption):this.btnBack.setAttribute("label",this.baseNlsResources.btnBack_Caption),this._initializeTemplateList(),this.previewFileName.textContent=d.substitute(h.previewFileName_Caption,[this.importOptions.fileName]),this.previewImportDataMode.textContent=d.substitute(h.previewImportDataMode,[this.importOptions.previewDataMode]),this.previewRecordCount.textContent=d.substitute(h.previewRecordCount_Caption,[this.importOptions.totalRecordCount]),this.previewAdHocGroup.textContent=d.substitute(h.previewAdHocGroup_Caption,[this.importOptions.previewAdHocGroup]),this.btnSaveTemplate.set("disabled",null===this.importOptions.importTemplateId),this.subscriptions.push(e.subscribe("/importController/importWizard/savedImportTemplate",dojo.hitch(this,function(){this._initializeTemplateList()}))),this.inherited(arguments)},_initializeTemplateList:function(){var a={where:d.substitute("EntityName eq '${0}'",[this.importOptions.importEntity]),onSuccess:dojo.hitch(this,function(a){this.importTemplates&&this.templates_Container&&this.templates_Container.removeChild(this.importTemplates),this.importTemplates=this._initializeTemplates(a),this.importTemplates.placeAt(this.templates_Container),this.btnSaveTemplate.setAttribute("disabled",null===this.importOptions.importTemplateId||this.importOptions.isSystemTemplate)})};i.requestImportTemplates(a)},_btnSaveTemplate_OnClick:function(){this.saveImportJobTemplate(this.getTemplateConfigurationOptions())},_btnSaveAsTemplate_OnClick:function(){var a=dijit.byId("dlgManageImportTemplate");a&&a.destroyRecursive(),a=new j,a.startup(),a.show()},_btnFinish_OnClick:function(){this._startImportJob(),this._dialog.hide(),this.finishWizard()},_startImportJob:function(){var a={descriptor:d.substitute(h.txtJobDescriptor,[this.importOptions.importEntityDisplayName,this.importOptions.attachmentName]),closable:!0,title:d.substitute(h.txtJobTitle_Caption,[this.importOptions.importEntityDisplayName]),key:"Sage.SalesLogix.BusinessRules.Jobs.ImportJob",parameters:[{name:"ImportConfiguration",value:Sys.Serialization.JavaScriptSerializer.serialize(this.getConfigurationOptions())}],failure:function(a){m.showError(d.substitute(h.errorJobFailed,[a.responseText]))},ensureZeroFilters:!0};l.triggerJobAndDisplayProgressDialog(a)}})})},"Sage/MainView/Import/ManageImportTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/ManageImportTemplate.html","dojo/i18n!./nls/ManageImportTemplate","Sage/Utility","Sage/UI/Dialogs","Sage/MainView/Import/ImportManagerUtility","Sage/UI/Controls/Grid","dojo/store/Memory","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.Import.ManageImportTemplate",[d],{id:"dlgManageImportTemplate",widgetTemplate:g.makeTemplateFromString(e),_nlsResources:f,templatesGrd:"",constructor:function(){this.inherited(arguments)},startup:function(){this._requestImportTemplates()},_requestImportTemplates:function(){var a={onSuccess:dojo.hitch(this,function(a){i.setDomNodeVisible(this.divLoadingMessage,!1),this._loadImportTemplates(a)})};i.requestImportTemplates(a)},_loadImportTemplates:function(a){this.templatesGrd=new j({classNames:"dgrid-autoheight dgrid-no-data",store:new k({data:a,idProperty:"$key"}),columns:{Delete:{label:" ",field:"deletelink",renderCell:b.hitch(this,function(a,c,d){var e=document.createElement("a");e.style.cursor="pointer";var g=document.createTextNode(f.colDelete);e.appendChild(g),e.title=f.colDelete,e.onclick=b.hitch(this,function(){this._removeImportTemplate(a.$key),this._deleteImportTemplate(a.$key)}),d.appendChild(e)}),sortable:!1},TemplateName:f.colDescription,EntityName:f.colEntityName,CreateUser:{label:f.colCreatedBy,get:function(a){var b=i.getUserName(a.CreateUser);return b?b.$descriptor:""}},
CreateDate:{label:f.colCreatedDate,get:function(a){return i.formatDate(a.CreateDate)}},ModifyUser:{label:f.colModifiedBy,get:function(a){if(null!==a.ModifyUser){var b=i.getUserName(a.ModifyUser);if(b)return b.$descriptor}return""}},ModifyDate:{label:f.colModifiedDate,get:function(a){return i.formatDate(a.ModifyDate)}}},loadingMessage:this.gridLoading_Caption,noDataMessage:this.gridNoResults_Caption,placeHolder:this.templatesGrid,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0})},_removeImportTemplate:function(a){this.templatesGrd&&(this.templatesGrd.store.remove(a),this.templatesGrd.refresh())},_deleteImportTemplate:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(l.getSDataService("dynamic"));b.setResourceKind("importTemplates"),b.setResourceSelector(c.substitute("'${0}'",[a])),b.delete({},{scope:this,failure:function(a){h.showError(c.substitute(f.errorDeletingTemplate,[a]))}})},_btnSave_OnClick:function(){this._isValid()&&(this.importOptions.templateName=this.txtTemplateDescription.get("value"),this.saveImportJobTemplate(this.getTemplateConfigurationOptions(!0)),this._dialog.hide())},_isValid:function(){var a=!0;return""===this.txtTemplateDescription.value&&(a=!1),a},preformValidation:function(a,b){var c="";dojo.addClass(this.errorInvalidDescription,"display-none"),""===this.txtTemplateDescription.value&&(c=f.errorNoTemplateDescription,dojo.removeClass(this.errorInvalidDescription,"display-none"),this.spanValidationMessage.innerHTML=g.htmlEncode(c)),i.setDomNodeVisible(this.divValidationMessage,""!==c),""===c?a():b()},_btnCancel_OnClick:function(){this._dialog.hide()}})})},"Sage/UI/BulkUpdateWidget":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/registry","dijit/form/TextBox","dijit/form/SimpleTextarea","dojo/query","dojo/_base/declare","dojo/_base/array","dojo/string","dojo/on","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/store/Memory","dojo/dom-construct","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/BulkUpdateWidget.html","dojo/i18n!./nls/BulkUpdateWidget","Sage/Utility","Sage/UI/Dialogs","Sage/Data/SDataServiceRegistry","Sage/UI/FilteringSelect","Sage/UI/Controls/Lookup","Sage/UI/JobSchedulingWidget","Sage/UI/Controls/Currency","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Numeric","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/ImageButton","Sage/Utility/Jobs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){return h("Sage.UI.BulkUpdateWidget",[q,c],{id:"dlgBulkUpdateWidget",_dialog:!1,widgetTemplate:t.makeTemplateFromString(r),_nlsResources:s,updateableProps:[],currentSelectedRowIndex:0,_helpIconTopic:"BulkAction",propertyTemplate:new Simplate(["<div>",'<div orientation="horiz" data-dojo-type="dojox.layout.TableContainer" id="propertyRow_{%= $.index %}" class="propertyRows">','<div style="display:flex">','<div style=float:left;" class="bulkUpdateWidgetDialog-inner-width">',"<table>","<tr>",'<td style="width:32%">','<div label="{%= $.update_Property_Caption %}" id="propertiesContainer_{%= $.index %}" data-dojo-type="dijit/layout/ContentPane"></div>',"</td>",'<td id="optionlblContainer_{%= $.index %}" class="display-none">','<label id="optionCaption_{%= $.index %}">{%= $.update_To_Caption %}</label>',"</td>","<td>",'<div data-dojo-type="dojox.layout.TableContainer" id="booleanContainer_{%= $.index %}" orientation="horiz" cols="2" class="display-none">',"<label>{%= $.yes_Caption %}</label>",'<input data-dojo-type="dijit/form/RadioButton" type="radio" name="rdgrpBooleanOption_{%= $.index %}" value="yesOption"','id="rdoYesOption_{%= $.index %}" checked="checked" style="width: 50px" />',"<label>{%= $.no_Caption %}</label>",'<input data-dojo-type="dijit/form/RadioButton" type="radio" name="rdgrpBooleanOption_{%= $.index %}" value="noOption"','id="rdoNoOption_{%= $.index %}" style="width: 50px" />',"</div>",'<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="2" id="dateContainer_{%= $.index %}" class="display-none">','<label style="padding-right:5px">{%= $.moveTo_Caption %}</label>','<input data-dojo-type="dijit/form/RadioButton" type="radio" name="rdgrpDateOption_{%= $.index %}" value="toDateOption" checked="checked"','id="rdoToDateOption_{%= $.index %}" onchange="dijit.byId(\'{%= $.id %}\')._onDateTypeChange({%= $.index %}, \'date\');" style="width: 60px" />',"<label>{%= $.moveOut_Caption %}</label>",'<input data-dojo-type="dijit/form/RadioButton" type="radio" name="rdgrpDateOption_{%= $.index %}" value="moveDaysOption"','id="rdoMoveDaysOption_{%= $.index %}" onchange="dijit.byId(\'{%= $.id %}\')._onDateTypeChange({%= $.index %}, \'date\');" style="width: 60px" />',"</div>",'<div id="slxControlContainer_{%= $.index %}" class="display-none"></div>',"</td>","<td>",'<div id="calendarContainer_{%= $.index %}" class="display-none"></div>','<div id="moveDaysContainer_{%= $.index %}" class="display-none"></div>',"</td>","<td>",'<span id="numberOfDaysContainer_{%= $.index %}" class="display-none"></span>&nbsp&nbsp','<label id="numberOfDaysLabel_{%= $.index %}" class="display-none">{%= $.days_Caption %}</label>',"</td>","</tr>","</table>","</div>",'<div id="propertyRowButton_{%= $.index %}" style="padding-top:5px"></div>','<span id="errorNoSelectedProp_{%= $.index %}" style="color:red;padding-top:15px" class="display-none">*</span>',"</div>","</div>","</div>"]),hideImageUrl:"images/icons/Find_Remove_16x16.gif",addImageUrl:"images/icons/Find_Add_16x16.gif",dataType:{Boolean:"boolean",Binary:"binary",Currency:"currency",Date:"date",Decimal:"decimal",Enum:"enum",Key:"key",Numeric:"numeric",Owner:"owner",Picklist:"picklist",String:"string",Unknown:"unknown",Invalid:"invalid",User:"user"},moveActionDateType:{Forward:"Forward",Backward:"Backward"},controlTypeName:{Currency:"currencyControl",Date:"dateControl",Lookup:"lookupControl",Number:"numericControl",Picklist:"picklistControl",Standard:"standardControl",NumberOfDays:"numberOfDays"},picklistStorageMode:{Text:"text",Id:"id",Code:"code",Number:"number"},constructor:function(a){n.mixin(this,s),n.mixin(this,a),this.updateableProps=[],this._requestUpdateableProperties(),this.inherited(arguments)},show:function(){this.index=0,this._setDisplayMode(this.divLoadingMessage,!0),this._helpIconTopic&&(this._dialog.helpIcon||(n.mixin(this._dialog,new D),this._dialog.createHelpIconByTopic(this._helpIconTopic))),this.inherited(arguments)},destroy:function(){this.jobSchedulingWidget&&this.jobSchedulingWidget.destroyWidget(),this.propertyRowContainer.destroyRecursive(),this.inherited(arguments)},_requestUpdateableProperties:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(v.getSDataService("metadata"));a.setResourceKind(j.substitute("entities('${0}')/properties",[this.currentEntityPrettyName])),a.setQueryArg("select","bulkAction/*,displayName,dataTypeId,dataTypeData,propertyName"),a.setQueryArg("where","bulkAction.canBulkUpdate"),a.read({success:n.hitch(this,function(a){a&&(this.properties=a.$resources,this._requestRelationshipProperties(),this._requestExtensionEntities(),0===this.properties.length&&(u.showInfo(j.substitute(this.header_NoPropertiesEnabled,[this.currentEntityPrettyName])),this._close()))}),failure:function(a){u.showError(j.substitute(this.errorRequestPropertyOptions,[this.currentEntityPrettyName,a]))}})},_requestRelationshipProperties:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(v.getSDataService("metadata"));a.setResourceKind("relationships"),a.setQueryArg("select","bulkAction/*,childEntity/$key,parentProperty/displayName,parentProperty/propertyName,parentEntity/$key,childProperty/displayName,childProperty/propertyName,childProperty/isIncluded"),a.setQueryArg("where",j.substitute("parentEntity.name eq '${0}' and bulkAction.canBulkUpdate or childEntity.name eq '${0}' and bulkAction.canBulkUpdate",[this.currentEntityPrettyName])),a.read({success:n.hitch(this,function(a){a&&i.forEach(a.$resources,n.hitch(this,function(a){a.childEntity.$key===this.currentEntityPrettyName?a.childProperty.isIncluded&&this.properties.push({$key:a.$key,displayName:a.childProperty.displayName?a.childProperty.displayName:a.childProperty.propertyName,propertyName:a.childProperty.propertyName,dataTypeId:a.parentEntity.$key}):this.properties.push({$key:a.$key,displayName:a.parentProperty.displayName?a.parentProperty.displayName:a.parentProperty.propertyName,propertyName:a.parentProperty.propertyName,dataTypeId:a.childEntity.$key})}))}),failure:function(a){u.showError(j.substitute(this.errorRequestPropertyOptions,[this.currentEntityPrettyName,a]))}})},_requestExtensionEntities:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(v.getSDataService("metadata"));a.setResourceKind("entities"),a.setQueryArg("include","properties,properties/bulkAction"),a.setQueryArg("where","isExtension"),a.read({success:n.hitch(this,function(a){a&&i.forEach(a.$resources,n.hitch(this,function(a){a.extendedEntity.$key===this.currentEntityPrettyName&&i.forEach(a.properties.$resources,n.hitch(this,function(b){if(b.bulkAction.canBulkUpdate){var c=a.$key,d=b;d.$key=b.id,d.propertyName=c+"."+b.propertyName,this.properties.push(d)}}))})),this._addPropertyRow()}),failure:function(a){u.showError(j.substitute(this.errorRequestPropertyOptions,[this.currentEntityPrettyName,a]))}})},_addPropertyRow:function(){this.index++;var a=this.propertyTemplate.apply(this);p.place(a,this.propertyRowContainer.domNode),this._addPropertyList(),this._setDisplayMode(this.divLoadingMessage,!1),1!==this.index&&this._renderRowButton(this.index)},_addPropertyList:function(){var a=this;this._clearControlState("updateProperty",this.index);var b=new w({id:j.substitute("updateProperty_${0}",[this.index]),store:new o({data:this.properties,idProperty:"$key"}),maxHeight:150,searchAttr:"displayName",labelAttr:"displayName",placeHolder:this.selectOption_Caption,required:1===this.index,title:this.update_Property_Caption,propertyRowIndex:this.index,onChange:function(b){var c=null;a.currentSelectedRowIndex=this.propertyRowIndex,i.some(a.properties,function(a){return a.$key===b&&(c=a,!0)}),a._renderControls(c)},fetchProperties:{sort:[{attribute:"displayName",descending:!1}]}});l.byId(j.substitute("propertiesContainer_${0}",[this.index])).appendChild(b.domNode)},_removePropertyRow:function(a){this.index--;var b=d.byId(j.substitute("updateProperty_${0}",[a]));b&&b.destroy(),g(l.byId(["propertyRow_",a].join(""))).orphan(),this._setDisplayMode(this.divValidationMessage,!1)},_renderControls:function(a){var b,c=!1,d=this._resolveDataType(a.dataTypeId);this._clearRowControl();var h=l.byId(j.substitute("slxControlContainer_${0}",[this.currentSelectedRowIndex]));l.byId(j.substitute("optionlblContainer_${0}",[this.currentSelectedRowIndex])).textContent=this.update_To_Caption;for(var i=g(".propertyRows"),k=0;k<i.length;k++){var m=k+1;m!==this.currentSelectedRowIndex&&this._getPropertySelectionValue(m).propertyName===a.propertyName&&(l.byId(j.substitute("optionlblContainer_${0}",[this.currentSelectedRowIndex])).textContent=j.substitute(this.errorDuplicateValue,[d.name]),c=!0)}if(!c)switch(d.type){case this.dataType.Binary:b=new f({id:j.substitute("${0}_${1}",[this.controlTypeName.Standard,this.currentSelectedRowIndex]),style:"width:100%"}),h.style.paddingLeft="8px";break;case this.dataType.Currency:b=new z({id:j.substitute("${0}_${1}",[this.controlTypeName.Standard,this.currentSelectedRowIndex]),constraints:{places:2,currency:"USD",locale:this.locale},class:"textcontrol currency"});break;case this.dataType.Date:this._createDateControls();break;case this.dataType.Decimal:case this.dataType.Numeric:b=new B(d.type===this.dataType.Decimal?{id:j.substitute("${0}_${1}",[this.controlTypeName.Standard,this.currentSelectedRowIndex]),constraints:{places:2}}:{id:j.substitute("${0}_${1}",[this.controlTypeName.Standard,this.currentSelectedRowIndex]),formatType:"Number"});break;case this.dataType.Enum:var n=JSON.parse(a.dataTypeData);b=new w({id:j.substitute("${0}_${1}",[this.controlTypeName.Standard,this.currentSelectedRowIndex]),store:new o({data:n.Items,idProperty:"Value"}),maxHeight:150,searchAttr:"Name",labelAttr:"Name",placeHolder:this.selectOption_Caption,required:!0});break;case this.dataType.Picklist:var q=JSON.parse(a.dataTypeData);b=new C({id:j.substitute("${0}_${1}",[this.controlTypeName.Picklist,this.currentSelectedRowIndex]),pickListName:q.PickListName,canEditText:!1,itemMustExist:!!q.MustExistInList&&q.MustExistInList,storeMode:this._getStorageMode(q.Storage)}),h.style.paddingLeft="8px";break;case this.dataType.String:b=new e({id:j.substitute("${0}_${1}",[this.controlTypeName.Standard,this.currentSelectedRowIndex])});break;case this.dataType.Owner:case this.dataType.User:b=d.type===this.dataType.User?this._createUserLookup():this._createOwnerLookup();break;case this.dataType.Invalid:case this.dataType.Unknown:h.childNodes.length>0&&h.removeChild(h.childNodes[0]),l.byId(j.substitute("optionlblContainer_${0}",[this.currentSelectedRowIndex])).textContent=j.substitute(this.errorInvalidPropertyType,[d.name])}b&&(b.startup(),p.place(b.domNode,h,"only")),1===this.currentSelectedRowIndex&&this._renderRowButton(this.currentSelectedRowIndex),this._onPropertyChanged(d.type,c)},_clearRowControl:function(){this._clearControlState(this.controlTypeName.Standard,this.currentSelectedRowIndex),this._clearControlState(this.controlTypeName.Picklist,this.currentSelectedRowIndex),this._clearControlState(this.controlTypeName.Lookup,this.currentSelectedRowIndex)},_getStorageMode:function(a){switch(a.toLowerCase()){case this.picklistStorageMode.Code:return this.picklistStorageMode.Code;case this.picklistStorageMode.Id:return this.picklistStorageMode.Id;case this.picklistStorageMode.Number:return this.picklistStorageMode.Number;default:return this.picklistStorageMode.Text}},_createDateControls:function(){this._clearControlState(this.controlTypeName.Date,this.currentSelectedRowIndex);var a=new A({id:j.substitute("${0}_${1}",[this.controlTypeName.Date,this.currentSelectedRowIndex]),displayDate:!0,displayTime:!1});a.startup();var b=l.byId(j.substitute("calendarContainer_${0}",[this.currentSelectedRowIndex]));p.place(a.domNode,b,"only"),this._clearControlState(this.controlTypeName.NumberOfDays,this.currentSelectedRowIndex);var c=new e({id:j.substitute("${0}_${1}",[this.controlTypeName.NumberOfDays,this.currentSelectedRowIndex]),style:"width:50px"});k(c,"keypress",n.hitch(this,function(a){this._onKeyPress(a)}));var d=l.byId(j.substitute("numberOfDaysContainer_${0}",[this.currentSelectedRowIndex]));p.place(c.domNode,d,"only")},_clearControlState:function(a,b){var c=d.byId(j.substitute("${0}_${1}",[a,b]));c&&c.destroy()},_onPropertyChanged:function(a,b){this._setDisplayMode(l.byId(j.substitute("booleanContainer_${0}",[this.currentSelectedRowIndex])),a===this.dataType.Boolean&&!b),this._setDisplayMode(l.byId(j.substitute("optionlblContainer_${0}",[this.currentSelectedRowIndex])),a!==this.dataType.Date||b),this._setDisplayMode(l.byId(j.substitute("dateContainer_${0}",[this.currentSelectedRowIndex])),a===this.dataType.Date&&!b),this._setDisplayMode(l.byId(j.substitute("slxControlContainer_${0}",[this.currentSelectedRowIndex])),this._isSlxControlType(a)),this._setDisplayMode(l.byId(j.substitute("addCondition_${0}",[this.currentSelectedRowIndex])),!0),this._onDateTypeChange(this.currentSelectedRowIndex,a)},_renderRowButton:function(a){var b;1===a?(this._clearControlState("addRowButton",[a]),b=new E({id:j.substitute("addRowButton_${0}",[a]),icon:this.addImageUrl,class:"groupMenuButton",tooltip:this.addProperty_Tooltip,style:"cursor:pointer;padding:0px 5px;",onClick:n.hitch(this,function(){this._addPropertyRow()})})):(this._clearControlState("removeRowButton",[a]),b=new E({id:j.substitute("removeRowButton_${0}",[a]),icon:this.hideImageUrl,class:"groupMenuButton",tooltip:this.removeProperty_Tooltip,style:"cursor:pointer;padding:0px 5px;",onClick:n.hitch(this,function(){this._removePropertyRow(a)})}));var c=l.byId(j.substitute("propertyRowButton_${0}",[a]));p.place(b.domNode,c,"only")},_isSlxControlType:function(a){return a!==this.dataType.Boolean&&a!==this.dataType.Date},_setDisplayMode:function(a,b){a&&b?m.remove(a,"display-none"):a&&m.add(a,"display-none")},_onDateTypeChange:function(a,b){if(b===this.dataType.Date&&!l.byId(j.substitute("moveDateActionType_${0}",[a]))){var c=[{displayName:this.moveDate_Forward,id:"forward"},{displayName:this.moveDate_Backward,id:"backward"}],d=new w({id:j.substitute("moveDateActionType_${0}",[a]),store:new o({data:c,idProperty:"id"}),value:"forward",maxHeight:150,searchAttr:"displayName",labelAttr:"displayName",placeHolder:this.selectOption_Caption,required:!0,style:"width:125px",fetchProperties:{sort:[{attribute:"displayName",descending:!1}]}}),e=l.byId(j.substitute("moveDaysContainer_${0}",[a]));p.place(d.domNode,e,"only")}var f=l.byId(j.substitute("rdoToDateOption_${0}",[a])),g=!!f&&f.checked;this._setDisplayMode(l.byId(j.substitute("calendarContainer_${0}",[a])),g&&b===this.dataType.Date),this._setDisplayMode(l.byId(j.substitute("moveDaysContainer_${0}",[a])),!g&&b===this.dataType.Date),this._setDisplayMode(l.byId(j.substitute("numberOfDaysContainer_${0}",[a])),!g&&b===this.dataType.Date),this._setDisplayMode(l.byId(j.substitute("numberOfDaysLabel_${0}",[a])),!g&&b===this.dataType.Date)},_resolveDataType:function(a){switch(a.toLowerCase()){case"92432b4d-8206-4a96-ba7b-e4cbd374f148":case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":return{type:this.dataType.Boolean,name:"Boolean"};case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":return{type:this.dataType.Binary,name:"Binary"};case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":return{type:this.dataType.Invalid,name:this.calculatedField};case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":return{type:this.dataType.Currency,name:"Currency"};case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":return{type:this.dataType.Date,name:"Date"};case"2596d57d-89d6-4b72-9036-b18c64c5324c":return{type:this.dataType.Decimal,name:"Decimal"};case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":return{type:this.dataType.Enum,name:"Enum"};case"30053f5a-8d40-4db1-b185-1e4128eb26cc":return{type:this.dataType.Invalid,name:this.standardId};case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"6b0b3d51-0728-4b67-9473-52836a81da53":return{type:this.dataType.Numeric,name:"Numeric"};case"owner":return{type:this.dataType.Owner,name:"Owner"};case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":return{type:this.dataType.Picklist,name:"Picklist"};case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":return{type:this.dataType.String,name:"String"};case"user":return{type:this.dataType.User,name:"User"};default:return{type:this.dataType.Unknown,name:this.unknownPropertyType}}},_createUserLookup:function(){var a=l.byId(j.substitute("updateProperty_${0}",[this.currentSelectedRowIndex])),b=a?a.value:this.lookup_Caption;return this.userLookupConfig={id:j.substitute("user_${0}",[this.currentSelectedRowIndex]),structure:[{label:this.lookupNameColText,field:"UserInfo.UserName",propertyType:"System.String",sortable:!0},{label:this.lookupTitleColText,field:"UserInfo.Title",propertyType:"System.String",sortable:!0},{label:this.lookupDepartmentColText,field:"UserInfo.Department",propertyType:"System.String",sortable:!0},{label:this.lookupRegionColText,field:"UserInfo.Region",propertyType:"System.String",sortable:!0},{label:this.lookupTypeColText,field:"Type",propertyType:"Sage.Entity.Interfaces.UserType",sortable:!0}],gridOptions:{contextualCondition:function(){return"Type ne '5' and Type ne '6' and Type ne '7' and Type ne '8'"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.UserName"}]},isModal:!0,initialLookup:!0,returnPrimaryKey:!0,dialogTitle:j.substitute(this.lookupHeaderText,[b]),dialogButtonText:this.btnOK_Caption},new x({id:j.substitute("${0}_${1}",[this.controlTypeName.Lookup,this.currentSelectedRowIndex]),config:this.userLookupConfig,style:"width:100%"})},_createOwnerLookup:function(){var a=l.byId(j.substitute("updateProperty_${0}",[this.currentSelectedRowIndex])),b=a?a.value:this.lookup_Caption;return this.ownerLookupConfig={id:j.substitute("owner_${0}",[this.currentSelectedRowIndex]),structure:[{label:this.lookupDescriptionColText,field:"Description",propertyType:"System.String",sortable:!0},{label:this.lookupTypeColText,field:"Type",propertyType:"Sage.Entity.Interfaces.OwnerType",sortable:!0}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"ownerViews",sort:[{attribute:"Description"}]},isModal:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:j.substitute(this.lookupHeaderText,[b]),dialogButtonText:this.btnOK_Caption},new x({id:j.substitute("${0}_${1}",[this.controlTypeName.Lookup,this.currentSelectedRowIndex]),config:this.ownerLookupConfig,style:"width:100%"})},_btnOk_OnClick:function(){for(var a=[],b=[],c=[],d=g(".propertyRows"),e=0;e<d.length;e++){var f=e+1;if(!this._isValid(f))return;var h=this._getPropertySelectionValue(f);if(h){if(this._isDuplicateProperty(a,h.propertyName))return this._setDisplayMode(this.divValidationMessage,!0),l.byId(j.substitute("errorNoSelectedProp_${0}",[f]))&&m.remove(l.byId(j.substitute("errorNoSelectedProp_${0}",[f])),"display-none"),void(this.spanValidationMessage.innerHTML=t.htmlEncode(this.errorDuplicateValue));a.push(h.propertyName),b.push(encodeURIComponent(h.propertyValue)),c.push(h.isAggregate)}}var i=this._getCurrentGroupId();"LOOKUPRESULTS"===i&&(i=this._getDefaultGroupId());var k=[{name:"EntityName",value:this.currentEntityPrettyName},{name:"PropertyNames",value:a.join(",")},{name:"PropertyValues",value:b.join(",")},{name:"SelectedIds",value:this.selectionInfo.selectionCount>0?this.selectionInfo.selectedIds.join(",")||"":""},{name:"GroupId",value:i},{name:"BusinessRuleName",value:""},{name:"AppliedFilters",value:Sys.Serialization.JavaScriptSerializer.serialize(F.getFiltersForJob())},{name:"LookupConditions",value:Sys.Serialization.JavaScriptSerializer.serialize(F.getLookupConditionsForJob())},{name:"AggregateValues",value:c.join(",")},{name:"EntityTableName",value:this.currentEntityTableName}],n={descriptor:this.job_Description,showErrorNotification:!1,closable:!0,title:this.updateRecords_Caption,key:"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob",parameters:k,success:function(a){},failure:function(a){u.showError(j.substitute(this.errorRequestingJobMgr,[a.statusText]))},ensureZeroFilters:!0};this._close(),F.triggerJobAndDisplayProgressDialog(n)},_isDuplicateProperty:function(a,b){var c=!1;return i.some(a,function(a){b===a&&(c=!0)}),c},_getPropertySelectionValue:function(a){var b=this._getProperty(a);switch(this._resolveDataType(b.item.dataTypeId).type){case this.dataType.Binary:case this.dataType.Currency:case this.dataType.Decimal:case this.dataType.String:case this.dataType.Enum:return{propertyName:this._getPropertyName(b.value),propertyValue:d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Standard,b.propertyRowIndex]))?d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Standard,b.propertyRowIndex])).get("value"):"",isAggregate:!1};case this.dataType.Boolean:return{propertyName:this._getPropertyName(b.value),propertyValue:l.byId(j.substitute("rdoYesOption_${0}",[b.propertyRowIndex]))?l.byId(j.substitute("rdoYesOption_${0}",[b.propertyRowIndex])).checked:"",isAggregate:!1};case this.dataType.Date:return l.byId(j.substitute("rdoToDateOption_${0}",[b.propertyRowIndex])).checked?{propertyName:this._getPropertyName(b.value),propertyValue:d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Date,b.propertyRowIndex])).get("displayedValue"),isAggregate:!1}:d.byId(j.substitute("moveDateActionType_${0}",[b.propertyRowIndex])).item.id.toUpperCase()===this.moveActionDateType.Forward.toUpperCase()?{propertyName:this._getPropertyName(b.value),propertyValue:d.byId(j.substitute("${0}_${1}",[this.controlTypeName.NumberOfDays,b.propertyRowIndex])).get("value"),isAggregate:!0}:{propertyName:this._getPropertyName(b.value),propertyValue:j.substitute("-${0}",[d.byId(j.substitute("${0}_${1}",[this.controlTypeName.NumberOfDays,b.propertyRowIndex])).get("value")]),isAggregate:!0};case this.dataType.Numeric:return{propertyName:this._getPropertyName(b.value),propertyValue:d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Standard,b.propertyRowIndex]))?d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Standard,b.propertyRowIndex])).get("focusNode").get("value"):"",isAggregate:!1};case this.dataType.Owner:case this.dataType.User:var c=d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Lookup,b.propertyRowIndex]));return{propertyName:this._getPropertyName(b.value),propertyValue:c&&c.selectedObject?c.selectedObject.$key:"",isAggregate:!1};case this.dataType.Picklist:return{propertyName:this._getPropertyName(b.value),propertyValue:this._getPicklistValue(b),isAggregate:!1}}return!1},_getPropertyName:function(a){var b;return i.some(this.properties,function(c){return c.$key===a&&(b=c.propertyName,!0)}),b},_isValid:function(a){var b=l.byId(j.substitute("errorNoSelectedProp_${0}",[a]));b&&m.add(b,"display-none");var c=this._getProperty(a),e=this._resolveDataType(c.item.dataTypeId),f=!1;switch(e.type){case this.dataType.Boolean:return!!l.byId(j.substitute("rdoYesOption_${0}",[a]));case this.dataType.Binary:case this.dataType.Currency:case this.dataType.Decimal:case this.dataType.Numeric:case this.dataType.String:case this.dataType.Enum:d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Standard,c.propertyRowIndex]))&&(f=""!==d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Standard,c.propertyRowIndex])).get("value"));break;case this.dataType.Date:l.byId(j.substitute("rdoToDateOption_${0}",[c.propertyRowIndex])).checked?d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Date,c.propertyRowIndex]))&&(f=""!==d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Date,c.propertyRowIndex])).get("displayedValue")):d.byId(j.substitute("${0}_${1}",[this.controlTypeName.NumberOfDays,c.propertyRowIndex]))&&(f=""!==d.byId(j.substitute("${0}_${1}",[this.controlTypeName.NumberOfDays,a])).get("value"));break;case this.dataType.Owner:case this.dataType.User:var g=d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Lookup,c.propertyRowIndex]));f=g&&!!g.selectedObject;break;case this.dataType.Picklist:d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Picklist,c.propertyRowIndex]))&&(f=""!==d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Picklist,c.propertyRowIndex])).get("value"))}return f||(m.remove(l.byId(j.substitute("errorNoSelectedProp_${0}",[c.propertyRowIndex])),"display-none"),this.spanValidationMessage.innerHTML=t.htmlEncode(this.errorUnspecifiedValue)),this._setDisplayMode(this.divValidationMessage,!f),f},_getProperty:function(a){var b=d.byId(j.substitute("updateProperty_${0}",[a]));return b||this._getProperty(a+1)},_getPicklistValue:function(a){var b=d.byId(j.substitute("${0}_${1}",[this.controlTypeName.Picklist,a.propertyRowIndex]));if(b)switch(b._getStoreModeAttr()){case this.picklistStorageMode.Code:return b._getCodeAttr();case this.picklistStorageMode.Id:return b._getIdAttr();default:return b.get("value")}return""},_getCurrentGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");return a?a.getContext().CurrentGroupID:""},_getDefaultGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");return a?a.getContext().DefaultGroupID:""},_btnCancel_OnClick:function(){this._close()},_onKeyPress:function(a){t.restrictToNumberOnKeyPress(a)||g.stopEvent(a)},_chkScheduleJob_OnChange:function(a){this.jobSchedulingWidget||(this.jobSchedulingWidget=new y,this.jobSchedulingWidget.initialize(),this.jobSchedulingWidget.placeAt(this.jobScheduler_Container)),this._setDisplayMode(this.jobSchedulingWidget.divJobSchedulingWidget,a)},_close:function(){var a=d.byId(this.id);this._dialog.hide(),a&&a.destroyRecursive()}})})},"Sage/TaskPane/ContactTasksTasklet":function(){define(["dojo/_base/lang","dojo/i18n!./nls/ContactTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/MainView/Contact/ContactUserAssociationEditor","dojo/_base/declare","Sage/UI/Dialogs","dojo/string","Sage/MainView/IntegrationContract/PromoteWidget","Sage/Utility","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i,j,k){return h("Sage.TaskPane.ContactTasksTasklet",[c,d],{taskItems:[],oAuthProviders:null,endPointId:"",constructor:function(){dojo.mixin(this,b),this.taskItems=[{taskId:"Associate Contact",type:"Link",displayName:this.associateContactTitle,clientAction:"contactTasksActions.associateContact();",securedAction:"Entities/Contact/AssociateContact"},{taskId:"Disassociate Contact",type:"Link",displayName:this.disAssociateContactTitle,clientAction:"contactTasksActions.disAssociateContact();",securedAction:"Entities/Contact/DisAssociateContact"}],isIntegrationContractEnabled&&this.taskItems.push({taskId:"promoteContact",type:"Link",displayName:this.promoteTitle,clientAction:"contactTasksActions.validateCanPromote()",securedAction:"Entities/Contact/Promote"})},associateContact:function(){var a=this;if(this._selectionInfo=this.getSelectionInfo(),0===this._selectionInfo.selectionCount)i.showError(this.singleSelectionErrorMessage);else if(this._selectionInfo.selectionCount>1)i.showError(this.multipleSelectionErrorMessage);else{var b={selectionInfo:this._selectionInfo,action:"associate"};this._setupStore(),this._contactUserStore.fetch({predicate:"ContactId eq '"+this._selectionInfo.selectedIds[0]+"'",onComplete:function(b){i.showError(a.associationExistsMessage)},onError:function(){a.prepareSelectedRecords(this.associateContactActionItem(b))},scope:this})}},disAssociateContact:function(){this._selectionInfo=this.getSelectionInfo(),0===this._selectionInfo.selectionCount?i.showError(this.noSelectionErrorMessage):this.prepareSelectedRecords(this.confirmDisassociate(this))},confirmDisassociate:function(a){return function(){var b=a.confirmDisAssociate;a._selectionInfo.selectionCount>1&&(b=a.confirmDisAssociateMultiple),i.raiseQueryDialog(a.disAssociateDialogTitle,dojo.string.substitute(b,[a._selectionInfo.selectionCount]),function(b){a.disAssociateActionItem(b,a)},a.okButtonText,a.cancelButtonText)}},disAssociateActionItem:function(a,b){if(a){b.getSelectionInfo();var c=this.selectionInfo.selectedIds.join();this._removeContactUsers(c,b._successfulContactUserDelete,b)}},_removeContactUsers:function(a,b,c){var d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("ContactUsers").setOperationName("RemoveContactUserAssociations"),f={$name:"RemoveContactUserAssociations",request:{ContactUserId:null,contactIds:a,userIds:null}};e.execute(f,{success:function(){},failure:function(){},scope:c||this})},_successfulContactUserDelete:function(){},_failedContactUserDelete:function(){},_setupStore:function(){this._contactUserStore||(this._contactUserStore=new e({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")}))},associateContactActionItem:function(a,b){return function(){var c=dijit.byId("dlgContactUserAssociation");c?c.setSelectionInfo(a,b):c=new g(a,b),c.show()}},validateCanPromote:function(){this.getCurrentEntity();var b;if("detail"===Sage.Utility.getModeId())b=this.currentEntityId;else{var c=this.getSelectionInfo();if(!this.verifySingleSelection(c))return i.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;b=c.selectedIds[0]}if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return i.showError(this.integrationNotEnabled),!1
;var d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("contacts").setOperationName("CanPromoteContact"),f={$name:"CanPromoteContact",request:{ContactId:b}};e.execute(f,{success:a.hitch(this,function(){this._promoteContact(b)})})},_promoteContact:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));b.setResourceKind("contacts"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",j.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new k(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})}})})},"Sage/TaskPane/CountryTasksTasklet":function(){define(["dojo/i18n!./nls/CountryTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/CountryCodeMapping/CountryAliasConversion","dojo/_base/declare","Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j){return e("Sage.TaskPane.CountryTasksTasklet",[b,c],{taskItems:[],constructor:function(){dojo.mixin(this,a),this.taskItems=[{taskId:"CountryAliasConversion",type:"Link",displayName:this.countryAliasConversionTitle,clientAction:"countryTasksActions.CountryAliasConversion();",securedAction:"Entities/CountryCodeMapping/Edit"}]},CountryAliasConversion:function(){var a=j.byId("dlgCountryAliasConversion");a||(a=new d,a.startup()),a.show()}})})},"Sage/TaskPane/GroupListTasklet":function(){define(["dojox/grid/DataGrid","Sage/Data/SDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Groups/GroupContextService","dojo/_base/declare","dijit/_Widget","dojo/_base/lang","Sage/UI/Filters/FilterManager","dojo/_base/array","Sage/Utility/_LocalStorageMixin","dojo/topic","dojo/_base/xhr","dojo/_base/array","dojo/dom-style","dojo/dom-construct","Sage/MainView/Options/OptionsDialog","dojo/query","dojo/dom-class","dojo/dom-attr","dojo/aspect","dojo/json","dojo/i18n!./nls/GroupListTasklet","dojo/dom-geometry","Sage/Utility/DojoxGroups"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return f("Sage.Groups.GroupListTasklet",[g,k],{_contextSetHandle:null,_groupChangedHandle:null,gridLoadedHandler:null,gridOnSelectedHandle:null,groupContextService:null,context:null,grid:null,store:null,query:"",service:null,id:"GroupListTasklet",keyAlias:"",columnDisplayName:"",allowOnSelectToFire:!0,STORE_KEY_STORE_QUERY:"_STORE_QUERY_",fieldCount:0,mode:"Standard",hideExtendedGroupListOnSelection:!0,showExtendedGroupListOnLookup:!1,gridLoadedLookupResultsHandler:null,extendedGroupListTaskPaneWidth:400,changingGroup:!1,SESSION_STORE_GROUP_LAYOUT_KEY:"EGL_GROUP_LAYOUT_",SESSION_STORE_USER_OPTIONS_KEY:"EGL_USER_OPTION_",LOCAL_STORE_EGL_NAMESPACE:"EGL",LOCAL_STORE_EGL_MODE_KEY:"MODE_",performingLookup:!1,previousGroupId:null,standardWidth:200,_gridSelect:null,_gridStructure:null,shouldRecreateGrid:!1,subscribesTo:{adhocGroupRemoved:"/group/adhoc/removed",groupNavFirst:"/group/nav/first",groupNavPrevious:"/group/nav/previous",groupNavNext:"/group/nav/next",groupNavLast:"/group/nav/last",userOptionsChanged:"userOptions/changed"},constructor:function(a){this.inherited(arguments),h.mixin(this,a),h.mixin(this,w),this.groupContextService=Sage.Services.getService("ClientGroupContext"),this.context=this.groupContextService.getContext(),l.subscribe(this.subscribesTo.userOptionsChanged,h.hitch(this,this._onUserOptionsChanged)),this._loadUserOptions(),this._createToolbarButtons(),this._connectToCommonTasksToggleEvent(),this.counter=0,this._loadMode(),null===this.context.CurrentFamily?this._contextSetHandle=dojo.connect(this.groupContextService,"onContextSet",this,"_createList"):this.toggleMode(this.mode),this._groupChangedHandle=dojo.connect(this.groupContextService,"onCurrentGroupChanged",this,"_groupChanged"),l.subscribe(this.subscribesTo.groupNavFirst,h.hitch(this,this._onGroupNavFirst)),l.subscribe(this.subscribesTo.groupNavPrevious,h.hitch(this,this._onGroupNavPrevious)),l.subscribe(this.subscribesTo.groupNavNext,h.hitch(this,this._onGroupNavNext)),l.subscribe(this.subscribesTo.groupNavLast,h.hitch(this,this._onGroupNavLast)),l.subscribe(this.subscribesTo.adhocGroupRemoved,h.hitch(this,this._onRecordRemoved))},_onGroupNavFirst:function(a){this.selectGridRow(0)},_onGroupNavLast:function(a){this.selectGridRow(a.count-1)},_onGroupNavPrevious:function(a){var b=a.position-1;this.selectGridRow(b-1)},_onGroupNavNext:function(a){var b=a.position-1;this.selectGridRow(b+1)},_onRecordRemoved:function(a){var b,c;b=this.grid.selection.selectedIndex,c=0===b?b+1:b-1,this.selectGridRow(c),this._onSelected(c),this._onRecordRemovedRefresh(0===b?b:c)},_onRecordRemovedRefresh:function(a){if(this.grid){this.gridRefreshedHandler=dojo.connect(this.grid,"_onFetchComplete",this,function(){this.selectGridRow(a)});try{this.grid.setStore(this.get("store"))}catch(a){}}},_groupChanged:function(){if(this.counter++,!(this.performingLookup&&this.counter<2&&"LOOKUPRESULTS"!==this.previousGroupId)&&(this.changingGroup=!0,this.grid&&!this.shouldNotUpdate))try{if("Extended"===this.mode)this.toggleMode("Extended"),this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded");else{"LOOKUPRESULTS"===this.groupContextService.getContext().CurrentGroupID&&this.showExtendedGroupListOnLookup?(this.toggleMode("Extended"),this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded")):(this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded"),this.grid.setStore(this.get("store")))}}catch(a){}},_groupChangedAndLoaded:function(){0!==this.grid.rowCount&&("LOOKUPRESULTS"!==this._getGroupID()||"Extended"!==this.mode?(this.selectGridRow(0),this._onSelected(0)):this._reloadCurrentEntity(),this.gridLoadedHandler&&dojo.disconnect(this.gridLoadedHandler),this.changingGroup=!1,this.counter=0,this.performingLookup=!1)},_getStoreQueryKey:function(){return this.STORE_KEY_STORE_QUERY+this._getGroupID()},_getGroupNS:function(){return Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getGroupID()},_getGroupID:function(){this.context=this.groupContextService.getContext();var a=-1;return this.context&&(a=this.context.CurrentGroupID),a},_getStoreAttr:function(){this.context=this.groupContextService.getContext(),this.context.CurrentFamily=this.context.CurrentFamily.toUpperCase();var a="'"+this.context.CurrentGroupID+"'";"LOOKUPRESULTS"===this.context.CurrentGroupID&&(this.context.CurrentName="Lookup Results");var c=this.getFromLocalStorage(this._getStoreQueryKey(),this._getGroupNS()),d={resourceKind:"groups",service:this.service,queryName:"execute",resourcePredicate:a,select:this._getSelect()};return c&&c.store&&c.query&&(d.select=c.store.select,d.resourcePredicate=c.store.resourcePredicate,this.query=c.query,this.query&&(d.where=this.query)),this.store=new b(d),this.store},refreshGrid:function(){this.context=this.groupContextService.getContext();var a,b,c,d,e=this.context.CurrentEntityPosition-1,f=!0;this.grid.rowCount>0&&(c=this.grid.getItem(e))&&(d=c[this.keyAlias]),Sage.Services.hasService("ClientEntityContext")&&(a=Sage.Services.getService("ClientEntityContext"),b=a.getContext().EntityId,f=Boolean(d&&b&&d===b)),f?this.selectGridRow(e):(this.grid.scrollToRow(0),this.grid.selection.clear()),this.gridRefreshedHandler&&dojo.disconnect(this.gridRefreshedHandler)},selectGridRow:function(a){this.allowOnSelectToFire=!1,this.grid.rowCount>0?(this.grid.scrollToRow(a),this.grid.selection.clear(),this.grid.selection.select(a),this.grid.onSelected(a)):Sage.Link.toListView(),this.allowOnSelectToFire=!0},uninitialize:function(){try{this.grid&&this.grid.destroy&&this.grid.destroy(),this.gridOnSelectedHandle&&this.gridOnSelectedHandle.remove()}catch(a){}this.inherited(arguments)},_createList:function(){var b,d=this,e=this.id+"_grid";if(this.service=c.getSDataService("system"),this.grid)this.grid.setStore(this.get("store"));else{var f=this._getGridStructure(),g=this._getHeight();b=new a({store:this.get("store"),id:e,structure:f,showTitle:!1,autoWidth:!1,rowSelector:!1,selectionMode:"single",width:"100%",height:g+"px",onHeaderCellClick:function(a){d.sorting=!0,d.gridRefreshedOnSortHandler=dojo.connect(b,"_onFetchComplete",d,"_onGridSorted"),this.setSortIndex(a.cell.index),this.onHeaderClick(a)}}),b.rowsPerPage=100,dojo.byId(this.id+"_node").appendChild(b.domNode),this.changingGroup||(this.gridRefreshedHandler=dojo.connect(b,"_onFetchComplete",this,"refreshGrid")),b.startup(),this.grid=b}this.gridOnSelectedHandle=this.grid.on("selected",h.hitch(this,this._onSelected))},_onSelected:function(a){if(this.allowOnSelectToFire){var b,c,d;if(Sage.Services.hasService("ClientEntityContext")&&(b=Sage.Services.getService("ClientEntityContext"),c=b.getContext().EntityId,d=this.grid.selection.getFirstSelected())){Sage.Services.getService("IntegrationContractService").isCPQIntegrationEnabled&&"QUOTE"==this.context.CurrentEntity.toUpperCase()?Sage.Utility.showDetailForm(this.context.CurrentEntity,d[this.keyAlias]):b.navigateSLXGroupEntity(d[this.keyAlias],c,a+1)}!this.hideExtendedGroupListOnSelection||"Extended"!==this.mode||this.sorting||this.changingGroup||this.toggleMode("Standard"),this.sorting=!1}},_reloadCurrentEntity:function(){var a=Sage.Services.getService("ClientContextService");if("detail"===(a.containsKey("modeid")?a.getValue("modeid"):"").toLowerCase()){var b=a.containsKey("ClientEntityId")?a.getValue("ClientEntityId"):"",c=a.containsKey("PreviousEntityId")?a.getValue("PreviousEntityId"):"";Sage.Services.hasService("ClientEntityContext")&&Sage.Services.getService("ClientEntityContext").navigateSLXGroupEntity(b,c,null),!this.hideExtendedGroupListOnSelection||"Extended"!==this.mode||this.sorting||this.changingGroup||this.toggleMode("Standard"),this.sorting=!1}},_createToolbarButtons:function(){var a=r(".task-pane-header-tools"),b=d.substitute('<a href="javascript:void(0)" title=""><div class="Global_Images icon16x16 icon_options_16x16" id="ExtendedGroupList_options" title="${0}" style="cursor: pointer;"></div></a>',[this.GroupListOptionsTitle]);p.place(b,a[0],1),dojo.connect(dojo.byId("ExtendedGroupList_options"),"onclick",function(a){var b=dijit.byId("dlgOptions");b||(b=new q),b.startup(),b.show()});var c=this,e=d.substitute('<a href="javascript:void(0)" title="" id="xxxx"><div class="Global_Images icon16x16 icon_Toggle_Maximize_16x16" title="${0}" id="ExtendedGroupList_toggle" style="cursor: pointer;"></div></a>',[this.maximizeTitle]);p.place(e,a[0],3),dojo.connect(dojo.byId("ExtendedGroupList_toggle"),"onclick",function(a){c.toggleMode()})},_loadUserOptions:function(){var a=Sage.Services.getService("UserOptions");if(a){var b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_FieldCount",c=this._getFromSessionStorage(b);null!==c&&void 0!==c?this.fieldCount=c:a.get("FieldCount","ExtendedGroupList",h.hitch(this,function(a){a&&a.value&&(this.fieldCount=parseInt(a.value,10),this._addToSessionStorage(b,this.fieldCount))}),null,null,!0),b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_HideOnSelection",c=this._getFromSessionStorage(b),null!==c&&void 0!==c?this.hideExtendedGroupListOnSelection=c:a.get("HideOnSelection","ExtendedGroupList",h.hitch(this,function(a){a&&(this.hideExtendedGroupListOnSelection="T"===a.value,this._addToSessionStorage(b,this.hideExtendedGroupListOnSelection))}),null,null,!0),b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_ShowOnLookup",c=this._getFromSessionStorage(b),null!==c&&void 0!==c?this.showExtendedGroupListOnLookup=c:a.get("ShowOnLookup","ExtendedGroupList",h.hitch(this,function(a){a&&(this.showExtendedGroupListOnLookup="T"===a.value,this._addToSessionStorage(b,this.showExtendedGroupListOnLookup))}),null,null,!0)}},_onUserOptionsChanged:function(a){this.shouldRecreateGrid=!1,this.fieldCount!==a.extendedGroupList.fieldCount&&(this.shouldRecreateGrid=!0),this.fieldCount=a.extendedGroupList.fieldCount;var b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_FieldCount";this._addToSessionStorage(b,this.fieldCount),this.hideExtendedGroupListOnSelection=a.extendedGroupList.hideOnSelection,b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_HideOnSelection",this._addToSessionStorage(b,this.hideExtendedGroupListOnSelection),this.showExtendedGroupListOnLookup=a.extendedGroupList.showOnLookup,b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_ShowOnLookup",this._addToSessionStorage(b,this.showExtendedGroupListOnLookup),"Extended"===this.mode&&this.shouldRecreateGrid&&this.toggleMode("Extended")},_getCurrentFamily:function(){var a=Sage.Services.getService("ClientGroupContext"),b=a&&a.getContext();return b&&b.CurrentFamily},_getCurrentGroupLayout:function(){var a=this._getCurrentFamily(),b=this.SESSION_STORE_GROUP_LAYOUT_KEY+this._getGroupID();"LOOKUPRESULTS"===this._getGroupID()&&(b=b+"_"+a);var c=this._getFromSessionStorage(b);if(!c){var d="slxdata.ashx/slx/system/-/groups('"+this._getGroupID()+"')?select=layout/dateTimeType,layout/alias,layout/caption,layout/width,layout/fieldType,layout/format,layout/formatString,layout/propertyPath,layout/visible,layout/webLink,layout/dataPath&format=json";m("GET",{url:d,handleAs:"json",sync:!0,preventCache:!0}).then(function(a){c=a.layout}),this._addToSessionStorage(b,c)}var e=this.fieldCount>0?this.fieldCount:20;return c.length>e&&(c=c.splice(0,e)),c},_getSelect:function(){var a=this._getCurrentGroupLayout(),b=[this.keyAlias,this.columnDisplayName];if("Extended"===this.mode){if(!this._gridSelect){var c=y.getGridStructure(a,!0);this._gridStructure=c.structure,this._gridSelect=c.select}this._gridSelect.forEach(function(a,c){b.push(a)})}return b},_addToSessionStorage:function(a,b){sessionStorage.setItem(a,v.stringify(b))},_getFromSessionStorage:function(a){var b,c=sessionStorage.getItem(a);return null!==c&&void 0!==c&&(b=v.parse(c)),b},_getModeFromLocalStorage:function(){var a=this.LOCAL_STORE_EGL_MODE_KEY+this._getGroupID();return this.getFromLocalStorage(a(),this.LOCAL_STORE_EGL_NAMESPACE)},_getGridStructure:function(){var a=this,b=[];if("Standard"===this.mode)b.push({field:"_item",headerClasses:"displaynone",width:"100%",formatter:function(b){return b&&b.hasOwnProperty(a.columnDisplayName)?b[a.columnDisplayName]:dojo.string.substitute("(${0})",[b[a.keyAlias]])}}),b.push({field:this.keyAlias,hidden:!0,headerClasses:"displaynone",width:"0px"});else{var c=this._getCurrentGroupLayout();if(!this._gridStructure||this.shouldRecreateGrid||this.changingGroup){var d=y.getGridStructure(c,!0);this._gridStructure=d.structure,this._gridSelect=d.select}b=this._gridStructure}return b},_getHeight:function(){var a=dojo.marginBox(dojo.byId("item_CommonTasksTasklet")).h,b=dojo.marginBox(dojo.byId("TaskPane")).h,c=b-a-110;return c<230&&(c=230),c},toggleMode:function(a){var b=dijit.byId("TaskPane");"Standard"===this.mode&&(this.standardWidth=x.getMarginBox(b.domNode).w),this.uninitialize(),this.grid=null,this.mode=a||("Standard"===this.mode?"Extended":"Standard"),this._resizeTaskPane(),this._createList(),this._setExtendedGroupListToggleIcon(),this._saveMode()},_setExtendedGroupListToggleIcon:function(){"Extended"===this.mode?(s.remove("ExtendedGroupList_toggle","icon_Toggle_Maximize_16x16"),s.add("ExtendedGroupList_toggle","icon_Toggle_Minimize_16x16"),t.set("ExtendedGroupList_toggle","title",this.minimizeTitle)):(s.remove("ExtendedGroupList_toggle","icon_Toggle_Minimize_16x16"),s.add("ExtendedGroupList_toggle","icon_Toggle_Maximize_16x16"),t.set("ExtendedGroupList_toggle","title",this.maximizeTitle))},_resizeTaskPane:function(){var a=dijit.byId("TaskPane"),b=o.get(a.domNode,"width");if("Extended"===this.mode){if(b<this.extendedGroupListTaskPaneWidth){var c=this.extendedGroupListTaskPaneWidth+"px";o.set(a.domNode,"width",c),dijit.byId("innerBorder").resize()}}else x.setMarginBox(a.domNode,{w:this.standardWidth}),dijit.byId("innerBorder").resize();"Extended"===this.mode?dijit.byId("item_CommonTasksTasklet").set("open",!1):dijit.byId("item_CommonTasksTasklet").set("open",!0)},_connectToCommonTasksToggleEvent:function(){var a=this,b=dijit.byId("item_CommonTasksTasklet");b&&dojo.connect(b,"toggle",function(){var b=dojo.byId("GroupList_grid");setTimeout(function(){var c=a._getHeight()+"px";o.set(b,"height",c),a.grid.resize(),a.grid.update()},250)})},_onGridSorted:function(){this.selectGridRow(0),this._onSelected(0),this.gridRefreshedOnSortHandler&&dojo.disconnect(this.gridRefreshedOnSortHandler)},_loadMode:function(){var a=this._getCurrentFamily(),b=this.LOCAL_STORE_EGL_MODE_KEY+a,c=this.getFromLocalStorage(b,this.LOCAL_STORE_EGL_NAMESPACE);this.mode=null!==c&&void 0!==c?c:"Standard"},_saveMode:function(){var a=this._getCurrentFamily(),b=this.LOCAL_STORE_EGL_MODE_KEY+a;this.saveToLocalStorage(b,this.mode,this.LOCAL_STORE_EGL_NAMESPACE)}})})},"Sage/Utility/DojoxGroups":function(){define(["Sage/Groups/GroupLookup","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/UserType","Sage/UI/Columns/Currency","Sage/UI/Columns/SlxLink","dojo/_base/array","dojo/string"],function(a,b,c,d,e,f,g,h,i,j,k){return Sage.namespace("Utility.DojoxGroups"),dojo.mixin(Sage.Utility.DojoxGroups,{showMainLookupFor:function(a,b){var c=Sage.Services.getService("GroupLookupManager");c&&(void 0===a?c.showLookup():c.showLookup({family:a,returnTo:b||!1}))},getGridStructure:function(a,l){var m,n={},o=[],p=[],q=Sage.Services.getService("ClientGroupContext");return q&&(m=q.getContext()),a.length>0&&j.forEach(a,function(a,j){if(p.push(a.alias),a.visible)if(a.webLink&&!l){var n=a.dataPath,q=n.lastIndexOf("!")>-1?n.substring(0,n.lastIndexOf("!")).substring(n.lastIndexOf(".")+1):n.substring(0,n.lastIndexOf(":")),r=q+"ID";if(("ACCOUNT"===a.alias||a.alias.match(/A\d+_ACCOUNT/gi))&&(q="ACCOUNT",r="ACCOUNTID"),m&&q===m.CurrentTable&&(q=m.CurrentEntity,r=m.CurrentTableKeyField),2===a.alias.lastIndexOf("_")){var s=a.alias.split("_");r=k.substitute("${0}_${1}",[s[0],r])}p.push(r),o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:i,pageName:q,idField:r,width:a.width+"px"})}else switch(a.alias.match(/^email$/i)&&(a.format="Email"),"DateTime"===a.fieldType&&(a.format="DateTime"),a.format){case"Owner":var t=a.alias+"NAME";p.push(t),o.push({field:t,styles:"text-align: "+a.align+";",name:a.caption,width:a.width+"px"});break;case"User":var u=a.alias+"NAME";p.push(u),o.push({field:u,styles:"text-align: "+a.align+";",name:a.caption,width:a.width+"px"});break;case"DateTime":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:c,styles:"text-align: "+a.align+";",datePattern:a.formatString,dateTimeType:a.dateTimeType,width:a.width+"px"});break;case"Percent":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:d,styles:"text-align: "+a.align+";",constraints:{places:Sage.Utility.getPrecision(a.formatString),round:-1},fercent:!0,formatType:"Percent",width:a.width+"px",isWholeNumberPercent:!1});break;case"Currency":o.push({field:a.alias,property:a.caption,name:a.caption,type:h,styles:"text-align: "+a.align+";",width:a.width+"px"});break;case"Fixed":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:d,styles:"text-align: "+a.align+";",constraints:{places:Sage.Utility.getPrecision(a.formatString),round:-1},fercent:!0,formatType:"%"===a.formatString[a.formatString.length-1]?"Percent":"Number",width:a.width+"px",isWholeNumberPercent:"Percent"!==a.format});break;case"Boolean":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:b,styles:"text-align: "+a.align+";",formatString:a.formatString,width:a.width+"px"});break;case"Email":o.push({field:a.alias,property:a.propertyPath,name:a.caption,styles:"text-align: "+a.align+";",formatter:function(a){return a?dojo.string.substitute("<a href=mailto:${0}>${0}</a>",[Sage.Utility.htmlEncode(a)]):""},width:a.width+"px"});break;case"OwnerType":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:e,styles:"text-align: "+a.align+";",width:a.width+"px"});break;case"Phone":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:f,styles:"text-align: "+a.align+";",width:a.width+"px"});break;case"PickList Item":var v=a.alias+"TEXT";p.push(v),o.push({field:v,styles:"text-align: "+a.align+";",property:a.propertyPath,name:a.caption,width:a.width+"px"});break;case"User Type":o.push({field:a.alias,property:a.propertyPath,name:a.caption,type:g,styles:"text-align: "+a.align+";",width:a.width+"px"});break;default:o.push({field:a.alias,name:a.caption,width:a.width+"px"})}}),o.push({field:this.keyAlias,hidden:!0,width:"0px",name:""}),n.structure=o,n.select=p,n}}),Sage.Utility.DojoxGroups})},"Sage/UI/Columns/Boolean":function(){define(["dojox/grid/cells/_base","dojo/i18n","Sage/Utility","dojo/i18n!../nls/Boolean","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.Columns.Boolean",a,{constructor:function(){var a=b.getLocalization("Sage.UI","Boolean");dojo.mixin(this,a),this.inherited(arguments)},formatter:function(a,b){var d={T:!0,t:!0,Y:!0,y:!0,1:!0,"+":!0,true:!0};if(!this.formatString)return a in d?this.yesText:this.noText;var e=this.formatString.split("/");if(e.length&&2===e.length){var f=a in d?e[0]:e[1];return f?c.htmlEncode(f):a in d?this.yesText:this.noText}return a in d?this.yesText:this.noText}})})},"Sage/UI/Columns/DateTime":function(){define(["dojox/grid/cells/dijit","dojo/date/locale","Sage/Utility","Sage/Utility/Activity","dojo/_base/declare"],function(a,b,c,d,e){var f=e("Sage.UI.Columns.DateTime",dojox.grid.cells.Cell,{timelessField:"",timelessText:"",dateOnly:!1,utc:!0,useFiveSecondRuleToDetermineTimeless:!1,format:function(a,b){var c=this.formattedDate(a,b);if(this.abbreviationLength){c=Sage.Format.abbreviationFormatter(this.abbreviationLength)(c)}return c},formattedDate:function(a,e){if(!e)return"";var f=this.get?this.get(a,e):this.value||this.defaultValue;if(this.dateOnly=void 0===this.dateTimeType?this.dateOnly:"D"===this.dateTimeType.toUpperCase(),!f)return"";if(!(f=g.toDateFromString(f,!0))||f.constructor!==Date)return"";var h=!1;if(this.timelessField&&""!==this.timelessField&&(h=g.toBoolean(c.getValue(e,this.timelessField,"F"))),this.useFiveSecondRuleToDetermineTimeless&&(h=d.isDateFiveSecondRuleTimeless(f)),this.dateOnly||this.datePattern){if(this.datePattern)return this.dateOnly&&(f=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate())),f.format(this.datePattern,{locale:Sys.CultureInfo.CurrentCulture.name});if(this.utc){var i=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate());return b.format(i,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return dojo.date.locale.format(f,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}if(h){var j=f;return this.utc&&(j=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,5)),dojo.date.locale.format(j,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})+this.timelessText}return b.format(f,{selector:this.formatType||"date/time",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}}),g=c.Convert;return f})},"Sage/UI/Columns/Numeric":function(){define(["Sage/UI/Controls/Numeric","dojox/grid/cells/dijit","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.UI.Columns.Numeric",dojox.grid.cells._Widget,{widgetClass:a,isWholeNumberPercent:!1,getWidgetProps:function(a){this.getControlId();return d.mixin({},this.widgetProps||{},{constraints:this.constraints,value:a,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field,name:this.name,sortable:this.sortable,editable:this.editable,required:this.required,formatType:this.formatType,textAlign:this.getAlignment()})},getAlignment:function(){var a="right";return a=this.cellClasses.indexOf("aligncenter")>-1?"center":a,a=this.cellClasses.indexOf("alignleft")>-1?"left":a},formatNode:function(a,b,c){if(!this.widgetClass)return b;var d=dijit.byId(this.getControlId());d?(this.widget=d,d.value===b&&this.widget.focusNode.value===b||this.widget.focusNode.attr("value",b),this.attachWidget.apply(this,arguments)):this.widget=this.createWidget.apply(this,arguments),this.sizeWidget.apply(this,arguments),this.grid.views.renormalizeRow(c),this.grid.scroller.rowHeightChanged(c,!0),"Percent"==this.formatType&&(this.widget.focusNode.constraints.type="percent"),this.widget.focusNode.focus()},formatter:function(a,b){var c=[];if(0===a||null===a)return"";if(this.isWholeNumberPercent&&"Percent"===this.formatType&&(a=Math.round(100*a)/1e4),this.displayFormatString&&""!==this.displayFormatString){this.displayFields.length<1&&c.push(a);for(var e=0;e<this.displayFields.length;e++)c.push(Sage.Utility.getValue(this.grid._by_idx[b].item,this.displayFields[e]));return a=Sage.Format.stringFromArray(this.displayFormatString,c)}if("Percent"===this.formatType&&(this.constraints.type="percent"),a=dojo.number.format(a,d.mixin(this.constraints,{locale:Sys.CultureInfo.CurrentCulture.name})),this.constraints&&0===this.constraints.places&&-1===this.constraints.round&&a.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)>-1&&(a=a.slice(0,a.length-1)),this.abbreviationLength){a=Sage.Format.abbreviationFormatter(this.abbreviationLength)(a)}return a},styles:"text-align: right;",setCurrentItems:function(){this.editInfo=this.grid.edit.info,this.item=this.grid.getItem(this.editInfo.rowIndex)},getControlId:function(){return this.setCurrentItems(),[this.item.$key,this.editInfo.cell.field,this.index].join("_")},getValue:function(a){"Percent"==this.formatType&&this.widget.focusNode._onBlur();var b=this.widget.focusNode.valueNode.value;if(void 0!==b&&""!==b||(b=0),this.widget&&"Error"===this.widget.state){var c=this.grid.getItem(a);return this.grid.store.getValue(c,this.grid.edit.info.cell.field)}return b}})})},"Sage/UI/Columns/OwnerType":function(){define(["dojo/i18n","dojo/i18n!../nls/OwnerType","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.OwnerType",dojox.grid.cells._Base,{constructor:function(){var b=a.getLocalization("Sage.UI","OwnerType");dojo.mixin(this,b),this.inherited(arguments)},formatter:function(a,b){var c={G:this.teamText,D:this.departmentText,S:this.systemText,U:this.userText};return c[a]?Sage.Utility.htmlEncode(c[a]):a},styles:"text-align: right;"})})},"Sage/UI/Columns/Phone":function(){define(["Sage/Format","Sage/UI/Controls/Phone","Sage/UI/Columns/Cell","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Columns.Phone",c,{defaultValue:"",widgetClass:b,getWidgetProps:function(a){var b=this._getControlId();return dojo.mixin({},this.widgetProps||{},{id:b,value:a,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field})},formatter:a.phone,styles:"text-align: left;",getValue:function(a){var b=this.widget.get("value");return b=this.widget.unformatNumber(b),void 0!==b&&""!==b||(b=this.defaultValue),this.widget&&"Error"===this.widget.focusNode.state?this.widget.focusNode._resetValue:b}})})},"Sage/UI/Columns/Cell":function(){define(["dojox/grid/cells","dojox/grid/cells/dijit","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.Cell",a._Widget,{formatNode:function(a,b,c){if(!this.widgetClass)return b;var d=dijit.byId(this._getControlId());d?(this.widget=d,d.value===b&&this.widget.focusNode.value===b||(this.widget.focusNode.set?this.widget.focusNode.set("value",b):this.widget.set("value",b)),this.attachWidget.apply(this,arguments)):this.widget=this.createWidget.apply(this,arguments),this.sizeWidget.apply(this,arguments),this.grid.views.renormalizeRow(c),this.grid.scroller.rowHeightChanged(c,!0),this.focus()},setCurrentItems:function(){this.editInfo=this.grid.edit.info,this.item=this.grid.getItem(this.editInfo.rowIndex)},_getControlId:function(){return this.setCurrentItems(),[this.item.$key,this.editInfo.cell.field,this.index].join("_")}})})},"Sage/UI/Columns/UserType":function(){define(["Sage/Utility","dojo/i18n!../nls/UserType","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.UserType",dojox.grid.cells._Base,{constructor:function(){dojo.mixin(this,b),this.inherited(arguments)},formatter:function(b,c){var d={W:this.administratorText,P:this.templateText,M:this.remoteText,T:this.webOnlyText,R:this.retiredText,C:this.concurrentText,V:this.webViewerText,N:this.networkText,A:this.addOnUserText};return d[b]?a.htmlEncode(d[b]):b}})})},"Sage/UI/Columns/Currency":function(){define(["dojo/_base/declare","dojo/json","Sage/Data/SDataServiceRegistry","Sage/Utility/_LocalStorageMixin","Sage/Utility","dojo/_base/lang","dojox/grid/cells/dijit","Sage/UI/Controls/Currency"],function(a,b,c,d,e,f,g,h){var i=a("Sage.UI.Columns.Currency",dojox.grid.cells._Widget,{widgetClass:h,exchangeRateLoaded:!1,constructor:function(a){if(this.multiCurrency&&!this.exchangeRateLoaded){var b=Sage.Services.getService("SystemOptions");b&&b.get("BaseCurrency",function(a){this.exchangeRateLoaded=!0,this.currentCode=a;var b=Sage.Services.getService("ExchangeRateLoader");b&&b.requestExchangeRate(this.getExchangeRate,this)},function(){},this)}},getExchangeRate:function(a){this.exchangeRate=a.Rate},getWidgetProps:function(a){var b=this.getControlId();return dojo.mixin({},this.widgetProps||{},{id:b,value:a,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field,constraints:this.constraints,name:this.name,sortable:this.sortable,editable:this.editable,required:this.required,displayMode:this.displayMode,displayCurrencyCode:this.displayCurrencyCode,multiCurrency:this.multiCurrency,currentCode:this.currentCode,exchangeRate:this.exchangeRate,currentUICulture:this.currentUICulture,textAlign:this.getAlignment()})},getAlignment:function(){var a="right";return a=this.cellClasses.indexOf("aligncenter")>-1?"center":a,a=this.cellClasses.indexOf("alignleft")>-1?"left":a},formatNode:function(a,b,c){if(!this.widgetClass)return b;this.multiCurrency&&(b*=this.exchangeRate);var d=dijit.byId(this.getControlId());d?(this.widget=d,d.value===b&&this.widget.focusNode.value===b||this.widget.focusNode.attr("value",b),this.attachWidget.apply(this,arguments)):this.widget=this.createWidget.apply(this,arguments),this.sizeWidget.apply(this,arguments),this.grid.views.renormalizeRow(c),this.grid.scroller.rowHeightChanged(c,!0),this.widget.focusNode.focus()},formatter:function(a,b){var c,d=this.grid.getItem(b),f="";if(this.decimalDigit=this.constraints&&this.constraints.places?this.constraints.places:Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits,this.multiCurrency){if("EntityRate"==this.exchangeRateType&&"insert"!==e.getModeId()){var g=1;if(void 0!==this.exchangeRateField&&null!==this.exchangeRateField&&""!==this.exchangeRateField){var h=this.exchangeRateField.split(".");for(g=d,c=0;c<h.length;c++)g=g?g[h[c]]:e.getClientContextByKey(this.exchangeRateType);null!==g&&0!==g||(g=1)}var i=this.exchangeRateCodeField.split("."),j=d;for(c=0;c<i.length;c++)j=j?j[i[c]]:e.getClientContextByKey([this.exchangeRateType,"Code"].join(""));this.exchangeRate=g,this.currentCode=j}else"MyRate"===this.exchangeRateType&&(this.exchangeRate=e.getClientContextByKey(this.exchangeRateType),this.currentCode=e.getClientContextByKey([this.exchangeRateType,"Code"].join("")));a*=this.exchangeRate,f=dojo.currency.format(a,{currency:[],locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit}),f=[f,"   ",this.currentCode].join("")}else f=dojo.currency.format(a,{currency:[Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol],
locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit}),f=f.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,"");if(this.abbreviationLength){f=Sage.Format.abbreviationFormatter(this.abbreviationLength)(f)}return f},styles:"text-align: right;",setCurrentItems:function(){this.editInfo=this.grid.edit.info,this.item=this.grid.getItem(this.editInfo.rowIndex)},getControlId:function(){return this.setCurrentItems(),[this.item.$key,this.editInfo.cell.field,this.index].join("_")},getValue:function(a){var b=this.widget.focusNode.valueNode.value;if(this.multiCurrency&&(b/=this.exchangeRate),"Error"===this.widget.focusNode.state){var c=this.grid.getItem(a);b=this.grid.store.getValue(c,this.grid.edit.info.cell.field),this.widget.focusNode.focusNode.value=b}else"Incomplete"===this.widget.focusNode.state&&(b=e.maximizeDecimalDigit(this.widget.focusNode.get("displayedValue"),this.constraints.places),this.widget.focusNode.focusNode.value=b);return b}}),j=a("Sage.UI.Columns.Currency.BaseExchangeRateLoader",d,{_requests:[],_requestingData:!1,_exchangeRate:!1,_storageNamespace:"BaseCurrencyExchangeRate",constructor:function(){this._requests=[],this._requestingData=!1,this._exchangeRate=!1},requestExchangeRate:function(a,d){if(!this._exchangeRate){var e=sessionStorage.getItem(this._storageNamespace);if(!e){if(this._requests.push({fn:a,scope:d||this}),!this._requestingData){this._requestingData=!0;var g=new Sage.SData.Client.SDataSingleResourceRequest(c.getSDataService("dynamic",!1,!0,!0));g.setQueryArg("where",dojo.string.substitute("CurrencyCode eq '${0}'",[d.currentCode])),g.setResourceKind("exchangeRates"),g.read({success:f.hitch(this,this._receiveData),failure:function(a){},async:!1})}return}this._exchangeRate=b.parse(e)}a.call(d||this,this._exchangeRate)},_receiveData:function(a){sessionStorage.setItem(this._storageNamespace,b.stringify(a)),this._exchangeRate=a;for(var c=this._requests.length,d=0;d<c;d++){var e=this._requests.pop();e.fn.call(e.scope,a)}}});return Sage.Services.addService("ExchangeRateLoader",new j),i})},"Sage/UI/Columns/SlxLink":function(){define(["Sage/Format","Sage/Utility","dojo/_base/declare"],function(a,b,c){Sage.Region={decimalSeparator:".",numberGroupSeparator:",",numberGroupDigits:3,decimalDigits:2,currencySymbol:"$",positiveCurrencyPattern:0,negativeCurrencyPattern:0,numberNegativeSign:"-"};var d=c("Sage.UI.Columns.SlxLink",dojox.grid.cells.Cell,{_dataTypeChecked:null,_layout:null,_getDisplayValue:function(a,c,d){var f=d||"";if(null===this._layout)if("list"==b.getModeId()){var g=dijit.byId("list");if(!(g&&b.isDefined(g)&&b.isDefined(g._configuration)))return f;this._layout=g._configuration.list.layout[this.layoutIndex]}else{var h=this.get?this.get(a,c):this.value||this.defaultValue;if(null!==this._dataTypeChecked||!b.isStringWithLength(h))return f;if(this._dataTypeChecked=!0,!e.isDateString(h))return f;this._layout={fieldType:"DateTime",format:"DateTime",formatString:this.displayFormatString||""}}if("DateTime"===this._layout.fieldType&&"DateTime"===this._layout.format){var i=this.get?this.get(a,c):this.value||this.defaultValue;if(dojo.isString(i)&&e.isDateString(i)){var j="list"==b.getModeId(),k=e.toDateFromString(i,j);if(k=new Date(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate()),!b.isStringWithLength(this._layout.formatString))return dojo.date.locale.format(k,{selector:"date",fullYear:!0});try{return dojo.date.locale.format(k,{selector:"date",datePattern:this._layout.formatString})}catch(a){return dojo.date.locale.format(k,{selector:"date",fullYear:!0})}}}return f},displayFields:[],displayFormatString:"",idField:"",pageName:"",appliedSecurity:"",urlFields:[],urlFormatString:"",target:"",image:"",queryParams:null,getPageName:function(a){if(""===this.pageName){var c=document.location.href;return c.indexOf("?")>-1&&(c=c.substring(0,c.indexOf("?"))),c=c.substring(c.lastIndexOf("/")+1),this.pageName=c.replace(".aspx",""),this.pageName}if("list"==b.getModeId())return this.pageName;var d=b.getValue(a,this.property);return""!==d&&"string"==typeof d?d:this.pageName},formatEditing:function(a,b){},format:function(a,c){if(null===c)return this.defaultValue;var d,e,f=[],g="",h="",i=this.grid.edit.info,j=0,k=this.get?this.get(a,c):this.value||this.defaultValue;if(this.displayFormatString&&""!==this.displayFormatString){for(this.displayFields.length<1&&f.push(k),j;j<this.displayFields.length;j++)f.push(b.getValue(c,this.displayFields[j].trim()));k=dojo.string.substitute(this.displayFormatString,f)}if(""!==this.target&&(g=dojo.string.substitute(' target="${0}" ',[this.target])),this.queryParams&&("object"==typeof this.queryParams?h="&"+dojo.objectToQuery(this.queryParams):"string"==typeof this.queryParams&&(h="&"+this.queryParams)),this.editable&&(this.alwaysEditing||i.rowIndex==a&&i.cell==this))return this.formatEditing(k,a);if(e=this._defaultFormat(k,[k,a,this]),""!==this.image&&(e=dojo.string.substitute('<img src="${0}" alt="${1}" />',[this.image.replace(/^~\//,""),e])),""!==this.appliedSecurity){var l=Sage.Services.getService("RoleSecurityService");if(l&&!l.hasAccess(this.appliedSecurity))return e=this._getDisplayValue(a,c,e)}if(""===this.idField){""!==this.urlFormatString&&this.urlFormatString;for(f=[],this.urlFields.length<1&&f.push(k),j=0;j<this.urlFields.length;j++)f.push(b.getValue(c,dojo.trim(this.urlFields[j])));return e=b.htmlEncode(this._getDisplayValue(a,c,e)),dojo.string.substitute('<a href="http://${0}${1}"${2}>${3}</a>',[dojo.string.substitute(this.urlFormatString,f),h,g,e])}var m=this.getPageName(c);if(!(d=b.getValue(c,this.idField))){var n="id"===this.idField?"$key":this.idField.replace(/\.[iI]d/g,".$key");d=b.getValue(c,n)}return d?(e=b.htmlEncode(this._getDisplayValue(a,c,e)),"HISTORY"===m.toUpperCase()?dojo.string.substitute('<span onclick="javascript:Sage.Link.editHistory(\'${0}\')" id="${0}" title="${1}" class="activity-type-link">${1}</span>',[d,e]):"ACTIVITY"===m.toUpperCase()?dojo.string.substitute('<span onclick="javascript:Sage.Link.editActivity(\'${0}\')" id="${0}" title="${1}" class="activity-type-link">${1}</span>',[d,e]):("RMA"===m.toUpperCase()&&(m="Return"),dojo.string.substitute('<a href="${0}.aspx?entityid=${1}&modeid=Detail${2}"${3} id="${1}" title="${4}">${4}</a>',[m,d,h,g,e]))):e},markupFactory:function(a,b){dojox.grid.cells.Cell.markupFactory(a,b);var c=dojo,d=c.trim(c.attr(a,"displayFields")||"");if(d){var e=d.split(",");b.displayFields=e}b.displayFormatString=c.trim(c.attr(a,"displayFormatString")||""),b.idField=c.trim(c.attr(a,"idField")||""),b.pageName=c.trim(c.attr(a,"pageName")||""),b.appliedSecurity=c.trim(c.attr(a,"appliedSecurity")||""),b.image=c.trim(c.attr(a,"image")||"");var f=c.trim(c.attr(a,"urlFields")||"");if(f){var g=f.split(",");b.urlFields=g}b.urlFormatString=c.trim(c.attr(a,"urlFormatString")||""),b.target=c.trim(c.attr(a,"target")||""),c.hasAttr(a,"queryParams")&&(b.queryParams=c.trim(c.attr(a,"queryParams")||""))}}),e=b.Convert;return d})},"Sage/TaskPane/LiteratureManagementTasks":function(){define(["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/Dialogs","dojo/i18n!./nls/LiteratureManagementTasks","dojo/_base/declare"],function(a,b,c,d){return d("Sage.TaskPane.LiteratureManagementTasks",a,{nlsLitManagementResources:c,selectionInfo:!1,fulfillLiteratureTask:function(){return this.selectionInfo=this.getSelectionInfo(),this.verifySelection(this.selectionInfo)?(this.saveSelections(this.actionItem,this.selectionInfo),this.doFulfillment()):(b.showWarning(this.selectRecords,this.selectRecordsTitle),!1)},validateLiteratureTask:function(){return this.selectionInfo=this.getSelectionInfo(),null!==this.selectionInfo&&(this.saveSelections(this.actionItem,this.selectionInfo),!0)},doFulfillment:function(){var a=0,c=this.selectionInfo.selectionCount,d=[],e=[],f=dojo.string.substitute("${0}_hfLastFulfilledIds",[this.clientId]),g=$get(f);g&&(g.value="");var h=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(f,i){var j,k=f.GetMailMergeService();if(!k)return b.showError(h.nlsLitManagementResources.errMailMergeService),!1;for(j=0;j<c;j++){var l,m=h.selectionInfo.selections[j].id,n=k.FulfillLitRequest(m);if(dojo.isArray(n)){if(n[LitReqResult.lrSuccess]){a++,e.push(m);continue}n[LitReqResult.lrCanceled]?l=dojo.string.substitute(h.nlsLitManagementResources.errFulFillmentCancelled,[m]):(l=dojo.string.substitute(h.nlsLitManagementResources.errFulFillmentFailed,[m]),l+=dojo.string.substitute(" ${0}",[n[LitReqResult.lrError]]))}else l=dojo.string.substitute(h.nlsLitManagementResources.errFulFillmentFailed,[m]);""===l&&(l=dojo.string.substitute(h.nlsLitManagementResources.errFulFillmentFailed,[m])),d.push(l)}if(g&&(g.value=e.join()),a==c)return b.showInfo(h.nlsLitManagementResources.fulFillmentSuccess),!0;var o=h.nlsLitManagementResources.errFulFillmentRequest;if(dojo.isArray(d)&&d.length>0)for(o=h.nlsLitManagementResources.errFulFillmentRequestEx,j=0;j<d.length;j++)o+=dojo.string.substitute(" [${0}] ${1}",j+1,[d[j]]);return b.showError(o),!1})},refreshList:function(){var a=dijit.byId("list");a&&a.refreshGrid()},printLabels:function(a,b){var c=Sage.Services.getService("ReportingService");c&&c.showReport(a,"CONTACT",b)},actionItem:function(){}})})},"Sage/TaskPane/QuoteTasksTasklet":function(){define("Sage/TaskPane/QuoteTasksTasklet",["dojo/_base/lang","dojo/i18n!./nls/QuoteTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","dojo/_base/Deferred","dojo/string","Sage/MainView/ReportMgr/ReportWizardController","Sage/Reporting/Enumerations","Sage/Utility","Sage/UI/Dialogs","Sage/Data/SDataServiceRegistry","Sage/MainView/IntegrationContract/PromoteWidget","Sage/Utility/PricingAndAvailability","Sage/MainView/IntegrationContract/PricingAvailabilityWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return e("Sage.TaskPane.QuoteTasksTasklet",[c,d],{taskItems:[],constructor:function(){a.mixin(this,b),"detail"===j.getModeId()&&(this.taskItems=[{taskId:"generateProposal",type:"Link",displayName:this.generateProposal,clientAction:"quoteTasksActions.createProposal()",securedAction:"Entities/Quote/GenerateProposal"},{taskId:"convertToSalesOrder",type:"Link",displayName:this.convertToSalesOrder,clientAction:"quoteTasksActions.convertToSO()",securedAction:"Entities/Quote/ConvertToSalesOrder"}]),this.taskItems.push({taskId:"promoteQuote",type:"Link",displayName:this.promoteTitle,clientAction:"quoteTasksActions.validateCanPromote()",securedAction:"Entities/Quote/Promote"}),Sage.Services.hasService("IntegrationContractService")||Sage.Services.addService("IntegrationContractService",new Sage.IntegrationContractService);var c=Sage.Services.getService("IntegrationContractService");c.isBackOfficeIntegrationEnabled&&!c.isQuoteCRMPricingEnabled&&this.taskItems.push({taskId:"getOrderTotal",type:"Link",displayName:this.getOrderTotalTitle,clientAction:"quoteTasksActions.validateOrderTotal()",securedAction:"Entities/Quote/GetOrderTotal"},{taskId:"priceLineItems",type:"Link",displayName:this.rePriceQuote,clientAction:"quoteTasksActions.ValidatePriceItems()",securedAction:"Entities/Quote/RePriceQuote"}),this.taskItems.push({taskId:"promoteIONWorkItems",type:"Link",displayName:this.promoteIONWorkFlowItems,clientAction:"quoteTasksActions.InitiateWorkflow()",securedAction:"Entities/Quote/InitiateWorkflow"},{taskId:"cancelIONWorkflow",type:"Link",displayName:this.cancelIONWorkFlowItems,clientAction:"quoteTasksActions.CancelIONWorkflow()",securedAction:"Entities/Quote/CancelIONWorkflow"})},InitiateWorkflow:function(){var a=this._getSelectRecordId();if(a){if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return k.showError(this.workflowIntegrationNotEnabled),!1;var b=this.requestWorkflowLog,c=this.requestWorkflowSuccess,d=this.errorRequestWorkflow,e=Sage.Utility.getCurrentEntityName(),f=new Sage.SData.Client.SDataServiceOperationRequest(l.getSDataService("dynamic"));f.setResourceKind("Quotes"),f.setOperationName("InitiateManualWorkflow");var h={$name:"InitiateManualWorkflow",request:{QuoteId:a}};f.execute(h,{async:!1,success:function(a){a.response.Result?k.showInfo(c):k.showError(g.substitute(b,[e,a]))},failure:function(a){k.showError(g.substitute(d,[e,a]))}})}},CancelIONWorkflow:function(){var a=this._getSelectRecordId();if(a){if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return k.showError(this.workflowIntegrationNotEnabled),!1;var b=this.cancelWorkflowLog,c=this.cancelWorkflowSuccess,d=this.errorCancelWorkflow,e=Sage.Utility.getCurrentEntityName(),f=new Sage.SData.Client.SDataServiceOperationRequest(l.getSDataService("dynamic"));f.setResourceKind("Quotes"),f.setOperationName("CancelManualWorkflowForQuote");var h={$name:"CancelManualWorkflowForQuote",request:{QuoteId:a}};f.execute(h,{async:!1,success:function(a){a.response.Result?k.showInfo(c):k.showError(g.substitute(b,[e,a]))},failure:function(a){k.showError(g.substitute(d,[e,a]))}})}},validateCanPromote:function(){var b=this._getSelectRecordId();if(b){if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return k.showError(this.integrationNotEnabled),!1;var c=new Sage.SData.Client.SDataServiceOperationRequest(l.getSDataService("dynamic"));c.setResourceKind("quotes"),c.setOperationName("CanPromoteQuote");var d={$name:"CanPromoteQuote",request:{QuoteId:b}};c.execute(d,{success:a.hitch(this,function(){this._promoteQuote(b)})})}},_promoteQuote:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(l.getSDataService("dynamic"));b.setResourceKind("quotes"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",g.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new m(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})},createProposal:function(){var a=j.getCurrentEntityId();if(this._hasErpStatus(a))k.showError(g.substitute(b.hasErpStatus,[b.errorGenerateProposal]));else{if(Sage.Services.getService("ReportingService")){var c=[{conditionType:"Query",table:"QUOTE",field:"QUOTEID",operator:"Is",value:a,fromRange:null,toRange:null,dataType:i.FieldDataTypes.String,tag:null}],d={reportId:"Quote:Quotation",reportOptions:{wizardOptions:{hiddenSteps:[i.CrystalReportWizardStep.Conditions,i.CrystalReportWizardStep.ExportOptions]},scheduleOptions:{executionType:i.ExecutionType.OnDemand},exportOptions:{outputFormat:i.ReportExportFormat.Pdf},conditionOptions:{conditions:c,conditionsConnector:i.ReportConditionConnector.And}}},e=new f;this._getProposalParameters(e),e.then(function(a){d.reportOptions.parameterOptions={parameters:a},d.reportOptions.wizardOptions.hiddenSteps.push(i.CrystalReportWizardStep.Parameters),h.startWizard(d)},function(){h.startWizard(d)})}}},_getPrimaryServerId:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(l.getSDataService("system"));return b.setResourceKind("systemOptions"),b.setResourceSelector("'PrimaryServerId'"),b.read({success:function(b){var c=b.value;c?a.progress(c):a.cancel("Invalid result")},failure:function(b){a.reject(b)},scope:this}),a.promise},_getProposalParameters:function(a){var b=[],c=j.getClientContextByKey("userID");return j.isStringWithLength(c)&&b.push({className:"CrystalReports.ParameterField",name:"PreparedBy",parameterFieldName:"PreparedBy",type:"StringField",length:65534,promptText:"Prepared By:",isRecurring:!1,formulaForm:"{?PreparedBy}",kind:"ParameterField",headingText:null,useCount:0,defaultValues:null,currentValues:[{className:"CrystalReports.ParameterFieldDiscreteValue",computedText:c,description:c,discreteValue:{actualValue:c,actualValueType:"String",value:c,valueType:"String"}}],allowMultiValue:!1,values:null,reportName:null,parameterType:"ReportParameter",reportParameterType:"ReportParameter",allowNullValue:!1,minimumValue:null,maximumValue:null,editMask:null,allowCustomCurrentValues:!1,defaultValueSortOrder:"AlphabeticalAscending",defaultValueSortMethod:"BasedOnDescription",valueRangeKind:"Discrete",usage:57,defaultValueDisplayType:"Description",isOptionalPrompt:!1,isShownOnPanel:!0,isEditableOnPanel:!0,initialValues:null,promptToUser:!0,isDataFoundationParameter:!1,allowHierarchyValues:!1,keepLastValueSelected:!0,hasCurrentValue:!1,parameterFieldUsage2:"InUse, ShowOnPanel, EditableOnPanel, DataFetching",parameterValueKind:"StringParameter",isDynamic:!0,isInvalidDynamicParameter:!1,invalidDynamicParameterReason:null,clientMustQueryDynamicData:!1,actualValueType:"String",valueType:"String",beginValueType:"String",endValueType:"String"}),this._getPrimaryServerId(a),a.then(function(){},function(b){a.reject(b)},function(c){b.push({className:"CrystalReports.ParameterField",name:"Company",parameterFieldName:"Company",type:"StringField",length:65534,promptText:"Prepared By Company:",isRecurring:!1,formulaForm:"{?Company}",kind:"ParameterField",headingText:null,useCount:0,defaultValues:null,currentValues:[{className:"CrystalReports.ParameterFieldDiscreteValue",computedText:c,description:c,discreteValue:{actualValue:c,actualValueType:"String",value:c,valueType:"String"}}],allowMultiValue:!1,values:null,reportName:null,parameterType:"ReportParameter",reportParameterType:"ReportParameter",allowNullValue:!1,minimumValue:null,maximumValue:null,editMask:null,allowCustomCurrentValues:!1,defaultValueSortOrder:"AlphabeticalAscending",defaultValueSortMethod:"BasedOnDescription",valueRangeKind:"Discrete",usage:57,defaultValueDisplayType:"Description",isOptionalPrompt:!1,isShownOnPanel:!0,isEditableOnPanel:!0,initialValues:null,promptToUser:!0,isDataFoundationParameter:!1,allowHierarchyValues:!1,keepLastValueSelected:!0,hasCurrentValue:!1,parameterFieldUsage2:"InUse, ShowOnPanel, EditableOnPanel, DataFetching",parameterValueKind:"StringParameter",isDynamic:!0,isInvalidDynamicParameter:!1,invalidDynamicParameterReason:null,clientMustQueryDynamicData:!1,actualValueType:"String",valueType:"String",beginValueType:"String",endValueType:"String"}),a.resolve(b)}),a.promise},convertToSO:function(){var a=j.getCurrentEntityId();this._hasErpStatus(a)?k.showError(g.substitute(b.hasErpStatus,[b.errorConvertWonQuote])):this._convertToSO(a)},_convertToSO:function(a){var b=l.getSDataService("dynamic"),c=new Sage.SData.Client.SDataServiceOperationRequest(b).setResourceKind("Quotes").setOperationName("ConvertQuoteToOrder"),d={$name:"ConvertQuoteToOrder",request:{QuoteId:a}};c.execute(d,{async:!1,success:function(a){a.response.Result&&(window.location.href=g.substitute("SalesOrder.aspx?entityId=${0}",[a.response.Result]))},failure:function(a){k.showError(a)}})},_hasErpStatus:function(a){var b=!1,c=l.getSDataService("dynamic"),d=new Sage.SData.Client.SDataSingleResourceRequest(c);d.setResourceKind("quotes"),d.setResourceSelector(g.substitute('"${0}"',[a]));var e=Sage.Services.getService("IntegrationContractService"),f="ErpStatus";return e.isBackOfficeIntegrationEnabled||(f="Status"),d.setQueryArg("select",f),d.read({async:!1,success:function(a){var c=a[f];"Unapproved"===c?b=!0:"Awarded"===c?b=!0:"Lost"===c?b=!0:"Replaced"===c?b=!0:"Canceled"===c?b=!0:"Deleted"===c&&(b=!0)},failure:function(a){k.showError(a)}}),b},validateOrderTotal:function(){dojo.style("loader","display","block"),dojo.style("loader","opacity","0.75");var b=this._getSelectRecordId();if(b){var c=new Sage.SData.Client.SDataServiceOperationRequest(l.getSDataService("dynamic"));c.setResourceKind("quotes"),c.setOperationName("ValidateOrderTotal");var d={$name:"ValidateOrderTotal",request:{QuoteId:b}};c.execute(d,{success:a.hitch(this,function(){this._orderTotalQuote(b)}),failure:function(){dojo.style("loader","display","none"),dojo.style("loader","opacity","0")}})}},ValidatePriceItems:function(){dojo.style("loader","display","block"),dojo.style("loader","opacity","0.75");var b=this._getSelectRecordId();if(b){var c=new Sage.SData.Client.SDataServiceOperationRequest(l.getSDataService("dynamic"));c.setResourceKind("quotes"),c.setOperationName("ValidatePriceItems");var d={$name:"ValidatePriceItems",request:{QuoteId:b}};c.execute(d,{success:a.hitch(this,function(){this._priceItems()}),failure:function(){dojo.style("loader","display","none"),dojo.style("loader","opacity","0")}})}},_priceItems:function(){var a=this._getSelectRecordId(),b=this.error_PricingRequest;if(a){var c={resourceKind:"quotes",operationName:"RePriceQuote",callback:function(c){if(c){var d=c.Children[0];if(d){var e=d.Properties.messageText,f=d.Properties.ErrorCode,h=d.Properties.ErrorDescription,i=e||(f?h:"Unknown Error");dojo.style("loader","display","none"),dojo.style("loader","opacity","0"),e||f?k.showError(g.substitute(b,[i])):window.location.href=g.substitute("Quote.aspx?entityId=${0}",[a])}}},requestOptions:{childEntityName:"Product",itemEntityName:"QuoteItem",entityName:"Quote",entityId:a,serviceName:"QuoteOrderLineTotal",secondaryServiceName:"QuoteOrderTotal",AutoSave:!0},isSpinnerHide:"T"};n.requestPricingAvailability(c)}},_getSelectRecordId:function(){this.getCurrentEntity();var a;if("detail"===j.getModeId())a=this.currentEntityId;else{var b=this.getSelectionInfo();if(!this.verifySingleSelection(b))return k.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;a=b.selectedIds[0]}return a},_orderTotalQuote:function(b){var c=this.error_PricingRequest,d={resourceKind:"quotes",operationName:"PriceQuoteHeader",callback:a.hitch(this,function(a){if(a){var d=a.Children[0],e=d.Properties.messageText,f=d.Properties.ErrorCode,h=d.Properties.ErrorDescription,i=e||(f?h:"Unknown Error");dojo.style("loader","display","none"),dojo.style("loader","opacity","0"),e||f?k.showError(g.substitute(c,[i])):window.location.href=g.substitute("Quote.aspx?entityId=${0}",[b])}}),requestOptions:{childEntityName:"QuoteItem",entityName:"Quote",entityId:b,serviceName:"QuoteOrderTotal",AutoSave:!0},isSpinnerHide:"T"};n.requestPricingAvailability(d)}})})},"Sage/Utility/PricingAndAvailability":function(){define("Sage/Utility/PricingAndAvailability",["dojo/_base/lang","dojo/_base/declare","dojo/dom-construct","Sage/Data/SDataServiceRegistry","dojo/json","dojo/string","dojo/i18n!./nls/PricingAndAvailability","Sage/UI/Dialogs","Sage/MainView/IntegrationContract/PricingAvailabilityWidget"],function(a,b,c,d,e,f,g,h,i){var j=b("Sage.Utility.PricingAndAvailability",[],{requestPricingAvailability:function(a){void 0===a.isSpinnerHide&&(dojo.style("loader","display","block"),dojo.style("loader","opacity","0.75"));var b=d.getSDataService("dynamic"),c=new Sage.SData.Client.SDataServiceOperationRequest(b);c.setResourceKind(a.resourceKind),c.setOperationName(a.operationName);var f={$name:a.operationName,request:{options:Sys.Serialization.JavaScriptSerializer.serialize(a.requestOptions)}};c.execute(f,{success:function(b){if(a.callback){var c=dojo.isObject(b.response)&&b.response.Result?e.parse(b.response.Result):"";a.callback(c)}if(!0===a.requestOptions.isGridRefresh){var d=dijit.byId($("*[id*=Productsgrd]")[3].id);d&&d.refresh()}void 0===a.isSpinnerHide&&(dojo.style("loader","display","none"),dojo.style("loader","opacity","0")),"Opportunity"===a.requestOptions.entityName&&__doPostBack("MainContent","")},failure:function(a){dojo.style("loader","display","none"),dojo.style("loader","opacity","0"),h.showError(a)}})},showWarehouseAvailability:function(a){var b=dijit.byId("dlgPricingAvailabilityWidget");b||(b=new i),b.initialize(a),b.show()},buildWarehouseUrl:function(a){var b,c,d=Sage.Services.getService("ClientContextService"),e=!(null===d||!d.containsKey("IsClosed"))&&"True"==d.getValue("IsClosed"),h=!1;c="Opportunity"===Sage.Utility.getCurrentEntityName()?a.item.Location:a.item.SlxLocation,b=c?c.Name?c.Name:c.$key:a.configuredItem?"":g.warehouse_Default;var i=Sage.Services.getService("IntegrationContractService"),j=g.status_NotConfigurable;return i.isCPQIntegrationEnabled&&a.item.Product&&!0===a.item.Product.ErpConfiguredItem&&a.item.Status!=j&&(h=!0),e||h?b:f.substitute("<a id='warehouseLink' href='javascript:Sage.Utility.PricingAndAvailability.showWarehouseAvailability(${0});'>${1}<a>",[JSON.stringify(a),b])},updateItemResponsePricing:function(a,b){if(a)for(var c=0;c<a.Children.length;c++){var d=a.Children[c];for(var e in d.Properties)if("ProductCode"!=e)if(e.indexOf(".")>0&&e.indexOf("ErpExtId")>0){var f=e.split("."),g=Sage.Utility.getCurrentEntityName();"Opportunity"===g&&(f[0]="Location");var h=d.Properties[e].split("#");null!==h&&""!==h&&(null===b[f[0]]?b[f[0]]={Name:h[0],$key:h[1]}:(b[f[0]].Name=h[0],b[f[0]].$key=h[1]))}else b[e]=d.Properties[e]}return b},requestCPQStatus:function(a){if(a.item.Product){var b=Sage.Services.getService("RoleSecurityService"),c=b.hasAccess(a.securedAction),d=Sage.Services.getService("ClientContextService");if(!(null===d||!d.containsKey("IsClosed"))&&"True"==d.getValue("IsClosed")||!c)return"SalesOrderItems"===a.lineResourceKind?a.item.ErpStatus?a.item.ErpStatus:g.status_NotConfigurable:a.item.Status?a.item.Status:g.status_NotConfigurable;if(Sage.Services.getService("IntegrationContractService").isCPQIntegrationEnabled&&!0===a.item.Product.ErpConfiguredItem){var e;e="SalesOrderItems"===a.lineResourceKind?a.item.ErpLineNumber||a.item.ErpStatus&&"Open"!==a.item.ErpStatus?a.item.ErpStatus:g.status_Configure:a.item.ErpLineNumber||a.item.Status&&"Open"!==a.item.Status?a.item.Status:g.status_Configure;var h={entry:{$name:"ConfigProductItem",request:{entity:a.item,currentUrl:window.location.href,isPrepare:!0,status:e,languageSetting:cookie.getCookie("SLXLanguageSetting")}},businessRuleMethod:"ConfigProductItem"};return("SalesOrderItems"!==a.lineResourceKind&&"QuoteItems"!==a.lineResourceKind||a.item.ErpLineNumber)&&("SalesOrderItems"===a.lineResourceKind||"QuoteItems"===a.lineResourceKind||a.item.Status)?e:f.substitute("<a id='requestCPQ' href='javascript:Sage.Link.redirectUrl(${0},\"${1}\");'>${2}<a>",[JSON.stringify(h),a.lineResourceKind,e])}return g.status_NotConfigurable}return g.status_NotConfigurable},doPricingAvailability:function(a){var b=null,c=null,e=new Sage.SData.Client.SDataServiceOperationRequest(d.getSDataService("dynamic"));e.setResourceKind("backOffices"),e.setOperationName("GetBackOfficeDetails");var g={$name:"GetBackOfficeDetails",request:{entityName:a.entityName,entityId:a.entityId}};e.execute(g,{async:!1,success:function(a){if(a.response.Result){var d=a.response.Result.split(",");b=d[0],c=d[1]}},failure:function(a){}});for(var h="",i="",j="",k=1,l=0;l<a.selectedItems.length;l+=1){if(h=""!==h?f.substitute("${0},${1}",[h,a.selectedItems[l].$key]):a.selectedItems[l].$key,i=a.selectedItems[l].UnitOfMeasure?""!==i?f.substitute("${0},${1}",[i,a.selectedItems[l].UnitOfMeasure.$key]):a.selectedItems[l].UnitOfMeasure.$key:""!==i?f.substitute("${0},null",[i]):"null","PKG"===a.selectedItems[l].ProdPackageKitType)for(var m=0;m<a.selectedItems[l].PackageKitChildViews.$resources.length;m++){var n=a.selectedItems[l].PackageKitChildViews.$resources[m];null!==n.Quantity&&(k=n.Quantity)}j=""!==j?f.substitute("${0},${1}",[j,k]):k}if(b&&c){dojo.hitch(this,function(d){var e={resourceKind:a.resourceKind,operationName:"RequestPricingAvailability",requestOptions:{childEntityIds:h,childEntityName:"Product",itemEntityName:a.itemEntityName,itemQuantity:d,entityName:a.entityName,entityId:Sage.Utility.getCurrentEntityId(),serviceName:a.serviceName,unitOfMeasureId:i,logicalId:b,accEntityID:c,isGridRefresh:a.isGridRefresh,AutoSave:a.AutoSave}};this.requestPricingAvailability(e)})(j)}},_isEntityClosed:function(a){var b=d.getSDataService("dynamic"),c=new Sage.SData.Client.SDataServiceOperationRequest(b);c.setResourceKind(a.resourceKind).setOperationName(a.operationName);var e={$name:a.operationName,request:{entityId:Sage.Utility.getCurrentEntityId()}};return c.execute(e,{async:!1,success:function(a){return a.response.Result},failure:function(a){h.showError(a)}}),!0},_updateItemWithSelectedWarehouse:function(a){var b=dijit.byId(a.gridId),c={resourceKind:a.resourceKind,operationName:"RequestPricingAvailability",requestOptions:{locationId:a.SlxLocationID,itemQuantity:a.item.Quantity,childEntityIds:a.item.Product.$key,childEntityName:"Product",itemEntityName:a.childEntityName,entityName:a.entityName,entityId:Sage.Utility.getCurrentEntityId(),serviceName:a.serviceName,unitOfMeasureId:"UnitOfMeasure"in a?a.UnitOfMeasure.$key:""},callback:function(c){if(c){var d=c.Children[0];if(d){var e=d.Properties.messageText,f=d.Properties.ErrorCode;if(e||f)Sage.UI.Dialogs.showError(dojo.string.substitute(g.error_PricingRequest,[e]));else{Sage.Utility.PricingAndAvailability.updateItemResponsePricing(c,a.item);var h=b.getSelectedRowId();"Opportunity"===Sage.Utility.getCurrentEntityName()?b._grid.updateDirty(h,"Location",a.item.Location):b._grid.updateDirty(h,"SlxLocation",a.item.SlxLocation),b._grid.updateDirty(h,"DocCalculatedPrice",a.item.DocCalculatedPrice),b._grid.updateDirty(h,"DocExtendedPrice",a.item.DocExtendedPrice),b._grid.updateDirty(h,"DocTotalAmount",a.item.DocTotalAmount),b._grid.save(),b.refresh()}}}}};return Sage.Utility.PricingAndAvailability.requestPricingAvailability(c),!0}});return Sage.namespace("Utility.PricingAndAvailability"),a.mixin(Sage.Utility.PricingAndAvailability,new j),j}),require(["Sage/Utility/PricingAndAvailability"])},"Sage/TaskPane/OpportunityTasksTasklet":function(){define("Sage/TaskPane/OpportunityTasksTasklet",["dojo/i18n!./nls/OpportunityTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/Opportunity/OpportunityStatistics","dojo/_base/declare","Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i){return e("Sage.TaskPane.OpportunityTasksTasklet",[b,c],{taskItems:[],constructor:function(){if(dojo.mixin(this,a),"detail"===f.getModeId()){this.taskItems=[{taskId:"InsertSalesOrder",type:"Link",displayName:this.addSalesOrder,clientAction:"opportunityTasksActions.createSalesOrderFromOpportunity()",securedAction:"Entities/SalesOrder/Add"},{taskId:"InsertQuote",type:"Link",displayName:this.addQuote,clientAction:"opportunityTasksActions.createQuoteFromOpportunity()",securedAction:"Entities/Quote/Add"},{taskId:"promoteOpportunity",type:"Link",displayName:this.promoteTitle,clientAction:"opportunityTasksActions.validateCanPromote()",securedAction:"Entities/Opportunity/Promote"},{taskId:"RequestWorkflow",type:"Link",displayName:this.requestIONWFOpportunity,clientAction:"opportunityTasksActions.initiateIONWFOpportunity()",securedAction:"Entities/Opportunity/InitiateWorkflow"},{taskId:"cancelIONWorkflow",type:"Link",displayName:this.cancelIONWorkFlowItems,clientAction:"opportunityTasksActions.CancelIONWorkflow()",securedAction:"Entities/Opportunity/CancelIONWorkflow"}],Sage.Services.hasService("IntegrationContractService")||Sage.Services.addService("IntegrationContractService",new Sage.IntegrationContractService);var b=Sage.Services.getService("IntegrationContractService");b.isBackOfficeIntegrationEnabled&&!b.isOpportunityCRMPricingEnabled&&this.taskItems.push({taskId:"priceLineItems",type:"Link",displayName:this.rePriceOpportunity,clientAction:"opportunityTasksActions.ValidatePriceItems()",securedAction:"Entities/Opportunity/RePriceOpportunity"})}else this.taskItems=[{taskId:"OpportunityStatistics",type:"Link",displayName:this.opportunityStatisticsTitle,clientAction:"opportunityTasksActions.opportunityStatistics();",securedAction:"Entities/Opportunity/OpportunityStatistics"}]},ValidatePriceItems:function(){var a=f.getCurrentEntityId();if(a){var b=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));b.setResourceKind("opportunities"),b.setOperationName("ValidatePriceItems");var c={$name:"ValidatePriceItems",request:{OpportunityId:a}};b.execute(c,{
success:dojo.hitch(this,function(){this._priceItems()}),failure:function(){dojo.style("loader","display","none"),dojo.style("loader","opacity","0")}})}},_priceItems:function(){var a=f.getCurrentEntityId(),b=this.error_PricingRequest;if(a){var c={resourceKind:"opportunities",operationName:"RePriceOpportunity",callback:function(a){if(a){var c=a.Children[0];if(c){var d=c.Properties.messageText,e=c.Properties.ErrorCode,f=c.Properties.ErrorDescription,h=d||(e?f:"Unknown Error");dojo.style("loader","display","none"),dojo.style("loader","opacity","0"),(d||e)&&i.showError(g.substitute(b,[h]))}}},requestOptions:{childEntityName:"Product",itemEntityName:"OpportunityProduct",entityName:"Opportunity",entityId:a,serviceName:"OpportunityOrderLineTotal",isGridRefresh:!0,AutoSave:!0}};Sage.Utility.PricingAndAvailability.requestPricingAvailability(c)}},initiateIONWFOpportunity:function(){var a=f.getCurrentEntityId();if(a){if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return i.showError(this.workflowIntegrationNotEnabled),!1;var b=this.requestWorkflowLog,c=this.requestWorkflowSuccess,d=this.errorRequestWorkflow,e=Sage.Utility.getCurrentEntityName(),j=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));j.setResourceKind("opportunities"),j.setOperationName("ManualWorkflowForOpportunity");var k={$name:"ManualWorkflowForOpportunity",request:{OpportunityId:a}};j.execute(k,{async:!1,success:function(a){a.response.Result?i.showInfo(c):i.showError(g.substitute(b,[e,a]))},failure:function(a){i.showError(g.substitute(d,[e,a]))}})}},CancelIONWorkflow:function(){var a=f.getCurrentEntityId();if(a){if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return i.showError(this.workflowIntegrationNotEnabled),!1;var b=this.cancelWorkflowLog,c=this.cancelWorkflowSuccess,d=this.errorCancelWorkflow,e=Sage.Utility.getCurrentEntityName(),j=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));j.setResourceKind("opportunities"),j.setOperationName("CancelManualWorkflowForOpportunity");var k={$name:"CancelManualWorkflowForOpportunity",request:{OpportunityId:a}};j.execute(k,{async:!1,success:function(a){a.response.Result?i.showInfo(c):i.showError(g.substitute(b,[e,a]))},failure:function(a){i.showError(g.substitute(d,[e,a]))}})}},validateCanPromote:function(){var a=f.getCurrentEntityId();if(this.getCurrentEntity(),a){if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return i.showError(this.integrationNotEnabled),!1;var b=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));b.setResourceKind("opportunities"),b.setOperationName("CanPromoteOpportunity");var c={$name:"CanPromoteOpportunity",request:{OpportunityId:a}};b.execute(c,{success:dojo.hitch(this,function(){this._promoteOpportunity(a)})})}},_promoteOpportunity:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(h.getSDataService("dynamic"));b.setResourceKind("opportunities"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",g.substitute("Id eq '${0}'",[a])),b.read({success:function(b){this.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId,this.currentEntityPrettyName,a,b.$descriptor)},scope:this,failure:function(){}})},promoteEntity:function(a,b,c,d,e){var f=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));f.setResourceKind("backOffices"),f.setOperationName("SORPromote");var j={$name:this.operationName,request:{entityName:c,entityId:d,logicalId:a,accountingEntityId:b,Description:e}};f.execute(j,{success:dojo.hitch(this,function(a){i.showInfo(g.substitute(this.requestSuccessfullSubmitted,[c,e]))}),failure:dojo.hitch(this,function(a){i.showError(g.substitute(this.errorPromotion,[c,a]))})})},opportunityStatistics:function(){this.prepareSelectedRecords(this.opportunityStatisticsActionitem(this.getSelectionInfo()))},opportunityStatisticsActionitem:function(a){return function(){new d(a).show()}},createQuoteFromOpportunity:function(){var a={$name:"CreateQuoteFromOpportunity",request:{OpportunityId:f.getCurrentEntityId()}};this._createEntityFromOpportunity("CreateQuoteFromOpportunity",a,"Quote")},createSalesOrderFromOpportunity:function(){var a={$name:"CreateSalesOrderFromOpportunity",request:{OpportunityId:f.getCurrentEntityId()}};this._createEntityFromOpportunity("CreateSalesOrderFromOpportunity",a,"SalesOrder")},_createEntityFromOpportunity:function(a,b,c){var d=h.getSDataService("dynamic");new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("opportunities").setOperationName(a).execute(b,{async:!1,success:function(a){a.response.Result&&(f.isEQEnabled()?Sage.Utility.showEQForm(c,a.response.Result):window.location.href=g.substitute("${0}.aspx?entityId=${1}",[c,a.response.Result]))},failure:function(a){i.showError(a)}})}})})},"Sage/MainView/Opportunity/OpportunityStatistics":function(){define(["dojo/_base/declare","dojo/i18n!./nls/OpportunityStatistics","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Currency","Sage/UI/Controls/Numeric","Sage/Data/SDataServiceRegistry","dojo/date/locale","Sage/Utility","Sage/Utility/Jobs","dojo/text!./templates/OpportunityStatistics.html","dojo/html","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer"],function(declare,i18nStrings,_DialogHelpIconMixin,dojoLang,dijitDialog,_Widget,_Templated,Dialogs,Currency,Numeric,sDataServiceRegistry,locale,utility,jobs,template,html){var opportunityStatistics=declare("Sage.MainView.Opportunity.OpportunityStatistics",[_Widget,_Templated],{_dialog:!1,_selectionInfo:!1,selectedCount:0,resource:"",currencyDecimalDigits:2,currencyCode:"USD",locale:Sys.CultureInfo.CurrentCulture.name,isMultiCurrencyEnabled:!1,widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(a){this._selectionInfo=a,this.currencyDecimalDigits=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits,this.isMultiCurrencyEnabled=window.isMultiCurrencyEnabled(),dojo.mixin(this,i18nStrings)},getCurrentGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().CurrentGroupID}return""},getDefaultGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().DefaultGroupID}return""},show:function(){this._dialog.show(),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new _DialogHelpIconMixin),this._dialog.createHelpIconByTopic("opportunitystatistics"));var a=sDataServiceRegistry.getSDataService("mashups"),b=new Sage.SData.Client.SDataNamedQueryRequest(a);b.setApplicationName("$app"),b.setResourceKind("mashups"),b.uri.setCollectionPredicate("'OpportunityStatistics'"),b.setQueryName("execute"),b.setQueryArg("_resultName","OpportunityStatisticsMashup"),b.setQueryArg("_selectionKey",this._selectionInfo.key);var c=this._selectionInfo.selectionCount>0?this._selectionInfo.selectedIds.join(",")||"":"",d=Sys.Serialization.JavaScriptSerializer.serialize(jobs.getFiltersForJob()),e=Sys.Serialization.JavaScriptSerializer.serialize(jobs.getLookupConditionsForJob()),f=this.getCurrentGroupId();"LOOKUPRESULTS"===f&&(f=this.getDefaultGroupId()),b.setQueryArg("_GroupId",f),b.setQueryArg("_SelectedIds",c.toString()),b.setQueryArg("_AppliedFilters",d.toString()),b.setQueryArg("_LookupConditions",e.toString());var g=this;b.read({success:function(a){g.resource=a.$resources[0],g.selectedCount=g.resource.RecordCount,g.currencyCode=g.resource.CurrencyCode,html.set(g.opportunityCount,g.selectedCount.toString()),g.createControls();var b=g.resource.DaysOpened;g.selectedCount>1&&(b=Math.round(g.resource.DaysOpened/g.selectedCount)),html.set(g.daysOpen_Container,b.toString()),dojo.addClass(g.loadingContainer,"display-none"),dojo.removeClass(g.statisticsContentsContainer,"display-none")},failure:function(a,b,c){Dialogs.showError(g.errorRequestingStatistics)}})},formatCurrency:function(a){return a=a.replace(" ","","gi"),a=a.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalSeparator,".","gi")},createControls:function(){this.createSalesPotential(),this.createCloseProbability(),this.createWeightedPotential(),this.createActualAmount(),this.createRangeEstClose()},createSalesPotential:function(){this.salesPotentialTotal=new Currency({id:"cur_SalesPotentialTotal",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:!0,class:"textcontrol currency",value:this.formatCurrency(this.resource.SalesPotential)}),dojo.place(this.salesPotentialTotal.domNode,this.salesPotentialTotal_Container,"replace"),this.salesPotentialAverage=new Currency({id:"cur_SalesPotentialAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:!0,class:"textcontrol currency",value:this.formatCurrency(this.resource.SalesPotential)/this.selectedCount}),dojo.place(this.salesPotentialAverage.domNode,this.salesPotentialAverage_Container,"replace")},createCloseProbability:function(){this.closeProbability=new Numeric({id:"num_CloseProbability",constraints:{places:2},formatType:"percent",disabled:!0,value:this.resource.CloseProbability/this.selectedCount}),dojo.place(this.closeProbability.domNode,this.closeProbability_Container.domNode,"only"),this.closeProbability_Container.value=this.resource.CloseProbability/this.selectedCount},createWeightedPotential:function(){this.weightedPotentialTotal=new Currency({id:"cur_WeightedPotentialTotal",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:!0,class:"textcontrol currency",value:this.resource.WeightedSalesPotential}),dojo.place(this.weightedPotentialTotal.domNode,this.weightedPotentialTotal_Container,"only"),this.weightedPotentialAverage=new Currency({id:"cur_WeightedPotentialAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:!0,class:"textcontrol currency",value:this.resource.WeightedSalesPotential/this.selectedCount}),dojo.place(this.weightedPotentialAverage.domNode,this.weightedPotentialAverage_Container,"only")},createActualAmount:function(){this.actualAmountTotal=new Currency({id:"cur_ActualAmount",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:!0,class:"textcontrol currency",value:this.formatCurrency(this.resource.ActualAmount)}),dojo.place(this.actualAmountTotal.domNode,this.actualAmountTotal_Container,"only"),this.actualAmountAverage=new Currency({id:"cur_ActualAmountAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:!0,class:"textcontrol currency",value:this.formatCurrency(this.resource.ActualAmount)/this.selectedCount}),dojo.place(this.actualAmountAverage.domNode,this.actualAmountAverage_Container,"only")},createRangeEstClose:function(){var a=locale.format(utility.Convert.toDateFromString(this.resource.MinDateEstClosed,!0),{fullYear:!0,selector:"date",locale:Sys.CultureInfo.CurrentCulture.name}),b=locale.format(utility.Convert.toDateFromString(this.resource.MaxDateEstClosed,!0),{fullYear:!0,selector:"date",locale:Sys.CultureInfo.CurrentCulture.name});html.set(this.rangeEstClose_Container,dojo.string.substitute("${0} - ${1}",[a,b]))},_close:function(){this._dialog.hide(),this._dialog.destroyRecursive(),this.destroyRecursive(),this.salesPotentialTotal.destroy(),this.salesPotentialAverage.destroy(),this.closeProbability.destroy(),this.weightedPotentialTotal.destroy(),this.weightedPotentialAverage.destroy(),this.actualAmountTotal.destroy(),this.actualAmountAverage.destroy()}});return opportunityStatistics})},"Sage/TaskPane/SecuredActionTasklet":function(){define(["dojo/i18n!./nls/SecuredActionTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Utility","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.TaskPane.SecuredActionTasklet",[b,c],{addToRoleTitle:"Add To Role",taskItems:[],constructor:function(){dojo.mixin(this,a),this.taskItems=[{taskId:"AddToRole",type:"Link",displayName:this.addToRoleTitle,clientAction:"securedActionTaskletActions.addSecuredActionToRole();",securedAction:"Entities/SecuredAction/Add"}]},addSecuredActionToRole:function(){"detail"===d.getModeId()?dojo.byId([this.clientId,"_tskAddSecuredActionsToRole"].join("")).click():this.prepareSelectedRecords(this.actionItem(this))},actionItem:function(a){return function(){dojo.byId([a.clientId,"_tskAddSecuredActionsToRole"].join("")).click()}}})})},"Sage/TaskPane/SecurityManagerTasksTasklet":function(){define(["dojo/i18n!./nls/SecurityManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/SecurityMgr/SecurityProfile","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.TaskPane.SecurityManagerTasksTasklet",[b,c],{addSecurityProfileTitle:"Add Profile",editSecurityProfileTitle:"Edit Profile",taskItems:[],constructor:function(){dojo.mixin(this,a),this.taskItems=[{taskId:"AddSecurityProfile",type:"Link",displayName:this.addSecurityProfileTitle,clientAction:"securityManagerTasksActions.addSecurityProfile();",securedAction:"Entities/SecurityManager/AddProfile"},{taskId:"EditSecurityProfile",type:"Link",displayName:this.editSecurityProfileTitle,clientAction:"securityManagerTasksActions.editSecurityProfile();",securedAction:"Entities/SecurityManager/EditProfile"}]},addSecurityProfile:function(){this.getStore().newItem({onComplete:this.receiveNewProfileToEdit,scope:this})},getStore:function(){if(this.store)return this.store;var a=Sage.Data.SDataServiceRegistry.getSDataService("system");return this.store=new Sage.Data.SingleEntrySDataStore({service:a,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"]}),this.store},receiveNewProfileToEdit:function(a){this.receiveProfileToEdit(a,!0)},receiveProfileToEdit:function(a,b){this._isNew=!0===b;var c=dijit.byId("secProfileDlg");if(c){c.show();var d=dijit.byId("secDlg_Description"),e=dijit.byId("secDlg_Type");a.profileDescription&&d.set("value",a.profileDescription),a.profileType?e.set("value",a.profileType):e.set("value","UserDefined")}},addSecurityProfileActionItem:function(a){return function(){new d(a).show()}},editSecurityProfile:function(){var a,b=Sage.Services.getService("ClientGroupContext");if(b){a=b.getContext().CurrentGroupID;this.getStore().fetch({predicate:'"'+a+'"',onComplete:this.receiveProfileToEdit,scope:this})}},save:function(a){if(this.store){var b=dijit.byId("secDlg_Description"),c=dijit.byId("secDlg_Type");this.store.setValue(!1,"profileDescription",b.value),this.store.setValue(!1,"profileType",c.value),this.store.setValue(!1,"columns",{}),this._isNew?this.store.saveNewEntity(!1,a.success,a.failure,this):this.store.save(a)}},saveAndClose:function(){this.save({success:function(a){if(dijit.byId("secProfileDlg").hide(),this._isNew){var b=new dijit.layout.ContentPane;b.id=a.$key,b.title=a.profileDescription;var c=dijit.byId("GroupTabs");c.addChild(b),c.selectChild(b)}else{var d=dijit.byId(a.$key);d&&(d.set?d.set("title",a.profileDescription):d.title=a.profileDescription)}},failure:function(a){alert("The profile could not be saved: "+a)}})}})})},"Sage/MainView/SecurityMgr/SecurityProfile":function(){define(["dojo/i18n!./nls/SecurityProfile","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dojo/_base/declare","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer","dojo/i18n!./nls/SecurityProfile"],function(a,b,c,d,e,f,g){return g("Sage.MainView.SecurityMgr.SecurityProfile",[e,f],{_dialog:!1,selectedFieldIndex:1,store:!1,_isNew:!1,widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="{%= $.id %}_dlgSecurityProfile" title="{%= $.securityProfile_Caption %}" dojoAttachPoint="_dialog" dojoAttachEvent="onCancel:_close">','<div data-dojo-type="dijit.form.Form" id="{%= $.id %}_frmSecurityProfile">','<table cellspacing="20">',"<tr>","<td>","<label>{%= $.description_Text %}</label>","</td>","<td>",'<input type="text" id="secDlg_Description" dojoAttachPoint="profileDescription" name="profileDescription" required="true" dojoType="dijit.form.TextBox" />',"</td>","<tr>","<td>","<label>{%= $.profileType_Text %}</label>","</td>","<td>",'<select dojoType="dijit.form.Select" name="profileType" id="secDlg_Type">','<option value="U">User</option>','<option value="S">System</option>',"</select>","</td>","</tr>","</table>",'<div align="right">','<div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.ok_Text %}</div>','<div data-dojo-type="dijit.form.Button" style="margin-left:5px;" id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_close">{%= $.btnCancel_Caption %}</div>',"</div>","</div>","</div>","</div>"]),constructor:function(b){this._isNew=b,dojo.mixin(this,a)},show:function(){if(this._isNew){this.getStore().newItem({onComplete:this.receiveNewProfileToEdit,scope:this})}this._dialog.show(),this._dialog.helpIcon||(c.mixin(this._dialog,new b),this._dialog.createHelpIconByTopic("securityprofile"))},getStore:function(){if(this.store)return this.store;var a=Sage.Data.SDataServiceRegistry.getSDataService("system");return this.store=new Sage.Data.SingleEntrySDataStore({service:a,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"]}),this.store},receiveNewProfileToEdit:function(a){this.receiveProfileToEdit(a,!0)},receiveProfileToEdit:function(a,b){this._isNew=!0===b;var c=dijit.byId("secProfileDlg");c&&(c.set("value",a),c.show())},_okClick:function(){},save:function(a){if(this.store){var b=dijit.byId("secProfileDlg"),c=b.get("value");for(var d in c)this.store.setValue(!1,d,c[d]);this._isNew?this.store.saveNewEntity(!1,a.success,a.failure,this):this.store.save(a)}},saveAndClose:function(){this.save({success:function(a){dijit.byId("secProfileDlg").hide();var b=dijit.byId("titlePane");b&&b.resetConfiguration()},failure:function(a){alert("The profile could not be saved: "+a)}})},_close:function(){this._dialog.destroyRecursive()}})})},"Sage/TaskPane/JobManagerTasksTasklet":function(){define(["dojo/i18n!./nls/JobManagerTasksTasklet","dojo/_base/declare","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/TaskPane/TaskPaneItem","dojo/_base/array","dojo/string"],function(a,b,c,d,e,f,g){return b("Sage.TaskPane.JobManagerTasksTasklet",[c,d],{taskItems:[],constructor:function(){dojo.mixin(this,a),this.taskItems=this._getTaskletItems(),dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged)},_getTaskletItems:function(){switch(this._getCurrentGroupId()){case"jobDefinitions":return this._getDefinationsTasks();case"schedules":return this._getSchedulesTasks();default:return this._getExecutionsTasks()}},_getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},_getExecutionsTasks:function(){return[{taskId:"taskCancelExecution",type:"Link",displayName:this.taskCancelJob_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.showCancelExecutionDialog();",securedAction:"Entities/JobManager/CancelJob"}]},_getDefinationsTasks:function(){return[{taskId:"taskRunJob",type:"Link",displayName:this.taskRunJob_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.showRunJobDialog(true);",securedAction:"Entities/JobManager/RunJob"}]},_getSchedulesTasks:function(){return[{taskId:"taskRunJob",type:"Link",displayName:this.taskEditTrigger_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.showRunJobDialog(false);",securedAction:"Entities/JobManager/RunJob"},{taskId:"taskDeleteScheduledJob",type:"Link",displayName:this.taskDeleteScheduledJob_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.deleteScheduledJob();",securedAction:"Entities/JobManager/DeleteScheduledJob"}]},_onGroupContextChanged:function(){var a=this;dojo.empty("JobManagerTasks");var b=this._getTaskletItems();b&&f.forEach(b,function(b,c){dojo.place(g.substitute('<div dojotype="Sage.TaskPane.TaskPaneItem" class="task-pane-item-common-tasklist" linkText="${0}" securedAction="${1}" action="javascript: ${2}"></div><br />',[b.displayName,b.securedAction,b.clientAction]),a.taskletContainerNode)}),dojo.parser.parse(a.taskletContainerNode)}})})},"Sage/TaskPane/ReportManagerTasksTasklet":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ReportManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneItem","dojo/_base/array","dojo/string","dijit/_Widget","Sage/_Templated"],function(a,b,c,d,e,f,g,h){return a("Sage.TaskPane.ReportManagerTasksTasklet",[c,g,h],{nlsResources:b,taskItems:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div dojoAttachPoint="taskletContainerNode" class="task-pane-item-common-tasklist">','<span id="selectionCount" class="task-pane-item-common-selectionText">0</span>&nbsp;<span id="selectionText">'+b.txtRecordsSelected+"</span><br>",'<span id="clearSelection"class="task-pane-item-common-clearselection activity-type-link" dojoAttachEvent="click:_clearSelection">'+b.txtClear+"</span><br>","<hr>",'<div dojoAttachPoint="divTaskItems">',"{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}",'<div data-dojo-type="Sage.TaskPane.TaskPaneItem" linkText="{%= task.displayName %}" securedAction="{%= task.securedAction %}" action="{%= task.clientAction %}"></div>',"<br />","{% } %}","</div>","</div>"]),constructor:function(){this.taskItems=this._getTaskItems(),dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged),dojo.subscribe("/group/context/changedTask",this,this._onGroupContextChanged),dojo.subscribe("/sage/ui/list/selectionChanged",function(a){var b=dojo.byId("selectionCount");b&&(b.innerHTML=a.getTotalSelectionCount())})},_getTaskItems:function(){var a=[];switch(this._getCurrentGroupId()){case"reports":a=this._getReportsTasks();break;case"schedules":a=this._getSchedulesTasks();break;case"history":a=this._getHistoryTasks()}return a},_onGroupContextChanged:function(){var a=this;dojo.empty(a.divTaskItems);var b=this._getTaskItems();b&&e.forEach(b,function(b,c){dojo.place(f.substitute('<div dojotype="Sage.TaskPane.TaskPaneItem" class="task-pane-item-common-tasklist activity-type-link" linkText="${0}" securedAction="${1}" action="${2}"></div><br />',[b.displayName,b.securedAction,b.clientAction]),a.divTaskItems)}),dojo.parser.parse(a.taskletContainerNode)},_clearSelection:function(){var a=dijit.byId("list");a&&a.clearSelection()},_getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},_getReportsTasks:function(){return[{taskId:"taskRunReport",type:"Link",displayName:this.nlsResources.taskRunReport_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.runReport();",securedAction:"Entities/ReportManager/RunReport"},{taskId:"taskScheduleReport",type:"Link",displayName:this.nlsResources.taskScheduleReport_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.scheduleReport();",securedAction:"Entities/ReportManager/ScheduleReport"}]},_getSchedulesTasks:function(){return[{taskId:"taskEditSchedule",type:"Link",displayName:this.nlsResources.taskEditSchedule_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.editSchedule();",securedAction:"Entities/ReportManager/EditSchedule"},{taskId:"taskDeleteSchedule",type:"Link",displayName:this.nlsResources.taskDeleteSchedule_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.deleteSchedule();",securedAction:"Entities/ReportManager/DeleteSchedule"}]},_getHistoryTasks:function(){return[{taskId:"taskDeleteHistory",type:"Link",displayName:this.nlsResources.taskDeleteHistory_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.deleteHistory();",securedAction:"Entities/ReportManager/DeleteHistory"}]}})})},"Sage/TaskPane/GroupManagerTasksTasklet":function(){define(["dojo/_base/declare","dojo/i18n!./nls/GroupManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneItem","dojo/_base/array","dojo/string","dijit/_Widget","Sage/_Templated"],function(a,b,c,d,e,f,g,h){return a("Sage.TaskPane.GroupManagerTasksTasklet",[c,g,h],{nlsResources:b,taskItems:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div dojoAttachPoint="taskletContainerNode" class="task-pane-item-common-tasklist">','<span id="selectionCount" class="task-pane-item-common-selectionText">0</span>&nbsp;<span id="selectionText">'+b.txtRecordsSelected+"</span><br>",'<span id="clearSelection" class="task-pane-item-common-clearselection activity-type-link" dojoAttachEvent="click:_clearSelection">'+b.txtClear+"</span><br>","<hr>",'<div dojoAttachPoint="divTaskItems">',"{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}",'<div data-dojo-type="Sage.TaskPane.TaskPaneItem" linkText="{%= task.displayName %}" securedAction="{%= task.securedAction %}" action="javascript: {%= task.clientAction %}"></div>',"<br />","{% } %}","</div>","</div>"]),constructor:function(){this.taskItems=this._getTaskItems(),dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged),dojo.subscribe("/group/context/changedTask",this,this._onGroupContextChanged),dojo.subscribe("/sage/ui/list/selectionChanged",function(a){var b=dojo.byId("selectionCount");b&&(b.innerHTML=a.getTotalSelectionCount())})},_getTaskItems:function(){var a=[];switch(this._getCurrentGroupId()){case"all_groups":a=this._getGroupsTasks();break;case"releases":a=this._getReleasesTasks();break;case"statistics":a=this._getStatisticsTasks()}return a},_onGroupContextChanged:function(){var a=this;dojo.empty(a.divTaskItems);var b=this._getTaskItems();b&&e.forEach(b,function(b,c){dojo.place(f.substitute('<div dojotype="Sage.TaskPane.TaskPaneItem" class="task-pane-item-common-tasklist" linkText="${0}" securedAction="${1}" action="javascript: ${2}"></div><br />',[b.displayName,b.securedAction,b.clientAction]),a.divTaskItems)}),dojo.parser.parse(a.taskletContainerNode)},_clearSelection:function(){var a=dijit.byId("list");a&&a.clearSelection()},_getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},_getGroupsTasks:function(){return[{taskId:"taskViewGroup",type:"Link",displayName:b.txtView,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.viewGroup();",securedAction:"Administration/GroupManager/Groups/View"},{taskId:"taskEditGroup",type:"Link",displayName:b.txtEdit,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.editGroup();",securedAction:"Administration/GroupManager/Groups/Edit"},{taskId:"taskDeleteGroup",type:"Link",displayName:b.txtDelete,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.deleteGroup();",securedAction:"Administration/GroupManager/Groups/Delete"},{taskId:"taskShareGroup",type:"Link",displayName:b.txtShare,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.shareGroup();",securedAction:"Administration/GroupManager/Groups/Share"},{taskId:"taskAssignOwner",type:"Link",displayName:b.txtAssignOwner,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.assignGroupOwner();",securedAction:"Administration/GroupManager/Groups/AssignOwner"},{taskId:"taskToggleUserDefault",type:"Link",displayName:b.txtToggleUserDefault,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.toggleUserDefault();",securedAction:"Administration/GroupManager/Groups/ToggleUserDefault"}]},_getReleasesTasks:function(){return[{taskId:"taskDeleteReleases",type:"Link",displayName:b.txtDelete,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.deleteReleases();",securedAction:"Administration/GroupManager/Shared/Delete"}]},_getStatisticsTasks:function(){return[{taskId:"taskDeleteStatistics",type:"Link",displayName:b.txtResetStatistics,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.deleteStatistics();",securedAction:"Administration/GroupManager/UsageStatistics/Delete"}]}})})},"Sage/TaskPane/EntityManagerTasklet":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/UI/Dialogs","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.TaskPane.EntityManagerTasklet",[a,b,d,c],{serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"}},widgetsInTemplate:!1,widgetTemplate:new Simplate(['<div class="entityTask-panel"  dojoAttachPoint="containerNode">',"</div>"]),_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:!0,taskGroup:"default",paneContents:null,constructor:function(){},postCreate:function(){this.inherited(arguments),!this._configurationProvider&&this._configurationProviderType&&this.set("configurationProvider",new this._configurationProviderType),this.autoConfigure&&this.requestConfiguration()},uninitialize:function(){this.inherited(arguments),this._configurationProvider&&this._configurationProvider.destroy()},_handleConfigurationChange:function(){this.requestConfiguration()},_setConfigurationProviderAttr:function(a){this._configurationConnects&&dojo.forEach(this._configurationConnects,function(a){this.disconnect(a)},this),this._configurationProvider&&this._configurationProvider.destroy(),this._configurationProvider=a,this._configurationConnects=[],this._configurationProvider&&(this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange)),this._configurationProvider.set("owner",this),this._created&&this.autoConfigure&&this.requestConfiguration())},_getConfigurationProviderAttr:function(){return this._configurationProvider},_setConfigurationProviderTypeAttr:function(a){this._configurationProviderType=a},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType},requestConfiguration:function(){this._configurationProvider&&this._configurationProvider.requestConfiguration({success:dojo.hitch(this,this._applyConfiguration)})},_applyConfiguration:function(a){this._configuration=a,this._configuration&&(this.paneContents&&this.paneContents.destroyRecursive(),dojo.place(this._configuration.taskPane.domNode,this.containerNode,"only"),this.paneContents=this._configuration.taskPane)}})})},"Sage/TaskPane/EntityTaskConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/TaskPane/EntityTaskContents","dojo/on","dojo/_base/lang","dojo/i18n!./nls/EntityTaskConfigurationProvider","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.TaskPane.EntityTaskConfigurationProvider",[b,a],{serviceMap:{groupContextService:"ClientGroupContext"},_roleSecurityService:null,_currentUserId:null,_taskConfigs:!1,constructor:function(a){e.mixin(this,f),this.inherited(arguments);var b=Sage.Services.getService("ClientContextService");b&&b.containsKey("userID")&&(this._currentUserId=b.getValue("userID")),this._roleSecurityService=Sage.Services.getService("RoleSecurityService")},_createConfiguration:function(){
var a=this.groupContextService&&this.groupContextService.getContext(),b=a&&a.CurrentGroupID,d=this.getTaskConfiguration(b),e=new c({taskTemplate:d.configuration.taskTemplate});return e.startup(),{tabId:d.configuration.key,taskPane:e}},getTaskConfiguration:function(a){for(var b=this.getTaskConfigurations(),c=0;c<b.length;c++)if(b[c].key.toUpperCase()===a.toUpperCase())return b[c];return{key:"default",configuration:this._getDefaultConfig()}},getTaskConfigurations:function(){return this._taskConfigs?this._taskConfigs:(this._taskConfigs=[{key:"Entities",configuration:this._getEntityConfig()}],this._taskConfigs)},_getTaskTemplateString:function(a,b){var c=[];return c.push('<div class="task-pane-item-common-tasklist">'),this._roleSecurityService&&this._roleSecurityService.hasAccess("Administration/EntityManager/Entities/Add")&&c.push('<span id="clearSelection" class="task-pane-item-common-clearselection activity-type-link" dojoAttachEvent="click:createNewEntity">'+this.NewEntity+"</span><br>"),c.push("</div>"),c},_getCommonTasks:function(){return[]},_getCommonEntityTasks:function(){return this._getCommonTasks()},_getEntityConfig:function(a,b){var c=this._getCommonEntityTasks(),d="Entities",e=this._getTaskTemplateString(c,d);return{key:"Entities",taskTemplate:new Simplate(e)}},_getDefaultConfig:function(a,b){var c={},d="Default",e=this._getTaskTemplateString(c,d);return{key:"Default",taskTemplate:new Simplate(e)}},buildTaskConfiguration:function(a,b,c){var d=this._getTaskTemplateString(c,b);return{key:a,taskTemplate:new Simplate(d)}},addTaskConfiguration:function(a){var b=this.getTaskConfiguration(a.key);if("default"===b.key){var c={key:a.key,configuration:a};this.getTaskConfigurations().push(c)}else b.configuration=a},requestConfiguration:function(a){this._onRequestConfigurationSuccess(a,null)},_onRequestConfigurationSuccess:function(a,b){a.success&&a.success.call(a.scope||this,this._createConfiguration(b,a),a,this),this._createConfiguration(b,a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)}})})},"Sage/TaskPane/EntityTaskContents":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/MainView/EntityMgr/EntityWizard/EntityWizardController"],function(a,b,c,d){return c("Sage.TaskPane.EntityTaskContents",[a,b],{widgetsInTemplate:!0,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(a){this.widgetTemplate=a.taskTemplate,dojo.subscribe("/sage/ui/list/selectionChanged",function(a){var b=dojo.byId("selectionCount");b&&(b.innerHTML=a.getTotalSelectionCount())})},_clearSelection:function(a){var b=dijit.byId("list");b&&b.clearSelection()},createNewEntity:function(){(new d).startWizard()}})})},"Sage/TaskPane/ExchangeRateTasksTasklet":function(){define(["dojo/i18n!./nls/ExchangeRateTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/MainView/ExchangeRate/ExchangeRateDialog","dojo/_base/declare","Sage/TaskPane/TaskPaneItem","dojo/string","dijit/_Widget","Sage/_Templated","Sage/Utility"],function(a,b,c,d,e,f,g,h,i){return d("Sage.TaskPane.ExchangeRateTasksTasklet",[b,g,h],{nlsResources:a,taskItems:[],widgetsInTemplate:!0,baseCurrency:null,widgetTemplate:new Simplate(['<div dojoAttachPoint="taskletContainerNode" class="task-pane-item-common-tasklist">',"{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}",'<div data-dojo-type="Sage.TaskPane.TaskPaneItem" linkText="{%= task.displayName %}" securedAction="{%= task.securedAction %}" action="javascript: {%= task.clientAction %}"></div>',"<br />","{% } %}",'<span class="task-pane-item-common-selectionText"><label id="lblCurrency" dojoAttachPoint="lblCurrency"></label>:  <label id="currency"></label></span>&nbsp;<br>',"</div>"]),constructor:function(){"detail"!==i.getModeId()&&(this.taskItems=[{taskId:"UpdateExchangeRates",type:"Link",displayName:this.nlsResources.lblupdateExchRate,securedAction:"Entities/ExchangeRate/View",clientAction:"exchangeRateTasksActions.updateExchangeRates();"},{taskId:"BaseCurrency",displayName:this.lblBaseCurrency}])},postCreate:function(){var a=this._receivedBaseCurrency,b=this,c=Sage.Services.getService("SystemOptions");c&&c.get("BaseCurrency",function(c){a(c,b)})},updateExchangeRates:function(){new c(this.baseCurrency).show()},_receivedBaseCurrency:function(a,b){var c=dojo.byId("currency");c&&(b.baseCurrency=a,c.innerHTML=a);var d=dojo.byId("lblCurrency");d&&(d.innerHTML=b.nlsResources.lblBaseCurrency)}})})},"Sage/TaskPane/SalesOrderTasksTasklet":function(){define("Sage/TaskPane/SalesOrderTasksTasklet",["dojo/_base/lang","dojo/i18n!./nls/SalesOrderTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","dojo/string","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/MainView/IntegrationContract/PromoteWidget","Sage/UI/Dialogs","Sage/Utility/PricingAndAvailability","Sage/MainView/IntegrationContract/PricingAvailabilityWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l){return e("Sage.TaskPane.SalesOrderTasksTasklet",[c,d],{taskItems:[],constructor:function(){a.mixin(this,b),this.taskItems=[{taskId:"promoteSalesOrder",type:"Link",displayName:this.promoteTitle,clientAction:"salesOrderTasksActions.validateCanPromote()",securedAction:"Entities/SalesOrder/Promote"}],Sage.Services.hasService("IntegrationContractService")||Sage.Services.addService("IntegrationContractService",new Sage.IntegrationContractService);var c=Sage.Services.getService("IntegrationContractService");c.isBackOfficeIntegrationEnabled&&!c.isSalesOrderCRMPricingEnabled&&this.taskItems.push({taskId:"getOrderTotal",type:"Link",displayName:this.getOrderTotalTitle,clientAction:"salesOrderTasksActions.validateOrderTotal()",securedAction:"Entities/SalesOrder/GetOrderTotal"},{taskId:"priceLineItems",type:"Link",displayName:this.rePriceOrder,clientAction:"salesOrderTasksActions.ValidatePriceItems()",securedAction:"Entities/SalesOrder/RePriceOrder"}),this.taskItems.push({taskId:"RequestWorkflow",type:"Link",displayName:this.requestIONWFSalesOrder,clientAction:"salesOrderTasksActions.initiateIONWFSalesOrder()",securedAction:"Entities/SalesOrder/InitiateWorkflow"},{taskId:"cancelIONWorkflow",type:"Link",displayName:this.cancelIONWorkFlowItems,clientAction:"salesOrderTasksActions.CancelIONWorkflow()",securedAction:"Entities/SalesOrder/CancelIONWorkflow"})},initiateIONWFSalesOrder:function(){var a=this._getSelectRecordId();if(a){if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return j.showError(this.workflowIntegrationNotEnabled),!1;var b=this.requestWorkflowLog,c=this.requestWorkflowSuccess,d=this.errorRequestWorkflow,e=Sage.Utility.getCurrentEntityName(),g=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));g.setResourceKind("salesOrders"),g.setOperationName("ManualWorkflowForSales");var i={$name:"ManualWorkflowForSales",request:{SalesOrderId:a}};g.execute(i,{async:!1,success:function(a){a.response.Result?j.showInfo(c):j.showError(f.substitute(b,[e,a]))},failure:function(a){j.showError(f.substitute(d,[e,a]))}})}},CancelIONWorkflow:function(){var a=this._getSelectRecordId();if(a){if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return j.showError(this.workflowIntegrationNotEnabled),!1;var b=this.cancelWorkflowLog,c=this.cancelWorkflowSuccess,d=this.errorCancelWorkflow,e=Sage.Utility.getCurrentEntityName(),g=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));g.setResourceKind("salesOrders"),g.setOperationName("CancelManualWorkflowForSales");var i={$name:"CancelManualWorkflowForSales",request:{SalesOrderId:a}};g.execute(i,{async:!1,success:function(a){a.response.Result?j.showInfo(c):j.showError(f.substitute(b,[e,a]))},failure:function(a){j.showError(f.substitute(d,[e,a]))}})}},validateCanPromote:function(){var b=this._getSelectRecordId();if(b){if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return j.showError(this.integrationNotEnabled),!1;var c=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));c.setResourceKind("salesOrders"),c.setOperationName("CanPromoteSalesOrder");var d={$name:"CanPromoteSalesOrder",request:{SalesOrderId:b}};c.execute(d,{success:a.hitch(this,function(){this._promoteSalesOrder(b)})})}},_promoteSalesOrder:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(h.getSDataService("dynamic"));b.setResourceKind("salesOrders"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",f.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new i(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})},validateOrderTotal:function(){dojo.style("loader","display","block"),dojo.style("loader","opacity","0.75");var b=this._getSelectRecordId();if(b){var c=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));c.setResourceKind("salesOrders"),c.setOperationName("validateOrderTotal");var d={$name:"validateOrderTotal",request:{SalesOrderId:b}};c.execute(d,{success:a.hitch(this,function(){this._orderTotalSalesOrder(b)}),failure:function(){dojo.style("loader","display","none"),dojo.style("loader","opacity","0")}})}},ValidatePriceItems:function(){dojo.style("loader","display","block"),dojo.style("loader","opacity","0.75");var b=this._getSelectRecordId();if(b){var c=new Sage.SData.Client.SDataServiceOperationRequest(h.getSDataService("dynamic"));c.setResourceKind("salesOrders"),c.setOperationName("ValidatePriceItems");var d={$name:"ValidatePriceItems",request:{SalesOrderId:b}};c.execute(d,{success:a.hitch(this,function(){this._priceItems()}),failure:function(){dojo.style("loader","display","none"),dojo.style("loader","opacity","0")}})}},_priceItems:function(){var a=this._getSelectRecordId(),b=this.error_PricingRequest;if(a){var c={resourceKind:"salesOrders",operationName:"RePriceOrder",callback:function(c){if(c){var d=c.Children[0];if(d){var e=d.Properties.messageText,g=d.Properties.ErrorCode,h=d.Properties.ErrorDescription,i=e||(g?h:"Unknown Error");dojo.style("loader","display","none"),dojo.style("loader","opacity","0"),e||g?j.showError(f.substitute(b,[i])):window.location.href=f.substitute("SalesOrder.aspx?entityId=${0}",[a])}}},requestOptions:{childEntityName:"Product",itemEntityName:"SalesOrderItem",entityName:"SalesOrder",entityId:a,serviceName:"OrderLineTotal",secondaryServiceName:"OrderTotal",AutoSave:!0},isSpinnerHide:"T"};k.requestPricingAvailability(c)}},_getSelectRecordId:function(){this.getCurrentEntity();var a;if("detail"===g.getModeId())a=this.currentEntityId;else{var b=this.getSelectionInfo();if(!this.verifySingleSelection(b))return j.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;a=b.selectedIds[0]}return a},_orderTotalSalesOrder:function(a){var b=this.error_PricingRequest,c={resourceKind:"salesOrders",operationName:"PriceOrderHeader",callback:function(c){if(c){var d=c.Children[0],e=d.Properties.messageText,g=d.Properties.ErrorCode,h=d.Properties.ErrorDescription,i=e||(g?h:"Unknown Error");dojo.style("loader","display","none"),dojo.style("loader","opacity","0"),e||g?j.showError(f.substitute(b,[i])):window.location.href=f.substitute("SalesOrder.aspx?entityId=${0}",[a])}else window.location.href=f.substitute("SalesOrder.aspx?entityId=${0}",[a])},requestOptions:{childEntityName:"SalesOrderItem",entityName:"SalesOrder",entityId:a,serviceName:"OrderTotal",AutoSave:!0},isSpinnerHide:"T"};k.requestPricingAvailability(c)}})})},"Sage/TaskPane/SyncHistoryTasksTasklet":function(){define(["dojo/i18n!./nls/SyncHistoryTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","Sage/Utility/Jobs"],function(a,b,c,d,e){return d("Sage.TaskPane.SyncHistoryTasksTasklet",[b,c],{taskItems:[],constructor:function(){dojo.mixin(this,a),this.taskItems=[{taskId:"Reprocess",type:"Link",displayName:this.reprocessTitle,clientAction:"syncHistoryTasksActions.updateSyncHistory()",securedAction:"Entities/SyncResult/Reprocess"},{taskId:"Purge",type:"Link",displayName:this.purgeTitle,clientAction:"syncHistoryTasksActions.purgeSyncHistory()",securedAction:"Entities/SyncResult/Purge"}]},updateSyncHistory:function(){this.prepareSelectedRecords(this.updateSyncHistoryActionItem(this.getSelectionInfo()))},updateSyncHistoryActionItem:function(a){return function(){var b=[{name:"EntityName",value:"SyncResult"},{name:"PropertyNames",value:"Action"},{name:"PropertyValues",value:"Reprocess"},{name:"SelectedIds",value:a.selectionCount>0?a.selectedIds.join(",")||"":""},{name:"BusinessRuleName",value:"UpdateSyncResult"}],c={closable:!0,title:"Reprocess",key:"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob",parameters:b,success:function(a){},failure:function(a){},ensureZeroFilters:!0};e.triggerJobAndDisplayProgressDialog(c)}},purgeSyncHistory:function(){this.prepareSelectedRecords(this.purgeSyncHistoryActionitem(this.getSelectionInfo()))},purgeSyncHistoryActionitem:function(a){return function(){var b=[{name:"EntityName",value:"SyncResult"},{name:"PropertyNames",value:"Action"},{name:"PropertyValues",value:"Reprocess"},{name:"SelectedIds",value:a.selectionCount>0?a.selectedIds.join(",")||"":""},{name:"BusinessRuleName",value:"PurgeSyncResult"}],c={closable:!0,title:"Purge",key:"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob",parameters:b,success:function(a){},failure:function(a){},ensureZeroFilters:!0};e.triggerJobAndDisplayProgressDialog(c)}}})})},"Sage/TaskPane/ERPBillToTasksTasklet":function(){define(["dojo/_base/lang","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","Sage/UI/Dialogs","dojo/string","Sage/MainView/IntegrationContract/PromoteWidget","Sage/Utility","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i){return d("Sage.TaskPane.ERPBillToTasksTasklet",[b,c],{taskItems:[],constructor:function(){this.taskItems=[],isIntegrationContractEnabled&&this.taskItems.push({taskId:"promoteERPBillTo",type:"Link",displayName:this.promoteTitle,clientAction:"ERPBillToTasksActions.validateCanPromote()",securedAction:"Entities/ErpBillTo/Promote"})},validateCanPromote:function(){this.getCurrentEntity();var b;if("detail"===h.getModeId())b=this.currentEntityId;else{var c=this.getSelectionInfo();if(!this.verifySingleSelection(c))return e.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;b=c.selectedIds[0]}if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return e.showError(this.integrationNotEnabled),!1;var d=i.getSDataService("dynamic"),f=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("erpBillTos").setOperationName("CanPromoteERPBillTo"),g={$name:"CanPromoteERPBillTo",request:{ErpBillToId:b}};f.execute(g,{success:a.hitch(this,function(){this._promoteERPBillTo(b)})})},_promoteERPBillTo:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(i.getSDataService("dynamic"));b.setResourceKind("erpBillTos"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",f.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new g(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})}})})},"Sage/TaskPane/ERPShipToTasksTasklet":function(){define(["dojo/_base/lang","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","Sage/UI/Dialogs","dojo/string","Sage/MainView/IntegrationContract/PromoteWidget","Sage/Utility","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i){return d("Sage.TaskPane.ERPShipToTasksTasklet",[b,c],{taskItems:[],constructor:function(){this.taskItems=[],isIntegrationContractEnabled&&this.taskItems.push({taskId:"promoteERPShipTo",type:"Link",displayName:this.promoteTitle,clientAction:"ERPShipToTasksActions.validateCanPromote()",securedAction:"Entities/ErpShipTo/Promote"})},validateCanPromote:function(){this.getCurrentEntity();var b;if("detail"===h.getModeId())b=this.currentEntityId;else{var c=this.getSelectionInfo();if(!this.verifySingleSelection(c))return e.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;b=c.selectedIds[0]}if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return e.showError(this.integrationNotEnabled),!1;var d=i.getSDataService("dynamic"),f=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("erpShipTos").setOperationName("CanPromoteERPShipTo"),g={$name:"CanPromoteERPShipTo",request:{ErpShipToId:b}};f.execute(g,{success:a.hitch(this,function(){this._promoteERPShipTo(b)})})},_promoteERPShipTo:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(i.getSDataService("dynamic"));b.setResourceKind("erpShipTos"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",f.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new g(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})}})})},"Sage/TaskPane/ERPPayFromTasksTasklet":function(){define(["dojo/_base/lang","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","dojo/_base/declare","Sage/UI/Dialogs","dojo/string","Sage/MainView/IntegrationContract/PromoteWidget","Sage/Utility","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i){return d("Sage.TaskPane.ERPPayFromTasksTasklet",[b,c],{taskItems:[],constructor:function(){this.taskItems=[],isIntegrationContractEnabled&&this.taskItems.push({taskId:"promoteERPPayFrom",type:"Link",displayName:this.promoteTitle,clientAction:"ERPPayFromTasksActions.validateCanPromote()",securedAction:"Entities/ErpPayFrom/Promote"})},validateCanPromote:function(){this.getCurrentEntity();var b;if("detail"===h.getModeId())b=this.currentEntityId;else{var c=this.getSelectionInfo();if(!this.verifySingleSelection(c))return e.showInfo(this.selectSingleRecord,this.invalidSelectionTitle),!1;b=c.selectedIds[0]}if(!Sage.Services.getService("IntegrationContractService").isBackOfficeIntegrationEnabled)return e.showError(this.integrationNotEnabled),!1;var d=i.getSDataService("dynamic"),f=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("erpPayFroms").setOperationName("CanPromoteERPPayFrom"),g={$name:"CanPromoteERPPayFrom",request:{ErpPayFromId:b}};f.execute(g,{success:a.hitch(this,function(){this._promoteERPPayFrom(b)})})},_promoteERPPayFrom:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(i.getSDataService("dynamic"));b.setResourceKind("erpPayFroms"),b.setQueryArg("select","ErpLogicalId,ErpAccountingEntityId"),b.setQueryArg("where",f.substitute("Id eq '${0}'",[a])),b.read({success:function(b){var c=dijit.byId("dlgPromoteWidget"),d={entityPrettyName:this.currentEntityDisplayName,entityName:this.currentEntityPrettyName,entityId:a,logicalId:b.ErpLogicalId,accountingEntityId:b.ErpAccountingEntityId,entityDisplayValue:b.$descriptor};c||(c=new g(d)),b.ErpLogicalId&&b.ErpAccountingEntityId?(c.initialize(d),c.promoteEntity(b.ErpLogicalId,b.ErpAccountingEntityId)):c.show(d)},scope:this,failure:function(){}})}})})},"Sage/UI/main":function(){define(["Sage/UI/Columns/main","Sage/UI/Controls/main","Sage/UI/Dashboard/main","Sage/UI/Forms/main","Sage/UI/Alarms/main","Sage/UI/SLXPreviewGrid/main","Sage/UI/_DetailPane","Sage/UI/_DialogLoadingMixin","Sage/UI/widgetEditorLookup","Sage/UI/_DetailPanelConfigurationProvider","Sage/UI/_TitlePaneConfigProvider","Sage/UI/AttachmentList","Sage/UI/ActivityEdit","Sage/UI/ActivityList","Sage/UI/NotesHistoryList","Sage/UI/ComboBox","Sage/UI/ConditionManager","Sage/UI/DashboardGroupListConfigurationProvider","Sage/UI/DateTextBox","Sage/UI/DetailPanel","Sage/UI/Dialogs","Sage/UI/EditableGrid","Sage/UI/EditorContainer","Sage/UI/Filters/CheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EditFilterItems","Sage/UI/Filters/EditFilters","Sage/UI/Filters/EntityManagerEditFilters","Sage/UI/FilteringSelect","Sage/UI/Filters/FilterManager","Sage/UI/Filters/FilterPanel","Sage/UI/Filters/EntityManagerFilterPanel","Sage/UI/Filters/GroupFilterConfigurationProvider","Sage/UI/GridContainer","Sage/UI/GridMenuItem","Sage/UI/GroupListConfigurationProvider","Sage/UI/GroupMenuFmtScope","Sage/UI/GroupsTitlePaneConfigProvider","Sage/UI/GroupTabPane","Sage/UI/ImageButton","Sage/UI/JsonPrintDetailPane","Sage/UI/ListPanel","Sage/UI/MenuBar","Sage/UI/MenuBarItem","Sage/UI/MenuItem","Sage/UI/NavBar","Sage/UI/NavBarPane","Sage/UI/NumberTextBox","Sage/UI/OrientableMenuBar","Sage/UI/PopupMenuBarItem","Sage/UI/PopupMenuItem","Sage/UI/SDataLookup","Sage/UI/SearchConditionWidget","Sage/UI/SLXPreviewGrid","Sage/UI/SpeedSearch","Sage/UI/SummaryContainer","Sage/UI/SummaryContents","Sage/UI/SummaryDetailPane","Sage/UI/SummaryFormatterScope","Sage/UI/TabContainer","Sage/UI/TabController","Sage/UI/TextBox","Sage/UI/TimeZoneItem","Sage/UI/TitleContentPane","Sage/UI/ToggleButton","Sage/UI/ToolBarLabel","Sage/UI/UniqueToListValidationTextBox","Sage/UI/URL","Sage/UI/WidgetEditor","Sage/UI/ActivityScheduler","Sage/UI/TimelessActivitiesPane","Sage/UI/Calendar","Sage/UI/CalendarUsersListPane","Sage/UI/TransferBoxWidget","Sage/UI/BulkUpdateWidget","Sage/UI/GridView"],function(){})},"Sage/UI/Columns/main":function(){define(["Sage/UI/Columns/ActivityAlarm","Sage/UI/Columns/UserType","Sage/UI/Columns/ActivityType","Sage/UI/Columns/Boolean","Sage/UI/Columns/Cell","Sage/UI/Columns/CheckBox","Sage/UI/Columns/Currency","Sage/UI/Columns/DataType","Sage/UI/Columns/DateTime","Sage/UI/Columns/Dnd","Sage/UI/Columns/DndCell","Sage/UI/Columns/Email","Sage/UI/Columns/Lookup","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/PickList","Sage/UI/Columns/RadioGroup","Sage/UI/Columns/SlxEdit","Sage/UI/Columns/SlxLink","Sage/UI/Columns/SlxUser","Sage/UI/Columns/TextBox"],function(){})},"Sage/UI/Columns/ActivityAlarm":function(){define(["dojox/grid/cells/_base","Sage/Utility","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.ActivityAlarm",a,{format:function(a,c){var d=b.getValue(c,"Alarm"),e="<div><div>";return d&&(e="<img src='images/icons/Alarm_16x16.gif'/>"),e}})})},"Sage/UI/Columns/ActivityType":function(){define(["dojox/grid/cells/_base","Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.Columns.ActivityType",a,{keyField:!1,format:function(a,e){var f=this.get(a,e);if(!f)return this.defaultValue;var g=b.getValue(e,this.keyField||"$key");return d.substitute('<div class="Global_Images icon16x16 ${0}"></div>&nbsp;<span onclick="javascript:Sage.Link.editActivity(\'${1}\')" class="activity-type-link">${2}</span>',[c.getActivityImageClass(f,"small"),g,c.getActivityTypeName(f)])}})})},"Sage/UI/Columns/CheckBox":function(){define(["dojo/_base/declare"],function(a){return a("Sage.UI.Columns.CheckBox",dojox.grid.cells.Bool,{formatter:function(a,b,c){return!0===a||1===a?'<input type="checkbox" checked="checked" disabled="disabled" />':'<input type="checkbox" disabled="disabled" />'}})})},"Sage/UI/Columns/DataType":function(){define(["dojox/grid/cells/_base","dojo/string","dojo/_base/declare","Sage/Utility/Filters"],function(a,b,c,d){return c("Sage.UI.Columns.DataType",a,{constructor:function(){this.inherited(arguments)},formatter:function(a,c){var e=d.resolveDataTypeQB(a),f="string";switch(e){case"Integer":f="int";break;case"Decimal":f="float";break;case"Date/Time":f="date";break;case"Memo/Blob":f="blob";break;default:f="string"}return b.substitute('<img src="images/ft_${0}.gif" class="dataTypeColumnDimensions" />',[f])}})})},"Sage/UI/Columns/Dnd":function(){define(["Sage/UI/Columns/DndCell","dojo/_base/declare"],function(a,b){return b("Sage.UI.Columns.Dnd",dojox.grid.cells._Base,{formatter:function(b,c){var d=this.grid.getItem(c),e=d.displayName||d.columnName||this.defaultValue;return new a({value:e,index:c})}})})},"Sage/UI/Columns/DndCell":function(){define(["dijit/_Widget","dijit/_Templated","dojo/dnd/Source","dojo/text!./templates/DndCell.html","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.Columns.DndCell",[a,b],{templateString:d,widgetsInTemplate:!0,value:null,index:-1,constructor:function(a){this.inherited(arguments)},postCreate:function(){this.dndItem.innerHTML=this.get("value"),this.dndItem.type="cell",this.dndItem.data={value:this.get("value"),index:this.index},this.inherited(arguments)}})})},"Sage/UI/Columns/Email":function(){define(["Sage/UI/Controls/Email","Sage/UI/Columns/Cell","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.Email",b,{icon:"",defaultValue:"",widgetClass:a,getWidgetProps:function(a){var b=this._getControlId();return dojo.mixin({},this.widgetProps||{},{emailId:b,email:a,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field})},getValue:function(a){var b=this.widget.focusNode.value;return void 0!==b&&""!==b||(b=this.defaultValue),this.widget&&"Error"===this.widget.focusNode.state?this.widget.focusNode._resetValue:b},formatter:function(a,b){if(!a)return"";var c=a;return this.icon&&""!==this.icon&&(c=!0===this.icon||"true"===this.icon?'<img src="images/icons/Send_Write_email_16x16.png" />':'<img src="'+this.icon+'" />'),dojo.string.substitute('<a href="mailto:${0}">${1}</a>',[a,c])},markupFactory:function(a,b){dojox.grid.cells.Cell.markupFactory(a,b),dojo.hasAttr(a,"icon")&&(b.icon=dojo.trim(dojo.attr(a,"icon")||""))}})})},"Sage/UI/Controls/Email":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojox/validate/regexp","dojo/_base/declare","Sage/Utility"],function(a,b,c,d,e,f){return e("Sage.UI.Controls.Email",[a,b],{widgetTemplate:new Simplate(['<div class="email" slxcompositecontrol="true" id="{%= $.id %}" >','<input data-dojo-type="Sage.UI.Controls.TextBox" name="{%= $.name %}" ','data-dojo-props="textWithIcons: {%= $.buttonVisible %}"','dojoAttachPoint="focusNode" type="text" style="" ','hotKey="{%= $.hotKey %}" ','{% if($.disabled === "disabled") { %} ','disabled="disabled" ',"{% } %}",'{% if($.readonly === "readonly") { %} ','readonly="readonly" ',"{% } %}",'{% if ($.disabled !== "disabled") { %} ',"{% } %}",' tabindex="{%= $.tabIndex %}" ','value="{%= $.email %}" required="{%= $.required %}" ','id="{%= $.id %}_emailText" maxlength="{%= $.maxLength %}" > ','{% if ($.buttonVisible && $.disabled !== "disabled") { %}','<img alt="{%= $.buttonToolTip %}" tabindex="{%= $.tabIndex %}" data-dojo-attach-event="ondijitclick: sendEmail" ','style="padding-left:0;cursor: pointer; vertical-align: left;" ','src="{%= $.buttonImageUrl %}" ','title="{%= $.buttonToolTip %}" id="{%= $.id %}_emailButton"> ',"{% } %}","</div>"]),shouldPublishMarkDirty:!0,name:"",autoPostBack:!1,displayMode:"",_class:"",textboxToolTip:"",textboxStyle:"",readonly:"",disabled:"",hotKey:"",maxLength:128,buttonVisible:!0,buttonImageUrl:"",buttonToolTip:"",buttonStyle:"",required:!1,tabIndex:0,email:"",emailId:"",constructor:function(a){a.id=a.emailId},postCreate:function(){this.formatEmail(),this.class&&this.class.length>0&&this.domNode.firstChild&&(this.domNode.firstChild.className=this.class+" "+this.domNode.firstChild.className),this.inherited(arguments)},formatEmail:function(){dojo.style(this.focusNode.focusNode,"color","#000099")},widgetsInTemplate:!0,_onChange:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.formatEmailChange()},regExpGen:function(){return"[^< ]+@[^< ]+\\.+.[^< ]*?"},formatEmailChange:function(){this.email!==this.focusNode.value&&(this.email=this.focusNode.value)},sendEmail:function(){var a=this.email;a="mailto:"+a,document.location.href=a}})})},"Sage/UI/Columns/Lookup":function(){define(["Sage/Utility","dojox/grid/cells","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.Lookup",b._Widget,{widgetClass:Sage.UI.SDataLookup,defaultValue:"",constructor:function(a){a.lookupOptions.returnObject&&(this.formatter=function(b,c,d){if(null!==b){for(var e=a.lookupOptions.field.split("."),f=b,g=0;g<e.length;g++)f&&(f=f[e[g]]);return f}return null})},getWidgetProps:function(a){var b=this.LuId(),c="";if(this.lookupOptions.seedOnRelatedEntity){var d=this.item[this.lookupOptions.seedOnRelatedEntity];d&&void 0!==d.$key&&(c=d.$key)}return dojo.mixin({},this.widgetProps||{},{id:b,value:a,displayMode:this.lookupOptions.displayMode,seedOnRowEntity:this.lookupOptions.seedOnRowEntity,seedOnRelatedEntity:this.lookupOptions.seedOnRelatedEntity,relatedEntityId:c,rowEntityId:this.item.$key,returnObject:this.lookupOptions.returnObject,addEmptyListItem:this.lookupOptions.addEmptyListItem,field:this.lookupOptions.field,name:this.lookupOptions.name,structure:this.lookupStructure,storeOptions:this.lookupStoreOptions,gridOptions:this.lookupGridOptions,shouldPublishMarkDirty:!1})},formatNode:function(a,b,c){if(!this.widgetClass)return b;var d=dijit.byId(this.LuId());d?(this.widget=d,this.attachWidget.apply(this,arguments)):this.widget=this.createWidget.apply(this,arguments),this.sizeWidget.apply(this,arguments),this.grid.views.renormalizeRow(c),this.grid.scroller.rowHeightChanged(c,!0),this.widget.focusNode.focus()},setCurrentItems:function(){this.editInfo=this.grid.edit.info,this.item=this.grid.getItem(this.editInfo.rowIndex)},LuId:function(){this.setCurrentItems();var b=[this.item.$key,this.editInfo.cell.field].join("_");return"insert"===a.getModeId()&&(b=[this.item.$cacheID,this.editInfo.cell.field].join("_")),b},getValue:function(){return this.setCurrentItems(),this.lookupOptions.returnObject&&null!==this.widget.focusNode.item?this.widget.focusNode.item:this.widget.focusNode.value}})})},"Sage/UI/Columns/PickList":function(){define(["Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","Sage/Data/BaseSDataStore","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e,f){return d("Sage.UI.Columns.PickList",dojox.grid.cells._Widget,{widgetClass:b,storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(){this.inherited(arguments),"id"!==this.storageMode&&"code"!==this.storageMode||this.pickListName&&null===this.storeData&&this._loadPickList()},formatter:function(a){return"id"===this.storageMode&&(a=this.getStoreTextById(a)),"code"===this.storageMode&&(a=this.getStoreTextByCode(a)),a},_loadPickList:function(){var b=new dojo.Deferred,c={pickListName:this.pickListName,canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:this.storageMode,sort:!1,displayMode:this.displayMode,async:!1};this.pickList=new a(c),this.pickList.getPickListData(b),b.then(f.hitch(this,this._loadData),function(a){})},getStoreTextById:function(a){var b=a;return this.storeData&&e.some(this.storeData.items,function(c){c.id===a&&(b=c.text)},this),b},getStoreTextByCode:function(a){var b=a;return this.storeData&&e.some(this.storeData.items,function(c){c.code===a&&(b=c.text)},this),b},_loadData:function(a){for(var b=[],c=0;c<a.items.$resources.length;c++){var d=a.items.$resources[c];b.push({id:d.$key,code:d.code,number:d.number,text:d.text})}
this.storeData={identifier:"id",label:"text",items:b}}})})},"Sage/UI/Columns/SlxEdit":function(){define(["dojo/i18n!./nls/SlxEdit","dojo/_base/declare"],function(a,b){return b("Sage.UI.Columns.SlxEdit",dojox.grid.cells.Cell,{field:"",entityType:"",cellValue:"",smartPart:"",appliedSecurity:"",dialogTitle:"",isCentered:!0,dialogTop:0,dialogLeft:0,dialogHeight:0,dialogWidth:0,formObjectName:"",constructor:function(){if(dojo.mixin(this,a),!this.hidden&&(!this.appliedSecurity&&arguments.appliedSecurity&&(this.appliedSecurity=arguments.appliedSecurity),this.appliedSecurity)){var b=Sage.Services.getService("RoleSecurityService");b&&(this.hidden=!b.hasAccess(this.appliedSecurity))}this.inherited(arguments)},format:function(a,b){if(null===b)return this.defaultValue;var c=this.cellValue;""===this.cellValue&&""!==this.field&&(c=Sage.Utility.getValue(b,this.field)),""===this.cellValue&&""===c&&(c=this.editText);var d=Sage.Utility.getValue(b,"$key");return d.match(/[=]/)&&(d=d.match(/[=]\S{12}/g).join(",").replace(/=/g,"")),String.format('<a href="{0}">{1}</a>',String.format("javascript:Sage.Utility.loadDetailsDialog( {{ entityType:'{0}', smartPart:'{1}', entityId:'{2}', dialogTitle:'{3}', isCentered:{4}, dialogTop:{5}, dialogLeft:{6}, dialogHeight:{7}, dialogWidth:{8} }} );",this.entityType,this.smartPart,d,this.dialogTitle,this.isCentered,this.dialogTop,this.dialogLeft,this.dialogHeight,this.dialogWidth),c)}})})},"Sage/UI/Columns/SlxUser":function(){define(["dijit/_Widget","dijit/form/FilteringSelect","dojo/_base/declare","Sage/Utility"],function(a,b,c,d){return c("Sage.UI.Columns.SlxUser",dojox.grid.cells.Cell,{format:function(a,b){if(b){var c=b[this.field],e=c?d.getUserName(c):"";return d.htmlEncode(e)}}})})},"Sage/UI/Columns/TextBox":function(){define(["Sage/UI/Controls/TextBox","Sage/UI/Columns/Cell","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.Columns.TextBox",b,{defaultValue:"",widgetClass:a,getWidgetProps:function(a){this._getControlId();return this.defaultValue=a,dojo.mixin({},this.widgetProps||{},{value:"",maxLength:this.maxLength,regExp:this.regExp,shouldPublishMarkDirty:!1})},getValue:function(a){var b=this.widget.focusNode.value,c=dijit.byId(this.widget.focusNode.id);return c.isValid()&&void 0!==b&&""!==b?this.defaultValue=b:(c.undo(),b=this.defaultValue),b}})})},"Sage/UI/Controls/main":function(){define(["Sage/UI/Controls/_customSelectMixin","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/Address","Sage/UI/Controls/CheckBox","Sage/UI/Controls/CopyToClipboard","Sage/UI/Controls/Currency","Sage/UI/Controls/CurrencyTextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/DependControl","Sage/UI/Controls/DependencyLookup","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/DurationSelect","Sage/UI/Controls/Email","Sage/UI/Controls/EntityInfoToolTip","Sage/UI/Controls/FieldAttributeControlFactory","Sage/UI/Controls/FieldPropertyObject","Sage/UI/Controls/FieldStore","Sage/UI/Controls/HelpMenu","Sage/UI/Controls/LogOffButton","Sage/UI/Controls/Lookup","Sage/UI/Controls/EntityInfoToolTip","Sage/UI/Controls/MultiSelectPickList","Sage/UI/Controls/MultiTab","Sage/UI/Controls/Name","Sage/UI/Controls/Numeric","Sage/UI/Controls/Phone","Sage/UI/Controls/PickList","Sage/UI/Controls/PickListAsText","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/PropertyStore","Sage/UI/Controls/PickListAsText","Sage/UI/Controls/Select","Sage/UI/Controls/SimpleTextarea","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/SummaryAggregate","Sage/UI/Controls/TextBox","Sage/UI/Controls/PropertyStore","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/Grid","Sage/UI/Controls/GridParts/main"],function(){})},"Sage/UI/Controls/Address":function(){define(["dijit/_Widget","dojo/string","Sage/_Templated","Sage/Utility","Sage/UI/Controls/TextBox","Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","dijit/Dialog","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Address","dojo/text!./templates/Address.html","dojo/text!./templates/AddressEdit.html","dojo/_base/declare","dojo/_base/array"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return m("Sage.UI.Controls.Address",[a,c],{widgetTemplate:new Simplate(k.split("\r")),dialogContent:new Simplate(l.split("\r")),templateOverridePath:"",widgetsInTemplate:!0,clientId:"",tabIndex:0,autoPostBack:!1,readOnly:!1,enabled:!0,showButton:!0,displayValue:"",displayValueClientId:"",height:"",styleSchemaClass:"",imageData:{imageEditUrl:"",imageEditToolTip:"",imageEditAltText:"",imageMapQuestUrl:"",imageMapQuestToolTip:"",imageMapQuestAltText:""},fields:[],mapQuestValues:{},editorChange:function(){this.isDirty=!0},isDirty:!1,name:"",mapProvider:"",constructor:function(a){if(dojo.mixin(this,a),a.id=a.clientId,a.displayValue=d.htmlDecode(a.displayValue),this.styleSchemaClass=a.cssClass,this.resources=j,a.templateOverridePath&&a.templateOverridePath.length>0)try{this.dialogContent=new Simplate(dojo.cache("Sage.UI.Controls",a.templateOverridePath).split("\r"))}catch(a){}this.inherited(arguments)},setAttribute:function(a,b){this.set(a,b)},postCreate:function(){this.inherited(arguments),this.setAttribute("tabindex","-1")},showDialog:function(){this.readOnly||(this.editDialog=dijit.byId([this.id,"-Dialog"].join("")),this.editDialog||(this.editDialog=new h({title:this.resources.dialogTitle,id:[this.id,"-Dialog"].join(""),class:"address-edit"}),dojo.mixin(this.editDialog,new i),this.editDialog.createHelpIconByTopic("accountaddresschange")),this.htmlEncodeForEditDialog(),this.editDialog.set("content",this.dialogContent.apply({id:this.id,cancelText:this.resources.cancelText,okText:this.resources.okText,fields:this.fields})),this.isDirty=!1,this.editDialog.show(),"modeless"===this.modality&&dojo.destroy([this.id,"-Dialog_underlay"].join("")))},htmlEncodeForEditDialog:function(){n.forEach(this.fields,function(a,b){("picklistcombo"===a.xtype||"textfield"===a.xtype)&&a.value.indexOf('"')>-1&&(a.value=d.htmlEncode(a.value))})},showMap:function(){this.createFormItems();var a=this.getAddressValues(),b={address:"addr1",city:"city",state:"state",zip:"postalcode",country:"country"},c={};for(var d in b)a[b[d]]&&(c[d]="object"==typeof a[b[d]]?a[b[d]].text:a[b[d]]);var e="";switch(this.mapProvider){case"Bing":e=this._showBingMap(c);break;case"Google":e=this._showGoogleMap(c);break;default:e=this._showMapQuestMap(c)}window.open(e,"","directories=no,location=no,menubar=no,pageXOffset=0px,pageYOffset=0px,scrollbars=yes,status=no,titlebar=no,toolbar=yes")},_showMapQuestMap:function(a){a.level=9,a.iconid=0,a.height=300,a.width=500;var b=[];for(var c in a)b.push(c+"="+encodeURIComponent(a[c]));return"http://www.mapquest.com/maps?"+b.join("&")},_showBingMap:function(a){var b="";for(var c in a)b=b+" "+a[c];var d=[];return d.push("where1="+encodeURIComponent(b)),d.push("style=r"),"http://bing.com/maps/default.aspx?"+d.join("&")},_showGoogleMap:function(a){var b="";for(var c in a)b=b+" "+a[c];var d=[];return d.push("q="+encodeURIComponent(b)),d.push("t=m"),"http://google.com/maps/?"+d.join("&")},createFormItems:function(){for(var a=[],b=0;b<this.fields.length;b++)if(!1!==this.fields[b].visible){this.mapQuestValues[this.fields[b].name]=this.fields[b];var c=$.extend(this.fields[b],this.fields[b].pickList,{id:this._clientId+"_field_"+this.fields[b].name,stateful:!1,anchor:"checkbox"!=this.fields[b].xtype&&"100%"});c.maxLength>0&&(c.autoCreate={tag:"input",type:"text",maxlength:this.fields[b].maxLength}),c.tabIndex=b+1,a.push(c)}return a},getAddressValues:function(){var a={};for(var b in this.mapQuestValues){var c=this.mapQuestValues[b];c&&(a[b]=c.value)}return a},getEditFields:function(){this.setDataFields()},setDataFields:function(){for(var a,b,c,d=0;d<this.fields.length;d++)a=dijit.byId([this.id,"-",this.fields[d].name].join("")),b=dojo.byId(this.fields[d].formClientId),c=this.fields[d].xtype,a&&("picklistcombo"===c&&(b&&(b.value=a.get("value")),this.fields[d].value=a.get("value")),"checkbox"===c&&(b&&(b.checked=a.get("checked")),this.fields[d].value=a.get("checked")),"textfield"===c&&(b&&(b.value=a.get("value")),this.fields[d].value=a.get("value")))},_FieldsValid:function(){var a,b,c,d,e;d=!0,e=this.resources.isRequiredText;for(var f=0;f<this.fields.length;f++)a=dijit.byId([this.id,"-",this.fields[f].name].join("")),b=dojo.byId(this.fields[f].formClientId),c=this.fields[f].xtype,a&&"picklistcombo"===c&&b&&this.fields[f].pickList.required&&0===a.get("value").length&&(e=e.concat(this.fields[f].fieldLabel.slice(0,-1)),e=e.concat(","),d=!1);return!1===d&&(e=e.slice(0,-1),Sage.UI.Dialogs.alert(e)),d},_okClicked:function(){if(this._FieldsValid()){var a=this;setTimeout(function(b){return function(){a._updateValues()}}(),1),this.editDialog.hide()}},_updateValues:function(){if(this.isDirty){this.getEditFields();var a=this,b="",c=this.fields.filter(function(a){return"countryCode"===a.name});b=c[0].value;var d="";if(""!==(d=this.fields.filter(function(a){return"country"===a.name})[0].value)){var e="CountryName eq '"+d.toUpperCase()+"' or AlternateCode eq '"+d.toUpperCase()+"'",f=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),g=new Sage.SData.Client.SDataResourceCollectionRequest(f);g.setResourceKind("countrycodemappings");g.setQueryArg("select","CountryCode"),g.setQueryArg("where",e),g.read({httpMethodOverride:!0,success:function(c){var d=c.$resources[0];b=d.CountryCode,a._setAddressFormat(a,b)},failure:function(a){Sage.UI.Dialogs.showError(a)}})}else b="US",this._setAddressFormat(a,b)}},_cancelClicked:function(){this.editDialog.hide()},_setAddressFormat:function(a,b){var c="CountryCode eq '"+b+"'",d=dojo.byId(a.resultValueClientId),e=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),f=new Sage.SData.Client.SDataResourceCollectionRequest(e);f.setResourceKind("countrycodemappings"),f.setQueryArg("select","AddressFormat"),f.setQueryArg("where",c),f.read({httpMethodOverride:!0,success:function(b){var c=b.$resources[0],e=c.Addressformat,f=Sage.Format.Address.formatAddress(a.fields,e);dijit.byId(a.clientId+"_displayText1").set("value",f),d.value=f,dojo.publish("Sage/events/markDirty"),a.autoPostBack&&__doPostBack(d.name,"")},failure:function(a){Sage.UI.Dialogs.showError(a)}})}})})},"Sage/UI/Controls/CopyToClipboard":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/Dialog","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/SimpleTextarea","dijit/form/Button","dojo/_base/lang","Sage/Format","Sage/Utility","Sage/Utility/Email","Sage/Data/SDataServiceRegistry","dojo/_base/sniff","dojo/text!./templates/CopyToClipboard.html","dojo/i18n!./nls/CopyToClipboard","dojo/_base/declare"],function(_TemplatedMixin,_WidgetsInTemplateMixin,_Widget,dialog,tabContainer,contentPane,simpleTextArea,button,lang,format,util,email,sDataServiceRegistry,has,template,nlsStrings,declare){var widget=declare("Sage.UI.Controls.CopyToClipboard",[_Widget,_TemplatedMixin,_WidgetsInTemplateMixin],{templateString:template,widgetsInTemplate:!0,textAlign:"left",calendarName:"calendar1",timeTextBoxName:"timeTextBox1",textNode:null,contentNode:null,closeText:"",dialogTitle:"",helpText:"",mashupName:"",queryName:"",service:null,template:"",entity:null,widgetTemplate:null,id:"copyToClipboard",constructor:function(a){this.service=sDataServiceRegistry.getSDataService("mashups"),this.inherited(arguments)},postMixInProperties:function(){lang.mixin(this,nlsStrings),this.inherited(arguments)},show:function(){window.clipboardData||(this.dialogNode.set("title",this.dialogTitle),this.dialogNode.show()),this._readMashupFeed()},_readMashupFeed:function(a){var b=new Sage.SData.Client.SDataNamedQueryRequest(this.service),c=(this.mashupName,Sage.Services.getService("ClientEntityContext")),d=c.getContext(),e=d.EntityId,f=this;b.setApplicationName("$app"),b.setResourceKind("mashups"),b.uri.setCollectionPredicate("'"+this.mashupName+"'"),b.setQueryName("execute"),b.setQueryArg("_resultName",this.queryName),b.setQueryArg("_ids","'"+e+"'"),b.read({success:dojo.hitch(f,function(b){this._mixinTemplateLocale(),this.entity=b.$resources[0],this._buildTemplateWidget(),this._setContentToCopy(),a&&"function"==typeof a&&a.call(this,b)}),failure:dojo.hitch(f,function(a){this.dialogNode.hide()})})},_mixinTemplateLocale:function(){var a,b=["Sage"],c=this.template.split("/");for(a=0;a<c.length-1;a++)b.push(c[a]);var d="dojo/i18n!"+b.join("/")+"/nls/"+c[c.length-1].replace(".html","");require([d],lang.hitch(this,function(a){lang.mixin(this,a)}))},_buildTemplateWidget:function(){var contentString=dojo.cache("Sage",this.template),temp=eval(contentString);this.widgetTemplate=new Simplate(temp)},_setContentToCopy:function(){var a,b=this.widgetTemplate.apply(this);if(this.contentNode.innerHTML=b,this.textNode.set("value",b),window.clipboardData)try{a=util.getPlainText(this.contentNode),window.clipboardData.setData("text",a),this.dialogNode.hide()}catch(a){}},_closeClicked:function(a){this.onCloseClicked()},onCloseClicked:function(){},destroy:function(){var a=dijit.byId(this.dialogNode.id);a&&(setTimeout(function(){a.destroyRecursive(!1)},1),this.inherited(arguments))},OnEmailContentReady:function(a){this._readMashupFeed(function(){var b=dojo.byId(a+"_to"),c=b?b.value:"",d=dojo.byId(a+"_cc"),e=d?d.value:"",f=dojo.byId(a+"_bcc"),g=f?f.value:"",h=dojo.byId(a+"_subject"),i=h?h.value:"",j=util.getPlainText(this.contentNode),k={};""!==c&&(k.to=c),""!==e&&(k.cc=e),""!==g&&(k.bcc=g),email.writeEmail(k,i,j,!1)})}});return widget})},"Sage/UI/Controls/DependControl":function(){define(["dojo/_base/declare"],function(a){return a("Sage.UI.Controls.DependControl",null,{BaseId:"",ListId:"",TextId:"",Type:"",DisplayProperty:"",SeedProperty:"",CurrentValue:"",constructor:function(a,b,c,d,e,f){this.BaseId=a,this.ListId=b,this.TextId=c,this.Type=d,this.DisplayProperty=e,this.SeedProperty=f,this.CurrentValue=""},LoadList:function(a){dojo.xhrGet({url:"SLXDependencyHandler.aspx",handleAs:"text",preventCache:!0,sync:!0,content:{cacheid:this.BaseId,type:this.Type,displayprop:this.DisplayProperty,seeds:a,currentval:this.CurrentValue},load:dojo.hitch(this,function(a){var b=dojo.byId(this.ListId);b.innerHTML="";for(var c=a.split("|"),d=0;d<c.length;d++)if(""!==c[d]){var e=c[d].split(","),f=document.createElement("OPTION");b.options.add(f),"@"==e[0].charAt(0)&&(e[0]=e[0].substr(1),f.selected=!0),f.innerHTML=e[1],f.value=e[0]}}),error:function(a){}})},ClearList:function(){dojo.byId(this.ListId).innerHTML=""}})})},"Sage/UI/Controls/DependencyLookup":function(){define(["dijit/Dialog","Sage/UI/Controls/DependControl","dojo/_base/declare"],function(dialog,dependControl,declare){var widget=declare("Sage.UI.Controls.DependencyLookup",null,{ClientId:"",PanelId:"",InitCall:null,LookupControls:null,CurrentIndex:0,AutoPostBack:!1,panel:null,Title:"",Size:"",constructor:function(a,b,c,d,e){this.ClientId=a,this.PanelId=a+"_Panel",this.InitCall=b,this.LookupControls=[],this.CurrentIndex=0,this.Size=c+"px",this.AutoPostBack=d,this.panel=null,this.Title=e},CanShow:function(){var a=!1;if(Sys){a=Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack()}if(a){var b=this.ClientId+"_obj",c=function(){window[b].Show("")};return Sage.SyncExec.call(c),!1}return!0},Show:function(){if(this.CanShow()){if(null===this.panel){this.panel=dijit.byId(this.PanelId+"_Dialog");var a=dojo.byId(this.PanelId);this.panel?(this.panel.setContent(a),a.style.display="block"):(a.style.display="block",dojo.place(a,dojo.byId("mainform"),"last"),this.panel=new dialog({id:this.PanelId+"_Dialog",content:a,title:this.Title||""}),this.panel.startup(),dojo.place(this.panel.domNode,dojo.byId("mainform"),"last")),0!==this.CurrentIndex&&void 0===this.LookupControls[b]||this.Init();for(var b=0;b<this.CurrentIndex;b++)if(void 0!==this.LookupControls[b]){var c=dojo.byId(this.LookupControls[b].TextId),d="";if(b>0&&(d=this.GetSeeds(b)),""!==c.value||""!==d||0===b){this.LookupControls[b].CurrentValue=c.value;var e=this.LookupControls[b].ListId,f=dojo.byId(e);0===f.options.length&&this.LookupControls[b].LoadList(d)}}}this.panel.show()}},AddControl:function(a,b,c,d,e,f){var g=new dependControl(a,b,c,d,e,f);this.LookupControls[this.CurrentIndex]=g,this.CurrentIndex++},AddFilters:function(a,b){},SelectionChanged:function(a){if(a+1<this.CurrentIndex){this.LookupControls[a+1].LoadList(this.GetSeeds(a+1));for(var b=a+2;b<this.CurrentIndex;b++)this.LookupControls[b].ClearList()}},Ok:function(){this.panel.hide();for(var a=0;a<this.CurrentIndex;a++){var b=document.getElementById(this.LookupControls[a].TextId),c=document.getElementById(this.LookupControls[a].ListId);void 0!==c.selectedIndex&&-1!=c.selectedIndex?b.value=c.options[c.selectedIndex].text:b.value="",this.InvokeChangeEvent(b)}this.AutoPostBack&&(Sys?Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.ClientId,null):document.forms(0).submit())},Init:function(){eval(this.InitCall)},InvokeChangeEvent:function(a){if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent("change",!0,!0),a.dispatchEvent(b)}else a.fireEvent("onchange")},GetSeeds:function(a){for(var b="",c=a;c>0;c--){var d=this.LookupControls[c-1],e=this.LookupControls[c],f=dojo.byId(d.ListId);if(-1==f.selectedIndex)return b;var g=f.options[f.selectedIndex];b+=e.SeedProperty+","+g.text+"|"}return b=b.substr(0,b.length-1)},close:function(){this.panel.hide()}});return widget})},"Sage/UI/Controls/HelpMenu":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","dojo/i18n!./nls/HelpMenu","dojo/_base/declare","dojo/dom-class","Sage/Utility"],function(a,b,c,d,e,f,g,h){return f("Sage.UI.Controls.HelpMenu",d,{orientation:{BR:"TR",BL:"TL"},postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=new dijit.Menu,d=Sage.Services.getService("ClientContextService");a.addChild(new b({label:e.webClientHelpText,imageClass:"icon_Help_16x16",title:e.webClientHelpText,id:"helpRoot",onClick:function(){h.openHelp("slxoverview")}})),"True"!==d.getValue("isCustomerPortal")&&(a.addChild(new b({label:e.gettingStartedText,imageClass:"icon_pdf_16x16",title:e.gettingStartedText,id:"helpGettingStarted",onClick:function(){h.openPdfDoc("getting_started_with_infor_crm_web_client.pdf")}})),a.addChild(new b({label:e.quickReferenceText,imageClass:"icon_pdf_16x16",title:e.quickReferenceText,id:"helpQuickReference",onClick:function(){Sage.Utility.openPdfDoc("infor_crm_quick_reference_for_the_web_user.pdf")}}))),a.addChild(new b({label:e.aboutText,imageClass:"icon_Help_16x16",title:e.aboutText,id:"helpAbout",onClick:function(){Sage.Utility.openHelp("slxthirdparty")}})),this.addChild(new c({label:"",iconStyle:"width: 16px",imageClass:"fa fa-question",title:e.helpText,id:"btnHelpMenu",popup:a}))}})})},"Sage/UI/Controls/LogOffButton":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/MenuBarItem","dojo/i18n!./nls/LogOffButton","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.Controls.LogOffButton",a,{postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.addChild(new c({label:d.logOffText,iconStyle:"width: 16px",icon:"images/icons/login_16.png",imageClass:"icon_login_16",title:d.logOffText,id:"btnLogOff",onClick:function(){try{window.location.href="Shutdown.axd?Source=LogOffButton"}catch(a){}}}))}})})},"Sage/UI/Controls/MultiSelectPickList":function(){define(["dojo/_base/array","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ValidationTextBox","dijit/form/DropDownButton","dijit/form/CheckBox","dijit/TooltipDialog","dijit/form/Button","Sage/UI/Controls/PickList","dojo/text!./templates/MultiSelectPickList.html","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return l("Sage.UI.Controls.MultiSelectPickList",[j,d,b,c],{cssClass:"",constructor:function(a){a.clientId&&(this.id=a.clientId+"-MultipleSelectPickList"),a.cssClass&&(this.cssClass=a.cssClass),this.inherited(arguments)},postCreate:function(){this._setupTooltips(this.dropDownButtonNode.domNode,this.textNode.domNode);var b;this.required&&(this.textNode.required=!0),this._loadData(),!1===this.get("canEditText")&&(this.textNode.disabled=!0),b=this.get("maxLength"),b>0&&this.textNode.set("maxLength",b),this.get("itemMustExist")?this.textNode.isValid=m.hitch(this,function(b){var c=this.textNode.get("value"),d=c.split(","),e=!1;return e=1===d.length&&""===d[0]&&!this.required||a.every(d,function(a){var b=!1,c=a.trim(),d=0;for(d=0;d<this.storeData.items.length;d++){if(c===this.storeData.items[d].text.trim()){b=!0;break}}return b},this),e&&(this.lastValidValue=c),b&&(e=!0),e||this.lastValidValue&&(c=this.lastValidValue,e=!0),e}):this.textNode.isValid=function(a){return!0!==this.required||""!==this.value},this.cssClass&&this.cssClass.length>0&&(this.textNode.domNode.className=this.cssClass+" "+this.textNode.domNode.className),this.inherited(arguments)},uninitialize:function(){this.inherited(arguments)},_isItemSelected:function(b){var c=this.textNode.get("value"),d=!1,e=[];return c&&(e=c.split(","),a.forEach(e,function(a,c,e){b.text.trim()===a.trim()&&(d=!0)},this)),d},_storeHasItem:function(b){var c=!1;return this.storeData&&(c=a.some(this.storeData.items,function(a){return a.text.trim()===b.trim()},this)),c},_renderFormElements:function(b){this._destroyItems();var c=this.tooltipContainer;a.forEach(b,function(a,b,d){var e,f=new g({id:this.id+"_checkBox"+b,name:"checkBox_"+a.text,value:a.text,checked:this._isItemSelected(a)});f.startup(),dojo.place(f.domNode,c,"last"),e=dojo.create("label",{for:f.id},f.domNode,"after"),e.innerHTML=a.text,dojo.create("br",{},e,"after")},this)},_onTextBlur:function(){this._updateASPNETFields()},_updateASPNETFields:function(){if(this.textNode.isValid()){var a=this.textNode.get("value");a.trim()!==this.initialValue.trim()&&(this.setASPNETInputs(a,"",""),this._onChange(a))}},_onTooltipClose:function(){var b=[];dojo.query("input",this.tooltipContainer).forEach(function(a){var c,d=dijit.byId(a.id);d&&(c=d.get("value"),d.get("checked")&&b.push(c))}),a.forEach(this.itemsNotInStore,function(a){b.push(a.trim())},this),this.textNode.set("value",b.join(", ")),this._updateASPNETFields()},_onTooltipShow:function(){this._refreshCheckedItems(),this._refreshItemsNotInStore()},_refreshItemsNotInStore:function(){var b=this.textNode.get("value"),c=b.split(",");this.itemsNotInStore=[],a.forEach(c,function(a,b,c){this._storeHasItem(a.trim())||""!==a.trim()&&this.itemsNotInStore.push(a.trim())},this)},_refreshCheckedItems:function(){dojo.query("input",this.tooltipContainer).forEach(function(a){var b=dijit.byId(a.id);b&&b.set("checked",!1)}),this.storeData&&a.forEach(this.storeData.items,function(a,b,c){this._isItemSelected(a)&&dojo.query("input",this.tooltipContainer).forEach(function(b){var c=dijit.byId(b.id);c&&b.value.trim()===a.text.trim()&&c.set("checked",!0)})},this)},templateString:k,widgetsInTemplate:!0,storeData:null,lastValidValue:"",lastValidValues:null,initialValue:"",initialvalues:null,itemsNotInStore:null,_setPickListNameAttr:function(a){this.inherited(arguments),this._loadData()},_getValueAttr:function(){return this.textNode.get("value")},_setValueAttr:function(a){this.textNode.set("value",a),a&&(this.initialValue=a,this.initialValues=a.split(","),this.lastValidValues=a.split(","))},_onChange:function(a){this.onChange(a)},_loadData:function(){var a=new dojo.Deferred;a.then(m.hitch(this,function(a){"string"==typeof a&&(this.textNode.set("value",a),this.dropDownButtonNode.disabled=!0);var b,c,d,e=[],f=a&&a.items&&a.items.$resources&&a.items.$resources.length;for(b=0;b<f;b++)c=a.items.$resources[b],e.push({id:c.$key,code:c.code,number:c.number,text:c.text});this.storeData={identifier:"id",label:"text",items:e},d=dojo.byId(this._textId),e[0]&&(d?(this.lastValidValue=d.value,this.initialValue=this.lastValidValue):e.length>0&&(this.lastValidValue=e[0].text),this.textNode.set("value",this.lastValidValue),this.initialValues=this.lastValidValue.split(","),this.lastValidValues=this.lastValidValue.split(","),this._renderFormElements(e))}),function(a){}),this.getPickListData(a)},_destroyItems:function(){dojo.query("input",this.tooltipContainer).forEach(function(a){var b=dijit.byId(a.id);b&&b.destroyRecursive()}),dojo.empty(this.tooltipContainer)},onChange:function(a){}})})},"Sage/UI/Controls/MultiTab":function(){define(["dojo/_base/declare","dojo/dom","dojo/ready","dojo/aspect","dijit/layout/TabContainer","dijit/registry"],function(a,b,c,d,e,f){return a("Sage.UI.Controls.MultiTab",[e],{region:"center",tabStrip:!1,hiddenFieldId:"",destroyRecursive:function(){this.tablist&&this.tablist.destroy(),this.inherited(arguments)},postCreate:function(){var a=this.domNode.parentNode.id,b=f.byId(a),c=this;b.resize(),setTimeout(function(){b.resize(),c.selectedChildWidget&&c._showChild(c.selectedChildWidget)},50)},startup:function(){this.hiddenFieldId=this.id+"_tabstate";var a=b.byId(this.hiddenFieldId);""!==a.value&&f.byId(this.id).selectChild(f.byId(a.value)),this.inherited(arguments)}})})},"Sage/UI/Controls/Name":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/i18n","dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","dijit/Dialog","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Name","dojo/text!./templates/Name.html","dojo/text!./templates/PersonName.html","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return b("Sage.UI.Controls.Name",[d,e],{widgetTemplate:new Simplate(l.split("\r")),dialogContent:new Simplate(m.split("\r")),templateOverridePath:"templates/PersonName-Override.html",widgetsInTemplate:!0,clientId:"",nameDesc:"",buttonImageUrl:"",buttonToolTip:"",buttonVisible:!0,tabIndex:0,prefix:"",prefixLanguage:"",prefixLanguageFilters:!1,first:"",middle:"",last:"",suffix:"",suffixLanguage:"",suffixLanguageFilters:!1,"Name Prefix":{},"Name Suffix":{},"LastName Prefix":{},name:"",prefixClientId:"",prefixlanguageclientid:"",prefixlanguagefiltersclientid:"",nameFirstClientId:"",nameMiddleClientId:"",nameLastClientid:"",suffixClientId:"",suffixlanguageclientid:"",suffixlanguagefiltersclientid:"",required:!1,autoPostBack:!1,constructor:function(a){if(a.id=a.clientId,this.resources=c.getLocalization("Sage.UI.Controls","Name"),a.templateOverridePath&&a.templateOverridePath.length>0)try{this.dialogContent=new Simplate(dojo.cache("Sage.UI.Controls",a.templateOverridePath).split("\r"))}catch(a){}},postCreate:function(){this.getDotNetData(),this.loadPickLists(),this.class&&this.class.length>0&&this.domNode.firstChild&&(this.domNode.firstChild.className=this.class+" "+this.domNode.firstChild.className),this.inherited(arguments)},loadPickLists:function(){var a=new dojo.Deferred,b=new dojo.Deferred,c=new dojo.Deferred,d=document.cookie.SLXLanguageSetting||navigator.userLanguage||navigator.browserLanguage||navigator.language;this.prefixLanguage=this.prefixLanguage&&"string"==typeof this.prefixLanguage?this.prefixLanguage.trim():d,this.suffixLanguage=this.suffixLanguage&&"string"==typeof this.suffixLanguage?this.suffixLanguage.trim():d;var e={pickListName:"Name Prefix",canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:"text",sort:!0,displayMode:"AsControl",required:!1,useCache:!1,autoPostBack:!1,filterByLanguage:this.prefixLanguageFilters||!1,boundLanguage:this.prefixLanguage};new g(e).getPickListData(a),a.then(dojo.hitch(this,this.storePickListData),function(a){}),e.pickListName="Name Suffix",e.boundLanguage=this.suffixLanguage,e.filterByLanguage=this.suffixLanguageFilters||!1,new g(e).getPickListData(b),b.then(dojo.hitch(this,this.storePickListData),function(a){}),e.pickListName="LastName Prefix",e.boundLanguage=d,e.filterByLanguage=!1,new g(e).getPickListData(c),c.then(dojo.hitch(this,this.storePickListData),function(a){})},storePickListData:function(a){this[a.name].data=a},showDialog:function(){this.buttonVisible&&(this.editDialog=n.byId([this.id,"-Dialog"].join("")),this.editDialog||(this.editDialog=new i({title:this.resources.dialogTitle,id:[this.id,"-Dialog"].join("")})),this.editDialog.set("content",this.dialogContent.apply({id:this.id,prefixText:this.resources.prefixText,nameFirstText:this.resources.nameFirstText,nameMiddleText:this.resources.nameMiddleText,nameLastText:this.resources.nameLastText,suffixText:this.resources.suffixText,cancelText:this.resources.cancelText,okText:this.resources.okText,prefixLanguage:this.prefixLanguage,prefixLanguageFilters:this.prefixLanguageFilters,suffixLanguage:this.suffixLanguage,suffixLanguageFilters:this.suffixLanguageFilters})),this.setEditFields(),a.mixin(this.editDialog,new j),this.editDialog.createHelpIconByTopic("editname"),this.editDialog.show(),"modeless"===this.modality&&dojo.destroy([this.id,"-Dialog_underlay"].join("")))},textBoxOnChange:function(a){a!==this.formatName()&&(this.parseName(a),this.setDotNetData(),dojo.publish("Sage/events/markDirty"))},parseName:function(a){var b,c,d=a.split(" "),e="";for(this.prefix="",this.first="",this.middle="",this.last="",this.suffix="",b=0;b<this["Name Prefix"].data.items.$resources.length;b++)if(c=this["Name Prefix"].data.items.$resources[b],c.text.toUpperCase()===d[0].toUpperCase()){this.prefix=d[0],d.shift();break}for(b=0;b<this["Name Suffix"].data.items.$resources.length;b++)if(c=this["Name Suffix"].data.items.$resources[b],c.text.toUpperCase()===d[d.length-1].toUpperCase()){this.suffix=d[d.length-1],d.pop();break}if(d.length>0)for(b=0;b<this["LastName Prefix"].data.items.$resources.length;b++)if(c=this["LastName Prefix"].data.items.$resources[b],c.text.toUpperCase()===d[d.length-1].toUpperCase()){e=d[d.length-1]+" ",d.pop();break}switch(d.length){case 3:this.first=d[0],this.middle=d[1],this.last=e+d[2];break;case 2:this.first=d[0],this.last=e+d[1];break;default:this.last=e+d[0]}},getEditFields:function(){this.updateNameObj(),this.setDotNetData(),dojo.publish("Sage/events/markDirty")},updateNameObj:function(){n.byId([this.id,"-Prefix"].join(""))&&(this.prefix=n.byId([this.id,"-Prefix"].join("")).comboBox.get("value")),n.byId([this.id,"-First"].join(""))&&(this.first=n.byId([this.id,"-First"].join("")).get("value")),n.byId([this.id,"-Middle"].join(""))&&(this.middle=n.byId([this.id,"-Middle"].join("")).get("value")),n.byId([this.id,"-Last"].join(""))&&(this.last=n.byId([this.id,"-Last"].join("")).get("value")),n.byId([this.id,"-Suffix"].join(""))&&(this.suffix=n.byId([this.id,"-Suffix"].join("")).comboBox.get("value"))},getDotNetData:function(){""!==this.prefixClientId&&(this.prefix=dojo.byId(this.prefixClientId).value),""!==this.prefixlanguageclientid&&(this.prefixLanguage=dojo.byId(this.prefixlanguageclientid).value),""!==this.prefixlanguagefiltersclientid&&(this.prefixLanguageFilters=dojo.byId(this.prefixlanguagefiltersclientid).checked),""!==this.nameFirstClientId&&(this.first=dojo.byId(this.nameFirstClientId).value),""!==this.nameMiddleClientId&&(this.middle=dojo.byId(this.nameMiddleClientId).value),""!==this.nameLastClientid&&(this.last=dojo.byId(this.nameLastClientid).value),""!==this.suffixClientId&&(this.suffix=dojo.byId(this.suffixClientId).value),""!==this.suffixlanguageclientid&&(this.suffixLanguage=dojo.byId(this.suffixlanguageclientid).value),""!==this.suffixlanguagefiltersclientid&&(this.suffixLanguageFilters=dojo.byId(this.suffixlanguagefiltersclientid).checked)},setDotNetData:function(){dojo.byId(this.prefixClientId).value=this.prefix,dojo.byId(this.prefixlanguageclientid).value=this.prefixLanguage,dojo.byId(this.prefixlanguagefiltersclientid).checked=this.prefixLanguageFilters,dojo.byId(this.nameFirstClientId).value=this.first,dojo.byId(this.nameMiddleClientId).value=this.middle,dojo.byId(this.nameLastClientid).value=this.last,dojo.byId(this.suffixClientId).value=this.suffix,dojo.byId(this.suffixlanguageclientid).value=this.suffixLanguage,
dojo.byId(this.suffixlanguagefiltersclientid).checked=this.suffixLanguageFilters},setEditFields:function(){this._setNameSelectField(n.byId([this.id,"-Prefix"].join("")),this.prefix),this._setNameInputField(n.byId([this.id,"-First"].join("")),this.first),this._setNameInputField(n.byId([this.id,"-Middle"].join("")),this.middle),this._setNameInputField(n.byId([this.id,"-Last"].join("")),this.last),this._setNameSelectField(n.byId([this.id,"-Suffix"].join("")),this.suffix)},_setNameSelectField:function(a,b){if(a){a.comboBox.set("value",this.prefix);var c=a.pickListName;this[c]&&this[c].data&&a.setItems(this[c].data)}},_setNameInputField:function(a,b){a&&(a.set("value",b),a.set("style","width:100%"))},_okClicked:function(){this.getEditFields(),this.focusNode.value!==this.formatName()&&(this.focusNode.set("value",this.formatName()),dojo.publish("Sage/events/markDirty"))},_cancelClicked:function(){this.editDialog.hide()},formatName:function(){var a=""===this.prefix?"":this.prefix+" ";return a+=""===this.first?"":this.first+" ",a+=""===this.middle?"":this.middle+" ",a+=""===this.last?"":this.last+" ",a+=""===this.suffix?"":this.suffix,a=a.trim()}})})},"Sage/UI/Controls/PickListAsText":function(){define(["dijit/_Widget","dijit/_Templated","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/Controls/PickList","dojo/text!./templates/PickListAsText.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){return h("Sage.UI.Controls.PickListAsText",[f,a,b],{constructor:function(a){a.clientId&&(this.id=a.clientId+"-PickListAsText"),this.inherited(arguments)},_loadData:function(){var a=new dojo.Deferred;this.getPickListData(a),a.then(dojo.hitch(this,function(a){"string"==typeof a&&(this.textSpan.innerHTML=a);for(var b=[],d=0;d<a.items.$resources.length;d++){var e=a.items.$resources[d];b.push({id:e.$key,code:e.code,number:e.number,text:e.text})}this.storeData={identifier:"id",label:"text",items:b};var f=(new c({data:this.storeData}),dojo.byId(this.textId)),g=dojo.byId(this.codeId);if(b[0]&&(f&&f.value&&(this.initialValue=f.value,this.textSpan.innerHTML=this.initialValue),!this.initialCode&&g&&g.value&&(this.initialCode=g.value),this.initialCode)){var h=this.getStoreItemById(this.initialCode);h&&(this.initialValue=h.text,this.textSpan.innerHTML=this.initialValue)}}),function(a){})},getStoreItemById:function(a){var b=null;return this.storeData&&dojo.forEach(this.storeData.items,function(c,d,e){c.id!==a&&c.code!==a||(b=c)},this),b},_setPickListNameAttr:function(a){this.inherited(arguments),this._loadData()},templateString:g,widgetsInTemplate:!0,storeData:null,initialValue:"",initialCode:"",textId:"",codeId:""})})},"Sage/UI/Controls/Select":function(){define(["dijit/form/Select","dojo/_base/declare","dojo/has","dojo/_base/sniff","dojo/_base/connect","dojo/dom-style","dojo/query","dojo/on","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i){return b("Sage.UI.Controls.Select",[a],{_hClickBody:!1,shouldPublishMarkDirty:!0,autoPostBack:!1,maxHeight:c("ie")?146:155,constructor:function(){this.own(h(document.body,"click",i.hitch(this,this.ensureClosed)))},ensureClosed:function(){this.dropDown&&this.dropDown.isShowingNow&&this.dropDown.onCancel()},postCreate:function(){this.own(h(this,"change",i.hitch(this,this.onChanged))),this.inherited(arguments)},destroy:function(){this.inherited(arguments)},_setDisplay:function(a){this.inherited(arguments),this.trimDisplayValue()},onChanged:function(a){this.shouldPublishMarkDirty&&e.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.id,"")},trimDisplayValue:function(){var a,b,c,d,e;if(e=this.focusNode.style.width)for(a=g("span",this.containerNode),c=a&&a.length,b=0;b<c;b++)d=a[b],f.set(d,{width:e,"text-overflow":"ellipsis",overflow:"hidden"})}})})},"Sage/UI/Controls/GridParts/main":function(){define(["Sage/UI/Controls/GridParts/Columns/ActivityAccount","Sage/UI/Controls/GridParts/Columns/ActivityAlarm","Sage/UI/Controls/GridParts/Columns/ActivityAttachment","Sage/UI/Controls/GridParts/Columns/ActivityConfirmStatus","Sage/UI/Controls/GridParts/Columns/ActivityDuration","Sage/UI/Controls/GridParts/Columns/ActivityLeader","Sage/UI/Controls/GridParts/Columns/ActivityName","Sage/UI/Controls/GridParts/Columns/ActivityNameType","Sage/UI/Controls/GridParts/Columns/ActivityRecurring","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/Boolean","Sage/UI/Controls/GridParts/Columns/CheckBox","Sage/UI/Controls/GridParts/Columns/Currency","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Email","Sage/UI/Controls/GridParts/Columns/HistoryType","Sage/UI/Controls/GridParts/Columns/Lookup","Sage/UI/Controls/GridParts/Columns/Numeric","Sage/UI/Controls/GridParts/Columns/Owner","Sage/UI/Controls/GridParts/Columns/OwnerType","Sage/UI/Controls/GridParts/Columns/Phone","Sage/UI/Controls/GridParts/Columns/PickList","Sage/UI/Controls/GridParts/Columns/SlxEdit","Sage/UI/Controls/GridParts/Columns/SlxLink","Sage/UI/Controls/GridParts/Columns/SlxUser","Sage/UI/Controls/GridParts/Columns/UserType","Sage/UI/Controls/GridParts/Columns/EmailControl","Sage/UI/Controls/GridParts/Columns/RadioButton","Sage/UI/Controls/GridParts/Columns/DataType"],function(){})},"Sage/UI/Controls/GridParts/Columns/Currency":function(){define(["dojo/_base/declare","dojo/json","Sage/Data/SDataServiceRegistry","Sage/Utility/_LocalStorageMixin","Sage/Utility","dojo/_base/lang","Sage/UI/Controls/Currency","Sage/UI/Columns/Currency"],function(a,b,c,d,e,f,g,h){return a("Sage.UI.Controls.GridParts.Columns.Currency",null,{widgetClass:g,exchangeRateLoaded:!1,constructor:function(a){if(f.mixin(this,a),f.mixin(this,a.editorArgs),this.multiCurrency&&!this.exchangeRateLoaded){var b=Sage.Services.getService("SystemOptions");b&&b.get("BaseCurrency",function(a){this.exchangeRateLoaded=!0,this.currentCode=a;var b=Sage.Services.getService("ExchangeRateLoader");b&&b.requestExchangeRate(this.getExchangeRate,this)},function(){},this)}},getExchangeRate:function(a){this.exchangeRate=a.Rate},format:function(a,b){var c,d=b,f="";try{if(this.decimalDigit=this.constraints&&this.constraints.places?this.constraints.places:Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits,this.multiCurrency){if("EntityRate"==this.exchangeRateType&&"insert"!==e.getModeId()){var g=1;if(void 0!==this.exchangeRateField&&null!==this.exchangeRateField&&""!==this.exchangeRateField){var h=this.exchangeRateField.split(".");for(g=d,c=0;c<h.length;c++)g=g?g[h[c]]:e.getClientContextByKey(this.exchangeRateType);null!==g&&0!==g||(g=1)}var i=this.exchangeRateCodeField.split("."),j=d;for(c=0;c<i.length;c++)j=j?j[i[c]]:e.getClientContextByKey([this.exchangeRateType,"Code"].join(""));this.exchangeRate=g,this.currentCode=j}else"MyRate"===this.exchangeRateType&&(this.exchangeRate=e.getClientContextByKey(this.exchangeRateType),this.currentCode=e.getClientContextByKey([this.exchangeRateType,"Code"].join("")));a*=this.exchangeRate,f=dojo.currency.format(a,{currency:[],locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit}),f=[f,"   ",this.currentCode].join("")}else{var k;if(k=this.constraints&&this.constraints.showCurrencySymbol?this.constraints.currencySymbol:"",null===(f=dojo.currency.format(a,{currency:k,locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit})))return""}if(this.abbreviationLength){f=Sage.Format.abbreviationFormatter(this.abbreviationLength)(f)}}catch(a){}return f}})})},"Sage/UI/Controls/GridParts/Columns/Email":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(a,b){return a("Sage.UI.Controls.GridParts.Columns.Email",null,{icon:"",defaultValue:"",constructor:function(a){b.mixin(this,a)},format:function(a,b){if(!a)return"";var c=a;return this.icon&&""!==this.icon&&(c=!0===this.icon||"true"===this.icon?'<img src="images/icons/Send_Write_email_16x16.png" />':'<img src="'+this.icon+'" />'),dojo.string.substitute('<a href="mailto:${0}">${1}</a>',[Sage.Utility.htmlEncode(a),c])}})})},"Sage/UI/Controls/GridParts/Columns/HistoryType":function(){define(["Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.GridParts.Columns.HistoryType",null,{keyField:!1,format:function(d,e){var f=d;if(!f)return this.defaultValue;var g=a.getValue(e,this.keyField||"$key");return c.substitute('<div class="Global_Images icon16x16 ${0}"></div>&nbsp;<span onclick="javascript:Sage.Link.editHistory(\'${1}\')" class="activity-type-link">${2}</span>',[b.getActivityImageClass(f,"small"),g,b.getActivityTypeName(f)])}})})},"Sage/UI/Controls/GridParts/Columns/OwnerType":function(){define(["dojo/i18n","dojo/i18n!../../../nls/OwnerType","dojo/_base/declare","dojo/_base/lang","Sage/Utility"],function(a,b,c,d,e){return c("Sage.UI.Controls.GridParts.Columns.OwnerType",null,{constructor:function(b){var c=a.getLocalization("Sage.UI","OwnerType");d.mixin(this,c),d.mixin(this,b),this.inherited(arguments)},format:function(a){var b={G:this.teamText,D:this.departmentText,S:this.systemText,U:this.userText};return b[a]?e.htmlEncode(b[a]):a}})})},"Sage/UI/Controls/GridParts/Columns/SlxEdit":function(){define(["dojo/i18n!./nls/SlxEdit","dojo/_base/declare","dojo/_base/lang"],function(a,b,c){return b("Sage.UI.Controls.GridParts.Columns.SlxEdit",null,{field:"",entityType:"",smartPart:"",appliedSecurity:"",dialogTitle:"",isCentered:!0,dialogTop:0,dialogLeft:0,dialogHeight:0,dialogWidth:0,formObjectName:"",constructor:function(b){if(c.mixin(this,b),c.mixin(this,a),!this.hidden&&(!this.appliedSecurity&&arguments.appliedSecurity&&(this.appliedSecurity=arguments.appliedSecurity),this.appliedSecurity)){var d=Sage.Services.getService("RoleSecurityService");d&&(this.hidden=!d.hasAccess(this.appliedSecurity))}this.inherited(arguments)},format:function(a,b){if(null===b)return this.editText;var c=this.editCellValue;""===c&&(c=this.editText);var d=Sage.Utility.getValue(b,"$key");return d.match(/[=]/)&&(d=d.match(/[=]\S{12}/g).join(",").replace(/=/g,"")),String.format('<a href="{0}">{1}</a>',String.format("javascript:Sage.Utility.loadDetailsDialog( {{ entityType:'{0}', smartPart:'{1}', entityId:'{2}', dialogTitle:'{3}', isCentered:{4}, dialogTop:{5}, dialogLeft:{6}, dialogHeight:{7}, dialogWidth:{8} }} );",this.entityType,this.smartPart,d,this.dialogTitle,this.isCentered,this.dialogTop,this.dialogLeft,this.dialogHeight,this.dialogWidth),c)}})})},"Sage/UI/Controls/GridParts/Columns/UserType":function(){define(["Sage/Utility","dojo/i18n!../../../nls/UserType","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.UI.Controls.GridParts.Columns.UserType",null,{constructor:function(a){d.mixin(this,b),d.mixin(this,a),this.inherited(arguments)},format:function(b){"string"==typeof b&&(b=b.trim());var c={W:this.administratorText,P:this.templateText,M:this.remoteText,T:this.webOnlyText,R:this.retiredText,C:this.concurrentText,V:this.webViewerText,N:this.networkText,A:this.addOnUserText};return c[b]?a.htmlEncode(c[b]):b}})})},"Sage/UI/Controls/GridParts/Columns/EmailControl":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojox/validate/regexp","dojo/_base/declare","Sage/Utility"],function(a,b,c,d,e,f){return e("Sage.UI.Controls.GridParts.Columns.EmailControl",[c],{shouldPublishMarkDirty:!0,name:"",autoPostBack:!1,displayMode:"",_class:"",textboxToolTip:"",textboxStyle:"",readonly:"",disabled:"",hotKey:"",maxLength:128,buttonVisible:!0,buttonImageUrl:"",buttonToolTip:"",buttonStyle:"",required:!1,tabIndex:0,email:"",emailId:"",constructor:function(a){a.id=a.emailId},postCreate:function(){this.inherited(arguments)},widgetsInTemplate:!0,_onChange:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.formatEmailChange()},regExpGen:function(){return"[^< ]+@[^< ]+\\.+.[^< ]*?"},formatEmailChange:function(){this.email!==this.focusNode.value&&(this.email=this.focusNode.value)},sendEmail:function(){var a=this.email;a="mailto:"+a,document.location.href=a}})})},"Sage/UI/Controls/GridParts/Columns/RadioButton":function(){define(["dojo/_base/declare","dijit/form/RadioButton"],function(a,b){return a("Sage.UI.Controls.GridParts.Columns.RadioButton",b,{_getValueAttr:function(){return this.checked}})})},"Sage/UI/Controls/GridParts/Columns/DataType":function(){define(["dojo/string","dojo/_base/declare","Sage/Utility/Filters"],function(a,b,c){return b("Sage.UI.Controls.GridParts.Columns.DataType",null,{constructor:function(){this.inherited(arguments)},format:function(b,d){var e=c.resolveDataTypeQB(b),f="string";switch(e){case"Integer":f="int";break;case"Decimal":f="float";break;case"Date/Time":f="date";break;case"Memo/Blob":f="blob";break;default:f="string"}return a.substitute('<img src="images/ft_${0}.gif" class="dataTypeColumnDimensions" />',[f])}})})},"Sage/UI/Dashboard/main":function(){define(["Sage/UI/Dashboard/BaseWidget","Sage/UI/Dashboard/ChartingWidget","Sage/UI/Dashboard/Dashboard","Sage/UI/Dashboard/DashboardPage","Sage/UI/Dashboard/DashboardTabController","Sage/UI/Dashboard/DashboardWidget","Sage/UI/Dashboard/DashboardWidgetCell","Sage/UI/Dashboard/WidgetDefinition","Sage/UI/Dashboard/ChartingTheme"],function(){})},"Sage/UI/Dashboard/BaseWidget":function(){define(["Sage/UI/Dashboard/BaseWidget","Sage/Utility","dojo/i18n","Sage/UI/EditorContainer","dojo/_base/declare","dojo/i18n!./nls/WidgetDefinition"],function(a,b,c,d,e){return e("Sage.UI.Dashboard.BaseWidget",null,{constructor:function(a){dojo.safeMixin(this,a)},postMixInProperties:function(){dojo.mixin(this,c.getLocalization("Sage.UI.Dashboard","WidgetDefinition")),this.inherited(arguments)},family:"System",prefHeight:.33,timestamp:!0,_getEditorString:function(a,b){var e=c.getLocalization("Sage.UI.Dashboard","WidgetDefinition"),f=e[this.name],g=e.Links;f?f===g?f=e.LinksSettings:f+=" "+e.settingsText:f=e.defaultWidgetText,a._pcid=b;var h=new d(a);return this._editorTpl?this._editorTpl.apply({title:f,id:b+"_editor",content:h.doTemplate()}):""}})})},"Sage/UI/EditorContainer":function(){define(["dojo/i18n","dijit/form/Button","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.EditorContainer",null,{constructor:function(b){dojo.safeMixin(this,b),dojo.mixin(this,a.getLocalization("dijit","common"))},textCell:new Simplate('<td class="editor-text">{%= $[0] %}</td>'),textCellWithLoading:new Simplate('<td class="editor-text">{%= $.label %}<span style="display:none; float:right;" id="{%= $.id %}_loading">{%= $.loadingLabel %}</span></td>'),ctrlCell:new Simplate('<td class="editor-ctrl">{%= $[0] %}</td>'),rowTpl:new Simplate("<tr>{%= $.cells %}</tr>"),btnRow:new Simplate('<tr><td></td><td id="{%= $.id %}_editor_tools"><table width="100%"><tr><td id="{%= $.id %}_custom_tools" align="left"></td><td align="right">{%= $.btn %}</td></tr></table></td></tr>'),tableTpl:new Simplate(['<table class="editor-table">',"<tbody>{%= $.rows %}</tbody></table>"]),btnOk:new Simplate(['<button style="align:right;" data-dojo-type="dijit.form.Button" type="button"',' id="{%= $.id %}_btnOK" title="{%= $.buttonOk %}">{%= $.buttonOk %}</button>']),btnCancel:new Simplate(['<button style="align:right;" data-dojo-type="dijit.form.Button" type="button"',' id="{%= $.id %}_btnCancel" title="{%= $.buttonCancel %}">{%= $.buttonCancel %}</button>']),doTemplate:function(){var a=[];for(var b in this.rows)if(this.rows.hasOwnProperty(b)){var c=[];this.rows[b].loading?c.push(this.textCellWithLoading.apply({label:this.rows[b].title,id:this._pcid,loadingLabel:this.rows[b].loading}),this.ctrlCell.apply([this.rows[b].control])):c.push(this.textCell.apply([this.rows[b].title]),this.ctrlCell.apply([this.rows[b].control])),a.push(this.rowTpl.apply({cells:c.join("")}))}var d=[this.btnOk.apply({id:this._pcid,buttonOk:this.buttonOk}),this.btnCancel.apply({id:this._pcid,buttonCancel:this.buttonCancel})];return a.push(this.btnRow.apply({btn:d.join(""),id:this._pcid})),this.tableTpl.apply({rows:a.join("")})}})})},"Sage/UI/Dashboard/ChartingWidget":function(){define(["Sage/UI/Dashboard/BaseWidget","Sage/Utility","dojo/i18n","dojo/_base/declare","dojo/i18n!./nls/WidgetDefinition","dojo/number"],function(a,b,c,d){return d("Sage.UI.Dashboard.ChartingWidget",[a],{_chartTpl:new Simplate(['<table border="0" style="width:100%; height:100%">',"<tr>",'<td id="{%= $.id %}_chart" style="width:{%= $.chartWidth %}"></td>','<td style="display:{%= $.legendDisplay %};font-size:10px;"><div class="dojoxGridScrollbox" style="height:{%= $.chartHeight %};overflow-y:auto;"><span id="{%= $.id %}_legend"></span></div></td>',"</tr>","</table>"]),_noDataTable:new Simplate(['<table border="0" style="width:100%; height:100%">',"<tr>","<td>{%= $.NoDataMessage %}</td>","</tr>","</table>"]),_baseEditor:function(a,c){var d=this._getEditorString(c,a.id),e=b.fragger(d),f=b.fragToDijits(e);a.addChild(f[0],0),a.isNew&&a._editorAdded()},_getPaneSize:function(){return{w:dojo.style(this.pane,"width"),h:dojo.style(this.pane,"height")}},html:function(a,b){this.paneId=a.id+"_pane",this.parentCellId=a.id,this.pane=dojo.byId(this.paneId),this.chartId=a.id+"_chart",this.legendId=a.id+"_legend",this.options=a.widgetOptions,this.showLegend="true"===this.options.showLegend,this.showLabels="true"===this.options.showLabels;var c,d,e=this._getPaneSize();this.paneWidth=e.w;var f=Math.floor(e.w*this.prefHeight)+"px";if(dojo.style(this.pane,"height",f),b){if(this.values=[],this._labels=[],"Pie Chart"===this.name)for(this.cumulativeValues=0,c=0;c<b.total_count;c++)b.items[c].value=Math.max(0,b.items[c].value),this.cumulativeValues+=Math.floor(b.items[c].value);for(c=0;c<b.total_count;c++){var g,h=b.items[c],i=Math.floor(h.value),j={};if(this.showLabels&&(j.text="true"===this.options.truncLabels?this.truncate(h.displayName,this.options.truncNum||7):h.displayName),"Pie Chart"===this.name){if(i<=0)continue;j.y=i;var k=0;this.cumulativeValues>0&&(k=i/this.cumulativeValues*100),j.tooltip=h.displayName+", "+dojo.number.format(k,{places:2,locale:Sys.CultureInfo.CurrentCulture.name})+"%",g=i,g=g>=1e6?dojo.number.format(g/1e6,{places:1,locale:Sys.CultureInfo.CurrentCulture.name})+"M":dojo.number.format(i,{locale:Sys.CultureInfo.CurrentCulture.name}),j.legend="<label>"+h.displayName+'</label><label style="float:right; margin-left:10px; margin-top:4px;">'+g+"</label>"}else g=i,g=g>=1e6?dojo.number.format(g/1e6,{places:1,locale:Sys.CultureInfo.CurrentCulture.name})+"M":dojo.number.format(i,{locale:Sys.CultureInfo.CurrentCulture.name}),j.value=c+1,j.y=i,j.tooltip=h.displayName+", "+g;this._labels.push(j),this.values.push(i)}b.total_count>0?(a.set("content",this._chartTpl.apply({id:a.id,chartWidth:a.chartWidth,legendDisplay:a.legendDisplay,chartHeight:f})),this._simplyLocalizeAxisSubTitle(a),this._doChart(a,b)):(d=Sage.UI.DataStore.Dashboard.WidgetResources,dojo.style(this.pane,"height","20px"),a.set("content",this._noDataTable.apply({NoDataMessage:d.noDataToDisplay})),this.editor(a))}else d=Sage.UI.DataStore.Dashboard.WidgetResources,dojo.style(this.pane,"height","20px"),a.set("content",this._noDataTable.apply({NoDataMessage:d.noDataToDisplay})),this.editor(a);this._addFooter()},_simplyLocalizeAxisSubTitle:function(a){var b,c,d,e;b=Sage.UI.DataStore.Dashboard.WidgetResources,this.options.yAxisName&&(c=this.options.yAxisName,c=c.replace(/ /g,"_"),b[c]&&(a._dashboardWidget.options.yAxisName=b[c])),this.options.xAxisName&&(d=this.options.xAxisName,d=d.replace(/ /g,"_"),b[d]&&(a._dashboardWidget.options.xAxisName=b[d])),this.options.subtitle&&(e=this.options.subtitle,e=e.replace(/ /g,"_"),b[e]&&(a._dashboardWidget.options.subtitle=b[e]))},_addFooter:function(){var a=c.getLocalization("Sage.UI.Dashboard","WidgetDefinition"),b=["#",this.parentCellId," .dijitTitlePaneContentOuter"].join("");if(this.options.groupname&&this.options.resource){var d=String.format('<div class="dijitTitlePaneTitle" id="{0}" style="border:0;font-weight:normal;">',this.parentCellId+"_footer");"Sage.Entity.Interfaces.IHistory"!==this.options.entity&&this.options.groupname&&this.options.resource&&(d+=String.format('<span style="float:left; margin-top:3px;"><a href="{0}.aspx?modeid=list&gname={1}">{2}</a></span>',this.options.resource,this.options.groupname,a.viewGroupText||"View Group")),d+='<span style="float:right; margin-top:3px;">'+dojo.date.locale.format(new Date,{fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})+"</span>",d+="</div>";var e=dojo.byId(this.parentCellId+"_footer");e?dojo.place(d,e,"replace"):dojo.place(d,dojo.query(b)[0],"last")}},truncate:function(a,b){return a.length>b?a.slice(0,b)+"...":a}})})},"Sage/UI/Dashboard/Dashboard":function(){define(["../TabContainer","dojo/i18n","Sage/UI/Dashboard/DashboardTabController","Sage/UI/Dashboard/DashboardPage","Sage/Utility","Sage/UI/Dialogs","dijit/Menu","dijit/MenuItem","dojo/_base/declare","dojo/i18n!./nls/DashboardTabController","dojo/i18n!./nls/Dashboard"],function(a,b,c,d,e,f,g,h,i){return i("Sage.UI.Dashboard.Dashboard",[a],{controllerWidget:c,_stTableOuter:new Simplate(['<div id="stTable" class="show-tab-table"><table>',"{%= $.content %}",'</table><div class="button-bar alignright"><button data-dojo-type="dijit.form.Button" type="button"',' id="btnSTOk" title="{%= $.buttonOk %}">{%= $.buttonOk %}</button>',"</div></div>"]),_stTableInner:new Simplate(['<tr id="row_{%= $.id %}"><td><button data-dojo-type="dijit.form.Button"','type="button" id="btn_{%= $.id %}" class="btn-show-tab">{%= $.showText %}</button></td>',"<td><span>{%= $.title %}</span></td></tr>"]),_copyNameForm:new Simplate(['<div id="copyNameForm"><table width="100%">','<tr><td>{%= $.titleText %}</td><td><div data-dojo-type="dijit.form.ValidationTextBox" id="txtCopyName"',' regExp="[^<>;]*" value="" required="true" invalidMessage="{%= $.invalidMessage %}"></div></td></tr>','<tr><td colspan="2" align="right"><div class="button-bar"><button data-dojo-type="dijit.form.Button" type="button"',' id="btnCNOK" title="{%= $.buttonOk %}">{%= $.buttonOk %}</button>','<button data-dojo-type="dijit.form.Button" type="button"',' id="btnCNCancel" title="{%= $.buttonCancel %}" >{%= $.buttonCancel %}</button>',"</div></td></tr></table></div>"]),resources:{},addRemovePageContextMenu:function(){for(var a=!0,b=0;b<this._childPages.length;b++)if(!this._childPages[b]._beingDestroyed){var c=dijit.byId("Dashboard_tablist_"+this._childPages[b].id);if(a=!1,!c||"none"!==c.style.display)break;a=!0}a?(this._contextMenu&&this._contextMenu.destroyRecursive(),this._contextMenu=new g({id:this.id+"_ContextMenu",dir:this.dir,targetNodeIds:[this.domNode]}),this._contextMenu.addChild(new h({label:this.newTabText,dir:this.dir,onClick:function(){var a=dijit.byId("Dashboard");a._createPage(!0,a.newTabText)}})),this._contextMenu.addChild(new h({label:this.showTabText,dir:this.dir,onClick:dojo.hitch(this,function(){dijit.byId("Dashboard")._showTabMenu()})})),this.selectShownTab=!0):this._contextMenu&&(this._contextMenu.destroyRecursive(),this.selectShownTab=!1)},postCreate:function(){Sage.UI.WidgetDefinitions||(Sage.UI.WidgetDefinitions={}),this._getUserOptions(),this.subscribe("/ui/dashboard/pageDelete",function(a){this.closeChild(a),this._deletePage(a),this.addRemovePageContextMenu()}),this.inherited(arguments)},postMixInProperties:function(){dojo.mixin(this,b.getLocalization("Sage.UI.Dashboard","Dashboard")),dojo.mixin(this,b.getLocalization("Sage.UI.Dashboard","DashboardTabController")),dojo.mixin(this.resources,b.getLocalization("Sage.UI.Dashboard","WidgetDefinition")),dojo.mixin(this,b.getLocalization("dijit","common")),this.inherited(arguments)},_childPages:[],_createPage:function(a,b){if(a){var c={closable:!0,onClose:function(){return!0},name:b,title:b,family:"System",acceptTypes:["Portlet"],hasResizableColumns:!1,_columns:[],_page:this._childPages.length,_parentId:this.id,permission:!0,_childWidgets:[]},e=new d(c);this._childPages.push(e),this.addChild(this._childPages[this._childPages.length-1]),this.selectChild(this._childPages[this._childPages.length-1]),e.isNew=!0,e._editOptionsMenu()}},_showPage:function(a){for(var b,c=Sage.UI.DataStore.Dashboard.userOptions.hidden,f=c[a],g=!1,h=0;h<this._childPages.length;h++)if(this._childPages[h].title==f){var i=dijit.byId("Dashboard_tablist_"+this._childPages[h].id);if(i){dojo.style(i,"display","block"),g=!0,this.selectShownTab&&(this.selectChild(this._childPages[h]),this._showChild(this._childPages[h]));break}}if(!g){var j=function(){return!0};for(h=0,b=this.info.userPages.length;h<b;h++){for(var k=Sage.Utility.htmlDecode(this.pages[h]["@title"]),l=k;-1!==l.indexOf(" ");)l=l.replace(" ","_");if(l=l.replace(/'/g,"_").replace(/"/g,"_"),k==f){var m;this.pages[h]["@colWidths"]&&(m=this.pages[h]["@colWidths"].split(",").length);var n=this.info.permissions[l];this.pages[h].Columns.Column=e.Convert.toArrayFromObject(this.pages[h].Columns.Column),this._childPages.push(new d({id:l,closable:!0,onClose:j,name:k,title:this.resources[l]||k,family:this.pages[h]["@family"]||"System",nbZones:m||1,acceptTypes:["Portlet"],hasResizableColumns:!1,firstButNotDefault:!1,colWidths:this.pages[h]["@colWidths"],_columns:this.pages[h].Columns.Column,_page:h,_parentId:this.id,permission:n,_childWidgets:[]})),this.pages[h]["@colWidths"]&&(this._childPages[this._childPages.length-1]._colWidths=this.pages[h]["@colWidths"]),this.addChild(this._childPages[this._childPages.length-1]),this.selectShownTab&&this.selectChild(this._childPages[this._childPages.length-1]);break}}}a in c&&(delete c[a],this._updateUserOptions())},_copyPageContent:function(a,b){for(var c=a.Dashboard,e=this._childPages.length,f=b||c["@title"],g=c["@id"];-1!==g.indexOf(" ");)g=g.replace(" ","_");var h;c["@colWidths"]&&(h=c["@colWidths"].split(",").length);var i=!1;b?i=!0:c["@permission"]&&(i=c["@permission"]),this._childPages.push(new d({closable:!0,onClose:function(){return!0},name:f,title:f,family:c["@family"]||"System",nbZones:h||1,acceptTypes:["Portlet"],hasResizableColumns:!1,colWidths:c["@colWidths"],_columns:c.Columns.Column,_page:e,_parentId:this.id,permission:i,_childWidgets:[]})),c["@colWidths"]&&(this._childPages[e]._colWidths=c["@colWidths"]),this.addChild(this._childPages[e]),this._childPages[e]._init(!0),this._childPages[e].copyNotDrawn=!0;var j=Sage.UI.DataStore.Dashboard.userOptions;j.hidden&&g in j.hidden&&(delete j.hidden[g],this._updateUserOptions()),this._childPages[e]._setWidgetsToPage(),this._childPages[e]._save(),this._childPages[e].pageRendered=!0},_copyPage:function(a){var b=new dijit.Dialog({title:this.copyTabText,style:"width:250px"});b.set("content",this._copyNameForm.apply({titleText:this.titleText,buttonOk:this.okButton,buttonCancel:this.buttonCancel,invalidMessage:this.invalidMessage}));var c=function(){dojo.disconnect(f),dojo.disconnect(d),dojo.disconnect(e),b.destroyRecursive()},d=dojo.connect(dijit.byId("btnCNOK"),"onClick",this,function(){var c=dijit.byId("txtCopyName");if(!c.isValid()||!this._isTitleUnique(c.value))return!1;a.pageRendered||(a.copyNotDrawn=!0,a._init());var d=c.value,e=a.copy();this._copyPageContent(e,d),b.hide()}),e=dojo.connect(dijit.byId("btnCNCancel"),"onClick",this,function(){b.hide()}),f=dojo.connect(b,"hide",this,c);b.show()},_createPages:function(){this.pages={};for(var a,b=this.info.userOptions.defaultTab,c=Sage.UI.DataStore.Dashboard.userOptions,f=0,g=function(){return!0},h=0,i=this.info.userPages.length;h<i;h++){var j=dojo.fromJson(this.info.userPages[h]);this.pages[h]=j.Dashboard;for(var k=Sage.Utility.htmlDecode(this.pages[h]["@title"]),l=k;-1!==l.indexOf(" ");)l=l.replace(" ","_");if(l=l.replace(/'/g,"_").replace(/"/g,"_"),!c.hidden||!c.hidden[l]){var m;this.pages[h]["@colWidths"]?m=this.pages[h]["@colWidths"].split(",").length:(this.pages[h]["@colWidths"]=0,m=1);var n=this.info.permissions[l];this.pages[h].Columns.Column=e.Convert.toArrayFromObject(this.pages[h].Columns.Column),this._childPages.push(new d({id:l,closable:!0,onClose:g,name:k,title:this.resources[l]||k,family:this.pages[h]["@family"]||"System",nbZones:m||1,acceptTypes:["Portlet"],hasResizableColumns:!1,firstButNotDefault:0===h&&k!==b,colWidths:this.pages[h]["@colWidths"],_columns:this.pages[h].Columns.Column,_page:h,_parentId:this.id,permission:n,_childWidgets:[]})),this.pages[h]["@colWidths"]&&(this._childPages[f]._colWidths=this.pages[h]["@colWidths"]),this.addChild(this._childPages[f]),k===b&&(a=f),f++}}a?(this._childPages[a].selected=!0,this._childPages[a]._init(),this.selectChild(this._childPages[a])):this._childPages.length>0&&(this._childPages[0].selected=!0,this._childPages[0]._init(),this.selectChild(this._childPages[0])),this.addRemovePageContextMenu()},_deletePage:function(a,b){var c=Sage.UI.DataStore.Dashboard.userOptions;a.title===c.defaultTab&&(c.defaultTab="",b||this._updateUserOptions());var d="SLXGroupBuilder.aspx?method=GetGroupIdFromNameFamilyAndType&name="+a.name+"&family=System&type=36";dojo.xhrGet({url:d,error:dojo.hitch(this,function(a){}),load:dojo.hitch(this,function(a){Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+a,"text",function(){},function(a){})})})},_hidePage:function(a){var b=Sage.UI.DataStore.Dashboard.userOptions;this.closeChild(a),this.selectedChildWidget==a&&this.selectFirstVisible(),b.hidden||(b.hidden={}),b.hidden[a.id]=a._hide(),this._updateUserOptions(),this.addRemovePageContextMenu()},_showTabMenu:function(){var a,b=Sage.UI.DataStore.Dashboard.userOptions.hidden,c=[];if(b&&Sage.Utility.size(b))for(a in b)c.push(this._stTableInner.apply({title:b[a],id:a,buttonCancel:this.buttonCancel,showText:this.showText}));var d=new dijit.Dialog({title:this.showTabText,style:"width:350px"});d.set("content",this._stTableOuter.apply({content:c.join(""),buttonOk:this.buttonOk})),d.show();var e=[];if(b)for(a in b){var f=dijit.byId("btn_"+a);e.push(dojo.connect(f,"onClick",f,function(){var a=dijit.byId("Dashboard"),b=this.id.replace("btn_",""),c=dojo.byId("row_"+b);a._showPage(b),a.addRemovePageContextMenu(),dojo.style(c,"display","none")}))}var g=dojo.connect(dijit.byId("btnSTOk"),"onClick",null,function(){d.hide()}),h=dojo.connect(d,"hide",null,function(){dojo.disconnect(g),dojo.disconnect(h),dojo.forEach(e,dojo.disconnect),d.destroyRecursive()})},_isTitleUnique:function(a,b){var c=!0,d=this._childPages,e="";if(a===this.Dashboard){var g={title:this.warningText,query:this.invalidReservedWordMessage,yesText:this.okButton,style:{width:"300px"}};return f.raiseQueryDialogExt(g),!1}b&&(e=b);for(var h=0;h<d.length;h++)if(d[h].id!==e&&!d[h]._destroyed&&d[h].title===a){c=!1;var i={title:this.warningText,query:this.invalidDuplicateMessage,yesText:this.okButton,style:{width:"300px"}};f.raiseQueryDialogExt(i);break}return c},selectFirstVisible:function(){for(var a=!1,b=0;b<this._childPages.length;b++){var c=dijit.byId("Dashboard_tablist_"+this._childPages[b].id);if(c&&"none"!==c.style.display){a=!0,this.selectChild(this._childPages[b]);break}}if(!a)try{this.selectChild()}catch(a){}},selectChild:function(a){this.inherited(arguments),a._init&&a._init(),a.copyNotDrawn&&(a.copyNotDrawn=!1,a._redrawWidgets())},_getUserOptions:function(){Sage.UI.DataStore.Dashboard?(this.info=Sage.UI.DataStore.Dashboard,this._createPages()):this.subscribe("/ui/dashboard/info",function(a){this.info=a,this._createPages()})},_updateUserOptions:function(){var a=Sage.UI.DataStore.Dashboard.userOptions,b="slxdata.ashx/slx/crm/-/dashboard/useroption?name=Options&category=Dashboard";dojo.xhrPut({url:b,handleAs:"text",postData:dojo.toJson(a),load:function(a){},error:function(a){}})}})})},"Sage/UI/TabContainer":function(){define(["dijit/layout/TabContainer","dojo/_base/declare","dojo/_base/array","./TabController"],function(a,b,c,d){return b("Sage.UI.TabContainer",[a],{_menuItems:{},useMenu:!1,useSlider:!0,controllerWidget:d,addTabMenuItem:function(a,b){var c;this._menuItems[a]||(this._menuItems[a]=[]),c=this._menuItems[a],c.push(b)},getTabMenuItems:function(a){return this._menuItems[a]},destroyDescendants:function(){this.inherited(arguments);var a,b
;for(a in this._menuItems)this._menuItems.hasOwnProperty(a)&&(b=this._menuItems[a],c.forEach(b,function(a){a.destroy()}),b=null);this._menuItems={}}})})},"Sage/UI/TabController":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/query","dijit/layout/ScrollingTabController","dijit/registry","dijit/Menu","dojo/dom-class","dojo/text!./templates/ScrollingTabController.html","dojo/aspect","dijit/popup"],function(a,b,c,d,e,f,g,h,i,j,k){return c("Sage.UI.TabController",[e],{templateString:i,closeButton:!1,tabMenu:null,postCreate:function(){this.inherited(arguments);var b,c;b=this.id+"_Menu",c=f.byId(b),c&&c.destroy(),this.tabMenu=new g({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return h.contains(a,"dijitClosable")&&!h.contains(a,"dijitTabDisabled")}}),this.own(this.tabMenu,j.before(k,"open",a.hitch(this,this.onTabMenuOpen)),j.before(k,"close",a.hitch(this,this.onTabMenuClose))),this.own(this.on("mouseDown",a.hitch(this,this.onTabMouseDown)))},onTabMouseDown:function(a){var b,c;b=d('[role="tab"]',a.target)[0]||a.target,c=f.byId(b.id),this.menuOpenedOn=c},onTabMenuOpen:function(){var a,c,d;a=this.getParent(),c=this.menuOpenedOn&&this.menuOpenedOn.page||a&&a.selectedChildWidget,a&&c&&(d=a.getTabMenuItems(c.id),b.forEach(d,function(a){this.tabMenu.addChild(a)},this))},onTabMenuClose:function(){var a;a=this.tabMenu.getChildren(),b.forEach(a,function(a){this.tabMenu.removeChild(a)},this)}})})},"Sage/UI/Dashboard/DashboardTabController":function(){define(["dijit/layout/ScrollingTabController","dojo/i18n","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dojo/i18n!./nls/DashboardTabController","dojo/i18n!../nls/Boolean","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){h("dijit.layout._TabButton",dijit.layout._ScrollingTabControllerButton,{baseClass:"dijitTab",postMixInProperties:function(){dojo.mixin(this,b.getLocalization("Sage.UI.Dashboard","DashboardTabController")),dojo.mixin(this,b.getLocalization("Sage.UI","Boolean"))},postCreate:function(){this.inherited(arguments),dojo.setSelectable(this.containerNode,!1)},_setCloseButtonAttr:function(a){var f=b.getLocalization("dijit","common");if(a){this.closeNode&&dojo.attr(this.closeNode,"title",f.itemClose),this._closeMenu=new c({dir:this.dir,targetNodeIds:[this.domNode]}),this._closeMenu.addChild(new d({label:this.newTabText,dir:this.dir,id:this._closeMenu.id+"_New",onClick:function(){var a=dijit.byId("Dashboard");a._createPage(!0,a.newTabText)}})),this._closeMenu.addChild(new d({label:this.addContentText,dir:this.dir,id:this._closeMenu.id+"_AddContent",onClick:dojo.hitch(this,function(){var a=this.id.replace("Dashboard_tablist_","");dijit.byId(a)._newWidgetMenu()})})),this._closeMenu.addChild(new d({label:this.editOptionsText,dir:this.dir,id:this._closeMenu.id+"_Edit",onClick:dojo.hitch(this,function(){var a=this.id.replace("Dashboard_tablist_","");dijit.byId(a)._editOptionsMenu()})})),this._closeMenu.addChild(new d({label:this.shareTabText,dir:this.dir,id:this._closeMenu.id+"_Share",onClick:dojo.hitch(this,function(){var a=this.id.replace("Dashboard_tablist_",""),b=dijit.byId(a);b._releaseManager.page=b,b._releaseManager.share()})})),this._closeMenu.addChild(new d({label:this.hideTabText,dir:this.dir,id:this._closeMenu.id+"_Hide",onClick:dojo.hitch(this,function(){var a=this.id.replace("Dashboard_tablist_",""),b=dijit.byId(a);dijit.byId("Dashboard")._hidePage(b)})})),this._closeMenu.addChild(new d({label:this.copyTabText,dir:this.dir,id:this._closeMenu.id+"_Copy",onClick:dojo.hitch(this,function(){var a=this.id.replace("Dashboard_tablist_",""),b=dijit.byId(a);dijit.byId("Dashboard")._copyPage(b)})})),this._closeMenu.addChild(new d({label:this.showTabText,dir:this.dir,id:this._closeMenu.id+"_Show",onClick:dojo.hitch(this,function(){dijit.byId("Dashboard")._showTabMenu()})}));var g=this.id.replace("Dashboard_tablist_","");dijit.byId(g).permission&&this._closeMenu.addChild(new d({label:this.deleteTabText,dir:this.dir,id:this._closeMenu.id+"_Delete",onClick:dojo.hitch(this,function(){var a=this.id.replace("Dashboard_tablist_",""),b=dijit.byId(a),c=function(a){if(a)if(b.permission)dojo.publish("/ui/dashboard/pageDelete",[b]);else{var c={title:b.resources.errorText,query:b.resources.permissionErrorText,yesText:b.resources.okButton,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(c)}},d={title:this.deleteTabText,query:this.deleteTabConfirmText,callbackFn:c,yesText:this.yesText,noText:this.noText,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(d)})})),this._closeMenu.addChild(new e),this._closeMenu.addChild(new d({label:this.helpText,dir:this.dir,id:this._closeMenu.id+"_Help",onClick:dojo.hitch(this,function(){Sage.Utility.openHelp("Working_with_the_Dashboard","MCWebHelp")})}))}else this._closeMenu&&(this._closeMenu.destroyRecursive(),delete this._closeMenu)},_setLabelAttr:function(a){this.inherited(arguments),!1!==this.showLabel||this.params.title||(this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||""))},destroy:function(){this._closeMenu&&(this._closeMenu.destroyRecursive(),delete this._closeMenu),this.inherited(arguments)}});return h("Sage.UI.Dashboard.DashboardTabController",a,{tabPosition:"top",buttonWidget:"dijit.layout._TabButton",addChild:function(){this.inherited(arguments),this.perfomedHeightResizing||(this.perfomedHeightResizing=!0,dojo.style(this.containerNode,"height","37px"),dojo.style(this.containerNode,"top","4px"))},_rectifyRtlTabList:function(){if(!(0>=this.tabPosition.indexOf("-h"))&&this.pane2button){var a=0;for(var b in this.pane2button){var c=this.pane2button[b].innerDiv.scrollWidth;a=Math.max(a,c)}for(b in this.pane2button)this.pane2button[b].innerDiv.style.width=a+"px"}}})})},"Sage/UI/Dashboard/DashboardPage":function(){define(["dojo/i18n","Sage/UI/GridContainer","Sage/UI/Dialogs","Sage/UI/Dashboard/DashboardWidgetCell","Sage/Utility","dijit/form/ValidationTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/dom-construct","Sage/Array","dojo/i18n!./nls/DashboardTabController","dojo/i18n!./nls/WidgetDefinition","dojo/_base/declare","dojo/_base/lang","Sage/UI/Controls/Grid","dojo/store/Memory"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=l("Sage.UI.Persistance.DashboardColumn",null,{constructor:function(a){dojo.safeMixin(this,a)}});return l("Sage.UI.Dashboard.DashboardPage",b,{_nwTableOuter:new Simplate(['<div id="nwTable" class="new-widget-table"><div style="height:400px; overflow-y:auto;"><table width="100%">{%= $.content %}</table></div>','<div align="right"><button data-dojo-type="dijit.form.Button"',' type="button" id="btnAddContentClose" class="ok-button" title="{%= $.buttonCancel %}" align="right" style="margin-top:10px;">{%= $.buttonCancel %}</button>',"</div></div>"]),_nwTableInner:new Simplate(["<tr><td><b>{%= $.key %}</b><br />{%= $.value %}</td></tr>",'<tr><td><button data-dojo-type="dijit.form.Button"','type="button" id="{%= $.btnId %}" class="btn-add-new">{%= $.addText %}</button></td></tr>',"<tr><td><hr /></td></tr>"]),style:"z-index:500;",_eoTable:new Simplate(['<div id="eoTable" class="edit-options-table"><table width="100%">','<tr><td>{%= $.titleText %}</td><td><div data-dojo-type="dijit.form.ValidationTextBox" id="txtEO"',' regExp="[^-<>:;@#\\$!%\\^&\\*\\(\\)\\+=\\`\\[{},/?\\.~]*" value="{%= $.title %}" invalidMessage="{%= $.invalidMessage %}"></div></td></tr>',"<tr><td colspan=2>{%= $.chooseTemplateText %}</td></tr>",'<tr><td><input type="radio" id="rdoEO0" data-dojo-type="dijit.form.RadioButton"',' value="one_column" name="radioEO" /></td><td><label for="rdoEO0">{%= $.oneColumnText %}',"</label></td></tr>",'<tr><td><input type="radio" id="rdoEO1" data-dojo-type="dijit.form.RadioButton"',' value="two_even" name="radioEO" /></td><td><label for="rdoEO1">{%= $.twoColumnText %}',"</label></td></tr>",'<tr><td><input type="radio" id="rdoEO2" data-dojo-type="dijit.form.RadioButton"',' value="fat_left" name="radioEO" /></td><td><label for="rdoEO2">{%= $.fatLeftText %}',"</label></td></tr>",'<tr><td><input type="radio" id="rdoEO3" data-dojo-type="dijit.form.RadioButton"',' value="fat_right" name="radioEO" /></td><td><label for="rdoEO3">{%= $.fatRightText %}',"</label></td></tr>",'<tr><td><input type="checkbox" id="chkMD" data-dojo-type="dijit.form.CheckBox"',' value="make_def"/></td><td><label for="chkMD">{%= $.makeDefaultText %}</label></td></tr>','<tr><td colspan=2 align="right"><button data-dojo-type="dijit.form.Button" type="button"',' id="btnEOK" class="ok-button" title="{%= $.buttonOk %}" >{%= $.buttonOk %}</button>','<button data-dojo-type="dijit.form.Button" type="button"',' id="btnEOCancel" class="cancel-button" title="{%= $.buttonCancel %}">{%= $.buttonCancel %}</button>',"</td></tr></table></div>"]),_raisePermissionInvalidMessage:function(){var a=this,b=function(b){if(b){dijit.byId("Dashboard")._copyPage(a)}},c={title:this.resources.errorText,query:[this.resources.permissionErrorText,this.resources.permissionErrorPerformCopyText],yesText:this.resources.yesText,noText:this.resources.noText,callbackFn:b,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(c)},postCreate:function(){this.inherited(arguments),this.subscribe("/ui/dashboard/pageSave",function(a){"string"==typeof a&&(a=parseInt(a,10)),a===this._page&&(this.permission?this._save():this._raisePermissionInvalidMessage())}),this.subscribe("/dojox/mdnd/drop","_dropped")},resources:{},postMixInProperties:function(){dojo.mixin(this.resources,a.getLocalization("Sage.UI.Dashboard","DashboardTabController")),dojo.mixin(this.resources,a.getLocalization("dijit","common")),this._releaseManager.page=this,this.inherited(arguments)},_createChild:function(a,b,c,e){for(var f=a.options.title||a["@name"],g=f;g.indexOf(" ")>=0;)g=g.replace(" ","_");for(;g.indexOf(".")>=0;)g=g.replace(".","_");for(;g.indexOf("'")>=0;)g=g.replace("'","_");return k[g]&&(f=k[g]),this._childWidgets.push(new d({dndType:"Portlet",title:f,resizeChildren:!1,column:b,index:c,_page:e,_parentId:this.id,preventRender:this.toBeHidden,widgetOptions:a.options})),this._childWidgets[this._childWidgets.length-1]},_addNewWidget:function(a){if(this.permission){var b=this._childWidgets[this._childWidgets.length-1],c=b&&b.column?b.column:0,e=b&&b.index?b.index+1:0,f=new d({dndType:"Portlet",isNew:!0,title:this.resources[a]||a,resizeChildren:!1,column:c,index:e,_page:this._page,_parentId:this.id,widgetOptions:{name:a,title:a}});this._childWidgets.push(f),this.addChild(this._childWidgets[this._childWidgets.length-1],c,e),this._save()}else this._raisePermissionInvalidMessage()},_editOptionsMenu:function(){var a=Sage.UI.DataStore.Dashboard.userOptions,b=!1,c=!1,d=!1,e=!1;switch(this.colWidths.toString()){case"50,50":c=!0;break;case"67,33":d=!0;break;case"33,67":e=!0;break;default:b=!0}var f=new dijit.Dialog({title:this.resources.editOptionsText,style:"width:350px"});f.set("content",this._eoTable.apply({title:this.get("title"),buttonOk:this.resources.buttonOk,buttonCancel:this.resources.buttonCancel,addText:this.resources.addText,titleText:this.resources.titleText,chooseTemplateText:this.resources.chooseTemplateText,oneColumnText:this.resources.oneColumnText,twoColumnText:this.resources.twoColumnText,fatLeftText:this.resources.fatLeftText,fatRightText:this.resources.fatRightText,makeDefaultText:this.resources.makeDefaultText,invalidMessage:this.resources.invalidMessage})),dijit.byId("rdoEO0").set("checked",b),dijit.byId("rdoEO1").set("checked",c),dijit.byId("rdoEO2").set("checked",d),dijit.byId("rdoEO3").set("checked",e),a.defaultTab==this.title&&dijit.byId("chkMD").set("checked",!0),f.show();var g=function(){if(this.isNew){var a=dijit.byId("Dashboard");a.closeChild(this),a.selectFirstVisible()}dojo.disconnect(h),dojo.disconnect(j),dojo.disconnect(i),f.destroyRecursive()},h=dojo.connect(f,"hide",this,g),i=dojo.connect(dijit.byId("btnEOCancel"),"onClick",this,function(){f.hide()}),j=dojo.connect(dijit.byId("btnEOK"),"onClick",this,function(){if(this.permission){var a=dijit.byId("txtEO");if(!a.isValid()||!this.getParent()._isTitleUnique(a.value,this.id))return!1;var b={};b.ttl=a.value,b.one_column=dijit.byId("rdoEO0").get("value"),b.even_split=dijit.byId("rdoEO1").get("value"),b.fat_left=dijit.byId("rdoEO2").get("value"),b.fat_right=dijit.byId("rdoEO3").get("value"),b.make_def=dijit.byId("chkMD").get("value"),this.isNew?this.isNew=!1:b.oldName=this.name,this._setOptions(b),this._save(),this._redrawWidgets(),this.getParent().addRemovePageContextMenu(),f.hide()}else f.hide(),this._raisePermissionInvalidMessage()})},_redrawWidgets:function(){this._childWidgets&&dojo.forEach(this._childWidgets,function(a){a.refresh(!0)})},_releaseManager:{share:function(){if(this.lookupOptions.callerId=this.page.id,!this.dialog){this.dialog=new dijit.Dialog({id:this.page.id+"-shareDialog",style:"width: 405px",title:this.page.resources.shareTabText});dojo.connect(this.dialog,"hide",this,this.fnHide);dojo.mixin(this.dialog,new g),this.dialog.createHelpIconByTopic("Working_with_the_Dashboard")}this.grid&&this.grid.destroyRecursive(),this.grid=new n({id:"shareDialog-grid-"+this.page.id,columns:[{field:"$key",editable:!1,hidden:!0,id:"id",formatter:function(a,b){var c=[b.Id,"-row"].join("");return["<div id=",c," >",c,"</ div>"].join("")}},{field:"Text",label:this.page.resources.releasedToText,width:"185px"},{field:"Type",label:this.page.resources.typeText,width:"175px"}],columnHiding:!0,columnResizing:!0,selectionMode:"single",rowSelection:!0,store:new o({data:[]})});dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/dashboard/release",preventCache:!0,handleAs:"json",content:{name:this.page.name,family:this.page.family},load:dojo.hitch(this,this.releaseFetchSuccess),error:function(a){}})},releaseFetchSuccess:function(a,b){this.gridStore=new o({data:a,idProperty:"Id"}),this.dialog.set("content",this.dialogContent.apply({id:this.dialog.id,pageId:this.page.id,closeText:this.page.resources.closeText,everyoneText:this.page.resources.everyoneText,headerText:this.page.resources.shareTabText})),this.initTools(),this.dialog.show(),dojo.place(this.grid.domNode,this.dialog.id+"-grid"),this.grid.setStore(this.gridStore),this.grid.resize(),dojo.style(this.dialog.id,"top","130px"),dojo.style(this.dialog.id+"-grid","height","200px")},fnHide:function(){this.release()},initTools:function(){var a=this.dialog.id+"_delBtn",b=h.create("img",{id:a,alt:this.page.resources.deleteText,title:this.page.resources.deleteText,src:"images/icons/Delete_16x16.png",class:"tws-header-icon"});dojo.place(b,dojo.query(["#",this.dialog.id,"-toolbar"].join(""))[0],"last"),dojo.connect(dojo.byId(a),"onclick",this,this.deleteSelected),a=this.dialog.id+"_lookupBtn",b=h.create("img",{id:a,alt:this.page.resources.addText,title:this.page.resources.addText,src:"images/icons/Plus_16x16.gif",class:"tws-header-icon"}),dojo.place(b,dojo.query(["#",this.dialog.id,"-toolbar"].join(""))[0],"last"),dojo.connect(dojo.byId(a),"onclick",this,this.startLookup)},deleteSelected:function(){var a=this.grid.getSelectedRowData();if(a.length){for(var b=this.grid.store.data,c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(a[c].Id===b[d].Id){b.splice(d,1);break}this.grid.refresh()}},page:null,grid:null,gridStore:null,dialog:null,dialogContent:new Simplate(['<div width="560px">','<div style="width:100%;" align="right" id="{%= $.id %}-toolbar"></div>','<div id="{%= $.id %}-grid" ></div>','<div style="width:100%;" align="right" ><button data-dojo-type="dijit.form.Button" type="button" style="margin-top:10px;" ',"data-dojo-props=\"onClick:function(){dijit.byId('{%= $.pageId %}')._releaseManager.everyoneClick();}\"",">{%= $.everyoneText %}</button>",'<button data-dojo-type="dijit.form.Button" type="button" style="margin-left:10px; margin-top:10px;" ',"data-dojo-props=\"onClick:function(){dijit.byId('{%= $.pageId %}')._releaseManager.dialog.hide();}\"",">{%= $.closeText %}</button></div>","</div> "]),lookup:null,everyoneClick:function(){var a=[{$key:"SYST00000001",OwnerDescription:this.page.resources.everyoneText}];this.lookupOptions.doSelected(a)},release:function(){for(var a="",b=this.gridStore.data,c=0;c<b.length;c++)b[c]&&(a+=b[c].Id+",");var d=dojo.string.substitute("SLXGroupBuilder.aspx?method=GetGroupIdFromNameFamilyAndType&name=${0}&family=System&type=36",[encodeURIComponent(this.page.name)]);dojo.xhrGet({url:d,error:dojo.hitch(this,function(a){}),load:dojo.hitch(this,function(b){d="SLXGroupBuilder.aspx?method=ReleaseGroup&gid="+b+"&toids="+a,dojo.xhrGet({url:d,error:dojo.hitch(this,function(a){}),load:dojo.hitch(this,function(a){})})})})},startLookup:function(){this.lookup||(this.lookup=new Sage.UI.SDataLookup(this.lookupOptions),this.lookup.dialogTitle=this.page.resources.addLookup,this.lookup.dialogButtonText=this.page.resources.okButton,this.lookup.structure[0].name=this.page.resources.typeText,this.lookup.structure[1].name=this.page.resources.descriptionText),this.lookup.showLookup()},lookupOptions:{callerId:null,displayMode:5,structure:[{label:"Type",field:"Type",sortable:!0,width:"150px",editable:!1,styles:null,propertyType:"Sage.Entity.Interfaces.OwnerType",excludeFromFilters:!1,useAsResult:!1},{label:"Owner Description",field:"OwnerDescription",sortable:!0,width:"500px",editable:!1,styles:null,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1}],gridOptions:{},storeOptions:{resourceKind:"owners"},dialogTitle:"",dialogButtonText:"",id:"MainContent_AccountDetails_Owner_Grid",modality:"modal",doSelected:function(a){for(var b=dijit.byId(this.callerId)._releaseManager,c=0,d=a.length;c<d;c++)b.grid.addItem({Id:a[c].$key,Text:a[c].OwnerDescription,Type:a[c].Type});b.grid.refresh(),b.lookup&&b.lookup.lookupDialog&&b.lookup.lookupDialog.hide()}}},_joinColumnWidgets:function(){if(2===this.nbZones){for(var a=this._childWidgets.length-1;a>=0;a--)1===this._childWidgets[a].column&&(this.removeChild(this._childWidgets[a]),this._childWidgets[a].column=0,this._childWidgets[a].index+=this._childWidgets.length,this.addChild(this._childWidgets[a],0,this._childWidgets[a].index));this._deleteColumn(1)}},_setOptions:function(a){var b=Sage.UI.DataStore.Dashboard.userOptions;if(a.ttl){this.title=a.ttl,this.set("name",a.ttl);var c=dijit.byId("Dashboard_tablist_"+this.id);c&&c._setLabelAttr(a.ttl)}if(a.one_column&&(this._joinColumnWidgets(),this.setColumns(1),this.set("colWidths","100"),dojo.publish("ui/dashboard/columnResize")),a.even_split&&(this.setColumns(2),this.set("colWidths","50,50"),dojo.publish("/ui/dashboard/columnResize")),a.fat_left&&(this.setColumns(2),this.set("colWidths","67,33"),dojo.publish("/ui/dashboard/columnResize")),a.fat_right&&(this.setColumns(2),this.set("colWidths","33,67"),dojo.publish("/ui/dashboard/columnResize")),a.make_def){var d=dijit.byId(this._parentId);this.title&&(b.defaultTab=this.title,d._updateUserOptions())}a.oldName?this.oldName=a.oldName:this.oldName=""},_newWidgetMenu:function(){var a=new dijit.Dialog({title:this.resources.addContentText,style:"width:365px;"});dojo.mixin(a,new g);var b=Sage.UI.DataStore.Dashboard.widgetsList,c=[];this._nwListeners=[];for(var d in b)if(b.hasOwnProperty(d)&&"Default"!=d){var e=d.replace(" ","_");c.push(this._nwTableInner.apply({btnId:e+"_label",key:k[e]||d,value:k[e+"_Description"]||b[d],addText:this.resources.addText}))}var f=this._nwTableOuter.apply({content:c.join(""),buttonCancel:this.resources.buttonCancel});a.createHelpIconByTopic("Introducing_Widgets"),a.set("content",f),a.show();for(var h=function(){dojo.forEach(this._nwListeners,dojo.disconnect),dojo.disconnect(i),dojo.disconnect(j),setTimeout(function(a){return function(){a.destroyDescendants(),a.destroy(!1)}}(a),1)},i=dojo.connect(a,"hide",this,h),j=dojo.connect(dijit.byId("btnAddContentClose"),"onClick",this,function(){a.hide()}),l=dijit.findWidgets(dojo.byId("nwTable")),m=0,n=l.length;m<n;m++)if("btnAddContentClose"!=l[m].id){var o=dojo.hitch(this,this._addNewClick,a,l[m].id);this._nwListeners.push(dojo.connect(l[m],"onClick",null,o))}},_addNewClick:function(a,b,c){var d=b.replace("_label","").replace("_"," ");a.hide(),this._addNewWidget(d)},_init:function(a){if(this.pageRendered){if(this.firstButNotDefault){for(var b=0,c=this._childWidgets.length;b<c;b++)this._childWidgets[b]._redrawCharts();this.firstButNotDefault=!1}}else a||setTimeout(m.hitch(this,function(){this._setWidgetsToPage(),this.pageRendered=!0}),5)},_setWidgetsToPage:function(){var a=this._numberOfWidgets(),b=this.getChildren();if(void 0!==this._columns&&void 0!==b&&b.length!==a){var c;for(c=0;c<this.nbZones;c++)if(this._columns[c]){this._columns[c].Widgets.Widget=e.Convert.toArrayFromObject(this._columns[c].Widgets.Widget);var d,f=this._columns[c].Widgets.Widget.length;for(d=0;d<f;d++)this._columns[c].Widgets.Widget[d]&&this.addChild(this._createChild(this._columns[c].Widgets.Widget[d],c,d,this._page),c,d)}}},_numberOfWidgets:function(){var a=0;if(this._columns){var b,c=this._columns.length;for(b=0;b<c;b++){var d=this._columns[b];d&&(d.Widgets.Widget=e.Convert.toArrayFromObject(d.Widgets.Widget),a+=d.Widgets.Widget.length)}}return a},_dropped:function(a,b,c){var d=dijit.byId(a.id);if(this._page===d._page){var e=b.node.cellIndex;d._setColumn(e),d._setIndex(c),dojo.publish("/ui/widget/dropped",[a.id,d._page,e,c]),this.permission?this._save():this._raisePermissionInvalidMessage()}},_hide:function(){return this.title},copy:function(){var a=this._stringifyColWidths();return this._prepForSave({"@name":this.name,"@title":this.name,"@id":this.id,"@family":this.family||"System","@permission":this.permission,"@colWidths":a,Columns:{Column:[]}})},_contextSave:function(){this.pageRendered&&this._save()},_stringifyColWidths:function(){var a=this.colWidths;return a?"string"==typeof a?a:a.join(","):a},_prepForSave:function(a){var b,c={};for(b=0;b<this.nbZones;b++)c[b]=new p({Widgets:{Widget:[]}});var d,e=this._childWidgets.length;for(d=0;d<e;d++){var f=this._childWidgets[d].column,g=this._childWidgets[d].widgetOptions,h={index:this._childWidgets[d].index,"@name":g.name,"@family":g.family||"System",options:g};c[f].Widgets.Widget.placeByAttr(h,"index")}var i,j=Sage.Utility.size(c);for(i=0;i<j;i++)a.Columns.Column.push(c[i]);var k={Dashboard:{}};return Sage.Utility.mixOwn(k.Dashboard,a),k},_save:function(){var a=this._stringifyColWidths(),b=this._prepForSave({"@name":this.name,"@title":this.name,"@id":this.id,"@family":this.family||"System","@colWidths":a,Columns:{Column:[]}}),c=dojo.toJson(b);this.oldName||(this.oldName="");var d=dojo.string.substitute("slxdata.ashx/slx/crm/-/dashboard/page?name=${0}&family=${1}&oldName=${2}",[encodeURIComponent(this.name),encodeURIComponent(this.family),encodeURIComponent(this.oldName)]);dojo.xhrPost({url:d,handleAs:"text",postData:c,load:function(a){},error:function(a){}})}})})},"Sage/UI/GridContainer":function(){define(["dojox/layout/GridContainer","dojo/_base/declare"],function(a,b){return b("Sage.UI.GridContainer",a,{_updateColumnsWidth:function(a){if(a)this.inherited(arguments);else{var b=[];b.push(this._dragManager),b.callee=arguments.callee,this.inherited(b)}}})})},"Sage/UI/Dashboard/DashboardWidgetCell":function(){define(["dojo/i18n","dojo/i18n!./nls/DashboardWidgetCell","Sage/UI/WidgetEditor","Sage/UI/Dashboard/DashboardWidget","dojox/data/dom","dojox/widget/Portlet","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.UI.Dashboard.DashboardWidgetCell",[f],{onClose:function(a){var b=dijit.byId(this._parentId);b._childWidgets.removeByAttr("id",this.id),dojo.publish("/ui/dashboard/pageSave",[b._page]),this.inherited(arguments)},_onShow:function(){this.inherited(arguments),this.redrawOnShow&&(this.redrawOnShow=!1,this.refresh(!0))},onHide:function(){this.redrawOnShow=!0,this.inherited(arguments)},onDownloadEnd:function(a){if(a)for(var b=a.documentElement,c=0,d=b.childNodes.length;c<d;c++)if("Content"===b.childNodes[c].tagName){var f=e.textContent(b.childNodes[c]);Sage.UI.WidgetDefinitions[this.widgetOptions.name]=dojo.fromJson(f),this.widgetDefined=!0,dojo.publish("/ui/widget/defined"),this._widgetInit()}},postMixInProperties:function(){dojo.mixin(this,a.getLocalization("Sage.UI.Dashboard","DashboardWidgetCell")),this._page>=0&&(this.preload=!0),this.href="slxdata.ashx/slx/crm/-/dashboard/widget",this.ioArgs={handleAs:"xml",content:{name:this.widgetOptions.name,family:this.widgetOptions.family||"system"}},this._drawLegend(),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.subscribe("/ui/widget/dropped",function(a,b,c,d){a!==this.id&&b===this._page&&c===this.column&&(d>this.index||this._indexUp())}),this.connect(this.containerNode,"onmousedown",function(a){return!dojo.hasClass(a.target,"dojoxGridScrollbox")||(dojo.stopEvent(a),!1)}),this.arrowNode.title=this.minimizeTooltipText},refresh:function(a){if(a){var b=this._dashboardWidget;b&&(dojo.disconnect(b._winResize),dojo.unsubscribe(b.dropSub)),this.destroyDescendants(),this._removeIcons()}this.inherited(arguments),this._drawLegend()},_drawLegend:function(){"true"===this.widgetOptions.showLegend?(this.chartWidth="67",this.legendDisplay="block"):(this.chartWidth="100",this.legendDisplay="none")},_redrawCharts:function(){this._dashboardWidget&&this._dashboardWidget.definition&&"Sage.UI.Dashboard.ChartingWidget"===this._dashboardWidget.definition.declaredClass&&this.refresh(!0)},_createIcon:function(a,b,c){var d="";"dojoxPortletSettingsIcon"===a?d=this.settingsTooltipText:"dojoxCloseNode"===a&&(d=this.closeTooltipText),this._tbarIcons||(this._tbarIcons=[]);var e=dojo.create("div",{class:"dojoxPortletIcon "+a,waiRole:"presentation",title:d});if(this.isNew)"dojoxPortletSettingsIcon"===a||this._tbarIcons.length<1?dojo.place(e,this.arrowNode,"before"):dojo.place(e,this._tbarIcons[0],"before");else if(1==this._tbarIcons.length&&"dojoxPortletSettingsIcon"===a)try{dojo.place(e,this._tbarIcons[0],"replace")}catch(a){dojo.place(e,this.arrowNode,"before")}else dojo.place(e,this.arrowNode,"before");return b&&(this.iconMouseOverEvent=this.connect(e,"onmouseover",function(){dojo.addClass(e,b)}),this.iconMouseOutEvent=this.connect(e,"onmouseout",function(){dojo.removeClass(e,b)})),"dojoxPortletSettingsIcon"===a?(1==this._tbarIcons.length?this._tbarIcons[0]=e:this._tbarIcons.push(e),this.iconClickEvent=this.connect(e,"onclick",c)):this.connect(e,"onclick",c),e},_removeIcons:function(){this.iconClickEvent&&this.disconnect(this.iconClickEvent),this.iconMouseOverEvent&&this.disconnect(this.iconMouseOverEvent),this.iconMouseOutEvent&&this.disconnect(this.iconMouseOutEvent),this._tbarIcons.length>0&&dojo.empty(this._tbarIcons[0])},_editorAdded:function(){var a=this.getChildren();this._placeSettingsWidgets(),dojo.forEach(a,function(a){try{a.started||a._started||a.startup()}catch(a){}})},_load:function(){if(!this.preventRender)if(this._setContent(this.onDownloadStart(),!0),Sage.UI.WidgetDefinitions[this.widgetOptions.name]||this.requestPending)this.requestPending?this._waitForDefinition():(this.widgetDefined=!0,this._widgetInit());else{this.requestPending=!0;var a=this,b={preventCache:!1,url:this.href};dojo.isObject(this.ioArgs)&&dojo.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(b);c.addCallback(function(b){try{a._isDownloaded=!0,a.requestPending=!1,a._setContent(a.processingData||"",!0),a.onDownloadEnd(b)}catch(b){a._onError("Content",b)}delete a._xhrDfd}),c.addErrback(function(b){return c.canceled||a._onError("Download",b),delete a._xhrDfd,b}),delete this._hrefChanged}},_setColumn:function(a){this.column=a},_setIndex:function(a){this.index=a},_indexUp:function(){this.index+=1},_waitForDefinition:function(){this.subscription=this.subscribe("/ui/widget/defined",this,function(){this.widgetDefined=!0,this._widgetInit()})},_widgetInit:function(){this.widgetDefined&&!this._Widget&&(this._dashboardWidget=new d({options:this.widgetOptions,parentCell:this}))}})})},"Sage/UI/WidgetEditor":function(){define(["dojo/data/ItemFileWriteStore","dojox/widget/Portlet","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/declare","dojo/i18n!./Dashboard/nls/WidgetDefinition","dojo/dom-style","dojo/on","dojo/_base/lang","dojo/string","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry"],function(a,b,c,d,e,f,g,h,i,j,k){return d("Sage.UI.WidgetEditor",[dojox.widget.PortletDialogSettings],{_grpUrl:{replace:"where",start:0,count:300,domain:"system",kind:"groups",include:null,service:Sage.Data.SDataServiceRegistry.getSDataService("system"),entityName:null,where:"upper(family) eq upper('${0}')",select:"name,displayName",orderBy:"name",format:"json",store:null},_dimUrl:{replace:"kind",start:0,count:300,domain:"metadata",kind:"entities('${0}')/filters",include:null,service:Sage.Data.SDataServiceRegistry.getSDataService("metadata"),entityName:null,where:"analyticsAvailable and filterType ne 'analyticsMetric'",select:"filterName,displayName,analyticsDescription",format:"json",orderBy:"filterName",store:null},_metUrl:{replace:"kind",start:0,count:300,domain:"metadata",kind:"entities('${0}')/filters",include:null,service:Sage.Data.SDataServiceRegistry.getSDataService("metadata"),entityName:null,where:"analyticsAvailable and filterType eq 'analyticsMetric'",select:"filterName,displayName,analyticsDescription",format:"json",orderBy:"filterName",store:null},_entityUrl:{replace:null,start:0,count:300,domain:"metadata",kind:"entities",include:"filters",service:Sage.Data.SDataServiceRegistry.getSDataService("metadata"),entityName:null,where:"filters.analyticsAvailable eq true and filters.filterType eq 'analyticsMetric'",select:"name,displayName,tableName",format:"json",orderBy:"$descriptor",store:null},_addEnt:function(a){return"Sage.Entity.Interfaces.I"+a},_remEnt:function(a){return a.replace("Sage.Entity.Interfaces.I","")},_remAmp:function(a){return"&"===a[a.length-1]?a.slice(0,-1):a},_pushEnt:function(a){this._entStr=i.substitute("entity=${0}&",[encodeURIComponent(a)])},_pushGrp:function(a){this._grpStr=i.substitute("groupname=${0}&",[encodeURIComponent(a)])},_pushDim:function(a){this._dimStr=i.substitute("dimension=${0}&",[encodeURIComponent(a)])},_pushMet:function(a){this._metStr=i.substitute("metric=${0}&",[encodeURIComponent(a)])},_pushLim:function(a){this._limStr=i.substitute("limit=${0}&",[encodeURIComponent(a)])},_pushOth:function(a){this._othStr=i.substitute("combineother=${0}",[encodeURIComponent(a)])},_checkHydrate:function(){var a=this.portlet.widgetOptions;if(a.groupname&&this._grpField){this._originalGroup&&(a.groupname=this._originalGroup);var b=this._grpField;b.store.fetch({query:{name:a.groupname},onComplete:function(a,c){a.length>0&&b.set("value",b.store.getValue(a[0],"$descriptor"))},queryOptions:{deep:!0}}),this._originalGroup=a.groupname}if(a.dimension&&this._dimField){this._originalDimension&&(a.dimension=this._originalDimension);var c=this._dimField;c.store.fetch({query:{filterName:a.dimension},onComplete:function(a,b){if(a.length>0){var d=c.store.getValue(a[0],"$descriptor");c.set("value",d)}},queryOptions:{deep:!0}}),this._originalDimension=a.dimension}if(a.metric&&this._metField){this._originalMetric&&(a.metric=this._originalMetric);var d=this._metField;d.store.fetch({query:{filterName:a.metric},onComplete:function(a,b){if(a.length>0){var c=d.store.getValue(a[0],"$descriptor");d.set("value",c)}},queryOptions:{deep:!0}}),this._originalMetric=a.metric}this._hydrateChecked=!0},_setFields:function(a){switch(a.id){case this.portlet.id+"_ttlField":this._ttlField=a;break;case this.portlet.id+"_subField":this._subField=a;break;case this.portlet.id+"_entCombo":this._entField=a,g.once(this._entField._buttonNode,"click",h.hitch(this,function(){var a=dojo.byId(this.portlet.id+"_loading");f.set(a,"display","block"),this._entField.set("store",this._entityUrl.store),this._entityUrl.store._arrayOfAllItems.length>0&&(f.set(a,"display","none"),this._entField.loadAndOpenDropDown(),this._entField.focus())}));break;case this.portlet.id+"_grpCombo":this._grpField=a;break
;case this.portlet.id+"_dimCombo":this._dimField=a;break;case this.portlet.id+"_metCombo":this._metField=a;break;case this.portlet.id+"_goalField":this._goalField=a;break;case this.portlet.id+"_xField":this._xField=a;break;case this.portlet.id+"_yField":this._yField=a;break;case this.portlet.id+"_numberMaximum":this._numberMaximum=a,this._numberMaximum.constraints.min=1;break;case this.portlet.id+"_rdoOthY":this._rdoOthY=a;break;case this.portlet.id+"_rdoOthN":this._rdoOthN=a;break;case this.portlet.id+"_rdoLegY":this._rdoLegY=a;break;case this.portlet.id+"_rdoLegN":this._rdoLegN=a;break;case this.portlet.id+"_rdoLabY":this._rdoLabY=a;break;case this.portlet.id+"_rdoLabN":this._rdoLabN=a;break;case this.portlet.id+"_rdoTruY":this._rdoTruY=a;break;case this.portlet.id+"_rdoTruN":this._rdoTruN=a;break;case this.portlet.id+"_truncField":this._truncField=a,this._truncField.constraints.min=1;break;case this.portlet.id+"_btnOK":this._btnOK=a;break;case this.portlet.id+"_btnCancel":this._btnCancel=a,this._btnCancel.set("style","margin-left:10px;");break;default:this[a.id]=a,this.customOptions||(this.customOptions=[]);var b=a.id.split(this.portlet.id);2==b.length&&(0===b[1].indexOf("_")&&(b[1]=b[1].substring(1)),this.customOptions.push({id:a.id,option:b[1]}))}},_validateOOTBRequired:function(){var a=!0;return this._entField&&!this._entField.isValid()&&(this._entField.set("state","Error"),a=!1),this._grpField&&!this._grpField.isValid()&&(this._grpField.set("state","Error"),a=!1),this._dimField&&!this._dimField.isValid()&&(this._dimField.set("state","Error"),a=!1),this._metField&&!this._metField.isValid()&&(this._metField.set("state","Error"),a=!1),a},_getTableNameOfEntity:function(a){var b=null,c=null,d=null;if(void 0!==this._entField.item&&null!==this._entField.item)return b=this._entField.item.tableName[0],c=this._entField.item.name[0],d=this._entField.item.displayName[0],{name:c,tableName:b,displayName:d};if(void 0!==this._entField.store&&this._entityUrl.store._itemsByIdentity&&a.length>0&&this._entityUrl.store._itemsByIdentity[a])return b=this._entityUrl.store._itemsByIdentity[a].tableName[0],c=this._entityUrl.store._itemsByIdentity[a].name[0],d=this._entityUrl.store._itemsByIdentity[a].displayName[0],{name:c,tableName:b,displayName:d};var e;for(e=0;e<this._entityUrl.store._arrayOfAllItems.length;e++){var f=this._entityUrl.store._arrayOfAllItems[e];if(f.$descriptor[0]===a)return b=f.tableName[0],c=f.name[0],d=f.displayName[0],{name:c,tableName:b,displayName:d}}return{name:c,tableName:b,displayName:d}},_updateGroupsDimensionsMetricsStores:function(a){var b=this.portlet.widgetOptions;a=b.resource?b.resource:a;var c=this._getTableNameOfEntity(this._remEnt(a));if(null!==c){var d=c.name;this._pushEnt(d),b.entity=d,b.resource=d,b.tableName=c.tableName,this._grpField&&null!==c.tableName&&(this._grpUrl.entityName=c.tableName,this._populate(this._grpUrl),this._grpField.store.urlPreventCache=!0,this._grpField.set("builder",this._grpUrl),this._grpField.set("store",this._grpUrl.store),this._grpField.set("value","")),this._dimField&&(this._dimUrl.entityName=c.name,this._populate(this._dimUrl),this._dimField.set("builder",this._dimUrl),this._dimField.set("store",this._dimUrl.store),this._dimField.set("value","")),this._metField&&(this._metUrl.entityName=c.name,this._populate(this._metUrl),this._metField.set("builder",this._metUrl),this._metField.set("store",this._metUrl.store),this._metField.set("value","")),this._checkHydrate()}},toggle:function(){var a,b,d=this,f=dijit.byId(d.portlet._parentId);if(f.permission){if(!this._childWidgets)for(this._childWidgets=this.getChildren(),a=0,b=this._childWidgets.length;a<b;a++)this._setFields(this._childWidgets[a]);if(this.dialog||(dojo.require("dijit.Dialog"),this.dialog=new dijit.Dialog({title:this.title}),this.dialog.helpIcon||(dojo.mixin(this.dialog,new c),this.dialog.createHelpIconByTopic("Using_Widgets")),dojo.body().appendChild(this.dialog.domNode),this.dialog.containerNode.appendChild(this.domNode),dojo.style(this.dialog.domNode,{width:this.dimensions[0]+"px",height:this.dimensions[1]+50+"px"}),dojo.style(this.domNode,"display","")),this.dialog.open)this._hydrateChecked=!1,this.dialog.hide();else{var g=this.portlet.widgetOptions;if(this.dialog.show(this.domNode),g.title&&this._ttlField){var h=g.title.replace(/'/g,"_").replace(/ /g,"_").replace(/\./g,"_");this._ttlField.set("value",e[h]||g.title);"Group List"===g.title?this._entityUrl.where="":""===this._entityUrl.where&&(this._entityUrl.where="filters.analyticsAvailable eq true and filters.filterType eq 'analyticsMetric'")}if(this._entField&&(this._populate(this._entityUrl),this._entField.store.urlPreventCache=!0,this._entField.set("builder",this._entityUrl),this._entField.set("store",this._entityUrl.store),this._entField.set("value",""),this._entField&&!this._entChange&&(this._entChange=dojo.connect(this._entField,"onChange",this,this._updateGroupsDimensionsMetricsStores))),this._subField&&(g.subtitle?this._subField.set("value",g.subtitle):this._subField.set("value","")),this._xField&&(g.xAxisName?this._xField.set("value",g.xAxisName):this._xField.set("value","")),this._yField&&(g.yAxisName?this._yField.set("value",g.yAxisName):this._yField.set("value","")),this._numberMaximum&&(g.numberMaximum?this._numberMaximum.set("value",g.numberMaximum):this._numberMaximum.set("value","10")),this._goalField&&(g.goal?this._goalField.set("value",g.goal):this._goalField.set("value","")),this._rdoOthY&&(g.combineother&&"true"===g.combineother?this._rdoOthY.set("checked",!0):this._rdoOthN.set("checked",!0)),this._rdoLegY&&(g.showLegend&&"true"===g.showLegend?this._rdoLegY.set("checked",!0):this._rdoLegN.set("checked",!0)),this._rdoLabY&&(g.showLabels&&"true"===g.showLabels?this._rdoLabY.set("checked",!0):this._rdoLabN.set("checked",!0)),this._rdoTruY&&(g.truncLabels&&"true"===g.truncLabels?this._rdoTruY.set("checked",!0):this._rdoTruN.set("checked",!0)),this._truncField&&(g.truncNum?this._truncField.set("value",g.truncNum):this._truncField.set("value","")),this.customOptions)for(a=0;a<this.customOptions.length;a++){var i=this.customOptions[a].option,j=this.customOptions[a].id;g[i]&&(this[j].checked&&this[j].set("checked",g[i]),this[j].set("value",g[i]))}for(a=0;a<this._childWidgets.length;a++)this._childWidgets[a]._myEditRowInit&&this._childWidgets[a]._myEditRowInit(g);this._cancelClick||(this._cancelClick=dojo.connect(this._btnCancel,"onClick",this,function(){for(a=0;a<this._childWidgets.length;a++)this._childWidgets[a]._myEditRowCancel&&this._childWidgets[a]._myEditRowCancel(g);this.toggle(),this.portlet.isNew&&(this.portlet.onClose(),this.portlet.destroy())})),this._okClick||(this._okClick=dojo.connect(this._btnOK,"onClick",this,function(){var b=["slxdata.ashx/slx/crm/-/analytics?"];if(this._ttlField){if(!this._ttlField.isValid())return!1;var c=this._ttlField.get("value"),f=g.title.replace(/'/g,"_").replace(/ /g,"_");c&&(this.portlet.set("title",c),c!=e[f]&&(g.title=c))}if(this._subField){var h=this._subField.get("value");if(g.subtitle=h||"",!this._subField.isValid())return!1}if(this._xField){var i=this._xField.get("value");if(g.xAxisName=i||"",!this._xField.isValid())return!1}if(this._yField){var j=this._yField.get("value");if(g.yAxisName=j||"",!this._yField.isValid())return!1}if(this._numberMaximum){var k=this._numberMaximum.get("value");if(g.numberMaximum=k||"5",this._pushLim(g.numberMaximum),!this._numberMaximum.isValid())return!1}if(this._goalField){var l=this._goalField.get("value");if(g.goal=l||"",!this._goalField.isValid())return!1}if(this._rdoLabY){var m=this._rdoLabY.get("value");g.showLabels=m?"true":"false"}if(this._rdoTruY){var n=this._rdoTruY.get("value");g.truncLabels=n?"true":"false"}if(this._rdoOthY){this._rdoOthY.get("value")?(g.combineother="true",this._pushOth("true")):(g.combineother="false",this._pushOth("false"))}if(this._rdoLegY){var o=this._rdoLegY.get("value");g.showLegend=o?"true":"false"}if(this._truncField){var p=this._truncField.get("value");if(p&&(g.truncNum=p),!this._truncField.isValid())return!1}if(!this._validateOOTBRequired())return!1;if(this._grpField&&(this._grpStr||this._grpField.store.fetch({query:{$descriptor:this._grpField.get("value")},onComplete:function(a,b){d._pushGrp(d._grpField.store.getValue(a[0],"name"))},queryOptions:{deep:!0}})),this._dimField&&(this._dimStr||this._dimField.store.fetch({query:{$descriptor:this._dimField.get("value")},onComplete:function(a,b){d._pushDim(d._dimField.store.getValue(a[0],"filterName"))},queryOptions:{deep:!0}})),this._metField&&(this._metStr||this._metField.store.fetch({query:{$descriptor:this._metField.get("value")},onComplete:function(a,b){d._pushMet(d._metField.store.getValue(a[0],"filterName"))},queryOptions:{deep:!0}})),this.customOptions)for(a=0;a<this.customOptions.length;a++){var q=this.customOptions[a].option,r=this.customOptions[a].id;this[r].checked&&(this[r].value=this[r].checked),g[q]=this[r].value}for(a=0;a<this._childWidgets.length;a++)this._childWidgets[a]._myEditRowSave&&this._childWidgets[a]._myEditRowSave(g);this._dimStr&&b.push(this._dimStr),this._metStr&&b.push(this._metStr),this._entStr&&b.push(this._entStr),this._grpStr&&b.push(this._grpStr),this._limStr&&b.push(this._limStr),this._othStr&&b.push(this._othStr),g.datasource=this._remAmp(b.join("")),dojo.publish("/ui/dashboard/pageSave",[this.portlet._page]),this.portlet.isNew&&(this.portlet.isNew=!1),this.portlet.refresh(!0),this.toggle()}))}}else f._raisePermissionInvalidMessage()},toggleContinued:function(){var a=this,b=this.portlet.widgetOptions;if(this._grpField&&!this._grpChange&&(this._grpChange=dojo.connect(this._grpField,"onChange",this,function(c){if(!this._grpField.isValid())return!1;var d=this._grpField.store;d.fetch({query:{$descriptor:c},onComplete:function(c,e){var f=d.getValue(c[0],"name");a._pushGrp(f),b.groupname=f},queryOptions:{deep:!0}})})),this._dimField&&!this._dimChange&&(this._dimChange=dojo.connect(this._dimField,"onChange",this,function(c){if(!this._dimField.isValid())return!1;var d=this._dimField.store;d.fetch({query:{$descriptor:c},onComplete:function(c,e){var f=d.getValue(c[0],"filterName");a._pushDim(f),b.dimension=f},queryOptions:{deep:!0}})})),this._metField&&!this._metChange&&(this._metChange=dojo.connect(this._metField,"onChange",this,function(c){if(!this._metField.isValid())return!1;var d=this._metField.store;d.fetch({query:{$descriptor:c},onComplete:function(c,e){var f=d.getValue(c[0],"filterName");a._pushMet(f),b.metric=f},queryOptions:{deep:!0}})})),b.entity)if(this._originalEntity)this._originalEntity===b.entity?this._checkHydrate():this._entField.set("value",b.entity);else{var c=this._entityUrl.store._arrayOfAllItems.filter(function(a){return a.name[0]===b.entity}),d=c[0];d&&(b.entity=d.displayName),this._entField.set("value",b.entity),this._originalEntity=b.entity}},_populate:function(b,c,d){b.store=new a({data:{identifier:"$key",items:[]}});var e=new Sage.SData.Client.SDataResourceCollectionRequest(b.service),g=b.kind;if("kind"===b.replace&&(g=i.substitute(b.kind,[b.entityName])),e.setResourceKind(g),void 0!==b.start?(b.start=c||b.start,e.setQueryArg("startIndex",b.start)):(b.start=c||0,e.setQueryArg("startIndex",b.start)),void 0!==b.count?(b.count=d||b.count,e.setQueryArg("count",b.count)):(b.count=d||0,e.setQueryArg("count",b.count)),void 0!==b.where){var h=b.where;"where"===b.replace&&(h=i.substitute(b.where,[b.entityName])),e.setQueryArg("where",h)}void 0!==b.select&&e.setQueryArg("select",b.select),void 0!==b.orderBy&&e.setQueryArg("orderBy",b.orderBy),void 0!==b.format&&e.setQueryArg("format",b.format);e.read({scope:this,success:function(a){for(var c=a.$resources,d=0;d<=c.length-1;d++)null!==b.store._itemsByIdentity&&b.store._itemsByIdentity[c[d].$key]||b.store.newItem(c[d]);var e=a.$totalResults,g=b.start+b.count,h=e-g;if(h>0)h>=b.count?this._populate(b,g,b.count):this._populate(b,g,h);else if(this._checkHydrate(),null===b.entityName){var i=dojo.byId(this.portlet.id+"_loading");i&&f.set(i,"display","none"),this.toggleContinued()}},failure:function(a){}})}})})},"Sage/UI/Dashboard/DashboardWidget":function(){define(["dojo/_base/declare","Sage/UI/Dashboard/WidgetDefinition","dojo/i18n","dojo/_base/lang","dojo/string","dijit/form/TextBox","dijit/form/CheckBox","dojox/charting/widget/Chart2D","dojox/charting/action2d/Highlight","dojox/charting/action2d/MoveSlice","dojox/charting/action2d/Tooltip","dojox/charting/action2d/Magnify","dojox/charting/widget/Legend","Sage/UI/Dashboard/ChartingTheme","dojo/i18n!./nls/DashboardWidget"],function(a,b,c,d,e){return a("Sage.UI.Dashboard.DashboardWidget",null,{constructor:function(a){dojo.safeMixin(this,a),this._setDefinition(),this._winResize=dojo.connect(window,"onresize",this,function(){this.parentCell.open&&this.parentCell._started&&this.parentCell.refresh&&this.parentCell.refresh(!0)}),this.dropSub=dojo.subscribe("/ui/widget/dropped",this,function(a,b,c,d){if(a===this.parentCell.id){if(!this.parentCell.open||!this.parentCell._started)return;this.parentCell.refresh&&this.parentCell.refresh(!0)}})},postMixInProperties:function(){dojo.mixin(this,c.getLocalization("Sage.UI.Dashboard","DashboardWidget"))},_getInstanceData:function(){if(this.parentCell.isNew&&this.definition.editor)return this.definition.editor(this.parentCell),void(this.parentCell._settingsWidget?this.parentCell._settingsWidget.toggle():this.parentCell._editorAdded());if(this.definition.isStatic)this._setInstanceData();else{var a=this;this.options.datasource?dojo.xhrGet({url:this.options.datasource,handleAs:"json",preventCache:!0,load:function(b){b?a._setInstanceData(b):a.parentCell.set("content",this.noQueryDataText+this.options.datasource)},error:function(b){a._setInstanceData(null)}}):(this.parentCell._setContent(this.initializingText||"",!0),this.definition.isStaticXhr&&this._setInstanceData(null),this.definition.editor&&this.definition.editor(this.parentCell))}},_setDefinition:function(){b(Sage.UI.WidgetDefinitions[this.options.name],d.hitch(this,function(a){this.definition=a,this._getInstanceData()}))},_setInstanceData:function(a){var b=this.parentCell.widgetOptions.name.replace(" ","_");if("Group_List"===b&&!this.parentCell.widgetOptions.tableName&&this.parentCell.widgetOptions.resource){var c=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata"));c.setResourceKind("entities"),c.setQueryArg("startIndex",0),c.setQueryArg("count",1),c.setQueryArg("select","tableName"),c.setQueryArg("where",e.substitute("name eq '${0}'",[this.parentCell.widgetOptions.resource])),c.setQueryArg("format","JSON"),c.read({scope:this,async:!1,success:function(a){a.$resources[0].tableName&&(this.parentCell.widgetOptions.tableName=a.$resources[0].tableName)},failure:function(a){}})}this.definition.isStatic?(this.parentCell.set("content",this.definition.html(this.parentCell)),this.definition.editor&&this.definition.editor(this.parentCell)):this.definition.html(this.parentCell,a)}})})},"Sage/UI/Dashboard/WidgetDefinition":function(){define(["Sage/UI/widgetEditorLookup","Sage/UI/EditorContainer","dijit/form/ValidationTextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","dojo/i18n","dojo/i18n!./nls/WidgetDefinition"],function(a,b,c,d,e,f,g,h){return function(a,b){a.type||(a.type="BaseWidget"),require(["Sage/UI/Dashboard/"+a.type],function(c){b(new c(a))})}})},"Sage/UI/widgetEditorLookup":function(){define(["dijit/form/ValidationTextBox","dijit/form/RadioButton","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dijit/form/NumberTextBox"],function(a,b,c,d,e){var f={};return f.txtField=function(a){return new Simplate(['<div data-dojo-type="dijit.form.ValidationTextBox" id="{%= $.id %}"',' regExp="[^<>;]*" invalidMessage="{%= $.invMess %}" style="width:100%;"></div>']).apply(a)},f.rdoGroup=function(a){return new Simplate(['<table width="100%"><tr><td align="left" width="50%"><input type="radio" id="{%= $.idOne %}" data-dojo-type="dijit.form.RadioButton"',' value="{%= $.valOne %}" name="{%= $.name %}"/><label for="${idOne}">{%= $.lblOne %}','</label></td><td align="left" width="50%"><input type="radio" id="{%= $.idTwo %}"data-dojo-type="dijit.form.RadioButton"',' value="{%= $.valTwo %}" name="{%= $.name %}"/><label for="{%= $.idTwo %}">{%= $.lblTwo %}',"</label></td></tr></table>"]).apply(a)},f.comboField=function(a){return new Simplate(['<input data-dojo-type="dijit.form.ComboBox" id="{%= $.id %}" style="width:100%;"',' required="true" searchAttr="{%= $.searchAttr %}"/>']).apply(a)},f.numberField=function(a){return new Simplate(['<input data-dojo-type="dijit.form.NumberTextBox" id="{%= $.id %}" style="width:100%;" constraints="{locale:Sys.CultureInfo.CurrentCulture.name}" ',' invalidMessage="{%= $.invMess %}"/>']).apply(a)},f.wholeNumberField=function(a){return new Simplate(['<input data-dojo-type="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" id="{%= $.id %}"',' invalidMessage="{%= $.invMess %}" constraints="{places:0,locale:Sys.CultureInfo.CurrentCulture.name}" style="width:100%;" formatType="Number"/>']).apply(a)},f._myEditRow=function(a){return new Simplate(['<div data-dojo-type="{%= $.type %}" id="{%= $.id %}" shouldPublishMarkDirty="false" style="height:{%= $.height %};width:100%;" data-dojo-mixins="{%= $.mixins %}"></div>']).apply(a)},Sage.UI.widgetEditorLookup=f,f})},"Sage/UI/Dashboard/ChartingTheme":function(){define(["dojox/charting/Theme","dojox/charting/themes/common"],function(a){var b=dojox.charting.themes;return b.Julie=new a({seriesThemes:[{fill:"#005bb8",stroke:{color:"#005bb8"}},{fill:"#d5000e",stroke:{color:"#d5000e"}},{fill:"#157a13",stroke:{color:"#157a13"}},{fill:"#f96089",stroke:{color:"#f96089"}},{fill:"#47b2f0",stroke:{color:"#47b2f0"}},{fill:"#4fb521",stroke:{color:"#4fb521"}},{fill:"#ff8400",stroke:{color:"#ff8400"}},{fill:"#ffb8bd",stroke:{color:"#ffb8bd"}},{fill:"#bce8fc",stroke:{color:"#bce8fc"}},{fill:"#bff485",stroke:{color:"#bff485"}},{fill:"#ff8400",stroke:{color:"#ff8400"}}],chart:{fontColor:"#b3b3b3",font:"normal normal normal 8pt Helvetica, Arial, sans-serif"},series:{stroke:{width:2,color:"#b3b3b3"},position:"center",font:"normal normal normal 8pt Helvetica, Arial, sans-serif",fontColor:"#b3b3b3"},axis:{tick:{color:"#b3b3b3",outline:null,font:"normal normal normal 8pt Helvetica, Arial, sans-serif",fontColor:"#b3b3b3"}}}),b.Julie.next=function(b,c,d){var e,f;return"line"===b||"area"===b?(e=this.seriesThemes[this._current%this.seriesThemes.length],e.fill.space="plot",e.stroke.color="#005bb8",f=a.prototype.next.apply(this,arguments),e.fill.space="shape",f):"column"===b||"bar"===b?(e=this.seriesThemes[this._current%this.seriesThemes.length],e.stroke.color="#fff",f=a.prototype.next.apply(this,arguments)):(e=this.seriesThemes[this._current%this.seriesThemes.length],a.prototype.next.apply(this,arguments))},b.Julie.post=function(b,c){return a.prototype.post.apply(this,arguments)},b.Julie})},"Sage/UI/Forms/main":function(){define(["Sage/UI/Forms/FormFromSData","Sage/UI/Forms/PickListManagerForm"],function(){})},"Sage/UI/Alarms/main":function(){define(["Sage/UI/Alarms/ActivityAlarm","Sage/UI/Alarms/AlarmButton","Sage/UI/Alarms/AlarmCountDown","Sage/UI/Alarms/AlarmPane","Sage/UI/Alarms/AlarmPopup","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/UnconfirmedAlarm","Sage/UI/Alarms/UnconfirmedPane","Sage/UI/Alarms/JobNotificationButton","Sage/UI/Alarms/JobNotificationPopup"],function(){})},"Sage/UI/Alarms/ActivityAlarm":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/CheckBox","Sage/Utility/Activity","Sage/UI/Alarms/AlarmCountDown","Sage/Link","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n","dojo/i18n!./nls/ActivityAlarm","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.Alarms.ActivityAlarm",[b,a],{widgetsInTemplate:!0,userActivity:null,selected:!1,key:"",_tooltips:[],widgetTemplate:new Simplate(['<div class="alarm-item">','<table style="width:100%" dojoAttachPoint="_item" dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">','<col width="50px" />','<col width="50%" />','<col width="50%" />','<col width="80px" />',"<tr>",'{% var imageClass = Sage.Utility.Activity.getActivityImageClass($.userActivity.Activity.Type, "medium"); %}','<td class="alarm-icon">','<div class="dijitIcon dijitMenuItemIcon Global_Images icon24x24 {%= imageClass %}" title="{%= $.cleanText($.userActivity.Activity.Description) %}"></div>','<input type="checkbox" data-dojo-type="dijit.form.CheckBox" size="30px" dojoAttachPoint="_checkbox" />',"</td>",'<td class="alarm-content">',"{% var desc = Sage.Utility.htmlEncode($.userActivity.Activity.Description);if (!desc) { desc = Sage.Utility.Activity.getActivityTypeName($.userActivity.Activity.Type); } %}",'<div class="alarm-description">','{% if ($.userActivity.Activity.Recurring) { %}<div class="Global_Images icon16x16 icon_recurring" title="{%= $.recurringText %}" > </div>&nbsp;&nbsp;{% } %}','{% if ($.userActivity.Status === "asUnconfirmed") { %}',"<a href=\"javascript:Sage.Link.confirmActivityFor('{%= $.userActivity.Activity.$key %}', '{%= $.userActivity.User.$key %}')\">{%= desc %}</a>","{% } else { %}","<a href=\"javascript:Sage.Link.editActivity('{%= $.userActivity.Activity.$key %}', {%= $.userActivity.Activity.Recurring %})\">{%= desc %}</a>","{% } %}","</div>","<div>{%= Sage.Utility.Activity.formatActivityStartDate($.userActivity.Activity.StartDate) %}</div>",'{% if (($.userActivity.Activity.LeadId) && ($.userActivity.Activity.LeadId.trim() !== "")) { %}','<div id="{%= $.userActivity.Activity.$key %}_lead" dojoAttachPoint="_leadnode">','{%= $.leadText %}: <a href="lead.aspx?entityid={%= $.userActivity.Activity.LeadId %}">{%= $.userActivity.Activity.LeadName %}</a>',"</div>",'{% if ($.userActivity.Activity.AccountName !== "") { %}',"<div>{%= $.companyText %}: {%= $.userActivity.Activity.AccountName %}</div>","{% } %}","{% } else { %}",'{% if ($.userActivity.Activity.ContactName !== "") { %}','<div id="{%= $.userActivity.Activity.$key %}_con" dojoAttachPoint="_connode">','{%= $.contactText %}: <a href="Contact.aspx?entityid={%= $.userActivity.Activity.ContactId %}">{%= $.userActivity.Activity.ContactName %}</a>',"</div>","{% } %}",'{% if ($.userActivity.Activity.AccountName !== "") { %}','<div id="{%= $.userActivity.Activity.$key %}_acc" dojoAttachPoint="_accnode">','{%= $.accountText %}: <a href="Account.aspx?entityid={%= $.userActivity.Activity.AccountId %}">{%= $.userActivity.Activity.AccountName %}</a>',"</div>","{% } %}","{% } %}",'</td><td class="alarm-content">',"{% if ($.userActivity.Activity.Location) { %}",'<div id="{%= $.userActivity.Activity.$key %}_Location" dojoAttachPoint="_location">',"{%= $.locationText %}: {%= Sage.Utility.htmlEncode($.userActivity.Activity.Location) %}&nbsp;","</div>","{% } %}","{% if ($.userActivity.Activity.OpportunityName) { %}",'<div id="{%= $.userActivity.Activity.$key %}_opp" dojoAttachPoint="_oppnode">','{%= $.opportunityText %}: <a href="Opportunity.aspx?entityid={%= $.userActivity.Activity.OpportunityId %}">{%= $.userActivity.Activity.OpportunityName %}</a>',"</div>","{% } %}","{% if ($.userActivity.Activity.TicketNumber) { %}",'<div id="{%= $.userActivity.Activity.$key %}_tick" dojoAttachPoint="_ticknode">','{%= $.ticketText %}: <a href="Ticket.aspx?entityid={%= $.userActivity.Activity.TicketId %}">{%= $.userActivity.Activity.TicketNumber %}</a>',"</div>","{% } %}","</td>",'<td class="alarm-countdownContainer">','<div data-dojo-type="Sage.UI.Alarms.AlarmCountDown" startDate="{%= $.userActivity.Activity.StartDate %}"></div>',"</td>","</tr>","</table>","</div>"]),constructor:function(){dojo.mixin(this,i)},postCreate:function(){this.inherited(arguments),this._checkbox.set("checked",this.selected),this._setupTooltips()},_setUserActivityAttr:function(a){this.userActivity=a,this.key=a.$key},_setupTooltips:function(){""!==this.userActivity.Activity.AccountName&&this._tooltips.push(new g({connectId:this._accnode,position:["below"],entityName:"accounts",entityId:this.userActivity.Activity.AccountId})),""!==this.userActivity.Activity.ContactName&&this._tooltips.push(new g({connectId:this._connode,position:["below"],entityName:"contacts",entityId:this.userActivity.Activity.ContactId})),""!==this.userActivity.Activity.LeadName&&this._tooltips.push(new g({connectId:this._leadnode,position:["below"],entityName:"leads",entityId:this.userActivity.Activity.LeadId}))},closeTooltips:function(){for(var a=0;a<this._tooltips.length;a++)this._tooltips[a].close()},cleanText:function(a){if(!a)return"";var b=new RegExp('[/:"*?<>|\r\n\'"`]+',"g");return a.replace(b,"")},_onHover:function(){dojo.addClass(this.domNode,"alarm-item-hover")},_onUnhover:function(){dojo.removeClass(this.domNode,"alarm-item-hover")},_onClick:function(){this.selected=!this.selected,this._checkbox.set("checked",this.selected),this._setSelectedStyle()},_setSelectedAttr:function(a){this.selected=a,this._checkbox.set("checked",this.selected),this._setSelectedStyle()},_getSelectedAttr:function(){return this.selected},_setSelectedStyle:function(){this.selected?dojo.addClass(this.domNode,"alarm-item-selected"):dojo.removeClass(this.domNode,"alarm-item-selected")}})})},"Sage/UI/Alarms/AlarmCountDown":function(){define(["Sage/_Templated","dijit/_Widget","Sage/Utility","dojo/date","dojo/html","dojo/i18n","dojo/i18n!./nls/AlarmCountDown","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){return h("Sage.UI.Alarms.AlarmCountDown",[b,a],{widgetsInTemplate:!1,startDate:"",_isOverdue:!1,_timer:!1,widgetTemplate:new Simplate(["<div>",'<div dojoAttachPoint="_startsIn"></div>',"<div>",'<span dojoAttachPoint="_countDownAmount" class="alarm-countdown"></span>','<span dojoAttachPoint="_countDownTimeFrame"></span>',"</div>",'<div dojoAttachPoint="_countDown2">','<span dojoAttachPoint="_countDown2Amount" class="alarm-countdown"></span>','<span dojoAttachPoint="_countDown2TimeFrame"></span>',"</div>","</div>"]),constructor:function(){dojo.mixin(this,g)},postCreate:function(){this.inherited(arguments);var a=c.Convert;a.isDateString(this.startDate)&&(this.startDate=a.toDateFromString(this.startDate)),this.startDate&&this._calculate()},_calculate:function(){var a,b,c=new Date;d.difference(this.startDate,c,"minute")<0?(a=c,b=this.startDate,this._isOverdue=!1):(a=this.startDate,b=c,this._isOverdue=!0);var e;if(a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()){if((e=d.difference(a,b,"minute"))<61)this._setUI(e,e>1?this.minutesText:this.minuteText);else{var f=e%60,g=Math.floor(e/60);this._setUI(g,g>1?this.hoursText:this.hourText,f,f>1?this.minutesText:this.minuteText)}var h=this;return void window.setTimeout(function(){h._update()},6e4)}return(e=d.difference(a,b,"day"))<31?void this._setUI(e,e>1?this.daysText:this.dayText,!1,!1):(e=d.difference(a,b,"month"))<13?void this._setUI(e,e>1?this.monthsText:this.monthText,!1,!1):(e=d.difference(a,b,"year"),void this._setUI(e,e>1?this.yearsText:this.yearText))},_setUI:function(a,b,c,d){0!==a?(e.set(this._startsIn,this._isOverdue?this.overduebyText:this.startsInText),e.set(this._countDownAmount," "+a+" "),c?(e.set(this._countDown2Amount," "+c+" "),dojo.removeClass(this._countDown2,"display-none")):dojo.addClass(this._countDown2,"display-none")):(e.set(this._startsIn,""),e.set(this._countDownAmount,""),b=this.startsNowText),e.set(this._countDownTimeFrame,b),d&&e.set(this._countDown2TimeFrame,d),this._isOverdue?dojo.addClass(this.domNode,"overdue-alarm"):dojo.removeClass(this.domNode,"overdue-alarm")},_update:function(){this._calculate()},destroy:function(){this._timer&&window.clearTimeout(this._timer),this.inherited(arguments)}})})},"Sage/UI/Alarms/AlarmButton":function(){define(["dojo/_base/declare","Sage/_Templated","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","dojo/string","dojox/storage/LocalStorageProvider","dojo/date","dijit/form/ComboButton","dojo/_base/event","dojo/_base/lang","dojo/dom-class","Sage/Data/SDataServiceRegistry","dojo/i18n","dojo/i18n!./nls/AlarmButton","Sage/UI/Alarms/AlarmPopup","Sage/UI/ImageButton","Sage/Services/UserOptions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.UI.Alarms.AlarmButton",[c,b],{pastDueToolTipFmt:" You have ${0} activities that are past due.",pastDueButtonIconClass:"fa fa-exclamation-circle",widgetsInTemplate:!0,options:{displayPastDueInToolbar:!0,displayAlertsInToolbar:!0,promptAlerts:!0,includeAlarms:!0,includeConfirmations:!0,defaultSnooze:"5"},pollInterval:1,_localStore:null,_alertCountKey:"AlertsCount",_pastDueCountKey:"PastDueCount",_started:!1,_pastDueVisible:!1,_alertBtnVisible:!1,widgetTemplate:new Simplate(['<span class="alarm-button-container">','<button data-dojo-type="Sage.UI.ImageButton" id="pastDueButton" imageClass="{%= $.pastDueButtonIconClass %}" class="past-due-button display-none" data-dojo-attach-point="_pastDueBtn" data-dojo-attach-event="onClick:_pastDueClick" >',"</button>",'<span id="alertButton" data-dojo-attach-point="_alertButton" class="alarm-button-container alarm-button display-none">','<span class="position-alarm-button">','<i class="fa fa-bell-o"></i>',"</span>",'<button data-dojo-type="dijit.form.ComboButton" data-dojo-attach-point="_button" data-dojo-attach-event="onClick:_cboClick" class="" >','<div data-dojo-type="Sage.UI.Alarms.AlarmPopup" id="alarmPopup" data-dojo-attach-point="_popup" data-dojo-attach-event="onClose:_popupClosed"></div>',"</button>","</span>","</span>"]),constructor:function(){dojo.mixin(this,o)},_setPollIntervalAttr:function(a){this.pollInterval=a},_getPollIntervalAttr:function(){return this.pollInterval},startup:function(){if(!this._started){this.inherited(arguments),this.connect(this._popup,"onAlertChanged",this._alarmChanged);var a=Sage.Services.getService("UserOptions");a&&a.getByCategory("ActivityAlarm",this._receivedOptions,this),this._localStore=new g,this._localStore.initialize(),this._button.valueNode&&this.connect(this._button.valueNode,"click",function(a){j.stop(a)})}},_receivedOptions:function(a){if(this._sortOptions(a.$resources||a),this._popup.set("options",this.options),(this.options.displayPastDueInToolbar||this.options.displayAlertsInToolbar)&&this.pollInterval>0){var b=this;window.setTimeout(function(){b._poll()},15e3),this._initializeButton()}this._started=!0},_sortOptions:function(a){for(var b=function(a){return"T"===a||"Y"===a||"1"===a},c=0;c<a.length;c++){var d=a[c];switch(d.name){case"DisplayPastDueInToolbar":this.options.displayPastDueInToolbar=b(d.value);break;case"DisplayAlertsInToolbar":this.options.displayAlertsInToolbar=b(d.value);break;case"PromptAlerts":this.options.promptAlerts=b(d.value);break;case"DisplayAlertAlarms":this.options.includeAlarms=b(d.value);break;case"DisplayAlertConfirmations":this.options.includeConfirmations=b(d.value);break;case"DefaultSnooze":this.options.defaultSnooze=d.value}}this.options.includeAlarms||this.options.includeConfirmations||(this.options.promptAlerts=!1)},_poll:function(){var a=new Sage.SData.Client.SDataNamedQueryRequest(m.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetCounts").setQueryArg("_beforeDate",d.Convert.toIsoStringFromDate(new Date)).setQueryArg("_timelessBeforeDate",e.formatTimelessEndDate(new Date,"day",-1)).setQueryArg("_userId",d.getClientContextByKey("userID"));a.uri.setCollectionPredicate("'RemindersAndAlarms'"),a.read({success:k.hitch(this,this._onReceiveCounts),failure:k.hitch(this,this._countsFailed)})},_onReceiveCounts:function(a){var b=a.$resources;if(b&&b.length>0){var c=b[0],d=this.options.includeAlarms?c.ringingAlarms:0,e=this.options.includeConfirmations?c.notifications:0,f=c.pastDue;this._handlePastDueCount(f),this._handleAlertCount(d,e)}var g=this;window.setTimeout(function(){g._poll()},6e4*this.pollInterval)},_countsFailed:function(a){},_handlePastDueCount:function(a){if(a>0&&this.options.displayPastDueInToolbar){this._showPastDue()
;a!=(this._getFromSessionStorage(this._pastDueCountKey)||0)&&(this._pastDueBtn.set("title",f.substitute(this.pastDueToolTipFmt,[a])),this._pastDueBtn.set("label",a),this._saveToSessionStorage(this._pastDueCountKey,a))}else this._hidePastDue()},_showPastDue:function(){this._pastDueVisible||(l.remove(this._pastDueBtn.domNode,"display-none"),this._pastDueVisible=!0)},_hidePastDue:function(){this._pastDueVisible&&(l.add(this._pastDueBtn.domNode,"display-none"),this._pastDueVisible=!1,this._pastDueBtn.set("title",""),this._pastDueBtn.set("label",""))},_pastDueClick:function(){Sage.Link.toActivityListView("pastdue")},_initializeButton:function(){var a=this._getFromSessionStorage(this._pastDueCountKey)||0;this.options.displayPastDueInToolbar&&a>0&&(this._showPastDue(),this._pastDueBtn.set("title",f.substitute(this.pastDueToolTipFmt,[a])),this._pastDueBtn.set("label",a));var b=this._getFromSessionStorage(this._alertCountKey)||0;this.options.displayAlertsInToolbar&&b>0&&(this._button.set("label"," "+b+" "),this._showAlertButton())},_handleAlertCount:function(a,b){if(this.options.displayAlertsInToolbar)if(a>0||b>0){var c=!1,d=this._getFromSessionStorage(this._alertCountKey)||0;1*d!==a+b&&(c=!0),d=a+b,this._saveToSessionStorage(this._alertCountKey,d),this._button.set("label"," "+d+" "),this._showAlertButton(),this._checkShowPopup(c,d)}else this._hideAlertButton()},_showAlertButton:function(){this._alertBtnVisible||(l.remove(this._alertButton,"display-none"),this._alertBtnVisible=!0)},_hideAlertButton:function(){this._alertBtnVisible&&(l.add(this._alertButton,"display-none"),this._alertBtnVisible=!1)},_checkShowPopup:function(a,b){this.options.promptAlerts&&(a&&(this._popup._dataRequested=!1),!this._popup.isOpen&&b>0&&a&&this._button.openDropDown())},_cboClick:function(a){return this._popup.isOpen?this._button.closeDropDown():this._button.openDropDown(),!1},_popupClosed:function(){},_alarmChanged:function(){var a=this._popup.getAlertCount();0===a?(dijit.popup.hide(this._popup),this._hideAlertButton()):this._showAlertButton(),this._button.set("label"," "+a+" "),this._saveToSessionStorage(this._alertCountKey,a)},_saveToSessionStorage:function(a,b){sessionStorage.setItem(a,b)},_getFromSessionStorage:function(a){return sessionStorage.getItem(a)}})})},"Sage/UI/Alarms/AlarmPopup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/string","Sage/UI/Alarms/AlarmPane","Sage/UI/Alarms/UnconfirmedPane","Sage/UI/ImageButton","dojo/i18n","dojo/i18n!./nls/AlarmPopup","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return n("Sage.UI.Alarms.AlarmPopup",[c,a,b],{options:{displayPastDueInToolbar:!0,displayAlertsInToolbar:!0,promptAlerts:!0,includeAlarms:!0,includeConfirmations:!0,pollInterval:1,defaultSnooze:"5"},_confirmCount:-1,_alarmCount:-1,_dataRequested:!1,widgetsInTemplate:!0,isOpen:!1,templateString:['<div class="alarm-popup">','<div class="alarm-title"><span class="alarm-main-title">&nbsp;${title}</span></div>','<div class="alarm-title">','<span class="alarm-tab-head">&nbsp;</span>','<span dojoAttachEvent="onclick:_showAlarmPane" dojoAttachPoint="_alarmBtn" class="alarm-tab alarm-tab-selected">${alarmsText}</span>','<span dojoAttachEvent="click:_showUnconfirmedPane" dojoAttachPoint="_confBtn" class="alarm-tab">${unconfirmedText}</span>','<span class="alarm-tab-tail">&nbsp;</span>','<span class="alarm-title-tools">','<span dojoType="Sage.UI.ImageButton" id="compButton" imageClass="icon_complete_activity_16x16" title="${completeText}" dojoAttachEvent="onClick:_completeClick" dojoAttachPoint="compButton"></span>','<span dojoType="Sage.UI.ImageButton" id="delButton" imageClass="icon_Delete_16x16" title="${deleteText}" dojoAttachEvent="onClick:_deleteClick" dojoAttachPoint="delButton"></span>','<span dojoType="Sage.UI.ImageButton" imageClass="icon_Help_16x16" title="${helpText}" dojoAttachEvent="onClick:_showHelp" ></span>',"</span>","</div>",'<div data-dojo-type="dijit.layout.StackContainer" dojoAttachPoint="_panelContainer" class="alarm-body" >','<div data-dojo-type="dijit.layout.ContentPane" dojoAttachPoint="_alarmPane" class="alarm-pane" title="alarms" >','<div data-dojo-type="Sage.UI.Alarms.AlarmPane" dojoAttachPoint="_alarms" dojoAttachEvent="onAlertChanged:_alarmchange"></div>',"</div>",'<div data-dojo-type="dijit.layout.ContentPane" dojoAttachPoint="_confPane" class="alarm-pane" title="Unconfirmed">','<div data-dojo-type="Sage.UI.Alarms.UnconfirmedPane" dojoAttachPoint="_confirms" dojoAttachEvent="onAlertChanged:_confchange"></div>',"</div>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,m)},_setOptionsAttr:function(a){this.options=dojo.mixin(this.options,a),this._alarms.setDefaultSnooze(this.options.defaultSnooze||"5")},_getOptionsAttr:function(){return this.options},drawAlerts:function(){this._dataRequested=!0,this.options.includeAlarms?(this.alarmStore||(this.alarmStore=new e({service:f.getSDataService("system"),resourceKind:"useractivities",include:["Activity","User","$descriptors"],sort:[{attribute:"Activity.StartDate",descending:!0}]}),this._alarms.store=this.alarmStore),this._fetchAlarms()):(dojo.addClass(this._alarmBtn,"display-none"),this._showUnconfirmedPane()),this.options.includeConfirmations?(this.confirmStore||(this.confirmStore=new e({service:f.getSDataService("dynamic"),resourceKind:"usernotifications",include:["Activity","$descriptors"],select:["Type","Notes","FromUserId","ToUserId","SendDate","Activity/AccountName","Activity/AccountId","Activity/ActivityId","Activity/ContactName","Activity/ContactId","Activity/Description","Activity/Duration","Activity/LeadId","Activity/LeadName","Activity/OpportunityName","Activity/OpportunityId","Activity/Recurring","Activity/StartDate","Activity/Timeless","Activity/Type","Activity/Location","Activity/Leader","Activity/TicketId","Activity/TicketNumber"],sort:[{attribute:"Activity.StartDate",descending:!0}]}),this._confirms.store=this.confirmStore),this._fetchConfirms()):(dojo.addClass(this._confBtn,"display-none"),this._showAlarmPane())},_fetchAlarms:function(){if(this.options.includeAlarms&&this.alarmStore){var a=h.substitute("(User.Id eq '${0}' and Status ne 'asDeclned') and ((Alarm eq true and AlarmTime ne null and AlarmTime lt '${1}') or (Alarm eq null and AlarmTime eq null and Activity.Alarm eq true and Activity.AlarmTime lt '${1}'))",[g.getClientContextByKey("userID"),g.Convert.toIsoStringFromDate(new Date)]);this.alarmStore.fetch({query:a,count:80,start:0,onComplete:this._onAlarmRequestComplete,scope:this})}},_fetchConfirms:function(){this.options.includeConfirmations&&this.confirmStore&&this.confirmStore.fetch({query:h.substitute("ToUserId eq '${0}' and Type eq 'New'",[g.getClientContextByKey("userID")]),count:40,start:0,onComplete:this._onConfirmRequestComplete,scope:this})},_onAlarmRequestComplete:function(a){this._alarms._setAlertItemsAttr(a,this.isOpen),this._alarmCount=a.length,this._checkWhichVisible()},_onConfirmRequestComplete:function(a){this._confirms._setAlertItemsAttr(a,this.isOpen),this._confirmCount=a.length,this._checkWhichVisible()},_checkWhichVisible:function(){this._alarmCount>0&&this.options.includeAlarms?this._showAlarmPane():0===this._alarmCount&&this._confirmCount>0&&this.options.includeConfirmations&&this._showUnconfirmedPane()},_alarmchange:function(a){dojo.html.set(this._alarmBtn,this.alarmsText+" ("+a+") "),this._alarmCount=a,a<1&&this._checkWhichVisible(),this.onAlertChanged()},_confchange:function(a){dojo.html.set(this._confBtn,this.unconfirmedText+" ("+a+") "),this._confirmCount=a,a<1&&this._checkWhichVisible(),this.onAlertChanged()},onOpen:function(){this.isOpen=!0,this._panelContainer.resize(),this._dataRequested?this._checkWhichVisible():this.drawAlerts()},onClose:function(){this.isOpen=!1,this._alarms.closeTooltips(),this._confirms.closeTooltips()},startup:function(){this.inherited(arguments),dojo.subscribe("/entity/activity/delete",this,this.reloadData)},reloadData:function(){this._fetchAlarms(),this._fetchConfirms()},reloadAlarms:function(){this._fetchAlarms()},reloadConfirms:function(){this._fetchConfirms()},_showAlarmPane:function(){this._panelContainer.selectChild(this._alarmPane),dojo.addClass(this._alarmBtn,"alarm-tab-selected"),dojo.removeClass(this._confBtn,"alarm-tab-selected"),dojo.removeClass(this.compButton.domNode,"display-none"),dojo.removeClass(this.delButton.domNode,"display-none"),this._alarms.onShow()},_showUnconfirmedPane:function(){this._panelContainer.selectChild(this._confPane),dojo.removeClass(this._alarmBtn,"alarm-tab-selected"),dojo.addClass(this._confBtn,"alarm-tab-selected"),dojo.addClass(this.compButton.domNode,"display-none"),dojo.addClass(this.delButton.domNode,"display-none"),this._confirms.onShow()},_completeClick:function(){this._alarms.completeSelected()},_deleteClick:function(){this._alarms.deleteSelected()},_showHelp:function(){g.openHelp("alerts")},getAlertCount:function(){return this._alarms.getUnhandledAlertCount()+this._confirms.getUnhandledAlertCount()},onAlertChanged:function(){},onChange:function(){}})})},"Sage/UI/Alarms/AlarmPane":function(){define(["dijit/form/Button","dijit/form/FilteringSelect","dojo/date","Sage/Utility","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/ActivityAlarm","dojo/i18n","dojo/i18n!./nls/AlarmPane","dojo/_base/declare","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j){return i("Sage.UI.Alarms.AlarmPane",e,{defaultSnooze:"5",_snoozeButton:!1,templateString:["<div>",'<div class="alarm-items-contents" dojoAttachPoint="_alertContents"></div>','<div class="alarm-snoozebar" dojoAttachPoint="_snoozebar">',"<table>","<tr>",'<td colspan="2" class="dismissActions">','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_dismissSelected">${dismissText}</button>','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_dismissAll">${dismissAllText}</button>',"</td>",'<td colspan="2" class="calendar-link">','<a href="calendar.aspx" title="${showCalendarText}">${showCalendarText}</a>',"</td>","</tr><tr>",'<td class="snoozeText">${snoozeByText}</td>','<td colspan="2" class="snoozeBy">','<select name="selectSnoozeBy" dojoAttachPoint="_selSnoozeBy" data-dojo-type="dijit.form.FilteringSelect">','<option value="5" {% if ($.defaultSnooze == 5) { %} selected="selected" {% } %}>${fiveMinText}</option>','<option value="10" {% if ($.defaultSnooze == 10) { %} selected="selected" {% } %}>${tenMinText}</option>','<option value="15" {% if ($.defaultSnooze == 15) { %} selected="selected" {% } %}>${fifteenMinText}</option>','<option value="30" {% if ($.defaultSnooze == 30) { %} selected="selected" {% } %}>${thirtyMinText}</option>','<option value="60" {% if ($.defaultSnooze == 60) { %} selected="selected" {% } %}>${oneHourText}</option>','<option value="120" {% if ($.defaultSnooze == 120) { %} selected="selected" {% } %}>${twoHourText}</option>','<option value="240" {% if ($.defaultSnooze == 240) { %} selected="selected" {% } %}>${fourHourText}</option>','<option value="480" {% if ($.defaultSnooze == 480) { %} selected="selected" {% } %}>${eightHourText}</option>','<option value="1440" {% if ($.defaultSnooze == 1440) { %} selected="selected" {% } %}>${oneDayText}</option>','<option value="2880" {% if ($.defaultSnooze == 2880) { %} selected="selected" {% } %}>${twoDayText}</option>','<option value="4320" {% if ($.defaultSnooze == 4320) { %} selected="selected" {% } %}>${threeDayText}</option>','<option value="10080" {% if ($.defaultSnooze == 10080) { %} selected="selected" {% } %}>${oneWeekText}</option>','<option value="20160" {% if ($.defaultSnooze == 20160) { %} selected="selected" {% } %}>${twoWeekText}</option>',"</select>","</td>",'<td class="snoozeActions">','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_snooze" dojoAttachPoint="_snoozeButton">${snoozeText}</button>','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_snoozeAll">${snoozeAllText}</button>',"</td>","</tr>","</table>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,h)},_durByText:!1,_textByDur:!1,onShow:function(){this._snoozeButton.focus()},setDefaultSnooze:function(a){this.defaultSnooze=a,this._setSnoozeSelect(a)},_addAlert:function(a){if(this._alarmRinging(a)){var b=new f({userActivity:a,selected:this.selectedAlerts.hasOwnProperty(a.$key)});this.alertWidgets.push(b),dojo.place(b.domNode,this._alertContents)}},_alarmRinging:function(a){var b,e,f=new Date;return null===a.Alarm&&null===a.AlarmTime?(b=d.Convert.toDateFromString(a.Activity.AlarmTime),e=a.Activity.Alarm,a.Alarm=e,a.AlarmTime=a.Activity.AlarmTime):(b=d.Convert.toDateFromString(a.AlarmTime),e=a.Alarm),e&&c.compare(b,f)<1},_snooze:function(){for(var a=0;a<this.alertWidgets.length;a++){var b=this.alertWidgets[a];b.selected&&this._snoozeItem(b.userActivity)}this.store.save(this)},_snoozeAll:function(){for(var a=0;a<this.alertWidgets.length;a++)this._snoozeItem(this.alertWidgets[a].userActivity);this.store.save(this)},_setSnoozeSelect:function(a){this._textByDur||(this._textByDur={5:this.fiveMinText,10:this.tenMinText,15:this.fifteenMinText,30:this.thirtyMinText,60:this.oneHourText,120:this.twoHourText,240:this.fourHourText,480:this.eightHourText,1440:this.oneDayText,2880:this.twoDayText,4320:this.threeDayText,10080:this.oneWeekText,20160:this.twoWeekText}),this._selSnoozeBy.set("displayedValue",this._textByDur[a]),this._selSnoozeBy.set("value",a)},_snoozeItem:function(a){var b=this._selSnoozeBy.get("value"),e=parseInt(b,10),f=new Date,g=c.add(f,"minute",e);this.store.setValue(a,"AlarmTime",d.Convert.toIsoStringFromDate(g))},_dismissAll:function(){for(var a=0;a<this.alertWidgets.length;a++)this._dismissItem(this.alertWidgets[a].userActivity);this.store.save(this)},_dismissSelected:function(){for(var a=0;a<this.alertWidgets.length;a++){var b=this.alertWidgets[a];b.selected&&this._dismissItem(b.userActivity)}this.store.save(this)},_dismissItem:function(a){this.store.setValue(a,"Alarm",!1)},deleteSelected:function(){var a=this._makeSelectionContext(!1);if(a){var b=Sage.Services.getService("ActivityService");if(1===a.count){var c=a.selectionInfo.selections[0].entity;b.deleteActivity(c.$key,c.Recurring)}else b.deleteActivitiesInSelectionContext(a,this._reloadAlarms,this)}},_reloadAlarms:function(a){dijit.byId("alarmPopup").reloadAlarms()},completeSelected:function(){var a=this._makeSelectionContext(!1);if(a){var b=Sage.Services.getService("ActivityService"),c=this,d=j.subscribe("/entity/activity/bulkComplete",function(a){c._reloadAlarms(),d.remove()});if(1===a.count){var e=a.selectionInfo.selections[0].entity;b.completeActivity(e.$key,e.Recurring)}else b.completeActivitiesInSelectionContext(a)}},_makeSelectionContext:function(a){for(var b=[],c=[],d=this.alertWidgets.length-1,e=d;e>-1;e--){var f=this.alertWidgets[e];if(f.selected){var g=f.userActivity.Activity.$key;b.push(g),c.push({rn:0,id:g,entity:f.userActivity.Activity}),a&&(this.alertWidgets.splice(e,1),f.destroy())}}return b.length>0&&{count:b.length,id:null,mode:"select",name:"activities",selectionInfo:{key:"alert",keyField:"$key",mode:"selection",ranges:[],recordCount:b.length,selectedIds:b,selectionCount:2,selections:c,sortDirection:"",sortField:""}}},onComplete:function(){for(var a=this.alertWidgets.length-1,b=a;b>-1;b--){var c=this.alertWidgets[b];this._alarmRinging(c.userActivity)||(this.alertWidgets.splice(b,1),c.destroy())}this._alertChanged(this.alertWidgets.length)},getUnhandledAlertCount:function(){for(var a=0,b=0;b<this.alertItems.length;b++)this._alarmRinging(this.alertItems[b])&&a++;return a}})})},"Sage/UI/Alarms/AlertPane":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Alarms.AlertPane",[c,a,b],{widgetsInTemplate:!0,constructor:function(){this.alertItems=[],this.alertWidgets=[],this.store=null,this._drawn=!1,this.selectedAlerts={}},onShow:function(){},_hasDifferentItems:function(a){if(a.length!==this.alertWidgets.length)return!0;if(this.alertItems.length===a.length){for(var b=0;b<a.length;b++)if(this.alertItems[b].$key!==a[b].$key)return!0;return!1}return!0},_setAlertItemsAttr:function(a,b){if(this._hasDifferentItems(a)){this.alertItems=a,this._drawn=!1,this.selectedAlerts={};for(var c=this.alertWidgets.length,d=0;d<c;d++){var e=this.alertWidgets.pop();e.selected&&(this.selectedAlerts[e.key]=1),e.destroy()}0===c&&this.alertItems.length>0&&(this.selectedAlerts[this.alertItems[0].$key]=1),this._drawAlerts(),this._alertChanged(this.alertWidgets.length)}},_ensureOneSelected:function(){for(var a=this.alertWidgets.length-1,b=0;b<a;b++)if(this.alertWidgets[b].get("selected"))return;this.alertWidgets.length>0&&this.alertWidgets[0].set("selected",!0)},_drawAlerts:function(){if(!this._drawn&&(dojo.html.set(this._alertContents,""),this.alertItems)){for(var a=0;a<this.alertItems.length;a++)this._addAlert(this.alertItems[a]);this._drawn=!0}},getUnhandledAlertCount:function(){return this.alertWidgets.length},_addAlert:function(a){},closeTooltips:function(){for(var a=0;a<this.alertWidgets.length;a++)this.alertWidgets[a].closeTooltips()},_alertChanged:function(a){this._ensureOneSelected(),this.onAlertChanged(a)},onAlertChanged:function(a){}})})},"Sage/UI/Alarms/UnconfirmedPane":function(){define(["dijit/form/Button","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/UnconfirmedAlarm","Sage/Link","dojo/i18n","dojo/i18n!./nls/UnconfirmedPane","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.UI.Alarms.UnconfirmedPane",b,{showConfirmationsText:"Show Confirmations",showCalendarText:"Show Calendar",acceptText:"Accept",declineText:"Decline",_acceptButton:!1,templateString:["<div>",'<div class="alarm-items-contents" dojoAttachPoint="_alertContents"></div>','<div class="alarm-snoozebar" dojoAttachPoint="_confButtonBar">','<table style="width:100%">',"<tr>",'<td class="leftTools"><a href="Calendar.aspx" title="${showCalendarText}">${showCalendarText}</a>','<td class="leftTools"><a href="javascript: Sage.Link.toActivityListView(\'confirmations\')" title="${showConfirmationsText}">${showConfirmationsText}</a></td>','<td class="rightTools">','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_acceptSelected" dojoAttachPoint="_acceptButton">${acceptText}</button>','<button data-dojo-type="dijit.form.Button" type="button" dojoAttachEvent="onClick:_declineSelected">${declineText}</button>',"</td>","</tr>","</table>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,f)},onShow:function(){this._acceptButton.focus()},_addAlert:function(a){var b=new c({userNotification:a,selected:this.selectedAlerts.hasOwnProperty(a.$key)});this.alertWidgets.push(b),dojo.place(b.domNode,this._alertContents)},_acceptSelected:function(){for(var a=this.alertWidgets.length-1,b=a;b>-1;b--){var c=this.alertWidgets[b];if(c.selected){Sage.Services.getService("ActivityService").acceptConfirmation({notification:c.userNotification,success:this.onPostSuccess,failure:function(){this._alertChanged(this.alertWidgets.length)},scope:this}),this.alertWidgets.splice(b,1),c.destroy()}}},_declineSelected:function(){for(var a=this.alertWidgets.length-1,b=a;b>-1;b--){var c=this.alertWidgets[b];if(c.selected){Sage.Services.getService("ActivityService").declineConfirmation({notification:c.userNotification,success:this.onPostSuccess,failure:function(){this._alertChanged(this.alertWidgets.length)},scope:this}),this.alertWidgets.splice(b,1),c.destroy()}}},getUnhandledAlertCount:function(){return this.alertWidgets.length},onPostSuccess:function(){this._alertChanged(this.alertWidgets.length)}})})},"Sage/UI/Alarms/UnconfirmedAlarm":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/CheckBox","Sage/Utility/Activity","Sage/UI/Alarms/AlarmCountDown","Sage/Link","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n","dojo/i18n!./nls/ActivityAlarm","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.Alarms.UnconfirmedAlarm",[b,a],{widgetsInTemplate:!0,userNotification:null,selected:!1,key:"",_tooltips:[],widgetTemplate:new Simplate(['<div class="alarm-item">','<table style="width:100%" dojoAttachPoint="_item" dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">','<col width="50px" />','<col width="50%" />','<col width="50%" />',"<tr>",'{% var imageClass = Sage.Utility.Activity.getActivityImageClass($.userNotification.Activity.Type, "medium"); %}','<td class="alarm-icon">','<div class="dijitIcon dijitMenuItemIcon Global_Images icon24x24 {%= imageClass %}" title="{%= $.cleanText($.userNotification.Activity.Description) %}"></div>','<input type="checkbox" data-dojo-type="dijit.form.CheckBox" size="30px" dojoAttachPoint="_checkbox" />',"</td>",'<td class="alarm-content">',"{% var desc = $.userNotification.Activity.Description;if (!desc) { desc = Sage.Utility.Activity.getActivityTypeName($.userNotification.Activity.Type); } %}",'<div class="alarm-description">','{% if ($.userNotification.Activity.Recurring) { %}<div class="Global_Images icon16x16 icon_recurring" title="{%= $.recurringText %}" > </div>&nbsp;&nbsp;{% } %}',"<a href=\"javascript:Sage.Link.editConfirmation('{%= $.userNotification.$key %}')\">{%= desc %}</a>","</div>","<div>{%= Sage.Utility.Activity.formatActivityStartDate($.userNotification.Activity.StartDate) %}</div>","<div>{%= $.leaderText %}: {%= $.userNotification.Activity.Leader.$descriptor %}</div>",'{% if (($.userNotification.Activity.LeadId) && ($.userNotification.Activity.LeadId.trim() !== "")) { %}','<div id="{%= $.userNotification.Activity.$key %}_lead" dojoAttachPoint="_leadnode">','{%= $.leadText %}: <a href="Lead.aspx?entityid={%= $.userNotification.Activity.LeadId %}">{%= $.userNotification.Activity.LeadName %}</a>',"</div>",'{% if ($.userNotification.Activity.AccountName !== "") { %}',"<div>{%= $.companyText %}: {%= $.userNotification.Activity.AccountName %}</div>","{% } %}","{% } else { %}",'{% if ($.userNotification.Activity.ContactName !== "") { %}','<div id="{%= $.userNotification.Activity.$key %}_con" dojoAttachPoint="_connode">','{%= $.contactText %}: <a href="Contact.aspx?entityid={%= $.userNotification.Activity.ContactId %}">{%= $.userNotification.Activity.ContactName %}</a>',"</div>","{% } %}",'{% if ($.userNotification.Activity.AccountName !== "") { %}','<div id="{%= $.userNotification.Activity.$key %}_acc" dojoAttachPoint="_accnode">','{%= $.accountText %}: <a href="Account.aspx?entityid={%= $.userNotification.Activity.AcountId %}">{%= $.userNotification.Activity.AccountName %}</a>',"</div>","{% } %}","{% } %}",'</td><td class="alarm-content">',"{% if ($.userNotification.Activity.Location) { %}",'<div id="{%= $.userNotification.Activity.$key %}_Location" dojoAttachPoint="_location">',"{%= $.locationText %}: {%= $.userNotification.Activity.Location %}&nbsp;","</div>","{% } %}","{% if ($.userNotification.Activity.OpportunityName) { %}",'<div id="{%= $.userNotification.Activity.$key %}_opp" dojoAttachPoint="_oppnode">','{%= $.opportunityText %}: <a href="Opportunity.aspx?entityid={%= $.userNotification.Activity.OpportunityId %}">{%= $.userNotification.Activity.OpportunityName %}</a>',"</div>","{% } %}","{% if ($.userNotification.Activity.TicketNumber) { %}",'<div id="{%= $.userNotification.Activity.$key %}_tick" dojoAttachPoint="_ticknode">','{%= $.ticketText %}: <a href="Ticket.aspx?entityid={%= $.userNotification.Activity.TicketId %}">{%= $.userNotification.Activity.TicketNumber %}</a>',"</div>","{% } %}","</td>","</tr>","</table>","</div>"]),constructor:function(){dojo.mixin(this,i)},postCreate:function(){this.inherited(arguments),this._checkbox.set("checked",this.selected),this._setupTooltips()},_setuserNotificationAttr:function(a){this.userNotification=a,this.key=a.$key},_setupTooltips:function(){""!==this.userNotification.Activity.AccountName&&this._tooltips.push(new g({connectId:this._accnode,position:["below"],entityName:"accounts",entityId:this.userNotification.Activity.AccountId})),""!==this.userNotification.Activity.ContactName&&this._tooltips.push(new g({connectId:this._connode,position:["below"],entityName:"contacts",entityId:this.userNotification.Activity.ContactId})),""!==this.userNotification.Activity.LeadName&&this._tooltips.push(new g({connectId:this._leadnode,position:["below"],entityName:"leads",entityId:this.userNotification.Activity.LeadId}))},closeTooltips:function(){for(var a=0;a<this._tooltips.length;a++)this._tooltips[a].close()},cleanText:function(a){if(!a)return"";var b=new RegExp('[/:"*?<>|\r\n\'"`]+',"g");return a.replace(b,"")},_onHover:function(){dojo.addClass(this.domNode,"alarm-item-hover")},_onUnhover:function(){dojo.removeClass(this.domNode,"alarm-item-hover")},_onClick:function(){this.selected=!this.selected,this._checkbox.set("checked",this.selected),this._setSelectedStyle()},_setSelectedAttr:function(a){this.selected=a,this._checkbox.set("checked",this.selected),this._setSelectedStyle()},_getSelectedAttr:function(){return this.selected},_setSelectedStyle:function(){this.selected?dojo.addClass(this.domNode,"alarm-item-selected"):dojo.removeClass(this.domNode,"alarm-item-selected")}})})},"Sage/UI/Alarms/JobNotificationButton":function(){define(["dojo/_base/declare","Sage/_Templated","dijit/_Widget","Sage/Utility","dojo/string","Sage/Data/SDataStore","dijit/form/ComboButton","dojo/i18n!./nls/JobNotificationButton","dojo/_base/event","dojo/_base/lang","dojo/dom-class","Sage/UI/Alarms/JobNotificationPopup","Sage/UI/ImageButton","Sage/Services/UserOptions"],function(a,b,c,d,e,f,g,h,i,j,k){return a("Sage.UI.Alarms.JobNotificationButton",[c,b],{options:{displayJobNotificationsInToolbar:!0,pollInterval:5},widgetsInTemplate:!0,pollInterval:5,_notificationsCountKey:"NotificationsCount",_started:!1,_notificationBtnVisible:!1,widgetTemplate:new Simplate(['<span id="jobNotification" data-dojo-attach-point="_jobNotification" class="alarm-button-container alarm-button notification-buttonIcon display-none">','<i class="fa fa-info-circle"></i>','<button data-dojo-type="dijit.form.ComboButton" data-dojo-attach-point="_button" data-dojo-attach-event="onClick:_cboClick" class="" >','<div data-dojo-type="Sage.UI.Alarms.JobNotificationPopup" id="notificationPopup" data-dojo-attach-point="_popup" data-dojo-attach-event="onClose:_popupClosed"></div>',"</button>","</span>"]),_setPollIntervalAttr:function(a){this.pollInterval=a},_getPollIntervalAttr:function(){return this.pollInterval},startup:function(){if(!this._started){var a=Sage.Services.getService("JobService"),b=a.getSchedulingSDataService();this._service=b,this.inherited(arguments),dojo.subscribe("/job/execution/changed",this,this._notificationChanged),dojo.subscribe("/job/execution/setNotificationCount",this,this._setNotificationCount);var c=Sage.Services.getService("UserOptions");c&&c.getByCategory("ActivityAlarm",this._receivedOptions,this),this._button.valueNode&&this.connect(this._button.valueNode,"click",function(a){i.stop(a)})}},_receivedOptions:function(){if(this._popup.set("options",this.options),this.options.displayJobNotificationsInToolbar&&this.pollInterval>0){var a=this;window.setTimeout(function(){a._poll()},15e3)}this._started=!0},_poll:function(){this._service&&(this._notificationStore=new f({id:"Executions",service:this._service,resourceKind:"executions",include:["$descriptors"],select:["$key","user"]}),this._notificationStore.fetch({start:0,onComplete:this._onReceiveCounts,onError:this._countsFailed,scope:this}))},_onReceiveCounts:function(a){this._saveToSessionStorage(this._notificationsCountKey,a?a.length:0),this._initializeButton();var b=this;window.setTimeout(function(){b._poll()},6e4*this.pollInterval)},_countsFailed:function(a){this._button.set("label"," ?"),this._button.set("title",h.notificationErrorToolTip),this._button.disabled=!0,this._showNotificationButton();try{Sage.Utility.ErrorHandler._configuration.preemption.showUnhandledMessagingServiceExceptionMsg=!1}catch(a){}},_initializeButton:function(){var a=this._getFromSessionStorage(this._notificationsCountKey)||0;a>0?(this._button.set("label"," "+a+" "),this._button.set("title",e.substitute(h.notificationToolTip,[a])),this._showNotificationButton()):this._hideNotificationButton()},_setNotificationCount:function(a){this._saveToSessionStorage(this._notificationsCountKey,a),this._initializeButton()},_showNotificationButton:function(){this._notificationBtnVisible||(k.remove(this._jobNotification,"display-none"),this._notificationBtnVisible=!0)},_hideNotificationButton:function(){this._notificationBtnVisible&&(k.add(this._jobNotification,"display-none"),this._notificationBtnVisible=!1)},_cboClick:function(a){return this._popup.isOpen?this._button.closeDropDown():this._button.openDropDown(),!1},_popupClosed:function(){},_notificationChanged:function(){this._poll()},_saveToSessionStorage:function(a,b){sessionStorage.setItem(a,b)},_getFromSessionStorage:function(a){return sessionStorage.getItem(a)}})})},"Sage/UI/Alarms/JobNotificationPopup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","Sage/UI/EditableGrid","Sage/Utility","dojo/string","dojo/i18n!./nls/JobNotificationPopup","dojo/_base/declare","Sage/Utility/Jobs"],function(a,b,c,d,e,f,g,h,i){return h("Sage.UI.Alarms.JobNotificationPopup",[c,a,b],{_notificationCount:-1,_dataRequested:!1,widgetsInTemplate:!0,isOpen:!1,grid:"",templateString:['<div class="alarm-popup notification-popup">','<div class="alarm-title notification-title">','<span class="alarm-main-title">&nbsp;${notificationPopupStrings.title}</span>','<span class="alarm-title-tools notification-title-tools">','<span dojoType="Sage.UI.ImageButton" imageClass="icon_Help_16x16" title="${notificationPopupStrings.helpText}" dojoAttachEvent="onClick:_showHelp" ></span>',"</span>","</div>",'<div data-dojo-type="dijit.layout.StackContainer" dojoAttachPoint="_panelContainer" class="alarm-body" >','<div data-dojo-type="dijit.layout.BorderContainer" id="jobNotifications_Grid" dojoAttachPoint="jobNotifications_Grid" style="width:100%;height:100%;"></div>',"</div>","</div>"].join(""),constructor:function(){this.notificationPopupStrings=g;var a=Sage.Services.getService("JobService"),b=a.getSchedulingSDataService();this._service=b},onOpen:function(){this.isOpen=!0,this._panelContainer.resize(),this._dataRequested?this.grid.refresh():this._loadNotifications()},_onNotificationRequestComplete:function(){this.context.query.scope.rowCount},_loadNotifications:function(){var a={readOnly:!0,columns:this._getColumnLayout(),tools:[],storeOptions:{service:this._service,resourceKind:"executions",include:["$descriptors"],select:["$key","job","trigger","progress","elapsed","status","result"],sort:[{attribute:"status",descending:!0}],onComplete:this._onNotificationRequestComplete},contextualCondition:function(){},id:this.id+"executions",tabId:"jobExecutions",gridNodeId:this.jobNotifications_Grid.id,singleClickEdit:!0,dblClickAction:this._onDblClick,rowsPerPage:20},b=new d(a),c=dijit.byId(b.gridNodeId);c.addChild(b),window.setTimeout(function(){b.startup(),c.resize()},1),this.grid=b,b.startup(),this._dataRequested=!0},_onDblClick:function(){},_getColumnLayout:function(){function a(a){return a&&"number"==typeof a||(a=0),new dijit.ProgressBar({indeterminate:!1,maximum:100,value:a})}var b=dojo.hitch(this,function(a){if(!a)return"";switch(a){case"Running":return this.notificationPopupStrings.executionStatusRunning;case"Complete":return this.notificationPopupStrings.executionStatusComplete;case"Interrupting":return this.notificationPopupStrings.executionStatusInterrupting;case"Interrupted":return this.notificationPopupStrings.executionStatusInterrupted;case"Error":return this.notificationPopupStrings.executionStatusError;default:return this.notificationPopupStrings.executionStatusUndefined}});return[{width:10,field:"$key",name:" ",
sortable:!1,hidden:!0},{width:10,field:"job",name:this.notificationPopupStrings.colNameJobName||"Type",sortable:!0,formatter:i.formatJobDescription},{width:8,field:"progress",name:this.notificationPopupStrings.colNameProgress||"Progress",formatter:a,sortable:!1},{width:6,field:"status",name:this.notificationPopupStrings.colNameStatus||"Status",formatter:b,sortable:!0},{width:24,field:"_item",name:this.notificationPopupStrings.colExecutionResult||"Result",formatter:i.formatJobResult,sortable:!1}]},onClose:function(){this.isOpen=!1},startup:function(){this.inherited(arguments)},_showHelp:function(){e.openHelp("jobNotifications")}})})},"Sage/UI/SLXPreviewGrid/main":function(){define(["Sage/UI/SLXPreviewGrid/Grid","Sage/UI/SLXPreviewGrid/FilterPanel","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text"],function(){})},"Sage/UI/ActivityEdit":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/SlxLink","dijit/form/FilteringSelect","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/ActivityDateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/data/ItemFileReadStore","dojo/string","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","Sage/UI/SLXPreviewGrid/Filter/Lookup","Sage/Data/SDataServiceRegistry","dojo/i18n!./nls/ActivityList","Sage/Utility/Workspace","Sage/UI/GridView","dojo/on"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return a("Sage.UI.ActivityEdit",[c],{workspace:"",tabId:"",connections:[],constructor:function(a){this.connections=[]},startup:function(){$(".dijitDialogPaneContent.dijitAlignCenter").height(700),this.connections.push(dojo.subscribe("/entity/activity/create",this,this.onActivityChanges)),this.connections.push(dojo.subscribe("/entity/activity/change",this,this.onActivityChanges)),this.connections.push(dojo.subscribe("/entity/activity/delete",this,this.onActivityChanges))},onActivityChanges:function(a){"none"!==$("#DialogWorkspace_window")[0].style.display&&__doPostBack("btnPostBack","")},destroy:function(){for(var a=0;a<this.connections.length;a++)dojo.unsubscribe(this.connections.pop());this.inherited(arguments)}})})},"Sage/UI/SLXPreviewGrid/Filter/ActivityDateRange":function(){define(["dojo/_base/declare","Sage/UI/SLXPreviewGrid/Filter/DateRange"],function(a,b){return a("Sage.UI.SLXPreviewGrid.Filter.ActivityDateRange",[b],{getQuery:function(){return this.inherited(arguments).replace(/Timeless/g,"Activity.Timeless")}})})},"Sage/UI/SLXPreviewGrid/Filter/Lookup":function(){define(["dojo/_base/declare","dijit/_Widget","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/i18n!./nls/Lookup"],function(a,b,c,d){return a("Sage.UI.SLXPreviewGrid.Filter.Lookup",[b,c],{lookupStructure:[],lookupGridOptions:{},lookupStoreOptions:{},postCreate:function(){this.inherited(arguments);var a={structure:this.lookupStructure,gridOptions:this.lookupGridOptions,storeOptions:this.lookupStoreOptions,isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.name,dialogButtonText:d.okText};this._lup=new Sage.UI.Controls.Lookup({id:this.id+"_lup",config:a,required:!1},this.domNode);var b=document.createElement("div");this.domNode.appendChild(b),dojo.place(this._lup.domNode,b,"only")},getQuery:function(){var a=this._lup.get("selectedObject");return a&&a.$key?this.field+" eq '"+a.$key+"'":""},reset:function(){this._lup.set("selectedObject",null)},getState:function(){return{value:this._lup.get("selectedObject")}},applyState:function(a){a&&this._lup.set("selectedObject",a.value||"")}})})},"Sage/UI/ActivityList":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/SlxLink","dijit/form/FilteringSelect","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/ActivityDateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/data/ItemFileReadStore","dojo/string","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","Sage/UI/SLXPreviewGrid/Filter/Lookup","Sage/Data/SDataServiceRegistry","dojo/i18n!./nls/ActivityList","Sage/Utility/Workspace","Sage/UI/GridView","dojo/on"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=a("Sage.UI.ActivityTypeFilterWidget",[c,n],{postCreate:function(){this.inherited(arguments);var a=document.createElement("div");this.domNode.appendChild(a);var b=[];dojo.forEach(["atAppointment","atPhoneCall","atToDo","atPersonal"],function(a){b.push({name:e.getActivityTypeName(a),id:a})});var c=new l({data:{items:b,label:"name",identifier:"id"}});this._select=new h({store:c,required:!1},a)},getQuery:function(){var a=this._select.get("value");return a?"Type eq '"+a+"'":""},reset:function(){this._select.set("value",null)},getState:function(){return{value:this._select.get("value")}},applyState:function(a){a&&this._select.set("value",a.value||"")}});return a("Sage.UI.ActivityList",[c],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",connections:[],constructor:function(a){this.connections=[]},startup:function(){var a=[{id:"SchedulePhoneCall",imageClass:"icon_Schedule_Meeting_16x16",handler:function(){Sage.Link.scheduleMeeting()},alternateText:q.addMeetingText},{id:"ScheduleMeeting",imageClass:"icon_Schedule_Call_16x16",handler:function(){Sage.Link.schedulePhoneCall()},alternateText:q.addPhoneCallText},{id:"ScheduleToDo",imageClass:"icon_Schdedule_To_Do_16x16",handler:function(){Sage.Link.scheduleToDo()},alternateText:q.addToDoText},{id:this.id+"_Help",imageClass:"icon_Help_16x16",handler:function(){d.openHelp("activitiestab")},alternateText:q.helpText}],b=[{field:"$key",editable:!1,hidden:!0,unhidable:!0,id:"id",formatter:function(a,b){return["<div id=",a," >",a,"</ div>"].join("")}},{field:"$key",label:q.completeText,sortable:!1,width:"90px",type:e.activityCompleteCell},{field:"Type",label:q.typeText,type:e.activityTypeCell,width:"90px",filterConfig:{widgetType:u}},{field:"StartDate",label:q.startDateText,type:f,useFiveSecondRuleToDetermineTimeless:!0,getTimeless:!0,width:"100px",filterConfig:{widgetType:i,label:q.dateRangeText}},{field:"Duration",label:q.durationText,type:e.activityDurationCell,width:"40px"},{field:"Leader",label:q.leaderText,type:e.activityLeaderCell,width:"90px",filterConfig:{widgetType:o,lookupStructure:[{label:q.firstNameText||"First Name",field:"UserInfo.FirstName",sortable:!0,width:"200px",editable:!1,propertyType:"System.string",excludeFromFilters:!1,defaultValue:""},{label:q.lastNameText||"Last Name",field:"UserInfo.LastName",sortable:!0,width:"200px",editable:!1,propertyType:"System.string",excludeFromFilters:!1,defaultValue:""},{label:q.typeText||"Type",field:"Type",sortable:!0,width:"100px",editable:!1,propertyType:"System.string",excludeFromFilters:!1,defaultValue:""}],lookupGridOptions:{contextualCondition:function(){return"((Type ne 'Template') and (Type ne 'Retired'))"},contextualShow:"",selectionMode:"single"},lookupStoreOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.FirstName"}]},getQuery:function(){var a=this._lup.get("selectedObject");return a&&a.$key?"Leader eq '"+a.$key.substr(0,12)+"'":""}}}];this._addEntitySpecificColumns(b),b.push({field:"Description",label:q.descriptionText,width:"200px",filterConfig:{widgetType:k}}),b.push({field:"Category",label:q.categoryText,width:"75px"});var c=function(a,b){var c=a,d=!1;b&&"Sage.SalesLogix.Activity.Entities.ActivityAttendee"==b.$descriptor&&b.Activity?(c=b.Activity.$key,d=b.Activity.Recurring):b&&(d=b.Recurring),Sage.Link.editActivity(c,d)},g=this.parentRelationshipName,h={id:"ActivityList",tools:a,columns:b,previewField:"Notes",fullNoteField:"LongNotes",minRowsPerPage:20,storeOptions:{select:["ContactId","OpportunityId","AccountId","LeadId","Description","Duration","Recurring","Type","Category","Timeless","Notes"],include:["Leader","$descriptors"],resourceKind:"activities",service:p.getSDataService("system"),where:function(){var a=g;return"ContactId"===g||"LeadId"===g?a="ActivityAttendees.EntityId":"AccountId"===g&&(a=g),m.substitute("(Type eq 'atAppointment' or Type eq 'atPhoneCall' or Type eq 'atToDo' or Type eq 'atPersonal') and ${0} eq '${1}'",[a,d.getCurrentEntityId(),g])},queryArgs:{_expandRecurrences:"false"}},slxContext:{workspace:this.workspace,tabId:this.tabId},sort:[{attribute:"StartDate"}],placeHolder:this.placeHolder,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"extended",rowSelection:!0};this.onBeforeCreateGrid(h);var j=this._grid=new s(h);j.createGridView(),j.grid.onRowDblClick=function(a){c(a.id,a.data)},this.connections.push(dojo.subscribe("/entity/activity/create",this,this.onActivityChanges)),this.connections.push(dojo.subscribe("/entity/activity/change",this,this.onActivityChanges)),this.connections.push(dojo.subscribe("/entity/activity/delete",this,this.onActivityChanges)),dojo.connect(j,"destroy",this,this.destroy)},onActivityChanges:function(a){this._grid.refresh()},destroy:function(){for(var a=0;a<this.connections.length;a++)dojo.unsubscribe(this.connections.pop());this.inherited(arguments)},_addEntitySpecificColumns:function(a){switch(Sage.Services.getService("ClientEntityContext").getContext().EntityType){case"Sage.Entity.Interfaces.IAccount":case"Sage.Entity.Interfaces.IOpportunity":a.push({field:"ContactName",label:q.contactText,width:"100px",type:g,idField:"ContactId",pageName:"Contact"});break;case"Sage.Entity.Interfaces.IContact":a.push({field:"OpportunityName",label:q.opportunityText,width:"100px",type:g,idField:"OpportunityId",pageName:"Opportunity"})}},onBeforeCreateGrid:function(a){}})})},"Sage/UI/NotesHistoryList":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","Sage/Utility/Activity","Sage/Utility/Email","Sage/Utility","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/SlxLink","Sage/UI/SLXPreviewGrid/Filter/Text","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/data/ItemFileReadStore","dijit/form/FilteringSelect","dijit/form/CheckBox","Sage/UI/Dialogs","dojo/string","dojo/date/locale","dojo/promise/all","dojo/i18n!./nls/NotesHistoryList","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","Sage/Utility/Workspace","Sage/UI/GridView","dojo/on","Sage/Data/SDataServiceRegistry","put-selector/put","Sage/Mingle/MingleSupport","Sage/Mingle/UserService","Sage/Mingle/Feeds","Sage/UI/Controls/Phone"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){var F=u("Sage.UI.HistoryTypeFilterWidget",[a,b,c,k],{_progressPercentage:null,templateString:["<div>",'<div dojoAttachPoint="selectContainer"></div>','<div class="chkShowDBChanges checkboxRight">','<label for="chkShowDbChanges">',s.showDbChangesText,"</label>",'<input id="chkShowDbChanges" type="checkbox" dojoType="dijit.form.CheckBox" dojoAttachPoint="chkShowDbChanges" />',"</div>","</div>"].join(""),buildRendering:function(){this.inherited(arguments);var a=[];dojo.forEach(["atAppointment","atPhoneCall","atToDo","atNote","atPersonal","atInternal","atSchedule","atEMail","atDoc","atFax","atLiterature","atDatabaseChange"],function(b){a.push({name:d.getActivityTypeName(b),id:d.getActivityTypeEnumValue(b)})});var b=new l({data:{items:a,label:"name",identifier:"id"}});this._select=new m({store:b,required:!1},this.selectContainer)},getQuery:function(){var a=this.chkShowDbChanges.get("checked"),b=this._select.get("value");if(b){var c='(Type eq "'+b+'"';return a&&(c+=' or Type eq "'+d.getActivityTypeEnumValue("atDatabaseChange")+'"'),c+=")"}return a?"":'Type ne "'+d.getActivityTypeEnumValue("atDatabaseChange")+'"'},reset:function(){this._select.set("value",""),this.chkShowDbChanges.set("checked",!1)},getState:function(){return{value:this._select.get("value"),showDBChanges:this.chkShowDbChanges.get("checked")}},applyState:function(a){a&&(this._select.set("value",a.value||""),this.chkShowDbChanges.set("checked",a.showDBChanges))}}),G=u(j,{getQuery:function(){var a,b=function(a,b){return a?(a.constructor!==Date&&(a=Date.parse(a)),b&&a.setUTCDate(a.getUTCDate()+1),f.Convert.toIsoStringFromDate(a)):""},c=function(a,b){if(!a)return"";a.constructor!==Date&&(a=Date.parse(a));var c=function(a){return a<10?"0"+a:a};return[a.getFullYear(),"-",c(a.getMonth()+1),"-",c(a.getDate()),b?"T23:59:59Z":"T00:00:00Z"].join("")},d=this.dteFrom.get("value"),e=this.dteTo.get("value"),g="";return d||e?(e&&d?(a=["((((Timeless eq true and CompletedDate eq OriginalDate) and (CompletedDate ge '${0}' and CompletedDate lt '${1}'))) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and (CompletedDate ge '${2}' and CompletedDate lt '${3}')))"].join(""),g=p.substitute(a,[c(d),c(e,!0),b(d),b(e,!0)])):d&&!e?(a=["((((Timeless eq true and CompletedDate eq OriginalDate) and CompletedDate ge '${0}')) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and CompletedDate ge '${1}'))"].join(""),g=p.substitute(a,[c(d),b(d)])):e&&!d&&(a=["((((Timeless eq true and CompletedDate eq OriginalDate) and CompletedDate lt '${0}')) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and CompletedDate lt '${1}'))"].join(""),g=p.substitute(a,[c(e,!0),b(e,!0)])),g):""}});return u("Sage.UI.NotesHistoryList",[a],{placeholder:"",parentRelationshipName:"",workspace:"",tabId:"",connections:[],options:{includeAttendees:!0},constructor:function(a){v.mixin(this,a),this.connections=[]},startup:function(){var a=[{field:"$key",editable:!1,hidden:!0,unhidable:!0,id:"id",formatter:function(a,b){return["<div id=",a," >",a,"</ div>"].join("")}},{field:"Type",label:s.typeText,type:d.historyTypeCell,width:"90px",filterConfig:{widgetType:F}},{field:"CompletedDate",label:s.dateTimeText,type:g,useFiveSecondRuleToDetermineTimeless:!0,width:"100px",filterConfig:{widgetType:G,label:s.dateRangeText}},{field:"UserName",label:s.userText,width:"90px",filterConfig:{widgetType:i}}];this._addEntitySpecificColumns(a),a.push({field:"Description",label:s.regardingText,width:"200px",filterConfig:{widgetType:i}}),a.push({field:"Result",label:s.resultText,width:"90px"}),a.push({field:"Category",label:s.categoryText,width:"90px"});var b=(this.options.includeAttendees?s.helpText:s.helpText,[{id:"SendEmail",imageClass:"icon_Send_Write_email_16x16",tooltip:s.sendEmailText,handler:this.onSendEmailClick,scope:this},{id:"SendWord",imageClass:"icon_Document_Type_16x16",tooltip:s.sendToWordText,handler:this.onSendToWordClick,scope:this},{id:"NewNote",imageClass:"icon_New_Note_16x16",tooltip:s.addNoteText,handler:Sage.Link.newNote,scope:Sage.Link},{id:"CompleteActivity",imageClass:"icon_complete_activity_16x16",tooltip:s.completeAnActivityText,handler:Sage.Link.scheduleCompleteActivity,scope:Sage.Link},{id:"Help",imageClass:"icon_Help_16x16",handler:function(){f.openHelp("noteshistory")},tooltip:s.helpText}]);"undefined"!=typeof mingleConfig&&mingleConfig.isMingleEnabled&&b.splice(0,0,{id:"ShareOnMingle",imageClass:"icon_Mingle_16x16",tooltip:"Share on Ming.le",handler:this.onShareOnMingle,scope:this});var c=this.parentRelationshipName,e=this,h={id:"NotesHistoryList",tools:b,columns:a,storeOptions:{service:z.getSDataService("dynamic"),select:["Type","CompletedDate","UserName","AccountName","ContactName","ContactId","OpportunityName","OpportunityId","Description","Notes","Timeless","Result"],resourceKind:"history",where:function(){var a="${0} eq '${1}'";return e.options.includeAttendees&&("ContactId"!==c&&"LeadId"!==c||(a="((HistoryAttendees.EntityId eq  '${1}') or (${0} eq  '${1}' and  HistoryAttendees.IsPrimary eq true) or (${0} eq  '${1}' and  HistoryAttendees.EntityId eq null))")),p.substitute(a,[c,f.getCurrentEntityId()])}},sort:[{attribute:"CompletedDate",descending:!0}],slxContext:{workspace:this.workspace,tabId:this.tabId},previewField:"Notes",fullNoteField:"LongNotes",placeHolder:this.placeHolder,columnHiding:!0,columnResizing:!0,columnReordering:!0,rowSelection:!0,selectionMode:"extended"};this.onBeforeCreateGrid(h);var j=this._grid=new x(h);j.createGridView(),j.grid.onRowDblClick=function(a){Sage.Link.editHistory(a.id,a.data)},this.connections.push(dojo.subscribe("/entity/history/create",this,this.onHistoryChanges)),this.connections.push(dojo.subscribe("/entity/history/change",this,this.onHistoryChanges)),this.connections.push(dojo.subscribe("/entity/history/delete",this,this.onHistoryChanges)),dojo.connect(j,"destroy",this,this.destroy)},onHistoryChanges:function(a){this._grid.refresh()},destroy:function(){for(var a=0;a<this.connections.length;a++)dojo.unsubscribe(this.connections.pop());this.inherited(arguments)},_addEntitySpecificColumns:function(a){switch(Sage.Services.getService("ClientEntityContext").getContext().EntityType){case"Sage.Entity.Interfaces.IAccount":case"Sage.Entity.Interfaces.IOpportunity":a.push({field:"ContactName",label:s.contactText,width:"100px",type:h,idField:"ContactId",pageName:"Contact"});break;case"Sage.Entity.Interfaces.IContact":a.push({field:"OpportunityName",label:s.opportunityText,width:"100px",type:h,idField:"OpportunityId",pageName:"Opportunity"})}},getQueryConditions:function(){var a="",b=[];for(var c in this._grid.grid.selection)b.push("id eq '"+c+"'");b.length>0&&(a=b.join(" or "));var d=this._grid._filter?this._grid._filter.getQuery():this._grid.query;return""!==d&&null!==d&&(a=""!==a?p.substitute("${0} and (${1})",[d,a]):d),a},_handleOnMingleFeedPostSuccess:function(a,b){var c={indeterminate:!1,pct:0,message:p.substitute("${0}: ${1}",[s.shared,b]),showmessage:!0,title:s.sharingToMingle,canclose:!1};v.isObject(a)?(a._progressPercentage=a._progressPercentage+1,c.pct=a._progressPercentage):c.indeterminate=!0,o.showProgressBar(c)},_handledOnMingleFeedPostFailure:function(a,b,c){var d={indeterminate:!1,pct:0,message:p.substitute(s.failedToPost,[b,c]),showmessage:!0,title:s.sharingToMingle,canclose:!1};v.isObject(a)?(a._progressPercentage=a._progressPercentage+1,d.pct=a._progressPercentage):d.indeterminate=!0,o.showProgressBar(d)},_doShareOnMingle:function(){this._grid.store.select.push("LongNotes");var a=[],b=this.getQueryConditions(),c=this;this._progressPercentage=0,o.showProgressBar({maximum:this._grid.rowCount,pct:0,message:s.pleaseWait,showmessage:!0,title:s.sharingToMingle,canclose:!1}),this._grid.store.query(b,null).forEach(function(b){var d={DisplayName:p.substitute("History: ${0}",[b.Description]),Script:p.substitute("Sage.Link.editHistory('${0}');",[b.$key])},e=B.getDrillBacks([d]),g="#"+s.accountText.replace(/\s/g,"_")+":"+b.AccountName.replace(/\s/g,"_")+"\n";b.ContactName&&(g+="#"+s.contactText.replace(/\s/g,"_")+":"+b.ContactName.replace(/\s/g,"_")+"\n"),g+=s.dateText+": ";var h=f.Convert.toDateFromString(b.CompletedDate);g+=q.format(h,{locale:Sys.CultureInfo.CurrentCulture.name})+"\n",g+=s.userText+": "+b.UserName+"\n",g+=s.regardingText+": "+b.Description+"\n\n",g+=s.notesText+":\n"+b.LongNotes;var i=new D,j={scope:c,description:b.Description,failure:c._handledOnMingleFeedPostFailure,feed:{DrillBackList:e,MessageText:g},success:c._handleOnMingleFeedPostSuccess},k=i.postUserFeed(j);a.push(k)}).then(function(){r(a).then(function(a){v.isArray(a)&&a.length>0?(mingleConfig.isDebug&&t.forEach(a,function(a){}),window.setTimeout(function(){o.closeProgressBar()},1e3),o.showInfo(s.sharedToMingle)):(window.setTimeout(function(){o.closeProgressBar()},1e3),o.showInfo(s.errorNoData))},function(a){t.forEach(a,function(a){}),window.setTimeout(function(){o.closeProgressBar()},1e3),o.showError(s.errorShareMingle)})})},onShareOnMingle:function(){if(!this._grid.grid.selection&&this._grid.rowCount>0){var a=this,b=p.substitute(s.noRecordsSelectedProcessAll,[this._grid.rowCount]);o.raiseQueryDialog(s.salesLogixPageTitle,b,function(b){!0===b&&a._doShareOnMingle()},s.yesButtonText,s.noButtonText)}else this._grid.rowCount>0?this._doShareOnMingle():o.showInfo(s.errorNoData)},onSendEmailClick:function(){this._grid.store.select.push("LongNotes");var a=this.getQueryConditions();this._grid.store.query(a,null).then(v.hitch(this,function(a){if(0===a.length)return void o.showWarning(s.pleaseSelectRecordsText);var b=dojo.map(a,function(a){var b=s.accountText+": "+a.AccountName+"\n";a.ContactName&&(b+=s.contactText+": "+a.ContactName+"\n");var c=f.Convert.toDateFromString(a.CompletedDate);return b+=s.dateText+": ",b+=q.format(c,{locale:Sys.CultureInfo.CurrentCulture.name})+"\n",b+=s.userText+": "+a.UserName+"\n",b+=s.regardingText+": "+a.Description+"\n\n",b+=s.notesText+":\n"+a.LongNotes}).join("\n\n---------------------------------------------\n\n"),c=dojo.map(a,function(a){return a.Description}).join("; ");e.writeEmail("",c,b)}))},onSendToWordClick:function(){var a=function(){if("undefined"!=typeof slxmm&&slxmm&&slxmm.com)try{return slxmm.com.create("Word.Application")}catch(a){}if(Sage.Utility.isIE)try{return new ActiveXObject("Word.Application")}catch(a){return null}return null};this._grid.store.select.push("LongNotes"),this._grid.store.select.push("Contact.WorkPhone"),this._grid.store.select.push("Contact.Address.Address1"),this._grid.store.select.push("Contact.Address.Address2"),this._grid.store.select.push("Contact.Address.CityStatePostal"),this._grid.store.select.push("Account.MainPhone"),this._grid.store.select.push("Account.TollFree");var b=7,c=this.getQueryConditions();this._grid.store.query(c,null).then(v.hitch(this,function(b){if(0===b.length)return void o.showWarning(s.pleaseSelectRecordsText);var c=a();if(!c)return void o.showWarning(s.UnableToFindWordMsg);c.Documents.Add(),c.PrintPreview=!0,c.Visible=!0,c.ActiveWindow.ActivePane.View.SeekView=9,c.Selection.TypeText(s.accountText+": "+b[0].AccountName+"\t"+s.printedOnText+": "+q.format(new Date,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})),c.ActiveWindow.ActivePane.View.SeekView=0,b[0].Contact.Address.Address1?(b[0].Account.MainPhone||b[0].Account.TollFree?(c.Selection.TypeText(s.addressText+":\t\t\t\t"+s.mainPhoneText+": "+E.prototype.formatNumberForDisplay(b[0].Account.MainPhone)+"\n"),c.Selection.TypeText(b[0].Contact.Address.Address1+"\t\t\t"+s.tollFreeText+": "+E.prototype.formatNumberForDisplay(b[0].Account.TollFree)+"\n")):(c.Selection.TypeText(s.addressText+"\n"),c.Selection.TypeText(b[0].Contact.Address.Address1+"\n")),b[0].Contact.Address.Address2&&c.Selection.TypeText(b[0].Contact.Address.Address2+"\n"),b[0].Contact.Address.CityStatePostal&&c.Selection.TypeText(b[0].Contact.Address.CityStatePostal+"\n")):(b[0].Account.MainPhone||b[0].Account.TollFree)&&(c.Selection.TypeText(s.mainPhoneText+": "+E.prototype.formatNumberForDisplay(b[0].Account.MainPhone)+"\n"),c.Selection.TypeText(s.tollFreeText+": "+E.prototype.formatNumberForDisplay(b[0].Account.TollFree)+"\n")),dojo.forEach(b,function(a){if(c.Selection.TypeText("___________________________________________________________"),c.Selection.TypeParagraph(),c.Selection.TypeParagraph(),a.ContactName&&(c.Selection.TypeText(s.contactText+":        "),c.Selection.TypeText(a.ContactName),c.Selection.TypeParagraph(),c.Selection.TypeText(s.contactPhoneText+":        "),c.Selection.TypeText(E.prototype.formatNumberForDisplay(a.Contact.WorkPhone)),c.Selection.TypeParagraph()),a.OpportunityName&&(c.Selection.TypeText(s.opportunityText+":        "),c.Selection.TypeText(a.OpportunityName),c.Selection.TypeParagraph()),a.CompletedDate){var b=f.Convert.toDateFromString(a.CompletedDate);c.Selection.TypeText(s.dateText+":        "),c.Selection.TypeText(q.format(b,{locale:Sys.CultureInfo.CurrentCulture.name})),c.Selection.TypeParagraph()}a.UserName&&(c.Selection.TypeText(s.userText+":        "),c.Selection.TypeText(a.UserName),c.Selection.TypeParagraph()),c.Selection.TypeText(s.typeText+":        "),c.Selection.TypeText(d.getActivityTypeName(a.Type)),c.Selection.TypeParagraph(),a.Description&&(c.Selection.TypeText(s.regardingText+":        "),c.Selection.TypeText(a.Description),c.Selection.TypeParagraph()),a.LongNotes&&(c.Selection.TypeText(s.notesText+":        "),c.Selection.TypeText(a.LongNotes),c.Selection.TypeParagraph())}),c.Selection.TypeText("___________________________________________________________"),c.Selection.TypeParagraph(),c.Visible=!0}));for(var e=b;e>0;e--)this._grid.store.select.pop()},onBeforeCreateGrid:function(a){}})})},"Sage/Mingle/UserService":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/cookie","dojo/i18n!./nls/UserService","dojo/request/xhr","dojo/string"],function(a,b,c,d,e,f,g){var h=a("Sage.Mingle.UserService",null,{_initialized:!1,ErrorList:null,Status:null,UserDetailList:null,_getCurrentUser:function(){return this.UserDetailList&&c.isArray(this.UserDetailList)&&1===this.UserDetailList.length?this.UserDetailList[0]:null},_init:function(){var d=this,e=new b;if(this._initialized)return e.resolve(d),e.promise;var h="",i=this.getApiAccessToken();return""===i?(e.reject("Invalid ION API access token."),e.promise):(h="Bearer "+i,f(g.substitute("${0}/User/Detail",[mingleConfig.ionApiEndpoint]),{method:"GET",handleAs:"json",preventCache:!0,withCredentials:!0,headers:{Authorization:h,Accept:"application/json"}}).then(function(b){c.isObject(b)&&b.hasOwnProperty("UserDetailList")?(a.safeMixin(d,b),e.resolve(d),d._initialized=!0):e.reject(b)},function(a,b){e.reject(a);var c={message:"There was an error attempting to retrieve the Ming.le user detail."};return Sage.Utility.ErrorHandler.handleHttpError(a,b,c),a}),e.promise)},constructor:function(b){a.safeMixin(this,b),c.mixin(this,e)},currentUser:function(){var a=new b;return this.ready()?a.resolve(this._getCurrentUser()):this._init().then(function(b){a.resolve(b._getCurrentUser())},function(b){a.reject(b)}),a.promise},getApiAccessToken:function(){var a="",b=d("IonApiAuth");return""!==b&&b.indexOf("|")>-1&&(a=b.split("|")[0]),a},getFederatedIdentity:function(){var a=new b;return this.currentUser().then(function(b){a.resolve(b.UserName)},function(b){a.reject(b)}),a.promise},ready:function(){return this._initialized}});return Sage.Services.hasService("MingleUserService")||Sage.Services.addService("MingleUserService",new h),h})},"Sage/Mingle/Feeds":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/json","dojo/string","Sage/Mingle/Request","Sage/Mingle/UserService"],function(a,b,c,d,e,f,g,h){return b("Sage.Mingle.Feeds",null,{AlertCategoryList:null,AlertList:null,ErrorList:null,Feeds:null,MoreAlerts:!1,MoreFeeds:!1,MoreTasks:!1,RefreshIdentifier:null,Status:null,TaskCategoryList:null,TaskList:null,_buildFeedsUrl:function(a){var b=f.substitute("${0}/User/${1}/Feeds",[mingleConfig.ionApiEndpoint,a.UserGUID]);return b},getUserFeeds:function(){var a=this,b=new c;return Sage.Services.hasService("MingleUserService")||Sage.Services.addService("MingleUserService",new h),Sage.Services.getService("MingleUserService").currentUser().then(function(c){return(new g).get(a._buildFeedsUrl(c)).then(function(a){d.isObject(a)?b.resolve(a):b.reject(a)},function(a,c){b.reject(a);var d={message:"There was an error attempting to retrieve the Ming.le user feeds."};return Sage.Utility.ErrorHandler.handleHttpError(a,c,d),a}),b.promise},function(a){}),b.promise},postUserFeed:function(a){if(!d.isObject(a))throw Error("The postUserFeed options is invalid.");var e={AdditionalMessageText:null,DrillBackList:[],ImageData:null,Location:null,MessageText:null,PrivacyLevel:2,SocialObjectList:[],TaggedList:{GroupList:[],UserList:[]},TargetList:{GroupList:[],UserList:[]},TaskItemType:1,UploadIdentifier:"null",WebPartMessage:!1};a.feed&&b.safeMixin(e,a.feed);var i=this,j=new c;return Sage.Services.hasService("MingleUserService")||Sage.Services.addService("MingleUserService",new h),Sage.Services.getService("MingleUserService").currentUser().then(function(b){return(new g).post(i._buildFeedsUrl(b),e).then(function(b){if(d.isObject(b))if(1===b.Status)d.isFunction(a.success)&&a.success(a.scope||null,a.description||"Posted feed"),j.resolve(b);else if(d.isArray(b.ErrorList)&&b.ErrorList.length>0){var c=f.substitute("The post of the user feed to Ming.le failed. ${err.Message} (Code=${err.Code}; Severity=${err.Severity}).",{err:b.ErrorList[0]});d.isFunction(a.failure)&&a.failure(a.scope||null,a.description||"Failed to post feed",c),j.reject(c)}else d.isFunction(a.failure)&&a.failure(a.scope||null,a.description||"Failed to post feed","Unknown error"),j.reject(b);else d.isFunction(a.failure)&&a.failure(a.scope||null,a.description||"Failed to post feed","The Ming.le user feed is invalid."),j.reject(b)},function(b,c){d.isFunction(a.failure)&&a.failure(a.scope||null,a.description||"Failed to post feed",b),j.reject(b);var e={message:"There was an error attempting to retrieve the Ming.le user feeds."};return Sage.Utility.ErrorHandler.handleHttpError(b,c,e),b}),j.promise},function(a){}),j.promise}})})},"Sage/Mingle/Request":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/json","dojo/cookie","dojo/request/xhr","dojo/string","dojo/i18n!./nls/UserService","Sage/Mingle/UserService"],function(a,b,c,d,e,f,g,h,i){return a("Sage.Mingle.Request",null,{_request:function(e){var h=new b;Sage.Services.hasService("MingleUserService")||Sage.Services.addService("MingleUserService",new i);var j=Sage.Services.getService("MingleUserService");return j.currentUser().then(function(b){var i="",k=j.getApiAccessToken();if(""===k)return h.reject("Invalid ION API access token."),h.promise;i="Bearer "+k;var l={Authorization:i,Accept:"application/json"},m=!0===e.post,n={method:m?"POST":"GET",handleAs:"json",preventCache:!0,withCredentials:!0,headers:l};m&&(n.headers["Content-Type"]="application/json",n.data=d.toJson(e.data));var o;return e.substitutions?(o=c.clone(b),a.safeMixin(o,e.substitutions)):o=b,f(g.substitute(e.url,{obj:o}),n).then(function(a){var b;if(c.isObject(a)){if(mingleConfig.isDebug&&a.hasOwnProperty("$resources"))return void h.resolve(a);a.hasOwnProperty("Status")&&a.Status===1?h.resolve(a):(b=a.hasOwnProperty("ErrorList")&&c.isArray(a.ErrorList)&&a.ErrorList.length>0?g.substitute("The Ming.le request failed: ${err.Message} (Code=${err.Code}; Severity=${err.Severity}).",{err:a.ErrorList[0]}):"There was an unknown error associated with the Ming.le response.",h.reject(b))}else b="The Ming.le response is invalid.",h.reject(b)},function(a,b){var e=null;if(c.isObject(a)&&c.isObject(a.response)&&c.isString(a.response.text)&&(e=d.fromJson(a.response.text)),e&&e.hasOwnProperty(e.error.hasOwnProperty("message"))?h.reject(e.error.message):h.reject(a),mingleConfig.isDebug){var f={message:"There was an unexpected error."};Sage.Utility.ErrorHandler.handleHttpError(a,b,f)}return a}),h.promise}),h.promise},constructor:function(b){a.safeMixin(this,b),c.mixin(this,h)},_makeRequest:function(b,d){return c.isObject(d)&&a.safeMixin(b,d),this._request(b)},get:function(a,b){return this._makeRequest({url:a,post:!1,data:null},b)},post:function(a,b,c){return this._makeRequest({url:a,post:!0,data:b},c)}})})},"Sage/UI/DashboardGroupListConfigurationProvider":function(){define(["Sage/UI/GroupListConfigurationProvider","dojo/string","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.DashboardGroupListConfigurationProvider",[a],{formatPredicate:function(a){return a.family=a.family&&a.family.toUpperCase(),b.substitute("name eq '${name}' and upper(family) eq '${family}'",a)},_createConfigurationForList:function(a){var b,c=Sage.Services.getService("ClientGroupContext");return c&&(b=c.getContext()),b.CurrentTable="",this.inherited(arguments)},_getListContextMenuItems:function(){return[]},_onListContext:function(a){}})})},"Sage/UI/GroupListConfigurationProvider":function(){
define(["Sage/_ConfigurationProvider","Sage/Data/GroupLayoutSingleton","Sage/Services/_ServiceMixin","Sage/Utility/_LocalStorageMixin","Sage/Data/SDataStore","Sage/UI/SummaryFormatterScope","dijit/MenuSeparator","dijit/Menu","dijit/MenuItem","Sage/UI/PopupMenuItem","Sage/UI/MenuItem","dojo/_base/lang","dojo/_base/declare","dojo/i18n","Sage/Utility/Groups","Sage/Store/SData","dojo/store/DataStore","dojo/store/Observable"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return m("Sage.UI.GroupListConfigurationProvider",[a,c,d],{serviceMap:{groupContextService:"ClientGroupContext"},service:null,_hasAdHocList:!1,ROWS_PER_PAGE:100,_currentConfiguration:!1,constructor:function(a){this._adHocOnlyMenuItems=[],this._menuItems=[],this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},_onGroupContextChanged:function(){this.onConfigurationChange()},requestConfiguration:function(a){var c=new b,d=l.hitch(this,this._onRequestConfigurationSuccess,a||{}),e=l.hitch(this,this._onRequestConfigurationFailure,a||{}),f=this.getCurrentGroup();c.getGroupLayout(this.formatPredicate(f),d,e,f.$key)},_onRequestConfigurationSuccess:function(a,b){a.success&&a.success.call(a.scope||this,this._createConfiguration(b),a,this)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},_createConfigurationForList:function(a){var b,c=a.layout,d=[],f=[],g=Sage.Services.getService("ClientGroupContext");g&&g.getContext(),a.keyField&&d.push(a.keyField);var h=o.getGridStructure(c);f=h.structure,d=h.select;var i=new Sage.SData.Client.SDataNamedQueryRequest(this.service);i.setQueryName("execute"),i.setResourceKind("groups"),i.setContractName("system"),i.getUri().setCollectionPredicate(this.formatPredicate(a));var j=new e({service:this.service,resourceKind:"groups",resourcePredicate:this.formatPredicate(a),queryName:"execute",select:d,include:[],count:this.ROWS_PER_PAGE}),k=new p({service:this.service,request:i,contractName:"system",resourceKind:"groups",resourcePredicate:this.formatPredicate(a),include:[],select:d,where:null,idProperty:a.keyField,queryArgs:{count:this.ROWS_PER_PAGE},scope:this}),m={};for(b=0;b<a.tableAliases.length;b++)m[a.tableAliases[b].tableName.toUpperCase()]=a.tableAliases[b].alias;return{structure:f,store:k,rowsPerPage:this.ROWS_PER_PAGE,queryOptions:k.queryOptions,layout:a.layout,tableAliases:m,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext,onNavigateToDefaultItem:l.hitch(a,function(a){if(a){var b=this.keyField,c=this.entityName,d=a[b];d&&Sage.Link.entityDetail(c,d)}}),id:a.$key,dojoxStore:j}},_getCurrentGroupID:function(){var a,b,c=Sage.Services.getService("ClientGroupContext");return c&&(a=c.getContext(),b=a.CurrentGroupID),b},_onListContext:function(a){a.preventDefault();for(var b=Sage.Services.getService("ClientGroupContext"),c=b.getContext(),d=0;d<this._adHocOnlyMenuItems.length;d++)this._adHocOnlyMenuItems[d].set("disabled",!c.isAdhoc);this._ensureAdHocListMenu()},_getListContextMenuItems:function(){var a,b=this._getCurrentGroupID();if(this._menuItems.length>0)return this._menuItems;if(!Sage.UI.DataStore.ContextMenus||!Sage.UI.DataStore.ContextMenus.listContextMenu)return[];this._menuItems=[],this._adHocOnlyMenuItems=[];for(var c=Sage.UI.DataStore.ContextMenus.listContextMenu.items,d=c.length,e=0;e<d;e++){var f=c[e];if(""===f.displayName)this._menuItems.push(new g);else{var h=f.href;h.indexOf("javascript:")<0&&(h=dojo.string.substitute("javascript:${0}()",[h])),h.indexOf("addSelectionsToGroup")>0?(a=this._createAddToAdHocMenuItem(f),a.arrowWrapper&&dojo.style(a.arrowWrapper,"visibility","")):a=new i({id:b+"_"+e,label:f.text||"...",icon:f.img,title:f.tooltip||"",ref:h,onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}}),this._menuItems.push(a),h.indexOf("removeSelectionsFromGroup")>0&&this._adHocOnlyMenuItems.push(a)}}return this._menuItems},_createAddToAdHocMenuItem:function(a){return this._adHocMenu=new h,this._adHocMenu.addChild(new i({label:"loading..."})),this._adHocMenuHref=a.href,new j({label:a.text||"...",icon:a.img,title:a.tooltip||"",popup:this._adHocMenu})},_ensureAdHocListMenu:function(){if(!this._hasAdHocList){this._hasAdHocList=!0;Sage.Services.getService("ClientGroupContext").getAdHocGroupList(function(a){this._adHocMenu.destroyDescendants();for(var b=0;b<a.length;b++){var c=a[b];this._adHocMenu.addChild(new i({label:c.$descriptor||c.name,icon:"",title:c.$descriptor||c.name,ref:dojo.string.substitute(this._adHocMenuHref,{groupId:c.$key}),onClick:function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}}))}},this)}},_createConfigurationForSummary:function(a){if(!this.summaryOptions)return!1;a||(a=this._currentConfiguration);var b,c,d=new p({service:this.service,resourceKind:"groups",resourcePredicate:this.formatPredicate(a),queryName:"execute",idProperty:a.keyField}),e={select:[a.keyField],include:[]},g=[{field:a.keyField,formatter:"formatSummary",width:"100%",name:"Summary View",canResize:function(){return!1}}],h=["Sage"],i=this.summaryOptions.templateLocation,j=i&&i.split("/");for(b=0;b<j.length-1;b++)h.push(j[b]);return c="dojo/i18n!"+h.join("/")+"/nls/"+j[j.length-1].replace(".html",""),require([c],l.hitch(this,function(a){l.mixin(this,a)})),{columns:g,layout:a.layout,store:d,rowHeight:200,rowsPerPage:50,queryOptions:e,formatterScope:new f({requestConfiguration:{mashupName:this.summaryOptions.mashupName||"SummaryViewQueries",queryName:this.summaryOptions.queryName||""},templateLocation:this.summaryOptions.templateLocation||""}),keyField:a.keyField}},_createConfigurationForDetail:function(a){return!!this.detailConfiguration&&{requestConfiguration:{mashupName:this.detailConfiguration.mashupName||"SummaryViewQueries",queryName:this.detailConfiguration.queryName||""},templateLocation:this.detailConfiguration.templateLocation}},_createConfiguration:function(a){this._currentConfiguration=a;var b=this.getFromLocalStorage("LISTPANEL_VIEWSTATE",this._getViewNS());return{list:this._createConfigurationForList(a),summary:"summary"==b&&this._createConfigurationForSummary(a),detail:this._createConfigurationForDetail(a)}},formatPredicate:function(a){return"LOOKUPRESULTS"===a.$key?(a.family=a.family&&a.family.toUpperCase(),a.name="Lookup Results",dojo.string.substitute("name eq '${name}' and upper(family) eq '${family}'",a)):"'"+a.$key+"'"},getCurrentGroup:function(){var a=Sage.Services.getService("ClientGroupContext"),b=a&&a.getContext(),c={name:"My Accounts",family:"Account",$key:""};return b&&(c={name:b.CurrentName,family:b.CurrentFamily,$key:b.CurrentGroupID}),c},_getViewNS:function(){return Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getMainViewName()},_getMainViewName:function(){if(this._mainViewName)return this._mainViewName;var a=Sage.Services.getService("ClientGroupContext"),b=-1,c=null;return a&&(c=a.getContext())&&(b=c.CurrentEntity),b}})})},"Sage/Utility/Groups":function(){define(["Sage/Groups/GroupLookup","Sage/UI/Controls/GridParts/Columns/Boolean","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Numeric","Sage/UI/Controls/GridParts/Columns/OwnerType","Sage/UI/Controls/GridParts/Columns/Phone","Sage/UI/Controls/GridParts/Columns/UserType","Sage/UI/Controls/GridParts/Columns/Currency","Sage/UI/Controls/GridParts/Columns/SlxLink","dojo/_base/array","dojo/string"],function(a,b,c,d,e,f,g,h,i,j,k){return Sage.namespace("Utility.Groups"),dojo.mixin(Sage.Utility.Groups,{showMainLookupFor:function(a,b){var c=Sage.Services.getService("GroupLookupManager");c&&(void 0===a?c.showLookup():c.showLookup({family:a,returnTo:b||!1}))},getGridStructure:function(a,l){var m,n={},o=[],p=[],q=Sage.Services.getService("ClientGroupContext");return q&&(m=q.getContext()),a.length>0&&j.forEach(a,function(a,j){if(p.push(a.alias),a.visible)if(a.webLink&&!l){var n=a.dataPath,q=n.lastIndexOf("!")>-1?n.substring(0,n.lastIndexOf("!")).substring(n.lastIndexOf(".")+1):n.substring(0,n.lastIndexOf(":")),r=q+"ID";if(("ACCOUNT"===a.alias||a.alias.match(/A\d+_ACCOUNT/gi))&&(q="ACCOUNT",r="ACCOUNTID"),m&&q===m.CurrentTable&&(q=m.CurrentEntity,r=m.CurrentTableKeyField),2===a.alias.lastIndexOf("_")){var s=a.alias.split("_");r=k.substitute("${0}_${1}",[s[0],r])}p.push(r),o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:i,pageName:q,idField:r,_layout:a,width:a.width+"px"})}else{a.alias.match(/^email$/i)&&(a.format="Email"),"DateTime"===a.fieldType&&(a.format="DateTime");var t=a.align&&"right"===a.align.toLowerCase()?"alignright":"alignleft "+a.cssClass||"";switch(a.format){case"Owner":var u=a.alias+"NAME";p.push(u),o.push({field:u,className:t,label:a.caption,width:a.width+"px"});break;case"User":var v=a.alias+"NAME";p.push(v),o.push({field:v,className:t,label:a.caption,width:a.width+"px"});break;case"DateTime":-1!==a.displayPath.indexOf("Activity")&&(c.prototype.useFiveSecondRuleToDetermineTimeless=!0),o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:c,className:t,datePattern:a.formatString,dateTimeType:a.dateTimeType,width:a.width+"px"});break;case"Percent":o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:d,className:t,constraints:{places:Sage.Utility.getPrecision(a.formatString),round:-1},fercent:!0,formatType:"Percent",width:a.width+"px",isWholeNumberPercent:!1});break;case"Currency":o.push({field:a.alias,property:a.caption,label:a.caption,type:h,className:t,constraints:{places:Sage.Utility.getPrecision(a.formatString),currencySymbol:Sage.Utility.getCurrencySymbol(a.formatString),showCurrencySymbol:!0},width:a.width+"px"});break;case"Fixed":o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:d,className:t,constraints:{places:Sage.Utility.getPrecision(a.formatString),round:-1},fercent:!0,formatType:"%"===a.formatString[a.formatString.length-1]?"Percent":"Number",width:a.width+"px",isWholeNumberPercent:"Percent"!==a.format});break;case"Boolean":o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:b,className:t,formatString:a.formatString,width:a.width+"px"});break;case"Email":o.push({field:a.alias,property:a.propertyPath,label:a.caption,className:t,formatter:function(a){return a?dojo.string.substitute("<a href=mailto:${0}>${0}</a>",[Sage.Utility.htmlEncode(a)]):""},width:a.width+"px"});break;case"OwnerType":o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:e,className:t,width:a.width+"px"});break;case"Phone":o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:f,className:t,width:a.width+"px"});break;case"PickList Item":var w=a.alias+"TEXT";p.push(w),o.push({field:w,className:t,property:a.propertyPath,label:a.caption,width:a.width+"px"});break;case"User Type":o.push({field:a.alias,property:a.propertyPath,label:a.caption,type:g,className:t,width:a.width+"px"});break;default:o.push({field:a.alias,label:a.caption,width:a.width+"px",className:t,sortable:"Memo"!==a.fieldType})}}}),o.push({field:this.keyAlias,hidden:!0,width:"0px",label:"",unhidable:!0}),n.structure=o,n.select=p,n}}),Sage.Utility.Groups})},"dojo/store/DataStore":function(){define(["../_base/lang","../_base/declare","../Deferred","../_base/array","./util/QueryResults","./util/SimpleQueryEngine"],function(a,b,c,d,e,f){return b("dojo.store.DataStore",null,{target:"",constructor:function(b){if(a.mixin(this,b),!1 in b){var c;try{c=this.store.getIdentityAttributes()}catch(a){}this.idProperty=!c||!idAttributes[0]||this.idProperty}var d=this.store.getFeatures();d["dojo.data.api.Read"]||(this.get=null),d["dojo.data.api.Identity"]||(this.getIdentity=null),d["dojo.data.api.Write"]||(this.put=this.add=null)},idProperty:"id",store:null,queryEngine:f,_objectConverter:function(a){function b(a){for(var e={},f=c.getAttributes(a),g=0;g<f.length;g++){var h=f[g],i=c.getValues(a,h);if(i.length>1){for(var j=0;j<i.length;j++){var k=i[j];"object"==typeof k&&c.isItem(k)&&(i[j]=b(k))}k=i}else{var k=c.getValue(a,h);"object"==typeof k&&c.isItem(k)&&(k=b(k))}e[f[g]]=k}return d in e||!c.getIdentity||(e[d]=c.getIdentity(a)),e}var c=this.store,d=this.idProperty;return function(c){return a(c&&b(c))}},get:function(a,b){var d,e,f=new c;if(this.store.fetchItemByIdentity({identity:a,onItem:this._objectConverter(function(a){f.resolve(d=a)}),onError:function(a){f.reject(e=a)}}),void 0!==d)return null==d?void 0:d;if(e)throw e;return f.promise},put:function(a,b){b=b||{};var d=void 0!==b.id?b.id:this.getIdentity(a),e=this.store,f=this.idProperty,g=new c;return void 0===d?(e.newItem(a),e.save({onComplete:function(){g.resolve(a)},onError:function(a){g.reject(a)}})):e.fetchItemByIdentity({identity:d,onItem:function(c){if(c){if(!1===b.overwrite)return g.reject(new Error("Overwriting existing object not allowed"));for(var d in a)d!=f&&a.hasOwnProperty(d)&&e.getValue(c,d)!=a[d]&&e.setValue(c,d,a[d])}else{if(!0===b.overwrite)return g.reject(new Error("Creating new object not allowed"));e.newItem(a)}e.save({onComplete:function(){g.resolve(a)},onError:function(a){g.reject(a)}})},onError:function(a){g.reject(a)}}),g.promise},add:function(a,b){return(b=b||{}).overwrite=!1,this.put(a,b)},remove:function(a){var b=this.store,d=new c;return this.store.fetchItemByIdentity({identity:a,onItem:function(a){try{null==a?d.resolve(!1):(b.deleteItem(a),b.save(),d.resolve(!0))}catch(a){d.reject(a)}},onError:function(a){d.reject(a)}}),d.promise},query:function(b,f){var g,h=new c(function(){g.abort&&g.abort()});h.total=new c;var i=this._objectConverter(function(a){return a});return g=this.store.fetch(a.mixin({query:b,onBegin:function(a){h.total.resolve(a)},onComplete:function(a){h.resolve(d.map(a,i))},onError:function(a){h.reject(a)}},f)),e(h)},getIdentity:function(a){return a[this.idProperty]}})})},"Sage/UI/DateTextBox":function(){define(["dijit/form/DateTextBox","Sage/Utility","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.DateTextBox",a,{_getValueAttr:function(){var a=this.inherited(arguments);return a?b.Convert.toJsonStringFromDate(a):a},_setValueAttr:function(a,c,d){Sage.Utility.Convert.isDateString(a)&&(a=b.Convert.toDateFromString(a)),this.inherited(arguments,[a,c,d])}})})},"Sage/UI/Filters/CheckBoxFilter":function(){define(["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ActionMixin","dojo/string","dojo/on","dojo/_base/lang","dojo/dom-construct","./EditFilterItems","dojo/_base/array","dojo/query","dojo/dom-attr","dojo/i18n!./nls/CheckBoxFilter","Sage/Utility","Sage/Utility/Filters","dojo/json","dijit/registry","dojo/_base/declare","dojo/_base/Deferred","dojo/dom-class","dojo/_base/connect"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return t("Sage.UI.Filters.CheckBoxFilter",[a,b,e,f,d],{attributeMap:{content:{node:"listNode",type:"innerHTML"}},serviceMap:{groupContextService:"ClientGroupContext",systemDataService:{type:"sdata",name:"system"}},actionsFrom:"click",widgetsInTemplate:!1,widgetTemplate:new Simplate(['<div class="filter-type-checkbox filter-collapsed">','<h3 data-action="toggleExpand" data-dojo-attach-point="filterNameNode">{%: $.filter.$descriptor || $.filter.filterName %}',"</h3>",'<ul class="filter-loading-indicator"><li><span>{%: $.loadingText %}</span></li></ul>','<a href="#" class="filter-clear" data-dojo-attach-point="clearLinkNode">{%: $.clearText %}</a>','<span class="filter-sep" data-dojo-attach-point="linkSep"> | </span>','<a href="#" class="filter-edit-items" data-dojo-attach-point="moreLinkNode">{%: $.moreText %}</a>','<ul class="filter-list" data-dojo-attach-point="listNode"></ul>',"</div>"]),itemTemplate:new Simplate(['<li data-action="toggleSelect" class="{%= $.selected ? "filter-selected" : "" %}" data-name="{%= $.name %}" data-selected="{%= !!$.selected %}" ','role="checkbox" aria-checked="{%= !!$.selected %}">',"<div>",'<span class="p-selection">&nbsp;</span>','<span class="p-label">{%: $$._formatLabelText($.$descriptor, $.name) %}</span>',"{% if ($.value > -1) { %}",'&nbsp;<span class="p-spacer">(</span>','<span class="p-count">{%: $.value %}</span>','<span class="p-spacer"> {%: $.ofText %} </span>','<span class="p-total">{%: $.value %}</span>','<span class="p-spacer">)</span>',"{% } %}","</div>","</li>"]),_activeFilterCount:0,_loaded:!1,_selected:null,_ranges:null,_filterGroup:null,_filterSubscriptions:null,appliedValues:null,parent:null,_originalActiveFilter:"",nullName:"SLX_NULL",emptyName:"SLX_EMPTY",filterGroup:"default",filter:null,store:null,editFilterItems:null,editFilterItemsHandle:null,output:null,entries:[],expanded:!1,FILTER_UPDATE_DELAY:1e3,lazyUpdateCounts:null,count:1e3,loading:!0,groupId:"",constructor:function(){this.inherited(arguments),this.output=[],this.entries=[],i.mixin(this,o)},postMixInProperties:function(){this.inherited(arguments),this._selected={};var a=this._isRangeFilter();a&&(this.store.request.setQueryArg("orderby",""),this.compileRanges(a.ranges)),this.expanded?(this.expanded=!1,setTimeout(i.hitch(this,this._toggleExpand),500)):this.appliedValues?setTimeout(i.hitch(this,this._loadItems),500):this.resolveDeferred(),this.store&&this.store.request&&this.store.request.getQueryArg&&(this._originalActiveFilter=this.store.request.getQueryArg("_activeFilter"))},postCreate:function(){this.inherited(arguments);var a=!1;if(this.configurationProvider.getFilterFormatter){this.configurationProvider.getFilterFormatter(this.filter)&&(a=!0)}!this._isDistinctFilter()||a?(j.destroy(this.moreLinkNode),j.destroy(this.linkSep)):this.editFilterItemsHandle=h(this.moreLinkNode,"click",i.hitch(this,this._moreLinkClicked)),h(this.clearLinkNode,"click",i.hitch(this,this._clearLinkClicked));var b=this.filter.$key+"_editFilterItems",c=s.byId(b);this.editFilterItems=c||new k({id:b,store:this.store,filter:this.filter,filterPanel:this.parent,parent:this})},_clearLinkClicked:function(){var a,b=m("li.filter-selected",this.listNode);l.forEach(b,function(b){b.click?b.click():(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a))})},_moreLinkClicked:function(a){this._originalActiveFilter&&(this.editFilterItems.baseFilter=this._originalActiveFilter),this.editFilterItems.showDialog(),a.cancelBubble=!0},uninitialize:function(){this.inherited(arguments),this.editFilterItems&&this.editFilterItems.destroy(!1),this.editFilterItemsHandle&&this.editFilterItemsHandle.remove()},_setFilterGroupAttr:function(a){this._filterSubscriptions&&l.forEach(this._filterSubscriptions,function(a){this.unsubscribe(a)},this),this._filterGroup=a,this._filterSubscriptions=[],this._filterSubscriptions.push(this.subscribe(g.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onChange),this.subscribe(g.substitute("/ui/filters/${0}/clear",[this._filterGroup]),this._onClear),this.subscribe(g.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),i.hitch(this,this._onRefresh)))},_onRefresh:function(a,b,c){this.appliedValues=a,this.updateCounts()},_updateActiveFilters:function(){var a=this._getFilterManager(),b=[],c=!1;a&&(c=a.createQuery()),this.expanded&&(!1===c?c="":b.push(c),this._originalActiveFilter&&b.push(this._originalActiveFilter),c=b.length>1?b.join(" AND "):b.join(""),this.store.request.setQueryArg("_activeFilter",c))},refresh:function(){this._loaded&&(l.forEach(m("*",this.listNode),function(a){j.destroy(a)}),this.requestData())},_onChange:function(a,b,c,d){b=this._transformFilterItemName(b),d!==this&&a.$key===this.filter.$key&&m(g.substitute('> [data-name="${0}"]',[b]),this.listNode).forEach(function(a){n.set(a,"data-selected",(!!c).toString()),v.toggle(a,"filter-selected",!!c)})},_onClear:function(a,b){b===this||a&&a.$key!==this.filter.$key||m('> [data-selected="true"]',this.listNode).forEach(function(a){n.set(a,"data-selected","false"),v.toggle(a,"filter-selected",!1)})},_getFilterGroupAttr:function(){return this._filterGroup},_formatLabelText:function(a,b){if(b===this.nullName)return this.nullText;if(b===this.emptyName)return this.emptyText;if("Create Date"===this.filter.$descriptor)switch(b){case"Yesterday":a=this.filteroptionYesterday;break;case"Today":a=this.filteroptionToday;break;case"ThisWeek":a=this.filteroptionThisWeek;break;case"ThisMonth":a=this.filteroptionThisMonth;break;case"ThisQuarter":a=this.filteroptionThisQuarter;break;case"ThisYear":a=this.filteroptionThisYear;break;case"LastWeek":a=this.filteroptionLastWeek;break;case"LastMonth":a=this.filteroptionLastMonth;break;case"LastQuarter":a=this.filteroptionLastQuarter;break;case"LastYear":a=this.filteroptionLastYear;break;case"WeekToDate":a=this.filteroptionWeektoStart;break;case"MonthToDate":a=this.filteroptionMonthtoStart;break;case"QuarterToDate":a=this.filteroptionQtrtoStart;break;case"YearToDate":a=this.filteroptionYeartoStart}else if("Price"===this.filter.$descriptor)switch(b){case"0 to 999":a=this.filteroption0To999;break;case"1000 to 9999":a=this.filteroption1000To9999;break;case"10,000 to 99,999":a=this.filteroption10000To99999;break;case"100,000 to 499,999":a=this.filteroption100000To499999;break;case"500,000 to 999,999":a=this.filteroption500000To999999;break;case"1,000,000 and higher":a=this.filteroption1000000AndHigher}else if("Active"===this.filter.$descriptor)switch(b){case"T":a=this.filteroptionT}return a||b},_isDistinctFilter:function(){return this.filter&&this.filter.details&&this.filter.details.distinctFilter},_isRangeFilter:function(){return this.filter&&this.filter.details&&this.filter.details.rangeFilter},compileRanges:function(a){var b=0;for(this._ranges={},b=0;b<a.length;b++)this._ranges[this._transformFilterItemName(a[b].rangeName)]=a[b]},_saveExpandState:function(){var a=this.parent._configuration._hiddenFilters||{},b=this.parent._configuration._hiddenFiltersKey,c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+this.filter.filterName;a[e]||(a[e]={expanded:!1,hidden:!1}),a[e].expanded=this.expanded,q.setHiddenFilters(b,r.stringify(a))},toggleExpand:function(a,b,c){this._toggleExpand(),this._saveExpandState()},_toggleExpand:function(){this.expanded=!this.expanded,this.domNode&&v.toggle(this.domNode,"filter-collapsed"),this._loadItems()},_loadItems:function(){this._loaded?this.updateCounts():(this._loaded=!0,this.requestData())},toggleSelect:function(a,b,c){var d=/^true$/i.test(a.selected),e=a.name,f=!d&&(this._isRangeFilter()?this._ranges[e]:e);this.onSelectionChange(this.filter,e,f,this),n.set(c,"data-selected",(!d).toString()),n.set(c,"aria-checked",(!d).toString()),v.toggle(c,"filter-selected",!d)},onSelectionChange:function(a,b,c,d){w.publish(g.substitute("/ui/filters/${0}/change",[this._filterGroup]),[a,b,c,d])},updateCounts:function(){this.lazyUpdateCounts||(this.lazyUpdateCounts=p.debounce(i.hitch(this,function(){this.expanded&&(m("li[data-name] div span.p-count",this.listNode).forEach(function(a){a.innerHTML="0"}),this._updateActiveFilters(),this._doUpdateCounts())}),this.FILTER_UPDATE_DELAY)),this.lazyUpdateCounts()},_doUpdateCounts:function(){this.store.fetch({onComplete:i.hitch(this,this._updateCountsInPlace),count:this.count})},requestData:function(){this.loading&&this.domNode&&(v.add(this.domNode,"filter-loading"),this.set("content","")),this.store.fetch({onError:i.hitch(this,this._onFetchError),onComplete:i.hitch(this,this._onFetchComplete),count:this.count})},_onFetchComplete:function(a,b){this._processFetchResult(a,b),this.resolveDeferred()},_onFetchError:function(a,b){this.domNode&&v.remove(this.domNode,"filter-loading"),this.resolveDeferred()},isFilterItemHidden:function(a){var b=this.parent._configuration._hiddenFilters||{},c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+this.filter.filterName,f=!1;return b[e]&&(f=l.some(b[e].items,function(b){return b===a})),f},_updateCountsInPlace:function(a,b){var c=0,d=null,e=a.length;for(c=0;c<e;c++)d=a[c],d.name=this._transformFilterItemName(d.name),m('li[data-name="'+d.name+'"]',this.listNode).forEach(function(a){m("div span.p-count",a).forEach(function(a){a.innerHTML=d.value})});this._finishedLoading()},_processFetchResult:function(a,b){var c=0,d=null,e=a.length,f=!1;for(c=0;c<e;c++)d=a[c],d.name=this._transformFilterItemName(d.name),(!1===this.isFilterItemHidden(d.name)||this._isRangeFilter())&&(f=this.appliedValues&&this.appliedValues[this.filter.$key]&&!!this.appliedValues[this.filter.$key][d.name],d.selected=f||this.appliedValues&&!!this.appliedValues[d.name],d.ofText=this.ofText,this.output.push(this.itemTemplate.apply(d,this)),this.entries.push(d));this._fixMissingItems(),this.domNode&&this.set("content",this.output.join("")),this._clearOutputEntries(),this._updateCountsInPlace(a)},_transformFilterItemName:function(a){var b=a;return null===a?b=this.nullName:""===a&&(b=this.emptyName),b?b.trim():b},_fixMissingItems:function(){var a,b,c;for(b in this.appliedValues)this.appliedValues.hasOwnProperty(b)&&(c=this.appliedValues[b],l.some(this.entries,function(a){return a.name===b})||(a={name:"",$descriptor:"",selected:!0,value:0},a.name=b,a.$descriptor=c,a.ofText=this.ofText,"string"==typeof a.$descriptor&&(this.output.push(this.itemTemplate.apply(a,this)),this.entries.push(a))))},_clearOutputEntries:function(){this.output=[],this.entries=[]},_finishedLoading:function(){this.loading=!1,this.store.request.setQueryArg("_activeFilter",this._originalActiveFilter||""),this.domNode&&v.remove(this.domNode,"filter-loading")},_getFilterManager:function(){var a=this.parent.filterManager;a||this.parent._configuration.getFilterManager&&(a=this.parent._configuration.getFilterManager());var b=Sage.Services.getService("ClientGroupContext"),c=b&&b.getContext();return this.groupId!=c.CurrentGroupID&&(a=null),a},resolveDeferred:function(){this.deferred&&(this.deferred=this.deferred.resolve())}})})},"Sage/UI/Filters/EditFilterItems":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","Sage/UI/ImageButton","dijit/form/CheckBox","dijit/form/TextBox","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/parser","dojo/text!./templates/EditFilterItems.html","dojo/i18n!./nls/EditFilterItems"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return i("Sage.UI.Filters.EditFilterItems",[a,b,c],{templateString:r,widgetsInTemplate:!0,id:"editFilterItems",store:null,activeFilters:"",filter:null,checkBoxes:null,allItems:null,filterPanel:null,parent:null,formatter:null,baseFilter:"",selectAllText:"Select All",findItemText:"Find Item:",findText:"Find",clearText:"Clear",dialogTitle:"Edit Filter Items",okText:"OK",cancelText:"Cancel",count:1e3,loading:!1,handles:null,mainHandles:null,safeCheck:!0,checkBoxTemplate:new Simplate(['<input id="{%: $.id %}" ','name="{%: $.name %}" ','data-dojo-type="dijit.form.CheckBox" ',"data-dojo-props=\"label: '{%: $.name %}'\" ",'class="editFilterCheckBox" />','<label for="{%: $.id %}">{%: $.itemName %}</label><br />']),constructor:function(a){this.inherited(arguments),this.checkBoxes=[],this.allItems=[],this.handles=[],this.mainHandles=[],s&&(this.selectAllText=s.selectAllText,this.clearText=s.clearText,this.findItemText=s.findItemText,this.findText=s.findText,this.dialogTitle=s.dialogTitle,this.okText=s.okText,this.cancelText=s.cancelText)},postCreate:function(){this.inherited(arguments),this.mainHandles.push(this.textFind.on("keyDown",k.hitch(this,this._onFindMouseDown))),this.mainHandles.push(this.checkAll.on("click",k.hitch(this,this._onCheckAllClick)))},_onCheckAllClick:function(){this.safeCheck&&(this.checkAll.checked?this._onSelectAllClick():this._onClearAllClick())},showDialog:function(){this.requestData(),k.mixin(this.dialogNode,new n),this.dialogNode.createHelpIconByTopic("editFilterItems"),this.dialogNode.show()},hideDialog:function(){this.dialogNode.hide()},_onClearAllClick:function(){j.forEach(this.checkBoxes,function(a){var b=a.get("label");-1===j.indexOf(this.allItems,a.get("label"))&&this.allItems.push(b),a.set("checked",!1)},this)},_onSelectAllClick:function(){j.forEach(this.checkBoxes,function(a){var b=(a.get("label"),j.indexOf(this.allItems,a.get("label")));b>-1&&this.allItems.splice(b,1),a.set("checked",!0)},this)},_onClearClick:function(){this.textFind.set("value",""),this._onFindClick()},_onCancelClick:function(){this.textFind.set("value",""),this._onFindClick(),this.dialogNode.hide(),this.allItems=[]},_onOKClick:function(){this.textFind.set("value",""),this._onFindClick();var a=this.filterPanel._configuration._hiddenFilters||{},b=this.filterPanel._configuration._hiddenFiltersKey,c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+this.filter.filterName;a[e]||(a[e]={expanded:!1,hidden:!1}),a[e].items=this.allItems,o.setHiddenFilters(b,p.stringify(a)),this.parent&&this.parent.refresh(),this.dialogNode.hide(),this.allItems=[]},uninitialize:function(){this.contentNode&&(j.forEach(this.mainHandles,function(a){a.remove()}),this._destroyContent(),this.checkBoxes=null,this.allItems=null,this.checkAll.destroy(!1),this.buttonCancel.destroy(!1),this.buttonOK.destroy(!1),this.buttonFind.destroy(!1),this.textFind.destroy(!1),this.dialogNode.destroy(!1),this.inherited(arguments))},requestData:function(){this.loading||(this._destroyContent(),this.checkBoxes=[],this.activeFilters=this.store.request.getQueryArg("_activeFilter"),this.store.request.setQueryArg("_activeFilter",this.baseFilter)),this.loading=!0,this.store.fetch({onError:k.hitch(this,this._onFetchError),onComplete:k.hitch(this,this._onFetchComplete),count:this.count})},_onFindMouseDown:function(a){13===a.keyCode&&this._onFindClick()},_onFindClick:function(){if(!this.loading){var a=this.textFind.get("value");this.store.where=a?'displayName like "%'+this.textFind.get("value")+'%"':"",this.requestData()}},_destroyContent:function(){this.contentNode&&(j.forEach(m.findWidgets(this.contentNode),function(a){a.destroy(!1)}),j.forEach(this.handles,function(a){a.remove()}),this.handles=[],this.checkBoxes=[],this.contentNode.innerHTML="")},_onFetchError:function(){},_onCheckClick:function(a){var b,c=this.self,d=this.checkBox,e=d&&d.get("label");d.checked?(b=j.indexOf(c.allItems,e))>-1&&c.allItems.splice(b,1):(c._safeCheckAll(!1),c.allItems.push(e))},_safeCheckAll:function(a){this.safeCheck=!1,this.checkAll.set("checked",a),this.safeCheck=!0},_onFetchComplete:function(a){var b,c,d,e,f,g,h,i=[],j=a.length;for(f=0;f<j;f++)b=a[f],h=b.$descriptor,this.formatter&&(h=this.formatter(b.$descriptor)),c=h+" ("+b.value+")",d=[this.filter.filterName,f].join("_"),(g=b.name&&b.name.trim())&&(g=g.replace("'","\\'"),i.push(this.checkBoxTemplate.apply({id:d,name:g,itemName:c})));e=l.toDom(i.join("")),l.place(e,this.contentNode,"last"),this._finishedLoading()},_finishedLoading:function(){this.activeFilters&&this.store.request.setQueryArg("_activeFilter",this.activeFilters),this._parseCheckBoxes(),this.setupCheckState(),this.loading=!1},_parseCheckBoxes:function(){if(this.contentNode){var a;q.parse(this.contentNode),a=m.findWidgets(this.contentNode),j.forEach(a,function(a){a.on("click",k.hitch({checkBox:a,self:this},this._onCheckClick)),this.checkBoxes.push(a)},this)}},setupCheckState:function(){var a=this.filterPanel._configuration._hiddenFilters||{},b=Sage.Services.getService("ClientGroupContext"),c=b&&b.getContext(),d=c.CurrentEntity+"_"+this.filter.filterName,e=0===this.allItems.length;a[d]&&(j.forEach(this.checkBoxes,function(b){var c,f,g=b.get("label");c=j.indexOf(a[d].items,g),f=j.indexOf(this.allItems,g),c>-1?(b.set("checked",!1),-1===f&&e&&this.allItems.push(g)):b.set("checked",!0),f=j.indexOf(this.allItems,g),f>-1?b.set("checked",!1):b.set("checked",!0)},this),this._safeCheckAll(0===this.allItems.length))}})})},"Sage/UI/Filters/LookupFilter":function(){
define(["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/_ActionMixin","dojo/string","dojo/_base/lang","dojo/_base/array","dijit/form/Select","dijit/form/TextBox","dojo/on","dojo/i18n!../nls/ConditionManager","dojo/_base/declare","Sage/Utility/Filters","dojo/json"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return m("Sage.UI.Filters.LookupFilter",[a,b,e,d],{widgetsInTemplate:!0,widgetTemplate:new Simplate(['<div class="filter-type-checkbox filter-collapsed">','<h3 data-action="toggleExpand" data-dojo-attach-point="filterNameNode">{%: $.filter.$descriptor || $.filter.filterName %}',"</h3>",'<ul class="filter-list" data-dojo-attach-point="listNode">','<select class="lookup-filter-operators" data-dojo-attach-point="operators" data-dojo-type="dijit.form.Select"></select><br/>','<input class="filter-lookup-input" data-dojo-attach-point="textInput" data-dojo-type="dijit.form.TextBox" />',"</ul>","</div>"]),_loaded:!1,_filterGroup:"default",appliedValues:null,_hasApplied:!1,operatorsMapping:{Equal:l.equalTo,NotEqual:l.notEqualTo,LessThan:l.lessThan,LessThanEqual:l.equalOrLessThan,GreaterThan:l.greaterThan,GreaterThanEqual:l.equalOrGreaterThan,StartsWith:l.startingWith,EndsWith:l.endsWith,Contains:l.contains},filter:null,store:null,_autoSearchHandle:null,_autoSearchDelay:1e3,_selectedOp:"Contains",postMixInProperties:function(){this.inherited(arguments),this.expanded?(this.expanded=!1,setTimeout(g.hitch(this,this._toggleExpand),500)):this.appliedValues&&setTimeout(g.hitch(this,this._loadItems),500)},postCreate:function(){this.inherited(arguments),this.textInput.on("keyDown",g.hitch(this,this._onInputKeyDown)),this.appliedValues&&this.appliedValues.value&&(this.textInput.set("value",this.appliedValues.value.value),this._selectedOp=this.appliedValues.value.operator,this._hasApplied=!0),this.resolveDeferred()},_setupAutoSearch:function(){this._autoSearchHandle>0&&window.clearTimeout(this._autoSearchHandle),this._autoSearchHandle=setTimeout(g.hitch(this,function(){this.doSearch()}),this._autoSearchDelay)},uninitialize:function(){this.inherited(arguments)},toggleExpand:function(a,b,c){this._toggleExpand(),this._saveExpandState()},_toggleExpand:function(){this.expanded=!this.expanded,this.domNode&&dojo.toggleClass(this.domNode,"filter-collapsed"),this._loadItems()},_loadItems:function(){var a=this.filter&&this.filter.details&&this.filter.details.userLookupFilter&&this.filter.details.userLookupFilter.operators;this.operators&&(this._loaded||(this._loaded=!0,h.forEach(a,g.hitch(this,function(a){var b;b=!1,a===this._selectedOp&&(b=!0),this.operators.addOption({disabled:!1,label:this.operatorsMapping[a],selected:b,value:a})})),this.operators.set("value",this._selectedOp)))},_saveExpandState:function(){var a=this.parent._configuration._hiddenFilters||{},b=this.parent._configuration._hiddenFiltersKey,c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+this.filter.filterName;a[e]||(a[e]={expanded:!1,hidden:!1}),a[e].expanded=this.expanded,n.setHiddenFilters(b,o.stringify(a))},_onInputKeyDown:function(a){13===a.keyCode||0===a.keyCode?(this.doSearch(),a.preventDefault(),a.stopPropagation()):this._setupAutoSearch()},doSearch:function(){var a,b=this.filter.filterName,c=this;a={operator:this.operators.get("value"),value:this.textInput.get("value")},this.onSelectionChange(b,a,c)},onSelectionChange:function(a,b,c){dojo.publish(f.substitute("/ui/filters/${0}/change",[this._filterGroup]),[this.filter,a,b,c])},resolveDeferred:function(){this.deferred&&(this.deferred=this.deferred.resolve())}})})},"Sage/UI/Filters/EditFilters":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/text!./templates/EditFilters.html","dojo/i18n!./nls/EditFilters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return g("Sage.UI.Filters.EditFilters",[a,b,c],{templateString:p,widgetsInTemplate:!0,id:"editFilters",store:null,filterPanel:null,checkBoxes:null,selectAllText:"Select All",dialogTitle:"Edit Filters",okText:"OK",cancelText:"Cancel",constructor:function(){var a=h.getLocalization("Sage.UI.Filters","EditFilters");this.inherited(arguments),this.checkBoxes=[],a&&(this.selectAllText=a.selectAllText,this.okText=a.okText,this.cancelText=a.cancelText,this.dialogTitle=a.dialogTitle)},postCreate:function(){this.inherited(arguments),this.checkAll.on("click",j.hitch(this,this._onCheckAllClick))},_onCheckAllClick:function(){this.checkAll.checked?this._onSelectAllClick():this._onClearAllClick()},showDialog:function(){this.requestData(),j.mixin(this.dialogNode,new m),this.dialogNode.createHelpIconByTopic("editFilters"),this.dialogNode.show()},hideDialog:function(){this.dialogNode.hide()},uninitialize:function(){this._destroyContent(),this.checkAll.destroy(!1),this.buttonCancel.destroy(!1),this.buttonOK.destroy(!1),this.dialogNode.destroy(!1),this.checkBoxes=null,this.inherited(arguments)},requestData:function(){this._destroyContent(),this.store&&this.store.fetch({onItem:j.hitch(this,this._onFetchItem),onError:j.hitch(this,this._onFetchError),onComplete:j.hitch(this,this._onFetchComplete)})},_onClearAllClick:function(){i.forEach(this.checkBoxes,function(a){a.set("checked",!1)})},_onSelectAllClick:function(){i.forEach(this.checkBoxes,function(a){a.set("checked",!0)})},_onCancelClick:function(){this.dialogNode.hide()},_onOKClick:function(){this.dialogNode.hide();var a=this.filterPanel._configuration._hiddenFilters,b=this.filterPanel._configuration._hiddenFiltersKey,c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext();i.forEach(this.checkBoxes,function(b){var c;c=d.CurrentEntity+"_"+b.get("label"),a[c]?a[c].hidden=!b.get("checked"):a[c]={expanded:!1,hidden:!b.get("checked"),items:[]}}),n.setHiddenFilters(b,o.stringify(a)),this.filterPanel.refreshFilters(!1)},_destroyContent:function(){this.contentNode&&(i.forEach(l.findWidgets(this.contentNode),function(a){a.destroy(!1)}),this.checkBoxes=[],this.contentNode.innerHTML="")},_onFetchError:function(){},_onFetchItem:function(a){var b=(a.filterType,a.filterName),c=a.$descriptor||a.filterName,d=b+"_check",e=new f({id:d,label:b});k.place(e.domNode,this.contentNode,"last"),k.create("br",{},e.domNode,"after"),k.create("label",{for:d,innerHTML:c},e.domNode,"after"),e.on("click",j.hitch(this,this._onCheckClick)),this.checkBoxes.push(e)},_onCheckClick:function(a){a.target&&!1===a.target.checked&&this.checkAll.set("checked",!1)},_onFetchComplete:function(){this.startup(),this.setupCheckState()},setupCheckState:function(){var a=this.filterPanel._configuration._hiddenFilters||{},b=(n.getHiddenFiltersKey(),Sage.Services.getService("ClientGroupContext")),c=b&&b.getContext(),d=!1;this.checkAll.set("checked",!0),this._onSelectAllClick(),i.forEach(this.checkBoxes,function(b){var e;e=c.CurrentEntity+"_"+b.get("label"),a[e]&&(a[e].hidden?(b.set("checked",!1),d=!0):b.set("checked",!0))}),this.checkAll.set("checked",!d)}})})},"Sage/UI/Filters/EntityManagerEditFilters":function(){define(["dojo/string","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/text!./templates/EditFilters.html","dojo/i18n!./nls/EditFilters","Sage/Services/UserOptions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return h("Sage.UI.Filters.EntityManagerEditFilters",[b,c,d],{templateString:q,widgetsInTemplate:!0,id:"editFilters",store:null,filterPanel:null,checkBoxes:null,selectAllText:"Select All",dialogTitle:"Edit Filters",okText:"OK",cancelText:"Cancel",constructor:function(){var a=i.getLocalization("Sage.UI.Filters","EditFilters");this.inherited(arguments),this.checkBoxes=[],a&&(this.selectAllText=a.selectAllText,this.okText=a.okText,this.cancelText=a.cancelText,this.dialogTitle=a.dialogTitle)},postCreate:function(){this.inherited(arguments),this.checkAll.on("click",k.hitch(this,this._onCheckAllClick))},_onCheckAllClick:function(){this.checkAll.checked?this._onSelectAllClick():this._onClearAllClick()},showDialog:function(){this.requestData(),k.mixin(this.dialogNode,new n),this.dialogNode.createHelpIconByTopic("editFilters"),this.dialogNode.show()},hideDialog:function(){this.dialogNode.hide()},uninitialize:function(){this._destroyContent(),this.checkAll.destroy(!1),this.buttonCancel.destroy(!1),this.buttonOK.destroy(!1),this.dialogNode.destroy(!1),this.checkBoxes=null,this.inherited(arguments)},requestData:function(){this._destroyContent();var b,c,d,e,f;if(c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),b=a.substitute("METADATA_FILTERS_${0}_${1}",[d.CurrentEntity,d.CurrentGroupID]),e=sessionStorage.getItem(b)){f=p.parse(e);for(var g=0;g<f.length;g++)this._onFetchItem(f[g])}else{var h=[{$key:"DisplayName",displayName:"Display Name",filterName:"Display Name",propertyName:"$descriptor",$descriptor:"Display Name",filterType:"comboWithArgument",details:{userLookupFilter:{operators:["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{$key:"EntityName",displayName:"Name",filterName:"Entity Name",propertyName:"name",$descriptor:"Name",filterType:"comboWithArgument",details:{userLookupFilter:{operators:["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{$key:"ModifiedDate",displayName:"Modified Date",filterName:"ModifiedDate",propertyName:"$updated",$descriptor:"Modified Date",filterType:"checkedList",propertyDataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5",details:{rangeFilter:{characters:0,ranges:[{displayName:"Today",lower:":todaystart",rangeName:"Today",upper:":todayend"},{displayName:"This Week",lower:":thisweekstart",rangeName:"ThisWeek",upper:":thisweekend"},{displayName:"This Month",lower:":thismonthstart",rangeName:"ThisMonth",upper:":thismonthend"},{displayName:"This Quarter",lower:":thisquarterstart",rangeName:"ThisQuarter",upper:":thisquarterend"},{displayName:"This Year",lower:":thisyearstart",rangeName:"ThisYear",upper:":thisyearend"},{displayName:"Last Week",lower:":lastweekstart",rangeName:"LastWeek",upper:":lastweekend"},{displayName:"Last Month",lower:":lastmonthstart",rangeName:"LastMonth",upper:":lastmonthend"},{displayName:"Last Quarter",lower:":lastquarterstart",rangeName:"LastQuarter",upper:":lastquarterend"},{displayName:"Last Year",lower:":lastyearstart",rangeName:"LastYear",upper:":lastyearend"},{displayName:"Week to Date",lower:":thisweekstart",rangeName:"WeektoDate",upper:":todayend"},{displayName:"Month to Date",lower:":thismonthstart",rangeName:"MonthtoDate",upper:":todayend"},{displayName:"Quarter to Date",lower:":thisquarterstart",rangeName:"QtrtoDate",upper:":todayend"},{displayName:"Year to Date",lower:":thisyearstart",rangeName:"YeartoDate",upper:":todayend"},{displayName:"Older",lower:null,rangeName:"Older",upper:":beforelastyearend"}]}}},{$key:"HasMeasure",displayName:"Measure",filterName:"HasMeasure",propertyName:"filters.filterType",$descriptor:"Has Metric",filterType:"checkedList",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",details:{distinctFilter:{characters:0}}},{$key:"HasFilter",displayName:"Filter",filterName:"HasFilter",propertyName:"filters.filterType",$descriptor:"Has Filter",filterType:"checkedList",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",details:{distinctFilter:{characters:0}}}];sessionStorage.setItem(b,p.stringify(h))}this._onFetchComplete()},_onClearAllClick:function(){j.forEach(this.checkBoxes,function(a){a.set("checked",!1)})},_onSelectAllClick:function(){j.forEach(this.checkBoxes,function(a){a.set("checked",!0)})},_onCancelClick:function(){this.dialogNode.hide()},_onOKClick:function(){this.dialogNode.hide();var a=this.filterPanel._configuration._hiddenFilters,b=this.filterPanel._configuration._hiddenFiltersKey,c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext();j.forEach(this.checkBoxes,function(b){var c;c=d.CurrentEntity+"_"+b.get("label"),a[c]?a[c].hidden=!b.get("checked"):a[c]={expanded:!1,hidden:!b.get("checked"),items:[]}}),o.setHiddenFilters(b,p.stringify(a)),this.filterPanel.refreshFilters(!1)},_destroyContent:function(){this.contentNode&&(j.forEach(m.findWidgets(this.contentNode),function(a){a.destroy(!1)}),this.checkBoxes=[],this.contentNode.innerHTML="")},_onFetchError:function(){},_onFetchItem:function(a){var b=(a.filterType,a.filterName),c=a.displayName||a.filterName,d=b+"_check",e=new g({id:d,label:b});l.place(e.domNode,this.contentNode,"last"),l.create("br",{},e.domNode,"after"),l.create("label",{for:d,innerHTML:c},e.domNode,"after"),e.on("click",k.hitch(this,this._onCheckClick)),this.checkBoxes.push(e)},_onCheckClick:function(a){a.target&&!1===a.target.checked&&this.checkAll.set("checked",!1)},_onFetchComplete:function(){this.startup(),this.setupCheckState()},setupCheckState:function(){var a=this.filterPanel._configuration._hiddenFilters||{},b=(o.getHiddenFiltersKey(),Sage.Services.getService("ClientGroupContext")),c=b&&b.getContext(),d=!1;this.checkAll.set("checked",!0),this._onSelectAllClick(),j.forEach(this.checkBoxes,function(b){var e;e=c.CurrentEntity+"_"+b.get("label"),a[e]&&(a[e].hidden?(b.set("checked",!1),d=!0):b.set("checked",!0))}),this.checkAll.set("checked",!d)}})})},"Sage/UI/Filters/FilterPanel":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/UI/Filters/CheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EditFilters","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/on","dojo/i18n!./nls/FilterPanel","dojo/has","dojo/_base/sniff","dojo/ready","dojo/json","dojo/DeferredList","dojo/_base/Deferred","dojo/string","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return i("Sage.UI.Filters.FilterPanel",[a,b,d,c],{serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"}},knownFilterTypes:{checkedList:f,comboWithArgument:g},widgetsInTemplate:!1,widgetTemplate:new Simplate(['<div class="filter-panel" data-dojo-attach-point="containerNode">','<div class="filter-edit"><span class="activity-type-link" data-dojo-attach-point="clearAllFiltersNode">{%= $.clearText %}</span> | <span class="activity-type-link" data-dojo-attach-point="editFiltersNode">{%= $.editText %}</span></div>','<div class="filter-summary" data-dojo-attach-point="filterSummaryNode">{%= $.noneText %}</div>',"</div>"]),_filterGroup:null,_filterSubscriptions:null,_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:!0,store:null,filterGroup:"default",filterManager:null,_appliedFilters:null,_isApplyingConfig:!1,_isFirstLoad:!0,_editFilters:null,_editFiltersHandle:null,_isFetchingData:!1,constructor:function(){var a=Sage.Utility.getValue(window,"Sage.UI.DataStore.Filters");a&&a[this.filterGroup]&&(this._appliedSet=a[this.filterGroup].applied),o&&(this.editText=o.editText,this.noneText=o.noneText,this.clearText=o.clearText),this._appliedFilters=[],dojo.subscribe("/group/context/changed",l.hitch(this,function(){this._isApplyingConfig=!1,this._isFetchingData=!1,this._isFirstLoad=!0}))},postCreate:function(){this.inherited(arguments),this.startup()},startup:function(){this.inherited(arguments),!this._configurationProvider&&this._configurationProviderType&&this.set("configurationProvider",new this._configurationProviderType),this.autoConfigure&&this.requestConfiguration()},uninitialize:function(){this.inherited(arguments),this._editFilters&&(this._editFilters.destroy(),this._editFiltersHandle.remove()),this._configurationProvider&&this._configurationProvider.destroy()},_setFilterGroupAttr:function(a){this._filterSubscriptions&&dojo.forEach(this._filterSubscriptions,function(a){this.unsubscribe(a)},this),this._filterGroup=a,this._filterSubscriptions=[],this._filterSubscriptions.push(this.subscribe(v.substitute("/ui/filters/${0}/apply",[this._filterGroup]),l.hitch(this,this._onApply))),this._filterSubscriptions.push(this.subscribe(v.substitute("/ui/filters/${0}/change",[this._filterGroup]),l.hitch(this,this._onChange))),this.subscribe(v.substitute("/ui/filters/${0}/destroyFilters",[this._filterGroup]),l.hitch(this,function(){this.destroyDescendants(),this.filterSummaryNode.innerHTML=this.noneText}))},_getFilterGroupAttr:function(){return this._filterGroup},_onChange:function(a,b,c,d){var e,f=!1,g=!1;(a.details.lookupFilter||a.details.userLookupFilter)&&(g=!0,c&&c.hasOwnProperty("value")&&(null!==c.value&&""!==c.value||(f=!0))),k.forEach(this._appliedFilters,function(d,h){if(d&&d.filterName===a.filterName){e=this._appliedFilters[h];k.some(e.items,function(a){return a===b})?g?c&&(null!==c.value&&""!==c.value||(e.items=[],this._appliedFilters.splice(h,1))):k.forEach(e.items,function(a,c){a===b&&e.items.splice(c,1)},this):e.items.push(b),f=!0}},this),f||this._appliedFilters.push({filterName:a.filterName,displayName:a.$descriptor||a.displayName,items:[b]}),this._updateFilterSummary()},_updateFilterSummary:function(){var a=[];k.forEach(k.filter(this._appliedFilters,function(a){return void 0!==a.displayName&&""!==a.displayName&&a.items&&a.items.length>0}),function(b){a.push(b.displayName+" ("+b.items.length+")")},this),0===a.length?this.filterSummaryNode.innerHTML=this.noneText:this.filterSummaryNode.innerHTML=a.join(", ")},_onApply:function(a,b,c){var d,e,f,g;if(c&&this._configuration&&this._configuration.groupId){if(c.getContext().CurrentGroupID.toUpperCase()!==this._configuration.groupId.toUpperCase())return}this._appliedFilters=[],this._appliedSet=a;for(d in this._appliedSet)if(this._appliedSet.hasOwnProperty(d))if(g=b[d],e=this._appliedSet[d],g.details.lookupFilter||g.details.userLookupFilter)e.hasOwnProperty("value")&&this._onChange(g,g.filterName,e.value);else for(f in e)e.hasOwnProperty(f)&&this._onChange(g,f);this._configuration&&this.requestData()},_handleConfigurationChange:function(){this.requestConfiguration()},_setConfigurationProviderAttr:function(a){this._configurationConnects&&dojo.forEach(this._configurationConnects,function(a){this.disconnect(a)},this),this._configurationProvider&&this._configurationProvider!==a&&this._configurationProvider.destroy(),this._configurationProvider=a,this._configurationConnects=[],this._configurationProvider&&(this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange)),this._configurationProvider.set("owner",this),this._created&&this.autoConfigure&&this.requestConfiguration())},_getConfigurationProviderAttr:function(){return this._configurationProvider},_setConfigurationProviderTypeAttr:function(a){this._configurationProviderType=a},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType},requestConfiguration:function(){if(this._configurationProvider&&!this._isApplyingConfig){this._isApplyingConfig=!0;var a={entityName:!!this._configuration&&(this._configuration.entityName||!1),success:l.hitch(this,this._applyConfiguration)};this._configurationProvider.requestConfiguration(a)}},_applyConfiguration:function(a){this._configuration=a,this.store=a.store,this.filterManager=a.getFilterManager(),this._editFilters&&(this._editFilters.destroy(),this._editFiltersHandle.remove()),this._editFilters=new h({store:this.store,filterPanel:this}),this._editFiltersHandle=n(this.editFiltersNode,"click",l.hitch(this,function(){this._editFilters.showDialog()})),n(this.clearAllFiltersNode,"click",l.hitch(this,this._clearAllFilters)),this._appliedSet={},this._appliedFilters=[],this._updateFilterSummary(),this.requestData(function(){Sage.Services.getService("ClientGroupContext").publishFiltersApplied()}),this._ensureApplyFilterWasPublished()},_ensureApplyFilterWasPublished:function(){var a,b;a=Sage.Services.getService("ClientGroupContext"),(b=a&&a.getContext())&&b.AppliedFilterInfo&&a.publishFiltersApplied(b.AppliedFilterInfo)},_clearAllFilters:function(){var a,b=m("li.filter-selected",this.containerNode);k.forEach(b,function(b){b.click?b.click():(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a))}),b=m(".filter-lookup-input input",this.containerNode),k.forEach(b,function(b){b.value&&(b.value="",p("ie")<9?b.fireEvent("onkeydown"):(a=document.createEvent("KeyboardEvent"),a.initKeyEvent?a.initKeyEvent("keydown",!0,!0,null,!1,!1,!1,!1,13,0):a.initKeyboardEvent("keydown",!0,!0,null,13,null,null,1,null),b.dispatchEvent(a)))}),b=m(".lookup-filter-operators",this.containerNode),k.forEach(b,function(a){if(a.id){var b=w.byId(a.id);if(b&&b.options){var c="Contains";k.some(b.options,function(a,b){return 0===b&&(c=a.value),"Contains"===a.value&&(c=a.value,!0)}),b.set("value",c)}}})},refreshFilters:function(a){this._refreshing=!0,!0!==a&&this._clearAllFilters(),this.requestConfiguration()},requestData:function(a){if(!this._isFetchingData){this._isFetchingData=!0,this.destroyDescendants();var b,c,d,e,f;c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),b=v.substitute("METADATA_FILTERS_${0}_${1}",[d.CurrentEntity,d.CurrentGroupID]),e=sessionStorage.getItem(b),e?(f=s.parse(e),this._iterateFetchedItems(f),a&&a()):this.store&&this.store.fetch({onError:l.hitch(this,this._onFetchError),onComplete:l.hitch(this,this._onFetchComplete,b,a)})}},onRequestDataFailure:function(a){},_onFetchError:function(){this._isFetchingData=!1},_onFetchItem:function(a){var b=this._configuration._hiddenFilters||{},c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+a.filterName,f=!1,g=a.filterType,h=!1,i=new u,j=!1;return b[e]&&(f=b[e].hidden,h=b[e].expanded),this.knownFilterTypes[g]&&(!1!==f&&void 0!==f&&null!==f||(this.addChild(new this.knownFilterTypes[g]({configurationProvider:this._configurationProvider,filter:a,store:this._configuration.createStoreForFilter(a),appliedValues:this._appliedSet&&this._appliedSet[a.$key],parent:this,groupId:d.CurrentGroupID,expanded:h,deferred:i})),j=!0)),j||i.resolve(),i},_onFetchComplete:function(a,b,c){sessionStorage.setItem(a,s.stringify(c)),this._iterateFetchedItems(c),b&&b()},_iterateFetchedItems:function(a){if(a&&a.length){var b,c,d;for(c=a.length,d=[],b=0;b<c;b++)d[b]=this._onFetchItem(a[b]);d=new t(d),d.then(l.hitch(this,function(){this._isFetchingData=!1,this._isApplyingConfig=!1,this._isFirstLoad&&(this._isFirstLoad=!1,this.requestData(function(){Sage.Services.getService("ClientGroupContext").publishFiltersApplied()}))}))}}})})},"Sage/UI/Filters/EntityManagerFilterPanel":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/UI/Filters/EntityManagerCheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EntityManagerEditFilters","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/on","dojo/i18n!./nls/FilterPanel","dojo/has","dojo/_base/sniff","dojo/ready","dojo/json","dojo/DeferredList","dojo/_base/Deferred","dojo/string","Sage/Services/UserOptions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return i("Sage.UI.Filters.EntityManagerFilterPanel",[a,b,d,c],{serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"}},knownFilterTypes:{checkedList:f,comboWithArgument:g},widgetsInTemplate:!1,widgetTemplate:new Simplate(['<div class="filter-panel" data-dojo-attach-point="containerNode">','<div class="filter-edit"><span class="activity-type-link" data-dojo-attach-point="clearAllFiltersNode">{%= $.clearText %}</span> | <span class="activity-type-link" data-dojo-attach-point="editFiltersNode">{%= $.editText %}</span></div>','<div class="filter-summary" data-dojo-attach-point="filterSummaryNode">{%= $.noneText %}</div>',"</div>"]),_filterGroup:null,_filterSubscriptions:null,_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:!0,store:null,filterGroup:"default",filterManager:null,_appliedFilters:null,_isApplyingConfig:!1,_isFirstLoad:!0,_editFilters:null,_editFiltersHandle:null,_isFetchingData:!1,constructor:function(){var a=Sage.Utility.getValue(window,"Sage.UI.DataStore.Filters");a&&a[this.filterGroup]&&(this._appliedSet=a[this.filterGroup].applied),o&&(this.editText=o.editText,this.noneText=o.noneText,this.clearText=o.clearText),this._appliedFilters=[],dojo.subscribe("/group/context/changed",l.hitch(this,function(){this._isApplyingConfig=!1,this._isFetchingData=!1,this._isFirstLoad=!0})),l.mixin(this,o)},postCreate:function(){this.inherited(arguments),this.startup()},startup:function(){this.inherited(arguments),!this._configurationProvider&&this._configurationProviderType&&this.set("configurationProvider",new this._configurationProviderType),this.autoConfigure&&this.requestConfiguration()},uninitialize:function(){this.inherited(arguments),this._editFilters&&(this._editFilters.destroy(),this._editFiltersHandle.remove()),this._configurationProvider&&this._configurationProvider.destroy()},_setFilterGroupAttr:function(a){this._filterSubscriptions&&dojo.forEach(this._filterSubscriptions,function(a){this.unsubscribe(a)},this),this._filterGroup=a,this._filterSubscriptions=[],this._filterSubscriptions.push(this.subscribe(v.substitute("/ui/filters/${0}/apply",[this._filterGroup]),l.hitch(this,this._onApply))),this._filterSubscriptions.push(this.subscribe(v.substitute("/ui/filters/${0}/change",[this._filterGroup]),l.hitch(this,this._onChange))),this.subscribe(v.substitute("/ui/filters/${0}/destroyFilters",[this._filterGroup]),l.hitch(this,function(){this.destroyDescendants(),this.filterSummaryNode.innerHTML=this.noneText}))},_getFilterGroupAttr:function(){return this._filterGroup},_onChange:function(a,b,c,d){var e,f=!1,g=!1;(a.details.lookupFilter||a.details.userLookupFilter)&&(g=!0,c&&c.hasOwnProperty("value")&&(null!==c.value&&""!==c.value||(f=!0))),k.forEach(this._appliedFilters,function(d,h){if(d&&(d.displayName===a.filterName||d.displayName===a.displayName)){e=this._appliedFilters[h];var i=!0;g||(i=k.some(e.items,function(a){return a===b})),i?g?c&&(null!==c.value&&""!==c.value||(e.items=[],this._appliedFilters.splice(h,1))):k.forEach(e.items,function(a,c){a===b&&e.items.splice(c,1)},this):e.items.push(b),f=!0}},this),f||this._appliedFilters.push({filterName:a.filterName,displayName:a.$descriptor||a.displayName,items:[b]}),this._updateFilterSummary()},_updateFilterSummary:function(){var a=[];k.forEach(k.filter(this._appliedFilters,function(a){return void 0!==a.displayName&&""!==a.displayName&&a.items&&a.items.length>0}),function(b){a.push(b.displayName+" ("+b.items.length+")")},this),0===a.length?this.filterSummaryNode.innerHTML=this.noneText:this.filterSummaryNode.innerHTML=a.join(", ")},_onApply:function(a,b,c){var d,e,f,g;if(c&&this._configuration&&this._configuration.groupId){if(c.getContext().CurrentGroupID.toUpperCase()!==this._configuration.groupId.toUpperCase())return}this._appliedFilters=[],this._appliedSet=a;for(d in this._appliedSet)if(this._appliedSet.hasOwnProperty(d))if(g=b[d],e=this._appliedSet[d],g.details.lookupFilter||g.details.userLookupFilter)e.hasOwnProperty("value")&&this._onChange(g,g.filterName,e.value);else for(f in e)e.hasOwnProperty(f)&&this._onChange(g,f);this._configuration&&this.requestData()},_handleConfigurationChange:function(){this.requestConfiguration()},_setConfigurationProviderAttr:function(a){this._configurationConnects&&dojo.forEach(this._configurationConnects,function(a){this.disconnect(a)},this),this._configurationProvider&&this._configurationProvider!==a&&this._configurationProvider.destroy(),this._configurationProvider=a,this._configurationConnects=[],this._configurationProvider&&(this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange)),this._configurationProvider.set("owner",this),this._created&&this.autoConfigure&&this.requestConfiguration())},_getConfigurationProviderAttr:function(){return this._configurationProvider},_setConfigurationProviderTypeAttr:function(a){this._configurationProviderType=a},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType},requestConfiguration:function(){this._configurationProvider&&!this._isApplyingConfig&&(this._isApplyingConfig=!0,this._configurationProvider.requestConfiguration({success:l.hitch(this,this._applyConfiguration)}))},_applyConfiguration:function(a){this._configuration=a,this.store=a.store,this.filterManager=a.getFilterManager(),this._editFilters&&(this._editFilters.destroy(),this._editFiltersHandle.remove()),this._editFilters=new h({store:this.store,filterPanel:this}),this._editFiltersHandle=n(this.editFiltersNode,"click",l.hitch(this,function(){this._editFilters.showDialog()})),n(this.clearAllFiltersNode,"click",l.hitch(this,this._clearAllFilters)),this._appliedSet={},this._appliedFilters=[],this._updateFilterSummary(),this.requestData(function(){Sage.Services.getService("ClientGroupContext").publishFiltersApplied()}),this._ensureApplyFilterWasPublished()},_ensureApplyFilterWasPublished:function(){var a,b;a=Sage.Services.getService("ClientGroupContext"),(b=a&&a.getContext())&&b.AppliedFilterInfo&&a.publishFiltersApplied(b.AppliedFilterInfo)},_clearAllFilters:function(){var a,b=m("li.filter-selected",this.containerNode);k.forEach(b,function(b){b.click?b.click():(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a))}),b=m(".filter-lookup-input input",this.containerNode),k.forEach(b,function(b){b.value&&(b.value="",p("ie")<9?b.fireEvent("onkeydown"):(a=document.createEvent("KeyboardEvent"),a.initKeyEvent?a.initKeyEvent("keydown",!0,!0,null,!1,!1,!1,!1,13,0):a.initKeyboardEvent("keydown",!0,!0,null,13,null,null,1,null),b.dispatchEvent(a)))})},refreshFilters:function(a){this._refreshing=!0,!0!==a&&this._clearAllFilters(),this.requestConfiguration()},requestData:function(a){var b=Sage.Services.getService("RoleSecurityService");if((!b||b.hasAccess("Administration/EntityManager/Entities/View"))&&!this._isFetchingData){this._isFetchingData=!0,this.destroyDescendants();var c,d,e,f,g;if(d=Sage.Services.getService("ClientGroupContext"),e=d&&d.getContext(),c=v.substitute("METADATA_FILTERS_${0}_${1}",[e.CurrentEntity,e.CurrentGroupID]),f=sessionStorage.getItem(c))g=s.parse(f),this._iterateFetchedItems(g),a&&a();else{var h=[{$key:"DisplayName",displayName:this.filterDisplayName,filterName:"Display Name",propertyName:"$descriptor",$descriptor:this.filterDisplayName,filterType:"comboWithArgument",details:{userLookupFilter:{operators:["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{$key:"EntityName",displayName:this.filterName,filterName:"Entity Name",propertyName:"name",$descriptor:this.filterName,filterType:"comboWithArgument",details:{userLookupFilter:{operators:["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{$key:"ModifiedDate",displayName:this.filterModifiedDate,filterName:"ModifiedDate",propertyName:"$updated",$descriptor:this.filterModifiedDate,filterType:"checkedList",propertyDataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5",details:{rangeFilter:{characters:0,ranges:[{displayName:"Today",lower:":todaystart",rangeName:"Today",upper:":todayend"},{displayName:"This Week",lower:":thisweekstart",rangeName:"ThisWeek",upper:":thisweekend"},{displayName:"This Month",lower:":thismonthstart",rangeName:"ThisMonth",upper:":thismonthend"},{
displayName:"This Quarter",lower:":thisquarterstart",rangeName:"ThisQuarter",upper:":thisquarterend"},{displayName:"This Year",lower:":thisyearstart",rangeName:"ThisYear",upper:":thisyearend"},{displayName:"Last Week",lower:":lastweekstart",rangeName:"LastWeek",upper:":lastweekend"},{displayName:"Last Month",lower:":lastmonthstart",rangeName:"LastMonth",upper:":lastmonthend"},{displayName:"Last Quarter",lower:":lastquarterstart",rangeName:"LastQuarter",upper:":lastquarterend"},{displayName:"Last Year",lower:":lastyearstart",rangeName:"LastYear",upper:":lastyearend"},{displayName:"Week to Date",lower:":thisweekstart",rangeName:"WeektoDate",upper:":todayend"},{displayName:"Month to Date",lower:":thismonthstart",rangeName:"MonthtoDate",upper:":todayend"},{displayName:"Quarter to Date",lower:":thisquarterstart",rangeName:"QtrtoDate",upper:":todayend"},{displayName:"Year to Date",lower:":thisyearstart",rangeName:"YeartoDate",upper:":todayend"},{displayName:"Older",lower:null,rangeName:"Older",upper:":beforelastyearend"}]}}},{$key:"HasMeasure",displayName:this.filterHasMetric,filterName:"HasMeasure",propertyName:"filters.filterType",$descriptor:this.filterHasMetric,filterType:"checkedList",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",details:{distinctFilter:{characters:0}}},{$key:"HasFilter",displayName:this.filterHasFilter,filterName:"HasFilter",propertyName:"filters.filterType",$descriptor:this.filterHasFilter,filterType:"checkedList",propertyDataTypeId:"ccc0f01d-7ba5-408e-8526-a3f942354b3a",details:{distinctFilter:{characters:0}}}];this._onFetchComplete(c,a,h)}}},onRequestDataFailure:function(a){},_onFetchError:function(){this._isFetchingData=!1},_onFetchItem:function(a){var b=this._configuration._hiddenFilters||{},c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+a.filterName,f=!1,g=a.filterType,h=!1,i=new u,j=!1;return b[e]&&(f=b[e].hidden,h=b[e].expanded),this.knownFilterTypes[g]&&(!1!==f&&void 0!==f&&null!==f||(this.addChild(new this.knownFilterTypes[g]({configurationProvider:this._configurationProvider,filter:a,store:this._configuration.createStoreForFilter(a),appliedValues:this._appliedSet&&this._appliedSet[a.$key],parent:this,groupId:d.CurrentGroupID,expanded:h,deferred:i})),j=!0)),j||i.resolve(),i},_onFetchComplete:function(a,b,c){sessionStorage.setItem(a,s.stringify(c)),this._iterateFetchedItems(c),b&&b()},_iterateFetchedItems:function(a){if(a&&a.length){var b,c,d;for(c=a.length,d=[],b=0;b<c;b++)d[b]=this._onFetchItem(a[b]);d=new t(d),d.then(l.hitch(this,function(){this._isFetchingData=!1,this._isApplyingConfig=!1,this._isFirstLoad&&(this._isFirstLoad=!1,this.requestData(function(){Sage.Services.getService("ClientGroupContext").publishFiltersApplied()}))}))}}})})},"Sage/UI/Filters/EntityManagerCheckBoxFilter":function(){define(["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ActionMixin","dojo/string","dojo/on","dojo/_base/lang","dojo/dom-construct","./EditFilterItems","dojo/_base/array","dojo/query","dojo/dom-attr","dojo/i18n!./nls/CheckBoxFilter","Sage/Utility","Sage/Utility/Filters","dojo/json","dijit/registry","dojo/_base/declare","dojo/_base/Deferred","dojo/dom-class","dojo/_base/connect","dojo/request","Sage/UI/Filters/FilterManager","Sage/Data/SDataServiceRegistry","dojo/date","dojox/storage/LocalStorageProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){return t("Sage.UI.Filters.EntityManagerCheckBoxFilter",[a,b,e,f,d],{attributeMap:{content:{node:"listNode",type:"innerHTML"}},serviceMap:{groupContextService:"ClientGroupContext",systemDataService:{type:"sdata",name:"system"}},actionsFrom:"click",widgetsInTemplate:!1,widgetTemplate:new Simplate(['<div class="filter-type-checkbox filter-collapsed">','<h3 data-action="toggleExpand" data-dojo-attach-point="filterNameNode">{%: $.filter.$descriptor || $.filter.filterName %}',"</h3>",'<ul class="filter-loading-indicator"><li><span>{%: $.loadingText %}</span></li></ul>','<a href="#" class="filter-clear" data-dojo-attach-point="clearLinkNode">{%: $.clearText %}</a>','<span class="filter-sep" data-dojo-attach-point="linkSep"></span>','<a href="#" class="filter-edit-items" data-dojo-attach-point="moreLinkNode"></a>','<ul class="filter-list" data-dojo-attach-point="listNode"></ul>',"</div>"]),itemTemplate:new Simplate(['<li data-action="toggleSelect" class="{%= $.selected ? "filter-selected" : "" %}" data-name="{%= $.name %}" data-selected="{%= !!$.selected %}" ','role="checkbox" aria-checked="{%= !!$.selected %}">',"<div>",'<span class="p-selection">&nbsp;</span>','<span class="p-label">{%: $$._formatLabelText($.$descriptor, $.name) %}</span>',"{% if ($.value > -1) { %}",'&nbsp;<span class="p-spacer">(</span>','<span class="p-count">{%: $.value %}</span>','<span class="p-spacer"> {%: $.ofText %} </span>','<span class="p-total">{%: $.value %}</span>','<span class="p-spacer">)</span>',"{% } %}","</div>","</li>"]),_activeFilterCount:0,_loaded:!1,_selected:null,_ranges:null,_filterGroup:null,_filterSubscriptions:null,appliedValues:null,parent:null,_originalActiveFilter:"",nullName:"SLX_NULL",emptyName:"SLX_EMPTY",filterGroup:"default",filter:null,store:null,editFilterItems:null,editFilterItemsHandle:null,output:null,entries:[],expanded:!1,FILTER_UPDATE_DELAY:1e3,lazyUpdateCounts:null,numModDateFiltersCnt:14,count:1e3,loading:!0,groupId:"",constructor:function(){this.inherited(arguments),this.output=[],this.entries=[],i.mixin(this,o)},postMixInProperties:function(){this.inherited(arguments),this._selected={};var a=this._isRangeFilter();a&&(this.store.request.setQueryArg("orderby",""),this.compileRanges(a.ranges)),this.expanded?(this.expanded=!1,setTimeout(i.hitch(this,this._toggleExpand),500)):this.appliedValues?setTimeout(i.hitch(this,this._loadItems),500):this.resolveDeferred(),this.store&&this.store.request&&this.store.request.getQueryArg&&(this._originalActiveFilter=this.store.request.getQueryArg("_activeFilter"))},postCreate:function(){this.inherited(arguments);var a=!1;if(this.configurationProvider.getFilterFormatter){this.configurationProvider.getFilterFormatter(this.filter)&&(a=!0)}!this._isDistinctFilter()||a?(j.destroy(this.moreLinkNode),j.destroy(this.linkSep)):this.editFilterItemsHandle=h(this.moreLinkNode,"click",i.hitch(this,this._moreLinkClicked)),h(this.clearLinkNode,"click",i.hitch(this,this._clearLinkClicked));var b=this.filter.$key+"_editFilterItems",c=s.byId(b);this.editFilterItems=c||new k({id:b,store:this.store,filter:this.filter,filterPanel:this.parent,parent:this})},_clearLinkClicked:function(){var a,b=m("li.filter-selected",this.listNode);l.forEach(b,function(b){b.click?b.click():(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a))})},_moreLinkClicked:function(a){this._originalActiveFilter&&(this.editFilterItems.baseFilter=this._originalActiveFilter),this.editFilterItems.showDialog(),a.cancelBubble=!0},uninitialize:function(){this.inherited(arguments),this.editFilterItems&&this.editFilterItems.destroy(!1),this.editFilterItemsHandle&&this.editFilterItemsHandle.remove()},_setFilterGroupAttr:function(a){this._filterSubscriptions&&l.forEach(this._filterSubscriptions,function(a){this.unsubscribe(a)},this),this._filterGroup=a,this._filterSubscriptions=[],this._filterSubscriptions.push(this.subscribe(g.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onChange),this.subscribe(g.substitute("/ui/filters/${0}/clear",[this._filterGroup]),this._onClear),this.subscribe(g.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),i.hitch(this,this._onRefresh)))},_onRefresh:function(a,b,c){this.appliedValues=a,this.updateCounts()},_updateActiveFilters:function(){var a=this._getFilterManager(),b=[],c=!1;if(a&&(c=a.createQuery()),this.expanded)return!1===c?c="":b.push(c),this._originalActiveFilter&&b.push(this._originalActiveFilter),c=b.length>1?b.join(" AND "):b.join("")},refresh:function(){this._loaded&&(l.forEach(m("*",this.listNode),function(a){j.destroy(a)}),this.requestData())},_onChange:function(a,b,c,d){b=this._transformFilterItemName(b),d!==this&&a.$key===this.filter.$key&&m(g.substitute('> [data-name="${0}"]',[b]),this.listNode).forEach(function(a){n.set(a,"data-selected",(!!c).toString()),v.toggle(a,"filter-selected",!!c)})},_onClear:function(a,b){b===this||a&&a.$key!==this.filter.$key||m('> [data-selected="true"]',this.listNode).forEach(function(a){n.set(a,"data-selected","false"),v.toggle(a,"filter-selected",!1)})},_getFilterGroupAttr:function(){return this._filterGroup},_formatLabelText:function(a,b){if(b===this.nullName)return this.nullText;if(b===this.emptyName)return this.emptyText;if(this.configurationProvider&&this.configurationProvider.getFilterFormatter){var c=this.configurationProvider.getFilterFormatter(this.filter);if(c)return c(a)}return a},_isDistinctFilter:function(){return this.filter&&this.filter.details&&this.filter.details.distinctFilter},_isRangeFilter:function(){return this.filter&&this.filter.details&&this.filter.details.rangeFilter},compileRanges:function(a){var b=0;for(this._ranges={},b=0;b<a.length;b++)this._ranges[this._transformFilterItemName(a[b].rangeName)]=a[b]},_saveExpandState:function(){var a=this.parent._configuration._hiddenFilters||{},b=this.parent._configuration._hiddenFiltersKey,c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+this.filter.filterName;a[e]||(a[e]={expanded:!1,hidden:!1}),a[e].expanded=this.expanded,q.setHiddenFilters(b,r.stringify(a))},toggleExpand:function(a,b,c){this._toggleExpand(),this._saveExpandState()},_toggleExpand:function(){this.expanded=!this.expanded,this.domNode&&v.toggle(this.domNode,"filter-collapsed"),this._loadItems()},_loadItems:function(){this._loaded?this.updateCounts():(this._loaded=!0,this.requestData(),this.appliedValues&&this.updateCounts())},toggleSelect:function(a,b,c){var d=/^true$/i.test(a.selected),e=a.name,f=!d&&(this._isRangeFilter()?this._ranges[e]:e);this.onSelectionChange(this.filter,e,f,this),n.set(c,"data-selected",(!d).toString()),n.set(c,"aria-checked",(!d).toString()),v.toggle(c,"filter-selected",!d)},onSelectionChange:function(a,b,c,d){w.publish(g.substitute("/ui/filters/${0}/change",[this._filterGroup]),[a,b,c,d])},updateCounts:function(){this.lazyUpdateCounts||(this.lazyUpdateCounts=p.debounce(i.hitch(this,function(){if(this.expanded){m("li[data-name] div span.p-count",this.listNode).forEach(function(a){a.innerHTML="0"});var a=this._updateActiveFilters(),b=z.getSDataService("metadata"),c=new Sage.SData.Client.SDataResourcePropertyRequest(b);c.setResourceKind("entities").setQueryArg("select","filters/filterType").setQueryArg("where",a).setQueryArg("format","json").setQueryArg("Count","500"),c.readFeed({success:function(a){this._onSuccessCount(a)},error:function(a){},scope:this,async:!0})}}),this.FILTER_UPDATE_DELAY)),this.lazyUpdateCounts()},requestData:function(){this.loading&&this.domNode&&(v.add(this.domNode,"filter-loading"),this.set("content",""));var a=this.filter.$key,b=z.getSDataService("metadata");if("ModifiedDate"==a){var c=this._getFromLocalStorage("modifiedDateTotalFilterCount");if(null!==c){if(c.length==this.numModDateFiltersCnt){var d=[{name:"Today",$descriptor:this.filteroptionToday,value:c[0].value},{name:"ThisWeek",$descriptor:this.filteroptionThisWeek,value:c[1].value},{name:"ThisMonth",$descriptor:this.filteroptionThisMonth,value:c[2].value},{name:"ThisQuarter",$descriptor:this.filteroptionThisQuarter,value:c[3].value},{name:"ThisYear",$descriptor:this.filteroptionThisYear,value:c[4].value},{name:"LastWeek",$descriptor:this.filteroptionLastWeek,value:c[5].value},{name:"LastMonth",$descriptor:this.filteroptionLastMonth,value:c[6].value},{name:"LastQuarter",$descriptor:this.filteroptionLastQuarter,value:c[7].value},{name:"LastYear",$descriptor:this.filteroptionLastYear,value:c[8].value},{name:"WeektoDate",$descriptor:this.filteroptionWeektoStart,value:c[9].value},{name:"MonthtoDate",$descriptor:this.filteroptionMonthtoStart,value:c[10].value},{name:"QtrtoDate",$descriptor:this.filteroptionQtrtoStart,value:c[11].value},{name:"YeartoDate",$descriptor:this.filteroptionYeartoStart,value:c[12].value},{name:"Older",$descriptor:this.filteroptionOlder,value:c[13].value}];return this._processFetchResult(d),this._updateCountsInPlace(d),void this.resolveDeferred()}}else x=new Sage.SData.Client.SDataResourcePropertyRequest(b),x.setResourceKind("entities").setQueryArg("select","$updated").setQueryArg("format","json").setQueryArg("Count","500"),x.readFeed({success:function(a){this._onSuccessModifiedDate(a)},error:function(a){},scope:this,async:!0})}else if("HasMeasure"==a){var e=this._getFromLocalStorage("totalMetricCount");if(null!==e){var f=[{name:"analyticsMetric",$descriptor:this.filterHasMetric,value:e.totalMetricCount}];return this._processFetchResult(f),m("div span.p-count",m('li[data-name="analyticsMetric"]')[0]).forEach(function(a){a.innerHTML=e.totalMetricCount}),this._finishedLoading(),void this.resolveDeferred()}x=new Sage.SData.Client.SDataResourcePropertyRequest(b),x.setResourceKind("entities").setQueryArg("where",'filters.filterType eq "analyticsMetric"').setQueryArg("format","json").setQueryArg("Count","500"),x.readFeed({success:function(a){this._onSuccessHasMeasure(a)},error:function(a){},scope:this,async:!0})}else if("HasFilter"==a){var g=this._getFromLocalStorage("totalFilterCount");if(null!==g){var h=[{name:"analyticsMetric",$descriptor:this.filterHasFilter,value:g.totalFilterCount}];return this._processFetchResult(h),m("div span.p-count",m('li[data-name="analyticsMetric"]')[1]).forEach(function(a){a.innerHTML=g.totalFilterCount}),this._finishedLoading(),void this.resolveDeferred()}x=new Sage.SData.Client.SDataResourcePropertyRequest(b),x.setResourceKind("entities").setQueryArg("where",'filters.filterType ne "analyticsMetric"').setQueryArg("format","json").setQueryArg("Count","500"),x.readFeed({success:function(a){this._onSuccessHasFilter(a)},error:function(a){},scope:this,async:!0})}},_onSuccessCount:function(a){var b,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,n=0,o=0,p=0,q=0,r=a.$resources,s=/\(([^)]+)\)/,t=new Date(this.specialDates[":todaystart"](new Date(Date.now()))),u=new Date(this.specialDates[":todayend"](new Date(Date.now()))),v=new Date(this.specialDates[":thisweekstart"](new Date(Date.now()))),w=new Date(this.specialDates[":thisweekend"](new Date(Date.now()))),x=new Date(this.specialDates[":thismonthstart"](new Date(Date.now()))),y=new Date(this.specialDates[":thismonthend"](new Date(Date.now()))),z=new Date(this.specialDates[":thisquarterstart"](new Date(Date.now()))),A=new Date(this.specialDates[":thisquarterend"](new Date(Date.now()))),B=new Date(this.specialDates[":thisyearstart"](new Date(Date.now()))),C=new Date(this.specialDates[":thisyearend"](new Date(Date.now()))),D=new Date(this.specialDates[":lastweekstart"](new Date(Date.now()))),E=new Date(this.specialDates[":lastweekend"](new Date(Date.now()))),F=new Date(this.specialDates[":lastmonthstart"](new Date(Date.now()))),G=new Date(this.specialDates[":lastmonthend"](new Date(Date.now()))),H=new Date(this.specialDates[":lastquarterstart"](new Date(Date.now()))),I=new Date(this.specialDates[":lastquarterend"](new Date(Date.now()))),J=new Date(this.specialDates[":lastyearstart"](new Date(Date.now()))),K=new Date(this.specialDates[":lastyearend"](new Date(Date.now())));for(b=0;b<=r.length-1;b++){var L=s.exec(r[b].$updated),M=new Date(parseInt(L[1],10));M>=t&&M<=u&&c++,M>=v&&M<=w&&d++,M>=x&&M<=y&&e++,M>=z&&M<=A&&f++,M>=B&&M<=C&&g++,M>=D&&M<=E&&h++,M>=F&&M<=G&&i++,M>=H&&M<=I&&j++,M>=J&&M<=K&&k++,M>=v&&M<=u&&n++,M>=x&&M<=u&&o++,M>=z&&M<=u&&p++,M>=B&&M<=u&&q++,M<K&&l++}var N=0,O=0,P=!1,Q=!1;for(b=0;b<r.length;b++)if(r[b].filters&&r[b].filters.$resources){P=!1,Q=!1;for(var R=r[b].filters.$resources,S=0;S<R.length;S++)if(R[S].filterType.indexOf("analyticsMetric")>-1){P=!0;break}for(var T=0;T<R.length;T++)if(R[T].filterType.indexOf("analyticsMetric")<=-1){Q=!0;break}P&&++N,Q&&++O}var U=[{name:"Today",$descriptor:this.filteroptionToday,value:c},{name:"ThisWeek",$descriptor:this.filteroptionThisWeek,value:d},{name:"ThisMonth",$descriptor:this.filteroptionThisMonth,value:e},{name:"ThisQuarter",$descriptor:this.filteroptionThisQuarter,value:f},{name:"ThisYear",$descriptor:this.filteroptionThisYear,value:g},{name:"LastWeek",$descriptor:this.filteroptionLastWeek,value:h},{name:"LastMonth",$descriptor:this.filteroptionLastMonth,value:i},{name:"LastQuarter",$descriptor:this.filteroptionLastQuarter,value:j},{name:"LastYear",$descriptor:this.filteroptionLastYear,value:k},{name:"WeektoDate",$descriptor:this.filteroptionWeektoStart,value:n},{name:"MonthtoDate",$descriptor:this.filteroptionMonthtoStart,value:o},{name:"QtrtoDate",$descriptor:this.filteroptionQtrtoStart,value:p},{name:"YeartoDate",$descriptor:this.filteroptionYeartoStart,value:q},{name:"Older",$descriptor:this.filteroptionOlder,value:l}],V="analyticsMetric";m("div span.p-count",m('li[data-name="'+V+'"]')[0]).forEach(function(a){a.innerHTML=N}),m("div span.p-count",m('li[data-name="'+V+'"]')[1]).forEach(function(a){a.innerHTML=O}),this._updateCountsInPlace(U)},_onSuccessHasFilter:function(a){var b=a.$resources,c=[{name:"analyticsMetric",$descriptor:this.filterHasFilter,value:b.length}];this._processFetchResult(c);m("div span.p-count",m('li[data-name="analyticsMetric"]')[1]).forEach(function(a){a.innerHTML=b.length}),this._finishedLoading(),this.resolveDeferred(),this._saveToLocalStorage("totalFilterCount",{totalFilterCount:b.length})},_onSuccessHasMeasure:function(a){var b=a.$resources,c=[{name:"analyticsMetric",$descriptor:this.filterHasMetric,value:b.length}];this._processFetchResult(c);m("div span.p-count",m('li[data-name="analyticsMetric"]')[0]).forEach(function(a){a.innerHTML=b.length}),this._finishedLoading(),this.resolveDeferred(),this._saveToLocalStorage("totalMetricCount",{totalMetricCount:b.length})},_onSuccessModifiedDate:function(a){for(var b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=a.$resources,q=/\(([^)]+)\)/,r=new Date(this.specialDates[":todaystart"](new Date(Date.now()))),s=new Date(this.specialDates[":todayend"](new Date(Date.now()))),t=new Date(this.specialDates[":thisweekstart"](new Date(Date.now()))),u=new Date(this.specialDates[":thisweekend"](new Date(Date.now()))),v=new Date(this.specialDates[":thismonthstart"](new Date(Date.now()))),w=new Date(this.specialDates[":thismonthend"](new Date(Date.now()))),x=new Date(this.specialDates[":thisquarterstart"](new Date(Date.now()))),y=new Date(this.specialDates[":thisquarterend"](new Date(Date.now()))),z=new Date(this.specialDates[":thisyearstart"](new Date(Date.now()))),A=new Date(this.specialDates[":thisyearend"](new Date(Date.now()))),B=new Date(this.specialDates[":lastweekstart"](new Date(Date.now()))),C=new Date(this.specialDates[":lastweekend"](new Date(Date.now()))),D=new Date(this.specialDates[":lastmonthstart"](new Date(Date.now()))),E=new Date(this.specialDates[":lastmonthend"](new Date(Date.now()))),F=new Date(this.specialDates[":lastquarterstart"](new Date(Date.now()))),G=new Date(this.specialDates[":lastquarterend"](new Date(Date.now()))),H=new Date(this.specialDates[":lastyearstart"](new Date(Date.now()))),I=new Date(this.specialDates[":lastyearend"](new Date(Date.now()))),J=0;J<=p.length-1;J++){var K=q.exec(p[J].$updated),L=new Date(parseInt(K[1],10));L>=r&&L<=s&&b++,L>=t&&L<=u&&c++,L>=v&&L<=w&&d++,L>=x&&L<=y&&e++,L>=z&&L<=A&&f++,L>=B&&L<=C&&g++,L>=D&&L<=E&&h++,L>=F&&L<=G&&i++,L>=H&&L<=I&&j++,L>=t&&L<=s&&l++,L>=v&&L<=s&&m++,L>=x&&L<=s&&n++,L>=z&&L<=s&&o++,L<I&&k++}var M=[{name:"Today",$descriptor:this.filteroptionToday,value:b},{name:"ThisWeek",$descriptor:this.filteroptionThisWeek,value:c},{name:"ThisMonth",$descriptor:this.filteroptionThisMonth,value:d},{name:"ThisQuarter",$descriptor:this.filteroptionThisQuarter,value:e},{name:"ThisYear",$descriptor:this.filteroptionThisYear,value:f},{name:"LastWeek",$descriptor:this.filteroptionLastWeek,value:g},{name:"LastMonth",$descriptor:this.filteroptionLastMonth,value:h},{name:"LastQuarter",$descriptor:this.filteroptionLastQuarter,value:i},{name:"LastYear",$descriptor:this.filteroptionLastYear,value:j},{name:"WeektoDate",$descriptor:this.filteroptionWeektoStart,value:l},{name:"MonthtoDate",$descriptor:this.filteroptionMonthtoStart,value:m},{name:"QtrtoDate",$descriptor:this.filteroptionQtrtoStart,value:n},{name:"YeartoDate",$descriptor:this.filteroptionYeartoStart,value:o},{name:"Older",$descriptor:this.filteroptionOlder,value:k}];this._processFetchResult(M),this._updateCountsInPlace(M),this.resolveDeferred(),this._saveToLocalStorage("modifiedDateTotalFilterCount",M)},_onFetchComplete:function(a,b){this._processFetchResult(a,b),this._updateCountsInPlace(a),this.resolveDeferred()},_onFetchError:function(a,b){this.domNode&&v.remove(this.domNode,"filter-loading"),this.resolveDeferred()},isFilterItemHidden:function(a){var b=this.parent._configuration._hiddenFilters||{},c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),e=d.CurrentEntity+"_"+this.filter.filterName,f=!1;return b[e]&&(f=l.some(b[e].items,function(b){return b===a})),f},_updateCountsInPlace:function(a,b){var c=0,d=null,e=a.length;for(c=0;c<e;c++)d=a[c],d.name=this._transformFilterItemName(d.name),m('li[data-name="'+d.name+'"]',this.listNode).forEach(function(a){m("div span.p-count",a).forEach(function(a){a.innerHTML=d.value})});this._finishedLoading()},_processFetchResult:function(a,b){var c=0,d=null,e=a.length,f=!1;for(c=0;c<e;c++)d=a[c],d.name=this._transformFilterItemName(d.name),(!1===this.isFilterItemHidden(d.name)||this._isRangeFilter())&&(f=this.appliedValues&&this.appliedValues[this.filter.$key]&&!!this.appliedValues[this.filter.$key][d.name],d.selected=f||this.appliedValues&&!!this.appliedValues[d.name],d.ofText=this.ofText,this.output.push(this.itemTemplate.apply(d,this)),this.entries.push(d));this._fixMissingItems(),this.domNode&&this.set("content",this.output.join("")),this._clearOutputEntries()},_transformFilterItemName:function(a){var b=a;return null===a?b=this.nullName:""===a&&(b=this.emptyName),b?b.trim():b},_fixMissingItems:function(){var a,b,c;for(b in this.appliedValues)this.appliedValues.hasOwnProperty(b)&&(c=this.appliedValues[b],l.some(this.entries,function(a){return a.name===b})||(a={name:"",$descriptor:"",selected:!0,value:0},a.name=b,a.$descriptor=c,a.ofText=this.ofText,"string"==typeof a.$descriptor&&(this.output.push(this.itemTemplate.apply(a,this)),this.entries.push(a))))},_clearOutputEntries:function(){this.output=[],this.entries=[]},_finishedLoading:function(){this.loading=!1,this.store.request.setQueryArg("_activeFilter",this._originalActiveFilter||""),this.domNode&&v.remove(this.domNode,"filter-loading")},_getFilterManager:function(){var a=this.parent.filterManager;a||this.parent._configuration.getFilterManager&&(a=this.parent._configuration.getFilterManager());var b=Sage.Services.getService("ClientGroupContext"),c=b&&b.getContext();return this.groupId!=c.CurrentGroupID&&(a=null),a},resolveDeferred:function(){this.deferred&&(this.deferred=this.deferred.resolve())},_saveToLocalStorage:function(a,b){var c=new B;c.initialize(),c.put(a,b,function(a,b,d){c.FAILED})},_getFromLocalStorage:function(a,b){var c=new B;return c.initialize(),c.get(a,b)},specialDates:{":today":function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":todaystart":function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":todayend":function(a){return a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":yesterday":function(a){return a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":yesterdaystart":function(a){return a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":yesterdayend":function(a){return a.setDate(a.getDate()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":tomorrow":function(a){return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":tomorrowstart":function(a){return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":tomorrowend":function(a){return a.setDate(a.getDate()+1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisweekstart":function(a){return a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisweekend":function(a){return a.setDate(a.getDate()+(6-a.getDay())),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thismonthstart":function(a){return a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thismonthend":function(a){return a.setDate(A.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisyearstart":function(a){return a.setDate(1),a.setMonth(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisyearend":function(a){return a.setDate(31),a.setMonth(11),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisquarterstart":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisquarterend":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c),a.setDate(A.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextweekstart":function(a){return a.setDate(a.getDate()+(7-a.getDay())),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextweekend":function(a){return a.setDate(a.getDate()+(7-a.getDay())+6),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextmonthstart":function(a){return a.setMonth(a.getMonth()+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextmonthend":function(a){return a.setMonth(a.getMonth()+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextyearstart":function(a){return a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextyearend":function(a){return a.setFullYear(a.getFullYear()+1),a.setMonth(11),a.setDate(31),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextquarterstart":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextquarterend":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c+3),a.setDate(A.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastweekstart":function(a){return a.setDate(a.getDate()-a.getDay()-7),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastweekend":function(a){return a.setDate(a.getDate()-a.getDay()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastmonthstart":function(a){return a.setMonth(a.getMonth()-1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastmonthend":function(a){return a.setMonth(a.getMonth()-1),a.setDate(A.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastyearstart":function(a){return a.setFullYear(a.getFullYear()-1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastyearend":function(a){return a.setFullYear(a.getFullYear()-1),a.setMonth(11),a.setDate(31),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastquarterstart":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c-3),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastquarterend":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c-1),a.setDate(A.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a}}})})},"Sage/UI/Filters/GroupFilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Data/GroupLayoutSingleton","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang","dijit/registry","dojo/string","Sage/Utility/Filters","dojo/json"],function(a,b,c,d,e,f,g,h,i,j){return e("Sage.UI.Filters.GroupFilterConfigurationProvider",[b,a],{FILTER_COUNT:150,_configuration:null,_hasLayoutConfiguration:!1,_hasFilterHiddenConfiguration:!1,serviceMap:{groupContextService:"ClientGroupContext",metaDataService:{type:"sdata",name:"metadata"},systemDataService:{type:"sdata",name:"system"}},constructor:function(a){this.inherited(arguments),this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged))},_onGroupContextChanged:function(){this.onConfigurationChange()},onConfigurationChange:function(){},_createConfiguration:function(a,b){var c,e,f=a&&a.layout,i=[],j=[],k=0,l=this.groupContextService&&this.groupContextService.getContext(),m=l&&l.CurrentGroupID,n=l&&l.CurrentEntity,o=this.systemDataService,p=this.metaDataService;for(k=0;k<f.length;k++)i.push('"'+f[k].propertyPath+'"'),j.push('"'+f[k].caption+'"');c=new Sage.SData.Client.SDataResourcePropertyRequest(p),c.setResourceKind("entities"),c.setResourceSelector('"'+n+'"'),c.setResourceProperty("filters"),c.setQueryArg("count",this.FILTER_COUNT),c.setQueryArg("orderby","displayName"),"User"===n&&(j.push('"Role"'),j.push('"Team"')),e=h.substitute('filterType ne "analyticsMetric" and (propertyName in (${0}) or displayName in (${1}))',[i.join(","),j.join(",")]),c.setQueryArg("where",e),this._configuration.store=new d({executeReadWith:"readFeed",request:c}),this._configuration.createStoreForFilter=function(a){var b=new Sage.SData.Client.SDataResourcePropertyRequest(o);return b.setResourceKind("groups"),b.setResourceSelector('"'+m+'"'),b.setResourceProperty("$queries/executeMetric"),b.setQueryArg("_filterName",a.filterName),b.setQueryArg("orderby","displayName"),a&&a.filterName?new d({executeReadWith:"readFeed",request:b}):null},this._configuration.getFilterManager=function(){var a=g.byId("list");return a&&a.get("filterManager")},this._configuration.groupId=m},requestConfiguration:function(a){this._configuration={},this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1;var b=new c,d=this.getCurrentGroup(),e=f.hitch(this,this._onRequestConfigurationSuccess,a||{}),g=f.hitch(this,this._onRequestConfigurationFailure,a||{});b.getGroupLayout(this.formatPredicate(d),e,g,d.$key),this._getHiddenFilters(a)},formatPredicate:function(a){return"'"+a.$key+"'"},getCurrentGroup:function(){var a=this.groupContextService&&this.groupContextService.getContext(),b=a&&a.CurrentFamily;return{name:a&&a.CurrentName,family:b,$key:a&&a.CurrentGroupID}},_onRequestConfigurationSuccess:function(a,b){this._createConfiguration(b,a),this._hasLayoutConfiguration=!0,this._callOptionsSuccess(a)},_onRequestConfigurationFailure:function(a,b){a.failure&&a.failure.call(a.scope||this,b,a,this)},_getHiddenFilters:function(a){var b=this._getHiddenFiltersKey();b&&i.getHiddenFilters(b,f.hitch(this,this._onHiddenFiltersFetchComplete,a||{}),function(a){})},_getHiddenFiltersKey:function(){return i.getHiddenFiltersKey()},_onHiddenFiltersFetchComplete:function(a,b){b&&b.response&&b.response.value&&(this._configuration._hiddenFilters=j.parse(b.response.value),this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array&&(this._configuration._hiddenFilters={})),this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey(),this._hasFilterHiddenConfiguration=!0,this._callOptionsSuccess(a)},_callOptionsSuccess:function(a){this._hasLayoutConfiguration&&this._hasFilterHiddenConfiguration&&a.success&&(a.success.call(a.scope||this,this._configuration,a,this),this._hasLayoutConfiguration=!1,this._hasFilterHiddenConfiguration=!1)}})})},"Sage/UI/GroupTabPane":function(){define(["dojo/_base/declare","Sage/UI/TabController","Sage/UI/TabContainer"],function(a,b,c){return a("Sage.UI.GroupTabPane",[c],{useMenu:!1,useSlider:!0})})},"Sage/UI/JsonPrintDetailPane":function(){define(["Sage/UI/_DetailPane","Sage/_Templated","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.JsonPrintDetailPane",[a,b],{widgetsInTemplate:!0,contentNode:null,attributeMap:{content:{node:"contentNode",type:"innerHTML"}},
widgetTemplate:new Simplate(['<div class="json-print-detail-pane">','<pre dojoAttachPoint="contentNode"></pre>',"</div>"]),_onSelected:function(a,b,c){this.set("content",dojo.toJson(b,!0))}})})},"Sage/UI/MenuBar":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/PopupMenuItem","dijit/Menu","Sage/UI/MenuBarItem","dijit/MenuSeparator","dojo/_base/declare","dojo/has"],function(MenuBar,MenuItem,PopupMenuBarItem,PopupMenuItem,Menu,MenuBarItem,MenuSeparator,declare,has){var widget=declare("Sage.UI.MenuBar",[MenuBar],{postMixInProperties:function(){this.store=Sage.UI.DataStore.MenuBar||{},this.inherited(arguments)},postCreate:function(){this.inherited(arguments);for(var a=this.store.items?this.store.items.length:0,b=0;b<a;b++){var c=this.store.items[b],d=""!==c.id?c.id:this.id+"_"+b,e={label:c.text||"...",icon:c.img||this._blankGif,id:d,title:c.tooltip||c.text||"",ref:c.href||c.navurl||"",imageClass:c.imageClass||""};if(c.items&&c.items.length>0){var f=new Menu({});this._addItemsToMenu(c.items,f,d),e.popup=f,this.addChild(new PopupMenuBarItem(e))}else e.onClick=dojo.hitch(e,function(){""!==this.ref&&(window.location.href=this.ref)}),this.addChild(new MenuBarItem(e))}},_addItemsToMenu:function(items,menu,idContainer){idContainer=idContainer||"";for(var len=items.length,i=0;i<len;i++){var item=items[i];if(item.isspacer||"-"===item.text)menu.addChild(new MenuSeparator({}));else{var config={label:item.text||"...",icon:item.img||this._blankGif,title:item.tooltip||item.text||"",ref:item.href||"",imageClass:item.imageClass||""};""!==item.id&&(config.id=idContainer+"_"+item.id);var javascriptLinkRegex=/javascript:/g;if(10===has("ie")&&javascriptLinkRegex.test(item.href)?(config.ref=item.href.replace(javascriptLinkRegex,""),config.onClick=function(){eval(this.ref)}):""!==item.href&&(config.onClick=function(){if(""!==this.ref)try{window.location.href=this.ref}catch(a){}}),item.submenu.length>0){var popup=new Menu({});this._addItemsToMenu(item.submenu,popup,item.id||""),config.popup=popup,menu.addChild(new PopupMenuItem(config))}else menu.addChild(new MenuItem(config))}}}});return widget})},"Sage/UI/NavBar":function(){define(["dijit/layout/AccordionContainer","dijit/layout/_LayoutWidget","Sage/UI/NavBarPane","Sage/Layout/_SplitterEnhancedMixin","dojo/dom","dojo/on","dojo/dom-style","dojo/dom-class","dojo/cookie","dojo/_base/declare","dojo/dom-geometry","dojo/_base/array","dojo/aspect"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return j("Sage.UI.NavBar",[a,d],{persist:!0,navPin:"navPinID",navIcon:"navIconID",animRotate:"rotate90",postCreate:function(){this.inherited(arguments);var a=Sage.UI.DataStore.NavBar&&Sage.UI.DataStore.NavBar.items;a&&this._processNavCollection(a)},_processNavCollection:function(a){for(var b=0;b<a.length;b++){var d=a[b];this.addChild(new c({title:d.text,items:d.items}))}},startup:function(){var a=this;this.inherited(arguments),this.domNode.style.overflow="hidden";var c=!0,d=this.getParent().id;g.set(d,"display","block"),m.after(b.prototype,"startup",function(b){var c=this.getParent&&this.getParent();this.connect(e.byId(a.navPin),"click",function(){c.resize()})}),m.before(b.prototype,"resize",function(b){null!==this.getParent()&&this.getParent().hasOwnProperty("parent")&&this.getParent().parent.id===a.id||c||(a._hideContainer(d),h.remove(d,"show"))}),"0"===i(a.navPin)?(c=!1,a._hideContainer(d),a._hideContainer(d+"_splitter"),h.add(e.byId(a.navPin),a.animRotate),g.set(a.navIcon,"display","inline-block")):(h.add(d,"showSolid"),h.add(e.byId(a.id),"show"),g.set(d+"_splitter","display","block")),parseInt(i(a.navPin+"_width"),10)>0&&g.set(d,"width",i(a.navPin+"_width")),f(e.byId(a.navPin),"click",function(b){c?(c=!1,h.remove(d,"showSolid"),h.add(e.byId(a.navPin),a.animRotate),g.set(d+"_splitter","display","none"),g.set(a.navIcon,"display","inline-block"),i(a.navPin,"0")):(c=!0,h.add(d,"showSolid"),h.remove(e.byId(a.navPin),a.animRotate),g.set(d+"_splitter","display","block"),g.set(a.navIcon,"display","none"),i(a.navPin,"1"))}),f(e.byId(d+"_splitter"),"click",function(b){i(a.navPin+"_width",g.getComputedStyle(e.byId(d)).width)}),f(e.byId(a.navIcon),"click",function(b){b.stopPropagation(),c||a._toggleNavContainer(d,c)}),f(e.byId(d),"click",function(a){a.stopPropagation()}),f(document,"click",function(b){c||"none"==g.getComputedStyle(e.byId(d)).display||a._toggleNavContainer(d,!c)})},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,c=k.getMarginExtents(b),d=k.getPadBorderExtents(b),e=a._wrapperWidget.containerNode,f=k.getMarginExtents(e),h=k.getPadBorderExtents(e),i=(this._contentBox,0);l.forEach(this.getChildren(),function(b){if(b!=a){var c=parseInt(g.getComputedStyle(b.getParent().domNode.children[0]).height,10),d=parseInt(g.getComputedStyle(b.getParent().domNode).marginBottom,10),e=parseInt(g.getComputedStyle(b.getParent().domNode).marginTop,10),f=parseInt(g.getComputedStyle(b.getParent().domNode).borderTopWidth,10),h=parseInt(g.getComputedStyle(b.getParent().domNode).borderBottomWidth,10);isNaN(c)||(i+=c),isNaN(d)||(i+=d),isNaN(e)||(i+=e),isNaN(f)||(i+=f),isNaN(h)||(i+=h)}});var j=this.getParent().domNode.children[0],m=g.getComputedStyle(j),n=k.getMarginExtents(j,m),o=k.getBorderExtents(j,m),p=n.b+n.t+parseInt(m.height,10)+parseInt(m.paddingTop,10)+parseInt(m.paddingBottom,10)+o.h;this._verticalSpace=window.innerHeight-c.h-d.h-f.h-h.h-p-i-51,g.set(this.domNode,"top",p+"px"),this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-c.w-d.w-f.w-h.w},a&&a.resize(this._containerContentBox)}},_toggleNavContainer:function(a,b){var c=this,d=e.byId(a),f=this.getParent().id;b?(h.remove(d,"show"),h.remove(e.byId(c.id),"show"),setTimeout(function(){c._hideContainer(f)},500)):(g.set(f,"display","block"),setTimeout(function(){h.add(e.byId(c.id),"show"),h.add(d,"show")},10))},_hideContainer:function(a){g.set(a,"display","none"),g.set(a,"opacity","0")}})})},"Sage/UI/NavBarPane":function(){define(["dijit/layout/_LayoutWidget","Sage/_Templated","Sage/UI/MenuItem","dijit/Menu","dojo/_base/declare","dojo/has"],function(_LayoutWidget,_Templated,MenuItem,DijitMenu,declare,has){var navBarPane=declare("Sage.UI.NavBarPane",[_LayoutWidget,_Templated],{textImageRelationMap:{0:new Simplate(['<div class="Global_Images icon32x32 {%: $.imageClass %}"></div>',"<br />","<span>{%: $.text %}</span>"]),1:new Simplate(["<span>{%: $.text %}</span>","<br />",'<div class="Global_Images icon32x32 {%: $.imageClass %}"></div>']),2:new Simplate(['<div class="Global_Images icon32x32 {%: $.imageClass %}"></div>',"<span>{%: $.text %}</span>"]),3:new Simplate(["<span>{%: $.text %}</span>",'<div class="Global_Images icon32x32 {%: $.imageClass %}"></div>']),4:new Simplate(['<img src="{%: $.img %}" alt="" />',"<span>{%: $.text %}</span>"])},attributeMap:{listContent:{node:"listNode",type:"innerHTML"}},widgetTemplate:new Simplate(['<div class="nav-bar-pane">','<ul dojoAttachPoint="listNode,containerNode"></ul>',"</div>"]),itemTemplate:new Simplate(['<li id="{%: $.id %}" class="{%: $.className %}" aria-haspopup="{%: $.haspopup %}">','<a href="{%: $.href %}">',"{%= $.innerTemplate.apply($) %}","</a>","</li>"]),title:null,items:null,_requiredContextMenus:null,_contextMenus:null,constructor:function(){this._requiredContextMenus=[],this._contextMenus=[]},postCreate:function(){this.inherited(arguments),this._processItemCollection(this.items)},startup:function(){this.inherited(arguments),this._processContextMenus(this._requiredContextMenus)},destroy:function(a){this.inherited(arguments),dojo.forEach(this._contextMenus,function(b){b.destroy(a)})},_processItemCollection:function(a){var b=[];dojo.forEach(a,function(a){a.id=a.id||Sage.guid("NavItem"),-1!==window.location.href.indexOf("/"+a.href)?a.className="nav-bar-item-current-page":a.className="nav-bar-item",a.contextmenu?(this._requiredContextMenus.push({id:a.id,name:a.contextmenu}),a.haspopup="true"):a.haspopup="false",""===a.imageClass?a.innerTemplate=this.textImageRelationMap[4]:a.innerTemplate=this.textImageRelationMap[a.textImageRelation],b.push(this.itemTemplate.apply(a,this))},this),this.set("listContent",b.join(""))},_processContextMenus:function(a){var b,c,d,e,f,g,h;for(b=0;b<a.length;b++)if(d=a[b],g=Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus[d.name],(h=g&&g.items)&&h.length>0){for(e=new DijitMenu({targetNodeIds:[d.id]}),c=0;c<h.length;c++)f=h[c],e.addChild(new MenuItem({id:e.id+"_"+f.id,label:f.text||"...",title:f.tooltip||"...",img:f.img||this._blankGif,ref:f.href,onClick:this._onContextMenuClick}));this._contextMenus.push(e)}},_onContextMenuClick:function(){if(""!==this.ref){var javascriptLinkRegex=/javascript:/g;if(10===has("ie")&&javascriptLinkRegex.test(this.ref)){var tempJsRef=this.ref.replace(javascriptLinkRegex,"");eval(tempJsRef)}else try{window.location.href=this.ref}catch(a){}}}});return navBarPane})},"Sage/UI/SpeedSearch":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/i18n","dijit/_Widget","Sage/UI/TextBox","Sage/UI/ImageButton","Sage/UI/ToggleButton","dojo/i18n!./nls/SpeedSearch","dojo/text!../templates/SpeedSearch.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.SpeedSearch",[d,a,b],{templateString:i,standardText:"standard",advancedText:"advanced",speedSearchText:"SpeedSearch",postMixInProperties:function(){dojo.mixin(this,c.getLocalization("Sage.UI","SpeedSearch")),this.inherited(arguments)},postCreate:function(){var a=this,b=/SpeedSearch\.aspx|speedsearch\.aspx/;this.isSS=b.test(window.location.pathname),this.QS=window.location.search,this.QS&&(this.queryObject=dojo.queryToObject(this.QS.substring(1,this.QS.length)));var c=new g({showLabel:!0,checked:!1,class:"quick-speedsearch-toggle",onClick:function(){this.getValue()===a.standardText?(this.setValue(a.advancedText),a.isSS&&a.toggleAdv()):(this.setValue(a.standardText),a.isSS&&a.toggleAdv())},label:this.queryObject?this.queryObject.type:this.standardText},"ss-btn-toggle");c.set("class","displaynone"),c.getValue()===this.advancedText&&this.isSS&&this.toggleAdv();var d=new e({watermark:!0,value:this.speedSearchText,class:"quick-speedsearch-text",onKeyDown:function(b){13===b.keyCode&&a._goSearch(d.getValue(),c.getValue())}},"txt_ss");this.queryObject&&d.forceFocus(this.queryObject.terms);new f({imageClass:"fa fa-search",class:"quick-speedsearch-button",onClick:function(){a._goSearch(d.getValue(),c.getValue())}},"ss-btn-image");this.inherited(arguments)},_goSearch:function(a,b){a!==this.speedSearchText&&window.setTimeout(function(){window.location="SpeedSearch.aspx?terms="+a+"&type="+b},10)},toggleAdv:function(){window.ToggleAdvanced()}})})},"Sage/UI/ToggleButton":function(){define(["dijit/form/Button","dijit/_Widget","dojo/text","dojo/text!../templates/ToggleButton.html","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.ToggleButton",a,{templateString:d,__setValueAttr:{node:"valueNode",type:"attribute",attribute:"value"},getValue:function(){return this.get("label")},setValue:function(a){this.set("label",a)},_onButtonClick:function(a){}})})},"Sage/UI/SummaryDetailPane":function(){define(["Sage/UI/_DetailPane","Sage/_Templated","Sage/UI/SummaryContainer","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.SummaryDetailPane",[a,b],{widgetsInTemplate:!1,contentNode:null,paneContents:null,attributeMap:{content:{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(['<div class="EntityCard">','<div dojoAttachPoint="contentNode"></div>',"</div>"]),clear:function(){this.paneContents&&this.paneContents.destroyRecursive()},_onSelected:function(a,b,d){if(this._configuration){this.paneContents&&this.paneContents.destroyRecursive();var e=Sage.Services.getService("ClientGroupContext"),f=e.getContext(),g=f.CurrentTableKeyField;if(g&&this._configuration.requestConfiguration){this._configuration.keyField&&(g=this._configuration.keyField);var h=this._getKeyValue(b,g),i=Sage.Services.getService("SummaryViewDataManager"),j=new c({id:"det_"+h,templateLocation:this._configuration.templateLocation});j.postProcessCallBack=this._configuration.postProcessCallBack,dojo.place(j.domNode,this.contentNode,"only"),this.paneContents=j,i.requestDataNoWait(h,j,this._configuration.requestConfiguration)}else this.set("content","Please check the configuration for this panel.")}},_getKeyValue:function(a,b){var c=b.split(".");return c.length<2?a[b]:this._getKeyValue(a[c[0]],c[1])}})})},"Sage/UI/TimeZoneItem":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","Sage/UI/MenuBarItem","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n","dojo/data/ItemFileReadStore","dojo/i18n!./nls/TimeZoneItem","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.TimeZoneItem",a,{_TimeZoneDialog:new Simplate(['<div><div style="height:auto;">',"{%= $.setTimeZone %}<br />",'<select id="timeZoneItemsList" data-dojo-type="dijit.form.Select" shouldPublishMarkDirty="false" style="width:345px; margin-top:10px; margin-bottom:10px;"></select></div>','<div class="button-bar alignright"><button data-dojo-type="dijit.form.Button"',' type="button" id="btnTimeZoneDialogOk" title="{%= $.buttonOK %}" align="right">{%= $.buttonOK %}</button>','<button data-dojo-type="dijit.form.Button"',' type="button" id="btnTimeZoneDialogCancel" title="{%= $.buttonCancel %}" align="right">{%= $.buttonCancel %}</button>',"</div></div>"]),postMixInProperties:function(){dojo.mixin(this,g.getLocalization("Sage.UI","TimeZoneItem")),this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a;a=Sage.Utility.getClientContextByKey("userTimeZone"),this.addChild(new e({label:a,title:this.timeZoneText,id:"btnTimeZoneMenu",onClick:function(){var a=Sage.Utility.getClientContextByKey("userTimeZoneKey");dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(b){var c=dijit.byId("TimeZoneMenu");dijit.byId("btnTimeZoneMenu");c._initializeDialog(),c._initializeTimeZoneDataStore(b,a)},error:function(a){}})}}))},_initializeDialog:function(){var a=dijit.byId("TimeZoneMenu"),b=new dijit.Dialog({title:a.timeZoneSettingsText,style:"width:auto;"});dojo.mixin(b,new f),b.createHelpIconByTopic("Select_TimeZone");var c=this._TimeZoneDialog.apply({buttonOK:a.buttonOKText,buttonCancel:a.buttonCancelText,setTimeZone:a.setTimeZoneText,setAsDefault:a.setAsDefaultText});b.set("content",c),b.show();var d=function(){dojo.disconnect(h),dojo.disconnect(i),dojo.disconnect(j),setTimeout(function(a){return function(){a.destroyDescendants(),a.destroy(!1)}}(b),1)},e=function(){b.hide()},g=function(){for(var a=dijit.byId("timeZoneItemsList"),c=dijit.byId("TimeZoneMenu"),d="",e=0;e<a.options.length;e++)if(a.options[e].value===a.value){d=a.options[e];break}d&&c._updateTimeZone(d,!!c.location),b.hide()},h=dojo.connect(b,"hide",this,d),i=dojo.connect(dijit.byId("btnTimeZoneDialogCancel"),"onClick",this,e),j=dojo.connect(dijit.byId("btnTimeZoneDialogOk"),"onClick",this,g)},_initializeTimeZoneDataStore:function(a,b){var c,d=[],e=null,f="";for(c=0;c<a.length;c++)if(a[c].Displayname&&a[c].Keyname&&a[c].Keyname===b){e=a[c].OffsetHours;break}null===e&&(e=0),dojo.forEach(a,function(a){a.Displayname&&a.Keyname&&a.OffsetHours==e&&d.push({id:a.Keyname,text:a.Displayname+f,isDefault:a.IsDefault})});var g={label:"text",value:"id",identifier:"id",items:d},i=new h({data:g}),j=dijit.byId("timeZoneItemsList");for(j.setStore(i),j.set("searchAttr","text"),c=0;c<j.options.length;c++)if(j.options[c].value===b){j.setValue(j.options[c].value);break}},_updateTimeZone:function(a,b){var c={$name:"setusertimezone",request:{UserId:Sage.Utility.getClientContextByKey("userID"),userTimeZone:a.value,isCustomerPortal:b?"t":""}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("users").setOperationName("setusertimezone").execute(c,{success:function(){dijit.byId("btnTimeZoneMenu").setLabel(a.label),this._updateLocalClientContext(a.label,a.value)},failure:function(a){},scope:this})},_updateLocalClientContext:function(a,b){Sage.Utility.setClientContextByKey("userTimeZone",a),Sage.Utility.setClientContextByKey("userTimeZoneKey",b)}})})},"Sage/UI/UniqueToListValidationTextBox":function(){define(["dijit/form/ValidationTextBox","dojo/_base/declare"],function(a,b){return b("Sage.UI.UniqueToListValidationTextBox",a,{notUniqueText:"This value already exists",uniqueList:"",_uniqueHash:{},isValid:function(a){var b=this.inherited(arguments);return!(this.get("value")in this._uniqueHash)&&b},_setUniqueListAttr:function(a){this.uniqueList=dojo.isString(a)?a.split(","):dojo.isArray(a)?a:[a],this._uniqueHash={};for(var b=0;b<this.uniqueList.length;b++)this._uniqueHash[this.uniqueList[b]]=1}})})},"Sage/UI/URL":function(){define(["dijit/_Widget","Sage/_Templated","dijit/form/ValidationTextBox","dojox/validate/regexp","Sage/UI/Controls/TextBox","dojo/_base/declare","Sage/Utility"],function(a,b,c,d,e,f,g){return dojo.mixin(c.prototype.attributeMap,{slxchangehook:"focusNode"}),f("Sage.UI.URL",[a,b],{widgetTemplate:new Simplate(['<div class="urlcontrol" slxcompositecontrol="true" id="{%= $.id %}" >','<input data-dojo-type="Sage.UI.Controls.TextBox" name="{%= $.name %}" ','data-dojo-props="textWithIcons: {%= $.buttonVisible %}"','dojoAttachPoint="focusNode" type="text" style="" ','hotKey="{%= $.hotKey %}" ','{% if($.disabled === "disabled") { %} ','disabled="disabled" ',"{% } %}",'{% if($.readonly === "readonly") { %} ','readonly="readonly" ',"{% } %}",'{% if ($.disabled !== "disabled") { %} ',' dojoAttachEvent="onChange:formatURLChange, onDblClick:launchWebSite, regExpGen:regExpGen" ',"{% } %}",' tabindex="{%= $.tabIndex %}" ','value="{%= $.url %}" required="{%= $.required %}" ','id="{%= $.id %}_urlText" maxlength="{%= $.maxLength %}" > ','{% if ($.buttonVisible && $.disabled !== "disabled") { %}','<img alt="{%= $.buttonToolTip %}" data-dojo-attach-event="ondijitclick: launchWebSite"   ',' tabindex="{%= $.tabIndex %}" alt="{%= $.buttonToolTip %}" ','src="{%= $.buttonImageUrl %}" title="{%= $.buttonToolTip %}" id="{%= $.id %}_urlButton"> ',"{% } %}","</div>"]),name:"",autoPostBack:!1,readonly:"",disabled:"",hotKey:"",buttonVisible:!0,maxLength:128,buttonImageUrl:"",buttonToolTip:"WWW",required:!1,tabIndex:0,url:"",webAddressId:"",constructor:function(a){a.id=a.webAddressId},postCreate:function(){this.formatURL(),this.class&&this.class.length>0&&this.domNode.firstChild&&(this.domNode.firstChild.className=this.class+" "+this.domNode.firstChild.className),this.inherited(arguments)},widgetsInTemplate:!0,attributeMap:{slxchangehook:{node:"focusNode",type:"attribute",attribute:"slxchangehook"}},regExpGen:function(){return g.regexp.invalidInput},formatURL:function(){dojo.style(this.focusNode.focusNode,"color","#000099"),dojo.style(this.focusNode.focusNode,"font-family","Tahoma")},formatURLChange:function(){this.url!==this.focusNode.value&&(this.url=this.focusNode.value)},launchWebSite:function(){var a=this.url;if(!(a.length<1)){var b="http://",c="https://";-1===a.indexOf(b)&&-1===a.indexOf(c)&&(a=b+a),window.open(a,"",["dependent=no","directories=yes","location=yes","menubar=yes","resizeable=yes","pageXOffset=0px","pageYOffset=0px","scrollbars=yes","status=yes","titlebar=yes","toolbar=yes"].join(","))}}})})},"Sage/UI/ActivityScheduler":function(){define(["dojo/i18n","dojo/date","dijit/Menu","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/UserOptions","Sage/Utility/Activity","Sage/Utility","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","dojo/i18n!./nls/ActivityScheduler","dojo/_base/declare","dojo/_base/lang","dojo/string"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return k("Sage.UI.ActivityScheduler",null,{_weekStart:null,_scheduler:null,_schedulerId:"slxLogixScheduler",schedulerContextMenu:null,eventConnections:[],_menuItems:null,_contentWindow:null,_iFrameId:null,_userOptions:{},_schedulerLaunched:!1,self:this,_recurringIcon:"../../images/icons/recurring_14x14.png",_attachmentIcon:"../../images/icons/attach_14x14.png",_alarmIcon:"../../images/icons/alarm_14x14.png",_activityCompleteIcon:"../../images/icons/completed_step_14x14.png",_userActivityData:{},_currentActivity:{},_securityAccessData:[],constructor:function(a,b,c,d){l.mixin(this,j),this._userOptions={daystarttime:"9",dayendtime:"6",defaultactivity:"meeting",starttime:"8",endtime:"5",weekstart:"1",numevents:"3",defaultcalendarview:"month",defaultinterval:15,displaycontactaccount:"0",rememberusers:!0,workweekmon:!0,workweektue:!0,workweekwed:!0,workweekthu:!0,workweekfri:!0,workweeksat:!1,workweeksun:!1,workweek:[1,2,3,4,5],showonopportunities:!1,showonregarding:!1,showonphonenumber:!1,showontime:!1},_scheduler=c.scheduler,this._schedulerId=b,this._menuItems=[],this._contentWindow=c,this._iFrameId=d,this._preloadCalendarUserOptions();var e=this;dojo.subscribe("/entity/activity/updateScheduler",function(a){e._updateSchedulerEvent(a)}),dojo.subscribe("/entity/activity/clearScheduler",function(){e._clearScheduler()}),dojo.subscribe("/entity/activity/addToScheduler",function(a){e._addSchedulerEvent(a)}),dojo.subscribe("/entity/activity/deleteFromScheduler",function(a){a&&-1==a.indexOf("result")&&e._deleteSchedulerEvent(a)})},_loadAllEvents:function(a){setTimeout(function(){this._scheduler.parse(a,"json")},100)},_addSchedulerEvent:function(a){if(null!==a){var b=dojo.clone(a),c=[];c.push(b),self._scheduler.parse(c,"json")}},_updateSchedulerEvent:function(a){if(null!==a){var b=dojo.clone(a);self._scheduler.deleteEvent(b.id);var c=[];c.push(b),self._scheduler.parse(c,"json")}},_deleteSchedulerEvent:function(a){_scheduler.deleteEvent(a)},_setCurrentDate:function(a){_scheduler.setCurrentView(a)},_getSchedulerDate:function(){return _scheduler._date},_launchScheduler:function(){_scheduler.init(this._schedulerId,new Date,this._userOptions.defaultcalendarview),this._schedulerLaunched=!0,this._userOptions.date=_scheduler.date,this._userOptions.weekStartDate=_scheduler._week_min_date,this._userOptions.weekEndDate=_scheduler._week_max_date,this._userOptions.workWeekStartDate=_scheduler._workweek_min_date,this._userOptions.workWeekEndDate=_scheduler._workweek_max_date,dojo.publish("/entity/activity/SchedulerCreated",[this._userOptions,this])},_clearScheduler:function(){_scheduler.clearAll()},_clearSchedulerEvents:function(a){if(a)for(var b=0;b<a.length;b++)_scheduler.deleteEvent(a[b])},_loadTimelessActivities:function(){var a=[];a.push(_scheduler._mode),a.push(_scheduler._date),a.push(self._getWeekStart()),dojo.publish("/entity/activity/calendar/schedulerDateChanged",[a,this])},_getSchedulerDates:function(){return Sys&&Sys.CultureInfo?{month_full:Sys.CultureInfo.CurrentCulture.dateTimeFormat.MonthNames,month_short:Sys.CultureInfo.CurrentCulture.dateTimeFormat.AbbreviatedMonthNames,day_full:Sys.CultureInfo.CurrentCulture.dateTimeFormat.DayNames,day_short:Sys.CultureInfo.CurrentCulture.dateTimeFormat.AbbreviatedDayNames}:this.scheduler_dates},_setTimePatternForDHTMLXLibrary:function(){return-1!==Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortTimePattern.indexOf("H")?{timePattern:"%G:%i",hourPattern:"%G:%i"}:{timePattern:"%g:%i %a",hourPattern:"%g %a"}},_initScheduler:function(){_scheduler.config.scroll_hour=this._userOptions.daystarttime,_scheduler.config.workWeek=this._userOptions.workweek,_scheduler.config.workHours=[0,60*this._userOptions.daystarttime,60*this._userOptions.dayendtime,1440],_scheduler.config.eventsMaxCount=this._userOptions.numevents,_scheduler.locale={date:this._getSchedulerDates(),labels:this.scheduler_labels},_scheduler.DHTMLXLibrary=this._setTimePatternForDHTMLXLibrary(),_scheduler.templates.day_scale_date=function(a){return _scheduler.date.date_to_str("%l")(a)},_scheduler.templates.day_date=function(a){return g.formatLongDate(a)},_scheduler.templates.week_date=function(a,b){if(a.getMonth()!=b.getMonth())return g.formatLongDate(a)+" &ndash; "+g.formatLongDate(_scheduler.date.add(b,-1,"day"));scheduler.date.add(b,-1,"day");return g.formatLongDate(a)+" &ndash; "+g.formatLongDate(_scheduler.date.add(b,-1,"day"))};var a=function(a){var b=!1;return a&&""!==a.trim()&&(b=!0),b},b=_scheduler.date.date_to_str(_scheduler.DHTMLXLibrary.timePattern);_scheduler.templates.tooltip_text=function(d,e,f){var h=f.type,i="",j=null===f.subType?"":f.subType.replace("at","");return"event"==h?(i="<b>"+c.tooltipType+" :</b> Event<br><b>"+c.tooltipDayType+" :</b> "+j,i+="<br/><b>"+c.tooltipStartDate+" :</b> "+g.formatEventDate(d),i+="<br/><b>"+c.tooltipEndDate+" :</b> "+g.formatDateAdd(e,"day",-1),f.location&&(i+="<br/><b>"+c.tooltipLocation+" :</b> "+f.location),f.description&&(i+="<br/><b>"+c.tooltipDescription+" :</b> "+f.description)):(i="<b>"+c.tooltipTime+" :</b> "+b(d)+" - "+b(e),a(f.leadId)?(f.leadName&&(i+="<br/><b>"+c.tooltipLeadName+" :</b> "+f.leadName),f.accountName&&(i+="<br/><b>"+c.tooltipCompanyName+" :</b> "+f.accountName)):(f.contactName&&(i+="<br/><b>"+c.tooltipContactName+" :</b> "+f.contactName),f.accountName&&(i+="<br/><b>"+c.tooltipAccountName+" :</b> "+f.accountName)),f.phoneNumber&&(i+="<br/><b>"+c.tooltipPhoneNumber+" :</b> "+f.phoneNumber),f.location&&(i+="<br/><b>"+c.tooltipLocation+" :</b> "+f.location),f.regarding&&(i+="<br/><b>"+c.tooltipRegarding+" :</b> "+f.regarding),f.priority&&(i+="<br/><b>"+c.tooltipPriority+" :</b> "+f.priority),f.notes&&(i+="<br/><b>"+c.tooltipNotes+" :</b> "+f.notes)),i},_scheduler.clearAll();var c=this;_scheduler.attachEvent("onTemplatesReady",function(){_scheduler.date.workweek_start=_scheduler.date.WorkWeekStart,_scheduler.templates.workweek_date=_scheduler.templates.week_date,_scheduler.templates.workweek_scale_date=_scheduler.templates.week_scale_date,_scheduler.date.add_workweek=function(a,b){return _scheduler.date.add(a,7*b,"day")},_scheduler.date.get_workweek_end=function(a){var b=c._userOptions.workweek[c._userOptions.workweek.length-1]-c._userOptions.workweek[0];return _scheduler.date.add(a,b,"day")}}),_scheduler.date.WorkWeekStart=function(a){var b=c._userOptions.workweek[0];null===a&&(a=new Date);var d=a.getDay();d=b-d;var e=_scheduler.date.add(a,d,"day");return e>a&&(e=_scheduler.date.add(e,-7,"day")),_scheduler.date.date_part(e)},_scheduler.templates.event_title_class=function(a,b,c){return"month"===_scheduler.getState().mode||"event"===c.type||c.confirmed?"":"pending"},_scheduler.date.getDay=function(a){var b=a;if(a.length>1){var c=[];c.SUNDAY=0,c.MONDAY=1,c.TUESDAY=2,c.WEDNESDAY=3,c.THURSDAY=4,c.FRIDAY=5,c.SATURDAY=6,b=c[a.toUpperCase()]}return b||(b=1),b},_scheduler.templates.event_header=function(a,b,d){var e="",f=_scheduler.date.date_to_str(_scheduler.DHTMLXLibrary.timePattern),g=_scheduler.date.date_to_str(_scheduler.DHTMLXLibrary.timePattern);return d.endsAfterMidnight&&(b=d.actualEndDate),d.iconSrc&&(e+='<img src="'+d.iconSrc+'" style="float:left;padding-right:4px;"/>'),d.recurring&&(e+='  <img src="'+c._recurringIcon+'" style="float:left;padding-right:4px;"/>'),"day"===_scheduler._mode&&(d.attachment&&(e+='  <img src="'+c._attachmentIcon+'" style="float:left;padding-right:4px;"/>'),d.alarm&&(e+='  <img src="'+c._alarmIcon+'" style="float:left;padding-right:4px;"/>')),d.id.toString().indexOf("-hist")>0&&(e+='  <img src="'+c._activityCompleteIcon+'" style="float:left;padding-right:4px;"/>'),"day"===_scheduler._mode?e+=f(a)+"-"+f(b):e+=g(a)+"-"+g(b),e},_scheduler.templates.event_text=function(b,d,e){var f="",g=_scheduler.date.date_to_str(_scheduler.DHTMLXLibrary.timePattern);if(e.endsAfterMidnight&&(d=e.actualEndDate),"month"!==_scheduler._mode){var h=e.contactId,i=e.contactName,j=e.leadId,k=e.leadName,l=e.accountId,m=e.accountName,n=e.opportunityId,o=e.opportunity,p="",q="";switch(!1&&(f+="</br>"),a(j)&&m?(k&&(p="<a href=\"javascript:void(window.parent.location ='../../Lead.aspx?entityid="+j+"')\" >"+k+"</a><br>"),q="<a href=\"javascript:void(window.parent.location ='../../Lead.aspx?entityid="+j+"')\" >"+m+"</a><br>"):(a(l)&&m&&(q="<a href=\"javascript:void(window.parent.location = '../../Account.aspx?entityid="+l+"')\">"+m+"</a><br>"),a(h)&&(p="<a href=\"javascript:void(window.parent.location ='../../Contact.aspx?entityid="+h+"')\" >"+i+"</a><br>")),c._userOptions.displaycontactaccount){case"0":f+=p;break;case"1":f+=q;break;case"2":f+=p,f+=q;break;case"3":f+=q,f+=p;break;case"4":f+=""}c._userOptions.showonopportunities&&a(n)&&(f+="<a href=\"javascript:void(window.parent.location ='../../Opportunity.aspx?entityid="+n+"&modeid=Detail')\" >"+o+"</a><br>"),c._userOptions.showonphonenumber&&e.phoneNumber&&(f+=e.phoneNumber+"<br/>"),c._userOptions.showonregarding&&e.regarding&&(f+=e.regarding+"<br/>"),c._userOptions.showontime&&(f+=g(b)+"-"+g(d)+"<br/>"),e.location&&(f+=e.location+"<br/>"),e.priority&&(f+=e.priority+"<br/>"),e.notes&&(f+=e.notes)}else f=e.text;return f},_scheduler.date.week_start=function(a){var b=c._userOptions.weekstart;null===a&&(a=new Date);var d=a.getDay();d=b-d;var e=_scheduler.date.add(a,d,"day");return e>a&&(e=_scheduler.date.add(e,-7,"day")),_scheduler.date.date_part(e)},_scheduler.date.arraySort=function(a,b){return a-b},_scheduler.addEventNow=function(a,b,d){var e,f,h;if(null===a)e="month"===_scheduler._mode?g.roundDateToNextQuarterHour(new Date):new Date;else{var i=new Date(a);"month"===_scheduler._mode?(i.setMinutes((new Date).getMinutes()),i.setHours((new Date).getHours()),e=g.roundDateToNextQuarterHour(i)):e=i}f=null===b?e:new Date(b),null!==d&&"object"!=typeof d||(d=c._userOptions.defaultactivity),h=null!==b?dojo.date.difference(e,new Date(b),"minute"):"60";var j=Sage.Services.getService("ActivityService");if("event"==d){var k={StartDate:Sage.Utility.Convert.toIsoStringFromDate(e),EndDate:Sage.Utility.Convert.toIsoStringFromDate(f)};j.scheduleEvent(k)}else null!==d&&(d=d.toLowerCase().indexOf("phone")>-1?"PhoneCall":d.toLowerCase().indexOf("meeting")>-1?"Meeting":d.toLowerCase().indexOf("to")>-1?"ToDo":d.toLowerCase().indexOf("personal")>-1?"PersonalActivity":"Meeting"),j.scheduleActivity({type:d,preConfigured:{StartDate:Sage.Utility.Convert.toIsoStringFromDate(e),Duration:h}})},_scheduler.xy.menu_width=0,_scheduler.config.details_on_dblclick=!0,_scheduler.config.details_on_create=!0,_scheduler.attachEvent("onClick",function(){return!1}),_scheduler.showLightbox=function(a){if(null!==a&&void 0!==a&&"string"==typeof a){var b=a.replace("0:",""),c=b.split("-");"act"==c[2]?_scheduler._events[a]&&!_scheduler._events[a].confirmed?Sage.Link.confirmActivityFor(c[0],c[1]):Sage.Link.editActivity(c[0],!1,c[1]):"evt"==c[1]||"evt"==c[2]?Sage.Link.editEvent(c[0]):"hist"!=c[1]&&"hist"!=c[2]||Sage.Link.editHistory(c[0])}},_scheduler.getCalendarEventID=function(a){var b=a;if(null!==a&&void 0!==a&&"string"==typeof a){a=a.replace("0:","");b=a.split("-")[0]}return b},_scheduler.getCalendarEventUserID=function(a){var b=a;if(null!==a&&void 0!==a&&"string"==typeof a){a=a.replace("0:","");b=a.split("-")[1]}return b},_scheduler.goToActivityAssociation=function(b,c){var d=null;if(_scheduler._events&&_scheduler._events[c])switch(b){case"Contact":d=_scheduler._events[c].contactId;break;case"Account":d=_scheduler._events[c].accountId;break;case"Lead":d=_scheduler._events[c].leadId;break;case"Opportunity":d=_scheduler._events[c].opportunityId;break;case"Ticket":d=_scheduler._events[c].ticketId}a(d)&&Sage.Link.entityDetail(b,d)},_scheduler.openActivity=function(a){_scheduler.showLightbox(a)},_scheduler.completeActivity=function(a){Sage.Link.completeActivity(_scheduler.getCalendarEventID(a))},_scheduler.getMenuActivityAction=function(a,b){if(!a)return!1;var c=!1,d=_scheduler.getCalendarEventUserID(a),e=_scheduler._events[a].leaderUserId,f=h.getClientContextByKey("userID"),g=_scheduler._events[a].confirmed||!1,i=_scheduler._events[a].allowDelete,j=_scheduler._events[a].allowEdit;switch(b){case"delete":c=i?d===e?"delete":g?"declineConfirmed":"decline":f===d&&(f===e?"delete":g?"declineConfirmed":"decline");break;case"complete":g&&d===e&&j&&(c=!0)}return c},
_scheduler.deleteActivity=function(a){var b=_scheduler.getCalendarEventID(a);Sage.Link.deleteActivity(b)},_scheduler.declineConfirmedUserActivity=function(a){var b=_scheduler.getCalendarEventID(a),c=_scheduler.getCalendarEventUserID(a),d=_scheduler._events[a].leaderUserId;b=b.indexOf(";")>0?b.substring(0,12):b;var e={$key:b,Leader:{$key:d}};Sage.Services.getService("ActivityService").declineMemberConfirmation(e,c)},_scheduler.declineActivity=function(a){var b=_scheduler.getCalendarEventID(a),d=_scheduler.getCalendarEventUserID(a);Sage.Services.getService("ActivityService").confirmActivityFor(b,d,c._loadNotification,c)},_scheduler.deleteActivityEvent=function(a){Sage.Link.deleteEvent(_scheduler.getCalendarEventID(a))},_scheduler.attachEvent("onEventAdded",function(a,b){"string"!=typeof a&&(_scheduler.addEventNow(b.start_date,b.end_date,"atAppointment"),_scheduler.deleteEvent(a))}),_scheduler.attachEvent("onBeforeEventChanged",function(a,b,d){if(d)switch(this._mode){case"day":case"week":case"workweek":_scheduler.addEventNow(a.start_date,a.end_date,c._userOptions.defaultactivity),_scheduler.deleteEvent(a.id);break;case"month":var e=a.end_date;dojo.date.compare(a.end_date,a.start_date)>0&&(e=dojo.date.add(a.end_date,"day",-1)),_scheduler.addEventNow(a.start_date,e,"event"),_scheduler.deleteEvent(a.id)}else{if(!a.allowEdit)return!1;var f={Id:a.id,Text:a.text,StartDate:a.start_date,Alarm:a.alarm,EndDate:Sage.Utility.Convert.toIsoStringFromDate(a.end_date),AlarmMinutesBefore:a.alarmMinutesBefore||-15,Duration:dojo.date.difference(a.start_date,a.end_date,"minute")};"string"==typeof a.id&&(a.id&&a.id.indexOf("-act")>0?(f.Id=_scheduler.getCalendarEventID(a.id),f.UserId=_scheduler.getCalendarEventUserID(a.id),f.AlarmMinutesBefore&&(f.AlarmTime=dojo.date.add(f.StartDate,"minute",f.AlarmMinutesBefore),f.AlarmTime=Sage.Utility.Convert.toIsoStringFromDate(f.AlarmTime)),f.StartDate=Sage.Utility.Convert.toIsoStringFromDate(f.StartDate),c._currentActivity=f,a.id.indexOf(";")>0?c.onEditRecurrenceActivity(f.Id):c._updateUserActivity()):a.id&&a.id.indexOf("-evt")>0&&(f.Id=a.id.replace("-evt",""),f.EndDate=dojo.date.add(a.end_date,"day",-1),c._updateEvent(f)))}return!0}),_scheduler.attachEvent("onViewChange",function(a,b){var c={};c.mode=a,c.date=b,c.weekStartDate=_scheduler._week_min_date,c.weekEndDate=_scheduler._week_max_date,c.workWeekStartDate=_scheduler._workweek_min_date,c.workWeekEndDate=_scheduler._workweek_max_date,dojo.publish("/entity/activity/calendar/schedulerDateChanged",[c,this])}),_scheduler.attachEvent("onContextMenu",function(a,b){var d=_scheduler._mouse_coords(b),e=_scheduler._min_date.valueOf()+6e4*(d.y*_scheduler.config.time_step+24*(_scheduler._table_view?0:d.x)*60);e=_scheduler._correct_shift(e),c._bindContextMenu(a,e)});var d=_scheduler.date.date_to_str(_scheduler.DHTMLXLibrary.hourPattern);_scheduler.config.hour_size_px=60/this._userOptions.defaultinterval*42,_scheduler.templates.hour_scale=function(a){for(var b="",e=0;e<60/c._userOptions.defaultinterval;e++)0===e?(b+="<div style='height:21px;line-height:21px;border-bottom: 1px solid #DcDcDc;'>"+d(a)+"</div>",a=_scheduler.date.add(a,c._userOptions.defaultinterval,"minute")):b+="<div style='height:21px;line-height:21px;'></div>";return b},_scheduler.render_event_bar=function(a){if(0!==this._cols[a._sday]){var b=this._rendered_location,d=this._colsS[a._sday],e=this._colsS[a._eday];e==d&&(e=this._colsS[a._eday+1]);var f=this.xy.bar_height,g=this._colsS.heights[a._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+a._sorder*f,h=document.createElement("DIV"),i=a._timed?"dhx_cal_event_clear":"dhx_cal_event_line",j=_scheduler.templates.event_class(a.start_date,a.end_date,a);j&&(i=i+" "+j);var k=a.color?"background-color:"+a.color+";":"",l=a.textColor?"color:"+a.textColor+";":"",m="",n=10,o=this.xy.month_scale_height+n+2,p=this._colsS.heights[a._sweek+1]-g;if("month"!==this._mode||"month"===this._mode&&p>o){var q=e-d-15;-1===a.id.toString().indexOf("-evt")&&(d+=5,q=e-d-8),m='<div event_id="'+a.id+'" class="'+i+'" style="position:absolute; top:'+g+"px; left:"+d+"px; width:"+q+"px;"+l+k+(a._text_style||"")+'" id ="'+_scheduler.uid()+'">',a._timed&&(a.iconSrc&&(m+='<img src="'+a.iconSrc+'" style="float:left;padding-right:4px;"/>'),a.id.toString().indexOf("-hist")>0&&(m+='  <img src="'+c._activityCompleteIcon+'" style="float:left;padding-right:4px;"/>'),m+=_scheduler.templates.event_bar_date(a.start_date,a.end_date,a)),m+=_scheduler.templates.event_bar_text(a.start_date,a.end_date,a)+"</div>",m+="</div>"}else if(p>n+2){var r=_scheduler.uid();m='<div style="position:absolute; top:'+g+"px; left:"+d+"px;width:"+(e-d-5)+'px;" id ="'+r+'">',m+='<a title="'+c.tooltipMoreActivities+'" href ="javascript:window.scheduler.setCurrentView(new Date(\''+a.start_date+"'),'day');\">",m+='<img src="../../images/CalendarMoreArrow.png" style="float:right" />',m+="</a></div>"}else m="<div></div>";h.innerHTML=m,this._rendered.push(h.firstChild),b.appendChild(h.firstChild)}},this.eventConnections.push(dojo.connect(document.body,"onclick",this,"_bodyClicked")),this._bindContextMenu(null,new Date)},_loadNotification:function(a){this._notificationData=!1,this._notificationStore||(this._notificationStore=new d({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:e.getSDataService("system")})),this._notificationStore.fetch({predicate:"'"+a+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this})},_requestFailure:function(){},_receivedNotification:function(a){this._notificationData=a,Sage.Services.getService("ActivityService").declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this})},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]),dojo.publish("/entity/userNotification/delete",[this._notificationData.$key,this])},_getActivityDataFromNotificationData:function(){var a=null,b=null;return this._notificationData&&(this._notificationData.Activity&&(a=this._notificationData.Activity.$key),this._notificationData.ToUser&&(b=this._notificationData.ToUser.$key)),{activityId:a,userId:b}},onEditRecurrenceActivity:function(a){this._editOccSeriesDlg||(this._editOccSeriesDlg=new i({id:"editOccSeriesQueryCalendar",mode:"edit",disableSeriesOption:"disabled"}),dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(a,b){this._updateActivity(this._currentActivity)})),this._editOccSeriesDlg.set("activityId",a),this._editOccSeriesDlg.show()},_bodyClicked:function(){this.schedulerContextMenu&&this.schedulerContextMenu.isShowingNow&&(this.schedulerContextMenu._popupWrapper.style.display="none")},_updateUserActivity:function(){var a=this._currentActivity,b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));b.setResourceKind("userActivities");var c=dojo.string.substitute('"ActivityId=${0};UserId=${1}"',[a.Id,a.UserId]);b.setResourceSelector(c),this._userActivityData={$key:c,Id:a.Id,StartDate:a.StartDate,Alarm:a.Alarm,Duration:a.Duration},a.AlarmMinutesBefore&&(this._userActivityData.AlarmTime=a.AlarmTime),b.update(this._userActivityData,{scope:this,success:function(a){this._updateActivity()},failure:function(a){}})},_updateActivity:function(a){a||(a=this._userActivityData),a.$key=a.Id;var b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));b.setResourceKind("activities"),b.setResourceSelector(dojo.string.substitute('"${0}"',[a.$key])),b.update(a,{success:function(b){var c,d=[],e=a.$key.substring(0,12);for(c in this._scheduler._events){var f=this._scheduler._events[c];f.id.indexOf(e)>-1&&d.push(f.id)}if(d)for(c=0;c<d.length;c++)this._scheduler.deleteEvent(d[c]);dojo.publish("/entity/activity/activityScheduler/reloadActivity",[e,this]),e!==b.$key&&dojo.publish("/entity/activity/activityScheduler/reloadActivity",[b.$key,this])},failure:function(){},scope:dojo.global})},_getWeekStart:function(a){var b=this._userOptions.weekstart;null===a&&(a=new Date);var c=a.getDay();c=b-c;var d=_scheduler.date.add(a,c,"day");return d>a&&(d=_scheduler.date.add(d,-7,"day")),_scheduler.date.date_part(d)},_getWorkWeekStart:function(a){},_getMonthStart:function(a){return a.setDate(1)},_updateEvent:function(a){var b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));b.setResourceKind("events"),b.setResourceSelector(dojo.string.substitute('"${0}"',[a.Id]));var c={$key:a.Id,StartDate:Sage.Utility.Convert.toIsoStringFromDate(a.StartDate),EndDate:Sage.Utility.Convert.toIsoStringFromDate(a.EndDate)};b.update(c,{success:function(a){},failure:function(){},scope:dojo.global})},_preloadCalendarUserOptions:function(){var a=Sage.Services.getService("UserOptions");a&&a.getByCategory("Calendar",this._receivedCalendarOptions,this,this._failedCalendarOptions)},_receivedCalendarOptions:function(a){var b=a.$resources;b.length>0&&(this._userOptions.workweek=[]);for(var c=0;c<b.length;c++){var d=b[c];switch(d.name.toUpperCase()){case"WEEKSTART":this._userOptions.weekstart=f.getDay(d.value);break;default:this._userOptions[d.name.toLowerCase()]=f.getConvertedOptionValue(d.name,d.value)}}this._userOptions.workweeksun&&this._userOptions.workweek.push(0),this._userOptions.workweekmon&&this._userOptions.workweek.push(1),this._userOptions.workweektue&&this._userOptions.workweek.push(2),this._userOptions.workweekwed&&this._userOptions.workweek.push(3),this._userOptions.workweekthu&&this._userOptions.workweek.push(4),this._userOptions.workweekfri&&this._userOptions.workweek.push(5),this._userOptions.workweeksat&&this._userOptions.workweek.push(6),this._userOptions.workweek&&this._userOptions.workweek.sort(f.arraySort),this._initScheduler(),this._launchScheduler()},_failedCalendarOptions:function(a){this._initScheduler(),this._launchScheduler()},_bindContextMenu:function(a,b){this.schedulerContextMenu&&this.schedulerContextMenu.unBindDomNode(this._iFrameId),this.schedulerContextMenu=new dijit.Menu;var c=null;null===a?c="mnuCalendarSchedule":a.indexOf("-act")>0?c="mnuCalendarActivity":a.indexOf("-evt")>0?c="mnuCalendarEvent":a.indexOf("-hist")>0&&(c="mnuCalendarHistory");for(var d=Sage.UI.DataStore.ContextMenus.calendar_activityContextMenu.items,e=d.length,f=0;f<e;f++){var g=d[f];if(g.id===c){this._buildChildMenu(g.submenu,null,a,b);break}}this.schedulerContextMenu.bindDomNode(this._iFrameId)},_buildChildMenu:function(a,b,c,d){for(var e=a.length,f=0;f<e;f++){var g=a[f];if(g.submenu.length>0){var h=new dijit.Menu;this._buildChildMenu(g.submenu,h,c,d);var i=new dijit.PopupMenuItem({label:g.text,popup:h});b?b.addChild(i):this.schedulerContextMenu.addChild(i)}else{var j=null;if("-"===g.text||" "===g.text||g.isspacer)j=new dijit.MenuSeparator;else{var k=g.href;k=k.replace("javascript:Sage.Link.","javascript:parent.Sage.Link.");var l=!1,m=!1;if("DELETEACTIVITY"===k.toUpperCase())(m=_scheduler.getMenuActivityAction(c,"delete"))||(l=!0);else if("COMPLETEACTIVITY"===k.toUpperCase()){var n=_scheduler.getMenuActivityAction(c,"complete");n||(l=!0)}j=new Sage.UI.MenuItem({label:g.text||"...",icon:"Libraries/dojo/dojo/resources/blank.gif",title:g.tooltip||"",ref:k,deleteAction:m,disabled:l,onClick:function(){switch(this.ref.toUpperCase()){case"SCHEDULEPHONECALL":_scheduler.addEventNow(d,null,"PhoneCall");break;case"SCHEDULEMEETING":_scheduler.addEventNow(d,null,"Meeting");break;case"SCHEDULETODO":_scheduler.addEventNow(d,null,"ToDo");break;case"SCHEDULEPERSONALACTIVITY":_scheduler.addEventNow(d,null,"PersonalActivity");break;case"SCHEDULEEVENT":_scheduler.addEventNow(d,null,"event");break;case"OPENACTIVITY":case"OPENEVENT":case"OPENHISTORY":_scheduler.openActivity(c);break;case"COMPLETEACTIVITY":_scheduler.completeActivity(_scheduler.getCalendarEventID(c));break;case"DELETEACTIVITY":"delete"===this.deleteAction?_scheduler.deleteActivity(c):"decline"===this.deleteAction?_scheduler.declineActivity(c):"declineConfirmed"===this.deleteAction&&_scheduler.declineConfirmedUserActivity(c);break;case"GOTOACCOUNT":_scheduler.goToActivityAssociation("Account",c);break;case"GOTOCONTACT":_scheduler.goToActivityAssociation("Contact",c);break;case"GOTOOPPORTUNITY":_scheduler.goToActivityAssociation("Opportunity",c);break;case"GOTOTICKET":_scheduler.goToActivityAssociation("Ticket",c);break;case"GOTOLEAD":_scheduler.goToActivityAssociation("Lead",c);break;case"DELETEEVENT":_scheduler.deleteActivityEvent(_scheduler.getCalendarEventID(c))}}})}b?b.addChild(j):this.schedulerContextMenu.addChild(j)}}}})})},"Sage/UI/TimelessActivitiesPane":function(){define(["dijit/_Widget","dojo/i18n","Sage/UI/Controls/GridParts/Columns/ActivityType","Sage/UI/Controls/GridParts/Columns/HistoryType","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","dojo/_base/lang","dojo/string","dojo/i18n!./nls/TimelessActivitiesPane","dojo/_base/declare","Sage/UI/Controls/Grid","dojo/_base/connect","Sage/Store/SData","Sage/UI/MenuItem"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return k("Sage.UI.TimelessActivitiesPane",a,{gridMode:null,Id:null,grid:null,currentUserIds:[],userColor:[],queryStartDate:null,queryEndDate:null,currentUserDeafultCalendarView:null,schedulerDate:null,weekStart:null,workWeekStart:null,weekEnd:null,workWeekEnd:null,users:{},userActivities:[],constructor:function(a){h.mixin(this,b.getLocalization("Sage.UI","TimelessActivitiesPane",this.lang)),this.Id=a.Id,this.users=a.users,this.gridMode=a.mode;var c,d=this,e=function(a){var b=a.date.valueOf();switch(a.mode){case"day":var c=new Date(b);c.setHours(0,0,0,0),d.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(c),d.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(c);break;case"month":var e=dojo.date.getDaysInMonth(new Date(b)),f=new Date(new Date(b).setDate(1));f.setHours(0,0,0,0);var g=new Date(new Date(b).setDate(e));g.setHours(0,0,0,0),d.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(f),d.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(g);break;case"week":var h=new Date(a.weekStartDate.valueOf()),i=new Date(a.weekEndDate.valueOf());h.setHours(0,0,0,0),i.setHours(0,0,0,0),d.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(h),d.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(i);break;case"workweek":var j=new Date(a.workWeekStartDate.valueOf()),k=new Date(a.workWeekEndDate.valueOf());j.setHours(0,0,0,0),k.setHours(0,0,0,0),d.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(j),d.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(k);break;default:var l=new Date(b);l.setHours(0,0,0,0),d.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(l),d.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(l,"day",1)}};if(this.users){for(var f in this.users){c=h.trim(this.users[f].userId.toString());var g=i.substitute("'${0}'",[c]);-1==dojo.indexOf(this.currentUserIds,g)&&this.currentUserIds.push(g),this.users[f].usercolor&&(this.userColor[c]=h.trim(this.users[f].usercolor.toString())),null===this.currentUserDeafultCalendarView&&(this.currentUserDeafultCalendarView=this.users[f].defaultcalendarview.toString()),null===this.weekStart&&(this.weekStart=this.users[f].weekstartdate),null===this.weekEnd&&(this.weekEnd=this.users[f].weekenddate),null===this.workWeekStart&&(this.workWeekStart=this.users[f].workweekstartdate),null===this.workWeekEnd&&(this.workWeekEnd=this.users[f].workweekenddate)}var j={};j.mode=this.currentUserDeafultCalendarView,j.date=new Date,j.weekStartDate=this.weekStart,j.weekEndDate=this.weekEnd,j.workWeekStartDate=this.workWeekStart,j.workWeekEndDate=this.workWeekEnd,e(j)}m.subscribe("/sage/ui/calendarUserList/updated",function(a){if(a){d.currentUserIds=[];for(var b in a){var c=h.trim(a[b].userId.toString()),e=i.substitute("'${0}'",[c]);-1==dojo.indexOf(d.currentUserIds,e)&&d.currentUserIds.push(e),a[b].usercolor&&(d.userColor[c]=h.trim(a[b].usercolor.toString()))}}d.userActivities=[],setTimeout(function(){d.grid.refresh()},"1")}),m.subscribe("/sage/ui/calendarUser/selectionChanged/add",function(a){var b=h.trim(a.userId.toString()),c=i.substitute("'${0}'",[b]);-1==dojo.indexOf(d.currentUserIds,c)&&d.currentUserIds.push(c),d.userColor[b]=a.usercolor.toString(),d.userActivities=[],setTimeout(function(){d.grid.refresh()},"1")}),m.subscribe("/sage/ui/calendarUser/selectionChanged/remove",function(a){d.currentUserIds=dojo.filter(d.currentUserIds,function(b){return b!="'"+a.userId.toString()+"'"}),d.userActivities=[],setTimeout(function(){d.grid.refresh()},"1")}),m.subscribe("/entity/activity/calendar/schedulerDateChanged",function(a){e(a),d.userActivities=[],d.grid.refresh()}),m.subscribe("/entity/activity/create",function(a){d.refreshGrid(a)}),m.subscribe("/entity/userActivities/timeless/saved",function(a){d.grid.refresh()}),m.subscribe("/entity/activity/change",function(a){d.refreshGrid(a)}),m.subscribe("/entity/activity/timeless/delete",function(a){d.userActivities=[],d.grid.refresh()})},refreshGrid:function(a){null!==a&&(a.Timeless||a.TimelessChanged)&&(this.userActivities=[],this.grid.refresh())},startup:function(){var a,b=this;a="completed"===this.gridMode?{context:null,readOnly:!0,columns:[{field:"$key",editable:!1,hidden:!0,id:"id",formatter:function(a,b){return["<div id=",a," >",a,"</ div>"].join("")},unhidable:!0},{label:" ",sortable:!1,width:"20px",field:"icon",unhidable:!0,formatter:function(a,c){return c&&(a=c.UserId),"<div class='userStyles "+b.userColor[a]+"'></div>"}},{field:"Type",keyField:"$key",label:this.header_type,formatter:function(a,b){return(new d).format(a,b)},width:"90px"},{field:"ContactName",label:this.header_contact,width:"100px"},{field:"Description",label:this.header_regarding,width:"100px"}],store:new n({service:f.getSDataService("dynamic"),resourceKind:"history",include:["$descriptors"],select:["$key","Regarding","Description","AccountId","AccountName","ActivityId","ContactName","Recurring","StartDate","Timeless","Type","Priority","PhoneNumber","LeadId","LeadName","LongNotes","Location","UserName"],where:function(){return null===b.queryStartDate&&(b.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(new Date)),null===b.queryEndDate&&(b.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(new Date)),dojo.string.substitute("UserId in (${0}) and Timeless and StartDate between @${1}@ and @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[b.currentUserIds.toString(),b.queryStartDate,b.queryEndDate])}}),sort:[{attribute:"StartDate",descending:!0}],tools:[],minRowsPerPage:10,id:this.Id,tabId:"ActivityCalendar",placeHolder:this.gridNodeId,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0}:{context:null,readOnly:!0,columns:[{field:"$key",editable:!1,hidden:!0,id:"id",formatter:function(a,b){return["<div id=",a," >",a,"</ div>"].join("")},unhidable:!0},{label:" ",sortable:!1,width:"20px",field:"icon",unhidable:!0,formatter:function(a,c){var d;return c&&(c.remove||(d=c.UserActivities.$resources[0].User.$key)),"<div class='userStyles "+b.userColor[d]+"'></div>"}},{field:"Type",keyField:"$key",label:this.header_type,formatter:function(a,b){return(new c).format(a,b)},width:"90px"},{field:"ContactName",label:this.header_contact,width:"100px"},{field:"Description",label:this.header_regarding,width:"100px"}],store:new n({service:f.getSDataService("system"),resourceKind:"activities",include:["$descriptors,UserInfo"],select:["$key","Regarding","Description","AccountId","AccountName","ActivityId","ContactName","Recurring","StartDate","Timeless","Type","Priority","Leader/$key","PhoneNumber","LeadId","LeadName","LongNotes","Location","UserActivities/User/$key","UserActivities/$resources"],onComplete:this._onComplete,where:function(){return null===b.queryStartDate&&(b.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(new Date)),null===b.queryEndDate&&(b.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(new Date)),dojo.string.substitute("UserActivities.UserId in (${0}) and Timeless and UserActivities.Status ne 'asDeclned' and StartDate between @${1}@ and @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[b.currentUserIds.toString(),b.queryStartDate,b.queryEndDate])}}),sort:[{attribute:"StartDate",descending:!0}],tools:[],id:this.Id,minRowsPerPage:10,placeHolder:this.gridNodeId,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0};var e=new l(a);this.grid=e,e.resize(),e.onContextActivate=h.hitch(this,function(a){a.preventDefault();var b=e._grid.row(a).data;this._bindContextMenu(b.$key,new Date,e._grid.row(a).element)}),e.onRowDblClick=function(a){Sage.Link.editActivity(a.id)},e.onCellMouseOver=this._onCellMouseOver(),e.onCellMouseLeave=this._onCellMouseLeave(),e.onHeaderClick=h.hitch(this,function(a){this.userActivities=[]}),dijit.byId("TaskPane_splitter").on(".dgrid-header:click",h.hitch(this,function(a){this.userActivities=[]}))},isValidId:function(a){var b=!1;return a&&""!==a.trim()&&(b=!0),b},_onComplete:function(a){var b=this;if(a){b.userActivities=[];for(var c=a.length,d=0;d<c;d++){var e=!1,f=a[d].$key;if(a[d].UserActivities)for(var g=a[d].UserActivities.$resources,h=g.length,i=0;i<h;i++)if(e)a[d].UserActivities.$resources[i].remove=!0;else{var j=g[i],k=j.User.$key,l=b.userActivities[f];l?dojo.indexOf(l,k)<0?(b.userActivities[f].push(k),e=!0):a[d].UserActivities.$resources[i].remove=!0:(b.userActivities[f]=[],b.userActivities[f].push(k),e=!0)}else{var m=a[d].Leader.$key,n=b.userActivities[f];n?dojo.indexOf(n,m)<0&&b.userActivities[f].push(m):(b.userActivities[f]=[],b.userActivities[f].push(m)),a[d].UserActivities=[],a[d].UserActivities.$resources=[];var o={};o.$key=m,o.User={$key:m},a[d].UserActivities.$resources.push(o)}}}return a},_onCellMouseLeave:function(){var a=this.grid._grid;return h.hitch(this,function(b){dijit.hideTooltip(a.cell(b).element)})},_onCellMouseOver:function(){var a=this.grid._grid;return h.hitch(this,function(b){var c,d=a.cell(b).row,f=d.data,g="",i="";f.cell&&(g+=this.tooltip_type+" : "+Sage.Utility.Activity.getActivityTypeName(f.cell)+"<br>"),this.isValidId(f.LeadId)?(g+=this.tooltip_lead+" : "+f.LeadName+"<br>",f.AccountName&&(g+=this.tooltip_company+" : "+f.AccountName+"<br>")):(f.ContactName&&(g+=this.tooltip_contact+" : "+f.ContactName+"<br>"),f.AccountName&&(g+=this.tooltip_account+" : "+f.AccountName+"<br>")),f.PhoneNumber&&(g+=this.tooltip_phone+" : "+f.PhoneNumber+"<br>"),f.UserId?(c=f.UserId,i=f.UserName):f.Leader&&(c=f.Leader.$key,i=f.Leader.$descriptor),h.trim(e.getClientContextByKey("userID")).toUpperCase()!==c&&i&&(g+=this.tooltip_leader+" : "+i+"<br>"),f.Description&&(g+=this.tooltip_regarding+" : "+f.Description+"<br>"),f.Location&&(g+=this.tooltip_location+" : "+f.Location+"<br>"),f.LongNotes&&(g+=this.tooltip_notes+" : "+f.LongNotes+"<br>"),dijit.showTooltip(g,a.cell(b).element)})},_bindContextMenu:function(a,b,c){this.pMenu1&&this.pMenu1.unBindDomNode(c),this.pMenu1=null,this.pMenu1=new dijit.Menu;var d="mnuCalendarActivity";"completed"===this.gridMode&&(d="mnuCalendarHistory");for(var e=Sage.UI.DataStore.ContextMenus.calendar_activityContextMenu.items,f=e.length,g=0;g<f;g++){var h=e[g];if(h.id===d){this._buildChildMenu(h.submenu,null,a,b);break}}this.pMenu1.bindDomNode(c)},_buildChildMenu:function(a,b,c,d){for(var e=a.length,f=0;f<e;f++){var g=a[f];if(g.submenu.length>0){var h=new dijit.Menu;this._buildChildMenu(g.submenu,h,c,d);var i=new dijit.PopupMenuItem({label:g.text,popup:h});b?b.addChild(i):this.pMenu1.addChild(i)}else{var j=null;if("-"===g.text||" "===g.text||g.isspacer)j=new dijit.MenuSeparator;else{var k=g.href,l=this;j=new o({label:g.text||"...",icon:"Libraries/dojo/dojo/resources/blank.gif",title:g.tooltip||"",ref:k,onClick:function(){switch(this.ref.toUpperCase()){case"OPENACTIVITY":Sage.Link.editActivity(c);break;case"OPENHISTORY":Sage.Link.editHistory(c);break;case"COMPLETEACTIVITY":Sage.Link.completeActivity(c);break;case"DELETEACTIVITY":Sage.Link.deleteActivity(c,function(a){l.grid.refresh()});break;case"GOTOACCOUNT":Sage.Link.goToActivityAssociation("Account",c);break;case"GOTOCONTACT":Sage.Link.goToActivityAssociation("Contact",c);break;case"GOTOOPPORTUNITY":Sage.Link.goToActivityAssociation("Opportunity",c);break;case"GOTOTICKET":Sage.Link.goToActivityAssociation("Ticket",c);break;case"GOTOLEAD":Sage.Link.goToActivityAssociation("Lead",c)}}})}b?b.addChild(j):this.pMenu1.addChild(j)}}}})})},"Sage/UI/CalendarUsersListPane":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","Sage/UI/EditCalendarUsers","Sage/Utility","dojo/_base/lang","dojo/_base/array","dojo/i18n","dojo/on","dojo/parser","dojo/dom","dojo/query","dojo/_base/declare","dojo/dom-construct","dojo/i18n!./nls/CalendarUsersListPane","Sage/UI/GridView","dojo/_base/connect","dojo/query","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return l("Sage.UI.CalendarUsersListPane",null,{Id:null,_grid:null,_colors:{},_selectedUsers:{},_maxUserCount:4,_checkedUsersCount:0,_initialLoad:!1,_storeItems:[],_maxUserCountReached:!1,_userOptions:{},editCalendarUsers:null,_favoriteUsersList:[],editCalendarUsersHandle:null,_userCalendarFavoriteId:null,_usersListUpdatedFromDialog:!1,_selectedUsersListUpdatedFromDialog:!1,_LOCALSTORE_NAMESPACE:"SalesLogix-Calendar",_currentUserId:null,constructor:function(a){this.Id=a.Id,this.EditCalUsersNodeId=a.EditUsersNode,this._userOptions=a.options,this._usersListUpdatedFromDialog=!1,this._selectedUsersListUpdatedFromDialog=!1,this._currentUserId=Sage.Utility.getClientContextByKey("userID"),this._colors=[{usercolor:"user2",set:!1},{usercolor:"user3",set:!1},{usercolor:"user4",set:!1},{usercolor:"user5",set:!1}],e.mixin(this,n),this._initializeList();var b=this,d=m.toDom('<div align="right"><a id="editUserLink" href="#" class="filter-edit-items">'+this.editUsersLinkText+"</a></div>");m.place(d,dojo.byId("calUserTasklet"),"before"),this.editCalendarUsers=new c({id:"EditCalendarUsers1",parent:this}),h(j.byId("editUserLink"),"click",function(a){b.editCalendarUsers.showDialog(b._favoriteUsersList,b._userCalendarFavoriteId),a.cancelBubble=!0})},refresh:function(){this._grid.grid.setFilter(this._where())},_where:function(){var a=Sage.Utility.getClientContextByKey("userID");return dojo.string.substitute("AccessId eq '${0}'",[e.trim(a)])},_getUserColor:function(a){var b="";return this._selectedUsers[a]&&(b=this._selectedUsers[a].usercolor),b},_initializeList:function(){var b=this.header_user||"User",c=this.header_icon||"Icon",d=this,g=function(a){d._storeItems=[],d._favoriteUsersList=[],f.forEach(a,function(a,b){e.mixin(a,{usercolor:"",username:a.Name,userId:a.ResourceId,ResourceId:e.trim(a.ResourceId)}),d._favoriteUsersList.push(a.ResourceId),d._storeItems.push(a),d._userCalendarFavoriteId||(d._userCalendarFavoriteId=a.$key)}),0===d._favoriteUsersList.length&&d._favoriteUsersList.push(Sage.Utility.getClientContextByKey("userID"))},h={service:a.getSDataService("dynamic"),resourceKind:"calendarfavoriteusersviews",select:["$key","Name","UserId","ResourceId","Selected"],include:[],where:this._where(),onComplete:g},i=[{field:"icon",width:"20px",label:c,formatter:function(a,b){return b&&(a=b.ResourceId),"<div class='userStyles "+d._getUserColor(a)+"'></div>"},sortable:!1},{field:"Name",width:"100%",label:b,sortable:!1}],j=this._grid=new o({id:"calUserTaskletGrid",storeOptions:h,columns:i,indirectSelection:!0,placeHolder:"calUserTasklet",hideHeaderView:!0,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"extended",rowSelection:!0,classNames:"dgrid-autoheight",sort:[{attribute:"Selected",descending:!0}]});if(this._userOptions.rememberusers)this._loadCalendarUserListOptions();else{var k={},l="calendarUsers-"+this._currentUserId;k.value=this._getFromSessionStorage(l,this._LOCALSTORE_NAMESPACE),this._receivedCalendarUserListOptions(k)}p.connect(r.byId("centerContent"),"resize",function(){j.grid.resize()})},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},_loadCalendarUserListOptions:function(){var a=Sage.Services.getService("UserOptions");a&&a.get("CalendarUsers","Calendar",this._receivedCalendarUserListOptions,null,this)},_receivedCalendarUserListOptions:function(a){var b=this.maxUsersErrorMessage||"Sorry, you cannot view more than ${0} calendars (including your own) at one time.  Clear one of the currently-selected calendars and try again.";if(b=dojo.string.substitute(b,[this._maxUserCount]),null!==a&&a){var c=a.value,g=d.getClientContextByKey("userID");g=e.trim(g),null===c||""===c?c=g+"|user1":c.indexOf(g)<0&&(c+=","+g+"|user1"),dojo.cookie("selectedCalendarUsers",c),this._setSelectedUsers(c)}if(this._selectedUsers){this._grid.createGridView();var h=this._grid.grid,i=this;h.onSelection=function(a){if(i._initialLoad)i._checkedUsersCount,i._maxUserCount;else{var c=a.rows[0].data;if(i._checkedUsersCount<i._maxUserCount){i._checkedUsersCount++;var f=c.ResourceId.substr(0,12),g="";if(i._selectedUsers[f]);else{if(f===e.trim(d.getClientContextByKey("userID")))g="user1";else if(!g||""===g)for(var h=0;h<i._colors.length;h++)if(!i._colors[h].set){g=i._colors[h].usercolor,i._colors[h].set=!0;break}var j={};j.userId=f,j.usercolor=g,i._selectedUsers[f]=j;var k=e.clone(j);i._saveUserOption();var l=q(".field-icon",a.rows[0].element)[0],n="<div class='userStyles "+i._getUserColor(c.ResourceId)+"'></div>";m.empty(l),m.place(n,l),p.publish("/sage/ui/calendarUser/selectionChanged/add",[k,null])}}else i._maxUserCountReached=!0,a.grid.deselect(c),Sage.UI.Dialogs.showError(b)}},h.onDeselection=function(a){if(!i._initialLoad){if(i._maxUserCountReached)return void(i._maxUserCountReached=!1);var b=a.rows[0].data,c=!1,d=b.ResourceId.substr(0,12),e=i._selectedUsers[d].usercolor;if(i._selectedUsers[d]&&(c=!0),c){for(var f=0;f<i._colors.length;f++)if(i._colors[f].usercolor===e){i._colors[f].set=!1;break}delete i._selectedUsers[d],i._checkedUsersCount--,i._saveUserOption();var g=q(".field-icon",a.rows[0].element)[0],h="<div class='userStyles "+i._getUserColor(b.ResourceId)+"'></div>";m.empty(g),m.place(h,g);var j={};j.userId=d,p.publish("/sage/ui/calendarUser/selectionChanged/remove",[j,this])}}},h.onLoadComplete=e.hitch(this,function(a){i._initialLoad=!0;var b=!1;this._checkedUsersCount=0;for(var c=[],d=e.clone(i._selectedUsers),g=h.totalRecords,j=0;j<g;j++){var k=i._storeItems[j],l=k.ResourceId.substr(0,12);i._selectedUsers[l]&&(c.push(l),a.grid.isSelected(k)||(a.grid.select(k),i._checkedUsersCount++))}for(var m in d){var n=e.trim(d[m].userId.toString()),o=e.trim(d[m].usercolor.toString());if(f.indexOf(c,n)<0){delete i._selectedUsers[n];for(var p=0;p<i._colors.length;p++)if(i._colors[p].usercolor===o){i._colors[p].set=!1;break}b=!0}}if(b&&i._saveUserOption(),i._initialLoad=!1,i._selectedUsers&&!i._isEmpty(i._selectedUsers)){var q=e.clone(i._selectedUsers);i._usersListUpdatedFromDialog?i._usersListUpdatedFromDialog&&i._selectedUsersListUpdatedFromDialog&&dojo.publish("/sage/ui/calendarUserList/updated",[q,null]):dojo.publish("/sage/ui/calendarUserList/loaded",[q,null])}else i._usersListUpdatedFromDialog||dojo.publish("/sage/ui/calendarUserList/loadedNavigationCalendar",[i._userOptions.weekstart,this])})}},refreshCalendarUsers:function(a){var b="",c=!1,e=this;this._initialLoad=!0;for(var f in this._selectedUsers)if(b=this._selectedUsers[f].userId.toString(),!d.isItemInArray(a,b)){for(var g=this._selectedUsers[b].usercolor,h=0;h<this._colors.length;h++)if(this._colors[h].usercolor===g){this._colors[h].set=!1;break}this._checkedUsersCount--;var i={};i.userId=b,dojo.publish("/sage/ui/calendarUser/selectionChanged/remove",[i,this]),delete this._selectedUsers[f],c=!0}this._usersListUpdatedFromDialog=!0,c?(this._selectedUsersListUpdatedFromDialog=!0,
this._saveUserOption(this.refresh)):(this._selectedUsersListUpdatedFromDialog=!1,setTimeout(function(){e.refresh()},"10"))},_saveUserOption:function(a){var b="";if(this._selectedUsers){for(var c in this._selectedUsers)""!==b&&(b+=","),b+=e.trim(this._selectedUsers[c].userId.toString()),b+="|",this._selectedUsers[c].usercolor&&(b+=this._selectedUsers[c].usercolor.toString());if(this._userOptions.rememberusers){var d=Sage.Services.getService("UserOptions");d&&d.set("CalendarUsers","Calendar",b,a,null,this)}else{var f="calendarUsers-"+this._currentUserId;this._saveToSessionStorage(f,b,this._LOCALSTORE_NAMESPACE)}}},_setSelectedUsers:function(a){if(null!==a)for(var b,c,d,e=a.split(","),f=0;f<e.length;f++)if(b=e[f]){if(c=b.split("|")[0],d=b.split("|")[1]){for(var g=0;g<this._colors.length;g++)if(this._colors[g].usercolor===d){this._colors[g].set=!0;break}}else for(var h=0;h<this._colors.length;h++)if(!this._colors[h].set){d=this._colors[h].usercolor,this._colors[h].set=!0;break}var i={};i.userId=c,i.usercolor=d,this._selectedUsers[c]=i}},_getFromSessionStorage:function(a,b){b||(b=this._LOCALSTORE_NAMESPACE);var c=b+"_"+a;return sessionStorage.getItem(c)},_saveToSessionStorage:function(a,b,c){c||(c=this._LOCALSTORE_NAMESPACE);var d=c+"_"+a;sessionStorage.setItem(d,b)}})})},"Sage/UI/EditCalendarUsers":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","dijit/Dialog","dijit/form/Button","Sage/UI/ImageButton","dijit/form/CheckBox","dijit/form/TextBox","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/json","dojo/parser","dojo/text!./templates/EditCalendarUsers.html","dojo/i18n!./nls/EditCalendarUsers","Sage/Utility"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return k("Sage.UI.EditCalendarUsers",[a,b,c],{templateString:s,widgetsInTemplate:!0,id:"editFilterItems",store:null,checkBoxes:null,allItems:null,parent:null,formatter:null,favoriteUserIds:[],maxSelectCount:25,selectedCount:0,currentUserId:null,count:1e3,loading:!1,handles:null,mainHandles:null,safeCheck:!0,open:!1,checkBoxTemplate:new Simplate(['<input id="{%: $.id %}" ','name="{%: $.name %}" ','data-dojo-type="dijit.form.CheckBox" ',"{%: $.disabled %}",'class="editFilterCheckBox" />','<label for="{%: $.id %}" {%: $.disabledStyle %}>{%: $.itemName %}</label><br />']),constructor:function(a){this.inherited(arguments),this.checkBoxes=[],this.allItems=[],this.handles=[],this.mainHandles=[],m.mixin(this,t),this.initialize()},initialize:function(){this.maxUsersErrorMessage=dojo.string.substitute(this.maxUsersErrorMessage,[this.maxSelectCount]),this.currentUserId=Sage.Utility.getClientContextByKey("userID"),new Sage.SData.Client.SDataResourceCollectionRequest(d.getSDataService("dynamic")).setResourceKind("activityresourceviews"),this.store=new e({service:d.getSDataService("dynamic"),resourceKind:"activityresourceviews",select:["$key","ResourceId","Name"],include:[],sort:[{attribute:"Name"}]})},_where:function(a){var b=Sage.Utility.getClientContextByKey("userID"),c="";return c="ADMIN"===m.trim(b)?dojo.string.substitute("(AccessId eq '${0}' OR AccessId eq '${1}' OR AccessId eq 'EVERYONE') AND Type eq 'User'",[b,m.trim(b)]):dojo.string.substitute("(AccessId eq '${0}' OR AccessId eq 'EVERYONE') AND Type eq 'User'",[m.trim(b)]),a&&(a=a.replace(/'/g,"''"),c+=dojo.string.substitute(" AND Name like '%${0}%'",[m.trim(a)])),c},postCreate:function(){this.inherited(arguments),this.mainHandles.push(this.textFind.on("keyDown",m.hitch(this,this._onFindMouseDown)))},showDialog:function(a,b){this.favariteUserCalendarId=b,this.favoriteUserIds=a,this.requestData(),m.mixin(this.dialogNode,new p),this.dialogNode.titleNode.innerHTML=this.dialogTitle,this.dialogNode.show(),this.open=!0},hideDialog:function(){this.dialogNode.hide()},_onClearClick:function(){this.textFind.set("value",""),this._onFindClick()},_onCancelClick:function(){this.textFind.set("value",""),this.dialogNode.hide(),this.allItems=[]},_onOKClick:function(){this.textFind.set("value",""),this._addFavoriteUsers(this.allItems,this._refreshParent,this),this.dialogNode.hide(),this.allItems=[]},_refreshParent:function(a){a.parent&&a.parent.refreshCalendarUsers(a.allItems)},_addFavoriteUsers:function(a,b,c){var d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("UserCalendarFavorites").setOperationName("UpdateUserCalendarFavorites"),f={$name:"UpdateUserCalendarFavorites",request:{UserCalendarFavoriteId:this.favariteUserCalendarId,userId:this.currentUserId,favUserIds:a.join()}};e.execute(f,{success:b(c),failure:function(){b(c)},scope:c||this})},uninitialize:function(){this.contentNode&&(l.forEach(this.mainHandles,function(a){a.remove()}),this._destroyContent(),this.checkBoxes=null,this.allItems=null,this.buttonCancel.destroy(!1),this.buttonOK.destroy(!1),this.buttonFind.destroy(!1),this.textFind.destroy(!1),this.dialogNode.destroy(!1),this.inherited(arguments))},requestData:function(a){this.loading||(this._destroyContent(),this.checkBoxes=[]),this.loading=!0;var b="";b=a?this._where(a):this._where(),this.store.fetch({onError:m.hitch(this,this._onFetchError),onComplete:m.hitch(this,this._onFetchComplete),query:{conditions:b},count:this.count,scope:this})},_onFindMouseDown:function(a){13===a.keyCode&&this._onFindClick()},_onFindClick:function(){if(!this.loading){var a=this.textFind.get("value");a?this.requestData(a):this.requestData()}},_destroyContent:function(){this.contentNode&&(l.forEach(o.findWidgets(this.contentNode),function(a){a.destroy(!1)}),l.forEach(this.handles,function(a){a.remove()}),this.handles=[],this.checkBoxes=[],this.contentNode.innerHTML="")},_onFetchError:function(){},_onCheckClick:function(a){var b,c=this.self,d=this.checkBox,e=d&&d.get("id");d.checked?-1==(b=l.indexOf(c.allItems,e))&&(c.selectedCount<c.maxSelectCount?(c.selectedCount++,c.allItems.push(e)):(Sage.UI.Dialogs.showError(c.maxUsersErrorMessage),d.set("checked",!1))):(b=l.indexOf(c.allItems,e),c.allItems.splice(b,1),c.selectedCount--)},_onFetchComplete:function(a){var b,c,d,e,f,g,h=null,i=[],j=a.length;for(this.selectedCount=0,d=0;d<j;d++)b=a[d],f="",g="",e=b.Name||"",c=b.ResourceId,c==this.currentUserId&&(f="disabled = 'true'"),i.push(this.checkBoxTemplate.apply({id:c,name:e,itemName:e,disabled:f,disabledStyle:g}));this.contentNode.innerHTML="",h=n.toDom(i.join("")),n.place(h,this.contentNode,"last"),this._finishedLoading()},_finishedLoading:function(){this._parseCheckBoxes(),this.setupCheckState(),this.loading=!1},_parseCheckBoxes:function(){if(this.contentNode){var a;r.parse(this.contentNode),a=o.findWidgets(this.contentNode),l.forEach(a,function(a){a.on("click",m.hitch({checkBox:a,self:this},this._onCheckClick)),this.checkBoxes.push(a)},this)}},setupCheckState:function(){var a=this.currentUserId;u.isItemInArray(this.favoriteUserIds,a)||this.favoriteUserIds.push(a),l.forEach(this.checkBoxes,function(a){var b=a.get("id");l.indexOf(this.favoriteUserIds,b),u.isItemInArray(this.favoriteUserIds,b)?(a.set("checked",!0),this.selectedCount++,this.allItems.push(b)):a.set("checked",!1)},this)}})})},"Sage/Utility/main":function(){define(["Sage/Utility/Activity","Sage/Utility/Dashboard","Sage/Utility/Groups","Sage/Utility/_LocalStorageMixin","Sage/Utility/SDataLookup","Sage/Utility/Sql","Sage/Utility/Email","Sage/Utility/ErrorHandler","Sage/Utility/File","Sage/Utility/File/DragDropWatcher","Sage/Utility/File/DefaultDropHandler","Sage/Utility/UserOptions","Sage/Utility/Validate","Sage/Utility/PickList","Sage/Utility/Jobs","Sage/Utility/Entity","Sage/Utility/Workspace","Sage/Utility/GeneralSchemaReader","Sage/Utility/_SchemaReaderHelper","Sage/Utility/FilterSchemaReader","Sage/Utility/PickListSchemaReader","Sage/Utility/PropertySchemaReader","Sage/Utility/PricingAndAvailability","Sage/Utility/IONWorkflowHelper"],function(){})},"Sage/Utility/Dashboard":function(){define(["dojo/i18n","Sage/UI/Controls/Grid","Sage/Groups/GroupManager","Sage/UI/Dialogs","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Dashboard","dojo/i18n!../UI/Dashboard/nls/WidgetDefinition","dojo/i18n!dijit/nls/common","dojo/request/xhr","dojo/_base/lang","dojo/store/Memory"],function(a,b,c,d,e,f,g,h,i,j,k){return Sage.namespace("Utility.Dashboard"),dojo.mixin(Sage.Utility.Dashboard,{_grid:null,promoteGroupToDashboard:function(){var a=new Simplate(["<div>",'<div">{%= $.headerText %}</div>','<div id="{%= $.id %}-grid" style="width:350px;height:150px;"></div>','<div align="right"><button data-dojo-type="dijit.form.Button" type="submit" class="okButton" ','style="margin-top:5px;" data-dojo-props="onClick:function(){dijit.byId(\'promoteDialog\').promote();}"',">{%= $.okText %}</button>",'<button data-dojo-type="dijit.form.Button" type="button" class="cancelButton" ','style="margin-top:5px; margin-left:10px;" data-dojo-props="onClick:function(){dijit.byId(\'promoteDialog\').hide();}"',">{%= $.cancelText %}</button></div>","</div> "]),l=null;dijit.byId("promoteDialog")?l=dijit.byId("promoteDialog"):(l=new dijit.Dialog({id:"promoteDialog",title:window.MasterPageLinks.PromoteTitle,promote:j.hitch(this,function(){var a=c.GetCurrentGroupInfo(),b=(dijit.byId("promoteDialog-grid"),this._grid.getSelectedRowData());if(0===b.length)return void d.showInfo(window.MasterPageLinks.PromotePageNoneSelected,window.MasterPageLinks.PromoteTitle);var e=b[0].Name,f=dijit.byId(a.Id);g.My_Dashboard==b[0].Name?e="My Dashboard":g.Sales==b[0].Name&&(e="Sales");var h=String.format('<Widget name="Group List" family="System"><options><name>Group List</name><title>{0}</title><entity>{1}</entity><resource>{7}</resource><groupname>{2}</groupname><limit>{3}</limit><visiblerows>{6}</visiblerows><datasource>slxdata.ashx/slx/crm/-/analytics?entity=Sage.Entity.Interfaces.I{4}&amp;groupname={5}</datasource><tableName>{8}</tableName></options></Widget>',f?f.title:a.Name,"Sage.Entity.Interfaces.I"+a.Entity,a.Name,10,$("<div/>").text(a.Entity).html(),$("<div/>").text(a.Name).html(),10,a.Entity,a.tableName);i(String.format("slxdata.ashx/slx/crm/-/dashboard/page?action=addwidget&name={0}&family={1}",encodeURIComponent(e),encodeURIComponent(b[0].Family)),{method:"POST",headers:{"Content-Type":"application/json"},data:h}).then(function(c,e){d.showInfo(String.format(window.MasterPageLinks.PromotionNotification,b[0].Name,f?f.title:a.Name)),"function"==typeof window.callback&&window.callback(c,e)},function(a,b,c){d.showInfo(window.MasterPageLinks.Warning,a.responseText)}),l.destroyRecursive()})}),j.mixin(l,new e),l.createHelpIconByTopic("PromoteGroup"));var m=function(){dojo.disconnect(n),setTimeout(function(a){return function(){a.destroyDescendants(),a.destroy(!1)}}(l),1)},n=dojo.connect(l,"hide",this,m);i("slxdata.ashx/slx/crm/-/dashboard/page",{cache:!1,preventCache:!0,handleAs:"json"}).then(j.hitch(this,function(c){l.set("content",a.apply({id:l.id,okText:h.buttonOk,cancelText:h.buttonCancel,headerText:window.MasterPageLinks.PromoteDescription})),l.show(),(this._grid=new b({id:"promoteDialog-grid",columns:[{field:"Name",label:f.pageText,width:"200px"}],selectionMode:"single",height:"100px",placeHolder:"promoteDialog-grid",store:new k({data:c,idProperty:"Name"}),rowSelection:!0,classNames:"dgrid-autoheight"},document.createElement("div"))).resize()}),function(a){alert(window.MasterPageLinks.Warning+a.responseText),console.log})}}),Sage.Utility.Dashboard})},"Sage/Utility/SDataLookup":function(){define([],function(){Sage.namespace("Utility.SDataLookup"),dojo.mixin(Sage.Utility.SDataLookup,{setFormatType:function(a){switch(a.propertyFormat){case"Phone":return Sage.UI.Columns.Phone;case"DateTime":return Sage.UI.Columns.DateTime;default:return""}},childObjectFormatter:function(a){var b,c,d=a;if(!d||!d[a.childentity]||0===d[a.childentity].$resources.length)return dojo.string.substitute('<div style="text-indent:16px">${0}</div>',[null!==a.value?a.value:"&nbsp;"]);for(a.value=a.value||"&nbsp;",b=[],a.includeButton&&b.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[a.value,a.rowIdx])),b.push(dojo.string.substitute('${0}<div class=SOProw${1} style="display:none">',[a.value,a.rowIdx])),c=0;c<d[a.childentity].$resources.length;c++)b.push(dojo.string.substitute('<div style="text-indent:2em">${0}</div>',[d[a.childentity].$resources[c][a.fieldName]||"&nbsp;"]));return b.push("</div>"),b.join("")}})})},"Sage/Utility/Sql":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/Sql"],function(a,b,c,d){return b("Sage.Utility.Sql",null,{_allQuotesReg:null,_badQuotesReg:null,_closingQuotesReg:null,_normalQuotesReg:null,_openingQuotesReg:null,_selectInClauseReg:null,_closingQuotes:["'","\xb4","\u2019","\u2019"],_openingQuotes:["'","`","\u2018","\u2018"],resources:d,quoteType:{apostrophe:0,accent:1,curly:2,unicode:3},constructor:function(){this.inherited(arguments),this._allQuotesReg=new RegExp("['`\xb4\u2018\u2019\u2018\u2019]"),this._badQuotesReg=new RegExp("[`\xb4\u2018\u2019\u2018\u2019]"),this._closingQuotesReg=new RegExp("['\xb4\u2019\u2019]"),this._normalQuotesReg=new RegExp("'"),this._openingQuotesReg=new RegExp("['`\u2018\u2018]")},fixQuoted:function(a){var b=a;if(!(a&&c.isString(a)&&a.length>0))return"''";if(this._badQuotesReg.test(b)&&(b=this.removeBadOuterQuotes(b)),this._normalQuotesReg.test(b)){var d=b.charAt(0);if(this._normalQuotesReg.test(d)&&(b=b.substr(1,b.length-1)),""===b)return"";d=b.charAt(b.length-1),this._normalQuotesReg.test(d)&&(b=b.substr(0,b.length-1))}return"'"+b+"'"},fixQuotes:function(b){return!(!b||!c.isArray(b))&&(a.forEach(b,function(a,c){b[c]=this.fixQuoted(a)},this),b.join(","))},fixInClause:function(b){var d="('')";b&&void 0!==b&&!1===c.isString(b)&&(b=c.isArray(b)?"'"+b.toString().replace(/,/g,"','")+"'":"'"+b.toString()+"'");var e;if(b&&c.isString(b)&&c.trim(b).length>0){if(!1===this.hasValidApostropheQuoteCount(b))throw new Error(this.resources.InvalidApostropheCount);if(""===(e=b.replace(/\r\n/g," ").replace(/\n/g," ").replace(/\r/g," ").trim()))return d;if(this._badQuotesReg.test(e)){if("("===e.charAt(0)&&")"===e.charAt(e.length-1)&&(e=e.substr(1,e.length-1),e=e.substr(0,e.length-1)),""===e)return d;if(0===e.toUpperCase().indexOf("SELECT")){for(var f=!1,g=-1,h=[],i=0;i<e.length;i++){var j=e.charAt(i);if(!1===f){if(this._openingQuotesReg.test(j))switch(f=!0,j){case"'":g=this.quoteType.apostrophe;break;case"`":g=this.quoteType.accent,h.push(i);break;case"\u2018":g=this.quoteType.curly,h.push(i);break;case"\u2018":g=this.quoteType.unicode,h.push(i)}}else if(this._closingQuotesReg.test(j)){var k=this.translateQuoteType(j);if(-1==k)continue;if(g==k){switch(f=!1,g){case this.quoteType.accent:case this.quoteType.curly:case this.quoteType.unicode:h.push(i)}g=-1}}}if(h&&c.isArray(h)&&h.length>0&&a.forEach(h,function(a){e=e.substr(0,a)+"'"+e.substr(a+1)}),!1===this.hasValidApostropheQuoteCount(e))throw new Error(this.resources.InvalidApostropheCount);return"("+e+")"}var l=e.split(",");a.forEach(l,function(a,b){l[b]=a.trim()});var m=this.fixQuotes(l);if(m){if(!1===this.hasValidApostropheQuoteCount(m))throw new Error(this.resources.InvalidApostropheCount);return"("+m+")"}return d}return"("!=e.charAt(0)?"("+e+")":e}return b&&c.isString(b)?(e=b.replace(/\r\n/g,"").replace(/\n/g,"").replace(/\r/g,""),e.length>0?"('"+e+"')":d):b},hasBadOuterQuotes:function(a){if(a&&c.isString(a)&&a.length>0&&this._badQuotesReg.test(a)){var b=a.charAt(0);if(this._badQuotesReg.test(b))return!0;if(b=a.charAt(a.length-1),this._badQuotesReg.test(b))return!0}return!1},hasValidApostropheQuoteCount:function(a){if(a&&c.isString(a)&&a.length>0&&this._normalQuotesReg.test(a)){var b=a.match(/'/g);if(b&&c.isArray(b)&&b.length>0)return b.length%2==0}return!0},removeBadOuterQuotes:function(a){if(this.hasBadOuterQuotes(a)){var b=a,c=b.charAt(0);return this._badQuotesReg.test(c)&&(b=b.substr(1,b.length-1)),""===b?"":(c=b.charAt(b.length-1),this._badQuotesReg.test(c)&&(b=b.substr(0,b.length-1)),b)}return a},replaceQuotesAroundValues:function(b){if(b&&c.isString(b)&&b.length>0){var d=b;a.forEach([/`(.*?)\xb4/g,/\u2018(.*?)\u2019/g,/\u2018(.*?)\u2019/g],function(b){var c=d.match(b);return a.forEach(c,function(a){if(2==a.length)d=d.replace(a,"''");else{var b=a.substr(1,a.length-1);b=b.substr(0,b.length-1),d=d.replace(a,"'"+b+"'")}}),d})}return b},translateQuoteType:function(a){if(a&&c.isString(a)&&1==a.length&&this._allQuotesReg.test(a))switch(a){case"'":return this.quoteType.apostrophe;case"`":case"\xb4":return this.quoteType.accent;case"\u2018":case"\u2019":return this.quoteType.curly;case"\u2018":case"\u2019":return this.quoteType.unicode}return-1}})})},"Sage/Utility/Validate":function(){define([],function(){Sage.namespace("Utility.Validate"),dojo.mixin(Sage.Utility.Validate,{findNestedWidgets:function(a){return dojo.query("[widgetid]",a).map(dijit.byNode).filter(function(a){return a})},shouldSubmit:function(){return!!this._isValid||(this._isValid=!0,!1)},_isValid:!0,_getWorkspaceNode:function(a){var b;switch(a){case"Sage.Platform.WebPortal.Workspaces.DialogWorkspace":b="DialogWorkspace_window";break;default:b="mainform"}return b},onWorkSpaceSave:function(a){var b=this._getWorkspaceNode(a);this._isValid=this.runValidation(b)},runValidation:function(a){var b=this.findNestedWidgets(dojo.byId(a)),c=!1;return dojo.forEach(b,function(a){if(a.validate){a._hasBeenBlurred=!0;a.disabled||!a.validate||a.validate()||c||(dojo.window.scrollIntoView(a.containerNode||a.domNode),a.focus(),c=!0)}},this),!c}})})},"Sage/Utility/PickList":function(){define(["dojo/_base/lang","dojo/_base/declare","Sage/Data/SDataServiceRegistry","dojo/json","./_LocalStorageMixin","../Utility"],function(a,b,c,d,e,f){var g=b("Sage.Utility.PickList",[e],{_storageNameSpace:"PickListData",checkStaleCache:function(){var b=this.getFromLocalStorage("modified_at",this._storageNameSpace),d=sessionStorage.getItem("PickListChangeStateCheck");if(b&&null===d){b=new Date(Date.parse(b));var e,g,h;h=sessionStorage.getItem("pickListExpireCheck"),null===h&&(e=c.getSDataService("system"),g=new Sage.SData.Client.SDataServiceOperationRequest(e),g.setOperationName("getPickListsChangeState"),g.execute({},{success:a.hitch(this,function(a){if(a&&a.response&&a.response.lastModifiedDate){var c=f.Convert.toDateFromString(a.response.lastModifiedDate);this._isLocalStorageExpired(b,c)&&this.clear(this._storageNameSpace)}})}),sessionStorage.setItem("PickListChangeStateCheck","true"))}},_isLocalStorageExpired:function(a,b){return a.setSeconds(0),b.setSeconds(0),a.setMilliseconds(0),b.setMilliseconds(0),b.valueOf()>=a.valueOf()}});return Sage.namespace("Utility.PickList"),a.mixin(Sage.Utility.PickList,new g),Sage.Utility.PickList})},"Sage/Utility/IONWorkflowHelper":function(){define("Sage/Utility/IONWorkflowHelper",["dojo/_base/lang","dojo/_base/declare","dojo/dom-construct","Sage/Data/SDataServiceRegistry","dojo/json","dojo/string","dojo/i18n!./nls/IONWorkflowHelper","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h){var i=b("Sage.Utility.IONWorkflowHelper",[],{cancelIonWorkflow:function(a){Sage.Services.getService("ClientContextService");if(!Sage.Services.getService("IntegrationContractService").isWorkflowIntegrationEnabled)return h.showError(this.workflowIntegrationNotEnabled),!1;var b,c=(JSON.stringify(a),new Sage.SData.Client.SDataServiceOperationRequest(d.getSDataService("dynamic")));"Quote"===a.entityName?(c.setResourceKind("quotes"),c.setOperationName("CancelWorkflowForQuotes"),b={$name:"CancelWorkflowForQuotes",request:{QuoteId:a.entityId,WorkflowId:a.childEntityIds}}):"Opportunity"===a.entityName?(c.setResourceKind("opportunities"),c.setOperationName("CancelWorkflowForOpportunity"),b={$name:"CancelWorkflowForOpportunity",request:{OpportunityId:a.entityId,WorkflowId:a.childEntityIds}}):"Lead"===a.entityName?(c.setResourceKind("leads"),c.setOperationName("CancelWorkflowForLeads"),b={$name:"CancelWorkflowForLeads",request:{LeadId:a.entityId,WorkflowId:a.childEntityIds}}):"Sales Order"===a.entityName&&(c.setResourceKind("salesOrders"),c.setOperationName("CancelWorkflowForSales"),b={$name:"CancelWorkflowForSales",request:{SalesOrderId:a.entityId,WorkflowId:a.childEntityIds}}),c.execute(b,{async:!1,success:function(b){b.response.Result?h.showInfo(g.cancelWorkflowSuccess):h.showError(f.substitute(g.cancelWorkflowLog,[a.entityName,b]))},failure:function(b){h.showError(f.substitute(g.errorCancelWorkflow,[a.entityName,b]))}})},_isEntityClosed:function(a){var b=d.getSDataService("dynamic"),c=new Sage.SData.Client.SDataServiceOperationRequest(b);c.setResourceKind(a.resourceKind).setOperationName(a.operationName);var e={$name:a.operationName,request:{entityId:Sage.Utility.getCurrentEntityId()}};return c.execute(e,{async:!1,success:function(a){return a.response.Result},failure:function(a){h.showError(a)}}),!0}});return Sage.namespace("Utility.IONWorkflowHelper"),a.mixin(Sage.Utility.IONWorkflowHelper,new i),i}),require(["Sage/Utility/IONWorkflowHelper"])},"Sage/Workspaces/main":function(){define(["Sage/Workspaces/Dialog"],function(){})},"Sage/Workspaces/Dialog":function(){define(["dojo/dom","dojo/dom-style","dojo/dom-construct","dijit/Dialog","dojo/NodeList-manipulate","dojo/_base/declare","Sage/UI/Controls/_DialogHelpIconMixin","dojo/query"],function(dom,domStyle,construct,Dialog,manipulate,declare,_DialogHelpIconMixin,query){return declare("Sage.Workspaces.Dialog",[Dialog,_DialogHelpIconMixin],{constructor:function(a,b){this._initialized=!1,this._clientId=a.clientId,this._stateClientId=a.stateClientId,this._panelClientId=a.panelClientId,this._contentClientId=a.contentClientId,this._context=null,this._dialog=null,this._dialogPanel=null,this._closedOnServerSide=!1,this._dialogInfo={},this.closable=!0,this._width=200,this._height=500,this._toolbarId=this._clientId+"_"+this._clientId+"_toolbar",this._clientId&&(this.statics.__instances[this._clientId]=this,this.statics.__initRequestManagerEvents()),this.inherited(arguments)},init:function(){this._context=dom.byId(this._clientId),dom.byId(this._contentClientId).style.display="",this.handleEvents()},clearState:function(){dom.byId(this._stateClientId).value=""},disable:function(){this.open&&this.hide()},enable:function(){this.open||this.show()},show_:function(a){var b,c,d;"string"==typeof a&&(a={id:a}),a.event="open",a.from=a.from||"client",b=a.title||"",this.set("title",b);var e=a.help;e&&this.createHelpIcon(e.url,e.target),c=a.width||500,domStyle.set(this.domNode,"width",c+"px"),domStyle.set(this.domNode,"min-width",c+"px"),domStyle.set(this.domNode,"max-width",c+"px"),d=a.height||200,query(".dijitDialogPaneContent").style({overflow:"auto",height:d+"px"});var f=Sys.Serialization.JavaScriptSerializer.serialize(a);dom.byId(this._stateClientId).value=f;var g=dojo.byId(this._toolbarId);g&&this.helpIcon&&dojo.place(g,this.helpIcon,"before")},setSize:function(a,b){this._width=a||this._width||500,domStyle.set(this.domNode,"width",this._width+"px"),this._height=b||this._height||200,domStyle.set(this.domNode,"height",this._height+"px")},fitToViewport:function(){},handleEvents:function(){var stateNode=dom.byId(this._stateClientId),value=stateNode.value,evt={};switch(value&&(evt=eval("("+value+")")),stateNode.value="",evt.event){case"open":this._dialogInfo=evt,this.title=this._dialogInfo.title,this.show_(evt),this.enable();break;case"close":this.open&&(this._closedOnServerSide=!1,this.hide_(),this.disable(),this._dialogInfo={},this._closedOnServerSide=!0)}},hide:function(a){if(this._toolbarId&&construct.destroy(this._toolbarId),a&&(a.originalTarget&&a.originalTarget.className.indexOf("dijitDialogCloseIcon")>-1||a.srcElement&&a.srcElement.className.indexOf("dijitDialogCloseIcon")>-1)){var b=Sage.Services.getService("ClientBindingManagerService");b&&b.rollbackCurrentTransaction(),dom.byId(this._stateClientId).value='{"event":"close","id":"'+this._dialogInfo.id+'"}',__doPostBack(this._stateClientId,"")}this.inherited(arguments)},hide_:function(a){if(!this._closedOnServerSide){a={event:"close",id:this._dialogInfo.id};var b=Sage.Services.getService("ClientBindingManagerService");b&&b.rollbackCurrentTransaction();var c=Sys.Serialization.JavaScriptSerializer.serialize(a);dom.byId(this._stateClientId).value=c,__doPostBack(this._stateClientId,"")}},statics:{__instances:{},__requestManagerEventsInitialized:!1,__initRequestManagerEvents:function(){var a=this;if(!a.__requestManagerEventsInitialized){var b=function(a,b){return!(!a||!b)&&(a.contains?a!=b&&a.contains(b):!!(16&a.compareDocumentPosition(b)))},c=Sys.WebForms.PageRequestManager.getInstance();c.add_pageLoaded(function(c,d){var e=d.get_panelsUpdated();if(e)for(var f in a.__instances)for(var g=0;g<e.length;g++){var h=a.__instances[f];if(b(e[g],document.getElementById(h._stateClientId))){h.handleEvents();break}}}),c.add_endRequest(function(b,c){for(var d in a.__instances){a.__instances[d].clearState()}}),a.__requestManagerEventsInitialized=!0}}}})})},"Sage/Mingle/main":function(){define(["Sage/Mingle/Feeds","Sage/Mingle/MingleSupport","Sage/Mingle/Request","Sage/Mingle/UserService"],function(){})},"url:Sage/templates/ImageButton.html":'<span id="${id}" class="dijit dijitReset dijitInline" role="presentation">\r\n<span class="dijitReset dijitInline dijitButtonNode imageButtonNode" data-dojo-attach-event="ondijitclick:_onClick" role="presentation">\r\n        <span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon">\r\n                <img alt="" src="" data-dojo-attach-point="iconNode"/>\r\n                <div class="dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}" data-dojo-attach-point="iconNodeSprite"></div>\r\n            </span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText circleLayout circleTheme"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\r/></span>\r\r\n',"url:Sage/UI/Controls/templates/DropDownSelectPickList.html":'<div>\r\n    <select id="${id}-Select" data-dojo-type="Sage.UI.ComboBox" shouldPublishMarkDirty="false" dojoAttachPoint="comboBox" value="${value}" dojoAttachEvent="onBlur: _onBlur,onChange:_onChange">\r\n    </select>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/DropDownSelectUser.html":'<div>\r\n    <select data-dojo-type="Sage.UI.ComboBox" shouldPublishMarkDirty="false" dojoAttachPoint="comboBox" dojoAttachEvent="onBlur: _onBlur">\r\n    </select>\r\n</div>\r\n',"url:dgrid/css/dgrid.css":{cssText:'.dgrid{position:relative;overflow:hidden;border:1px solid #ddd;height:30em;display:block;}.dgrid-header{background-color:#eee;}.dgrid-header-row{position:absolute;right:17px;left:0;}.dgrid-header-scroll{position:absolute;top:0;right:0;}.dgrid-footer{position:absolute;bottom:0;width:100%;}.dgrid-header-hidden,html.has-quirks .dgrid-header-hidden .dgrid-cell{font-size:0;height:0 !important;border-top:none !important;border-bottom:none !important;margin-top:0 !important;margin-bottom:0 !important;padding-top:0 !important;padding-bottom:0 !important;}.dgrid-footer-hidden{display:none;}.dgrid-sortable{cursor:pointer;}.dgrid-header, .dgrid-header-row, .dgrid-footer{overflow:hidden;background-color:#eee;}.dgrid-row-table{border-collapse:collapse;border:none;table-layout:fixed;empty-cells:show;width:100%;height:100%;}.dgrid-cell{padding:0px;text-align:left;overflow:hidden;vertical-align:top;border:1px solid #ddd;border-top-style:none;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;}.dgrid-cell-padding{padding:3px;}.dgrid-content{position:relative;height:99%;}.dgrid-scroller{overflow-x:auto;overflow-y:scroll;position:absolute;top:0px;margin-top:25px;bottom:0px;width:100%;}.dgrid-preload{font-size:0;line-height:0;}.dgrid-loading{position:relative;height:100%;}.dgrid-above{position:absolute;bottom:0;}.ui-icon{width:16px;height:16px;background-image:url("images/ui-icons_222222_256x240.png");}.ui-icon-triangle-1-e{background-position:-32px -16px;}.ui-icon-triangle-1-se{background-position:-48px -16px;}.dgrid-expando-icon{width:16px;height:16px;}.dgrid-tree-container{-webkit-transition-duration:0.3s;-moz-transition-duration:0.3s;-ms-transition-duration:0.3s;-o-transition-duration:0.3s;transition-duration:0.3s;overflow:hidden;}.dgrid-tree-container.dgrid-tree-resetting{-webkit-transition-duration:0;-moz-transition-duration:0;-ms-transition-duration:0;-o-transition-duration:0;transition-duration:0;}.dgrid-sort-arrow{background-position:-64px -16px;display:block;float:right;margin:0 4px 0 5px;height:12px;}.dgrid-sort-up .dgrid-sort-arrow{background-position:0px -16px;}.dgrid-selected{background-color:#bfd6eb;}.dgrid-input{width:99%;}html.has-mozilla .dgrid *:focus, html.has-opera .dgrid *:focusundefined{outline:1px dotted;}html.has-ie-6-7.has-no-quirks .dgrid-row-table{width:auto;}html.has-quirks .dgrid-row-table, html.has-ie-6 .dgrid-row-table{height:auto;}html.has-quirks .dgrid-header-scroll,html.has-ie-6 .dgrid-header-scroll{font-size:0;}html.has-mozilla .dgrid-focus{outline-offset:-1px;}.dgrid-scrollbar-measure{width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;}.dgrid-autoheight{height:auto;}.dgrid-autoheight .dgrid-scroller{position:relative;overflow-y:hidden;}.dgrid-autoheight .dgrid-header-scroll{display:none;}.dgrid-autoheight .dgrid-header{right:0;}#dgrid-css-dgrid-loaded{display:none;}',xCss:'html.has-mozilla .dgrid *:{/27};{/17background-image:url("images/ui-icons_222222_256x240.png");}'},"url:dgrid/css/extensions/ColumnHider.css":".dgrid-hider-toggle{background-position:0 -192px;background-color:transparent;border:none;cursor:pointer;position:absolute;right:0;top:0;}.dgrid-rtl-swap .dgrid-hider-toggle{right:auto;left:0;}.dgrid-hider-menu{position:absolute;top:0;right:17px;width:184px;background-color:#fff;border:1px solid black;z-index:99999;padding:4px;overflow-x:hidden;overflow-y:auto;}.dgrid-rtl-swap .dgrid-hider-menu{right:auto;left:17px;}.dgrid-hider-menu-row{position:relative;padding:2px;}.dgrid-hider-menu-check{position:absolute;top:2px;left:2px;padding:0;}.dgrid-hider-menu-label{display:block;padding-left:20px;}html.has-quirks .dgrid-hider-menu-check,html.has-ie-6-7 .dgrid-hider-menu-check{top:0;left:0;}#dgrid-css-extensions-ColumnHider-loaded{display:none;}","url:dgrid/css/extensions/ColumnReorder.css":".dgrid-header .dojoDndTarget .dgrid-cell{display:table-cell;}.dgrid-header .dojoDndItemBefore{border-left:2px dotted #000 !important;}.dgrid-header .dojoDndItemAfter{border-right:2px dotted #000 !important;}#dgrid-css-extensions-ColumnReorder-loaded{display:none;}","url:dgrid/css/extensions/ColumnResizer.css":{
cssText:".dgrid-column-resizer{position:absolute;width:2px;background-color:#666;z-index:1000;}.dgrid-resize-handle{height:100px;width:0;position:absolute;right:-4px;top:-4px;cursor:col-resize;z-index:999;border-left:5px solid transparent;outline:none;}html.has-ie-6 .dgrid-resize-handle{border-color:pink;filter:chroma(color=pink);}html.has-mozilla .dgrid .dgrid-resize-handle:focus,html.has-opera .dgrid .dgrid-resize-handle:focusundefined{outline:none;}.dgrid-resize-header-container{height:100%;}html.has-touch .dgrid-resize-handle{border-left:20px solid transparent;}html.has-touch .dgrid-column-resizer{width:2px;}html.has-no-quirks .dgrid-resize-header-container{position:relative;}html.has-ie-6 .dgrid-resize-header-container{position:static;}.dgrid-header .dgrid-cell-padding{overflow:hidden;}html.has-ie-6 .dgrid-header .dgrid-cell-padding{margin-right:4px;}html.has-ie-6 .dgrid-header .dgrid-sort-arrow{margin-right:0;}html.has-quirks .dgrid-header .dgrid-cell-padding, html.has-ie-6 .dgrid-header .dgrid-cell{position:relative;}#dgrid-css-extensions-ColumnResizer-loaded{display:none;}",xCss:"html.has-mozilla .dgrid .dgrid-resize-handle:{/3};{/2filter:chroma(color=pink);}"},"url:dgrid/css/extensions/Pagination.css":".dgrid-status{padding:2px;}.dgrid-pagination .dgrid-status{float:left;}.dgrid-pagination .dgrid-navigation, .dgrid-pagination .dgrid-page-size{float:right;}.dgrid-navigation .dgrid-page-link{cursor:pointer;font-weight:bold;text-decoration:none;color:inherit;padding:0 4px;}.dgrid-first, .dgrid-last, .dgrid-next, .dgrid-previous{font-size:130%;}.dgrid-pagination .dgrid-page-disabled,.has-ie-6-7 .dgrid-navigation .dgrid-page-disabled,.has-ie.has-quirks .dgrid-navigation .dgrid-page-disabled{color:#aaa;cursor:default;}.dgrid-page-input{margin-top:1px;width:2em;text-align:center;}.dgrid-page-size{margin:1px 4px 0 4px;}#dgrid-css-extensions-Pagination-loaded{display:none;}","url:dojo/resources/dnd.css":{cssText:".dojoDndAvatar{font-size:75%;color:black;}.dojoDndAvatarHeader td{padding-left:20px;padding-right:4px;height:16px;}.dojoDndAvatarHeader{background:#ccc;}.dojoDndAvatarItem{background:#eee;}.dojoDndMove .dojoDndAvatarHeader{background-image:url(images/dndNoMove.png);background-repeat:no-repeat;}.dojoDndCopy .dojoDndAvatarHeader{background-image:url(images/dndNoCopy.png);background-repeat:no-repeat;}.dojoDndMove .dojoDndAvatarCanDrop .dojoDndAvatarHeader{background-image:url(images/dndMove.png);background-repeat:no-repeat;}.dojoDndCopy .dojoDndAvatarCanDrop .dojoDndAvatarHeader{background-image:url(images/dndCopy.png);background-repeat:no-repeat;}.dojoDndHandle{cursor:move;}.dojoDndIgnore{cursor:default;}.dj_a11y .dojoDndAvatar{font-size:1em;font-weight:bold;}.dj_a11y .dojoDndAvatarHeader td{padding-left:2px !important;}.dj_a11y .dojoDndAvatarHeader td span{padding-right:5px;}",xCss:"{/4background-image:url(images/dndNoMove.png);}{/5background-image:url(images/dndNoCopy.png);}{/6background-image:url(images/dndMove.png);}{/7background-image:url(images/dndCopy.png);}"},"url:Sage/UI/Controls/templates/DateTimePicker.html":'<div class="dateTimePicker">\r\n        <div dojoAttachPoint="tooltipContainer">\r\n        \r\n            <div dojoAttachPoint="dateContainer" class="dateTimePicker-dateContainer">\r\n               \r\n                    <input id="${id}-Calendar" data-dojo-type="Sage.UI.Calendar"\r\n                        style="width:inherit;"\r\n                        textAlign="${textAlign}"\r\n                           type="text" \r\n                           tabindex="0"\r\n                           displayMode="popup"\r\n                           dojoAttachPoint="dateNode"\r\n                           dojoAttachEvent="onValueSelected:_onValueSelected,onBlur:_onCalendarBlur">\r\n               \r\n            </div>\r\n            \r\n            <div dojoAttachPoint="timeZoneContainer" class="dateTimePicker-timeZoneContainer">\r\n               \r\n                    <label for="${id}-TimeStart">${timeStartText}</label><br />\r\n                    <input id="${id}-TimeTextBox" data-dojo-type="dijit.form.TimeTextBox" \r\n                           style="width:16em;"\r\n                           textAlign="${textAlign}"\r\n                           tabindex="0"\r\n                           type="text" dojoAttachPoint="timeNode"\r\n                           constraints="{locale:Sys.CultureInfo.CurrentCulture.name,timePattern:Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortTimePattern.replace(\'tt\', \'a\').replace(\'t\', \'a\')}">\r\n                    <br /><br/>\r\n                    <label for="${id}-TzCalculator">${timeZoneCalculatorText}</label>\r\n                    <div id="timeZoneCalucaltor" class="dateTimePicker-timeZoneCalculator">\r\n                       <p style="width:auto;margin-top:auto">\r\n                            <label for="${id}-TzSelectSource">${timeZoneSourceText}</label><br />\r\n                            <select id="${id}-TzSelectSource" data-dojo-type="dijit.form.ComboBox"  dojoAttachPoint="timeZoneSourceComboNode" style="width:15em;">\r\n                            </select>\r\n                            <br />\r\n                            <label for="${id}-TzSelectDest">${timeZoneDestText}</label><br />\r\n                           <select id="${id}-TzSelectDest" data-dojo-type="dijit.form.ComboBox"  dojoAttachPoint="timeZoneDestComboNode" style="width:15em;">\r\n                           </select>\r\n                           <br/>\r\n                            <span id="${id}-ConvertResults" dojoAttachPoint="convertResultsNode" style="float:left;padding-top:5px;">\r\n                        </span>\r\n                        </p><br/>\r\n                        <button id="${id}-Convert" data-dojo-type="dijit.form.Button" dojoAttachPoint="timeZoneConvertButtonNode" type="button" style="float:right" dojoAttachEvent="onClick:_convertClicked">\r\n                            ${convertText}\r\n                        </button>\r\n                       \r\n                        \r\n                    </div>\r\n               \r\n                <div class="button-bar alignright" style="clear: both">\r\n                    <button id="${id}-OKButton" tabindex="0" data-dojo-type="dijit.form.Button" dojoAttachPoint="OKButtonNode" type="button" dojoAttachEvent="onClick:_okClicked">\r\n                        ${okText}\r\n                    </button>\r\n                    <button id="${id}-CancelButton" tabindex="0" data-dojo-type="dijit.form.Button" dojoAttachPoint="CancelButtonNode" type="button" dojoAttachEvent="onClick:_cancelClicked">\r\n                        ${cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    \r\n</div>\r\n\r\n',"url:Sage/Utility/File/templates/FallbackFilePicker_Attachment.html":'[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="uploadFileDialog" title="{%= $.attachFileText %}" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onHide">\',\r\n        \'<iframe src="about:blank" style="width:0px;height:0px;border-width:0px;" name="{%= $._iframeId %}" id="{%= $._iframeId %}" dojoAttachPoint="_iframe" dojoAttachEvent="onload:_iframeLoad"></iframe>\',\r\n        \'<form method="post" enctype="multipart/form-data" action="{%= $._buildPostUrl() %}" target="{%= $._iframeId %}" dojoAttachPoint="_postForm" class="attachment-properties-form">\',\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160">\',\r\n                \'<div data-dojo-type="dijit.layout.ContentPane" label="{%= $.uploadFileText %}" >\',\r\n                    \'<input name="file" multiple="false" type="file" dojoAttachEvent="onchange:_onNewFile" dojoAttachPoint="btn_FileSelect" class="uploadButton" />\',\r\n                \'</div>\',\r\n                 \'<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="128" ></div>\',\r\n                 \'<input type="hidden" dojoType="dijit.form.TextBox" name="fileName" id="{%= $.id %}_tb_realFileName" dojoAttachPoint="tb_realFileName" maxlength="255" />\',\r\n            \'</div>\',\r\n            \'<div class="general-dialog-actions" align="right">\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                \'<span>&nbsp;&nbsp</span>\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n            \'</div>\',\r\n            \'<input type="hidden" name="dataType" value="R" />\',\r\n            \'<input type="hidden" name="attachDate" dojoAttachPoint="_attachDate"/>\',\r\n            \'<input type="hidden" name="accountId" dojoAttachPoint="_accountId"/>\',\r\n            \'<input type="hidden" name="activityId" dojoAttachPoint="_activityId" />\',\r\n            \'<input type="hidden" name="contactId" dojoAttachPoint="_contactId" />\',\r\n            \'<input type="hidden" name="contractId" dojoAttachPoint="_contractId" />\',\r\n            \'<input type="hidden" name="defectId" dojoAttachPoint="_defectId" />\',\r\n            \'<input type="hidden" name="historyId" dojoAttachPoint="_historyId" />\',\r\n            \'<input type="hidden" name="leadId" dojoAttachPoint="_leadId" />\',\r\n            \'<input type="hidden" name="opportunityId" dojoAttachPoint="_opportunityId" />\',\r\n            \'<input type="hidden" name="productId" dojoAttachPoint="_productId" />\',\r\n            \'<input type="hidden" name="returnId" dojoAttachPoint="_returnId" />\',\r\n            \'<input type="hidden" name="salesOrderId" dojoAttachPoint="_salesOrderId" />\',\r\n            \'<input type="hidden" name="ticketId" dojoAttachPoint="_ticketId" />\',\r\n            \'<input type="hidden" name="userId" dojoAttachPoint="_userId" />\',\r\n        \'</form>\',\r\n    \'</div>\',\r\n\'</div>\'\r\n]',"url:Sage/Utility/File/templates/FallbackFilePicker_LibraryDoc.html":'[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="uploadFileDialog" title="{%= $.addLibraryFileText %}" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onHide">\',\r\n        \'<iframe src="about:blank" style="width:0px;height:0px;border-width:0px;" name="{%= $._iframeId %}" id="{%= $._iframeId %}" dojoAttachPoint="_iframe" dojoAttachEvent="onload:_iframeLoad"></iframe>\',\r\n        \'<form method="post" enctype="multipart/form-data" action="" target="{%= $._iframeId %}" dojoAttachPoint="_postForm" class="attachment-properties-form">\',\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160">\',\r\n                 \'<div data-dojo-type="dijit.layout.ContentPane" label="{%= $.uploadFileText %}" >\',\r\n                    \'<input name="file" multiple="false" type="file" dojoAttachEvent="onchange:_onNewFile" dojoAttachPoint="btn_FileSelect" class="uploadButton" />\',\r\n                 \'</div>\',\r\n                 \'<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="255" ></div>\',\r\n                 \'<input type="hidden" dojoType="dijit.form.TextBox" name="fileName" id="{%= $.id %}_tb_realFileName" dojoAttachPoint="tb_realFileName" maxlength="255" />\',\r\n            \'</div>\',\r\n            \'<div class="general-dialog-actions" align="right">\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                \'<span>&nbsp;&nbsp</span>\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n            \'</div>\',\r\n        \'</form>\',\r\n    \'</div>\',\r\n\'</div>\'\r\n]',"url:Sage/UI/templates/GridView.html":'[\r\n\'<div data-dojo-type="dijit.layout.ContentPane" class="HundredPercentHeight abstractGrid" >\',\r\n    \'<div data-dojo-attach-point="headerNode" class="list-panel-tbar" role="toolbar">\',\r\n        \'<span dojoattachpoint="labelSection"></span>\',\r\n        \'<span dojoattachpoint="abstractGrid_toolBar" class="right-tools"></span>\',\r\n    \'</div>\',\r\n    \'<div dojoattachpoint="abstractGrid_filters"></div>\',\r\n    \'<div dojoattachpoint="abstractGrid_grid" class="gridcontainer"></div>\',\r\n\'</div>\'\r\n]',"url:Sage/UI/Controls/templates/Lookup.html":'<div class="textcontrol lookup">\r\n    <span id="${id}" class="lookup">\r\n        <input id="${id}_LookupText" class="text-with-icons" required="${required}" type="text" dojoAttachPoint="textbox,focusNode" />\r\n        <a href="#">\r\n            <img id="${id}_LookupBtn" src="images/icons/Find_16x16.png" dojoAttachPoint="lookupButton" alt="${buttonToolTip}" title="${buttonToolTip}" />\r\n        </a>\r\n        \r\n        <img id="${id}_btnClearResult" src="images/icons/Delete_16x16.png" dojoAttachPoint="clearButton" class="display-none" alt="${closeButtonToolTip}" title="${closeButtonToolTip}"/>\r\n    </span>\r\n</div>',
"url:Sage/MainView/ActivityMgr/templates/ActivityEditor.html":'[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="activityDialog" title="" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onDlgHide">\',\r\n        \'<div class="activity-dialog">\',  //body\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="regardingContainer">\',\r\n                \'<select id="pk_Regarding" label="{%= $.regardingText %}" id="{%= $.id %}_pk_Regarding" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Regarding" canEditText="true" itemMustExist="false" maxLength="255"></select>\',          \r\n    \'<div dojoType="dijit.form.TextBox" label="{%= $.locationText %}" id="{%= $.id %}_tb_Location" dojoAttachPoint="tb_Location" maxLength="255" ></div>\',\r\n            \'</div>\', //first tablecontainer 1 col\r\n        //Dates section for add/edit mode..................\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="dateSection_AddEdit">\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" id="{%= $.id %}_dtp_startDate" dojoAttachPoint="dtp_startDate" displayDate="true" displayTime="true" label="{%= $.startTimeText %}"></div>\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DurationSelect" label="{%= $.durationText %}" id="{%= $.id %}_sel_Duration" dojoAttachPoint="sel_Duration" includeDisablingCheckbox="false" valuesAreAfterStart="true"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="{%= $.timeLessText %}" id="{%= $.id %}_cb_Timeless" dojoAttachPoint="cb_Timeless" ></div>\',\r\n                    \'<label class="checkbox-label" for="{%= $.id %}_cb_Timeless">{%= $.timeLessText %}</label>\',\r\n                \'</div>\',\r\n                \'<div dojoType="dojox.layout.TableContainer" label="{%= $.alarmText %}" cols="2" showLabels="false" class="removeExtraSpace" dojoAttachPoint="alarmContainer">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" id="{%= $.id %}_cb_Alarm" dojoAttachPoint="cb_Alarm" ></div>\',\r\n                    \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DurationSelect" id="{%= $.id %}_sel_AlarmDur" dojoAttachPoint="sel_AlarmDur" valuesAreAfterStart="false" ></div>\',\r\n                \'</div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="" id="{%= $.id %}_cb_AutoRollover" dojoAttachPoint="cb_AutoRollover"></div>\',\r\n                    \'<label class="checkbox-label" for="{%= $.id %}_cb_AutoRollover">{%= $.rolloverText %}</label>\',\r\n                \'</div>\',\r\n            \'</div>\',\r\n        //Dates section for complete mode...................\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="dateSection_Complete">\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" id="{%= $.id %}_dtp_completedDate" dojoAttachPoint="dtp_completedDate" displayDate="true" displayTime="true" label="{%= $.completedText %}"></div>\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" id="{%= $.id %}_dtp_scheduledDate" dojoAttachPoint="dtp_scheduledDate" displayDate="true" displayTime="true" label="{%= $.scheduledText %}"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="{%= $.timeLessText %}" id="{%= $.id %}_cb_TimelessComplete" dojoAttachPoint="cb_TimelessComplete" ></div>\',\r\n                    \'<label class="checkbox-label" for="{%= $.id %}_cb_TimelessComplete">{%= $.timeLessText %}</label>\',\r\n                \'</div>\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DurationSelect" label="{%= $.durationText %}" id="{%= $.id %}_sel_DurationComplete" dojoAttachPoint="sel_DurationComplete" includeDisablingCheckbox="false" valuesAreAfterStart="true"></div>\',\r\n            \'</div>\',\r\n\r\n            \'<div dojoType="dijit.layout.TabContainer" id="{%= $.id %}_tc_EditActivity"  dojoAttachPoint="tc_EditActivity" class="tab-container" doLayout="false">\',\r\n/*  General Tab   */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_General" title="{%= $.tabNameGeneralText %}" class="tabContent remove-padding" dojoAttachPoint="cp_General">\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="resultContainer" class="bottom-border-section add-padding">\', \r\n                        \'<select shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" label="{%= $.resultText %}" id="{%= $.id %}_pl_Result"  name="pl_Result" dojoAttachPoint="pl_Result" canEditText="true" itemMustExist="false" maxLength="64"></select>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="4" labelWidth="70" baseClass="contact-lead-radios" >\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.contactText %}" value="contact" id="{%= $.id %}_rdo_Contact" dojoAttachPoint="rdo_Contact" dojoAttachEvent="onChange:_setContactLeadVisibility" checked="true" />\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.leadText %}" value="lead" id="{%= $.id %}_rdo_Lead" dojoAttachPoint="rdo_Lead" />\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="contactContainer" baseClass="bottom-border-section">\',\r\n\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_ContactLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.opportunityText %}" dojoAttachPoint="container_OppLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.accountText %}" dojoAttachPoint="container_AccountLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.ticketText %}" dojoAttachPoint="container_TicketLup"  class="remove-padding lookup-container"></div>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="leadContainer"  baseClass="bottom-border-section" class="display-none">\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_LeadLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<input dojoType="dijit.form.TextBox" id="{%= $.id %}_tb_LeadCompanyName" label="{%= $.companyText %}" dojoAttachPoint="tb_LeadCompanyName" readonly="true" />\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" class="bottom-border-section" dojoAttachPoint="categoryContainer" >\',\r\n                        \'<select label="{%= $.priorityText %}" id="{%= $.id %}_pk_Priority" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Priority" canEditText="true" itemMustExist="false" pickListName="Priorities" sort="false" maxLength="64" style="width: {%= 472 - $.labelWidth %}px;" ></select>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.leaderText %}" dojoAttachPoint="container_LeaderLup" class="remove-padding lookup-container" style="width: {%= 472 - $.labelWidth %}px;"></div>\',\r\n                        \'<select label="{%= $.categoryText %}" id="{%= $.id %}_pk_Category" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Category" canEditText="true" itemMustExist="false" maxLength="64" style="width: {%= 472 - $.labelWidth %}px;"></select>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="&nbsp;" class="dijitTextBox" style="border-width:0px">&nbsp;</div>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" class="valigntop" dojoAttachPoint="notesContainer">\',\r\n                        \'<textarea dojoType="dijit.form.SimpleTextarea" id="{%= $.id %}_ta_Notes" label="{%= $.notesText %}" dojoAttachPoint="ta_Notes" class="notes-text"></textarea>\',\r\n                    \'</div>\',\r\n                \'</div>\',  // end general tab\r\n/* Availability Tab   */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Availability" title="{%= $.tabNameAvailabilityText %}" class="tabContent remove-padding" dojoAttachPoint="cp_Availability" dojoAttachEvent="onShow:_onShowAvailabilityTab">\',\r\n                    \'<div dojoType="dijit.Toolbar" region="top" splitter="false" class="right-tools" >\',  // list-panel-tbar\r\n                        \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="container_ResourcesLup" class="remove-padding"></div>\',\r\n                    \'</div>\',\r\n/* Scheduler ........... */\r\n                    \'<div id="scheduler_here" class="dhx_cal_container" style="width:100%;height:230px;">\',\r\n                        \'<div class="dhx_cal_navline">\',\r\n                            \'<div class="dhx_cal_prev_timeline_button" style="right:50px;">&nbsp;</div>\',\r\n\t\t\t                \'<div class="dhx_cal_next_timeline_button" style="right:19px;">&nbsp;</div>\',\r\n//\'<div class="dhx_cal_today_button"></div>\',\r\n\t\t\t                \'<div class="dhx_cal_date"></div>\',\r\n//\'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>\',\r\n//\'<div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>\',\r\n                            \'<div class="dhx_cal_tab" name="timeline_tab" style="right:280px;"></div>\',\r\n//\'<div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>\',\r\n\t\t                \'</div>\',\r\n\t\t                \'<div class="dhx_cal_header"></div>\',\r\n\t\t                \'<div class="dhx_cal_data"></div>\',\r\n                    \'</div>\',\r\n                \'</div>\',\r\n/* Recurring Tab  */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Recurring" title="{%= $.recurringText %}" class="tabContent" dojoAttachPoint="cp_Recurring" dojoAttachEvent="onShow:_showRecurringTab">\',\r\n                    \'<div shouldPublishMarkDirty="false" dojoType="Sage.MainView.ActivityMgr.RecurringEditor" id="{%= $.id %}_recEd" labelWidth="{%= $.labelWidth - 20 %}" dojoAttachPoint="_recurringEditor"></div>\',\r\n                \'</div>\',\r\n/* Attachments Tab  */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Attachments" title="{%= $.tabNameAttachmentsText %}" class="tabContent remove-padding" dojoAttachPoint="cp_Attachments">\',\r\n                    \'<div id="{%= $.id %}_attachmentsGridPlaceholder" dojoAttachPoint="_attachmentGridPlaceholder" style="width:100%;height:100%;" ></div>\',\r\n                \'</div>\',  //end attachments tab\r\n            \'</div>\',  //tab container\r\n/* Buttons       */\r\n        // Add/edit activity buttons\r\n            \'<table class="activity-dialog-followup" id="add_edit_buttons" dojoAttachPoint="add_edit_buttons">\',\r\n                \'<tr>\',\r\n                    \'<td class="alignleft">\',\r\n                        \'<div class="scheduled-by-label" dojoAttachPoint="lbl_ScheduledBy"></div>\',\r\n                    \'</td><td class="alignright">\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Complete" name="btn_Complete" dojoAttachPoint="btn_Complete" dojoAttachEvent="onClick:_completeClick">{%= $.completeBtnText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Delete" name="btn_Delete" dojoAttachPoint="btn_Delete" dojoAttachEvent="onClick:_deleteClick">{%= $.deleteText %}</div>\',\r\n                        \'<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n\r\n\r\n        //complete activity buttons\r\n            \'<table class="activity-dialog-followup display-none" id="complete_buttons" dojoAttachPoint="complete_buttons">\',\r\n                \'<tr>\',\r\n                    \'<col width="50%" /><col width="50%" />\',\r\n                    \'<td class="alignleft">\',\r\n                        \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" >\',\r\n                            \'<select label="{%= $.followupText %}" id="sel_Followup" dojoType="dijit.form.ComboBox" dojoAttachPoint="sel_Followup">\',\r\n                                \'<option value="none" selected="selected">{%= $.noneText %}</option>\',\r\n                                \'<option value="phone">{%= Sage.Utility.Activity.getActivityTypeName("atPhoneCall") %}</option>\',\r\n                                \'<option value="meeting">{%= Sage.Utility.Activity.getActivityTypeName("atAppointment") %}</option>\',\r\n                                \'<option value="todo">{%= Sage.Utility.Activity.getActivityTypeName("atToDo") %}</option>\',\r\n                            \'</select>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="ck_coAttachments" dojoAttachPoint="ck_coAttachments" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coAttachments">{%= $.carryOverAttachmentsText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="ck_coNotes" dojoAttachPoint="ck_coNotes" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coNotes">{%= $.carryOverNotesText %}</label>\',\r\n                            \'</div>\',\r\n                        \'</div>\',\r\n                    \'</td><td class="alignright valignbottom" rowspan="2">\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_asScheduled" name="btn_asScheduled" dojoAttachPoint="btn_asScheduled" dojoAttachEvent="onClick:_asScheduledClick">{%= $.asScheduledText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Now" name="btn_Now" dojoAttachPoint="btn_Now" dojoAttachEvent="onClick:_nowClick">{%= $.nowText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_CancelComplete" name="btn_Cancel" dojoAttachPoint="btn_CancelComplete" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n                    \'</td>\',\r\n                \'</tr><tr>\',\r\n                    \'<td class="alignleft" >\',\r\n                        \'<div class="scheduled-by-label" dojoAttachPoint="lbl_ScheduledByComp"></div>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n\r\n\r\n\r\n        //Confirmations button bar...\r\n            \'<table class="button-bar display-none" id="confirmation_edit_buttons" dojoAttachPoint="confirmation_edit_buttons">\',\r\n                \'<tr>\',\r\n                    \'<td class="alignleft" style="width:{%= $.labelWidth %}px;">\',\r\n                        \'<label for="{%= $.id %}_ta_confirmationResponse" id="responseLabel" dojoAttachPoint="responseLabel">{%= $.responseText %}</label>\',\r\n                    \'</td>\',\r\n                    \'<td class="alignleft">\',\r\n                        \'<textarea dojoType="dijit.form.SimpleTextarea" id="{%= $.id %}_ta_confirmationResponse" dojoAttachPoint="ta_confirmationResponse" class="notes-text dijitTextBox" maxLength="128" ></textarea>\',\r\n                    \'</td><td class="alignright valignbottom">\',\r\n                        \'<span id="newConfButtons" dojoAttachPoint="newConfButtons">\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_accept" name="btn_accept" dojoAttachPoint="btn_accept" dojoAttachEvent="onClick:_acceptConfClick">{%= $.acceptText %}</div>\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_decline" name="btn_decline" dojoAttachPoint="btn_decline" dojoAttachEvent="onClick:_declineClick">{%= $.declineText %}</div>\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_cancelConf" name="btn_cancelConf" dojoAttachPoint="btn_cancelConf" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n                        \'</span>\',\r\n                        \'<span id="otherConfButtons" dojoAttachPoint="otherConfButtons" class="display-none">\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_deleteConf" name="btn_deleteConf" dojoAttachPoint="btn_deleteConf" dojoAttachEvent="onClick:_deleteConfClick">{%= $.deleteConfText %}</div>\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_closeConf" name="btn_closeConf" dojoAttachPoint="btn_closeConf" dojoAttachEvent="onClick:_cancelClick">{%= $.closeText %}</div>\',\r\n                        \'</span>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n        \'</div>\', //body\r\n    \'</div>\',  //dialog\r\n\'</div>\' //root node\r\n]\r\n',"url:Sage/MainView/ActivityMgr/AttendeeLookup/templates/SpeedSearchLookup.html":'[\r\n\'<div>\',\r\n    \'<div data-dojo-type="dijit.Dialog" id="{%= $.id %}-Dialog" title="" dojoAttachPoint="_dialog" >\', //dialog\r\n         \'<div class="event-dialog">\',\r\n        \'<div style="padding:5px;" id="{%= $.id %}-Condition-container">\',\r\n            \'<input id="Text1" type="text" style="width:85%;"  data-dojo-attach-point="_valueBox" data-dojo-attach-event="onkeypress:_onKeyPress"/>\',     \r\n            \'<button id="{%= $.id %}-Search" data-dojo-type="dijit.form.Button" type="button" dojoAttachPoint="searchButton" dojoAttachEvent="onClick:_doSearch">{%= $.srchBtnCaption %}</button>\',\r\n          \r\n        \'</div>\',    \r\n        \'<div data-dojo-attach-point="contentNode">\',  \r\n        \'<div id="{%= $.id %}-Grid-container" dojoAttachPoint="_speedSearchGrid"  style="width:auto;height:400px;"></div>\',\r\n        \'</div>\',\r\n            \'<div class="lookupButtonWrapper">\',           \r\n                \'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-GridSelectButton" \',\r\n                    \'onClick="dijit.byId(\\\'{%= $.id %}\\\').getGridSelections(); ">{%= $.okText %}\',\r\n                   \'</button>\',            \r\n                \'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-CloseButton" \',\r\n                    \'onClick="dijit.byId(\\\'{%= $.id %}-Dialog\\\').hide();">{%= $.cancelText %}</button>\',\r\n            \'</div>\',\r\n             \'</div>\',\r\n     \'</div> \', //dialog   \r\n\'</div>\'\r\n]',"url:Sage/UI/Controls/templates/SingleSelectPickList.html":'<div>\r\n    <select id="${id}-Combo" data-dojo-type="Sage.UI.ComboBox" shouldPublishMarkDirty="false" required="${required}" dojoAttachPoint="comboBox" dojoAttachEvent="onChange:_onChange,onKeyDown:_onKeyDown"  tabindex="${tabIndex}">\r\n    </select>\r\n</div>\r\n',
"url:Sage/MainView/ActivityMgr/templates/RecurringEditor.html":'\r\n[\'<div>\',\r\n    \'<table style="width:100%">\',\r\n        \'<tr>\',\r\n            \'<td class="recurring-selectors">\',  //radio buttons...\r\n                \'<div>{%= $.activityOccurrsText %}</div>\',\r\n                \'<div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="None" id="{%= $.id %}_rdo_Once" dojoAttachPoint="rdo_Once" checked="true" dojoAttachEvent="onChange:_onceChanged" />\',  //  \r\n                    \'<label for="{%= $.id %}_rdo_Once">&nbsp;{%= $.onceText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="daily" id="{%= $.id %}_rdo_Daily" dojoAttachPoint="rdo_Daily" dojoAttachEvent="onChange:_dailyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Daily">&nbsp;{%= $.dailyText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="weekly" id="{%= $.id %}_rdo_Weekly" dojoAttachPoint="rdo_Weekly" dojoAttachEvent="onChange:_weeklyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Weekly">&nbsp;{%= $.weeklyText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="monthly" id="{%= $.id %}_rdo_Monthly" dojoAttachPoint="rdo_Monthly" dojoAttachEvent="onChange:_monthlyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Monthly">&nbsp;{%= $.monthlyText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="yearly" id="{%= $.id %}_rdo_Yearly" dojoAttachPoint="rdo_Yearly" dojoAttachEvent="onChange:_yearlyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Yearly">&nbsp;{%= $.yearlyText %}</label>\',\r\n                \'</div>\',\r\n            \'</td>\',\r\n            \'<td>\',  //panel for each different recurring type...\r\n                \'<div dojoType="dijit.layout.StackContainer" dojoAttachPoint="_panelContainer" class="recurring-body" >\',\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_oncePanel" class="recurring-panel"  >\',\r\n                        \'{%= $.occursOnceText %}\',\r\n                    \'</div>\',\r\n//daily panel...............................\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_dailyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="dailyEvery" value="days" id="{%= $.id %}_rdoDailyEvery" checked="true" dojoAttachPoint="_rdoDailyEvery" dojoAttachEvent="onChange:_dailyEveryChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoDailyEvery" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_dailyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.daysText %}</span>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="dailyEvery" value="daysAfter" id="{%= $.id %}_rdoDailyEveryAfter" dojoAttachPoint="_rdoDailyEveryAfter" />\',\r\n                                \'<label for="{%= $.id %}_rdoDailyEveryAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_dailyEveryAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.daysAfterText %}</span>\',\r\n                            \'</div>\',\r\n                    \'</div>\',\r\n//weekly panel............................\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_weeklyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="weeklyEvery" value="weeksOn" id="{%= $.id %}_rdoWeeklyEvery" checked="true" dojoAttachPoint="_rdoWeeklyEvery" dojoAttachEvent="onChange:_weeklyEveryChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoWeeklyEvery" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_weeklyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.weeksOnText %}</span>\',\r\n                        \'</div>\',\r\n                        \'<div style="white-space:normal;padding-bottom:10px;margin:5px 0 0 20px;">\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkMonday" value="mon" id="{%= $.id %}_chkMonday" dojoAttachPoint="_chkMonday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkMonday" class="padded-inline-label">{%= $.monText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkTuesday" value="tue" id="{%= $.id %}_chkTuesday" dojoAttachPoint="_chkTuesday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkTuesday" class="padded-inline-label">{%= $.tueText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkWednesday" value="wed" id="{%= $.id %}_chkWednesday" dojoAttachPoint="_chkWednesday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkWednesday" class="padded-inline-label">{%= $.wedText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkThursday" value="thu" id="{%= $.id %}_chkThursday" dojoAttachPoint="_chkThursday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkThursday" class="padded-inline-label">{%= $.thurText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkFriday" value="fri" id="{%= $.id %}_chkFriday" dojoAttachPoint="_chkFriday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkFriday" class="padded-inline-label">{%= $.friText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkSaturday" value="sat" id="{%= $.id %}_chkSaturday" dojoAttachPoint="_chkSaturday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkSaturday" class="padded-inline-label">{%= $.satText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkSunday" value="sun" id="{%= $.id %}_chkSunday" dojoAttachPoint="_chkSunday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkSunday" class="padded-inline-label">{%= $.sunText %}</label>\',\r\n                            \'</span>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="weeklyEvery" value="weeksAfter" id="{%= $.id %}_rdoWeeklyEveryAfter" dojoAttachPoint="_rdoWeeklyEveryAfter" />\',\r\n                                \'<label for="{%= $.id %}_rdoWeeklyEveryAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_weeklyEveryAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_calculateEnd" />\',\r\n                            \'<span class="padded-inline-label">{%= $.weeksAfterText %}</span>\',\r\n                        \'</div>\',\r\n                    \'</div>\',\r\n//monthly panel.........................................................\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_monthlyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="monthlyOn" value="monthyOn" id="{%= $.id %}_rdoMonthlyOn" checked="true" dojoAttachPoint="_rdoMonthlyOn" dojoAttachEvent="onChange:_monthlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoMonthlyOn" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_monthlyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.monthsOnText %}</span>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_datesSelect" dojoAttachEvent="onChange:_calculateEnd" maxHeight="300"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="monthlyOn" value="monthyOnThe" id="{%= $.id %}_rdoMonthlyOnThe" dojoAttachPoint="_rdoMonthlyOnThe" />\', // dojoAttachEvent="onChange:_monthlyOnChanged"\r\n                                \'<label for="{%= $.id %}_rdoMonthlyOnThe" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_monthlyOnTheText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.monthsOnTheText %}</span>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_weeksSelect" disabled="true" dojoAttachEvent="onChange:_calculateEnd"></select>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_weekdaySelect" disabled="true" dojoAttachEvent="onChange:_calculateEnd"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="monthlyOn" value="monthyAfter" id="{%= $.id %}_rdoMonthlyAfter" dojoAttachPoint="_rdoMonthlyAfter" dojoAttachEvent="onChange:_monthlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoMonthlyAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_monthlyAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_calculateEnd" />\',\r\n                            \'<span class="padded-inline-label">{%= $.monthsAfterText %}</span>\',\r\n                        \'</div>\',\r\n                    \'</div>\',\r\n// yearly panel..............\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_yearlyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="yearlyOn" value="yearlyOn" id="{%= $.id %}_rdoYearlyOn" checked="true" dojoAttachPoint="_rdoYearlyOn" dojoAttachEvent="onChange:_yearlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoYearlyOn" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_yearlyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.yearsOnText %}</span>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_monthNamesSelect" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                            \'<select dojoType="dijit.form.Select" maxHeight="300" dojoAttachPoint="_yearDatesSelect" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth  %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="yearlyOn" value="yearlyOnThe" id="{%= $.id %}_rdoYearlyOnThe" dojoAttachPoint="_rdoYearlyOnThe" />\',\r\n                                \'<label for="{%= $.id %}_rdoYearlyOnThe" class="padded-inline-label">{%= $.theText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_yearWeeksSelect" disabled="true" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_yearWeekdaySelect" disabled="true" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                            \'<label class="padded-inline-label">{%= $.inText %}</label>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_yearMonthNamesSelect" disabled="true" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="yearlyOn" value="yearlyEveryAfter" id="{%= $.id %}_rdoYearlyEveryAfter" dojoAttachPoint="_rdoYearlyEveryAfter" dojoAttachEvent="onChange:_yearlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoYearlyEveryAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_yearlyEveryAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_calculateEnd" />\',\r\n                            \'<span class="padded-inline-label">{%= $.yearsAfterText %}</span>\',\r\n                            \'</div>\',\r\n                    \'</div>\',\r\n                \'</div>\', //stack container\r\n// End date calculator section.........................................\r\n                \'<div dojoAttachPoint="_startEndCalculator" class="display-none">\',\r\n                    \'<hr />\',\r\n                    \'<table>\',\r\n                        \'<tr>\',\r\n                            \'<td>{%= $.startRecurringText %}</td>\',\r\n                            \'<td>\',\r\n                                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_StartRecur" value="{%= $.startDate %}" dojoAttachPoint="dtp_startRecur" displayDate="true" displayTime="false" dojoAttachEvent="onChange:_recurringStartDateChanged" readOnly="true" ></div>\',\r\n                            \'</td>\',\r\n                        \'</tr>\',\r\n                        \'<tr>\',\r\n                            \'<td>\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="endRecur" value="endAfterNum" id="{%= $.id %}_rdoEndAfterNum" dojoAttachPoint="_rdoEndAfter" dojoAttachEvent="onChange:_endCalcModeChanged" checked="true" />\',\r\n                                \'<label for="{%= $.id %}_rdoEndAfterNum" class="padded-inline-label">{%= $.endAfterText  %}</label>\',\r\n                            \'</td><td>\',\r\n                                \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="2" constraints="{places: 0, type: \\\'decimal\\\', max: 999, min: 1}" maxlength="3" id="{%= $.id %}_num_Occurances" dojoAttachPoint="num_Occurances" class="small-inline-textbox" dojoAttachEvent="onChange:_numOccurancesChanged" />\',\r\n                                \'<span class="padded-inline-label">{%= $.occurrencesText %}</span>\',\r\n                            \'</td>\',\r\n                        \'</tr><tr>\',\r\n                            \'<td>\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="endRecur" value="endOn" id="{%= $.id %}_rdoEndOn" dojoAttachPoint="_rdoEndOn" />\',\r\n                                \'<label for="{%= $.id %}_rdoEndOn" class="padded-inline-label">{%= $.endOnText %}</label>\',\r\n                            \'</td>\',\r\n                            \'<td>\',\r\n                                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_EndRecur" dojoAttachPoint="dtp_endRecur" displayDate="true" displayTime="false" dojoAttachEvent="onChange:_endRecurChanged" ></div>\',\r\n                            \'</td>\',\r\n                        \'</tr>\',\r\n                    \'</table>\',\r\n                \'</div>\',\r\n            \'</td>\',\r\n        \'</tr>\',\r\n    \'</table>\',\r\n\'</div>\']',"url:Sage/MainView/ActivityMgr/templates/HistoryEditor.html":'\ufeff\r\n[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="historyDialog" title="" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onDlgHide">\',\r\n        \'<div class="activity-dialog">\',  //body\r\n            \'<div class="activity-dialog-content">\',\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="regardingContainer">\',\r\n                \'<select label="{%= $.regardingText %}" shouldPublishMarkDirty="false" id="{%= $.id %}_pk_Regarding" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Regarding" canEditText="true" itemMustExist="false" maxLength="255"></select>\',\r\n                \'<div dojoType="Sage.UI.Controls.TextBox" shouldPublishMarkDirty="false" label="{%= $.locationText %}" id="{%= $.id %}_tb_Location" dojoAttachPoint="tb_Location" maxLength="255" ></div>\',\r\n            \'</div>\', //first tablecontainer 1 col\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="dateSection_AddEdit">\',\r\n                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_CompletetdDate" dojoAttachPoint="dtp_completedDate" displayDate="true" displayTime="true" label="{%= $.completedDateText %}"></div>\',\r\n                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_StartDate" dojoAttachPoint="dtp_startDate" displayDate="true" displayTime="true" label="{%= $.startTimeText %}"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="{%= $.timeLessText %}" id="{%= $.id %}_cb_Timeless" dojoAttachPoint="cb_Timeless" ></div>\',\r\n                    \'<label class="checkbox-label" for="cb_Timeless">{%= $.timeLessText %}</label>\',\r\n                \'</div>\',\r\n                 \'<div dojoType="Sage.UI.Controls.DurationSelect" shouldPublishMarkDirty="false" label="{%= $.durationText %}" id="{%= $.id %}_sel_Duration" dojoAttachPoint="sel_Duration" includeDisablingCheckbox="false" valuesAreAfterStart="true"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                \'</div>\',\r\n            \'</div>\', //second tablecontainer 2 col\r\n\r\n            \'<div dojoType="dijit.layout.TabContainer" id="{%= $.id %}_tc_EditHistory"  dojoAttachPoint="tc_EditHistory" class="tab-container" doLayout="false">\',\r\n/*  General Tab   */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_General" title="{%= $.tabNameGeneralText %}" class="tabContent remove-padding" dojoAttachPoint="cp_General">\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="result_Section" class="bottom-border-section add-padding">\',\r\n                        \'<select label="{%= $.resultText %}" id="{%= $.id %}_tb_Result" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Result" canEditText="true" itemMustExist="false" maxLength="64"></select>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="4" labelWidth="70" baseClass="contact-lead-radios" >\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.contactText %}" value="contact" id="{%= $.id %}_rdo_Contact" dojoAttachPoint="rdo_Contact" dojoAttachEvent="onChange:_setContactLeadVisibility" checked="true" />\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.leadText %}" value="lead" id="{%= $.id %}_rdo_Lead" dojoAttachPoint="rdo_Lead" />\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="contactContainer" baseClass="bottom-border-section">\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_ContactLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.opportunityText %}" dojoAttachPoint="container_OppLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.accountText %}" dojoAttachPoint="container_AccountLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.ticketText %}" dojoAttachPoint="container_TicketLup"  class="remove-padding lookup-container"></div>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="leadContainer"  baseClass="bottom-border-section" class="display-none">\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_LeadLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<input dojoType="dijit.form.TextBox" id="{%= $.id %}_tb_LeadCompanyName" label="{%= $.companyText %}" dojoAttachPoint="tb_LeadCompanyName" readonly="true" />\',\r\n                    \'</div>\',                       \r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}"  class="bottom-border-section" dojoAttachPoint="categoryContainer">\',\r\n                        \'<select label="{%= $.categoryText %}" id="{%= $.id %}_pk_Category" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Category" canEditText="true" itemMustExist="false" maxLength="64"  style="width: {%= 472 - $.labelWidth %}px;" ></select>\', \r\n                         \'<div dojoType="dijit.layout.ContentPane" label="{%= $.leaderText %}" dojoAttachPoint="container_LeaderLup" class="remove-padding lookup-container" style="width: {%= 472 - $.labelWidth %}px;"></div>\',\r\n                         \'<select label="{%= $.priorityText %}" id="{%= $.id %}_pk_Priority" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Priority" canEditText="true" itemMustExist="false" pickListName="Priorities" sort="false" maxLength="64" style="width: {%= 472 - $.labelWidth %}px;"></select>\',                          \r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}"  class="valigntop" dojoAttachPoint="notesContainer">\',\r\n                        \'<textarea dojoType="dijit.form.SimpleTextarea" id="{%= $.id %}_ta_Notes" label="{%= $.notesText %}" dojoAttachPoint="ta_Notes" class="notes-text" ></textarea>\',\r\n                    \'</div>\',\r\n                \'</div>\',  // end general tab\r\n\r\n              /* Attachments Tab  */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Attachments" title="{%= $.tabNameAttachmentsText %}" class="tabContent" dojoAttachPoint="cp_Attachments" dojoAttachEvent="onShow:_showAttachmentsTab">\',\r\n                    \'<div id="{%= $.id %}_attachmentsGridPlaceholder" dojoAttachPoint="_attachmentGridPlaceholder" style="width:100%;height:100%;" ></div>\',\r\n                \'</div>\',  //end attachments tab\r\n            \'</div>\', //end tab container\r\n            \'</div>\',\r\n            \'<table class="activity-dialog-followup">\',\r\n                \'<col width="50%" /><col width="50%" />\',\r\n                 \'<tr>\',\r\n                    \'<td class="alignleft">\',\r\n                        //followUp section\r\n                        \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="followUp_Section" >\',\r\n                            \'<select label="{%= $.followupText %}" id="{%= $.id %}_followUpSelect" dojoType="dijit.form.ComboBox" dojoAttachPoint="sel_Followup">\',\r\n                                \'<option value="none" selected="selected">{%= $.noneText %}</option>\',\r\n                                \'<option value="atPhoneCall">{%= Sage.Utility.Activity.getActivityTypeName("atPhoneCall") %}</option>\',\r\n                                \'<option value="atAppointment">{%= Sage.Utility.Activity.getActivityTypeName("atAppointment") %}</option>\',\r\n                                \'<option value="atToDo">{%= Sage.Utility.Activity.getActivityTypeName("atToDo") %}</option>\',\r\n                            \'</select>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="{%= $.id %}_ck_coAttachments" dojoAttachPoint="ck_coAttachments" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coAttachments">{%= $.carryOverAttachmentsText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="{%= $.id %}_ck_coNotes" dojoAttachPoint="ck_coNotes" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coNotes">{%= $.carryOverNotesText %}</label>\',\r\n                            \'</div>\',\r\n                        \'</div>\',//end followUp section\r\n                    \'</td>\',\r\n                    \'<td class="alignright valignbottom" rowspan="2" ojoAttachPoint="add_edit_buttons" >\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btnDelete" name="btn_Delete" dojoAttachPoint="btn_Delete" dojoAttachEvent="onClick:_deleteClick">{%= $.deleteText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. cancelText %}</div>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n                \'<tr>\',\r\n                   \'<td class="alignleft">\',\r\n                      \'<div class="scheduled-by-label" dojoAttachPoint="lbl_ScheduledBy"></div>\',\r\n                   \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n        \'</div>\', //body\r\n    \'</div>\',  //dialog\r\n\'</div>\' //root node\r\n]\r\n',
"url:Sage/MainView/EntityMgr/templates/EditEntityOptionsDlg.html":'<div>\r\n    <div dojotype="dijit.Dialog" title="" dojoattachpoint="_dialog" dojoattachevent="onHide:_onDlgHide" style="width:60%;">\r\n        <div class="recur-activity-dialog">\r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblName">\r\n                                Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                            <input disabled data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="Name" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                Display Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                            <input data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="DisplayName" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblPluralName">\r\n                                Display Plural Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="displayName">\r\n                            <input data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="PluralName" style="" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="" class="lbl alignright">\r\n                            <label data-dojo-attach-point="lblTitle">Title (String Expression)</label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="viewTitle"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="" class="lbl alignright">\r\n                            <label data-dojo-attach-point="lblExtension" for="IsExtension">Is Extension</label>\r\n                            <input type="checkbox" data-dojo-attach-point="IsExtension"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="entityDP">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblHistory">\r\n                                Track History To\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                            <input disabled data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="History" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="width:248px;" class="lbl alignright">\r\n                            <label data-dojo-attach-point="lblAdvancedOptions" for="">Advanced Options</label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="BulkUpdateVal" style="padding-top:4px; outline:1px solid #999999">\r\n                            <label data-dojo-attach-point="lblImport" style="display:inline-block; width: 100px; text-align:right;">Import</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanImport"\r\n                                   data-dojo-type="dijit/form/CheckBox"/>\r\n                            <label data-dojo-attach-point="lblCanPut" style="display:inline-block; width: 100px; text-align:right;">Put</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanPut"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                            <br />\r\n                            <label data-dojo-attach-point="lblMatch" style="display:inline-block; width: 100px; text-align:right;" for="">Match</label>\r\n                            <input style="margin-top: 4px;" type="checkbox" data-dojo-attach-point="CanMatch"\r\n                                   data-dojo-type="dijit/form/CheckBox"/>\r\n                            <label data-dojo-attach-point="lblCanPost" style="display:inline-block; width: 100px; text-align:right;">Post</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanPost"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                            <br />\r\n                            <label data-dojo-attach-point="lblBulkUpdate" style="display:inline-block; width: 100px; text-align:right;" for="">Bulk Update</label>\r\n                            <input style="margin-top: 4px;" type="checkbox" data-dojo-attach-point="BulkUpdate"\r\n                                   data-dojo-type="dijit/form/CheckBox"/>\r\n                            <label data-dojo-attach-point="lblCanDelete" style="display:inline-block; width: 100px; text-align:right;">Delete</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanDelete"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                            <br />\r\n                            <label data-dojo-attach-point="lblAudited" style="display:inline-block; width: 100px; text-align:right;" for="Audited">Audited</label>\r\n                            <input style="margin-top:4px;" type="checkbox" data-dojo-attach-point="Audited"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div class="button-bar alignright">\r\n                <div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_OK" name="btn_OK" dojoattachpoint="btn_OK" dojoattachevent="onClick:_okClick">OK</div>\r\n                <div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoattachpoint="btn_Cancel" dojoattachevent="onClick:_cancelClick">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/DistinctDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer formtable HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_filterDetailsSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblEntityFiltersDetailsContains\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld dijitInline\" data-dojo-attach-point=\"txtEntityFiltersDetailsContains\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n ]","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/RangeDetailsView.html":"[\r\n'<div>',\r\n     '<div data-dojo-attach-point=\"characterContainer\" >',\r\n     '</div>',\t\r\n     '<table  class=\"detailTableContainer HundredPercentWidth\">',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label  data-dojo-attach-point=\"rangeGridLabel\">',\r\n                    '</label>',\r\n                '</div>',\r\n                 '<div class=\"fld  dijitInline\">&nbsp</div>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright dijitInline\">&nbsp</div>',\r\n                '<div class=\"fld dijitInline\" data-dojo-attach-point=\"rangegridwhole\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/AMDDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer  formtable HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_filterDetailsSection\">',\r\n            '<td  class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                        '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblEntityFiltersDetailsAggregation\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld  dijitInline\" data-dojo-attach-point=\"dpEntityFiltersDetailsAggregation\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/ADDMDDetailsView.html":"[\r\n'<div>',    \r\n    '<div data-dojo-attach-point=\"aggregate\">',\r\n    '</div>',\t\t\r\n    '<table class=\"detailTableContainer HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_MetricsFromSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n    \t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblMetricRangeFrom\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                 '<div data-dojo-attach-point=\"fieldsContainerFrom\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr data-dojo-attach-point=\"_MetricsToSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblMetricRangeTo\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                 '<div data-dojo-attach-point=\"fieldsContainerTo\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/UI/Controls/templates/PropertyDropDown.html":'[\r\n\'<div class="fld propertyDiv dijitInline">\',\r\n    \'<input data-dojo-type="dijit.form.ValidationTextBox" dojoattachpoint="entitySelected"/>\',\r\n    \'<div data-dojo-type="dijit.form.Button" iconclass="myIcon" dojoattachevent="onClick:showDDTree" class="transparentDropDown" dojoattachpoint="transparentDropDown" />\',\r\n\'</div>\'\r\n]',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/UserLookupDetailsView.html":"[\r\n'<div>',\r\n    '<table  class=\"detailTableContainer HundredPercentWidth\">',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label  data-dojo-attach-point=\"lookupGridLabel\">',\r\n                    '</label>',\r\n                '</div>',\r\n                 '<div class=\"fld  dijitInline\">&nbsp</div>',\r\n            '</td>',\r\n\r\n       '</tr>',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright dijitInline\">&nbsp</div>',\r\n                '<div class=\"fld dijitInline rangegridwhole\" data-dojo-attach-point=\"rangegridwhole\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/EntityWizard/templates/SelectEntityType.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;">\r\n            <div>\r\n                <label style="font-size:16px; font-weight:bold;">Welcome to the New Entity Wizard</label>\r\n                <p>This Wizard takes you through the steps for creating a new entity.</p>\r\n\r\n                <div style="margin-top:40px;margin-left:40px;">\r\n                    <input data-dojo-type="dijit/form/RadioButton" name="EntityType" value="existing" /> <label style="font-weight:bold;">Create a business entity from an existing table</label> <br />\r\n                    <ul>\r\n                        <li><p>The schema can be modified using the Saleslogix DB Manager within the legacy Architect or Administrator</p></li>\r\n                    </ul>\r\n                </div>\r\n                <div style="margin-top:20px;margin-left:40px;">\r\n                    <input data-dojo-type="dijit/form/RadioButton" checked name="EntityType" value="New" /> <label style="font-weight:bold;">Create a business entity and a new table</label> <br />\r\n                    <ul>\r\n                        <li><p>The table will automatically be created based on the definition of the entity</p></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityDetails.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblCreateEntity">Create Entity</label>\r\n                <p><label data-dojo-attach-point="lblCreateEntityFromTable">Create a new entity from a table</label></p>\r\n                <hr />\r\n            </div>\r\n            \r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_displayNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                Display Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="displayName">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblEntityName">\r\n                                Entity Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="Name">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div class="lbl alignright">\r\n                            <label style="line-height:32px !important;">\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline"  data-dojo-attach-point="" style="color:red">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="divValidationMessage">\r\n                            </label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                \x3c!--<div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">Back</div>--\x3e\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/EntityWizard/templates/Relationship.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblRelationship">Primary Relationship</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblSelectEntity">Choose wheather this entity has a primary relationship to another entity</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblExistingEntity">\r\n                                Relate to an existing Entity\r\n                            </label>\r\n                        </div>\r\n                        <div style="padding-top:6px;">\r\n                            <input type="checkbox" data-dojo-attach-point="IsExtension"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelatedEntity">\r\n                                Related Entity\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typePkg"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelationType">\r\n                                Relation Type\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typeRel"></div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityProperties.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div style="padding-bottom:30px;">\r\n            <label style="font-weight:bold;" data-dojo-attach-point="lblEnterProperties">Enter Fields</label>\r\n            <p><label data-dojo-attach-point="lblAddNewProperty">Click the add(+) button to add new fields to the entity</label></p>\r\n            <hr />\r\n        </div>\r\n        <div data-dojo-type="dijit.form.Form"  style="height:400px !important;" class="mainContentContent DialogMainForm">\r\n            <div style="width:100%;" class="fld dijitInline" data-dojo-attach-point="placeGrid"></div>\r\n        </div>\r\n        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n        </div>\r\n        <div class="lookupButtonWrapper">\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/AddEditPropertiesDialog.html":'[\r\n\'<div>\',\r\n\t\'<div data-dojo-type="dijit.Dialog" class="OverrideDialogOverflowToHidden FullPageDialogue" data-dojo-attach-point="_dialog">\',\r\n        \'<div data-dojo-type="dijit.form.Form" data-dojo-attach-point="addEditFiltersForm" class="FManagerDialogForm" >\',\r\n            \'<div class="mainContentContent DialogMainForm">\',                 \r\n                \'<div data-dojo-attach-point="_DisplayName"></div>\',\r\n                \'<table data-dojo-attach-point="_DynamicSection" style="overflow-y:auto!important;" class="detailTableContainer formtable HundredPercentWidth">\',\r\n                \'</table>\',\r\n                \'<div data-dojo-attach-point="_DetailsSection"></div>\',\r\n            \'</div>\',\r\n            \'<div>\',\r\n                \'<div data-dojo-attach-point="divValidationMessage" class="errorText">\',\r\n                     \'<span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\',\r\n                 \'</div>\',\r\n                \'<div class="lookupButtonWrapper">\',                    \r\n                    \'<span data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdSave" data-dojo-attach-event="onClick:_cmdSave_OnClick"></span>\',\r\n                    \'<span data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdCancel" data-dojo-attach-event="onClick:_cmdCancel_OnClick"></span>\',\r\n                \'</div>\',\r\n            \'</div>\',\r\n        \'</div>\',\r\n\t\'</div>\',\r\n\'</div>\'\r\n ]',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/DisplayName.html":"\r\n[\r\n'<div>',\r\n    '<table class=\"detailTableContainer formtable HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_DisplaySection\">',\r\n\t\t    '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblDisplayName\"/>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"fld dijitInline\" data-dojo-attach-point=\"displayNameTxtCntrl\"></div>',\r\n            '</td>',\r\n\t    '</tr>',\r\n        '<tr data-dojo-attach-point=\"_TriggerSection\">',\r\n\t\t    '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblTriggerName\"></label>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"fld dijitInline\" data-dojo-attach-point=\"triggerCntrl\">',\r\n                    '<a data-dojo-attach-point=\"triggerCntrlLink\"></a>',\r\n                '</div>',\r\n            '</td>',\r\n\t    '</tr>',\r\n        '<tr data-dojo-attach-point=\"_LineSection\">',\r\n\t\t    '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblName\"/>',\r\n\t\t\t\t '</div>',\r\n\t\t\t     '<div class=\"fld  dijitInline\" data-dojo-attach-point=\"NameCntrl\"/>',\r\n\t\t    '</td>',\r\n\t    '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]","url:Sage/MainView/EntityMgr/EntityWizard/templates/AddEditEntity.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblSure">Are you sure ?</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblThisStepCreateEntity">Completing this step will create the entities and necessary schema</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table style="padding-left:20px; padding-top:20px;">\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold; text-align: right;" data-dojo-attach-point="lblEntity">Entity : </label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="createEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="vertical-align:top; padding-top:15px;text-align: right;">\r\n                        <span><label style="font-weight:bold;" data-dojo-attach-point="lblProperties">Properties : </label></span>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <ul class="properties" style="padding-left:0;"></ul>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelatedEntity"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relatedEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelationType"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relationType"></label>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',
"url:Sage/MainView/EntityMgr/EntityWizard/templates/Status.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n\r\n            <div style="">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblCreateEntity">Create Entity</label>\r\n                <p><label data-dojo-attach-point="lblStatus">Status</label></p>\r\n                <hr />\r\n            </div>\r\n\r\n            <div style="padding-bottom: 30px;">\r\n                <p><label data-dojo-attach-point="statusLabel" style="font-weight: bold;"></label>\r\n                </p>\r\n                <p>\r\n                    <label data-dojo-attach-point="selectedRelStatus" style="font-weight: bold;"></label>\r\n                </p>\r\n                <p>\r\n                    <label data-dojo-attach-point="ownerStatus" style="font-weight: bold;"></label>\r\n                </p>\r\n            </div>\r\n\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnFinish" data-dojo-attach-event="onClick:_btnFinish_OnClick" style="margin-left:5px;">Finish</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/templates/GridMenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\r\n\t\trole="presentation"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\r\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</span>\r\n\t</td>\r\n</tr>\r\n',"url:Sage/Library/templates/DocumentProperties.html":'[\r\n\'<div>\',\r\n\'    <div dojoType="dijit.Dialog" id="propertiesDialog" title="{%= Sage.Utility.htmlEncode($.resources.DocumentProperties) %}" dojoAttachPoint="_dialog">\',\r\n\'        <div dojoType="dijit.form.Form" id="propertiesForm" method="POST" onSubmit="return true;">\',\r\n\'            <table style="border: 1px solid #9f9f9f;" cellspacing="10">\',\r\n\'                <tr>\',\r\n\'                    <td>\',\r\n\'                        <label for="FileName">{%= $.resources.FileName %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input class="libInputText" type="text" id="fileName" name="fileName" required="true" maxlength="255" dojoType="dijit.form.ValidationTextBox" />\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <label for="CreateDate">{%= $.resources.Created %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input type="text" id="createDate" name="createDate" disabled="disabled" dojoType="dijit.form.DateTextBox" />\',\r\n\'                    </td>\',\r\n\'                </tr>\',\r\n\'                <tr>\',\r\n\'                    <td>\',\r\n\'                        <label for="Directroy">{%= $.resources.Directory %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input class="libInputText" type="text" id="directory.fullPath" name="directory.fullPath" maxlength="255" dojoType="dijit.form.TextBox" />\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <label for="RevisionDate">{%= $.resources.Revised %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input type="text" id="revisionDate" name="revisionDate" required="false" dojoType="dijit.form.DateTextBox" />\',\r\n\'                    </td>\',\r\n\'                </tr>\',\r\n\'                <tr>\',\r\n\'                    <td>\',\r\n\'                        <label for="Status">{%= $.resources.Status %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input class="libInputText" type="text" id="status" name="status" required="false" dojoType="dijit.form.TextBox" />\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <label for="ExpireDate">{%= $.resources.Expires %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <div id="expiresRoot" name="expiresRoot"></div>\',\r\n\'                    </td>\',\r\n\'                </tr>\',\r\n\'                <tr>\',\r\n\'                    <td>\',\r\n\'                        <label for="FileSize">{%= $.resources.Size %}:</label>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input class="libInputText" type="text" id="fileSize" name="fileSize" required="false" dojoType="dijit.form.TextBox" />\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                    </td>\',\r\n\'                    <td>\',\r\n\'                        <input type="checkbox" dojoType="dijit.form.CheckBox" id="doNotExpire" name="doNotExpire" dojoAttachEvent="onChange:_doNotExpireChange" />\',\r\n\'                        <label for="doNotExpire">{%= $.resources.DoNotExpire %}</label>\',\r\n\'                    </td>\',\r\n\'                </tr>\',\r\n\'            </table>\',\r\n\'            <br><label for="Description">{%= $.resources.Description %}:</label>\',\r\n\'            <br>\',\r\n\'            <textarea class="libTextBox" id="description" name="description" maxlength="255" dojoType="dijit.form.Textarea"></textarea>\',\r\n\'            <br><br>\',\r\n\'            <label for="abstract">{%= $.resources.Abstract %}:</label>\',\r\n\'            <br>\',\r\n\'            <textarea class="libTextBox" id="abstract" name="abstract" dojoType="dijit.form.Textarea"></textarea>\',\r\n\'            <p></p>\',\r\n\'            <input type="checkbox" dojoType="dijit.form.CheckBox" id="forceDistribution" name="forceDistribution" />\',\r\n\'            <label for="forceDistribution">{%= $.resources.ForceDistribution %}</label>\',\r\n\'            <div style="text-align: right">\',\r\n\'                <button class="libOkBtn" dojoType="dijit.form.Button" id="okButton" type="button" dojoAttachEvent="onClick:_submitClick">{%= $.resources.OK %}</button>\',\r\n\'                &nbsp;\',\r\n\'                <button dojoType="dijit.form.Button" id="cancelButton" type="button" dojoAttachEvent="onClick:_cancelClick">{%= $.resources.Cancel %}</button>\',\r\n\'            </div>\',\r\n\'            <div style="display: none">\',\r\n\'                <input type="text" dojoType="dijit.form.DateTextBox" id="expireDate" name="expireDate" value="" />\',\r\n\'            </div>\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="$key" name="$key" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="$etag" name="$etag" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="expires" name="expires" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="flags" name="flags" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="abstract$originalValue" name="abstract$originalValue" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="description$originalValue" name="description$originalValue" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="expireDate$originalValue" name="expireDate$originalValue" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="fileName$originalValue" name="fileName$originalValue" value="" />\',\r\n\'            <input type="hidden" dojoType="dijit.form.TextBox" id="revisionDate$originalValue" name="revisionDate$originalValue" value="" />\',\r\n\'        </div>\',\r\n\'    </div>\',\r\n\'</div>\'\r\n]',"url:Sage/MainView/ReportMgr/Crystal/templates/CrystalReportParametersDialog.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._getDialogTitle() %}" dojoattachpoint="_dialog" dojoattachevent="onCancel:_dialog_OnCancel" style="width: 625px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div style="overflow:auto">\r\n                <div dojoattachpoint="paramsContainerDiv" id="paramsContainerDiv" style="height:400px; overflow:auto"></div>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdBack" dojoAttachEvent="onClick:_cmdBack_OnClick" >{%= Sage.Utility.htmlEncode($._nlsResources.cmdBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdNext" dojoAttachEvent="onClick:_cmdNext_OnClick">{%= Sage.Utility.htmlEncode($._nlsResources.cmdNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" dojoAttachPoint="cmdCancel" dojoAttachEvent="onClick:_cmdCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/BooleanParameterEditor.html":'<div>\r\n    <div dojoattachpoint="promptParameterContainer" class="crystalParameterContainer">\r\n        <div dojoattachpoint="paramsHeaderContainer"></div>\r\n        <div>\r\n            <div dojotype="dijit.form.FilteringSelect" data-dojo-attach-point="cmbValues" style="width:40%"></div>\r\n            <span dojoAttachPoint="errorInvalidOption" class="display-none" style="color:red">*</span>\r\n        </div>\r\n        <div dojoattachpoint="divValidationMessage" style="color:red">\r\n            <span dojoattachpoint="spanValidationMessage">&nbsp;</span>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/ParameterHeaderWidget.html":'<table style="padding-bottom:5px; width:100%">\r\n    <colgroup>\r\n        <col style="width:45%" />\r\n        <col style="width:10%" />\r\n        <col style="width:45%" />\r\n    </colgroup>\r\n    <tr>\r\n        <td>\r\n            <label for="values" style="font-weight:bold" >${promptText}</label>\r\n        </td>\r\n        <td></td>\r\n        <td>\r\n            <label style="font-weight:bold">${parameterFieldName}</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td colspan="3">\r\n            <div style="border-bottom: 1px solid #B5BCC7"></div>\r\n        </td>\r\n    </tr>\r\n</table>\r\n',"url:Sage/UI/templates/TransferBoxWidget.html":'<div>\r\n    <table style="width:100%">\r\n        <colgroup>\r\n            <col style="width:45%" />\r\n            <col style="width:10%" />\r\n            <col style="width:45%" />\r\n        </colgroup>\r\n        <tr>\r\n            <td colspan="3">\r\n                <div data-dojo-attach-point="searchFilterDiv">\r\n                    <label>${searchFilterText}</label>\r\n                    <div dojoType="dijit.form.TextBox" dojoAttachPoint="searchFilter"></div>\r\n                    <button data-dojo-type="Sage.UI.ImageButton" imageClass="icon_Find_16x16" data-dojo-attach-point="filterButton" data-dojo-attach-event="onClick:_onFilterClick" ></button>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n                <label data-dojo-attach-point="availableValues">${availableValuesText}</label>\r\n            </td>\r\n            <td></td>\r\n            <td>\r\n                <label data-dojo-attach-point="selectedValues">${selectedValuesText}</label>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td data-dojo-attach-point="colFromNode">\r\n                <div data-dojo-attach-point="fromNode"></div>\r\n            </td>\r\n            <td style="text-align:center">\r\n                <div data-dojo-attach-point="transferButtons">\r\n                    <button data-dojo-type="dijit.form.Button" data-dojo-attach-event="onClick:_onAddClick" data-dojo-attach-point="addButton" title="${btnAddTooltip}">&gt;</button>\r\n                    <button data-dojo-type="dijit.form.Button" data-dojo-attach-event="onClick:_onAddAllClick" data-dojo-attach-point="addAllButton" title="${btnAddAllTooltip}">&gt;&gt;</button>\r\n                    <button data-dojo-type="dijit.form.Button" data-dojo-attach-event="onClick:_onRemoveClick" data-dojo-attach-point="removeButton" title="${btnRemoveTooltip}">&lt;</button>\r\n                    <button data-dojo-type="dijit.form.Button" data-dojo-attach-event="onClick:_onRemoveAllClick" data-dojo-attach-point="removeAllButton" title="${btnRemoveAllTooltip}">&lt;&lt;</button>\r\n                </div>\r\n            </td>\r\n            <td>\r\n                <div data-dojo-attach-point="toNode"></div>\r\n            </td>\r\n            <td style="vertical-align:top">\r\n                <span data-dojo-attach-point="errorValidation" class="display-none" style="color:red">*</span>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/DateParameterEditor.html":'<div>\r\n    <div data-dojo-attach-point="promptParameterContainer" class="crystalParameterContainer">\r\n        <div data-dojo-attach-point="paramsHeaderContainer"></div>\r\n        <div data-dojo-attach-point="divMinMaxMessage">\r\n            <span data-dojo-attach-point="spanMinMaxMessage">&nbsp;</span>\r\n        </div>\r\n        <div>\r\n            <table data-dojo-attach-point="tblRange" style="width:100%">\r\n                <colgroup>\r\n                    <col style="width:1%" />\r\n                    <col style="width:44%" />\r\n                    <col style="width:10%" />\r\n                    <col style="width:1%" />\r\n                    <col style="width:44%" />\r\n                </colgroup>\r\n                <tr>\r\n                    <td colspan="3">\r\n                        <label data-dojo-attach-point="lblDiscreteStartRange" style="font-weight:bold">{%= Sage.Utility.htmlEncode($.txtStartOfRange) %}</label>\r\n                    </td>\r\n                    <td colspan="2" data-dojo-attach-point="colEndDefaultValuesLabel">\r\n                        <label style="font-weight:bold">{%= Sage.Utility.htmlEncode($.txtEndOfRange) %}</label>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowRangeListItems">\r\n                    <td></td>\r\n                    <td data-dojo-attach-point="colStartDefaultValues">\r\n                        <div>\r\n                            <select dojotype="dijit.form.FilteringSelect" data-dojo-attach-point="cboDiscreteStartRange" style="width:90%"></select>\r\n                            <span data-dojo-attach-point="lstErrorDiscreteStartRange" class="display-none" style="color:red">*</span>\r\n                        </div>\r\n                    </td>\r\n                    <td colspan="2"></td>\r\n                    <td data-dojo-attach-point="colEndDefaultValues">\r\n                        <div>\r\n                            <select dojotype="dijit.form.FilteringSelect" data-dojo-attach-point="cboEndRangeValues" style="width:90%"></select>\r\n                            <span data-dojo-attach-point="lstErrorEndRange" class="display-none" style="color:red">*</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowStartEndOrValue">\r\n                    <td colspan="3">\r\n                        <label style="font-weight:bold">{%= Sage.Utility.htmlEncode($.lblOrValue_Caption) %}</label><br />\r\n                    </td>\r\n                    <td colspan="2" data-dojo-attach-point="rowToValueLabel">\r\n                        <label style="font-weight:bold">{%= Sage.Utility.htmlEncode($.lblOrValue_Caption) %}</label><br />\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowCustomRangeValues">\r\n                    <td></td>\r\n                    <td data-dojo-attach-point="rowDiscreteFromRange">\r\n                        <div shouldpublishmarkdirty="false" dojotype="Sage.UI.Controls.DateTimePicker" data-dojo-attach-point="dtDiscreteFromRange" displaydate="true"\r\n                             displaytime="false" required="true" style="width:90%">\r\n                        </div>\r\n                        <span data-dojo-attach-point="errorDiscreteValue" class="display-none" style="color:red">*</span>\r\n                    </td>\r\n                    <td colspan="2"></td>\r\n                    <td data-dojo-attach-point="rowToRange">\r\n                        <div shouldpublishmarkdirty="false" dojotype="Sage.UI.Controls.DateTimePicker" data-dojo-attach-point="dtToRange" displaydate="true"\r\n                             displaytime="false" required="true" style="width:90%">\r\n                        </div>\r\n                        <span data-dojo-attach-point="errorEndRange" class="display-none" style="color:red">*</span>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowIncludeRangeOptions">\r\n                    <td></td>\r\n                    <td colspan="2">\r\n                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkIncludeFromRange" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtIncludeThisValue) %}</label>\r\n                    </td>\r\n                    <td></td>\r\n                    <td>\r\n                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkIncludeToRange" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtIncludeThisValue) %}</label>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowUpperLowerRangeOptions">\r\n                    <td></td>\r\n                    <td colspan="2">\r\n                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkNoLowerValue" dojoattachevent="onChange:_chkNoLowerValue_OnCheck" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtNoLowerValue) %}</label>\r\n                    </td>\r\n                    <td></td>\r\n                    <td>\r\n                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkNoUpperValue" dojoattachevent="onChange:_chkNoUpperValue_OnCheck" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtNoUpperValue) %}</label>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowRangeValidationError" class="display-none">\r\n                    <td colspan="4">\r\n                        <div>\r\n                            <label data-dojo-attach-point="lblRangeValidationError" style="color:red">{%= Sage.Utility.htmlEncode($.txtPleaseSpecifyValue) %}</label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowAddRangeParameter">\r\n                    <td colspan="4"></td>\r\n                    <td>\r\n                        <div style="padding:5px">\r\n                            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdAddRange" dojoattachevent="onClick:_cmdAddRange_OnClick"\r\n                                 style="float:right">\r\n                                {%= Sage.Utility.htmlEncode($.txtAddRange) %}\r\n                            </div>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <table style="width:100%">\r\n                <colgroup>\r\n                    <col style="width:1%" />\r\n                    <col style="width:44%" />\r\n                    <col style="width:10%" />\r\n                    <col style="width:44%" />\r\n                </colgroup>\r\n                <tr>\r\n                    <td colspan="4">\r\n                        <div data-dojo-attach-point="transferBoxContainer" style="height:auto"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowCustomValues">\r\n                    <td></td>\r\n                    <td>\r\n                        <div>\r\n                            <label>{%= Sage.Utility.htmlEncode($.lblEnterValue_Caption) %}</label><br />\r\n                            <div shouldpublishmarkdirty="false" dojotype="Sage.UI.Controls.DateTimePicker" data-dojo-attach-point="dtCustomValue" displaydate="true"\r\n                                 displaytime="false" required="true" style="width:93%">\r\n                            </div>\r\n                            <span data-dojo-attach-point="errorCustomDate" class="display-none" style="color:red">*</span>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <br />\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdAddCustom" dojoattachevent="onClick:_cmdAddCustom_OnClick">{%= Sage.Utility.htmlEncode(">") %}</div>\r\n                    </td>\r\n                    <td></td>\r\n                </tr>\r\n                <tr>\r\n                    <td></td>\r\n                    <td colspan="3">\r\n                        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/SimpleParameterEditor.html":'<div>\r\n    <div dojoattachpoint="promptParameterContainer" class="crystalParameterContainer">\r\n        <div dojoattachpoint="paramsHeaderContainer"></div>\r\n        <table class="crystalTableContainer">\r\n            <colgroup>\r\n                <col style="width:45%" />\r\n                <col style="width:10%" />\r\n                <col style="width:45%" />\r\n            </colgroup>\r\n            <tr>\r\n                <td colspan="3">\r\n                    <div dojoattachpoint="divMinMaxMessage">\r\n                        <span dojoattachpoint="spanMinMaxMessage">&nbsp;</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr data-dojo-attach-point="rowParameterRange">\r\n                <td colspan="3">\r\n                    <div data-dojo-attach-point="parameterRangeWidgetContainer" style="height:auto"></div>\r\n                </td>\r\n            </tr>\r\n            <tr dojoattachpoint="rowSingleValue" class="display-none">\r\n                <td colspan="2">\r\n                    <div class="textcontrol picklist">\r\n                        <label>{%= Sage.Utility.htmlEncode($.lblSelectValue_Caption) %}</label><br />\r\n                        <select data-dojo-type="dijit.form.FilteringSelect" dojoAttachPoint="cmbValues"></select>\r\n                        <span dojoAttachPoint="errorEndRange" class="display-none" style="color:red">*</span>\r\n                    </div>\r\n                </td>\r\n                <td colspan="2"></td>\r\n            </tr>\r\n            <tr dojoAttachPoint="rowOrEnterValue">\r\n                <td colspan="3">\r\n                    <label style="font-weight:bold">{%= Sage.Utility.htmlEncode($.lblOrValue_Caption) %}</label><br />\r\n                </td>\r\n            </tr>\r\n            <tr dojoattachpoint="rowCustomValues" class="display-none">\r\n                <td>\r\n                    <div>\r\n                        <label>{%= Sage.Utility.htmlEncode($.lblEnterValue_Caption) %}</label><br />\r\n                        <div dojoAttachPoint="customValueContainer"></div>\r\n                        <span dojoAttachPoint="errorCustomValue" class="display-none" style="color:red">*</span>\r\n                    </div>\r\n                </td>\r\n                <td colspan="2"></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="3">\r\n                    <div dojoattachpoint="divValidationMessage" style="color:red">\r\n                        <span dojoattachpoint="spanValidationMessage">&nbsp;</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/ParameterRangeWidget.html":'<table class="crystalTableContainer">\r\n    <colgroup>\r\n        <col style="width:1%" />\r\n        <col style="width:44%" />\r\n        <col style="width:10%" />\r\n        <col style="width:1%" />\r\n        <col style="width:44%" />\r\n    </colgroup>\r\n    <tr data-dojo-attach-point="rowStartEndRangeLabels">\r\n        <td colspan="3">\r\n            <label style="font-weight:bold">${txtStartOfRange}</label>\r\n        </td>\r\n        <td colspan="2">\r\n            <label style="font-weight:bold">${txtEndOfRange}</label>\r\n        </td>\r\n    </tr>\r\n    <tr data-dojo-attach-point="rowStartEndRangeValues">\r\n        <td></td>\r\n        <td>\r\n            <div dojotype="dijit.form.FilteringSelect" data-dojo-attach-point="cboStartRangeValues" style="width:90%"></div>\r\n            <span data-dojo-attach-point="errorStartRange" class="display-none" style="color:red">*</span>\r\n        </td>\r\n        <td colspan="2"></td>\r\n        <td>\r\n            <select dojotype="dijit.form.FilteringSelect" data-dojo-attach-point="cboEndRangeValues" style="width:90%"></select>\r\n            <span data-dojo-attach-point="errorEndRange" class="display-none" style="color:red">*</span>\r\n        </td>\r\n    </tr>\r\n    <tr data-dojo-attach-point="rowStartEndOrValue">\r\n        <td colspan="3">\r\n            <label style="font-weight:bold">${lblOrValue_Caption}</label><br />\r\n        </td>\r\n        <td colspan="2">\r\n            <label style="font-weight:bold">${lblOrValue_Caption}</label><br />\r\n        </td>\r\n    </tr>\r\n    <tr data-dojo-attach-point="rowStartEndCustomValue">\r\n        <td></td>\r\n        <td>\r\n            <div>\r\n                <label>${lblEnterValue_Caption}</label><br />\r\n                <div data-dojo-attach-point="startCustomValueContainer"></div>\r\n                <span data-dojo-attach-point="errorStartCustomValue" class="display-none" style="color:red">*</span>\r\n        </td>\r\n        <td colspan="2"></td>\r\n        <td>\r\n            <div>\r\n                <label style="padding-left:3px">${lblEnterValue_Caption}</label><br />\r\n                <div data-dojo-attach-point="endCustomValueContainer"></div>\r\n                <span data-dojo-attach-point="errorEndCustomValue" class="display-none" style="color:red">*</span>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td></td>\r\n        <td>\r\n            <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkIncludeFromRange" />\r\n            <label>${txtIncludeThisValue}</label>\r\n        </td>\r\n        <td colspan="2"></td>\r\n        <td>\r\n            <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkIncludeToRange" />\r\n            <label>${txtIncludeThisValue}</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td></td>\r\n        <td>\r\n            <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkNoLowerValue" dojoAttachEvent="onChange:_chkNoLowerValue_OnCheck" />\r\n            <label>${txtNoLowerValue}</label>\r\n        </td>\r\n        <td colspan="2"></td>\r\n        <td>\r\n            <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkNoUpperValue" dojoAttachEvent="onChange:_chkNoUpperValue_OnCheck" />\r\n            <label>${txtNoUpperValue}</label>\r\n        </td>\r\n    </tr>\r\n</table>',
"url:Sage/MainView/ReportMgr/Crystal/templates/MultiSelectParameterEditor.html":'<div>\r\n    <div data-dojo-attach-point="promptParameterContainer" class="crystalParameterContainer">\r\n        <div data-dojo-attach-point="paramsHeaderContainer"></div>\r\n        <div data-dojo-attach-point="divMinMaxMessage">\r\n            <span data-dojo-attach-point="spanMinMaxMessage">&nbsp;</span>\r\n        </div>\r\n        <div data-dojo-attach-point="parameterRangeDiv" class="display-none">\r\n            <div data-dojo-attach-point="parameterRangeWidgetContainer" style="height:auto"></div>\r\n            <div>\r\n                <label class="display-none" data-dojo-attach-point="lblRangeValidationError" style="color:red">{%= Sage.Utility.htmlEncode($.txtPleaseSpecifyValue) %}</label>\r\n            </div>\r\n            <div style="padding:5px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdAddRange" dojoattachevent="onClick:_cmdAddRange_OnClick"\r\n                     style="float:right">\r\n                    {%= Sage.Utility.htmlEncode($.txtAddRange) %}\r\n                </div>\r\n            </div>\r\n            <br />\r\n        </div>\r\n        <div data-dojo-attach-point="divMultipleValues">\r\n            <table style="width:100%">\r\n                <colgroup>\r\n                    <col style="width:1%" />\r\n                    <col style="width:44%" />\r\n                    <col style="width:10%" />\r\n                    <col style="width:44%" />\r\n                </colgroup>\r\n                <tr>\r\n                    <td colspan="4">\r\n                        <div data-dojo-attach-point="transferBoxContainer" style="height:auto"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="rowCustomValues">\r\n                    <td></td>\r\n                    <td>\r\n                        <div>\r\n                            <label>{%= Sage.Utility.htmlEncode($.lblEnterValue_Caption) %}</label><br />\r\n                            <div data-dojo-attach-point="customValueContainer"></div>\r\n                            <span data-dojo-attach-point="errorCustomDate" class="display-none" style="color:red">*</span>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <br />\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdAddCustom" dojoattachevent="onClick:_cmdAddCustom_OnClick">{%= Sage.Utility.htmlEncode(">") %}</div>\r\n                    </td>\r\n                    <td></td>\r\n                </tr>\r\n                <tr>\r\n                    <td></td>\r\n                    <td colspan="3">\r\n                        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/CrystalReportConditionsDialog.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._getDialogTitle() %}" dojoattachpoint="_dialog" dojoattachevent="onCancel:_dialog_OnCancel" style="width: 600px;">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div>\r\n                \r\n                <div>\r\n                    <table cellspacing="5">\r\n                        <tr>\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtShowRecordsThatMatch %}</label>\r\n                            </td>\r\n                            <td>\r\n                                <select dojoType="dijit.form.Select" dojoAttachPoint="cmbConditionPresets" sortByLabel="false" dojoAttachEvent="onChange:_cmbConditionPresets_OnChange" style="width:150px" >\r\n                                </select>\r\n                            </td>\r\n                        </tr>                   \r\n                        <tr dojoAttachPoint="trConnector" class="display-none">\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtMatch %}</label>\r\n                            </td>\r\n                            <td>\r\n                                <select dojoType="dijit.form.Select" dojoAttachPoint="cmbConnector" style="width:150px" >\r\n                                    <option value="Or">{%= $._nlsResources.txtAny %}</option>\r\n                                    <option value="And">{%= $._nlsResources.txtAll %}</option>\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n\r\n                <div dojoType="dijit.Toolbar" dojoAttachPoint="tbConditions" region="top" splitter="false" class="right-tools display-none">\r\n                    <span dojoType="Sage.UI.ImageButton" icon="{%= $._btnPlusIconPath %}" title="{%= $._nlsResources.btnAddCondition_Caption %}" dojoAttachEvent="onClick:_btnAddCondition_Click" dojoAttachPoint="btnAddCondition"></span>\r\n                </div>                                  \r\n                \r\n                <div id="divGrdCrystalConditions" style="width:100%; height:200px; overflow:auto" >            \r\n                    <table data-dojo-type="dojox.grid.DataGrid" dojoAttachPoint="grdCrystalConditions" id="grdCrystalConditions" class="display-none" formatterScope="Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter">\r\n                        <thead>\r\n                            <th field="conditionType" width="60px" formatter="formatConditionType" >{%= $._nlsResources.grdCrystalConditions_ConditionType_Caption %}</th>\r\n                            <th field="table" width="80px">{%= $._nlsResources.grdCrystalConditions_TableName_Caption %}</th>\r\n                            <th field="field" width="80px">{%= $._nlsResources.grdCrystalConditions_FieldName_Caption %}</th>\r\n                            <th field="operator" formatter="formatOperator" width="50px">{%= $._nlsResources.grdCrystalConditions_Operator_Caption %}</th>\r\n                            <th field="_item" formatter="formatConditionValue" width="125px">{%= $._nlsResources.grdCrystalConditions_Value_Caption %}</th>\r\n                            <th field="value" formatter="formatEditCondition" width="40px">&nbsp;</th>\r\n                            <th field="_item" formatter="formatDeleteCondition" width="40px">&nbsp;</th>\r\n                        </thead>\r\n                    </table>\r\n                </div>               \r\n\r\n            </div>\r\n\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdBack" dojoAttachEvent="onClick:_cmdBack_OnClick" style="display:none">{%= Sage.Utility.htmlEncode($._nlsResources.cmdBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdNext" dojoAttachEvent="onClick:_cmdNext_OnClick">{%= Sage.Utility.htmlEncode($._nlsResources.cmdNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" dojoAttachPoint="cmdCancel" dojoAttachEvent="onClick:_cmdCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/ReportMgr/Crystal/templates/CrystalReportConditionEditor.html":"[\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgCrystalReportConditionDetails_Title %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_dialog_OnCancel, onShow:_dialog_OnShow\" style=\"width: 300px\">',\r\n            '<div data-dojo-type=\"dijit.form.Form\" style=\"overflow-x:hidden\">',\r\n                \r\n                '<table cellspacing=\"10\">',\r\n                    \r\n                    '<tr>',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbConditionType_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',                            \r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbConditionType\" sortByLabel=\"false\" dojoAttachEvent=\"onChange:_cmbConditionType_OnChange\" style=\"width:150px\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trCurrentUser\">',\r\n                        '<td>',\r\n                            '&nbsp;',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input data-dojo-type=\"dijit.form.CheckBox\" dojoAttachPoint=\"chkCurrentUser\" dojoAttachEvent=\"onChange:_chkCurrentUser_OnChange\" /> <label>{%= $._nlsResources.chkCurrentUser_Caption %}</label>',\r\n                        '</td>',                        \r\n                    '</tr>',\r\n                    \r\n                    '<tr dojoAttachPoint=\"trUser\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.lkpUser_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $._nlsResources.lkpUser_Caption %}\" dojoAttachPoint=\"contentPaneLkpUser\" class=\"remove-padding lookup-container\" style=\"width:150px; padding: 0px !important;\"></div>',                            \r\n                        '</td>',                        \r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trGroup\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.lkpGroup_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $._nlsResources.lkpGroup_Caption %}\" dojoAttachPoint=\"contentPaneLkpGroup\" class=\"remove-padding lookup-container\" style=\"width:150px; padding: 0px !important;\"></div>',                            \r\n                        '</td>',\r\n                    '</tr>',                                                       \r\n\r\n\r\n                    '<tr dojoAttachPoint=\"trDateRange\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbDateRange_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbDateRange\" dojoAttachEvent=\"onChange:_cmbDateRange_OnChange\" style=\"width:150px\" >',\r\n                                '<option value=\"DateRange\">{%= $._nlsResources.cmbDateRange_SpecificDates_Caption %}</option>',\r\n                                '<option value=\"ThisWeek\">{%= $._nlsResources.cmbDateRange_ThisWeek_Caption %}</option>',\r\n                                '<option value=\"ThisMonth\">{%= $._nlsResources.cmbDateRange_ThisMonth_Caption %}</option>',\r\n                                '<option value=\"ThisQuarter\">{%= $._nlsResources.cmbDateRange_ThisQuarter_Caption %}</option>',\r\n                                '<option value=\"ThisYear\">{%= $._nlsResources.cmbDateRange_ThisYear_Caption %}</option>',\r\n                                '<option value=\"LastWeek\">{%= $._nlsResources.cmbDateRange_LastWeek_Caption %}</option>',\r\n                                '<option value=\"LastMonth\">{%= $._nlsResources.cmbDateRange_LastMonth_Caption %}</option>',\r\n                                '<option value=\"LastQuarter\">{%= $._nlsResources.cmbDateRange_LastQuarter_Caption %}</option>',\r\n                                '<option value=\"LastYear\">{%= $._nlsResources.cmbDateRange_LastYear_Caption %}</option>',\r\n                                '<option value=\"MonthToDate\">{%= $._nlsResources.cmbDateRange_MonthToDate_Caption %}</option>',\r\n                                '<option value=\"QuarterToDate\">{%= $._nlsResources.cmbDateRange_QuarterToDate_Caption %}</option>',\r\n                                '<option value=\"YearToDate\">{%= $._nlsResources.cmbDateRange_YearToDate_Caption %}</option>',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr dojoAttachPoint=\"trFromDate\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtFromDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtFromDate\" displayDate=\"true\" displayTime=\"false\" label=\"{%= $._nlsResources.dtFromDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr dojoAttachPoint=\"trToDate\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtToDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtToDate\" displayDate=\"true\" displayTime=\"false\" label=\"{%= $._nlsResources.dtToDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n\r\n\r\n                    '<tr dojoAttachPoint=\"trTable\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbTable_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbTables\" style=\"width:150px\" data-dojo-props=\"maxHeight:100\" dojoAttachEvent=\"onChange:_cmbTables_OnChange\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n\r\n                    '<tr dojoAttachPoint=\"trField\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbField_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbFields\" style=\"width:150px\" data-dojo-props=\"maxHeight:100\" dojoAttachEvent=\"onChange:_cmbFields_OnChange\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trOperator\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbOperator_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbOperators\" sortByLabel=\"false\" style=\"width:150px\" dojoAttachEvent=\"onChange:_cmbOperators_OnChange\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trStringValue1\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.txtValue_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtStringValue1\" required=\"false\" dojoType=\"dijit.form.TextBox\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trStringValue2\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.txtValue2_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtStringValue2\" required=\"false\" dojoType=\"dijit.form.TextBox\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trNumericValue1\">',\r\n                        '<td>',\r\n                            '<label dojoAttachPoint=\"lblNumericValue1\">{%= $._nlsResources.txtValue_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtNumericValue1\" required=\"false\" dojoType=\"Sage.UI.Controls.Numeric\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trNumericValue2\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.txtNumericValueTo_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtNumericValue2\" required=\"false\" dojoType=\"Sage.UI.Controls.Numeric\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trDateValue1\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtFromDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtDateValue1\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $._nlsResources.dtFromDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr dojoAttachPoint=\"trDateValue2\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtToDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtDateValue2\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $._nlsResources.dtToDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    \r\n                '</table>',\r\n                \r\n                '<div align=\"right\" style=\"margin-top:10px\">',\r\n                    '<div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdOK\" dojoAttachEvent=\"onClick:_cmdOK_OnClick\">{%= $._nlsResources.cmdOK_Caption %}</div>',\r\n                    '<div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= $._nlsResources.cmdCancel_Caption %}</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]","url:Sage/MainView/ReportMgr/Common/templates/ExportOptionsDialog.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._getDialogTitle() %}" dojoattachpoint="_dialog" dojoattachevent="onCancel:_dialog_OnCancel" style="width: 600px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div style="overflow:auto">\r\n                <div dojoattachpoint="containerDiv" id="containerDiv" style="height:350px; overflow:auto">\r\n                    <table cellspacing="10">\r\n                        <tr dojoAttachpoint="trScheduleDescription">\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtScheduleDescription_Caption %}:</label>\r\n                            </td>\r\n                            <td>\r\n                                <input type="text" dojoAttachPoint="txtScheduleDescription" required="true" dojoType="dijit.form.TextBox" style="width:300px" />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtOutputFormat_Caption %}:</label>\r\n                            </td>\r\n                            <td>\r\n                                <select dojoType="dijit.form.Select" dojoAttachPoint="cmbOutputFormat" sortByLabel="false" style="width:300px" >\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                        <tr dojoAttachpoint="trRunAsUserId">\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtRunAs_Caption %}:</label>\r\n                            </td>\r\n                            <td>\r\n                                <div dojoType="dijit.layout.ContentPane" label="{%= $._nlsResources.txtRunAs_Caption %}" dojoAttachPoint="container_lkpRunAsUserId" style="padding: 0 !important;"></div>                            \r\n                            </td>\r\n                        </tr>\r\n                        <tr dojoAttachpoint="trSchedulingWidget">                            \r\n                            <td colspan="2">\r\n                                <div data-dojo-type="Sage.UI.JobSchedulingWidget" id="jobSchedulingWidget" data-dojo-attach-point="jobSchedulingWidget"></div>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdBack" dojoAttachEvent="onClick:_cmdBack_OnClick" >{%= Sage.Utility.htmlEncode($._nlsResources.cmdBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdNext" dojoAttachEvent="onClick:_cmdNext_OnClick">{%= Sage.Utility.htmlEncode($._nlsResources.cmdNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" dojoAttachPoint="cmdCancel" dojoAttachEvent="onClick:_cmdCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/UI/templates/JobSchedulingWidget.html":'<div>\r\n    <div dojoAttachPoint="divJobSchedulingWidget">\r\n        <table>\r\n            <tr>\r\n                <td>\r\n                    <label>${lblCreateSchedule}:</label>\r\n                </td>\r\n            </tr>\r\n            <tr style="padding-left: 10px">\r\n                <td>\r\n                    <label style="padding-left: 10px">${lblEveryText}</label>&nbsp;\r\n                    <div dojoAttachPoint="divMinutesHours" class="display-none" style="display: -moz-inline-box; display: inline-block">\r\n                        <select dojoType="dijit.form.Select" dojoAttachPoint="cboMinutesHours"></select>\r\n                    </div>\r\n                    <select dojoType="dijit.form.Select" dojoAttachPoint="cboFrequency" dojoAttachEvent="onChange:_onFrequencyChange">\r\n                        <option value="minutes">${lblMinutesFrequency}</option>\r\n                        <option value="hourly">${lblHourlyFrequency}</option>\r\n                        <option value="daily">${lblDailyFrequency}</option>\r\n                        <option value="weekday">${lblWeekDayFrequency}</option>\r\n                        <option value="weekly">${lblWeeklyFrequency}</option>\r\n                        <option value="monthly">${lblMonthlyFrequency}</option>\r\n                        <option value="yearly" selected="selected" disabled="disabled">${lblYearlyFrequency}</option>\r\n                    </select>\r\n                    <label dojoAttachPoint="lblOnText" class="display-none">${lblOnText}</label>&nbsp;\r\n                    <label dojoAttachPoint="lblOnTheText" class="display-none">${lblOnTheText}</label>&nbsp;\r\n                    <div dojoAttachPoint="divMonthDay" style="display: -moz-inline-box; display: inline-block" class="display-none">\r\n                        <select dojoType="dijit.form.Select" dojoAttachPoint="cboMonthDay">\r\n                            <option value="1" selected="selected">${lblFirstDay}</option>\r\n                            <option value="2">${lblSecondDay}</option>\r\n                            <option value="3">${lblThirdDay}</option>\r\n                            <option value="4">${lblFourthDay}</option>\r\n                        </select>&nbsp;\r\n                    </div>\r\n                    <div dojoAttachPoint="divDay" style="display: -moz-inline-box; display: inline-block" class="display-none">\r\n                        <select dojoType="dijit.form.Select" dojoAttachPoint="cboDay">\r\n                            <option value="SUN">${lblSunday}</option>\r\n                            <option value="MON" selected="selected">${lblMonday}</option>\r\n                            <option value="TUE">${lblTuesday}</option>\r\n                            <option value="WED">${lblWednesday}</option>\r\n                            <option value="THU">${lblThursday}</option>\r\n                            <option value="FRI">${lblFriday}</option>\r\n                            <option value="SAT">${lblSaturday}</option>\r\n                        </select>&nbsp;\r\n                    </div>\r\n                    <label dojoAttachPoint="lblAtText">${lblAtText}</label>&nbsp;&nbsp;\r\n                    <div dojoAttachPoint="divMinutesPastHour" class="display-none" style="display: -moz-inline-box; display: inline-block">\r\n                        <select dojoType="dijit.form.Select" dojoAttachPoint="cboMinutesPastHour"></select>&nbsp;\r\n                    </div>\r\n                    <label dojoAttachPoint="lblMinutesPastHour" class="display-none">${lblMinutesPastHour}</label>&nbsp;\r\n                    <div dojoAttachPoint="divRunAtTime" style="display: -moz-inline-box; display: inline-block">\r\n                        <div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" dojoAttachPoint="dtRunAtTime" displayDate="false" displayTime="true" label="${lblAtText}" required="true"></div>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr dojoAttachPoint="rowRunFromDate">\r\n                <td>\r\n                    <label style="padding-left: 10px">${lblFromTimeText}</label>&nbsp;\r\n                    <div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" dojoAttachPoint="dtRunFromDate" displayDate="true" label="${lblFromTimeText}" style="width: 180px"></div>&nbsp;\r\n                    <label>${lblToTimeText}</label>&nbsp;\r\n                    <div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" dojoAttachPoint="dtRunToDate" displayDate="true" label="${lblToTimeText}" style="width: 180px"></div>&nbsp;\r\n                </td>\r\n            </tr>\r\n            <tr dojoAttachPoint="rowCronExpression">\r\n                <td>\r\n                    <label style="padding-left: 10px">${lblCronExpressionText}</label>&nbsp;\r\n                    <div data-dojo-type="dijit.form.TextBox" dojoAttachPoint="txtCronExpression" style="width: 375px"></div>&nbsp\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n</div>',"url:Sage/templates/MenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\r\n        <div class="dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}" data-dojo-attach-point="iconNodeSprite"></div>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\r\n\t\trole="presentation"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\r\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</span>\r\n\t</td>\r\n</tr>\r\n',"url:Sage/templates/MenuBarItem.html":'<div class="dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\r\n    <span>\r\n        <img src="${_blankGif}" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\r\n        <div class="dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}" data-dojo-attach-point="iconNodeSprite"></div>\r\n        <span data-dojo-attach-point="containerNode,textDirNode"></span>\r\n    </span>\r\n</div>\r\n',
"url:Sage/MainView/Contact/templates/ContactDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Contact.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccount_Caption || \"Account:\" %}</td>',\r\n                        '<td class=\"DataItem\"><a href=\"Account.aspx?entityid={{%= $.templateData.account_id %}}\">{%= Sage.Utility.htmlEncode($.templateData.accountname) %}</a></td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n] ","url:Sage/MainView/Lead/templates/LeadDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Lead.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svCompany_Caption || \"Company:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountname %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","url:Sage/MainView/Account/templates/AccountDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Account.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svSubType_Caption || \"Sub Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.subtype %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svSubType_Caption || \"Status:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.status %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svDivision_Caption || \"Division:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.division %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svIndustry_Caption || \"Industry:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.industry) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMainPhone_Caption || \"Main phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mainphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTollFree_Caption || \"Toll free:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.tollfree) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","url:Sage/MainView/Contact/templates/ContactUserAssociationEditor.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.dialogTitleText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmContactUserAssociation\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td colspan=\"2\">',\r\n                        '<label>{%= $.associateContactText %}</label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<div>',\r\n                            '<label>{%= $.user_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                         '<div dojoAttachPoint=\"divUserLookupContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"userLookup_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',            \r\n            \r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/IntegrationContract/templates/MatchingOptionsConfig.html":"[\r\n'<div>',\r\n    '<div id=\"{%= $.id %}-Context-container\">',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.matchingHeader %}',\r\n            '<span class=\"boldtext\">{%= $.resourceDisplayName %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.matchingDescription %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:240px\">{%= $.operatorText %}</label>',\r\n    '</div>',\r\n    '<div id=\"{%= $.id %}-Loading-container\">',\r\n        '<br />',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n    '</div>',\r\n//conditions\r\n    '<div style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n//buttons\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').matchingObject.updateMatchProperties();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').destroy();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/IntegrationContract/templates/AdvancedSearchOptions.html":"[\r\n'<div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.searchOptionsHeader %}',\r\n            '<span class=\"boldtext\">{%= $.configOptions.targetAccount %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.searchOptionsText %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:136px\">{%= $.operatorText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:118px\">{%= $.searchText %}</label>',\r\n    '</div>',\r\n    '<div dojoAttachPoint=\"conditionContainer\" style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').refineSearchObject.getSelections();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').hide();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/JobMgr/templates/RunJobDialog.html":'[\r\n    \'<div>\',\r\n        \'<div data-dojo-type="dijit.Dialog" title="{%= $.nlsResources.dlgRunJob_Title %}" dojoAttachPoint="_dialog" dojoAttachEvent="onCancel:_dialog_OnCancel, onShow:_dialog_OnShow" style="width: 525px">\',\r\n            \'<div data-dojo-type="dijit.form.Form">\',\r\n                \'<table cellspacing="10">\',                    \r\n                    \'<tr>\',\r\n                        \'<td style="width:150px">\',\r\n                            \'<label>{%= $.nlsResources.txtJobName_Caption %}:</label>\',\r\n                        \'</td>\',\r\n                        \'<td>\',\r\n                            \'<input type="text" dojoAttachPoint="txtJobName" required="true" dojoType="dijit.form.TextBox" disabled="disabled" style="width:320px" />\',\r\n                        \'</td>\',\r\n                    \'</tr>\',\r\n                    \'<tr>\',\r\n                        \'<td style="width:150px">\',\r\n                            \'<label>{%= $.nlsResources.txtTriggerDescription_Caption %}:</label>\',\r\n                        \'</td>\',\r\n                        \'<td>\',\r\n                            \'<input type="text" dojoAttachPoint="txtTriggerDescription" required="true" dojoType="dijit.form.TextBox" style="width:320px" />\',\r\n                        \'</td>\',\r\n                    \'</tr>\',\r\n                    \'<tr>\',\r\n                        \'<td>\',\r\n                            \'<label>{%= $.nlsResources.cmbScheduleType_Caption %}:</label>\',\r\n                        \'</td>\',\r\n                        \'<td>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="cmbScheduleType" dojoAttachEvent="onChange:_cmbScheduleType_OnChange" style="width:320px" >\',\r\n                                \'<option value="now">{%= $.nlsResources.txtRunNow %}</option>\',\r\n                                \'<option value="scheduled">{%= $.nlsResources.txtScheduledExecution %}</option>\',\r\n                            \'</select>\',\r\n                        \'</td>\',\r\n                    \'</tr>\',\r\n                \'</table>\',\r\n                \'<div data-dojo-type="Sage.UI.JobSchedulingWidget" id="jobSchedulingWidget" data-dojo-attach-point="jobSchedulingWidget"></div>\',\r\n                \'<div dojoType="dijit.layout.TabContainer" dojoAttachPoint="tabsContainer" class="tab-container" style="width:100%; height:250px">\',\r\n                    \'<div dojoType="dijit.layout.ContentPane"  title="{%= $.nlsResources.contentPaneParameters_Caption %}" class="tabContent remove-padding" dojoAttachPoint="contentPaneParameters">\',\r\n                        \'<div id="divGrdParameters" style="height:200px;">\',\r\n                            \'<table data-dojo-type="dojox.grid.DataGrid" dojoAttachPoint="grdJobParameters">\',\r\n                                \'<thead>\',\r\n                                    \'<th field="name" width="100px">{%= $.nlsResources.colName_Caption %}</th>\',\r\n                                    \'<th id="parameterValue" field="defaultValue" width="100px" editable="true">{%= $.nlsResources.colValue_Caption %}</th>\',\r\n                                    \'<th field="description" width="225px">{%= $.nlsResources.colDescription_Caption %}</th>\',\r\n                                \'</thead>\',\r\n                            \'</table>\',\r\n                        \'</div>\',\r\n                    \'</div>\',\r\n                \'</div>\',\r\n                \'<div align="right" style="margin-top:10px">\',\r\n                    \'<div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdOK" dojoAttachEvent="onClick:_cmdOK_OnClick">{%= $.nlsResources.cmdOK_Caption %}</div>\',\r\n                    \'<div data-dojo-type="dijit.form.Button" dojoAttachPoint="cmdCancel" dojoAttachEvent="onClick:_cmdCancel_OnClick" style="margin-left:5px;">{%= $.nlsResources.cmdCancel_Caption %}</div>\',\r\n                \'</div>\',\r\n            \'</div>\',\r\n        \'</div>\',\r\n    \'</div>\'\r\n]',"url:Sage/MainView/EntityMgr/templates/EntityDetailTabManager.html":'[\r\n\'<div class="HundredPercentHeight HundredPercentWidth">\',\r\n\'    <div data-dojo-type="dijit.layout.TabContainer" id="tabContainer" class="HundredPercentHeight HundredPercentWidth">\',\r\n\'        <div data-dojo-type="dijit.layout.ContentPane" id="propertyDetailGridPane" class="HundredPercentHeight HundredPercentWidth">\',\r\n\'        </div>\',\r\n\'        <div data-dojo-type="dijit.layout.ContentPane" id="filterDetailGridPane" class="HundredPercentHeight HundredPercentWidth">\',\r\n\'        </div>\',\r\n\'        <div data-dojo-type="dijit.layout.ContentPane" id="metricDetailGridPane" class="HundredPercentHeight HundredPercentWidth">\',\r\n\'        </div>\',\r\n\'        <div data-dojo-type="dijit.layout.ContentPane" id="relationDetailGridPane" class="HundredPercentHeight HundredPercentWidth">\',\r\n\'        </div>\',\r\n\'    </div>\',\r\n\'</div>\'\r\n]',"url:Sage/MainView/EntityMgr/templates/DetailTabContentGrid.html":'[\r\n\'<div data-dojo-type="dijit.layout.ContentPane" class="HundredPercentHeight HundredPercentWidth">\',\r\n    \'<div data-dojo-attach-point="entityFilter_Grid" class="HundredPercentHeight HundredPercentWidth"></div>\',\r\n\'</div>\'\r\n]',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/AddEditFiltersDialogMain.html":"[\r\n'<div>',\r\n\t'<div data-dojo-type=\"dijit.Dialog\" class=\"OverrideDialogOverflowToHidden FullPageDialogue\" data-dojo-attach-point=\"_dialog\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" data-dojo-attach-point=\"addEditFiltersForm\" class=\"FManagerDialogForm\" >',\r\n            '<div class=\"mainContentContent DialogMainForm\">',\r\n                '<div data-dojo-attach-point=\"_filterNameSection\"></div>',\r\n\t\t        '<table class=\"detailTableContainer formtable HundredPercentWidth\">',\r\n\t\t\t        '<tr data-dojo-attach-point=\"_TypeDropDownSection\">',\r\n\t\t\t\t        '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                                '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblTypeDp\">',\r\n                                '</label>',\r\n\t\t\t\t\t\t    '</div>',\r\n\t\t\t\t\t        '<div class=\"fld dijitInline\" data-dojo-attach-point=\"typeDp\"></div>',\r\n\t\t\t\t        '</td>',\r\n\t\t\t        '</tr>',\r\n\t\t\t        '<tr data-dojo-attach-point=\"_filterDropDownSection\">',\r\n                        '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\"  >',\r\n                                '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblFilterDp\">',\r\n                                '</label>',\r\n                            '</div>',\r\n                             '<div data-dojo-attach-point=\"fieldsContainer\"></div>',\r\n                        '</td>',\r\n\t\t\t        '</tr>',\r\n\t\t        '</table>',\r\n                '<div data-dojo-attach-point=\"_TypeSpecificDetailsSection\">',\r\n                '</div>',\r\n            '</div>',\r\n            '<div>',\r\n\t\t\t\t'<div data-dojo-attach-point=\"divValidationMessage\" class=\"errorText\">',\r\n                     '<span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>',\r\n                 '</div>',\r\n                '<div class=\"lookupButtonWrapper\">',                    \r\n                    '<span data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdSave\" data-dojo-attach-event=\"onClick:_cmdSave_OnClick\"></span>',\r\n                    '<span data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdCancel\" data-dojo-attach-event=\"onClick:_cmdCancel_OnClick\"></span>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n\t'</div>',\r\n'</div>'\r\n ]","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/AddEditRelationshipsDialog.html":"[\r\n'<div>',\r\n\t'<div data-dojo-type=\"dijit.Dialog\"  class=\"OverrideDialogOverflowToHidden\" data-dojo-attach-point=\"_dialog\" style=\"overflow:auto;\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" data-dojo-attach-point=\"addEditRelationshipsForm\">',\r\n            '<div class=\"mainContentContent DialogMainForm\">',\r\n            '<div style=\"padding-left:40px;\">',\r\n                '<table class=\"\">',\r\n                    '<tr data-dojo-attach-point=\"\">',\r\n\t\t\t\t        '<td class=\"\">',\r\n\t\t\t\t\t\t    '<div style=\"padding-bottom:10px;\">',\r\n                                '<label for=\"joinType\" data-dojo-attach-point=\"parent\">Parent Entity and Join Field</label><br />',\r\n                                 '<div style=\"padding-bottom:4px;\" data-dojo-attach-point=\"typeParentTable\"></div>',\r\n                                 '<select required style=\"width:100%; height:240px;\" data-dojo-type=\"dijit/form/MultiSelect\" data-dojo-attach-point=\"parentProperties\"></select>',\r\n\t\t\t\t\t\t    '</div>',\r\n                            '<div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red;\">',\r\n              '</div>',\r\n\t\t\t\t        '</td>',\r\n                        '<td class=\"\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:20px;\">',\r\n                                '<label data-dojo-attach-point=\"cardinality\">Cardinality:</label><br />',\r\n                                 '<div data-dojo-attach-point=\"dpCardinality\"></div>',\r\n\t\t\t\t\t\t    '</div>',\r\n\t\t\t\t        '</td>',\r\n                        '<td class=\"\">',\r\n\t\t\t\t\t\t    '<div style=\"padding-bottom:10px;\">',\r\n                                 '<label for=\"joinType\" data-dojo-attach-point=\"child\">Child Entity and Join Field</label><br />',\r\n                                 '<div style=\"padding-bottom:4px\" data-dojo-attach-point=\"typeChildTable\"></div>',\r\n                                 '<select required style=\"width:100%; height:240px;\" data-dojo-type=\"dijit/form/MultiSelect\" data-dojo-attach-point=\"childProperties\"></select>',\r\n\t\t\t\t\t\t    '</div>',\r\n                            '<div data-dojo-attach-point=\"divValidationMessageChild\" style=\"color:red;\">',\r\n              '</div>',\r\n\t\t\t\t        '</td>',\r\n\t\t\t        '</tr>',\r\n                '</table>',\r\n            '</div>',\r\n    '<div>',\r\n                '<div class=\"lookupButtonWrapper\">',                    \r\n                    '<span data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdSave\" data-dojo-attach-event=\"onClick:_cmdSave_OnClick\"></span>',\r\n                    '<span data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdCancel\" data-dojo-attach-event=\"onClick:_cmdCancel_OnClick\"></span>',\r\n                '</div>',\r\n            '</div>',\r\n            '</div>',\r\n            \r\n        '</div>',\r\n\t'</div>',\r\n'</div>'\r\n ]",
"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/EditRelationshipsDialog.html":'<div>\r\n    <div dojotype="dijit.Dialog" title="" dojoattachpoint="_dialog" dojoattachevent="onHide:_onDlgHide" style="width:60%;">\r\n        <div data-dojo-type="dijit.form.Form" data-dojo-attach-point="EditRelationshipsForm">\r\n            <div class="recur-activity-dialog">\r\n\r\n                <table class="detailTableContainer formtable HundredPercentWidth">\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="">\r\n                                <input type="checkbox" data-dojo-attach-point="IncludeChild"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblIncludeChild">\r\n                                    Include child relationship property in the parent entity <label data-dojo-attach-point="lblParent"></label>\r\n                                </label>\r\n\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblName">\r\n                                    Property Name\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input disabled data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="childName" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                    Display Name\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="childDisplayName" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="" data-dojo-attach-point="lblImport">\r\n                                    Import\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input type="checkbox" data-dojo-attach-point="childCanImport"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="" data-dojo-attach-point="lblMatch">\r\n                                    Match\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input type="checkbox" data-dojo-attach-point="childCanMatch"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label data-dojo-attach-point="lblAudit">\r\n                                    Audited\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input type="checkbox" data-dojo-attach-point="childAudited"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                            </div>\r\n                            <hr />\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblRelationship">\r\n                                    Relationship\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <div data-dojo-attach-point="dpCardinality"></div>\r\n                            </div>\r\n                            <hr />\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <table class="detailTableContainer formtable HundredPercentWidth">\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="">\r\n                                <input type="checkbox" data-dojo-attach-point="IncludeParent"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblIncludeParent">\r\n                                    Include parent relationship property in the child entity <label data-dojo-attach-point="lblChild"></label>\r\n                                </label>\r\n\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblParentName">\r\n                                    Property Name\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input disabled data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="parentName" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="line-height:32px !important;" data-dojo-attach-point="lblParentDisplayName">\r\n                                    Display Name\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="parentDisplayName" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="" data-dojo-attach-point="lblParentImport">\r\n                                    Import\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input type="checkbox" data-dojo-attach-point="parentCanImport"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label style="" data-dojo-attach-point="lblParentMatch">\r\n                                    Match\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input type="checkbox" data-dojo-attach-point="parentCanMatch"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class="FManagerDialogFieldLabel">\r\n                            <div style="padding:0 !important;" class="lbl alignright">\r\n                                <label data-dojo-attach-point="lblParentAudit">\r\n                                    Audited\r\n                                </label>\r\n                            </div>\r\n                            <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                                <input type="checkbox" data-dojo-attach-point="parentAudited"\r\n                                       data-dojo-type="dijit/form/CheckBox" />\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <div class="button-bar alignright">\r\n                    <div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_OK" name="btn_OK" dojoattachpoint="btn_OK" dojoattachevent="onClick:_okClick">OK</div>\r\n                    <div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoattachpoint="btn_Cancel" dojoattachevent="onClick:_cancelClick">Cancel</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',"url:Sage/MainView/Options/templates/OptionsDialog.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.txtOptions %}" dojoattachpoint="_dialog" dojoattachevent="onCancel:_dialog_OnCancel" style="width: 450px">\r\n        <div data-dojo-type="dijit.form.Form" dojoAttachPoint="frmOptions" id="frmOptions" >\r\n            <div style="overflow:auto">\r\n                <div>\r\n                    <table cellspacing="10">\r\n\r\n                        <tr>\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtColumns %}:</label>\r\n                            </td>\r\n                            <td>                                \r\n                                <div style="display:inline-block;"><input type="text" dojoType="Sage.UI.Controls.Numeric" dojoAttachPoint="txtFieldCount" id="txtFieldCount" style="width:25px" /></div>\r\n                                <label>{%= $._nlsResources.txtZero %}</label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="2">\r\n                                <div dojoType="dijit.form.CheckBox" label="{%= $._nlsResources.txtHideOnSelection %}" id="chkHideOnSelection" name="chkHideOnSelection" dojoAttachPoint="chkHideOnSelection" ></div>\r\n                                <label class="checkbox-label" for="chkHideOnSelection">{%= $._nlsResources.txtHideOnSelection %}</label>\r\n                            </td>\r\n                        </tr>                        \r\n                        <tr>\r\n                            <td colspan="2">\r\n                                <div dojoType="dijit.form.CheckBox" label="{%= $._nlsResources.txtStayInDetailViewOnLookup %}" id="chkStayInDetailView" name="chkStayInDetailView" dojoAttachPoint="chkStayInDetailView" ></div>\r\n                                <label class="checkbox-label" for="chkStayInDetailView">{%= $._nlsResources.txtStayInDetailViewOnLookup %}</label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="2">\r\n                                <div dojoType="dijit.form.CheckBox" label="{%= $._nlsResources.txtDisplayExtendedGroupListOnLookup %}" id="chkShowOnLookup" name="chkShowOnLookup" dojoAttachPoint="chkShowOnLookup" ></div>\r\n                                <label class="checkbox-label" for="chkShowOnLookup">{%= $._nlsResources.txtDisplayExtendedGroupListOnLookup %}</label>\r\n                            </td>\r\n                        </tr>\r\n                        \r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">                \r\n                <div data-dojo-type="dijit.form.Button"dojoAttachPoint="cmdOk" dojoAttachEvent="onClick:_cmdOk_OnClick">{%= Sage.Utility.htmlEncode($._nlsResources.cmdOk_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" dojoAttachPoint="cmdCancel" dojoAttachEvent="onClick:_cmdCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Lead/templates/ImportLeadsProgressDisplay.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.importProgressCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\" style=\"width: 450px\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmImportProgress\">',\r\n            '<label dojoAttachPoint=\"lblProcessingLabelContainer\">{%= $.lblPrimaryProgress %}</label>',\r\n            '<div dojoAttachPoint=\"importPrimaryProgressBarContainer\"></div>',\r\n            '<div dojoAttachPoint=\"importSecondaryProgressBarContainer\"></div>',\r\n            '<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" class=\"formtable\">',\r\n                '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalRecords %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_recordCount\" dojoAttachPoint=\"totalRecordCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalRecordsProcessed %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_processedCount\" dojoAttachPoint=\"processedCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalRecordsImported %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_importedCount\" dojoAttachPoint=\"importedCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                 '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalRecordsMerged %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_mergedCount\" dojoAttachPoint=\"mergedCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                 \r\n                '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalDuplicates %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_duplicatesCount\" dojoAttachPoint=\"duplicateCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblDuplicateRate %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<div dojoType=\"Sage.UI.Controls.Numeric\" id=\"{%= $.id %}_duplicateRate\" constraints=\"{ places: 0, type: \\'percent\\' }\" dojoAttachPoint=\"duplicateRate\" readonly=\"readonly\" style=\"width: auto\"></div>',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                 '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalProjectedDuplicates %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_projectedDuplicateCount\" dojoAttachPoint=\"projectedDuplicateCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td class=\"alignright\">',\r\n                        '<label>{%= $.lblTotalErrors %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_errorCount\" dojoAttachPoint=\"errorCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div dojoAttachPoint=\"importHistoryLinkContainer\" class=\"display-none\">',\r\n                '<label>{%= $.lblImportHistoryLinkText %}</label>',\r\n                '<br/>',\r\n                '<label>{%= $.lblImportLinkNumber %}</label>',\r\n                '<a dojoAttachPoint=\"importHistoryLink\"></a>',\r\n            '</div>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancel\">{%= $.btnCancelText %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Close\" dojoAttachPoint=\"btn_Close\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCloseText %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/IntegrationContract/templates/PromoteWidget.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div data-dojo-attach-point="divLoadingMessage">\r\n                <br />\r\n                <label style="padding-left:100px;font-size:16px;font-weight:bold">{%= Sage.Utility.htmlEncode($.pageLoading_Caption) %}</label>\r\n            </div>\r\n            <div>\r\n                <label class="wizardHeaderText">{%= Sage.Utility.htmlEncode($.createLink_Caption) %}</label>\r\n            </div>\r\n            <table id="tblDetails" width="100%" border="0" cellpadding="0" cellspacing="0" style="padding-left:20px">\r\n                <tr>\r\n                    <td>\r\n                        <label>{%= Sage.Utility.htmlEncode($.logicalId_Caption) %}</label>\r\n                    </td>\r\n                    <td>\r\n                        <div data-dojo-attach-point="backOffice_Container" data-dojo-type="dijit.layout.ContentPane"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label>{%= Sage.Utility.htmlEncode($.accountingEntity_Caption) %}</label>\r\n                    </td>\r\n                    <td>\r\n                        <div data-dojo-attach-point="accountingEntity_Container" data-dojo-type="dijit.layout.ContentPane"></div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red" class="display-none">\r\n                <label>{%= Sage.Utility.htmlEncode($.errorRequiredData) %}</label>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnOk_OnClick">{%= Sage.Utility.htmlEncode($.ok_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.cancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/IntegrationContract/templates/PricingAvailabilityWidget.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 500px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div data-dojo-attach-point="divLoadingMessage">\r\n                <br />\r\n                <label style="padding-left:100px;font-size:16px;font-weight:bold">{%= Sage.Utility.htmlEncode($.pageLoading_Caption) %}</label>\r\n            </div>\r\n            <div data-dojo-attach-point="divErrorMessage" class="display-none">\r\n                <br />\r\n                <label data-dojo-attach-point="lblErrorMessage" style="padding-left:10px;font-size:12px;"></label>\r\n            </div>\r\n            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="warehouses_Container"></div>\r\n\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnOK" data-dojo-attach-event="onClick:_btnOk_OnClick">{%= Sage.Utility.htmlEncode($.ok_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.cancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/CountryCodeMapping/templates/CountryAliasConversion.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgCountryAliasConverstion_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 800px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div data-dojo-attach-point="divLoadingMessage">\r\n                <br />\r\n                <label style="padding-left:300px;font-size:16px;font-weight:bold"> {%= Sage.Utility.htmlEncode($.gridLoading_Caption) %}</label>\r\n            </div>\r\n            <div data-dojo-attach-point="countryAliasGrid" style="height:300px"></div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnSave" data-dojo-attach-event="onClick:_btnSave_OnClick">{%= Sage.Utility.htmlEncode($._nlsResources.btnSave_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($._nlsResources.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/TaskPane/User/templates/ContactUserAssociationEditor.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.dialogTitleText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmContactUserAssociation\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td colspan=\"2\">',\r\n                        '<label>{%= $.associateContactText %}</label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<div>',\r\n                            '<label>{%= $.user_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                         '<div dojoAttachPoint=\"divContactLookupContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"contactLookup_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',            \r\n            \r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n",
"url:Sage/MainView/CopyUserProfile/templates/CopyUserProfile.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlg_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick"  style="width: 400px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div style="margin: 10px;">\r\n                <div>{%= $._nlsResources.dlg_Instructions %}</div>\r\n                <br />\r\n                <table width="100%">\r\n                    <tr>\r\n                        <td>\r\n                            <table>\r\n                                <tr>\r\n                                    <td>\r\n                                        {%= $._nlsResources.rad_SelectionLabel %}\r\n                                    </td>\r\n                                    <td>\r\n                                        <input id="radioUser" name="userSource" type="radio" data-dojo-attach-point="radUser" data-dojo-type="dijit.form.RadioButton" value="csv" />{%= Sage.Utility.htmlEncode($._nlsResources.rad_UserBtn) %}\r\n                                    </td>\r\n                                    <td>\r\n                                        <input id="radioTemplate" name="userSource" type="radio" data-dojo-attach-point="radTemplate" data-dojo-attach-event="onChange:_radUser_OnChange" data-dojo-type="dijit.form.RadioButton" value="tab" />{%= Sage.Utility.htmlEncode($._nlsResources.rad_TemplateBtn) %}\r\n                                    </td>\r\n                                </tr>\r\n                            </table>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <table>\r\n                                <tr data-dojo-attach-point="userControlPoint">\r\n                                    <td>\r\n                                        <div>\r\n                                            <table>\r\n                                                <tr>\r\n                                                    <td>\r\n                                                        <label>{%= $._nlsResources.user_LookupLabel %}</label>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="user_Container" allowclearingresult="false" style="width:200px"></div>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </table>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr data-dojo-attach-point="templateControlPoint">\r\n                                    <td>\r\n                                        <div>\r\n                                            <table>\r\n                                                <tr>\r\n                                                    <td>\r\n                                                        <label>{%= $._nlsResources.template_LookupLabel %}</label>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="template_Container" allowclearingresult="false" style="width:200px"></div>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </table>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            </table>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <table class="formtable">\r\n                                <tr>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkGeneral" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkGeneralLabel %}</label>\r\n                                    </td>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkCalendar" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkCalendarLabel %}</label>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkEmployee" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkEmployeeLabel %}</label>\r\n                                    </td>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkClient" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkClientLabel %}</label>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkSecurity" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkSecurityLabel %}</label>\r\n                                    </td>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkService" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkServiceLabel %}</label>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkTeams" checked="checked" />\r\n                                        <label> {%= $._nlsResources.chkTeamsLabel %}</label>\r\n                                    </td>\r\n                                </tr>\r\n                            </table>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <div align="right" style="margin-top:10px">\r\n                    <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnOk" data-dojo-attach-event="onClick:_btnOk_OnClick">{%= Sage.Utility.htmlEncode($.btnOK_Caption) %}</div>\r\n                    <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/SelectFile.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgSelectFile_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 625px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <input type="file" data-dojo-attach-point="fileInputBtn" style="display:none;" />\r\n            <div class="crystalParameterContainer">\r\n                <table cellspacing="10" width="100%">\r\n                    <colgroup>\r\n                        <col style="width:2%"/>\r\n                        <col style="width:8%" />\r\n                        <col style="width:90%" />\r\n                    </colgroup>\r\n                    <tr>\r\n                        <td colspan="3">\r\n                            <label class="wizardHeaderText">{%= $._nlsResources.txtSelectFile %}</label>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <span data-dojo-attach-point="errorNoUploadFile" class="display-none" style="color:red">*</span>\r\n                        </td>\r\n                        <td colspan="2">\r\n                            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnUploadFile" data-dojo-attach-event="onClick:_btnUploadFile_OnClick" >{%= Sage.Utility.htmlEncode($._nlsResources.btnUploadFile_Caption) %}</div>\r\n                            <input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="txtFakeUploadFile" readonly="readonly" value="{%= Sage.Utility.htmlEncode($._nlsResources.txtUploadFile_Caption) %}" style="width: 65%" />\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td colspan="2"></td>\r\n                        <td>\r\n                            <label data-dojo-attach-point="lblFileUpload"></label>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br/>\r\n            <div class="crystalParameterContainer">\r\n                <table cellspacing="10">\r\n                    <tr>\r\n                        <td>\r\n                            <label>{%= $.lstTemplate_Caption %}</label>\r\n                        </td>\r\n                        <td>\r\n                            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="templates_Container"></div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br/>\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/DefineDelimiter.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgDefineDelimiter_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 825px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div style="overflow:auto">\r\n                <label class="wizardHeaderText">{%= $._nlsResources.txtHeader_Caption %}</label>\r\n            </div>\r\n            <br/>\r\n            <div style="padding-left: 5px">\r\n                <label>{%= $._nlsResources.txtChooseDelimiter %}</label>\r\n                <div>\r\n                    <input data-dojo-type="dijit.form.RadioButton" type="radio" name="delimiterOption" value="\\t" data-dojo-attach-point="rdoTabOption" data-dojo-attach-event="onClick:_rdoOption_OnClick" /> {%= $._nlsResources.rdoTabOption %}\r\n                    <input data-dojo-type="dijit.form.RadioButton" type="radio" name="delimiterOption" value=";" data-dojo-attach-point="rdoSemiColonOption" data-dojo-attach-event="onClick:_rdoOption_OnClick" /> {%= $._nlsResources.rdoSemicolonOption %}\r\n                    <input data-dojo-type="dijit.form.RadioButton" type="radio" name="delimiterOption" value="," data-dojo-attach-point="rdoCommaOption" data-dojo-attach-event="onClick:_rdoOption_OnClick" /> {%= $._nlsResources.rdoCommaOption %}\r\n                    <input data-dojo-type="dijit.form.RadioButton" type="radio" name="delimiterOption" value=" " data-dojo-attach-point="rdoSpaceOption" data-dojo-attach-event="onClick:_rdoOption_OnClick" /> {%= $._nlsResources.rdoSpaceOption %}\r\n                    <input data-dojo-type="dijit.form.RadioButton" type="radio" name="delimiterOption" value="otherOption" data-dojo-attach-point="rdoOtherOption" data-dojo-attach-event="onClick:_rdoOption_OnClick" /> {%= $._nlsResources.rdoOtherOption %}\r\n                    <input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="txtOtherOption" style="width:40px" maxlength="1" disabled="disabled" data-dojo-attach-event="onChange:_txtOtherOption_OnChange" />\r\n                </div>\r\n                <br/>\r\n                <div>\r\n                    <label> {%= $._nlsResources.txtQualifier %}</label>\r\n                    <select data-dojo-type="dijit.form.Select" data-dojo-attach-point="cmbQualifiers" sortByLabel="false" style="width:80px">\r\n                        <option value="\\x000"></option>\r\n                        <option value="&quot;">"</option>\r\n                        <option value="\'">\'</option>\r\n                        <option value="None" selected="selected">{%= Sage.Utility.htmlEncode($.emptyListItem_Caption) %}</option>\r\n                    </select>\r\n                </div>\r\n                <br/>\r\n                <div>\r\n                    <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkFirstRowFieldNames" data-dojo-attach-event="onChange:_chkFirstRowFieldNames_OnChange" checked="true" />\r\n                    <label> {%= $._nlsResources.chkFirstRowFieldNames %}</label>\r\n                </div>\r\n                <br/>\r\n                <label data-dojo-attach-point="lblPreviewData"></label>\r\n                <div data-dojo-attach-point="divLoadingMessage">\r\n                    <br />\r\n                    <label style="padding-left:300px;font-size:16px;font-weight:bold"> {%= Sage.Utility.htmlEncode($.gridLoading_Caption) %}</label>\r\n                </div>\r\n                <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="previewGrid_Container"></div>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/MapFields.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgMapFields_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 650px;height:500px">\r\n        <div style="overflow:auto">\r\n            <label class="wizardHeaderText" data-dojo-attach-point="lblMatchedFields"></label>\r\n        </div>\r\n        <br/>\r\n        <div style="overflow:auto" data-dojo-attach-point="divRequiredFields">\r\n            <label style="color: red;font-size: 13px" data-dojo-attach-point="lblRequiredFields"></label>\r\n        </div>\r\n        <br/>\r\n        <div style="padding-left: 5px">\r\n            <div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnUnMapped" data-dojo-attach-event="onClick:btnUnMapped_OnClick" ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnMapped" data-dojo-attach-event="onClick:btnMapped_OnClick" ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnAll" data-dojo-attach-event="onClick:btnAll_OnClick" ></div>\r\n            </div>\r\n            <div data-dojo-attach-point="mappingsGrid" class="grid-defaultHeight"></div>\r\n        </div>\r\n        <br />\r\n        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n        </div>\r\n        <div align="right" style="margin-top:10px">\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/ManageImportOptions.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgManageImportOptions_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 625px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div data-dojo-attach-point="divImportType" class="crystalParameterContainer display-none">\r\n                <table cellspacing="10">\r\n                    <tr>\r\n                        <td>\r\n                            <label class="wizardHeaderText">{%= $._nlsResources.lstImportType_Caption %}</label>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="importType_Container">\r\n                                <select data-dojo-type="dijit.form.Select" data-dojo-attach-point="cmbImportTypes" sortByLabel="false" style="width:200px" data-dojo-attach-event="onChange:_cmbImportTypes_OnChange">\r\n                                    <option value="insert" selected="selected">{%= $._nlsResources.lstImportOption_Insert %}</option>\r\n                                    <option value="update">{%= $._nlsResources.lstImportOption_Update %}</option>\r\n                                    <option value="insertAndUpdate">{%= $._nlsResources.lstImportOption_InsertUpdate %}</option>\r\n                                </select>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <label data-dojo-attach-point="lblImportOption"></label>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br/>   \r\n            <div data-dojo-attach-point="divAssociations" class="crystalParameterContainer">\r\n                <label class="wizardHeaderText">{%= $._nlsResources.txtMatchHeader_Caption %}</label>\r\n                <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="associations_Container" style="padding-left:10px"></div>\r\n            </div>\r\n            <br/>\r\n            <div class="crystalParameterContainer">\r\n                <label class="wizardHeaderText">{%= $._nlsResources.txtOptionsHeader_Caption %}</label>\r\n                <table cellspacing="10">\r\n                    <tr data-dojo-attach-point="rowDefaultOwner">\r\n                        <td>\r\n                            <label>{%= $._nlsResources.defaultOwner_Caption %}</label>\r\n                        </td>\r\n                        <td>\r\n                            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="defaultOwner_Container"\r\n                                 allowclearingresult="false" style="width:200px"></div>\r\n                            <span data-dojo-attach-point="errorNoOwner" class="display-none" style="color:red">*</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td colspan="2">\r\n                            <div data-dojo-attach-point="chkAccountNameControlNode">\r\n                                <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkAccountName" data-dojo-attach-event="onChange:_chkAccountName_OnChange" checked="checked" />\r\n                                <label> {%= $._nlsResources.chkAccountName %}</label>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point="rowCreateAdHoc">\r\n                        <td colspan="2">\r\n                            <input data-dojo-type="dijit.form.RadioButton" type="radio" name="adHocGroupOption" value="createAdHoc"\r\n                                   data-dojo-attach-point="rdoCreateAdHoc" /> {%= $._nlsResources.createAdHoc_Caption %}\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point="rowAdHocGroupName">\r\n                        <td colspan="2" style="padding-left: 20px">\r\n                            <input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="txtAdHocGroupName" style="width:200px"  />\r\n                            <span data-dojo-attach-point="errorNoAddHocGroupName" class="display-none" style="color:red">*</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point="rowAdHocGroupOption">\r\n                        <td colspan="2">\r\n                            <input data-dojo-type="dijit.form.RadioButton" type="radio" name="adHocGroupOption" value="existingAdHoc"\r\n                                   data-dojo-attach-point="rdoExistingAdHoc" /> {%= $._nlsResources.existingAdHoc_Caption %}\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point="rowAdHocGroups">\r\n                        <td colspan="2" style="padding-left: 12px">\r\n                            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="adHocGroups_Container"></div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/AddActions.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgAddActions_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 625px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div style="overflow:auto">\r\n                <div data-dojo-attach-point="paramsContainerDiv" id="paramsContainerDiv" style="height:400px; overflow:auto"></div>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/Review.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgMapFields_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 625px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div class="crystalParameterContainer">\r\n                <label class="wizardHeaderText">{%= $._nlsResources.txtHeader_Caption %}</label>\r\n                <br/>\r\n                <div style="padding-left: 5px">\r\n                    <label data-dojo-attach-point="previewFileName"></label>\r\n                </div>\r\n                <div style="padding-left: 5px">\r\n                    <label data-dojo-attach-point="previewImportDataMode"></label>\r\n                </div>\r\n                <div style="padding-left: 5px">\r\n                    <label data-dojo-attach-point="previewRecordCount"></label>\r\n                </div>\r\n                <div style="padding-left: 5px">\r\n                    <label data-dojo-attach-point="previewAdHocGroup"></label>\r\n                </div>\r\n            </div>\r\n            <br/>\r\n            <div class="crystalParameterContainer">\r\n                <table cellspacing="10">\r\n                    <tr>\r\n                        <td>\r\n                            <label>{%= $.lstTemplate_Caption %}</label>\r\n                        </td>\r\n                        <td>\r\n                            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="templates_Container"></div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <div>\r\n                    <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnSaveTemplate" data-dojo-attach-event="onClick:_btnSaveTemplate_OnClick" >{%= Sage.Utility.htmlEncode($._nlsResources.btnSaveTemplate_Caption) %}</div>\r\n                    <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnSaveAsTemplate" data-dojo-attach-event="onClick:_btnSaveAsTemplate_OnClick" >{%= Sage.Utility.htmlEncode($._nlsResources.btnSaveAsTemplate_Caption) %}</div>\r\n                </div>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnFinish" data-dojo-attach-event="onClick:_btnFinish_OnClick">{%= Sage.Utility.htmlEncode($.btnFinish_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Import/templates/ManageImportTemplate.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $._nlsResources.dlgManageImportTemplate_Title %}" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="width: 800px">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <table cellspacing="10">\r\n                <tr>\r\n                    <td>\r\n                        <label>{%= $._nlsResources.txtDescription_Caption %}</label>\r\n                    </td>\r\n                    <td>\r\n                        <input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="txtTemplateDescription" style="width:200px" />\r\n                        <span data-dojo-attach-point="errorInvalidDescription" class="display-none" style="color:red">*</span>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label>{%= $._nlsResources.txtImportTemplates_Caption %}</label>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <div data-dojo-attach-point="divLoadingMessage">\r\n                <br />\r\n                <label style="padding-left:300px;font-size:16px;font-weight:bold"> {%= Sage.Utility.htmlEncode($.gridLoading_Caption) %}</label>\r\n            </div>\r\n            <div data-dojo-attach-point="templatesGrid"></div>\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnSave_OnClick" >{%= Sage.Utility.htmlEncode($._nlsResources.btnSave_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnClose_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',
"url:Sage/UI/templates/BulkUpdateWidget.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="{%= $.dlgBulkActionUpdate_Title %}" data-dojo-attach-point="_dialog" class="bulkUpdateWidgetDialog-outer-width" data-dojo-attach-event="onCancel:_btnCancel_OnClick">\r\n        <div data-dojo-type="dijit.form.Form">\r\n            <div style="overflow:auto">\r\n                <label class="wizardHeaderText">{%= Sage.Utility.htmlEncode($.header_Caption) %}</label>\r\n            </div>\r\n            <div data-dojo-attach-point="divLoadingMessage">\r\n                <br />\r\n                <label style="padding-left:100px;font-size:16px;font-weight:bold"> {%= Sage.Utility.htmlEncode($.pageLoading_Caption) %}</label>\r\n            </div>\r\n            <div data-dojo-attach-point="propertyRowContainer" data-dojo-type="dijit.layout.ContentPane"></div>\r\n\x3c!--            <input data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="chkScheduleJob" data-dojo-attach-event="onChange:_chkScheduleJob_OnChange" />\r\n            <label>{%= $.chkScheduleJob_Caption %}</label>--\x3e\r\n            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="jobScheduler_Container" style="padding-left:50px"></div>\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="margin-top:10px">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnOk_OnClick">{%= Sage.Utility.htmlEncode($.btnOK_Caption) %}</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/Opportunity/templates/OpportunityStatistics.html":" [\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id%}_dlgOpportunityStatistics\" title=\"{%= $.opportunityStatistics_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n            '<div dojoAttachPoint=\"loadingContainer\">',\r\n                '<br />',\r\n                '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingMessge %}</label>',\r\n                '<br />',\r\n                '<br />',\r\n            '</div>',\r\n            '<table cellspacing=\"20\" dojoAttachPoint=\"statisticsContentsContainer\" class=\"display-none\">',\r\n                '<tr>',\r\n                    '<td >',\r\n                        '<label>{%= $.opportunityCount %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"opportunityCount\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.salesPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotential\" dojoAttachPoint=\"salesPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotentialAverage\" dojoAttachPoint=\"salesPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.weightedPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotential\" dojoAttachPoint=\"weightedPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotentialAverage\" dojoAttachPoint=\"weightedPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageCloseProbability %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoType=\"Sage.UI.Controls.Numeric\" constraints=\"{ places: 2, maxPlaces: 2, type: \\'percent\\' }\" dojoAttachPoint=\"closeProbability_Container\" readonly=\"readonly\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.actualAmountTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmount\" dojoAttachPoint=\"actualAmountTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmountAverage\" dojoAttachPoint=\"actualAmountAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageDaysOpen %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"daysOpen_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.rangeEstClose %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"rangeEstClose_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar alignright\">',\r\n                '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" type=\"button\" dojoAttachEvent=\"onClick:_close\">{%= $.btnClose_Caption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]","url:Sage/UI/Columns/templates/DndCell.html":'<div>\r\n    <div data-dojo-type="dojo.dnd.Source" dojoAttachPoint="sourceNode" copyOnly="true" accept="">\r\n        <div class="dojoDndItem" dojoAttachPoint="dndItem"></div>\r\n    </div>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/Address.html":'<div class="address-container" id="{%= $.clientId %}">\r\n    \x3c!--\r\n    -- IMPORTANT: Comments in a widget template must be placed inside the root node.\r\n    Simplate template\r\n    https://github.com/mmorton/simplate\r\n    https://github.com/mmorton/simplate/blob/master/demo/index.html\r\n    Basic formatting example: {%= $.id %}\r\n    --\x3e\r\n    <textarea id="{%= $.clientId %}_displayText1" class="address-textarea" style="height:{%= $.height %};"\r\n              data-dojo-type="Sage.UI.Controls.SimpleTextarea" textareaclass="{%= $.styleSchemaClass %}" readonly="readonly" dragrestriction="true" tabindex="{%= $.tabIndex %}"\r\n              {% if ($.enabled && !$.readonly) { %}\r\n              data-dojo-attach-event="onDblClick: showDialog, ondijitclick: showDialog"\r\n              {% } %}\r\n              slxchangehook="true">{%= $.displayValue %}</textarea>\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n    <img alt="{%= $.imageData.imageEditAltText %}" data-dojo-attach-event="ondijitclick: showDialog" class="address-edit-button"\r\n         src="{%= $.imageData.imageEditUrl %}" title="{%= $.imageData.imageEditToolTip %}" id="{%= $.clientId %}-Button"\r\n         tabindex="{%= $.tabIndex %}" />\r\n    {% } %}\r\n    {% if ($.enabled && $.showButton) { %}\r\n    <img alt="{%= $.imageData.imageMapQuestAltText %}" data-dojo-attach-event="ondijitclick: showMap" class="address-map-button"\r\n         src="{%= $.imageData.imageMapQuestUrl %}" title="{%= $.imageData.imageMapQuestToolTip %}" id="{%= $.clientId %}-MapQuest"\r\n         tabindex="{%= $.tabIndex %}" />\r\n    {% } %}\r\n</div>',"url:Sage/UI/Controls/templates/AddressEdit.html":'\x3c!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n--\x3e\r\n<div>\r\n        <table style="width:100%;height:100%;">\r\n                {% for (var i = 0; i < $.fields.length; i++) { %}\r\n                {% if ($.fields[i].visible) { %}\r\n                    <tr>\r\n                        <td><label>{%= $.fields[i].fieldLabel %}</label></td>\r\n                        <td style="width: 150px;">\r\n                            {% if ($.fields[i].xtype === \'picklistcombo\') { %}\r\n                            <select data-dojo-type="Sage.UI.Controls.DropDownSelectPickList"\r\n                                dojoAttachPoint="_valueBox"\r\n                                pickListName="{%= $.fields[i].pickList.pickListName %}"\r\n                                storeMode="text"\r\n                                style="width: 100%;"\r\n                                value="{%= $.fields[i].value %}"\r\n                                itemMustExist="{%= $.fields[i].pickList.itemMustExist %}"\r\n                                canEditText="{%= $.fields[i].pickList.canEditText %}"\r\n                                required="{%= $.fields[i].pickList.required %}"\r\n                                sort="{%= $.fields[i].pickList.sort %}"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === \'checkbox\') { %}\r\n                                <input data-dojo-type="Sage.UI.Controls.CheckBox"\r\n                                       checked="{%= $.fields[i].value %}"\r\n                                       disabled="{%= $.fields[i].disabled %}"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === \'textfield\') { %}\r\n                                <input data-dojo-type="Sage.UI.Controls.TextBox"\r\n                                style="width: 100%;" type="text"\r\n                                value="{%= $.fields[i].value %}"\r\n                           {% } %}\r\n                                id="{%= $.id %}-{%= $.fields[i].name %}"\r\n                                name="{%= $.fields[i].formClientId %}"\r\n                                shouldPublishMarkDirty="false"\r\n                                onChange="dijit.byId(\'{%= $.id %}\').editorChange();"\r\n                                textAlign="{%= $.fields[i].textAlign %}" data-dojo-attach-point="focusNode"\r\n                                maxLength="{%= $.fields[i].maxLength %}" />\r\n                        </td>\r\n                   </tr>\r\n                {% } %}          \r\n                {% } %}            \r\n        </table>                    \r\n        <div class="button-bar alignright" style="clear: both">\r\n            <button id="{%= $.id %}-OKButton" data-dojo-type="dijit.form.Button" type="button" onClick="dijit.byId(\'{%= $.id %}\')._okClicked();">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id="{%= $.id %}-CancelButton" data-dojo-type="dijit.form.Button" type="button" onClick="dijit.byId(\'{%= $.id %}\')._cancelClicked();">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>',"url:Sage/UI/Controls/templates/CopyToClipboard.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" dojoAttachPoint="dialogNode">\r\n        \r\n        <span>${helpText}</span>\r\n        <div style="width: 550px; height: 400px;">\r\n            <div data-dojo-type="dijit.layout.TabContainer" dojoAttachPoint="tabNode" style="width: 100%; height: 100%;">\r\n                <div data-dojo-type="dijit.layout.ContentPane" title="${textTab}">\r\n                    <div dojoAttachPoint="contentNode"></div>\r\n                </div>\r\n            \r\n                <div data-dojo-type="dijit.layout.ContentPane" title="${sourceTab}">\r\n                    <textarea dojoAttachPoint="textNode" data-dojo-type="dijit.form.SimpleTextarea" style="width: 100%; height: 95%;"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n        <div style="float:right;padding:8px 0px 8px 8px;">\r\n            <button data-dojo-type="dijit.form.Button" type="submit" dojoAttachEvent="onClick:_closeClicked">\r\n                ${closeText}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/MultiSelectPickList.html":'<div>\r\n    <input id="${id}-TextBox" data-dojo-type="dijit.form.ValidationTextBox" data-dojo-attach-point="textNode" data-dojo-attach-event="onBlur: _onTextBlur" tabindex="${tabIndex}"/>\r\n    <div id="${id}-Button" data-dojo-type="dijit.form.DropDownButton" data-dojo-attach-point="dropDownButtonNode">\r\n        <span></span>\r\n        <div class="multiSelectPickListDialog" id="${id}-ToolTipDialog" data-dojo-type="dijit.TooltipDialog" data-dojo-attach-point="tooltipDialogNode" data-dojo-attach-event="onClose: _onTooltipClose, onShow: _onTooltipShow">\r\n            <div data-dojo-attach-point="tooltipContainer" style="height:200px; width: 200px; overflow-y:auto;">\r\n            \r\n            </div>\r\n            \r\n            <div style="width: 100%; text-align:right">\r\n                <p>\r\n                    <button id="${id}-OKButton" data-dojo-type="dijit.form.Button" type="submit" tabindex="${tabIndex}">${okText}</button>\r\n                <p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/Name.html":'<div class="person" slxcompositecontrol="true" id="{%= $.id %}" ><input id="{%= $.id %}-TextBox" value="{%= $.nameDesc %}"\r\n    data-dojo-type="Sage.UI.Controls.TextBox" name="{%= $.name %}" required="{%= $.required %}" readonly="{%= $.readonly %}" dojoAttachPoint="focusNode"  data-dojo-attach-event="onChange:textBoxOnChange, onDblClick: showDialog" data-dojo-props="textWithIcons: {%= $.buttonVisible %}" />\r\n    {% if ($.buttonVisible) { %}\r\n    <img alt="{%= $.buttonToolTip %}"  data-dojo-attach-event="ondijitclick: showDialog"  tabindex="{%= $.tabIndex %}"     \r\n    style="padding-left:0;cursor: pointer; vertical-align: left;" \r\n    src="{%= $.buttonImageUrl %}" title="{%= $.buttonToolTip %}" id="{%= $.id %}-Button" />\r\n    {% } %}\r\n\x3c!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n--\x3e\r\n</div>',"url:Sage/UI/Controls/templates/PersonName.html":'\x3c!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n--\x3e\r\n<div>\r\n        <table width="100%">\r\n            <tr>\r\n                <td><label>{%= $.prefixText %}</label></td>\r\n                <td>\r\n                    <select id="{%= $.id %}-Prefix" data-dojo-type="Sage.UI.Controls.DropDownSelectPickList" \r\n                    dojoAttachPoint="_valueBox"\r\n                    pickListName="Name Prefix"\r\n                    storeMode="text"\r\n                    noDataLoad="false"\r\n                    useCache="false"\r\n                    boundLanguage="{%= $.prefixLanguage %}"\r\n                    filterByLanguage="{%= $.prefixLanguageFilters %}"\r\n                    name="{%= $.NamePrefix %}" \r\n                    style="display: inline-block"\r\n                    shouldPublishMarkDirty="false" />\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameFirstText %}</label></td>\r\n                <td>\r\n                    <input id="{%= $.id %}-First" data-dojo-type="Sage.UI.Controls.TextBox"\r\n                    style="width:inherit;"\r\n                    textAlign="{%= $.textAlign %}"\r\n                    name="{%= $.NameFirst %}" type="text" data-dojo-attach-point="focusNode"\r\n                    shouldPublishMarkDirty="false">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameMiddleText %}</label></td>\r\n                <td>\r\n                    <input id="{%= $.id %}-Middle" data-dojo-type="Sage.UI.Controls.TextBox"\r\n                    style="width:inherit;"\r\n                    textAlign="{%= $.textAlign %}"\r\n                    name="{%= $.NameMiddle %}" type="text" data-dojo-attach-point="focusNode"\r\n                    shouldPublishMarkDirty="false">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameLastText %}</label></td>\r\n                <td>\r\n                    <input id="{%= $.id %}-Last" data-dojo-type="Sage.UI.Controls.TextBox"\r\n                    style="width:inherit;"\r\n                    textAlign="{%= $.textAlign %}"\r\n                    name="{%= $.NameLast %}" type="text" data-dojo-attach-point="focusNode"\r\n                    shouldPublishMarkDirty="false">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.suffixText %}</label></td>\r\n                <td>\r\n                    <select id="{%= $.id %}-Suffix" data-dojo-type="Sage.UI.Controls.DropDownSelectPickList"\r\n                    dojoAttachPoint="_valueBox"\r\n                    pickListName="Name Suffix"\r\n                    storeMode="text"\r\n                    noDataLoad="false"\r\n                    useCache="false"\r\n                    boundLanguage="{%= $.suffixLanguage %}"\r\n                    filterByLanguage="{%= $.suffixLanguageFilters %}"\r\n                    name="{%= $.NameSuffix %}"\r\n                    style="display: inline-block"\r\n                    shouldPublishMarkDirty="false" />\r\n                </td>\r\n            </tr>\r\n        </table>                    \r\n        <div class="button-bar alignright" style="clear: both">\r\n            <button id="{%= $.id %}-OKButton" data-dojo-type="dijit.form.Button" type="submit" onClick="dijit.byId(\'{%= $.id %}\')._okClicked();">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id="{%= $.id %}-CancelButton" data-dojo-type="dijit.form.Button" type="button" onClick="dijit.byId(\'{%= $.id %}\')._cancelClicked();">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/PickListAsText.html":'<div>\r\n    <span id="${id}-Span" data-dojo-attach-point="textSpan"></span>\r\n</div>\r\n',"url:Sage/UI/templates/ScrollingTabController.html":'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_menuBtn"\r\n\t\t data-dojo-props="containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point="_menuBtn" showLabel="false" title="">&#9660;</div>\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_leftBtn"\r\n\t\t data-dojo-props="iconClass:\'fa fa-chevron-left\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point="_leftBtn" data-dojo-attach-event="onClick: doSlideLeft">&#9664;</div>\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_rightBtn"\r\n\t\t data-dojo-props="iconClass:\'fa fa-chevron-right\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point="_rightBtn" data-dojo-attach-event="onClick: doSlideRight">&#9654;</div>\r\n\t<div class=\'dijitTabListWrapper\' data-dojo-attach-point=\'tablistWrapper\'>\r\n\t\t<div role=\'tablist\' data-dojo-attach-event=\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point=\'containerNode\' class=\'nowrapTabStrip\'></div>\r\n\t</div>\r\n</div>',"url:Sage/UI/Filters/templates/EditFilterItems.html":'<div>\r\n    <div class="filter-items-dialog" data-dojo-type="dijit.Dialog" data-dojo-props="title:\'${dialogTitle}\'" data-dojo-attach-point="dialogNode">\r\n        <div class="filter-items-search">\r\n            <label>${findItemText}</label> <input data-dojo-attach-point="textFind" data-dojo-type="dijit.form.TextBox" />\r\n            <span data-dojo-attach-point="buttonFind" title="${findText}" data-dojo-type="Sage.UI.ImageButton" data-dojo-props="imageClass: \'icon_Find_16x16\'" data-dojo-attach-event="onClick:_onFindClick"></span>&nbsp;\r\n\t\t\t<span data-dojo-attach-point="buttonClear" title="${clearText}" data-dojo-type="dijit.form.Button" data-dojo-attach-event="onClick:_onClearClick">${clearText}</span>\r\n        </div>\r\n        <div class="filter-clear-all">\r\n            <input data-dojo-attach-point="checkAll" data-dojo-type="dijit.form.CheckBox" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class="filter-items-dialog-content" data-dojo-attach-point="contentNode">\r\n        </div>\r\n        <div class="button-bar alignright">\r\n            <button data-dojo-attach-point="buttonOK" data-dojo-attach-event="onClick:_onOKClick" data-dojo-type="dijit.form.Button">${okText}</button>\r\n            <button data-dojo-attach-point="buttonCancel" data-dojo-attach-event="onClick:_onCancelClick" data-dojo-type="dijit.form.Button">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/UI/Filters/templates/EditFilters.html":'<div>\r\n    <div class="filter-dialog" data-dojo-type="dijit.Dialog" data-dojo-props="title:\'${dialogTitle}\'" data-dojo-attach-point="dialogNode">\r\n        <div class="filter-clear-all">\r\n            <input data-dojo-attach-point="checkAll" data-dojo-type="dijit.form.CheckBox" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class="filter-dialog-content" data-dojo-attach-point="contentNode">\r\n            \r\n        </div>\r\n        \r\n        <div class="button-bar alignright">\r\n            <button data-dojo-attach-point="buttonOK" data-dojo-attach-event="onClick:_onOKClick" data-dojo-type="dijit.form.Button">${okText}</button>\r\n            <button data-dojo-attach-point="buttonCancel" data-dojo-attach-event="onClick:_onCancelClick" data-dojo-type="dijit.form.Button">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/templates/ToggleButton.html":'<span class="dijit dijitReset dijitInline" role="presentation"\r\t><span class="dijitReset dijitInline dijitButtonNode"\r\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\r\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\t\t\trole="button" aria-labelledby="${id}_label"\r\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\r\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\t\t\t\tid="${id}_label"\r\t\t\t\tdata-dojo-attach-point="containerNode"\r\t\t\t></span\r\t\t></span\r\t></span\r\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\r/></span>\r',"url:Sage/templates/SpeedSearch.html":'<span>\r    \x3c!-- the textbox --\x3e\r    <input type="text" id="txt_ss" />\r    \x3c!--the image button--\x3e\r    <button id=\'ss-btn-image\' type="button" style="font-size:10px"></button>\r    <button id=\'ss-btn-toggle\' type="button" style="font-size:10px"></button>\r</span>\r',"url:Sage/UI/templates/EditCalendarUsers.html":'<div>\r\n    <div class="filter-items-dialog" data-dojo-type="dijit.Dialog"  data-dojo-attach-point="dialogNode" >\r\n        <div class="filter-items-search" style="border-bottom: 1px solid #cccccc;">\r\n            <label>${findItemText}</label> <input data-dojo-attach-point="textFind" data-dojo-type="dijit.form.TextBox" />\r\n            <span data-dojo-attach-point="buttonFind" title="${findText}" data-dojo-type="Sage.UI.ImageButton" data-dojo-props="imageClass: \'icon_Find_16x16\'" data-dojo-attach-event="onClick:_onFindClick"></span>&nbsp;\r\n\t\t\t<span data-dojo-attach-point="buttonClear" title="${clearText}" data-dojo-type="dijit.form.Button" data-dojo-attach-event="onClick:_onClearClick">${clearText}</span>\r\n        </div>     \r\n        <div class="filter-items-dialog-content" data-dojo-attach-point="contentNode" style="height:238px;">\r\n        </div>\r\n        <div class="button-bar alignright">\r\n            <button data-dojo-attach-point="buttonOK" data-dojo-attach-event="onClick:_onOKClick" data-dojo-type="dijit.form.Button">${okText}</button>\r\n            <button data-dojo-attach-point="buttonCancel" data-dojo-attach-event="onClick:_onCancelClick" data-dojo-type="dijit.form.Button">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>',"*now":function(a){a(['dojo/i18n!*preload*Sage/nls/Sage*["ar","ca","cs","da","de-de","el","en-au","en-ca","en-gb","en-us","es-es","fi","fr-ch","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh","zh-cn","zh-hant","zh-hans","zh-hk","zh-tw","af-za","sq-al","gsw-fr","am-et","ar-dz","ar-bh","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ae","ar-ye","hy-am","as-in","az-cyrl-az","az-latn-az","bn-bd","bn-in","ba-ru","eu-es","be-by","bs-cyrl-ba","bs-latn-ba","br-fr","bg-bg","ca-es","zh-cn","zh-sg","zh-hk","zh-mo","zh-tw","co-fr","crm-en-us-de-ch","hr-hr","hr-ba","cs-cz","da-dk","prs-af","dv-mv","nl-be","nl-nl","en-au","en-bz","en-ca","en-029","en-in","en-ie","en-jm","en-my","en-nz","en-ph","en-sg","en-za","en-tt","en-gb","en-us","en-fr","en-kz","en-kg","en-mx","en-ch","en-ye","en-zw","et-ee","fo-fo","fil-ph","fi-fi","fr-be","fr-ca","fr-fr","fr-lu","fr-mc","fr-ch","fy-nl","gl-es","ka-ge","de-at","de-de","de-li","de-lu","de-ch","el-gr","kl-gl","gu-in","ha-latn-ng","he-il","hi-in","hu-hu","is-is","ig-ng","id-id","iu-latn-ca","iu-cans-ca","ga-ie","xh-za","zu-za","it-it","it-ch","ja-jp","kn-in","kk-kz","km-kh","qut-gt","rw-rw","sw-ke","kok-in","ko-kr","ky-kg","lo-la","lv-lv","lt-lt","dsb-de","lb-lu","mk-mk","ms-bn","ms-my","ml-in","mt-mt","mi-nz","arn-cl","mr-in","moh-ca","mn-mn","mn-mong-cn","ne-np","nb-no","nn-no","oc-fr","or-in","ps-af","fa-ir","pl-pl","pt-br","pt-pt","pa-in","quz-bo","quz-ec","quz-pe","ro-ro","rm-ch","ru-ru","sah-ru","smn-fi","smj-no","smj-se","se-fi","se-no","se-se","sms-fi","sma-no","sma-se","sa-in","gd-gb","sr-cyrl-ba","sr-cyrl-me","sr-cyrl-cs","sr-cyrl-rs","sr-latn-ba","sr-latn-me","sr-latn-cs","sr-latn-rs","nso-za","tn-za","si-lk","sk-sk","sl-si","es-ar","es-ve","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-sv","es-gt","es-hn","es-mx","es-ni","es-pa","es-py","es-pe","es-pr","es-es","es-us","es-uy","sv-fi","sv-se","syr-sy","tg-cyrl-tj","tzm-latn-dz","ta-in","tt-ru","te-in","th-th","bo-cn","tr-tr","tk-tm","uk-ua","hsb-de","ur-pk","ug-cn","uz-cyrl-uz","uz-latn-uz","vi-vn","cy-gb","wo-sn","ii-cn","yo-ng","ROOT"]'])}}}),define("Sage/Sage",[],1),window.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},window.parseUri=function(a){for(var b=window.parseUri.options,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d},window.parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},window.Sage=function(){var a=function(a,b,c){if(a&&c)for(var d in c)a[d]=c[d];if(a&&b)for(var d in b)a[d]=b[d];return a},b=function(a,b){for(var c=a.split("."),d=b||("Sage"!==c[0]?this:window),e=0;e<c.length;e++)d=d[c[e]]=d[c[e]]||{__namespace:!0};return d},c=function(a,b,c){if(d(a))for(var e=a.length,f=0;f<e;f++)b.call(c||a[f],f,a[f]);else for(var g in a)a.hasOwnProperty(g)&&b.call(c||a[g],g,a[g])},d=function(a){return"[object Array]"==Object.prototype.toString.call(a)};return{config:{win:window||{},doc:document},apply:a,namespace:b,each:c,isArray:d,__namespace:!0}}(),window.Sage&&function(a){var b=!1,c=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/;a.Class=function(){},a.Class.define=function a(d){function e(){!b&&this.constructor&&this.constructor.apply(this,arguments)}var f=this.prototype;b=!0;var g=new this;b=!1;var h,i=function(a,b){return function(){var c=this.base;this.base=f[a];var d=b.apply(this,arguments);return this.base=c,d}},j=["constructor"],k=0;for(h in d)g[h]="function"==typeof d[h]&&"function"==typeof f[h]&&c.test(d[h])?i(h,d[h]):d[h];for(;h=j[k++];)d[h]!=f[h]&&(g[h]="function"==typeof d[h]&&"function"==typeof f[h]&&c.test(d[h])?i(h,d[h]):d[h]);return e.prototype=g,e.constructor=e,e.define=a,e.extend=e.define,e}}(window.Sage),window.Sage&&function(a){a.namespace("Utility"),a.Utility.Deferred=function(a,b,c){var d,e=this,f=function(){clearInterval(d),d=null,a.apply(c,b||[])};e.delay=function(a){e.cancel(),d=setInterval(f,a)},e.cancel=function(){d&&(clearInterval(d),d=null)}}}(window.Sage),window.Sage&&function(a){var b=Array.prototype.slice,c=!0,d=!1,e=a.config.win,f=function(a,c,d){return function(){c.target===arguments[0]&&a.apply(d,b.call(arguments,0))}},g=function(c,d,e,f){return e.task=new a.Utility.Deferred,function(){e.task.delay(d.buffer,c,f,b.call(arguments,0))}},h=function(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}},i=function(c,d,e,f){return function(){var g=new a.Utility.Deferred;e.tasks||(e.tasks=[]),e.tasks.push(g),
g.delay(d.delay||10,c,f,b.call(arguments,0))}};a.namespace("Utility"),a.Utility.Event=Sage.Class.define({constructor:function(a,b){this.name=b,this.obj=a,this.listeners=[]},addListener:function(a,b,c){var d,e=this;b=b||e.obj,e.isListening(a,b)||(d=e.createListener(a,b,c),e.firing&&(e.listeners=e.listeners.slice(0)),e.listeners.push(d))},createListener:function(a,b,c){c=c||{},b=b||this.obj;var d={fn:a,scope:b,options:c},e=a;return c.target&&(e=f(e,c,b)),c.delay&&(e=i(e,c,d,b)),c.single&&(e=h(e,this,a,b)),c.buffer&&(e=g(e,c,d,b)),d.fireFn=e,d},findListener:function(a,b){var c,d=this.listeners,e=d.length;for(b=b||this.obj;e--;)if((c=d[e])&&c.fn===a&&c.scope===b)return e;return-1},isListening:function(a,b){return-1!==this.findListener(a,b)},removeListener:function(a,b){var e,f,g,h=this,i=d;if(-1!==(e=h.findListener(a,b))){if(h.firing&&(h.listeners=h.listeners.slice(0)),f=h.listeners[e],f.task&&(f.task.cancel(),delete f.task),g=f.tasks&&f.tasks.length){for(;g--;)f.tasks[g].cancel();delete f.tasks}h.listeners.splice(e,1),i=c}return i},clearListeners:function(){for(var a=this,b=a.listeners,c=b.length;c--;)a.removeListener(b[c].fn,b[c].scope)},fire:function(){var a,f,g=this,h=g.listeners,i=h.length,j=0;if(i>0)for(g.firing=c,f=b.call(arguments,0);j<i;j++)if((a=h[j])&&a.fireFn.apply(a.scope||g.obj||e,f)===d)return g.firing=d;return g.firing=d,c}})}(window.Sage),window.Sage&&function(a){var b=Array.prototype.slice,c=!0,d=!1,e=/^(?:scope|delay|buffer|single)$/,f=a.each;a.Evented=a.Class.define({constructor:function(a){var b=this,c=b.events;a&&a.listeners&&b.addListener(a.listeners),b.events=c||{}},fireEvent:function(){var a,e,f=this,g=b.call(arguments,0),h=g[0].toLowerCase(),i=c,j=this.events[h],k=f.eventQueue||[];if(f.eventsSuspended===c&&k.push(g),"object"==typeof j)if(j.bubble){if(j.fire.apply(j,g.slice(1))===d)return d;if((a=f.getBubbleTarget&&f.getBubbleTarget())&&a.enableBubble)return e=a.events[h],e&&"object"==typeof e&&e.bubble||a.enableBubble(h),a.fireEvent.apply(a,g)}else g.shift(),i=j.fire.apply(j,g);return i},addListener:function(b,d,f,g){var h,i,j,k=this;if("object"==typeof b){g=b;for(h in g)i=g[h],e.test(h)||k.addListener(h,i.fn||i,i.scope||g.scope,i.fn?i:g)}else b=b.toLowerCase(),j=k.events[b]||c,"boolean"==typeof j&&(k.events[b]=j=new a.Utility.Event(k,b)),j.addListener(d,f,"object"==typeof g?g:{})},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];"object"==typeof d&&d.removeListener(b,c)},purgeListeners:function(){var a,b,c=this.events;for(b in c)"object"==typeof(a=c[b])&&a.clearListeners()},addEvents:function(a){var b,d,e=this;if(e.events=e.events||{},"string"==typeof a)for(b=arguments,d=b.length;d--;)e.events[b[d]]=e.events[b[d]]||c;else Sage.apply(e.events,a)},hasListener:function(a){var b=this.events[a.toLowerCase()];return"object"==typeof b&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=c,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue||[];a.eventsSuspended=d,delete a.eventQueue,f(b,function(b){a.fireEvent.apply(a,b)})}}),a.Evented.prototype.on=a.Evented.prototype.addListener,a.Evented.prototype.un=a.Evented.prototype.removeListener}(window.Sage),window.Sage=window.Sage||{},window.Sage.__namespace=!0,Sage.apply=function(a,b,c){var d,e;if(a&&c)for(d in c)a[d]=c[d];if(a&&b)for(e in b)a[e]=b[e];return a},Sage.count=1,Sage.guid=function(a){return this.stringBuild(a,this.count++)},Sage.stringBuild=function(){return Array.prototype.slice.call(arguments,0).join("")},Sage.ns=Sage.namespace=function(a){if(!a||!a.length)return null;for(var b=a.split("."),c=Sage,d="Sage"==b[0]?1:0;d<b.length;++d)c[b[d]]=c[b[d]]||{},c=c[b[d]];return c},Sage.createNamespace=function(a){if(!a||!a.length)return null;var b=a.split(".");window[b[0]]=window[b[0]]||{};for(var c=window[b[0]],d=1;d<b.length;++d)c[b[d]]=c[b[d]]||{},c=c[b[d]];return c},Sage.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)},function(a){var b=!1,c=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/;a.Class=function(){},a.Class.define=function(a){function d(){!b&&this.constructor&&this.constructor.apply(this,arguments)}var e=this.prototype;b=!0;var f=new this;b=!1;var g,h=function(a,b){return function(){var c=this.base;this.base=e[a];var d=b.apply(this,arguments);return this.base=c,d}},i=["constructor"],j=0;for(g in a)f[g]="function"==typeof a[g]&&"function"==typeof e[g]&&c.test(a[g])?h(g,a[g]):a[g];for(;g=i[j++];)a[g]!=e[g]&&(f[g]="function"==typeof a[g]&&"function"==typeof e[g]&&c.test(a[g])?h(g,a[g]):a[g]);return d.prototype=f,d.constructor=d,d.define=arguments.callee,d.extend=d.define,d};var d=Array.prototype.slice,e=!0,f=!1,g=window,h=/^(?:scope|delay|buffer|single)$/,i=a.each;TARGETED=function(a,b,c){return function(){b.target===arguments[0]&&a.apply(c,d.call(arguments,0))}},BUFFERED=function(b,c,e,f){return e.task=new a.Utility.Deferred,function(){e.task.delay(c.buffer,b,f,d.call(arguments,0))}},SINGLE=function(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}},DELAYED=function(b,c,e,f){return function(){var g=new a.Utility.Deferred;e.tasks||(e.tasks=[]),e.tasks.push(g),g.delay(c.delay||10,b,f,d.call(arguments,0))}},a.namespace("Utility"),a.Utility.Event=Sage.Class.define({constructor:function(a,b){this.name=b,this.obj=a,this.listeners=[]},addListener:function(a,b,c){var d,e=this;b=b||e.obj,e.isListening(a,b)||(d=e.createListener(a,b,c),e.firing&&(e.listeners=e.listeners.slice(0)),e.listeners.push(d))},createListener:function(a,b,c){c=c||{},b=b||this.obj;var d={fn:a,scope:b,options:c},e=a;return c.target&&(e=TARGETED(e,c,b)),c.delay&&(e=DELAYED(e,c,d,b)),c.single&&(e=SINGLE(e,this,a,b)),c.buffer&&(e=BUFFERED(e,c,d,b)),d.fireFn=e,d},findListener:function(a,b){var c,d=this.listeners,e=d.length;for(b=b||this.obj;e--;)if((c=d[e])&&c.fn===a&&c.scope===b)return e;return-1},isListening:function(a,b){return-1!==this.findListener(a,b)},removeListener:function(a,b){var c,d,g,h=this,i=f;if(-1!==(c=h.findListener(a,b))){if(h.firing&&(h.listeners=h.listeners.slice(0)),d=h.listeners[c],d.task&&(d.task.cancel(),delete d.task),g=d.tasks&&d.tasks.length){for(;g--;)d.tasks[g].cancel();delete d.tasks}h.listeners.splice(c,1),i=e}return i},clearListeners:function(){for(var a=this,b=a.listeners,c=b.length;c--;)a.removeListener(b[c].fn,b[c].scope)},fire:function(){var a,b,c=this,h=c.listeners,i=h.length,j=0;if(i>0)for(c.firing=e,b=d.call(arguments,0);j<i;j++)if((a=h[j])&&a.fireFn.apply(a.scope||c.obj||g,b)===f)return c.firing=f;return c.firing=f,e}}),a.Evented=a.Class.define({constructor:function(a){var b=this,c=b.events;a&&a.listeners&&b.addListener(a.listeners),b.events=c||{}},fireEvent:function(){var a,b,c=this,g=d.call(arguments,0),h=g[0].toLowerCase(),i=e,j=this.events[h],k=c.eventQueue||[];if(c.eventsSuspended===e&&k.push(g),"object"==typeof j)if(j.bubble){if(j.fire.apply(j,g.slice(1))===f)return f;if((a=c.getBubbleTarget&&c.getBubbleTarget())&&a.enableBubble)return b=a.events[h],b&&"object"==typeof b&&b.bubble||a.enableBubble(h),a.fireEvent.apply(a,g)}else g.shift(),i=j.fire.apply(j,g);return i},addListener:function(b,c,d,f){var g,i,j,k=this;if("object"==typeof b){f=b;for(g in f)i=f[g],h.test(g)||k.addListener(g,i.fn||i,i.scope||f.scope,i.fn?i:f)}else b=b.toLowerCase(),j=k.events[b]||e,"boolean"==typeof j&&(k.events[b]=j=new a.Utility.Event(k,b)),j.addListener(c,d,"object"==typeof f?f:{})},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];"object"==typeof d&&d.removeListener(b,c)},purgeListeners:function(){var a,b,c=this.events;for(b in c)"object"==typeof(a=c[b])&&a.clearListeners()},addEvents:function(a){var b,c,d=this;if(d.events=d.events||{},"string"==typeof a)for(b=arguments,c=b.length;c--;)d.events[b[c]]=d.events[b[c]]||e;else Sage.apply(d.events,a)},hasListener:function(a){var b=this.events[a.toLowerCase()];return"object"==typeof b&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=e,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue||[];a.eventsSuspended=f,delete a.eventQueue,i(b,function(b){a.fireEvent.apply(a,b)})}}),a.Evented.prototype.on=a.Evented.prototype.addListener,a.Evented.prototype.un=a.Evented.prototype.removeListener,a.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}}(Sage),Sage.ServiceContainer=function(){this._services=[]},Sage.ServiceContainer.prototype={addService:function(a,b){if(a&&b){if(this.hasService(a))throw"Service already exists: "+a;var c={};return c.key=a,c.service=b,this._services.push(c),b}return!1},removeService:function(a){for(var b=0;b<this._services.length;b++)this._services[b].key===a&&this._services.splice(b,1)},getService:function(a){if(a)for(var b=0;b<this._services.length;b++)if(this._services[b].key===a)return this._services[b].service;return null},hasService:function(a){if(a)for(var b=0;b<this._services.length;b++)if(this._services[b].key===a)return!0;return!1}},Sage.Services=new Sage.ServiceContainer,document.onkeypress=function(a){a=a||(event||null);var b=a.target?a.target:a.srcElement?a.srcElement:null;return 13!==a.keyCode||"text"!==b.type},window.slx||initGears(),window.slxmm||initMailMerge();var slx_installDesktopFeatures=function(){top.location="Libraries/DesktopIntegration/OfficeIntegrationsetup.exe"},xbar_installDesktopFeatures=function(){top.location="Libraries/DesktopIntegration/Infor CRM Xbar Setup.exe"};require(["dojo/dom"],function(a){Sage.ContentPane=function(b,c,d){this.contentArea=c,this.toggleButton=b,this.state="open",this.minText=d.minText,this.maxText=d.maxText,this.minClass=d.minClass,this.maxClass=d.maxClass,this.baseClass="Global_Images icon16x16";var e=a.byId(b);if(e){var f=Sage.Services.getService("ObjectConnectionService");if(f.disconnect(b),f.add(dojo.connect(e,"onclick",this,function(){this.toggle(),dojo.publish(["Sage/events/mainContentDetails/toggleSplitter"].join(""),this)},!0),b),dojo.subscribe(["Sage/events/mainContentDetails/splitterToggled"].join(""),this,"toggle"),dojo.subscribe(["Sage/events/mainContentDetails/splitterMinSize"].join(""),this,function(){this.setState("closed");var a=document.getElementById(this.toggleButton);a&&(a.className=this.baseClass+" "+this.maxClass,a.title=this.maxText)}),dojo.subscribe(["Sage/events/mainContentDetails/splitterMovedNotMin"].join(""),this,function(){this.setState("open");var a=document.getElementById(this.toggleButton);a&&(a.className=this.baseClass+" "+this.minClass,a.title=this.minText)}),dojo.style(b,"cursor","pointer"),"undefined"!=typeof cookie){var g=cookie.getCookieParm(this.contentArea,"MainContentState");g&&"closed"==g&&this.close()}}},Sage.ContentPane.prototype.setState=function(a){this.state=a,"undefined"!=typeof cookie&&cookie.setCookieParm(this.state,this.contentArea,"MainContentState")},Sage.ContentPane.prototype.toggle=function(){"open"==this.state?this.close():this.open(),setTimeout(function(){var a=dijit.byId("tabContent");a&&a.resize()},1)},Sage.ContentPane.prototype.close=function(){var a=dijit.byId("mainContentDetails");a&&a.splitter||dojo.style(this.contentArea+"_inner","display","none"),this.setState("closed");var b=document.getElementById(this.toggleButton);b&&(b.className=this.baseClass+" "+this.maxClass,b.title=this.maxText)},Sage.ContentPane.prototype.open=function(){var a=dijit.byId("mainContentDetails");a&&a.splitter||dojo.style(this.contentArea+"_inner","display","block"),this.setState("open");var b=document.getElementById(this.toggleButton);b&&(b.className=this.baseClass+" "+this.minClass,b.title=this.minText)},Sage.ContentPaneAttr=function(){this.minText="",this.maxText="",this.minClass="",this.maxClass=""}}),require(["dojo/aspect","dojo/ready","dojo/_base/lang","dijit/registry","dojo/dom-style","dojo/query","dojo/_base/array","dojo/has","dojo/_base/sniff","Sage/Utility/Workspace"],function(a,b,c,d,e,f,g,h,i,j){Sage.TabWorkspaceState=function(a){this._state=a,this._wasTabUpdated=new Object,this._hiddenTabs=new Object,this._collections=["MiddleTabs","MainTabs","MoreTabs"],this._collectionActiveRef={MainTabs:"ActiveMainTab",MoreTabs:"ActiveMoreTab"};for(var b=0;b<this._state.UpdatedTabs.length;b++)this._wasTabUpdated[this._state.UpdatedTabs[b]]=!0;for(var b=0;b<this._state.HiddenTabs.length;b++)this._hiddenTabs[this._state.HiddenTabs[b]]=!0},Sage.TabWorkspaceState.MIDDLE_TABS="MiddleTabs",Sage.TabWorkspaceState.MAIN_TABS="MainTabs",Sage.TabWorkspaceState.MORE_TABS="MoreTabs",Sage.TabWorkspaceState.deserialize=function(a){try{var b=Sys.Serialization.JavaScriptSerializer.deserialize(a);return new Sage.TabWorkspaceState(b)}catch(a){return null}},Sage.TabWorkspaceState.prototype.serialize=function(){return Sys.Serialization.JavaScriptSerializer.serialize(this._state)},Sage.TabWorkspaceState.prototype.getObject=function(){return this._state},Sage.TabWorkspaceState.prototype.getSectionFor=function(a){return this.isMiddleTab(a)?Sage.TabWorkspaceState.MIDDLE_TABS:this.isMainTab(a)?Sage.TabWorkspaceState.MAIN_TABS:!!this.isMoreTab(a)&&Sage.TabWorkspaceState.MORE_TABS},Sage.TabWorkspaceState.prototype.isTabVisible=function(a){if(this.isMiddleTab(a))return!0;var b=TabControl,c=b.getInfoForTab(a),d=$("#"+c.ElementId).get(0),e=d.style;if(void 0===d)return!1;if(this.isMainTab(a))return"none"!==e.display;if(this.isMoreTab(a)){var f=$("#element_More").get(0),g=f.style;return"none"!==e.display&&"none"!==g.display}},Sage.TabWorkspaceState.prototype._isTab=function(a,b){if("object"==typeof this._state[a]){for(var c in this._state[a])if(this._state[a][c]==b)return!0;return!1}},Sage.TabWorkspaceState.prototype._removeFromTabs=function(a,b){if("object"==typeof this._state[a]){var c=[];jQuery.each(this._state[a],function(a,d){d!=b&&c.push(d)}),this._state[a]=c,void 0!==this._collectionActiveRef[a]&&this._state[this._collectionActiveRef[a]]==b&&(this._state[this._collectionActiveRef[a]]=null)}},Sage.TabWorkspaceState.prototype._addToTabs=function(a,b,c,d){if("object"==typeof this._state[a]){for(var e in this._collections)e!=a&&this._removeFromTabs(this._collections[e],b);if(void 0!==c)if("number"==typeof c)this._state[a].splice(c,0,b);else{var f=this._state[a].length;jQuery.each(this._state[a],function(a,b){if(b==c)return f=a,!1}),"number"==typeof d&&(f+=d),this._state[a].splice(f,0,b)}else this._state[a].push(b)}},Sage.TabWorkspaceState.prototype.isMiddleTab=function(a){return this._isTab(Sage.TabWorkspaceState.MIDDLE_TABS,a)},Sage.TabWorkspaceState.prototype.removeFromMiddleTabs=function(a){this._removeFromTabs(Sage.TabWorkspaceState.MIDDLE_TABS,a)},Sage.TabWorkspaceState.prototype.addToMiddleTabs=function(a,b,c){this._addToTabs(Sage.TabWorkspaceState.MIDDLE_TABS,a,b,c)},Sage.TabWorkspaceState.prototype.isMainTab=function(a){return this._isTab(Sage.TabWorkspaceState.MAIN_TABS,a)},Sage.TabWorkspaceState.prototype.isTabVisible=function(a){return!!this.isMiddleTab(a)||(this.isMainTab(a)?this._state.ActiveMainTab===a:this.isMoreTab(a)?this._state.ActiveMoreTab===a&&(this.isMiddleTab(Sage.TabWorkspace.MORE_TAB_ID)||this._state.ActiveMainTab===Sage.TabWorkspace.MORE_TAB_ID):void 0)},Sage.TabWorkspaceState.prototype.removeFromMainTabs=function(a){this._removeFromTabs(Sage.TabWorkspaceState.MAIN_TABS,a)},Sage.TabWorkspaceState.prototype.addToMainTabs=function(a,b,c){this._addToTabs(Sage.TabWorkspaceState.MAIN_TABS,a,b,c)},Sage.TabWorkspaceState.prototype.setActiveMainTab=function(a){this._state.ActiveMainTab=a},Sage.TabWorkspaceState.prototype.getActiveMainTab=function(){return this._state.ActiveMainTab},Sage.TabWorkspaceState.prototype.isMoreTab=function(a){return this._isTab(Sage.TabWorkspaceState.MORE_TABS,a)},Sage.TabWorkspaceState.prototype.removeFromMoreTabs=function(a){this._removeFromTabs(Sage.TabWorkspaceState.MORE_TABS,a)},Sage.TabWorkspaceState.prototype.addToMoreTabs=function(a,b,c){this._addToTabs(Sage.TabWorkspaceState.MORE_TABS,a,b,c)},Sage.TabWorkspaceState.prototype.setActiveMoreTab=function(a){this._state.ActiveMoreTab=a},Sage.TabWorkspaceState.prototype.getActiveMoreTab=function(){return this._state.ActiveMoreTab},Sage.TabWorkspaceState.prototype.getMainTabs=function(){return this._state.MainTabs},Sage.TabWorkspaceState.prototype.getMoreTabs=function(){return this._state.MoreTabs},Sage.TabWorkspaceState.prototype.getMiddleTabs=function(){return this._state.MiddleTabs},Sage.TabWorkspaceState.prototype.getUpdatedTabs=function(){return this._state.UpdatedTabs},Sage.TabWorkspaceState.prototype.markTabUpdated=function(a){this._wasTabUpdated[a]||(this._wasTabUpdated[a]=!0,this._state.UpdatedTabs.push(a))},Sage.TabWorkspaceState.prototype.wasTabUpdated=function(a){return this._wasTabUpdated[a]},Sage.TabWorkspaceState.prototype.clearUpdatedTabs=function(){this._wasTabUpdated=new Object,this._state.UpdatedTabs=[]},Sage.TabWorkspaceState.prototype.getHiddenTabs=function(){return this._state.HiddenTabs},Sage.TabWorkspaceState.prototype.InHideMode=function(){return this._state.InHideMode},Sage.TabWorkspace=function(a){this._id=a.id,this._clientId=a.clientId,this._afterPostBackActions=[],this._info=a.info,this._state=new Sage.TabWorkspaceState(a.state),this._textSelectionDisabled=!1,this._debug=!1,this._regions={},this._middleRegionDropTolerance=20,this._offsetParent=!1,this._offsetParentScroll=-1,this._markForUpdateQueue="",this.compileInfoLookups()},Sage.TabWorkspace.MORE_TAB_ID="More",Sage.TabWorkspace.MAIN_AREA="main",Sage.TabWorkspace.MORE_AREA="more",Sage.TabWorkspace.MIDDLE_AREA="middle",Sage.TabWorkspace.prototype.compileInfoLookups=function(){this._info._byId=new Object,this._info._byElementId=new Object,this._info._byDropTargetId=new Object,this._info._byButtonId=new Object,this._info._byMoreButtonId=new Object;for(var a=0;a<this._info.Tabs.length;a++)this._info._byId[this._info.Tabs[a].Id]=this._info.Tabs[a],this._info._byElementId[this._info.Tabs[a].ElementId]=this._info.Tabs[a],this._info._byDropTargetId[this._info.Tabs[a].DropTargetId]=this._info.Tabs[a],this._info._byButtonId[this._info.Tabs[a].ButtonId]=this._info.Tabs[a],this._info._byMoreButtonId[this._info.Tabs[a].MoreButtonId]=this._info.Tabs[a]},Sage.TabWorkspace.prototype.getInfoFor=function(a){return this._info._byId[a]},Sage.TabWorkspace.prototype.getInfoForTab=function(a){return this._info._byId[a]},Sage.TabWorkspace.prototype.getInfoForTabElement=function(a){return this._info._byElementId[a]},Sage.TabWorkspace.prototype.getInfoForTabDropTarget=function(a){return this._info._byDropTargetId[a]},Sage.TabWorkspace.prototype.getInfoForTabButton=function(a){return this._info._byButtonId[a]},Sage.TabWorkspace.prototype.getInfoForTabMoreButton=function(a){return this._info._byMoreButtonId[a]},Sage.TabWorkspace.prototype.getStateProxyTriggerId=function(){return this._info.ProxyTriggerId},Sage.TabWorkspace.prototype.getStateProxyPayloadId=function(){return this._info.ProxyPayloadId},Sage.TabWorkspace.prototype.getDragHelperContainerId=function(){return this._info.DragHelperContainerId},Sage.TabWorkspace.prototype.getUseUIStateService=function(){return this._info.UseUIStateService},Sage.TabWorkspace.prototype.getUIStateServiceKey=function(){return this._info.UIStateServiceKey},Sage.TabWorkspace.prototype.getUIStateServiceProxyType=function(){return this._info.UIStateServiceProxyType},Sage.TabWorkspace.prototype.getAllDropTargets=function(){return this._allDropTargets},Sage.TabWorkspace.prototype.getAllMainButtons=function(){return this._allMainButtons},Sage.TabWorkspace.prototype.getAllMoreButtons=function(){return this._allMoreButtons},Sage.TabWorkspace.prototype.getElement=function(){return document.getElementById?document.getElementById(this._clientId):null},Sage.TabWorkspace.prototype.getContext=function(){return this._context},Sage.TabWorkspace.prototype.getState=function(){return this._state},Sage.TabWorkspace.prototype.setState=function(a){this._state=a},Sage.TabWorkspace.prototype.resetState=function(a){if(void 0===a){var b=$("#"+this.getStateProxyPayloadId(),this.getContext()).val();""==b?this.setState(this.getState()):this.setState(Sage.TabWorkspaceState.deserialize(b))}else"string"==typeof a&&this.setState(Sage.TabWorkspaceState.deserialize(a));this.logDebug("Reset state...")},Sage.TabWorkspace.prototype.logDebug=function(a){if(this._debug){var b=function(a,b){for(a=a.toString();a.length<b;)a="0"+a;return a},c=new Date;b(c.getHours(),2),b(c.getMinutes(),2),b(c.getSeconds(),2),b(c.getMilliseconds(),3)}},Sage.TabWorkspace.prototype.registerAfterPostBackAction=function(a){this._afterPostBackActions.push(a)},Sage.TabWorkspace.prototype.init=function(){this.logDebug("[enter] init"),document.getElementById&&(this._context=document.getElementById(this._clientId)),this._context&&(this._offsetParent=$(this._context).offsetParent()),this._allDropTargets=$("div.tws-drop-target",this._context),this._allMainButtons=$("li.tws-tab-button",this._context),this._allMoreButtons=$("li.tws-more-tab-button",this._context),this._mainButtonContainer=$("div.tws-main-tab-buttons",this._context),this._mainButtonContainerRegion=this.createRegionsFrom(this._mainButtonContainer)[0],this._moreButtonContainer=$("div.tws-more-tab-buttons-container",this._context),this._moreButtonContainerRegion=this.createRegionsFrom(this._moreButtonContainer)[0],this.getState().clearUpdatedTabs();for(var a=0;a<this.getState().getMiddleTabs().length;a++)this.getState().markTabUpdated(this.getState().getMiddleTabs()[a]);this.getState().getActiveMainTab()&&this.getState().markTabUpdated(this.getState().getActiveMainTab()),this.getState().getActiveMainTab()==Sage.TabWorkspace.MORE_TAB_ID&&this.getState().getActiveMoreTab()&&this.getState().markTabUpdated(this.getState().getActiveMoreTab()),this._dragHelperHeight=$(".tws-tab-drag-helper",this.getContext()).height(),this._dragHelperWidth=$(".tws-tab-drag-helper",this.getContext()).width(),this.logDebug("[enter] initEvents"),this.initEvents(),this.logDebug("[leave] initEvents"),this.logDebug("[enter] initDragDrop"),this.initDragDrop(),this.logDebug("[leave] initDragDrop"),this.logDebug("[leave] init"),this.hideTabs()},Sage.TabWorkspace.prototype.initEvents=function(){var a=this,b=Sys.WebForms.PageRequestManager.getInstance();b.add_endRequest(function(b,c){var d=c.get_response(),e=d&&d.get_aborted(),f=c.get_error();if(e||f)return void(a._markForUpdateQueue="");a._processMarkForUpdateQueue(),a.setupAllTabElementDraggables(),a.hideTabs()}),b.add_beginRequest(function(b,c){a.cleanupAllTabElementDraggables()})},Sage.TabWorkspace.prototype._processMarkForUpdateQueue=function(){this._markForUpdateQueue&&(this.getState().markTabUpdated(this._markForUpdateQueue),this._markForUpdateQueue="")},Sage.TabWorkspace.prototype.hideTabs=function(){if(this.getState().InHideMode()){for(var a=0;a<this.getState().getMiddleTabs().length;a++){var b=this.getState().getMiddleTabs()[a];this.unHideTab(b)}for(var a=0;a<this.getState().getMoreTabs().length;a++){var b=this.getState().getMoreTabs()[a];this.unHideTab(b)}for(var a=0;a<this.getState().getMainTabs().length;a++){var b=this.getState().getMainTabs()[a];this.unHideTab(b)}for(var a=0;a<this.getState().getHiddenTabs().length;a++){var b=this.getState().getHiddenTabs()[a];this.hideTab(b)}}},Sage.TabWorkspace.prototype.hideTab=function(a){if(this.logDebug("[enter] hideTab"),"string"==typeof a&&(a=this.getInfoFor(a)),null!=a)switch(this.getState().getSectionFor(a.Id)){case Sage.TabWorkspaceState.MAIN_TABS:$("#"+a.ButtonId,this.getContext()).hide(),$("#"+a.ElementId,this.getContext()).hide();break;case Sage.TabWorkspaceState.MORE_TABS:$("#"+a.MoreButtonId,this.getContext()).hide(),$("#"+a.ElementId,this.getContext()).hide();break;case Sage.TabWorkspaceState.MIDDLE_TABS:$("#"+a.ElementId,this.getContext()).hide()}},Sage.TabWorkspace.prototype.unHideTab=function(a){if(this.logDebug("[enter] hideTab"),"string"==typeof a&&(a=this.getInfoFor(a)),null!=a)switch(this.getState().getSectionFor(a.Id)){case Sage.TabWorkspaceState.MAIN_TABS:$("#"+a.ButtonId,this.getContext()).show(),this.getState().getActiveMainTab()==a.Id&&$("#"+a.ElementId,this.getContext()).show();break;case Sage.TabWorkspaceState.MORE_TABS:$("#"+a.MoreButtonId,this.getContext()).show(),this.getState().getActiveMoreTab()==a.Id&&$("#"+a.ElementId,this.getContext()).show();break;case Sage.TabWorkspaceState.MIDDLE_TABS:$("#"+a.ElementId,this.getContext()).show()}},Sage.TabWorkspace.prototype.disablePageTextSelection=function(){jQuery.browser.msie&&(this._textSelectionDisabled||(this._oldBodyOnDrag=document.body.ondrag,this._oldBodyOnSelectStart=document.body.onselectstart,document.body.ondrag=function(){return!1},document.body.onselectstart=function(){return!1},this._textSelectionDisabled=!0))},Sage.TabWorkspace.prototype.enablePageTextSelection=function(){jQuery.browser.msie&&this._textSelectionDisabled&&(document.body.ondrag=this._oldBodyOnDrag,document.body.onselectstart=this._oldBodyOnSelectStart,this._textSelectionDisabled=!1)},Sage.TabWorkspace.prototype.setDragDropHelperText=function(a,b){"string"==typeof b&&$(".tws-drag-helper-text",a).html(b)},Sage.TabWorkspace.prototype.setupTabElementDraggable=function(a){var b,c=this;if("string"==typeof a){if(null==(a=this.getInfoFor(a)))return;b=$("#"+a.ElementId,this.getContext())}else"object"==typeof target&&(b=a.ElementId);var d=!1;if(b.is(".tws-tab-element"))for(var e=b;;){var f=e.parent();if(!f||0===f.length)break;if(f.is(".tws-main-tab-content")||f.is(".tws-more-tab-content")){d=!0;break}e=f}b.is(".ui-draggable")||!0===d||("string"==typeof a?this.logDebug("Setting up tab element draggable for "+a+"."):this.logDebug("Setting up tab element draggable for "+a.Id+"."),b.draggable({handle:".tws-tab-view-header",cursor:"move",cursorAt:{top:c._dragHelperHeight/2,left:c._dragHelperWidth/2},zIndex:15e3,delay:300,opacity:.5,scroll:!0,refreshPositions:!0,appendTo:"#"+c.getDragHelperContainerId(),helper:function(){return c.createDraggableHelper()},start:function(a,b){this._context=c.getInfoForTabElement(this.id),this._overDraggable=!1,$(b.helper).data("over",0),c.disablePageTextSelection(),c.setDragDropHelperText(b.helper,this._context.Name)},stop:function(a,b){c.enablePageTextSelection()}}))},Sage.TabWorkspace.prototype.cleanupTabElementDraggable=function(a){var b;if("string"==typeof a){if(null==(a=this.getInfoFor(a)))return;b=$("#"+a.ElementId,this.getContext())}else"object"==typeof target&&(b=a.ElementId);b.is(".ui-draggable")&&("string"==typeof a?this.logDebug("Cleaning up tab element draggable for "+a+"."):this.logDebug("Cleaning up tab element draggable for "+a.Id+"."),b.draggable("destroy"))},Sage.TabWorkspace.prototype.setupAllTabElementDraggables=function(){for(var a=0;a<this.getState().getMiddleTabs().length;a++)this.setupTabElementDraggable(this.getState().getMiddleTabs()[a]);this.getState().getActiveMainTab()&&this.getState().getActiveMainTab()!=Sage.TabWorkspace.MORE_TAB_ID&&this.setupTabElementDraggable(this.getState().getActiveMainTab()),this.getState().getActiveMoreTab()&&this.setupTabElementDraggable(this.getState().getActiveMoreTab())},Sage.TabWorkspace.prototype.cleanupAllTabElementDraggables=function(){for(var a=0;a<this.getState().getUpdatedTabs().length;a++)this.cleanupTabElementDraggable(this.getState().getUpdatedTabs()[a])},Sage.TabWorkspace.prototype.createMainInsertMarker=function(a,b){if(a){var c=$('<div class="tws-insert-button-marker Global_Images icon_insert-arrow-down16x16 "></div>').css({left:b.left-8+"px"});$("div.tws-main-tab-buttons",this.getContext()).append(c),a._marker=c}},Sage.TabWorkspace.prototype.cleanupMainInsertMarker=function(a){a&&a._marker&&(a._marker.remove(),a._marker=null)},Sage.TabWorkspace.prototype.createMoreInsertMarker=function(a,b){if(a){var c=$('<div class="tws-insert-button-marker Global_Images icon_insert-arrow-left16x16"></div>').css({top:b.top-8+"px"});$("div.tws-more-tab-buttons-container",this.getContext()).append(c),a._marker=c}},Sage.TabWorkspace.prototype.cleanupMoreInsertMarker=function(a){a&&a._marker&&(a._marker.remove(),a._marker=null)},Sage.TabWorkspace.prototype.getContextFromUI=function(a){return a.draggable.get(0)._context},Sage.TabWorkspace.prototype.getRegions=function(a){return this._regions[a]},Sage.TabWorkspace.prototype.createRegionsFrom=function(a){var b=[];return a.each(function(){var a=$(this);b.push({x:a.offset().left,y:a.offset().top,width:a.width(),height:a.height(),el:this})}),b},Sage.TabWorkspace.prototype.testRegions=function(a,b,c){var d="string"==typeof a?this._regions[a]:a;if(d&&d.length&&"function"==typeof c)for(var e=0;e<d.length;e++)if(c(d[e],b))return d[e].el;return null},Sage.TabWorkspace.prototype.setDroppableOn=function(a,b,c){void 0===a._droppables&&(a._droppables={}),a._droppables[b]=c},Sage.TabWorkspace.prototype.getDroppableFrom=function(a,b){if(a._droppables)return a._droppables[b]},Sage.TabWorkspace.prototype.updateOffsetParentScroll=function(){this._offsetParentScroll=$(this._offsetParent).scrollTop()},Sage.TabWorkspace.prototype.shouldUpdateRegions=function(){return!(!this._offsetParent||this._offsetParentScroll==$(this._offsetParent).scrollTop())&&(this._offsetParentScroll=$(this._offsetParent).scrollTop(),!0)},Sage.TabWorkspace.prototype.initDragDrop=function(){var a=this;$("div.tws-middle-section",this.getContext()).droppable({accept:".tws-tab-button,.tws-more-tab-button,.tws-tab-element",tolerance:"pointer",activate:function(b,c){a.logDebug("Activate MiddleSection"),a.setDroppableOn(c.draggable.get(0),Sage.TabWorkspace.MIDDLE_AREA,c.options),a._allDropTargets.filter("div.tws-middle-section div.tws-drop-target").addClass("tws-drop-target-active")},deactivate:function(b,c){a.logDebug("De-Activate MiddleSection"),a._allDropTargets.filter("div.tws-middle-section div.tws-drop-target").removeClass("tws-drop-target-active"),c.draggable.unbind("drag",c.options.track),c.options._targets=null,c.options._current=null},over:function(b,c){a.logDebug("Over MiddleSection");var d=a.createRegionsFrom(a.getAllDropTargets().filter(":visible")),e=(c.draggable.get(0),{y:b.pageY,x:b.pageX}),f=a.testRegions(d,e,function(b,c){return c.y>b.y-a._middleRegionDropTolerance&&c.y<=b.y+b.height+a._middleRegionDropTolerance});f&&($(f).addClass("tws-drop-target-hover"),$(c.helper).data("over",$(c.helper).data("over")+1),$(c.helper).addClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).addClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_no16x16")),c.options._targets=d,c.options._currentTarget=f||null,c.draggable.bind("drag",c.options.track)},out:function(b,c){a.logDebug("Out MiddleSection");c.draggable.get(0);a._allDropTargets.removeClass("tws-drop-target-hover"),$(c.helper).data("over",$(c.helper).data("over")-1),$(c.helper).data("over")<=0&&($(c.helper).data("over",0),$(c.helper).removeClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).addClass("icon_no16x16")),c.draggable.unbind("drag",c.options.track),c.options._targets=null,c.options._currentTarget=null},drop:function(b,c){a.logDebug("Drop MiddleSection");var d=a.getContextFromUI(c),e=c.options._currentTarget;a._allDropTargets.removeClass("tws-drop-target-hover"),$(c.helper).removeClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).addClass("icon_no16x16"),e&&a.dropToMiddleSection(d,e)},track:function(b,c){var d=this,e=a.getDroppableFrom(d,Sage.TabWorkspace.MIDDLE_AREA),f={y:b.pageY,x:b.pageX},g=a.testRegions(e._targets,f,function(b,c){return c.y>b.y-a._middleRegionDropTolerance&&c.y<=b.y+b.height+a._middleRegionDropTolerance});if(e._currentTarget!=g){var h=e._currentTarget;h&&($(c.helper).removeClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).addClass("icon_no16x16"),$(h).removeClass("tws-drop-target-hover")),
g&&($(c.helper).addClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).addClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_no16x16"),$(g).addClass("tws-drop-target-hover")),e._currentTarget=g}}}),$("div.tws-main-tab-buttons",this.getContext()).droppable({accept:".tws-tab-button,.tws-more-tab-button,.tws-tab-element",tolerance:"pointer",activate:function(b,c){a.logDebug("Activate MainButtonBar"),a.updateMainAreaRegions(),a.setDroppableOn(c.draggable.get(0),Sage.TabWorkspace.MAIN_AREA,c.options)},deactivate:function(b,c){a.logDebug("De-Activate MainButtonBar"),a.cleanupMainInsertMarker(c.draggable.get(0)),c.draggable.unbind("drag",c.options.track),c.options._targets=null,c.options._currentTarget=null},over:function(b,c){a.logDebug("Over main button bar event occured for "+a.getContextFromUI(c).Id),$(c.helper).data("over",$(c.helper).data("over")+1),$(c.helper).addClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).addClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_no16x16");var d=a.getRegions(Sage.TabWorkspace.MAIN_AREA),e={y:b.pageY,x:b.pageX},f=a.testRegions(d,e,function(a,b){return b.x>a.x&&b.x<=a.x+a.width}),g={};g=f?$(f,a.getContext()).position():$(".tws-tab-button-tail",a.getContext()).position(),a.cleanupMainInsertMarker(c.draggable.get(0)),a.createMainInsertMarker(c.draggable.get(0),g),c.options._targets=d,c.options._currentTarget=null,c.draggable.bind("drag",c.options.track)},out:function(b,c){a.logDebug("Out MainButtonBar"),$(c.helper).data("over",$(c.helper).data("over")-1),$(c.helper).data("over")<=0&&($(c.helper).data("over",0),$(c.helper).removeClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).addClass("icon_no16x16")),a.cleanupMainInsertMarker(c.draggable.get(0)),c.draggable.unbind("drag",c.options.track),c.options._targets=null,c.options._currentTarget=null},drop:function(b,c){a.logDebug("Drop to main event occured for "+a.getContextFromUI(c).Id);var d=a.getContextFromUI(c),e=c.options._currentTarget?c.options._currentTarget:this;a.dropToMainSection(d,e)},track:function(b,c){var d=this,e=a.getDroppableFrom(d,Sage.TabWorkspace.MAIN_AREA),f={y:b.pageY,x:b.pageX},g=a.testRegions(e._targets,f,function(a,b){return b.x>a.x&&b.x<=a.x+a.width});if(e._currentTarget!=g){e._currentTarget=g;var h={};h=g?$(e._currentTarget,a.getContext()).position():$(".tws-tab-button-tail",a.getContext()).position(),a.cleanupMainInsertMarker(d),a.createMainInsertMarker(d,h)}}}),$(".tws-more-tab-buttons",this.getContext()).droppable({accept:".tws-tab-button:not(#show_More),.tws-more-tab-button,.tws-tab-element:not(#element_More)",tolerance:"pointer",activate:function(b,c){a.logDebug("Activate MoreButtonBar"),a.updateMoreAreaRegions(),a.setDroppableOn(c.draggable.get(0),Sage.TabWorkspace.MORE_AREA,c.options)},deactivate:function(b,c){a.cleanupMoreInsertMarker(c),c.draggable.unbind("drag",c.options.track),c.options._targets=null,c.options._currentTarget=null},over:function(b,c){a.logDebug("Over more button bar event occured for "+a.getContextFromUI(c).Id),$(c.helper).data("over",$(c.helper).data("over")+1),$(c.helper).addClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).addClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_no16x16");var d=a.getRegions(Sage.TabWorkspace.MORE_AREA),e={y:b.pageY,x:b.pageX},f=a.testRegions(d,e,function(a,b){return b.y>a.y&&b.y<=a.y+a.height}),g={};g=f?$(f,a.getContext()).position():$(".tws-more-tab-button-tail",a.getContext()).position(),a.cleanupMoreInsertMarker(c.draggable.get(0)),a.createMoreInsertMarker(c.draggable.get(0),g),c.options._targets=d,c.options._currentTarget=null,c.draggable.bind("drag",c.options.track)},out:function(b,c){$(c.helper).data("over",$(c.helper).data("over")-1),$(c.helper).data("over")<=0&&($(c.helper).data("over",0),$(c.helper).removeClass("tws-drag-helper-valid"),$(".tws-drag-helper-icon",c.helper).removeClass("icon_ok16x16"),$(".tws-drag-helper-icon",c.helper).addClass("icon_no16x16")),a.cleanupMoreInsertMarker(c.draggable.get(0)),c.draggable.unbind("drag",c.options.track),c.options._targets=null,c.options._currentTarget=null},drop:function(b,c){a.logDebug("Drop to more event occured for "+a.getContextFromUI(c).Id);var d=a.getContextFromUI(c),e=c.options._currentTarget?c.options._currentTarget:this;a.dropToMoreSection(d,e)},track:function(b,c){var d=this,e=a.getDroppableFrom(d,Sage.TabWorkspace.MORE_AREA),f={y:b.pageY,x:b.pageX},g=a.testRegions(e._targets,f,function(a,b){return b.y>a.y&&b.y<=a.y+a.height});if(e._currentTarget!=g){e._currentTarget=g;var h={};h=g?$(e._currentTarget,a.getContext()).position():$(".tws-more-tab-button-tail",a.getContext()).position(),a.cleanupMoreInsertMarker(d),a.createMoreInsertMarker(d,h)}}}),$("li.tws-tab-button:not(li.tws-tab-button-tail)",this.getContext()).draggable({cursor:"move",cursorAt:{top:a._dragHelperHeight/2,left:a._dragHelperWidth/2},zIndex:15e3,appendTo:"#"+a.getDragHelperContainerId(),opacity:.5,delay:300,scroll:!0,refreshPositions:!0,helper:function(){return a.createDraggableHelper()},start:function(b,c){this._context=a.getInfoForTabButton(this.id),this._overDraggable=!1,$(c.helper).data("over",0),a.disablePageTextSelection(),a.setDragDropHelperText(c.helper,this._context.Name)},stop:function(b,c){a.enablePageTextSelection()}}),$("li.tws-more-tab-button:not(li.tws-more-tab-button-tail)",this.getContext()).draggable({cursor:"move",cursorAt:{top:a._dragHelperHeight/2,left:a._dragHelperWidth/2},zIndex:15e3,opacity:.5,delay:300,scroll:!0,refreshPositions:!0,appendTo:"#"+a.getDragHelperContainerId(),helper:function(){return a.createDraggableHelper()},start:function(b,c){this._context=a.getInfoForTabMoreButton(this.id),this._overDraggable=!1,$(c.helper).data("over",0),a.disablePageTextSelection(),a.setDragDropHelperText(c.helper,this._context.Name)},stop:function(b,c){a.enablePageTextSelection()}}),$("li.tws-tab-button:not(li.tws-tab-button-tail)",this.getContext()).click(function(b){var c=a.getInfoForTabButton($(this).attr("id"));a.logDebug("Click event occured for "+c.Id),a.showMainTab(c.Id)}),$("li.tws-more-tab-button:not(li.tws-more-tab-button-tail)",this.getContext()).click(function(b){var c=a.getInfoForTabMoreButton($(this).attr("id"));a.logDebug("Click event occured for "+c.Id),a.showMoreTab(c.Id)}),this.updateAllRegions(),this.setupAllTabElementDraggables()},Sage.TabWorkspace.prototype.createDraggableHelper=function(){return $("<div class='tws-tab-drag-helper'><div class='tws-drag-helper-icon Global_Images icon_no16x16' /><div class='tws-drag-helper-text' /></div>")},Sage.TabWorkspace.prototype.showMainTab=function(a,b){this.logDebug("[enter] showMainTab"),"string"==typeof a&&(a=this.getInfoFor(a)),this.getState().getActiveMainTab()!=a.Id&&(this.getState().setActiveMainTab(a.Id),this.showMainTabDom(a),a.Id==Sage.TabWorkspace.MORE_TAB_ID&&this.getState().getActiveMoreTab()&&this.showMoreTabDom(this.getState().getActiveMoreTab()),(void 0===b||b)&&this.triggerUpdateFor(a.Id))},Sage.TabWorkspace.prototype.showMainTabDom=function(a){"string"==typeof a&&(a=this.getInfoFor(a)),$(".tws-main-tab-content > .tws-tab-element",this.getContext()).hide(),$("#"+a.ElementId,this.getContext()).show(),$(".tws-main-tab-buttons .tws-tab-button",this.getContext()).removeClass("tws-active-tab-button"),$("#"+a.ButtonId,this.getContext()).addClass("tws-active-tab-button")},Sage.TabWorkspace.prototype.showMoreTab=function(a,b){this.logDebug("[enter] showMoreTab"),"string"==typeof a&&(a=this.getInfoFor(a)),this.getState().getActiveMoreTab()!=a.Id&&(this.getState().setActiveMoreTab(a.Id),this.showMoreTabDom(a),(void 0===b||b)&&this.triggerUpdateFor(a.Id))},Sage.TabWorkspace.prototype.showMoreTabDom=function(a){"string"==typeof a&&(a=this.getInfoFor(a)),$(".tws-more-tab-content .tws-tab-element",this.getContext()).hide(),$("#"+a.ElementId,this.getContext()).show(),$(".tws-more-tab-buttons .tws-more-tab-button",this.getContext()).removeClass("tws-active-more-tab-button"),$("#"+a.MoreButtonId,this.getContext()).addClass("tws-active-more-tab-button")},Sage.TabWorkspace.prototype.dropToMainSection=function(a,b){this.logDebug("[enter] dropToMainSection");var c;switch(c=$(b).is(".tws-main-tab-buttons")?$(".tws-tab-button-tail",this.getContext()):$(b,this.getContext()),this.getState().getSectionFor(a.Id)){case Sage.TabWorkspaceState.MAIN_TABS:c.before($("#"+a.ButtonId,this.getContext()));break;case Sage.TabWorkspaceState.MORE_TABS:$("#"+a.MoreButtonId,this.getContext()).hide(),c.before($("#"+a.ButtonId,this.getContext()).show()),$(".tws-main-tab-content",this.getContext()).append($("#"+a.ElementId)),$(".tws-main-tab-content",this.getContext()).append($("#"+a.DropTargetId));break;case Sage.TabWorkspaceState.MIDDLE_TABS:c.before($("#"+a.ButtonId,this.getContext()).show()),$(".tws-main-tab-content",this.getContext()).append($("#"+a.ElementId)),$(".tws-main-tab-content",this.getContext()).append($("#"+a.DropTargetId))}c.is(".tws-tab-button-tail")?this.getState().addToMainTabs(a.Id):this.getState().addToMainTabs(a.Id,this.getInfoForTabButton(c.attr("id")).Id,0),this.showMainTab(a.Id)},Sage.TabWorkspace.prototype.dropToMoreSection=function(a,b){this.logDebug("[enter] dropToMoreSection");var c;switch(c=$(b).is(".tws-more-tab-buttons")?$(".tws-more-tab-button-tail",this.getContext()):$(b,this.getContext()),this.getState().getSectionFor(a.Id)){case Sage.TabWorkspaceState.MAIN_TABS:$("#"+a.ButtonId,this.getContext()).hide(),c.before($("#"+a.MoreButtonId,this.getContext()).show()),$(".tws-more-tab-element .tws-more-tab-content-fixer",this.getContext()).before($("#"+a.ElementId)),$(".tws-more-tab-element .tws-more-tab-content-fixer",this.getContext()).before($("#"+a.DropTargetId));break;case Sage.TabWorkspaceState.MORE_TABS:return void c.before($("#"+a.MoreButtonId,this.getContext()));case Sage.TabWorkspaceState.MIDDLE_TABS:c.before($("#"+a.MoreButtonId,this.getContext()).show()),$(".tws-more-tab-element .tws-more-tab-content-fixer",this.getContext()).before($("#"+a.ElementId)),$(".tws-more-tab-element .tws-more-tab-content-fixer",this.getContext()).before($("#"+a.DropTargetId))}c.is(".tws-more-tab-button-tail")?this.getState().addToMoreTabs(a.Id):this.getState().addToMoreTabs(a.Id,this.getInfoForTabMoreButton(c.attr("id")).Id,0),this.showMoreTab(a.Id)},Sage.TabWorkspace.prototype.dropToMiddleSection=function(a,b){this.logDebug("[enter] dropToMiddleSection");var c=[];if(a.DropTargetId!=b.id){switch(this.getState().getSectionFor(a.Id)){case Sage.TabWorkspaceState.MAIN_TABS:if(1==this.getState().getMainTabs().length)return;if(this.getState().getActiveMainTab()==a.Id){var d=$("#"+a.ButtonId,this.getContext()).prev(".tws-tab-button:visible:not(.tws-tab-button-tail)");if(d.length<=0&&(d=$("#"+a.ButtonId,this.getContext()).next(".tws-tab-button:visible:not(.tws-tab-button-tail)")),d.length>0){var e=this.getInfoForTabButton(d.attr("id")).Id;this.showMainTab(e,!1),c.push(e)}}$("#"+a.ButtonId,this.getContext()).hide(),$(b).after($("#"+a.DropTargetId,this.getContext())),$(b).after($("#"+a.ElementId,this.getContext()).show()),c.push(a.Id);break;case Sage.TabWorkspaceState.MORE_TABS:$("#"+a.MoreButtonId,this.getContext()).hide(),$(b).after($("#"+a.DropTargetId,this.getContext())),$(b).after($("#"+a.ElementId,this.getContext()).show()),c.push(a.Id);break;case Sage.TabWorkspaceState.MIDDLE_TABS:$(b).after($("#"+a.DropTargetId,this.getContext())),$(b).after($("#"+a.ElementId,this.getContext()).show()),c.push(a.Id)}$(b).hasClass("tws-middle-drop-target")?this.getState().addToMiddleTabs(a.Id,0):this.getState().addToMiddleTabs(a.Id,this.getInfoForTabDropTarget(b.id).Id,1),this.triggerUpdateFor(c)}},Sage.TabWorkspace.prototype.deriveStateFromMarkup=function(){var a=this,b={MiddleTabs:[],MainTabs:[],MoreTabs:[]};return $(".tws-middle-section .tws-tab-element",this.getContext()).each(function(){b.MiddleTabs.push(a.getInfoForTabElement($(this).attr("id")).Id)}),$(".tws-main-section .tws-main-tab-buttons .tws-tab-button:visible",this.getContext()).each(function(){var c=a.getInfoForTabButton($(this).attr("id"));b.MainTabs.push(c.Id),$(this).hasClass("tws-active-tab-button",this.getContext())&&(b.ActiveMainTab=c.Id)}),b},Sage.TabWorkspace.prototype.updateVisibleDroppables=function(){this.logDebug("[enter] enableAllVisibleDroppables"),$("div.tws-drop-target:visible",this.getContext()).droppable("enable"),$.ui.ddmanager.prepareOffsets(),this.logDebug("[leave] enableAllVisibleDroppables")},Sage.TabWorkspace.prototype.updateAllRegions=function(){this.updateMainAreaRegions(),this.updateMoreAreaRegions(),this.updateMiddleAreaRegions()},Sage.TabWorkspace.prototype.updateMainAreaRegions=function(){var a=this.createRegionsFrom(this._mainButtonContainer)[0];this._regions[Sage.TabWorkspace.MAIN_AREA]=this.createRegionsFrom(this._allMainButtons.filter(":visible")),this._mainButtonContainerRegion=a},Sage.TabWorkspace.prototype.updateMoreAreaRegions=function(){var a=this.createRegionsFrom(this._moreButtonContainer)[0];this._regions[Sage.TabWorkspace.MORE_AREA]=this.createRegionsFrom(this._allMoreButtons.filter(":visible")),this._moreButtonContainerRegion=a},Sage.TabWorkspace.prototype.updateMiddleAreaRegions=function(){this._regions[Sage.TabWorkspace.MIDDLE_AREA]=this.createRegionsFrom(this._allDropTargets.filter(":visible"))},Sage.TabWorkspace.prototype.updateContextualFeedback=function(){this.getState().getMoreTabs().length<=0?$(".tws-more-tab-message",this.getContext()).empty().append(TabWorkspaceResource.More_Tab_Empty_Message).show():null==this.getState().getActiveMoreTab()?$(".tws-more-tab-message",this.getContext()).empty().append(TabWorkspaceResource.More_Tab_No_Selection_Message).show():$(".tws-more-tab-message",this.getContext()).hide(),this.getState().getMiddleTabs().length<=0?($(".tws-middle-section",this.getContext()).addClass("tws-middle-section-empty"),$(".tws-middle-drop-target span",this.getContext()).empty().append(TabWorkspaceResource.Middle_Pane_Empty_Drop_Target_Message)):($(".tws-middle-section",this.getContext()).removeClass("tws-middle-section-empty"),$(".tws-middle-drop-target span",this.getContext()).empty().append(TabWorkspaceResource.Middle_Pane_Drop_Target_Message))},Sage.TabWorkspace.prototype.updateStateProxy=function(){var a=this.getState().serialize();$("#"+this.getStateProxyPayloadId()).val(a)},Sage.TabWorkspace.prototype.onReOpenTab=function(){},Sage.TabWorkspace.prototype.triggerUpdateFor=function(a,b){this.updateContextualFeedback(),this.updateAllRegions();var c=[],d=!1,e=!1;if("string"==typeof a)if(a==Sage.TabWorkspace.MORE_TAB_ID){var f=this.getState().getActiveMoreTab();f&&!this.getState().wasTabUpdated(f)?(c.push(f),this._markForUpdateQueue=f):d=!0}else this.getState().wasTabUpdated(a)||a==Sage.TabWorkspace.MORE_TAB_ID?d=!0:(c.push(a),this._markForUpdateQueue=a);else for(var g=0;g<a.length;g++)if(a[g]==Sage.TabWorkspace.MORE_TAB_ID){var f=this.getState().getActiveMoreTab();f&&!this.getState().wasTabUpdated(f)?(this.getState().markTabUpdated(f),c.push(f)):d=!0}else if(this.getState().wasTabUpdated(a[g])||a[g]==Sage.TabWorkspace.MORE_TAB_ID){if(this.getState().isMiddleTab(a[g])){var h=$(".tws-middle-section .tws-tab-view-body .formtable");h.length>0&&($(".tws-middle-section .tws-tab-view-body")[0].style.height="auto")}d=!0}else this.getState().markTabUpdated(a[g]),c.push(a[g]);"string"==typeof a?this.logDebug("Update requested for: "+a):this.logDebug("Updates requested for: "+a.join(", "));var i=this.getState().serialize();$("#"+this.getStateProxyPayloadId()).val(i);for(var g=0;g<c.length;g++)this.logDebug("Triggering update for "+c[g]),tab=c[g],$("#"+this.getInfoFor(tab).UpdatePayloadId).val(i),__doPostBack(this.getInfoFor(tab).UpdateTriggerId,""),e=!0;0===c.length&&this.onReOpenTab();d&&!e&&this.getUseUIStateService()&&(this.logDebug("Sending state update via proxy."),__doPostBack(this.getStateProxyTriggerId(),""),e=!0)}}),Sage.ObjectConnectionService=function(){this.objectConnections={},this.add=function(a,b){this.objectConnections[b]=a},this.remove=function(a){delete this.objectConnections[a]},this.disconnect=function(a){dojo.disconnect(this.objectConnections[a])},this.disconnectAll=function(){for(var a in this.objectConnections)dojo.disconnect(this.objectConnections[a])},this.removeAll=function(){for(var a in this.objectConnections)delete this.objectConnections[a]}},Sage.Services.addService("ObjectConnectionService",new Sage.ObjectConnectionService),Sage.IntegrationContractService=function(){this.isIntegrationEnabled=!1,this.localAppId="";var a=dojo.byId("__IntegrationContractService");if(a){var b=dojo.fromJson(a.value);this.isIntegrationEnabled=b.IsIntegrationEnabled,this.localAppId=b.LocalAppId,this.isMultiCurrencyEnabled=b.IsMultiCurrencyEnabled,this.accountingSystemHandlesSO=b.AccountingSystemHandlesSO,this.currentUserEndpoints=b.UserEndpoints,this.hasUserDefinedEndpoints=b.HasUserDefinedEndpoints,this.isCPQIntegrationEnabled=b.IsCPQIntegrationEnabled,this.isBackOfficeIntegrationEnabled=b.IsBackOfficeIntegrationEnabled,this.isQuoteCRMPricingEnabled=b.IsQuoteCRMPricingEnabled,this.isSalesOrderCRMPricingEnabled=b.IsSalesOrderCRMPricingEnabled,this.isOpportunityCRMPricingEnabled=b.IsOpportunityCRMPricingEnabled,this.isProductCRMPricingEnabled=b.IsProductCRMPricingEnabled,this.isWorkflowIntegrationEnabled=b.IsWorkflowIntegrationEnabled}},Sage.IntegrationContractService.prototype.getCurrentOperatingCompanyId=function(){var a=Sage.Services.getService("ClientEntityContext");if(void 0!==a&&null!=a){var b=a.getContext(),c=new Date,d=dojo.replace("slxdata.ashx/slx/crm/-/context/getcurrentoperatingcompanyid?time={0}&entityType={1}&entityId={2}",[encodeURIComponent(c.getTime().toString()),encodeURIComponent(b.EntityType),encodeURIComponent(b.EntityId)]),e=dojo.xhrGet({url:d,handleAs:"json",error:function(a){return""}});return dojo.fromJson(e.responseText).id}return""},require(["dojo/dnd/Moveable","dojo/dom","dojo/on","dojo/query","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/_base/lang"],function(a,b,c,d,e,f,g,h){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},window.slxdatagrid=function(a){this.gridID=a,this.containerId=a+"_container",this.expandAllCell=null,this.expandable=!1,this.table=null,this.expandclassname="slxgridrowexpand",this.expandnoiconclassname="slxgridrowexpandnoicon",this.collapseclassname="slxgridrowcollapse",this.collapsenoiconclassname="slxgridrowcollapsenoicon",this.contentdivclassname="cellcontents",this.pagerclassname="gridPager",this.collapsedheight="16px",this.wids=[],this.key="",this.expandHandle=null,this.cookieMock={getCookie:function(a){return!1}},this.__idIndexer=0,this.HeaderRow=null;var d=b.byId(a);if(d){if(this.table=d,d.getAttribute("key")&&(this.key=d.getAttribute("key")),d.rows.length>0&&d.rows[0].cells.length>0){var f=e.contains(d.rows[0],this.pagerclassname)?d.rows[1].cells[0]:d.rows[0].cells[0];this.expandable=e.contains(f,this.expandclassname)||e.contains(f,this.expandnoiconclassname)||e.contains(f,this.collapseclassname)||e.contains(f,this.collapsenoiconclassname),this.expandable&&(this.expandAllCell=f,this.expandHandle&&this.expandHandle.remove(),this.expandHandle=c(f,"click",h.hitch(this,this.expandCollapseAll),!0))}this.setHeaderRow(),this.initColWidths(),this.setSortIDs(),this.attachResizeEvent()}},slxdatagrid.prototype.GridKey=function(){return this.gridID+this.key},slxdatagrid.prototype.dispose=function(){this.table=null,this.expandAllCell=null},slxdatagrid.prototype.getColIndexStart=function(){return this.expandable?1:0},slxdatagrid.prototype.setSortIDs=function(){if(this.table.rows.length>0&&this.HeaderRow)for(var a=this.table.id.lastIndexOf("_")>0?this.table.id.lastIndexOf("_")+1:0,c=this.table.id.substring(a),e=0;e<this.HeaderRow.cells.length;e++)for(var f=d("A",b.byId(this.HeaderRow.cells[e])),g=0;g<f.length;g++)f[g].id=c+this.__idIndexer++},slxdatagrid.prototype.expandCollapseAll=function(){var a;if(e.contains(this.expandAllCell,this.expandclassname)){for(a=1;a<this.table.rows.length;a++)this.expandRow(this.table.rows[a]);e.remove(this.expandAllCell,this.expandclassname),e.add(this.expandAllCell,this.collapseclassname)}else if(e.contains(this.expandAllCell,this.collapseclassname)){for(a=1;a<this.table.rows.length;a++)this.collapseRow(this.table.rows[a]);e.remove(this.expandAllCell,this.collapseclassname),e.add(this.expandAllCell,this.expandclassname)}},slxdatagrid.prototype.toggleRow=function(a){a&&(e.contains(a.cells[0],this.expandclassname)||e.contains(a.cells[0],this.expandnoiconclassname)?this.expandRow(a):(e.contains(a.cells[0],this.collapseclassname)||e.contains(a.cells[0],this.collapsenoiconclassname))&&this.collapseRow(a))},slxdatagrid.prototype.expandRow=function(a){if(a){var b=a.cells[0];if(e.contains(b,this.collapseclassname)||!e.contains(b,this.expandclassname)&&!e.contains(b,this.expandnoiconclassname))return;for(var c=this.collapsedheight.replace("px",""),d=this.getColIndexStart();d<a.cells.length;d++)b=a.cells[d],b.childNodes[0]&&e.contains(b.childNodes[0],this.contentdivclassname)&&b.childNodes[0].scrollHeight>c&&f.set(b.childNodes[0],"height","100%");var g=a.cells[0];e.contains(g,this.expandclassname)?(e.remove(g,this.expandclassname),e.add(g,this.collapseclassname)):(e.remove(g,this.expandnoiconclassname),e.add(g,this.collapsenoiconclassname))}},slxdatagrid.prototype.collapseRow=function(a){if(a){var b=a.cells[0];if(e.contains(b,this.expandclassname)||!e.contains(b,this.collapseclassname)&&!e.contains(b,this.collapsenoiconclassname))return;for(var c=this.collapsedheight.replace("px",""),d=c,g=this.getColIndexStart();g<a.cells.length;g++)b=a.cells[g],b.childNodes[0]&&e.contains(b.childNodes[0],this.contentdivclassname)&&(d=c<b.childNodes[0].scrollHeight?c:b.childNodes[0].scrollHeight,f.set(b.childNodes[0],"height",d+"px"));var h=a.cells[0];e.contains(h,this.collapseclassname)?(e.remove(h,this.collapseclassname),e.add(h,this.expandclassname)):(e.remove(h,this.collapsenoiconclassname),e.add(h,this.expandnoiconclassname))}},slxdatagrid.prototype.getRow=function(a){return this.table&&this.table.rows.length>a?this.table.rows[a]:null},slxdatagrid.prototype.initColWidths=function(){if(this.HeaderRow)if(this.getWidthsFromCookie()){this.expandable&&this.setWidth(0,"20",!1);for(var a=this.getColIndexStart();a<this.HeaderRow.cells.length;a++)this.setWidth(a,this.wids[a],!1)}else this.fillSpace()},slxdatagrid.prototype.fillSpace=function(){if(this.HeaderRow){this.expandable&&this.setWidth(0,"20",!1);var a=b.byId(this.containerId),c=this.getRegion(a),d=c.right-c.left,e=this.getRegion(this.table);this.doResize();var f=c.right-e.right,g=this.HeaderRow.cells.length;this.expandable&&g--;var h=Math.round(f/g);h--,this.getCurrentWidths();var i=this.expandable?1:0;if(h>3)for(var j=i;j<this.HeaderRow.cells.length;j++){var k=this.getRegion(this.table);if(k.right>c.right-h&&(h=c.right-k.right-2),k.right>c.right-4)return;var l=this.wids[j]+h;if(this.wids[j]){if(this.setWidth(j,l,!1),a.scrollWidth>d)return void this.setWidth(j,l-(a.scrollWidth-d),!1);k=this.getRegion(this.table);var m=k.right-k.left-2;if(m>=d){var n=l-(m-d+5);return void this.setWidth(j,n,!1)}}}}},slxdatagrid.prototype.getCurrentWidths=function(){if(this.HeaderRow){this.wids=[];for(var a=0;a<this.HeaderRow.cells.length;a++)this.wids.push(this.getColumnWidth(a))}},slxdatagrid.prototype.getColumnWidth=function(a){if(this.HeaderRow&&this.HeaderRow.cells[a]){var b=this.getRegion(this.HeaderRow.cells[a]);return b.right-b.left}return 0},slxdatagrid.prototype.getRegion=function(a){var b=g.position(a,!0);return{bottom:b.y-b.h,left:b.x,right:b.x+b.w,top:b.y}},slxdatagrid.prototype.getWidthsFromCookie=function(){var a=(cookie||this.cookieMock).getCookie("GRIDCW");if(a)for(var b=a.split("||"),c=0;c<b.length;c++){var d=b[c].split("!");if(d[0]==this.GridKey()&&d[1])return this.wids=d[1].split(":"),!0}return!1},slxdatagrid.prototype.setWidthsToCookie=function(){this.getCurrentWidths();var a=(cookie||this.cookieMock).getCookie("GRIDCW");if(a){var b=a.split("||");a="";for(var c=!0,d=0;d<b.length;d++){var e=b[d].split("!");e[0]==this.GridKey()&&(e[1]=this.generateWidthCookieString(),c=!1),a+=d>0?"||":"",a+=e[0]+"!"+e[1]}c&&(a+=""!==a?"||":"",a+=this.GridKey()+"!"+this.generateWidthCookieString())}else a=this.GridKey()+"!"+this.generateWidthCookieString();document.cookie="GRIDCW="+a},slxdatagrid.prototype.generateWidthCookieString=function(){for(var a="",b=0;b<this.wids.length;b++){a+=b>0?":":"";var c=this.wids[b];c=Math.round(c),a+=c}return a},slxdatagrid.prototype.setWidth=function(a,c,d){if(isNaN(c)||(c+="px"),this.HeaderRow){for(var e=0;e<this.table.rows.length;e++)if(this.table.rows[e].cells[a]){var f=b.byId(this.table.rows[e].cells[a]);f.style.width=c,f.style.position=""}d&&this.setWidthsToCookie()}},slxdatagrid.prototype.setHeaderRow=function(){for(var a=0;a<this.table.rows.length;a++)if(this.table.rows[a].getAttribute("HeaderRow"))return void(this.HeaderRow=this.table.rows[a])},slxdatagrid.prototype.doResize=function(){var a=b.byId(this.containerId),c=this.getRegion(a),d=this.getRegion(this.table);if(d.right-d.left>c.right-c.left&&""===a.style.height){var e=d.bottom-d.top;b.byId(this.containerId).style.height=e+20+"px"}},slxdatagrid.prototype.attachResizeEvent=function(){var a=window.mainViewport,b=!!a&&a.findById("center_panel_center");b&&b.on("resize",function(a,b,c,d,e){this.doResize()},this)},slxdatagridcolumn=function(d,e,f){if(d){this.datagrid=e,this.colIndex=f,this.headerColId=d,this.handleElId=d,this.isMoving=!1;var i=b.byId(d);i&&(this.domNode=i,this.position=g.position(this.domNode),this.moveable=new a(i),this.onMoveHandle=this.moveable.on("Move",h.hitch(this,this.onMove)),this.onFirstMoveHandle=this.moveable.on("FirstMove",h.hitch(this,this.onFirstMove)),this.onMoveStopHandle=this.moveable.on("MoveStop",h.hitch(this,this.onMoveStop)),this.onmouseoverHandle=c(i,"mouseover",h.hitch(this,this.onmouseover)),this.onmouseoutHandle=c(i,"mouseout",h.hitch(this,this.onmouseout)))}},slxdatagridcolumn.prototype.refreshPosition=function(){var a=b.byId(this.headerColId);a&&(this.domNode=a,this.position=g.position(this.domNode))},slxdatagridcolumn.prototype.dispose=function(){this.datagrid=null,this.onMoveHandle.remove(),this.onFirstMoveHandle.remove(),this.onMoveStopHandle.remove(),this.onmouseoverHandle.remove(),this.onmouseoutHandle.remove(),this.moveable.destroy()},slxdatagridcolumn.prototype.onFirstMove=function(a,b){this.startWidth=a.node.offsetWidth,this.startPosX=b.clientX,this.startTop=a.node.style.top,this.startLeft=a.node.style.left},slxdatagridcolumn.prototype.onMove=function(a,b,c){this.isMoving=!0,a.node.style.top=this.startTop,a.node.style.left=this.startLeft;var d=c.clientX-this.position.x;d*=1.1,f.set(a.node,"width",d+"px"),this.datagrid.setWidth(this.colIndex,a.node.style.width,!0),this.refreshPosition(),this.isMoving=!1},slxdatagridcolumn.prototype.onMoveStop=function(){this.isMoving=!1},slxdatagridcolumn.prototype.onmouseover=function(a){!this.isMoving&&this.isDraggableRegion(a.clientX)?this.domNode.style.cursor="col-resize":this.domNode.style.cursor=""},slxdatagridcolumn.prototype.isDraggableRegion=function(a){this.refreshPosition();var b=this.position.x+this.position.w,c=6;return a>b-c&&a<b+c},slxdatagridcolumn.prototype.onmouseout=function(){this.domNode.style.cursor=""}});var resizeTimerID=null,XML=window.XML;if(void 0===XML&&(XML=function(){}),XML.ObjTree=function(){return this},XML.ObjTree.VERSION="0.10",XML.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',XML.ObjTree.prototype.attr_prefix="-",XML.ObjTree.prototype.overrideMimeType="text/xml",XML.ObjTree.prototype.parseXML=function(a){return{}},XML.ObjTree.prototype.parseHTTP=function(a,b,c){},XML.ObjTree.prototype.parseDOM=function(a){},XML.ObjTree.prototype.parseElement=function(a){},XML.ObjTree.prototype.addNode=function(a,b,c,d){},XML.ObjTree.prototype.writeXML=function(a){return{}},XML.ObjTree.prototype.hash_to_xml=function(a,b){},XML.ObjTree.prototype.array_to_xml=function(a,b){},XML.ObjTree.prototype.scalar_to_xml=function(a,b){},XML.ObjTree.prototype.xml_escape=function(a){},function(){var a=window.Sage,b=a,c=(a.namespace("Sage.SData.Client.Ajax"),function(a){return a>=200&&a<300||304===a}),d=function(a,b){if(4==a.readyState)if(c(a.status))b.success&&b.success.call(b.scope||this,a,b);else if(0===a.status){var d=!1;try{d=""===a.statusText}catch(a){d=!0}if(d){var e=b.aborted||b.failure;e&&e.call(b.scope||this,a,b)}else b.failure&&b.failure.call(b.scope||this,a,b)}else b.failure&&b.failure.call(b.scope||this,a,b)},e=function(a,b){var c=b.timeout||b.failure;c&&c.call(b.scope||this,a,b)},f=function(a,b){a.ontimeout=function(){e.call(a,a,b)}},g=function(a,b){a.onreadystatechange=function(){d.call(a,a,b)}},h=function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};a.apply(a.SData.Client.Ajax,{request:function(a){a=b.apply({},a),a.params=b.apply({},a.params),a.headers=b.apply({},a.headers),!0!==a.cache&&(a.params[a.cacheParam||"_t"]=(new Date).getTime()),a.method=a.method||"GET";var c=h(a.params);c&&(a.url=a.url+(/\?/.test(a.url)?"&":"?")+c);var e=new XMLHttpRequest;a.user?e.open(a.method,a.url,!1!==a.async,a.user,a.password):e.open(a.method,a.url,!1!==a.async),a.withCredentials&&(e.withCredentials=!0);try{e.setRequestHeader("Accept",a.accept||"*/*"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.contentType&&e.setRequestHeader("Content-Type",a.contentType);for(var i in a.headers)e.setRequestHeader(i,a.headers[i]);var j=a.etagCache;a.cache&&j&&j.etag&&e.setRequestHeader("If-None-Match",j.etag)}catch(a){}return!1!==a.async?("number"==typeof a.requestTimeout&&a.requestTimeout>=0&&"number"==typeof e.timeout&&(e.timeout=a.requestTimeout,f(e,a)),g(e,a),e.send(a.body||null)):(e.send(a.body||null),d(e,a)),e},cancel:function(a){a.abort()}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataBaseRequest=a.Class.define({service:null,uri:null,completeHeaders:null,extendedHeaders:null,constructor:function(b){this.base.apply(this,arguments),this.service=b,this.completeHeaders={},this.extendedHeaders={},this.uri=new a.SData.Client.SDataUri;var c,d;this.service&&(this.uri.setVersion(this.service.getVersion()),c=this.service.getIncludeContent(),void 0!==c&&this.uri.setIncludeContent(c),this.uri.setServer(this.service.getVirtualDirectory()?this.service.getVirtualDirectory():"sdata"),this.uri.setScheme(this.service.getProtocol()),this.uri.setHost(this.service.getServerName()),this.uri.setPort(this.service.getPort()),void 0!==(d=this.service.getCompact())&&this.uri.setCompact(d))},clone:function(){return new a.SData.Client.SDataBaseRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},setRequestHeader:function(a,b){this.completeHeaders[a]=b},extendRequestHeader:function(a,b){this.extendedHeaders[a]=b},clearRequestHeader:function(a){delete this.completeHeaders[a],delete this.extendedHeaders[a]},getAccept:function(){return this.extendedHeaders.Accept},setAccept:function(a){return this.extendRequestHeader("Accept",a),this},getService:function(){return this.service},getUri:function(){return this.uri},setUri:function(a){return this.uri=a,this},getServerName:function(){return this.uri.getHost()},setServerName:function(a){return this.uri.setHost(a),this},getVirtualDirectory:function(){return this.uri.getServer()},setVirtualDirectory:function(a){return this.uri.setServer(a),this},getProtocol:function(){return this.uri.getScheme()},setProtocol:function(a){return this.uri.setScheme(a),this},getPort:function(){return this.uri.getPort()},setPort:function(a){return this.uri.setPort(a),this},getQueryArgs:function(){return this.uri.getQueryArgs()},setQueryArgs:function(a,b){return this.uri.setQueryArgs(a,b),this},getQueryArg:function(a){return this.uri.getQueryArg(a)},setQueryArg:function(a,b){
return this.uri.setQueryArg(a,b),this},build:function(a){return this.uri.build(a)},toString:function(a){return this.build(a)}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataApplicationRequest=a.SData.Client.SDataBaseRequest.extend({constructor:function(){this.base.apply(this,arguments),this.service&&(this.uri.setProduct(this.service.getApplicationName()?this.service.getApplicationName():"-"),this.uri.setContract(this.service.getContractName()?this.service.getContractName():"-"),this.uri.setCompanyDataset(this.service.getDataSet()?this.service.getDataSet():"-"))},clone:function(){return new a.SData.Client.SDataApplicationRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getApplicationName:function(){return this.uri.getProduct()},setApplicationName:function(a){return this.uri.setProduct(a),this},getContractName:function(){return this.uri.getContract()},setContractName:function(a){return this.uri.setContract(a),this},getDataSet:function(){return this.uri.getCompanyDataset()},setDataSet:function(a){return this.uri.setCompanyDataset(a),this},getResourceKind:function(){return this.uri.getCollectionType()},setResourceKind:function(a){return this.uri.setCollectionType(a),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataResourceCollectionRequest=a.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new a.SData.Client.SDataResourceCollectionRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getCount:function(){return this.uri.getCount()},setCount:function(a){return this.uri.setCount(a),this},getStartIndex:function(){return this.uri.getStartIndex()},setStartIndex:function(a){return this.uri.setStartIndex(a),this},read:function(a){return this.service.readFeed(this,a)}})}(),function(){var a=window.Sage,b=a.namespace("Sage.SData.Client");a.SData.Client.SDataNamedQueryRequest=a.SData.Client.SDataResourceCollectionRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex,b.SDataUri.NamedQuerySegment)},clone:function(){return new a.SData.Client.SDataNamedQueryRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getQueryName:function(){return this.uri.getPathSegment(b.SDataUri.ResourcePropertyIndex+1)},setQueryName:function(a){return this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex+1,a),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataSingleResourceRequest=a.SData.Client.SDataApplicationRequest.extend({key:"",constructor:function(){this.base.apply(this,arguments)},clone:function(){return new a.SData.Client.SDataSingleResourceRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},read:function(a){return this.service.readEntry(this,a)},update:function(a,b){return this.service.updateEntry(this,a,b)},create:function(a,b){return this.service.createEntry(this,a,b)},delete:function(a,b){return this.service.deleteEntry(this,a,b)},getResourceSelector:function(){return this.uri.getCollectionPredicate()},setResourceSelector:function(a){return this.uri.setCollectionPredicate(a),this},setResourceKey:function(a){return this.key=a,this.setResourceSelector('"'+this.key+'"'),this},getResourceKey:function(){return this.key}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataResourcePropertyRequest=a.SData.Client.SDataSingleResourceRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new a.SData.Client.SDataResourcePropertyRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},readFeed:function(a){return this.service.readFeed(this,a)},getResourceProperty:function(){return this.uri.getPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex)},setResourceProperty:function(b){return this.uri.setPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex,b),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataSystemRequest=a.SData.Client.SDataBaseRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(a.SData.Client.SDataUri.ProductPathIndex,a.SData.Client.SDataUri.SystemSegment)},clone:function(){return new a.SData.Client.SDataSystemRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getCategory:function(){this.uri.getPathSegment(a.SData.Client.SDataUri.ContractTypePathIndex)},setCategory:function(b){return this.uri.setPathSegment(a.SData.Client.SDataUri.ContractTypePathIndex,b),this},read:function(a){return this.service.readFeed(this,a)}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataTemplateResourceRequest=a.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex,a.SData.Client.SDataUri.TemplateSegment)},clone:function(){return new a.SData.Client.SDataTemplateResourceRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},read:function(a){return this.service.readEntry(this,a)}})}(),function(){var a=window.Sage,b=a.namespace("Sage.SData.Client");a.SData.Client.SDataServiceOperationRequest=a.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex,b.SDataUri.ServiceMethodSegment)},clone:function(){return new a.SData.Client.SDataServiceOperationRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},execute:function(a,b){return this.service.executeServiceOperation(this,a,b)},getOperationName:function(){return this.uri.getPathSegment(b.SDataUri.ResourcePropertyIndex+1)},setOperationName:function(a){return this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex+1,a),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataBatchRequest=a.SData.Client.SDataApplicationRequest.extend({items:null,constructor:function(){this.base.apply(this,arguments),this.items=[],this.uri.setPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex,a.SData.Client.SDataUri.BatchSegment)},clone:function(){return new a.SData.Client.SDataBatchRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri)).setItems(this.items.slice(0))},getItems:function(){return this.items},setItems:function(a){return this.items=a,this},using:function(a,b){if(!this.service)throw"A service must be associated with the batch request.";this.service.registerBatchScope(this);try{a.call(b||this,this)}catch(a){throw this.service.clearBatchScope(this),a}return this.service.clearBatchScope(this),this},add:function(a){this.items.push(a)},commit:function(a){this.service.commitBatch(this,a)}})}(),function(){var a=window.Sage,b=a,c=a.namespace("Sage.SData.Client"),d=/^true$/i;a.SData.Client.SDataUri=a.Class.define({scheme:"http",host:"",server:"",port:-1,version:null,queryArgs:null,pathSegments:null,constructor:function(a){this.base.apply(this,arguments),b.apply(this,a),this.queryArgs=b.apply({},a&&a.queryArgs),this.pathSegments=a&&a.pathSegments&&a.pathSegments.slice(0)||[],this.version=a&&a.version&&b.apply({},a.version)||{major:1,minor:0}},clone:function(){return new a.SData.Client.SDataUri(this)},getVersion:function(){return this.version},setVersion:function(a){return this.version=b.apply({major:0,minor:0},a),this},getScheme:function(){return this.scheme},setScheme:function(a){return this.scheme=a,this},getHost:function(){return this.host},setHost:function(a){return this.host=a,this},getPort:function(){return this.port},setPort:function(a){return this.port=a,this},getServer:function(){return this.server},setServer:function(a){return this.server=a,this},getQueryArgs:function(){return this.queryArgs},setQueryArgs:function(a,c){return this.queryArgs=c?a:b.apply(this.queryArgs,a),this},getQueryArg:function(a){return this.queryArgs[a]},setQueryArg:function(a,b){return this.queryArgs[a]=b,this},getPathSegments:function(){return this.pathSegments},setPathSegments:function(a){return this.pathSegments=a,this},getPathSegment:function(a){return this.pathSegments.length>a&&this.pathSegments[a]},setPathSegment:function(a,c,d){if(c||d)if("object"==typeof c)this.pathSegments[a]=b.apply({},c,this.pathSegments[a]);else{var e={};c&&(e.text=c),d&&(e.predicate=d),this.pathSegments[a]=b.apply({},e,this.pathSegments[a])}else this.pathSegments[a]=null;return this},getStartIndex:function(){return this.queryArgs[c.SDataUri.QueryArgNames.StartIndex]?parseInt(this.queryArgs[c.SDataUri.QueryArgNames.StartIndex]):-1},setStartIndex:function(a){return this.queryArgs[c.SDataUri.QueryArgNames.StartIndex]=a,this},getCount:function(){return this.queryArgs[c.SDataUri.QueryArgNames.Count]?parseInt(this.queryArgs[c.SDataUri.QueryArgNames.Count]):-1},setCount:function(a){return this.queryArgs[c.SDataUri.QueryArgNames.Count]=a,this},getIncludeContent:function(){var a,b;return a=this.version.major>=1?c.SDataUri.QueryArgNames.IncludeContent:c.SDataUri.QueryArgNames.LegacyIncludeContent,b=this.queryArgs[a],void 0!==b?d.test(b):b},setCompact:function(a){return this.queryArgs[c.SDataUri.QueryArgNames.Compact]=a,this},getCompact:function(){return this.queryArgs[c.SDataUri.QueryArgNames.Compact]},setIncludeContent:function(a){var b=this.version.major>=1?c.SDataUri.QueryArgNames.IncludeContent:c.SDataUri.QueryArgNames.LegacyIncludeContent;return this.queryArgs[b]=""+a,this},appendPath:function(a){var b="string"==typeof a?{text:a}:a;return this.pathSegments.push(b),this},toString:function(a){return this.build(a)},build:function(a){var b=[];b.push(this.getScheme()||c.SDataUri.Http),b.push(c.SDataUri.SchemeSuffix),b.push(c.SDataUri.PathSegmentPrefix),b.push(c.SDataUri.PathSegmentPrefix),b.push(this.getHost()),this.getPort()>0&&b.push(c.SDataUri.PortPrefix,this.getPort()),b.push(c.SDataUri.PathSegmentPrefix);var d=this.getPathSegments(),e=[],f=this.getServer();f&&f.length>0&&(e=e.concat(f.split("/")));for(var g=0;g<d.length;g++){var h=d[g];h&&h.text&&(h.predicate?e.push(encodeURIComponent(h.text+"("+h.predicate+")")):e.push(encodeURIComponent(h.text)))}if(b.push(e.join(c.SDataUri.PathSegmentPrefix)),a)return b.join("");var i=this.getQueryArgs(),j=[];for(var k in i)j.push(encodeURIComponent(k)+c.SDataUri.QueryArgValuePrefix+encodeURIComponent(i[k]));return j.length>0&&(b.push(c.SDataUri.QueryPrefix),b.push(j.join(c.SDataUri.QueryArgPrefix))),b.join("")},getProduct:function(){return this.getPathSegment(c.SDataUri.ProductPathIndex)},setProduct:function(a){return this.setPathSegment(c.SDataUri.ProductPathIndex,a)},getContract:function(){return this.getPathSegment(c.SDataUri.ContractTypePathIndex)},setContract:function(a){return this.setPathSegment(c.SDataUri.ContractTypePathIndex,a)},getCompanyDataset:function(){return this.getPathSegment(c.SDataUri.CompanyDatasetPathIndex)},setCompanyDataset:function(a){return this.setPathSegment(c.SDataUri.CompanyDatasetPathIndex,a)},getCollectionType:function(){return this.getPathSegment(c.SDataUri.CollectionTypePathIndex)},setCollectionType:function(a){return this.setPathSegment(c.SDataUri.CollectionTypePathIndex,a)},getCollectionPredicate:function(){var a=this.getPathSegment(c.SDataUri.CollectionTypePathIndex);return a&&a.predicate||!1},setCollectionPredicate:function(a){return this.setPathSegment(c.SDataUri.CollectionTypePathIndex,{predicate:a})}}),a.apply(a.SData.Client.SDataUri,{Http:"http",Https:"https",PathSegmentPrefix:"/",PortPrefix:":",QueryArgPrefix:"&",QueryArgValuePrefix:"=",QueryPrefix:"?",SchemeSuffix:":",UnspecifiedPort:-1,UriName:"uri",QueryArgNames:{Compact:"_compact",Count:"count",Exclude:"exclude",Format:"format",Include:"include",IncludeContent:"_includeContent",LegacyIncludeContent:"includeContent",IncludeSchema:"includeSchema",Language:"language",OrderBy:"orderby",Precedence:"precedence",ReturnDelta:"returnDelta",Search:"search",Select:"select",StartIndex:"startIndex",Thumbnail:"thumbnail",TrackingID:"trackingID",Where:"where"},ProductPathIndex:0,ContractTypePathIndex:1,CompanyDatasetPathIndex:2,CollectionTypePathIndex:3,ResourcePropertyIndex:4,ServiceMethodSegment:"$service",TemplateSegment:"$template",SystemSegment:"$system",NamedQuerySegment:"$queries",BatchSegment:"$batch"})}(),function(){var a=window.Sage,b=a,c=a.namespace("Sage.SData.Client"),d=function(a){return void 0!==a},e=function(a){return a&&a["#text"]?a["#text"]:a},f=/^(.+?):(.*)$/;a.SData.Client.SDataService=a.Evented.extend({uri:null,useCredentialedRequest:!1,useCrossDomainCookies:!1,userAgent:"Sage",userName:!1,password:"",batchScope:null,timeout:0,cache:!1,cacheParam:"_t",_etags:{},maxGetUriLength:2e3,constructor:function(a,b,c){this.base.call(this,a),this.setUri(a),d(a.includeContent)&&this.uri.setIncludeContent(a.includeContent),d(a.version)&&this.uri.setVersion(a.version),d(a.cache)&&(this.cache=a.cache),d(a.cacheParam)&&(this.cacheParam=a.cacheParam),d(a.compact)&&this.uri.setCompact(a.compact),d(a.userName)&&(this.userName=a.userName),d(a.password)&&(this.password=a.password),d(b)&&(this.userName=b),d(c)&&(this.password=c),d(a.json)&&(this.json=a.json),d(a.maxGetUriLength)&&(this.maxGetUriLength=a.maxGetUriLength),d(a.timeout)&&(this.timeout=a.timeout),d(a.useCredentialedRequest)&&(this.useCredentialedRequest=a.useCredentialedRequest),d(a.useCrossDomainCookies)&&(this.useCrossDomainCookies=a.useCrossDomainCookies),this.addEvents("beforerequest","requestcomplete","requestexception","requestaborted","requesttimeout")},setUri:function(b){if(d(b.uri))this.uri=new a.SData.Client.SDataUri(b.uri);else{this.uri=new a.SData.Client.SDataUri;var c=this.parseUri(b);d(c.serverName)&&this.uri.setHost(c.serverName),d(c.virtualDirectory)&&this.uri.setServer(c.virtualDirectory),d(c.applicationName)&&this.uri.setProduct(c.applicationName),d(c.contractName)&&this.uri.setContract(c.contractName),d(c.dataSet)&&this.uri.setCompanyDataset(c.dataSet),d(c.port)&&this.uri.setPort(c.port),d(c.protocol)&&this.uri.setScheme(c.protocol)}return this},parseUri:function(a){var c={},d="object"==typeof a?a.url:a,e="function"==typeof window.parseUri&&window.parseUri(d);if(e){e.host&&(c.serverName=e.host);var f=e.path.split("/").slice(1);f[0]&&(c.virtualDirectory=f[0]),f[1]&&(c.applicationName=f[1]),f[2]&&(c.contractName=f[2]),f[3]&&(c.dataSet=f[3]),e.port&&(c.port=parseInt(e.port)),e.protocol&&(c.protocol=e.protocol)}return"object"==typeof a&&b.apply(c,a),c},isJsonEnabled:function(){return this.json},enableJson:function(){return this.json=!0,this},disableJson:function(){return this.json=!1,this},getVersion:function(){return this.uri.getVersion()},setVersion:function(a){return this.uri.setVersion(a),this},getUri:function(){return this.uri},getUserName:function(){return this.userName},setUserName:function(a){return this.userName=a,this},getPassword:function(){return this.password},setPassword:function(a){return this.password=a,this},getProtocol:function(){return this.uri.getScheme()},setProtocol:function(a){return this.uri.setScheme(a),this},getServerName:function(){return this.uri.getHost()},setServerName:function(a){return this.uri.setHost(a),this},getPort:function(){return this.uri.getPort()},setPort:function(a){return this.uri.setPort(a),this},getVirtualDirectory:function(){return this.uri.getServer()},setVirtualDirectory:function(a){return this.uri.setServer(a),this},getApplicationName:function(){return this.uri.getProduct()},setApplicationName:function(a){return this.uri.setProduct(a),this},getContractName:function(){return this.uri.getContract()},setContractName:function(a){return this.uri.setContract(a),this},getDataSet:function(){return this.uri.getCompanyDataset()},setDataSet:function(a){return this.uri.setCompanyDataset(a),this},getIncludeContent:function(){return this.uri.getIncludeContent()},setIncludeContent:function(a){return this.uri.setIncludeContent(a),this},getCompact:function(){return this.uri.getCompact()},setCompact:function(a){return this.uri.setCompact(a),this},setMaxGetUriLength:function(a){return this.maxGetUriLength=a,this},getMaxGetUriLength:function(){return this.maxGetUriLength},getUserAgent:function(){return this.userAgent},setUserAgent:function(a){return this.userAgent=a,this},registerBatchScope:function(a){this.batchScope=a},clearBatchScope:function(a){this.batchScope=null},createBasicAuthToken:function(){return"Basic "+Base64.encode(this.userName+":"+this.password)},createHeadersForRequest:function(a){var b={"X-Authorization-Mode":"no-challenge"};return this.userName&&!this.useCredentialedRequest&&(b.Authorization=b["X-Authorization"]=this.createBasicAuthToken()),b},extendAcceptRequestHeader:function(a,b){return a?a.split(/\s*,\s*/).join(";"+b+",")+";"+b:a},executeRequest:function(a,d,e){this.json&&a.setQueryArg("format","json");var f=a.build(),g=b.apply({async:d.async,headers:{},method:"GET",url:f,cache:d.cache||this.cache,cacheParam:d.cacheParam||this.cacheParam,etagCache:this._etags[f]},{scope:this,success:function(b,c){var e=b.responseText;304===b.status&&(e=this._etags[f].responseText);var g=b.getResponseHeader&&b.getResponseHeader("Content-Type"),h=this.processFeed(e,g),i=b.getResponseHeader&&b.getResponseHeader("etag");this._etags[f]={etag:i,responseText:e},this.fireEvent("requestcomplete",a,c,h),d.success&&d.success.call(d.scope||this,h)},failure:function(b,c){this.fireEvent("requestexception",a,c,b),d.failure&&d.failure.call(d.scope||this,b,c)},aborted:function(b,c){this.fireEvent("requestaborted",a,c,b),d.aborted&&d.aborted.call(d.scope||this,b,c)},timeout:function(b,c){this.fireEvent("requesttimeout",a,c,b),d.timeout&&d.timeout.call(d.scope||this,b,c)}},e);return b.apply(g.headers,this.createHeadersForRequest(a),a.completeHeaders),"number"==typeof this.timeout&&(g.requestTimeout=this.timeout),a.extendedHeaders.Accept&&(g.headers.Accept=this.extendAcceptRequestHeader(g.headers.Accept,a.extendedHeaders.Accept)),(this.useCredentialedRequest||this.useCrossDomainCookies)&&(g.withCredentials=!0),this.useCredentialedRequest&&this.userName&&(g.user=this.userName,g.password=this.password),this.fireEvent("beforerequest",a,g),void 0!==g.result?void(d.success&&d.success.call(d.scope||this,g.result)):c.Ajax.request(g)},abortRequest:function(a){c.Ajax.cancel(a)},readFeed:function(a,b){if(b=b||{},this.batchScope)return void this.batchScope.add({url:a.build(),method:"GET"});var c={headers:{Accept:this.json?"application/json,*/*":"application/atom+xml;type=feed,*/*"}},d=a.build();return(b.httpMethodOverride||"string"==typeof d&&d.length>this.maxGetUriLength)&&(this.json&&a.setQueryArg("format","json"),c.headers["X-HTTP-Method-Override"]="GET",c.method="POST",c.body=a.build(),c.url=a.build(!0)),this.executeRequest(a,b,c)},readEntry:function(a,c){if(c=c||{},this.batchScope){var d={url:a.build(),method:"GET"},e=a.getResourceKey();return"string"==typeof e&&e.length>0&&(d.key=e),void this.batchScope.add(d)}var f=b.apply({},{success:function(a){var b=a.$resources[0]||!1;c.success&&c.success.call(c.scope||this,b)}},c);return this.executeRequest(a,f,{headers:{Accept:this.json?"application/json,*/*":"application/atom+xml;type=entry,*/*"}})},createEntry:function(a,c,d){if(d=d||{},this.batchScope)return void this.batchScope.add({url:a.build(),entry:c,method:"POST"});var e=b.apply({},{success:function(a){var b=a.$resources[0]||!1;d.success&&d.success.call(d.scope||this,b)}},d),f=b.apply({},{method:"POST"});if(this.isJsonEnabled())b.apply(f,{body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});else{var g=new XML.ObjTree;g.attr_prefix="@",b.apply(f,{body:g.writeXML(this.formatEntry(c)),headers:{"Content-Type":"application/atom+xml;type=entry",Accept:"application/atom+xml;type=entry,*/*"}})}return this.executeRequest(a,e,f)},updateEntry:function(a,c,d){if(d=d||{},this.batchScope)return void this.batchScope.add({url:a.build(),entry:c,method:"PUT",etag:c.$etag});var e=b.apply({},{success:function(a){var b=a.$resources[0]||!1;d.success&&d.success.call(d.scope||this,b)}},d),f={},g={method:"PUT",headers:f};if(!c.$etag||d&&d.ignoreETag||(f["If-Match"]=c.$etag),this.isJsonEnabled())f["Content-Type"]="application/json",g.body=JSON.stringify(c);else{var h=new XML.ObjTree;h.attr_prefix="@",f["Content-Type"]="application/atom+xml;type=entry",f.Accept="application/atom+xml;type=entry,*/*",g.body=h.writeXML(this.formatEntry(c))}return this.executeRequest(a,e,g)},deleteEntry:function(a,b,c){if(c=c||{},this.batchScope)return void this.batchScope.add({url:a.build(),method:"DELETE",etag:!(c&&c.ignoreETag)&&b.$etag});var d={},e={method:"DELETE",headers:d};return!b.$etag||c&&c.ignoreETag||(d["If-Match"]=b.$etag),this.executeRequest(a,c,e)},executeServiceOperation:function(a,c,d){var e=b.apply({},{success:function(a){var b=a.$resources[0]||!1,c=b&&b.response,e=c&&c.$resources,f=e&&e[0];f&&f.$name&&(b.response={},b.response[f.$name]=f),d.success&&d.success.call(d.scope||this,b)}},d),f=b.apply({},{method:"POST"});if(this.isJsonEnabled())b.apply(f,{body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});else{var g=new XML.ObjTree;g.attr_prefix="@",b.apply(f,{body:g.writeXML(this.formatEntry(c)),headers:{"Content-Type":"application/atom+xml;type=entry",Accept:"application/atom+xml;type=entry,*/*"}})}return this.executeRequest(a,e,f)},commitBatch:function(a,c){c=c||{};for(var d,e,f=a.getItems(),g={$resources:[]},h=0;h<f.length;h++)d=f[h],e=b.apply({},d.entry),d.url&&(e.$url=d.url),d.key&&(e.$key=d.key),d.etag&&(e.$ifMatch=d.etag),d.method&&(e.$httpMethod=d.method),delete e.$etag,g.$resources.push(e);var i=b.apply({},{method:"POST"});if(this.isJsonEnabled())b.apply(i,{body:JSON.stringify(g),headers:{"Content-Type":"application/json"}});else{var j=new XML.ObjTree;j.attr_prefix="@",b.apply(i,{body:j.writeXML(this.formatFeed(g)),headers:{"Content-Type":"application/atom+xml;type=feed",Accept:"application/atom+xml;type=feed,*/*"}})}return this.executeRequest(a,c,i)},parseFeedXml:function(a){var b=new XML.ObjTree;return b.attr_prefix="@",b.parseXML(a)},isIncludedReference:function(a,b,c){return c&&c.hasOwnProperty("@sdata:key")},isIncludedCollection:function(a,c,d){if(d.hasOwnProperty("@sdata:key"))return!1;if(d.hasOwnProperty("@sdata:uri")||d.hasOwnProperty("@sdata:url"))return!0;var e,f;for(var g in d)if("@"!==g.charAt(0)){e=d[g];break}return!!(e&&(f=b.isArray(e)?e[0]:e)&&f.hasOwnProperty("@sdata:key"))},convertEntity:function(a,b,c,d){d=d||{},d.$name=b,d.$key=c["@sdata:key"],d.$url=c["@sdata:uri"],d.$uuid=c["@sdata:uuid"];for(var e in c)if("@"!==e.charAt(0)){var g=f.exec(e),h=!!g&&g[1],i=g?g[2]:e,j=null,k=c[e];"object"==typeof k&&(j=k.hasOwnProperty("@xsi:nil")?null:this.isIncludedReference(h,i,k)?this.convertEntity(h,i,k):this.isIncludedCollection(h,i,k)?this.convertEntityCollection(h,i,k):this.convertCustomEntityProperty(h,i,k),k=j),d[i]=k}return d},convertEntityCollection:function(a,c,d){for(var e in d)if("@"!==e.charAt(0)){var g=f.exec(e),h=(!!g&&g[1],g?g[2]:e),i=d[e];if(b.isArray(i)){for(var j=[],k=0;k<i.length;k++)j.push(this.convertEntity(a,h,i[k]));return{$resources:j}}return{$resources:[this.convertEntity(a,h,i)]}}return null},convertCustomEntityProperty:function(a,b,c){return c},formatEntity:function(a,b,c){c=c||{},b.$key&&(c["@sdata:key"]=b.$key);for(var d in b)if("$"!==d.charAt(0)){var e=b[d];null==e?e={"@xsi:nil":"true"}:"object"==typeof e&&e.hasOwnProperty("$resources")?e=this.formatEntityCollection(a,e):"object"==typeof e&&(e=this.formatEntity(a,e)),c[d]=e}return c},formatEntityCollection:function(a,b){for(var c={},d=0;d<b.$resources.length;d++){var e=b.$resources[d],f=e.$name;(c[f]=c[f]||[]).push(this.formatEntity(a,b.$resources[d]))}return c},convertEntry:function(a){var b={};b.$descriptor=a.title,b.$etag=a["http:etag"],b.$httpStatus=a["http:httpStatus"];var c=a["sdata:payload"];for(var d in c)if("@"!==d.charAt(0)&&0!=c.hasOwnProperty(d)){var e,f,g=d.split(":"),h=c[d];if(2==g.length)e=g[0],f=g[1];else{if(!(g.length<2))continue;e=!1,f=d}this.convertEntity(e,f,h,b)}return b},formatEntry:function(a,b){var c={};return b||(c["@xmlns:sdata"]="http://schemas.sage.com/sdata/2008/1",c["@xmlns:xsi"]="http://www.w3.org/2001/XMLSchema-instance",c["@xmlns:http"]="http://schemas.sage.com/sdata/http/2008/1",c["@xmlns"]="http://www.w3.org/2005/Atom"),a.$httpMethod&&(c["http:httpMethod"]=a.$httpMethod),a.$ifMatch&&(c["http:ifMatch"]=a.$ifMatch),a.$etag&&(c["http:etag"]=a.$etag),a.$url&&(c.id=a.$url),c["sdata:payload"]={},c["sdata:payload"][a.$name]={"@xmlns":"http://schemas.sage.com/dynamic/2007"},this.formatEntity(!1,a,c["sdata:payload"][a.$name]),{entry:c}},convertFeed:function(a){var c,d={};if(a["opensearch:totalResults"]&&(d.$totalResults=parseInt(e(a["opensearch:totalResults"]))),a["opensearch:startIndex"]&&(d.$startIndex=parseInt(e(a["opensearch:startIndex"]))),a["opensearch:itemsPerPage"]&&(d.$itemsPerPage=parseInt(e(a["opensearch:itemsPerPage"]))),a.link){for(d.$link={},c=0;c<a.link.length;c++)d.$link[a.link[c]["@rel"]]=a.link[c]["@href"];d.$link.self&&(d.$url=d.$link.self)}if(d.$resources=[],b.isArray(a.entry))for(c=0;c<a.entry.length;c++)d.$resources.push(this.convertEntry(a.entry[c]));else"object"==typeof a.entry&&d.$resources.push(this.convertEntry(a.entry));return d},formatFeed:function(a){var b={};b["@xmlns:sdata"]="http://schemas.sage.com/sdata/2008/1",b["@xmlns:xsi"]="http://www.w3.org/2001/XMLSchema-instance",b["@xmlns:http"]="http://schemas.sage.com/sdata/http/2008/1",b["@xmlns"]="http://www.w3.org/2005/Atom",a.$url&&(b.id=a.$url),b.entry=[];for(var c=0;c<a.$resources.length;c++)b.entry.push(this.formatEntry(a.$resources[c],!0).entry);return{feed:b}},processFeed:function(a,b){if(!a)return null;var c;return/application\/json/i.test(b)||!b&&this.isJsonEnabled()?(c=JSON.parse(a),c.hasOwnProperty("$resources")?c:{$resources:[c]}):(c=this.parseFeedXml(a),c.hasOwnProperty("feed")?this.convertFeed(c.feed):c.hasOwnProperty("entry")?{$resources:[this.convertEntry(c.entry)]}:c)}})}(),function(){var a=/^\s+|\s+$/g,b=/(,)/,c=/'/g,d=/\n/g,e=/&/g,f=/</g,g=/>/g,h=/"/g,i={},j={},k=3!="is,ie".split(b).length,l={cacheMarkup:!0,tags:{begin:"{%",end:"%}"},allowWith:!1},m=this,n=function(a,b,c){if(c)for(var d in c)a[d]=c[d];if(b)for(var e in b)a[e]=b[e];return a},o=function(a){return"string"!=typeof a?a:a.replace(e,"&amp;").replace(f,"&lt;").replace(g,"&gt;").replace(h,"&quot;")},p=function(a){return a.replace(c,"\\'").replace(d,"\\n")},q=function(b){return b.replace(a,"")},r=function(a,b){var c=b.tags.begin,d=b.tags.end,e=[],f=0;if(!k){var g=c+d,h=j[g]||(j[g]=new RegExp(c+"(.*?)"+d));return e=a.split(h)}for(var i=0,l=0,m=[];-1!=(i=a.indexOf(c,l))&&-1!=(l=a.indexOf(d,i));)m[m.length]=i,m[m.length]=l;for(var n=0;n<m.length;n++)e[e.length]=a.substr(f,m[n]-f),f=m[n]+(n%2?d.length:c.length);return e.push(a.substr(f)),e},s=function(a,b){i[a]=b},t=function(a){return i[a]},u=function(a,b){var c,d,e,f,g,h,j;if(c=n({},b,l),a.join&&(a=a.join("")),c.cacheMarkup&&i[a])return i[a];for(d=r(a,c),e=1;e<d.length;e+=2)if(d[e].length>0)switch(g=d[e].charAt(0),h=d[e].substr(1),g){case"=":d[e]="__results.push("+h+");";break;case":":d[e]="__results.push(__simplate.encode("+h+"));";break;case"!":d[e]="__results.push("+q(h)+".apply(__data, __container));"}for(f=0;f<d.length;f+=2)d[f]="__results.push('"+p(d[f])+"');";d.unshift("var __results = [], $ = __data, $$ = __container, __simplate = Simplate;",c.allowWith?"with ($ || {}) {":""),d.push(c.allowWith?"}":"","return __results.join('');");try{j=new Function("__data, __container",d.join(""))}catch(a){j=function(b){return a.message}}return c.cacheMarkup?(i[a]=j,i[a]):j},v=function(a,b){this.fn=u(a,b)};n(v,{options:l,encode:o,make:u,setCache:s,getCache:t}),n(v.prototype,{apply:function(a,b){return this.fn.call(b||this,a,b||a)}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),m.Simplate=exports.Simplate=v):"function"==typeof define&&define.amd&&define("Simplate",[],function(){return v}),m.Simplate=v}(),dhtmlx=function(a){for(var b in a)dhtmlx[b]=a[b];return dhtmlx},dhtmlx.extend_api=function(a,b,c){var d=window[a];d&&(window[a]=function(a){if(!a||"object"!=typeof a||a.tagName||a instanceof Array)e=d.apply(this,arguments);else{var c,e=d.apply(this,b._init?b._init(a):arguments);for(c in dhtmlx)b[c]&&this[b[c]](dhtmlx[c]);for(c in a)b[c]?this[b[c]](a[c]):0==c.indexOf("on")&&this.attachEvent(c,a[c])}return b._patch&&b._patch(this),e||this},window[a].prototype=d.prototype,c&&dhtmlXHeir(window[a].prototype,c))},dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);return c.async=arguments.length<3,c.waitCall=b,c.loadXML(a),c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);return d.async=arguments.length<4,d.waitCall=c,d.loadXML(a,!0,b),d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}},dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){!a||null==a.onloadAction||a.xmlDoc.readyState&&4!=a.xmlDoc.readyState||!b||(b=!1,"function"==typeof a.onloadAction&&a.onloadAction(a.mainObject,null,null,null,a),a.waitCall&&(a.waitCall.call(this,a),a.waitCall=null))}},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);0==c.length&&-1!=a.indexOf(":")&&(c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]));var d=c[0]}else d=this.xmlDoc.documentElement;if(d)return this._retry=!1,d;if(_isIE&&!this._retry){var e=this.xmlDoc.responseText,b=this.xmlDoc;return this._retry=!0,this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=!1,this.xmlDoc.loadXML(e),this.getXMLTopNode(a,b)}return dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),document.createElement("DIV")},dtmlXMLLoaderObject.prototype.loadXMLString=function(a){try{var b=new DOMParser;this.xmlDoc=b.parseFromString(a,"text/xml")}catch(b){this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.loadXML(a)}this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null)},dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){this.rSeed&&(a+=(-1!=a.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=a,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(b?"POST":"GET",a,this.async),d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(c),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this.xmlDoc=this.mainObject=this.onloadAction=null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;for(b._tagvalue=a.firstChild?a.firstChild.nodeValue:"",c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b},dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null,a.dragStarter=null,a.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy,a.dragStarter=b,this.addDragLanding(a,b)},dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!a&&!event||2!=(a||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,
document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),a&&a.preventDefault&&a.preventDefault(),!1)},dhtmlDragAndDropObject.prototype.callDrag=function(a){if(a||(a=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(0==a.button&&_isIE)return dragger.stopDrag();if(!dragger.dragNode&&dragger.waitDrag){if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body){var b=dragger.gldragNode;dragger.gldragNode.old&&(b=dragger.gldragNode.old),b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;if(_isIE){var d=document.createElement("Div");d.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=d.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var e=a.srcElement?a.srcElement:a.target;dragger.checkLanding(e,a)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;if(parent.dhtmlDragAndDrop){var e=parent.dhtmlDragAndDrop.calculateFramePosition(1);c+=1*e.split("_")[0],d+=1*e.split("_")[1]}if(a)return c+"_"+d;this.fx=c,this.fy=d}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){if(dragger=window.dhtmlDragAndDrop,!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null,c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(a){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(a){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){a&&(window.dhtmlDragAndDrop.preCreateDragCopy({}),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||w<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(a){}for(var c=0;c<window.frames.length;c++)try{window.frames[c]!=a&&window.frames[c].dhtmlDragAndDrop&&window.frames[c].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(a){}},w=_OperaRv=x=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")){var x=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(x>525){_isFF=!0;var w=1.9}else _isKHTML=!0}else-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(_isIE=8)):(_isFF=!0,w=parseFloat(navigator.userAgent.split("rv:")[1]));if(dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),null!=c&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),"single"==d?b.selectSingleNode(a):b.selectNodes(a)||[];var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),-1!=b.nodeName.indexOf("document")?e=b:(e=b,b=b.ownerDocument);var f=XPathResult.ANY_TYPE;"single"==d&&(f=XPathResult.FIRST_ORDERED_NODE_TYPE);var g=[],h=b.evaluate(a,e,function(){return c},f,null);if(f==XPathResult.FIRST_ORDERED_NODE_TYPE)return h.singleNodeValue;for(var i=h.iterateNext();i;)g[g.length]=i,i=h.iterateNext();return g},z.prototype.catchError=function(a,b){this.catches[a]=b},z.prototype.throwError=function(a,b,c){return this.catches[a]?this.catches[a](a,b,c):this.catches.ALL?this.catches.ALL(a,b,c):(alert("Error type: "+a+"\nDescription: "+b),null)},window.dhtmlxError=new z,dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;if(!c.length)return[];if("."==c[0])d=[b];else{if(""!=c[0])return[];d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++}for(;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);return-1!=c[e-1].indexOf("[")&&(d=this._filterXPath(d,c[e-1])),d},dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=[],b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=[];_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c},dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){c||(c=this.xslDoc),c.responseXML&&(c=c.responseXML);var d=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");null!=d&&(d.firstChild.nodeValue=b)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){if(a||(a=this.xslDoc),a.responseXML&&(a=a.responseXML),b||(b=this.xmlDoc),b.responseXML&&(b=b.responseXML),_isIE){c=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(a,c)}catch(d){c=b.transformNode(a)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a));var c=this.XSLProcessor.transformToDocument(b)}return c},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){var c=this.doXSLTransToObject(a,b);return"string"==typeof c?c:this.doSerialization(c)},dtmlXMLLoaderObject.prototype.doSerialization=function(a){return a||(a=this.xmlDoc),a.responseXML&&(a=a.responseXML),_isIE?a.xml:(new XMLSerializer).serializeToString(a)},dhtmlxEventable=function(a){a.dhx_SeverCatcherPath="",a.attachEvent=function(a,b,c){return a="ev_"+a.toLowerCase(),this[a]||(this[a]=new this.eventCatcher(c||this)),a+":"+this[a].addEvent(b)},a.callEvent=function(a,b){return a="ev_"+a.toLowerCase(),!this[a]||this[a].apply(this,b)},a.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]},a.eventCatcher=function(a){var c=[],d=function(){for(var b=!0,d=0;d<c.length;d++)if(null!=c[d])var e=c[d].apply(a,arguments),b=b&&e;return b};return d.addEvent=function(a){return"function"!=typeof a&&(a=eval(a)),!!a&&c.push(a)-1},d.removeEvent=function(a){c[a]=null},d},a.detachEvent=function(a){if(0!=a){var b=a.split(":");this[b[0]].removeEvent(b[1])}},a.detachAllEvents=function(){for(var a in this)0==a.indexOf("ev_")&&delete this[a]}},dataProcessor.prototype={setTransactionMode:function(a,b){this._tMode=a,this._tSend=b},escape:function(a){return this._utf?encodeURIComponent(a):escape(a)},enableUTFencoding:function(a){this._utf=convertStringToBoolean(a)},setDataColumns:function(a){this._columns="string"==typeof a?a.split(","):a},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(a){this._endnm=convertStringToBoolean(a)},enablePartialDataSend:function(a){this._changed=convertStringToBoolean(a)},setUpdateMode:function(a,b){this.autoUpdate="cell"==a,this.updateMode=a,this.dnd=b},ignore:function(a,b){this._silent_mode=!0,a.call(b||window),this._silent_mode=!1},setUpdated:function(a,b,c){if(!this._silent_mode){var d=this.findRow(a),c=c||"updated",e=this.obj.getUserData(a,this.action_param);e&&"updated"==c&&(c=e),b?(this.set_invalid(a,!1),this.updatedRows[d]=a,this.obj.setUserData(a,this.action_param,c),this._in_progress[a]&&(this._in_progress[a]="wait")):this.is_invalid(a)||(this.updatedRows.splice(d,1),this.obj.setUserData(a,this.action_param,"")),b||this._clearUpdateFlag(a),this.markRow(a,b,c),b&&this.autoUpdate&&this.sendData(a)}},_clearUpdateFlag:function(){},markRow:function(a,b,c){var d="",e=this.is_invalid(a);if(e&&(d=this.styles[e],b=!0),this.callEvent("onRowMark",[a,b,c,e])&&(d=this.styles[b?c:"clear"]+d,this.obj[this._methods[0]](a,d),e&&e.details)){d+=this.styles[e+"_cell"];for(var f=0;f<e.details.length;f++)e.details[f]&&this.obj[this._methods[1]](a,f,d)}},getState:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(a,b,c){c&&(b={value:b,details:c,toString:function(){return this.value.toString()}}),this._invalid[a]=b},checkBeforeUpdate:function(){return!0},sendData:function(a){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===a||this._tSend)return this.sendAllData();if(this._in_progress[a])return!1;if(this.messages=[],!this.checkBeforeUpdate(a)&&this.callEvent("onValidatationError",[a,this.messages]))return!1;this._beforeSendData(this._getRowData(a),a)}},_beforeSendData:function(a,b){if(!this.callEvent("onBeforeUpdate",[b,this.getState(b),a]))return!1;this._sendData(a,b)},serialize:function(a,b){if("string"==typeof a)return a;if(void 0!==b)return this.serialize_one(a,"");var c,d=[],e=[];for(c in a)a.hasOwnProperty(c)&&(d.push(this.serialize_one(a[c],c+this.post_delim)),e.push(c));return d.push("ids="+this.escape(e.join(","))),d.join("&")},serialize_one:function(a,b){if("string"==typeof a)return a;var c,d=[];for(c in a)a.hasOwnProperty(c)&&d.push(this.escape((b||"")+c)+"="+this.escape(a[c]));return d.join("&")},_sendData:function(a,b){if(a){if(!this.callEvent("onBeforeDataSending",b?[b,this.getState(b),a]:[null,null,a]))return!1;b&&(this._in_progress[b]=(new Date).valueOf());var c=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),d=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");"POST"!=this._tMode?c.loadXML(d+(-1!=d.indexOf("?")?"&":"?")+this.serialize(a,b)):c.loadXML(d,!0,this.serialize(a,b)),this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var a=!0,b=0;b<this.updatedRows.length;b++)a&=this.checkBeforeUpdate(this.updatedRows[b]);if(!a&&!this.callEvent("onValidatationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(b=0;b<this.updatedRows.length&&(this._in_progress[this.updatedRows[b]]||this.is_invalid(this.updatedRows[b])||(this._beforeSendData(this._getRowData(this.updatedRows[b]),this.updatedRows[b]),!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2));b++);}},_getAllData:function(){for(var a={},b=!1,c=0;c<this.updatedRows.length;c++){var d=this.updatedRows[c];!this._in_progress[d]&&!this.is_invalid(d)&&this.callEvent("onBeforeUpdate",[d,this.getState(d)])&&(a[d]=this._getRowData(d,d+this.post_delim),b=!0,this._in_progress[d]=(new Date).valueOf())}return b?a:null},setVerificator:function(a,b){this.mandatoryFields[a]=b||function(a){return""!=a}},clearVerificator:function(a){this.mandatoryFields[a]=!1},findRow:function(a){for(var b=0,b=0;b<this.updatedRows.length&&a!=this.updatedRows[b];b++);return b},defineAction:function(a,b){this._uActions||(this._uActions=[]),this._uActions[a]=b},afterUpdateCallback:function(a,b,c,d){var e=a,f="error"!=c&&"invalid"!=c;if(f||this.set_invalid(a,c),this._uActions&&this._uActions[c]&&!this._uActions[c](d))return delete this._in_progress[e];"wait"!=this._in_progress[e]&&this.setUpdated(a,!1);switch(c){case"update":case"updated":case"inserted":case"insert":b!=a&&(this.obj[this._methods[2]](a,b),a=b);break;case"delete":case"deleted":return this.obj.setUserData(a,this.action_param,"true_deleted"),this.obj[this._methods[3]](a),delete this._in_progress[e],this.callEvent("onAfterUpdate",[a,c,b,d])}"wait"!=this._in_progress[e]?(f&&this.obj.setUserData(a,this.action_param,""),delete this._in_progress[e]):(delete this._in_progress[e],this.setUpdated(b,!0,this.obj.getUserData(a,this.action_param))),this.callEvent("onAfterUpdate",[a,c,b,d])},afterUpdate:function(a,b,c,d,e){if(e.getXMLTopNode("data"),e.xmlDoc.responseXML){for(var f=e.doXPath("//data/action"),g=0;g<f.length;g++){var h=f[g],i=h.getAttribute("type"),j=h.getAttribute("sid"),k=h.getAttribute("tid");a.afterUpdateCallback(j,k,i,h)}a.finalizeUpdate()}},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(a){this.obj=a,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},enableDebug:function(){},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",a)},setAutoUpdate:function(a,b){a=a||2e3,this._user=b||(new Date).valueOf(),this._need_update=!1,this._loader=null,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(a,b,c,d){this.afterAutoUpdate(a,b,c,d)}),this.attachEvent("onFullSync",function(){this.fullSync()});var c=this;window.setInterval(function(){c.loadUpdate()},a)},afterAutoUpdate:function(a,b){return"collision"!=b||(this._need_update=!0,!1)},fullSync:function(){return 1==this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(a,b){if(this._update_busy)return!1;this._update_busy=!0,this._loader=this._loader||new dtmlXMLLoaderObject(!0),this._loader.async=!0,this._loader.waitCall=b,this._loader.loadXML(a)},_v:function(a){return a.firstChild?a.firstChild.nodeValue:""},_a:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=this._v(a[c]);return b},loadUpdate:function(){var a=this,b=this.obj.getUserData(0,"version"),c=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+b].join("&"),c=c.replace("editing=true&","");this.getUpdates(c,function(){var b=a._loader.doXPath("//userdata");a.obj.setUserData(0,"version",a._v(b[0]));var c=a._loader.doXPath("//update");if(c.length){a._silent_mode=!0;for(var d=0;d<c.length;d++){var e=c[d].getAttribute("status"),f=c[d].getAttribute("id"),g=c[d].getAttribute("parent");switch(e){case"inserted":a.callEvent("insertCallback",[c[d],f,g]);break;case"updated":a.callEvent("updateCallback",[c[d],f,g]);break;case"deleted":a.callEvent("deleteCallback",[c[d],f,g])}}a._silent_mode=!1}a._update_busy=!1,a=null})}},window.dhtmlXGridObject&&(dhtmlXGridObject.prototype._init_point_connector=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){var a=function(a){return(a=a.replace(/(\?|\&)connector[^\f]*/g,""))+(-1!=a.indexOf("?")?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")},b=function(b){return a.call(this,b)+(this._connector_sorting||"")+(this._connector_filter||"")},c=function(a,c,d){return this._connector_sorting="&dhx_sort["+c+"]="+d,b.call(this,a)},d=function(a,c,d){for(var e=0;e<c.length;e++)c[e]="dhx_filter["+c[e]+"]="+encodeURIComponent(d[e]);return this._connector_filter="&"+c.join("&"),b.call(this,a)};this.attachEvent("onCollectValues",function(a){return!this._con_f_used[a]||"object"==typeof this._con_f_used[a]&&this._con_f_used[a]}),this.attachEvent("onDynXLS",function(){return this.xmlFileUrl=b.call(this,this.xmlFileUrl),!0}),this.attachEvent("onBeforeSorting",function(a,b,d){if("connector"==b){var e=this;return this.clearAndLoad(c.call(this,this.xmlFileUrl,a,d),function(){e.setSortImgState(!0,a,d)}),!1}return!0}),this.attachEvent("onFilterStart",function(a,b){return!this._con_f_used.length||(this.clearAndLoad(d.call(this,this.xmlFileUrl,a,b)),!1)}),this.attachEvent("onXLE",function(){}),this._init_point_connector&&this._init_point_connector()},dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(a,b){return this._con_f_used[b]||(this._con_f_used[b]=1),this._in_header_text_filter(a,b)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(a,b){return this._con_f_used[b]||(this._con_f_used[b]=2),this._in_header_select_filter(a,b)},dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(a,b,c){if(!this._colls_loaded&&this.cellType){for(var d=[],e=0;e<this.cellType.length;e++)(0==this.cellType[e].indexOf("co")||2==this._con_f_used[e])&&d.push(e);d.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+d.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(a,b,c){if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(var d=this.xmlLoader.doXPath("./coll_options",arguments[0]),e=0;e<d.length;e++){var f=d[e].getAttribute("for"),g=[],h=null;"combo"==this.cellType[f]&&(h=this.getColumnCombo(f)),0==this.cellType[f].indexOf("co")&&(h=this.getCombo(f));for(var i=this.xmlLoader.doXPath("./item",d[e]),j=0;j<i.length;j++){var k=i[j].getAttribute("value");if(h){var l=i[j].getAttribute("label")||k;h.addOption?h.addOption([[k,l]]):h.put(k,l),g[g.length]=l}else g[g.length]=k}this._con_f_used[1*f]&&(this._con_f_used[1*f]=g)}this._colls_loaded=!0}}),window.dataProcessor&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(a){this.init_original(a),a._dataprocessor=this,this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(a,b,c){0!=c[0].status&&alert(c[0].responseText)}),window.dhtmlXScheduler=window.scheduler={version:3},dhtmlxEventable(scheduler),scheduler.init=function(a,b,c){b=b||new Date,c=c||"week",scheduler.date.init(),this._obj="string"==typeof a?document.getElementById(a):a,this._els=[],this._scroll=!0,this._quirks=_isIE&&"BackCompat"==document.compatMode,this._quirks7=_isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this.get_elements(),this.init_templates(),this.set_actions(),dhtmlxEvent(window,"resize",function(){window.clearTimeout(scheduler._resize_timer),scheduler._resize_timer=window.setTimeout(function(){scheduler.callEvent("onSchedulerResize",[])&&scheduler.update_view()},100)}),this.set_sizes(),scheduler.callEvent("onSchedulerReady",[]),this.setCurrentView(b,c)},scheduler.xy={nav_height:22,min_event_height:40,scale_width:50,bar_height:20,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140},scheduler.keys={edit_save:13,edit_cancel:27},scheduler.set_sizes=function(){var a=this._x=this._obj.clientWidth-this.xy.margin_left,b=this._y=this._obj.clientHeight-this.xy.margin_top,c=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,d=this._table_view?-1:this.xy.scale_width;this.set_xy(this._els.dhx_cal_navline[0],a,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],a-c,this.xy.scale_height,d,this.xy.nav_height+(this._quirks?-1:1));var e=this._els.dhx_cal_navline[0].offsetHeight;e>0&&(this.xy.nav_height=e);var f=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],a,b-(f+2),0,f+2)},scheduler.set_xy=function(a,b,c,d,e){a.style.width=Math.max(0,b)+"px",a.style.height=Math.max(0,c)+"px",arguments.length>3&&(a.style.left=d+"px",a.style.top=e+"px")},scheduler.get_elements=function(){for(var a=this._obj.getElementsByTagName("DIV"),b=0;b<a.length;b++){var c=a[b].className;this._els[c]||(this._els[c]=[]),this._els[c].push(a[b]);var d=scheduler.locale.labels[a[b].getAttribute("name")||c];d&&(a[b].innerHTML=d)}},scheduler.set_actions=function(){for(var a in this._els)if(this._click[a])for(var b=0;b<this._els[a].length;b++)this._els[a][b].onclick=scheduler._click[a];this._obj.onselectstart=function(){return!1},this._obj.onmousemove=function(a){scheduler._on_mouse_move(a||event)},this._obj.onmousedown=function(a){scheduler._on_mouse_down(a||event)},this._obj.onmouseup=function(a){scheduler._on_mouse_up(a||event)},this._obj.ondblclick=function(a){scheduler._on_dbl_click(a||event)}},scheduler.select=function(a){!this._table_view&&this.getEvent(a)._timed&&this._select_id!=a&&(this.editStop(!1),this.unselect(),this._select_id=a,this.updateEvent(a))},scheduler.unselect=function(a){if(!a||a==this._select_id){var b=this._select_id;this._select_id=null,b&&this.updateEvent(b)}},scheduler.getState=function(){return{mode:this._mode,date:this._date,min_date:this._min_date,max_date:this._max_date,editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event}},scheduler._click={dhx_cal_data:function(a){var b=a?a.target:event.srcElement,c=scheduler._locate_event(b),a=a||event;if(!(c&&!scheduler.callEvent("onClick",[c,a])||scheduler.config.readonly))if(c){scheduler.select(c);var d=b.className;-1!=d.indexOf("_icon")&&scheduler._click.buttons[d.split(" ")[1].replace("icon_","")](c)}else scheduler._close_not_saved()},dhx_cal_prev_button:function(){scheduler._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(a,b){scheduler.setCurrentView(scheduler.date.add(scheduler.date[scheduler._mode+"_start"](scheduler._date),b||1,scheduler._mode))},dhx_cal_today_button:function(){scheduler.setCurrentView(new Date)},dhx_cal_tab:function(){var a=this.getAttribute("name"),b=a.substring(0,a.search("_tab"));scheduler.setCurrentView(scheduler._date,b)},buttons:{delete:function(a){var b=scheduler.locale.labels.confirm_deleting;(!b||confirm(b))&&scheduler.deleteEvent(a)},edit:function(a){scheduler.edit(a)},save:function(){scheduler.editStop(!0)},details:function(a){scheduler.showLightbox(a)},cancel:function(){scheduler.editStop(!1)}}},scheduler.addEventNow=function(a,b,c){var d={};a&&null!==a.constructor.toString().match(/object/i)&&(d=a,a=null);var e=6e4*(this.config.event_duration||this.config.time_step);a||(a=Math.round((new Date).valueOf()/e)*e);var f=new Date(a);if(!b){var g=this.config.first_hour;g>f.getHours()&&(f.setHours(g),a=f.valueOf()),b=a+e}var h=new Date(b);f.valueOf()==h.valueOf()&&h.setTime(h.valueOf()+e),d.start_date=d.start_date||f,d.end_date=d.end_date||h,d.text=d.text||this.locale.labels.new_event,d.id=this._drag_id=this.uid(),this._drag_mode="new-size",this._loading=!0,this.addEvent(d),this.callEvent("onEventCreated",[this._drag_id,c]),this._loading=!1,this._drag_event={},this._on_mouse_up(c)},scheduler._on_dbl_click=function(a,b){if(b=b||a.target||a.srcElement,!this.config.readonly){var c=b.className.split(" ")[0];switch(c){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!scheduler.config.dblclick_create)break;var d=this._mouse_coords(a),e=this._min_date.valueOf()+6e4*(d.y*this.config.time_step+1440*(this._table_view?0:d.x)),e=this._correct_shift(e);this.addEventNow(e,null,a);break;case"dhx_body":case"dhx_wa_ev_body":case"dhx_cal_event_line":case"dhx_cal_event_clear":var f=this._locate_event(b);if(!this.callEvent("onDblClick",[f,a]))break;this.config.details_on_dblclick||this._table_view||!this.getEvent(f)._timed?this.showLightbox(f):this.edit(f);break;case"":if(b.parentNode)return scheduler._on_dbl_click(a,b.parentNode);default:var g=this["dblclick_"+c];g&&g.call(this,a)}}},scheduler._mouse_coords=function(a){var b,c=document.body,d=document.documentElement;b=a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+(c.scrollLeft||d.scrollLeft||0)-c.clientLeft,y:a.clientY+(c.scrollTop||d.scrollTop||0)-c.clientTop},b.x-=getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width),b.y-=getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els.dhx_cal_data[0].scrollTop,b.ev=a;var e=this["mouse_"+this._mode];if(e)return e.call(this,b);if(this._table_view){for(var f=0,f=1;f<this._colsS.heights.length&&!(this._colsS.heights[f]>b.y);f++);b.y=1440*(Math.max(0,Math.ceil(b.x/this._cols[0])-1)+7*Math.max(0,f-1))/this.config.time_step,b.x=0}else b.x=Math.max(0,Math.ceil(b.x/this._cols[0])-1),b.y=Math.max(0,Math.ceil(60*b.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step);return b},scheduler._close_not_saved=function(){if((new Date).valueOf()-(scheduler._new_event||0)>500&&scheduler._edit_id){var a=scheduler.locale.labels.confirm_closing;(!a||confirm(a))&&scheduler.editStop(scheduler.config.positive_closing)}},scheduler._correct_shift=function(a,b){return a-=6e4*(new Date(scheduler._min_date).getTimezoneOffset()-new Date(a).getTimezoneOffset())*(b?-1:1)},scheduler._on_mouse_move=function(a){if(this._drag_mode){var b=this._mouse_coords(a);if(!this._drag_pos||b.custom||this._drag_pos.x!=b.x||this._drag_pos.y!=b.y){if(this._edit_id!=this._drag_id&&this._close_not_saved(),this._drag_pos=b,"create"==this._drag_mode){this._close_not_saved(),this._loading=!0;var c=this._min_date.valueOf()+6e4*(b.y*this.config.time_step+1440*(this._table_view?0:b.x)),c=this._correct_shift(c);if(!this._drag_start)return void(this._drag_start=c);var d=c;if(d==this._drag_start)return;this._drag_id=this.uid(),this.addEvent(new Date(this._drag_start),new Date(d),this.locale.labels.new_event,this._drag_id,b.fields),this.callEvent("onEventCreated",[this._drag_id,a]),this._loading=!1,this._drag_mode="new-size"}var e=this.getEvent(this._drag_id);if("move"==this._drag_mode)c=this._min_date.valueOf()+6e4*(b.y*this.config.time_step+1440*b.x),!b.custom&&this._table_view&&(c+=1e3*this.date.time_part(e.start_date)),c=this._correct_shift(c),d=e.end_date.valueOf()-(e.start_date.valueOf()-c);else if(c=e.start_date.valueOf(),this._table_view?(d=this._min_date.valueOf()+b.y*this.config.time_step*6e4+(b.custom?0:864e5),"month"==this._mode&&(d=this._correct_shift(d,!1))):(d=this.date.date_part(new Date(e.end_date)).valueOf()+b.y*this.config.time_step*6e4,this._els.dhx_cal_data[0].style.cursor="s-resize",("week"==this._mode||"day"==this._mode)&&(d=this._correct_shift(d))),"new-size"==this._drag_mode)if(d<=this._drag_start)var f=b.shift||(this._table_view&&!b.custom?864e5:0),c=d-(b.shift?0:f),d=this._drag_start+(f||6e4*this.config.time_step);else c=this._drag_start;else d<=c&&(d=c+6e4*this.config.time_step);var g=new Date(d-1),h=new Date(c);(this._table_view||g.getDate()==h.getDate()&&g.getHours()<this.config.last_hour||scheduler._wa&&scheduler._wa._dnd)&&(e.start_date=h,e.end_date=new Date(d),this.config.update_render?this.update_view():this.updateEvent(this._drag_id)),this._table_view&&this.for_rendered(this._drag_id,function(a){a.className+=" dhx_in_move"})}}else if(scheduler.checkEvent("onMouseMove")){var i=this._locate_event(a.target||a.srcElement);this.callEvent("onMouseMove",[i,a])}},scheduler._on_mouse_context=function(a,b){return this.callEvent("onContextMenu",[this._locate_event(b),a])},scheduler._on_mouse_down=function(a,b){if(!this.config.readonly&&!this._drag_mode){if(b=b||a.target||a.srcElement,2==a.button||a.ctrlKey)return this._on_mouse_context(a,b);switch(b.className.split(" ")[0]){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_header":case"dhx_title":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_footer":this._drag_mode="resize";break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":this._drag_mode="create";break;case"":if(b.parentNode)return scheduler._on_mouse_down(a,b.parentNode);default:this._drag_id=this._drag_mode=null}if(this._drag_mode){var c=this._locate_event(b);this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[c,this._drag_mode,a])?(this._drag_id=c,this._drag_event=scheduler._lame_copy({},this._copy_event(this.getEvent(this._drag_id)||{}))):this._drag_mode=this._drag_id=0}this._drag_start=null}},scheduler._on_mouse_up=function(a){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var b=this.getEvent(this._drag_id);if(this._drag_event._dhx_changed||!this._drag_event.start_date||b.start_date.valueOf()!=this._drag_event.start_date.valueOf()||b.end_date.valueOf()!=this._drag_event.end_date.valueOf()){var c="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[b,a,c]))if(c&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create)return this._drag_mode=null,this.showLightbox(this._drag_id);this._drag_pos=!0,this._select_id=this._edit_id=this._drag_id}else this._new_event||this.callEvent(c?"onEventAdded":"onEventChanged",[this._drag_id,this.getEvent(this._drag_id)]);else c?this.deleteEvent(b.id,!0):(this._drag_event._dhx_changed=!1,scheduler._lame_copy(b,this._drag_event),this.updateEvent(b.id))}this._drag_pos&&this.render_view_data()}this._drag_pos=this._drag_mode=null},scheduler.update_view=function(){if(this._reset_scale(),this._load_mode&&this._load())return this._render_wait=!0;this.render_view_data()},scheduler.setCurrentView=function(a,b){if(a=a||this._date,b=b||this._mode,this.callEvent("onBeforeViewChange",[this._mode,this._date,b,a])){var c="dhx_cal_data",d=!(this._mode!=b||!this.config.preserve_scroll)&&this._els[c][0].scrollTop;this[this._mode+"_view"]&&b&&this._mode!=b&&this[this._mode+"_view"](!1),this._close_not_saved();var e="dhx_multi_day"
;this._els[e]&&(this._els[e][0].parentNode.removeChild(this._els[e][0]),this._els[e]=null),this._mode=b,this._date=a,this._table_view="month"==this._mode;for(var f=this._els.dhx_cal_tab,g=0;g<f.length;g++)f[g].className="dhx_cal_tab"+(f[g].getAttribute("name")==this._mode+"_tab"?" active":"");var h=this[this._mode+"_view"];h?h(!0):this.update_view(),"number"==typeof d&&(this._els[c][0].scrollTop=d),this.callEvent("onViewChange",[this._mode,this._date])}},scheduler._render_x_header=function(a,b,c,d){var e=document.createElement("DIV");e.className="dhx_scale_bar",this.set_xy(e,this._cols[a]-1,this.xy.scale_height-2,b,0),e.innerHTML=this.templates[this._mode+"_scale_date"](c,this._mode),d.appendChild(e)},scheduler._reset_scale=function(){if(this.templates[this._mode+"_date"]){var a=this._els.dhx_cal_header[0],b=this._els.dhx_cal_data[0],c=this.config;a.innerHTML="",b.scrollTop=0,b.innerHTML="";var d=(c.readonly||!c.drag_resize?" dhx_resize_denied":"")+(c.readonly||!c.drag_move?" dhx_move_denied":"");d&&(b.className="dhx_cal_data"+d),this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var e,f,g,h,i=parseInt(a.style.width),j=0;f=this.date[this._mode+"_start"](new Date(this._date.valueOf())),e=g=this._table_view?scheduler.date.week_start(f):f,h=this.date.date_part(new Date);var k=scheduler.date.add(f,1,this._mode),l=7;if(!this._table_view){var m=this.date["get_"+this._mode+"_end"];m&&(k=m(f)),l=Math.round((k.valueOf()-f.valueOf())/864e5)}this._min_date=e,this._els.dhx_cal_date[0].innerHTML=this.templates[this._mode+"_date"](f,k,this._mode);for(var n=0;n<l;n++){if(this._cols[n]=Math.floor(i/(l-n)),this._render_x_header(n,j,e,a),!this._table_view){var o=document.createElement("DIV"),p="dhx_scale_holder";e.valueOf()==h.valueOf()&&(p="dhx_scale_holder_now"),o.className=p+" "+this.templates.week_date_class(e,h),this.set_xy(o,this._cols[n]-1,c.hour_size_px*(c.last_hour-c.first_hour),j+this.xy.scale_width+1,0),b.appendChild(o),this.callEvent("onScaleAdd",[o,e])}e=this.date.add(e,1,"day"),i-=this._cols[n],j+=this._cols[n],this._colsS[n]=(this._cols[n-1]||0)+(this._colsS[n-1]||(this._table_view?0:this.xy.scale_width+2)),this._colsS.col_length=l+1}if(this._max_date=e,this._colsS[l]=this._cols[l-1]+this._colsS[l-1],this._table_view)this._reset_month_scale(b,f,g);else{if(this._reset_hours_scale(b,f,g),c.multi_day){var q="dhx_multi_day";this._els[q]&&(this._els[q][0].parentNode.removeChild(this._els[q][0]),this._els[q]=null);var r=this._els.dhx_cal_navline[0],s=r.offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,t=document.createElement("DIV");t.className=q,t.style.visibility="hidden",this.set_xy(t,this._colsS[this._colsS.col_length-1]+this.xy.scroll_width,0,0,s),b.parentNode.insertBefore(t,b);var u=t.cloneNode(!0);u.className=q+"_icon",u.style.visibility="hidden",this.set_xy(u,this.xy.scale_width,0,0,s),t.appendChild(u),this._els[q]=[t,u],this._els[q][0].onclick=this._click.dhx_cal_data}if(this.config.mark_now){var v=new Date;if(v<this._max_date&&v>this._min_date&&v.getHours()>=this.config.first_hour&&v.getHours()<this.config.last_hour){var w=this.locate_holder_day(v),x=60*v.getHours()+v.getMinutes(),y=document.createElement("DIV");y.className="dhx_now_time",y.style.top=Math.round((6e4*x-36e5*this.config.first_hour)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)+1+"px",b.childNodes[w].appendChild(y)}}}}},scheduler._reset_hours_scale=function(a){var b=document.createElement("DIV");b.className="dhx_scale_holder";for(var c=new Date(1980,1,1,this.config.first_hour,0,0),d=1*this.config.first_hour;d<this.config.last_hour;d++){var e=document.createElement("DIV");e.className="dhx_scale_hour",e.style.height=this.config.hour_size_px-(this._quirks?0:1)+"px",e.style.width=this.xy.scale_width+"px",e.innerHTML=scheduler.templates.hour_scale(c),b.appendChild(e),c=this.date.add(c,1,"hour")}a.appendChild(b),this.config.scroll_hour&&(a.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},scheduler._reset_month_scale=function(a,b,c){var d=scheduler.date.add(b,1,"month"),e=new Date;this.date.date_part(e),this.date.date_part(c);var f=Math.ceil(Math.round((d.valueOf()-c.valueOf())/864e5)/7),g=[],h=Math.floor(a.clientHeight/f)-22;this._colsS.height=h+22;for(var i=this._colsS.heights=[],j=0;j<=7;j++)g[j]=" style='height:"+h+"px; width:"+((this._cols[j]||0)-1)+"px;' ";var k=0;this._min_date=c;for(var l="<table cellpadding='0' cellspacing='0'>",j=0;j<f;j++){l+="<tr>";for(var m=0;m<7;m++){l+="<td";var n="";c<b?n="dhx_before":c>=d?n="dhx_after":c.valueOf()==e.valueOf()&&(n="dhx_now"),l+=" class='"+n+" "+this.templates.month_date_class(c,e)+"' ",l+="><div class='dhx_month_head'>"+this.templates.month_day(c)+"</div><div class='dhx_month_body' "+g[m]+"></div></td>",c=this.date.add(c,1,"day")}l+="</tr>",i[j]=k,k+=this._colsS.height}return l+="</table>",this._max_date=c,a.innerHTML=l,c},scheduler.getLabel=function(a,b){for(var c=this.config.lightbox.sections,d=0;d<c.length;d++)if(c[d].map_to==a)for(var e=c[d].options,f=0;f<e.length;f++)if(e[f].key==b)return e[f].label;return""},scheduler.updateCollection=function(a,b){var c=scheduler.serverList(a);return!!c&&(c.splice(0,c.length),c.push.apply(c,b||[]),scheduler.callEvent("onOptionsLoad",[]),scheduler.resetLightbox(),!0)},scheduler._lame_copy=function(a,b){for(var c in b)a[c]=b[c];return a},scheduler.date={init:function(){for(var a=scheduler.locale.date.month_short,b=scheduler.locale.date.month_short_hash={},c=0;c<a.length;c++)b[a[c]]=c;for(a=scheduler.locale.date.month_full,b=scheduler.locale.date.month_full_hash={},c=0;c<a.length;c++)b[a[c]]=c},date_part:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},week_start:function(a){var b=a.getDay();return scheduler.config.start_on_monday&&(0===b?b=6:b--),this.date_part(this.add(a,-1*b,"day"))},month_start:function(a){return a.setDate(1),this.date_part(a)},year_start:function(a){return a.setMonth(0),this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(a,b,c){var d=new Date(a.valueOf());switch(c){case"day":if(d.setDate(d.getDate()+b),a.getDate()==d.getDate()&&b)do{d.setTime(d.getTime()+36e5)}while(a.getDate()==d.getDate());break;case"week":d.setDate(d.getDate()+7*b);break;case"month":d.setMonth(d.getMonth()+b);break;case"year":d.setYear(d.getFullYear()+b);break;case"hour":d.setHours(d.getHours()+b);break;case"minute":d.setMinutes(d.getMinutes()+b);break;default:return scheduler.date["add_"+c](a,b,c)}return d},to_fixed:function(a){return a<10?"0"+a:a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(a,b){return a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+scheduler.date.to_fixed(date.getDate())+"';case"%m":return'"+scheduler.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+scheduler.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+scheduler.locale.date.day_short[date.getDay()]+"';case"%l":return'"+scheduler.locale.date.day_full[date.getDay()]+"';case"%M":return'"+scheduler.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+scheduler.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+scheduler.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+scheduler.date.to_fixed(date.getHours())+"';case"%i":return'"+scheduler.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+scheduler.date.to_fixed(date.getSeconds())+"';case"%W":return'"+scheduler.date.to_fixed(scheduler.date.getISOWeek(date))+"';default:return a}}),b&&(a=a.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+a+'";')},str_to_date:function(a,b){for(var c="var temp=date.split(/[^0-9a-zA-Z]+/g);",d=a.match(/%[a-zA-Z]/g),e=0;e<d.length;e++)switch(d[e]){case"%j":case"%d":c+="set[2]=temp["+e+"]||1;";break;case"%n":case"%m":c+="set[1]=(temp["+e+"]||1)-1;";break;case"%y":c+="set[0]=temp["+e+"]*1+(temp["+e+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":c+="set[3]=temp["+e+"]||0;";break;case"%i":c+="set[4]=temp["+e+"]||0;";break;case"%Y":c+="set[0]=temp["+e+"]||0;";break;case"%a":case"%A":c+="set[3]=set[3]%12+((temp["+e+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":c+="set[5]=temp["+e+"]||0;";break;case"%M":c+="set[1]=scheduler.locale.date.month_short_hash[temp["+e+"]]||0;";break;case"%F":c+="set[1]=scheduler.locale.date.month_full_hash[temp["+e+"]]||0;"}var f="set[0],set[1],set[2],set[3],set[4],set[5]";return b&&(f=" Date.UTC("+f+")"),new Function("date","var set=[0,0,1,0,0,0]; "+c+" return new Date("+f+");")},getISOWeek:function(a){if(!a)return!1;var b=a.getDay();0===b&&(b=7);var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.round((c.getTime()-new Date(d,0,1).getTime())/864e5);return 1+Math.floor(e/7)},getUTCISOWeek:function(a){return this.getISOWeek(a)}},scheduler.locale={date:{month_full:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),month_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),day_full:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda"}},scheduler.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",xml_date:"%m/%d/%Y %H:%i",api_date:"%d-%m-%Y %H:%i",hour_size_px:42,time_step:5,start_on_monday:1,first_hour:0,last_hour:24,readonly:!1,drag_resize:1,drag_move:1,drag_create:1,dblclick_create:1,edit_on_create:1,details_on_create:0,click_form_details:0,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,drag_lightbox:!0,preserve_scroll:!0,server_utc:!1,positive_closing:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",height:200,map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},repeat_date_of_end:"01.01.2010"},scheduler.templates={},scheduler.init_templates=function(){var a=scheduler.date.date_to_str,b=scheduler.config;(function(a,b){for(var c in b)a[c]||(a[c]=b[c])})(scheduler.templates,{day_date:a(b.default_date),month_date:a(b.month_date),week_date:function(a,b){return scheduler.templates.day_date(a)+" &ndash; "+scheduler.templates.day_date(scheduler.date.add(b,-1,"day"))},day_scale_date:a(b.default_date),month_scale_date:a(b.week_date),week_scale_date:a(b.day_date),hour_scale:a(b.hour_date),time_picker:a(b.hour_date),event_date:a(b.hour_date),month_day:a(b.month_day),xml_date:scheduler.date.str_to_date(b.xml_date,b.server_utc),load_format:a(b.load_date,b.server_utc),xml_format:a(b.xml_date,b.server_utc),api_date:scheduler.date.str_to_date(b.api_date),event_header:function(a,b){return scheduler.templates.event_date(a)+" - "+scheduler.templates.event_date(b)},event_text:function(a,b,c){return c.text},event_class:function(){return""},month_date_class:function(){return""},week_date_class:function(){return""},event_bar_date:function(a){return scheduler.templates.event_date(a)+" "},event_bar_text:function(a,b,c){return c.text}}),this.callEvent("onTemplatesReady",[])},scheduler.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++},scheduler._events={},scheduler.clearAll=function(){this._events={},this._loaded={},this.clear_view()},scheduler.addEvent=function(a,b,c,d,e){if(!arguments.length)return this.addEventNow();var f=a;1!=arguments.length&&(f=e||{},f.start_date=a,f.end_date=b,f.text=c,f.id=d),f.id=f.id||scheduler.uid(),f.text=f.text||"","string"==typeof f.start_date&&(f.start_date=this.templates.api_date(f.start_date)),"string"==typeof f.end_date&&(f.end_date=this.templates.api_date(f.end_date));var g=6e4*(this.config.event_duration||this.config.time_step);f.start_date.valueOf()==f.end_date.valueOf()&&f.end_date.setTime(f.end_date.valueOf()+g),f._timed=this.is_one_day_event(f);var h=!this._events[f.id];this._events[f.id]=f,this.event_updated(f),this._loading||this.callEvent(h?"onEventAdded":"onEventChanged",[f.id,f])},scheduler.deleteEvent=function(a,b){var c=this._events[a];(b||this.callEvent("onBeforeEventDelete",[a,c])&&this.callEvent("onConfirmedBeforeEventDelete",[a,c]))&&(c&&(delete this._events[a],this.unselect(a),this.event_updated(c)),this.callEvent("onEventDeleted",[a]))},scheduler.getEvent=function(a){return this._events[a]},scheduler.setEvent=function(a,b){this._events[a]=b},scheduler.for_rendered=function(a,b){for(var c=this._rendered.length-1;c>=0;c--)this._rendered[c].getAttribute("event_id")==a&&b(this._rendered[c],c)},scheduler.changeEventId=function(a,b){if(a!=b){var c=this._events[a];c&&(c.id=b,this._events[b]=c,delete this._events[a]),this.for_rendered(a,function(a){a.setAttribute("event_id",b)}),this._select_id==a&&(this._select_id=b),this._edit_id==a&&(this._edit_id=b),this.callEvent("onEventIdChange",[a,b])}},function(){for(var a="text,Text,start_date,StartDate,end_date,EndDate".split(","),b=function(a){return function(b){return scheduler.getEvent(b)[a]}},c=function(a){return function(b,c){var d=scheduler.getEvent(b);d[a]=c,d._changed=!0,d._timed=this.is_one_day_event(d),scheduler.event_updated(d,!0)}},d=0;d<a.length;d+=2)scheduler["getEvent"+a[d+1]]=b(a[d]),scheduler["setEvent"+a[d+1]]=c(a[d])}(),scheduler.event_updated=function(a){this.is_visible_events(a)?this.render_view_data():this.clear_event(a.id)},scheduler.is_visible_events=function(a){return a.start_date<this._max_date&&this._min_date<a.end_date},scheduler.is_one_day_event=function(a){var b=a.end_date.getDate()-a.start_date.getDate();return b?(b<0&&(b=Math.ceil((a.end_date.valueOf()-a.start_date.valueOf())/864e5)),1==b&&!a.end_date.getHours()&&!a.end_date.getMinutes()&&(a.start_date.getHours()||a.start_date.getMinutes())):a.start_date.getMonth()==a.end_date.getMonth()&&a.start_date.getFullYear()==a.end_date.getFullYear()},scheduler.get_visible_events=function(){var a,b=[],c=this["filter_"+this._mode];for(a in this._events)this.is_visible_events(this._events[a])&&(this._table_view||this.config.multi_day||this._events[a]._timed)&&(!c||c(a,this._events[a]))&&b.push(this._events[a]);return b},scheduler.render_view_data=function(a,b){if(!a){if(this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),a=this.get_visible_events()}if(this.config.multi_day&&!this._table_view){for(var c=[],d=[],e=0;e<a.length;e++)a[e]._timed?c.push(a[e]):d.push(a[e]);this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(d,b),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(c,b)}else this._rendered_location=this._els.dhx_cal_data[0],this.render_data(a,b)},scheduler.render_data=function(a,b){for(var a=this._pre_render_events(a,b),c=0;c<a.length;c++)this._table_view?this.render_event_bar(a[c]):this.render_event(a[c])},scheduler._pre_render_events=function(a,b){var c=this.xy.bar_height,d=this._colsS.heights,e=this._colsS.heights=[0,0,0,0,0,0,0],f=this._els.dhx_cal_data[0],a=this._table_view?this._pre_render_events_table(a,b):this._pre_render_events_line(a,b);if(this._table_view)if(b)this._colsS.heights=d;else{var g=f.firstChild;if(g.rows){for(var h=0;h<g.rows.length;h++){if(++e[h]*c>this._colsS.height-22){for(var i=g.rows[h].cells,j=0;j<i.length;j++)i[j].childNodes[1].style.height=e[h]*c+"px";e[h]=(e[h-1]||0)+i[0].offsetHeight}e[h]=(e[h-1]||0)+g.rows[h].cells[0].offsetHeight}if(e.unshift(0),g.parentNode.offsetHeight<g.parentNode.scrollHeight&&!g._h_fix){for(h=0;h<g.rows.length;h++){var k=g.rows[h].cells[6].childNodes[0],l=k.offsetWidth-scheduler.xy.scroll_width+"px";k.style.width=l,k.nextSibling.style.width=l}g._h_fix=!0}}else if(!a.length&&"visible"==this._els.dhx_multi_day[0].style.visibility&&(e[0]=-1),a.length||-1==e[0]){var m=(g.parentNode.childNodes,(e[0]+1)*c+1+"px");f.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+parseInt(m)+"px",f.style.height=this._obj.offsetHeight-parseInt(f.style.top)-(this.xy.margin_top||0)+"px";var n=this._els.dhx_multi_day[0];n.style.height=m,n.style.visibility=-1==e[0]?"hidden":"visible",n=this._els.dhx_multi_day[1],n.style.height=m,n.style.visibility=-1==e[0]?"hidden":"visible",n.className=e[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(e[0]+1)*c,e[0]=0}}return a},scheduler._get_event_sday=function(a){return Math.floor((a.start_date.valueOf()-this._min_date.valueOf())/864e5)},scheduler._pre_render_events_line=function(a,b){a.sort(function(a,b){return a.start_date.valueOf()==b.start_date.valueOf()?a.id>b.id?1:-1:a.start_date>b.start_date?1:-1});for(var c=[],d=[],e=0;e<a.length;e++){var f=a[e],g=f.start_date.getHours(),h=f.end_date.getHours();if(f._sday=this._get_event_sday(f),c[f._sday]||(c[f._sday]=[]),!b){f._inner=!1;for(var i=c[f._sday];i.length&&i[i.length-1].end_date<=f.start_date;)i.splice(i.length-1,1);for(var j=!1,k=0;k<i.length;k++)if(i[k].end_date.valueOf()<f.start_date.valueOf()){j=!0,f._sorder=i[k]._sorder,i.splice(k,1),f._inner=!0;break}if(i.length&&(i[i.length-1]._inner=!0),!j)if(i.length)if(i.length<=i[i.length-1]._sorder){if(i[i.length-1]._sorder)for(k=0;k<i.length;k++){var l=!1;for(j=0;j<i.length;j++)if(i[j]._sorder==k){l=!0;break}if(!l){f._sorder=k;break}}else f._sorder=0;f._inner=!0}else{for(l=i[0]._sorder,k=1;k<i.length;k++)i[k]._sorder>l&&(l=i[k]._sorder);f._sorder=l+1,f._inner=!1}else f._sorder=0;i.push(f),i.length>(i.max_count||0)?(i.max_count=i.length,f._count=i.length):f._count=f._count?f._count:1}(g<this.config.first_hour||h>=this.config.last_hour)&&(d.push(f),a[e]=f=this._copy_event(f),g<this.config.first_hour&&(f.start_date.setHours(this.config.first_hour),f.start_date.setMinutes(0)),h>=this.config.last_hour&&(f.end_date.setMinutes(0),f.end_date.setHours(this.config.last_hour)),(f.start_date>f.end_date||g==this.config.last_hour)&&(a.splice(e,1),e--))}if(!b){for(e=0;e<a.length;e++)a[e]._count=c[a[e]._sday].max_count;for(e=0;e<d.length;e++)d[e]._count=c[d[e]._sday].max_count}return a},scheduler._time_order=function(a){a.sort(function(a,b){return a.start_date.valueOf()==b.start_date.valueOf()?a._timed&&!b._timed?1:!a._timed&&b._timed?-1:a.id>b.id?1:-1:a.start_date>b.start_date?1:-1})},scheduler._pre_render_events_table=function(a,b){this._time_order(a);for(var c,d=[],e=[[],[],[],[],[],[],[]],f=this._colsS.heights,g=this._cols.length,h=0;h<a.length;h++){var i=a[h],j=c||i.start_date,k=i.end_date;j<this._min_date&&(j=this._min_date),k>this._max_date&&(k=this._max_date);var l=this.locate_holder_day(j,!1,i);i._sday=l%g;var m=this.locate_holder_day(k,!0,i)||g;i._eday=m%g||g,i._length=m-l,i._sweek=Math.floor((this._correct_shift(j.valueOf(),1)-this._min_date.valueOf())/(864e5*g));var n,o=e[i._sweek];for(n=0;n<o.length&&!(o[n]._eday<=i._sday);n++);if(i._sorder&&b||(i._sorder=n),i._sday+i._length<=g)c=null,d.push(i),o[n]=i,f[i._sweek]=o.length-1;else{var p=this._copy_event(i);p._length=g-i._sday,p._eday=g,p._sday=i._sday,p._sweek=i._sweek,p._sorder=i._sorder,p.end_date=this.date.add(j,p._length,"day"),d.push(p),o[n]=p,c=p.end_date,f[i._sweek]=o.length-1,h--}}return d},scheduler._copy_dummy=function(){this.start_date=new Date(this.start_date),this.end_date=new Date(this.end_date)},scheduler._copy_event=function(a){return this._copy_dummy.prototype=a,new this._copy_dummy},scheduler._rendered=[],scheduler.clear_view=function(){for(var a=0;a<this._rendered.length;a++){var b=this._rendered[a];b.parentNode&&b.parentNode.removeChild(b)}this._rendered=[]},scheduler.updateEvent=function(a){var b=this.getEvent(a);this.clear_event(a),b&&this.is_visible_events(b)&&this.render_view_data([b],!0)},scheduler.clear_event=function(a){this.for_rendered(a,function(a,b){a.parentNode&&a.parentNode.removeChild(a),scheduler._rendered.splice(b,1)})},scheduler.render_event=function(a){var b=scheduler.xy.menu_width;if(!(a._sday<0)){var c=scheduler.locate_holder(a._sday);if(c){var d=60*a.start_date.getHours()+a.start_date.getMinutes(),e=60*a.end_date.getHours()+a.end_date.getMinutes()||60*scheduler.config.last_hour,f=Math.round((6e4*d-36e5*this.config.first_hour)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)+1,g=Math.max(scheduler.xy.min_event_height,(e-d)*this.config.hour_size_px/60)+1,h=Math.floor((c.clientWidth-b)/a._count),i=a._sorder*h+1;if(a._inner||(h*=a._count-a._sorder),this.config.cascade_event_display)var j=this.config.cascade_event_count,k=this.config.cascade_event_margin,i=a._sorder%j*k,l=a._inner?(a._count-a._sorder-1)%j*k/2:0,h=Math.floor(c.clientWidth-b-i-l);var m=this._render_v_bar(a.id,b+i,f,h,g,a._text_style,scheduler.templates.event_header(a.start_date,a.end_date,a),scheduler.templates.event_text(a.start_date,a.end_date,a));if(this._rendered.push(m),c.appendChild(m),i=i+parseInt(c.style.left,10)+b,this._edit_id==a.id){m.style.zIndex=1,h=Math.max(h-4,scheduler.xy.editor_width),m=document.createElement("DIV"),m.setAttribute("event_id",a.id),this.set_xy(m,h,g-20,i,f+14),m.className="dhx_cal_editor";var n=document.createElement("DIV");this.set_xy(n,h-6,g-26),n.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",m.appendChild(n),this._els.dhx_cal_data[0].appendChild(m),this._rendered.push(m),n.innerHTML="<textarea class='dhx_cal_editor'>"+a.text+"</textarea>",this._quirks7&&(n.firstChild.style.height=g-12+"px"),this._editor=n.firstChild,this._editor.onkeypress=function(a){if((a||event).shiftKey)return!0;var b=(a||event).keyCode;b==scheduler.keys.edit_save&&scheduler.editStop(!0),b==scheduler.keys.edit_cancel&&scheduler.editStop(!1)},this._editor.onselectstart=function(a){return(a||event).cancelBubble=!0},n.firstChild.focus(),this._els.dhx_cal_data[0].scrollLeft=0,n.firstChild.select()}if(this._select_id==a.id){this.config.cascade_event_display&&this._drag_mode&&(m.style.zIndex=1);for(var o=this.config["icons_"+(this._edit_id==a.id?"edit":"select")],p="",q=a.color?"background-color:"+a.color+";":"",r=a.textColor?"color:"+a.textColor+";":"",s=0;s<o.length;s++)p+="<div class='dhx_menu_icon "+o[s]+"' style='"+q+r+"' title='"+this.locale.labels[o[s]]+"'></div>";var t=this._render_v_bar(a.id,i-b+1,f,b,20*o.length+26,"","<div style='"+q+r+"' class='dhx_menu_head'></div>",p,!0);t.style.left=i-b+1,this._els.dhx_cal_data[0].appendChild(t),this._rendered.push(t)}}}},scheduler._render_v_bar=function(a,b,c,d,e,f,g,h,i){var j=document.createElement("DIV"),k=this.getEvent(a),l="dhx_cal_event",m=scheduler.templates.event_class(k.start_date,k.end_date,k);m&&(l=l+" "+m);var n=k.color?"background-color:"+k.color+";":"",o=k.textColor?"color:"+k.textColor+";":"",p='<div event_id="'+a+'" class="'+l+'" style="position:absolute; top:'+c+"px; left:"+b+"px; width:"+(d-4)+"px; height:"+e+"px;"+(f||"")+'">';return p+='<div class="dhx_header" style=" width:'+(d-6)+"px;"+n+'" >&nbsp;</div>',p+='<div class="dhx_title" style="'+n+o+'">'+g+"</div>",p+='<div class="dhx_body" style=" width:'+(d-(this._quirks?4:14))+"px; height:"+(e-(this._quirks?20:30))+"px;"+n+o+'">'+h+"</div>",p+='<div class="dhx_footer" style=" width:'+(d-8)+"px;"+(i?" margin-top:-1px;":"")+n+o+'" ></div></div>',j.innerHTML=p,j.firstChild},scheduler.locate_holder=function(a){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[a]},scheduler.locate_holder_day=function(a,b){var c=Math.floor((this._correct_shift(a,1)-this._min_date)/864e5);return b&&this.date.time_part(a)&&c++,c},scheduler.render_event_bar=function(a){var b=this._rendered_location,c=this._colsS[a._sday],d=this._colsS[a._eday];d==c&&(d=this._colsS[a._eday+1]);var e=this.xy.bar_height,f=this._colsS.heights[a._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+a._sorder*e,g=document.createElement("DIV"),h=a._timed?"dhx_cal_event_clear":"dhx_cal_event_line",i=scheduler.templates.event_class(a.start_date,a.end_date,a);i&&(h=h+" "+i);var j=a.color?"background-color:"+a.color+";":"",k=a.textColor?"color:"+a.textColor+";":"",l='<div event_id="'+a.id+'" class="'+h+'" style="position:absolute; top:'+f+"px; left:"+c+"px; width:"+(d-c-15)+"px;"+k+j+(a._text_style||"")+'">';a._timed&&(l+=scheduler.templates.event_bar_date(a.start_date,a.end_date,a)),l+=scheduler.templates.event_bar_text(a.start_date,a.end_date,a)+"</div>",l+="</div>",g.innerHTML=l,this._rendered.push(g.firstChild),b.appendChild(g.firstChild)},scheduler._locate_event=function(a){for(var b=null;a&&!b&&a.getAttribute;)b=a.getAttribute("event_id"),a=a.parentNode;return b},scheduler.edit=function(a){this._edit_id!=a&&(this.editStop(!1,a),this._edit_id=a,this.updateEvent(a))},scheduler.editStop=function(a,b){if(!b||this._edit_id!=b){var c=this.getEvent(this._edit_id);c&&(a&&(c.text=this._editor.value),this._editor=this._edit_id=null,this.updateEvent(c.id),this._edit_stop_event(c,a))}},scheduler._edit_stop_event=function(a,b){this._new_event?(b?this.callEvent("onEventAdded",[a.id,a]):this.deleteEvent(a.id,!0),this._new_event=null):b&&this.callEvent("onEventChanged",[a.id,a])},scheduler.getEvents=function(a,b){var c,d=[];for(c in this._events){var e=this._events[c];e&&e.start_date<b&&e.end_date>a&&d.push(e)}return d},scheduler._loaded={},scheduler._load=function(a,b){a=a||this._load_url,a+=(-1==a.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(a+="&uid="+this.uid());var c,b=b||this._date;if(this._load_mode){for(var d=this.templates.load_format,b=this.date[this._load_mode+"_start"](new Date(b.valueOf()));b>this._min_date;)b=this.date.add(b,-1,this._load_mode);c=b;for(var e=!0;c<this._max_date;)c=this.date.add(c,1,this._load_mode),this._loaded[d(b)]&&e?b=this.date.add(b,1,this._load_mode):e=!1;var f=c;do{c=f,f=this.date.add(c,-1,this._load_mode)}while(f>b&&this._loaded[d(f)]);if(c<=b)return!1;for(dhtmlxAjax.get(a+"&from="+d(b)+"&to="+d(c),function(a){scheduler.on_load(a)});b<c;)this._loaded[d(b)]=!0,b=this.date.add(b,1,this._load_mode)}else dhtmlxAjax.get(a,function(a){scheduler.on_load(a)});return this.callEvent("onXLS",[]),!0},scheduler.on_load=function(a){this._loading=!0;var b;b=this._process?this[this._process].parse(a.xmlDoc.responseText):this._magic_parser(a),this._not_render=!0;for(var c=0;c<b.length;c++)this.callEvent("onEventLoading",[b[c]])&&this.addEvent(b[c]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null,this.callEvent("onXLE",[])},scheduler.json={},scheduler.json.parse=function(a){"string"==typeof a&&(eval("scheduler._temp = "+a+";"),a=scheduler._temp);for(var b=[],c=0;c<a.length;c++)a[c].start_date=scheduler.templates.xml_date(a[c].start_date),a[c].end_date=scheduler.templates.xml_date(a[c].end_date),b.push(a[c]);return b},scheduler.parse=function(a,b){this._process=b,this.on_load({xmlDoc:{responseText:a}})},scheduler.load=function(a,b,c){"string"==typeof b&&(this._process=b,b=c),this._load_url=a,this._after_call=b,this._load(a,this._date)},scheduler.setLoadMode=function(a){"all"==a&&(a=""),this._load_mode=a},scheduler.refresh=function(){alert("not implemented")},scheduler.serverList=function(a,b){return this.serverList[a]=b?b.slice(0):this.serverList[a]||[]},scheduler._userdata={},scheduler._magic_parser=function(a){var b;if(!a.getXMLTopNode){var c=a.xmlDoc.responseText,a=new dtmlXMLLoaderObject(function(){});a.loadXMLString(c)}if(b=a.getXMLTopNode("data"),"data"!=b.tagName)return[];for(var d=a.doXPath("//coll_options"),e=0;e<d.length;e++){var f=d[e].getAttribute("for"),g=this.serverList[f];if(g){g.splice(0,g.length);for(var h=a.doXPath(".//item",d[e]),i=0;i<h.length;i++){for(var j=h[i],k=j.attributes,l={key:h[i].getAttribute("value"),label:h[i].getAttribute("label")},m=0;m<k.length;m++){var n=k[m];"value"!=n.nodeName&&"label"!=n.nodeName&&(l[n.nodeName]=n.nodeValue)}g.push(l)}}}d.length&&scheduler.callEvent("onOptionsLoad",[]);for(var o=a.doXPath("//userdata"),e=0;e<o.length;e++){var p=this.xmlNodeToJSON(o[e]);this._userdata[p.name]=p.text}var q=[];for(b=a.doXPath("//event"),e=0;e<b.length;e++)q[e]=this.xmlNodeToJSON(b[e]),q[e].text=q[e].text||q[e]._tagvalue,q[e].start_date=this.templates.xml_date(q[e].start_date),q[e].end_date=this.templates.xml_date(q[e].end_date);return q},scheduler.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;for(c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];1==d.nodeType&&(b[d.tagName]=d.firstChild?d.firstChild.nodeValue:"")}return b.text||(b.text=a.firstChild?a.firstChild.nodeValue:""),b},scheduler.attachEvent("onXLS",function(){if(!0===this.config.show_loading){var a;a=this.config.show_loading=document.createElement("DIV"),a.className="dhx_loading",a.style.left=Math.round((this._x-128)/2)+"px",a.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(a)}}),scheduler.attachEvent("onXLE",function(){var a;(a=this.config.show_loading)&&"object"==typeof a&&(this._obj.removeChild(a),this.config.show_loading=!0)}),scheduler.ical={parse:function(a){var b=a.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(b.length){b[0]=b[0].replace(/[\r\n]+(?=[a-z \t])/g," "),b[0]=b[0].replace(/\;[^:\r\n]*/g,"");for(var c,d=[],e=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");c=e.exec(b);){for(var f,g={},h=/[^\r\n]+[\r\n]+/g;f=h.exec(c[1]);)this.parse_param(f.toString(),g);g.uid&&!g.id&&(g.id=g.uid),d.push(g)}return d}},parse_param:function(a,b){var c=a.indexOf(":");if(-1!=c){var d=a.substr(0,c).toLowerCase(),e=a.substr(c+1).replace(/\\\,/g,",").replace(/[\r\n]+$/,"");"summary"==d?d="text":"dtstart"==d?(d="start_date",e=this.parse_date(e,0,0)):"dtend"==d&&(d="end_date",e=b.start_date&&0==b.start_date.getHours()?this.parse_date(e,24,0):this.parse_date(e,23,59)),b[d]=e}},parse_date:function(a,b,c){var d=a.split("T");d[1]&&(b=d[1].substr(0,2),c=d[1].substr(2,2));var e=d[0].substr(0,4),f=parseInt(d[0].substr(4,2),10)-1,g=d[0].substr(6,2);return scheduler.config.server_utc&&!d[1]?new Date(Date.UTC(e,f,g,b,c)):new Date(e,f,g,b,c)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"},scheduler.formSection=function(a){for(var b=this.config.lightbox.sections,c=0;c<b.length&&b[c].name!=a;c++);var d=b[c],e=document.getElementById(d.id).nextSibling;return{getValue:function(a){return scheduler.form_blocks[d.type].get_value(e,a||{},d)},setValue:function(a,b){return scheduler.form_blocks[d.type].set_value(e,a,b||{},d)}}},scheduler.form_blocks={template:{render:function(a){return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(a.height||"30")+"px;'></div>"},set_value:function(a,b){a.innerHTML=b||""},get_value:function(a){return a.innerHTML||""},focus:function(){}},textarea:{render:function(a){return"<div class='dhx_cal_ltext' style='height:"+(a.height||"130")+"px;'><textarea></textarea></div>"},set_value:function(a,b){a.firstChild.value=b||""},get_value:function(a){return a.firstChild.value},focus:function(a){
var b=a.firstChild;b.select(),b.focus()}},select:{render:function(a){for(var b=(a.height||"23")+"px",c="<div class='dhx_cal_ltext' style='height:"+b+";'><select style='width:100%;'>",d=0;d<a.options.length;d++)c+="<option value='"+a.options[d].key+"'>"+a.options[d].label+"</option>";return c+="</select></div>"},set_value:function(a,b){void 0===b&&(b=(a.firstChild.options[0]||{}).value),a.firstChild.value=b||""},get_value:function(a){return a.firstChild.value},focus:function(a){var b=a.firstChild;b.select&&b.select(),b.focus()}},time:{render:function(){var a=scheduler.config,b=this.date.date_part(new Date),c=1440,d=0;scheduler.config.limit_time_select&&(c=60*a.last_hour+1,d=60*a.first_hour,b.setHours(a.first_hour));for(var e="<select>",f=d,g=b.getDate();f<c;){e+="<option value='"+f+"'>"+this.templates.time_picker(b)+"</option>",b.setTime(b.valueOf()+6e4*this.config.time_step);var h=b.getDate()!=g?1:0,f=1440*h+60*b.getHours()+b.getMinutes()}for(e+="</select> <select>",f=1;f<32;f++)e+="<option value='"+f+"'>"+f+"</option>";for(e+="</select> <select>",f=0;f<12;f++)e+="<option value='"+f+"'>"+this.locale.date.month_full[f]+"</option>";for(e+="</select> <select>",b=b.getFullYear()-5,f=0;f<10;f++)e+="<option value='"+(b+f)+"'>"+(b+f)+"</option>";return"<div style='height:30px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+(e+="</select> ")+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+e+"</div>"},set_value:function(a,b,c){function d(a,b,c){a[b+0].value=Math.round((60*c.getHours()+c.getMinutes())/scheduler.config.time_step)*scheduler.config.time_step,a[b+1].value=c.getDate(),a[b+2].value=c.getMonth(),a[b+3].value=c.getFullYear()}var e=a.getElementsByTagName("select");if(scheduler.config.full_day){if(!a._full_day){var f="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+scheduler.locale.labels.full_day+"&nbsp;</label></input>";scheduler.config.wide_form||(f=a.previousSibling.innerHTML+f),a.previousSibling.innerHTML=f,a._full_day=!0}var g=a.previousSibling.getElementsByTagName("input")[0],h=0===scheduler.date.time_part(c.start_date)&&0===scheduler.date.time_part(c.end_date)&&c.end_date.valueOf()-c.start_date.valueOf()<1728e5;g.checked=h;for(var i in e)e[i].disabled=g.checked;g.onclick=function(){if(g.checked){var a=new Date(c.start_date),b=new Date(c.end_date);scheduler.date.date_part(a),b=scheduler.date.add(a,1,"day")}for(var f in e)e[f].disabled=g.checked;d(e,0,a||c.start_date),d(e,4,b||c.end_date)}}if(scheduler.config.auto_end_date&&scheduler.config.event_duration)for(var j=function(){c.start_date=new Date(e[3].value,e[2].value,e[1].value,0,e[0].value),c.end_date.setTime(c.start_date.getTime()+6e4*scheduler.config.event_duration),d(e,4,c.end_date)},k=0;k<4;k++)e[k].onchange=j;d(e,0,c.start_date),d(e,4,c.end_date)},get_value:function(a,b){s=a.getElementsByTagName("select"),b.start_date=new Date(s[3].value,s[2].value,s[1].value,0,s[0].value),b.end_date=new Date(s[7].value,s[6].value,s[5].value,0,s[4].value),b.end_date<=b.start_date&&(b.end_date=scheduler.date.add(b.start_date,scheduler.config.time_step,"minute"))},focus:function(a){a.getElementsByTagName("select")[0].focus()}}},scheduler.showCover=function(a){if(a){a.style.display="block";var b=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,c=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,d=window.innerHeight||document.documentElement.clientHeight;a.style.top=b?Math.round(b+Math.max((d-a.offsetHeight)/2,0))+"px":Math.round(Math.max((d-a.offsetHeight)/2,0)+9)+"px",a.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(c+(document.body.offsetWidth-a.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-a.offsetWidth)/2)+"px"}this.show_cover()},scheduler.showLightbox=function(a){if(a&&this.callEvent("onBeforeLightbox",[a])){var b=this._get_lightbox();this.showCover(b),this._fill_lightbox(a,b),this.callEvent("onLightbox",[a])}},scheduler._fill_lightbox=function(a,b){var c=this.getEvent(a),d=b.getElementsByTagName("span");scheduler.templates.lightbox_header?(d[1].innerHTML="",d[2].innerHTML=scheduler.templates.lightbox_header(c.start_date,c.end_date,c)):(d[1].innerHTML=this.templates.event_header(c.start_date,c.end_date,c),d[2].innerHTML=(this.templates.event_bar_text(c.start_date,c.end_date,c)||"").substr(0,70));for(var e=this.config.lightbox.sections,f=0;f<e.length;f++){var g=document.getElementById(e[f].id).nextSibling,h=this.form_blocks[e[f].type];h.set_value.call(this,g,c[e[f].map_to],c,e[f]),e[f].focus&&h.focus.call(this,g)}scheduler._lightbox_id=a},scheduler._lightbox_out=function(a){for(var b=this.config.lightbox.sections,c=0;c<b.length;c++){var d=document.getElementById(b[c].id),d=d?d.nextSibling:d,e=this.form_blocks[b[c].type],f=e.get_value.call(this,d,a,b[c]);"auto"!=b[c].map_to&&(a[b[c].map_to]=f)}return a},scheduler._empty_lightbox=function(){var a=scheduler._lightbox_id,b=this.getEvent(a);this._get_lightbox();this._lightbox_out(b),b._timed=this.is_one_day_event(b),this.setEvent(b.id,b),this._edit_stop_event(b,!0),this.render_view_data()},scheduler.hide_lightbox=function(){this.hideCover(this._get_lightbox()),this._lightbox_id=null,this.callEvent("onAfterLightbox",[])},scheduler.hideCover=function(a){a&&(a.style.display="none"),this.hide_cover()},scheduler.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},scheduler.show_cover=function(){this._cover=document.createElement("DIV"),this._cover.className="dhx_cal_cover";var a=void 0!==document.height?document.height:document.body.offsetHeight,b=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(a,b)+"px",document.body.appendChild(this._cover)},scheduler.save_lightbox=function(){this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,this._lightbox_out({id:this._lightbox_id}),this._new_event])||(this._empty_lightbox(),this.hide_lightbox())},scheduler.startLightbox=function(a,b){this._lightbox_id=a,this.showCover(b)},scheduler.endLightbox=function(a,b){this._edit_stop_event(scheduler.getEvent(this._lightbox_id),a),a&&scheduler.render_view_data(),this.hideCover(b)},scheduler.resetLightbox=function(){scheduler._lightbox&&scheduler._lightbox.parentNode.removeChild(scheduler._lightbox),scheduler._lightbox=null},scheduler.cancel_lightbox=function(){this.callEvent("onEventCancel",[this._lightbox_id,this._new_event]),this.endLightbox(!1),this.hide_lightbox()},scheduler._init_lightbox_events=function(){this._get_lightbox().onclick=function(a){var b=a?a.target:event.srcElement;if(b.className||(b=b.previousSibling),b&&b.className)switch(b.className){case"dhx_save_btn":scheduler.save_lightbox();break;case"dhx_delete_btn":var c=scheduler.locale.labels.confirm_deleting;c&&!confirm(c)||(scheduler.deleteEvent(scheduler._lightbox_id),scheduler._new_event=null,scheduler.hide_lightbox());break;case"dhx_cancel_btn":scheduler.cancel_lightbox();break;default:if(b.getAttribute("dhx_button"))scheduler.callEvent("onLightboxButton",[b.className,b,a]);else if(-1!=b.className.indexOf("dhx_custom_button_")){var d=b.parentNode.getAttribute("index"),e=scheduler.form_blocks[scheduler.config.lightbox.sections[d].type],f=b.parentNode.parentNode;e.button_click(d,b,f,f.nextSibling)}}},this._get_lightbox().onkeydown=function(a){switch((a||event).keyCode){case scheduler.keys.edit_save:if((a||event).shiftKey)break;scheduler.save_lightbox();break;case scheduler.keys.edit_cancel:scheduler.cancel_lightbox()}}},scheduler.setLightboxSize=function(){var a=this._lightbox;if(a){var b=a.childNodes[1];b.style.height="0px",b.style.height=b.scrollHeight+"px",a.style.height=b.scrollHeight+50+"px",b.style.height=b.scrollHeight+"px"}},scheduler._init_dnd_events=function(){dhtmlxEvent(document.body,"mousemove",scheduler._move_while_dnd),dhtmlxEvent(document.body,"mouseup",scheduler._finish_dnd),scheduler._init_dnd_events=function(){}},scheduler._move_while_dnd=function(a){if(scheduler._dnd_start_lb){document.dhx_unselectable||(document.body.className+=" dhx_unselectable",document.dhx_unselectable=!0);var b=scheduler._get_lightbox(),c=a&&a.target?[a.pageX,a.pageY]:[event.clientX,event.clientY];b.style.top=scheduler._lb_start[1]+c[1]-scheduler._dnd_start_lb[1]+"px",b.style.left=scheduler._lb_start[0]+c[0]-scheduler._dnd_start_lb[0]+"px"}},scheduler._ready_to_dnd=function(a){var b=scheduler._get_lightbox();scheduler._lb_start=[parseInt(b.style.left,10),parseInt(b.style.top,10)],scheduler._dnd_start_lb=a&&a.target?[a.pageX,a.pageY]:[event.clientX,event.clientY]},scheduler._finish_dnd=function(){scheduler._lb_start&&(scheduler._lb_start=scheduler._dnd_start_lb=!1,document.body.className=document.body.className.replace(" dhx_unselectable",""),document.dhx_unselectable=!1)},scheduler._get_lightbox=function(){if(!this._lightbox){var a=document.createElement("DIV");a.className="dhx_cal_light",scheduler.config.wide_form&&(a.className+=" dhx_cal_light_wide"),scheduler.form_blocks.recurring&&(a.className+=" dhx_cal_light_rec"),/msie|MSIE 6/.test(navigator.userAgent)&&(a.className+=" dhx_ie6"),a.style.visibility="hidden";var b=this._lightbox_template,c=this.config.buttons_left;scheduler.locale.labels.dhx_save_btn=scheduler.locale.labels.icon_save,scheduler.locale.labels.dhx_cancel_btn=scheduler.locale.labels.icon_cancel,scheduler.locale.labels.dhx_delete_btn=scheduler.locale.labels.icon_delete;for(var d=0;d<c.length;d++)b+="<div class='dhx_btn_set'><div dhx_button='1' class='"+c[d]+"'></div><div>"+scheduler.locale.labels[c[d]]+"</div></div>";for(c=this.config.buttons_right,d=0;d<c.length;d++)b+="<div class='dhx_btn_set' style='float:right;'><div dhx_button='1' class='"+c[d]+"'></div><div>"+scheduler.locale.labels[c[d]]+"</div></div>";b+="</div>",a.innerHTML=b,scheduler.config.drag_lightbox&&(a.firstChild.onmousedown=scheduler._ready_to_dnd,a.firstChild.onselectstart=function(){return!1},a.firstChild.style.cursor="pointer",scheduler._init_dnd_events()),document.body.insertBefore(a,document.body.firstChild),this._lightbox=a;for(var e=this.config.lightbox.sections,b="",d=0;d<e.length;d++){var f=this.form_blocks[e[d].type];if(f){e[d].id="area_"+this.uid();var g="";e[d].button&&(g="<div class='dhx_custom_button' index='"+d+"'><div class='dhx_custom_button_"+e[d].button+"'></div><div>"+this.locale.labels["button_"+e[d].button]+"</div></div>"),this.config.wide_form&&(b+="<div class='dhx_wrap_section'>"),b+="<div id='"+e[d].id+"' class='dhx_cal_lsection'>"+g+this.locale.labels["section_"+e[d].name]+"</div>"+f.render.call(this,e[d]),b+="</div>"}}a.getElementsByTagName("div")[1].innerHTML=b,this.setLightboxSize(),this._init_lightbox_events(this),a.style.display="none",a.style.visibility="visible"}return this._lightbox},scheduler._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>",scheduler._dp_init=function(a){a._methods=["setEventTextStyle","","changeEventId","deleteEvent"],this.attachEvent("onEventAdded",function(b){!this._loading&&this.validId(b)&&a.setUpdated(b,!0,"inserted")}),this.attachEvent("onConfirmedBeforeEventDelete",function(b){if(this.validId(b)){var c=a.getState(b);return"inserted"==c||this._new_event?(a.setUpdated(b,!1),!0):"deleted"!=c&&("true_deleted"==c||(a.setUpdated(b,!0,"deleted"),!1))}}),this.attachEvent("onEventChanged",function(b){!this._loading&&this.validId(b)&&a.setUpdated(b,!0,"updated")}),a._getRowData=function(a){var b,c=this.obj.getEvent(a),d={};for(b in c)0!=b.indexOf("_")&&(d[b]=c[b]&&c[b].getUTCFullYear?this.obj.templates.xml_format(c[b]):c[b]);return d},a._clearUpdateFlag=function(){},a.attachEvent("insertCallback",scheduler._update_callback),a.attachEvent("updateCallback",scheduler._update_callback),a.attachEvent("deleteCallback",function(a,b){this.obj.setUserData(b,this.action_param,"true_deleted"),this.obj.deleteEvent(b)})},scheduler.setUserData=function(a,b,c){a?this.getEvent(a)[b]=c:this._userdata[b]=c},scheduler.getUserData=function(a,b){return a?this.getEvent(a)[b]:this._userdata[b]},scheduler.setEventTextStyle=function(a,b){this.for_rendered(a,function(a){a.style.cssText+=";"+b});var c=this.getEvent(a);c._text_style=b,this.event_updated(c)},scheduler.validId=function(){return!0},scheduler._update_callback=function(a){var b=scheduler.xmlNodeToJSON(a.firstChild);b.text=b.text||b._tagvalue,b.start_date=scheduler.templates.xml_date(b.start_date),b.end_date=scheduler.templates.xml_date(b.end_date),scheduler.addEvent(b)},function(){function a(){for(var a=scheduler.get_visible_events(),b=[],c=0;c<this.y_unit.length;c++)b[c]=[];for(b[d]||(b[d]=[]),c=0;c<a.length;c++){for(var d=this.order[a[c][this.y_property]],e=0;this._trace_x[e+1]&&a[c].start_date>=this._trace_x[e+1];)e++;for(;this._trace_x[e]&&a[c].end_date>this._trace_x[e];)b[d][e]||(b[d][e]=[]),b[d][e].push(a[c]),e++}return b}function b(a,b,c){var d=0,e=b?a.end_date:a.start_date;e.valueOf()>scheduler._max_date.valueOf()&&(e=scheduler._max_date);var f=e-scheduler._min_date_timeline;if(f<0)j=0;else{var g=Math.round(f/(c*scheduler._cols[0]));g>scheduler._cols.length&&(g=scheduler._cols.length);for(var h=0;h<g;h++)d+=scheduler._cols[h];var i=scheduler.date.add(scheduler._min_date_timeline,scheduler.matrix[scheduler._mode].x_step*g,scheduler.matrix[scheduler._mode].x_unit),f=e-i,j=Math.floor(f/c)}return d+=b?j-14:j+1}function c(b){var c="<table style='table-layout:fixed;' cellspacing='0' cellpadding='0'>",d=[];if(scheduler._load_mode&&scheduler._load(),"cell"==this.render)d=a.call(this);else for(var e=scheduler.get_visible_events(),f=0;f<e.length;f++){var g=this.order[e[f][this.y_property]];d[g]||(d[g]=[]),d[g].push(e[f])}for(var h=0,i=0;i<scheduler._cols.length;i++)h+=scheduler._cols[i];var j=new Date;this._step=j=(scheduler.date.add(j,this.x_step*this.x_size,this.x_unit)-j)/h,this._summ=h;var k=scheduler._colsS.heights=[];for(this._events_height={},i=0;i<this.y_unit.length;i++){var l=this._logic(this.render,this.y_unit[i],this);scheduler._merge(l,{height:this.dy}),this.section_autoheight&&this.y_unit.length*l.height<b.offsetHeight&&(l.height=Math.max(l.height,Math.floor((b.offsetHeight-1)/this.y_unit.length))),scheduler._merge(l,{tr_className:"",style_height:"height:"+l.height+"px;",style_width:"width:"+(this.dx-1)+"px;",td_className:"dhx_matrix_scell"+(scheduler.templates[this.name+"_scaley_class"](this.y_unit[i].key,this.y_unit[i].label,this)?" "+scheduler.templates[this.name+"_scaley_class"](this.y_unit[i].key,this.y_unit[i].label,this):""),td_content:scheduler.templates[this.name+"_scale_label"](this.y_unit[i].key,this.y_unit[i].label,this.y_unit[i]),summ_width:"width:"+h+"px;",table_className:""});var m="";if(d[i]&&"cell"!=this.render){d[i].sort(function(a,b){return a.start_date>b.start_date?1:-1});for(var n=[],f=0;f<d[i].length;f++){for(var o=d[i][f],p=0;n[p]&&n[p].end_date>o.start_date;)p++;n[p]=o,m+=scheduler.render_timeline_event.call(this,o,p)}}if(this.fit_events){var q=this._events_height[this.y_unit[i].key]||0;l.height=q>l.height?q:l.height,l.style_height="height:"+l.height+"px;"}if(c+="<tr class='"+l.tr_className+"' style='"+l.style_height+"'><td class='"+l.td_className+"' style='"+l.style_width+" height:"+(l.height-1)+"px;'>"+l.td_content+"</td>","cell"==this.render)for(f=0;f<scheduler._cols.length;f++)c+="<td class='dhx_matrix_cell "+scheduler.templates[this.name+"_cell_class"](d[i][f],this._trace_x[f],this.y_unit[i])+"' style='width:"+(scheduler._cols[f]-1)+"px'><div style='width:"+(scheduler._cols[f]-1)+"px'>"+scheduler.templates[this.name+"_cell_value"](d[i][f])+"</div></td>";else{for(c+="<td><div style='"+l.summ_width+" "+l.style_height+" position:relative;' class='dhx_matrix_line'>",c+=m,c+="<table class='"+l.table_className+"' cellpadding='0' cellspacing='0' style='"+l.summ_width+" "+l.style_height+"' >",f=0;f<scheduler._cols.length;f++)c+="<td class='dhx_matrix_cell "+scheduler.templates[this.name+"_cell_class"](d[i],this._trace_x[f],this.y_unit[i])+"' style='width:"+(scheduler._cols[f]-1)+"px'><div style='width:"+(scheduler._cols[f]-1)+"px'></div></td>";c+="</table>",c+="</div></td>"}c+="</tr>"}c+="</table>",this._matrix=d,b.innerHTML=c,scheduler._rendered=[];for(var r=document.getElementsByTagName("DIV"),i=0;i<r.length;i++)r[i].getAttribute("event_id")&&scheduler._rendered.push(r[i]);for(i=0;i<b.firstChild.rows.length;i++)k.push(b.firstChild.rows[i].offsetHeight)}function d(a){var b=scheduler.xy.scale_height,c=this._header_resized||scheduler.xy.scale_height;scheduler._cols=[],scheduler._colsS={height:0},this._trace_x=[];var d=scheduler._x-this.dx-18,f=[this.dx];scheduler._els.dhx_cal_header[0].style.width=f[0]+d+"px";for(var g=scheduler._min_date_timeline=scheduler._min_date,h=0;h<this.x_size;h++)this._trace_x[h]=new Date(g),g=scheduler.date.add(g,this.x_step,this.x_unit),scheduler._cols[h]=Math.floor(d/(this.x_size-h)),d-=scheduler._cols[h],f[h+1]=f[h]+scheduler._cols[h];if(a.innerHTML="<div></div>",this.second_scale){for(var i=this.second_scale.x_unit,j=[this._trace_x[0]],l=[],m=[this.dx,this.dx],n=0,o=0;o<this._trace_x.length;o++){var p=this._trace_x[o];e(i,p,j[n])&&(++n,j[n]=p,m[n+1]=m[n]);var q=n+1;l[n]=scheduler._cols[o]+(l[n]||0),m[q]+=scheduler._cols[o]}a.innerHTML="<div></div><div></div>";var r=a.firstChild;r.style.height=c+"px";a.lastChild.style.position="relative";for(var s=0;s<j.length;s++){var t=j[s],u=scheduler.templates[this.name+"_second_scalex_class"](t),v=document.createElement("DIV");v.className="dhx_scale_bar dhx_second_scale_bar"+(u?" "+u:""),scheduler.set_xy(v,l[s]-1,c-3,m[s],0),v.innerHTML=scheduler.templates[this.name+"_second_scale_date"](t),r.appendChild(v)}}scheduler.xy.scale_height=c;for(var a=a.lastChild,w=0;w<this._trace_x.length;w++){g=this._trace_x[w],scheduler._render_x_header(w,f[w],g,a);var x=scheduler.templates[this.name+"_scalex_class"](g);x&&(a.lastChild.className+=" "+x)}scheduler.xy.scale_height=b;var y=this._trace_x;a.onclick=function(a){var b=k(a);b&&scheduler.callEvent("onXScaleClick",[b.x,y[b.x],a||event])},a.ondblclick=function(a){var b=k(a);b&&scheduler.callEvent("onXScaleDblClick",[b.x,y[b.x],a||event])}}function e(a,b,c){switch(a){case"day":return!(b.getDate()==c.getDate()&&b.getMonth()==c.getMonth()&&b.getFullYear()==c.getFullYear());case"week":return!(scheduler.date.getISOWeek(b)==scheduler.date.getISOWeek(c)&&b.getFullYear()==c.getFullYear());case"month":return!(b.getMonth()==c.getMonth()&&b.getFullYear()==c.getFullYear());case"year":return b.getFullYear()!=c.getFullYear();default:return!1}}function f(a){if(a){scheduler.set_sizes(),i();var b=scheduler._min_date;d.call(this,scheduler._els.dhx_cal_header[0]),c.call(this,scheduler._els.dhx_cal_data[0]),scheduler._min_date=b,scheduler._els.dhx_cal_date[0].innerHTML=scheduler.templates[this.name+"_date"](scheduler._min_date,scheduler._max_date),scheduler._table_view=!0}}function g(){scheduler._tooltip&&(scheduler._tooltip.style.display="none",scheduler._tooltip.date="")}function h(a,b,c){if("cell"==a.render){var d=b.x+"_"+b.y,e=a._matrix[b.y][b.x];if(!e)return g();if(e.sort(function(a,b){return a.start_date>b.start_date?1:-1}),scheduler._tooltip){if(scheduler._tooltip.date==d)return;scheduler._tooltip.innerHTML=""}else{var f=scheduler._tooltip=document.createElement("DIV");f.className="dhx_tooltip",document.body.appendChild(f),f.onclick=scheduler._click.dhx_cal_data}for(var h="",i=0;i<e.length;i++){var j=e[i].color?"background-color:"+e[i].color+";":"",k=e[i].textColor?"color:"+e[i].textColor+";":"";h+="<div class='dhx_tooltip_line' event_id='"+e[i].id+"' style='"+j+k+"'>",h+="<div class='dhx_tooltip_date'>"+(e[i]._timed?scheduler.templates.event_date(e[i].start_date):"")+"</div>",h+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",h+=scheduler.templates[a.name+"_tooltip"](e[i].start_date,e[i].end_date,e[i])+"</div>"}scheduler._tooltip.style.display="",scheduler._tooltip.style.top="0px",scheduler._tooltip.style.left=document.body.offsetWidth-c.left-scheduler._tooltip.offsetWidth<0?c.left-scheduler._tooltip.offsetWidth+"px":c.left+b.src.offsetWidth+"px",scheduler._tooltip.date=d,scheduler._tooltip.innerHTML=h,scheduler._tooltip.style.top=document.body.offsetHeight-c.top-scheduler._tooltip.offsetHeight<0?c.top-scheduler._tooltip.offsetHeight+b.src.offsetHeight+"px":c.top+"px"}}function i(){dhtmlxEvent(scheduler._els.dhx_cal_data[0],"mouseover",function(a){var b=scheduler.matrix[scheduler._mode];if(b){var c=scheduler._locate_cell_timeline(a),a=a||event;a.target||a.srcElement;if(c)return h(b,c,getOffset(c.src))}g()}),i=function(){}}function j(a){for(var b=a.parentNode.childNodes,c=0;c<b.length;c++)if(b[c]==a)return c;return-1}function k(a){for(var a=a||event,b=a.target?a.target:a.srcElement;b&&"DIV"!=b.tagName;)b=b.parentNode;if(b&&"DIV"==b.tagName){if("dhx_scale_bar"==b.className.split(" ")[0])return{x:j(b),y:-1,src:b,scale:!0}}}scheduler.templates.event_class=function(a,b,c){var d="";return c.current_event&&(d="currentEvent"),d},scheduler.matrix={},scheduler._merge=function(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c])},scheduler.createTimelineView=function(a){scheduler._merge(a,{section_autoheight:!0,name:"matrix",x:"time",y:"time",x_step:1,x_unit:"hour",y_unit:"day",y_step:1,x_start:0,x_size:24,y_start:0,y_size:7,render:"cell",dx:200,dy:50,fit_events:!0,second_scale:!1,_logic:function(a,b,c){var d={};return scheduler.checkEvent("onBeforeViewRender")&&(d=scheduler.callEvent("onBeforeViewRender",[a,b,c])),d}}),scheduler.checkEvent("onTimelineCreated")&&scheduler.callEvent("onTimelineCreated",[a]);var b=scheduler.render_data;if(scheduler.render_data=function(c,d){if(this._mode!=a.name)return b.apply(this,arguments);if(d)for(var e=0;e<c.length;e++)this.clear_event(c[e]),this.render_timeline_event.call(this.matrix[this._mode],c[e],0,!0);else f.call(a,!0)},scheduler.matrix[a.name]=a,scheduler.templates[a.name+"_cell_value"]=function(a){return a?a.length:""},scheduler.templates[a.name+"_cell_class"]=function(a,b,c,d){return""},scheduler.templates[a.name+"_scalex_class"]=function(){return""},scheduler.templates[a.name+"_second_scalex_class"]=function(){return""},scheduler.templates[a.name+"_scaley_class"]=function(){return""},scheduler.templates[a.name+"_scale_label"]=function(a,b){return b},scheduler.templates[a.name+"_tooltip"]=function(a,b,c){return c.text},scheduler.templates[a.name+"_date"]=function(a,b){return scheduler.templates.day_date(a)},scheduler.templates[a.name+"_scale_date"]=scheduler.date.date_to_str(a.x_date||scheduler.config.hour_date),scheduler.templates[a.name+"_second_scale_date"]=scheduler.date.date_to_str(a.second_scale&&a.second_scale.x_date?a.second_scale.x_date:scheduler.config.hour_date),scheduler.date["add_"+a.name]=function(b,c){return scheduler.date.add(b,(a.x_length||a.x_size)*c*a.x_step,a.x_unit)},scheduler.date[a.name+"_start"]=scheduler.date[a.x_unit+"_start"]||scheduler.date.day_start,scheduler.attachEvent("onSchedulerResize",function(){return this._mode!=a.name||(f.call(a,!0),!1)}),scheduler.attachEvent("onOptionsLoad",function(){a.order={},scheduler.callEvent("onOptionsLoadStart",[]);for(var b=0;b<a.y_unit.length;b++)a.order[a.y_unit[b].key]=b;scheduler.callEvent("onOptionsLoadFinal",[]),scheduler._date&&a.name==scheduler._mode&&scheduler.setCurrentView(scheduler._date,scheduler._mode)}),scheduler.callEvent("onOptionsLoad",[a]),scheduler[a.name+"_view"]=function(){scheduler.renderMatrix.apply(a,arguments)},"cell"!=a.render){var c=new Date,d=scheduler.date.add(c,a.x_step,a.x_unit).valueOf()-c.valueOf();scheduler["mouse_"+a.name]=function(b){var c=this._drag_event;this._drag_id&&(c=this.getEvent(this._drag_id),this._drag_event._dhx_changed=!0),b.x-=a.dx;for(var e=0,f=0,g=0;f<this._cols.length-1&&!((e+=this._cols[f])>b.x);f++);for(e=0;g<this._colsS.heights.length&&!((e+=this._colsS.heights[g])>b.y);g++);b.fields={},a.y_unit[g]||(g=a.y_unit.length-1),b.fields[a.y_property]=c[a.y_property]=a.y_unit[g].key,b.x=0,"new-size"==this._drag_mode&&1*c.start_date==1*this._drag_start&&f++;var h=f>=a._trace_x.length?scheduler.date.add(a._trace_x[a._trace_x.length-1],a.x_step,a.x_unit):a._trace_x[f];return b.y=Math.round((h-this._min_date)/(6e4*this.config.time_step)),b.custom=!0,b.shift=d,b}}},scheduler.render_timeline_event=function(a,c,d){var e=b(a,!1,this._step),f=b(a,!0,this._step),g=scheduler.xy.bar_height,h=2+c*g,i=g+h-2,j=a[this.y_property];(!this._events_height[j]||this._events_height[j]<i)&&(this._events_height[j]=i);var k=scheduler.templates.event_class(a.start_date,a.end_date,a),k="dhx_cal_event_line "+(k||""),l=a.color?"background-color:"+a.color+";":"",m=a.textColor?"color:"+a.textColor+";":"",n='<div event_id="'+a.id+'" class="'+k+'" style="'+l+m+"position:absolute; top:"+h+"px; left:"+e+"px; width:"+Math.max(0,f-e)+"px;"+(a._text_style||"")+'">'+scheduler.templates.event_bar_text(a.start_date,a.end_date,a)+"</div>";if(!d)return n;var o=document.createElement("DIV");o.innerHTML=n;var p=this.order[j],q=scheduler._els.dhx_cal_data[0].firstChild.rows[p].cells[1].firstChild;scheduler._rendered.push(o.firstChild),q.appendChild(o.firstChild)},scheduler.renderMatrix=function(a){scheduler._els.dhx_cal_data[0].scrollTop=0;var b=scheduler.date[this.name+"_start"](scheduler._date);if(scheduler._min_date=scheduler.date.add(b,this.x_start*this.x_step,this.x_unit),scheduler._max_date=scheduler.date.add(scheduler._min_date,this.x_size*this.x_step,this.x_unit),scheduler._table_view=!0,this.second_scale&&(a&&!this._header_resized&&(this._header_resized=scheduler.xy.scale_height,scheduler.xy.scale_height*=2,scheduler._els.dhx_cal_header[0].className+=" dhx_second_cal_header"),!a&&this._header_resized)){scheduler.xy.scale_height/=2,this._header_resized=!1;var c=scheduler._els.dhx_cal_header[0];c.className=c.className.replace(/ dhx_second_cal_header/gi,"")}f.call(this,a)},scheduler._locate_cell_timeline=function(a){for(var a=a||event,b=a.target?a.target:a.srcElement;b&&"TD"!=b.tagName;)b=b.parentNode;if(b&&"TD"==b.tagName){var c=b.className.split(" ")[0];if("dhx_matrix_cell"==c){if(scheduler._isRender("cell"))return{x:b.cellIndex-1,y:b.parentNode.rowIndex,src:b};for(var d=b.parentNode;d&&"TD"!=d.tagName;)d=d.parentNode;return{x:b.cellIndex,y:d.parentNode.rowIndex,src:b}}if("dhx_matrix_scell"==c)return{x:-1,y:b.parentNode.rowIndex,src:b,scale:!0}}return!1};var l=scheduler._click.dhx_cal_data;scheduler._click.dhx_cal_data=function(a){var b=l.apply(this,arguments),c=scheduler.matrix[scheduler._mode];if(c){var d=scheduler._locate_cell_timeline(a);d&&(d.scale?scheduler.callEvent("onYScaleClick",[d.y,c.y_unit[d.y],a||event]):scheduler.callEvent("onCellClick",[d.x,d.y,c._trace_x[d.x],(c._matrix[d.y]||{})[d.x]||[],a||event]))}return b},scheduler.dblclick_dhx_matrix_cell=function(a){var b=scheduler.matrix[scheduler._mode];if(b){var c=scheduler._locate_cell_timeline(a);c&&(c.scale?scheduler.callEvent("onYScaleDblClick",[c.y,b.y_unit[c.y],a||event]):scheduler.callEvent("onCellDblClick",[c.x,c.y,b._trace_x[c.x],(b._matrix[c.y]||{})[c.x]||[],a||event]))}},scheduler.dblclick_dhx_matrix_scell=function(a){return scheduler.dblclick_dhx_matrix_cell(a)},scheduler._isRender=function(a){return scheduler.matrix[scheduler._mode]&&scheduler.matrix[scheduler._mode].render==a},scheduler.attachEvent("onCellDblClick",function(a,b,c,d,e){if(!this.config.readonly&&("dblclick"!=e.type||this.config.dblclick_create)){var f=scheduler.matrix[scheduler._mode],g={};g.start_date=f._trace_x[a],g.end_date=f._trace_x[a+1]?f._trace_x[a+1]:scheduler.date.add(f._trace_x[a],f.x_step,f.x_unit),g[scheduler.matrix[scheduler._mode].y_property]=f.y_unit[b].key,scheduler.addEventNow(g,null,e)}}),scheduler.attachEvent("onBeforeDrag",function(){return!scheduler._isRender("cell")})}(),void 0===infosoftglobal)var infosoftglobal=new Object;void 0===infosoftglobal.FusionChartsUtil&&(infosoftglobal.FusionChartsUtil=new Object),infosoftglobal.FusionCharts=function(a,b,c,d,e,f,g,h,i,j,k){document.getElementById&&(this.initialDataSet=!1,this.params=new Object,this.variables=new Object,this.attributes=new Array,a&&this.setAttribute("swf",a),b&&this.setAttribute("id",b),c=c.toString().replace(/\%$/,"%25"),c&&this.setAttribute("width",c),d=d.toString().replace(/\%$/,"%25"),d&&this.setAttribute("height",d),g&&this.addParam("bgcolor",g),this.addParam("quality","high"),this.addParam("WMode","transparent"),this.addParam("allowScriptAccess","always"),this.addVariable("chartWidth",c),this.addVariable("chartHeight",d),e=e||0,this.addVariable("debugMode",e),this.addVariable("DOMId",b),f=f||0,this.addVariable("registerWithJS",f),h=h||"noScale",this.addVariable("scaleMode",h),i=i||"EN",this.addVariable("lang",i),this.detectFlashVersion=j||1,this.autoInstallRedirect=k||1,this.installedVer=infosoftglobal.FusionChartsUtil.getPlayerVersion(),!window.opera&&document.all&&this.installedVer.major>7&&(infosoftglobal.FusionCharts.doPrepUnload=!0))},infosoftglobal.FusionCharts.prototype={setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(a,b){this.params[a]=b},getParams:function(){return this.params},addVariable:function(a,b){this.variables[a]=b},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var a,b=new Array,c=this.getVariables();for(a in c)b.push(a+"="+c[a]);return b},getSWFHTML:function(){var a="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){a='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'"  ',a+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var b=this.getParams();for(var c in b)a+=[c]+'="'+b[c]+'" ';var d=this.getVariablePairs().join("&");d.length>0&&(a+='flashvars="'+d+'"'),a+="/>"}else{a='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'">',a+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var b=this.getParams();for(var c in b)a+='<param name="'+c+'" value="'+b[c]+'" />';var d=this.getVariablePairs().join("&");d.length>0&&(a+='<param name="flashvars" value="'+d+'" />'),a+="</object>"}return a},setDataURL:function(a){if(0==this.initialDataSet)this.addVariable("dataURL",a),this.initialDataSet=!0;else{var b=infosoftglobal.FusionChartsUtil.getChartObject(this.getAttribute("id"));b.setDataURL||__flash__addCallback(b,"setDataURL"),b.setDataURL(a)}},encodeDataXML:function(a){var b=a.match(/=\s*\".*?\"/g);if(b)for(var c=0;c<b.length;c++){var d=b[c].replace(/^=\s*\"|\"$/g,"");d=d.replace(/\'/g,"%26apos;");var e=a.indexOf(b[c]),f="='"+d+"'",g=a.substring(0,e),h=a.substring(e+b[c].length),a=g+f+h}return a=a.replace(/\"/g,"%26quot;"),a=a.replace(/%(?![\da-f]{2}|[\da-f]{4})/gi,"%25"),a=a.replace(/\&/g,"%26")},setDataXML:function(a){if(0==this.initialDataSet)this.addVariable("dataXML",this.encodeDataXML(a)),this.initialDataSet=!0;else{infosoftglobal.FusionChartsUtil.getChartObject(this.getAttribute("id")).setDataXML(a)}},setTransparent:function(a){},render:function(a){if(!(1==this.detectFlashVersion&&this.installedVer.major<6)){return("string"==typeof a?document.getElementById(a):a).innerHTML=this.getSWFHTML(),document.embeds[this.getAttribute("id")]||window[this.getAttribute("id")]||(window[this.getAttribute("id")]=document.getElementById(this.getAttribute("id"))),!0}return 1==this.autoInstallRedirect&&(!!window.confirm("You need Adobe Flash Player 6 (or above) to view the charts. It is a free and lightweight installation from Adobe.com. Please click on Ok to install the same.")&&void(window.location="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash"))}},infosoftglobal.FusionChartsUtil.getPlayerVersion=function(){
var a=new infosoftglobal.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var b=navigator.plugins["Shockwave Flash"];b&&b.description&&(a=new infosoftglobal.PlayerVersion(b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0)for(var c=1,d=3;c;)try{d++,c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+d),a=new infosoftglobal.PlayerVersion([d,0,0])}catch(a){c=null}else{try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(b){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");a=new infosoftglobal.PlayerVersion([6,0,21]),c.AllowScriptAccess="always"}catch(b){if(6==a.major)return a}try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){}}null!=c&&(a=new infosoftglobal.PlayerVersion(c.GetVariable("$version").split(" ")[1].split(",")))}return a},infosoftglobal.PlayerVersion=function(a){this.major=null!=a[0]?parseInt(a[0]):0,this.minor=null!=a[1]?parseInt(a[1]):0,this.rev=null!=a[2]?parseInt(a[2]):0},infosoftglobal.FusionChartsUtil.cleanupSWFs=function(){for(var a=document.getElementsByTagName("OBJECT"),b=a.length-1;b>=0;b--){a[b].style.display="none";for(var c in a[b])"function"==typeof a[b][c]&&(a[b][c]=function(){})}},infosoftglobal.FusionCharts.doPrepUnload&&(infosoftglobal.unloadSet||(infosoftglobal.FusionChartsUtil.prepUnload=function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){},window.attachEvent("onunload",infosoftglobal.FusionChartsUtil.cleanupSWFs)},window.attachEvent("onbeforeunload",infosoftglobal.FusionChartsUtil.prepUnload),infosoftglobal.unloadSet=!0)),!document.getElementById&&document.all&&(document.getElementById=function(a){return document.all[a]}),null==Array.prototype.push&&(Array.prototype.push=function(a){return this[this.length]=a,this.length}),infosoftglobal.FusionChartsUtil.getChartObject=function(a){var b=null;return b=-1==navigator.appName.indexOf("Microsoft Internet")?document.embeds&&document.embeds[a]?document.embeds[a]:window.document[a]:window[a],b||(b=document.getElementById(a)),b},infosoftglobal.FusionChartsUtil.updateChartXML=function(a,b){var c=infosoftglobal.FusionChartsUtil.getChartObject(a);c.SetVariable("_root.dataURL",""),c.SetVariable("_root.isNewData","1"),c.SetVariable("_root.newData",b),c.TGotoLabel("/","JavaScriptHandler")};var getChartFromId=infosoftglobal.FusionChartsUtil.getChartObject,updateChartXML=infosoftglobal.FusionChartsUtil.updateChartXML,FusionCharts=infosoftglobal.FusionCharts;!function(){function evalScript(a,b){b.src?jQuery.ajax({url:b.src,async:!1,dataType:"script"}):jQuery.globalEval(b.text||b.textContent||b.innerHTML||""),b.parentNode&&b.parentNode.removeChild(b)}function now(){return+new Date}function num(a,b){return a[0]&&parseInt(jQuery.curCSS(a[0],b,!0),10)||0}function bindReady(){if(!readyBound){if(readyBound=!0,document.addEventListener&&!jQuery.browser.opera&&document.addEventListener("DOMContentLoaded",jQuery.ready,!1),jQuery.browser.msie&&window==top&&function(){if(!jQuery.isReady){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}jQuery.ready()}}(),jQuery.browser.opera&&document.addEventListener("DOMContentLoaded",function(){if(!jQuery.isReady){for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].disabled)return void setTimeout(arguments.callee,0);jQuery.ready()}},!1),jQuery.browser.safari){var a;!function(){if(!jQuery.isReady){if("loaded"!=document.readyState&&"complete"!=document.readyState)return void setTimeout(arguments.callee,0);if(a===undefined&&(a=jQuery("style, link[rel=stylesheet]").length),document.styleSheets.length!=a)return void setTimeout(arguments.callee,0);jQuery.ready()}}()}jQuery.event.add(window,"load",jQuery.ready)}}var _jQuery=window.jQuery,_$=window.$,jQuery=window.jQuery=window.$=function(a,b){return new jQuery.fn.init(a,b)},quickExpr=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/,isSimple=/^.[^:#\[\.]*$/,undefined;jQuery.fn=jQuery.prototype={init:function(a,b){if(a=a||document,a.nodeType)return this[0]=a,this.length=1,this;if("string"==typeof a){var c=quickExpr.exec(a);if(!c||!c[1]&&b)return jQuery(b).find(a);if(c[1])a=jQuery.clean([c[1]],b);else{var d=document.getElementById(c[3]);if(d)return d.id!=c[3]?jQuery().find(a):jQuery(d);a=[]}}else if(jQuery.isFunction(a))return jQuery(document)[jQuery.fn.ready?"ready":"load"](a);return this.setArray(jQuery.makeArray(a))},jquery:"1.2.6",size:function(){return this.length},length:0,get:function(a){return a==undefined?jQuery.makeArray(this):this[a]},pushStack:function(a){var b=jQuery(a);return b.prevObject=this,b},setArray:function(a){return this.length=0,Array.prototype.push.apply(this,a),this},each:function(a,b){return jQuery.each(this,a,b)},index:function(a){return jQuery.inArray(a&&a.jquery?a[0]:a,this)},attr:function(a,b,c){var d=a;if(a.constructor==String){if(b===undefined)return this[0]&&jQuery[c||"attr"](this[0],a);d={},d[a]=b}return this.each(function(b){for(a in d)jQuery.attr(c?this.style:this,a,jQuery.prop(this,d[a],c,b,a))})},css:function(a,b){return("width"==a||"height"==a)&&parseFloat(b)<0&&(b=undefined),this.attr(a,b,"curCSS")},text:function(a){if("object"!=typeof a&&null!=a)return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(a));var b="";return jQuery.each(a||this,function(){jQuery.each(this.childNodes,function(){8!=this.nodeType&&(b+=1!=this.nodeType?this.nodeValue:jQuery.fn.text([this]))})}),b},wrapAll:function(a){return this[0]&&jQuery(a,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){for(var a=this;a.firstChild;)a=a.firstChild;return a}).append(this),this},wrapInner:function(a){return this.each(function(){jQuery(this).contents().wrapAll(a)})},wrap:function(a){return this.each(function(){jQuery(this).wrapAll(a)})},append:function(){return this.domManip(arguments,!0,!1,function(a){1==this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,!0,function(a){1==this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,!1,function(a){this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,!0,function(a){this.parentNode.insertBefore(a,this.nextSibling)})},end:function(){return this.prevObject||jQuery([])},find:function(a){var b=jQuery.map(this,function(b){return jQuery.find(a,b)});return this.pushStack(/[^+>] [^+>]/.test(a)||a.indexOf("..")>-1?jQuery.unique(b):b)},clone:function(a){var b=this.map(function(){if(jQuery.browser.msie&&!jQuery.isXMLDoc(this)){var a=this.cloneNode(!0),b=document.createElement("div");return b.appendChild(a),jQuery.clean([b.innerHTML])[0]}return this.cloneNode(!0)}),c=b.find("*").andSelf().each(function(){this[expando]!=undefined&&(this[expando]=null)});return!0===a&&this.find("*").andSelf().each(function(a){if(3!=this.nodeType){var b=jQuery.data(this,"events");for(var d in b)for(var e in b[d])jQuery.event.add(c[a],d,b[d][e],b[d][e].data)}}),b},filter:function(a){return this.pushStack(jQuery.isFunction(a)&&jQuery.grep(this,function(b,c){return a.call(b,c)})||jQuery.multiFilter(a,this))},not:function(a){if(a.constructor==String){if(isSimple.test(a))return this.pushStack(jQuery.multiFilter(a,this,!0));a=jQuery.multiFilter(a,this)}var b=a.length&&a[a.length-1]!==undefined&&!a.nodeType;return this.filter(function(){return b?jQuery.inArray(this,a)<0:this!=a})},add:function(a){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),"string"==typeof a?jQuery(a):jQuery.makeArray(a))))},is:function(a){return!!a&&jQuery.multiFilter(a,this).length>0},hasClass:function(a){return this.is("."+a)},val:function(a){if(a==undefined){if(this.length){var b=this[0];if(jQuery.nodeName(b,"select")){var c=b.selectedIndex,d=[],e=b.options,f="select-one"==b.type;if(c<0)return null;for(var g=f?c:0,h=f?c+1:e.length;g<h;g++){var i=e[g];if(i.selected){if(a=jQuery.browser.msie&&!i.attributes.value.specified?i.text:i.value,f)return a;d.push(a)}}return d}return(this[0].value||"").replace(/\r/g,"")}return undefined}return a.constructor==Number&&(a+=""),this.each(function(){if(1==this.nodeType)if(a.constructor==Array&&/radio|checkbox/.test(this.type))this.checked=jQuery.inArray(this.value,a)>=0||jQuery.inArray(this.name,a)>=0;else if(jQuery.nodeName(this,"select")){var b=jQuery.makeArray(a);jQuery("option",this).each(function(){this.selected=jQuery.inArray(this.value,b)>=0||jQuery.inArray(this.text,b)>=0}),b.length||(this.selectedIndex=-1)}else this.value=a})},html:function(a){return a==undefined?this[0]?this[0].innerHTML:null:this.empty().append(a)},replaceWith:function(a){return this.after(a).remove()},eq:function(a){return this.slice(a,a+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))},map:function(a){return this.pushStack(jQuery.map(this,function(b,c){return a.call(b,c,b)}))},andSelf:function(){return this.add(this.prevObject)},data:function(a,b){var c=a.split(".");if(c[1]=c[1]?"."+c[1]:"",b===undefined){var d=this.triggerHandler("getData"+c[1]+"!",[c[0]]);return d===undefined&&this.length&&(d=jQuery.data(this[0],a)),d===undefined&&c[1]?this.data(c[0]):d}return this.trigger("setData"+c[1]+"!",[c[0],b]).each(function(){jQuery.data(this,a,b)})},removeData:function(a){return this.each(function(){jQuery.removeData(this,a)})},domManip:function(a,b,c,d){var e,f=this.length>1;return this.each(function(){e||(e=jQuery.clean(a,this.ownerDocument),c&&e.reverse());var g=this;b&&jQuery.nodeName(this,"table")&&jQuery.nodeName(e[0],"tr")&&(g=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody")));var h=jQuery([]);jQuery.each(e,function(){var a=f?jQuery(this).clone(!0)[0]:this;jQuery.nodeName(a,"script")?h=h.add(a):(1==a.nodeType&&(h=h.add(jQuery("script",a).remove())),d.call(g,a))}),h.each(evalScript)})}},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var a,b=arguments[0]||{},c=1,d=arguments.length,e=!1;for(b.constructor==Boolean&&(e=b,b=arguments[1]||{},c=2),"object"!=typeof b&&"function"!=typeof b&&(b={}),d==c&&(b=this,--c);c<d;c++)if(null!=(a=arguments[c]))for(var f in a){var g=b[f],h=a[f];b!==h&&(e&&h&&"object"==typeof h&&!h.nodeType?b[f]=jQuery.extend(e,g||(null!=h.length?[]:{}),h):h!==undefined&&(b[f]=h))}return b};var expando="jQuery"+now(),uuid=0,windowData={},exclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,defaultView=document.defaultView||{};jQuery.extend({noConflict:function(a){return window.$=_$,a&&(window.jQuery=_jQuery),jQuery},isFunction:function(a){return!!a&&"string"!=typeof a&&!a.nodeName&&a.constructor!=Array&&/^[\s[]?function/.test(a+"")},isXMLDoc:function(a){return a.documentElement&&!a.body||a.tagName&&a.ownerDocument&&!a.ownerDocument.body},globalEval:function(a){if(a=jQuery.trim(a)){var b=document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("script");c.type="text/javascript",jQuery.browser.msie?c.text=a:c.appendChild(document.createTextNode(a)),b.insertBefore(c,b.firstChild),b.removeChild(c)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()==b.toUpperCase()},cache:{},data:function(a,b,c){a=a==window?windowData:a;var d=a[expando];return d||(d=a[expando]=++uuid),b&&!jQuery.cache[d]&&(jQuery.cache[d]={}),c!==undefined&&(jQuery.cache[d][b]=c),b?jQuery.cache[d][b]:d},removeData:function(a,b){a=a==window?windowData:a;var c=a[expando];if(b){if(jQuery.cache[c]){delete jQuery.cache[c][b],b="";for(b in jQuery.cache[c])break;b||jQuery.removeData(a)}}else{try{delete a[expando]}catch(b){a.removeAttribute&&a.removeAttribute(expando)}delete jQuery.cache[c]}},each:function(a,b,c){var d,e=0,f=a.length;if(c)if(f==undefined){for(d in a)if(!1===b.apply(a[d],c))break}else for(;e<f&&!1!==b.apply(a[e++],c););else if(f==undefined){for(d in a)if(!1===b.call(a[d],d,a[d]))break}else for(var g=a[0];e<f&&!1!==b.call(g,e,g);g=a[++e]);return a},prop:function(a,b,c,d,e){return jQuery.isFunction(b)&&(b=b.call(a,d)),b&&b.constructor==Number&&"curCSS"==c&&!exclude.test(e)?b+"px":b},className:{add:function(a,b){jQuery.each((b||"").split(/\s+/),function(b,c){1!=a.nodeType||jQuery.className.has(a.className,c)||(a.className+=(a.className?" ":"")+c)})},remove:function(a,b){1==a.nodeType&&(a.className=b!=undefined?jQuery.grep(a.className.split(/\s+/),function(a){return!jQuery.className.has(b,a)}).join(" "):"")},has:function(a,b){return jQuery.inArray(b,(a.className||a).toString().split(/\s+/))>-1}},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(var e in b)a.style[e]=d[e]},css:function(a,b,c){function d(){e="width"==b?a.offsetWidth:a.offsetHeight;var c=0,d=0;jQuery.each(g,function(){c+=parseFloat(jQuery.curCSS(a,"padding"+this,!0))||0,d+=parseFloat(jQuery.curCSS(a,"border"+this+"Width",!0))||0}),e-=Math.round(c+d)}if("width"==b||"height"==b){var e,f={position:"absolute",visibility:"hidden",display:"block"},g="width"==b?["Left","Right"]:["Top","Bottom"];return jQuery(a).is(":visible")?d():jQuery.swap(a,f,d),Math.max(0,e)}return jQuery.curCSS(a,b,c)},curCSS:function(a,b,c){function d(a){if(!jQuery.browser.safari)return!1;var b=defaultView.getComputedStyle(a,null);return!b||""==b.getPropertyValue("color")}var e,f=a.style;if("opacity"==b&&jQuery.browser.msie)return e=jQuery.attr(f,"opacity"),""==e?"1":e;if(jQuery.browser.opera&&"display"==b){var g=f.outline;f.outline="0 solid black",f.outline=g}if(b.match(/float/i)&&(b=styleFloat),!c&&f&&f[b])e=f[b];else if(defaultView.getComputedStyle){b.match(/float/i)&&(b="float"),b=b.replace(/([A-Z])/g,"-$1").toLowerCase();var h=defaultView.getComputedStyle(a,null);if(h&&!d(a))e=h.getPropertyValue(b);else{for(var i=[],j=[],k=a,l=0;k&&d(k);k=k.parentNode)j.unshift(k);for(;l<j.length;l++)d(j[l])&&(i[l]=j[l].style.display,j[l].style.display="block");for(e="display"==b&&null!=i[j.length-1]?"none":h&&h.getPropertyValue(b)||"",l=0;l<i.length;l++)null!=i[l]&&(j[l].style.display=i[l])}"opacity"==b&&""==e&&(e="1")}else if(a.currentStyle){var m=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});if(e=a.currentStyle[b]||a.currentStyle[m],!/^\d+(px)?$/i.test(e)&&/^\d/.test(e)){var n=f.left,o=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,f.left=e||0,e=f.pixelLeft+"px",f.left=n,a.runtimeStyle.left=o}}return e},clean:function(a,b){var c=[];return b=b||document,void 0===b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||document),jQuery.each(a,function(a,d){if(d){if(d.constructor==Number&&(d+=""),"string"==typeof d){d=d.replace(/(<(\w+)[^>]*?)\/>/g,function(a,b,c){return c.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?a:b+"></"+c+">"});var e=jQuery.trim(d).toLowerCase(),f=b.createElement("div"),g=!e.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!e.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||e.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!e.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!e.indexOf("<td")||!e.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!e.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||jQuery.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];for(f.innerHTML=g[1]+d+g[2];g[0]--;)f=f.lastChild;if(jQuery.browser.msie){for(var h=!e.indexOf("<table")&&e.indexOf("<tbody")<0?f.firstChild&&f.firstChild.childNodes:"<table>"==g[1]&&e.indexOf("<tbody")<0?f.childNodes:[],i=h.length-1;i>=0;--i)jQuery.nodeName(h[i],"tbody")&&!h[i].childNodes.length&&h[i].parentNode.removeChild(h[i]);/^\s/.test(d)&&f.insertBefore(b.createTextNode(d.match(/^\s*/)[0]),f.firstChild)}d=jQuery.makeArray(f.childNodes)}(0!==d.length||jQuery.nodeName(d,"form")||jQuery.nodeName(d,"select"))&&(d[0]==undefined||jQuery.nodeName(d,"form")||d.options?c.push(d):c=jQuery.merge(c,d))}}),c},attr:function(a,b,c){if(!a||3==a.nodeType||8==a.nodeType)return undefined;var d=!jQuery.isXMLDoc(a),e=c!==undefined,f=jQuery.browser.msie;if(b=d&&jQuery.props[b]||b,a.tagName){var g=/href|src|style/.test(b);if("selected"==b&&jQuery.browser.safari&&a.parentNode.selectedIndex,b in a&&d&&!g){if(e){if("type"==b&&jQuery.nodeName(a,"input")&&a.parentNode)throw"type property can't be changed";a[b]=c}return jQuery.nodeName(a,"form")&&a.getAttributeNode(b)?a.getAttributeNode(b).nodeValue:a[b]}if(f&&d&&"style"==b)return jQuery.attr(a.style,"cssText",c);e&&a.setAttribute(b,""+c);var h=f&&d&&g?a.getAttribute(b,2):a.getAttribute(b);return null===h?undefined:h}return f&&"opacity"==b?(e&&(a.zoom=1,a.filter=(a.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(c)+""=="NaN"?"":"alpha(opacity="+100*c+")")),a.filter&&a.filter.indexOf("opacity=")>=0?parseFloat(a.filter.match(/opacity=([^)]*)/)[1])/100+"":""):(b=b.replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()}),e&&(a[b]=c),a[b])},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},makeArray:function(a){var b=[];if(null!=a){var c=a.length;if(null==c||a.split||a.setInterval||a.call)b[0]=a;else for(;c;)b[--c]=a[c]}return b},inArray:function(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,b){var c,d=0,e=a.length;if(jQuery.browser.msie)for(;c=b[d++];)8!=c.nodeType&&(a[e++]=c);else for(;c=b[d++];)a[e++]=c;return a},unique:function(a){var b=[],c={};try{for(var d=0,e=a.length;d<e;d++){var f=jQuery.data(a[d]);c[f]||(c[f]=!0,b.push(a[d]))}}catch(c){b=a}return b},grep:function(a,b,c){for(var d=[],e=0,f=a.length;e<f;e++)!c!=!b(a[e],e)&&d.push(a[e]);return d},map:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=b(a[d],d);null!=f&&(c[c.length]=f)}return c.concat.apply([],c)}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?"styleFloat":"cssFloat";jQuery.extend({boxModel:!jQuery.browser.msie||"CSS1Compat"==document.compatMode,props:{for:"htmlFor",class:"className",float:styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing"}}),jQuery.each({parent:function(a){return a.parentNode},parents:function(a){return jQuery.dir(a,"parentNode")},next:function(a){return jQuery.nth(a,2,"nextSibling")},prev:function(a){return jQuery.nth(a,2,"previousSibling")},nextAll:function(a){return jQuery.dir(a,"nextSibling")},prevAll:function(a){return jQuery.dir(a,"previousSibling")},siblings:function(a){return jQuery.sibling(a.parentNode.firstChild,a)},children:function(a){return jQuery.sibling(a.firstChild)},contents:function(a){return jQuery.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:jQuery.makeArray(a.childNodes)}},function(a,b){jQuery.fn[a]=function(a){var c=jQuery.map(this,b);return a&&"string"==typeof a&&(c=jQuery.multiFilter(a,c)),this.pushStack(jQuery.unique(c))}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(){var a=arguments;return this.each(function(){for(var c=0,d=a.length;c<d;c++)jQuery(a[c])[b](this)})}}),jQuery.each({removeAttr:function(a){jQuery.attr(this,a,""),1==this.nodeType&&this.removeAttribute(a)},addClass:function(a){jQuery.className.add(this,a)},removeClass:function(a){jQuery.className.remove(this,a)},toggleClass:function(a){jQuery.className[jQuery.className.has(this,a)?"remove":"add"](this,a)},remove:function(a){a&&!jQuery.filter(a,[this]).r.length||(jQuery("*",this).add(this).each(function(){jQuery.event.remove(this),jQuery.removeData(this)}),this.parentNode&&this.parentNode.removeChild(this))},empty:function(){for(jQuery(">*",this).remove();this.firstChild;)this.removeChild(this.firstChild)}},function(a,b){jQuery.fn[a]=function(){return this.each(b,arguments)}}),jQuery.each(["Height","Width"],function(a,b){var c=b.toLowerCase();jQuery.fn[c]=function(a){return this[0]==window?jQuery.browser.opera&&document.body["client"+b]||jQuery.browser.safari&&window["inner"+b]||"CSS1Compat"==document.compatMode&&document.documentElement["client"+b]||document.body["client"+b]:this[0]==document?Math.max(Math.max(document.body["scroll"+b],document.documentElement["scroll"+b]),Math.max(document.body["offset"+b],document.documentElement["offset"+b])):a==undefined?this.length?jQuery.css(this[0],c):null:this.css(c,a.constructor==String?a:a+"px")}});var chars=jQuery.browser.safari&&parseInt(jQuery.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uffff*_-]|\\\\.)",quickChild=new RegExp("^>\\s*("+chars+"+)"),quickID=new RegExp("^("+chars+"+)(#)("+chars+"+)"),quickClass=new RegExp("^([#.]?)("+chars+"*)");jQuery.extend({expr:{"":function(a,b,c){return"*"==c[2]||jQuery.nodeName(a,c[2])},"#":function(a,b,c){return a.getAttribute("id")==c[2]},":":{lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0==b},eq:function(a,b,c){return c[3]-0==b},first:function(a,b){return 0==b},last:function(a,b,c,d){return b==d.length-1},even:function(a,b){return b%2==0},odd:function(a,b){return b%2},"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]==a},"last-child":function(a){return jQuery.nth(a.parentNode.lastChild,1,"previousSibling")==a},"only-child":function(a){return!jQuery.nth(a.parentNode.lastChild,2,"previousSibling")},parent:function(a){return a.firstChild},empty:function(a){return!a.firstChild},contains:function(a,b,c){return(a.textContent||a.innerText||jQuery(a).text()||"").indexOf(c[3])>=0},visible:function(a){return"hidden"!=a.type&&"none"!=jQuery.css(a,"display")&&"hidden"!=jQuery.css(a,"visibility")},hidden:function(a){return"hidden"==a.type||"none"==jQuery.css(a,"display")||"hidden"==jQuery.css(a,"visibility")},enabled:function(a){return!a.disabled},disabled:function(a){return a.disabled},checked:function(a){return a.checked},selected:function(a){return a.selected||jQuery.attr(a,"selected")},text:function(a){return"text"==a.type},radio:function(a){return"radio"==a.type},checkbox:function(a){return"checkbox"==a.type},file:function(a){return"file"==a.type},password:function(a){return"password"==a.type},submit:function(a){return"submit"==a.type},image:function(a){return"image"==a.type},reset:function(a){return"reset"==a.type},button:function(a){return"button"==a.type||jQuery.nodeName(a,"button")},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},has:function(a,b,c){return jQuery.find(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},animated:function(a){return jQuery.grep(jQuery.timers,function(b){return a==b.elem}).length}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,new RegExp("^([:.#]*)("+chars+"+)")],multiFilter:function(a,b,c){for(var d,e=[];a&&a!=d;){d=a;var f=jQuery.filter(a,b,c);a=f.t.replace(/^\s*,\s*/,""),e=c?b=f.r:jQuery.merge(e,f.r)}return e},find:function(a,b){if("string"!=typeof a)return[a];if(b&&1!=b.nodeType&&9!=b.nodeType)return[];b=b||document;for(var c,d,e=[b],f=[];a&&c!=a;){var g=[];c=a,a=jQuery.trim(a);var h=!1,i=quickChild,j=i.exec(a);if(j){d=j[1].toUpperCase();for(var k=0;e[k];k++)for(var l=e[k].firstChild;l;l=l.nextSibling)1!=l.nodeType||"*"!=d&&l.nodeName.toUpperCase()!=d||g.push(l);if(e=g,a=a.replace(i,""),0==a.indexOf(" "))continue;h=!0}else if(i=/^([>+~])\s*(\w*)/i,null!=(j=i.exec(a))){g=[];var m={};d=j[2].toUpperCase(),j=j[1];for(var n=0,o=e.length;n<o;n++)for(var p="~"==j||"+"==j?e[n].nextSibling:e[n].firstChild;p;p=p.nextSibling)if(1==p.nodeType){var q=jQuery.data(p);if("~"==j&&m[q])break;if(d&&p.nodeName.toUpperCase()!=d||("~"==j&&(m[q]=!0),g.push(p)),"+"==j)break}e=g,a=jQuery.trim(a.replace(i,"")),h=!0}if(a&&!h)if(a.indexOf(",")){var r=quickID,j=r.exec(a);j?j=[0,j[2],j[3],j[1]]:(r=quickClass,j=r.exec(a)),j[2]=j[2].replace(/\\/g,"");var s=e[e.length-1];if("#"==j[1]&&s&&s.getElementById&&!jQuery.isXMLDoc(s)){var t=s.getElementById(j[2]);(jQuery.browser.msie||jQuery.browser.opera)&&t&&"string"==typeof t.id&&t.id!=j[2]&&(t=jQuery('[@id="'+j[2]+'"]',s)[0]),e=g=!t||j[3]&&!jQuery.nodeName(t,j[3])?[]:[t]}else{for(var k=0;e[k];k++){var u="#"==j[1]&&j[3]?j[3]:""!=j[1]||""==j[0]?"*":j[2];"*"==u&&"object"==e[k].nodeName.toLowerCase()&&(u="param"),g=jQuery.merge(g,e[k].getElementsByTagName(u))}if("."==j[1]&&(g=jQuery.classFilter(g,j[2])),"#"==j[1]){for(var v=[],k=0;g[k];k++)if(g[k].getAttribute("id")==j[2]){v=[g[k]];break}g=v}e=g}a=a.replace(r,"")}else b==e[0]&&e.shift(),f=jQuery.merge(f,e),g=e=[b],a=" "+a.substr(1,a.length);if(a){var w=jQuery.filter(a,g);e=g=w.r,a=jQuery.trim(w.t)}}return a&&(e=[]),e&&b==e[0]&&e.shift(),f=jQuery.merge(f,e)},classFilter:function(a,b,c){b=" "+b+" ";for(var d=[],e=0;a[e];e++){var f=(" "+a[e].className+" ").indexOf(b)>=0;(!c&&f||c&&!f)&&d.push(a[e])}return d},filter:function(t,r,not){for(var last;t&&t!=last;){last=t;for(var p=jQuery.parse,m,i=0;p[i];i++)if(m=p[i].exec(t)){t=t.substring(m[0].length),m[2]=m[2].replace(/\\/g,"");break}if(!m)break;if(":"==m[1]&&"not"==m[2])r=isSimple.test(m[3])?jQuery.filter(m[3],r,!0).r:jQuery(r).not(m[3]);else if("."==m[1])r=jQuery.classFilter(r,m[2],not);else if("["==m[1]){for(var tmp=[],type=m[3],i=0,rl=r.length;i<rl;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];(null==z||/href|src|selected/.test(m[2]))&&(z=jQuery.attr(a,m[2])||""),(""==type&&!!z||"="==type&&z==m[5]||"!="==type&&z!=m[5]||"^="==type&&z&&!z.indexOf(m[5])||"$="==type&&z.substr(z.length-m[5].length)==m[5]||("*="==type||"~="==type)&&z.indexOf(m[5])>=0)^not&&tmp.push(a)}r=tmp}else if(":"==m[1]&&"nth-child"==m[2]){for(var merge={},tmp=[],test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"==m[3]&&"2n"||"odd"==m[3]&&"2n+1"||!/\D/.test(m[3])&&"0n+"+m[3]||m[3]),first=test[1]+(test[2]||1)-0,last=test[3]-0,i=0,rl=r.length;i<rl;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){for(var c=1,n=parentNode.firstChild;n;n=n.nextSibling)1==n.nodeType&&(n.nodeIndex=c++);merge[id]=!0}var add=!1;0==first?node.nodeIndex==last&&(add=!0):(node.nodeIndex-last)%first==0&&(node.nodeIndex-last)/first>=0&&(add=!0),add^not&&tmp.push(node)}r=tmp}else{var fn=jQuery.expr[m[1]];"object"==typeof fn&&(fn=fn[m[2]]),"string"==typeof fn&&(fn=eval("false||function(a,i){return "+fn+";}")),r=jQuery.grep(r,function(a,b){return fn(a,b,m,r)},not)}}return{r:r,t:t}},dir:function(a,b){for(var c=[],d=a[b];d&&d!=document;)1==d.nodeType&&c.push(d),d=d[b];return c},nth:function(a,b,c,d){b=b||1;for(var e=0;a&&(1!=a.nodeType||++e!=b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1==a.nodeType&&a!=b&&c.push(a);return c}}),jQuery.event={add:function(a,b,c,d){if(3!=a.nodeType&&8!=a.nodeType){if(jQuery.browser.msie&&a.setInterval&&(a=window),c.guid||(c.guid=this.guid++),d!=undefined){var e=c;c=this.proxy(e,function(){return e.apply(this,arguments)}),c.data=d}var f=jQuery.data(a,"events")||jQuery.data(a,"events",{}),g=jQuery.data(a,"handle")||jQuery.data(a,"handle",function(){if(void 0!==jQuery&&!jQuery.event.triggered)return jQuery.event.handle.apply(arguments.callee.elem,arguments)});g.elem=a,jQuery.each(b.split(/\s+/),function(b,d){var e=d.split(".");d=e[0],c.type=e[1];var h=f[d];h||(h=f[d]={},jQuery.event.special[d]&&!1!==jQuery.event.special[d].setup.call(a)||(a.addEventListener?a.addEventListener(d,g,!1):a.attachEvent&&a.attachEvent("on"+d,g))),h[c.guid]=c,jQuery.event.global[d]=!0}),a=null}},guid:1,global:{},remove:function(a,b,c){if(3!=a.nodeType&&8!=a.nodeType){var d,e=jQuery.data(a,"events");if(e){if(b==undefined||"string"==typeof b&&"."==b.charAt(0))for(var f in e)this.remove(a,f+(b||""));else b.type&&(c=b.handler,b=b.type),jQuery.each(b.split(/\s+/),function(b,f){var g=f.split(".");if(f=g[0],e[f]){if(c)delete e[f][c.guid];else for(c in e[f])g[1]&&e[f][c].type!=g[1]||delete e[f][c];for(d in e[f])break;d||(jQuery.event.special[f]&&!1!==jQuery.event.special[f].teardown.call(a)||(a.removeEventListener?a.removeEventListener(f,jQuery.data(a,"handle"),!1):a.detachEvent&&a.detachEvent("on"+f,jQuery.data(a,"handle"))),d=null,delete e[f])}});for(d in e)break;if(!d){var g=jQuery.data(a,"handle");g&&(g.elem=null),jQuery.removeData(a,"events"),jQuery.removeData(a,"handle")}}}},trigger:function(a,b,c,d,e){if(b=jQuery.makeArray(b),a.indexOf("!")>=0){a=a.slice(0,-1);var f=!0}if(c){if(3==c.nodeType||8==c.nodeType)return undefined;var g,h,i=jQuery.isFunction(c[a]||null),j=!b[0]||!b[0].preventDefault;j&&(b.unshift({type:a,target:c,preventDefault:function(){},stopPropagation:function(){},timeStamp:now()}),b[0][expando]=!0),b[0].type=a,f&&(b[0].exclusive=!0);var k=jQuery.data(c,"handle");if(k&&(g=k.apply(c,b)),(!i||jQuery.nodeName(c,"a")&&"click"==a)&&c["on"+a]&&!1===c["on"+a].apply(c,b)&&(g=!1),j&&b.shift(),e&&jQuery.isFunction(e)&&(h=e.apply(c,null==g?b:b.concat(g)))!==undefined&&(g=h),i&&!1!==d&&!1!==g&&(!jQuery.nodeName(c,"a")||"click"!=a)){this.triggered=!0;try{c[a]()}catch(a){}}this.triggered=!1}else this.global[a]&&jQuery("*").add([window,document]).trigger(a,b);return g},handle:function(a){var b,c,d,e,f;a=arguments[0]=jQuery.event.fix(a||window.event),d=a.type.split("."),a.type=d[0],d=d[1],e=!d&&!a.exclusive,f=(jQuery.data(this,"events")||{})[a.type];for(var g in f){var h=f[g];(e||h.type==d)&&(a.handler=h,a.data=h.data,c=h.apply(this,arguments),!1!==b&&(b=c),!1===c&&(a.preventDefault(),a.stopPropagation()))}return b},fix:function(a){if(1==a[expando])return a;var b=a;a={originalEvent:b};for(var c="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" "),d=c.length;d;d--)a[c[d]]=b[c[d]];if(a[expando]=!0,a.preventDefault=function(){b.preventDefault&&b.preventDefault(),b.returnValue=!1},a.stopPropagation=function(){b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0},a.timeStamp=a.timeStamp||now(),a.target||(a.target=a.srcElement||document),3==a.target.nodeType&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement==a.target?a.toElement:a.fromElement),null==a.pageX&&null!=a.clientX){var e=document.documentElement,f=document.body;a.pageX=a.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e.clientLeft||0),a.pageY=a.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e.clientTop||0)}return!a.which&&(a.charCode||0===a.charCode?a.charCode:a.keyCode)&&(a.which=a.charCode||a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button&&(a.which=1&a.button?1:2&a.button?3:4&a.button?2:0),a},proxy:function(a,b){return b.guid=a.guid=a.guid||b.guid||this.guid++,b},special:{ready:{setup:function(){bindReady()},teardown:function(){}},mouseenter:{setup:function(){return!jQuery.browser.msie&&(jQuery(this).bind("mouseover",jQuery.event.special.mouseenter.handler),!0)},teardown:function(){return!jQuery.browser.msie&&(jQuery(this).unbind("mouseover",jQuery.event.special.mouseenter.handler),!0)},handler:function(a){return!!withinElement(a,this)||(a.type="mouseenter",jQuery.event.handle.apply(this,arguments))}},mouseleave:{setup:function(){return!jQuery.browser.msie&&(jQuery(this).bind("mouseout",jQuery.event.special.mouseleave.handler),!0)},teardown:function(){return!jQuery.browser.msie&&(jQuery(this).unbind("mouseout",jQuery.event.special.mouseleave.handler),!0)},handler:function(a){return!!withinElement(a,this)||(a.type="mouseleave",jQuery.event.handle.apply(this,arguments))}}}},jQuery.fn.extend({bind:function(a,b,c){return"unload"==a?this.one(a,b,c):this.each(function(){jQuery.event.add(this,a,c||b,c&&b)})},one:function(a,b,c){var d=jQuery.event.proxy(c||b,function(a){return jQuery(this).unbind(a,d),
(c||b).apply(this,arguments)});return this.each(function(){jQuery.event.add(this,a,d,c&&b)})},unbind:function(a,b){return this.each(function(){jQuery.event.remove(this,a,b)})},trigger:function(a,b,c){return this.each(function(){jQuery.event.trigger(a,b,this,!0,c)})},triggerHandler:function(a,b,c){return this[0]&&jQuery.event.trigger(a,b,this[0],!1,c)},toggle:function(a){for(var b=arguments,c=1;c<b.length;)jQuery.event.proxy(a,b[c++]);return this.click(jQuery.event.proxy(a,function(a){return this.lastToggle=(this.lastToggle||0)%c,a.preventDefault(),b[this.lastToggle++].apply(this,arguments)||!1}))},hover:function(a,b){return this.bind("mouseenter",a).bind("mouseleave",b)},ready:function(a){return bindReady(),jQuery.isReady?a.call(document,jQuery):jQuery.readyList.push(function(){return a.call(this,jQuery)}),this}}),jQuery.extend({isReady:!1,readyList:[],ready:function(){jQuery.isReady||(jQuery.isReady=!0,jQuery.readyList&&(jQuery.each(jQuery.readyList,function(){this.call(document)}),jQuery.readyList=null),jQuery(document).triggerHandler("ready"))}});var readyBound=!1;jQuery.each("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error".split(","),function(a,b){jQuery.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}});var withinElement=function(a,b){for(var c=a.relatedTarget;c&&c!=b;)try{c=c.parentNode}catch(a){c=b}return c==b};jQuery(window).bind("unload",function(){jQuery("*").add(document).unbind()}),jQuery.fn.extend({_load:jQuery.fn.load,load:function(a,b,c){if("string"!=typeof a)return this._load(a);var d=a.indexOf(" ");if(d>=0){var e=a.slice(d,a.length);a=a.slice(0,d)}c=c||function(){};var f="GET";b&&(jQuery.isFunction(b)?(c=b,b=null):(b=jQuery.param(b),f="POST"));var g=this;return jQuery.ajax({url:a,type:f,dataType:"html",data:b,complete:function(a,b){"success"!=b&&"notmodified"!=b||g.html(e?jQuery("<div/>").append(a.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(e):a.responseText),g.each(c,[a.responseText,b,a])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(a,b){var c=jQuery(this).val();return null==c?null:c.constructor==Array?jQuery.map(c,function(a,c){return{name:b.name,value:a}}):{name:b.name,value:c}}).get()}}),jQuery.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(a,b){jQuery.fn[b]=function(a){return this.bind(b,a)}});var jsc=now();jQuery.extend({get:function(a,b,c,d){return jQuery.isFunction(b)&&(c=b,b=null),jQuery.ajax({type:"GET",url:a,data:b,success:c,dataType:d})},getScript:function(a,b){return jQuery.get(a,null,b,"script")},getJSON:function(a,b,c){return jQuery.get(a,b,c,"json")},post:function(a,b,c,d){return jQuery.isFunction(b)&&(c=b,b={}),jQuery.ajax({type:"POST",url:a,data:b,success:c,dataType:d})},ajaxSetup:function(a){jQuery.extend(jQuery.ajaxSettings,a)},ajaxSettings:{url:location.href,global:!0,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(a){function b(){a.success&&a.success(f,e),a.global&&jQuery.event.trigger("ajaxSuccess",[p,a])}function c(){a.complete&&a.complete(p,e),a.global&&jQuery.event.trigger("ajaxComplete",[p,a]),a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop")}a=jQuery.extend(!0,a,jQuery.extend(!0,{},jQuery.ajaxSettings,a));var d,e,f,g=/=\?(&|$)/g,h=a.type.toUpperCase();if(a.data&&a.processData&&"string"!=typeof a.data&&(a.data=jQuery.param(a.data)),"jsonp"==a.dataType&&("GET"==h?a.url.match(g)||(a.url+=(a.url.match(/\?/)?"&":"?")+(a.jsonp||"callback")+"=?"):a.data&&a.data.match(g)||(a.data=(a.data?a.data+"&":"")+(a.jsonp||"callback")+"=?"),a.dataType="json"),"json"==a.dataType&&(a.data&&a.data.match(g)||a.url.match(g))&&(d="jsonp"+jsc++,a.data&&(a.data=(a.data+"").replace(g,"="+d+"$1")),a.url=a.url.replace(g,"="+d+"$1"),a.dataType="script",window[d]=function(a){f=a,b(),c(),window[d]=undefined;try{delete window[d]}catch(a){}l&&l.removeChild(m)}),"script"==a.dataType&&null==a.cache&&(a.cache=!1),!1===a.cache&&"GET"==h){var i=now(),j=a.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+i+"$2");a.url=j+(j==a.url?(a.url.match(/\?/)?"&":"?")+"_="+i:"")}a.data&&"GET"==h&&(a.url+=(a.url.match(/\?/)?"&":"?")+a.data,a.data=null),a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var k=/^(?:\w+:)?\/\/([^\/?#]+)/;if("script"==a.dataType&&"GET"==h&&k.test(a.url)&&k.exec(a.url)[1]!=location.host){var l=document.getElementsByTagName("head")[0],m=document.createElement("script");if(m.src=a.url,a.scriptCharset&&(m.charset=a.scriptCharset),!d){var n=!1;m.onload=m.onreadystatechange=function(){n||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n=!0,b(),c(),l.removeChild(m))}}return l.appendChild(m),undefined}var o=!1,p=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;a.username?p.open(h,a.url,a.async,a.username,a.password):p.open(h,a.url,a.async);try{a.data&&p.setRequestHeader("Content-Type",a.contentType),a.ifModified&&p.setRequestHeader("If-Modified-Since",jQuery.lastModified[a.url]||"Thu, 01 Jan 1970 00:00:00 GMT"),p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.setRequestHeader("Accept",a.dataType&&a.accepts[a.dataType]?a.accepts[a.dataType]+", */*":a.accepts._default)}catch(a){}if(a.beforeSend&&!1===a.beforeSend(p,a))return a.global&&jQuery.active--,p.abort(),!1;a.global&&jQuery.event.trigger("ajaxSend",[p,a]);var q=function(g){if(!o&&p&&(4==p.readyState||"timeout"==g)){if(o=!0,r&&(clearInterval(r),r=null),"success"==(e="timeout"==g&&"timeout"||!jQuery.httpSuccess(p)&&"error"||a.ifModified&&jQuery.httpNotModified(p,a.url)&&"notmodified"||"success"))try{f=jQuery.httpData(p,a.dataType,a.dataFilter)}catch(a){e="parsererror"}if("success"==e){var h;try{h=p.getResponseHeader("Last-Modified")}catch(a){}a.ifModified&&h&&(jQuery.lastModified[a.url]=h),d||b()}else jQuery.handleError(a,p,e);c(),a.async&&(p=null)}};if(a.async){var r=setInterval(q,13);a.timeout>0&&setTimeout(function(){p&&(p.abort(),o||q("timeout"))},a.timeout)}try{p.send(a.data)}catch(b){jQuery.handleError(a,p,null,b)}return a.async||q(),p},handleError:function(a,b,c,d){a.error&&a.error(b,c,d),a.global&&jQuery.event.trigger("ajaxError",[b,a,d])},active:0,httpSuccess:function(a){try{return!a.status&&"file:"==location.protocol||a.status>=200&&a.status<300||304==a.status||1223==a.status||jQuery.browser.safari&&a.status==undefined}catch(a){}return!1},httpNotModified:function(a,b){try{var c=a.getResponseHeader("Last-Modified");return 304==a.status||c==jQuery.lastModified[b]||jQuery.browser.safari&&a.status==undefined}catch(a){}return!1},httpData:function(xhr,type,filter){var ct=xhr.getResponseHeader("content-type"),xml="xml"==type||!type&&ct&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&"parsererror"==data.documentElement.tagName)throw"parsererror";return filter&&(data=filter(data,type)),"script"==type&&jQuery.globalEval(data),"json"==type&&(data=eval("("+data+")")),data},param:function(a){var b=[];if(a.constructor==Array||a.jquery)jQuery.each(a,function(){b.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))});else for(var c in a)a[c]&&a[c].constructor==Array?jQuery.each(a[c],function(){b.push(encodeURIComponent(c)+"="+encodeURIComponent(this))}):b.push(encodeURIComponent(c)+"="+encodeURIComponent(jQuery.isFunction(a[c])?a[c]():a[c]));return b.join("&").replace(/%20/g,"+")}}),jQuery.fn.extend({show:function(a,b){return a?this.animate({height:"show",width:"show",opacity:"show"},a,b):this.filter(":hidden").each(function(){if(this.style.display=this.oldblock||"","none"==jQuery.css(this,"display")){var a=jQuery("<"+this.tagName+" />").appendTo("body");this.style.display=a.css("display"),"none"==this.style.display&&(this.style.display="block"),a.remove()}}).end()},hide:function(a,b){return a?this.animate({height:"hide",width:"hide",opacity:"hide"},a,b):this.filter(":visible").each(function(){this.oldblock=this.oldblock||jQuery.css(this,"display"),this.style.display="none"}).end()},_toggle:jQuery.fn.toggle,toggle:function(a,b){return jQuery.isFunction(a)&&jQuery.isFunction(b)?this._toggle.apply(this,arguments):a?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},a,b):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]()})},slideDown:function(a,b){return this.animate({height:"show"},a,b)},slideUp:function(a,b){return this.animate({height:"hide"},a,b)},slideToggle:function(a,b){return this.animate({height:"toggle"},a,b)},fadeIn:function(a,b){return this.animate({opacity:"show"},a,b)},fadeOut:function(a,b){return this.animate({opacity:"hide"},a,b)},fadeTo:function(a,b,c){return this.animate({opacity:b},a,c)},animate:function(a,b,c,d){var e=jQuery.speed(b,c,d);return this[!1===e.queue?"each":"queue"](function(){if(1!=this.nodeType)return!1;var b,c=jQuery.extend({},e),d=jQuery(this).is(":hidden"),f=this;for(b in a){if("hide"==a[b]&&d||"show"==a[b]&&!d)return c.complete.call(this);"height"!=b&&"width"!=b||(c.display=jQuery.css(this,"display"),c.overflow=this.style.overflow)}return null!=c.overflow&&(this.style.overflow="hidden"),c.curAnim=jQuery.extend({},a),jQuery.each(a,function(b,e){var g=new jQuery.fx(f,c,b);if(/toggle|show|hide/.test(e))g["toggle"==e?d?"show":"hide":e](a);else{var h=e.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),i=g.cur(!0)||0;if(h){var j=parseFloat(h[2]),k=h[3]||"px";"px"!=k&&(f.style[b]=(j||1)+k,i=(j||1)/g.cur(!0)*i,f.style[b]=i+k),h[1]&&(j=("-="==h[1]?-1:1)*j+i),g.custom(i,j,k)}else g.custom(i,e,"")}}),!0})},queue:function(a,b){return(jQuery.isFunction(a)||a&&a.constructor==Array)&&(b=a,a="fx"),!a||"string"==typeof a&&!b?queue(this[0],a):this.each(function(){b.constructor==Array?queue(this,a,b):(queue(this,a).push(b),1==queue(this,a).length&&b.call(this))})},stop:function(a,b){var c=jQuery.timers;return a&&this.queue([]),this.each(function(){for(var a=c.length-1;a>=0;a--)c[a].elem==this&&(b&&c[a](!0),c.splice(a,1))}),b||this.dequeue(),this}});var queue=function(a,b,c){if(a){b=b||"fx";var d=jQuery.data(a,b+"queue");d&&!c||(d=jQuery.data(a,b+"queue",jQuery.makeArray(c)))}return d};jQuery.fn.dequeue=function(a){return a=a||"fx",this.each(function(){var b=queue(this,a);b.shift(),b.length&&b[0].call(this)})},jQuery.extend({speed:function(a,b,c){var d=a&&a.constructor==Object?a:{complete:c||!c&&b||jQuery.isFunction(a)&&a,duration:a,easing:c&&b||b&&b.constructor!=Function&&b};return d.duration=(d.duration&&d.duration.constructor==Number?d.duration:jQuery.fx.speeds[d.duration])||jQuery.fx.speeds.def,d.old=d.complete,d.complete=function(){!1!==d.queue&&jQuery(this).dequeue(),jQuery.isFunction(d.old)&&d.old.call(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],timerId:null,fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig||(b.orig={})}}),jQuery.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this),"height"!=this.prop&&"width"!=this.prop||(this.elem.style.display="block")},cur:function(a){if(null!=this.elem[this.prop]&&null==this.elem.style[this.prop])return this.elem[this.prop];var b=parseFloat(jQuery.css(this.elem,this.prop,a));return b&&b>-1e4?b:parseFloat(jQuery.curCSS(this.elem,this.prop))||0},custom:function(a,b,c){function d(a){return e.step(a)}this.startTime=now(),this.start=a,this.end=b,this.unit=c||this.unit||"px",this.now=this.start,this.pos=this.state=0,this.update();var e=this;d.elem=this.elem,jQuery.timers.push(d),null==jQuery.timerId&&(jQuery.timerId=setInterval(function(){for(var a=jQuery.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||(clearInterval(jQuery.timerId),jQuery.timerId=null)},13))},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop),this.options.show=!0,this.custom(0,this.cur()),"width"!=this.prop&&"height"!=this.prop||(this.elem.style[this.prop]="1px"),jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=now();if(a||b>this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;var c=!0;for(var d in this.options.curAnim)!0!==this.options.curAnim[d]&&(c=!1);if(c&&(null!=this.options.display&&(this.elem.style.overflow=this.options.overflow,this.elem.style.display=this.options.display,"none"==jQuery.css(this.elem,"display")&&(this.elem.style.display="block")),this.options.hide&&(this.elem.style.display="none"),this.options.hide||this.options.show))for(var e in this.options.curAnim)jQuery.attr(this.elem.style,e,this.options.orig[e]);return c&&this.options.complete.call(this.elem),!1}var f=b-this.startTime;return this.state=f/this.options.duration,this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?"swing":"linear")](this.state,f,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},jQuery.extend(jQuery.fx,{speeds:{slow:600,fast:200,def:400},step:{scrollLeft:function(a){a.elem.scrollLeft=a.now},scrollTop:function(a){a.elem.scrollTop=a.now},opacity:function(a){jQuery.attr(a.elem.style,"opacity",a.now)},_default:function(a){a.elem.style[a.prop]=a.now+a.unit}}}),jQuery.fn.offset=function(){function border(a){add(jQuery.curCSS(a,"borderLeftWidth",!0),jQuery.curCSS(a,"borderTopWidth",!0))}function add(a,b){left+=parseInt(a,10)||0,top+=parseInt(b,10)||0}var left=0,top=0,elem=this[0],results;if(elem)with(jQuery.browser){var parent=elem.parentNode,offsetChild=elem,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&&parseInt(version)<522&&!/adobeair/i.test(userAgent),css=jQuery.curCSS,fixed="fixed"==css(elem,"position");if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop)),add(-doc.documentElement.clientLeft,-doc.documentElement.clientTop)}else{for(add(elem.offsetLeft,elem.offsetTop);offsetParent;)add(offsetParent.offsetLeft,offsetParent.offsetTop),(mozilla&&!/^t(able|d|h)$/i.test(offsetParent.tagName)||safari&&!safari2)&&border(offsetParent),fixed||"fixed"!=css(offsetParent,"position")||(fixed=!0),offsetChild=/^body$/i.test(offsetParent.tagName)?offsetChild:offsetParent,offsetParent=offsetParent.offsetParent;for(;parent&&parent.tagName&&!/^body|html$/i.test(parent.tagName);)/^inline|table.*$/i.test(css(parent,"display"))||add(-parent.scrollLeft,-parent.scrollTop),mozilla&&"visible"!=css(parent,"overflow")&&border(parent),parent=parent.parentNode;(safari2&&(fixed||"absolute"==css(offsetChild,"position"))||mozilla&&"absolute"!=css(offsetChild,"position"))&&add(-doc.body.offsetLeft,-doc.body.offsetTop),fixed&&add(Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),Math.max(doc.documentElement.scrollTop,doc.body.scrollTop))}results={top:top,left:left}}return results},jQuery.fn.extend({position:function(){var a;if(this[0]){var b=this.offsetParent(),c=this.offset(),d=/^body|html$/i.test(b[0].tagName)?{top:0,left:0}:b.offset();c.top-=num(this,"marginTop"),c.left-=num(this,"marginLeft"),d.top+=num(b,"borderTopWidth"),d.left+=num(b,"borderLeftWidth"),a={top:c.top-d.top,left:c.left-d.left}}return a},offsetParent:function(){for(var a=this[0].offsetParent;a&&!/^body|html$/i.test(a.tagName)&&"static"==jQuery.css(a,"position");)a=a.offsetParent;return jQuery(a)}}),jQuery.each(["Left","Top"],function(a,b){var c="scroll"+b;jQuery.fn[c]=function(b){if(this[0])return b!=undefined?this.each(function(){this==window||this==document?window.scrollTo(a?jQuery(window).scrollLeft():b,a?b:jQuery(window).scrollTop()):this[c]=b}):this[0]==window||this[0]==document?self[a?"pageYOffset":"pageXOffset"]||jQuery.boxModel&&document.documentElement[c]||document.body[c]:this[0][c]}}),jQuery.each(["Height","Width"],function(a,b){var c=a?"Left":"Top",d=a?"Right":"Bottom";jQuery.fn["inner"+b]=function(){return this[b.toLowerCase()]()+num(this,"padding"+c)+num(this,"padding"+d)},jQuery.fn["outer"+b]=function(a){return this["inner"+b]()+num(this,"border"+c+"Width")+num(this,"border"+d+"Width")+(a?num(this,"margin"+c)+num(this,"margin"+d):0)}})}(),function(a){function b(b,c,d){var e=a[b][c].getter||[];return e="string"==typeof e?e.split(/,?\s+/):e,-1!=a.inArray(d,e)}a.ui={plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},cssCache:{},css:function(b){if(a.ui.cssCache[b])return a.ui.cssCache[b];var c=a('<div class="ui-resizable-gen">').addClass(b).css({position:"absolute",top:"-5000px",left:"-5000px",display:"block"}).appendTo("body");a.ui.cssCache[b]=!(/auto|default/.test(c.css("cursor"))&&!/^[1-9]/.test(c.css("height"))&&!/^[1-9]/.test(c.css("width"))&&/none/.test(c.css("backgroundImage"))&&/transparent|rgba\(0, 0, 0, 0\)/.test(c.css("backgroundColor")));try{a("body").get(0).removeChild(c.get(0))}catch(a){}return a.ui.cssCache[b]},disableSelection:function(a){a.unselectable="on",a.onselectstart=function(){return!1},a.style&&(a.style.MozUserSelect="none")},enableSelection:function(a){a.unselectable="off",a.onselectstart=function(){return!0},a.style&&(a.style.MozUserSelect="")},hasScroll:function(a,b){var c=/top/.test(b||"top")?"scrollTop":"scrollLeft",d=!1;return a[c]>0||(a[c]=1,d=a[c]>0,a[c]=0,d)}};var c=a.fn.remove;a.fn.remove=function(){return a("*",this).add(this).trigger("remove"),c.apply(this,arguments)},a.widget=function(c,d){var e=c.split(".")[0];c=c.split(".")[1],a.fn[c]=function(d){var f="string"==typeof d,g=Array.prototype.slice.call(arguments,1);if(f&&b(e,c,d)){var h=a.data(this[0],c);return h?h[d].apply(h,g):void 0}return this.each(function(){var b=a.data(this,c);f&&b&&a.isFunction(b[d])?b[d].apply(b,g):f||a.data(this,c,new a[e][c](this,d))})},a[e][c]=function(b,d){var f=this;this.widgetName=c,this.widgetBaseClass=e+"-"+c,this.options=a.extend({disabled:!1},a[e][c].defaults,d),this.element=a(b).bind("setData."+c,function(a,b,c){return f.setData(b,c)}).bind("getData."+c,function(a,b){return f.getData(b)}).bind("remove",function(){return f.destroy()}),this.init()},a[e][c].prototype=a.extend({},a.widget.prototype,d)},a.widget.prototype={init:function(){},destroy:function(){this.element.removeData(this.widgetName)},getData:function(a){return this.options[a]},setData:function(a,b){this.options[a]=b,"disabled"==a&&this.element[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled")},enable:function(){this.setData("disabled",!1)},disable:function(){this.setData("disabled",!0)}},a.ui.mouse={mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b.mouseDown(a)}),a.browser.msie&&(this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on")),this.started=!1},mouseDestroy:function(){this.element.unbind("."+this.widgetName),a.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable)},mouseDown:function(b){this._mouseStarted&&this.mouseUp(b),this._mouseDownEvent=b;var c=this,d=1==b.which,e="string"==typeof this.options.cancel&&a(b.target).is(this.options.cancel);return!(d&&!e&&this.mouseCapture(b))||(this._mouseDelayMet=!this.options.delay,this._mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c._mouseDelayMet=!0},this.options.delay)),this.mouseDistanceMet(b)&&this.mouseDelayMet(b)&&(this._mouseStarted=!1!==this.mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(this._mouseMoveDelegate=function(a){return c.mouseMove(a)},this._mouseUpDelegate=function(a){return c.mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),!1))},mouseMove:function(b){return a.browser.msie&&parseInt(jQuery.browser.version,10)<9&&!b.button?this.mouseUp(b):this._mouseStarted?(this.mouseDrag(b),!1):(this.mouseDistanceMet(b)&&this.mouseDelayMet(b)&&(this._mouseStarted=!1!==this.mouseStart(this._mouseDownEvent,b),this._mouseStarted?this.mouseDrag(b):this.mouseUp(b)),!this._mouseStarted)},mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this.mouseStop(b)),!1},mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},mouseDelayMet:function(a){return this._mouseDelayMet},mouseStart:function(a){},mouseDrag:function(a){},mouseStop:function(a){},mouseCapture:function(a){return!0}},a.ui.mouse.defaults={cancel:null,distance:1,delay:0}}(jQuery),function(a){a.widget("ui.draggable",a.extend(a.ui.mouse,{init:function(){var a=this.options;"original"!=a.helper||/(relative|absolute|fixed)/.test(this.element.css("position"))||this.element.css("position","relative"),this.element.addClass("ui-draggable"),a.disabled&&this.element.addClass("ui-draggable-disabled"),this.mouseInit()},mouseStart:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return!1;var d=!this.options.handle||!a(this.options.handle,this.element).length;if(a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(d=!0)}),!d)return!1;a.ui.ddmanager&&(a.ui.ddmanager.current=this),this.helper=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone():this.element,this.helper.parents("body").length||this.helper.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),this.helper[0]==this.element[0]||/(fixed|absolute)/.test(this.helper.css("position"))||this.helper.css("position","absolute"),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0},this.cssPosition=this.helper.css("position"),this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();this.offsetParent[0]==document.body&&a.browser.mozilla&&(e={top:0,left:0}),this.offset.parent={top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};var f=this.element.position();if(this.offset.relative="relative"==this.cssPosition?{top:f.top-(parseInt(this.helper.css("top"),10)||0)+this.offsetParent[0].scrollTop,left:f.left-(parseInt(this.helper.css("left"),10)||0)+this.offsetParent[0].scrollLeft}:{top:0,left:0},this.originalPosition=this.generatePosition(b),this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()},c.cursorAt&&(void 0!=c.cursorAt.left&&(this.offset.click.left=c.cursorAt.left+this.margins.left),void 0!=c.cursorAt.right&&(this.offset.click.left=this.helperProportions.width-c.cursorAt.right+this.margins.left),void 0!=c.cursorAt.top&&(this.offset.click.top=c.cursorAt.top+this.margins.top),void 0!=c.cursorAt.bottom&&(this.offset.click.top=this.helperProportions.height-c.cursorAt.bottom+this.margins.top)),c.containment&&("parent"==c.containment&&(c.containment=this.helper[0].parentNode),"document"!=c.containment&&"window"!=c.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==c.containment?document:window).width()-this.offset.relative.left-this.offset.parent.left-this.helperProportions.width-this.margins.left-(parseInt(this.element.css("marginRight"),10)||0),(a("document"==c.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.offset.relative.top-this.offset.parent.top-this.helperProportions.height-this.margins.top-(parseInt(this.element.css("marginBottom"),10)||0)]),!/^(document|window|parent)$/.test(c.containment))){var g=a(c.containment)[0],h=a(c.containment).offset();this.containment=[h.left+(parseInt(a(g).css("borderLeftWidth"),10)||0)-this.offset.relative.left-this.offset.parent.left,h.top+(parseInt(a(g).css("borderTopWidth"),10)||0)-this.offset.relative.top-this.offset.parent.top,h.left+Math.max(g.scrollWidth,g.offsetWidth)-(parseInt(a(g).css("borderLeftWidth"),10)||0)-this.offset.relative.left-this.offset.parent.left-this.helperProportions.width-this.margins.left-(parseInt(this.element.css("marginRight"),10)||0),h.top+Math.max(g.scrollHeight,g.offsetHeight)-(parseInt(a(g).css("borderTopWidth"),10)||0)-this.offset.relative.top-this.offset.parent.top-this.helperProportions.height-this.margins.top-(parseInt(this.element.css("marginBottom"),10)||0)]}return this.propagate("start",b),this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()},a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this.mouseDrag(b),!0},convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"==a?1:-1;return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition||"absolute"==this.cssPosition&&this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)*c+("fixed"==this.cssPosition?this.offsetParent[0].scrollTop:0)*c+this.margins.top*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"==this.cssPosition||"absolute"==this.cssPosition&&this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft)*c+("fixed"==this.cssPosition?this.offsetParent[0].scrollLeft:0)*c+this.margins.left*c}},generatePosition:function(a){var b=this.options,c={top:a.pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition||"absolute"==this.cssPosition&&this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)-("fixed"==this.cssPosition?this.offsetParent[0].scrollTop:0),left:a.pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition||"absolute"==this.cssPosition&&this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft)-("fixed"==this.cssPosition?this.offsetParent[0].scrollLeft:0)};if(!this.originalPosition)return c;if(this.containment&&(c.left<this.containment[0]&&(c.left=this.containment[0]),c.top<this.containment[1]&&(c.top=this.containment[1]),c.left>this.containment[2]&&(c.left=this.containment[2]),c.top>this.containment[3]&&(c.top=this.containment[3])),b.grid){var d=this.originalPosition.top+Math.round((c.top-this.originalPosition.top)/b.grid[1])*b.grid[1];c.top=this.containment&&(d<this.containment[1]||d>this.containment[3])?d<this.containment[1]?d+b.grid[1]:d-b.grid[1]:d;var e=this.originalPosition.left+Math.round((c.left-this.originalPosition.left)/b.grid[0])*b.grid[0];c.left=this.containment&&(e<this.containment[0]||e>this.containment[2])?e<this.containment[0]?e+b.grid[0]:e-b.grid[0]:e}return c},mouseDrag:function(b){return this.position=this.generatePosition(b),this.positionAbs=this.convertPositionTo("absolute"),this.position=this.propagate("drag",b)||this.position,this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},mouseStop:function(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var c=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revert,10)||500,function(){c.propagate("stop",b),c.clear()})}else this.propagate("stop",b),this.clear();return!1},clear:function(){this.helper.removeClass("ui-draggable-dragging"),"original"==this.options.helper||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},plugins:{},uiHash:function(a){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,options:this.options}},propagate:function(b,c){return a.ui.plugin.call(this,b,[c,this.uiHash()]),this.element.triggerHandler("drag"==b?b:"drag"+b,[c,this.uiHash()],this.options[b])},destroy:function(){this.element.data("draggable")&&(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable"),this.mouseDestroy())}})),a.extend(a.ui.draggable,{defaults:{appendTo:"parent",axis:!1,cancel:":input,button",delay:0,distance:0,helper:"original"}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body");d.css("cursor")&&(c.options._cursor=d.css("cursor")),d.css("cursor",c.options.cursor)},stop:function(b,c){c.options._cursor&&a("body").css("cursor",c.options._cursor)}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper);d.css("zIndex")&&(c.options._zIndex=d.css("zIndex")),d.css("zIndex",c.options.zIndex)},stop:function(b,c){c.options._zIndex&&a(c.helper).css("zIndex",c.options._zIndex)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper);d.css("opacity")&&(c.options._opacity=d.css("opacity")),d.css("opacity",c.options.opacity)},stop:function(b,c){c.options._opacity&&a(c.helper).css("opacity",c.options._opacity)}}),a.ui.plugin.add("draggable","iframeFix",{start:function(b,c){a(!0===c.options.iframeFix?"iframe":c.options.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")})},stop:function(b,c){a("div.DragDropIframeFix").each(function(){this.parentNode.removeChild(this)})}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=c.options,e=a(this).data("draggable");d.scrollSensitivity=d.scrollSensitivity||20,d.scrollSpeed=d.scrollSpeed||20,e.overflowY=function(b){do{if(/auto|scroll/.test(b.css("overflow"))||/auto|scroll/.test(b.css("overflow-y")))return b;b=b.parent()}while(b[0].parentNode);return a(document)}(this),e.overflowX=function(b){do{if(/auto|scroll/.test(b.css("overflow"))||/auto|scroll/.test(b.css("overflow-x")))return b;b=b.parent()}while(b[0].parentNode);return a(document)}(this),e.overflowY[0]!=document&&"HTML"!=e.overflowY[0].tagName&&(e.overflowYOffset=e.overflowY.offset()),e.overflowX[0]!=document&&"HTML"!=e.overflowX[0].tagName&&(e.overflowXOffset=e.overflowX.offset())},drag:function(b,c){var d=c.options,e=a(this).data("draggable");e.overflowY[0]!=document&&"HTML"!=e.overflowY[0].tagName?(e.overflowYOffset.top+e.overflowY[0].offsetHeight-b.pageY<d.scrollSensitivity&&(e.overflowY[0].scrollTop=e.overflowY[0].scrollTop+d.scrollSpeed),b.pageY-e.overflowYOffset.top<d.scrollSensitivity&&(e.overflowY[0].scrollTop=e.overflowY[0].scrollTop-d.scrollSpeed)):(b.pageY-a(document).scrollTop()<d.scrollSensitivity&&a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed),a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed)),
e.overflowX[0]!=document&&"HTML"!=e.overflowX[0].tagName?(e.overflowXOffset.left+e.overflowX[0].offsetWidth-b.pageX<d.scrollSensitivity&&(e.overflowX[0].scrollLeft=e.overflowX[0].scrollLeft+d.scrollSpeed),b.pageX-e.overflowXOffset.left<d.scrollSensitivity&&(e.overflowX[0].scrollLeft=e.overflowX[0].scrollLeft-d.scrollSpeed)):(b.pageX-a(document).scrollLeft()<d.scrollSensitivity&&a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed),a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed))}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable");d.snapElements=[],a(!0===c.options.snap?".ui-draggable":c.options.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=c.options.snapTolerance||20,f=c.absolutePosition.left,g=f+d.helperProportions.width,h=c.absolutePosition.top,i=h+d.helperProportions.height,j=d.snapElements.length-1;j>=0;j--){var k=d.snapElements[j].left,l=k+d.snapElements[j].width,m=d.snapElements[j].top,n=m+d.snapElements[j].height;if(k-e<f&&f<l+e&&m-e<h&&h<n+e||k-e<f&&f<l+e&&m-e<i&&i<n+e||k-e<g&&g<l+e&&m-e<h&&h<n+e||k-e<g&&g<l+e&&m-e<i&&i<n+e){if("inner"!=c.options.snapMode){var o=Math.abs(m-i)<=20,p=Math.abs(n-h)<=20,q=Math.abs(k-g)<=20,r=Math.abs(l-f)<=20;o&&(c.position.top=d.convertPositionTo("relative",{top:m-d.helperProportions.height,left:0}).top),p&&(c.position.top=d.convertPositionTo("relative",{top:n,left:0}).top),q&&(c.position.left=d.convertPositionTo("relative",{top:0,left:k-d.helperProportions.width}).left),r&&(c.position.left=d.convertPositionTo("relative",{top:0,left:l}).left)}if("outer"!=c.options.snapMode){var o=Math.abs(m-h)<=20,p=Math.abs(n-i)<=20,q=Math.abs(k-f)<=20,r=Math.abs(l-g)<=20;o&&(c.position.top=d.convertPositionTo("relative",{top:m,left:0}).top),p&&(c.position.top=d.convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top),q&&(c.position.left=d.convertPositionTo("relative",{top:0,left:k}).left),r&&(c.position.left=d.convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left)}}}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable");d.sortables=[],a(c.options.connectToSortable).each(function(){if(a.data(this,"sortable")){var c=a.data(this,"sortable");d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refresh(),c.propagate("activate",b,d)}})},stop:function(b,c){var d=a(this).data("draggable");a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance.mouseStop(b),this.instance.element.triggerHandler("sortreceive",[b,a.extend(this.instance.ui(),{sender:d.element})],this.instance.options.receive),this.instance.options.helper=this.instance.options._helper):this.instance.propagate("deactivate",b,d)})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(a){var b=a.left,c=b+a.width,d=a.top,e=d+a.height;return b<this.positionAbs.left+this.offset.click.left&&this.positionAbs.left+this.offset.click.left<c&&d<this.positionAbs.top+this.offset.click.top&&this.positionAbs.top+this.offset.click.top<e};a.each(d.sortables,function(g){f.call(d,this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance.mouseCapture(b,!0,!0),this.instance.mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d.propagate("toSortable",b)),this.instance.currentItem&&this.instance.mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance.mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder.remove(),d.propagate("fromSortable",b))})}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a.makeArray(a(c.options.stack.group)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||c.options.stack.min)-(parseInt(a(d).css("zIndex"),10)||c.options.stack.min)});a(d).each(function(a){this.style.zIndex=c.options.stack.min+a}),this[0].style.zIndex=c.options.stack.min+d.length}})}(jQuery),function(a){a.widget("ui.droppable",{init:function(){this.element.addClass("ui-droppable"),this.isover=0,this.isout=1;var b=this.options,c=b.accept;b=a.extend(b,{accept:b.accept&&b.accept.constructor==Function?b.accept:function(b){return a(b).is(c)}}),this.proportions={width:this.element.outerWidth(),height:this.element.outerHeight()},a.ui.ddmanager.droppables.push(this)},plugins:{},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,absolutePosition:a.positionAbs,options:this.options,element:this.element}},destroy:function(){for(var b=a.ui.ddmanager.droppables,c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable")},over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.options.accept.call(this.element,c.currentItem||c.element)&&(a.ui.plugin.call(this,"over",[b,this.ui(c)]),this.element.triggerHandler("dropover",[b,this.ui(c)],this.options.over))},out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.options.accept.call(this.element,c.currentItem||c.element)&&(a.ui.plugin.call(this,"out",[b,this.ui(c)]),this.element.triggerHandler("dropout",[b,this.ui(c)],this.options.out))},drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(".ui-droppable").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),!e&&(!!this.options.accept.call(this.element,d.currentItem||d.element)&&(a.ui.plugin.call(this,"drop",[b,this.ui(d)]),this.element.triggerHandler("drop",[b,this.ui(d)],this.options.drop),!0))},activate:function(b){var c=a.ui.ddmanager.current;a.ui.plugin.call(this,"activate",[b,this.ui(c)]),c&&this.element.triggerHandler("dropactivate",[b,this.ui(c)],this.options.activate)},deactivate:function(b){var c=a.ui.ddmanager.current;a.ui.plugin.call(this,"deactivate",[b,this.ui(c)]),c&&this.element.triggerHandler("dropdeactivate",[b,this.ui(c)],this.options.deactivate)}}),a.extend(a.ui.droppable,{defaults:{disabled:!1,tolerance:"intersect"}}),a.ui.intersect=function(a,b,c){if(!b.offset)return!1;var d=(a.positionAbs||a.position.absolute).left,e=d+a.helperProportions.width,f=(a.positionAbs||a.position.absolute).top,g=f+a.helperProportions.height,h=b.offset.left,i=h+b.proportions.width,j=b.offset.top,k=j+b.proportions.height;switch(c){case"fit":return h<d&&e<i&&j<f&&g<k;case"intersect":return h<d+a.helperProportions.width/2&&e-a.helperProportions.width/2<i&&j<f+a.helperProportions.height/2&&g-a.helperProportions.height/2<k;case"pointer":return h<(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left&&(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left<i&&j<(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top&&(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top<k;case"touch":return(f>=j&&f<=k||g>=j&&g<=k||f<j&&g>k)&&(d>=h&&d<=i||e>=h&&e<=i||d<h&&e>i);default:return!1}},a.ui.ddmanager={current:null,droppables:[],prepareOffsets:function(b,c){for(var d=a.ui.ddmanager.droppables,e=c?c.type:null,f=0;f<d.length;f++)d[f].options.disabled||b&&!d[f].options.accept.call(d[f].element,b.currentItem||b.element)||(d[f].visible=d[f].element.is(":visible"),d[f].visible&&(d[f].offset=d[f].element.offset(),d[f].proportions={width:d[f].element.outerWidth(),height:d[f].element.outerHeight()},"dragstart"!=e&&"sortactivate"!=e||d[f].activate.call(d[f],c)))},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables,function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this.drop.call(this,c)),!this.options.disabled&&this.visible&&this.options.accept.call(this.element,b.currentItem||b.element)&&(this.isout=1,this.isover=0,this.deactivate.call(this,c)))}),d},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables,function(){if(!this.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.element.parents(".ui-droppable:eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f.out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"over":"out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f.over.call(f,c))}}})}},a.ui.plugin.add("droppable","activeClass",{activate:function(b,c){a(this).addClass(c.options.activeClass)},deactivate:function(b,c){a(this).removeClass(c.options.activeClass)},drop:function(b,c){a(this).removeClass(c.options.activeClass)}}),a.ui.plugin.add("droppable","hoverClass",{over:function(b,c){a(this).addClass(c.options.hoverClass)},out:function(b,c){a(this).removeClass(c.options.hoverClass)},drop:function(b,c){a(this).removeClass(c.options.hoverClass)}})}(jQuery),function(a){function b(b,c){var d=a.browser.safari&&a.browser.version<522;if(b.contains&&!d)return b.contains(c);if(b.compareDocumentPosition)return!!(16&b.compareDocumentPosition(c));for(;c=c.parentNode;)if(c==b)return!0;return!1}a.widget("ui.sortable",a.extend(a.ui.mouse,{init:function(){this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&/left|right/.test(this.items[0].item.css("float")),/(relative|absolute|fixed)/.test(this.element.css("position"))||this.element.css("position","relative"),this.offset=this.element.offset(),this.mouseInit()},plugins:{},ui:function(b){return{helper:(b||this).helper,placeholder:(b||this).placeholder||a([]),position:(b||this).position,absolutePosition:(b||this).positionAbs,options:this.options,element:this.element,item:(b||this).currentItem,sender:b?b.element:null}},propagate:function(b,c,d,e){a.ui.plugin.call(this,b,[c,this.ui(d)]),e||this.element.triggerHandler("sort"==b?b:"sort"+b,[c,this.ui(d)],this.options[b])},serialize:function(b){var c=(a.isFunction(this.options.items)?this.options.items.call(this.element):a(this.options.items,this.element)).not(".ui-sortable-helper"),d=[];return b=b||{},c.each(function(){var c=(a(this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1])+"[]="+(b.key?c[1]:c[2]))}),d.join("&")},toArray:function(b){var c=(a.isFunction(this.options.items)?this.options.items.call(this.element):a(this.options.items,this.element)).not(".ui-sortable-helper"),d=[];return c.each(function(){d.push(a(this).attr(b||"id"))}),d},intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height;return"pointer"==this.options.tolerance||"guess"==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?d+this.offset.click.top>h&&d+this.offset.click.top<i&&b+this.offset.click.left>f&&b+this.offset.click.left<g:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},intersectsWithEdge:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height;if("pointer"==this.options.tolerance||"guess"==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]){if(!(d+this.offset.click.top>h&&d+this.offset.click.top<i&&b+this.offset.click.left>f&&b+this.offset.click.left<g))return!1;if(this.floating){if(b+this.offset.click.left>f&&b+this.offset.click.left<f+a.width/2)return 2;if(b+this.offset.click.left>f+a.width/2&&b+this.offset.click.left<g)return 1}else{if(d+this.offset.click.top>h&&d+this.offset.click.top<h+a.height/2)return 2;if(d+this.offset.click.top>h+a.height/2&&d+this.offset.click.top<i)return 1}}else{if(!(f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i))return!1;if(this.floating){if(c>f&&b<f)return 2;if(b<g&&c>g)return 1}else{if(e>h&&d<h)return 1;if(d<i&&e>i)return 2}}return!1},refresh:function(){this.refreshItems(),this.refreshPositions()},refreshItems:function(){this.items=[],this.containers=[this];var b=this.items,c=[a.isFunction(this.options.items)?this.options.items.call(this.element):a(this.options.items,this.element)];if(this.options.connectWith)for(var d=this.options.connectWith.length-1;d>=0;d--)for(var e=a(this.options.connectWith[d]),f=e.length-1;f>=0;f--){var g=a.data(e[f],"sortable");g&&!g.options.disabled&&(c.push(a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element)),this.containers.push(g))}for(var d=c.length-1;d>=0;d--)c[d].each(function(){a.data(this,"sortable-item",!0),b.push({item:a(this),width:0,height:0,left:0,top:0})})},refreshPositions:function(b){for(var c=this.items.length-1;c>=0;c--){var d=this.items[c].item;b||(this.items[c].width=(this.options.toleranceElement?a(this.options.toleranceElement,d):d).outerWidth()),b||(this.items[c].height=(this.options.toleranceElement?a(this.options.toleranceElement,d):d).outerHeight());var e=(this.options.toleranceElement?a(this.options.toleranceElement,d):d).offset();this.items[c].left=e.left,this.items[c].top=e.top}for(var c=this.containers.length-1;c>=0;c--){var e=this.containers[c].element.offset();this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this.mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item")},createPlaceholder:function(b){var c=b||this,d=c.options;if(d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){return a("<div></div>").addClass(e)[0]},update:function(a,b){b.css(a.offset()).css({width:a.outerWidth(),height:a.outerHeight()})}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)).appendTo("body").css({position:"absolute"}),d.placeholder.update.call(c.element,c.currentItem,c.placeholder)},contactContainers:function(a){for(var c=this.containers.length-1;c>=0;c--)if(this.intersectsWith(this.containers[c].containerCache)){if(!this.containers[c].containerCache.over){if(this.currentContainer!=this.containers[c]){for(var d=1e4,e=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(b(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];Math.abs(h-f)<d&&(d=Math.abs(h-f),e=this.items[g])}if(!e&&!this.options.dropOnEmpty)continue;this.placeholder&&this.placeholder.remove(),this.containers[c].options.placeholder?this.containers[c].createPlaceholder(this):this.placeholder=null,e?this.rearrange(a,e):this.rearrange(a,null,this.containers[c].element),this.propagate("change",a),this.containers[c].propagate("change",a,this),this.currentContainer=this.containers[c]}this.containers[c].propagate("over",a,this),this.containers[c].containerCache.over=1}}else this.containers[c].containerCache.over&&(this.containers[c].propagate("out",a,this),this.containers[c].containerCache.over=0)},mouseCapture:function(b,c){if(this.options.disabled||"static"==this.options.type)return!1;var d=null;a(b.target).parents().each(function(){if(a.data(this,"sortable-item"))return d=a(this),!1});if(a.data(b.target,"sortable-item")&&(d=a(b.target)),!d)return!1;if(this.options.handle&&!c){var e=!1;if(a(this.options.handle,d).find("*").andSelf().each(function(){this==b.target&&(e=!0)}),!e)return!1}return this.currentItem=d,!0},mouseStart:function(b,c,d){var e=this.options;this.currentContainer=this,this.refresh(),this.helper="function"==typeof e.helper?a(e.helper.apply(this.element[0],[b,this.currentItem])):this.currentItem.clone(),this.helper.parents("body").length||this.helper.appendTo("parent"!=e.appendTo?e.appendTo:this.currentItem[0].parentNode),this.helper.css({position:"absolute",clear:"both"}).addClass("ui-sortable-helper"),this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0},this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();if(this.offset.parent={top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)},this.originalPosition=this.generatePosition(b),this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()},e.cursorAt&&(void 0!=e.cursorAt.left&&(this.offset.click.left=e.cursorAt.left),void 0!=e.cursorAt.right&&(this.offset.click.left=this.helperProportions.width-e.cursorAt.right),void 0!=e.cursorAt.top&&(this.offset.click.top=e.cursorAt.top),void 0!=e.cursorAt.bottom&&(this.offset.click.top=this.helperProportions.height-e.cursorAt.bottom)),this.domPosition=this.currentItem.prev()[0],e.containment&&("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.parent.left,0-this.offset.parent.top,a("document"==e.containment?document:window).width()-this.offset.parent.left-this.helperProportions.width-this.margins.left-(parseInt(this.element.css("marginRight"),10)||0),(a("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.offset.parent.top-this.helperProportions.height-this.margins.top-(parseInt(this.element.css("marginBottom"),10)||0)]),!/^(document|window|parent)$/.test(e.containment))){var g=a(e.containment)[0],h=a(e.containment).offset();this.containment=[h.left+(parseInt(a(g).css("borderLeftWidth"),10)||0)-this.offset.parent.left,h.top+(parseInt(a(g).css("borderTopWidth"),10)||0)-this.offset.parent.top,h.left+Math.max(g.scrollWidth,g.offsetWidth)-(parseInt(a(g).css("borderLeftWidth"),10)||0)-this.offset.parent.left-this.helperProportions.width-this.margins.left-(parseInt(this.currentItem.css("marginRight"),10)||0),h.top+Math.max(g.scrollHeight,g.offsetHeight)-(parseInt(a(g).css("borderTopWidth"),10)||0)-this.offset.parent.top-this.helperProportions.height-this.margins.top-(parseInt(this.currentItem.css("marginBottom"),10)||0)]}if(e.placeholder&&this.createPlaceholder(),this.propagate("start",b),this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()},"clone"!=this.options.placeholder&&this.currentItem.css("visibility","hidden"),!d)for(var i=this.containers.length-1;i>=0;i--)this.containers[i].propagate("activate",b,this);return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.mouseDrag(b),!0},convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"==a?1:-1;return{top:b.top+this.offset.parent.top*c-(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)*c+this.margins.top*c,left:b.left+this.offset.parent.left*c-(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft)*c+this.margins.left*c}},generatePosition:function(a){var b=this.options,c={top:a.pageY-this.offset.click.top-this.offset.parent.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop),left:a.pageX-this.offset.click.left-this.offset.parent.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft)};if(!this.originalPosition)return c;if(this.containment&&(c.left<this.containment[0]&&(c.left=this.containment[0]),c.top<this.containment[1]&&(c.top=this.containment[1]),c.left>this.containment[2]&&(c.left=this.containment[2]),c.top>this.containment[3]&&(c.top=this.containment[3])),b.grid){var d=this.originalPosition.top+Math.round((c.top-this.originalPosition.top)/b.grid[1])*b.grid[1];c.top=this.containment&&(d<this.containment[1]||d>this.containment[3])?d<this.containment[1]?d+b.grid[1]:d-b.grid[1]:d;var e=this.originalPosition.left+Math.round((c.left-this.originalPosition.left)/b.grid[0])*b.grid[0];c.left=this.containment&&(e<this.containment[0]||e>this.containment[2])?e<this.containment[0]?e+b.grid[0]:e-b.grid[0]:e}return c},mouseDrag:function(c){this.position=this.generatePosition(c),this.positionAbs=this.convertPositionTo("absolute");for(var d=this.items.length-1;d>=0;d--){var e=this.intersectsWithEdge(this.items[d]);if(e&&!(this.items[d].item[0]==this.currentItem[0]||this.currentItem[1==e?"next":"prev"]()[0]==this.items[d].item[0]||b(this.currentItem[0],this.items[d].item[0])||"semi-dynamic"==this.options.type&&b(this.element[0],this.items[d].item[0]))){this.direction=1==e?"down":"up",this.rearrange(c,this.items[d]),this.propagate("change",c);break}}return this.contactContainers(c),this.propagate("sort",c),this.options.axis&&"x"!=this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"y"!=this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,c),!1},mouseStop:function(b,c){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.currentItem.offset();d.placeholder&&d.placeholder.animate({opacity:"hide"},(parseInt(this.options.revert,10)||500)-50),a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d.propagate("stop",b,null,c),d.clear(b)})}else this.propagate("stop",b,null,c),this.clear(b,c);return!1},clear:function(c,d){if(this.domPosition!=this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.propagate("update",c,null,d),!b(this.element[0],this.currentItem[0])){this.domPosition==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.propagate("update",c,null,d),this.propagate("remove",c,null,d);for(var e=this.containers.length-1;e>=0;e--)b(this.containers[e].element[0],this.currentItem[0])&&(this.containers[e].propagate("update",c,this,d),this.containers[e].propagate("receive",c,this,d))}for(var e=this.containers.length-1;e>=0;e--)this.containers[e].propagate("deactivate",c,this,d),this.containers[e].containerCache.over&&(this.containers[e].propagate("out",c,this),this.containers[e].containerCache.over=0);return this.dragging=!1,!this.cancelHelperRemoval&&(a(this.currentItem).css("visibility",""),this.placeholder&&this.placeholder.remove(),this.helper.remove(),!0)},rearrange:function(a,b,c){c?c.append(this.currentItem):b.item["down"==this.direction?"before":"after"](this.currentItem),this.refreshPositions(!0),this.options.placeholder&&this.options.placeholder.update.call(this.element,this.currentItem,this.placeholder)}})),a.extend(a.ui.sortable,{getter:"serialize toArray",defaults:{tolerance:"guess",distance:0,delay:0,cancel:":input,button",items:"> *",zIndex:1e3,dropOnEmpty:!0,appendTo:"parent"}}),a.ui.plugin.add("sortable","cursor",{start:function(b,c){var d=a("body");d.css("cursor")&&(c.options._cursor=d.css("cursor")),d.css("cursor",c.options.cursor)},stop:function(b,c){c.options._cursor&&a("body").css("cursor",c.options._cursor)}}),a.ui.plugin.add("sortable","zIndex",{start:function(a,b){var c=b.helper;c.css("zIndex")&&(b.options._zIndex=c.css("zIndex")),c.css("zIndex",b.options.zIndex)},stop:function(b,c){c.options._zIndex&&a(c.helper).css("zIndex",c.options._zIndex)}}),a.ui.plugin.add("sortable","opacity",{start:function(a,b){var c=b.helper;c.css("opacity")&&(b.options._opacity=c.css("opacity")),c.css("opacity",b.options.opacity)},stop:function(b,c){c.options._opacity&&a(c.helper).css("opacity",c.options._opacity)}}),a.ui.plugin.add("sortable","scroll",{start:function(b,c){var d=c.options,e=a(this).data("sortable");d.scrollSensitivity=d.scrollSensitivity||20,d.scrollSpeed=d.scrollSpeed||20,e.overflowY=function(b){do{if(/auto|scroll/.test(b.css("overflow"))||/auto|scroll/.test(b.css("overflow-y")))return b;b=b.parent()}while(b[0].parentNode);return a(document)}(e.currentItem),e.overflowX=function(b){do{if(/auto|scroll/.test(b.css("overflow"))||/auto|scroll/.test(b.css("overflow-x")))return b;b=b.parent()}while(b[0].parentNode);return a(document)}(e.currentItem),e.overflowY[0]!=document&&"HTML"!=e.overflowY[0].tagName&&(e.overflowYOffset=e.overflowY.offset()),e.overflowX[0]!=document&&"HTML"!=e.overflowX[0].tagName&&(e.overflowXOffset=e.overflowX.offset())},sort:function(b,c){var d=c.options,e=a(this).data("sortable");e.overflowY[0]!=document&&"HTML"!=e.overflowY[0].tagName?(e.overflowYOffset.top+e.overflowY[0].offsetHeight-b.pageY<d.scrollSensitivity&&(e.overflowY[0].scrollTop=e.overflowY[0].scrollTop+d.scrollSpeed),b.pageY-e.overflowYOffset.top<d.scrollSensitivity&&(e.overflowY[0].scrollTop=e.overflowY[0].scrollTop-d.scrollSpeed)):(b.pageY-a(document).scrollTop()<d.scrollSensitivity&&a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed),a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed)),e.overflowX[0]!=document&&"HTML"!=e.overflowX[0].tagName?(e.overflowXOffset.left+e.overflowX[0].offsetWidth-b.pageX<d.scrollSensitivity&&(e.overflowX[0].scrollLeft=e.overflowX[0].scrollLeft+d.scrollSpeed),b.pageX-e.overflowXOffset.left<d.scrollSensitivity&&(e.overflowX[0].scrollLeft=e.overflowX[0].scrollLeft-d.scrollSpeed)):(b.pageX-a(document).scrollLeft()<d.scrollSensitivity&&a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed),a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed))}})}(jQuery);
//# sourceMappingURL=Sage-Combined.js.map
require({cache:{"Sage/Data/BaseSDataStore":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Data.BaseSDataStore",null,{queryName:null,ignoreETag:null,constructor:function(a){d.mixin(this,a),this.features={"dojo.data.api.Read":!0},this.identityAttributes||(this.identityAttributes=[this.identityAttribute||"$key"]),this.labelAttributes||(this.labelAttributes=["$descriptor"]),this.features["dojo.data.api.Identity"]=!0,this.dataCache={query:""}},fetch:function(a){if(!this.isNewContext(a)&&this.feed)return void this.onSuccess(a,this.feed);this.setContext(a),a.count===1/0&&(a.count=500);var b=(a.count-0||this.pageSize,a.start-0||1);b>1&&(b+=1),this.verifyService();var c=this.getCollectionRequestObj(a);if(!c)return void(a.onError&&a.onError.call(a.scope||this,"Invalid data url",a));c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,isNaN(b)?1:b);var e="";if(this.query&&"function"!=typeof this.query&&(this.directQuery||(this.directQuery=this.query)),this.directQuery&&(a.query||(a.query={}),d.mixin(a.query,this.directQuery)),a.query)if("function"==typeof a.query)e=a.query();else if("string"==typeof a.query)e=a.query;else if("object"==typeof a.query)for(var f in a.query)if("fn"===f)e=a.query.fn.call(a.query.scope||this);else if("conditions"===f)"string"==typeof a.query.conditions&&""!==a.query.conditions&&(e+=e&&e.length>0?" and "+a.query.conditions:a.query.conditions);else if("scope"!==f&&a.query.hasOwnProperty(f)){var g=[f," like ","'",a.query[f].replace("*","%"),"'"].join("");e+=e.length>0?" and "+g:g}if(a.evaluatedQuery=e||"",e&&""!==e&&c.setQueryArg("where",e),this.select&&this.select.length>0&&c.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&c.setQueryArg("include",this.include.join(",")),this.sort&&(a.sort=a.sort||[],dojo.forEach(this.sort,function(b){0===dojo.filter(a.sort,function(a){return b.attribute==a.attribute}).length&&a.sort.push(b)})),void 0!==a.resourcePredicate&&c.getUri().setCollectionPredicate(a.resourcePredicate),this._setQueryArgsOnRequest(a.queryArgs,c),a.sort&&a.sort.length>0){var h=[];dojo.forEach(a.sort,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},h),c.setQueryArg("orderBy",h.join(","))}this.beforeRequest&&"function"==typeof this.beforeRequest&&this.beforeRequest.call(a.scope||this,c);var i=c.read({success:d.hitch(this,this.onSuccess,a),failure:d.hitch(this,this.onFailure,a)});return{abort:d.hitch(this,this.abortRequest,i)}},getCollectionRequestObj:function(a){var b=this.queryName?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(this.queryName):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);return b.setResourceKind(this.resourceKind),b.setStartIndex(a.start+1),this.resourcePredicate&&"''"!==this.resourcePredicate&&b.getUri().setCollectionPredicate(this.resourcePredicate),this._setQueryArgsOnRequest(this.queryArgs,b),!a.count&&this.count&&(a.count=this.count),b.setCount(a.count),b},_setQueryArgsOnRequest:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b.setQueryArg(c,a[c])},abortRequest:function(a){this.service.abortRequest(a)},onSuccess:function(a,b){a.onBegin&&(void 0===b.$totalResults&&(b.$totalResults=b.$itemsPerPage+b.$startIndex),a.onBegin.call(a.scope||this,b.$totalResults,a)),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a),this.addToCache(a,b)},onFailure:function(a,b,c){var d="An unknown exception occurred obtaining data.";if(b.responseText){var e=Sys.Serialization.JavaScriptSerializer.deserialize(b.responseText);d=dojo.isArray(e)?e[0].message:b.responseText}a&&a.onError?a.onError.call(a.scope||this,d,a):"string"==typeof d&&"undefined"!=typeof console&&b&&b.status&&(d+=" (HTTP status = %o; statusText = %o)")},setContext:function(a){this.context={start:a.start,count:a.count,query:a.query,queryOptions:a.queryOptions,sort:a.sort}},addToCache:function(a,b){var c,d,e;if(a.evaluatedQuery!==this.dataCache.query&&(this.clearCache(),this.dataCache.query=a.evaluatedQuery),b.$resources)for(c=0;c<b.$resources.length;c++)d=b.$resources[c],e=this.getIdentity(d),this.dataCache[e]=d},clearCache:function(){for(var a in this.dataCache)"query"!==a&&delete this.dataCache[a];this.dataCache.query=""},isNewContext:function(a){return"object"!=typeof this.context||(this.context.start!==a.start||this.context.count!==a.count)},verifyService:function(a){this.service||(this.service=b.getSDataService(a||"dynamic"))},getValue:function(b,c,d){return a.getValue(b,c)},getFeatures:function(){return this.features},getLabel:function(a){for(var b=[],c=0;c<this.labelAttributes.length;c++)a.hasOwnProperty(this.labelAttributes[c])&&b.push(a[this.labelAttributes[c]]);return b.join(" ")},getLabelAttributes:function(a){return this.labelAttributes},getIdentity:function(a){if(a){for(var b=[],c=0;c<this.identityAttributes.length;c++)a.hasOwnProperty(this.identityAttributes[c])&&b.push(a[this.identityAttributes[c]]);return b.join("")}},getIdentityAttributes:function(a){return this.identityAttributes},fetchItemByIdentity:function(a){if(this.dataCache.hasOwnProperty(a.identity))a.onItem.call(a.scope||this,this.dataCache[a.identity]);else{var b="Item with that key does not exist in the data cache: "+a.identity;a.onError&&a.onError.call(a.scope||this,{error:b})}},containsValue:function(b,c,d){return""!==a.getValue(b,c)}})})},"Sage/Utility":function(){define(["dojo/parser","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","Sage/Utility/ErrorHandler","dojox/validate/regexp","dojo/i18n!./Utility/nls/Utility","dojo/has","dojo/ready","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/xhr","dojo/date"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return Sage.namespace("Utility"),dojo.mixin(Sage.Utility,{_timeZones:null,_ownersCache:null,_ownersCacheKey:"SecCodeCache",_userCache:null,_userCacheKey:"_userCacheKey",isIE:"undefined"!=typeof ActiveXObject||g("trident"),nameToPathCache:{},nlsStrings:f,regexp:{invalidInput:"^((?!(<([!\\/?A-Za-z])|(&#))).)*$",invalidInputFmt:"^((?!(<([!\\/?A-Za-z])|(&#)|(${0}))).)*$",invalidInputMatch:"<[!\\/?A-Za-z]|&#"},makeTemplateFromString:function(a,b){var c;return void 0!==b&&null!==b||(b="\r"),c=j.filter(a.split(b),function(a){return void 0!==a&&null!==a&&""!==i.trim(a)}),new Simplate(c)},joinInvalidInputRegExpWith:function(a){return a&&dojo.isString(a)&&a.length>0?i.substitute(this.regexp.invalidInputFmt,[a]):a},getInvalidInputMatches:function(a){if(a&&dojo.isString(a)&&a.length>0){var b=a.match(this.regexp.invalidInputMatch,"g");if(b&&dojo.isArray(b))return b}return[]},isSafeForPosting:function(a){if(a&&dojo.isString(a)){if(0===a.length)return!0;var b=a.match(this.regexp.invalidInputMatch);if(null===b)return!0;if(dojo.isArray(b)&&0===b.length)return!0}return!a&&null===a},makeSafeForPosting:function(a){var b=this.getInvalidInputMatches(a);return b&&dojo.isArray(b)&&b.length>0&&j.forEach(b,function(b){var c=b;b.length>=2&&(c=b.substr(0,1)+" "+b.substr(1)),c!==b&&(a=a.replace(b,c))}),a},nameToPath:function(a){var b,c,d,e;if("string"!=typeof a)return[];if(Sage.Utility.nameToPathCache[a])return Sage.Utility.nameToPathCache[a];for(b=a.split("."),c=[],d=0;d<b.length;d++)e=b[d].match(/([a-zA-Z0-9_$]+)\[([^\]]+)\]/),e?(c.push(e[1]),/^\d+$/.test(e[2])?c.push(parseInt(e[2],10)):c.push(e[2])):c.push(b[d]);return Sage.Utility.nameToPathCache[a]=c.reverse(),Sage.Utility.nameToPathCache[a]},expand:function(a,b){return"function"==typeof b?b.apply(a,Array.prototype.slice.call(arguments,2)):b},getValue:function(a,b,c){c=void 0!==c&&null!==c?c:"";for(var d=Sage.Utility.nameToPath(b).slice(0),e=a;e&&d.length>0;){var f=d.pop();if(void 0===e[f]||null===e[f])return c;e=e[f]}return e},setValue:function(a,b,c){for(var d=a,e=Sage.Utility.nameToPath(b).slice(0);void 0!==d&&e.length>1;){var f=e.pop();if(e.length>0){var g=e[e.length-1];d=d[f]=void 0!==d[f]?d[f]:"number"==typeof g?[]:{}}}return null!==d&&void 0!==e[0]&&(d[e[0]]=c),a},getPlainText:function(a){var b=function(a){return a?a.replace(/ +/g," ").replace(/[\t]+/gm,"").replace(/[ ]+$/gm,"").replace(/^[ ]+/gm,"").replace(/\n+/g,"\n").replace(/\n+$/,"").replace(/^\n+/,"").replace(/\nNEWLINE\n/g,"\n\n").replace(/NEWLINE\n/g,"\n\n"):""},c=function(a){var b=function(a){return!/[^\t\n\r ]/.test(a.nodeValue)},c=[],d=function(a){for(var e=0;e<a.childNodes.length;e++){var f=a.childNodes[e];3==f.nodeType&&b(f)?c.push(f):f.hasChildNodes()&&d(f)}};d(a);for(var e=0;e<c.length;e++)c[e].parentNode.removeChild(c[e])},d=function(a,b){if(a.style[b])return a.style[b];var c=a.currentStyle||a.ownerDocument.defaultView.getComputedStyle(a,null);return"SCRIPT"==a.tagName?"none":c[b]?"block"==c[b]&&"TD"==a.tagName?"feaux-inline":c[b]:"LI,P,TR".indexOf(a.tagName)>-1?"block":a.style[b]},e="table-row,block,list-item",f=function(a){var b=d(a,"display")||"feaux-inline";return e.indexOf(b)>-1},g=function(a){if(/pre/.test(d(a,"whiteSpace")))return j+=a.innerHTML.replace(/\t/g," ").replace(/\n/g," "),"";if("none"==d(a,"display"))return"";var b=f(a)?"\n":" ";j+=b;for(var c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];3==e.nodeType&&(j+=e.nodeValue),e.childNodes.length&&g(e)}return j+=b};a=a.cloneNode(!0),a.innerHTML=a.innerHTML.replace(/<br>/g,"\n");for(var h=a.getElementsByTagName("p"),i=0;i<h.length;i++)h[i].innerHTML+="NEWLINE";var j="";return c(a),b(g(a))},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},extend:function(){var a,b=arguments[0]||{},c=1,d=arguments.length,e=!1;for(b.constructor==Boolean&&(e=b,b=arguments[1]||{},c=2),"object"!=typeof b&&"function"!=typeof b&&(b={}),d==c&&(b=this,--c);c<d;c++)if(null!=(a=arguments[c]))for(var f in a){var g=b[f],h=a[f];b!==h&&(e&&h&&"object"==typeof h&&!h.nodeType?b[f]=Sage.Utility.extend(e,g||(null!=h.length?[]:{}),h):void 0!==h&&(b[f]=h))}return b},getCurrentEntityId:function(){return Sage.Services.getService("ClientEntityContext").getContext().EntityId},getCurrentEntityName:function(){return Sage.Services.getService("ClientEntityContext").getContext().DisplayName},getClientContextByKey:function(a){var b="";if(Sage.Services){var c=Sage.Services.getService("ClientContextService");c&&c.containsKey(a)&&(b=c.getValue(a))}return b},setClientContextByKey:function(a,b){if(Sage.Services){var c=Sage.Services.getService("ClientContextService");if(c)return c.containsKey(a)?c.setValue(a,b):c.add(a,b),!0}return!1},getVirtualDirectoryName:function(){var a=new RegExp(window.location.host+"/([A-Za-z0-9\\-_]+)/"),b=a.exec(window.location.href);return b?b[1]:""},getSDataService:function(a,b,c,d){return Sage.Data.SDataServiceRegistry.getSDataService(a,b,c,d)},appLoadHandler:function(a,b){Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(Sage.Utility.pageLoaded),Sys.WebForms.PageRequestManager.getInstance().add_pageLoading(Sage.Utility.pageLoading),Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(Sage.Utility.showRequestIndicator),Sys.WebForms.PageRequestManager.getInstance().add_endRequest(Sage.Utility.hideRequestIndicator),Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(window.AutoLogout.resetTimer)},pageLoaded:function(a,b){var c=b.get_panelsUpdated();if(void 0!==c)for(var d=0;d<c.length;d++)dojo.parser.parse(c[d])},pageLoading:function(a,b){var c=b.get_panelsUpdating();if(void 0!==c)for(var d=0;d<c.length;d++){var e=c[d],f=dijit.findWidgets(e);dojo.forEach(f,function(a){a.destroyRecursive(!0)})}},destroyWidget:function(a){var b=dojo.attr(a,"widgetId");dijit.byId(b)&&dijit.byId(b).destroyRecursive()},showRequestIndicator:function(){var a=document.getElementById("asyncpostbackindicator");a&&(a.style.visibility="visible")},hideRequestIndicator:function(a,b){var c=dojo.byId("asyncpostbackindicator");c&&(c.style.visibility="hidden"),d.handleEndRequestError(b)},isAllowedNavigationKey:function(a){return 8==a||9==a||46==a||37==a||39==a},restrictDecimalDigit:function(a,b,c){var d=a;if(void 0===b&&(b=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits),b.length>1){var e=b.split(",");b=parseInt(e[1],10)}void 0===c&&(c=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator);var f=a.indexOf(c)+1+b;return 0===b&&(f-=1),a.indexOf(")")>0&&(f+=1),a.lastIndexOf(c)>-1&&(d=a.substr(0,f)),d},maximizeDecimalDigit:function(a,b,c){var d,e=a;void 0===b&&(b=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits),void 0===c&&(c=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator),b>0&&-1==a.lastIndexOf(c)&&a.length>0&&(e=[a,c].join(""));var f=e.lastIndexOf(c)+1+b;if(e.lastIndexOf(c)>-1&&(d=f-e.length)>0)for(var g=0;g<d;g++)e+=0;return e},restrictToNumber:function(a,b){var c=Sys.CultureInfo.CurrentCulture.numberFormat,d=a.charCode||a.keyCode,e=a.keyChar;if(a.keyCode&&Sage.Utility.isAllowedNavigationKey(a.keyCode))return!0;if(d>=48&&d<=57&&!a.shiftKey||d>=96&&d<=105&&!a.shiftKey)return!0;if(e===c.NegativeSign||109==d||110==d)return!0;switch(b){case"currency":if(e==c.CurrencyGroupSeparator||e==c.CurrencyDecimalSeparator)return!0;break;case"percent":if(e==c.PercentGroupSeparator||e==c.PercentDecimalSeparator)return!0;break;default:if(e==c.NumberGroupSeparator||e==c.NumberDecimalSeparator)return!0}return!1},restrictToNumberOnKeyPress:function(a,b){if(a.keyCode&&Sage.Utility.isAllowedNavigationKey(a.keyCode))return!0;var c=Sys.CultureInfo.CurrentCulture.numberFormat,d=a.charCode||a.keyCode,e=String.fromCharCode(d),f="0123456789"+c.NegativeSign;switch(b){case"currency":f+=c.CurrencyGroupSeparator+c.CurrencyDecimalSeparator;break;case"percent":f+=c.PercentGroupSeparator+c.PercentDecimalSeparator;break;default:f+=c.NumberGroupSeparator+c.NumberDecimalSeparator}return f.indexOf(e)>=0},Convert:function(){var a=/^(true|T)$/i,b=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z|(-|\+)(\d{2}):(\d{2}))/,c=/^(\d{4})-(\d{2})-(\d{2})$/,d=/\/Date\((-?\d+)(?:(-|\+)(\d{2})(\d{2}))?\)\//,e=function(a){return a<10?"0"+a:a},f=function(a){return"0"===a[0]?a.substring(1):a};return{toBoolean:function(b){return a.test(b)},isDateString:function(a){return"string"==typeof a&&(b.test(a)||c.test(a)||d.test(a))},dateToTimeless:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5)},toIsoStringFromDate:function(a){return 0===a.getHours()&&0===a.getMinutes()&&5===a.getSeconds()?a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+"T00:00:05Z":a.getUTCFullYear()+"-"+e(a.getUTCMonth()+1)+"-"+e(a.getUTCDate())+"T"+e(a.getUTCHours())+":"+e(a.getUTCMinutes())+":"+e(a.getUTCSeconds())+"Z"},toIsoStringFromDateNonUTC:function(a){return a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+"T"+e(a.getHours())+":"+e(a.getMinutes())+":"+e(a.getSeconds())+"Z"},toJsonStringFromDate:function(a){return"/Date("+a.getTime()+")/"},toDateFromString:function(a,e){if("string"!=typeof a)return a;var g,h,i,j,k;return(g=d.exec(a))?(h=new Date(parseInt(g[1],10)),!0===e&&g[2]&&(i=parseInt(g[3],10),j=parseInt(g[4],10),k=60*i+j,"-"===g[2]&&(k*=-1),h.setMinutes(h.getMinutes()+k)),a=h):(g=b.exec(a))?(h=new Date(Date.UTC(parseInt(g[1],10),parseInt(f(g[2]),10)-1,parseInt(f(g[3]),10),parseInt(f(g[4]),10),parseInt(f(g[5]),10),parseInt(f(g[6]),10))),"Z"!==g[8]&&(i=parseInt(g[10],10),j=parseInt(g[11],10),k=60*i+j,"-"===g[9]&&(k*=-1),h.setMinutes(h.getMinutes()+k)),a=h):(g=c.exec(a))&&(a=new Date,a.setYear(parseInt(g[1],10)),a.setMonth(parseInt(g[2],10)-1),a.setDate(parseInt(g[3],10)),a.setHours(0,0,0,0)),a},toArrayFromObject:function(a){if(a&&void 0===a.length){var b=[];return b.push(a),b}return a}}}(),getModeId:function(){var a=Sage.Services.getService("ClientContextService");if(a&&a.containsKey("modeid")){return a.getValue("modeid").toLowerCase()}var b=document.location.href,c=b.indexOf("?");if(c>0)for(var d=b.substring(c+1),e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");if(g.length>1&&"modeid"===g[0].toLowerCase())return g[1]}return"None"},getPageName:function(){var a=document.location.href;return a.substring(a.lastIndexOf("/")+1)},openHelp:function(a,b){var c=Sage.Link.getHelpUrl(a,b),d=Sage.Link.getHelpUrlTarget();window.open(c,d)},openPdfDoc:function(a){var b=Sage.Utility.getClientContextByKey("WebHelpUrlFmt");b=b.replace(b.substring(b.lastIndexOf("/")+1),""),window.open(b+a)},fragger:function(a,b){if("string"==typeof a){b=b||dojo.doc;var c=b.createElement("div"),d=dojo._toDom(a,b);return c.appendChild(d),c}},fragToDijits:function(a,b){return dojo.parser.parse(a,{noStart:b||!0})},strToDijits:function(a,b){if("string"==typeof a){var c=this.toMasterFrag(a);return this.fragToDijits(c,b)}},fragWalker:function a(b,c){for(c(b),b=b.firstChild;b;)a(b,c),b=b.nextSibling},extract:function(a,b){var c,d=2===b,e=d?0:[];for(c in a)d?e++:window.has(a,c)&&e.push(b?a[c]:c);return e},keys:function(a){return Sage.Utility.extract(a)},size:function(a){return Sage.Utility.extract(a,2)},loadDetailsDialog:function(a){Sage.ClientLinkHandler.request({request:"ShowDialog",type:a.entityType,smartPart:a.smartPart,entityId:a.entityId,dialogTitle:a.dialogTitle,isCentered:a.isCentered,dialogTop:a.dialogTop,dialogLeft:a.dialogLeft,dialogHeight:a.dialogHeight,dialogWidth:a.dialogWidth,dialogParameters:a.dialogParameters,childInsertInfo:a.childInsertInfo})},values:function(a){return Sage.Utility.extract(a,1)},mixOwn:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},getPrecision:function(a){var b,c=a.match(/\.(\d+)/);return c&&(b=parseInt(c[1],10)),b||0},getCurrencySymbol:function(a){var b="";if(a){var c=window.currencySymbolGlobalObj;if(c)for(var d=c.split("|"),e=0;e<d.length;e++)if(a.indexOf(d[e])>-1)return b=d[e]}return b},encodeObjectStrings:function(a){if("object"==typeof a){for(var b in a)a[b]&&(a[b]=this.encodeObjectStrings(a[b]));return a}return this.htmlEncode(a)},htmlEncode:function(a){return"string"!=typeof a?a:a?a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""},_hiddenPre:document.createElement("pre"),htmlDecode:function(a){return"string"!=typeof a?a:(this._hiddenPre.innerHTML=a.replace(/</g,"&lt;"),this._hiddenPre.textContent)},getSelectionInfo:function(){var a=dijit.byId("list");return!!a&&a.getSelectionInfo()},getEQLogicalId:function(){var a="";return this.loadEQLogicalId(),localStorage.getItem("eqLogicalId")&&(a=localStorage.getItem("eqLogicalId")),a},loadEQLogicalId:function(){var a="",b={$name:"GetEqCustomSetting",request:{recordName:"CPQ EQ Logical ID"}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("Integrations").setOperationName("GetEqCustomSetting").execute(b,{async:!1,success:function(b){a=b.response.Result,localStorage.setItem("eqLogicalId",a)},failure:function(a){Sage.UI.Dialogs.showError(a)}})},loadEQEnabled:function(){var a="",b={$name:"GetEqCustomSetting",request:{recordName:"CPQ EQ Enabled"}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("Integrations").setOperationName("GetEqCustomSetting").execute(b,{async:!1,success:function(b){a=b.response.Result,localStorage.setItem("isEQEnabled",a)},failure:function(a){Sage.UI.Dialogs.showError(a)}})},isEQEnabled:function(){var a=Sage.Services.getService("IntegrationContractService"),b=!1;return this.loadEQEnabled(),localStorage.getItem("isEQEnabled")&&"true"==localStorage.getItem("isEQEnabled").toLowerCase()&&(b=!0),a.isCPQIntegrationEnabled&&b},isMingleEnabled:function(){return mingleConfig.isMingleEnabled},showEQForm:function(a,b){var c="",d=this.getEQLogicalId(),e={$name:"GetQuoteAlternateDocumentId",request:{quoteId:b}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(a)).setOperationName("GetQuoteAlternateDocumentId").execute(e,{async:!1,success:function(a){c=a.response.Result},failure:function(a){Sage.UI.Dialogs.showError(a)}}),infor.companyon.client.sendPrepareDrillbackMessage("?LogicalId="+d+"&EntityType="+a+"&Id1="+c)},showDetailForm:function(a,b){if(this.isEQEnabled()){var c="",d=this.getEQLogicalId(),e={$name:"GetQuoteAlternateDocumentId",request:{quoteId:b}};new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind(Sage.Utility.pluralize(a)).setOperationName("GetQuoteAlternateDocumentId").execute(e,{async:!1,success:function(a){c=a.response.Result},failure:function(a){Sage.UI.Dialogs.showError(a)}}),infor.companyon.client.sendPrepareDrillbackMessage("?LogicalId="+d+"&EntityType="+a+"&Id1="+c)}else window.document.location=a+".aspx?entityId="+b},Timezone_populatelist:function(a,b){var c,e;if("TimezoneList"===a?(c=dijit.byId(a),e=dojo.byId(a+"_Selected")):(c=$("#"+a+" #TimezoneList")[0],c=dijit.getEnclosingWidget(c),e=$("#"+a).find("input").filter("[@type=hidden]")[0]),c&&void 0!==c&&1==c.options.length){c.options.length=0;var f=this,g=function(){var a=[],d=null;dojo.forEach(f._timeZones,function(b){var c={label:b.Displayname,value:b.Keyname,selected:!1};a.push(c),b.Keyname==e.value&&(d=b.Keyname,c.selected=!0)}),c.addOption(a),null!==d&&c.set("value",d),dojo.connect(c,"onBlur",function(){e.value=c.get("value")}),dojo.connect(c,"onChange",function(){b&&(e.value=c.get("value"),__doPostBack(c.id,""))})};null!==this._timeZones?g():dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(a){f._timeZones=a,g()},error:function(a,b){return d.handleHttpError(a,b),a}})}return!0},getTimeZones:function(a){var b=JSON.parse(sessionStorage.getItem("_timeZones"));b&&b.length>0?a(b):dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(b){sessionStorage.setItem("_timeZones",JSON.stringify(b)),a(b)},error:function(b,c){d.handleHttpError(b,c),a(!1)}})},truncate:function(a,b){var c=0,d=a.length,e=[];if("string"==typeof b&&(b=parseInt(b,10)),"string"==typeof a)return a.length>b?a.slice(0,b)+"...":a;if(a.map&&"function"==typeof a.map)return a.map(function(a,c,d){return a.length>b?a.slice(0,b)+"...":a});for(c;c<d;c++)e.push(a[c].slice(0,b)+"...");return e},parseXMLNode:function(a,b){var c=["[","]"],d={},e=-1,f=-1,g=a.nodeName;if("#text"!==g||""!==a.nodeValue.trim()){var h=b[g],i=a.childNodes,j=a.attributes;try{if(h?dojo.isArray(h)?b[g].push(d):b[g]=[h,d]:c&&-1!=c.indexOf(g)?b[g]=[d]:b[g]=d,j)for(f=0,e=j.length;f<e;f++){var k=j[f];d[k.nodeName]=k.nodeValue}for(f=0,e=i.length;f<e;f++)this.parseXMLNode(i[f],d)}catch(a){}return d}},Dashboard:{counter:1,generateString:function(a){return a+Sage.Utility.Dashboard.counter++},getColors:function(a){if(a){var b,c,d=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"],e=["green 5","blue 3","green 7","blue 6","green 3","blue 7"],f=[];if(a<=6)for(b=0;b<a;b++)f[b]=Sage.Utility.Dashboard.colorPalette[e[b]];else for(c=0;c<a;c++)f[c]=Sage.Utility.Dashboard.colorPalette[d[c]];return f}},getColor:function(a){var b=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"];return Sage.Utility.Dashboard.colorPalette[b[a]]},colorPalette:{"blue 0":"dfe8f6","blue 6":"00a1de","green 3":"c1d59f","pink 5":"a44e81","orange 2":"f8d6aa","blue 4":"55c0e9","green 6":"69923a","pink 2":"e2afcd","orange 7":"af6200","blue 3":"80d0ef","green 8":"35491d","pink 4":"c55e9b","orange 3":"f4c180","blue 7":"0079a7","green 5":"86a85c","pink 8":"421f34","orange 6":"e98300","blue 2":"aae0f4","green 7":"4f6e2c","pink 3":"d486b4","orange 8":"754200","blue 5":"2bb1e4","green 2":"d6e3bf","pink 6":"833f67","orange 5":"ed982b","blue 8":"00516f","green 4":"a4bf7d","pink 7":"632f4e","orange 4":"f0ac55"}},isBoolean:function(a){return"boolean"==typeof a},isDefined:function(a){return void 0!==a},isEmptyString:function(a){return dojo.isString(a)&&""===a},isStringWithLength:function(a){return dojo.isString(a)&&""!==a},isTrue:function(a){return!!this.isBoolean(a)&&!0===a},getOwnerName:function(a){if(!a)return"";var b=a.replace(/^\s+|\s+$/g,"");this.buildOwnersCache(null,null,b);var c=this._ownersCache[b];return c?c.name:a},buildOwnersCache:function(a,b,c){if(sessionStorage.getItem(this._ownersCacheKey))return void(this._ownersCache=JSON.parse(sessionStorage.getItem(this._ownersCacheKey)));var d=this;this._ownersCache||(d._ownersCache={});var e=100;a=a||e,b=b||1;var f=i.substitute("slxdata.ashx/slx/dynamic/-/owners?select=Type&orderBy=$key&format=json&count=${0}&startIndex=${1}",[a,b]);return l("GET",{url:c?f+"&where=$key eq '"+c+"'":f,handleAs:"json",sync:!0}).then(function(c){for(var f=c.$totalResults,g=0;g<c.$resources.length;g++){var h=c.$resources[g];d._ownersCache[h.$key.trim()]={type:h.Type,name:h.$descriptor}}f>e&&f>=b+a&&(b+=a,d.buildOwnersCache(a,b)),sessionStorage.setItem(d._ownersCacheKey,JSON.stringify(d._ownersCache))})},getUserName:function(a){if(!a)return"";var b=a.replace(/^\s+|\s+$/g,"");this.buildUserCache(null,null,b);var c=this._userCache[b];return c?c.name:a},buildUserCache:function(a,b,c){if(!sessionStorage.getItem(this._userCacheKey)||(this._userCache=JSON.parse(sessionStorage.getItem(this._userCacheKey)),!this._userCache[c])){var d=this;this._userCache||(d._userCache={});var e=100;a=a||e,b=b||1;var f=i.substitute("slxdata.ashx/slx/dynamic/-/users?select=Enabled&format=json&Count=${0}&StartIndex=${1}",[a,b]);return l("GET",{url:c?f+"&where=$key eq '"+c+"'":f,handleAs:"json",sync:!0}).then(function(c){for(var f=c.$totalResults,g=0;g<c.$resources.length;g++){var h=c.$resources[g];d._userCache[h.$key]={enabled:h.Enabled,name:h.$descriptor}}f>e&&f>=b+a&&(b+=a,d.buildUserCache(a,b)),sessionStorage.setItem(d._userCacheKey,JSON.stringify(d._userCache))})}},isItemInArray:function(a,b){for(var c=0;c<a.length;c++)if(k.trim(a[c])==k.trim(b))return!0},pluralize:function(a,b){void 0===b&&(b=!1);var c={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},d={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},e={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","series","species","money","rice","information","equipment"].indexOf(a.toLowerCase())>=0)return a;var f,g,h;for(var i in e)if(b?(f=new RegExp(e[i]+"$","i"),g=i):(f=new RegExp(i+"$","i"),g=e[i]),f.test(a))return a.replace(f,g);h=b?d:c;for(var j in h)if(f=new RegExp(j,"i"),f.test(a))return a.replace(f,h[j]);return a},getParameterByName:function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},specialDates:{":now":function(a){return new Date},":today":function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":todaystart":function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":todayend":function(a){return a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":yesterday":function(a){return a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":yesterdaystart":function(a){return a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":yesterdayend":function(a){return a.setDate(a.getDate()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":tomorrow":function(a){return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":tomorrowstart":function(a){return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":tomorrowend":function(a){return a.setDate(a.getDate()+1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisweekstart":function(a){return a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisweekend":function(a){return a.setDate(a.getDate()+(6-a.getDay())),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thismonthstart":function(a){return a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thismonthend":function(a){return a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisyearstart":function(a){return a.setDate(1),a.setMonth(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisyearend":function(a){return a.setDate(31),a.setMonth(11),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":thisquarterstart":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":thisquarterend":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextweekstart":function(a){return a.setDate(a.getDate()+(7-a.getDay())),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextweekend":function(a){return a.setDate(a.getDate()+(7-a.getDay())+6),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextmonthstart":function(a){return a.setMonth(a.getMonth()+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextmonthend":function(a){return a.setMonth(a.getMonth()+1),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextyearstart":function(a){return a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextyearend":function(a){return a.setFullYear(a.getFullYear()+1),a.setMonth(11),a.setDate(31),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":nextquarterstart":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":nextquarterend":function(a){var b=a.getMonth(),c=2-b%3;return a.setMonth(b+c+3),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastweekstart":function(a){return a.setDate(a.getDate()-a.getDay()-7),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastweekend":function(a){return a.setDate(a.getDate()-a.getDay()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastmonthstart":function(a){return a.setMonth(a.getMonth()-1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastmonthend":function(a){return a.setMonth(a.getMonth()-1),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastyearstart":function(a){return a.setFullYear(a.getFullYear()-1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},":lastyearend":function(a){return a.setFullYear(a.getFullYear()-1),a.setMonth(11),a.setDate(31),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":lastquarterstart":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c-3),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},
":lastquarterend":function(a){var b=a.getMonth(),c=b%3;return a.setMonth(b-c-1),a.setDate(m.getDaysInMonth(a)),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a},":beforelastyearend":function(a){return a.setFullYear(a.getFullYear()-2),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a}},splitField:function(a,b){for(var c=b.split("."),d=a,e=0;e<c.length;e++){if(null===d)return"";d=d[c[e]]}return d},setField:function(a,b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e.hasOwnProperty(d[f])&&(e=e[d[f]]);e&&(e[d[d.length-1]]=c)},dynamicSort:function(a,b){return b=!0===b?0:1,function(c,d){return(Sage.Utility.splitField(c,a)<Sage.Utility.splitField(d,a)?-1:Sage.Utility.splitField(c,a)>Sage.Utility.splitField(d,a)?1:0)*b}}}),h(function(){Sage.Utility.appLoadHandler()}),Sage.Utility})},"Sage/Data/SDataServiceRegistry":function(){define(["Sage/Utility","dojo/json"],function(a,b){var c={},d=!1;return Sage.namespace("Data.SDataServiceRegistry"),Sage.Data.SDataServiceRegistry={registerService:function(a,b,e){e=e||{};var f=b instanceof Sage.SData.Client.SDataService?b:new Sage.SData.Client.SDataService(b);return c[a]=f,!e.isDefault&&d||(d=f),f},hasService:function(a){return void 0!==c[a]},getService:function(a){return"string"==typeof a&&c[a]?c[a]:d},_createCacheKey:function(a){var b=a.build();return b=b.replace(/[^a-zA-Z0-9_]/g,""),b=a.getResourceKind().text+"_"+b},_loadSDataRequest:function(a,b){var c=this._createCacheKey(a),d=this._getFromLocalStorage(c);d&&(b.result=d)},_cacheSDataRequest:function(a,b,c){if(/get/i.test(b.method)&&"object"==typeof c){var d=this._createCacheKey(a);this._saveToLocalStorage(d,c)}},_saveToLocalStorage:function(a,c){sessionStorage.setItem(a,b.stringify(c))},_getFromLocalStorage:function(a){return b.parse(sessionStorage.getItem(a))},_removeFromLocalStorage:function(a){for(var b=sessionStorage.length,c=[],d=0;d<b;d++){var e=sessionStorage.key(d);e.indexOf(a)>-1&&c.push(e)}for(var f=0;f<c.length;f++)sessionStorage.removeItem(c[f])},getSDataService:function(a,b,c,d,e){b="proxy"===a||b,a=a||"dynamic";var f="SDataService_"+a;if(f=d?[f,"_cacheResult"].join(""):f,this.hasService(f)&&!b)return this.getService(f);var g=!0;"boolean"==typeof c&&(g=c);var h=!0;"boolean"==typeof e&&(h=e);var i=new Sage.SData.Client.SDataService({serverName:window.location.hostname,virtualDirectory:Sage.Utility.getVirtualDirectoryName()+"/slxdata.ashx",applicationName:"slx",contractName:a,port:!(!window.location.port||80===window.location.port)&&window.location.port,protocol:!!/https/i.test(window.location.protocol)&&"https",json:g,compact:h});return d&&(i.on("beforerequest",this._loadSDataRequest,this),i.on("requestcomplete",this._cacheSDataRequest,this)),b||this.registerService(f,i),i}},Sage.Data.SDataServiceRegistry})},"Sage/UI/Dialogs":function(){define(["dijit/form/Button","dijit/Dialog","dijit/ProgressBar","dijit/form/TextBox","dijit/form/ValidationTextBox","dojo/i18n!./nls/Dialogs","dojo/_base/array"],function(Button,Dialog,ProgressBar,TextBox,ValidationTextBox,nlsResources,array){return Sage.namespace("UI.Dialogs"),dojo.mixin(Sage.UI.Dialogs,{raiseQueryDialog:function(a,b,c,d,e,f){return this.raiseQueryDialogExt({title:a,query:b,callbackFn:c,yesText:d,noText:e,icon:f})},raiseQueryDialogExt:function(opts){var dlg=dijit.byId("queryDialog"),iWidth,queryDialog,commonCallback,questionDivs,i,buttonDiv,yesButton,noButton;if(dlg&&dlg.destroyRecursive(),iWidth=opts&&"number"==typeof opts.width?opts.width:700,queryDialog=new dijit.Dialog({id:"queryDialog",title:opts.title,style:opts.style||{width:iWidth}}),commonCallback=function(a){queryDialog.hide(),opts.callbackFn&&"function"==typeof opts.callbackFn&&(a?opts.callbackFn.call(opts.scope||this,!0):opts.callbackFn.call(opts.scope||this,!1))},queryDialog.on("hide",function(){queryDialog.destroyRecursive()}),opts.icon){var iconDiv=new dojo.create("div",{id:"queryDialog-iconDiv",class:"messageIcon "+opts.icon});queryDialog.containerNode.appendChild(iconDiv)}if(questionDivs=[],opts.query instanceof Array)for(i=0;i<opts.query.length;i++)questionDivs.push(dojo.create("div",{id:"queryDialog-questionDiv_"+i,innerHTML:opts.query[i]}));else{var div=dojo.create("div",{id:"queryDialog-questionDiv",innerHTML:opts.query}),arrScripts=div.getElementsByTagName("script");array.forEach(arrScripts,function(script){var src=script.getAttribute("src");if(null===src&&""!==script.innerHTML)eval(script.innerHTML);else if(null!==src&&""===script.innerHTML){var head=document.getElementsByTagName("head")[0],clone=dojo.clone(script);(head||document.body).appendChild(clone)}div.removeChild(script)}),questionDivs.push(div)}buttonDiv=new dojo.create("div",{id:"queryDialog-buttonDiv",style:"text-align: "+(opts.align||"center")+"; margin-top: 10px"}),yesButton=new dijit.form.Button({label:opts.yesText||nlsResources.yesText,id:"qry_yesButton",onClick:function(a){commonCallback(!0)}}),buttonDiv.appendChild(yesButton.domNode),(opts.noText||opts.showNoButton)&&(noButton=new dijit.form.Button({label:opts.noText||nlsResources.noText,id:"qry_noButton",style:"padding-left: 10px",onClick:function(a){commonCallback(!1)}}),buttonDiv.appendChild(noButton.domNode)),dojo.forEach(questionDivs,function(a){queryDialog.containerNode.appendChild(a)}),queryDialog.containerNode.appendChild(buttonDiv),queryDialog.show()},raiseInputDialog:function(a,b,c,d,e,f,g,h){return this.raiseInputDialogExt({title:a,query:b,callbackFn:c,yesText:d,noText:e,defaultValue:f,regExp:g,invalidMessage:h})},raiseInputDialogExt:function(a){var b,c,d,e,f,g,h;b=dijit.byId("inputDialog"),b&&b.destroyRecursive(),b=new dijit.Dialog({id:"inputDialog",title:a.title}),c=dojo.create("div",{id:"inputDialog-questionDiv",innerHTML:a.query}),d=a.regExp&&dojo.isString(a.regExp)?new dijit.form.ValidationTextBox({id:"inputDialog-inputBox",value:a.defaultValue||"",style:"margin-top: 8px",regExp:a.regExp||"",invalidMessage:a.invalidMessage||""}):new dijit.form.TextBox({id:"inputDialog-inputBox",value:a.defaultValue||"",style:"margin-top: 8px"}),e=function(c){c?a.callbackFn(!0,d.get("value")):a.callbackFn(!1,d.get("value")),b.hide()},f=new dijit.form.Button({label:a.yesText||nlsResources.yesText,id:"inp_yesButton",onClick:function(a){e(!0)}}),g=new dijit.form.Button({label:a.noText||nlsResources.noText,id:"inp_noButton",onClick:function(a){e(!1)}}),h=new dojo.create("div",{id:"inputDialog-buttonDiv"}),b.on("hide",function(){b.destroyRecursive()}),h.appendChild(f.domNode),h.appendChild(g.domNode),b.containerNode.appendChild(c),b.containerNode.appendChild(d.domNode),b.containerNode.appendChild(h),!1===a.closable&&dojo.destroy(b.closeButtonNode),b.show()},showProgressBar:function(a){var b,c,d,e,f,g,h=a&&void 0!==a.maximum?a.maximum:100,i=a&&"number"==typeof a.width?a.width:300,j=a&&"number"==typeof a.width?a.height:125,k=dojo.string.substitute("width: ${0}px; height: ${1}px",[i,j]),l=!a||"boolean"!=typeof a.canclose||a.canclose;dijit.byId("progressDialog")||(b=new dijit.ProgressBar({id:"progressDialogBar",style:"margin-top: 10px; margin-bottom: 10px",indeterminate:!(!a||"undefined"===a.indeterminate)&&a.indeterminate,maximum:h}),c=new dijit.Dialog({id:"progressDialog",title:a.title,style:k,closable:l}),a&&"boolean"==typeof a.showmessage&&a.showmessage&&(d=a&&"string"==typeof a.message?a.message:"",e=new dojo.create("div",{innerHTML:d,style:"text-align: left; margin-top: 10px; margin-bottom: 10px",id:"progressDialogMessage"}),c.containerNode.appendChild(e)),c.containerNode.appendChild(b.domNode),c.show()),f=dijit.byId("progressDialogBar"),f.update({progress:a.pct,title:a.title}),a&&"boolean"==typeof a.showmessage&&a.showmessage&&"string"==typeof a.message&&(g=dojo.byId("progressDialogMessage"))&&(g.innerHTML=a.message)},closeProgressBar:function(a){var b=dijit.byId("progressDialog");b&&(b.hide(),b.destroyRecursive())},alert:function(a,b,c){var d={title:b||"Infor CRM",query:a,callbackFn:!1,yesText:nlsResources.okText||"OK",noText:!1,scope:window,icon:c||"noIcon",style:{width:"700px"}};Sage.UI.Dialogs.raiseQueryDialogExt(d)},showInfo:function(a,b){this.alert(a,b,"infoIcon")},showWarning:function(a,b){this.alert(a,b,"warningIcon")},showError:function(a,b){this.alert(a,b,"errorIcon")}}),Sage.WebClientMessageService=function(a){},Sage.WebClientMessageService.prototype.hideClientMessage=function(){},Sage.WebClientMessageService.prototype.showClientMessage=function(a,b,c,d){"object"==typeof a&&Sage.UI.Dialog.raiseQueryDialogEx(a);var e={title:"string"==typeof b?a:"",query:"string"==typeof b?b:a,callbackFn:c,yesText:nlsResources.yesText||"Yes",noText:nlsResources.noText||"No",scope:d};Sage.UI.Dialogs.raiseQueryDialogExt(e)},Sage.Services.addService("WebClientMessageService",new Sage.WebClientMessageService),Sage.UI.Dialogs})},"dijit/form/Button":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick"],function(a,b,c,d,e,f,g,h,i,j){d("dijit-legacy-requires")&&g(0,function(){a(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});var k=b("dijit.form.Button"+(d("dojo-bidi")?"_NoBidi":""),[h,i],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:j,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params))){var b=f.trim(a.innerHTML);b&&(this.label=b)}},_setShowLabelAttr:function(a){this.containerNode&&c.toggle(this.containerNode,"dijitDisplayNone",!a),this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments),this.showLabel||"title"in this.params||(this.titleNode.title=f.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});return d("dojo-bidi")&&(k=b("dijit.form.Button",k,{_setLabelAttr:function(a){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}})),k})},"dijit/form/_FormWidget":function(){define(["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(a,b,c,d,e,f,g,h){return b("dijit-legacy-requires")&&d(0,function(){var a=["dijit/form/_FormValueWidget"];require(a)}),a("dijit.form._FormWidget",[e,g,f,h],{setDisabled:function(a){c.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0"),this.set("disabled",a)},setValue:function(a){c.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0"),this.set("value",a)},getValue:function(){return c.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!b("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)}})})},"dijit/_Widget":function(){define(["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){}function o(a){return function(b,d,e,f){return b&&"string"==typeof d&&b[d]==n?b.on(d.substring(2).toLowerCase(),g.hitch(e,f)):a.apply(c,arguments)}}a.around(c,"connect",o),f.connect&&a.around(f,"connect",o);var p=d("dijit._Widget",[k,l,m],{onClick:n,onDblClick:n,onKeyDown:n,onKeyPress:n,onKeyUp:n,onMouseDown:n,onMouseMove:n,onMouseOut:n,onMouseOver:n,onMouseLeave:n,onMouseEnter:n,onMouseUp:n,constructor:function(a){this._toConnect={};for(var b in a)this[b]===n&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===n?c.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a,this._set("focused",a)},setAttribute:function(a,b){f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(a,b)},attr:function(a,b){return arguments.length>=2||"object"==typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){return f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?h("[widgetId]",this.containerNode).map(j.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return e("dijit-legacy-requires")&&i(0,function(){var a=["dijit/_base"];require(a)}),p})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(a,b,c){var d={},e={},f={length:0,add:function(a){if(e[a.id])throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered");e[a.id]=a,this.length++},remove:function(a){e[a]&&(delete e[a],this.length--)},byId:function(a){return"string"==typeof a?e[a]:a},byNode:function(a){return e[a.getAttribute("widgetId")]},toArray:function(){var a=[];for(var b in e)a.push(e[b]);return a},getUniqueId:function(a){var b;do{b=a+"_"+(a in d?++d[a]:d[a]=0)}while(e[b]);return"dijit"==c._scopeName?b:c._scopeName+"_"+b},findWidgets:function(a,b){function c(a){for(var f=a.firstChild;f;f=f.nextSibling)if(1==f.nodeType){var g=f.getAttribute("widgetId");if(g){var h=e[g];h&&d.push(h)}else f!==b&&c(f)}}var d=[];return c(a),d},_destroyAll:function(){c._curFocus=null,c._prevFocus=null,c._activeStack=[],a.forEach(f.findWidgets(b.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var b=1==a.nodeType&&a.getAttribute("widgetId");if(b)return e[b];a=a.parentNode}return null},_hash:e};return c.registry=f,f})},"dijit/main":function(){define(["dojo/_base/kernel"],function(a){return a.dijit})},"dijit/_WidgetBase":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(a){var b={};for(var c in a)b[c.toLowerCase()]=!0;return b}function y(a){return function(b){h[b?"set":"remove"](this.domNode,a,b),this._set(a,b)}}function z(a,b){return a===b||a!==a&&b!==b}m.add("dijit-legacy-requires",!n.isAsync),m.add("dojo-bidi",!1),m("dijit-legacy-requires")&&q(0,function(){a(["dijit/_base/manager"])});var A={},B=f("dijit._WidgetBase",[r,u],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:y("lang"),dir:"",_setDirAttr:y("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:d.blankGif||a.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],d=a._onMap={};for(var e in b.attributeMap)c.push(e);for(e in b)/^on/.test(e)&&(d[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,e.length-9),b.attributeMap&&e in b.attributeMap||c.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect(),this.srcNodeRef=g.byId(b),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),a&&(this.params=a,o.mixin(this,a)),this.postMixInProperties(),this.id||(this.id=w.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=t.body(this.ownerDocument),w.add(this),this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&d.parentNode&&this.domNode!==d&&(d.parentNode.replaceChild(this.domNode,d),c=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),c&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var a={};for(var c in this.params||{})a[c]=this._get(c);b.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(c in a)this.set(c,a[c])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(b.map(a,function(a){return a+"Rtl"}))),i.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,b.forEach(this.getChildren(),function(a){a._started||a._destroyed||!o.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0,this.destroyDescendants(a),this.destroy(a)},destroy:function(a){function c(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0,this.uninitialize(),b.forEach(this._connects,o.hitch(this,"disconnect")),b.forEach(this._supportingWidgets,c),this.domNode&&b.forEach(w.findWidgets(this.domNode,this.containerNode),c),this.destroyRendering(a),w.remove(this.id),this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe),this.domNode&&(a?h.remove(this.domNode,"widgetId"):j.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(a||j.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){b.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;o.isObject(a)?l.set(b,a):b.style.cssText?b.style.cssText+="; "+a:b.style.cssText=a,this._set("style",a)},_attrToDom:function(a,c,d){d=arguments.length>=3?d:this.attributeMap[a],b.forEach(o.isArray(d)?d:[d],function(b){var d=this[b.node||b||"domNode"];switch(b.type||"attribute"){case"attribute":o.isFunction(c)&&(c=o.hitch(this,c));var e=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?h.set(d,e,c):d.set(e,c);break;case"innerText":d.innerHTML="",d.appendChild(this.ownerDocument.createTextNode(c));break;case"innerHTML":d.innerHTML=c;break;case"class":i.replace(d,c,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"==typeof a){for(var c in a)this.set(c,a[c]);return this}var d=this._getAttrNames(a),e=this[d.s];if(o.isFunction(e))var f=e.apply(this,Array.prototype.slice.call(arguments,1));else{var g=this.focusNode&&!o.isFunction(this.focusNode)?"focusNode":"domNode",h=this[g]&&this[g].tagName,i=h&&(A[h]||(A[h]=x(this[g]))),j=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:i&&d.l in i&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?g:null;null!=j&&this._attrToDom(a,b,j),this._set(a,b)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b,this._created&&!z(c,b)&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{},void 0===b.bubbles&&(b.bubbles=!0),void 0===b.cancelable&&(b.cancelable=!0),b.detail||(b.detail={}),b.detail.widget=this;var d,e=this["on"+a];return e&&(d=e.apply(this,c||[b])),this._started&&!this._beingDestroyed&&p.emit(this.domNode,a.toLowerCase(),b),d},on:function(a,b){var d=this._onMap(a);return d?c.after(this,d,b,!0):this.own(p(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){c=b._onMap={};for(var d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?w.findWidgets(this.containerNode):[]},getParent:function(){return w.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(e.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(s.subscribe(a,o.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=l.get(this.domNode,"display")},placeAt:function(a,b){var c=!a.tagName&&w.byId(a);if(!c||!c.addChild||b&&"number"!=typeof b){var d=c&&"domNode"in c?c.containerNode&&!/after|before|replace/.test(b||"")?c.containerNode:c.domNode:g.byId(a,this.ownerDocument);j.place(this.domNode,d,b),!this._started&&(this.getParent()||{})._started&&this.startup()}else c.addChild(this,b);return this},defer:function(a,b){var c=setTimeout(o.hitch(this,function(){c&&(c=null,this._destroyed||o.hitch(this,a)())}),b||0);return{remove:function(){return c&&(clearTimeout(c),c=null),null}}}});return m("dojo-bidi")&&B.extend(v),B})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(a,b,c){return c("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var c=["destroyRecursive","destroy","remove"];return a.forEach(arguments,function(d){function e(){g.remove(),a.forEach(h,function(a){a.remove()})}var f,g=b.before(this,"destroy",function(a){d[f](a)}),h=[];d.then?(f="cancel",d.then(e,e)):a.forEach(c,function(a){"function"==typeof d[a]&&(f||(f=a),h.push(b.after(d,a,e,!0)))})},this),arguments}})})},"dijit/_OnDijitClickMixin":function(){define(["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(a,b,c,d,e,f){var g=d("dijit._OnDijitClickMixin",null,{connect:function(a,b,c){return this.inherited(arguments,[a,"ondijitclick"==b?f:b,c])}});return g.a11yclick=f,g})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(a,b,c,d){function e(b){if((b.keyCode===a.ENTER||b.keyCode===a.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(var c=b.target;c;c=c.parentNode)if(c.dojoClick)return!0}var f;c(document,"keydown",function(a){e(a)?(f=a.target,a.preventDefault()):f=null}),c(document,"keyup",function(a){e(a)&&a.target==f&&(f=null,c.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var g=function(a,b){return a.dojoClick=!0,c(a,"click",b)};return g.click=g,g.press=function(e,f){var g=c(e,d.press,function(a){("mousedown"!=a.type||b.isLeft(a))&&f(a)}),h=c(e,"keydown",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||f(b)});return{remove:function(){g.remove(),h.remove()}}},g.release=function(e,f){var g=c(e,d.release,function(a){("mouseup"!=a.type||b.isLeft(a))&&f(a)}),h=c(e,"keyup",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||f(b)});return{remove:function(){g.remove(),h.remove()}}},g.move=d.move,g})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return d.extend(b,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),c("dijit._FocusMixin",null,{_focusManager:a})})},"dijit/focus":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s,t=b([l,g],{curNode:null,activeStack:[],constructor:function(){var b=h.hitch(this,function(a){c.isDescendant(this.curNode,a)&&this.set("curNode",null),c.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});a.before(f,"empty",b),a.before(f,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var e=k("pointer-events")?"pointerdown":k("MSPointer")?"MSPointerDown":k("touch-events")?"mousedown, touchstart":"mousedown",f=i(a.document,e,function(a){a&&a.target&&null==a.target.parentNode||c._onTouchNode(b||a.target,"mouse")}),g=i(d,"focusin",function(a){if(a.target.tagName){var d=a.target.tagName.toLowerCase();"#document"!=d&&"body"!=d&&(o.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),h=i(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){f.remove(),g.remove(),h.remove(),f=g=h=null,d=null}}}},_onBlurNode:function(a){var b=(new Date).getTime();b<r+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(h.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),b<s+100||(this._clearActiveWidgetsTimer=setTimeout(h.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0)))},_onTouchNode:function(a,b){s=(new Date).getTime(),this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),e.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var f=d.get(a,"dijitPopupParent");if(f)a=p.byId(f).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===m.body())break;a=n.get(a.ownerDocument).frameElement}else{var g=a.getAttribute&&a.getAttribute("widgetId"),h=g&&p.byId(g);!h||"mouse"==b&&h.get("disabled")||c.unshift(g),a=a.parentNode}}}catch(a){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(r=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,e=a.length-1;if(a[e]!=c[d]){this.set("activeStack",a);var f,g;for(g=d;g>=0&&c[g]!=a[g];g--)(f=p.byId(c[g]))&&(f._hasBeenBlurred=!0,f.set("focused",!1),f._focusManager==this&&f._onBlur(b),this.emit("widget-blur",f,b));for(g++;g<=e;g++)(f=p.byId(a[g]))&&(f.set("focused",!0),f._focusManager==this&&f._onFocus(b),this.emit("widget-focus",f,b))}},focus:function(a){if(a)try{a.focus()}catch(a){}}}),u=new t;j(function(){var a=u.registerWin(n.get(document));k("ie")&&i(window,"unload",function(){a&&(a.remove(),a=null)})}),q.focus=function(a){u.focus(a)};for(var v in u)/^_/.test(v)||(q.focus[v]="function"==typeof u[v]?h.hitch(u,v):u[v]);return u.watch(function(a,b,c){q.focus[a]=c}),u})},"dijit/a11y":function(){define(["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(a,b,c,d,e,f,g){var h,i={_isElementShown:function(a){var b=d.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=c.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case"a":return c.has(a,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var b;try{var d=a.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;b=d.body}catch(c){try{b=a.contentWindow.document.body}catch(a){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){return c.get(a,"disabled")?h:c.has(a,"tabIndex")?+c.get(a,"tabIndex"):i.hasDefaultTabStop(a)?0:h},isTabNavigable:function(a){return i.effectiveTabIndex(a)>=0},isFocusable:function(a){return i.effectiveTabIndex(a)>=-1},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function d(a){return m[b(a)]||a}var e,g,h,j,k,l,m={},n=i._isElementShown,o=i.effectiveTabIndex,p=function(a){for(var d=a.firstChild;d;d=d.nextSibling)if(!(1!=d.nodeType||f("ie")<=9&&"HTML"!==d.scopeName)&&n(d)){var i=o(d);if(i>=0){0==i?(e||(e=d),g=d):i>0&&((!h||i<j)&&(j=i,h=d),(!k||i>=l)&&(l=i,k=d));var q=b(d);c.get(d,"checked")&&q&&(m[q]=d)}"SELECT"!=d.nodeName.toUpperCase()&&p(d)}};return n(a)&&p(a),{first:d(e),last:d(g),lowest:d(h),highest:d(k)}},getFirstInTabbingOrder:function(a,c){var d=i._getTabNavigable(b.byId(a,c));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(a,c){var d=i._getTabNavigable(b.byId(a,c));return d.last?d.last:d.highest}};return e.mixin(g,i),i})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(a,b,c,d,e){var f=e.doc.documentElement,g=d("ie"),h=d("opera"),i=Math.floor,j=d("ff"),k=a.boxModel.replace(/-/,""),l={dj_quirks:d("quirks"),dj_opera:h,dj_khtml:d("khtml"),dj_webkit:d("webkit"),dj_safari:d("safari"),dj_chrome:d("chrome"),dj_gecko:d("mozilla"),dj_ios:d("ios"),dj_android:d("android")};g&&(l.dj_ie=!0,l["dj_ie"+i(g)]=!0,l.dj_iequirks=d("quirks")),j&&(l["dj_ff"+i(j)]=!0),l["dj_"+k]=!0;var m="";for(var n in l)l[n]&&(m+=n+" ");return f.className=b.trim(f.className+" "+m),c(function(){if(!a.isBodyLtr()){var c="dj_rtl dijitRtl "+m.replace(/ /g,"-rtl ");f.className=b.trim(f.className+" "+c+"dj_rtl dijitRtl "+m.replace(/ /g,"-rtl "))}}),d})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,b,c,d){return c(function(){b("highcontrast")&&a.add(d.body(),"dijit_a11y")}),b})},"dijit/_CssStateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments),a.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(a){this.watch(a,f.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){function b(b){c=c.concat(a.map(c,function(a){return a+b}),"dijit"+b)}var c=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d),this.state&&b(this.state),
this.selected&&b("Selected"),this._opened&&b("Opened"),this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover"),this.focused&&b("Focused");var e=this.stateNode||this.domNode,f={};a.forEach(e.className.split(" "),function(a){f[a]=!0}),"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete f[a]}),a.forEach(c,function(a){f[a]=!0});var g=[];for(var h in f)g.push(h);e.className=g.join(" "),this._stateClasses=c},_subnodeCssMouseEvent:function(a,b,c){function e(c){d.toggle(a,b+"Hover",c)}function f(c){d.toggle(a,b+"Active",c)}function g(c){d.toggle(a,b+"Focused",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case"mouseover":case"MSPointerOver":case"pointerover":e(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":e(!1),f(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":f(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":f(!1);break;case"focus":case"focusin":g(!0);break;case"blur":case"focusout":g(!1)}},_trackMouseState:function(a,b){a._cssState=b}});return h(function(){function a(a,b,d){if(!d||!c.isDescendant(d,b))for(var e=b;e&&e!=d;e=e.parentNode)if(e._cssState){var f=l.getEnclosingWidget(e);f&&(e==f.domNode?f._cssMouseEvent(a):f._subnodeCssMouseEvent(e,e._cssState,a))}}var b,d=j.body();g(d,i.over,function(b){a(b,b.target,b.relatedTarget)}),g(d,i.out,function(b){a(b,b.target,b.relatedTarget)}),g(d,k.press,function(c){b=c.target,a(c,b)}),g(d,k.release,function(c){a(c,b),b=null}),g(d,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=l.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})}),m})},"dijit/_TemplatedMixin":function(){define(["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(a,b,c,d,e,f,g,h){var i=b("dijit._TemplatedMixin",h,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return g.substitute(a,this,function(a,e){if("!"==e.charAt(0)&&(a=d.getObject(e.substr(1),!1,c)),void 0===a)throw new Error(b+" template:"+e);return null==a?"":"!"==e.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=a(this.templatePath,{sanitize:!0}));var b,e=i.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(d.isString(e)){if(b=c.toDom(this._stringRepl(e),this.ownerDocument),1!=b.nodeType)throw new Error("Invalid template: "+e)}else b=e.cloneNode(!0);this.domNode=b}this.inherited(arguments),this._rendered||this._fillContent(this.srcNodeRef),this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});return i._templateCache={},i.getCachedTemplate=function(a,b,d){var e=i._templateCache,f=a,h=e[f];if(h){try{if(!h.ownerDocument||h.ownerDocument==(d||document))return h}catch(a){}c.destroy(h)}if(a=g.trim(a),b||a.match(/\$\{([^\}]+)\}/g))return e[f]=a;var j=c.toDom(a,d);if(1!=j.nodeType)throw new Error("Invalid template: "+a);return e[f]=j},f("ie")&&e(window,"unload",function(){var a=i._templateCache;for(var b in a){var d=a[b];"object"==typeof d&&c.destroy(d),delete a[b]}}),i})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(a){return a.cache})},"dijit/_AttachMixin":function(){define(["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(a,b,c,d,e,f,g,h,i){var j,k=e.delegate(h,{mouseenter:f.enter,mouseleave:f.leave,keypress:c._keypress}),l=d("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){this.inherited(arguments),this._attachTemplateNodes(this.domNode),this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)return;for(;!b.nextSibling;)if((b=b.parentNode)==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var d=!0,f=this.attachScope||this,g=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(g)for(var h,i=g.split(/\s*,\s*/);h=i.shift();)e.isArray(f[h])?f[h].push(a):f[h]=a,d="containerNode"!=h,this._attachPoints.push(h);var j=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event");if(j)for(var k,l=j.split(/\s*,\s*/),m=e.trim;k=l.shift();)if(k){var n=null;if(-1!=k.indexOf(":")){var o=k.split(":");k=m(o[0]),n=m(o[1])}else k=m(k);n||(n=k),this._attachEvents.push(c(a,k,e.hitch(f,n)))}return d},_attach:function(b,c,d){return c=c.replace(/^on/,"").toLowerCase(),c="dijitclick"==c?j||(j=a("./a11yclick")):k[c]||c,g(b,c,d)},_detachTemplateNodes:function(){var a=this.attachScope||this;b.forEach(this._attachPoints,function(b){delete a[b]}),this._attachPoints=[],b.forEach(this._attachEvents,function(a){a.remove()}),this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes(),this.inherited(arguments)}});return e.extend(i,{dojoAttachEvent:"",dojoAttachPoint:""}),l})},"dijit/form/_FormWidgetMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(a,b,c,d,e,f,g,h,i,j){return b("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){if(this._set("disabled",b),c.set(this.focusNode,"disabled",b),this.valueNode&&c.set(this.valueNode,"disabled",b),this.focusNode.setAttribute("aria-disabled",b?"true":"false"),b){this._set("hovering",!1),this._set("active",!1);var d="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";a.forEach(e.isArray(d)?d:[d],function(a){var b=this[a];h("webkit")||j.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)}else""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(g(this.focusNode,"focus",function(){d.remove(),b.remove()}))[0],c=h("pointer-events")?"pointerup":h("MSPointer")?"MSPointerUp":h("touch-events")?"touchend, mouseup":"mouseup",d=this.own(g(this.ownerDocumentBody,c,e.hitch(this,function(a){d.remove(),b.remove(),this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){i.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=d.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a),this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported),(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(a)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(a,b,c,d){var e=a("dijit.form._ButtonMixin"+(c("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){return a.stopPropagation(),a.preventDefault(),this.disabled||this.valueNode.click(a),!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var b=a.defaultPrevented;if(!b&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var c=this.domNode;c.parentNode;c=c.parentNode){var e=d.byNode(c);if(e&&"function"==typeof e._onSubmit){e._onSubmit(a),a.preventDefault(),b=!0;break}}return!b},postCreate:function(){this.inherited(arguments),b.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a),(this.containerNode||this.focusNode).innerHTML=a}});return c("dojo-bidi")&&(e=a("dijit.form._ButtonMixin",e,{_setLabelAttr:function(){this.inherited(arguments);var a=this.containerNode||this.focusNode;this.applyTextDir(a)}})),e})},"dijit/Dialog":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","./layout/utils","dojo/text!./templates/Dialog.html","./a11yclick","dojo/i18n!./nls/common"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){var E=new e;E.resolve(!0);var F=d("dijit._DialogBase"+(p("dojo-bidi")?"_NoBidi":""),[w,y,z,x],{templateString:D,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:u.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none",this._set("closable",a)},postMixInProperties:function(){var a=k.getLocalization("dijit","common");m.mixin(this,a),this.inherited(arguments)},postCreate:function(){i.set(this.domNode,{display:"none",position:"absolute"}),this.ownerDocumentBody.appendChild(this.domNode),this.inherited(arguments),c.after(this,"onExecute",m.hitch(this,"hide"),!0),c.after(this,"onCancel",m.hitch(this,"hide"),!0),this._modalconnects=[]},onLoad:function(){this.resize(),this._position(),this.autofocus&&H.isTop(this)&&(this._getFocusItems(),t.focus(this._firstFocusItem)),this.inherited(arguments)},focus:function(){this._getFocusItems(),t.focus(this._firstFocusItem)},_endDrag:function(){var a=h.position(this.domNode),b=q.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h),a.x=Math.min(Math.max(a.x,0),b.w-a.w),this._relativePosition=a,this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new(6==p("ie")?s:r)(a,{handle:this.titleBar}),c.after(this._moveable,"onMoveStop",m.hitch(this,"_endDrag"),!0)):g.add(a,"dijitDialogFixed"),this.underlayAttrs={dialogId:this.id,class:b.map(this.class.split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:m.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!g.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=q.getBox(this.ownerDocument),c=this._relativePosition,d=c?null:h.position(a),e=Math.floor(b.l+(c?c.x:(b.w-d.w)/2)),f=Math.floor(b.t+(c?c.y:(b.h-d.h)/2));i.set(a,{left:e+"px",top:f+"px"})}},_onKey:function(a){if(a.keyCode==l.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(t.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey||(t.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==l.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return E.promise;this._started||this.startup(),this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0),this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),H.hide(this));var a=q.get(this.ownerDocument);this._modalconnects.push(n(a,"scroll",m.hitch(this,"resize",null))),this._modalconnects.push(n(this.domNode,"keydown",m.hitch(this,"_onKey"))),i.set(this.domNode,{opacity:0,display:""}),this._set("open",!0),this._onShow(),this.resize(),this._position();var b;this._fadeInDeferred=new e(m.hitch(this,function(){b.stop(),delete this._fadeInDeferred}));var c=this._fadeInDeferred.promise;return b=j.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:m.hitch(this,function(){H.show(this,this.underlayAttrs)}),onEnd:m.hitch(this,function(){this.autofocus&&H.isTop(this)&&(this._getFocusItems(),t.focus(this._firstFocusItem)),this._fadeInDeferred.resolve(!0),delete this._fadeInDeferred})}).play(),c},hide:function(){if(!this._alreadyInitialized||!this.open)return E.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new e(m.hitch(this,function(){a.stop(),delete this._fadeOutDeferred})),this._fadeOutDeferred.then(m.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=j.fadeOut({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,function(){this.domNode.style.display="none",H.hide(this),this._fadeOutDeferred.resolve(!0),delete this._fadeOutDeferred})}).play(),this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();return this._relativePosition&&delete this._relativePosition,this._set("open",!1),b},resize:function(a){if("none"!=this.domNode.style.display){if(this._checkIfSingleChild(),!a){this._shrunk&&(this._singleChild&&void 0!==this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),b.forEach([this.domNode,this.containerNode,this.titleBar],function(a){i.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var c=q.getBox(this.ownerDocument);c.w*=this.maxRatio,c.h*=this.maxRatio;var d=h.position(this.domNode);d.w>=c.w||d.h>=c.h?(a={w:Math.min(d.w,c.w),h:Math.min(d.h,c.h)},this._shrunk=!0):this._shrunk=!1}if(a){h.setMarginBox(this.domNode,a);var e=C.marginBox2contentBox(this.domNode,a),f={domNode:this.containerNode,region:"center"};if(C.layoutChildren(this.domNode,e,[{domNode:this.titleBar,region:"top"},f]),this._singleChild){var g=C.marginBox2contentBox(this.containerNode,f);this._singleChild.resize({w:g.w,h:g.h})}else this.containerNode.style.overflow="auto",this._layoutChildren()}else this._layoutChildren();p("touch")||a||this._position()}},_layoutChildren:function(){b.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred&&this._fadeOutDeferred.cancel(),this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();H.hide(this),this.inherited(arguments)}});p("dojo-bidi")&&(F=d("dijit._DialogBase",F,{_setTitleAttr:function(a){this._set("title",a),this.titleNode.innerHTML=a,this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var G=d("dijit.Dialog",[B,F],{});G._DialogBase=F;var H=G._DialogLevelManager={_beginZIndex:950,show:function(a,b){I[I.length-1].focus=t.curNode;var c=I[I.length-1].dialog?I[I.length-1].zIndex+2:G._DialogLevelManager._beginZIndex;i.set(a.domNode,"zIndex",c),A.show(b,c-1),I.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(I[I.length-1].dialog==a){I.pop();var c=I[I.length-1];if(1==I.length?A.hide():A.show(c.underlayAttrs,c.zIndex-1),a.refocus){var d=c.focus;if(!c.dialog||d&&f.isDescendant(d,c.dialog.domNode)||(c.dialog._getFocusItems(),d=c.dialog._firstFocusItem),d)try{d.focus()}catch(a){}}}else{var e=b.indexOf(b.map(I,function(a){return a.dialog}),a);-1!=e&&I.splice(e,1)}},isTop:function(a){return I[I.length-1].dialog==a}},I=G._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];return t.watch("curNode",function(a,b,c){var d=I[I.length-1].dialog;if(c&&d&&!d._fadeOutDeferred&&c.ownerDocument==d.ownerDocument){do{if(c==d.domNode||g.contains(c,"dijitPopup"))return}while(c=c.parentNode);d.focus()}}),p("dijit-legacy-requires")&&o(0,function(){a(["dijit/TooltipDialog"])}),G})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,b,c,d,e){var f={};return a.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(a){f[a]=d[a]}),c.mixin(f,{defaultDuration:b.defaultDuration||200}),c.mixin(e,f),e})},"dijit/form/_FormMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(a,b,c,d,e,f){return b("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var c=[];return a.forEach(b||this.getChildren(),function(a){"value"in a?c.push(a):c=c.concat(this._getDescendantFormWidgets(a.getChildren()))},this),c},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var b=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var c=a.disabled||!a.validate||a.validate();return c||b||(f.scrollIntoView(a.containerNode||a.domNode),a.focus(),b=!0),c}),function(a){return a})},setValues:function(a){return c.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0"),this.set("value",a)},_setValueAttr:function(b){var c={};a.forEach(this._getDescendantFormWidgets(),function(a){if(a.name){(c[a.name]||(c[a.name]=[])).push(a)}});for(var e in c)if(c.hasOwnProperty(e)){var f=c[e],g=d.getObject(e,!1,b);void 0!==g&&(g=[].concat(g),"boolean"==typeof f[0].checked?a.forEach(f,function(b){b.set("value",-1!=a.indexOf(g,b._get("value")))}):f[0].multiple?f[0].set("value",g):a.forEach(f,function(a,b){a.set("value",g[b])}))}},getValues:function(){return c.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},_getValueAttr:function(){var b={};return a.forEach(this._getDescendantFormWidgets(),function(a){var c=a.name;if(c&&!a.disabled){var e=a.get("value");if("boolean"==typeof a.checked)if(/Radio/.test(a.declaredClass))!1!==e?d.setObject(c,e,b):void 0===(e=d.getObject(c,!1,b))&&d.setObject(c,null,b);else{var f=d.getObject(c,!1,b);f||(f=[],d.setObject(c,f,b)),!1!==e&&f.push(e)}else{var g=d.getObject(c,!1,b);void 0!==g?d.isArray(g)?g.push(e):d.setObject(c,[g,e],b):d.setObject(c,e,b)}}}),b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=a.map(this._descendants,function(a){return a.get("state")||""});return a.indexOf(b,"Error")>=0?"Error":a.indexOf(b,"Incomplete")>=0?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets(),a.forEach(this._descendants,function(a){a._started||a.startup()}),b||this._onChildChange()},_onChildChange:function(a){a&&"state"!=a&&"disabled"!=a||this._set("state",this._getState()),a&&"value"!=a&&"disabled"!=a&&"checked"!=a||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer,this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments),this._descendants=this._getDescendantFormWidgets(),this.value=this.get("value"),this.state=this._getState();var a=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))})),this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,b){return a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute(),this.execute(this.get("value"))},_getFocusItems:function(){var a=b._getTabNavigable(this.containerNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode,this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a("dijit.DialogUnderlay",[h,i],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"",class:"",_modalConnects:[],_setDialogIdAttr:function(a){d.set(this.node,"id",a+"_underlay"),this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a,this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.own(f(this.domNode,"keydown",b.hitch(this,"_onKeyDown"))),this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=g.getBox(this.ownerDocument);b.top=c.t+"px",b.left=c.l+"px",a.width=c.w+"px",a.height=c.h+"px",b.display="block"},show:function(){this.domNode.style.display="block",this.open=!0,this.layout(),this.bgIframe=new j(this.domNode);var a=g.get(this.ownerDocument);this._modalConnects=[k.on("resize",b.hitch(this,"layout")),f(a,"scroll",b.hitch(this,"layout"))]},hide:function(){for(this.bgIframe.destroy(),delete this.bgIframe,this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});return m.show=function(a,b){var c=m._singleton;!c||c._destroyed?c=l._underlay=m._singleton=new m(a):a&&c.set(a),e.set(c.domNode,"zIndex",b),c.open||c.show()},m.hide=function(){var a=m._singleton;a&&!a._destroyed&&a.hide()},m})},"dijit/BackgroundIframe":function(){define(["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(a,b,c,d,e,f,g,h){h.add("config-bgIframe",h("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||h("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var i=new function(){var b=[];this.pop=function(){var f;if(b.length)f=b.pop(),f.style.display="";else{if(h("ie")<9){var g=c.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""',i="<iframe src='"+g+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";f=document.createElement(i)}else f=d.create("iframe"),f.src='javascript:""',f.className="dijitBackgroundIframe",f.setAttribute("role","presentation"),e.set(f,"opacity",.1);f.tabIndex=-1}return f},this.push=function(a){a.style.display="none",b.push(a)}};return b.BackgroundIframe=function(a){if(!a.id)throw new Error("no id");if(h("config-bgIframe")){var b=this.iframe=i.pop();a.appendChild(b),h("ie")<7||h("quirks")?(this.resize(a),this._conn=g(a,"resize",f.hitch(this,"resize",a))):e.set(b,{width:"100%",height:"100%"})}},f.extend(b.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),i.push(this.iframe),delete this.iframe)}}),b.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,b,c,d,e){var f,g=new a;return c(function(){var a=e.getBox();if(g._rlh=b(window,"resize",function(){var b=e.getBox();a.h==b.h&&a.w==b.w||(a=b,g.emit("resize"))}),8==d("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,g.emit("resize"))},500)}d("ios")&&(b(document,"focusin",function(a){f=a.target}),b(document,"focusout",function(a){f=null}))}),g.getEffectiveBox=function(a){var b=e.getBox(a),c=f&&f.tagName&&f.tagName.toLowerCase();if(d("ios")&&f&&!f.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(f.type))){b.h*=0==orientation||180==orientation?.66:.4;var g=f.getBoundingClientRect();b.h=Math.max(b.h,g.top+g.height)}return b},g})},"dijit/layout/ContentPane":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return j("dijit.layout.ContentPane",[c,d,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,c){if((!a||!a.template)&&c&&!("href"in a)&&!("content"in a)){c=l.byId(c);for(var d=c.ownerDocument.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);a=b.delegate(a,{content:d})}this.inherited(arguments,[a,c])},postMixInProperties:function(){this.inherited(arguments);var a=p.getLocalization("dijit","loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,a),this.errorMessage=f.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&i.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!b.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){i.forEach(this.getChildren(),function(a){a._started||a._destroyed||!b.isFunction(a.startup)||(a.startup(),a._started=!0)}),this._contentSetter&&i.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!b.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(b){return a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",b)},_setHrefAttr:function(a){return this.cancel(),this.onLoadDeferred=new k(b.hitch(this,"cancel")),this.onLoadDeferred.then(b.hitch(this,"onLoad")),this._set("href",a),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",b)},_setContentAttr:function(a){return this._set("href",""),this.cancel(),this.onLoadDeferred=new k(b.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(b.hitch(this,"onLoad")),this._setContent(a||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){if(this.inherited(arguments),this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new k(b.hitch(this,"cancel")),this.onLoadDeferred.then(b.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,c={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};b.isObject(this.ioArgs)&&b.mixin(c,this.ioArgs);var d,e=this._xhrDfd=(this.ioMethod||o.get)(c);e.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(b){a._onError("Content",b)}},function(b){return e.canceled||a._onError("Download",b),delete a._xhrDfd,b}).then(function(){return a.onDownloadEnd(),delete a._xhrDfd,d}),delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(a){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;i.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),b&&(i.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults),a||n.empty(this.containerNode),delete this._singleChild},_setContent:function(a,c){this.destroyDescendants();var d=this._contentSetter;d&&d instanceof g._ContentSetter||(d=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:b.hitch(this,this._onError),onContentError:b.hitch(this,function(a){var b=this.onContentError(a);try{this.containerNode.innerHTML=b}catch(a){}})}));var e=b.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),f=d.set(b.isObject(a)&&a.domNode?a.domNode:a,e),h=this;return q(f&&f.then?f:d.parseDeferred,function(){delete h._contentSetterParams,c||(h._started&&(h._startChildren(),h._scheduleLayout()),h._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);var d=this["on"+a+"Error"].call(this,b);c||d&&this._setContent(d,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(a,b,c,d){return b("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,b){var d=this.containerNode;if(b>0){for(d=d.firstChild;b>0&&null!==d;)1==d.nodeType&&b--,d=d.nextSibling;d?b="before":(d=this.containerNode,b="last")}c.place(a.domNode,d,b),this._started&&!a._started&&a.startup()},removeChild:function(a){if("number"==typeof a&&(a=this.getChildren()[a]),a){var b=a.domNode;b&&b.parentNode&&b.parentNode.removeChild(b)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(b,c){
d.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var e=this.getChildren();return e[a.indexOf(e,b)+c]},getIndexOfChild:function(b){return a.indexOf(this.getChildren(),b)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","../registry","../Viewport","./utils"],function(a,b,c,d,e,f,g,h,i,j){return b("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer,this._needLayout=!this._childOfLayoutWidget,this.inherited(arguments),this._isShown()&&this._onShow(),this._childOfLayoutWidget||this.own(i.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;g("> *",this.containerNode).some(function(c){var d=h.byNode(c);d&&d.resize?a.push(d):!/script|link|style/i.test(c.nodeName)&&c.offsetHeight&&(b=!0)}),this._singleChild=1!=a.length||b?null:a[0],c.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0,this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout,this._wasShown||!1===this.open||this._onShow(),a&&d.setMarginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var e=b||{};f.mixin(e,a||{}),"h"in e&&"w"in e||(e=f.mixin(d.getMarginBox(c),e)),this._contentBox=j.marginBox2contentBox(c,e)}else this._contentBox=d.getContentBox(c);this._layoutChildren()},_layoutChildren:function(){if(this._checkIfSingleChild(),this._singleChild&&this._singleChild.resize){var a=this._contentBox||d.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var b,c=this.getChildren(),e=0;b=c[e++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!c.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0,this._needLayout&&this._layout(this._changeSize,this._resultSize),this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(a,b,c,d,e){function f(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function g(a,b){var d=a.resize?a.resize(b):c.setMarginBox(a.domNode,b);d?e.mixin(a,d):(e.mixin(a,c.getMarginBox(a.domNode)),e.mixin(a,b))}var h={marginBox2contentBox:function(a,b){var e=d.getComputedStyle(a),f=c.getMarginExtents(a,e),g=c.getPadBorderExtents(a,e);return{l:d.toPixelValue(a,e.paddingLeft),t:d.toPixelValue(a,e.paddingTop),w:b.w-(f.w+g.w),h:b.h-(f.h+g.h)}},layoutChildren:function(c,d,h,i,j){d=e.mixin({},d),b.add(c,"dijitLayoutContainer"),h=a.filter(h,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(a.filter(h,function(a){return"center"==a.region||"client"==a.layoutAlign})),a.forEach(h,function(a){var c=a.domNode,e=a.region||a.layoutAlign;if(!e)throw new Error("No region setting for "+a.id);var h=c.style;h.left=d.l+"px",h.top=d.t+"px",h.position="absolute",b.add(c,"dijitAlign"+f(e));var k={};i&&i==a.id&&(k["top"==a.region||"bottom"==a.region?"h":"w"]=j),"leading"==e&&(e=a.isLeftToRight()?"left":"right"),"trailing"==e&&(e=a.isLeftToRight()?"right":"left"),"top"==e||"bottom"==e?(k.w=d.w,g(a,k),d.h-=a.h,"top"==e?d.t+=a.h:h.top=d.t+d.h+"px"):"left"==e||"right"==e?(k.h=d.h,g(a,k),d.w-=a.w,"left"==e?d.l+=a.w:h.left=d.l+d.w+"px"):"client"!=e&&"center"!=e||g(a,d)})}};return e.setObject("dijit.layout.utils",h),h})},"dijit/ProgressBar":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(a,b,c,d,e,f,g,h){return b("dijit.ProgressBar",[f,g],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:h,_indeterminateHighContrastImagePath:a.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments),this.params&&"value"in this.params||(this.value=this.indeterminate?1/0:this.progress)},buildRendering:function(){this.inherited(arguments),this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString()),this.update()},_setDirAttr:function(a){var b="rtl"==a.toLowerCase();c.toggle(this.domNode,"dijitProgressBarRtl",b),c.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&b),this.inherited(arguments)},update:function(a){d.mixin(this,a||{});var b=this.internalProgress,e=this.domNode,f=1;this.indeterminate?e.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(f=Math.min(parseFloat(this.progress)/100,1),this.progress=f*this.maximum):(this.progress=Math.min(this.progress,this.maximum),f=this.maximum?this.progress/this.maximum:0),e.setAttribute("aria-valuenow",this.progress)),e.setAttribute("aria-labelledby",this.labelNode.id),e.setAttribute("aria-valuemin",0),e.setAttribute("aria-valuemax",this.maximum),this.labelNode.innerHTML=this.report(f),c.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate),c.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight()),b.style.width=100*f+"%",this.onChange()},_setValueAttr:function(a){this._set("value",a),a==1/0?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:a})},_setLabelAttr:function(a){this._set("label",a),this.update()},_setIndeterminateAttr:function(a){this._set("indeterminate",a),this.update()},report:function(a){return this.label?this.label:this.indeterminate?"&#160;":e.format(a,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dijit/form/TextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(a,b,c,d,e,f,g,h,i,j,k){var l=a("dijit.form.TextBox"+(g("dojo-bidi")?"_NoBidi":""),[h,i],{templateString:j,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:g("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)&&(this.templateString=this._singleNodeTemplate),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),g("ie")<9&&this.defer(function(){try{var a=c.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var d=this.domNode.getElementsByTagName("INPUT");if(d)for(var e=0;e<d.length;e++)d[e].style.fontFamily=b}}}catch(a){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=b.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(f(this._phspan,"mousedown",function(a){a.preventDefault()}),f(this._phspan,"touchend, pointerup, MSPointerUp",e.hitch(this,function(){this.focus()})))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a)),this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return d.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(a){d.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),g("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});return g("ie")<9&&(l.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&a.text.length>0},k._setSelectionRange=i._setSelectionRange=function(a,b,c){if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveStart("character",-99999),d.moveStart("character",b),d.moveEnd("character",c-b),d.select()}}),g("dojo-bidi")&&(l=a("dijit.form.TextBox",l,{_setPlaceHolderAttr:function(a){this.inherited(arguments),this.applyTextDir(this._phspan)}})),l})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,b,c,d){return a("dijit.form._FormValueWidget",[c,d],{_layoutHackIE7:function(){if(7==b("ie"))for(var a=this.domNode,c=a.parentNode,d=a.firstChild||a,e=d.style.filter,f=this;c&&0==c.clientHeight;)!function(){var a=f.connect(c,"onscroll",function(){f.disconnect(a),d.style.filter=(new Date).getMilliseconds(),f.defer(function(){d.style.filter=e})})}(),c=c.parentNode}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","./_FormWidgetMixin"],function(a,b,c,d,e,f){return a("dijit.form._FormValueMixin",f,{readOnly:!1,_setReadOnlyAttr:function(a){b.set(this.focusNode,"readOnly",a),this._set("readOnly",a)},postCreate:function(){this.inherited(arguments),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(a,b,c,d,e,f,g,h){var i=b("dijit.form._TextBoxMixin"+(d("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null===d||"number"==typeof d&&isNaN(d)?"":this.filter(this.format(d,this.constraints)),0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&(c=null))),null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a)),this.textbox.value=a,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){this._processInput(a),this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(a){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){function a(a){var b;if("keydown"==a.type){switch(b=a.keyCode){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(b>=65&&b<=90||b>=48&&b<=57||b==e.SPACE)return;var c=!1;for(var d in e)if(e[d]===a.keyCode){c=!0;break}if(!c)return}}if(b=a.charCode>=32?String.fromCharCode(a.charCode):a.charCode,b||(b=a.keyCode>=65&&a.keyCode<=90||a.keyCode>=48&&a.keyCode<=57||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode),b||(b=229),"keypress"==a.type){if("string"!=typeof b)return;if((b>="a"&&b<="z"||b>="A"&&b<="Z"||b>="0"&&b<="9"||" "===b)&&(a.ctrlKey||a.metaKey||a.altKey))return}if("input"==a.type){if(this.__skipInputEvent)return void(this.__skipInputEvent=!1)}else this.__skipInputEvent=!0;var g,h={faux:!0};for(g in a)if(!/^(layer[XY]|returnValue|keyLocation)$/.test(g)){var i=a[g];"function"!=typeof i&&void 0!==i&&(h[g]=i)}f.mixin(h,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0,a.preventDefault()},stopPropagation:function(){a.stopPropagation()}}),!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation()),h._wasConsumed||this.defer(function(){this._onInput(h)})}this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(g(this.textbox,"keydown, keypress, paste, cut, input, compositionend",f.hitch(this,a)),g(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){return null===a?this._blankValue:"string"!=typeof a?a:(this.trim&&(a=f.trim(a)),this.uppercase&&(a=a.toUpperCase()),this.lowercase&&(a=a.toLowerCase()),this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)})),a)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=g.once(this.domNode,"mouseup, touchend",f.hitch(this,function(a){this._isTextSelected()||i.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return d("dojo-bidi")&&(i=b("dijit.form._TextBoxMixin",i,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),i._setSelectionRange=h._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)},i.selectInputText=h.selectInputText=function(a,b,d){a=c.byId(a),isNaN(b)&&(b=0),isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),i._setSelectionRange(a,b,d)}catch(a){}},i})},"dijit/form/ValidationTextBox":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(a,b,c,d,e,f,g){var h;return h=a("dijit.form.ValidationTextBox",e,{templateString:g,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,c){c!=h.prototype[a]&&(b.deprecated("ValidationTextBox id="+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",a),this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments),this._refreshState()},validator:function(a,b){return new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();return this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error"),this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false"),"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a)),this.set("message",b),c},displayMessage:function(a){a&&this.focused?f.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):f.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused),this.inherited(arguments)},constructor:function(a){this.constraints=c.clone(this.constraints),this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments),this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang),this._set("constraints",a),this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a),this._refreshState()},_computeRegexp:function(a){var b=this.pattern;if("function"==typeof b&&(b=b.call(this,a)),b!=this._lastRegExp){var c="";this._lastRegExp=b,".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":c+=a;break;case")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(a){c=this.pattern}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments),this.messages=d.getLocalization("dijit.form","validate",this.lang),this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(a){this._set("required",a),this.focusNode.setAttribute("aria-required",a),this._refreshState()},_setMessageAttr:function(a){this._set("message",a),this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0,this.inherited(arguments)},_onBlur:function(){this.displayMessage(""),this.inherited(arguments)},destroy:function(){f.hide(this.domNode),this.inherited(arguments)}})})},"dijit/Tooltip":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){}var t=b("dijit._MasterTooltip",[n,o],{duration:l.defaultDuration,templateString:q,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.bgIframe=new p(this.domNode),this.fadeIn=c.fadeIn({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onShow")}),this.fadeOut=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onHide")})},show:function(a,b,c,d,e,f,i){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a){if("playing"==this.fadeOut.status())return void(this._onDeck=arguments);this.containerNode.innerHTML=a,e&&this.set("textDir",e),this.containerNode.align=d?"right":"left";var j=m.around(this.domNode,b,c&&c.length?c:y.defaultPosition,!d,h.hitch(this,"orient")),k=j.aroundNodePos;"M"==j.corner.charAt(0)&&"M"==j.aroundCorner.charAt(0)?(this.connectorNode.style.top=k.y+(k.h-this.connectorNode.offsetHeight>>1)-j.y+"px",this.connectorNode.style.left=""):"M"==j.corner.charAt(1)&&"M"==j.aroundCorner.charAt(1)?this.connectorNode.style.left=k.x+(k.w-this.connectorNode.offsetWidth>>1)-j.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top=""),g.set(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=b,this.onMouseEnter=f||s,this.onMouseLeave=i||s}},orient:function(a,b,c,d,e){this.connectorNode.style.top="";var g=d.h,h=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c],this.domNode.style.width="auto";var i=f.position(this.domNode);(k("ie")||k("trident"))&&(i.w+=2);var j=Math.min(Math.max(h,1),i.w);if(f.setMarginBox(this.domNode,{w:j}),"B"==c.charAt(0)&&"B"==b.charAt(0)){var l=f.position(a),m=this.connectorNode.offsetHeight;if(l.h>g){var n=g-(e.h+m>>1);this.connectorNode.style.top=n+"px",this.connectorNode.style.bottom=""}else this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-m/2,0),l.h-m)+"px",this.connectorNode.style.top=""}else this.connectorNode.style.top="",this.connectorNode.style.bottom="";return Math.max(0,i.w-h)},_onShow:function(){k("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()),this.onMouseEnter=this.onMouseLeave=s},_onHide:function(){this.domNode.style.cssText="",this.containerNode.innerHTML="",this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});k("dojo-bidi")&&t.extend({_setAutoTextDir:function(b){this.applyTextDir(b),a.forEach(b.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a),"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}}),r.showTooltip=function(b,c,d,e,f,g,h){return d&&(d=a.map(d,function(a){return{after:"after-centered",before:"before-centered"}[a]||a})),y._masterTT||(r._masterTT=y._masterTT=new t),y._masterTT.show(b,c,d,e,f,g,h)},r.hideTooltip=function(a){return y._masterTT&&y._masterTT.hide(a)};var u="DORMANT",v="SHOW TIMER",w="SHOWING",x="HIDE TIMER",y=b("dijit.Tooltip",n,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this),this._connectIds=a.filter(h.isArrayLike(b)?b:b?[b]:[],function(a){return d.byId(a,this.ownerDocument)},this),this._connections=a.map(this._connectIds,function(a){var b=d.byId(a,this.ownerDocument),c=this.selector,e=c?function(a){return j.selector(c,a)}:function(a){return a},f=this;return[j(b,e(i.enter),function(){f._onHover(this)}),j(b,e("focusin"),function(){f._onHover(this)}),j(b,e(i.leave),h.hitch(f,"_onUnHover")),j(b,e("focusout"),h.hitch(f,"set","state",u))]},this),this._set("connectId",b)},addTarget:function(b){var c=b.id||b;-1==a.indexOf(this._connectIds,c)&&this.set("connectId",this._connectIds.concat(c))},removeTarget:function(b){var c=b.id||b,d=a.indexOf(this._connectIds,c);d>=0&&(this._connectIds.splice(d,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments),e.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;a.forEach(h.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},state:u,_setStateAttr:function(a){if(!(this.state==a||a==v&&this.state==w||a==x&&this.state==u)){switch(this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer),this._showTimer&&(this._showTimer.remove(),delete this._showTimer),a){case u:this._connectNode&&(y.hide(this._connectNode),delete this._connectNode,this.onHide());break;case v:this.state!=w&&(this._showTimer=this.defer(function(){this.set("state",w)},this.showDelay));break;case w:var b=this.getContent(this._connectNode);if(!b)return void this.set("state",u);y.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,h.hitch(this,"set","state",w),h.hitch(this,"set","state",x)),this.onShow(this._connectNode,this.position);break;case x:this._hideTimer=this.defer(function(){this.set("state",u)},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&this.set("state",u),this._connectNode=a,this.set("state",v)},_onUnHover:function(a){this.set("state",x)},open:function(a){this.set("state",u),this._connectNode=a,this.set("state",w)},close:function(){this.set("state",u)},onShow:function(){},onHide:function(){},destroy:function(){this.set("state",u),a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this),this.inherited(arguments)}});return y._MasterTooltip=t,y.show=r.showTooltip,y.hide=r.hideTooltip,y.defaultPosition=["after-centered","before-centered"],y})},"dijit/place":function(){define(["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(a,b,c,d,e,f,g){function h(d,g,h,i){var j=f.getEffectiveBox(d.ownerDocument);d.parentNode&&"body"==String(d.parentNode.tagName).toLowerCase()||e.body(d.ownerDocument).appendChild(d);var k=null;a.some(g,function(a){var c=a.corner,e=a.pos,f=0,g={w:{L:j.l+j.w-e.x,R:e.x-j.l,M:j.w}[c.charAt(1)],h:{T:j.t+j.h-e.y,B:e.y-j.t,M:j.h}[c.charAt(0)]},l=d.style;if(l.left=l.right="auto",h){var m=h(d,a.aroundCorner,c,g,i);f=void 0===m?0:m}var n=d.style,o=n.display,p=n.visibility;"none"==n.display&&(n.visibility="hidden",n.display="");var q=b.position(d);n.display=o,n.visibility=p;var r={L:e.x,R:e.x-q.w,M:Math.max(j.l,Math.min(j.l+j.w,e.x+(q.w>>1))-q.w)}[c.charAt(1)],s={T:e.y,B:e.y-q.h,M:Math.max(j.t,Math.min(j.t+j.h,e.y+(q.h>>1))-q.h)}[c.charAt(0)],t=Math.max(j.l,r),u=Math.max(j.t,s),v=Math.min(j.l+j.w,r+q.w),w=Math.min(j.t+j.h,s+q.h),x=v-t,y=w-u;return f+=q.w-x+(q.h-y),(null==k||f<k.overflow)&&(k={corner:c,aroundCorner:a.aroundCorner,x:t,y:u,w:x,h:y,overflow:f,spaceAvailable:g}),!f}),k.overflow&&h&&h(d,k.aroundCorner,k.corner,k.spaceAvailable,i);var l=k.y,m=k.x,n=e.body(d.ownerDocument);/relative|absolute/.test(c.get(n,"position"))&&(l-=c.get(n,"marginTop"),m-=c.get(n,"marginLeft"));var o=d.style;return o.top=l+"px",o.left=m+"px",o.right="auto",k}var i={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},j={at:function(b,c,d,e,f){return h(b,a.map(d,function(a){var b={corner:a,aroundCorner:i[a],pos:{x:c.x,y:c.y}};return e&&(b.pos.x+="L"==a.charAt(1)?e.x:-e.x,b.pos.y+="T"==a.charAt(0)?e.y:-e.y),b}),f)},around:function(e,f,g,i,j){function k(a,b){A.push({aroundCorner:a,corner:b,pos:{x:{L:w,R:w+y,M:w+(y>>1)}[a.charAt(1)],y:{T:x,B:x+z,M:x+(z>>1)}[a.charAt(0)]}})}var l;if("string"==typeof f||"offsetWidth"in f||"ownerSVGElement"in f){if(l=b.position(f,!0),/^(above|below)/.test(g[0])){var m=b.getBorderExtents(f),n=f.firstChild?b.getBorderExtents(f.firstChild):{t:0,l:0,b:0,r:0},o=b.getBorderExtents(e),p=e.firstChild?b.getBorderExtents(e.firstChild):{t:0,l:0,b:0,r:0};l.y+=Math.min(m.t+n.t,o.t+p.t),l.h-=Math.min(m.t+n.t,o.t+p.t)+Math.min(m.b+n.b,o.b+p.b)}}else l=f;if(f.parentNode)for(var q="absolute"==c.getComputedStyle(f).position,r=f.parentNode;r&&1==r.nodeType&&"BODY"!=r.nodeName;){var s=b.position(r,!0),t=c.getComputedStyle(r);if(/relative|absolute/.test(t.position)&&(q=!1),!q&&/hidden|auto|scroll/.test(t.overflow)){var u=Math.min(l.y+l.h,s.y+s.h),v=Math.min(l.x+l.w,s.x+s.w);l.x=Math.max(l.x,s.x),l.y=Math.max(l.y,s.y),l.h=u-l.y,l.w=v-l.x}"absolute"==t.position&&(q=!0),r=r.parentNode}var w=l.x,x=l.y,y="w"in l?l.w:l.w=l.width,z="h"in l?l.h:(d.deprecated("place.around: dijit/place.__Rectangle: { x:"+w+", y:"+x+", height:"+l.height+", width:"+y+" } has been deprecated.  Please use { x:"+w+", y:"+x+", h:"+l.height+", w:"+y+" }","","2.0"),l.h=l.height),A=[];a.forEach(g,function(a){var b=i;switch(a){case"above-centered":k("TM","BM");break;case"below-centered":k("BM","TM");break;case"after-centered":b=!b;case"before-centered":k(b?"ML":"MR",b?"MR":"ML");break;case"after":b=!b;case"before":k(b?"TL":"TR",b?"TR":"TL"),k(b?"BL":"BR",b?"BR":"BL");break;case"below-alt":b=!b;case"below":k(b?"BL":"BR",b?"TL":"TR"),k(b?"BR":"BL",b?"TR":"TL");break;case"above-alt":b=!b;case"above":k(b?"TL":"TR",b?"BL":"BR"),k(b?"TR":"TL",b?"BR":"BL");break;default:k(a.aroundCorner,a.corner)}});var B=h(e,A,j,{w:y,h:z});return B.aroundNodePos=l,B}};return g.place=j})},"Sage/Utility/ErrorHandler":function(){define(["Sage/Utility","Sage/UI/Dialogs","dojo/io-query","dojo/string","dojo/_base/array","dojo/i18n!./nls/ErrorHandler"],function(a,b,c,d,e,f){return Sage.namespace("Utility.ErrorHandler"),dojo.mixin(Sage.Utility.ErrorHandler,{_debugEndRequest:!1,_configuration:{isDebug:!1,preemption:{enabled:!0,allowAuthRedirect:!0,handledStatusCodes:"577,578,579,580,581,582,584",showPreemptedErrorMsg:!1,showInternalServerErrorMsg:!1,showUnhandledMessagingServiceExceptionMsg:!0},authenticationRedirectUrl:null,showExtendedValidationException:!1,showExtendedRoleAccessDeniedException:!1},_doRedirect:function(a){var b=Sage.Services.getService("ClientBindingManagerService");b&&b.clearDirtyStatus(),window.location=a},_fmtSlxErrorId:function(a){return Sage.Utility.isStringWithLength(a)?this._configuration.isDebug?d.substitute('\r\n\r\nSaleslogix Error Id: <a href="SLXErrorLookupService.asmx/GetEventLogError?slxErrorId=${0}" target="_blank">${0}</a>',[a]):d.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[a]):""},_fmtStackTrace:function(a){if(this._configuration.isDebug&&Sage.Utility.isStringWithLength(a)){var b=Sage.Utility.htmlEncode(a).replace(/(\r\n)/g,"&#13;&#10;").trim();return d.substitute('\r\n\r\nStack trace:\r\n<textarea id="StackTrace" cols="20" name="StackTrace" readonly="readonly" rows="1" style="width: 100%; height: 200px; font-family: \'Courier New\', Courier, monospace; font-size: small; background-color: #F2F2F2; color: #444444; 1px: ; opacity: 0.8; -moz-box-sizing: border-box; box-sizing: border-box;" unselectable="off" wrap="off">${0}</textarea>',[b])}return""},_mixinConfig:function(){window.errorHandlerConfig&&"object"==typeof window.errorHandlerConfig&&dojo.mixin(this._configuration,window.errorHandlerConfig)},_preemptError:function(a,b){try{var c=this.getHttpStatusInfo(a,b);if(this._configuration.isDebug,!c||"object"!=typeof c||!c.hasOwnProperty("sdataError"))return!1;var d,e=function(b,c){if(b&&"object"==typeof b&&void 0!==a.getResponseHeader&&c&&dojo.isString(c)){var d=b.getResponseHeader(c);if(d&&Sage.Utility.isStringWithLength(d))return d}return null},f=function(a){return e(a,"Sage-SalesLogix-Exception-Redirect")},g=this,h=function(a){g._doRedirect(a)};if(this.isSDataExceptionDiagnoses(c.sdataError.applicationCode)&&500==c.status&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg)return this.showStatusInfoError(c),!0
;switch(c.status){case 401:case 403:case 404:case 408:return!!this.isConfiguredToHandle(c.status)&&(this.showStatusInfoError(c),!0);case 500:return!!(this.isSDataExceptionDiagnoses(c.sdataError.applicationCode)&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg||this._configuration.preemption.showInternalServerErrorMsg)&&(this.showStatusInfoError(c),!0);case 575:return!(!this._configuration.preemption.allowAuthRedirect||null===(d=f(a)))&&(h(d),!0);case 576:return!!this._configuration.preemption.showPreemptedErrorMsg&&(this.showStatusInfoError(c),!0);case 577:case 578:case 579:case 580:case 581:case 582:case 584:default:return!!this.isConfiguredToHandle(c.status)&&(this.showStatusInfoError(c),!0)}}catch(a){return!1}},init:function(){this._mixinConfig(),this._configuration.preemption.enabled&&(window.dojoConfig&&window.dojoConfig.ioPublish&&"boolean"==typeof window.dojoConfig.ioPublish&&!0===window.dojoConfig.ioPublish?dojo.subscribe("/dojo/io/error",function(a,b){return a&&"object"==typeof a&&"object"==typeof a.ioArgs&&(!1!==Sage.Utility.ErrorHandler._hasErrorHandler(a.ioArgs.url)&&575!==a.ioArgs.xhr.status||Sage.Utility.ErrorHandler._preemptError(a.ioArgs.xhr,{url:a.ioArgs.url})),b}):function(){var a=dojo.xhr;dojo.xhr=function(b,c,d){return a.apply(dojo,arguments).addErrback(function(a){if(a&&"object"==typeof a&&a instanceof Error&&"object"==typeof a.xhr){var b=c&&c.url?c.url||"":"";!1!==Sage.Utility.ErrorHandler._hasErrorHandler(b)&&575!==a.xhr.status||Sage.Utility.ErrorHandler._preemptError(a.xhr,{url:b})}return a})}}(),function(){var a=Sage.SData.Client.Ajax.request;Sage.SData.Client.Ajax.request=function(b){return dojo.mixin(b,{__failure:null,__failureHandler:function(a,b){var c=!1;if(b.__failure&&"function"==typeof b.__failure)try{b.__failure.call(b.scope||this,a,b)}catch(a){a instanceof ReferenceError&&(c=!0)}var d=b.url;return!1!==Sage.Utility.ErrorHandler._hasErrorHandler(d)&&575!==a.status||(c?Sage.Utility.ErrorHandler.handleHttpError(a,b):Sage.Utility.ErrorHandler._preemptError(a,b)),a}}),"function"==typeof b.failure&&(b.__failure=b.failure),b.failure=b.__failureHandler,a.apply(this,arguments)}}(),"function"==typeof $&&$(function(){jQuery(this).ajaxError(function(a,b,c,d){var e="object"==typeof c?c.url||"":"",f={url:e};!1!==Sage.Utility.ErrorHandler._hasErrorHandler(e)&&575!==b.status||Sage.Utility.ErrorHandler._preemptError(b,f)})}))},_getInternalHttpStatus:function(a){if(a&&"object"==typeof a&&a.hasOwnProperty("status")&&!1===isNaN(a.status)){if("object"!=typeof a.sdataError||!this.isSDataExceptionDiagnoses(a.sdataError.applicationCode)||"object"!=typeof a.sdataError.appInfo||"string"!=typeof a.sdataError.appInfo.exceptionKind)return Number(a.status);switch(a.sdataError.appInfo.exceptionKind){case"AuthTokenNullException":return 575;case"BaseException":return 500==Number(a.status)?576:Number(a.status);case"RoleAccessDeniedException":return 577;case"ValidationException":return 578;case"UserObservableException":return 579;case"HttpRequestValidationException":return 580;case"StringOrBinaryDataWouldBeTruncatedException":return 581;case"AccessException":return 582;case"ProjectsValidationException":return 584;default:return Number(a.status)}}return-1},_getStatusInfoOptions:function(a){var b={message:"",url:""};return a&&dojo.isObject(a)&&dojo.mixin(b,a),b},_handleAsDojoXhrHttpError:function(a,b,c){var d=this._getStatusInfoOptions(c),e="";a&&dojo.isObject(a)&&(e=a.message||a.result||""),""!==e&&""!==d.message?d.message=d.message+" "+e:d.message=e;var f=b&&dojo.isObject(b)&&b.xhr&&dojo.isObject(b.xhr)?b.xhr:null;""===d.url&&null!==f&&dojo.isString(b.url)&&(d.url=b.url),this._handleAsHttpError(f,null,d)},_handleAsHttpError:function(a,c,d){var e=this.getHttpStatusInfo(a,c);if(null!==e)this.showStatusInfoError(e,d);else{var g=d&&dojo.isObject(d)&&Sage.Utility.isStringWithLength(d.message)?d.message:f.HttpError;b.showError(g)}},_hasErrorHandler:function(a){var b="HASERRORHANDLER";if(a&&dojo.isString(a)&&-1!=a.toUpperCase().indexOf(b)){var d=a.substring(a.indexOf("?")+1,a.length);if(""!==d){var e=c.queryToObject(d.toUpperCase());if(e&&dojo.isObject(e))return"TRUE"===e[b]}}return!1},handleEndRequestError:function(a){function c(a){return a&&dojo.isString(a)?a.replace("Sys.WebForms.PageRequestManagerServerErrorException: ","").replace("Sys.WebForms.PageRequestManagerParserErrorException: ","").replace("Sys.WebForms.PageRequestManagerTimeoutException: ",""):a}if(this._debugEndRequest,a&&"object"==typeof a&&"function"==typeof a.get_error&&null!==a.get_error())try{switch(a.get_error().name){case"Sys.WebForms.PageRequestManagerTimeoutException":case"Sys.WebForms.PageRequestManagerParserErrorException":return b.showError(c(a.get_error().message)),void a.set_errorHandled(!0)}var d=c(a.get_error().message),e=a.get_error().httpStatusCode;if(("${AjaxLoginRedirect}"===d||"${LoginRedirect}"===d||401==e||575==e)&&this._configuration.preemption.allowAuthRedirect){var f=this._configuration.authenticationRedirectUrl||"Login.aspx";return a.set_errorHandled(!0),void this._doRedirect(f)}var g=null!==a.get_response(),h=!!g&&a.get_response().get_timedOut(),i=!!g&&a.get_response().get_aborted(),j=g?a.get_response().get_statusCode():-1,k=!!g&&a.get_response().get_responseAvailable();if(this._debugEndRequest,0===j||i)return void a.set_errorHandled(!0);var l=!!k&&(a.get_response().hasOwnProperty("_xmlHttpRequest")&&null!==a.get_response()._xmlHttpRequest);if(this._debugEndRequest,l||h){var m=a.get_response()._xmlHttpRequest;if(this._debugEndRequest,200==j||h)return this._debugEndRequest,b.showError(c(a.get_error().message)),void a.set_errorHandled(!0);var n=this.isConfiguredToHandle(j,m);return this._debugEndRequest,n?(this._debugEndRequest,this._preemptError(m)):(this._debugEndRequest,this.handleHttpError(m)),void a.set_errorHandled(!0)}this._debugEndRequest,b.showError(c(a.get_error().message)),a.set_errorHandled(!0)}catch(a){}else this._debugEndRequest},handleHttpError:function(a,b,c){a&&dojo.isObject(a)&&void 0!==a.getResponseHeader?this._handleAsHttpError(a,b,c):this._handleAsDojoXhrHttpError(a,b,c)},getInterceptedError:function(a,b){if(!Sage.Utility.isStringWithLength(a))return null;if(!Sage.Utility.isTrue(b))return{text:a};var c=dojo.fromJson(a);return c&&"object"==typeof c?c:null},getSDataDiagnosis:function(a,b){if(!Sage.Utility.isStringWithLength(a))return null;var c;if(Sage.Utility.isTrue(b)){var d=new XML.ObjTree;if((c=d.parseXML(a))&&"object"==typeof c&&c.hasOwnProperty("sdata:diagnoses")){if(!(c=c["sdata:diagnoses"]["sdata:diagnosis"])||"object"!=typeof c)return null;var e=function(a){var b=c.hasOwnProperty(a)?c[a]:"";return b&&dojo.isString(b)&&("stackTrace"!==a||this._configuration.isDebug)?b:""};return{severity:e("sdata:severity"),sdataCode:e("sdata:sdataCode"),applicationCode:e("sdata:applicationCode"),message:e("sdata:message"),stackTrace:e("sdata:stackTrace"),payloadPath:e("sdata:payloadPath")}}}else if((c=dojo.fromJson(a))&&dojo.isArray(c)&&c.length>0&&"object"==typeof c[0]&&c[0].hasOwnProperty("sdataCode"))return c[0];return null},getHttpStatusInfo:function(a,b){if(!a||!dojo.isObject(a)||void 0===a.getResponseHeader)return null;var c=this.safeGetPropValue(a,"status",-1),f=this.safeGetPropValue(a,"statusText","Unknown HTTP status. Possible timeout."),g={message:d.substitute("HTTP status: ${0} (${1}).",[f,c]),status:c,statusText:f,url:b&&dojo.isObject(b)&&dojo.isString(b.url)?b.url:"",sdataError:{}};if(4!==a.readyState)return g;var h=a.getResponseHeader("Content-Type");if(dojo.isString(h)){var i=this;switch(c){case 576:case 577:case 578:case 579:case 580:case 581:case 582:var j,k=function(b){var c=i.safeGetPropValue(a,"responseText","");return i.getInterceptedError(c,b)};if(-1!==h.indexOf("application/json"))j=k(!0);else{if(-1===h.indexOf("text/plain"))return g;if((j=k(!1))&&"object"==typeof j&&j.hasOwnProperty("text"))return 576===c?g.message+="\r\n\r\n"+j.text:g.message=j.text,g}j&&"object"==typeof j&&j.hasOwnProperty("slxErrorId")&&(g.errorInfo=j);break;default:var l,m=function(b){var c=i.safeGetPropValue(a,"responseText","");return i.getSDataDiagnosis(c,b)};if(-1!==h.indexOf("application/json"))l=m(!1);else{if(-1===h.indexOf("application/xml"))return g;l=m(!0)}if(l&&"object"==typeof l&&l.hasOwnProperty("sdataCode")){var n={severity:"",sdataCode:"",applicationCode:"",message:"",stackTrace:"",payloadPath:"",fmtError:function(){var a=[];for(var b in this)if("message"!=b&&"stackTrace"!=b&&"fmtError"!=b){var c=this[b];dojo.isString(c)&&""!==c&&a.push(d.substitute("${0}=${1}",[b.toString(),c]))}return a.length>0?a.join("; "):""}};if(g.sdataError=n,dojo.mixin(g.sdataError,l),g.sdataError.applicationCode&&this.isSDataExceptionDiagnoses(g.sdataError.applicationCode)){var o=function(){var a={},b=g.sdataError.applicationCode.split("; ");return e.forEach(b,function(b){if(b&&dojo.isString(b)&&-1!==b.indexOf("=")){var c=b.split("="),d=c[0].trim(),e=c[1].trim();a[d]=e}}),a};g.sdataError.appInfo=o(),g.sdataError.appInfo.hasOwnProperty("code")&&g.sdataError.appInfo.source?g.sdataError.applicationCode=g.sdataError.appInfo.code+"|"+g.sdataError.appInfo.source:g.sdataError.applicationCode=g.sdataError.appInfo.source,g.sdataError.appInfo.source&&delete g.sdataError.appInfo.source}var p="UNKNOWN";Sage.Utility.isStringWithLength(g.sdataError.severity)&&(p=g.sdataError.severity.toUpperCase());var q={INFO:"Informational message",WARNING:"Warning message",TRANSIENT:"Transient error",ERROR:"Operation failed",FATAL:"Severe error",UNKNOWN:"Unknown"},r=q[p]||q.UNKNOWN,s=g.sdataError.message;if(dojo.isString(s)&&"."!=s.trim().match(".$")&&(s+="."),this._configuration.isDebug)g.message=d.substitute("The following SData diagnosis occurred: Description=${0}. Message=${1} HTTP status: ${2} (${3}).",[r,s,g.statusText,g.status]);else{var t=this._getInternalHttpStatus(g),u=!0;switch(t){case 577:this._configuration.showExtendedRoleAccessDeniedException||(u=!1);break;case 578:this._configuration.showExtendedValidationException||(u=!1);break;case 582:case 584:u=!1}g.message=u?d.substitute("${0} HTTP status: ${1} (${2}).",[s,g.statusText,g.status]):s}}}}return g},isConfiguredToHandle:function(a,b){var c=!1;if(!1===this._configuration.preemption.enabled)return!1;if(a&&!1===isNaN(a))switch(Number(a)){case 500:if(this._configuration.preemption.showInternalServerErrorMsg)return!0;if(this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg){var d=this.getHttpStatusInfo(b);return!(!d||"object"!=typeof d||!d.hasOwnProperty("sdataError"))&&this.isSDataExceptionDiagnoses(d.sdataError.applicationCode)}break;case 575:return this._configuration.preemption.allowAuthRedirect;case 576:return this._configuration.preemption.showPreemptedErrorMsg;default:if(""!==this._configuration.preemption.handledStatusCodes){var f=this._configuration.preemption.handledStatusCodes.split(",");e.some(f,function(b){return b==a&&(c=!0,!0)})}}return c},isSDataExceptionDiagnoses:function(a){return!(!a||"string"!=typeof a||-1==a.indexOf("SDataExceptionDiagnoses"))},preemptError:function(a,b){this._preemptError(a,b)},safeGetPropValue:function(a,b,c){try{return a[b]}catch(a){return c}},showStatusInfoError:function(a,c){var e=this._getStatusInfoOptions(c),f=e.message,g="",h="",i="",j="",k=this._getInternalHttpStatus(a);if(575==k&&this._configuration.preemption.allowAuthRedirect){var l=this._configuration.authenticationRedirectUrl||"Login.aspx";return void this._doRedirect(l)}if(a&&dojo.isObject(a)&&dojo.isString(a.message)){switch(f+=""===f?a.message:" "+a.message,k){case 575:case 576:case 577:case 578:case 579:case 580:case 581:case 582:switch(f=Sage.Utility.htmlEncode(a.message),"object"==typeof a.errorInfo&&(f=Sage.Utility.htmlEncode(a.errorInfo.message)),k){case 577:if(!this._configuration.showExtendedRoleAccessDeniedException)return void b.showError(f);break;case 578:if(!this._configuration.showExtendedValidationException)return void b.showError(f);break;case 579:break;case 576:case 580:case 581:500!=a.status&&(f+=d.substitute(" HTTP status: ${info.statusText} (${info.status}).",{info:a}));break;case 582:return void b.showError(f)}}if("object"==typeof a.sdataError&&"object"==typeof a.sdataError.appInfo&&(i=d.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[a.sdataError.appInfo.slxErrorId]),j=this._fmtSlxErrorId(a.sdataError.appInfo.slxErrorId),f+=j),void 0===a.errorInfo){var m=null;Sage.Utility.isStringWithLength(a.url)?-1==f.indexOf(decodeURIComponent(a.url))&&(m=decodeURIComponent(a.url)):Sage.Utility.isStringWithLength(e.url)&&-1==f.indexOf(decodeURIComponent(e.url))&&(m=decodeURIComponent(e.url)),null!==m&&(f+=d.substitute("\r\n\r\nURL: ${0}",[m]))}this._configuration.isDebug&&"object"==typeof a.sdataError&&(dojo.isFunction(a.sdataError.fmtError)&&(f+=d.substitute("\r\n\r\nExtended SData diagnosis information: ${0}.",[a.sdataError.fmtError()])),"object"==typeof a.sdataError.appInfo&&(f+=d.substitute("\r\n\r\nException type: ${info.exceptionType}\r\n\r\nSource: ${info.exceptionSource}",{info:a.sdataError.appInfo})),a.sdataError.stackTrace&&(g=a.sdataError.stackTrace,h=this._fmtStackTrace(a.sdataError.stackTrace),f+=h));var n={subject:"Infor Exception Details"};"object"==typeof a.errorInfo&&(i=d.substitute("\r\n\r\nInfor Error Id: ${0}",[a.errorInfo.slxErrorId]),j=this._fmtSlxErrorId(a.errorInfo.slxErrorId),f+=j,f+=d.substitute("\r\n\r\nURL: ${info.request.url}",{info:a.errorInfo}),this._configuration.isDebug&&a.errorInfo.stackTrace&&(g=a.errorInfo.stackTrace,h=this._fmtStackTrace(a.errorInfo.stackTrace),a.errorInfo.__stackTrace=h,f+=d.substitute("\r\n\r\nException type: ${info.type}\r\n\r\nSource: ${info.source}${info.__stackTrace}\r\n\r\nTarget site: ${info.targetSite}",{info:a.errorInfo})),n.subject=d.substitute("Infor Exception Details (Infor Error Id: ${0})",[a.errorInfo.slxErrorId]));var o=a.errorInfo.slxErrorId;n.subject=encodeURIComponent(n.subject),""!==g&&(g=d.substitute("\r\n\r\nStack trace:\r\n${0}",[g])),n.toAddress="";var p=this.getOfficeProfile();p.UseEmailLink?(n.toAddress=p.EmailAddress,n.message=this.getShortMailContent(o)):n.message=encodeURIComponent(Sage.Utility.htmlDecode(f.replace(h,g).replace(j,i))),n.linkCaption="Mail details of this exception to your administrator",f+=d.substitute('\r\n\r\n<a href="mailto:${info.toAddress}?subject=${info.subject}&amp;body=${info.message}">${info.linkCaption}</a>',{info:n})}""===f&&(f="There was an unknown error."),f=f.replace(/(\r\n)/g,"<br />"),b.showError(f)},getOfficeProfile:function(){var a={},b=Sage.Utility.getSDataService("dynamic"),c=new Sage.SData.Client.SDataSingleResourceRequest(b);return c.setResourceKind("officeProfiles"),c.read({async:!1,success:function(b){a=b},failure:function(a){Sage.UI.Dialogs.showError(a)}}),a},getShortMailContent:function(a){var b="",c="\r\n",e="\r\n\r\n",g=window.location.protocol,h=window.location.hostname.replace("localhost","127.0.0.1"),i="";window.location.port&&(i=":"+window.location.port);var j=window.location.pathname.split("/"),k="/";"SLXErrorLookupService.asmx"!==j[1]&&(k+=j[1]);var l="",m=Sage.Services.getService("ClientContextService");if(m&&m.containsKey("userID")){var n=m.getValue("userID");l=Sage.Utility.getUserName(n)}var o=(new Date).toISOString().split(".")[0];return b=d.substitute(c+f.EmailContentL1),b+=d.substitute(e+f.EmailContentL2,[l,o]),b+=d.substitute(e+f.EmailContentL3),b+=d.substitute(e+"${0}//${1}${2}${3}/SLXErrorLookupService.asmx/GetEventLogError?slxErrorId=${4}",[g,h,i,k,a]),encodeURIComponent(b)}}),Sage.Utility.ErrorHandler.init(),Sage.Utility.ErrorHandler})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(a,b,c){var d=a.getObject("validate.regexp",!0,c);return d=c.validate.regexp={ipAddress:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowDottedDecimal&&(a.allowDottedDecimal=!0),"boolean"!=typeof a.allowDottedHex&&(a.allowDottedHex=!0),"boolean"!=typeof a.allowDottedOctal&&(a.allowDottedOctal=!0),"boolean"!=typeof a.allowDecimal&&(a.allowDecimal=!0),"boolean"!=typeof a.allowHex&&(a.allowHex=!0),"boolean"!=typeof a.allowIPv6&&(a.allowIPv6=!0),"boolean"!=typeof a.allowHybrid&&(a.allowHybrid=!0);var b=[];a.allowDottedDecimal&&b.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])"),a.allowDottedHex&&b.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]"),a.allowDottedOctal&&b.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]"),a.allowDecimal&&b.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])"),a.allowHex&&b.push("0[xX]0*[\\da-fA-F]{1,8}"),a.allowIPv6&&b.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}"),a.allowHybrid&&b.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");var c="";return b.length>0&&(c="("+b.join("|")+")"),c},host:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowIP&&(a.allowIP=!0),"boolean"!=typeof a.allowLocal&&(a.allowLocal=!1),"boolean"!=typeof a.allowPort&&(a.allowPort=!0),"boolean"!=typeof a.allowNamed&&(a.allowNamed=!1);var b="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)",c="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)",e=a.allowPort?"(\\:\\d+)?":"",f="((?:"+b+"\\.)+"+c+"\\.?)";return a.allowIP&&(f+="|"+d.ipAddress(a)),a.allowLocal&&(f+="|localhost"),a.allowNamed&&(f+="|^[^-][a-zA-Z0-9_-]*"),"("+f+")"+e},url:function(a){return a="object"==typeof a?a:{},"scheme"in a||(a.scheme=[!0,!1]),b.buildGroupRE(a.scheme,function(a){return a?"(https?|ftps?)\\://":""})+d.host(a)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},emailAddress:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowCruft&&(a.allowCruft=!1),a.allowPort=!1;var b="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+",c=b+"@"+d.host(a);return a.allowCruft&&(c="<?(mailto\\:)?"+c+">?"),c},emailAddressList:function(a){a="object"==typeof a?a:{},"string"!=typeof a.listSeparator&&(a.listSeparator="\\s;,");var b=d.emailAddress(a);return"("+b+"\\s*["+a.listSeparator+"]\\s*)*"+b+"\\s*["+a.listSeparator+"]?\\s*"},numberFormat:function(a){a="object"==typeof a?a:{},void 0===a.format&&(a.format="###-###-####");var c=function(a){return b.escapeString(a,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")};return b.buildGroupRE(a.format,c)},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(a){a="object"==typeof a?a:{},"boolean"!=typeof a.allowTerritories&&(a.allowTerritories=!0),"boolean"!=typeof a.allowMilitary&&(a.allowMilitary=!0);var b="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";return a.allowTerritories&&(b+="|AS|FM|GU|MH|MP|PW|PR|VI"),a.allowMilitary&&(b+="|AA|AE|AP"),"("+b+")"}}}})},"dojox/main":function(){define(["dojo/_base/kernel"],function(a){return a.dojox})},"Sage/Data/QBTreeStoreModel":function(){define(["dijit/tree/ForestStoreModel","Sage/Data/SDataServiceRegistry","dojo/string","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e,f){return e("Sage.Data.QBTreeStoreModel",a,{insertedChildren:null,constructor:function(){this.insertedChildren=[]},convertDescriptionToFilter:function(a){if(a.$descriptor){var b=a.$descriptor;return b=b.replace(this.rootId+":","")}return a.id},getChildren:function(a,e,g){this.store.fetch({queryArgs:{_pathFilter:this.convertDescriptionToFilter(a)},resourcePredicate:a.root?void 0:"",onComplete:f.hitch(this,function(g,h){var i,j,k,l,m;b.getSDataService("metadata",!1,!0,!1);for(i=a.id||a.toTable,d.forEach(this.insertedChildren,f.hitch(this,function(b){b.parentItem===a&&g.push(b)})),l=[function(a){a.toTable===i&&(a.toTable=a.fromTable,k=a.toField,a.toField=a.fromField,a.fromTable=i,a.fromField=k)},function(a){var b=a.joinType,d={Left:"[left]",">":"[left]",Inner:"[inner]","=":"[inner]",Right:"[right]","<":"[right]"},e=d[b];a.toTable&&(a.label=c.substitute("${2} (${1} -> ${3})${4}",[a.fromTable,a.fromField,a.toTableDisplayName,a.toField,e]))},function(b){b.parentItem=a},function(a){a.children=[]},function(a){var b=a.joinType,d={Left:">",Inner:"=",Right:"<"},e=d[b]||a.joinType;a.dataPathSegment=c.substitute("${0}${1}${2}.${3}",[a.fromField,e,a.toField,a.toTable])},function(a){a.displayPathSegment=c.substitute("${0}",[a.toTable])},function(a){function b(a,d){return d.root?(a&&a.length>0&&a.startsWith("!")&&(a=a.substring(1,a.length)),d.id+":"+a):b(c.substitute("!${0}",[d.dataPathSegment])+a,d.parentItem)}var d;d=b("!",a),a.dataPath=d,a.$descriptor=a.$descriptor||d},function(a){function b(a,d){return d.root?d.id+a:b(c.substitute(".${0}${1}",[d.displayPathSegment,a]),d.parentItem)}var d;d=b("",a),a.displayPath=d}],m=function(a){return function(b){b(a)}},j=0;j<g.length;j++)d.forEach(l,f.hitch(this,m(g[j])));g=d.filter(g,f.hitch(this,function(a){for(var b=a.parentItem;!b.root;){if(a.toTable===b.toTable)return!1;b=b.parentItem}return a.toTable!==b.id})),g.sort(function(a,b){return a.toTable<b.toTable?-1:a.toTable>b.toTable?1:0}),a.children=g,e(g,h)}),onError:g})},getIdentity:function(a){return a.$descriptor},mayHaveChildren:function(a){return a.root||!0},newItem:function(a,b){var c={$descriptor:a.fromtable,$etag:"",$httpStatus:200,fromTable:a.fromtable,fromField:a.fromfield,toTable:a.totable,toTableDisplayName:a.fromtable,toField:a.tofield,cascadeType:a.cascadetype,joinType:a.jointype,parentItem:b.item,children:[]};this.insertedChildren.push(c),this.addItemToStore(c,b.item)},addItemToStore:function(a,b){var c,d=this.store,e=this.childrenAttrs[0],f=d.getValue(b,e);b&&f&&(c=f.slice(0),c.push(a),d.setValue(b,e,c))},onSetItem:function(a,b,c,e){-1!=d.indexOf(this.childrenAttrs,b)?this.getChildren(a,f.hitch(this,function(b){this.onChildrenChange(a,b)})):this.onChange(a)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(a,b,c,d,e){return b("dijit.tree.ForestStoreModel",e,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,c){a===this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:d.hitch(this,function(a){this.root.children=a,b(a)}),onError:c}):this.inherited(arguments)},isItem:function(a){return a===this.root||this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope||c.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,c){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,d,e){b===this.root&&(d||this.onLeaveRoot(a)),this.inherited(arguments,[a,b===this.root?null:b,c===this.root?null:c,d,e]),c===this.root&&this.onAddToRoot(a)},onAddToRoot:function(a){},onLeaveRoot:function(a){},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,onComplete:d.hitch(this,function(c){this.root.children=c,(b.length!=c.length||a.some(b,function(a,b){return c[b]!=a}))&&this.onChildrenChange(this.root,c)})})},onNewItem:function(a,b){this._requeryTop(),this.inherited(arguments)},onDeleteItem:function(b){-1!=a.indexOf(this.root.children,b)&&this._requeryTop(),this.inherited(arguments)},onSetItem:function(a,b,c,d){this._requeryTop(),this.inherited(arguments)}})})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(a){d.mixin(this,a),this.connects=[];var c=this.store;if(!c.getFeatures()["dojo.data.api.Identity"])throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");c.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([b.after(c,"onNew",d.hitch(this,"onNewItem"),!0),b.after(c,"onDelete",d.hitch(this,"onDeleteItem"),!0),b.after(c,"onSet",d.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var a;a=this.connects.pop();)a.remove()},getRoot:function(a,b){this.root?a(this.root):this.store.fetch({query:this.query,onComplete:d.hitch(this,function(b){if(1!=b.length)throw new Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0],a(this.root)}),onError:b})},mayHaveChildren:function(b){return a.some(this.childrenAttrs,function(a){return this.store.hasAttribute(b,a)},this)},getChildren:function(b,c,e){var f=this.store;if(!f.isItemLoaded(b)){var g=d.hitch(this,arguments.callee);return void f.loadItem({item:b,onItem:function(a){g(a,c,e)},onError:e})}for(var h=[],i=0;i<this.childrenAttrs.length;i++){var j=f.getValues(b,this.childrenAttrs[i]);h=h.concat(j)}var k=0;this.deferItemLoadingUntilExpand||a.forEach(h,function(a){f.isItemLoaded(a)||k++}),0==k?c(h):a.forEach(h,function(a,b){f.isItemLoaded(a)||f.loadItem({item:a,onItem:function(a){h[b]=a,0==--k&&c(h)},onError:e})})},isItem:function(a){return this.store.isItem(a)},fetchItemByIdentity:function(a){this.store.fetchItemByIdentity(a)},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return this.labelAttr?this.store.getValue(a,this.labelAttr):this.store.getLabel(a)},newItem:function(a,b,c){var d,e={parent:b,attribute:this.childrenAttrs[0]};this.newItemIdAttr&&a[this.newItemIdAttr]?this.fetchItemByIdentity({identity:a[this.newItemIdAttr],scope:this,onItem:function(f){f?this.pasteItem(f,null,b,!0,c):(d=this.store.newItem(a,e))&&void 0!=c&&this.pasteItem(d,b,b,!1,c)}}):(d=this.store.newItem(a,e))&&void 0!=c&&this.pasteItem(d,b,b,!1,c)},pasteItem:function(b,c,d,e,f){var g=this.store,h=this.childrenAttrs[0];if(c&&a.forEach(this.childrenAttrs,function(d){if(g.containsValue(c,d,b)){if(!e){var f=a.filter(g.getValues(c,d),function(a){return a!=b});g.setValues(c,d,f)}h=d}}),d)if("number"==typeof f){var i=g.getValues(d,h).slice();i.splice(f,0,b),g.setValues(d,h,i)}else g.setValues(d,h,g.getValues(d,h).concat(b))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(a,b){b&&this.getChildren(b.item,d.hitch(this,function(a){this.onChildrenChange(b.item,a)}))},onDeleteItem:function(a){this.onDelete(a)},onSetItem:function(b,c){-1!=a.indexOf(this.childrenAttrs,c)?this.getChildren(b,d.hitch(this,function(a){this.onChildrenChange(b,a)})):this.onChange(b)}})})},"Sage/Store/SData":function(){define("Sage/Store/SData",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/store/util/QueryResults","dojo/string","dojo/json","../Utility"],function(a,b,c,d,e,f,g,h){return a("Sage.Store.SData",null,{doDateConversion:!1,scope:null,where:null,select:null,include:null,orderBy:null,service:null,request:null,queryName:null,queryArgs:null,entityName:null,contractName:null,resourceKind:null,resourceProperty:null,resourcePredicate:null,applicationName:null,dataSet:null,executeQueryAs:null,executeGetAs:null,itemsProperty:"$resources",idProperty:"$key",labelProperty:"$descriptor",entityProperty:"$name",versionProperty:"$etag",dataCache:[],constructor:function(a){b.mixin(this,a)},_createDeleteRequest:function(a,b){var c=h.expand(this,b.request||this.request),d=b.id||this.getIdentity(a);if(c)c=c.clone();else{d=d||h.expand(this.scope||this,b.resourcePredicate||this.resourcePredicate);var e,g=h.expand(this.scope||this,b.contractName||this.contractName),i=h.expand(this.scope||this,b.resourceKind||this.resourceKind),j=h.expand(this.scope||this,b.resourceProperty||this.resourceProperty);d&&(e=/\s+/.test(d)?d:f.substitute("'${0}'",[d])),c=j?new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(j).setResourceSelector(e):new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceSelector(e),g&&c.setContractName(g),i&&c.setResourceKind(i)}return c},_createEntryRequest:function(a,b){var c=h.expand(this,b.request||this.request),d=a;if(c)c=c.clone();else{d=d||h.expand(this.scope||this,b.resourcePredicate||this.resourcePredicate);var e,g=h.expand(this.scope||this,b.contractName||this.contractName),i=h.expand(this.scope||this,b.resourceKind||this.resourceKind),j=h.expand(this.scope||this,b.dataSet||this.dataSet),k=h.expand(this.scope||this,b.resourceProperty||this.resourceProperty);d&&(e=/\s+/.test(d)?d:f.substitute("'${0}'",[d])),c=k?new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(k).setResourceSelector(e):new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceSelector(e),g&&c.setContractName(g),i&&c.setResourceKind(i),j&&c.setDataSet(j)}var l=h.expand(this.scope||this,b.select||this.select),m=h.expand(this.scope||this,b.include||this.include);return l&&l.length>0&&c.setQueryArg("select",l.join(",").replace(/\./g,"/")),m&&m.length>0&&c.setQueryArg("include",m.join(",")),c},_createFeedRequest:function(a,b){var d=h.expand(this,b.request||this.request);if(d)d=d.clone();else{var e=h.expand(this.scope||this,b.queryName||this.queryName),f=h.expand(this.scope||this,b.contractName||this.contractName),g=h.expand(this.scope||this,b.resourceKind||this.resourceKind),i=h.expand(this.scope||this,b.resourceProperty||this.resourceProperty),j=h.expand(this.scope||this,b.resourcePredicate||this.resourcePredicate),k=h.expand(this.scope||this,b.applicationName||this.applicationName),l=h.expand(this.scope||this,b.dataSet||this.dataSet),m=h.expand(this.scope||this,b.queryArgs||this.queryArgs),n=h.expand(this.scope||this,b.operationSDataStore||this.operationSDataStore),o=h.expand(this.scope||this,b.operationName||this.operationName);if(e?(d=new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(e),j&&d.getUri().setCollectionPredicate(j)):d=i?new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(i).setResourceSelector(j):"Sage.SData.Client.SDataServiceOperationRequest"===n?new Sage.SData.Client.SDataServiceOperationRequest(this.service).setContractName(f).setOperationName(o):new Sage.SData.Client.SDataResourceCollectionRequest(this.service),f&&d.setContractName(f),g&&d.setResourceKind(g),k&&d.setApplicationName(k),l&&d.setDataSet(l),m)for(var p in m)m.hasOwnProperty(p)&&d.setQueryArg(p,m[p])}var q=h.expand(this.scope||this,b.select||this.select),r=h.expand(this.scope||this,b.include||this.include),s=h.expand(this.scope||this,b.sort||this.orderBy);if(q&&q.length>0&&d.setQueryArg("select",q.join(",").replace(/\./g,"/")),r&&r.length>0&&d.setQueryArg("include",r.join(",")),s)if("string"==typeof s)d.setQueryArg("orderby",s);else if(s.length>0){var t=[];c.forEach(s,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},t),d.setQueryArg("orderby",t.join(","))}var u=h.expand(this.scope||this,b.where||this.where),v=[];u&&v.push(u);var w=h.expand(this.scope||this,a);return w&&"string"==typeof w&&v.push(w),v.length>0&&d.setQueryArg("where","("+v.join(") and (")+")"),void 0!==b.start&&d.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,b.start+1),void 0!==b.count&&d.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,b.count),d},_onCancel:function(){},_onRequestFeedSuccess:function(a,c){if(c){var d=b.getObject(this.itemsProperty,!1,c),e="number"==typeof c.$totalResults?c.$totalResults:-1;a.total=e,this.onComplete&&this.onComplete(d,e),this.dataCache=d,
a.resolve(d||[])}else{var f=new Error("The feed result is invalid.");a.reject(f)}},_onRequestEntrySuccess:function(a,b){if(b)a.resolve(this.doDateConversion?this._handleDateConversion(b):b);else{var c=new Error("The entry result is invalid.");a.reject(c)}},_onRequestFailure:function(a,b,c){var d=new Error("An error occurred requesting: "+c.url);d.xhr=b,d.status=b.status,d.aborted=!1,d.url=c.url,a.reject(d)},_onRequestAbort:function(a,b,c){var d=new Error("An error occurred requesting: "+c.url);d.xhr=b,d.status=0,d.responseText=null,d.aborted=!0,a.reject(d)},_handleDateConversion:function(a){for(var b in a)h.Convert.isDateString(a[b])&&(a[b]=h.Convert.toDateFromString(a[b]));return a},get:function(a,b){var c={},e=new d,f=this._createEntryRequest(a,b||{}),g=this.executeGetAs?f[this.executeGetAs]:f.read;return c.value=g.call(f,{success:this._onRequestEntrySuccess.bind(this,e),failure:this._onRequestFailure.bind(this,e),aborted:this._onRequestAbort.bind(this,e)}),e},getIdentity:function(a){return b.getObject(this.idProperty,!1,a)},getLabel:function(a){return b.getObject(this.labelProperty,!1,a)},getEntity:function(a){return b.getObject(this.entityProperty,!1,a)},getVersion:function(a){return b.getObject(this.versionProperty,!1,a)},put:function(a,b){b=b||{};var c=b.id||this.getIdentity(a),e=b.entity||this.entityName,f=b.version||this.getVersion(a),g=!this.service.isJsonEnabled();c&&(a.$key=c),e&&g&&(a.$name=e),f&&(a.$etag=f);var h={},i=new d,j=this._createEntryRequest(c,b),k=b.create?j.create:j.update;return h.value=k.call(j,a,{success:this._onTransmitEntrySuccess.bind(this,i),failure:this._onRequestFailure.bind(this,i),aborted:this._onRequestAbort.bind(this,i)}),i},_onTransmitEntrySuccess:function(a,b){a.resolve(this.doDateConversion?this._handleDateConversion(b):b)},add:function(a,b){return b=b||{},b.create=!0,this.put(a,b)},newItem:function(a){var b=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);b.setResourceKind(this.resourceKind),b.read({success:function(b){this._entity=b,a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:function(b){a.onError&&a.onError.call(a.scope||this,b)},scope:this})},createItem:function(a,c){var d={};d.scope=c||this,d.scope.store=this;var e=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};d.success=e,this.add(a).then(b.hitch(this,function(){this.dataCache.push(a),d.success.call(d.scope,a)}))},deleteItem:function(a,c){var d=new Sage.SData.Client.SDataBatchRequest(this.service);d.setResourceKind(this.resourceKind),d.using(b.hitch(this,function(){for(var b=0;b<a.length;b++){var c=new Sage.SData.Client.SDataSingleResourceRequest(this.service);c.setResourceKind(this.resourceKind),c.setResourceSelector("'"+a[b].$key+"'"),c.delete({},{scope:this,ignoreETag:!0})}})),d.commit({scope:this,ignoreETag:!0,success:function(a){var b=a.$resources[0];if(void 0!==b.$diagnoses){var d=b.$diagnoses[0];d.applicationCode&&"string"==typeof d.applicationCode&&-1!=d.applicationCode.indexOf("SDataExceptionDiagnoses")&&500==a.$resources[0].$httpStatus&&(c.onResponseExceptionMsg=a.$resources[0].$diagnoses[0].message)}var e={};e.scope=c||this;var f=function(){"function"==typeof this.onResponse&&this.onResponse.call(this,e.scope.onResponseExceptionMsg)};e.success=f,e.success.call(e.scope)},failure:function(a){}})},remove:function(a,b){b=b||{};var c={},e=new d,f=this._createDeleteRequest(a,b),g=f.delete;return c.value=g.call(f,a,{success:this._onTransmitEntrySuccess.bind(this,e),failure:this._onRequestFailure.bind(this,e),aborted:this._onRequestAbort.bind(this,e)}),e},query:function(a,b){var c={},f=new d(this._onCancel.bind(this,c)),g=this._createFeedRequest(a,b||{});f.total=-1;var h={success:this._onRequestFeedSuccess.bind(this,f),failure:this._onRequestFailure.bind(this,f),aborted:this._onRequestAbort.bind(this,f),httpMethodOverride:b&&b.httpMethodOverride},i=g.read;if(this.executeQueryAs)i=g[this.executeQueryAs];else if(g instanceof Sage.SData.Client.SDataResourcePropertyRequest)i=g.readFeed;else if(g instanceof Sage.SData.Client.SDataServiceOperationRequest)return i=g.execute,c.value=i.call(g,this.entry,h),e(f);return c.value=i.call(g,h),e(f)},transaction:function(){},getChildren:function(){},getMetadata:function(a){return a?{id:this.getIdentity(a),label:this.getLabel(a),entity:this.getEntity(a),version:this.getVersion(a)}:null},getLabelAttributes:function(a){return this.labelProperty?[this.labelProperty]:null},getValue:function(a,b,c){return h.getValue(a,b)},onSuccess:function(a,b){},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.dataCache.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},isDirty:function(a){},saveNewEntity:function(a,c,d,e){this.add(a).then(b.hitch(this,function(){c.call(e,a)}))},revert:function(){},save:function(a){},setValue:function(a,b,c){},setValues:function(a,b,c){},unsetAttribute:function(a,b){},onSet:function(a,b,c,d){},onNew:function(a){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/Data/WritableSDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e){return c("Sage.Data.WritableSDataStore",a,{newItemParentReferenceProperty:!1,constructor:function(a){this.features["dojo.data.api.Write"]=!0,this.features["dojo.data.api.Notification"]=!0,this.dirtyDataCache={isDirty:!1},this.singleResourceRequest=null,dojo.connect(this,"clearCache",this,this._clearCache),this.onComplete=a.onComplete},getSingleResourceRequest:function(a){return this.verifyService(),null===this.singleResourceRequest&&(this.singleResourceRequest=new Sage.SData.Client.SDataSingleResourceRequest(this.service),this.singleResourceRequest.setResourceKind(this.resourceKind),this.select&&this.select.length>0&&this.singleResourceRequest.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&this.singleResourceRequest.setQueryArg("include",this.include.join(","))),a&&this.singleResourceRequest.setResourceSelector("'"+a+"'"),this.singleResourceRequest},onSuccess:function(a,b){a.onBegin&&a.onBegin.call(a.scope||this,b.$totalResults,a),this.onComplete&&this.onComplete.call(a.scope||this,b.$resources,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a),this.addToCache(a,b)},_clearCache:function(){this.clearDirtyDataCache()},clearDirtyDataCache:function(){for(var a in this.dirtyDataCache)"isDirty"!==a&&delete this.dirtyDataCache[a];this.dirtyDataCache.isDirty=!1},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.dataCache.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},hasAttribute:function(a,b){return!(!this.isItem(a)||"string"!=typeof b)&&b in a},close:function(){this.clearCache()},deleteItem:function(a,b){var c={};c.scope=b||this,c.ignoreETag=!0;var d=this.getSingleResourceRequest(this.getIdentity(a));b&&"function"==typeof b.onResponse&&(c.success=b.onResponse,c.aborted=b.onResponse,c.failure=b.onResponse),d.delete(a,c)},isDirty:function(a){if(a){var b=this.getIdentity(a);if(b&&""!==b)return this.dirtyDataCache.hasOwnPropery(b)}return this.dirtyDataCache.isDirty},_checkPageExitWarningMessage:function(){var a=!0;if(this.dirtyDataCache.isDirty){var b=Sage.Services.getService("ClientBindingManagerService");a=confirm(b._PageExitWarningMessage)}return a},newItem:function(a){if(this._checkPageExitWarningMessage()){var b=this.createTemplateRequest();b&&b.read({success:function(b){this._newItemCreated(a,b),this.onNew(b)},failure:this.requestTemplateFailure,scope:this})}},_newItemCreated:function(a,b){if(this.newItemParentReferenceProperty){var c=Sage.Utility.getCurrentEntityId();b.hasOwnProperty(this.newItemParentReferenceProperty)&&c&&(b[this.newItemParentReferenceProperty]={$key:c})}a&&a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},createTemplateRequest:function(){var a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);return this.resourceKind&&""!==this.resourceKind&&a.setResourceKind(this.resourceKind),a},requestTemplateFailure:function(){},saveNewEntity:function(a,b,c,d){var e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e&&(this.resourceKind&&""!==this.resourceKind&&e.setResourceKind(this.resourceKind),e.create(a,{success:b||function(a){},failure:c||function(a,b){},scope:d||this}))},createItem:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(c){this.resourceKind&&""!==this.resourceKind&&c.setResourceKind(this.resourceKind);var d={};d.scope=b||this,d.scope.store=this;var e=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};d.success=e;var f=function(a,b){"function"==typeof this.onResponse?this.onResponse.call(this,a,b):"undefined"!=typeof console&&a&&void 0!==a&&a.status};d.failure=f,d.aborted=f,c.create(a,d)}},revert:function(){this.clearDirtyDataCache(),this.onDataReset()},save:function(a){var b,c;if(!this.dirtyDataCache.isDirty)return void(a&&"function"==typeof a.onComplete&&a.onComplete.call(a));for(var d in this.dirtyDataCache)if("isDirty"!==d){if(b=this.dirtyDataCache[d],this.isItem(b)){c=this.getSingleResourceRequest(d);var e={};e.scope=a||this,e.scope.store=this,this.isSecurityManager||(e.ignoreETag=!0);var f=function(a){this.store.dataCache[a.$key]&&(this.store.dataCache[a.$key].$etag=a.$etag),"function"==typeof this.onResponse&&this.onResponse.call(this,a)};e.success=f;var g=function(a,b){if("undefined"!=typeof console&&a&&void 0!==a&&a.responseText){var c=dojo.fromJson(a.responseText);if(c&&void 0!==c&&c.$key){var d=this.store.dataCache[c.$key];d&&d.$etag}}"function"==typeof this.onResponse&&this.onResponse.call(this,a,b)};e.failure=g,e.aborted=g,c.update(b,e)}delete this.dirtyDataCache[d]}this.dirtyDataCache.isDirty=!1,a&&"function"!=typeof a.onResponse&&"function"==typeof a.onComplete&&a.onComplete.call(a)},setValue:function(a,c,d){var e=this.getValue(a,c,"");return b.setValue(a,c,d),this.onSet(a,c,e,d),e!=d&&(this.dirtyDataCache[this.getIdentity(a)]=a,this.dirtyDataCache.isDirty=!0),!0},setValues:function(a,b,c){d.forEach(c,e.hitch(this,function(c){this.setValue(a,b,c)}))},unsetAttribute:function(a,b){alert("not implemented - unsetAttribute")},onSet:function(a,b,c,d){},onNew:function(a){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/Groups/GroupContextService":function(){define(["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(a,b,c,d,e,f,g){var h=f("Sage.Groups.GroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:!1,constructor:function(){this._connects=[],this._subscribes=[],this._adHocGroupList=[],this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null},this._isAdHocGroupListRetrieved=!1,this._subscribes.push(dojo.subscribe(b.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh)),d(e.hitch(this,function(){if(!this.isContextRequired()){var b=a.getValue(window,"Sage.Groups._groupContext"),c=a.getValue(window,"Sage.UI.DataStore.Filters");c&&b.AppliedFilterInfo&&(c.default=this.createFilterExtendedSet(b.AppliedFilterInfo))}this.isContextRequired()&&this.requestContext()}))},createFilterExtendedSet:function(a){var b,c,d,f,g,h=a.definitionSet||[],i=a.applied||[],j={},k={};for(d=0;d<h.length;d++)b=h[d],c={$key:b.id,$partial:!0,filterName:b.filterName,displayName:b.displayName,propertyName:b.propertyName,propertyDataTypeId:b.propertyDataTypeId,details:{}},"rangeFilter"==b.filterType&&(c.details.rangeFilter={characters:b.characters}),"lookupFilter"==b.filterType?c.details.lookupFilter={}:c.details.distinctFilter={},j[b.id]=c;for(d=0;d<i.length;d++){for(b=i[d],c={},f=0;f<b.rangeValues.length;f++)g=b.rangeValues[f],c[g.rangeName]=e.mixin({},g);for(f=0;f<b.distinctValues.length;f++)"string"==typeof(g=b.distinctValues[f])&&(c[g]=g);for(f=0;f<b.lookupValues.length;f++){var l=b.lookupValues[f];c.value=l}k[b.id]=c}return{definitionSet:j,applied:k}},destroy:function(){g.forEach(this._connects,function(a){dojo.disconnect(a)}),this.unsubscribeConnects(),this.uninitialize()},unsubscribeConnects:function(){g.forEach(this._subscribes,function(a){dojo.unsubscribe(a)})},uninitialize:function(){},isContextRequired:function(){return!(Sage&&Sage.Groups&&Sage.Groups._groupContext)},createCompatibleContext:function(a){"LOOKUPRESULTS"==a.currentGroupId&&(a.currentName="Lookup Results");var b={AppliedFilterInfo:a.appliedFilterInfo,ContainsPositionState:a.containsPositionState,CurrentDisplayName:a.currentDisplayName,CurrentEntity:a.currentEntity,CurrentEntityID:a.currentEntityId,CurrentEntityPosition:a.currentEntityPosition,CurrentFamily:a.currentFamily,CurrentGroupCount:a.currentGroupCount,CurrentGroupID:a.currentGroupId,CurrentName:a.currentName,CurrentTable:a.currentTable,CurrentTableKeyField:a.currentTableKeyField,DefaultGroupID:a.defaultGroupId,FirstEntityID:a.firstEntityId,LastEntityID:a.lastEntityId,LookupLayoutGroupName:a.lookupLayoutGroupName,NextEntityID:a.nextEntityId,PreviousEntityID:a.previousEntityId,RetrievedOn:a.retrievedOn,isAdhoc:a.isAdHoc};return a.appliedFilterInfo||delete b.AppliedFilterInfo,b},_onDefaultFilterRefresh:function(a,b,d){var e=this.getContext(),f=c.getSDataService("system"),g={$name:"applyFilterToGroup",request:{groupId:e.CurrentGroupID,filter:dojo.toJson(d.createValueSet())}};if(null!==e.CurrentGroupID&&""!==e.CurrentGroupID){new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("applyFilterToGroup").execute(g,{})}},getContext:function(){var a=Sage&&Sage.Groups&&Sage.Groups._groupContext;return a||(this.isContextRequired()&&this.requestContext(),this._emptyContext)},requestContext:function(a){if(!this._currentRequestHandle){var b=c.getSDataService("system"),d=new Sage.SData.Client.SDataServiceOperationRequest(b).setOperationName("getGroupContext");this._currentRequestHandle=d.execute({},{success:this._onRequestContextSuccess,failure:this._onRequestContextFailure,scope:this})}},_onRequestContextSuccess:function(a){var b=a&&a.response;b&&this.setContext(this.createCompatibleContext(b)),this._currentRequestHandle=null},_onRequestContextFailure:function(a,b){this._currentRequestHandle=null},setContext:function(a){var b=Sage&&Sage.Groups;b&&a&&(e.mixin(b._groupContext,a),this.onContextSet(b._groupContext))},setCurrentGroup:function(a,b,d){var e=this.getContext();if(e&&e.CurrentGroupID===a){if("LOOKUPRESULTS"===a){if(!d||e.LookupResultsConditions===d)return;e.currentName="Lookup Results"}"LOOKUPRESULTS"!==a&&(this.doNotFireGroupChangedEvent=!0)}if(12===a.length||"LOOKUPRESULTS"===a){var f=c.getSDataService("system"),g=new Sage.SData.Client.SDataServiceOperationRequest(f).setOperationName("setGroupContext"),h={request:{currentGroupId:a,currentName:"",currentFamily:""}};g.execute(h,{success:this._onSetContextRequestSuccess,failure:this._onSetContextRequestFailure,scope:this})}},_onSetContextRequestSuccess:function(a){var b=a&&a.response,c=b&&this.createCompatibleContext(b);c&&this.setContext(c),this.doNotFireGroupChangedEvent||this.onCurrentGroupChanged({current:c}),this.doNotFireGroupChangedEvent=!1},_onSetContextRequestFailure:function(a,b){},onSuccessfulGroupChanged:function(a){var b=this.getContext();this.setContext(a),this.onCurrentGroupChanged({current:a,previous:b})},onCurrentGroupChanged:function(a){dojo.publish("/group/context/changed",[a,this]),a.current.AppliedFilterInfo&&this.publishFiltersApplied(a.current.AppliedFilterInfo)},publishFiltersApplied:function(b){b&&d(e.hitch(this,function(){var c=this.createFilterExtendedSet(b);a.getValue(window,"Sage.UI.DataStore.Filters").default=c,dojo.publish("/ui/filters/default/apply",[c.applied,c.definitionSet,this])}))},onContextSet:function(a){a&&a.AppliedFilterInfo&&this.publishFiltersApplied(a.AppliedFilterInfo)},getAdHocGroupList:function(a,b){if(this._isAdHocGroupListRetrieved)return void a.call(b||this,this._adHocGroupList);var d=new Sage.Data.BaseSDataStore({service:c.getSDataService("system"),resourceKind:"groups",include:[],select:["name","family","isHidden","isAdHoc","mainTable","keyField","entityName"]});Sage.Groups._groupContext.CurrentFamily=Sage.Groups._groupContext.CurrentFamily.toUpperCase(),d.fetch({query:dojo.string.substitute("upper(family) eq '${CurrentFamily}' and isAdHoc",Sage.Groups._groupContext),count:1e3,sort:[{attribute:"name"}],start:0,onComplete:function(c){this._adHocGroupList=c,a.call(b||this,this._adHocGroupList),this._isAdHocGroupListRetrieved=!0},scope:this})}});return Sage.Services.addService("ClientGroupContext",new h),h})},"Sage/Groups/GroupManager":function(){define(["Sage/UI/Dialogs","Sage/Utility/Email","dojo/string","Sage/Groups/GroupContextService","dojox/storage/LocalStorageProvider","dojo/_base/array","dojo/_base/lang","dojo/i18n","dojo/i18n!./nls/GroupManager","Sage/Data/SDataServiceRegistry","dojo/_base/xhr","dojo/topic","dojo/aspect","Sage/Utility/Jobs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return Sage.namespace("Sage.Groups.GroupManager"),Sage.Groups.GroupManager={CurrentUserID:"",SortCol:-1,SortDir:"ASC",GMUrl:"SLXGroupBuilder.aspx?method=",GroupXML:"",resources:i,LOCALSTORE_NAMESPACE:"SageGroups",QB_WIDTH:840,QB_HEIGHT:710,GroupAdHocJobRecordLimit:-1,GetFromServer:function(a,b,c,d,e){var f={url:a,sync:e||!1,handleAs:b||"text",headers:{"Content-Type":"application/xml"},preventCache:!0,load:c,error:d};return dojo.xhrGet(f)},ClearLocalStorage:function(){var a=new e;a.initialize(),a.clear(Sage.Groups.GroupManager.resources.LOCALSTORE_NAMESPACE),window.location.reload(!0)},ClearLocalStorageForGroup:function(a){var b=new e;b.initialize(),f.forEach(b.getNamespaces(),function(c){c.indexOf(a)>-1&&b.clear(c)}),sessionStorage.removeItem("GROUPLAYOUT_"+a),sessionStorage.removeItem("hidden_filters_"+a),sessionStorage.removeItem("METADATA_FILTERS_"+a),window.location.reload(!0)},PostToServer:function(a,b,c,d){var e={url:a,postData:b,handleAs:"text",headers:{"Content-Type":"application/xml"},load:function(a){"function"==typeof c&&c(a)},error:function(a){"function"==typeof d&&d(a)}};return dojo.xhrPost(e)},GetCurrentGroupInfo:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){var b=a.getContext();return{Name:b.CurrentName,Family:b.CurrentFamily,Id:b.CurrentGroupID,isAdhoc:b.isAdhoc,Entity:b.CurrentEntity,tableName:b.CurrentTable}}return""},CreateGroup:function(a){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family);var b="QueryBuilderMain.aspx?mode="+a,d=Sage.Groups.GroupManager.QB_WIDTH,e=Sage.Groups.GroupManager.QB_HEIGHT;window.open(b,"GroupViewer",c.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:d,height:e}))},DeleteGroup:function(b,d){void 0!==b&&""!==b||(b=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);var e=d?c.substitute(Sage.Groups.GroupManager.resources.ConfirmDeleteFmtMessage,[d]):Sage.Groups.GroupManager.resources.ConfirmDeleteMessage;a.raiseQueryDialog("",e,function(a){!0===a&&Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+b,"text",function(){var a=document.location.href.replace("#","");if(a.indexOf("?")>-1){a=a.split("?")[0]}document.location=a},function(){})},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)},EditGroup:function(a){var b=Sage.Groups.GroupManager.GetCurrentGroupInfo();void 0!==a&&""!==a||(a=b.Id);var d=c.substitute("QueryBuilderMain.aspx?gid=${groupid}&mode=${md}",{groupid:a,md:b.Family}),e=Sage.Groups.GroupManager.QB_WIDTH,f=Sage.Groups.GroupManager.QB_HEIGHT;window.open(d,"EditGroup",c.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:e,height:f}))},CopyGroup:function(a){var b=Sage.Groups.GroupManager.GetCurrentGroupInfo();void 0!==a&&""!==a||(a=b.Id);var d=["QueryBuilderMain.aspx?gid=",a,"&action=copy","&mode=",b.Family].join(""),e=Sage.Groups.GroupManager.QB_WIDTH,f=Sage.Groups.GroupManager.QB_HEIGHT;window.open(d,"EditGroup",c.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:e,height:f}))},ListGroupsAsSelect:function(a){var b=a;if(!(dojo.isString(b)&&0!==b.length||(b=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family,dojo.isString(b)&&0!==b.length)))return"";var c=Sage.Groups.GroupManager.GMUrl+"GetGroupList&entity="+b,d="";Sage.Groups.GroupManager.GetFromServer(c,"text",function(a){d=a},function(a){},!0);var e=getXMLDoc(d);if(e){var f=e.getElementsByTagName("GroupInfo");if(!f)return"";for(var g="",h=0;h<f.length;h++)g+="<option value = '"+f[h].getElementsByTagName("GroupID")[0].firstChild.nodeValue+"'>"+f[h].getElementsByTagName("DisplayName")[0].firstChild.nodeValue+"</option>";return g}return""},GetGroupId:function(a){var b="";return Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"GetGroupId&name="+encodeURIComponent(a),"text",function(a){b=a},function(a){},!0),b},HideGroup:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id),Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"HideGroup&gid="+a,"",g.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,b,a))},_HideOrShowComplete:function(a,b){var c,d,e,f;a||(e=function(){f&&f.remove&&f.remove();var a=dijit.byId("titlePane");a&&a.resetConfiguration()},c=Sage.Services.getService("ClientGroupContext"),d=c&&c.getContext(),f=m.after(c,"onCurrentGroupChanged",e),Sage.Groups.GroupManager._isDefaultGroup(b)||d.CurrentGroupID!==b?Sage.Groups.GroupManager._isDefaultGroup(b)&&d.CurrentGroupID===b?c.setCurrentGroup("LOOKUPRESULTS"):e.call():c.setCurrentGroup(d.DefaultGroupID))},_isDefaultGroup:function(a){var b,c,d;return d=!1,b=Sage.Services.getService("ClientGroupContext"),b&&(c=b.getContext())&&(d=c.DefaultGroupID===a),d},UnHideGroup:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id),Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"UnHideGroup&gid="+a,"",g.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,b,a))},ShowGroups:function(a){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family);var b="ShowGroups.aspx?tablename="+a;window.open(b,"ShowGroups","resizable=yes,centerscreen=yes,width=800,height=646,status=no,toolbar=no,scrollbars=yes")},CreateAdHocGroup:function(a,b,c,d){var e=[Sage.Groups.GroupManager.GMUrl,"CreateAdHocGroup","&name=",encodeURIComponent(b),"&family=",c,"&layoutid=",encodeURIComponent(d)].join();return Sage.Groups.GroupManager.PostToServer(e,a)},EditAdHocGroupAddMember:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupAddMember&groupid="+a+"&entityid="+b)},EditAdHocGroupDeleteMember:function(a,b){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupDeleteMember&groupid="+a+"&entityid="+b)},SetDefault:function(a,b,c){Sage.Groups.GroupManager._saveGroupUserOptions(b,c,"DEFAULTGROUP")},SetLookupLayout:function(a,b,c){Sage.Groups.GroupManager._saveGroupUserOptions(b,c,"LOOKUPLAYOUTGROUP")},_saveGroupUserOptions:function(a,b,d){var e=Sage.Groups.GroupManager.GetCurrentGroupInfo(),f=e.Name,g=a||f,h=b,i=Sage.Services.getService("UserOptions");i&&i.set(b,d,c.substitute("${0}:${1}",[h,g]))},IsAdHoc:function(a){alert("not implemented in this object yet...")},ExportGroup:function(b,c){a.showInfo(Sage.Groups.GroupManager.resources.exportToExcel)},ShareGroup:function(a){void 0!==a&&""!==a||(a=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id);var b="ShareGroup.aspx?gid="+a;window.open(b,"ShareGroup","resizable=yes,centerscreen=yes,width=500,height=450,status=no,toolbar=no,scrollbars=yes")},GetGroupSQL:function(a,b,c,d){var e=a;if(!(dojo.isString(e)&&0!==e.length||(e=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id,dojo.isString(e)&&0!==e.length)))return"";var f=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+e;void 0!==b&&(dojo.isString(b)?"true"!==b&&"false"!==b||(f+="&UseAliases="+b):"boolean"==typeof b&&(f+="&UseAliases="+b.toString())),dojo.isString(c)&&c.length>0&&(f+="&parts="+c),void 0!==d&&(dojo.isString(d)?"true"!==d&&"false"!==d||(f+="&ApplyFilters="+d):"boolean"==typeof d&&(f+="&ApplyFilters="+d.toString()));var g="";return Sage.Groups.GroupManager.GetFromServer(f,"text",function(a){g=a},function(a){},!0),g},GetGroupSQLFromXML:function(a,b,c){Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"GetGroupSQL",a,b,c)},GetGroupSQLById:function(a,b,c){var d=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+a;Sage.Groups.GroupManager.GetFromServer(d,"json",b,c)},GetAdHocGroupJobRecordLimit:function(){if(!this.GroupAdHocJobRecordLimit||this.GroupAdHocJobRecordLimit<1){var a=Sage.Groups.GroupManager.GMUrl+"GetAdHocGroupJobRecordLimit",b="";Sage.Groups.GroupManager.GetFromServer(a,"text",function(a){b=a},function(a){},!0),this.GroupAdHocJobRecordLimit=b}},saveSelectionsAsNewGroup:function(){var b=Sage.Utility.getSelectionInfo();if(b&&0!==b.selectionCount)Sage.Groups.GroupManager.promptForName("");else if(b.recordCount<1)a.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);else{var d=c.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[b.recordCount]);a.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,d,function(a){!0===a&&(0===b.selectionCount&&Sage.Groups.GroupManager.saveLookupAsGroup(),Sage.Groups.GroupManager.promptForName(""))},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)}},promptForName:function(b,d){var e=Sage.Utility.getSelectionInfo(),f=0===e.selectionCount?e.recordCount:e.selectionCount,g=c.substitute(Sage.Groups.GroupManager.resources.newGroupNamePrompt,[f,b||""]);a.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.newGroupTitle,query:g,callbackFn:function(a,b){!0===a&&(""===b?window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.newGroupRePrompt,b)},100):null!==b.match(/[\/\\:\*\?"<\>|\.'\r\n]/)?window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg,b)},100):Sage.Groups.GroupManager.saveNewGroupPost(b))},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:d||"",closable:!0})},saveNewGroupPost:function(a){var b=Sage.Utility.getSelectionInfo(),c=j.getSDataService("system"),d=new Sage.SData.Client.SDataSingleResourceRequest(c),e=Sage.Services.getService("ClientGroupContext").getContext(),f=e.CurrentFamily,g=e.CurrentGroupID,h={},i=!1;d.setResourceKind("groups"),0===b.selectionCount&&"LOOKUPRESULTS"!==g&&(i=!0);var k=0===b.selectionCount?b.recordCount:b.selectionCount;this.GetAdHocGroupJobRecordLimit();var l=this.GroupAdHocJobRecordLimit?this.GroupAdHocJobRecordLimit:-1;l>=0&&k>l?(h={family:f,name:a,adHocIds:0===b.selectionCount?null:b.selectedIds,groupId:g},this.createAdHocGroupViaJob(h)):(h={family:f,name:a,adHocIds:b.selectedIds},d.create(h,{success:function(a){i?Sage.Groups.GroupManager.copyFromGroup(g,a.$key):Sage.Groups.GroupManager.newGroupCreated()},failure:function(){},scope:this}))},createAdHocGroupViaJob:function(b){var d=b.groupId;"LOOKUPRESULTS"===d&&(d=this._getDefaultGroupId());var e=[{name:"SelectedIds",value:b.adHocIds},{name:"Family",value:b.family},{name:"EntityName",value:b.family},{name:"GroupName",value:b.name},{name:"GroupId",value:d},{name:"AppliedFilters",value:Sys.Serialization.JavaScriptSerializer.serialize(n.getFiltersForJob())},{name:"LookupConditions",value:Sys.Serialization.JavaScriptSerializer.serialize(n.getLookupConditionsForJob())}],f={descriptor:c.substitute(i.createAdHocGroupJob_Description,[b.name]),closable:!0,title:i.createAdHocGroupJob_Title,key:"Sage.SalesLogix.BusinessRules.Jobs.CreateAdHocGroupJob",infoMessage:i.createAdHocGroupJobProcessingJobMsg,parameters:e,failure:function(b){a.showError(c.substitute(Sage.Groups.GroupManager.resources.createAdHocGroupJobError,[b.result?b.result:""]))},ensureZeroFilters:!0};n.triggerJobAndDisplayProgressDialog(f)},_getDefaultGroupId:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){return a.getContext().DefaultGroupID}return""},removeSelectionsFromGroup:function(){var b=Sage.Utility.getSelectionInfo();if(0===b.selectionCount)if(b.recordCount<1)a.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);else{var d=c.substitute(Sage.Groups.GroupManager.resources.noneSelectedRemovePromptFmt,[b.recordCount]);a.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,d,function(a){!0===a&&Sage.Groups.GroupManager.removeConfirmed()},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)}else Sage.Groups.GroupManager.removeConfirmed()},removeConfirmed:function(){var a=Sage.Utility.getSelectionInfo(),b=Sage.Services.getService("ClientGroupContext").getContext(),c=b.CurrentFamily,d=b.CurrentName,e=b.CurrentGroupID;Sage.Groups.GroupManager.removeIds(e,d,c,a.selectedIds,function(){Sage.Groups.GroupManager.refreshListView()},function(a){},this)},removeIds:function(a,b,c,d,e,f,h){var i,k,m=j.getSDataService("system"),n=new Sage.SData.Client.SDataServiceOperationRequest(m),o=[];n.setResourceKind("groups"),d&&d.length>0?(n.setOperationName("removeAdHocIds"),o=d):(n.setOperationName("removeAllAdHocIds"),o.push(d)),i={$name:"removeAdHocIds",request:{groupId:a,groupName:b,family:c,adHocIds:d}},k=g.hitch(this,function(){l.publish("/group/adhoc/removed",{groupId:a,groupName:b,family:c,ids:o}),e&&e.call(arguments)}),n.execute(i,{success:k,failure:f,scope:h||this})},addSelectionsToGroup:function(b){var d=Sage.Utility.getCurrentEntityId();if(""!==d)Sage.Groups.GroupManager.postAddToGroup(b,{selectedIds:[d],selectionCount:1});else{var e=Sage.Utility.getSelectionInfo();if(0===e.selectionCount)if(e.recordCount<1)a.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);else{var f=c.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[e.recordCount]);a.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,f,function(a){!0===a&&Sage.Groups.GroupManager.addConfirmed(b)},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption)}else Sage.Groups.GroupManager.addConfirmed(b)}},copyFromGroup:function(a,b){var c,d=j.getSDataService("system"),e=new Sage.SData.Client.SDataServiceOperationRequest(d),f=Sage.Services.getService("ClientGroupContext").getContext(),g=f.CurrentFamily,h=f.CurrentName;e.setResourceKind("groups"),e.setOperationName("addAdHocIdsFrom"),c={$name:"addAdHocIdsFrom",request:{groupId:b,groupName:h,family:g,fromGroupId:a}},e.execute(c,{success:function(){var a=Sage.Services.getService("ClientGroupContext");if(a){var c=dijit.byId("titlePane");c&&c.resetConfiguration(),a.setCurrentGroup(b)}},failure:function(){},scope:this})},addConfirmed:function(a){
var b=Sage.Utility.getSelectionInfo();Sage.Groups.GroupManager.postAddToGroup(a,b)},postAddToGroup:function(a,b){var c,d=j.getSDataService("system"),e=new Sage.SData.Client.SDataServiceOperationRequest(d),f=Sage.Services.getService("ClientGroupContext").getContext(),g=f.CurrentFamily,h=f.CurrentGroupID,i="addAdHocIds";if(0===b.selectionCount)return void Sage.Groups.GroupManager.copyFromGroup(h,a);e.setResourceKind("groups"),e.setOperationName(i),c={$name:i,request:{groupId:a,family:g,adHocIds:b.selectedIds}},e.execute(c,{success:function(){},failure:function(){},scope:this})},saveLookupAsGroup:function(b,c,d){void 0===d&&(d=Sage.Groups.GroupManager.resources.groupNameText),a.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.saveLookupDlgTitle,query:d,callbackFn:function(a,b){if(!0===a)if(""===b)window.setTimeout(function(){Sage.Groups.GroupManager.saveLookupAsGroup(Sage.Groups.GroupManager.resources.newGroupRePrompt)},100);else if(null!==b.match(/\'|\"|\/|\\|\*|\:|\?|<|\>/))window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg)},100);else{var c="slxdata.ashx/slx/crm/-/groups/adhoc?action=SaveLookupAsGroup&name="+encodeURIComponent(b);k.post({url:c,handleAs:"text",content:{},load:Sage.Groups.GroupManager.newGroupCreated,error:Sage.Groups.GroupManager.handleAjaxError})}},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:"",closable:!0})},handleAjaxError:function(b){if(void 0!==b)if(b.responseXML){var c=b.responseXML.getElementsByTagName("sdata:message");c.length>0&&a.showError(c[0].text||c[0].textContent,"")}else a.alert("an unidentified exception has occured")},newGroupCreated:function(){Sage.Link.toListView()},refreshListView:function(){var a=dijit.byId("list");a&&a.refreshList()},emailSelectionsFromGroup:function(){var a,c,d,e;a="",c="",d=0,e="Email",b.writeEmailToGroupSelection(a,c,d,e)}},window.groupManager=Sage.Groups.GroupManager,window.groupManager})},"Sage/Utility/Email":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/parser","dojox/validate/regexp","dojo/i18n!./nls/Email","dojo/has"],function(Utility,SDataServiceRegistry,Dialogs,parser,regexp,nls,has){return Sage.namespace("Utility.Email"),dojo.mixin(Sage.Utility.Email,{resources:nls,writeEmail:function(recipient,subject,body,isFormatted,nameOrder){if(dojo.isString(recipient)&&recipient.length>0)if(0===recipient.indexOf("{",0)&&recipient.lastIndexOf("}")==recipient.length-1)try{var objValue=dojo.fromJson(recipient);dojo.isObject(objValue)&&(recipient=objValue)}catch(a){return void Dialogs.showError(dojo.substitute(Utility.Email.resources.RecipientInfoError,[a.message]))}else 0===recipient.indexOf("[",0)&&recipient.lastIndexOf("]")===recipient.length-1&&(recipient=eval(recipient));var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(a,b){var c=0;void 0!==nameOrder&&(isNaN(nameOrder)||1==Number(nameOrder)&&(c=1));var d=3,e=2,f=1,g=["to","cc","bcc"],h=0,i=dojo.isArray(recipient)?"array":typeof recipient,j="undefined"!==i&&null!==recipient,k={to:[],cc:[],bcc:[]},l=function(a,b,c,f){if(self.isValidEmailAddress(f||"")){var g=function(a){a.push({firstName:b||"",lastName:c||"",emailAddress:f||""})};switch(a){case e:g(k.cc);break;case d:g(k.bcc);break;default:g(k.to)}}};if(j){var m=function(a,b){dojo.isObject(b)&&l(a,b.firstName||"",b.lastName||"",b.emailAddress||"")};switch(i){case"string":""!==recipient&&l(f,"","",recipient);break;case"array":dojo.forEach(recipient,function(a){dojo.isString(a)?l(f,"","",a):dojo.isObject(a)&&m(f,a)});break;case"object":h=0,dojo.forEach(g,function(a){if(h++,recipient.hasOwnProperty(a))switch(dojo.isArray(recipient[a])?"array":typeof recipient[a]){case"string":l(h,"","",recipient[a]);break;case"array":dojo.forEach(recipient[a],function(a){dojo.isString(a)?l(h,"","",a):dojo.isObject(a)&&m(h,a)});break;case"object":m(h,recipient[a])}})}}recipient=void 0;var n=function(a,b){var d;switch(c){case 1:d=(a.lastName||"").toLocaleUpperCase().localeCompare((b.lastName||"").toLocaleUpperCase()),0===d&&(d=(a.firstName||"").toLocaleUpperCase().localeCompare((b.firstName||"").toLocaleUpperCase()));break;default:d=(a.firstName||"").toLocaleUpperCase().localeCompare((b.firstName||"").toLocaleUpperCase()),0===d&&(d=(a.lastName||"").toLocaleUpperCase().localeCompare((b.lastName||"").toLocaleUpperCase()))}return d},o=dojo.isString(subject)?subject:"",p=dojo.isString(body)?body:"",q=k.to.length+k.cc.length+k.bcc.length;j=q>0;var r=a.GetDesktopService(!1);if(r&&void 0!==r.MailMergeGUI){if(void 0!==r.MailMergeGUI().OutlookIsAvailable&&r.MailMergeGUI().OutlookIsAvailable){var s=r.NewActiveXObject("SLXMMGUIW.MultidimensionalArray"),t=4;if(s.Resize(0,t),j){s.Resize(q,t),h=0;var u=0;dojo.forEach(g,function(a){h++;var b=k[a];dojo.isArray(b)&&b.length>0&&(b.sort(n),dojo.forEach(b,function(a){s.SetValue(u,0,a.firstName||""),s.SetValue(u,1,a.lastName||""),s.SetValue(u,2,a.emailAddress||""),s.SetValue(u,3,h),u++}))})}return void r.MailMergeGUI().WriteEmailEx(s,o,p,c)}"undefined"!=typeof console&&r.MailMergeGUI().OutlookIsAvailable}var v=function(a,b,d){var e="",f=a||"",g=b||"",h=d||"";if(""!==f&&""!==g)switch(c){case 1:e=g+", "+f;break;default:e=f+" "+g}else""===g&&""!==f?e=f:""!==g&&""===f&&(e=g);return""===e?h:e=dojo.string.substitute("${0} <${1}>",[e,h])};if(has("trident")||"undefined"!=typeof ActiveXObject)try{var w=new ActiveXObject("Outlook.Application"),x=w.CreateItem(0);return""!==o&&(x.Subject=o),""!==p&&(isFormatted?x.HTMLBody=p:x.Body=p),h=0,dojo.forEach(g,function(a){h++;var b=k[a];dojo.isArray(b)&&b.length>0&&(b.sort(n),dojo.forEach(b,function(a){var b=v(a.firstName,a.lastName,a.emailAddress);x.Recipients.Add(b).Type=h}))}),void x.Display()}catch(a){}var y=function(a,b,c,d,e,f){"string"==typeof b&&(b=[b]);var g;g=!1===e?function(a){return a}:function(a){return encodeURIComponent(a)};for(var h=0;h<b.length&&a.length<c;h++){var i=c-a.length,j=b[h];if(h>0&&d&&i--,!(0===i||!1===f&&i<j.length)){j=j.substr(0,i);var k=g(j);if(a.length+k.length>c){if(!1===f)continue;for(var l=0,m=k.length-i;m>0;)l++,m-=g(j.charAt(j.length-l)).length;if(l>=j.length)continue;k=g(j.substr(0,j.length-l))}h>0&&d&&(a+=d),a+=k}}return a},z=function(a){var b,c=[];switch(a){case e:b=k.cc;break;case d:b=k.bcc;break;default:b=k.to}return dojo.isArray(b)&&b.length>0&&(b.sort(n),dojo.forEach(b,function(a){var b=v(a.firstName||"",a.lastName||"",a.emailAddress||"");c.push(b)})),c},A=subject||body?1500:2040,B=z(f),C=y("mailto:",dojo.isArray(B)?B:[],A,";",!1,!1),D=!1,E=function(a){var b=D?"&":"?";return b+=a+"=",D=!0,b};dojo.isString(subject)&&""!==subject&&(C+=E("subject"),C=y(C,subject,1700));var F=z(e);dojo.isArray(F)&&F.length>0&&(C+=E("cc"),C=y(C,F,A,";",!1,!1));var G=z(d);dojo.isArray(G)&&G.length>0&&(C+=E("bcc"),C=y(C,G,A,";",!1,!1)),dojo.isString(body)&&""!==body&&(C+=E("body"),C=y(C,body,2e3));try{location.href=C}catch(a){Dialogs.showError(dojo.string.substitute(Utility.Email.resources.MailToProtocolError,[C.length,"function"==typeof a.toMessage?a.toMessage():a.message]))}})},isWriteEmailToIdsSupported:function(a){dojo.isString(a);var b=dojo.isString(a)?a.toUpperCase():"";return"CONTACT"==b||"LEAD"==b},__emailValidationRegEx:null,isValidEmailAddress:function(a){return null===this.__emailValidationRegEx&&(this.__emailValidationRegEx=new RegExp(dojox.validate.regexp.emailAddress())),!!dojo.isString(a)&&this.__emailValidationRegEx.test(a)},writeEmailToIds:function(a,b,c,d,e,f){if(!this.isWriteEmailToIdsSupported(b))return void Dialogs.showError(Utility.Email.resources.InvalidContextError);if(!dojo.isArray(a))return void Dialogs.showError(Utility.Email.resources.InvalidArgumentError);var g=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(h,i){var j=b.toUpperCase(),k=0;a.sort();var l=[];dojo.forEach(a,function(a){-1==dojo.indexOf(l,a)?l.push(a):k++}),a=l,dojo.forEach(a,function(b,c){a[c]="'"+b+"'"});var m=1;a.length>100&&(m=Math.floor(a.length/100),a.length%100!=0&&m++);var n=0;void 0!==e&&(isNaN(e)||1==Number(e)&&(n=1));var o="CONTACT"==j,p="Email";if(dojo.isString(f)&&""!==f&&o){var q=f.toUpperCase();switch(q){case"SECONDARYEMAIL":p="SecondaryEmail";break;case"EMAIL3":p="Email3"}}var r,s=0,t=0,u=0,v={data:[]},w=function(a,b,c,d){v.data.push({key:a||"",firstName:b||"",lastName:c||"",emailAddress:d||""})},x=h.GetDesktopService(!1);for(r=0;r<m;r++){(function(){var b=100;a.length<100&&(b=a.length);var e,f=new Array(b);for(e=0;e<b;e++)f[e]=a.shift();var h=f.length>1?"Id in (${0})":"Id eq ${0}",i=dojo.string.substitute(h,[f.join(",")]),l=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),q=new Sage.SData.Client.SDataResourceCollectionRequest(l);q.setResourceKind("LEAD"==j?"leads":"contacts");var r="FirstName,LastName,DoNotSolicit,DoNotEmail,"+p;q.setQueryArg("select",r),q.setQueryArg("where",i),q.read({httpMethodOverride:!0,success:function(a){u++;var b=void 0!==a&&null!==a?a.$resources:null;if(dojo.isArray(b)&&b.length>0){var e;for(e=0;e<b.length;e++){var f,h=b[e].$key||"";switch(p){case"SecondaryEmail":f=b[e].SecondaryEmail||"";break;case"Email3":f=b[e].Email3||"";break;default:f=b[e].Email||""}var i=b[e].FirstName||"",j=b[e].LastName||"",l=b[e].DoNotEmail||!1,q=b[e].DoNotSolicit||!1;""===f||!g.isValidEmailAddress(f)||l||q?l||q?t++:s++:w(h,i,j,f)}}if(u==m){var r=null;(t>0||s>0||k>0)&&(r=dojo.string.substitute(Utility.Email.resources.FilteredOutMsg,[t,s,k]));var y,z={rtTo:0,rtCC:1,rtBCC:2},A={to:[],cc:[],bcc:[]},B=function(a,b,c,d){var e=function(a){a.push({firstName:b||"",lastName:c||"",emailAddress:d||""})};switch(a){case z.rtCC:e(A.cc);break;case z.rtBCC:e(A.bcc);break;default:e(A.to)}};if(v.data.length>1){var C;if(x){var D=new Sage.SelectEmailInfo;dojo.forEach(v.data,function(a){D.AddInfo("","",a.key,a.emailAddress,a.firstName,a.lastName,"","",!1)});var E=dojo.isString(r)?r:"",F=x.SelectEmailNames(D,MaxTo.maxNoMax,E);if(!(null!==F&&F.Recipients.length>0))return;for(C=0;C<F.Recipients.length;C++)y=F.Recipients[C],B(y.Type,y.FirstName,y.LastName,y.EmailAddress)}else dojo.forEach(v.data,function(a){B(z.rtTo,a.firstName,a.lastName,a.emailAddress)})}else{if(1!=v.data.length){var G=Utility.Email.resources.AllInvalidEmailError;return o&&"Email"!=p&&(G+=dojo.string.substitute(" "+Utility.Email.resources.EmailFieldQueried,["Contact."+p])),void Dialogs.showInfo(G)}y=v.data[0],B(z.rtTo,y.firstName,y.lastName,y.emailAddress)}var H=dojo.isString(c)?c:"",I=dojo.isString(d)?d:"",J=I.length>13&&0===I.indexOf("<HTML",I.substring(0,4).toUpperCase());g.writeEmail(A,H,I,J,n)}},failure:function(a,b){var c={message:Utility.Email.resources.EntityInfoError};Utility.ErrorHandler.handleHttpError(a,b,c)},scope:this})})()}})},writeEmailToGroupSelection:function(a,b,c,d){if("list"!=Utility.getModeId())return void Dialogs.showInfo(Utility.Email.resources.CapabilityModeError);var e=Sage.Services.getService("ClientGroupContext");if(dojo.isObject(e)){var f=e.getContext().CurrentTable;if(!this.isWriteEmailToIdsSupported(f))return void Dialogs.showError(Utility.Email.resources.CapabilityEntityError);var g=dijit.byId("list");if(dojo.isObject(g)){var h=g.getSelectionInfo();if(!dojo.isObject(h)||!h.hasOwnProperty("selectionCount")||h.selectionCount<=0)return void Dialogs.showInfo(Utility.Email.resources.NoRowsSelectedError);var i=new Array(h.selections.length);dojo.forEach(h.selections,function(a,b){i[b]=a.id}),this.writeEmailToIds(i,f,a,b,c,d)}}}}),Sage.Utility.Email})},"dojox/storage/LocalStorageProvider":function(){define(["dojo/_base/declare","dojox/storage/Provider","dojox/storage/manager","dojo/_base/array","dojo/_base/lang","dojo/json"],function(a,b,c,d,e,f){var g=a("dojox.storage.LocalStorageProvider",[b],{store:null,initialize:function(){this.store=localStorage,this.initialized=!0,c.loaded()},isAvailable:function(){return"undefined"!=typeof localStorage},put:function(a,b,c,d){this._assertIsValidKey(a),d=d||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(d);var e=this.getFullKey(a,d);b=f.stringify(b);try{this.store.setItem(e,b),c&&c(this.SUCCESS,a,null,d)}catch(b){c&&c(this.FAILED,a,b.toString(),d)}},get:function(a,b){return this._assertIsValidKey(a),b=b||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(b),a=this.getFullKey(a,b),f.parse(this.store.getItem(a))},getKeys:function(a){a=a||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(a),a="__"+a+"_";for(var b=[],c=0;c<this.store.length;c++){var d=this.store.key(c);this._beginsWith(d,a)&&(d=d.substring(a.length),b.push(d))}return b},clear:function(a){a=a||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(a),a="__"+a+"_";for(var b=[],c=0;c<this.store.length;c++)this._beginsWith(this.store.key(c),a)&&b.push(this.store.key(c));d.forEach(b,e.hitch(this.store,"removeItem"))},remove:function(a,b){b=b||this.DEFAULT_NAMESPACE,this._assertIsValidNamespace(b),this.store.removeItem(this.getFullKey(a,b))},getNamespaces:function(){var a=[this.DEFAULT_NAMESPACE],b={};b[this.DEFAULT_NAMESPACE]=!0;for(var c=/^__([^_]*)_/,d=0;d<this.store.length;d++){var e=this.store.key(d);if(1==c.test(e)){var f=e.match(c)[1];void 0===b[f]&&(b[f]=!0,a.push(f))}}return a},isPermanent:function(){return!0},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},isValidKey:function(a){return null!==a&&void 0!==a&&/^[0-9A-Za-z_-]*$/.test(a)},isValidNamespace:function(a){return null!==a&&void 0!==a&&/^[0-9A-Za-z-]*$/.test(a)},getFullKey:function(a,b){return"__"+b+"_"+a},_beginsWith:function(a,b){return!(b.length>a.length)&&a.substring(0,b.length)===b},_assertIsValidNamespace:function(a){if(!1===this.isValidNamespace(a))throw new Error("Invalid namespace given: "+a)},_assertIsValidKey:function(a){if(!1===this.isValidKey(a))throw new Error("Invalid key given: "+a)}});return c.register("dojox.storage.LocalStorageProvider",new g),g})},"dojox/storage/Provider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(a,b,c){return b("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(a,b,c,d){},get:function(a,b){},hasKey:function(a,b){return!!this.get(a,b)},getKeys:function(a){},clear:function(a){},remove:function(a,b){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(a,b,c,d){for(var e=0;e<a.length;e++)dojox.storage.put(a[e],b[e],c,d)},getMultiple:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(dojox.storage.get(a[d],b));return c},removeMultiple:function(a,b){for(var c=0;c<a.length;c++)dojox.storage.remove(a[c],b)},isValidKeyArray:function(b){return!(null===b||void 0===b||!c.isArray(b))&&!a.some(b,function(a){return!this.isValidKey(a)},this)},hasSettingsUI:function(){return!1},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(a){return null!==a&&void 0!==a&&/^[0-9A-Za-z_]*$/.test(a)},getResourceList:function(){return[]}})})},"dojox/storage/manager":function(){define(["dojo/_base/config","dojo/_base/lang","dojo/_base/array"],function(config,lang,array){var manager=new function(){this.currentProvider=null,this.available=!1,this.providers=[],this._initialized=!1,this._onLoadListeners=[],this.initialize=function(){this.autodetect()},this.register=function(a,b){this.providers.push(b),this.providers[a]=b},this.setProvider=function(a){},this.autodetect=function(){if(!this._initialized){for(var a,b=config.forceStorageProvider||!1,c=0;c<this.providers.length;c++){if(a=this.providers[c],b&&b==a.declaredClass){a.isAvailable();break}if(!b&&a.isAvailable())break}if(!a)return this._initialized=!0,this.available=!1,this.currentProvider=null,void this.loaded();this.currentProvider=a,lang.mixin(dojox.storage,this.currentProvider),dojox.storage.initialize(),this._initialized=!0,this.available=!0}},this.isAvailable=function(){return this.available},this.addOnLoad=function(a){this._onLoadListeners.push(a),this.isInitialized()&&this._fireLoaded()},this.removeOnLoad=function(a){for(var b=0;b<this._onLoadListeners.length;b++)if(a==this._onLoadListeners[b]){this._onLoadListeners.splice(b,1);break}},this.isInitialized=function(){return(null==this.currentProvider||"dojox.storage.FlashStorageProvider"!=this.currentProvider.declaredClass||0!=dojox.flash.ready)&&this._initialized},this.supportsProvider=function(storageClass){try{var provider=eval("new "+storageClass+"()"),results=provider.isAvailable();return results||!1}catch(a){return!1}},this.getProvider=function(){return this.currentProvider},this.loaded=function(){this._fireLoaded()},this._fireLoaded=function(){array.forEach(this._onLoadListeners,function(a){try{a()}catch(a){}})},this.getResourceList=function(){var a=[];return array.forEach(dojox.storage.manager.providers,function(b){a=a.concat(b.getResourceList())}),a}};return manager})},"Sage/Utility/Jobs":function(){define(["Sage/Utility","dojo/date/locale","dojo/string","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/_base/connect","Sage/UI/Dialogs","dojo/i18n!./nls/Jobs","dijit/ProgressBar","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Data/SDataServiceRegistry","dojo/_base/lang","dojo/_base/array","dijit/registry","dijit/form/Button","dijit/Dialog"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return Sage.namespace("Utility.Jobs"),n.mixin(Sage.Utility.Jobs,{_intervalId:null,_triggerId:null,_jobService:null,_options:null,_pollIntervalInSeconds:5,progressDialog:!1,progressBar:!1,cancelButton:null,triggerJobAndDisplayProgressDialog:function(b){if(this._reset(),this._validateOptions(b)){this._options={key:b.key,closable:"boolean"!=typeof b.closable||b.closable,infoMessage:"string"==typeof b.infoMessage?b.infoMessage:"",title:"string"==typeof b.title?b.title:j.defaultProgressDialogTitle,showDismissButton:"boolean"!=typeof b.showDismissButton||b.showDismissButton,width:"number"==typeof b.width?b.width:400,indeterminate:"boolean"==typeof b.indeterminate&&b.indeterminate,maximum:"number"==typeof b.maximum?b.maximum:100,showCompleteNotification:"boolean"==typeof b.showCompleteNotification&&b.showCompleteNotification,showErrorNotification:"boolean"!=typeof b.showErrorNotification||b.showErrorNotification,failure:b.failure,complete:b.complete,ensureZeroFilters:!0===b.ensureZeroFilters};var c={descriptor:b.descriptor,key:b.key,parameters:b.parameters,success:n.hitch(this,function(a){this._showProgressDialog(a.response?a.response.triggerId:a.$key)}),failure:n.hitch(this,function(b,c){if(this._options.showErrorNotification){var d=this._errorMessageHandlingBaseOffRequestStatus(b.status,!0);""===d?a.ErrorHandler.handleHttpError(b,c):i.showError(d,this._options.title)}if(this._options.failure){var e=this._getErrorMessage(b);this._options.failure(e)}})};this._jobService=Sage.Services.getService("JobService"),this._jobService.scheduleJob(c),h.publish("/job/execution/changed",[this])}},formatElapsedTime:function(a){return a||(a="00:00:00.00000"),a.split(".")[0]},formatJobDescription:function(a){return a?a.$descriptor:""},formatDate:function(a){if(!a)return"";var c=new Date(parseInt(a.substr(6),10));return b.format(c,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},formatUser:function(a){return a?a.$descriptor:""},formatRepeatCount:function(a){return-1===a?j.repeatIndefinitely:a},formatJobResultGrid:function(a,b){var c=a;return c?Sage.Utility.Jobs.formatJobResultLink(c,b.trigger):""},formatJobResult:function(a){var b=a.result;return b?Sage.Utility.Jobs.formatJobResultLink(b,a.trigger):""},formatJob:function(a){return a?Sage.Utility.Jobs.formatJobResultLink(a.result,a.trigger):""},formatJobResultLink:function(a,b){if(a&&"string"==typeof a){var d=a.split("://");if(1===d.length)return d[0];if(d.length>1)switch(d[0]){case"SlxAttachment":return c.substitute('<a href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${1}\');" title="${0}">${0}</a>',[b?b.$descriptor:"",d[1]]);case"GoToEntity":return c.substitute('<a href="${0}.aspx?entityid=${1}&modeid=Detail">${2}</a>',[d[1],d[2],b?b.$descriptor:""]);case"GoToGroup":return c.substitute("<a href=\"javascript: Sage.Utility.Jobs.gotoGroup('${1}','${2}');\" title=\"${0}\">${0}</a>",[b?b.$descriptor:"",d[1],d[2]])}}return""},getTriggerDescription:function(a){return a?a.$descriptor?a.$descriptor:a.$key:""},formatProgress:function(a){return a&&"number"==typeof a||(a=0),new k({indeterminate:!1,maximum:100,value:a}).domNode},getParameterRunAsUser:function(b){if(b){var c=this._getParameterValue(b,"RunAsUserId");return a.getUserName(c)}return""},refreshList:function(a){try{var b=p.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}},getCurrentGroupId:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupID},getLookupConditionsForJob:function(){var a=[],b=Sage.Services.getService("ClientGroupContext");if(b){var c=b.getContext();if(c&&"LOOKUPRESULTS"===c.CurrentGroupID&&c.LookupResultsConditions){var d=Sys.Serialization.JavaScriptSerializer.deserialize(c.LookupResultsConditions);o.forEach(d,n.hitch(this,function(b){a.push({dataPath:this._getDataPathFromLayout(b.fieldname),op:this._getConditionValue(b.operator),value:b.val})}))}}return a},_getDataPathFromLayout:function(a){for(var b=p.byId("list"),c=b._configurationProvider._currentConfiguration?b._configurationProvider._currentConfiguration.layout:null,d=0;d<c.length;d++){var e=c[d];if(e&&e.alias===a)return e.dataPath}return a},getFiltersForJob:function(){var a,b=[],c=p.byId("list"),d=c.get("filterManager"),e=c._configurationProvider._currentConfiguration?c._configurationProvider._currentConfiguration.layout:null,f=c._configurationProvider._currentConfiguration?c._configurationProvider._currentConfiguration.tableAliases:{},g=null,h=null,i=null;for(var j in d._applied)if(d._applied.hasOwnProperty(j)&&(g=d._applied[j]))switch(h=d._definitionSet[j],a=h.details.rangeFilter&&"rangeFilter"||h.details.distinctFilter&&"distinctFilter"||h.details.lookupFilter&&"lookupFilter",i=this._resolveProperty(e,f,h.propertyName),a){case"rangeFilter":b.push({filterName:h.filterName,tableName:i.tableName,field:i.alias,filterType:"Range",ranges:this._getFilterValues(g,a)});break;case"distinctFilter":b.push({filterName:h.filterName,tableName:i.tableName,field:i.alias,filterType:"Distinct",value:this._getFilterValues(g,a)});break;case"lookupFilter":b.push({filterName:h.filterName,filterType:"Lookup",tableName:i.tableName,field:i.alias,op:g.value.operator,value:[g.value.value]})}return b},_validateOptions:function(a){return!!a&&"string"==typeof a.key},_reset:function(){this._intervalId=null,this._options=null,this._triggerId=null},_getErrorMessage:function(a){return c.substitute(j.errorMessage,[this._options.key,a.status,a.statusText])},_getUnexpectedErrorMessage:function(){return c.substitute(j.unexpectedErrorMessage,[this._options.key])},_getParameterValue:function(a,b){var c="";return a&&o.some(a,function(a,d){if(a.name===b)return c=a.value,!0}),c},_updateProgressDialog:function(a){if(this.progressBar&&(a&&"number"==typeof a.progress&&this.progressBar.update({progress:a.progress}),a&&"string"==typeof a.title&&this.progressBar.update({title:a.title}),a&&"string"==typeof a.infoMessage)){var b=e.byId("progressDialogMessageDiv");b&&(b.innerHTML=a.infoMessage)}},_showProgressDialog:function(a){this._triggerId=a;var b=this._options;this.progressDialog=new r({title:b.title,style:c.substitute("width: ${0}px;",[b.width]),closable:b.closable});var d=new g.create("div",{innerHTML:b.infoMessage,style:"text-align: left; margin-top: 5px; margin-bottom: 10px",id:"progressDialogMessageDiv"});this.progressDialog.containerNode.appendChild(d);var e=new g.create("div",{style:"text-align: left; margin-top: 5px; margin-bottom: 10px",id:"progressDialogLinkDiv",class:"display-none"});if(this.progressDialog.containerNode.appendChild(e),this.progressBar=new k({style:"margin-top: 10px; margin-bottom: 20px",indeterminate:b.indeterminate,maximum:b.maximum,progress:0}),this.progressDialog.containerNode.appendChild(this.progressBar.domNode),b.showDismissButton){this.cancelButton=new q({label:j.cancelButtonCaption,style:"margin-right: 3px;",onClick:n.hitch(this,function(){this._cancelJob()})});var f=new q({label:j.closeButtonCaption,onClick:n.hitch(this,function(){this._closeProgressDialog()})}),h=new g.create("div",{id:"progressDialogButtonDiv",style:"text-align: center;"});h.appendChild(this.cancelButton.domNode),h.appendChild(f.domNode),this.progressDialog.containerNode.appendChild(h)}this.progressDialog.show(),this.progressDialog.helpIcon||(n.mixin(this.progressDialog,new l),this.progressDialog.createHelpIconByTopic("jobsProgressDialog")),this._intervalId=setInterval(function(){Sage.Utility.Jobs._updateProgress()},1e3*this._pollIntervalInSeconds)},_cancelJob:function(){clearInterval(this._intervalId),this.jobService||(this._jobService=Sage.Services.getService("JobService")),this._jobService.interruptExecution(this._options),this._closeProgressDialog()},_closeProgressDialog:function(){clearInterval(this._intervalId),this.progressDialog&&(this.progressDialog.hide(),this.progressDialog.destroyDescendants(),this.cancelButton&&this.cancelButton.destroyRecursive())},_updateProgress:function(){var b=Sage.Services.getService("JobService"),d={triggerId:this._triggerId,success:n.hitch(this,function(b,g){if(d={progress:b.progress},this._updateProgressDialog(d),"Complete"===b.status){f.add(this.cancelButton,"display-none"),clearInterval(this._intervalId);var k=e.byId("progressDialogMessageDiv");k&&(k.innerHTML=j.jobCompletedSuccessfully);var l=e.byId("progressDialogLinkDiv");if(l&&b.result){var m=b.result.split("://");if(m.length>1)switch(f.remove(l,"display-none"),m[0]){case"SlxAttachment":l.innerHTML=c.substitute('<a onclick="Sage.Utility.Jobs._closeProgressDialog();" href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${1}\');" title="${0}">${0}</a>',[b.trigger?b.trigger.$descriptor:"",m[1]]);break;case"GoToEntity":l.innerHTML=c.substitute('<a onclick="Sage.Utility.Jobs._closeProgressDialog();" href="${0}.aspx?entityid=${1}&modeid=Detail">${2}</a>',[m[1],m[2],b.trigger?b.trigger.$descriptor:""]);break;case"GoToGroup":l.innerHTML=c.substitute('<a onclick="Sage.Utility.Jobs._closeProgressDialog();" href="javascript: Sage.Utility.Jobs.gotoGroup(\'${1}\',\'${2}\');" title="${0}">${0}</a>',[b.trigger?b.trigger.$descriptor:"",m[1],m[2]])}}this.cancelButton&&this.cancelButton.destroyRecursive(),this._options.showCompleteNotification&&i.showInfo(j.jobCompletedSuccessfully,this._options.title),this._options.complete&&this._options.complete(b),this._refreshFavorites(),h.publish("/job/execution/changed",[this])}"Error"===b.status&&(clearInterval(this._intervalId),i.closeProgressBar(),this._options.showErrorNotification&&a.ErrorHandler.handleHttpError(b,g),this._options.failure&&this._options.failure(b),this.cancelButton&&this.cancelButton.destroyRecursive())}),failure:n.hitch(this,function(b,c){if(clearInterval(this._intervalId),i.closeProgressBar(),this._options.showErrorNotification){var d=this._errorMessageHandlingBaseOffRequestStatus(b.status,!0);""===d?a.ErrorHandler.handleHttpError(b,c):i.showError(d,this._options.title)}this._options.failure&&this._options.failure(b),this.cancelButton&&this.cancelButton.destroyRecursive()})};b.getExecution(d)},_getConditionValue:function(a){switch(a){case"sw":return"STARTING WITH";case"ne":return"<>";case"gt":return">";case"ge":return">=";case"lt":return"<";case"le":return"<=";case"like":return"LIKE";default:return"="}},_parseProperty:function(a,b){var c=a.split(".");return b?c[c.length-1]:a.substr(0,a.length-c[c.length-1].length-1)},_getFilterValues:function(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d))switch(b){case"rangeFilter":c.push({lower:a[d].lower,upper:a[d].upper});break;case"distinctFilter":c.push(d)}return c},_resolveProperty:function(a,b,c){if(a){var d=this._getFilterDataPath(c,a,b,!1,!1);return d||((d=this._getFilterDataPath(c,a,b,!0,!1))||((d=this._getFilterDataPath(c,a,b,!0,!0))||c))}return c},_resolveAliasProperty:function(a,b){var c=a,d="";if(a.indexOf("_")>-1){var e=a.split("_");2===e[0].length&&(c=a.slice(e[0].length+1),o.forEach(b,function(a){if(e[0]===a.alias)return void(d=a.tableName)}))}return{tableName:d,alias:c}},_getFilterDataPath:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;for(f=0;f<b.length;f++){if(h=b[f],m=h.propertyPath,d&&(l=h.propertyPath&&h.propertyPath.split("."),2===l.length&&(m=l[1])),m===a)return h.propertyPath.indexOf(".")>-1?this._resolveAliasProperty(h.alias,c):(j=h.dataPath&&h.dataPath.split(":")[0],/^[a-z]\d+_/i.test(h.alias)?i=h.alias:(k=j&&c[j.toUpperCase()])&&(i=k+"."+h.alias),{tableName:j,alias:i||h.alias});if(e&&""!==h.dataPath&&(n=h.dataPath.split("."),n.length>1)){var o=n[n.length-1],p=o.split("!");if(p.length>1)for(g=0;g<c.length;g++)if(c[g].tableName===p[0])return{tableName:c[g].tableName,alias:p[1]}}}return null},gotoGroup:function(a,b){var d=m.getSDataService("system"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setOperationName("setGroupContext"),f={request:{currentGroupId:b,"currentFamily:":a,clearCache:!0}};e.execute(f,{success:function(){window.parent.location=c.substitute("${0}.aspx?gid=${1}&modeid=list",[a,b])},scope:this})},getRequestMessageFromStatus:function(a){return this._errorMessageHandlingBaseOffRequestStatus(a,!1)},_errorMessageHandlingBaseOffRequestStatus:function(a,b){var c="";switch(a){case 410:c=j.dataExpiredRefreshPage;break;case 500:c=j.JobServerviceOff;break;default:c=b?"":j.generalCheckJobService}return c},_refreshFavorites:function(){var a=m.getSDataService("system"),b=new Sage.SData.Client.SDataServiceOperationRequest(a),c="refreshFavorites";b.setResourceKind("groups"),b.setOperationName(c);var d={$name:c,request:{}};b.execute(d,{success:function(a){},failure:function(a,b){},scope:this})}}),Sage.Utility.Jobs})},"Sage/UI/Controls/_DialogHelpIconMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-attr","dojo/i18n!./nls/_DialogHelpIconMixin"],function(a,b,c,d){return a("Sage.UI.Controls._DialogHelpIconMixin",null,{helpTopic:"",createHelpIcon:function(a,c){a&&!this.helpIcon||b.destroy(this.helpIcon);var e=b.create("a",{href:a,target:c||"help",class:"dialogHelpIcon"},this.titleBar,"first");b.create("div",{class:"Global_Images icon16x16 icon_Help_16x16",title:d.helpTooltip},e);this.helpIcon=e},createHelpIconByTopic:function(a,b){a?this.helpTopic=a:a=this.helpTopic;var c=Sage.Link.getHelpUrlTarget(),d=Sage.Link.getHelpUrl(a,b);this.createHelpIcon(d,c)},destroy:function(){b.destroy(this.helpIcon),this.inherited(arguments)},_setHelpTopicAttr:function(a){if(this.helpTopic=a,this.helpIcon){var b=Sage.Link.getHelpUrl(a);c.set(this.helpIcon,"href",b)}else this.createHelpIconByTopic(a)},_getHelpTopicAttr:function(){return this.helpTopic}})})},"Sage/Services/ClientContextService":function(){define(["dojo/_base/declare"],function(a){return a("Sage.Services.ClientContextService",null,{contextDataFieldId:!1,_items:[],_watches:[],constructor:function(a){dojo.mixin(this,a),this.load()},_toItemLiteral:function(a,b){var c={};return c.itemKey=a,c.itemVal=b,c},_indexOf:function(a){for(var b=0;b<this._items.length;b++)if(this._items[b].itemKey==a)return b;return-1},_indexOfNoCase:function(a){for(var b=0;b<this._items.length;b++)if(this._items[b].itemKey.toUpperCase()==a.toUpperCase())return b;return-1},_throwKeyNotFound:function(a){throw"Entry Not Found: "+a},_throwDuplicateKey:function(a){throw"Entry Already Exists: "+a},add:function(a,b){if(-1===this._indexOf(a)){var c=this._toItemLiteral(a,b);this._items.push(c),this.save()}else this._throwDuplicateKey(a)},remove:function(a){var b=this._indexOf(a)
;-1!==b&&(this._items.splice(b,1),this.save())},setValue:function(a,b){var c=this._indexOf(a);-1!==c?(this._items[c].itemVal=b,this.save()):this._throwKeyNotFound(a)},getValue:function(a){var b=this._indexOf(a);if(-1!==b)return decodeURIComponent(this._items[b].itemVal);this._throwKeyNotFound(a)},getValueEx:function(a,b){var c;if(-1!==(c=b?this._indexOfNoCase(a):this._indexOf(a)))return decodeURIComponent(this._items[c].itemVal);this._throwKeyNotFound(a)},clear:function(){this._items=[],this.save()},containsKey:function(a){return-1!==this._indexOf(a)},containsKeyEx:function(a,b){return b?-1!==this._indexOfNoCase(a):-1!==this._indexOf(a)},getCount:function(){return this._items.length},hasKeys:function(){return 0===this._items.length},getKeys:function(){var a,b=[];for(a=0;a<this._items.length;a++)b.push(this._items[a].itemKey);return b},valueAt:function(a){return this._items[a]?decodeURIComponent(this._items[a].itemVal):null},keyAt:function(a){return this.load(),this._items[a]?this._items[a].itemKey:null},getValues:function(){var a,b=[];for(a=0;a<this._items.length;a++)b.push(decodeURIComponent(this._items[a].itemVal));return b},save:function(a){var b=document.getElementById(this.contextDataFieldId);b?b.value=this.toString():alert("can't find context data field")},load:function(){var a=document.getElementById(this.contextDataFieldId);a&&a.value&&this.fromString(a.value)},toString:function(){var a,b="";for(a=0;a<this._items.length;a++)b+=this._items[a].itemKey+"="+encodeURIComponent(this._items[a].itemVal),a!==this._items.length-1&&(b+="&");return b},fromString:function(a){if(this._items=[],""!==a){var b,c=a.split("&");for(b=0;b<c.length;b++){var d=c[b].split("=");this._items.push(this._toItemLiteral(d[0],decodeURIComponent(d[1])))}}this.save()}})})},"Sage/Services/ClientEntityContext":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-style","Sage/Utility"],function(a,b,c,d){var e=a("Sage.Services.ClientEntityContext",null,{hasClearListener:!1,tempContext:!1,constructor:function(a){this.inherited(arguments),dojo.mixin(this,a),this.emptyContext={EntityId:"",EntityType:"",Description:"",EntityTableName:""}},getContext:function(){if(this.tempContext)return this.tempContext;if(Sage.Data&&Sage.Data.EntityContextStore){var a=Sage.Data.EntityContextStore;for(var b in a)a.hasOwnProperty(b)&&(a[b]=d.htmlDecode(a[b]));return Sage.Data.EntityContextStore}return this.emptyContext},setContext:function(a){Sage.Data.EntityContextStore=dojo.mixin(this.emptyContext,a),this.onEntityContextChanged(Sage.Data.EntityContextStore)},setTemporaryContext:function(a){this.tempContext=a},clearTemporaryContext:function(){this.tempContext=!1},navigateSLXGroupEntity:function(a,d,e){if(Sage.Services){var f=Sage.Services.getService("ClientBindingManagerService");if(f&&!f.canChangeEntityContext())return!1;var g=b.byId("loader");g&&(c.set(g,"display","block"),c.set(g,"opacity",.75));var h=Sage.Services.getService("ClientContextService");h.containsKey("ClientEntityId")?h.setValue("ClientEntityId",a):h.add("ClientEntityId",a),d=d||Sage.Data.EntityContextStore.EntityId,h.containsKey("PreviousEntityId")?h.setValue("PreviousEntityId",d):h.add("PreviousEntityId",d),e&&(h.containsKey("ClientEntityPosition")?h.setValue("ClientEntityPosition",e):h.add("ClientEntityPosition",e)),this.hasClearListener||(Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function(){if(Sage.Services){var a=Sage.Services.getService("ClientContextService");a.containsKey("PreviousEntityId")&&a.remove("PreviousEntityId")}var d=b.byId("loader");d&&(c.set(d,"display","none"),c.set(d,"opacity",0))}),this.hasClearListener=!0),Sage.Data.EntityContextStore.EntityId=a,Sage.Data.EntityContextStore.Description=""}if(window.TabControl){var i=TabControl.getState();i&&(i.clearUpdatedTabs(),TabControl.updateStateProxy())}return __doPostBack("MainContent",""),!0},onEntityContextChanged:function(a){}});return Sage.Services.hasService("ClientEntityContext")||Sage.Services.addService("ClientEntityContext",new Sage.Services.ClientEntityContext),e})},"Sage/Services/LocalStorageService":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare","icrm-js-services"],function(a,b,c){var d={};c&&c.CachingService&&(d=c.CachingService);var e=b("Sage.Services.LocalStorageService",[d],{constructor:function(){"function"==typeof this.setCacheStorage&&this.setCacheStorage(localStorage)}});return Sage.Services.hasService("LocalStorage")||Sage.Services.addService("LocalStorage",new Sage.Services.LocalStorageService),e})},"icrm-js-services/icrm-js-services":function(){!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.ICRMServicesSDK=b():a.ICRMServicesSDK=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=6)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1);Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return d[a]}})});var e=c(2);Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}})});var f=c(3);Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}})});var g=c(4);Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return g[a]}})})},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f={MissingRequiredFunctionalityError:"The store provided was not compatible with the generic storage service. the store needs to have the following methods methods: getItem, setItem, removeItem.",NoInputNothingSetWarning:"Nothing was set, input was null.",NamespaceAndNameParameterError:"namespaceOrKey is required to be a string value.",CannotRemoveNoItemForLanguageWarning:"Item missing for the language"},g=b.CachingServiceMessages={constructorError:f.MissingRequiredFunctionalityError,setCacheStorageError:f.MissingRequiredFunctionalityError,setCacheStorageWarning:f.NoInputNothingSetWarning,getItemError:f.NamespaceAndNameParameterError,setItemError:f.NamespaceAndNameParameterError,removeItemError:f.NamespaceAndNameParameterError,removeMissingItemWarning:f.CannotRemoveNoItemForLanguageWarning},h=b.UnitOfTime={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6};b.CachingService=function(){function a(b,c,e){d(this,a),this.setCacheStorage(b),this.seed=1,this.lifespan=c||5,this.lifespanUnits=e||h.DAY}return e(a,[{key:"setCacheStorage",value:function(a){if(a){if("function"!=typeof a.getItem||"function"!=typeof a.setItem||"function"!=typeof a.removeItem)throw new Error(g.setCacheStorageError);this._cacheStorage=a}}},{key:"getCacheStorage",value:function(){return this._cacheStorage}},{key:"getItem",value:function(a,b,c){switch(this.convertArgumentsToBitMap(a,b,c)){case 7:var d=this.addAndGrabNamespaceKey(a,b),e=this._cacheStorage.getItem(d),f=e?JSON.parse(e)||e:null;return f&&f.context&&f.context[c]?f.context[c]:null;case 6:var h=this.addAndGrabNamespaceKey(a,b),i=this._cacheStorage.getItem(h),j=i?JSON.parse(i)||i:null;return j&&j.data?j.data:null;case 4:return this._cacheStorage.getItem(a);default:throw new Error(g.removeItemError)}}},{key:"setItem",value:function(a,b,c,d){var e=this.convertArgumentsToBitMap(a,b,c),f=a;switch(e){case 7:f=this.addAndGrabNamespaceKey(a,b);break;case 6:f=this.addAndGrabNamespaceKey(a,b),c=null;break;case 4:c=null;break;default:throw new Error(g.removeItemError)}this.writeData(f,d,c)}},{key:"writeData",value:function(a,b,c){var d=this._cacheStorage.getItem(a),e=c?{context:{}}:{create:this.timeStamp(),expires:this.expiresStamp()};c&&(e.context[c+"@"]=this.timeStamp(),e.context[c+"!"]=this.expiresStamp()),d&&(e=JSON.parse(d)),c?e.context[c]=b:e.data=b,this._cacheStorage.setItem(a,JSON.stringify(e))}},{key:"removeItem",value:function(a,b,c){switch(this.convertArgumentsToBitMap(a,b,c)){case 7:var d=this._cacheStorage.getItem(a);if(d){var e=JSON.parse(d);e.expires&&e.expires<this.timeStamp()?this._cacheStorage.removeItem(b):(e.context&&delete e.context[c],this._cacheStorage.setItem(b,JSON.stringify(e)))}break;case 6:var f=this._cacheStorage.getItem(a);if(f){var h=JSON.parse(f);if(h&&h.keys){for(var i=0;i<h.keys.length;i++){var j=h.keys[i];j&&j.name===b&&(null!=this._cacheStorage.getItem(j.id)&&this._cacheStorage.removeItem(j.id),h.keys.splice(i,1))}this._cacheStorage.setItem(a,JSON.stringify(h))}}break;case 4:var k=this.getNamespaceKeys(a);if(k)for(var l=0;l<k.length;l++){var m=k[l];m&&m.id&&this._cacheStorage.getItem(m.id)&&this._cacheStorage.removeItem(m.id)}this._cacheStorage.removeItem(a);break;default:throw new Error(g.removeItemError)}}},{key:"convertArgumentsToBitMap",value:function(a,b,c){var d="string"==typeof a?1:0;if(d<<=1,d|="string"==typeof b?1:0,d<<=1,(d|="string"==typeof c?1:0)<=3)throw new Error(g.removeItemError);if(5===d)throw new Error(g.removeItemError);return d}},{key:"timeStamp",value:function(){var a=new Date;return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}},{key:"expiresStamp",value:function(){var a=new Date(this.timeStamp());switch(this.lifespanUnits){case h.YEAR:return a.setYear(a.getUTCFullYear()+this.lifespan);case h.MONTH:return a.setYear(a.getUTCMonth()+this.lifespan);case h.DAY:return a.setYear(a.getUTCDate()+this.lifespan);case h.HOUR:return a.setYear(a.getUTCHours()+this.lifespan);case h.MINUTE:return a.setYear(a.getUTCMinutes()+this.lifespan);case h.SECOND:return a.setYear(a.getUTCSeconds()+this.lifespan);case h.MILLISECOND:return a.setYear(a.getUTCMilliseconds()+this.lifespan);default:return a}}},{key:"uniqueLocalID",value:function(){var a=Date.now();return a<=this.seed?a=++this.seed:this.seed=a,a}},{key:"getNamespaceKeys",value:function(a){var b=this._cacheStorage.getItem(a);return JSON.parse(b||"{}").keys||null}},{key:"addAndGrabNamespaceKey",value:function(a,b){var c=this.getNamespaceKeys(a),d=null;if(c){var e=c.filter(function(a){return a.name===b});e&&e[0]&&e[0].id&&(d=e[0].id)}else c=[];return null===d&&(d=this.uniqueLocalID(),c.push({name:b,id:d}),this._cacheStorage.setItem(a,JSON.stringify({keys:c}))),d}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0}),b.CultureService=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(5);b.CultureService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d(this,a),this.cache=b,this.activeTag="ActiveCodes",this.allTag="AllCodes",this.nameSpace="CultureCodes",this.neutralTag="NeutralCodes",this.regionTag="RegionCodes"}return e(a,[{key:"getAllCodes",value:function(a,b){this.getFromCache(this.allTag,a,b)}},{key:"getNeutralCodes",value:function(a,b){this.getFromCache(this.neutralTag,a,b)}},{key:"getRegionCodes",value:function(a,b){this.getFromCache(this.regionTag,a,b)}},{key:"getActiveCodes",value:function(a,b){this.getFromCache(this.activeTag,a,b)}},{key:"getFromCache",value:function(a,b,c){var d=this.cache.getItem(this.nameSpace,a)||null;if(!(c||{}).onSuccess)throw new Error("A callback function of onSuccess is expected by the method. Without it no data can be accessed.");d?this.onSuccess(d,a,this,c.onSuccess):this.createQueryForCodes(b,a,c)}},{key:"createQueryForCodes",value:function(a,b,c){var d=this;if(null===a||void 0===a||(c||{}).Test)d.onSuccess((new f.MockSDataCulture).makeRequest(),b,d,(c||{}).onSuccess);else{if(!a.read)throw new Error("The method needs to retrieve data, but the query object is missing the expected 'read' function.");a.read({async:!0,success:function(a){d.onSuccess(a,b,d,(c||{}).onSuccess)},failure:(c||{}).onFail||function(a){},scope:(c||{}).scope||d})}}},{key:"onSuccess",value:function(a,b,c,d){var e=a.$resources?a.$resources[0]:a,f=[];if(e.response){var g=e.response;if(g.allLanguages){var h=this.setAndGetFromCache(c.cache,c.nameSpace,c.allTag,g.allLanguages,c.allTag===b);f=null===h?f:h}if(g.neutralLanguages){var i=this.setAndGetFromCache(c.cache,c.nameSpace,c.neutralTag,g.neutralLanguages,c.neutralTag===b);f=null===i?f:i}if(g.regionLanguage){var j=this.setAndGetFromCache(c.cache,c.nameSpace,c.regionTag,g.regionLanguage,c.regionTag===b);f=null===j?f:j}if(g.activeLanguages){var k=this.setAndGetFromCache(c.cache,c.nameSpace,c.activeTag,g.activeLanguages,c.activeTag===b);f=null===k?f:k}}else f=e;d&&d("string"==typeof f?JSON.parse(f):f)}},{key:"setAndGetFromCache",value:function(a,b,c,d,e){return a.setItem(b,c,null,d),e?a.getItem(b,c)||[]:null}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.MingleService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,a),this.accessToken=b.accessToken||"",this.application=b.application||{},this.location=b.location||window.location,this.mingleConfig=b.mingleConfig||{},this.redirectAction=b.redirectAction||function(a){this.location.href=a}.bind(this),this.responseType=b.responseType||"token"}return e(a,[{key:"redirectToMingle",value:function(a){var b=this.mingleConfig.mingleSettings.pu+this.mingleConfig.mingleSettings.oa,c=this.mingleConfig.mingleRedirectUrl,d=this.mingleConfig.mingleSettings.ci,e=b+"?client_id="+encodeURI(d)+"&redirect_uri="+encodeURI(c)+"&response_type="+encodeURI(this.responseType)+"&state="+encodeURI(a)+"&include_granted_scopes=false";this.redirectAction(e)}},{key:"refreshAccessToken",value:function(){if(!this.application.isOnline())return void(this.application.requiresMingleRefresh=!0);var a="mingleRefresh",b="";a&&(b="/redirectTo/"+a),this.redirectToMingle(b)}},{key:"populateAccessToken",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Refreshing Ming.le token...",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ming.le",e=this.location.hash.substring(1),f=void 0;if(e&&(f=e.split("&").reduce(function(a,b){var c=b.split("=");return a[c[0]]=c[1],a},{}),f.access_token&&(this.accessToken=f.access_token,f.expires_in&&setTimeout(function(){a.add({message:c,title:d,toastTime:3e5,showProgressBar:!0}),setTimeout(function(){b.refreshAccessToken(b.mingleConfig)},3e5)},1e3*(f.expires_in-300)))),f&&(f.access_token||f.error))return f;this.redirectToMingle(e)}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.PickListService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d(this,a),this._storage=b,this._service=c,this._uri={},this._storageNameSpace="PickListData",this._storagePropertyDataTypeNameSpace="PickListData_PropertyDataType",this._storageFormDataTypeNameSpace="PickListData_FormDataType"}return e(a,[{key:"createHeader",value:function(a,b,c,d){this._notImplemented("createHeader",{header:a,callback:b,onError:c,config:d})}},{key:"createItemByHeaderID",value:function(a,b,c,d,e){this.createItemByHeaderKey(a,!0,b,c,d,e)}},{key:"createItemByHeaderName",value:function(a,b,c,d,e){this.createItemByHeaderKey(a,!1,b,c,d,e)}},{key:"createItemByHeaderKey",value:function(a,b,c,d,e,f){this._notImplemented("createItemByHeaderKey",{headerKey:a,isId:b,item:c,callback:d,onError:e,config:f})}},{key:"createItemsByHeaderID",value:function(a,b,c,d,e){this.createItemsByHeaderKey(a,!0,b,c,d,e)}},{key:"createItemsByHeaderName",value:function(a,b,c,d,e){this.createItemsByHeaderKey(a,!1,b,c,d,e)}},{key:"createItemsByHeaderKey",value:function(a,b,c,d,e,f){this._notImplemented("createItemsByHeaderKey",{headerKey:a,isId:b,itemArr:c,callback:d,onError:e,config:f})}},{key:"getFirstByName",value:function(a,b,c,d){return this.getFirstByKey(a,!1,b,c,d)}},{key:"getFirstById",value:function(a,b,c,d){return this.getFirstByKey(a,!1,b,c,d)}},{key:"getFirstByKey",value:function(a,b,c,d){var e=this,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};f.language=f.language||this._getBrowserLanguage(!1);var g="boolean"==typeof f.useCache&&f.useCache,h=g?this._storage.getItem(this._storageNameSpace,a,f.context||null):null;if(!h){var i=this._buildOutOptions(f,!0);return i.where=this._isNameOrID(b,a),{options:i,handlers:{async:"boolean"!=typeof f.async||f.async,success:function(b){b&&b.$resources&&b.$resources.length>0&&(b=b.$resources[0]),e._storage.setItem(e._storageNameSpace,a,f.context||null,b),"function"==typeof c&&c(b)},failure:function(a){"function"==typeof d&&d(a)},config:{passedIn:f}}}}c(h)}},{key:"getAllByName",value:function(a,b,c,d){this.getAllByKey(a,!1,b,c,d)}},{key:"getAllById",value:function(a,b,c,d){this.getAllByKey(a,!0,b,c,d)}},{key:"getAllByKey",value:function(a,b,c,d,e){this._notImplemented("getAllByKey",{keyArr:a,isId:b,callback:c,onError:d,config:e})}},{key:"update",value:function(a,b,c,d){this._notImplemented("update",{pickList:a,callback:b,onError:c,config:d})}},{key:"deleteByName",value:function(a,b,c,d){this.deleteByKey(a,!1,b,c,d)}},{key:"deleteById",value:function(a,b,c,d){this.deleteByKey(a,!0,b,c,d)}},{key:"deleteByKey",value:function(a,b,c,d,e){this._notImplemented("deleteByKey",{key:a,isId:b,callback:c,onError:d,config:e})}},{key:"deleteItemByHeaderName",value:function(a,b,c,d,e,f){this.deleteItemByHeaderKey(a,!1,b,c,d,e,f)}},{key:"deleteItemByHeaderId",value:function(a,b,c,d,e,f){this.deleteItemByHeaderKey(a,!0,b,c,d,e,f)}},{key:"deleteItemByHeaderKey",value:function(a,b,c,d,e,f,g){this._notImplemented("deleteItemByHeaderKey",{key:a,isId:b,code:c,language:d,callback:e,onError:f,config:g})}},{key:"deleteItemById",value:function(a,b,c,d){this._notImplemented("deleteItemById",{id:a,callback:b,onError:c,config:d})}},{key:"getPickListDataTypeDataFromEntityProperty",value:function(a,b,c,d,e){var f=this;e.language=e.language||this._getBrowserLanguage(!1);var g=a+"_"+b+"_"+e.language,h=this._storage.getItem(this._storagePropertyDataTypeNameSpace,g);if(!h)return{options:{select:["DataTypeData"],resourceKind:"entities('"+a+"')/properties",service:"metadata",language:e.language||this._getBrowserLanguage(!1),filterByLanguage:e.filterByLanguage||!1,include:["DataTypeData"],where:"propertyName eq '"+b+"'"},handlers:{success:function(a){a&&a.$resources&&a.$resources.length>0&&(a=a.$resources[0]),f.parent._storage.setItem(f.parent._storageDataTypeNameSpace,g,a),"function"==typeof c&&c(a)},failure:function(a){"function"==typeof d&&d(a)},config:{parent:this,passedIn:e}}};c(h)}},{key:"getPickListDataTypeDataFromForm",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments[2],d=this,e=arguments[3],f=arguments[4];f.language=f.language||this._getBrowserLanguage(!1);var g=b?a+"_"+b+"_"+f.language:a+"_"+f.language,h=this._storage.getItem(this._storageFormDataTypeNameSpace,g);if(!h)return{options:{resourceKind:"forms('"+a+"')",service:"metadata",language:f.language||this._getBrowserLanguage(!1)},handlers:{success:function(a){a&&a.$resources&&a.$resources.length>0&&(a=a.$resources[0]),d.parent._storage.setItem(d.parent._storageFormDataTypeNameSpace,g,a),"function"==typeof c&&c(a)},failure:function(a){"function"==typeof e&&e(a)},config:{parent:this,passedIn:f}}};c(h)}},{key:"clearCache",value:function(a,b){this._storage.getItem(this._storageNameSpace,a)&&this._storage.removeItem(this._storageNameSpace,a)}},{key:"deepClone",value:function(){return JSON.parse(JSON.stringify(this))}},{key:"setUpRequest",value:function(a,b){return a&&b&&"function"==typeof a.setResourceKind&&"function"==typeof a.setQueryArg&&(a.setResourceKind(b.resourceKind),b.where&&b.where.length>0&&a.setQueryArg("where",b.where),b.select&&b.select.length>0&&a.setQueryArg("select",b.select.join(",")),b.include&&b.include.length>0&&a.setQueryArg("include",b.include.join(",")),b.language&&a.setQueryArg("language",b.language),b.filter&&a.setQueryArg("filter",b.filter),void 0!==b.filterByLanguage&&a.setQueryArg("filterByLanguage",b.filterByLanguage),b.storageMode&&a.setQueryArg("storageMode",b.storageMode)),a}},{key:"_buildHash",value:function(a){this._notImplemented("_buildHash",{results:a})}},{key:"_returnOption",value:function(a,b,c,d){this._notImplemented("_returnOption",{optionName:a,callback:b,onError:c,config:d})}},{key:"_isNameOrID",value:function(a,b){if("boolean"==typeof a&&"string"==typeof b)return a?"id eq '"+b+"'":"name eq '"+b+"'";throw new Error("isId needs to be a boolean; key needs to be a string")}},{key:"_buildOutOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c={select:["Id","name","allowMultiples","valueMustExist","required","alphaSorted","noneEditable","defaultLanguage","defaultCode","modifyDate"],resourceKind:"picklists",service:this._service,language:a.language||this._getBrowserLanguage(!1)};return b&&(c.include=["items"],c.select.push("items/text"),c.select.push("items/code"),c.select.push("items/number"),c.select.push("items/filter"),c.select.push("items/languageCode")),a.pickListServiceOptions&&(null!==a.pickListServiceOptions.filter&&"string"==typeof a.pickListServiceOptions.filter&&(c.filter=a.pickListServiceOptions.filter),null!==a.pickListServiceOptions.storageMode&&"string"==typeof a.pickListServiceOptions.storageMode&&(c.storageMode=a.pickListServiceOptions.storageMode),null!==a.pickListServiceOptions.filterByLanguage&&("boolean"==typeof a.pickListServiceOptions.filterByLanguage?c.filterByLanguage=a.pickListServiceOptions.filterByLanguage:"string"==typeof a.pickListServiceOptions.filterByLanguage&&(c.filterByLanguage="true"===a.pickListServiceOptions.filterByLanguage.toLowerCase()))),c}},{key:"_breakDownALanguageCodeIntoFallBackParts",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=a.split("-"),c=[],d=0;d<b.length;d++){for(var e="",f=0;f<=d;f++)e=e+(e.length>0?"_":"")+b[f];c.push(e)}return c}},{key:"_getBrowserLanguage",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._getLanguageFromCookie(),c=b||this._getFromLanguageFromNavigator();if(c||(c="en-us"),a){return this._breakDownALanguageCodeIntoFallBackParts(c)}return c}},{key:"_getFromLanguageFromNavigator",value:function(){return"undefined"!=typeof navigator?navigator.userLanguage||navigator.browserLanguage||navigator.language:null}},{key:"_getLanguageFromCookie",value:function(){var a=null,b="SLXLanguageSetting";if("undefined"!=typeof window&&window.document&&window.document.cookie)if("function"==typeof window.document.cookie.getCookie)a=window.document.cookie.getCookie(b);else{var c=window.document.cookie.split(";");c.forEach(function(c){c=c.trim(),c.startsWith(b)&&(c=c.replace(""+b,"").trim(),c=c.replace("=","").trim(),a=c)},this)}return a}},{key:"_notImplemented",value:function(a,b){throw new Error("%s with parameters %o is not implemented",a,b)}}]),a}()},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.MockSDataCulture=function(){function a(){d(this,a),this.queryResult={$httpStatus:200,$descriptor:"",request:{},response:{neutralLanguages:[{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e [ja]",CultureCode:"ja"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) \xe8\u02c6\u0160\xe7\u2030\u02c6 [zh-cht]",CultureCode:"zh-cht"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) [zh-hant]",CultureCode:"zh-hant"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) \xe6\u2014\xa7\xe7\u2030\u02c6 [zh-chs]",CultureCode:"zh-chs"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) [zh-hans]",CultureCode:"zh-hans"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021 [zh]",CultureCode:"zh"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 [ko]",CultureCode:"ko"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 [ii]",CultureCode:"ii"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a [am]",CultureCode:"am"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 [iu-cans]",CultureCode:"iu-cans"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 [km]",CultureCode:"km"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 [lo]",CultureCode:"lo"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a [bo]",CultureCode:"bo"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 [mn-mong]",CultureCode:"mn-mong"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 [th]",CultureCode:"th"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd [si]",CultureCode:"si"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a [ml]",CultureCode:"ml"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 [kn]",CultureCode:"kn"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 [te]",CultureCode:"te"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d [ta]",CultureCode:"ta"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 [or]",CultureCode:"or"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac [gu]",CultureCode:"gu"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac [pa]",CultureCode:"pa"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe [bn]",CultureCode:"bn"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe [as]",CultureCode:"as"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac [hi]",CultureCode:"hi"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 [sa]",CultureCode:"sa"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac [mr]",CultureCode:"mr"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac [ne]",CultureCode:"ne"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac [kok]",CultureCode:"kok"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 [dv]",CultureCode:"dv"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 [syr]",CultureCode:"syr"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 [ug]",CultureCode:"ug"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 [fa]",CultureCode:"fa"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 [prs]",CultureCode:"prs"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 [ps]",CultureCode:"ps"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 [ar]",CultureCode:"ar"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 [ur]",CultureCode:"ur"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa [he]",CultureCode:"he"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc [ka]",CultureCode:"ka"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 [hy]",CultureCode:"hy"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 [uk]",CultureCode:"uk"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba [uz-cyrl]",CultureCode:"uz-cyrl"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg-cyrl]",CultureCode:"tg-cyrl"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg]",CultureCode:"tg"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac [tt]",CultureCode:"tt"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 [sr-cyrl]",CultureCode:"sr-cyrl"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 [sah]",CultureCode:"sah"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 [ru]",CultureCode:"ru"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn-cyrl]",CultureCode:"mn-cyrl"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn]",CultureCode:"mn"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba [mk]",CultureCode:"mk"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a [kk]",CultureCode:"kk"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 [ky]",CultureCode:"ky"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 [bg]",CultureCode:"bg"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 [bs-cyrl]",CultureCode:"bs-cyrl"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 [be]",CultureCode:"be"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a [ba]",CultureCode:"ba"},{DisplayText:"\xd0\x90\xd0\xb7\xd3\u2122\xd1\u20ac\xd0\xb1\xd0\xb0\xd1\u02dc\xd2\xb9\xd0\xb0\xd0\xbd\xc2 \xd0\xb4\xd0\xb8\xd0\xbb\xd0\xb8 [az-cyrl]",CultureCode:"az-cyrl"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac [el]",CultureCode:"el"},{DisplayText:"Yoruba [yo]",CultureCode:"yo"},{DisplayText:"Wolof [wo]",CultureCode:"wo"},{DisplayText:"U'zbek [uz-latn]",CultureCode:"uz-latn"},{DisplayText:"U'zbek [uz]",CultureCode:"uz"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e [tk]",CultureCode:"tk"},{DisplayText:"T\xc3\xbcrk\xc3\xa7e [tr]",CultureCode:"tr"},{
DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t [vi]",CultureCode:"vi"},{DisplayText:"Tamazight [tzm-latn]",CultureCode:"tzm-latn"},{DisplayText:"Tamazight [tzm]",CultureCode:"tzm"},{DisplayText:"svenska [sv]",CultureCode:"sv"},{DisplayText:"suomi [fi]",CultureCode:"fi"},{DisplayText:"srpski [sr-latn]",CultureCode:"sr-latn"},{DisplayText:"srpski [sr]",CultureCode:"sr"},{DisplayText:"slovenski [sl]",CultureCode:"sl"},{DisplayText:"sloven\xc4\x8dina [sk]",CultureCode:"sk"},{DisplayText:"shqipe [sq]",CultureCode:"sq"},{DisplayText:"Setswana [tn]",CultureCode:"tn"},{DisplayText:"Sesotho sa Leboa [nso]",CultureCode:"nso"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 [smn]",CultureCode:"smn"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll [sms]",CultureCode:"sms"},{DisplayText:"runasimi [quz]",CultureCode:"quz"},{DisplayText:"Rumantsch [rm]",CultureCode:"rm"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 [ro]",CultureCode:"ro"},{DisplayText:"Reo M\xc4\x81ori [mi]",CultureCode:"mi"},{DisplayText:"Portugu\xc3\xaas [pt]",CultureCode:"pt"},{DisplayText:"polski [pl]",CultureCode:"pl"},{DisplayText:"Occitan [oc]",CultureCode:"oc"},{DisplayText:"norsk [no]",CultureCode:"no"},{DisplayText:"norsk (nynorsk) [nn]",CultureCode:"nn"},{DisplayText:"norsk (bokm\xc3\xa5l) [nb]",CultureCode:"nb"},{DisplayText:"Nederlands [nl]",CultureCode:"nl"},{DisplayText:"Mapudungun [arn]",CultureCode:"arn"},{DisplayText:"Malti [mt]",CultureCode:"mt"},{DisplayText:"magyar [hu]",CultureCode:"hu"},{DisplayText:"lietuvi\xc5\xb3 [lt]",CultureCode:"lt"},{DisplayText:"L\xc3\xabtzebuergesch [lb]",CultureCode:"lb"},{DisplayText:"latvie\xc5\xa1u [lv]",CultureCode:"lv"},{DisplayText:"Kiswahili [sw]",CultureCode:"sw"},{DisplayText:"Kinyarwanda [rw]",CultureCode:"rw"},{DisplayText:"K'iche [qut]",CultureCode:"qut"},{DisplayText:"Kanien'k\xc3\xa9ha [moh]",CultureCode:"moh"},{DisplayText:"kalaallisut [kl]",CultureCode:"kl"},{DisplayText:"julevus\xc3\xa1megiella [smj]",CultureCode:"smj"},{DisplayText:"italiano [it]",CultureCode:"it"},{DisplayText:"\xc3\xadslenska [is]",CultureCode:"is"},{DisplayText:"isiZulu [zu]",CultureCode:"zu"},{DisplayText:"isiXhosa [xh]",CultureCode:"xh"},{DisplayText:"Invariant Language (Invariant Country) []",CultureCode:""},{DisplayText:"Inuktitut [iu-latn]",CultureCode:"iu-latn"},{DisplayText:"Inuktitut [iu]",CultureCode:"iu"},{DisplayText:"Igbo [ig]",CultureCode:"ig"},{DisplayText:"hrvatski [hr]",CultureCode:"hr"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina [hsb]",CultureCode:"hsb"},{DisplayText:"Hausa [ha-latn]",CultureCode:"ha-latn"},{DisplayText:"Hausa [ha]",CultureCode:"ha"},{DisplayText:"galego [gl]",CultureCode:"gl"},{DisplayText:"G\xc3 idhlig [gd]",CultureCode:"gd"},{DisplayText:"Gaeilge [ga]",CultureCode:"ga"},{DisplayText:"Frysk [fy]",CultureCode:"fy"},{DisplayText:"fran\xc3\xa7ais [fr]",CultureCode:"fr"},{DisplayText:"f\xc3\xb8royskt [fo]",CultureCode:"fo"},{DisplayText:"Filipino [fil]",CultureCode:"fil"},{DisplayText:"euskara [eu]",CultureCode:"eu"},{DisplayText:"espa\xc3\xb1ol [es]",CultureCode:"es"},{DisplayText:"English [en]",CultureCode:"en"},{DisplayText:"Els\xc3\xa4ssisch [gsw]",CultureCode:"gsw"},{DisplayText:"eesti [et]",CultureCode:"et"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina [dsb]",CultureCode:"dsb"},{DisplayText:"Deutsch [de]",CultureCode:"de"},{DisplayText:"davvis\xc3\xa1megiella [se]",CultureCode:"se"},{DisplayText:"dansk [da]",CultureCode:"da"},{DisplayText:"Cymraeg [cy]",CultureCode:"cy"},{DisplayText:"Corsu [co]",CultureCode:"co"},{DisplayText:"\xc4\x8de\xc5\xa1tina [cs]",CultureCode:"cs"},{DisplayText:"catal\xc3  [ca]",CultureCode:"ca"},{DisplayText:"brezhoneg [br]",CultureCode:"br"},{DisplayText:"bosanski [bs-latn]",CultureCode:"bs-latn"},{DisplayText:"bosanski [bs]",CultureCode:"bs"},{DisplayText:"Bahasa Melayu [ms]",CultureCode:"ms"},{DisplayText:"Bahasa Indonesia [id]",CultureCode:"id"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az-latn]",CultureCode:"az-latn"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az]",CultureCode:"az"},{DisplayText:"Afrikaans [af]",CultureCode:"af"},{DisplayText:"\xc3\xa5arjelsaemiengiele [sma]",CultureCode:"sma"}],allLanguages:[{DisplayText:"\xc3\xa5arjelsaemiengiele (N\xc3\xb6\xc3\xb6rje) [sma-no]",CultureCode:"sma-no"},{DisplayText:"\xc3\xa5arjelsaemiengiele (Sveerje) [sma-se]",CultureCode:"sma-se"},{DisplayText:"\xc3\xa5arjelsaemiengiele [sma]",CultureCode:"sma"},{DisplayText:"Afrikaans (Suid Afrika) [af-za]",CultureCode:"af-za"},{DisplayText:"Afrikaans [af]",CultureCode:"af"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az]",CultureCode:"az"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az-latn]",CultureCode:"az-latn"},{DisplayText:"Bahasa Indonesia (Indonesia) [id-id]",CultureCode:"id-id"},{DisplayText:"Bahasa Indonesia [id]",CultureCode:"id"},{DisplayText:"Bahasa Melayu (Brunei Darussalam) [ms-bn]",CultureCode:"ms-bn"},{DisplayText:"Bahasa Melayu (Malaysia) [ms-my]",CultureCode:"ms-my"},{DisplayText:"Bahasa Melayu [ms]",CultureCode:"ms"},{DisplayText:"bosanski (Bosna i Hercegovina) [bs-latn-ba]",CultureCode:"bs-latn-ba"},{DisplayText:"bosanski [bs]",CultureCode:"bs"},{DisplayText:"bosanski [bs-latn]",CultureCode:"bs-latn"},{DisplayText:"brezhoneg (Fra\xc3\xb1s) [br-fr]",CultureCode:"br-fr"},{DisplayText:"brezhoneg [br]",CultureCode:"br"},{DisplayText:"catal\xc3  (catal\xc3 ) [ca-es]",CultureCode:"ca-es"},{DisplayText:"catal\xc3  [ca]",CultureCode:"ca"},{DisplayText:"\xc4\x8de\xc5\xa1tina (\xc4\u0152esk\xc3\xa1\xc2 republika) [cs-cz]",CultureCode:"cs-cz"},{DisplayText:"\xc4\x8de\xc5\xa1tina [cs]",CultureCode:"cs"},{DisplayText:"Corsu (France) [co-fr]",CultureCode:"co-fr"},{DisplayText:"Corsu [co]",CultureCode:"co"},{DisplayText:"Cymraeg (y Deyrnas Unedig) [cy-gb]",CultureCode:"cy-gb"},{DisplayText:"Cymraeg [cy]",CultureCode:"cy"},{DisplayText:"dansk (Danmark) [da-dk]",CultureCode:"da-dk"},{DisplayText:"dansk [da]",CultureCode:"da"},{DisplayText:"davvis\xc3\xa1megiella (Norga) [se-no]",CultureCode:"se-no"},{DisplayText:"davvis\xc3\xa1megiella (Ruo\xc5\xa7\xc5\xa7a) [se-se]",CultureCode:"se-se"},{DisplayText:"davvis\xc3\xa1megiella (Suopma) [se-fi]",CultureCode:"se-fi"},{DisplayText:"davvis\xc3\xa1megiella [se]",CultureCode:"se"},{DisplayText:"Deutsch (Deutschland) [de-de]",CultureCode:"de-de"},{DisplayText:"Deutsch (Liechtenstein) [de-li]",CultureCode:"de-li"},{DisplayText:"Deutsch (Luxemburg) [de-lu]",CultureCode:"de-lu"},{DisplayText:"Deutsch (\xc3\u2013sterreich) [de-at]",CultureCode:"de-at"},{DisplayText:"Deutsch (Schweiz) [de-ch]",CultureCode:"de-ch"},{DisplayText:"Deutsch [de]",CultureCode:"de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina (Nimska) [dsb-de]",CultureCode:"dsb-de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina [dsb]",CultureCode:"dsb"},{DisplayText:"eesti (Eesti) [et-ee]",CultureCode:"et-ee"},{DisplayText:"eesti [et]",CultureCode:"et"},{DisplayText:"Els\xc3\xa4ssisch (Fr\xc3 nkrisch) [gsw-fr]",CultureCode:"gsw-fr"},{DisplayText:"Els\xc3\xa4ssisch [gsw]",CultureCode:"gsw"},{DisplayText:"English (Australia) [en-au]",CultureCode:"en-au"},{DisplayText:"English (Belize) [en-bz]",CultureCode:"en-bz"},{DisplayText:"English (Canada) [en-ca]",CultureCode:"en-ca"},{DisplayText:"English (Caribbean) [en-029]",CultureCode:"en-029"},{DisplayText:"English (India) [en-in]",CultureCode:"en-in"},{DisplayText:"English (Ireland) [en-ie]",CultureCode:"en-ie"},{DisplayText:"English (Jamaica) [en-jm]",CultureCode:"en-jm"},{DisplayText:"English (Malaysia) [en-my]",CultureCode:"en-my"},{DisplayText:"English (New Zealand) [en-nz]",CultureCode:"en-nz"},{DisplayText:"English (Philippines) [en-ph]",CultureCode:"en-ph"},{DisplayText:"English (Singapore) [en-sg]",CultureCode:"en-sg"},{DisplayText:"English (South Africa) [en-za]",CultureCode:"en-za"},{DisplayText:"English (Trinidad y Tobago) [en-tt]",CultureCode:"en-tt"},{DisplayText:"English (United Kingdom) [en-gb]",CultureCode:"en-gb"},{DisplayText:"English (United States) [en-us]",CultureCode:"en-us"},{DisplayText:"English (Zimbabwe) [en-zw]",CultureCode:"en-zw"},{DisplayText:"English [en]",CultureCode:"en"},{DisplayText:"Espa\xc3\xb1ol (Argentina) [es-ar]",CultureCode:"es-ar"},{DisplayText:"Espa\xc3\xb1ol (Bolivia) [es-bo]",CultureCode:"es-bo"},{DisplayText:"Espa\xc3\xb1ol (Chile) [es-cl]",CultureCode:"es-cl"},{DisplayText:"Espa\xc3\xb1ol (Colombia) [es-co]",CultureCode:"es-co"},{DisplayText:"Espa\xc3\xb1ol (Costa Rica) [es-cr]",CultureCode:"es-cr"},{DisplayText:"Espa\xc3\xb1ol (Ecuador) [es-ec]",CultureCode:"es-ec"},{DisplayText:"Espa\xc3\xb1ol (El Salvador) [es-sv]",CultureCode:"es-sv"},{DisplayText:"Espa\xc3\xb1ol (Espa\xc3\xb1a, alfabetizaci\xc3\xb3n internacional) [es-es]",CultureCode:"es-es"},{DisplayText:"Espa\xc3\xb1ol (Estados Unidos) [es-us]",CultureCode:"es-us"},{DisplayText:"Espa\xc3\xb1ol (Guatemala) [es-gt]",CultureCode:"es-gt"},{DisplayText:"Espa\xc3\xb1ol (Honduras) [es-hn]",CultureCode:"es-hn"},{DisplayText:"Espa\xc3\xb1ol (M\xc3\xa9xico) [es-mx]",CultureCode:"es-mx"},{DisplayText:"Espa\xc3\xb1ol (Nicaragua) [es-ni]",CultureCode:"es-ni"},{DisplayText:"Espa\xc3\xb1ol (Panam\xc3\xa1) [es-pa]",CultureCode:"es-pa"},{DisplayText:"Espa\xc3\xb1ol (Paraguay) [es-py]",CultureCode:"es-py"},{DisplayText:"Espa\xc3\xb1ol (Per\xc3\xba) [es-pe]",CultureCode:"es-pe"},{DisplayText:"Espa\xc3\xb1ol (Puerto Rico) [es-pr]",CultureCode:"es-pr"},{DisplayText:"Espa\xc3\xb1ol (Republica Bolivariana de Venezuela) [es-ve]",CultureCode:"es-ve"},{DisplayText:"Espa\xc3\xb1ol (Rep\xc3\xbablica Dominicana) [es-do]",CultureCode:"es-do"},{DisplayText:"Espa\xc3\xb1ol (Uruguay) [es-uy]",CultureCode:"es-uy"},{DisplayText:"espa\xc3\xb1ol [es]",CultureCode:"es"},{DisplayText:"euskara (euskara) [eu-es]",CultureCode:"eu-es"},{DisplayText:"euskara [eu]",CultureCode:"eu"},{DisplayText:"Filipino (Pilipinas) [fil-ph]",CultureCode:"fil-ph"},{DisplayText:"Filipino [fil]",CultureCode:"fil"},{DisplayText:"f\xc3\xb8royskt (F\xc3\xb8royar) [fo-fo]",CultureCode:"fo-fo"},{DisplayText:"f\xc3\xb8royskt [fo]",CultureCode:"fo"},{DisplayText:"fran\xc3\xa7ais (Belgique) [fr-be]",CultureCode:"fr-be"},{DisplayText:"fran\xc3\xa7ais (Canada) [fr-ca]",CultureCode:"fr-ca"},{DisplayText:"fran\xc3\xa7ais (France) [fr-fr]",CultureCode:"fr-fr"},{DisplayText:"fran\xc3\xa7ais (Luxembourg) [fr-lu]",CultureCode:"fr-lu"},{DisplayText:"fran\xc3\xa7ais (Principaut\xc3\xa9 de Monaco) [fr-mc]",CultureCode:"fr-mc"},{DisplayText:"fran\xc3\xa7ais (Suisse) [fr-ch]",CultureCode:"fr-ch"},{DisplayText:"fran\xc3\xa7ais [fr]",CultureCode:"fr"},{DisplayText:"Frysk (Nederl\xc3\xa2n) [fy-nl]",CultureCode:"fy-nl"},{DisplayText:"Frysk [fy]",CultureCode:"fy"},{DisplayText:"Gaeilge (\xc3\u2030ire) [ga-ie]",CultureCode:"ga-ie"},{DisplayText:"Gaeilge [ga]",CultureCode:"ga"},{DisplayText:"G\xc3 idhlig (An R\xc3\xacoghachd Aonaichte) [gd-gb]",CultureCode:"gd-gb"},{DisplayText:"G\xc3 idhlig [gd]",CultureCode:"gd"},{DisplayText:"galego (galego) [gl-es]",CultureCode:"gl-es"},{DisplayText:"galego [gl]",CultureCode:"gl"},{DisplayText:"Hausa (Nigeria) [ha-latn-ng]",CultureCode:"ha-latn-ng"},{DisplayText:"Hausa [ha]",CultureCode:"ha"},{DisplayText:"Hausa [ha-latn]",CultureCode:"ha-latn"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina (N\xc4\u203amska) [hsb-de]",CultureCode:"hsb-de"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina [hsb]",CultureCode:"hsb"},{DisplayText:"hrvatski (Bosna i Hercegovina) [hr-ba]",CultureCode:"hr-ba"},{DisplayText:"hrvatski (Hrvatska) [hr-hr]",CultureCode:"hr-hr"},{DisplayText:"hrvatski [hr]",CultureCode:"hr"},{DisplayText:"Igbo (Nigeria) [ig-ng]",CultureCode:"ig-ng"},{DisplayText:"Igbo [ig]",CultureCode:"ig"},{DisplayText:"Inuktitut (Kanatami) [iu-latn-ca]",CultureCode:"iu-latn-ca"},{DisplayText:"Inuktitut [iu]",CultureCode:"iu"},{DisplayText:"Inuktitut [iu-latn]",CultureCode:"iu-latn"},{DisplayText:"Invariant Language (Invariant Country) []",CultureCode:""},{DisplayText:"isiXhosa (uMzantsi Afrika) [xh-za]",CultureCode:"xh-za"},{DisplayText:"isiXhosa [xh]",CultureCode:"xh"},{DisplayText:"isiZulu (iNingizimu Afrika) [zu-za]",CultureCode:"zu-za"},{DisplayText:"isiZulu [zu]",CultureCode:"zu"},{DisplayText:"\xc3\xadslenska (\xc3\x8dsland) [is-is]",CultureCode:"is-is"},{DisplayText:"\xc3\xadslenska [is]",CultureCode:"is"},{DisplayText:"italiano (Italia) [it-it]",CultureCode:"it-it"},{DisplayText:"italiano (Svizzera) [it-ch]",CultureCode:"it-ch"},{DisplayText:"italiano [it]",CultureCode:"it"},{DisplayText:"julevus\xc3\xa1megiella (Svierik) [smj-se]",CultureCode:"smj-se"},{DisplayText:"julevus\xc3\xa1megiella (Vuodna) [smj-no]",CultureCode:"smj-no"},{DisplayText:"julevus\xc3\xa1megiella [smj]",CultureCode:"smj"},{DisplayText:"kalaallisut (Kalaallit Nunaat) [kl-gl]",CultureCode:"kl-gl"},{DisplayText:"kalaallisut [kl]",CultureCode:"kl"},{DisplayText:"Kanien'k\xc3\xa9ha [moh]",CultureCode:"moh"},{DisplayText:"Kanien'k\xc3\xa9ha [moh-ca]",CultureCode:"moh-ca"},{DisplayText:"K'iche (Guatemala) [qut-gt]",CultureCode:"qut-gt"},{DisplayText:"K'iche [qut]",CultureCode:"qut"},{DisplayText:"Kinyarwanda (Rwanda) [rw-rw]",CultureCode:"rw-rw"},{DisplayText:"Kinyarwanda [rw]",CultureCode:"rw"},{DisplayText:"Kiswahili (Kenya) [sw-ke]",CultureCode:"sw-ke"},{DisplayText:"Kiswahili [sw]",CultureCode:"sw"},{DisplayText:"latvie\xc5\xa1u (Latvija) [lv-lv]",CultureCode:"lv-lv"},{DisplayText:"latvie\xc5\xa1u [lv]",CultureCode:"lv"},{DisplayText:"L\xc3\xabtzebuergesch (Luxembourg) [lb-lu]",CultureCode:"lb-lu"},{DisplayText:"L\xc3\xabtzebuergesch [lb]",CultureCode:"lb"},{DisplayText:"lietuvi\xc5\xb3 (Lietuva) [lt-lt]",CultureCode:"lt-lt"},{DisplayText:"lietuvi\xc5\xb3 [lt]",CultureCode:"lt"},{DisplayText:"magyar (Magyarorsz\xc3\xa1g) [hu-hu]",CultureCode:"hu-hu"},{DisplayText:"magyar [hu]",CultureCode:"hu"},{DisplayText:"Malti (Malta) [mt-mt]",CultureCode:"mt-mt"},{DisplayText:"Malti [mt]",CultureCode:"mt"},{DisplayText:"Mapudungun (Chile) [arn-cl]",CultureCode:"arn-cl"},{DisplayText:"Mapudungun [arn]",CultureCode:"arn"},{DisplayText:"Nederlands (Belgi\xc3\xab) [nl-be]",CultureCode:"nl-be"},{DisplayText:"Nederlands (Nederland) [nl-nl]",CultureCode:"nl-nl"},{DisplayText:"Nederlands [nl]",CultureCode:"nl"},{DisplayText:"norsk (bokm\xc3\xa5l) [nb]",CultureCode:"nb"},{DisplayText:"norsk (nynorsk) [nn]",CultureCode:"nn"},{DisplayText:"norsk [no]",CultureCode:"no"},{DisplayText:"norsk, bokm\xc3\xa5l (Norge) [nb-no]",CultureCode:"nb-no"},{DisplayText:"norsk, nynorsk (Noreg) [nn-no]",CultureCode:"nn-no"},{DisplayText:"Occitan (Fran\xc3\xa7a) [oc-fr]",CultureCode:"oc-fr"},{DisplayText:"Occitan [oc]",CultureCode:"oc"},{DisplayText:"polski (Polska) [pl-pl]",CultureCode:"pl-pl"},{DisplayText:"polski [pl]",CultureCode:"pl"},{DisplayText:"Portugu\xc3\xaas (Brasil) [pt-br]",CultureCode:"pt-br"},{DisplayText:"portugu\xc3\xaas (Portugal) [pt-pt]",CultureCode:"pt-pt"},{DisplayText:"Portugu\xc3\xaas [pt]",CultureCode:"pt"},{DisplayText:"Reo M\xc4\x81ori (Aotearoa) [mi-nz]",CultureCode:"mi-nz"},{DisplayText:"Reo M\xc4\x81ori [mi]",CultureCode:"mi"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 (Rom\xc3\xa2nia) [ro-ro]",CultureCode:"ro-ro"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 [ro]",CultureCode:"ro"},{DisplayText:"Rumantsch (Svizra) [rm-ch]",CultureCode:"rm-ch"},{DisplayText:"Rumantsch [rm]",CultureCode:"rm"},{DisplayText:"runasimi (Ecuador) [quz-ec]",CultureCode:"quz-ec"},{DisplayText:"runasimi (Piruw) [quz-pe]",CultureCode:"quz-pe"},{DisplayText:"runasimi (Qullasuyu) [quz-bo]",CultureCode:"quz-bo"},{DisplayText:"runasimi [quz]",CultureCode:"quz"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll (L\xc3\xa4\xc3\xa4\xc2\xb4ddj\xc3\xa2nnam) [sms-fi]",CultureCode:"sms-fi"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll [sms]",CultureCode:"sms"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 (Suom\xc3\xa2) [smn-fi]",CultureCode:"smn-fi"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 [smn]",CultureCode:"smn"},{DisplayText:"Sesotho sa Leboa (Afrika Borwa) [nso-za]",CultureCode:"nso-za"},{DisplayText:"Sesotho sa Leboa [nso]",CultureCode:"nso"},{DisplayText:"Setswana (Aforika Borwa) [tn-za]",CultureCode:"tn-za"},{DisplayText:"Setswana [tn]",CultureCode:"tn"},{DisplayText:"shqipe (Shqip\xc3\xabria) [sq-al]",CultureCode:"sq-al"},{DisplayText:"shqipe [sq]",CultureCode:"sq"},{DisplayText:"sloven\xc4\x8dina (Slovensk\xc3\xa1 republika) [sk-sk]",CultureCode:"sk-sk"},{DisplayText:"sloven\xc4\x8dina [sk]",CultureCode:"sk"},{DisplayText:"slovenski (Slovenija) [sl-si]",CultureCode:"sl-si"},{DisplayText:"slovenski [sl]",CultureCode:"sl"},{DisplayText:"srpski (Bosna i Hercegovina) [sr-latn-ba]",CultureCode:"sr-latn-ba"},{DisplayText:"srpski (Crna Gora) [sr-latn-me]",CultureCode:"sr-latn-me"},{DisplayText:"srpski (Srbija i Crna Gora (Prethodno)) [sr-latn-cs]",CultureCode:"sr-latn-cs"},{DisplayText:"srpski (Srbija) [sr-latn-rs]",CultureCode:"sr-latn-rs"},{DisplayText:"srpski [sr]",CultureCode:"sr"},{DisplayText:"srpski [sr-latn]",CultureCode:"sr-latn"},{DisplayText:"suomi (Suomi) [fi-fi]",CultureCode:"fi-fi"},{DisplayText:"suomi [fi]",CultureCode:"fi"},{DisplayText:"svenska (Finland) [sv-fi]",CultureCode:"sv-fi"},{DisplayText:"svenska (Sverige) [sv-se]",CultureCode:"sv-se"},{DisplayText:"svenska [sv]",CultureCode:"sv"},{DisplayText:"Tamazight (Djaza\xc3\xafr) [tzm-latn-dz]",CultureCode:"tzm-latn-dz"},{DisplayText:"Tamazight [tzm]",CultureCode:"tzm"},{DisplayText:"Tamazight [tzm-latn]",CultureCode:"tzm-latn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t (Vi\xe1\xbb\u2021t Nam) [vi-vn]",CultureCode:"vi-vn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t [vi]",CultureCode:"vi"},{DisplayText:"T\xc3\xbcrk\xc3\xa7e [tr]",CultureCode:"tr"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e (T\xc3\xbcrkmenistan) [tk-tm]",CultureCode:"tk-tm"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e [tk]",CultureCode:"tk"},{DisplayText:"U'zbek (U'zbekiston Respublikasi) [uz-latn-uz]",CultureCode:"uz-latn-uz"},{DisplayText:"U'zbek [uz]",CultureCode:"uz"},{DisplayText:"U'zbek [uz-latn]",CultureCode:"uz-latn"},{DisplayText:"Wolof (S\xc3\xa9n\xc3\xa9gal) [wo-sn]",CultureCode:"wo-sn"},{DisplayText:"Wolof [wo]",CultureCode:"wo"},{DisplayText:"Yoruba (Nigeria) [yo-ng]",CultureCode:"yo-ng"},{DisplayText:"Yoruba [yo]",CultureCode:"yo"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac (\xce\u2022\xce\xbb\xce\xbb\xce\xac\xce\xb4\xce\xb1) [el-gr]",CultureCode:"el-gr"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac [el]",CultureCode:"el"},{DisplayText:"\xd0\x90\xd0\xb7\xd3\u2122\xd1\u20ac\xd0\xb1\xd0\xb0\xd1\u02dc\xd2\xb9\xd0\xb0\xd0\xbd\xc2 \xd0\xb4\xd0\xb8\xd0\xbb\xd0\xb8 [az-cyrl]",CultureCode:"az-cyrl"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ba-ru]",CultureCode:"ba-ru"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a [ba]",CultureCode:"ba"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 (\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd1\u0152) [be-by]",CultureCode:"be-by"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 [be]",CultureCode:"be"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [bs-cyrl-ba]",CultureCode:"bs-cyrl-ba"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 [bs-cyrl]",CultureCode:"bs-cyrl"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd0\xb8\xd1\x8f) [bg-bg]",CultureCode:"bg-bg"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 [bg]",CultureCode:"bg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 (\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [ky-kg]",CultureCode:"ky-kg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 [ky]",CultureCode:"ky"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a (\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [kk-kz]",CultureCode:"kk-kz"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a [kk]",CultureCode:"kk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba (\xd0\u0153\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd0\xb8\xd1\u02dc\xd0\xb0) [mk-mk]",CultureCode:"mk-mk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba [mk]",CultureCode:"mk"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb (\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u0192\xd0\xbb\xd1\x81) [mn-mn]",CultureCode:"mn-mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn]",CultureCode:"mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn-cyrl]",CultureCode:"mn-cyrl"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ru-ru]",CultureCode:"ru-ru"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 [ru]",CultureCode:"ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [sah-ru]",CultureCode:"sah-ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 [sah]",CultureCode:"sah"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [sr-cyrl-ba]",CultureCode:"sr-cyrl-ba"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0 \xd0\xb8 \xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0 (\xd0\u0178\xd1\u20ac\xd0\xb5\xd1\u201a\xd1\u2026\xd0\xbe\xd0\xb4\xd0\xbd\xd0\xbe)) [sr-cyrl-cs]",CultureCode:"sr-cyrl-cs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0) [sr-cyrl-rs]",CultureCode:"sr-cyrl-rs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0) [sr-cyrl-me]",CultureCode:"sr-cyrl-me"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 [sr-cyrl]",CultureCode:"sr-cyrl"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [tt-ru]",CultureCode:"tt-ru"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac [tt]",CultureCode:"tt"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 (\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [tg-cyrl-tj]",CultureCode:"tg-cyrl-tj"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg]",CultureCode:"tg"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg-cyrl]",CultureCode:"tg-cyrl"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba (\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [uz-cyrl-uz]",CultureCode:"uz-cyrl-uz"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba [uz-cyrl]",CultureCode:"uz-cyrl"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 (\xd0\xa3\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd0\xb0) [uk-ua]",CultureCode:"uk-ua"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 [uk]",CultureCode:"uk"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 (\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa1\xd5\xbd\xd5\xbf\xd5\xa1\xd5\xb6) [hy-am]",CultureCode:"hy-am"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 [hy]",CultureCode:"hy"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc (\xe1\u0192\xa1\xe1\u0192\x90\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\u2022\xe1\u0192\u201d\xe1\u0192\u0161\xe1\u0192\x9d) [ka-ge]",CultureCode:"ka-ge"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc [ka]",CultureCode:"ka"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa (\xd7\u2122\xd7\xa9\xd7\xa8\xd7\x90\xd7\u0153) [he-il]",CultureCode:"he-il"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa [he]",CultureCode:"he"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 (\xd9\xbe\xd8\xa7\xda\xa9\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ur-pk]",CultureCode:"ur-pk"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 [ur]",CultureCode:"ur"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa3\xd8\xb1\xd8\xaf\xd9\u2020) [ar-jo]",CultureCode:"ar-jo"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa5\xd9\u2026\xd8\xa7\xd8\xb1\xd8\xa7\xd8\xaa \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xaa\xd8\xad\xd8\xaf\xd8\xa9) [ar-ae]",CultureCode:"ar-ae"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa8\xd8\xad\xd8\xb1\xd9\u0160\xd9\u2020) [ar-bh]",CultureCode:"ar-bh"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xac\xd8\xb2\xd8\xa7\xd8\xa6\xd8\xb1) [ar-dz]",CultureCode:"ar-dz"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa7\xd9\u201a) [ar-iq]",CultureCode:"ar-iq"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0192\xd9\u02c6\xd9\u0160\xd8\xaa) [ar-kw]",CultureCode:"ar-kw"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb3\xd8\xb9\xd9\u02c6\xd8\xaf\xd9\u0160\xd8\xa9) [ar-sa]",CultureCode:"ar-sa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xba\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9) [ar-ma]",CultureCode:"ar-ma"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0160\xd9\u2026\xd9\u2020) [ar-ye]",CultureCode:"ar-ye"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xaa\xd9\u02c6\xd9\u2020\xd8\xb3) [ar-tn]",CultureCode:"ar-tn"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [ar-sy]",CultureCode:"ar-sy"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb9\xd9\u2026\xd8\xa7\xd9\u2020) [ar-om]",CultureCode:"ar-om"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201a\xd8\xb7\xd8\xb1) [ar-qa]",CultureCode:"ar-qa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd8\xa8\xd9\u2020\xd8\xa7\xd9\u2020) [ar-lb]",CultureCode:"ar-lb"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd9\u0160\xd8\xa8\xd9\u0160\xd8\xa7) [ar-ly]",CultureCode:"ar-ly"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u2026\xd8\xb5\xd8\xb1) [ar-eg]",CultureCode:"ar-eg"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 [ar]",CultureCode:"ar"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ps-af]",CultureCode:"ps-af"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 [ps]",CultureCode:"ps"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [prs-af]",CultureCode:"prs-af"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 [prs]",CultureCode:"prs"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 (\xd8\xa7\xdb\u0152\xd8\xb1\xd8\xa7\xd9\u2020) [fa-ir]",CultureCode:"fa-ir"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 [fa]",CultureCode:"fa"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 (\xd8\xac\xdb\u2021\xda\xad\xd8\xae\xdb\u2021\xd8\xa7 \xd8\xae\xdb\u2022\xd9\u201e\xd9\u201a \xd8\xac\xdb\u2021\xd9\u2026\xda\xbe\xdb\u2021\xd8\xb1\xd9\u2030\xd9\u0160\xd9\u2030\xd8\xaa\xd9\u2030) [ug-cn]",CultureCode:"ug-cn"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 [ug]",CultureCode:"ug"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [syr-sy]",CultureCode:"syr-sy"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 [syr]",CultureCode:"syr"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 (\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8 \xde\u0192\xde\xa7\xde\u2021\xde\xb0\xde\u2013\xde\xac) [dv-mv]",CultureCode:"dv-mv"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 [dv]",CultureCode:"dv"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [kok-in]",CultureCode:"kok-in"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac [kok]",CultureCode:"kok"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac (\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2) [ne-np]",CultureCode:"ne-np"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac [ne]",CultureCode:"ne"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [mr-in]",CultureCode:"mr-in"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac [mr]",CultureCode:"mr"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4\xe0\xa4\xae\xe0\xa5\x8d) [sa-in]",CultureCode:"sa-in"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 [sa]",CultureCode:"sa"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [hi-in]",CultureCode:"hi-in"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac [hi]",CultureCode:"hi"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa7\xb0\xe0\xa6\xa4) [as-in]",CultureCode:"as-in"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe [as]",CultureCode:"as"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe\xe0\xa6\xa6\xe0\xa7\u2021\xe0\xa6\xb6) [bn-bd]",CultureCode:"bn-bd"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa6\xb0\xe0\xa6\xa4) [bn-in]",CultureCode:"bn-in"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe [bn]",CultureCode:"bn"},{
DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac (\xe0\xa8\xad\xe0\xa8\xbe\xe0\xa8\xb0\xe0\xa8\xa4) [pa-in]",CultureCode:"pa-in"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac [pa]",CultureCode:"pa"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac (\xe0\xaa\xad\xe0\xaa\xbe\xe0\xaa\xb0\xe0\xaa\xa4) [gu-in]",CultureCode:"gu-in"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac [gu]",CultureCode:"gu"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 (\xe0\xac\xad\xe0\xac\xbe\xe0\xac\xb0\xe0\xac\xa4) [or-in]",CultureCode:"or-in"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 [or]",CultureCode:"or"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d (\xe0\xae\u2021\xe0\xae\xa8\xe0\xaf\x8d\xe0\xae\xa4\xe0\xae\xbf\xe0\xae\xaf\xe0\xae\xbe) [ta-in]",CultureCode:"ta-in"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d [ta]",CultureCode:"ta"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 (\xe0\xb0\xad\xe0\xb0\xbe\xe0\xb0\xb0\xe0\xb0\xa4\xc2 \xe0\xb0\xa6\xe0\xb1\u2021\xe0\xb0\xb6\xe0\xb0\u201a) [te-in]",CultureCode:"te-in"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 [te]",CultureCode:"te"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 (\xe0\xb2\xad\xe0\xb2\xbe\xe0\xb2\xb0\xe0\xb2\xa4) [kn-in]",CultureCode:"kn-in"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 [kn]",CultureCode:"kn"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a (\xe0\xb4\xad\xe0\xb4\xbe\xe0\xb4\xb0\xe0\xb4\xa4\xe0\xb4\u201a) [ml-in]",CultureCode:"ml-in"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a [ml]",CultureCode:"ml"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd (\xe0\xb7\x81\xe0\xb7\u0160\xe2\u20ac\x8d\xe0\xb6\xbb\xe0\xb7\u201c \xe0\xb6\xbd\xe0\xb6\u201a\xe0\xb6\u0161\xe0\xb7\x8f) [si-lk]",CultureCode:"si-lk"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd [si]",CultureCode:"si"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 (\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2) [th-th]",CultureCode:"th-th"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 [th]",CultureCode:"th"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 (\xe1 \xaa\xe1 \xa6\xe1 \xad\xe1 \xa6\xe1 \xb3\xe1 \xa1 \xe1 \xa8\xe1  \xe1 \xa2\xe1 \xb7\xe1  \xe1 \xae\xe1 \xb3\xe1  \xe1 \xac\xe1 \xa4 \xe1 \xb3\xe1 \xa4\xe1 \xae\xe1 \xb3\xe1  \xe1 \xb3\xe1 \xa4 \xe1  \xe1 \xb7\xe1  \xe1 \xb3 \xe1 \xa3\xe1 \xaf\xe1 \xa3\xe1 \xb0) [mn-mong-cn]",CultureCode:"mn-mong-cn"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 [mn-mong]",CultureCode:"mn-mong"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a (\xe0\xbd\u20ac\xe0\xbe\xb2\xe0\xbd\xb4\xe0\xbd\u201e\xe0\xbc\u2039\xe0\xbd\xa7\xe0\xbe\xad\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u2018\xe0\xbd\u02dc\xe0\xbd\u201e\xe0\xbd\xa6\xe0\xbc\u2039\xe0\xbd\xa6\xe0\xbe\xa4\xe0\xbe\xb1\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\x90\xe0\xbd\xb4\xe0\xbd\u201c\xe0\xbc\u2039\xe0\xbd\xa2\xe0\xbe\u2019\xe0\xbe\xb1\xe0\xbd\xa3\xe0\xbc\u2039\xe0\xbd\x81\xe0\xbd\u2013\xe0\xbc\x8d) [bo-cn]",CultureCode:"bo-cn"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a [bo]",CultureCode:"bo"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 (\xe0\xba\xaa.\xe0\xba\u203a.\xe0\xba\u203a. \xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7) [lo-la]",CultureCode:"lo-la"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 [lo]",CultureCode:"lo"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 (\xe1\u017e\u20ac\xe1\u017e\u02dc\xe1\u0178\u2019\xe1\u017e\u2013\xe1\u017e\xbb\xe1\u017e\u2021\xe1\u017e\xb6) [km-kh]",CultureCode:"km-kh"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 [km]",CultureCode:"km"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 (\xe1\u2018\xb2\xe1\u201c\u2021\xe1\u2018\u2022\xe1\u2019\xa5) [iu-cans-ca]",CultureCode:"iu-cans-ca"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 [iu-cans]",CultureCode:"iu-cans"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a (\xe1\u0160\xa2\xe1\u2030\xb5\xe1\u2039\xae\xe1\u0152\xb5\xe1\u2039\xab) [am-et]",CultureCode:"am-et"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a [am]",CultureCode:"am"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 (\xea\x8d\x8f\xea\u2030\xb8\xea\x8f\u201c\xea\u201a\xb1\xea\u2021\xad\xea\u2030\xbc\xea\u2021\xa9) [ii-cn]",CultureCode:"ii-cn"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 [ii]",CultureCode:"ii"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 (\xeb\u0152\u20ac\xed\u2022\u0153\xeb\xaf\xbc\xea\xb5\xad) [ko-kr]",CultureCode:"ko-kr"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 [ko]",CultureCode:"ko"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021 [zh]",CultureCode:"zh"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe4\xb8\xad\xe5\x8d\u017d\xe4\xba\xba\xe6\xb0\u2018\xe5\u2026\xb1\xe5\u2019\u0152\xe5\u203a\xbd) [zh-cn]",CultureCode:"zh-cn"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe5\x8f\xb0\xe7\x81\xa3) [zh-tw]",CultureCode:"zh-tw"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\u2013\xb0\xe5\u0160 \xe5\x9d\xa1) [zh-sg]",CultureCode:"zh-sg"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\xbe\xb3\xe9\u2013\u20ac\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-mo]",CultureCode:"zh-mo"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) [zh-hans]",CultureCode:"zh-hans"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) \xe6\u2014\xa7\xe7\u2030\u02c6 [zh-chs]",CultureCode:"zh-chs"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) [zh-hant]",CultureCode:"zh-hant"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) \xe8\u02c6\u0160\xe7\u2030\u02c6 [zh-cht]",CultureCode:"zh-cht"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe9\xa6\u2122\xe6\xb8\xaf\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-hk]",CultureCode:"zh-hk"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e (\xe6\u2014\xa5\xe6\u0153\xac) [ja-jp]",CultureCode:"ja-jp"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e [ja]",CultureCode:"ja"}],regionLanguage:[{DisplayText:"\xc3\xa5arjelsaemiengiele (N\xc3\xb6\xc3\xb6rje) [sma-no]",CultureCode:"sma-no"},{DisplayText:"\xc3\xa5arjelsaemiengiele (Sveerje) [sma-se]",CultureCode:"sma-se"},{DisplayText:"\xc3\xa5arjelsaemiengiele [sma]",CultureCode:"sma"},{DisplayText:"Afrikaans (Suid Afrika) [af-za]",CultureCode:"af-za"},{DisplayText:"Afrikaans [af]",CultureCode:"af"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az]",CultureCode:"az"},{DisplayText:"Az\xc9\u2122rbaycan\xc2\xad\xc4\xb1l\xc4\xb1 [az-latn]",CultureCode:"az-latn"},{DisplayText:"Bahasa Indonesia (Indonesia) [id-id]",CultureCode:"id-id"},{DisplayText:"Bahasa Indonesia [id]",CultureCode:"id"},{DisplayText:"Bahasa Melayu (Brunei Darussalam) [ms-bn]",CultureCode:"ms-bn"},{DisplayText:"Bahasa Melayu (Malaysia) [ms-my]",CultureCode:"ms-my"},{DisplayText:"Bahasa Melayu [ms]",CultureCode:"ms"},{DisplayText:"bosanski (Bosna i Hercegovina) [bs-latn-ba]",CultureCode:"bs-latn-ba"},{DisplayText:"bosanski [bs]",CultureCode:"bs"},{DisplayText:"bosanski [bs-latn]",CultureCode:"bs-latn"},{DisplayText:"brezhoneg (Fra\xc3\xb1s) [br-fr]",CultureCode:"br-fr"},{DisplayText:"brezhoneg [br]",CultureCode:"br"},{DisplayText:"catal\xc3  (catal\xc3 ) [ca-es]",CultureCode:"ca-es"},{DisplayText:"catal\xc3  [ca]",CultureCode:"ca"},{DisplayText:"\xc4\x8de\xc5\xa1tina (\xc4\u0152esk\xc3\xa1\xc2 republika) [cs-cz]",CultureCode:"cs-cz"},{DisplayText:"\xc4\x8de\xc5\xa1tina [cs]",CultureCode:"cs"},{DisplayText:"Corsu (France) [co-fr]",CultureCode:"co-fr"},{DisplayText:"Corsu [co]",CultureCode:"co"},{DisplayText:"Cymraeg (y Deyrnas Unedig) [cy-gb]",CultureCode:"cy-gb"},{DisplayText:"Cymraeg [cy]",CultureCode:"cy"},{DisplayText:"dansk (Danmark) [da-dk]",CultureCode:"da-dk"},{DisplayText:"dansk [da]",CultureCode:"da"},{DisplayText:"davvis\xc3\xa1megiella (Norga) [se-no]",CultureCode:"se-no"},{DisplayText:"davvis\xc3\xa1megiella (Ruo\xc5\xa7\xc5\xa7a) [se-se]",CultureCode:"se-se"},{DisplayText:"davvis\xc3\xa1megiella (Suopma) [se-fi]",CultureCode:"se-fi"},{DisplayText:"davvis\xc3\xa1megiella [se]",CultureCode:"se"},{DisplayText:"Deutsch (Deutschland) [de-de]",CultureCode:"de-de"},{DisplayText:"Deutsch (Liechtenstein) [de-li]",CultureCode:"de-li"},{DisplayText:"Deutsch (Luxemburg) [de-lu]",CultureCode:"de-lu"},{DisplayText:"Deutsch (\xc3\u2013sterreich) [de-at]",CultureCode:"de-at"},{DisplayText:"Deutsch (Schweiz) [de-ch]",CultureCode:"de-ch"},{DisplayText:"Deutsch [de]",CultureCode:"de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina (Nimska) [dsb-de]",CultureCode:"dsb-de"},{DisplayText:"dolnoserb\xc5\xa1\xc4\u2021ina [dsb]",CultureCode:"dsb"},{DisplayText:"eesti (Eesti) [et-ee]",CultureCode:"et-ee"},{DisplayText:"eesti [et]",CultureCode:"et"},{DisplayText:"Els\xc3\xa4ssisch (Fr\xc3 nkrisch) [gsw-fr]",CultureCode:"gsw-fr"},{DisplayText:"Els\xc3\xa4ssisch [gsw]",CultureCode:"gsw"},{DisplayText:"English (Australia) [en-au]",CultureCode:"en-au"},{DisplayText:"English (Belize) [en-bz]",CultureCode:"en-bz"},{DisplayText:"English (Canada) [en-ca]",CultureCode:"en-ca"},{DisplayText:"English (Caribbean) [en-029]",CultureCode:"en-029"},{DisplayText:"English (India) [en-in]",CultureCode:"en-in"},{DisplayText:"English (Ireland) [en-ie]",CultureCode:"en-ie"},{DisplayText:"English (Jamaica) [en-jm]",CultureCode:"en-jm"},{DisplayText:"English (Malaysia) [en-my]",CultureCode:"en-my"},{DisplayText:"English (New Zealand) [en-nz]",CultureCode:"en-nz"},{DisplayText:"English (Philippines) [en-ph]",CultureCode:"en-ph"},{DisplayText:"English (Singapore) [en-sg]",CultureCode:"en-sg"},{DisplayText:"English (South Africa) [en-za]",CultureCode:"en-za"},{DisplayText:"English (Trinidad y Tobago) [en-tt]",CultureCode:"en-tt"},{DisplayText:"English (United Kingdom) [en-gb]",CultureCode:"en-gb"},{DisplayText:"English (United States) [en-us]",CultureCode:"en-us"},{DisplayText:"English (Zimbabwe) [en-zw]",CultureCode:"en-zw"},{DisplayText:"English [en]",CultureCode:"en"},{DisplayText:"Espa\xc3\xb1ol (Argentina) [es-ar]",CultureCode:"es-ar"},{DisplayText:"Espa\xc3\xb1ol (Bolivia) [es-bo]",CultureCode:"es-bo"},{DisplayText:"Espa\xc3\xb1ol (Chile) [es-cl]",CultureCode:"es-cl"},{DisplayText:"Espa\xc3\xb1ol (Colombia) [es-co]",CultureCode:"es-co"},{DisplayText:"Espa\xc3\xb1ol (Costa Rica) [es-cr]",CultureCode:"es-cr"},{DisplayText:"Espa\xc3\xb1ol (Ecuador) [es-ec]",CultureCode:"es-ec"},{DisplayText:"Espa\xc3\xb1ol (El Salvador) [es-sv]",CultureCode:"es-sv"},{DisplayText:"Espa\xc3\xb1ol (Espa\xc3\xb1a, alfabetizaci\xc3\xb3n internacional) [es-es]",CultureCode:"es-es"},{DisplayText:"Espa\xc3\xb1ol (Estados Unidos) [es-us]",CultureCode:"es-us"},{DisplayText:"Espa\xc3\xb1ol (Guatemala) [es-gt]",CultureCode:"es-gt"},{DisplayText:"Espa\xc3\xb1ol (Honduras) [es-hn]",CultureCode:"es-hn"},{DisplayText:"Espa\xc3\xb1ol (M\xc3\xa9xico) [es-mx]",CultureCode:"es-mx"},{DisplayText:"Espa\xc3\xb1ol (Nicaragua) [es-ni]",CultureCode:"es-ni"},{DisplayText:"Espa\xc3\xb1ol (Panam\xc3\xa1) [es-pa]",CultureCode:"es-pa"},{DisplayText:"Espa\xc3\xb1ol (Paraguay) [es-py]",CultureCode:"es-py"},{DisplayText:"Espa\xc3\xb1ol (Per\xc3\xba) [es-pe]",CultureCode:"es-pe"},{DisplayText:"Espa\xc3\xb1ol (Puerto Rico) [es-pr]",CultureCode:"es-pr"},{DisplayText:"Espa\xc3\xb1ol (Republica Bolivariana de Venezuela) [es-ve]",CultureCode:"es-ve"},{DisplayText:"Espa\xc3\xb1ol (Rep\xc3\xbablica Dominicana) [es-do]",CultureCode:"es-do"},{DisplayText:"Espa\xc3\xb1ol (Uruguay) [es-uy]",CultureCode:"es-uy"},{DisplayText:"espa\xc3\xb1ol [es]",CultureCode:"es"},{DisplayText:"euskara (euskara) [eu-es]",CultureCode:"eu-es"},{DisplayText:"euskara [eu]",CultureCode:"eu"},{DisplayText:"Filipino (Pilipinas) [fil-ph]",CultureCode:"fil-ph"},{DisplayText:"Filipino [fil]",CultureCode:"fil"},{DisplayText:"f\xc3\xb8royskt (F\xc3\xb8royar) [fo-fo]",CultureCode:"fo-fo"},{DisplayText:"f\xc3\xb8royskt [fo]",CultureCode:"fo"},{DisplayText:"fran\xc3\xa7ais (Belgique) [fr-be]",CultureCode:"fr-be"},{DisplayText:"fran\xc3\xa7ais (Canada) [fr-ca]",CultureCode:"fr-ca"},{DisplayText:"fran\xc3\xa7ais (France) [fr-fr]",CultureCode:"fr-fr"},{DisplayText:"fran\xc3\xa7ais (Luxembourg) [fr-lu]",CultureCode:"fr-lu"},{DisplayText:"fran\xc3\xa7ais (Principaut\xc3\xa9 de Monaco) [fr-mc]",CultureCode:"fr-mc"},{DisplayText:"fran\xc3\xa7ais (Suisse) [fr-ch]",CultureCode:"fr-ch"},{DisplayText:"fran\xc3\xa7ais [fr]",CultureCode:"fr"},{DisplayText:"Frysk (Nederl\xc3\xa2n) [fy-nl]",CultureCode:"fy-nl"},{DisplayText:"Frysk [fy]",CultureCode:"fy"},{DisplayText:"Gaeilge (\xc3\u2030ire) [ga-ie]",CultureCode:"ga-ie"},{DisplayText:"Gaeilge [ga]",CultureCode:"ga"},{DisplayText:"G\xc3 idhlig (An R\xc3\xacoghachd Aonaichte) [gd-gb]",CultureCode:"gd-gb"},{DisplayText:"G\xc3 idhlig [gd]",CultureCode:"gd"},{DisplayText:"galego (galego) [gl-es]",CultureCode:"gl-es"},{DisplayText:"galego [gl]",CultureCode:"gl"},{DisplayText:"Hausa (Nigeria) [ha-latn-ng]",CultureCode:"ha-latn-ng"},{DisplayText:"Hausa [ha]",CultureCode:"ha"},{DisplayText:"Hausa [ha-latn]",CultureCode:"ha-latn"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina (N\xc4\u203amska) [hsb-de]",CultureCode:"hsb-de"},{DisplayText:"hornjoserb\xc5\xa1\xc4\u2021ina [hsb]",CultureCode:"hsb"},{DisplayText:"hrvatski (Bosna i Hercegovina) [hr-ba]",CultureCode:"hr-ba"},{DisplayText:"hrvatski (Hrvatska) [hr-hr]",CultureCode:"hr-hr"},{DisplayText:"hrvatski [hr]",CultureCode:"hr"},{DisplayText:"Igbo (Nigeria) [ig-ng]",CultureCode:"ig-ng"},{DisplayText:"Igbo [ig]",CultureCode:"ig"},{DisplayText:"Inuktitut (Kanatami) [iu-latn-ca]",CultureCode:"iu-latn-ca"},{DisplayText:"Inuktitut [iu]",CultureCode:"iu"},{DisplayText:"Inuktitut [iu-latn]",CultureCode:"iu-latn"},{DisplayText:"Invariant Language (Invariant Country) []",CultureCode:""},{DisplayText:"isiXhosa (uMzantsi Afrika) [xh-za]",CultureCode:"xh-za"},{DisplayText:"isiXhosa [xh]",CultureCode:"xh"},{DisplayText:"isiZulu (iNingizimu Afrika) [zu-za]",CultureCode:"zu-za"},{DisplayText:"isiZulu [zu]",CultureCode:"zu"},{DisplayText:"\xc3\xadslenska (\xc3\x8dsland) [is-is]",CultureCode:"is-is"},{DisplayText:"\xc3\xadslenska [is]",CultureCode:"is"},{DisplayText:"italiano (Italia) [it-it]",CultureCode:"it-it"},{DisplayText:"italiano (Svizzera) [it-ch]",CultureCode:"it-ch"},{DisplayText:"italiano [it]",CultureCode:"it"},{DisplayText:"julevus\xc3\xa1megiella (Svierik) [smj-se]",CultureCode:"smj-se"},{DisplayText:"julevus\xc3\xa1megiella (Vuodna) [smj-no]",CultureCode:"smj-no"},{DisplayText:"julevus\xc3\xa1megiella [smj]",CultureCode:"smj"},{DisplayText:"kalaallisut (Kalaallit Nunaat) [kl-gl]",CultureCode:"kl-gl"},{DisplayText:"kalaallisut [kl]",CultureCode:"kl"},{DisplayText:"Kanien'k\xc3\xa9ha [moh]",CultureCode:"moh"},{DisplayText:"Kanien'k\xc3\xa9ha [moh-ca]",CultureCode:"moh-ca"},{DisplayText:"K'iche (Guatemala) [qut-gt]",CultureCode:"qut-gt"},{DisplayText:"K'iche [qut]",CultureCode:"qut"},{DisplayText:"Kinyarwanda (Rwanda) [rw-rw]",CultureCode:"rw-rw"},{DisplayText:"Kinyarwanda [rw]",CultureCode:"rw"},{DisplayText:"Kiswahili (Kenya) [sw-ke]",CultureCode:"sw-ke"},{DisplayText:"Kiswahili [sw]",CultureCode:"sw"},{DisplayText:"latvie\xc5\xa1u (Latvija) [lv-lv]",CultureCode:"lv-lv"},{DisplayText:"latvie\xc5\xa1u [lv]",CultureCode:"lv"},{DisplayText:"L\xc3\xabtzebuergesch (Luxembourg) [lb-lu]",CultureCode:"lb-lu"},{DisplayText:"L\xc3\xabtzebuergesch [lb]",CultureCode:"lb"},{DisplayText:"lietuvi\xc5\xb3 (Lietuva) [lt-lt]",CultureCode:"lt-lt"},{DisplayText:"lietuvi\xc5\xb3 [lt]",CultureCode:"lt"},{DisplayText:"magyar (Magyarorsz\xc3\xa1g) [hu-hu]",CultureCode:"hu-hu"},{DisplayText:"magyar [hu]",CultureCode:"hu"},{DisplayText:"Malti (Malta) [mt-mt]",CultureCode:"mt-mt"},{DisplayText:"Malti [mt]",CultureCode:"mt"},{DisplayText:"Mapudungun (Chile) [arn-cl]",CultureCode:"arn-cl"},{DisplayText:"Mapudungun [arn]",CultureCode:"arn"},{DisplayText:"Nederlands (Belgi\xc3\xab) [nl-be]",CultureCode:"nl-be"},{DisplayText:"Nederlands (Nederland) [nl-nl]",CultureCode:"nl-nl"},{DisplayText:"Nederlands [nl]",CultureCode:"nl"},{DisplayText:"norsk (bokm\xc3\xa5l) [nb]",CultureCode:"nb"},{DisplayText:"norsk (nynorsk) [nn]",CultureCode:"nn"},{DisplayText:"norsk [no]",CultureCode:"no"},{DisplayText:"norsk, bokm\xc3\xa5l (Norge) [nb-no]",CultureCode:"nb-no"},{DisplayText:"norsk, nynorsk (Noreg) [nn-no]",CultureCode:"nn-no"},{DisplayText:"Occitan (Fran\xc3\xa7a) [oc-fr]",CultureCode:"oc-fr"},{DisplayText:"Occitan [oc]",CultureCode:"oc"},{DisplayText:"polski (Polska) [pl-pl]",CultureCode:"pl-pl"},{DisplayText:"polski [pl]",CultureCode:"pl"},{DisplayText:"Portugu\xc3\xaas (Brasil) [pt-br]",CultureCode:"pt-br"},{DisplayText:"portugu\xc3\xaas (Portugal) [pt-pt]",CultureCode:"pt-pt"},{DisplayText:"Portugu\xc3\xaas [pt]",CultureCode:"pt"},{DisplayText:"Reo M\xc4\x81ori (Aotearoa) [mi-nz]",CultureCode:"mi-nz"},{DisplayText:"Reo M\xc4\x81ori [mi]",CultureCode:"mi"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 (Rom\xc3\xa2nia) [ro-ro]",CultureCode:"ro-ro"},{DisplayText:"rom\xc3\xa2n\xc4\u0192 [ro]",CultureCode:"ro"},{DisplayText:"Rumantsch (Svizra) [rm-ch]",CultureCode:"rm-ch"},{DisplayText:"Rumantsch [rm]",CultureCode:"rm"},{DisplayText:"runasimi (Ecuador) [quz-ec]",CultureCode:"quz-ec"},{DisplayText:"runasimi (Piruw) [quz-pe]",CultureCode:"quz-pe"},{DisplayText:"runasimi (Qullasuyu) [quz-bo]",CultureCode:"quz-bo"},{DisplayText:"runasimi [quz]",CultureCode:"quz"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll (L\xc3\xa4\xc3\xa4\xc2\xb4ddj\xc3\xa2nnam) [sms-fi]",CultureCode:"sms-fi"},{DisplayText:"s\xc3\xa4\xc3\xa4m\xc2\xb4\xc7\xa9i\xc3\xb5ll [sms]",CultureCode:"sms"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 (Suom\xc3\xa2) [smn-fi]",CultureCode:"smn-fi"},{DisplayText:"s\xc3\xa4mikiel\xc3\xa2 [smn]",CultureCode:"smn"},{DisplayText:"Sesotho sa Leboa (Afrika Borwa) [nso-za]",CultureCode:"nso-za"},{DisplayText:"Sesotho sa Leboa [nso]",CultureCode:"nso"},{DisplayText:"Setswana (Aforika Borwa) [tn-za]",CultureCode:"tn-za"},{DisplayText:"Setswana [tn]",CultureCode:"tn"},{DisplayText:"shqipe (Shqip\xc3\xabria) [sq-al]",CultureCode:"sq-al"},{DisplayText:"shqipe [sq]",CultureCode:"sq"},{DisplayText:"sloven\xc4\x8dina (Slovensk\xc3\xa1 republika) [sk-sk]",CultureCode:"sk-sk"},{DisplayText:"sloven\xc4\x8dina [sk]",CultureCode:"sk"},{DisplayText:"slovenski (Slovenija) [sl-si]",CultureCode:"sl-si"},{DisplayText:"slovenski [sl]",CultureCode:"sl"},{DisplayText:"srpski (Bosna i Hercegovina) [sr-latn-ba]",CultureCode:"sr-latn-ba"},{DisplayText:"srpski (Crna Gora) [sr-latn-me]",CultureCode:"sr-latn-me"},{DisplayText:"srpski (Srbija i Crna Gora (Prethodno)) [sr-latn-cs]",CultureCode:"sr-latn-cs"},{DisplayText:"srpski (Srbija) [sr-latn-rs]",CultureCode:"sr-latn-rs"},{DisplayText:"srpski [sr]",CultureCode:"sr"},{DisplayText:"srpski [sr-latn]",CultureCode:"sr-latn"},{DisplayText:"suomi (Suomi) [fi-fi]",CultureCode:"fi-fi"},{DisplayText:"suomi [fi]",CultureCode:"fi"},{DisplayText:"svenska (Finland) [sv-fi]",CultureCode:"sv-fi"},{DisplayText:"svenska (Sverige) [sv-se]",CultureCode:"sv-se"},{DisplayText:"svenska [sv]",CultureCode:"sv"},{DisplayText:"Tamazight (Djaza\xc3\xafr) [tzm-latn-dz]",CultureCode:"tzm-latn-dz"},{DisplayText:"Tamazight [tzm]",CultureCode:"tzm"},{DisplayText:"Tamazight [tzm-latn]",CultureCode:"tzm-latn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t (Vi\xe1\xbb\u2021t Nam) [vi-vn]",CultureCode:"vi-vn"},{DisplayText:"Ti\xc3\xaa\xcc\x81ng Vi\xe1\xbb\u2021t [vi]",CultureCode:"vi"},{DisplayText:"T\xc3\xbcrk\xc3\xa7e [tr]",CultureCode:"tr"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e (T\xc3\xbcrkmenistan) [tk-tm]",CultureCode:"tk-tm"},{DisplayText:"t\xc3\xbcrkmen\xc3\xa7e [tk]",CultureCode:"tk"},{DisplayText:"U'zbek (U'zbekiston Respublikasi) [uz-latn-uz]",CultureCode:"uz-latn-uz"},{DisplayText:"U'zbek [uz]",CultureCode:"uz"},{DisplayText:"U'zbek [uz-latn]",CultureCode:"uz-latn"},{DisplayText:"Wolof (S\xc3\xa9n\xc3\xa9gal) [wo-sn]",CultureCode:"wo-sn"},{DisplayText:"Wolof [wo]",CultureCode:"wo"},{DisplayText:"Yoruba (Nigeria) [yo-ng]",CultureCode:"yo-ng"},{DisplayText:"Yoruba [yo]",CultureCode:"yo"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac (\xce\u2022\xce\xbb\xce\xbb\xce\xac\xce\xb4\xce\xb1) [el-gr]",CultureCode:"el-gr"},{DisplayText:"\xce\u2022\xce\xbb\xce\xbb\xce\xb7\xce\xbd\xce\xb9\xce\xba\xce\xac [el]",CultureCode:"el"},{DisplayText:"\xd0\x90\xd0\xb7\xd3\u2122\xd1\u20ac\xd0\xb1\xd0\xb0\xd1\u02dc\xd2\xb9\xd0\xb0\xd0\xbd\xc2 \xd0\xb4\xd0\xb8\xd0\xbb\xd0\xb8 [az-cyrl]",CultureCode:"az-cyrl"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ba-ru]",CultureCode:"ba-ru"},{DisplayText:"\xd0\u2018\xd0\xb0\xd1\u02c6\xd2\xa1\xd0\xbe\xd1\u20ac\xd1\u201a [ba]",CultureCode:"ba"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 (\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd1\u0152) [be-by]",CultureCode:"be-by"},{DisplayText:"\xd0\u2018\xd0\xb5\xd0\xbb\xd0\xb0\xd1\u20ac\xd1\u0192\xd1\x81\xd0\xba\xd1\u2013 [be]",CultureCode:"be"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [bs-cyrl-ba]",CultureCode:"bs-cyrl-ba"},{DisplayText:"\xd0\xb1\xd0\xbe\xd1\x81\xd0\xb0\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 [bs-cyrl]",CultureCode:"bs-cyrl"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd0\xb8\xd1\x8f) [bg-bg]",CultureCode:"bg-bg"},{DisplayText:"\xd0\xb1\xd1\u0160\xd0\xbb\xd0\xb3\xd0\xb0\xd1\u20ac\xd1\x81\xd0\xba\xd0\xb8 [bg]",CultureCode:"bg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 (\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [ky-kg]",CultureCode:"ky-kg"},{DisplayText:"\xd0\u0161\xd1\u2039\xd1\u20ac\xd0\xb3\xd1\u2039\xd0\xb7 [ky]",CultureCode:"ky"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a (\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a\xd1\x81\xd1\u201a\xd0\xb0\xd0\xbd) [kk-kz]",CultureCode:"kk-kz"},{DisplayText:"\xd2\u0161\xd0\xb0\xd0\xb7\xd0\xb0\xd2\u203a [kk]",CultureCode:"kk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba (\xd0\u0153\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd0\xb8\xd1\u02dc\xd0\xb0) [mk-mk]",CultureCode:"mk-mk"},{DisplayText:"\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd1\x81\xd0\xba\xd0\xb8 \xd1\u02dc\xd0\xb0\xd0\xb7\xd0\xb8\xd0\xba [mk]",CultureCode:"mk"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb (\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u0192\xd0\xbb\xd1\x81) [mn-mn]",CultureCode:"mn-mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn]",CultureCode:"mn"},{DisplayText:"\xd0\u0153\xd0\xbe\xd0\xbd\xd0\xb3\xd0\xbe\xd0\xbb\xc2 \xd1\u2026\xd1\x8d\xd0\xbb [mn-cyrl]",CultureCode:"mn-cyrl"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [ru-ru]",CultureCode:"ru-ru"},{DisplayText:"\xd1\u20ac\xd1\u0192\xd1\x81\xd1\x81\xd0\xba\xd0\xb8\xd0\xb9 [ru]",CultureCode:"ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [sah-ru]",CultureCode:"sah-ru"},{DisplayText:"\xd1\x81\xd0\xb0\xd1\u2026\xd0\xb0 [sah]",CultureCode:"sah"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\u2018\xd0\xbe\xd1\x81\xd0\xbd\xd0\xb0 \xd0\xb8 \xd0\xa5\xd0\xb5\xd1\u20ac\xd1\u2020\xd0\xb5\xd0\xb3\xd0\xbe\xd0\xb2\xd0\xb8\xd0\xbd\xd0\xb0) [sr-cyrl-ba]",CultureCode:"sr-cyrl-ba"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0 \xd0\xb8 \xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0 (\xd0\u0178\xd1\u20ac\xd0\xb5\xd1\u201a\xd1\u2026\xd0\xbe\xd0\xb4\xd0\xbd\xd0\xbe)) [sr-cyrl-cs]",CultureCode:"sr-cyrl-cs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa1\xd1\u20ac\xd0\xb1\xd0\xb8\xd1\u02dc\xd0\xb0) [sr-cyrl-rs]",CultureCode:"sr-cyrl-rs"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 (\xd0\xa6\xd1\u20ac\xd0\xbd\xd0\xb0 \xd0\u201c\xd0\xbe\xd1\u20ac\xd0\xb0) [sr-cyrl-me]",CultureCode:"sr-cyrl-me"},{DisplayText:"\xd1\x81\xd1\u20ac\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8 [sr-cyrl]",CultureCode:"sr-cyrl"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac (\xd0 \xd0\xbe\xd1\x81\xd1\x81\xd0\xb8\xd1\x8f) [tt-ru]",CultureCode:"tt-ru"},{DisplayText:"\xd0\xa2\xd0\xb0\xd1\u201a\xd0\xb0\xd1\u20ac [tt]",CultureCode:"tt"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 (\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [tg-cyrl-tj]",CultureCode:"tg-cyrl-tj"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg]",CultureCode:"tg"},{DisplayText:"\xd0\xa2\xd0\xbe\xd2\xb7\xd0\xb8\xd0\xba\xd3\xa3 [tg-cyrl]",CultureCode:"tg-cyrl"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba (\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba\xd0\xb8\xd1\x81\xd1\u201a\xd0\xbe\xd0\xbd) [uz-cyrl-uz]",CultureCode:"uz-cyrl-uz"},{DisplayText:"\xd0\u017d\xd0\xb7\xd0\xb1\xd0\xb5\xd0\xba [uz-cyrl]",CultureCode:"uz-cyrl"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 (\xd0\xa3\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd0\xb0) [uk-ua]",CultureCode:"uk-ua"},{DisplayText:"\xd1\u0192\xd0\xba\xd1\u20ac\xd0\xb0\xd1\u2014\xd0\xbd\xd1\x81\xd1\u0152\xd0\xba\xd0\xb0 [uk]",CultureCode:"uk"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 (\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa1\xd5\xbd\xd5\xbf\xd5\xa1\xd5\xb6) [hy-am]",CultureCode:"hy-am"},{DisplayText:"\xd5\u20ac\xd5\xa1\xd5\xb5\xd5\xa5\xd6\u20ac\xd5\xa5\xd5\xb6 [hy]",CultureCode:"hy"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc (\xe1\u0192\xa1\xe1\u0192\x90\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\u2022\xe1\u0192\u201d\xe1\u0192\u0161\xe1\u0192\x9d) [ka-ge]",CultureCode:"ka-ge"},{DisplayText:"\xe1\u0192\xa5\xe1\u0192\x90\xe1\u0192 \xe1\u0192\u2014\xe1\u0192\xa3\xe1\u0192\u0161\xe1\u0192\u02dc [ka]",CultureCode:"ka"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa (\xd7\u2122\xd7\xa9\xd7\xa8\xd7\x90\xd7\u0153) [he-il]",CultureCode:"he-il"},{DisplayText:"\xd7\xa2\xd7\u2018\xd7\xa8\xd7\u2122\xd7\xaa [he]",CultureCode:"he"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 (\xd9\xbe\xd8\xa7\xda\xa9\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ur-pk]",CultureCode:"ur-pk"},{DisplayText:"\xd8\xa7\xd9\x8f\xd8\xb1\xd8\xaf\xd9\u02c6 [ur]",CultureCode:"ur"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa3\xd8\xb1\xd8\xaf\xd9\u2020) [ar-jo]",CultureCode:"ar-jo"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa5\xd9\u2026\xd8\xa7\xd8\xb1\xd8\xa7\xd8\xaa \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xaa\xd8\xad\xd8\xaf\xd8\xa9) [ar-ae]",CultureCode:"ar-ae"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xa8\xd8\xad\xd8\xb1\xd9\u0160\xd9\u2020) [ar-bh]",CultureCode:"ar-bh"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xac\xd8\xb2\xd8\xa7\xd8\xa6\xd8\xb1) [ar-dz]",CultureCode:"ar-dz"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa7\xd9\u201a) [ar-iq]",CultureCode:"ar-iq"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0192\xd9\u02c6\xd9\u0160\xd8\xaa) [ar-kw]",CultureCode:"ar-kw"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 \xd8\xa7\xd9\u201e\xd8\xb3\xd8\xb9\xd9\u02c6\xd8\xaf\xd9\u0160\xd8\xa9) [ar-sa]",CultureCode:"ar-sa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u2026\xd9\u2026\xd9\u201e\xd9\u0192\xd8\xa9 \xd8\xa7\xd9\u201e\xd9\u2026\xd8\xba\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9) [ar-ma]",CultureCode:"ar-ma"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xa7\xd9\u201e\xd9\u0160\xd9\u2026\xd9\u2020) [ar-ye]",CultureCode:"ar-ye"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xaa\xd9\u02c6\xd9\u2020\xd8\xb3) [ar-tn]",CultureCode:"ar-tn"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [ar-sy]",CultureCode:"ar-sy"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd8\xb9\xd9\u2026\xd8\xa7\xd9\u2020) [ar-om]",CultureCode:"ar-om"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201a\xd8\xb7\xd8\xb1) [ar-qa]",CultureCode:"ar-qa"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd8\xa8\xd9\u2020\xd8\xa7\xd9\u2020) [ar-lb]",CultureCode:"ar-lb"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u201e\xd9\u0160\xd8\xa8\xd9\u0160\xd8\xa7) [ar-ly]",CultureCode:"ar-ly"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 (\xd9\u2026\xd8\xb5\xd8\xb1) [ar-eg]",CultureCode:"ar-eg"},{DisplayText:"\xd8\xa7\xd9\u201e\xd8\xb9\xd8\xb1\xd8\xa8\xd9\u0160\xd8\xa9 [ar]",CultureCode:"ar"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [ps-af]",CultureCode:"ps-af"},{DisplayText:"\xd9\xbe\xda\u0161\xd8\xaa\xd9\u02c6 [ps]",CultureCode:"ps"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 (\xd8\xa7\xd9\x81\xd8\xba\xd8\xa7\xd9\u2020\xd8\xb3\xd8\xaa\xd8\xa7\xd9\u2020) [prs-af]",CultureCode:"prs-af"},{DisplayText:"\xd8\xaf\xd8\xb1\xd9\u2030 [prs]",CultureCode:"prs"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 (\xd8\xa7\xdb\u0152\xd8\xb1\xd8\xa7\xd9\u2020) [fa-ir]",CultureCode:"fa-ir"},{DisplayText:"\xd9\x81\xd8\xa7\xd8\xb1\xd8\xb3\xd9\u2030 [fa]",CultureCode:"fa"},{DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 (\xd8\xac\xdb\u2021\xda\xad\xd8\xae\xdb\u2021\xd8\xa7 \xd8\xae\xdb\u2022\xd9\u201e\xd9\u201a \xd8\xac\xdb\u2021\xd9\u2026\xda\xbe\xdb\u2021\xd8\xb1\xd9\u2030\xd9\u0160\xd9\u2030\xd8\xaa\xd9\u2030) [ug-cn]",CultureCode:"ug-cn"},{
DisplayText:"\xd8\xa6\xdb\u2021\xd9\u0160\xd8\xba\xdb\u2021\xd8\xb1\xda\u2020\xdb\u2022 [ug]",CultureCode:"ug"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 (\xd8\xb3\xd9\u02c6\xd8\xb1\xd9\u0160\xd8\xa7) [syr-sy]",CultureCode:"syr-sy"},{DisplayText:"\xdc\xa3\xdc\u02dc\xdc\xaa\xdc\x9d\xdc\x9d\xdc\x90 [syr]",CultureCode:"syr"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 (\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8 \xde\u0192\xde\xa7\xde\u2021\xde\xb0\xde\u2013\xde\xac) [dv-mv]",CultureCode:"dv-mv"},{DisplayText:"\xde\u2039\xde\xa8\xde\u02c6\xde\xac\xde\u20ac\xde\xa8\xde\u201e\xde\xa6\xde\x90\xde\xb0 [dv]",CultureCode:"dv"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [kok-in]",CultureCode:"kok-in"},{DisplayText:"\xe0\xa4\u2022\xe0\xa5\u2039\xe0\xa4\u201a\xe0\xa4\u2022\xe0\xa4\xa3\xe0\xa5\u20ac [kok]",CultureCode:"kok"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac (\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2) [ne-np]",CultureCode:"ne-np"},{DisplayText:"\xe0\xa4\xa8\xe0\xa5\u2021\xe0\xa4\xaa\xe0\xa4\xbe\xe0\xa4\xb2\xe0\xa5\u20ac [ne]",CultureCode:"ne"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [mr-in]",CultureCode:"mr-in"},{DisplayText:"\xe0\xa4\xae\xe0\xa4\xb0\xe0\xa4\xbe\xe0\xa4 \xe0\xa5\u20ac [mr]",CultureCode:"mr"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4\xe0\xa4\xae\xe0\xa5\x8d) [sa-in]",CultureCode:"sa-in"},{DisplayText:"\xe0\xa4\xb8\xe0\xa4\u201a\xe0\xa4\xb8\xe0\xa5\x8d\xe0\xa4\u2022\xe0\xa5\u0192\xe0\xa4\xa4 [sa]",CultureCode:"sa"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac (\xe0\xa4\xad\xe0\xa4\xbe\xe0\xa4\xb0\xe0\xa4\xa4) [hi-in]",CultureCode:"hi-in"},{DisplayText:"\xe0\xa4\xb9\xe0\xa4\xbf\xe0\xa4\u201a\xe0\xa4\xa6\xe0\xa5\u20ac [hi]",CultureCode:"hi"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa7\xb0\xe0\xa6\xa4) [as-in]",CultureCode:"as-in"},{DisplayText:"\xe0\xa6\u2026\xe0\xa6\xb8\xe0\xa6\xae\xe0\xa7\u20ac\xe0\xa7\u0178\xe0\xa6\xbe [as]",CultureCode:"as"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe\xe0\xa6\xa6\xe0\xa7\u2021\xe0\xa6\xb6) [bn-bd]",CultureCode:"bn-bd"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe (\xe0\xa6\xad\xe0\xa6\xbe\xe0\xa6\xb0\xe0\xa6\xa4) [bn-in]",CultureCode:"bn-in"},{DisplayText:"\xe0\xa6\xac\xe0\xa6\xbe\xe0\xa6\u201a\xe0\xa6\xb2\xe0\xa6\xbe [bn]",CultureCode:"bn"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac (\xe0\xa8\xad\xe0\xa8\xbe\xe0\xa8\xb0\xe0\xa8\xa4) [pa-in]",CultureCode:"pa-in"},{DisplayText:"\xe0\xa8\xaa\xe0\xa9\xb0\xe0\xa8\u0153\xe0\xa8\xbe\xe0\xa8\xac\xe0\xa9\u20ac [pa]",CultureCode:"pa"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac (\xe0\xaa\xad\xe0\xaa\xbe\xe0\xaa\xb0\xe0\xaa\xa4) [gu-in]",CultureCode:"gu-in"},{DisplayText:"\xe0\xaa\u2014\xe0\xab\x81\xe0\xaa\u0153\xe0\xaa\xb0\xe0\xaa\xbe\xe0\xaa\xa4\xe0\xab\u20ac [gu]",CultureCode:"gu"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 (\xe0\xac\xad\xe0\xac\xbe\xe0\xac\xb0\xe0\xac\xa4) [or-in]",CultureCode:"or-in"},{DisplayText:"\xe0\xac\u201c\xe0\xad\u0153\xe0\xac\xbf\xe0\xac\u2020 [or]",CultureCode:"or"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d (\xe0\xae\u2021\xe0\xae\xa8\xe0\xaf\x8d\xe0\xae\xa4\xe0\xae\xbf\xe0\xae\xaf\xe0\xae\xbe) [ta-in]",CultureCode:"ta-in"},{DisplayText:"\xe0\xae\xa4\xe0\xae\xae\xe0\xae\xbf\xe0\xae\xb4\xe0\xaf\x8d [ta]",CultureCode:"ta"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 (\xe0\xb0\xad\xe0\xb0\xbe\xe0\xb0\xb0\xe0\xb0\xa4\xc2 \xe0\xb0\xa6\xe0\xb1\u2021\xe0\xb0\xb6\xe0\xb0\u201a) [te-in]",CultureCode:"te-in"},{DisplayText:"\xe0\xb0\xa4\xe0\xb1\u2020\xe0\xb0\xb2\xe0\xb1\x81\xe0\xb0\u2014\xe0\xb1\x81 [te]",CultureCode:"te"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 (\xe0\xb2\xad\xe0\xb2\xbe\xe0\xb2\xb0\xe0\xb2\xa4) [kn-in]",CultureCode:"kn-in"},{DisplayText:"\xe0\xb2\u2022\xe0\xb2\xa8\xe0\xb3\x8d\xe0\xb2\xa8\xe0\xb2\xa1 [kn]",CultureCode:"kn"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a (\xe0\xb4\xad\xe0\xb4\xbe\xe0\xb4\xb0\xe0\xb4\xa4\xe0\xb4\u201a) [ml-in]",CultureCode:"ml-in"},{DisplayText:"\xe0\xb4\xae\xe0\xb4\xb2\xe0\xb4\xaf\xe0\xb4\xbe\xe0\xb4\xb3\xe0\xb4\u201a [ml]",CultureCode:"ml"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd (\xe0\xb7\x81\xe0\xb7\u0160\xe2\u20ac\x8d\xe0\xb6\xbb\xe0\xb7\u201c \xe0\xb6\xbd\xe0\xb6\u201a\xe0\xb6\u0161\xe0\xb7\x8f) [si-lk]",CultureCode:"si-lk"},{DisplayText:"\xe0\xb7\u0192\xe0\xb7\u2019\xe0\xb6\u201a\xe0\xb7\u201e\xe0\xb6\xbd [si]",CultureCode:"si"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 (\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2) [th-th]",CultureCode:"th-th"},{DisplayText:"\xe0\xb9\u201e\xe0\xb8\u2014\xe0\xb8\xa2 [th]",CultureCode:"th"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 (\xe1 \xaa\xe1 \xa6\xe1 \xad\xe1 \xa6\xe1 \xb3\xe1 \xa1 \xe1 \xa8\xe1  \xe1 \xa2\xe1 \xb7\xe1  \xe1 \xae\xe1 \xb3\xe1  \xe1 \xac\xe1 \xa4 \xe1 \xb3\xe1 \xa4\xe1 \xae\xe1 \xb3\xe1  \xe1 \xb3\xe1 \xa4 \xe1  \xe1 \xb7\xe1  \xe1 \xb3 \xe1 \xa3\xe1 \xaf\xe1 \xa3\xe1 \xb0) [mn-mong-cn]",CultureCode:"mn-mong-cn"},{DisplayText:"\xe1 \xae\xe1 \xa4\xe1 \xa8\xe1 \xad\xe1 \xad\xe1 \xa4\xe1 \xaf \xe1 \xac\xe1 \xa1\xe1 \xaf\xe1 \xa1 [mn-mong]",CultureCode:"mn-mong"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a (\xe0\xbd\u20ac\xe0\xbe\xb2\xe0\xbd\xb4\xe0\xbd\u201e\xe0\xbc\u2039\xe0\xbd\xa7\xe0\xbe\xad\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u2018\xe0\xbd\u02dc\xe0\xbd\u201e\xe0\xbd\xa6\xe0\xbc\u2039\xe0\xbd\xa6\xe0\xbe\xa4\xe0\xbe\xb1\xe0\xbd\xb2\xe0\xbc\u2039\xe0\xbd\u02dc\xe0\xbd\x90\xe0\xbd\xb4\xe0\xbd\u201c\xe0\xbc\u2039\xe0\xbd\xa2\xe0\xbe\u2019\xe0\xbe\xb1\xe0\xbd\xa3\xe0\xbc\u2039\xe0\xbd\x81\xe0\xbd\u2013\xe0\xbc\x8d) [bo-cn]",CultureCode:"bo-cn"},{DisplayText:"\xe0\xbd\u2013\xe0\xbd\xbc\xe0\xbd\u2018\xe0\xbc\u2039\xe0\xbd\xa1\xe0\xbd\xb2\xe0\xbd\u201a [bo]",CultureCode:"bo"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 (\xe0\xba\xaa.\xe0\xba\u203a.\xe0\xba\u203a. \xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7) [lo-la]",CultureCode:"lo-la"},{DisplayText:"\xe0\xba\xa5\xe0\xba\xb2\xe0\xba\xa7 [lo]",CultureCode:"lo"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 (\xe1\u017e\u20ac\xe1\u017e\u02dc\xe1\u0178\u2019\xe1\u017e\u2013\xe1\u017e\xbb\xe1\u017e\u2021\xe1\u017e\xb6) [km-kh]",CultureCode:"km-kh"},{DisplayText:"\xe1\u017e\x81\xe1\u0178\u2019\xe1\u017e\u02dc\xe1\u0178\u201a\xe1\u017e\u0161 [km]",CultureCode:"km"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 (\xe1\u2018\xb2\xe1\u201c\u2021\xe1\u2018\u2022\xe1\u2019\xa5) [iu-cans-ca]",CultureCode:"iu-cans-ca"},{DisplayText:"\xe1\x90\u0192\xe1\u201c\u201e\xe1\u2019\u0192\xe1\u2018\u017d\xe1\u2018\x90\xe1\u2018\xa6 [iu-cans]",CultureCode:"iu-cans"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a (\xe1\u0160\xa2\xe1\u2030\xb5\xe1\u2039\xae\xe1\u0152\xb5\xe1\u2039\xab) [am-et]",CultureCode:"am-et"},{DisplayText:"\xe1\u0160 \xe1\u02c6\u203a\xe1\u02c6\xad\xe1\u0160\u203a [am]",CultureCode:"am"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 (\xea\x8d\x8f\xea\u2030\xb8\xea\x8f\u201c\xea\u201a\xb1\xea\u2021\xad\xea\u2030\xbc\xea\u2021\xa9) [ii-cn]",CultureCode:"ii-cn"},{DisplayText:"\xea\u2020\u02c6\xea\u0152 \xea\x81\xb1\xea\u201a\xb7 [ii]",CultureCode:"ii"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 (\xeb\u0152\u20ac\xed\u2022\u0153\xeb\xaf\xbc\xea\xb5\xad) [ko-kr]",CultureCode:"ko-kr"},{DisplayText:"\xed\u2022\u0153\xea\xb5\xad\xec\u2013\xb4 [ko]",CultureCode:"ko"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021 [zh]",CultureCode:"zh"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe4\xb8\xad\xe5\x8d\u017d\xe4\xba\xba\xe6\xb0\u2018\xe5\u2026\xb1\xe5\u2019\u0152\xe5\u203a\xbd) [zh-cn]",CultureCode:"zh-cn"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe5\x8f\xb0\xe7\x81\xa3) [zh-tw]",CultureCode:"zh-tw"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\u2013\xb0\xe5\u0160 \xe5\x9d\xa1) [zh-sg]",CultureCode:"zh-sg"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe6\xbe\xb3\xe9\u2013\u20ac\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-mo]",CultureCode:"zh-mo"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) [zh-hans]",CultureCode:"zh-hans"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xae\u20ac\xe4\xbd\u201c) \xe6\u2014\xa7\xe7\u2030\u02c6 [zh-chs]",CultureCode:"zh-chs"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) [zh-hant]",CultureCode:"zh-hant"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe7\xb9\x81\xe9\xab\u201d) \xe8\u02c6\u0160\xe7\u2030\u02c6 [zh-cht]",CultureCode:"zh-cht"},{DisplayText:"\xe4\xb8\xad\xe6\u2013\u2021(\xe9\xa6\u2122\xe6\xb8\xaf\xe7\u2030\xb9\xe5\u02c6\xa5\xe8\xa1\u0152\xe6\u201d\xbf\xe5\x8d\u20ac) [zh-hk]",CultureCode:"zh-hk"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e (\xe6\u2014\xa5\xe6\u0153\xac) [ja-jp]",CultureCode:"ja-jp"},{DisplayText:"\xe6\u2014\xa5\xe6\u0153\xac\xe8\xaa\u017e [ja]",CultureCode:"ja"}]}}}return e(a,[{key:"read",value:function(a){if(a){if(a.expectSuccess&&a.success)return void a.success(this.queryResult);if(!a.expectSuccess&&a.failure)return void a.failure("class query failed")}}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0);Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return d[a]}})})}])})},"Sage/Services/PickListService":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare","icrm-js-services","Sage/Services/LocalStorageService"],function(a,b,c,d){var e={};c&&c.PickListService&&(e=c.PickListService);var f=b("Sage.Services.PickListService",[e],{constructor:function(){Sage.Services.hasService("LocalStorage")||(Sage.Services.LocalStorageService?Sage.Services.addService("LocalStorage",new Sage.Services.LocalStorageService):Sage.Services.addService("LocalStorage",new d)),this._storage=Sage.Services.getService("LocalStorage"),this._service=a.getSDataService("system",!1,!0,!1)},read:function(a){if(a&&a.handlers&&a.options){var b=(a.handlers,a.options);this.setUpRequest(new Sage.SData.Client.SDataResourceCollectionRequest(b.service),b).read(a.handlers)}}});return Sage.Services.hasService("PickList")||Sage.Services.addService("PickList",new Sage.Services.PickListService),f})},"Sage/UI/Calendar":function(){define(["dijit/Calendar","dojo/_base/declare"],function(a,b){return b("Sage.UI.Calendar",a,{_dateModifiedExternal:!1,displayMode:"",constructor:function(a){this.displayMode=a.displayMode;var b=this;this.lang=Sys.CultureInfo.CurrentCulture.name,"popup"===this.displayMode?dojo.connect(this,"_setValueAttr",function(a,c){a&&(a=new b.dateClassObj(a)),b._isValidDate(a)?(a.setHours(1,0,0,0),b.isDisabledDate(a,b.lang)||(b._set("value",a),b.monthWidget&&b.monthWidget.dropDown&&b.set("currentFocus",a),(c||void 0===c)&&b.onChange(b.get("value")))):(b._set("value",null),b.set("currentFocus",b.currentFocus))}):(dojo.subscribe("/entity/activity/calendar/schedulerDateChanged",function(a){!function(){b._dateModifiedExternal=!0,b.set("value",a.date),b._dateModifiedExternal=!1}()}),dojo.connect(this,"_setCurrentFocusAttr",function(a){var c=b._setCurrentFocusAttr;b._setCurrentFocusAttr=function(){},b.set("value",a),b._setCurrentFocusAttr=c})),this.inherited(arguments)},onValueSelected:function(a){"popup"!=this.displayMode&&(this._dateModifiedExternal||(this._dateModifiedExternal=!1,dojo.publish("/entity/activity/calendar/navigationCalendarDateChanged",[a,this]),this._dateModifiedExternal=!1))},getClassForDate:function(a){var b=a.getDay();if(6===b||0===b)return"dijitCalendarWeekEndDate"}})})},"dijit/Calendar":function(){define(["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=d("dijit.Calendar",[m,n,o],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){h.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",a)},_createMonthWidget:function(){return new r._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:j.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments),this.own(k(this.domNode,"keydown",j.hitch(this,"_onKeyDown")),k(this.dateRowsNode,"mouseover",j.hitch(this,"_onDayMouseOver")),k(this.dateRowsNode,"mouseout",j.hitch(this,"_onDayMouseOut")),k(this.dateRowsNode,"mousedown",j.hitch(this,"_onDayMouseDown")),k(this.dateRowsNode,"mouseup",j.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1),b.setMonth(a);var c=this.dateModule.getDaysInMonth(b),d=this.currentFocus.getDate();b.setDate(Math.min(d,c)),this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){var b=f.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target;b&&(b.dijitDateValue&&!f.contains(b,"dijitCalendarDisabledDate")||b==this.previousYearLabelNode||b==this.nextYearLabelNode)&&(f.add(b,"dijitCalendarHoveredDate"),this._currentNode=b)},_onDayMouseOut:function(a){if(this._currentNode&&(!a.relatedTarget||a.relatedTarget.parentNode!=this._currentNode)){var b="dijitCalendarHoveredDate";f.contains(this._currentNode,"dijitCalendarActiveDate")&&(b+=" dijitCalendarActiveDate"),f.remove(this._currentNode,b),this._currentNode=null}},_onDayMouseDown:function(a){var b=a.target.parentNode;b&&b.dijitDateValue&&!f.contains(b,"dijitCalendarDisabledDate")&&(f.add(b,"dijitCalendarActiveDate"),this._currentNode=b)},_onDayMouseUp:function(a){var b=a.target.parentNode;b&&b.dijitDateValue&&f.remove(b,"dijitCalendarActiveDate")},handleKey:function(a){var b,c=-1,d=this.currentFocus;switch(a.keyCode){case i.RIGHT_ARROW:c=1;case i.LEFT_ARROW:b="day",this.isLeftToRight()||(c*=-1);break;case i.DOWN_ARROW:c=1;case i.UP_ARROW:b="week";break;case i.PAGE_DOWN:c=1;case i.PAGE_UP:b=a.ctrlKey||a.altKey?"year":"month";break;case i.END:d=this.dateModule.add(d,"month",1),b="day";case i.HOME:d=new this.dateClassObj(d),d.setDate(1);break;default:return!0}return b&&(d=this.dateModule.add(d,b,c)),this._setCurrentFocusAttr(d),!1},_onKeyDown:function(a){this.handleKey(a)||(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});return r._MonthDropDownButton=d("dijit.Calendar._MonthDropDownButton",q,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments),this.dropDown=new r._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b),this.containerNode.innerHTML=(6==l("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}}),r._MonthDropDown=d("dijit.Calendar._MonthDropDown",[n,p,o],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"<div data-dojo-attach-event='ondijitclick:_onClick'></div>",_setMonthsAttr:function(b){this.domNode.innerHTML="",a.forEach(b,function(a,b){g.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(e.get(a.target,"month"))},onChange:function(){}}),r})},"dijit/CalendarLite":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b("dijit.CalendarLite",[m,n],{templateString:o,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);return b.setHours(0,0,0,0),b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1)),b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=f.fromISOString(a)),a=this._patchDate(a),this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)?(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||void 0===b)&&this.onChange(this.get("value"))):(this._set("value",null),this._markSelectedDates([]))},_patchDate:function(a){return a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0)),a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1),b=this._patchDate(b);var d=b.getDay(),e=this.dateModule.getDaysInMonth(b),f=this.dateModule.getDaysInMonth(this.dateModule.add(b,"month",-1)),g=new this.dateClassObj,h=c.getFirstDayOfWeek(this.lang);if(h>d&&(h-=7),!this.summary){var i=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.gridNode.setAttribute("summary",i[b.getMonth()])}this._date2cell={},a.forEach(this.dateCells,function(a,c){var i,j=c+h,k=new this.dateClassObj(b),l="dijitCalendar",m=0;j<d?(i=f-d+j+1,m=-1,l+="Previous"):j>=d+e?(i=j-d-e+1,m=1,l+="Next"):(i=j-d+1,l+="Current"),m&&(k=this.dateModule.add(k,"month",m)),k.setDate(i),this.dateModule.compare(k,g,"date")||(l="dijitCalendarCurrentDate "+l),this.isDisabledDate(k,this.lang)?(l="dijitCalendarDisabledDate "+l,a.setAttribute("aria-disabled","true")):(l="dijitCalendarEnabledDate "+l,a.removeAttribute("aria-disabled"),a.setAttribute("aria-selected","false"));var n=this.getClassForDate(k,this.lang);n&&(l=n+" "+l),a.className=l+"Month dijitCalendarDateTemplate";var o=k.valueOf();this._date2cell[o]=a,a.dijitDateValue=o,this._setText(this.dateLabels[c],k.getDateLocalized?k.getDateLocalized(this.lang):k.getDate())},this)},_populateControls:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1),this.monthWidget.set("month",b);var c=b.getFullYear()-1,d=new this.dateClassObj;a.forEach(["previous","current","next"],function(a){d.setFullYear(c++),this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?i.getObject(a.datePackage,!1):d,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=a.datePackage?i.getObject(a.datePackage+".locale",!1):e},_createMonthWidget:function(){return p._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=c.getFirstDayOfWeek(this.lang);this.dayCellsHtml=l.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[d++%7]});var e=l.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[e,e,e,e,e,e].join(""),this.dateCells=[],this.dateLabels=[],this.inherited(arguments),g.setSelectable(this.domNode,!1);var f=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget(),this.set("currentFocus",f,!1)},postCreate:function(){this.inherited(arguments),this._connectControls()},_connectControls:function(){var a=i.hitch(this,function(a,b,c){return this[a].dojoClick=!0,j(this[a],"click",i.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a),this._set("currentFocus",a),this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));var e=this._getNodeByDate(a);e.setAttribute("tabIndex",this.tabIndex),(this.focused||b)&&e.focus(),d&&d!=e&&(k("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation(),a.preventDefault();for(var b=a.target;b&&!b.dijitDateValue;b=b.parentNode);b&&!h.contains(b,"dijitCalendarDisabledDate")&&this.set("value",b.dijitDateValue)},_getNodeByDate:function(a){return a=this._patchDate(a),a&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function c(a,b){h.toggle(b,"dijitCalendarSelectedDate",a),b.setAttribute("aria-selected",a?"true":"false")}a.forEach(this._selectedCells||[],i.partial(c,!1)),this._selectedCells=a.filter(a.map(b,this._getNodeByDate,this),function(a){return a}),a.forEach(this._selectedCells,i.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});return p._MonthWidget=b("dijit.CalendarLite._MonthWidget",m,{_setMonthAttr:function(b){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b),d=6==k("ie")?"":"<div class='dijitSpacer'>"+a.map(c,function(a){return"<div>"+a+"</div>"}).join("")+"</div>";this.domNode.innerHTML=d+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+c[b.getMonth()]+"</div>"}}),p})},"dijit/form/DropDownButton":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(a,b,c,d,e,f,g,h,i){return a("dijit.form.DropDownButton",[f,g,h],{baseClass:"dijitDropDownButton",templateString:i,_fillContent:function(){if(this.srcNodeRef){var a=c("*",this.srcNodeRef);this.inherited(arguments,[a[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var a=c("[widgetId]",this.dropDownContainer)[0];a&&(this.dropDown=d.byNode(a)),delete this.dropDownContainer}this.dropDown&&e.hide(this.dropDown),this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var c=this.dropDown,d=c.on("load",b.hitch(this,function(){d.remove(),a()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/popup":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){this._popupWrapper&&(f.destroy(this._popupWrapper),delete this._popupWrapper)}var r=c(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=g.position(this._firstAroundNode,!0),c=b.x-a.x,d=b.y-a.y;if(c||d){this._firstAroundPosition=b;for(var e=0;e<this._stack.length;e++){var f=this._stack[e].wrapper.style;f.top=parseFloat(f.top)+d+"px","auto"==f.right?f.left=parseFloat(f.left)+c+"px":f.right=parseFloat(f.right)-c+"px"}}this._aroundMoveListener=setTimeout(k.hitch(this,"_repositionAll"),c||d?10:50)}},_createWrapper:function(a){var c=a._popupWrapper,d=a.domNode;if(!c){c=f.create("div",{class:"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),c.appendChild(d);var e=d.style;e.display="",e.visibility="",e.position="",e.top="0px",a._popupWrapper=c,b.after(a,"destroy",q,!0),"ontouchend"in document&&l(c,"touchend",function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()})}return c},moveOffScreen:function(a){var b=this._createWrapper(a),c=g.isBodyLtr(a.ownerDocument),d={visibility:"hidden",top:"-9999px",display:""};return d[c?"left":"right"]="-9999px",d[c?"right":"left"]="auto",h.set(b,d),b},hide:function(a){var b=this._createWrapper(a);h.set(b,{display:"none",height:"auto",overflow:"visible",border:""});var c=a.domNode;"_originalStyle"in c&&(c.style.cssText=c._originalStyle)},getTopPopup:function(){for(var a=this._stack,b=a.length-1;b>0&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var b=this._stack,c=a.popup,f=c.domNode,p=a.orient||["below","below-alt","above","above-alt"],q=a.parent?a.parent.isLeftToRight():g.isBodyLtr(c.ownerDocument),r=a.around,s=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;b.length&&(!a.parent||!d.isDescendant(a.parent.domNode,b[b.length-1].widget.domNode));)this.close(b[b.length-1].widget);var t=this.moveOffScreen(c);c.startup&&!c._started&&c.startup();var u,v=g.position(f);if("maxHeight"in a&&-1!=a.maxHeight)u=a.maxHeight||1/0;else{var w=o.getEffectiveBox(this.ownerDocument),x=r?g.position(r,!1):{y:a.y-(a.padding||0),h:2*(a.padding||0)};u=Math.floor(Math.max(x.y,w.h-(x.y+x.h)))}if(v.h>u){var y=h.getComputedStyle(f),z=y.borderLeftWidth+" "+y.borderLeftStyle+" "+y.borderLeftColor;h.set(t,{overflowY:"scroll",height:u+"px",border:z}),f._originalStyle=f.style.cssText,f.style.border="none"}e.set(t,{id:s,style:{zIndex:this._beginZIndex+b.length},class:"dijitPopup "+(c.baseClass||c.class||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""}),0==b.length&&r&&(this._firstAroundNode=r,this._firstAroundPosition=g.position(r,!0),this._aroundMoveListener=setTimeout(k.hitch(this,"_repositionAll"),50)),i("config-bgIframe")&&!c.bgIframe&&(c.bgIframe=new n(t));var A=c.orient?k.hitch(c,"orient"):null,B=r?m.around(t,r,p,q,A):m.at(t,a,"R"==p?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding,A);t.style.visibility="visible",f.style.visibility="visible";var C=[];return C.push(l(t,"keydown",k.hitch(this,function(b){if(b.keyCode==j.ESCAPE&&a.onCancel)b.stopPropagation(),b.preventDefault(),a.onCancel();else if(b.keyCode==j.TAB){b.stopPropagation(),b.preventDefault();var c=this.getTopPopup();c&&c.onCancel&&c.onCancel()}}))),c.onCancel&&a.onCancel&&C.push(c.on("cancel",a.onCancel)),C.push(c.on(c.onExecute?"execute":"change",k.hitch(this,function(){var a=this.getTopPopup();a&&a.onExecute&&a.onExecute()}))),b.push({widget:c,wrapper:t,parent:a.parent,onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:C}),c.onOpen&&c.onOpen(B),B},close:function(b){for(var c=this._stack;b&&a.some(c,function(a){return a.widget==b})||!b&&c.length;){var d=c.pop(),e=d.widget,f=d.onClose;e.bgIframe&&(e.bgIframe.destroy(),delete e.bgIframe),e.onClose&&e.onClose();for(var g;g=d.handlers.pop();)g.remove();e&&e.domNode&&this.hide(e),f&&f()}0==c.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return p.popup=new r})},"dijit/_HasDropDown":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return a("dijit._HasDropDown",p,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(k.once(this.ownerDocument,l.release,j.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=this.dropDown,c=!1;if(a&&this._opened){var d=f.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w&&a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(var g=a.target;g&&!c;)e.contains(g,"dijitPopup")?c=!0:g=g.parentNode;if(c){if(g=a.target,b.onItemClick){for(var h;g&&!(h=m.byNode(g));)g=g.parentNode;h&&h.onClick&&h.getParent&&h.getParent().onItemClick(h,a)}return}}}this._opened?b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){b.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";e.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(k(this._buttonNode,l.press,j.hitch(this,"_onDropDownMouseDown")),k(this._buttonNode,"click",j.hitch(this,"_onDropDownClick")),k(a,"keydown",j.hitch(this,"_onKey")),k(a,"keyup",j.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0),this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&this._opened&&b.handleKey&&!1===b.handleKey(a))return a.stopPropagation(),void a.preventDefault();b&&this._opened&&a.keyCode==i.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==i.DOWN_ARROW||(a.keyCode==i.ENTER||a.keyCode==i.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){
delete this._toggleOnKeyUp,this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(j.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new b,c=j.hitch(this,function(){this.openDropDown(),a.resolve(this.dropDown)});return this.isLoaded()?c():this.loadDropDown(c),a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this._aroundNode||this.domNode,g=this,h=o.open({parent:this,popup:a,around:c,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},onClose:function(){d.set(g._popupStateNode,"popupActive",!1),e.remove(g._popupStateNode,"dijitHasDropDownOpen"),g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&c.offsetWidth>a._popupWrapper.offsetWidth){var i=c.offsetWidth-a._popupWrapper.offsetWidth,k={w:a.domNode.offsetWidth+i};j.isFunction(a.resize)?a.resize(k):f.setMarginBox(b,k),"R"==h.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-i+"px")}return d.set(this._popupStateNode,"popupActive","true"),e.add(this._popupStateNode,"dijitHasDropDownOpen"),this._set("_opened",!0),this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",a.id),"presentation"===b.getAttribute("role")||b.getAttribute("aria-labelledby")||b.setAttribute("aria-labelledby",this.id),h},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),o.close(this.dropDown),this._opened=!1)}})})},"Sage/UI/Controls/Grid":function(){define(["dijit/_Widget","dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/_base/array","dgrid/Selection","dgrid/OnDemandGrid","dgrid/Grid","dgrid/Keyboard","dgrid/editor","dgrid/selector","dgrid/extensions/ColumnHider","dgrid/extensions/ColumnReorder","dgrid/extensions/ColumnResizer","dgrid/extensions/Pagination","dgrid/extensions/DnD","dgrid/util/mouse","put-selector/put","dojo/dom-construct","dojo/dom-class","Sage/Utility","Sage/Utility/_LocalStorageMixin","dojo/dom-attr","dojo/query","dojo/keys","dojo/i18n!./nls/Grid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return b("Sage.UI.Controls.Grid",[a,v],{rowSelection:!1,columnHiding:!1,indirectSelection:!1,columnResizing:!1,columnReordering:!1,dnd:!1,pagination:!1,classNames:"",tooltipForTruncatedData:!0,keyboardNavigation:!0,dismissOnEnter:!0,placeHolder:"",selection:null,columns:null,showHiderIcon:!0,formatterScope:null,domNode:null,heightByVisibleRecords:null,id:null,store:null,query:null,queryOptions:null,selectionMode:"single",_grid:null,allowSelectAll:!1,cellNavigation:!1,setUserPreferences:!0,togglePreRowsFlag:!0,farOffRemoval:2e3,pagingDelay:15,minRowsPerPage:25,maxRowsPerPage:250,rowsPerPage:15,keepScrollPosition:!0,queryRowsOverlap:0,previewLength:255,maxEmptySpace:"Infinity",where:"",forceAutoId:!1,region:"center",STORE_NS:"SAGE_UI_GRIDVIEW_",STORE_KEY_SORT:"_GRID_SORT_PROPS_",STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_KEY_HIDE:"_GRID_TOTTLE_PROPS_",STORE_KEY_REORDER:"_GRID_LAYOUT_PROPS_",STORE_KEY_TOGGLEPREVIEW:"_TOGGLEPREVIEW_INFO_",constructor:function(a){this.columns=[],c.mixin(this,a),c.mixin(this,z),this._validatePropertiesForGrid(),this.columns.length>0&&(this.columns=this._applyFormatterForLegacyColumns(this.columns)),!0===this.indirectSelection&&(this.columns=this._addSelectorColumnToColumns(this.columns));var d=this._prepareGridOptions(),e=this._getGridMixins(),f=this._grid=new(b(e))(d);this.domNode=f.domNode,this.previewField&&this._attachPreviewExpando(),this.tooltipForTruncatedData&&(f.on(q.enterCell,this._onCellMouseOver(f)),f.on(q.leaveCell,this._onCellMouseLeave(f))),this.eventHandlerSubs=[],this.eventHandlerSubs.push(f.on(".dgrid-row:click",c.hitch(this,function(a){this._onRowClick(a)}))),this.eventHandlerSubs.push(f.on(".dgrid-row:dblclick",c.hitch(this,function(a){this._onRowDblClick(a)}))),this.eventHandlerSubs.push(f.on("dgrid-select",c.hitch(this,function(a){this._onSelection(a)}))),this.eventHandlerSubs.push(f.on("dgrid-deselect",c.hitch(this,function(a){this._onDeselection(a)}))),this.eventHandlerSubs.push(f.on("dgrid-error",c.hitch(this,function(a){this._onError(a)}))),this.eventHandlerSubs.push(f.on("dgrid-sort",c.hitch(this,function(a){this._onGridSort(a)}))),this.eventHandlerSubs.push(f.on("dgrid-datachange",c.hitch(this,function(a){this._onDataChange(a)}))),this.eventHandlerSubs.push(f.on("dgrid-refresh-complete",c.hitch(this,function(a){this._onLoadComplete(a)}))),this.eventHandlerSubs.push(f.on(".dgrid-row:contextmenu",c.hitch(this,function(a){this._onContextActivate(a)}))),this.eventHandlerSubs.push(f.on(".dgrid-header:click",c.hitch(this,function(a){this._onHeaderClick(a)}))),this.eventHandlerSubs.push(f.on("dgrid-columnresize",c.hitch(this,function(a){this._onColumnResize(a)}))),this.eventHandlerSubs.push(f.on("dgrid-columnstatechange",c.hitch(this,function(a){this._onColumnHide(a)}))),this.eventHandlerSubs.push(f.on("dgrid-columnreorder",c.hitch(this,function(a){this._onColumnReorder(a)}))),this.eventHandlerSubs.push(f.on("dgrid-editor-show",c.hitch(this,function(a){this._onEditorShow(a)}))),this.eventHandlerSubs.push(f.on("dgrid-editor-hide",c.hitch(this,function(a){this._onEditorHide(a)}))),this.eventHandlerSubs.push(f.on("keydown",c.hitch(this,function(a){this._onKeyDown(a)}))),this.placeHolder&&s.place(this._grid.domNode,this.placeHolder),!1===this.showHiderIcon&&(this.classNames+=" hideColumnHider"),t.add(f.domNode,this.classNames),this._grid.startup(),this.heightByVisibleRecords&&w.set(x(".dgrid-scroller",this._grid.domNode)[0],"style","max-height:"+31*this.heightByVisibleRecords+"px")},destroy:function(){e.forEach(this.eventHandlerSubs,function(a){a.remove()}),this._grid.destroy(),this.inherited(arguments)},_attachPreviewExpando:function(){var a,b=this._grid;d(b.domNode,".dgrid-row:click",function(c){if(t.contains(c.srcElement,"morelink"))return!1;var d=b.row(c).element,e=d.className.indexOf("collapsed")>=0;r(d,(e?"!":".")+"collapsed"),e&&a&&r(a,".collapsed"),a=e?d:null})},_prepareGridOptions:function(){!1!==this.setUserPreferences&&this._loadUserPrefrences();var a={columns:this.columns,store:this.store,allowSelectAll:!1,dismissOnEnter:this.dismissOnEnter,cellNavigation:this.cellNavigation,query:this.query?this.query:{},farOffRemoval:this.farOffRemoval,pagingDelay:this.pagingDelay,minRowsPerPage:this.minRowsPerPage,maxRowsPerPage:this.maxRowsPerPage,rowsPerPage:this.rowsPerPage,keepScrollPosition:this.keepScrollPosition,loadingMessage:this.loadingMessage,noDataMessage:this.noDataMessage,queryRowsOverlap:this.queryRowsOverlap,maxEmptySpace:this.maxEmptySpace,selectionMode:"Multi"===this.selectionMode?"extended":this.selectionMode.toLowerCase(),sort:this.sort,forceAutoId:this.forceAutoId,keyboardNavigation:this.keyboardNavigation,formatterScope:this.formatterScope};if(this.id&&(a.id=this.id),this.previewField){var b=this;a.renderRow=function(a,c){var d=-1!==b.previewField.indexOf(".")?u.splitField(a,b.previewField):a[b.previewField],e="";d&&(e=[u.htmlEncode(d.substr(0,b.previewLength)).replace(/(?:\r\n|\r|\n)/g,"<br />"),'.... <a href="#" class="morelink">'+b.showMore+"</a>"].join(""));var f=b.togglePreRowsFlag?".expando":".expando.collapsed",h=r("div"+f,g.prototype.renderRow.apply(this,arguments));r(h,"div"+f+" div.preview",{innerHTML:e});return h}}return a},_loadUserPrefrences:function(){this._setUserPrefColumnWidths(),this._setUserSortInfo(),this._setUserHideInfo(),this._setUserColumnReorderInfo(),this._setToggleForPreviewRows()},_setUserColumnReorderInfo:function(){var a=this.getFromLocalStorage(this.STORE_KEY_REORDER+this.id,this.STORE_NS);if(a&&a.length===this.columns.length){for(var b=[],c=null,d=0;d<a.length;d++)for(var e=a[d],f=0;f<this.columns.length;f++)if(c=this.columns[f],e.field===c.field&&void 0===c._columnOrder){c._columnOrder=f,b.push(c),!0;break}for(var g=0;g<this.columns.length;g++)c=this.columns[g],void 0===c._columnOrder&&b.push(c);this.columns=b}},_setUserSortInfo:function(){var a=this.STORE_KEY_SORT+this.id,b=this.getFromLocalStorage(a,this.STORE_NS);b&&(this.sort=b)},_setUserHideInfo:function(){e.forEach(this.columns,c.hitch(this,function(a){if(a&&a.field){var b=this._getColumnLocalKey(a,this.STORE_KEY_HIDE),c=this.getFromLocalStorage(b,this.STORE_NS);!0!==c&&!1!==c||(a.hidden=c)}}))},_setUserPrefColumnWidths:function(){e.forEach(this.columns,c.hitch(this,function(a){if(a&&a.field){var b=this._getColumnLocalKey(a,this.STORE_KEY_COLUMN_SIZE),c=this.getFromLocalStorage(b,this.STORE_NS);c&&(a.width=c)}}))},_getColumnLocalKey:function(a,b){var c,d;return void 0!==a&&void 0!==a.field&&(c=a.field.replace(/[\.\$]/g,"_"),d=[this.id,"_",b,c].join("")),d},_validatePropertiesForGrid:function(){this.placeHolder,this.className},_getGridMixins:function(){var a=[];a.push(this.pagination?h:g);var b=function(b,c){!0===c&&a.push(b)};return b(m,this.columnReordering),b(n,this.columnResizing),b(f,this.rowSelection),b(l,this.columnHiding),b(o,this.pagination),b(i,this.keyboardNavigation),b(p,this.dnd),a},_applyFormatterForLegacyColumns:function(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=a[c];d.type&&(d.formatter=function(a,b){var c=new this.type(this);return c.domNode?c.domNode:c.format(a,b)}),d.editor&&(this.cellNavigation=!0,void 0===d.editable||!0===d.editable?d=j(d,d.editor,d.editOn?d.editOn:""):d.editor=null),d.field&&-1!==d.field.indexOf(".")&&!d.get&&(d.get=function(a){return u.splitField(a,this.field)},d.set=function(a){return u.setField(a,this.field,a[this.field])}),d.width&&(d.width=parseInt(d.width,10)),b.push(d)}return b},_addSelectorColumnToColumns:function(a){var b=k({selectorType:"checkbox",label:"",editable:!0,sortable:!1,reorderable:!1,unhidable:!0,className:"field-checkbox"});return a.splice(0,0,b),a},onEditorShow:function(a){},_onEditorShow:function(a){this.onEditorShow(a)},onEditorHide:function(a){},_onEditorHide:function(a){this.onEditorHide(a)},onKeyDown:function(a){},_onKeyDown:function(a){!0===this.keyboardNavigation&&(a.keyCode===y.TAB&&(a.shiftKey?i.moveFocusLeft.call(this._grid,a):i.moveFocusRight.call(this._grid,a)),this.onKeyDown(a))},onColumnReorder:function(a){},_onColumnReorder:function(a){var b=[];e.forEach(a.subRow,function(a){b.push({field:a.field})}),this.saveToLocalStorage(this.STORE_KEY_REORDER+this.id,b,this.STORE_NS),this.onColumnReorder(a)},onColumnHide:function(a){},_onColumnHide:function(a){this.saveToLocalStorage(this._getColumnLocalKey(a.column,this.STORE_KEY_HIDE),a.hidden,this.STORE_NS),this.onColumnHide(a)},onSelection:function(a){},_onSelection:function(a){this.selectedItem=a.rows[0].data,this.selection=this._grid.selection,this.onSelection(a)},onDeselection:function(a){},_onDeselection:function(a){this.selectedItem=!1,this.onDeselection(a)},onError:function(a){},_onError:function(a){this.onError(a)},onHeaderClick:function(a){},_onHeaderClick:function(a){this.onHeaderClick(a)},onDataChange:function(a){},_onDataChange:function(a){this.onDataChange(a)},onContextActivate:function(a){},_onContextActivate:function(a){this.onContextActivate(a)},onColumnResize:function(a){},_onColumnResize:function(a){var b=a.grid.columns[a.columnId],c=a.width,d=this._getColumnLocalKey(b,this.STORE_KEY_COLUMN_SIZE);void 0!==d&&this.saveToLocalStorage(d,c,this.STORE_NS),this.onColumnResize(a)},onLoadComplete:function(a){},_onLoadComplete:function(a){this.totalRecords=void 0!==a.results.total?a.results.total:a.results.length,this.onLoadComplete(a)},onGridSort:function(a){},_onGridSort:function(a){!1===this._grid.cell(a).column.sortable||"insert"===this.mode?a.preventDefault():this.saveToLocalStorage(this.STORE_KEY_SORT+this.id,a.sort,this.STORE_NS),this.onGridSort(a)},onCellMouseOver:function(a){},_onCellMouseOver:function(){return c.hitch(this,function(a){var b=this._grid.cell(a);if(b.element.offsetWidth<b.element.scrollWidth){var c=void 0===b.element.innerText?b.element.textContent:b.element.innerText;""!==c&&dijit.showTooltip(u.htmlEncode(c),b.element)}this.onCellMouseOver(a)})},onCellMouseLeave:function(){},_onCellMouseLeave:function(){return c.hitch(this,function(a){dijit.hideTooltip(this._grid.cell(a).element),this.onCellMouseLeave(a)})},onRowClick:function(a,b){},_onRowClick:function(a){var b=this._grid.row(a);this.previewField&&this._moreClick(a,b),this.onRowClick(a,b)},onRowDblClick:function(a){},_onRowDblClick:function(a){var b=this._grid.row(a);this.onRowDblClick(b)},resize:function(){this._grid.resize()},refresh:function(){this._grid.refresh()},revert:function(){this._grid.revert()},save:function(){return this._grid.save()},clearSelection:function(){this._grid.clearSelection()},setSort:function(a,b){this._grid.set("sort",a,b)},setStore:function(a,b,c){this.store=a,this.query=b,this.queryOptions=c,this._grid.set("store",this.store,this.query,this.queryOptions)},setColumns:function(a){var b=a;this._applyFormatterForLegacyColumns(a),!0===this.indirectSelection&&(b=this._addSelectorColumnToColumns(a)),this.columns=b,!1!==this.setUserPreferences&&this._loadUserPrefrences(),this._grid.set("columns",this.columns)},setSelectionMode:function(a){this._grid.set("selectionMode",a)},setHeaderVisibility:function(a){this._grid.set("showHeader",a)},getSelectedRowData:function(a){var b=[];if(a&&a.length>0)for(var d in this._grid.selection){var f={};e.forEach(a,c.hitch(this,function(a){f[a]=this._grid.row(d).data[a]})),b.push(f)}else for(var g in this._grid.selection)b.push(this._grid.row(g).data);return b},getSelectedRowId:function(){for(var a in this._grid.selection)if(this._grid.selection[a])return a;return null},setColumnWidth:function(a,b){!0===this.columnResizing&&this._grid.resizeColumnWidth(a.id,b)},setFilter:function(a){this.query=a,this.setStore(this.store,a,this.queryOptions)},setRowRenderFunction:function(a){a?this._grid.renderRow=a:this._oldRenderRow&&(this._grid.renderRow=this._oldRenderRow)},removeRow:function(a){this.store.data?this.store.data.remove(a):this.store.remove(a.$key,this.store),this.refresh()},reRenderRow:function(a){return this._grid.renderRow(a)},addItem:function(a){this._grid.store.add(a)},togglePreviewRows:function(){this.togglePreRowsFlag=!this.togglePreRowsFlag,this.saveToLocalStorage(this.STORE_KEY_TOGGLEPREVIEW+this.id,this.togglePreRowsFlag,this.STORE_NS);for(var a=this._grid.domNode.getElementsByClassName("dgrid-row"),b=0;b<a.length;b++)r(a[b],(this.togglePreRowsFlag?"!":".")+"collapsed")},_setToggleForPreviewRows:function(){var a=this.getFromLocalStorage(this.STORE_KEY_TOGGLEPREVIEW+this.id,this.STORE_NS);null!==a&&(this.togglePreRowsFlag=a)},_moreClick:function(a,b){if(-1!==a.target.className.indexOf("morelink"))if(-1!==a.target.className.indexOf("less")){t.add(a.target.parentNode.parentNode.children[1],"display-none"),t.remove(a.target.parentNode.parentNode.children[0],"display-none");for(var d=a.target.parentNode.getElementsByClassName("display"),e=0;e<d.length;e++)t.add(d[e],"display-none")}else if(-1===a.target.className.indexOf("full")){this.fullNoteField&&this.store.select.push(this.fullNoteField);var f=this.store.query("id eq '"+b.id+"'",null);f.then(c.hitch(this,function(b){var c=[],d='</span><span class="display-none">',e=this.fullNoteField?this.fullNoteField:this.previewField,f=-1!==e.indexOf(".")?u.splitField(b[0],e):b[0][e],g=f.match(/[\S\s]{1,255}/g);c.push(u.htmlEncode(g[0]).replace(/(?:\r\n|\r|\n)/g,"<br />")),c.push('</span><span class="display">');for(var h=1;h<g.length;h++)c.push(u.htmlEncode(g[h]).replace(/(?:\r\n|\r|\n)/g,"<br />")),h!==g.length-1&&c.push(d);c.push("</span> <br />"),g.length>2&&c.push('<a href="#" class="morelink more full">'+this.showMore+"</a>"),c.push('<a href="#" class="morelink less full">'+this.showLess+"</a>");var i=c.join("");r(a.target.parentNode.parentNode,"div.moreView",{innerHTML:i}),t.add(a.target.parentNode,"display-none"),t.add(a.target,"full"),a.target.innerHTML=this.showMore})),a.target.innerHTML="loading..."}else{t.add(a.target.parentNode.parentNode.children[0],"display-none");var g=a.target.parentNode,h=-1!==g.className.indexOf("preview");h&&(g=a.target.parentNode.parentNode.children[1],t.remove(g,"display-none"),g.getElementsByClassName("more").length>0&&t.remove(g.getElementsByClassName("more")[0],"display-none"));var i=g.getElementsByClassName("display-none");i.length>0&&(1!==i.length||h||t.add(a.target,"display-none"),t.add(i[0],"display"),t.remove(i[0],"display-none"))}}})})},"dgrid/Selection":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query","dojo/_base/sniff","dojo/dom"],function(a,b,c,d,e,f,g,h,i){function j(a,b){for(var c=a.unselectable=b?"on":"",d=a.getElementsByTagName("*"),e=d.length;--e;)"INPUT"!==d[e].tagName&&"TEXTAREA"!==d[e].tagName&&(d[e].unselectable=c)}function k(a,b){var c=a.bodyNode,g=b?"text":e("ff")<21?"-moz-none":"none";m&&"msUserSelect"!==m?c.style[m]=g:e("dom-selectstart")?b||a._selectstartHandle?b&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=d(c,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(j(c,!b),b||a._unselectableHandle?b&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=f.after(a,"renderRow",function(a){return j(a,!0),a}))}e.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition}),e.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a&&"MSPointer"}),e.add("dom-selectstart",void 0!==document.onselectstart);var l=e("mac")?"metaKey":"ctrlKey",m=e("css-user-select"),n=e("pointer"),o=n&&"MS"===n.slice(0,2),p=n?n+(o?"Down":"down"):"mousedown",q=n?n+(o?"Up":"up"):"mouseup";return"WebkitUserSelect"===m&&void 0!==document.documentElement.style.msUserSelect&&(m=!1),b(null,{selectionDelegate:".dgrid-row",selectionEvents:p+","+q+",dgrid-cellfocusin",selectionTouchEvents:e("touch")?h.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){return this.selection={},this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="",this._setSelectionMode(a)},destroy:function(){this.inherited(arguments),this._selectstartHandle&&this._selectstartHandle.remove(),this._unselectableHandle&&this._unselectableHandle.remove(),this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(b){a.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4"),this.set("selectionMode",b)},_setAllowTextSelection:function(a){void 0!==a?k(this,a):k(this,"none"===this.selectionMode),this.allowTextSelection=a},_handleSelect:function(a,b){!this[this._selectionHandlerName]||!this.allowSelect(this.row(b))||"dgrid-cellfocusin"===a.type&&"mousedown"===a.parentType||a.type===q&&b!=this._waitForMouseUp||(this._waitForMouseUp=null,this._selectionTriggerEvent=a,a.keyCode&&a.ctrlKey&&32!=a.keyCode||(!a.shiftKey&&a.type===p&&this.isSelected(b)?this._waitForMouseUp=b:this[this._selectionHandlerName](a,b)),this._selectionTriggerEvent=null)},_singleSelectionHandler:function(a,b){var c=a.keyCode?a.ctrlKey:a[l];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c,d=this._lastSelected,e=a.keyCode?a.ctrlKey:a[l];a.shiftKey||(c=!e||null,d=null),this.select(b,d,c),d||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[l])||this.clearSelection(null,!0),this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,b=this.contentNode,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]},e("touch")&&!e("pointer")&&this.selectionTouchEvents?(d(b,h.selector(c,this.selectionTouchEvents),function(b){a._handleSelect(b,this),a._ignoreMouseSelect=this}),d(b,d.selector(c,this.selectionEvents),function(b){a._ignoreMouseSelect!==this?a._handleSelect(b,this):b.type===q&&(a._ignoreMouseSelect=null)})):d(b,d.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)}),this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)}),this.allowSelectAll&&this.on("keydown",function(b){b[l]&&65==b.keyCode&&!/\bdgrid-input\b/.test(b.target.className)&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())}),this._setStore&&f.after(this,"_setStore",function(){a._updateDeselectionAspect()}),this._updateDeselectionAspect()},_updateDeselectionAspect:function(){function a(a,b,c){var e=b||a&&a[d.idProperty||"id"];if(null!=e){var f=d.row(e),g=f&&d.selection[f.id];g&&d[c](f,null,g)}}var b,c,d=this,e=this.store;this._removeDeselectSignals&&this._removeDeselectSignals(),e&&e.notify?(b=f.before(e,"notify",function(b,c){b||a(b,c,"deselect")}),c=f.after(e,"notify",function(b,c){a(b,c,"select")},!0),this._removeDeselectSignals=function(){b.remove(),c.remove()}):(b=f.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)}),this._removeDeselectSignals=function(){b.remove()})},allowSelect:function(a){return!0},_fireSelectionEvent:function(a){var b,c=this._selectionEventQueues[a],e=this._selectionTriggerEvent;b={bubbles:!0,grid:this},e&&(b.parentType=e.type),b[this._selectionTargetType]=c,this._selectionEventQueues[a]=[],d.emit(this.contentNode,"dgrid-"+a,b)},_fireSelectionEvents:function(){var a,b=this._selectionEventQueues;for(a in b)b[a].length&&this._fireSelectionEvent(a)},_select:function(a,b,c){var d,e,f,g,h;if(void 0===c&&(c=!0),a.element||(a=this.row(a)),(!1===c||this.allowSelect(a))&&(d=this.selection,e=!!d[a.id],null===c&&(c=!e),f=a.element,c||this.allSelected?d[a.id]=c:delete this.selection[a.id],f&&(c?i(f,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):i(f,"!dgrid-selected!ui-state-active")),(c!==e&&f||c!==e&&a.id)&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)){if(b.element||(b=this.row(b)),!b)return void(this._lastSelected=f);if(g=b.element)for(h=this._determineSelectionDirection(f,g),h||(g=document.getElementById(g.id),h=this._determineSelectionDirection(f,g));a.element!=g&&(a=this[h](a));)this._select(a,null,c)}},_determineSelectionDirection:e("dom-comparedocumentposition")?function(a,b){var c=b.compareDocumentPosition(a);return!(1&c)&&(2===c?"down":"up")}:function(a,b){return!(b.sourceIndex<1)&&(b.sourceIndex>a.sourceIndex?"down":"up")},select:function(a,b,c){this._select(a,b,c),this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null),this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0,this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){return void 0!==a&&null!==a&&(a.element||(a=this.row(a)),a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a)))},refresh:function(){return this.deselectOnRefresh&&this.clearSelection(),this._lastSelected=null,this.inherited(arguments)},renderArray:function(){var a=this,b=this.inherited(arguments);return c.when(b,function(b){var c,d,e,f=a.selection;for(c=0;c<b.length;c++)d=a.row(b[c]),(e=d.id in f?f[d.id]:a.allSelected)&&a._select(d,null,e);a._fireSelectionEvents()}),b}})})},"dgrid/List":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff","xstyle/css!./css/dgrid.css"],function(a,b,c,d,e,f,g,h,i){function j(a){return document.getElementById(a)}function k(a){a.className="",document.body.removeChild(a)}function l(a,b){i(document.body,a,".dgrid-scrollbar-measure");var c=a["offset"+b]-a["client"+b];return k(a),c}function m(){return"dgrid_"+v++}function n(a){var b=a?"."+a.replace(w,"."):"";this._class&&(b="!"+this._class.replace(w,"!")+b),i(this.domNode,b),this._class=a}function o(){return this._class}function p(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function q(a){void 0!==a.x&&(this.bodyNode.scrollLeft=a.x),void 0!==a.y&&(this.bodyNode.scrollTop=a.y)}h("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var r,s,t="dgrid-row-odd",u="dgrid-row-even";e.add("dom-scrollbar-width",function(a,b,c){return l(c,"Width")}),e.add("dom-scrollbar-height",function(a,b,c){return l(c,"Height")}),e.add("dom-rtl-scrollbar-left",function(a,b,c){var d,f=i("div");return i(document.body,c,".dgrid-scrollbar-measure[dir=rtl]"),i(c,f),d=!!e("ie")||!!e("trident")||f.offsetLeft>=e("dom-scrollbar-width"),k(c),i(f,"!"),c.removeAttribute("dir"),d});var v=0,w=/ +/g,x=e("ie")<7&&!e("quirks")?function(){var a,b,c,d;this._started&&(a=document.documentElement,b=a.clientWidth,c=a.clientHeight,d=this._prevWinDims||[],d[0]===b&&d[1]===c||(this.resize(),this._prevWinDims=[b,c]))}:function(){this._started&&this.resize()};return b(e("touch")?g:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:null,addUiClasses:!0,shouldObserveStore:!0,cleanEmptyObservers:!0,highlightDuration:250,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a,this.data=b,this.element=c}).prototype.remove=function(){c.removeRow(this.element)},b&&(this.srcNodeRef=b=b.nodeType?b:j(b)),this.create(a,b)},listType:"list",create:function(a,c){var d,f=this.domNode=c||i("div");a?(this.params=a,b.safeMixin(this,a),d=a.class||a.className||f.className,this._sort=a.sort||[],delete this.sort):this._sort=[],this.observers=[],this._numObservers=0,this._listeners=[],this._rowIdToObject={},this.postMixInProperties&&this.postMixInProperties(),this.id=f.id=f.id||this.id||m(),null===this.useTouchScroll&&(this.useTouchScroll=!e("dom-scrollbar-width")),this.buildRendering(),d&&n.call(this,d),this.postCreate(),delete this.srcNodeRef,this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a,b,c,g,h=this.domNode,j=this.addUiClasses,k=this;g=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase(),h.className="",i(h,"[role=grid].dgrid.dgrid-"+this.listType+(j?".ui-widget":"")),a=this.headerNode=i(h,"div.dgrid-header.dgrid-header-row"+(j?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden")),(e("quirks")||e("ie")<8)&&i(h,"div.dgrid-spacer"),b=this.bodyNode=i(h,"div.dgrid-scroller"),e("ff")&&(b.tabIndex=-1),this.headerScrollNode=i(h,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(j?".ui-widget-header":"")),c=this.footerNode=i("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden")),i(h,c),g&&(h.className+=" dgrid-rtl"+(e("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"")),d(b,"scroll",function(c){k.showHeader&&(a.scrollLeft=c.scrollLeft||b.scrollLeft),c.stopPropagation(),d.emit(h,"scroll",{scrollTarget:b})}),this.configStructure(),this.renderHeader(),this.contentNode=this.touchNode=i(this.bodyNode,"div.dgrid-content"+(j?".ui-widget-content":"")),this._listeners.push(this._resizeHandle=d(window,"resize",f.throttleDelayed(x,this)))},postCreate:e("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,b=this.headerNode,c=this.footerNode,d=b.offsetHeight,g=this.showFooter?c.offsetHeight:0,h=e("quirks")||e("ie")<7;this.headerScrollNode.style.height=a.style.marginTop=d+"px",a.style.marginBottom=g+"px",h&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-d-g,0)+"px",g&&(c.style.bottom="1px",setTimeout(function(){c.style.bottom=""},0))),r||(r=e("dom-scrollbar-width"),s=e("dom-scrollbar-height"),e("ie")&&(r++,s++),f.addCssRule(".dgrid-scrollbar-width","width: "+r+"px"),f.addCssRule(".dgrid-scrollbar-height","height: "+s+"px"),17==r||h||(f.addCssRule(".dgrid-header-row","right: "+r+"px"),f.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+r+"px"))),h&&(b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,b){var c=f.addCssRule(a,b);return this.cleanAddedRules&&this._listeners.push(c),c},on:function(a,b){var c=d(this.domNode,a,b);return e("dom-addeventlistener")||this._listeners.push(c),c},cleanup:function(){var a,b=this.observers;for(a in this._rowIdToObject)if(this._rowIdToObject[a]!=this.columns){var c=j(a);c&&this.removeRow(c,!0)}for(a=0;a<b.length;a++){var d=b[a];d&&d.cancel()}this.observers=[],this._numObservers=0,this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this._started=!1,this.cleanup(),i(this.domNode,"!"),this.useTouchScroll&&this.inherited(arguments)},refresh:function(){this.cleanup(),this._rowIdToObject={},this._autoId=0,this.contentNode.innerHTML="",this.scrollTo({x:0,y:0})},newRow:function(a,b,c,d,e){if(b){var f=this.insertRow(a,b,c,d,e);return i(f,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":"")),setTimeout(function(){i(f,"!dgrid-highlight!ui-state-highlight")},this.highlightDuration),f}},adjustRowIndices:function(a){var b=a,c=b.rowIndex;if(c>-1)do{b.rowIndex>-1&&(this.maintainOddEven&&(b.className+" ").indexOf("dgrid-row ")>-1&&i(b,"."+(c%2==1?t:u)+"!"+(c%2==0?t:u)),b.rowIndex=c++)}while((b=b.nextSibling)&&b.rowIndex!=c)},renderArray:function(a,b,d){function e(){var b=arguments;if(m>-1)for(var c=0;c<b.length;c++){var e=b[c],g=k[e?0:k.length-1];if(g=g&&f(g)){var h=g[e?"previousSibling":"nextSibling"];if(h&&(h=n.row(h)),h&&h.element!=g){var i=e?"unshift":"push";a[i](h.data),k[i](h.element),d.count++}}}}function f(a){return!c.isDescendant(a,n.domNode)&&j(a.id)?n.row(a.id.slice(n.id.length+5)).element:a}function g(a){return r=n.insertRow(a,t,null,o++,d),r.observerIndex=m,r}function h(a){if(void 0!==m&&(p[m].cancel(),p[m]=0,n._numObservers--),a)throw a}function i(a){s=a.slice(0),l=b?b.parentNode:n.contentNode,l&&l.parentNode&&(l!==n.contentNode||a.length)?(l.insertBefore(t,b||null),(r=a[a.length-1])&&n.adjustRowIndices(r)):p[m]&&n.cleanEmptyObservers&&h(),k=a,q&&(q.rows=k)}d=d||{};var k,l,m,n=this,o=d.start||0,p=this.observers;if(b||(this._lastCollection=a),a.observe&&this.shouldObserveStore){n._numObservers++;var q=a.observe(function(c,g,h){function i(){q=(q.connected||q).nextSibling}var o,p,q,r;if(g>-1&&k[g]&&(o=k.splice(g,1)[0],o.parentNode==l&&(p=o.nextSibling,p&&g!=h&&p.rowIndex--,n.removeRow(o)),d.count--,n._processScroll&&n._processScroll()),h>-1){if(k.length?0===h?(q=k[h],q=q&&f(q)):(q=k[h-1])&&(q=f(q),i()):q=n._getFirstRowSibling&&n._getFirstRowSibling(l),o&&q&&o.id===q.id&&i(),q&&!q.parentNode&&(q=j(q.id)),r=b&&b.parentNode||q&&q.parentNode||n.contentNode,(o=n.newRow(c,r,q,d.start+h,d))&&(o.observerIndex=m,k.splice(h,0,o),!p||h<g)){var s=o.previousSibling;p=s&&s.rowIndex+1!=o.rowIndex&&0!=o.rowIndex?s:o}d.count++}0===g?e(1,1):g===a.length-(-1===h?0:1)&&e(0,0),
g!=h&&p&&n.adjustRowIndices(p),n._onNotification(k,c,g,h)},!0);m=p.push(q)-1}var r,s,t=document.createDocumentFragment();if(a.map){if(k=a.map(g,console.error),k.then)return a.then(function(b){return a=b,k.then(function(a){return i(a),e(1,1,0,0),s})})}else{k=[];for(var u=0,v=a.length;u<v;u++)k[u]=g(a[u])}return i(k),e(1,1,0,0),s},_onNotification:function(a,b,c,d){},renderHeader:function(){},forceAutoId:!1,_autoId:0,insertRow:function(a,b,c,d,e){var f=e.parentId,g=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):d),h=j(g),i=h&&h.previousSibling;return h&&(h===c&&(c=(c.connected||c).nextSibling),this.removeRow(h)),h=this.renderRow(a,e),h.className=(h.className||"")+" dgrid-row "+(d%2==1?t:u)+(this.addUiClasses?" ui-state-default":""),this._rowIdToObject[h.id=g]=a,b.insertBefore(h,c||null),i&&this.adjustRowIndices(i),h.rowIndex=d,h},renderRow:function(a,b){return i("div",""+a)},removeRow:function(a,b){a=a.element||a,delete this._rowIdToObject[a.id],b||i(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);{if(!a.nodeType)return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,j(this.id+"-row-"+b));var c;do{var d=a.id;if(c=this._rowIdToObject[d])return new this._Row(d.substring(this.id.length+5),c,a);a=a.parentNode}while(a&&a!=this.domNode)}},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f,g;g=f=a.element,b=b||1;do{if(e=f[b<0?"previousSibling":"nextSibling"]){do{if((f=e)&&(f.className+" ").indexOf(c+" ")>-1){g=f,b+=b<0?1:-1;break}}while(e=(!d||!f.hidden)&&f[b<0?"lastChild":"firstChild"])}else if(!(f=f.parentNode)||f===this.bodyNode||f===this.headerNode)break}while(b);return g},up:function(a,b,c){return a.element||(a=this.row(a)),this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){return a.element||(a=this.row(a)),this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:e("touch")?function(a){return this.useTouchScroll?this.inherited(arguments):q.call(this,a)}:q,getScrollPosition:e("touch")?function(){return this.useTouchScroll?this.inherited(arguments):p.call(this)}:p,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"==typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"==typeof a)for(var c in a)this.set(c,a[c]);else{var d="_set"+a.charAt(0).toUpperCase()+a.slice(1);"function"==typeof this[d]?this[d].apply(this,[].slice.call(arguments,1)):this[a]=b}return this},_getClass:o,_setClass:n,_getClassName:o,_setClassName:n,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}],this.refresh(),this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var e=c[a],f=d[a];return void 0===e&&(e=""),void 0===f&&(f=""),e==f?0:e>f==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(b,c){a.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4"),this.set("sort",b,c)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a,i(b,(a?"!":".")+"dgrid-header-hidden"),this.renderHeader(),this.resize(),a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(b){a.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4"),this.set("showHeader",b)},_setShowFooter:function(a){this.showFooter=a,i(this.footerNode,(a?"!":".")+"dgrid-footer-hidden"),this.resize()}})})},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(a,b){function c(a){var b,c,f=g[a];if(void 0!==f)for(d[e](f),g[a]=void 0,b=a+1,c=g.length;b<c;b++)g[b]>f&&g[b]--}a.add("dom-contains",function(a,b,c){return!!c.contains});var d,e,f,g=[],h=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,i={defaultDelay:15,throttle:function(a,b,c){var d=!1;return c=c||i.defaultDelay,function(){d||(d=!0,a.apply(b,arguments),setTimeout(function(){d=!1},c))}},throttleDelayed:function(a,b,c){var d=!1;return c=c||i.defaultDelay,function(){if(!d){d=!0;var e=arguments;setTimeout(function(){d=!1,a.apply(b,e)},c)}}},debounce:function(a,b,c){var d;return c=c||i.defaultDelay,function(){d&&(clearTimeout(d),d=null);var e=arguments;d=setTimeout(function(){a.apply(b,e)},c)}},each:function(a,b,c){var d,e;if(a)if("number"==typeof a.length)for(d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a);else for(d in a)b.call(c,a[d],d,a)},contains:function(b,c){return a("dom-contains")?b.contains(c):8&b.compareDocumentPosition(c)},addCssRule:function(a,h){d||(d=b(document.getElementsByTagName("head")[0],"style"),d=d.sheet||d.styleSheet,e=d.deleteRule?"deleteRule":"removeRule",f=d.cssRules?"cssRules":"rules");var i=g.length;return g[i]=(d.cssRules||d.rules).length,d.addRule?d.addRule(a,h):d.insertRule(a+"{"+h+"}",g[i]),{get:function(a){return d[f][g[i]].style[a]},set:function(a,b){void 0!==g[i]&&(d[f][g[i]].style[a]=b)},remove:function(){c(i)}}},escapeCssIdentifier:function(a,b){return"string"==typeof a?a.replace(h,b||"\\$1"):a}};return i})},"put-selector/put":function(){!function(a){var b,c=/[-+,> ]/;a([],b=function(a,d){function e(b,c){b.appendChild(a.createTextNode(c))}function f(b){function d(){o&&n&&o!=n&&(n==b&&(k||(k=c.test(s)&&a.createDocumentFragment()))?k:n).insertBefore(o,m||null)}for(var k,l,m,n,o,p=arguments,q=p[0],r=0;r<p.length;r++){var s=p[r];if("object"==typeof s){if(l=!1,s instanceof Array){o=a.createDocumentFragment();for(var t=0;t<s.length;t++)o.appendChild(f(s[t]));s=o}if(s.nodeType)o=s,d(),n=s,m=0;else for(var t in s)o[t]=s[t]}else if(l)l=!1,e(o,s);else{r<1&&(b=null),l=!0;var u=s.replace(h,function(c,h,k,l,q,t){h&&(d(),"-"==h||"+"==h?(n=(m=o||n).parentNode,o=null,"+"==h&&(m=m.nextSibling)):("<"==h?n=o=(o||n).parentNode:(","==h?n=b:o&&(n=o),o=null),m=0),o&&(n=o));var u=!k&&l;if(u||!o&&(k||q))if("$"==u)e(n,p[++r]);else{u=u||f.defaultTag;var v=j&&p[r+1]&&p[r+1].name;v&&(u="<"+u+' name="'+v+'">'),o=i&&~(g=u.indexOf("|"))?a.createElementNS(i[u.slice(0,g)],u.slice(g+1)):a.createElement(u)}if(k)if("$"==l&&(l=p[++r]),"#"==k)o.id=l;else{var w=o.className,x=w&&(" "+w+" ").replace(" "+l+" "," ");if("."==k)o.className=w?(x+l).substring(1):l;else if("!"==s){var y;j?f("div",o,"<").innerHTML="":(y=o.parentNode)&&y.removeChild(o)}else(x=x.substring(1,x.length-1))!=w&&(o.className=x)}if(q)if("$"==t&&(t=p[++r]),"style"==q)o.style.cssText=t;else{var z="!"==q.charAt(0)?(q=q.substring(1))&&"removeAttribute":"setAttribute";t=""===t?q:t,i&&~(g=q.indexOf("|"))?o[z+"NS"](i[q.slice(0,g)],q.slice(g+1),t):o[z](q,t)}return""});if(u)throw new SyntaxError("Unexpected char "+u+" in "+s);d(),n=q=o||n}}return b&&k&&b.appendChild(k),q}c=d||c;var g,h=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,i=!1,a=a||document,j="object"==typeof a.createElement;return f.addNamespace=function(b,c){a.createElementNS?(i||(i={}))[b]=c:a.namespaces.add(b,c)},f.defaultTag="div",f.forDocument=b,f})}(function(a,b,c){c=c||b,"function"==typeof define?define([],function(){return c()}):"undefined"==typeof window?require("./node-html")(module,c):put=c()})},"xstyle/has-class":function(){define(["dojo/has"],function(a){var b={};return function(){for(var c,d=arguments,e=0;e<d.length;e++){var c=d[e];if(!b[c]){b[c]=!0;var f=c.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),g=a(f[2]),h=-f[4];(h>0?h<=g&&(-f[5]||h)>=g:!!g)==!f[1]&&(document.documentElement.className+=" has-"+c)}}}})},"xstyle/css":function(){define(["require"],function(moduleRequire){function testElementStyle(a,b,c){var d=document.documentElement,e=d.insertBefore(document.createElement(a),d.firstChild);e.id=b;var f=(e.currentStyle||getComputedStyle(e,null))[c];return d.removeChild(e),f}return{load:function(resourceDef,require,callback,config){function checkForParser(){var parser=testElementStyle("x-parse",null,"content");parser&&"none"!=parser&&"normal"!=parser?require([eval(parser)],callback):callback()}var url=require.toUrl(resourceDef),cachedCss=require.cache&&require.cache["url:"+url];if(cachedCss){if(cachedCss.xCss){var parser=cachedCss.parser,xCss=cachedCss.xCss;cachedCss=cachedCss.cssText}return moduleRequire(["./util/createStyleSheet"],function(a){a(cachedCss)}),checkForParser()}var displayStyle=testElementStyle("div",resourceDef.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if("none"==displayStyle)return checkForParser();moduleRequire(["./core/load-css"],function(a){a(url,checkForParser)})}}})},"xstyle/util/createStyleSheet":function(){define([],function(){function a(){return!document.createStyleSheet}var b=document.head;return function(c){if(a("dom-create-style-element"))return d=document.createElement("style"),d.setAttribute("type","text/css"),d.appendChild(document.createTextNode(c)),b.insertBefore(d,b.lastChild),d;var d=document.createStyleSheet();return d.cssText=c,d.owningElement}})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(a,b,c){return a([b,c],{})})},"dgrid/Grid":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","./util/misc","dojo/_base/sniff"],function(a,b,c,d,e,f,g){function h(a,b){b&&b.nodeType&&a.appendChild(b)}function i(a){return g.escapeCssIdentifier(a,"-")}function j(a,b,c,d){if(this.formatter){var e=this.formatter,f=this.grid.formatterScope;c.innerHTML="string"==typeof e&&f?f[e](b,a):this.formatter(b,a)}else null!=b&&c.appendChild(document.createTextNode(b))}var k=d("ie")<8&&!d("quirks"),l=b(f,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!=typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var d=a.columnId;if(d){b=d,c=a;break}a=a.parentNode}while(a&&a!=this.domNode)}if(!c&&void 0!==b){var e=this.row(a),f=e&&e.element;if(f)for(var g=f.getElementsByTagName("td"),h=0;h<g.length;h++)if(g[h].columnId==b){c=g[h];break}}return null!=a?{row:e||this.row(a),column:b&&this.column(b),element:c}:void 0},createRowCells:function(a,b,c,f){var g,h,j,l,m,n,o,p,q,r,s,t,u,v,w=e("table.dgrid-row-table[role=presentation]"),x=(this.cellNavigation,d("ie")<9||d("quirks")?e(w,"tbody"):w);for(c=c||this.subRows,h=0,j=c.length;h<j;h++)for(n=c[h],g=e(x,"tr"),n.className&&e(g,"."+n.className),l=0,m=n.length;l<m;l++)o=n[l],p=o.id,q=o.field?".field-"+i(o.field):"",r="function"==typeof o.className?o.className(f):o.className,r&&(q+="."+r),s=e(a+".dgrid-cell.dgrid-cell-padding"+(p?".dgrid-column-"+i(p):"")+q.replace(/ +/g,".")+"[role="+("th"===a?"columnheader":"gridcell")+"]"),s.columnId=p,k?(t=e(s,"!dgrid-cell-padding div.dgrid-cell-padding"),s.contents=t):t=s,u=o.colSpan,u&&(s.colSpan=u),v=o.rowSpan,v&&(s.rowSpan=v),b(t,o),g.appendChild(s);return w},left:function(a,b){return a.element||(a=this.cell(a)),this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,b){return a.element||(a=this.cell(a)),this.cell(this._move(a,b||1,"dgrid-cell"))},renderRow:function(a,b){var c=this.createRowCells("td",function(c,d){var e=a;d.get?e=d.get(a):"field"in d&&"_item"!=d.field&&(e=e[d.field]),d.renderCell?h(c,d.renderCell(a,e,c,b)):j.call(d,a,e,c,b)},b&&b.subRows,a);return e("div[role=row]>",c)},renderHeader:function(){var a=this,b=(this.columns,this.headerNode),f=b.childNodes.length;for(b.setAttribute("role","row");f--;)e(b.childNodes[f],"!");var g=this.createRowCells("th",function(a,b){var c=b.headerNode=a;k&&(a=a.parentNode);var d=b.field;d&&(a.field=d),b.renderHeaderCell?h(c,b.renderHeaderCell(c)):("label"in b||b.field)&&c.appendChild(document.createTextNode("label"in b?b.label:b.field)),!1!==b.sortable&&d&&"_item"!=d&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[g.id=this.id+"-header"]=this.columns,b.appendChild(g),this._sortListener&&this._sortListener.remove(),this._sortListener=c(g,"click,keydown",function(e){if("click"==e.type||32==e.keyCode||!d("opera")&&13==e.keyCode){var f,g,h,i,j=e.target;do{if(j.sortable){h=[{attribute:f=j.field||j.columnId,descending:(g=a._sort[0])&&g.attribute==f&&!g.descending}],i={bubbles:!0,cancelable:!0,grid:a,parentType:e.type,sort:h},c.emit(e.target,"dgrid-sort",i)&&(a._sortNode=j,a.set("sort",h));break}}while((j=j.parentNode)&&j!=b)}})},resize:function(){var a,b=this.headerNode.firstChild,c=this.contentNode;this.inherited(arguments),(!d("ie")||d("ie")>7&&!d("quirks"))&&(c.style.width="",c&&b&&(a=b.offsetWidth)!=c.offsetWidth&&(c.style.width=a+"px"))},destroy:function(){this._destroyColumns(),this._sortListener&&this._sortListener.remove(),this.inherited(arguments)},_setSort:function(a,b){this.inherited(arguments),this.updateSortArrow(this._sort)},_findSortArrowParent:function(a){var b=this.columns;for(var c in b){var d=b[c];if(d.field==a)return d.headerNode}},updateSortArrow:function(a,b){if(this._lastSortedArrow&&(e(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),e(this._lastSortedArrow,"!"),delete this._lastSortedArrow),b&&(this._sort=a),a[0]){var c,d=a[0].attribute,f=a[0].descending,g=this._sortNode||this._findSortArrowParent(d);delete this._sortNode,g&&(g=g.contents||g,c=this._lastSortedArrow=e("div.dgrid-sort-arrow.ui-icon[role=presentation]"),c.innerHTML="&nbsp;",g.insertBefore(c,g.firstChild),e(g,f?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(a,b){return this.addCssRule("#"+g.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+i(a),b)},_configColumns:function(a,b){function c(c,f){"string"==typeof c&&(b[f]=c={label:c}),e||c.field||(c.field=f),f=c.id=c.id||(isNaN(f)?f:a+f),this._configColumn&&(this._configColumn(c,f,b,a),f=c.id),e&&(this.columns[f]=c),c.grid=this,"function"==typeof c.init&&c.init(),d.push(c)}var d=[],e=b instanceof Array;return g.each(b,c,this),e?b:d},_destroyColumns:function(){var a,b,c,d,e=this.subRows,f=e&&e.length;for(this.cleanup(),a=0;a<f;a++)for(b=0,d=e[a].length;b<d;b++)c=e[a][b],"function"==typeof c.destroy&&c.destroy()},configStructure:function(){var a=this.subRows,b=this._columns=this.columns;if(this.columns=!b||b instanceof Array?{}:b,a)for(var c=0;c<a.length;c++)a[c]=this._configColumns(c+"-",a[c]);else this.subRows=[this._configColumns("",b)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(a){this._destroyColumns(),this.subRows=null,this.columns=a,this._updateColumns()},_setSubRows:function(a){this._destroyColumns(),this.subRows=a,this._updateColumns()},setColumns:function(b){a.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4"),this.set("columns",b)},setSubRows:function(b){a.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4"),this.set("subRows",b)},_updateColumns:function(){this.configStructure(),this.renderHeader(),this.refresh(),this._lastCollection&&this.renderArray(this._lastCollection),this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});return l.appendIfNode=h,l.defaultRenderCell=j,l})},"dgrid/OnDemandList":function(){define(["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom","dojo/on","./util/misc","put-selector/put"],function(a,b,c,d,e,f,g,h,i){return c([a,b],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:1/0,bufferRows:10,farOffRemoval:2e3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:h.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var a=this;g(this.bodyNode,"scroll",h[this.pagingMethod](function(b){a._processScroll(b)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments),this._refreshTimeout&&clearTimeout(this._refreshTimeout)},renderQuery:function(a,b){function c(a){if(i(n,"!"),a)throw h._refreshDeferred&&(h._refreshDeferred.reject(a),delete h._refreshDeferred),a}var f,g,h=this,j=b&&b.container||this.contentNode,k={query:a,count:0,options:b},l=this.preload,m={node:i(j,"div.dgrid-preload",{rowIndex:0}),count:0,query:a,next:k,options:b};m.node.style.height="0",k.node=f=i(j,"div.dgrid-preload"),k.previous=m,f.rowIndex=this.minRowsPerPage,l?((k.next=l.next)&&f.offsetTop>=l.node.offsetTop?k.previous=l:(k.next=l,k.previous=l.previous),k.previous.next=k,k.next.previous=k):this.preload=k;var n=i(f,"-div.dgrid-loading");return i(n,"div.dgrid-below").innerHTML=this.loadingMessage,b=d.mixin(this.get("queryOptions"),b,{start:0,count:this.minRowsPerPage},"level"in a?{queryLevel:a.level}:null),this._trackError(function(){return g=a(b)}),void 0===g?void c():(e.when(h.renderArray(g,f,b),function(a){var d=void 0===g.total?g.length:g.total;return e.when(d,function(c){var d=a.length,e=f.parentNode,j=h.noDataNode;i(n,"!"),"queryLevel"in b||(h._total=c),0===c&&e&&(j&&(i(j,"!"),delete h.noDataNode),h.noDataNode=j=i("div.dgrid-no-data"),e.insertBefore(j,h._getFirstRowSibling(e)),j.innerHTML=h.noDataMessage);for(var l=0,m=0;m<d;m++)l+=h._calcRowHeight(a[m]);return d&&l&&(h.rowHeight=l/d),c-=d,k.count=c,f.rowIndex=d,c?f.style.height=Math.min(c*h.rowHeight,h.maxEmptySpace)+"px":(f.style.display="none",b.count++),h._previousScrollPosition&&(h.scrollTo(h._previousScrollPosition),delete h._previousScrollPosition),h._processScroll(),h._refreshDeferred&&(h._refreshDeferred.resolve(g),delete h._refreshDeferred),a},c)},c),g)},refresh:function(a){var b,c,d=this,f=a&&a.keepScrollPosition;if(void 0===f&&(f=this.keepScrollPosition),f&&(this._previousScrollPosition=this.getScrollPosition()),this.inherited(arguments),this.store)return b=this._refreshDeferred=new e,c=d.renderQuery(function(a){return d.store.query(d.query,a)}),void 0===c&&b.reject(),b.then(function(a){return d._refreshTimeout=setTimeout(function(){g.emit(d.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:d,results:a}),d._refreshTimeout=null},0),delete d._refreshDeferred,a},function(a){throw delete d._refreshDeferred,a})},resize:function(){this.inherited(arguments),this._processScroll()},_getFirstRowSibling:function(a){return a.lastChild},_calcRowHeight:function(a){var b=a.nextSibling;return b&&!/\bdgrid-preload\b/.test(b.className)?b.offsetTop-a.offsetTop:a.offsetHeight},lastScrollTop:0,_processScroll:function(a){function b(a,b,d,e){var f=m.farOffRemoval,g=a.node;if(b>2*f){for(var h,j=g[d],k=0,l=0,n=[];h=j;){var o=m._calcRowHeight(h);if(k+o+f>b||j.className.indexOf("dgrid-row")<0&&j.className.indexOf("dgrid-loading")<0)break;var j=h[d];k+=o,l+=h.count||1,m.removeRow(h,!0),n.push(h)}a.count+=l,e?(g.rowIndex-=l,c(a)):g.style.height=g.offsetHeight+k+"px";var p=i("div",n);setTimeout(function(){i(p,"!")},1)}}function c(a,b){a.node.style.height=Math.min(a.count*m.rowHeight,b?1/0:m.maxEmptySpace)+"px"}function f(a,b){do{a=b?a.next:a.previous}while(a&&!a.node.offsetWidth);return a}var g,h,j,k,l,m=this,n=m.bodyNode,o=a&&a.scrollTop||this.getScrollPosition().y,p=n.offsetHeight+o,q=m.preload,r=m.lastScrollTop,s=m.bufferRows*m.rowHeight,t=s-m.rowHeight,u=!0,v=1;for(m.lastScrollTop=o;q&&!q.node.offsetWidth;)q=q.previous;for(;q&&q!=g;){g=m.preload,m.preload=q,h=q.node;var w=h.offsetTop;if(p+v+t<w)q=f(q,u=!1);else if(o-v-t>w+h.offsetHeight)q=f(q,u=!0);else{var x=((h.rowIndex?o-s:p)-w)/m.rowHeight,y=(p-o+2*s)/m.rowHeight,z=Math.max(Math.min((o-r)*m.rowHeight,m.maxRowsPerPage/2),m.maxRowsPerPage/-2);if(y+=Math.min(Math.abs(z),10),0==h.rowIndex&&(x-=y),x=Math.max(x,0),x<10&&x>0&&y+x<m.maxRowsPerPage&&(y+=Math.max(0,x),x=0),0==(y=Math.min(Math.max(y,m.minRowsPerPage),m.maxRowsPerPage,q.count))){q=f(q,u);continue}y=Math.ceil(y),x=Math.min(Math.floor(x),q.count-y);var A=d.mixin(m.get("queryOptions"),q.options);q.count-=y;var B,C=h,D=m.queryRowsOverlap,E=(h.rowIndex>0||h.offsetTop>o)&&q;if(E){var F=q.previous;F&&(b(F,o-(F.node.offsetTop+F.node.offsetHeight),"nextSibling"),x>0&&F.node==h.previousSibling?(x=Math.min(q.count,x),q.previous.count+=x,c(q.previous,!0),h.rowIndex+=x,D=0):y+=x,q.count-=x),A.start=h.rowIndex-D,A.count=Math.min(y+D,m.maxRowsPerPage),h.rowIndex=A.start+A.count}else{if(q.next){b(q.next,q.next.node.offsetTop-p,"previousSibling",!0);var C=h.nextSibling;C==q.next.node?(q.next.count+=q.count-x,q.next.node.rowIndex=x+y,c(q.next),q.count=x,D=0):B=!0}A.start=q.count,A.count=Math.min(y+D,m.maxRowsPerPage)}if(B&&C&&C.offsetWidth&&(B=C.offsetTop),c(q),"level"in q.query&&(A.queryLevel=q.query.level),!("queryLevel"in A)&&(A.start>m._total||A.count<0))continue;var G=i(C,"-div.dgrid-loading[style=height:"+y*m.rowHeight+"px]"),H=i(G,"div.dgrid-"+(E?"below":"above"));H.innerHTML=m.loadingMessage,G.count=y;var I=q.query(A),J=m._trackError(function(){return I});if(void 0===J)return void i(G,"!");(function(a,b,d,f){l=e.when(m.renderArray(f,a,A),function(g){if(k=f,C=a.nextSibling,i(a,"!"),d&&C&&C.offsetWidth){var h=m.getScrollPosition();m.scrollTo({x:h.x,y:h.y+C.offsetTop-d,preserveMomentum:!0})}return e.when(f.total||f.length,function(a){"queryLevel"in A||(m._total=a),b&&(b.count=a-b.node.rowIndex,0===b.count&&A.count++,c(b))}),m._processScroll(),g},function(b){throw i(a,"!"),b})}).call(this,G,E,B,I),q=q.previous}}l&&(j=this._refreshDeferred)&&(delete this._refreshDeferred,e.when(l,function(){j.resolve(k)}))},removeRow:function(a,b){function c(a,b){return null!=a?a:b}if(a){var d=a.previousSibling,e=a.nextSibling,g=d&&c(d.observerIndex,d.previousObserverIndex),h=e&&c(e.observerIndex,e.nextObserverIndex),i=a.observerIndex;if(a.observerIndex=void 0,b&&(a.nextObserverIndex=h,a.previousObserverIndex=g),this.cleanEmptyObservers&&i>-1&&i!==g&&i!==h){var j=this.observers,k=j[i];if(k){if(!b)for(var l=k.rows,m=0;m<l.length;m++)if(l[m]!=a&&f.isDescendant(l[m],this.domNode))return this.inherited(arguments);k.cancel(),this._numObservers--,j[i]=0}}}this.inherited(arguments)}})})},"dgrid/_StoreMixin":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","put-selector/put"],function(a,b,c,d,e,f,g){function h(a){return a}function i(a){if("object"!=typeof a)a=new Error(a);else if("cancel"===a.dojoType)return;a.grid=this,e.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})}return b(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={},this.queryOptions={},this.dirty={},this._updating={},this._columnsWithSet={},f.before(this,"configStructure",c.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments),this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments),this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a),this.inherited(arguments)},_updateNotifyHandle:function(a){if(this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle),a&&"function"==typeof a.notify&&this.shouldObserveStore){this._notifyHandle=f.after(a,"notify",c.hitch(this,"_onNotify"),!0);var b=this.get("sort");!b||b.length}},_setStore:function(a,b,c){this._updateNotifyHandle(a),this.store=a,this.dirty={},this.set("query",b,c)},_setQuery:function(a,b){var c=b&&b.sort;this.query=void 0!==a?a:this.query,this.queryOptions=b||this.queryOptions,this._started&&(c?this.set("sort",c):this.refresh())},setStore:function(b,c,d){a.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4"),this.set("store",b,c,d)},setQuery:function(b,c){a.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4"),this.set("query",b,c)},_getQueryOptions:function(){var a=c.delegate(this.queryOptions,{});return("function"==typeof this._sort||this._sort.length)&&(a.sort=this._sort),a},_getQuery:function(){var a=this.query;return"object"==typeof a&&null!=a?c.delegate(a,{}):a},_setSort:function(a,b){this.store&&(this._lastCollection=null),this.inherited(arguments)},_onNotify:function(a,b){this.inherited(arguments),a&&this._numObservers<1&&this.refresh({keepScrollPosition:!0})},refresh:function(){var a=this.inherited(arguments);return this.store||(this.noDataNode=g(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage),a},renderArray:function(){var a=this,b=this.inherited(arguments);return this.store||d.when(b,function(b){b.length&&a.noDataNode&&g(a.noDataNode,"!")}),b},insertRow:function(a,b,d,e,f){var g,h=this.store,i=this.dirty,j=h&&h.getIdentity(a);return j in i&&!(j in this._updating)&&(g=i[j]),g&&(a=c.delegate(a,g)),this.inherited(arguments)},updateDirty:function(a,b,c){var d=this.dirty,e=d[a];e||(e=d[a]={}),e[b]=c},setDirty:function(b,c,d){a.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4"),this.updateDirty(b,c,d)},save:function(){function a(a,f){return function(g){var h,i,j=b._columnsWithSet,k=b._updating;if("function"==typeof g.set)g.set(f);else for(h in f)g[h]=f[h];for(h in j)void 0!==(i=j[h].set(g))&&(g[h]=i);return k[a]=!0,d.when(c.put(g),function(){delete e[a],delete k[a]})}}var b=this,c=this.store,e=this.dirty,f=new d,g=f.promise,h=function(a){var d;return b.getBeforePut||!(d=b.row(a).data)?function(){return c.get(a)}:function(){return d}};for(var i in e){var j=a(i,e[i]);g=g.then(h(i)).then(j)}return f.resolve(),g},revert:function(){this.dirty={},this.refresh()},_trackError:function(a){var b;"string"==typeof a&&(a=c.hitch(this,a));try{b=a()}catch(a){i.call(this,a)}return d.when(b,h,c.hitch(this,i))},newRow:function(){var a=this.inherited(arguments);return this.noDataNode&&(g(this.noDataNode,"!"),delete this.noDataNode),a},removeRow:function(a,b){var c={element:a};return!b&&this.noDataMessage&&this.up(c).element===a&&this.down(c).element===a&&(this.noDataNode=g(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage),this.inherited(arguments)}})})},"dgrid/Keyboard":function(){define(["dojo/_base/declare","dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","./util/misc","dojo/_base/Deferred","dojo/_base/sniff"],function(a,b,c,d,e,f,g,h){function i(a){a.preventDefault()}var j={checkbox:1,radio:1,button:1},k=/\bdgrid-cell\b/,l=/\bdgrid-row\b/,m=a(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments),this.keyMap||(this.keyMap=d.mixin({},m.defaultKeyMap)),this.headerKeyMap||(this.headerKeyMap=d.mixin({},m.defaultHeaderKeyMap))},postCreate:function(){function a(a){var b=a.target;return b.type&&(!j[b.type]||32==a.keyCode)}function d(d){function f(){if(e._focusedHeaderNode&&(e._focusedHeaderNode.tabIndex=-1),e.showHeader){if(i){for(var a,b=0,c=e.headerNode.getElementsByTagName("th");a=c[b];++b)if(j.test(a.className)){e._focusedHeaderNode=n=a;break}}else e._focusedHeaderNode=n=e.headerNode;n&&(n.tabIndex=e.tabIndex)}}var i=e.cellNavigation,j=i?k:l,m=d===e.headerNode,n=d;m?(f(),b.after(e,"renderHeader",f,!0)):b.after(e,"renderArray",function(a){return h.when(a,function(a){var b=e._focusedNode||n;if(j.test(b.className)&&g.contains(d,b))return a;for(var c,f=0,h=d.getElementsByTagName("*");c=h[f];++f)if(j.test(c.className)){b=e._focusedNode=c;break}return b.tabIndex=e.tabIndex,a})}),e._listeners.push(c(d,"mousedown",function(b){a(b)||e._focusOnNode(b.target,m,b)})),e._listeners.push(c(d,"keydown",function(b){if(!b.metaKey&&!b.altKey){var c=e[m?"headerKeyMap":"keyMap"][b.keyCode];c&&!a(b)&&c.call(e,b)}}))}this.inherited(arguments);var e=this;this.tabableHeader&&(d(this.headerNode),c(this.headerNode,"dgrid-cellfocusin",function(){e.scrollTo({x:this.scrollLeft})})),d(this.contentNode),this._debouncedEnsureRowScroll=g.debounce(this._ensureRowScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b,c=this,d=document.activeElement===this._focusedNode,e=this[this.cellNavigation?"cell":"row"](this._focusedNode),f=e.row||e;a=a.element||a,a===f.element&&(b=this.down(f,!0),b&&b.element!==a||(b=this.up(f,!0)),this._removedFocus={active:d,rowId:f.id,columnId:e.column&&e.column.id,siblingId:b&&b.element!==a?b.id:void 0},setTimeout(function(){c._removedFocus&&c._restoreFocus(f.id)},0),this._focusedNode=null),this.inherited(arguments)},insertRow:function(a){var b=this.inherited(arguments);return this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(b),b},_restoreFocus:function(a){var b,c,d=this._removedFocus;if(a=a&&this.row(a),(b=a&&a.element&&a.id===d.rowId?a:void 0!==d.siblingId&&this.row(d.siblingId))&&b.element){if(!b.element.parentNode.parentNode)return void(d.wait=!0);void 0!==d.columnId&&(c=this.cell(b,d.columnId))&&c.element&&(b=c),d.active&&0!==b.element.offsetHeight?this._focusOnNode(b,!1,null):(f(b.element,".dgrid-focus"),b.element.tabIndex=this.tabIndex,this._focusedNode=b.element)}delete this._removedFocus},addKeyHandler:function(a,c,d){return b.after(this[d?"headerKeyMap":"keyMap"],a,c,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_focusOnNode:function(a,b,g){var h,i,j,m,n,o="_focused"+(b?"Header":"")+"Node",p=this[o],q=this.cellNavigation?"cell":"row",r=this[q](a);if(a=r&&r.element){if(this.cellNavigation)for(h=a.getElementsByTagName("input"),n=0,j=h.length;n<j;n++)if(i=h[n],(-1!=i.tabIndex||"_dgridLastValue"in i)&&!i.disabled){e("ie")<8&&(i.style.position="relative"),i.focus(),e("ie")<8&&(i.style.position=""),m=!0;break}null!==g&&(g=d.mixin({grid:this},g),g.type&&(g.parentType=g.type),g.bubbles||(g.bubbles=!0)),p&&(f(p,"!dgrid-focus[!tabIndex]"),e("ie")<8&&(p.style.position=""),g&&(g[q]=this[q](p),c.emit(p,"dgrid-cellfocusout",g))),p=this[o]=a,g&&(g[q]=r);var s=this.cellNavigation?k:l;!m&&s.test(a.className)&&(e("ie")<8&&(a.style.position="relative"),a.tabIndex=this.tabIndex,a.focus()),f(a,".dgrid-focus"),g&&c.emit(p,"dgrid-cellfocusin",g),this.cellNavigation&&(this.columnSets||this.subRows.length>1)&&!b&&this._debouncedEnsureRowScroll(r.row.element)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){var b=a||this._focusedNode;b?this._focusOnNode(b,!1):this.contentNode.focus()}}),n=m.moveFocusVertical=function(a,b){var c=this.cellNavigation,d=this[c?"cell":"row"](a),e=c&&d.column.id,f=this.down(this._focusedNode,b,!0);c&&(f=this.cell(f,e)),this._focusOnNode(f,!1,a),a.preventDefault()},o=m.moveFocusUp=function(a){n.call(this,a,-1)},p=m.moveFocusDown=function(a){n.call(this,a,1)},q=m.moveFocusPageUp=function(a){n.call(this,a,-this.pageSkip)},r=m.moveFocusPageDown=function(a){n.call(this,a,this.pageSkip)},s=m.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var c=!this.row(a),d=this["_focused"+(c?"Header":"")+"Node"];this._focusOnNode(this.right(d,b),c,a),a.preventDefault()}},t=m.moveFocusLeft=function(a){s.call(this,a,-1)},u=m.moveFocusRight=function(a){s.call(this,a,1)},v=m.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a)),a.preventDefault()},w=m.moveHeaderFocusHome=function(a){v.call(this,a,!0)},x=m.moveFocusEnd=function(a,c){var f,g=this,i=this.cellNavigation,j=this.contentNode,k=c?0:j.scrollHeight,l=j.scrollTop+k,m=j[c?"firstChild":"lastChild"],n=m.className.indexOf("dgrid-preload")>-1,o=n?m[(c?"next":"previous")+"Sibling"]:m,p=o.offsetTop+(c?0:o.offsetHeight);if(n){for(;o&&o.className.indexOf("dgrid-row")<0;)o=o[(c?"next":"previous")+"Sibling"];if(!o)return}!n||m.offsetHeight<1?(i&&(o=this.cell(o,this.cell(a).column.id)),this._focusOnNode(o,!1,a)):(e("dom-addeventlistener")||(a=d.mixin({},a)),f=b.after(this,"renderArray",function(b){return f.remove(),h.when(b,function(b){var d=b[c?0:b.length-1];i&&(d=g.cell(d,g.cell(a).column.id)),g._focusOnNode(d,!1,a)})})),l===p&&a.preventDefault()},y=m.moveFocusHome=function(a){x.call(this,a,!0)};return m.defaultKeyMap={32:i,33:q,34:r,35:x,36:y,37:t,38:o,39:u,40:p},m.defaultHeaderKeyMap={32:i,35:v,36:w,37:t,39:u},m})},
"dgrid/editor":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/on","dojo/aspect","dojo/has","dojo/query","dojo/when","./Grid","put-selector/put","dojo/_base/sniff"],function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){a.value=b,"radio"!=a.type&&"checkbox"!=a.type||(a.checked=a.defaultChecked=!!b)}function m(a){var b=a.get("item"),c=a.get("value"),d=a._dgridLastValue;if("number"==typeof d)c=isNaN(c)?c:parseFloat(c);else if("boolean"==typeof d)c="true"==c||"false"!=c&&c;else if(d instanceof Date){var e=new Date(c);c=isNaN(e.getTime())?c:e}else"object"==typeof d&&b&&(c=b);return c}function n(a,b){return m("function"==typeof b.get?b:b["checkbox"==b.type||"radio"==b.type?"checked":"value"])}function o(a,b,c,d,f){var g,h,i,j;if((c&&c.valueOf())!=(d&&d.valueOf())&&(g=b.element,h=b.row,i=b.column,i.field&&h)){if(j={grid:a,cell:b,rowId:h.id,oldValue:c,value:d,bubbles:!0,cancelable:!0},f&&f.type&&(j.parentType=f.type),!e.emit(g,"dgrid-datachange",j)){var k;return(k=g.widget)?(k._dgridIgnoreChange=!0,k.set("value",c),setTimeout(function(){k._dgridIgnoreChange=!1},0)):(k=g.input)&&l(k,c),c}a.updateDirty?(a.updateDirty(h.id,i.field,d),i.autoSave&&setTimeout(function(){a._trackError("save")},0)):h.data[i.field]=d}return d}function p(a,b,c){var d,e,f,g=a.cell(b.domNode||b),i=g.column,j=a._activeCell;if((!b.isValid||b.isValid())&&(d=o(a,g,j?a._activeValue:b._dgridLastValue,n(i,b),c),j?a._activeValue=d:b._dgridLastValue=d,"radio"===b.type&&b.name&&!i.editOn&&i.field)){f=a.row(b),h("input[type=radio][name="+b.name+"]",a.contentNode).forEach(function(c){var d=a.row(c);c!==b&&c._dgridLastValue&&(c._dgridLastValue=!1,a.updateDirty?a.updateDirty(d.id,i.field,!1):d.data[i.field]=!1)});for(e in a.dirty)f.id!==e&&a.dirty[e][i.field]&&a.updateDirty(e,i.field,!1)}}function q(a){var c,d,f,h,i,j=a.editor,l=a.editOn,m=a.grid,n="string"!=typeof j;return c=a.editorArgs||{},"function"==typeof c&&(c=c.call(m,a)),n?(d=new j(c),f=d.focusNode||d.domNode,f.className+=" dgrid-input",d.connect(d,l?"onBlur":"onChange",function(){d._dgridIgnoreChange||p(m,this,{type:"widget"})})):(i=function(a){var b=a.target;"_dgridLastValue"in b&&b.className.indexOf("dgrid-input")>-1&&p(m,b,a)},a.grid._hasInputListener||(m._hasInputListener=!0,m.on("change",function(a){i(a)})),h="textarea"==j?"textarea":"input[type="+j+"]",d=f=k(h+".dgrid-input",b.mixin({name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},c)),(g("ie")<9||g("ie")&&g("quirks"))&&("radio"==j||"checkbox"==j?e(d,"click",function(a){i(a)}):e(d,"change",function(a){i(a)}))),d}function r(a,c){function d(){var a=m._activeCell;r.blur(),"function"==typeof m.focus&&setTimeout(function(){m.focus(a)},n&&g("ie")<9?15:0)}function f(){var c=o.parentNode,d=c.children.length-1,f={alreadyHooked:!0},g=m.cell(o);if(e.emit(g.element,"dgrid-editor-hide",{grid:m,cell:g,column:a,editor:i,bubbles:!0,cancelable:!1}),a._editorBlurHandle.pause(),c.removeChild(o),g.row){for(k(g.element,"!dgrid-cell-editing");d--;)k(c.firstChild,"!");j.appendIfNode(c,a.renderCell(a.grid.row(c).data,m._activeValue,c,m._activeOptions?b.delegate(f,m._activeOptions):f))}m._focusedEditorCell=m._activeCell=m._activeValue=m._activeOptions=null}function h(b){var c=b.keyCode||b.which;27==c?(s(),m._activeValue=i._dgridLastValue,d()):13==c&&!1!==a.dismissOnEnter&&d()}var i=q(a),m=a.grid,n=i.domNode,o=i.domNode||i,r=i.focusNode||o,s=n?function(){i.set("value",i._dgridLastValue)}:function(){l(i,i._dgridLastValue),p(a.grid,i)};return e(r,"keydown",h),(a._editorBlurHandle=e.pausable(i,"blur",f)).pause(),i}function s(a,b,c,d,e){var f=a.domNode;f||l(a,d),c.innerHTML="",k(c,".dgrid-cell-editing"),k(c,a.domNode||a),f&&!b.editOn?b.grid._editorsPendingStartup.push([a,b,c,d]):t(a,b,c,d,e)}function t(a,b,c,d,f){var g=b.grid;a.domNode&&(a._started||a.startup({row:f}),a._dgridIgnoreChange=!0,a.set("value",d),setTimeout(function(){a._dgridIgnoreChange=!1},0)),a._dgridLastValue=d,g._activeCell&&(g._activeValue=d,e.emit(c,"dgrid-editor-show",{grid:g,cell:g.cell(c),column:b,editor:a,bubbles:!0,cancelable:!1}))}function u(a){for(var b=a._editorsPendingStartup,c=b.length;c--;)t.apply(null,b[c]);a._editorsPendingStartup=[]}function v(a){function b(a,b){e.grid._activeCell=f,s(e.editorInstance,e,f,i,b),e._editTimer=setTimeout(function(){j.focus&&j.focus(),e._editorBlurHandle&&e._editorBlurHandle.resume(),e._editTimer=null,a.resolve(j)},0)}var c,e,f,g,h,i,j,k,l;if(a.column||(a=this.cell(a)),!a||!a.element)return null;if(e=a.column,h=e.field,f=a.element.contents||a.element,j=e.editorInstance){if(e.grid._activeCell!=f&&(c=a.row,g=this.dirty&&this.dirty[c.id],i=g&&h in g?g[h]:e.get?e.get(c.data):c.data[h],!e.canEdit||e.canEdit(a.row.data,i)))return k=new d,l=j.domNode||j,l.offsetWidth?(l.blur(),setTimeout(function(){b(k,c)},0)):b(k,c),k.promise}else if(e.editor&&(j=f.widget||f.input))return k=new d,j.focus&&j.focus(),k.resolve(j),k.promise;return null}return function(b,d,g){function h(a){var b,c,d=a.grid;d.edit||(d.edit=v,d._editorsPendingStartup=[],m.push(e(d.domNode,".dgrid-input:focusin",function(){d._focusedEditorCell=d.cell(this)})),b=d._editorFocusoutHandle=e.pausable(d.domNode,".dgrid-input:focusout",function(){d._focusedEditorCell=null}),m.push(b),m.push(f.before(d,"removeRow",function(a){var e=d._focusedEditorCell;a=d.row(a),e&&e.row.id===a.id&&(c=e,b.pause(),setTimeout(function(){b.resume(),c=null},0))})),m.push(f.after(d,"insertRow",function(a){var b=d.row(a);return c&&c.row.id===b.id&&d.edit(d.cell(b,c.column.id)),a})),m.push(f.after(d,"renderArray",function(a){return i(a,function(a){a.length?u(d):d._editorsPendingStartup=[]}),a})),m.push(f.after(d,"_onNotification",function(){u(d)})))}var k,l=b.renderCell||j.defaultRenderCell,m=[];return b||(b={}),b.editor=d=d||b.editor||"text",b.editOn=g=g||b.editOn,k="string"!=typeof d,b.widgetArgs&&(a.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4"),b.editorArgs=b.widgetArgs),f.after(b,"init",g?function(){h(b),b.editorInstance=r(b,l)}:function(){var a=b.grid;h(b),k&&m.push(f.before(a,"removeRow",function(c){var d=a.cell(c,b.id).element,e=d&&(d.contents||d).widget;e&&(a._editorFocusoutHandle.pause(),e.destroyRecursive())}))}),f.after(b,"destroy",function(){c.forEach(m,function(a){a.remove()}),b._editorBlurHandle&&b._editorBlurHandle.remove(),b._editTimer&&clearTimeout(b._editTimer),g&&k&&b.editorInstance.destroyRecursive(),b.grid.edit=null,b.grid._editorsPendingStartup=null}),b.renderCell=g?function(a,c,d,f){var h=b.grid;return f&&f.alreadyHooked||e("TD"==d.tagName?d:d.parentNode,g,function(){h._activeOptions=f,h.edit(this)}),l.call(b,a,c,d,f)}:function(a,c,d,e){if(b.canEdit&&!b.canEdit(a,c))return l.call(b,a,c,d,e);var f=q(b);s(f,b,d,c),d[k?"widget":"input"]=f},b}})},"dgrid/selector":function(){define(["dojo/_base/kernel","dojo/_base/array","dojo/on","dojo/aspect","dojo/_base/sniff","put-selector/put"],function(a,b,c,d,e,f){return function(c,g){function h(a){return!l.allowSelect(l.row(a))}function i(a){return function(b){var d,e,f,g=b.rows,h=g.length,i="false";for(f=0;f<h;f++){var j=l.cell(g[f],c.id).element;j&&((j=(j.contents||j).input)&&!j.disabled&&(j.checked=a,j.setAttribute("aria-checked",a)))}if("checkbox"==m.type){d=l.selection,e=!1;for(f in d)if(d[f]!=l.allSelected){e=!0;break}m.indeterminate=e,m.checked=l.allSelected,e?i="mixed":l.allSelected&&(i="true"),m.setAttribute("aria-checked",i)}}}function j(a){if("click"==a.type||32==a.keyCode||!e("opera")&&13==a.keyCode||0===a.keyCode){var b=l.row(a);if(l._selectionTriggerEvent=a,b){if(l.allowSelect(b)){var c=l._lastSelected&&l.row(l._lastSelected);"radio"==g||"single"===l.selectionMode?c&&c.id==b.id||(l.clearSelection(),l.select(b,null,!0),l._lastSelected=b.element):b&&(a.shiftKey?i(!0)({rows:[b]}):c=null,c=a.shiftKey?c:null,l.select(c||b,b,c?void 0:null),l._lastSelected=b.element)}}else f(this,(l.allSelected?"!":".")+"dgrid-select-all"),l[l.allSelected?"clearSelection":"selectAll"]();l._selectionTriggerEvent=null}}function k(){l._hasSelectorInputListener=!0,n.push(l.on(".dgrid-selector:click,.dgrid-selector:keydown",j));var a=l._handleSelect;if(l._handleSelect=function(b){this.cell(b).column!=c&&a.apply(this,arguments)},"function"==typeof c.disabled){var b=l.allowSelect,d=c.disabled;l.allowSelect=function(a){var e=b.call(this,a);return d===h?e:e&&!d.call(c,a.data)},c.disabled=h}else c.disabled=h;n.push(l.on("dgrid-select",i(!0))),n.push(l.on("dgrid-deselect",i(!1)))}var l,m,n=[];c||(c={}),c.type&&(c.selectorType=c.type,a.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4")),c.selectorType=g=g||c.selectorType||"checkbox",c.sortable=!1;var o="function"==typeof g?g:function(a,b,d){var e,h=b.parentNode;l._hasSelectorInputListener||k(),e=c.disabled,f(h&&h.contents?h:b,".dgrid-selector");var i=b.input||(b.input=f(b,"input[type="+g+"]",{tabIndex:isNaN(c.tabIndex)?-1:c.tabIndex,disabled:e&&("function"==typeof e?e.call(c,d):e),checked:a}));return i.setAttribute("aria-checked",!!a),i};return d.after(c,"init",function(){l=c.grid}),d.after(c,"destroy",function(){b.forEach(n,function(a){a.remove()}),l._hasSelectorInputListener=!1}),c.renderCell=function(a,b,c,d,e){var f=a&&l.row(a);b=f&&l.selection[f.id],o(b,c,a)},c.renderHeaderCell=function(a){var b="label"in c?c.label:c.field||"";"radio"!=g&&l.allowSelectAll?o(!1,a,{}):(a.appendChild(document.createTextNode(b)),l._hasSelectorInputListener||k()),m=a.lastChild},c}})},"dgrid/extensions/ColumnHider":function(){define(["dojo/_base/declare","dojo/has","dojo/on","../util/misc","put-selector/put","dojo/i18n!./nls/columnHider","xstyle/css!../css/extensions/ColumnHider.css"],function(a,b,c,d,e,f){function g(a,b){return a.id.substr(b.id.length+18)}var h,i,j=b("ie"),k=j&&b("quirks"),l=j<8||k?"htmlFor":"for";return a(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:f,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var a,b,c,d,e=this.subRows,f=!0;for(delete this._columnHiderFirstCheckbox,c=0,a=e.length;c<a;c++)for(d=0,b=e[c].length;d<b;d++)this._renderHiderMenuEntry(e[c][d]),f&&(f=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[e[c][d].id])},_renderHiderMenuEntry:function(a){var b,c,f,g=a.id,h=d.escapeCssIdentifier(g,"-");a.hidden&&(a.hidden=!1,this._hideColumn(g),a.hidden=!0),a.unhidable||(b=e("div.dgrid-hider-menu-row"),c=this.domNode.id+"-hider-menu-check-"+h,f=this._columnHiderCheckboxes[g]=e(b,"input.dgrid-hider-menu-check.hider-menu-check-"+h+"[type=checkbox]"),f.id=c,e(b,"label.dgrid-hider-menu-label.hider-menu-label-"+h+"["+l+"="+c+"]",a.label||a.field||""),e(this.hiderMenuNode,b),a.hidden||(f.checked=!0))},renderHeader:function(){function a(a){a.stopPropagation()}var b,d=this,f=this.hiderMenuNode,l=this.hiderToggleNode;if(this.inherited(arguments),f){for(b in this._columnHiderRules)this._columnHiderRules[b].remove();f.innerHTML=""}else l=this.hiderToggleNode=e(this.domNode,"button.ui-icon.dgrid-hider-toggle[type=button][aria-label="+this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(c(l,"click",function(a){d._toggleColumnHiderMenu(a)})),f=this.hiderMenuNode=e("div.dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]"),f.id=this.id+"-hider-menu",this._listeners.push(c(f,"keyup",function(a){27===(a.charCode||a.keyCode)&&(d._toggleColumnHiderMenu(a),l.focus())})),f.style.display="none",e(this.domNode,f),this._listeners.push(c(f,".dgrid-hider-menu-check:"+(j<9||k?"click":"change"),function(a){d._updateColumnHiddenState(g(a.target,d),!a.target.checked)})),this._listeners.push(c(f,"mousedown",a),c(l,"mousedown",a)),i||(i=c.pausable(document,"mousedown",function(a){h&&h._toggleColumnHiderMenu(a)}),i.pause());this._columnHiderCheckboxes={},this._columnHiderRules={},this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var a in this._columnHiderRules)this._columnHiderRules[a].remove()},left:function(a,b){return this.right(a,-b)},right:function(a,b){a.element||(a=this.cell(a));for(var c=this.inherited(arguments),d=a;c.column.hidden;){if(c=this.inherited(arguments,[c,b>0?1:-1]),d.element===c.element)return a;d=c}return c},isColumnHidden:function(a){return!!this._columnHiderRules[a]},_toggleColumnHiderMenu:function(){var a,b=this._hiderMenuOpened,c=this.hiderMenuNode,d=this.domNode;c.style.display=b?"none":"",b?c.style.height="":(c.offsetHeight>d.offsetHeight-12&&(c.style.height=d.offsetHeight-12+"px"),(a=this._columnHiderFirstCheckbox)&&a.focus()),i[b?"pause":"resume"](),h=b?null:this,this._hiderMenuOpened=!b},_hideColumn:function(a){var c,e=this,f="#"+d.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-";this._columnHiderRules[a]||(this._columnHiderRules[a]=d.addCssRule(f+d.escapeCssIdentifier(a,"-"),"display: none;"),8!==b("ie")&&10!==b("ie")||b("quirks")||(c=d.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){c.remove(),e.resize()},0)))},_showColumn:function(a){this._columnHiderRules[a]&&(this._columnHiderRules[a].remove(),delete this._columnHiderRules[a])},_updateColumnHiddenState:function(a,b){this[b?"_hideColumn":"_showColumn"](a),this.columns[a].hidden=b,c.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[a],hidden:b,bubbles:!0}),this.resize()},toggleColumnHiddenState:function(a,b){void 0===b&&(b=!this._columnHiderRules[a]),this._updateColumnHiddenState(a,b),this._columnHiderCheckboxes[a].checked=!b}})})},"dgrid/extensions/ColumnReorder":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/on","dojo/query","dojo/dnd/Source","put-selector/put","xstyle/css!../css/extensions/ColumnReorder.css"],function(a,b,c,d,e,f,g){function h(a,b){var c=b[2],d=a[c?"columnSets":"subRows"][b[1]];return c?d[b[2]]:d}function i(a,b,c){b[2]?a.columnSets[b[1]][b[2]]=c:a.subRows[b[1]]=c}function j(a){return"dgrid-"+a+"-"}function k(a,b){return b.slice(j(a).length)}var l=/(\d+)(?:-(\d+))?$/,m=b(f,{copyState:function(){return!1},checkAcceptance:function(a,b){return a==this},_legalMouseDown:function(a){return!(a.target.className.indexOf("dgrid-resize-handle")>-1)&&this.inherited(arguments)},onDropInternal:function(a){var b=this.grid,e=l.exec(k(b.id,a[0].getAttribute("dndType"))),f=e[2]?"columnSets":"subRows",g=h(b,e),j=b.columns;this.inherited(arguments),e&&setTimeout(function(){var h,k=c.map(a[0].parentNode.childNodes,function(a){return j[a.columnId]});i(b,e,k),h={grid:b,subRow:k,column:j[a[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"},h[f]=b[f],d.emit(b.domNode,"dgrid-columnreorder",h)?b.set(f,b[f]):(i(b,e,g),b.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}}),n=b(null,{columnDndConstructor:m,_initSubRowDnd:function(a,b){var c,d,e,f,h;for(d=0,e=a.length;d<e;d++)f=a[d],!1!==f.reorderable&&(h=f.headerNode,"TH"!=h.tagName&&(h=h.parentNode),g(h,".dojoDndItem[dndType="+b+"]"),c||(c=h.parentNode));c&&this._columnDndSources.push(new this.columnDndConstructor(c,{horizontal:!0,grid:this}))},renderHeader:function(){var a,b,d=j(this.id);if(this.inherited(arguments),this._columnDndSources=[],this.columnSets)for(b=0,a=this.columnSets.length;b<a;b++)c.forEach(this.columnSets[b],function(a,c){this._initSubRowDnd(a,d+b+"-"+c)},this);else c.forEach(this.subRows,function(a,b){this._initSubRowDnd(a,d+b)},this)},_destroyColumns:function(){this._columnDndSources&&c.forEach(this._columnDndSources,function(a){a.destroy()}),this.inherited(arguments)}});return n.ColumnDndSource=m,n})},"dgrid/extensions/ColumnResizer":function(){define(["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/has","../util/misc","put-selector/put","dojo/_base/html","xstyle/css!../css/extensions/ColumnResizer.css"],function(a,b,c,d,e,f,g,h,i){function j(a,b,c,d,e){for(var f=1;f<b;f++)a[c+f][d]=e}function k(a){for(var b=a.length,c=b,d=a[0].length,e=new Array(b);b--;)e[b]=new Array(d);var f={};for(b=0;b<c;b++)for(var g=e[b],h=a[b],i=0,k=0;i<d;i++){var l,m=h[k];if(void 0===g[i]){if(g[i]=m.id,m.rowSpan&&m.rowSpan>1&&j(e,m.rowSpan,b,i,m.id),b>0&&m.colSpan&&m.colSpan>1)for(l=1;l<m.colSpan;l++)g[++i]=m.id,m.rowSpan&&m.rowSpan>1&&j(e,m.rowSpan,b,i,m.id);f[m.id]=a[0][i].id,k++}}return f}function l(a,c,d,e,f){if(!(d<=0)){var g,i,j=a.columns[c];if(j)return g={grid:a,columnId:c,width:d,bubbles:!0,cancelable:!0},e&&(g.parentType=e),!a._resizedColumns||b.emit(a.headerNode,"dgrid-columnresize",g)?("auto"===d?delete j.width:(j.width=d,d+="px"),i=a._columnSizes[c],i?i.set("width",d):i=h.addCssRule("#"+h.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(c,"-"),"width: "+d+";"),a._columnSizes[c]=i,!1!==f&&a.resize(),!0):void 0}}var m,n=0,o={create:function(){m=i("div.dgrid-column-resizer")},destroy:function(){i(m,"!"),m=null},show:function(a){var b=f.position(a.domNode,!0);m.style.top=b.y+"px",m.style.height=b.h+"px",i(document.body,m)},move:function(a){m.style.left=a+"px"},hide:function(){m.parentNode.removeChild(m)}};return a(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments),n++||o.create()},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--n||o.destroy()},resizeColumnWidth:function(a,b){return l(this,a,b)},configStructure:function(){var a,b=this._oldColumnSizes=d.mixin({},this._columnSizes);this._resizedColumns=!1,this._columnSizes={},this.inherited(arguments);for(a in b)a in this._columnSizes||b[a].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b,c=a.id;"width"in a&&((b=this._oldColumnSizes[c])?b.set("width",a.width+"px"):b=h.addCssRule("#"+h.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(c,"-"),"width: "+a.width+"px;"),this._columnSizes[c]=b)},renderHeader:function(){this.inherited(arguments);var a,e=this;if(this.columnSets&&this.columnSets.length)for(var f=this.columnSets.length;f--;)a=d.mixin(a||{},k(this.columnSets[f]));else this.subRows&&this.subRows.length>1&&(a=k(this.subRows));for(var j=c(".dgrid-cell",e.headerNode),l=j.length;l--;){var m,n=j[l],o=n.columnId,p=e.columns[o],q=n.childNodes;if(p&&!1!==p.resizable){var r=i("div.dgrid-resize-header-container");for(n.contents=r;q.length>0;)i(r,q[0]);m=i(n,r,"div.dgrid-resize-handle.resizeNode-"+h.escapeCssIdentifier(o,"-")),m.columnId=a&&a[o]||o}}e.mouseMoveListen||(b(e.headerNode,".dgrid-resize-handle:mousedown"+(g("touch")?",.dgrid-resize-handle:touchstart":""),function(a){e._resizeMouseDown(a,this),e.mouseMoveListen.resume(),e.mouseUpListen.resume()}),e._listeners.push(e.mouseMoveListen=b.pausable(document,"mousemove"+(g("touch")?",touchmove":""),h.throttleDelayed(function(a){e._updateResizerPosition(a)}))),e._listeners.push(e.mouseUpListen=b.pausable(document,"mouseup"+(g("touch")?",touchend":""),function(a){e._resizeMouseUp(a),e.mouseMoveListen.pause(),e.mouseUpListen.pause()})),e.mouseMoveListen.pause(),e.mouseUpListen.pause())},_resizeMouseDown:function(a,b){a.preventDefault(),e.setSelectable(this.domNode,!1),this._startX=this._getResizeMouseLocation(a),this._targetCell=c(".dgrid-column-"+h.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0],this._updateResizerPosition(a),o.show(this)},_resizeMouseUp:function(a){var b,d,f,g=this._columnSizes;this.adjustLastColumn&&(f=this.headerNode.clientWidth-1),this._resizedColumns||(b=c(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?b=b.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in g)}):this.subRows&&this.subRows.length>1&&(b=b.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in g)})),d=b.map(function(a){return a.offsetWidth}),b.forEach(function(a,b){l(this,a.columnId,d[b],null,!1)},this),this._resizedColumns=!0),e.setSelectable(this.domNode,!0);var i=this._targetCell,j=this._getResizeMouseLocation(a)-this._startX,k=i.offsetWidth+j,m=this._getResizedColumnWidths(),n=m.totalWidth,p=m.lastColId,q=c(".dgrid-column-"+h.escapeCssIdentifier(p,"-"),this.headerNode)[0].offsetWidth;k<this.minWidth&&(k=this.minWidth),l(this,i.columnId,k,a.type)&&i.columnId!=p&&this.adjustLastColumn&&(n+j<f?l(this,p,"auto",a.type):q-j<=this.minWidth&&l(this,p,this.minWidth,a.type)),o.hide(),delete this._startX,delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){var b=this._getResizeMouseLocation(a),c=b-this._startX,d=this._targetCell.offsetWidth,e=b;d+c<this.minWidth&&(e=this._startX-(d-this.minWidth)),o.move(e)}},_getResizeMouseLocation:function(a){var b=0;return a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),b},_getResizedColumnWidths:function(){var a=0,b=c((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),d=b.length;if(!d)return{};for(var e=b[d-1].columnId;d--;)a+=b[d].offsetWidth;return{totalWidth:a,lastColId:e}}})})},"dgrid/extensions/Pagination":function(){define(["../_StoreMixin","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/query","dojo/string","dojo/has","put-selector/put","../util/misc","dojo/i18n!./nls/pagination","dojo/_base/sniff","xstyle/css!../css/extensions/Pagination.css"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){a.noDataNode?(j(a.noDataNode,"!"),delete a.noDataNode):a.cleanup(),a.contentNode.innerHTML=""}function n(a){if(a.loadingNode)j(a.loadingNode,"!"),delete a.loadingNode;else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes,a._oldPageObserver&&(a._oldPageObserver.cancel(),a._numObservers--,delete a._oldPageObserver)}delete a._isLoading}return b(a,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:l,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var a,b,c=this,d=this.paginationNode=j(this.footerNode,"div.dgrid-pagination"),e=this.paginationStatusNode=j(d,"div.dgrid-status"),g=this.i18nPagination;e.tabIndex=0,this._updatePaginationSizeSelect(),this._updateRowsPerPageOption(),e.innerHTML=h.substitute(g.status,{start:1,end:1,total:0}),a=this.paginationNavigationNode=j(d,"div.dgrid-navigation"),this.firstLastArrows&&(b=this.paginationFirstNode=j(a,"span.dgrid-first.dgrid-page-link","\xab"),b.setAttribute("aria-label",g.gotoFirst),b.tabIndex=0),this.previousNextArrows&&(b=this.paginationPreviousNode=j(a,"span.dgrid-previous.dgrid-page-link","\u2039"),b.setAttribute("aria-label",g.gotoPrev),b.tabIndex=0),this.paginationLinksNode=j(a,"span.dgrid-pagination-links"),this.previousNextArrows&&(b=this.paginationNextNode=j(a,"span.dgrid-next.dgrid-page-link","\u203a"),b.setAttribute("aria-label",g.gotoNext),b.tabIndex=0),this.firstLastArrows&&(b=this.paginationLastNode=j(a,"span.dgrid-last.dgrid-page-link","\xbb"),b.setAttribute("aria-label",g.gotoLast),b.tabIndex=0),this._listeners.push(f(a,".dgrid-page-link:click,.dgrid-page-link:keydown",function(a){if("keydown"!==a.type||13===a.keyCode){var b,d,e=this.className;c._isLoading||e.indexOf("dgrid-page-disabled")>-1||(b=c._currentPage,d=Math.ceil(c._total/c.rowsPerPage),this===c.paginationPreviousNode?c.gotoPage(b-1):this===c.paginationNextNode?c.gotoPage(b+1):this===c.paginationFirstNode?c.gotoPage(1):this===c.paginationLastNode?c.gotoPage(d):"dgrid-page-link"===e&&c.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments),this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var a,b=this.pageSizeOptions,c=this.paginationSizeSelect;if(b&&b.length){c||(c=this.paginationSizeSelect=j(this.paginationNode,"select.dgrid-page-size[aria-label="+this.i18nPagination.rowsPerPage+"]"),a=this._paginationSizeChangeHandle=f(c,"change",d.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(a)),c.options.length=0;for(var e=0;e<b.length;e++)j(c,"option",b[e],{value:b[e],selected:this.rowsPerPage===b[e]});this._updateRowsPerPageOption()}else b&&b.length||!c||(j(c,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,b){return a-b}),this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,d=this.paginationSizeSelect;d&&(c.indexOf(b,a)<0?this._setPageSizeOptions(b.concat([a])):d.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a,this._updateRowsPerPageOption(),this.gotoPage(1)},_updateNavigation:function(){function a(a,b){var e,g;h.pagingTextBox&&a==m&&p>1?(e=j(l,"input.dgrid-page-input[type=text][value=$]",m),e.setAttribute("aria-label",i.jumpPage),h._pagingTextBoxHandle=f(e,"change",function(){var a=+this.value;!isNaN(a)&&a>0&&a<=p&&h.gotoPage(+this.value)}),r&&"INPUT"===r.tagName&&e.focus()):(g=a===m,e=j(l,"span"+(g?".dgrid-page-disabled":"")+".dgrid-page-link",a+(b?" ":"")),e.setAttribute("aria-label",i.gotoPage),e.tabIndex=g?-1:0,c===a&&(g?a<p?c++:d.focus():e.focus()),g||(d=e))}function b(a,b){j(a,(b?".":"!")+"dgrid-page-disabled"),a.tabIndex=b?-1:0}var c,d,e,h=this,i=this.i18nPagination,l=this.paginationLinksNode,m=this._currentPage,n=this.pagingLinks,o=this.paginationNavigationNode,p=Math.ceil(this._total/this.rowsPerPage),q=this._pagingTextBoxHandle,r=document.activeElement;if(r&&k.contains(this.paginationNavigationNode,r)?"dgrid-page-link"===r.className&&(c=+r.innerHTML):r=null,q&&q.remove(),l.innerHTML="",g(".dgrid-first, .dgrid-previous",o).forEach(function(a){b(a,1===m)}),g(".dgrid-last, .dgrid-next",o).forEach(function(a){b(a,m>=p)}),n&&p>0){a(1,!0);var s=m-n;s>2?j(l,"span.dgrid-page-skip","..."):s=2;for(var t=s;t<Math.min(m+n+1,p);t++)a(t,!0);m+n+1<p&&j(l,"span.dgrid-page-skip","..."),p>1&&a(p)}else h.pagingTextBox&&a(m);r&&-1===r.tabIndex&&(e=g("[tabindex='0']",this.paginationNavigationNode),r===this.paginationPreviousNode||r===this.paginationFirstNode?r=e[0]:e.length&&(r=e[e.length-1]),r&&r.focus())},refresh:function(){var a=this;if(this.inherited(arguments),this.store)return this.gotoPage(1).then(function(b){return setTimeout(function(){f.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a,results:b})},0),b})},_onNotification:function(a){a.length!==this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(a,b){var c=this,d=this.inherited(arguments);return this._lastCollection=null,b||(this._topLevelRequest&&this._topLevelRequest!==a&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"==typeof a.cancel&&(this._topLevelRequest=a),e.when(a,function(){c._topLevelRequest&&delete c._topLevelRequest})),d},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);return a&&b===a[b.id]&&delete a[b.id],b},gotoPage:function(a){var b=this,c=new e;return this._trackError(function(){var f,g,k,l,o,p,q=b.rowsPerPage,r=(a-1)*q,s=d.mixin(b.get("queryOptions"),{start:r,count:q}),t=b.contentNode;if(b.showLoadingMessage)m(b),g=b.loadingNode=j(t,"div.dgrid-loading"),g.innerHTML=b.loadingMessage;else{for(b._oldPageNodes=k={},l=t.children,o=0,p=l.length;o<p;o++)k[l[o].id]=l[o];b._oldPageObserver=b.observers.pop()}return b._isLoading=!0,f=b.store.query(b.query,s),e.when(b.renderArray(f,null,s),function(d){n(b),b.scrollTo({y:0}),e.when(f.total,function(c){c||(b.noDataNode&&(j(b.noDataNode,"!"),delete b.noDataNode),b.noDataNode=j(b.contentNode,"div.dgrid-no-data"),b.noDataNode.innerHTML=b.noDataMessage),b.paginationStatusNode.innerHTML=h.substitute(b.i18nPagination.status,{start:Math.min(r+1,c),end:Math.min(c,r+q),total:c}),b._total=c,b._currentPage=a,b._rowsOnPage=d.length,b._updateNavigation()}),(i("ie")<7||i("ie")&&i("quirks"))&&b.resize(),c.resolve(f)},function(a){n(b),c.reject(a)}),c.promise})||c.reject(),c.promise}})})},"dgrid/extensions/DnD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/on","dojo/topic","dojo/has","dojo/dnd/Source","dojo/dnd/Manager","dojo/_base/NodeList","put-selector/put","../Selection","dojo/has!touch?../util/touch","dojo/has!touch?./_DnD-touch-autoscroll","xstyle/css!dojo/resources/dnd.css"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=a(i,{grid:null,getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var e=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,h=g.store;!this.before&&f&&(f=f.nextSibling),f=f&&g.row(f),d.when(f&&h.get(f.id),function(d){e!=a?e.onDropExternal(a,b,c,d):e.onDropInternal(b,c,d)})},onDropInternal:function(a,b,c){var e,f,g=this.grid,h=g.store,i=this,j=i._targetAnchor;j&&(e=this.before?j.previousSibling:j.nextSibling),f=g.row(a[0]),(b||e!==a[0]&&(c||!f||g.down(f).element!=a[0]))&&a.forEach(function(a){d.when(i.getObject(a),function(a){var d=h.getIdentity(a);h[b&&h.copy?"copy":"put"](a,{before:c}),i._selectedNodes[d]&&(i._selectedNodes[d]=g.row(d).element)})})},onDropExternal:function(a,b,c,e){var f=this.grid.store,g=a.grid;b.forEach(function(b,h){d.when(a.getObject(b),function(i){c||(g?d.when(g.store.getIdentity(i),function(c){!h&&a.selectNone(),a.delItem(b.id),g.store.remove(c)}):a.deleteSelectedNodes()),f[f.copy?"copy":"put"](i,{before:e})})})},onDndStart:function(a,b,c){this.inherited(arguments),a==this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),j.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){h("touch")&&this.isDragging&&n.countCurrentTouches(a,this.grid.touchNode)>1?(g.publish("/dnd/cancel"),j.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!h("touch")||n.countCurrentTouches(a,this.grid.touchNode)<=1)&&this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&i.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a,b=new k;for(a in this.grid.selection)b.push(this._selectedNodes[a]);return b}}),p=a(m,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:o,postMixInProperties:function(){this.inherited(arguments),this.dndParams=b.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(a){f[a.id]=a.element}function d(a){delete f[a.id],l(a.element,"!dojoDndItemSelected!dojoDndItemAnchor")}this.inherited(arguments),this.dndSource=new(this.dndConstructor||o)(this.bodyNode,b.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var f=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){c.forEach(b.rows,a)}),this.on("dgrid-deselect",function(a){c.forEach(a.rows,d)}),e.after(this,"destroy",function(){delete this.dndSource._selectedNodes,f=null,this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];return l(b,".dojoDndItem"),this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]}),b},removeRow:function(a){this.dndSource.delItem(this.row(a)),this.inherited(arguments)}});return p.GridSource=o,p})},"dgrid/util/mouse":function(){define(["dojo/on","dojo/dom","dojo/query"],function(a,b){function c(c,d){return function(e,f){return a(e,c+":"+d,function(a){if(!b.isDescendant(a.relatedTarget,this))return f.call(this,a)})}}return{enterRow:c(".dgrid-content .dgrid-row","mouseover"),enterCell:c(".dgrid-content .dgrid-cell","mouseover"),enterHeaderCell:c(".dgrid-header .dgrid-cell","mouseover"),leaveRow:c(".dgrid-content .dgrid-row","mouseout"),leaveCell:c(".dgrid-content .dgrid-cell","mouseout"),leaveHeaderCell:c(".dgrid-header .dgrid-cell","mouseout"),createDelegatingHandler:c}})},"Sage/Utility/_LocalStorageMixin":function(){define(["dojo/_base/declare","dojox/storage/LocalStorageProvider"],function(a,b){
return a("Sage.Utility._LocalStorageMixin",null,{localStorageProvider:null,_setLocalStorageProviderAttr:function(a){this.localStorageProvider=a},_getLocalStorageProviderAttr:function(){return this._ensureProvider(),this.localStorageProvider},_ensureProvider:function(){var a;this.localStorageProvider||(a=new b,a.initialize(),this._setLocalStorageProviderAttr(a))},saveToLocalStorage:function(a,b,c){var d=this._getLocalStorageProviderAttr(),e=c,f=a;d.isValidKey(a)||(f=this._stripBadValues(a)),d.isValidNamespace(c)||(e=this._stripBadValues(c)),d.put(f,b,function(a,b,c){d.FAILED},e);var g=new Date(Date.now());d.put(f+"_modified_at",g,function(a,b,c){d.FAILED},e),d.put("modified_at",g,function(a,b,c){d.FAILED},e)},getFromLocalStorage:function(a,b){var c=this._getLocalStorageProviderAttr(),d=b,e=a;return c.isValidKey(a)||(e=this._stripBadValues(a)),c.isValidNamespace(b)||(d=this._stripBadValues(b)),c.get(e,d)},getKeys:function(a){return this._getLocalStorageProviderAttr().getKeys(a)},clear:function(a){var b=this._getLocalStorageProviderAttr();a?b.clear(a):b.clear()},_stripBadValues:function(a){return a.replace(/[^A-Za-z0-9]/g,"-")}})})},"Sage/UI/Controls/GridParts/Columns/DataType":function(){define(["dojo/string","dojo/_base/declare","Sage/Utility/Filters"],function(a,b,c){return b("Sage.UI.Controls.GridParts.Columns.DataType",null,{constructor:function(){this.inherited(arguments)},format:function(b,d){var e=c.resolveDataTypeQB(b),f="string";switch(e){case"Integer":f="int";break;case"Decimal":f="float";break;case"Date/Time":f="date";break;case"Memo/Blob":f="blob";break;default:f="string"}return a.substitute('<img src="images/ft_${0}.gif" class="dataTypeColumnDimensions" />',[f])}})})},"Sage/Utility/Filters":function(){define(["dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/json","Sage/Utility"],function(a,b,c,d){return Sage.namespace("Utility.Filters"),a.mixin(Sage.Utility.Filters,{getHiddenFiltersKey:function(){var a=Sage.Services.getService("ClientGroupContext"),b=a&&a.getContext(),c=b&&b.CurrentGroupID,d="";return c&&(c=c.toLowerCase(),c=c.replace(/ /g,"_").replace(/'/g,"_"),d="hidden_filters_"+c),d},setHiddenFilters:function(a,c){var d,e,f;d=b.getSDataService("system"),e={$name:"setHiddenFilters",request:{key:a,value:c}},f=new Sage.SData.Client.SDataServiceOperationRequest(d),f.setOperationName("setHiddenFilters"),f.execute(e,{}),sessionStorage.removeItem(a)},getHiddenFilters:function(e,f,g){var h,i,j,k,l=d.htmlEncode(e);k=sessionStorage.getItem(l),null===k?(h=b.getSDataService("system"),j={$name:"getHiddenFilters",request:{key:l}},i=new Sage.SData.Client.SDataServiceOperationRequest(h).setOperationName("getHiddenFilters"),i.execute(j,{success:a.hitch(this,this._getHiddenFiltersSuccess,f,e),failure:g})):f.call(this,c.parse(k))},_getHiddenFiltersSuccess:function(a,b,d){a&&(sessionStorage.setItem(b,c.stringify(d)),a.call(this,d))},resolveDataType:function(a){switch(a){case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"6b0b3d51-0728-4b67-9473-52836a81da53":case"2596d57d-89d6-4b72-9036-b18c64c5324c":case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":return"numeric";case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":return"string";case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":return"enum";case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":return"date";case"30053f5a-8d40-4db1-b185-1e4128eb26cc":return"key";case"92432b4d-8206-4a96-ba7b-e4cbd374f148":case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":return"boolean";case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":return"binary";default:return"unknown"}},resolveDataTypeQB:function(a){var b;switch(a){case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"6b0b3d51-0728-4b67-9473-52836a81da53":b="Integer";break;case"2596d57d-89d6-4b72-9036-b18c64c5324c":case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":b="Decimal";break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":b="String";break;case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":b="Date/Time";break;case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":b="Memo/Blob";break;default:b="String"}return b}}),Sage.Utility.Filters})},"Sage/UI/Controls/DateTimePicker":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/fx","dojo/date/locale","dijit/_Widget","dijit/form/TimeTextBox","Sage/UI/Calendar","Sage/Utility","dijit/TooltipDialog","dijit/_base/popup","dijit/form/ComboBox","dijit/focus","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DateTimePicker","dojo/json","dojo/_base/lang","dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom-construct","Sage/Utility/_LocalStorageMixin","dojo/text!./templates/DateTimePicker.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x;return x=s("Sage.UI.Controls.DateTimePicker.TimeZoneDataLoader",u,{_requests:[],_requestingData:!1,_tzData:!1,_storageNamespace:"DateTimePickerTZ",constructor:function(){this._requests=[],this._requestingData=!1,this._tzData=!1},requestTimeZones:function(a,b){if(!this._tzData){var c=this.getFromLocalStorage(this._storageNamespace,this._storageNamespace);if(!c)return this._requests.push({fn:a,scope:b||this}),void(this._requestingData||(dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:p.hitch(this,this._receiveData),error:function(a){}}),this._requestingData=!0));this._tzData=o.parse(c)}a.call(b||this,this._tzData)},_receiveData:function(a){this.saveToLocalStorage(this._storageNamespace,o.stringify(a),this._storageNamespace),this._tzData=a;for(var b=this._requests.length,c=0;c<b;c++){var d=this._requests.pop();d.fn.call(d.scope,a)}}}),w=s("Sage.UI.Controls._DateTimePickerMenu",[e,a,b],{templateString:v,widgetsInTemplate:!0,textAlign:"left",okText:"",cancelText:"",convertText:"",calculatorText:"",timeZoneSourceText:"",timeZoneDestText:"",id:"dateTimePickerMenu",dir:"",_messages:null,_started:!1,_timezonesLoaded:!1,_timezonesVisible:!1,displayTime:!1,constructor:function(a){p.mixin(this,n),this.inherited(arguments)},startup:function(){this._started=!0,this._messages=[],"function"==typeof this.focus&&this.focus(),this.inherited(arguments)},uninitialize:function(){this.dateNode.destroy(!1),this.timeZoneSourceComboNode.destroy(!1),this.timeZoneDestComboNode.destroy(!1),this.timeZoneConvertButtonNode.destroy(!1),this.timeNode.destroy(!1),this.OKButtonNode.destroy(!1),this.CancelButtonNode.destroy(!1),this.inherited(arguments)},_getUTCDate:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())},_okClicked:function(a){this.onExecute(),this.onOKClicked()},onOKClicked:function(){},_onCalendarBlur:function(){this.calendarBlur()},calendarBlur:function(){},_onValueSelected:function(){this.displayTime||(this.calendarDateSelected(),this.onExecute())},calendarDateSelected:function(){},_cancelClicked:function(){this.onCancel(),this.onCancelClicked()},onFocusOut:function(){this.onExecute()},onCancelClicked:function(){},onCancel:function(){},onExecute:function(){},_hideTimeNode:function(){this._hideNode(this.timeZoneContainer)},_hideDateNode:function(){this._hideNode(this.dateContainer)},_showTimeNode:function(){this._showNode(this.timeZoneContainer)},_showDateNode:function(){this._showNode(this.dateContainer)},_hideNode:function(a){dojo.style(a,"visibility","hidden"),dojo.style(a,"display","none")},_showNode:function(a){dojo.style(a,"visibility","visible"),dojo.style(a,"display","block")},_convertClicked:function(){if(this._timezonesLoaded){var a=this,b=this.dateNode.get("value"),c=this.timeNode.get("value"),d=this.timeZoneSourceComboNode.get("value"),e=this.timeZoneDestComboNode.get("value"),f="";b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),f=b.toLocaleString(),d&&e&&dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/timezones/convertTimeFormatted?timezoneNameSource=${0}&timezoneNameDest=${1}&date=${2}&getFormatted=${3}",[escape(d),escape(e),f,"false"]),handleAs:"json",load:function(b){a.convertResultsNode.innerHTML=b},error:function(a){}})}},processTimeZones:function(a){var b=[],c=h.getClientContextByKey("userTimeZone");q.forEach(a,function(a){a.Displayname&&a.Keyname&&b.push({id:a.Keyname,text:a.Displayname,offsetHours:a.OffsetHours,offsetMinutes:a.OffsetMinutes})}),this.storeData={label:"text",identifier:"id",items:b},this.timeZoneStore=new m({data:this.storeData});var d=this;this.timeZoneSourceComboNode.set("store",this.timeZoneStore),this.timeZoneSourceComboNode.set("searchAttr","text"),this.timeZoneSourceComboNode.store.fetch({query:{text:c},onComplete:function(a){d.timeZoneSourceComboNode.setAttribute("item",a[0])}}),this.timeZoneDestComboNode.set("store",this.timeZoneStore),this.timeZoneDestComboNode.set("searchAttr","text")},loadTimeZones:function(){if(!this._timezonesLoaded){this._timezonesLoaded=!0;(new x).requestTimeZones(this.processTimeZones,this)}}}),s("Sage.UI.Controls.DateTimePicker",[k],{id:"dateTimePicker",buttonToolTip:"Calendar",toolTip:"",displayDate:!0,displayTime:!0,initialDate:null,initialTime:null,initialTextValue:"",dateFormat:"",timeZoneStore:null,storeData:null,dropDown:!1,_opened:!1,readOnly:!1,enabled:!0,required:!1,renderAsHyperlink:!1,shouldPublishMarkDirty:!0,handles:null,store:null,dateOnlyHanlde:null,documentClickHandle:null,dropdownIconClicked:!1,popupElements:null,minDate:null,cssClass:"",constructor:function(a){this.buttonToolTip=n.buttonToolTip,this.handles=[],this.documentClickHandle=[],this.dateOnlyHanlde=[],this.store={},a.cssClass&&(this.cssClass=a.cssClass),this.inherited(arguments)},postCreate:function(){this.cssClass&&this.cssClass.length>0&&(this.domNode.className=this.cssClass+" "+this.domNode.className)},_onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this._updateHiddenFields()},_onFocusChange:function(){this._updateHiddenFields()},_updateHiddenFields:function(){var a,b,c,d;(a=dojo.byId(this.id))&&(c=a.children[0],b=a.children[1],c&&b&&(d=this.getValueForASPNET(),b.value=d,""===d&&(c.value=""),b.onchange&&b.onchange()))},uninitialize:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments),this.dropDown=new w({id:this.id+"_Popout",displayTime:this.displayTime}),this.handles.push(this.connect(this,"onChange",this._onChanged)),this.handles.push(dojo.connect(this.dropDown,"onOKClicked",this,"_displayCurrentValue")),this.handles.push(dojo.connect(this.focusNode,"onkeyup",this,"_onFocusKeyUp",!0)),this.handles.push(dojo.connect(this.focusNode,"onblur",this,"_onFocusBlur",!0)),this.handles.push(dojo.connect(this.focusNode,"onchange",this,"_onFocusChange",!0)),this.focusNode.value=this.initialTextValue;var a=h.Convert.toDateFromString(this.initialDate)||new Date,b=h.Convert.toDateFromString(this.initialTime)||new Date;this.dropDown.dateNode.set("value",a.toDateString()),this.dropDown.timeNode.set("value",b),this.displayDate?this.dropDown._showDateNode():this.dropDown._hideDateNode(),this.displayTime?this.dropDown._showTimeNode():(this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue")),this.dropDown._hideTimeNode());var c=[],d=function(a){if(a&&a.children&&a.children.length>0)for(var b=0;b<a.children.length;b++)a.children[b]&&c.push(a.children[b]),d(a.children[b]);return c};this.popupElements=d(this.dropDown.domNode),this.popupElements.push(this.dropDown.domNode),this.popupElements.push(this._buttonNode.parentNode),this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick")),this._setupRenderAsHyperlink(),this._setupDropDownIcon()},_documentOnClick:function(a){var b=a||window.event,c=b.target||b.srcElement;3==b.target.nodeType&&(c=b.target.parentNode);var d=function(a,b){return dojo.indexOf(a,b)>-1||!!b.parentNode&&d(a,b.parentNode)};c&&c.className&&(c.className.indexOf("dijitTimePickerItemInner")>-1||c.className.indexOf("dijitCalendarMonthLabel")>-1)||c&&c.id&&(c.id.indexOf("_Popout-TzSelectSource_popup")>-1||c.id.indexOf("_Popout-TzSelectDest_popup")>-1)?(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation(),b.preventDefault=!0):(this.dropDown&&this.dropDown.timeNode&&this.dropDown.timeNode.dropDown&&-1==dojo.indexOf(this.popupElements,this.dropDown.timeNode.dropDown.domNode)&&this.popupElements.push(this.dropDown.timeNode.dropDown.domNode),d(this.popupElements,c)?(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation(),b.preventDefault=!0):this.closeDropDown())},_setupDropDownIcon:function(){this.renderAsHyperlink||(t.create("div",{class:"Global_Images icon16x16 icon_Calendar_16x16",title:this.buttonToolTip,tabIndex:0},this._buttonNode,"only"),dojo.addClass(this._buttonNode,"smCalendarIconTxtBox"),this.handles.push(this.connect(this._buttonNode,"ondijitclick",function(){this.displayTime?dojo.style(this.dropDown.domNode,"height","266px"):dojo.style(this.dropDown.domNode,"height","226px"),this.dropdownIconClicked||(this.openDropDown(),this.dropdownIconClicked=!0)})))},_displayCurrentValue:function(){if(this._started){var a,b=this.getDateValue(),c=this.getTimeValue(),e={fullYear:!0};if(b){if(b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),b.setSeconds(c.getSeconds()),this.displayDate&&this.displayTime?e.selector="date and time":this.displayDate?e.selector="date":this.displayTime&&(e.selector="time"),e.locale=Sys.CultureInfo.CurrentCulture.name,a=d.format(b,e),this.renderAsHyperlink){dojo.byId(this.id+"-Link").innerHTML=a}else this.focusNode.value=a;this.value.getTime&&this.value.getTime()===b.getTime()||(this.value=b,this.onChange(b))}}},_setupRenderAsHyperlink:function(){if(this.renderAsHyperlink){dojo.style(this.domNode,"border","none");var a=dojo.create("a",{id:this.id+"-Link",innerHTML:this.focusNode.value},this.domNode,"only");dojo.style(a,"cursor","pointer"),this.handles.push(dojo.connect(a,"onclick",this,function(){this.displayTime?dojo.style(this.dropDown.domNode,"height","266px"):dojo.style(this.dropDown.domNode,"height","226px"),this.openDropDown()}))}},loadDropDown:function(){},isLoaded:function(){return!0},_setBlurValue:function(){},closeDropDown:function(){j.close(this.dropDown),this._opened=!1,this.dropdownIconClicked=!1,dojo.forEach(this.documentClickHandle,function(a){dojo.disconnect(a)})},_openResultList:function(){},_showResultList:function(){},_onBlur:function(){},triggerOnFocusBlur:function(a){this._validateInputDate(a)},_validateInputDate:function(a){if(!this._opened&&!this.readOnly&&this.dropDown&&""!==this.focusNode.value){var b=this.focusNode.value;if(b===this.initialTextValue)return;var c=null,d="date";b.indexOf(":")>0&&(d="datetime",b=new Date(b).toLocaleString().replace(/:\d{2}\s/," ")),a=a||Sys.CultureInfo.CurrentCulture.name||r.locale,c=dojo.date.locale.parse(b,{selector:d,locale:a}),this.dropDown&&null!==c&&!1===isNaN(c.getDate())&&c.getFullYear()>=(new Date).getFullYear()-259&&(this.dropDown.dateNode.set("value",c),this.dropDown.timeNode.set("value",c)),this.dropDown.onOKClicked()}},_onFocusBlur:function(){this._validateInputDate(),this._opened&&l.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0])},_onFocusKeyUp:function(a){},_onKey:function(a){},openDropDown:function(){this._opened=!0;var a=this;if(j.open({popup:this.dropDown,around:this.domNode,onExecute:function(){a.closeDropDown(),l.focus(a.focusNode)},onCancel:function(){a.closeDropDown(),l.focus(a.focusNode)},onClose:function(){}}),this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick")),this.displayTime&&this.dropDown.loadTimeZones(),"undefined"!==this.dropDown.dateNode._selectedCells&&0===this.dropDown.dateNode._selectedCells.length){var b=this.getDateValue();this.dropDown.dateNode._markSelectedDates([b])}l.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0]),j._stack[0].handlers[0].remove()},_getUTCDate:function(a){return this.dropDown._getUTCDate(a)},getDateValue:function(){return this.dropDown.dateNode.get("value")},getTimeValue:function(){var a=this.dropDown.timeNode.get("value")||new Date(Date.now());return a&&a.setSeconds(this.dropDown.timeNode.seconds||0),a},getMinDate:function(){return this.minDate=Sage.Utility.Activity.formatDateAdd(new Date,"year",-259),this.minDate},_getValueAttr:function(){var a=this.getDateValue(),b=this.getTimeValue();return a.setHours(b.getHours()),a.setMinutes(b.getMinutes()),a.setSeconds(b.getSeconds()),a},_setValueAttr:function(a){a&&a.toDateString&&(this.dropDown&&(this.dropDown.dateNode.set("value",a),this.dropDown.timeNode.set("value",a),this.dropDown.timeNode.seconds=a.getSeconds(),this._displayCurrentValue()),this.value.getTime&&this.value.getTime()===a.getTime()||(this.value=a,this.onChange(a)))},_setDisplayDateAttr:function(a){this.displayDate=a,this._displayCurrentValue(),this.dropDown&&(this.displayDate?this.dropDown._showDateNode():this.dropDown._hideDateNode())},_getDisplayDateAttr:function(){return this.displayDate},_setToolTipAttr:function(a){a&&""!==a&&this.set("title",a)},_getToolTipAttr:function(){return this.toolTip},_setDisabledAttr:function(a){a?(dojo.style(this._buttonNode,"visibility","hidden"),dojo.style(this._buttonNode,"display","none")):(dojo.style(this._buttonNode,"visibility",""),dojo.style(this._buttonNode,"display","")),this.inherited(arguments)},_setReadOnlyAttr:function(a){a&&(dojo.style(this._buttonNode,"visibility","hidden"),dojo.style(this._buttonNode,"display","none")),this.inherited(arguments)},_setDisplayTimeAttr:function(a){this.displayTime=a,this._displayCurrentValue(),this.dropDown&&(this.displayDate?this.dropDown._showDateNode():this.dropDown._hideDateNode(),dojo.forEach(this.dateOnlyHanlde,function(a){dojo.disconnect(a)}),this.displayTime?(this.dropDown.displayTime=!0,this.dropDown._showTimeNode()):(this.dropDown.displayTime=!1,this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue")),this.dropDown._hideTimeNode()))},_getDisplayTimeAttr:function(){return this.displayTime},getValueForASPNET:function(){if(""===this.focusNode.value)return"";var a=[],b=this.getDateValue();a.push(b.getFullYear()),a.push(b.getMonth()+1),a.push(b.getDate());var c=this.getTimeValue();return a.push(c.getHours()),a.push(c.getMinutes()),a.join(",")},destroy:function(){dojo.forEach(dijit.findWidgets(this.domNode),function(a){a.destroy(!1)}),dojo.forEach(this.handles,function(a){dojo.disconnect(a)}),this.inherited(arguments)},fmtDateForASPNET:function(){var a=this.getDateValue(),b=this.getTimeValue(),c=(a.getFullYear(),a.getMonth()+1),d=a.getDate(),e=b.getHours(),f=b.getMinutes(),g="";if(this.displayDate){var h=this.getDivChar(),i=c,j=d;"MM"==this.dateFormat.substring(0,1).toUpperCase()&&(i=i<10?"0"+i:i),"DD"==this.dateFormat.substring(0,1).toUpperCase&&(j=j<10?"0"+j:j),"M"!=this.dateFormat.substring(0,1)&&"m"!=this.dateFormat.substring(0,1)||(g=i+h+j+h+a.getFullYear()),"D"!=this.dateFormat.substring(0,1)&&"d"!=this.dateFormat.substring(0,1)||(g=j+h+i+h+a.getFullYear()),"Y"!=this.dateFormat.substring(0,1)&&"y"!=this.dateFormat.substring(0,1)||(g=a.getFullYear()+h+i+h+j),this.displayTime&&(g+=" ")}if(this.displayTime){var k=this.getTimeDivChar(),l=e,m=f;if(m<10&&(m="0"+m),this.dateFormat.indexOf("H")>-1)g+=l+k+m;else if(this.dateFormat.indexOf("h")>-1){var n=e;0===this.Hours&&(n="12");var o="AM";e>=12&&(e>12&&(n=e-12),o="PM"),g+=n+k+m+" "+o}else g+=b.toLocaleTimeString()}return g},getDivChar:function(){for(var a="",b=0;b<this.dateFormat.length;b++)if(isNaN(this.dateFormat.charAt(b))&&(this.dateFormat.charAt(b)<"A"||this.dateFormat.charAt(b)>"Z")&&(this.dateFormat.charAt(b)<"a"||this.dateFormat.charAt(b)>"z")){a=this.dateFormat.charAt(b);break}return a},getTimeDivChar:function(){if(this.displayTime){var a=this.dateFormat.split(" ");if(a.length>1)for(var b=a[1],c=0;c<b.length;c++)if(isNaN(b.charAt(c))&&(b.charAt(c)<"A"||b.charAt(c)>"Z")&&(b.charAt(c)<"a"||b.charAt(c)>"z"))return b.charAt(c)}return":"}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(a,b,c,d,e){return c("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var a=this.domNode;if(this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),e.parse(a,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(d.hitch(this,function(a){this._startupWidgets=a;for(var b=0;b<a.length;b++)this._processTemplateNode(a[b],function(a,b){return a[b]},function(a,b,c){return b in a?a.connect(a,b,c):a.on(b,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser})),!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(a,b,c){return!(!b(a,"dojoType")&&!b(a,"data-dojo-type"))||this.inherited(arguments)},startup:function(){a.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()}),this._startupWidgets=null,this.inherited(arguments)}})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(a,b,c,d,e){return a("dijit.form.TimeTextBox",e,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:d,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(a){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),a.keyCode){case b.ENTER:case b.TAB:case b.ESCAPE:case b.DOWN_ARROW:case b.UP_ARROW:break;default:this.defer(function(){var a=this.get("displayedValue");this.filterString=a&&!this.parse(a,this.constraints)?a.toLowerCase():"",this._opened&&this.closeDropDown(),this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define(["dojo/_base/array","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/query","dojo/mouse","dojo/on","./_WidgetBase","./form/_ListMouseMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return e("dijit._TimePicker",[o,p],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:d.toISOString,buildRendering:function(){this.inherited(arguments),this.containerNode=this.domNode,this.timeMenu=this.domNode},setValue:function(a){h.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",a)},_setValueAttr:function(a){this._set("value",a),this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a),this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){for(var e=[],f=0;f<this._maxIncrement;f++){var g=this._createOption(f);g&&e.push(g)}return e},_showText:function(){var b=d.fromISOString;this.domNode.innerHTML="",this._clickableIncrementDate=b(this.clickableIncrement),this._visibleIncrementDate=b(this.visibleIncrement);var c=function(a){return 60*a.getHours()*60+60*a.getMinutes()+a.getSeconds()},e=c(this._clickableIncrementDate),f=c(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=b(this.pickerMin),this._refDate.setFullYear(1970,0,1),this._clickableIncrement=1,this._visibleIncrement=f/e;var g=b(this.pickerMax);g.setFullYear(1970,0,1);var h=.001*(g.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((h+1)/e);var i=this._getFilteredNodes();a.forEach(i,function(a){this.domNode.appendChild(a)},this),!i.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments),this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var d=new Date(this._refDate),e=this._clickableIncrementDate;d.setHours(d.getHours()+e.getHours()*a,d.getMinutes()+e.getMinutes()*a,d.getSeconds()+e.getSeconds()*a),"time"==this.constraints.selector&&d.setFullYear(1970,0,1);var h=c.format(d,this.constraints);if(this.filterString&&0!==h.toLowerCase().indexOf(this.filterString))return null;var i=this.ownerDocument.createElement("div");return i.className=this.baseClass+"Item",i.date=d,i.idx=a,g.create("div",{class:this.baseClass+"ItemInner",innerHTML:h},i),a%this._visibleIncrement<1&&a%this._visibleIncrement>-1?f.add(i,this.baseClass+"Marker"):a%this._clickableIncrement||f.add(i,this.baseClass+"Tick"),this.isDisabledDate(d)&&f.add(i,this.baseClass+"ItemDisabled"),this.value&&!b.compare(this.value,d,this.constraints.selector)&&(i.selected=!0,f.add(i,this.baseClass+"ItemSelected"),this._selectedDiv=i,f.contains(i,this.baseClass+"Marker")?f.add(i,this.baseClass+"MarkerSelected"):f.add(i,this.baseClass+"TickSelected"),this._highlightOption(i,!0)),i},onOpen:function(){this.inherited(arguments),this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){var b=a.target.date||a.target.parentNode.date;b&&!this.isDisabledDate(b)&&(this._highlighted_option=null,this.set("value",b),this.onChange(b))},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}f.toggle(a,this.baseClass+"ItemHover",b),f.contains(a,this.baseClass+"Marker")?f.toggle(a,this.baseClass+"MarkerHover",b):f.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){return a.keyCode==i.DOWN_ARROW?(this.selectNextNode(),a.stopPropagation(),a.preventDefault(),!1):a.keyCode==i.UP_ARROW?(this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1):a.keyCode==i.ENTER||a.keyCode===i.TAB?!this._keyboardSelected&&a.keyCode===i.TAB||(this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option}),a.keyCode===i.TAB):void 0},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(a,b,c,d){return a("dijit.form._ListMouseMixin",d,{postCreate:function(){this.inherited(arguments),this.domNode.dojoClick=!0,this._listConnect("click","_onClick"),this._listConnect("mousedown","_onMouseDown"),this._listConnect("mouseup","_onMouseUp"),this._listConnect("mouseover","_onMouseOver"),this._listConnect("mouseout","_onMouseOut")},_onClick:function(a,b){this._setSelectedAttr(b,!1),this._deferredClick&&this._deferredClick.remove(),this._deferredClick=this.defer(function(){this._deferredClick=null,this.onClick(b)})},_onMouseDown:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging=!0,this._setSelectedAttr(b,!1)},_onMouseUp:function(a,b){this._isDragging=!1;var c=this.selected,d=this._hoveredNode;c&&b==c?this.defer(function(){this._onClick(a,c)}):d&&this.defer(function(){this._onClick(a,d)})},_onMouseOut:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging&&(this._cancelDrag=(new Date).getTime()+1e3)},_onMouseOver:function(a,b){if(this._cancelDrag){(new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null}this._hoveredNode=b,this.onHover(b),this._isDragging&&this._setSelectedAttr(b,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(a,b,c){return a("dijit.form._ListBase",null,{selected:null,_listConnect:function(a,c){var d=this;return d.own(b(d.containerNode,b.selector(function(a,b,c){return a.parentNode==c},a),function(a){d[c](a,this)}))},selectFirstNode:function(){for(var a=this.containerNode.firstChild;a&&"none"==a.style.display;)a=a.nextSibling;this._setSelectedAttr(a,!0)},selectLastNode:function(){for(var a=this.containerNode.lastChild;a&&"none"==a.style.display;)a=a.previousSibling;this._setSelectedAttr(a,!0)},selectNextNode:function(){var a=this.selected;if(a){for(var b=a.nextSibling;b&&"none"==b.style.display;)b=b.nextSibling;b?this._setSelectedAttr(b,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var a=this.selected;if(a){for(var b=a.previousSibling;b&&"none"==b.style.display;)b=b.previousSibling;b?this._setSelectedAttr(b,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(a,b){if(this.selected!=a){var d=this.selected;d&&this.onDeselect(d),a&&(b&&c.scrollIntoView(a),this.onSelect(a)),this._set("selected",a)}else a&&this.onSelect(a)}})})},"dijit/form/_DateTimeTextBox":function(){define(["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(a,b,c,d,e,f,g,h){return new Date("X"),d("dijit.form._DateTimeTextBox",[f,g],{templateString:h,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:b.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},compare:function(b,c){var d=this._isInvalidDate(b),e=this._isInvalidDate(c);if(d||e)return d&&e?0:d?-1:1;var f=this.format(b,this._unboundedConstraints),g=this.format(c,this._unboundedConstraints),h=this.parse(f,this._unboundedConstraints),i=this.parse(g,this._unboundedConstraints);return f==g?0:a.compare(h,i,this._selector)},autoWidth:!0,format:function(a,b){return a?this.dateLocaleModule.format(a,b):""},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,b){return a.toGregorian&&(a=a.toGregorian()),c.toISOString(a,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){c=c||{},this.dateModule=c.datePackage?e.getObject(c.datePackage,!1):a,this.dateClassObj=this.dateModule.Date||Date,this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value)),this.dateLocaleModule=c.datePackage?e.getObject(c.datePackage+".locale",!1):b,this._set("pattern",this.dateLocaleModule.regexp),this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none"),this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector,a.fullYear=!0;var b=c.fromISOString;"string"==typeof a.min&&(a.min=b(a.min),this.dateClassObj instanceof Date||(a.min=new this.dateClassObj(a.min))),"string"==typeof a.max&&(a.max=b(a.max),this.dateClassObj instanceof Date||(a.max=new this.dateClassObj(a.max))),this.inherited(arguments),this._unboundedConstraints=e.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,b,d){
void 0!==a&&("string"==typeof a&&(a=c.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a))),this.inherited(arguments,[a,b,d]),this.value instanceof Date&&(this.filterString=""),this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){if("value"==a){b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b));var c=this._get("value");if(c instanceof this.dateClassObj&&0==this.compare(b,c))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj),this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var b=e.isString(this.popupClass)?e.getObject(this.popupClass,!1):this.popupClass,c=this,d=this.get("value");this.dropDown=new b({onChange:function(a){c.set("value",a,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:d,textDir:c.textDir,currentFocus:this._isInvalidDate(d)?this.dropDownDefaultValue:d,constraints:c.constraints,filterString:c.filterString,datePackage:c.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(a,b,c){return a("dijit.form.RangeBoundTextBox",c,{rangeMessage:"",rangeCheck:function(a,b){return!("min"in b&&!(this.compare(a,b.min)>=0)||"max"in b&&!(this.compare(a,b.max)<=0))},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var b=!1;if("min"in this.constraints){var c=this.constraints.min;b=this.compare(a,"number"==typeof c&&c>=0&&0!=a?0:c)<0}if(!b&&"max"in this.constraints){var d=this.constraints.max;b=this.compare(a,"number"!=typeof d||d>0?d:0)>0}return b},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var b=this.get("value");return null==b||""===b||"number"==typeof b&&isNaN(b)||this.isInRange(a)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=b.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(a,b,c,d){return a("dijit.form.MappedTextBox",d,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return null!=a?"string"==typeof a?a:this.serialize(a,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=c.place("<input type='hidden'"+(this.name&&!b("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})})},"dijit/TooltipDialog":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a("dijit.TooltipDialog",[h,k,j,i],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:l,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments),this.own(f(this.domNode,"keydown",e.hitch(this,"_onKey")))},orient:function(a,c,d){var e={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[c+"-"+d];b.replace(this.domNode,e,this._currentOrientClass||""),this._currentOrientClass=e},focus:function(){this._getFocusItems(),g.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px"),this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==d.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==d.TAB){var b=a.target;this._getFocusItems(),this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(g.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(g.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}});return c("dojo-bidi")&&n.extend({_setTitleAttr:function(a){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a,this._set("title",a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}}),n})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(a,b,c){var d=c._createWrapper;c._createWrapper=function(c){return c.declaredClass||(c={_popupWrapper:c.parentNode&&a.contains(c.parentNode,"dijitPopup")?c.parentNode:null,domNode:c,destroy:function(){},ownerDocument:c.ownerDocument,ownerDocumentBody:b.body(c.ownerDocument)}),d.call(this,c)};var e=c.open;return c.open=function(a){if(a.orient&&"string"!=typeof a.orient&&!("length"in a.orient)){var b=[];for(var c in a.orient)b.push({aroundCorner:c,corner:a.orient[c]});a.orient=b}return e.call(this,a)},c})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(a,b,c){return a("dijit.form.ComboBox",[b,c],{})})},"dijit/form/ComboBoxMixin":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(a,b,c,d,e,f,g,h,i){return a("dijit.form.ComboBoxMixin",[h,f],{dropDownClass:g,hasDownArrow:!0,templateString:i,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a),this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage(""),this.inherited(arguments)},_setStoreAttr:function(a){a.get||d.mixin(a,{_oldAPI:!0,get:function(a){var c=new b;return this.fetchItemByIdentity({identity:a,onItem:function(a){c.resolve(a)},onError:function(a){c.reject(a)}}),c.promise},query:function(a,c){var f=new b(function(){g.abort&&g.abort()});f.total=new b;var g=this.fetch(d.mixin({query:a,onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},c));return e(f)}}),this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;if(a&&this._setStoreAttr(a),this.inherited(arguments),!this.params.store&&this.store&&!this.store._oldAPI){var b=this.declaredClass;d.mixin(this.store,{getValue:function(a,d){return c.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0"),a[d]},getLabel:function(a){return c.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0"),a.name},fetch:function(a){c.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var e=["dojo/data/ObjectStore"];require(e,d.hitch(this,function(b){new b({objectStore:this}).fetch(a)}))}})}},buildRendering:function(){this.inherited(arguments),this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dijit/form/_AutoCompleterMixin":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin","./_SearchMixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b("dijit.form._AutoCompleterMixin",k,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(h("ie")){var c=a.ownerDocument.selection.createRange().duplicate(),d=a.createTextRange();c.move("character",0),d.move("character",0);try{d.setEndPoint("EndToEnd",c),b=String(d.text).replace(/\r/g,"").length}catch(a){}}return b},_setCaretPos:function(a,b){b=parseInt(b),j.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments),this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(a.charCode>=32)){var b=a.charCode||a.keyCode;if(b!=d.ALT&&b!=d.CTRL&&b!=d.META&&b!=d.SHIFT){var c=this.dropDown,e=null;if(this._abortQuery(),this.inherited(arguments),!(a.altKey||a.ctrlKey||a.metaKey))switch(this._opened&&(e=c.getHighlightedOption()),b){case d.PAGE_DOWN:case d.DOWN_ARROW:case d.PAGE_UP:case d.UP_ARROW:this._opened&&this._announceOption(e),a.stopPropagation(),a.preventDefault();break;case d.ENTER:if(e){if(e==c.nextButton){this._nextSearch(1),a.stopPropagation(),a.preventDefault();break}if(e==c.previousButton){this._nextSearch(-1),a.stopPropagation(),a.preventDefault();break}a.stopPropagation(),a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case d.TAB:var f=this.get("displayedValue");if(c&&(f==c._messages.previousMessage||f==c._messages.nextMessage))break;e&&(this._selectOption(e),a.stopPropagation(),a.preventDefault());case d.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=this.focusNode;j.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){var d=this.autoComplete?this._getCaretPos(b):b.value.length;d+1>b.value.length&&(b.value=a,j.selectInputText(b,d))}else b.value=a,j.selectInputText(b)},_openResultList:function(a,b,c){var d=this.dropDown.getHighlightedOption();if(this.dropDown.clearResultList(),!a.length&&0==c.start)return void this.closeDropDown();this._nextSearch=this.dropDown.onPage=e.hitch(this,function(b){a.nextPage(-1!==b),this.focus()}),this.dropDown.createOptions(a,c,e.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),d&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(b[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)},_showResultList:function(){this.closeDropDown(!0),this.openDropDown(),this.dropDown.highlightFirstOption(),this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery(),this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;!b||a!=b._messages.previousMessage&&a!=b._messages.nextMessage?void 0===this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0),this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c),this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var d=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(d,this.searchAttr):d[this.searchAttr]).toString(),this.set("item",d,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length),this.focusNode.setAttribute("aria-activedescendant",c.get(a,"id")),this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown(),a&&this._announceOption(a),this._setCaretPos(this.focusNode,this.focusNode.value.length),this._handleOnChange(this.value,!0),this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0,this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup",c=e.isString(this.dropDownClass)?e.getObject(this.dropDownClass,!1):this.dropDownClass;this.dropDown=new c({onChange:e.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a,this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){if(this.inherited(arguments),!this.store&&this.srcNodeRef){var a=this.srcNodeRef;if(this.store=new i({},a),!("value"in this.params)){var b=this.item=this.store.fetchSelectedItem();if(b){var c=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,c):b[c]}}}},postCreate:function(){var b=f('label[for="'+this.id+'"]');b.length&&(b[0].id||(b[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",b[0].id)),this.inherited(arguments),a.after(this,"onSearch",e.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){var b=this.labelFunc(a,this.store),c=this.labelType;return"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),c="html"),{html:"html"==c,label:b}},doHighlight:function(a,b){var c=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}");return b=g.escapeString(b),this._escapeHtml(a.replace(new RegExp((0==d?"^":"")+"("+b+")"+(d==this.queryExpr.length-4?"$":""),c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null,this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,d){this._set("item",d||null),null==a&&(a=""),this.inherited(arguments)}});return h("dojo-bidi")&&l.extend({_setTextDirAttr:function(a){this.inherited(arguments),this.dropDown&&this.dropDown._set("textDir",a)}}),l})},"dijit/form/DataList":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(a,b,c,d,e,f){function g(a){return{id:a.value,value:a.value,name:c.trim(a.innerText||a.textContent||"")}}return a("dijit.form.DataList",e,{constructor:function(a,e){this.domNode=b.byId(e),c.mixin(this,a),this.id&&f.add(this),this.domNode.style.display="none",this.inherited(arguments,[{data:d("option",this.domNode).map(g)}])},destroy:function(){f.remove(this.id)},fetchSelectedItem:function(){var a=d("> option[selected]",this.domNode)[0]||d("> option",this.domNode)[0];return a&&g(a)}})})},"dijit/form/_SearchMixin":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(a,b,c,d,e,f,g){return a("dijit.form._SearchMixin",null,{pageSize:1/0,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return new RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,d){return c?".*":d?".":b||"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove()),this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove()),this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&!this.readOnly){var c=a.charOrCode;if(!("type"in a&&"key"==a.type.substring(0,3)&&(a.altKey||(a.ctrlKey||a.metaKey)&&"x"!=c&&"v"!=c||c==b.SHIFT))){var d=!1;switch(this._prev_key_backspace=!1,c){case b.DELETE:case b.BACKSPACE:this._prev_key_backspace=!0,this._maskValidSubsetError=!0,d=!0;break;default:d="string"==typeof c||229==c}d&&(this.store?this.searchTimer=this.defer("_startSearchFromInput",1):this.onSearch())}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){this._abortQuery();var b,d=this,g=c.clone(this.query),h={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},i=e.substitute(this.queryExpr,[a.replace(/([\\\*\?])/g,"\\$1")]),j=function(){var a=d._fetchHandle=d.store.query(g,h);d.disabled||d.readOnly||b!==d._lastQuery||f(a,function(c){d._fetchHandle=null,d.disabled||d.readOnly||b!==d._lastQuery||f(a.total,function(a){c.total=a;var b=d.pageSize;(isNaN(b)||b>c.total)&&(b=c.total),c.nextPage=function(a){h.direction=a=!1!==a,h.count=b,a?(h.start+=c.length,h.start>=c.total&&(h.count=0)):(h.start-=b,h.start<0&&(h.count=Math.max(b+h.start,0),h.start=0)),h.count<=0?(c.length=0,d.onSearch(c,g,h)):j()},d.onSearch(c,g,h)})},function(a){d._fetchHandle=null,d._cancelingQuery})};c.mixin(h,this.fetchProperties),this.store._oldAPI?b=i:(b=this._patternToRegExp(i),b.toString=function(){return i}),this._lastQuery=g[this.searchAttr]=b,this._queryDeferHandle=this.defer(j,this.searchDelay)},constructor:function(){this.query={},this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=this.list;a&&(this.store=g.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(a,b,c,d,e,f,g,h){return a("dijit.form._ComboBoxMenu",[e,f,h,g],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments),this.isLeftToRight()||(b.add(this.previousButton,"dijitMenuItemRtl"),b.add(this.nextButton,"dijitMenuItemRtl")),this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");return a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),a.setAttribute("role","option"),a},onHover:function(a){b.add(a,"dijitMenuItemHover")},onUnhover:function(a){b.remove(a,"dijitMenuItemHover")},onSelect:function(a){b.add(a,"dijitMenuItemSelected")},onDeselect:function(a){b.remove(a,"dijitMenuItemSelected")},_page:function(a){var b=0,d=this.domNode.scrollTop,e=c.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<e;){var f=this.getHighlightedOption();if(a){if(!f.previousSibling||"none"==f.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!f.nextSibling||"none"==f.nextSibling.style.display)break;this.selectNextNode()}var g=this.domNode.scrollTop;b+=(g-d)*(a?-1:1),d=g}},handleKey:function(a){switch(a.keyCode){case d.DOWN_ARROW:return this.selectNextNode(),!1;case d.PAGE_DOWN:return this._page(!1),!1;case d.UP_ARROW:return this.selectPreviousNode(),!1;case d.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(a,b,c,d,e){var f=b("dijit.form._ComboBoxMenuMixin"+(d("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments),this._messages=e.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments),this.previousButton.innerHTML=this._messages.previousMessage,this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this._set("value",a),this.onChange(a)},onClick:function(a){a==this.previousButton?(this._setSelectedAttr(null),this.onPage(-1)):a==this.nextButton?(this._setSelectedAttr(null),this.onPage(1)):this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(a,b){var c=this._createMenuItem(),d=b(a);return d.html?c.innerHTML=d.label:c.appendChild(c.ownerDocument.createTextNode(d.label)),""==c.innerHTML&&(c.innerHTML="&#160;"),c},createOptions:function(b,d,e){this.items=b,this.previousButton.style.display=0==d.start?"none":"",c.set(this.previousButton,"id",this.id+"_prev"),a.forEach(b,function(a,b){var d=this._createOption(a,e);d.setAttribute("item",b),c.set(d,"id",this.id+b),this.nextButton.parentNode.insertBefore(d,this.nextButton)},this);var f=!1;b.total&&!b.total.then&&-1!=b.total?d.start+d.count<b.total?f=!0:d.start+d.count>b.total&&d.count==b.length&&(f=!0):d.count==b.length&&(f=!0),this.nextButton.style.display=f?"":"none",c.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var a=this.containerNode;a.childNodes.length>2;)a.removeChild(a.childNodes[a.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});return d("dojo-bidi")&&(f=b("dijit.form._ComboBoxMenuMixin",f,{_createOption:function(){var a=this.inherited(arguments);return this.applyTextDir(a),a}})),f})},"Sage/Utility/Sql":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/Sql"],function(a,b,c,d){return b("Sage.Utility.Sql",null,{_allQuotesReg:null,_badQuotesReg:null,_closingQuotesReg:null,_normalQuotesReg:null,_openingQuotesReg:null,_selectInClauseReg:null,_closingQuotes:["'","\xb4","\u2019","\u2019"],_openingQuotes:["'","`","\u2018","\u2018"],resources:d,quoteType:{apostrophe:0,accent:1,curly:2,unicode:3},constructor:function(){this.inherited(arguments),this._allQuotesReg=new RegExp("['`\xb4\u2018\u2019\u2018\u2019]"),this._badQuotesReg=new RegExp("[`\xb4\u2018\u2019\u2018\u2019]"),this._closingQuotesReg=new RegExp("['\xb4\u2019\u2019]"),this._normalQuotesReg=new RegExp("'"),this._openingQuotesReg=new RegExp("['`\u2018\u2018]")},fixQuoted:function(a){var b=a;if(!(a&&c.isString(a)&&a.length>0))return"''";if(this._badQuotesReg.test(b)&&(b=this.removeBadOuterQuotes(b)),this._normalQuotesReg.test(b)){var d=b.charAt(0);if(this._normalQuotesReg.test(d)&&(b=b.substr(1,b.length-1)),""===b)return"";d=b.charAt(b.length-1),this._normalQuotesReg.test(d)&&(b=b.substr(0,b.length-1))}return"'"+b+"'"},fixQuotes:function(b){return!(!b||!c.isArray(b))&&(a.forEach(b,function(a,c){b[c]=this.fixQuoted(a)},this),b.join(","))},fixInClause:function(b){var d="('')";b&&void 0!==b&&!1===c.isString(b)&&(b=c.isArray(b)?"'"+b.toString().replace(/,/g,"','")+"'":"'"+b.toString()+"'");var e;if(b&&c.isString(b)&&c.trim(b).length>0){if(!1===this.hasValidApostropheQuoteCount(b))throw new Error(this.resources.InvalidApostropheCount);if(""===(e=b.replace(/\r\n/g," ").replace(/\n/g," ").replace(/\r/g," ").trim()))return d;if(this._badQuotesReg.test(e)){if("("===e.charAt(0)&&")"===e.charAt(e.length-1)&&(e=e.substr(1,e.length-1),e=e.substr(0,e.length-1)),""===e)return d;if(0===e.toUpperCase().indexOf("SELECT")){for(var f=!1,g=-1,h=[],i=0;i<e.length;i++){var j=e.charAt(i);if(!1===f){if(this._openingQuotesReg.test(j))switch(f=!0,j){case"'":g=this.quoteType.apostrophe;break;case"`":g=this.quoteType.accent,h.push(i);break;case"\u2018":g=this.quoteType.curly,h.push(i);break;case"\u2018":g=this.quoteType.unicode,h.push(i)}}else if(this._closingQuotesReg.test(j)){var k=this.translateQuoteType(j);if(-1==k)continue;if(g==k){switch(f=!1,g){case this.quoteType.accent:case this.quoteType.curly:case this.quoteType.unicode:h.push(i)}g=-1}}}if(h&&c.isArray(h)&&h.length>0&&a.forEach(h,function(a){e=e.substr(0,a)+"'"+e.substr(a+1)}),!1===this.hasValidApostropheQuoteCount(e))throw new Error(this.resources.InvalidApostropheCount);return"("+e+")"}var l=e.split(",");a.forEach(l,function(a,b){l[b]=a.trim()});var m=this.fixQuotes(l);if(m){if(!1===this.hasValidApostropheQuoteCount(m))throw new Error(this.resources.InvalidApostropheCount);return"("+m+")"}return d}return"("!=e.charAt(0)?"("+e+")":e}return b&&c.isString(b)?(e=b.replace(/\r\n/g,"").replace(/\n/g,"").replace(/\r/g,""),e.length>0?"('"+e+"')":d):b},hasBadOuterQuotes:function(a){if(a&&c.isString(a)&&a.length>0&&this._badQuotesReg.test(a)){var b=a.charAt(0);if(this._badQuotesReg.test(b))return!0;if(b=a.charAt(a.length-1),this._badQuotesReg.test(b))return!0}return!1},hasValidApostropheQuoteCount:function(a){if(a&&c.isString(a)&&a.length>0&&this._normalQuotesReg.test(a)){var b=a.match(/'/g);if(b&&c.isArray(b)&&b.length>0)return b.length%2==0}return!0},removeBadOuterQuotes:function(a){if(this.hasBadOuterQuotes(a)){var b=a,c=b.charAt(0);return this._badQuotesReg.test(c)&&(b=b.substr(1,b.length-1)),""===b?"":(c=b.charAt(b.length-1),this._badQuotesReg.test(c)&&(b=b.substr(0,b.length-1)),b)}return a},replaceQuotesAroundValues:function(b){if(b&&c.isString(b)&&b.length>0){var d=b;a.forEach([/`(.*?)\xb4/g,/\u2018(.*?)\u2019/g,/\u2018(.*?)\u2019/g],function(b){var c=d.match(b);return a.forEach(c,function(a){if(2==a.length)d=d.replace(a,"''");else{var b=a.substr(1,a.length-1);b=b.substr(0,b.length-1),d=d.replace(a,"'"+b+"'")}}),d})}return b},translateQuoteType:function(a){if(a&&c.isString(a)&&1==a.length&&this._allQuotesReg.test(a))switch(a){case"'":return this.quoteType.apostrophe;case"`":case"\xb4":return this.quoteType.accent;case"\u2018":case"\u2019":return this.quoteType.curly;case"\u2018":case"\u2019":return this.quoteType.unicode}return-1}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(a,b,c,d){return a("dijit.CheckedMenuItem",c,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:d,checked:!1,_setCheckedAttr:function(a){this.domNode.setAttribute("aria-checked",a?"true":"false"),this._set("checked",a)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(a){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked)),this.onClick(a)}})})},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a("dijit.MenuItem"+(f("dojo-bidi")?"_NoBidi":""),[h,i,j,k],{templateString:l,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var b,c="",d=a.search(/{\S}/);if(d>=0){c=a.charAt(d+1);var e=a.substr(0,d),f=a.substr(d+3);b=e+c+f,a=e+'<span class="dijitMenuItemShortcutKey">'+c+"</span>"+f}else b=a;this.domNode.setAttribute("aria-label",b+" "+this.accelKey),this.containerNode.innerHTML=a,this._set("shortcutKey",c)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){!a||"label"in this.params||this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";c.set(this.containerNode,"id",a),this.accelKeyNode&&c.set(this.accelKeyNode,"id",this.id+"_accel"),b.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==f("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){d.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){e.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",a)},setDisabled:function(a){e.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false"),this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,c.set(this.containerNode,"colSpan",a?"1":"2")),this._set("accelKey",a)}});return f("dojo-bidi")&&(m=a("dijit.MenuItem",m,{_setLabelAttr:function(a){this.inherited(arguments),"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}})),m})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(a,b){return a("dijit._Contained",null,{_getSibling:function(a){var c=this.domNode;do{c=c[a+"Sibling"]}while(c&&1!=c.nodeType);return c&&b.byNode(c)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var a=this.getParent();return a&&a.getIndexOfChild?a.getIndexOfChild(this):-1}})})},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(a,b,c,d,e,f){return a("dijit.MenuSeparator",[c,d,e],{templateString:f,buildRendering:function(){this.inherited(arguments),b.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(a,b,c,d,e,f,g){return a("dijit.PopupMenuItem",g,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var a=d("*",this.srcNodeRef);this.inherited(arguments,[a[0]]),this.dropDownContainer=this.srcNodeRef}},_openPopup:function(a,b){var d=this.popup;e.open(c.delegate(a,{popup:this.popup,around:this.domNode})),b&&d.focus&&d.focus()},_closePopup:function(){e.close(this.popup),this.popup.parentMenu=null},startup:function(){if(!this._started){if(this.inherited(arguments),!this.popup){
var a=d("[widgetId]",this.dropDownContainer)[0];this.popup=f.byNode(a)}this.ownerDocumentBody.appendChild(this.popup.domNode),this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id),this.popup.startup(),this.popup.domNode.style.display="none",this.arrowWrapper&&b.set(this.arrowWrapper,"visibility",""),this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(a){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(a),delete this.popup),this.inherited(arguments)}})})},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I){function J(a){return p.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var K=d("dijit._TreeNode",[y,z,A,B,C],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a,this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:E,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments),this._setExpando(),this._updateItemClasses(this.item),this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded),this.setSelected(!1)},_setIndentAttr:function(b){var c=Math.max(b,0)*this.tree._nodePixelIndent+"px";j.set(this.domNode,"backgroundPosition",c+" 0px"),j.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",c),a.forEach(this.getChildren(),function(a){a.set("indent",b+1)}),this._set("indent",b)},markProcessing:function(){this.state="Loading",this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null),this._applyClassAndStyle(a,"icon","Icon"),this._applyClassAndStyle(a,"label","Label"),this._applyClassAndStyle(a,"row","Row"),this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var d="_"+b+"Class",e=b+"Node",f=this[d];this[d]=this.tree["get"+c+"Class"](a,this.isExpanded),h.replace(this[e],this[d]||"",f||""),j.set(this[e],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),b=!a||!a.rowNode||"none"==a.rowNode.style.display;h.toggle(this.domNode,"dijitTreeIsRoot",b),h.toggle(this.domNode,"dijitTreeIsLast",!b&&!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],c=["*","-","+","*"],d=a?0:this.isExpandable?this.isExpanded?1:2:3;h.replace(this.expandoNode,b[d],b),this.expandoNodeText.innerHTML=c[d]},expand:function(){if(this._expandDeferred)return J(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred),this.isExpanded=!0,this.labelNode.setAttribute("aria-expanded","true"),(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role","group"),h.add(this.contentNode,"dijitTreeContentExpanded"),this._setExpando(),this._updateItemClasses(this.item),this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=l.wipeIn({node:this.containerNode,duration:x.defaultDuration}),c=this._expandDeferred=new e(function(){a.stop()});return b.after(a,"onEnd",function(){c.resolve(!0)},!0),a.play(),J(c)},collapse:function(){if(this._collapseDeferred)return J(this._collapseDeferred);this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred),this.isExpanded=!1,this.labelNode.setAttribute("aria-expanded","false"),this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false"),h.remove(this.contentNode,"dijitTreeContentExpanded"),this._setExpando(),this._updateItemClasses(this.item);var a=l.wipeOut({node:this.containerNode,duration:x.defaultDuration}),c=this._collapseDeferred=new e(function(){a.stop()});return b.after(a,"onEnd",function(){c.resolve(!0)},!0),a.play(),J(c)},indent:0,setChildItems:function(b){var c=this.tree,d=c.model,e=[],h=c.focusedChild,i=this.getChildren();a.forEach(i,function(a){A.prototype.removeChild.call(this,a)},this),this.defer(function(){a.forEach(i,function(b){function e(b){var f=d.getIdentity(b.item),g=c._itemNodesMap[f];if(1==g.length)delete c._itemNodesMap[f];else{var h=a.indexOf(g,b);-1!=h&&g.splice(h,1)}a.forEach(b.getChildren(),e)}if(!b._destroyed&&!b.getParent()){if(c.dndController.removeTreeNode(b),e(b),c.persist){var f=a.map(b.getTreePath(),function(a){return c.model.getIdentity(a)}).join("/");for(var i in c._openedNodes)i.substr(0,f.length)==f&&delete c._openedNodes[i];c._saveExpandedNodes()}c.lastFocusedChild&&!g.isDescendant(c.lastFocusedChild,c.domNode)&&delete c.lastFocusedChild,h&&!g.isDescendant(h,c.domNode)&&c.focus(),b.destroyRecursive()}})}),this.state="Loaded",b&&b.length>0?(this.isExpandable=!0,a.forEach(b,function(a){var b,f=d.getIdentity(a),g=c._itemNodesMap[f];if(g)for(var h=0;h<g.length;h++)if(g[h]&&!g[h].getParent()){b=g[h],b.set("indent",this.indent+1);break}b||(b=this.tree._createTreeNode({item:a,tree:c,isExpandable:d.mayHaveChildren(a),label:c.getLabel(a),labelType:c.model&&c.model.labelType||"text",tooltip:c.getTooltip(a),ownerDocument:c.ownerDocument,dir:c.dir,lang:c.lang,textDir:c.textDir,indent:this.indent+1}),g?g.push(b):c._itemNodesMap[f]=[b]),this.addChild(b),(this.tree.autoExpand||this.tree._state(b))&&e.push(c._expandNode(b))},this),a.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1,this._setExpando&&this._setExpando(!1),this._updateItemClasses(this.item);var j=f(e);return this.tree._startPaint(j),J(j)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();return b.unshift(this.tree.rootNode.item),b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(b){this.inherited(arguments);var c=this.getChildren();0==c.length&&(this.isExpandable=!1,this.collapse()),a.forEach(c,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0,this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false"),h.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){v.focus(this.focusNode)}});m("dojo-bidi")&&K.extend({_setTextDirAttr:function(b){!b||this.textDir==b&&this._created||(this._set("textDir",b),this.applyTextDir(this.labelNode),a.forEach(this.getChildren(),function(a){a.set("textDir",b)},this))}});var L=d("dijit.Tree",[y,D,z,C],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:F,persist:!1,autoExpand:!1,dndController:I,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){r.publish(this.id,p.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this,this.autoExpand&&(this.persist=!1),this._itemNodesMap={},!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie"),this.expandChildrenDeferred=new e,this.pendingCommandsPromise=this.expandChildrenDeferred.promise,this.inherited(arguments)},postCreate:function(){this._initState();var a=this;if(this.own(q(this.containerNode,q.selector(".dijitTreeNode",s.enter),function(b){a._onNodeMouseEnter(w.byNode(this),b)}),q(this.containerNode,q.selector(".dijitTreeNode",s.leave),function(b){a._onNodeMouseLeave(w.byNode(this),b)}),q(this.containerNode,q.selector(".dijitTreeRow",u.press),function(b){a._onNodePress(w.getEnclosingWidget(this),b)}),q(this.containerNode,q.selector(".dijitTreeRow",u),function(b){a._onClick(w.getEnclosingWidget(this),b)}),q(this.containerNode,q.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(w.getEnclosingWidget(this),b)})),this.model||this._store2model(),this.own(b.after(this.model,"onChange",p.hitch(this,"_onItemChange"),!0),b.after(this.model,"onChildrenChange",p.hitch(this,"_onItemChildrenChange"),!0),b.after(this.model,"onDelete",p.hitch(this,"_onItemDelete"),!0)),this.inherited(arguments),this.dndController){p.isString(this.dndController)&&(this.dndController=p.getObject(this.dndController));for(var c={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(c[this.dndParams[d]]=this[this.dndParams[d]]);this.dndController=new this.dndController(this,c)}this._load(),this.onLoadDeferred=J(this.pendingCommandsPromise),this.onLoadDeferred.then(p.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0,n.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=p.hitch(this,"mayHaveChildren")),this.params.getItemChildren&&(a.getChildren=p.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)})),this.model=new H(a),this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(p.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular)),this.containerNode.appendChild(b.domNode);var c=this.model.getIdentity(a);this._itemNodesMap[c]?this._itemNodesMap[c].push(b):this._itemNodesMap[c]=[b],b._updateLayout(),this._expandNode(b).then(p.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),p.hitch(this,function(a){}))},getNodesByItem:function(a){if(!a)return[];var b=p.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[b])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(b){var c=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(p.hitch(this,function(){var d=a.map(b,function(a){return!a||p.isString(a)?a:c.model.getIdentity(a)}),e=[];a.forEach(d,function(a){e=e.concat(c._itemNodesMap[a]||[])}),this.set("selectedNodes",e)}))},_setPathAttr:function(a){return J(a.length?this.set("paths",[a]).then(function(a){return a[0]}):this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(b){function c(b,e){var f=b.shift(),g=a.filter(e,function(a){return a.getIdentity()==f})[0];if(g)return b.length?d._expandNode(g).then(function(){return c(b,g.getChildren())}):g;throw new L.PathError("Could not expand path at "+f)}var d=this;return J(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return f(a.map(b,function(b){if(b=a.map(b,function(a){return p.isString(a)?a:d.model.getIdentity(a)}),b.length)return c(b,[d.rootNode]);throw new L.PathError("Empty path")}))}).then(function(a){return d.set("selectedNodes",a),d.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function b(d){return c._expandNode(d).then(function(){var c=a.filter(d.getChildren()||[],function(a){return a.isExpandable});return f(a.map(c,b))})}var c=this;return J(b(this.rootNode))},collapseAll:function(){function b(d){var e=a.filter(d.getChildren()||[],function(a){return a.isExpandable}),g=f(a.map(e,b));return!d.isExpanded||d==c.rootNode&&!c.showRoot?g:g.then(function(){return c._collapseNode(d)})}var c=this;return J(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();){var d=b.getChildren();b=d[d.length-1]}else{var e=b.getParent();(this.showRoot||e!==this.rootNode)&&(b=e)}b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return g.isDescendant(a,b.expandoNode)||g.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,d){var e=b.target,f=this.isExpandoNode(e,a);a.isExpandable&&(c||f)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a)),b.stopPropagation(),b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){var b=a.node;this.focusNode(b),b.isExpanded?this._collapseNode(b):this._expandNode(b)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){return n.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0"),this._getNext(a)},_getRootOrFirstNode:function(){return n.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0"),this._getFirst()},_collapseNode:function(a){if(a._expandNodeDeferred&&delete a._expandNodeDeferred,"Loading"!=a.state&&a.isExpanded){var b=a.collapse();return this.onClose(a.item,a),this._state(a,!1),this._startPaint(b),b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new e,b.getChildren(c,function(b){a.unmarkProcessing(),a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){a._loadDeferred.reject(b)}));var d=a._loadDeferred.then(p.hitch(this,function(){var b=a.expand();return this.onOpen(a.item,a),this._state(a,!0),b}));return this._startPaint(d),d},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a),this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(b){var c=this.model,d=c.getIdentity(b),e=this._itemNodesMap[d];if(e){var f=this.getLabel(b),g=this.getTooltip(b);a.forEach(e,function(a){a.set({item:b,label:f,tooltip:g}),a._updateItemClasses(b)})}},_onItemChildrenChange:function(b,c){var d=this.model,e=d.getIdentity(b),f=this._itemNodesMap[e];f&&a.forEach(f,function(a){a.setChildItems(c)})},_onItemDelete:function(b){var c=this.model,d=c.getIdentity(b),e=this._itemNodesMap[d];e&&(a.forEach(e,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a),this.lastFocusedChild&&!g.isDescendant(this.lastFocusedChild,this.domNode)&&delete this.lastFocusedChild,this.focusedChild&&!g.isDescendant(this.focusedChild,this.domNode)&&this.focus(),a.destroyRecursive()},this),delete this._itemNodesMap[d])},_initState:function(){if(this._openedNodes={},this.persist&&this.cookieName){var b=c(this.cookieName);b&&a.forEach(b.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(b,c){if(!this.persist)return!1;var d=a.map(b.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[d];c?this._openedNodes[d]=!0:delete this._openedNodes[d],this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[];for(var b in this._openedNodes)a.push(b);c(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch),this.rootNode&&this.rootNode.destroyRecursive(),this.dndController&&!p.isString(this.dndController)&&this.dndController.destroy(),this.rootNode=null,this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&i.setMarginBox(this.domNode,a),this._nodePixelIndent=i.position(this.tree.indentDetector).w||this._nodePixelIndent,this.expandChildrenDeferred.then(p.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1),this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++,this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=p.hitch(this,function(){--this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});t(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer),this.containerNode.style.width="auto",this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new K(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});return m("dojo-bidi")&&L.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}}),L.PathError=k("TreePathError"),L._TreeNode=K,L})},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(a,b,c,d,e,f,g,h){return b("dijit._KeyNavMixin",h,{tabIndex:"0",childSelector:null,postCreate:function(){if(this.inherited(arguments),c.set(this.domNode,"tabIndex",this.tabIndex),!this._keyNavCodes){var a=this._keyNavCodes={};a[d.HOME]=e.hitch(this,"focusFirstChild"),a[d.END]=e.hitch(this,"focusLastChild"),a[this.isLeftToRight()?d.LEFT_ARROW:d.RIGHT_ARROW]=e.hitch(this,"_onLeftArrow"),a[this.isLeftToRight()?d.RIGHT_ARROW:d.LEFT_ARROW]=e.hitch(this,"_onRightArrow"),a[d.UP_ARROW]=e.hitch(this,"_onUpArrow"),a[d.DOWN_ARROW]=e.hitch(this,"_onDownArrow")}var b=this,h="string"==typeof this.childSelector?this.childSelector:e.hitch(this,"childSelector");this.own(f(this.domNode,"keypress",e.hitch(this,"_onContainerKeypress")),f(this.domNode,"keydown",e.hitch(this,"_onContainerKeydown")),f(this.domNode,"focus",e.hitch(this,"_onContainerFocus")),f(this.containerNode,f.selector(h,"focusin"),function(a){b._onChildFocus(g.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){c.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(a){c.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var c=a.domNode,d=a.label||(c.focusNode?c.focusNode.label:"")||c.innerText||c.textContent||"",e=d.replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&e==b?-1:0},_onContainerKeydown:function(a){var b=this._keyNavCodes[a.keyCode];b?(b(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode==d.SPACE&&this._searchTimer&&!(a.ctrlKey||a.altKey||a.metaKey)&&(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))},_onContainerKeypress:function(a){a.charCode<=d.SPACE||a.ctrlKey||a.altKey||a.metaKey||(a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase()))},_keyboardSearch:function(a,b){var c,d=null,f=0;e.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=b;var a=/^(.)\1*$/.test(this._searchString),e=a?1:this._searchString.length;c=this._searchString.substr(0,e),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var g=this.focusedChild||null;if(1!=e&&g||(g=this._getNextFocusableChild(g,1))){var h=g;do{var i=this._keyboardSearchCompare(g,c);if(i&&0==f++&&(d=g),-1==i){f=-1;break}g=this._getNextFocusableChild(g,1)}while(g!=h)}})(),this.onKeyboardSearch(d,a,c,f)},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var c=a;do{if(a)a=this._getNext(a,b);else if(!(a=this[b>0?"_getFirst":"_getLast"]()))break;if(null!=a&&a!=c&&a.isFocusable())return a}while(a!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,b){if(a)for(a=a.domNode;a;)if((a=a[b<0?"previousSibling":"nextSibling"])&&"getAttribute"in a){var c=g.byNode(a);if(c)return c}return null}})})},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dnd/common","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(a,b,c,d,e,f,g,h,i,j,k){return b("dijit.tree._dndSelector",k,{constructor:function(){this.selection={},this.anchor=null,this.events.push(h(this.tree.domNode,i.press,d.hitch(this,"onMouseDown")),h(this.tree.domNode,i.release,d.hitch(this,"onMouseUp")),h(this.tree.domNode,i.move,d.hitch(this,"onMouseMove")),h(this.tree.domNode,j.press,d.hitch(this,"onClickPress")),h(this.tree.domNode,j.release,d.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection;for(var c in b)a.push(b[c]);return a},selectNone:function(){return this.setSelection([]),this},destroy:function(){this.inherited(arguments),this.selection=this.anchor=null},addTreeNode:function(a,b){return this.setSelection(this.getSelectedTreeNodes().concat([a])),b&&(this.anchor=a),a},removeTreeNode:function(b){var c=a.filter(this.getSelectedTreeNodes(),function(a){return!f.isDescendant(a.domNode,b.domNode)});return this.setSelection(c),b},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(b){var c=this.getSelectedTreeNodes();a.forEach(this._setDifference(c,b),d.hitch(this,function(a){a.setSelected(!1),this.anchor==a&&delete this.anchor,delete this.selection[a.id]})),a.forEach(this._setDifference(b,c),d.hitch(this,function(a){a.setSelected(!0),this.selection[a.id]=a})),this._updateSelectionProperties()},_setDifference:function(b,c){a.forEach(c,function(a){a.__exclude__=!0});var d=a.filter(b,function(a){return!a.__exclude__});return a.forEach(c,function(a){delete a.__exclude__}),d},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),c=[],d=[];a.forEach(b,function(a){var b=a.getTreePath();d.push(a),c.push(b)},this);var e=a.map(d,function(a){return a.item});this.tree._set("paths",c),this.tree._set("path",c[0]||[]),this.tree._set("selectedNodes",d),this.tree._set("selectedNode",d[0]||null),this.tree._set("selectedItems",e),this.tree._set("selectedItem",e[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,this.current))){"mousedown"==a.type&&g.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var c=e.getCopyKeyState(a),d=b.id;if(!this.singular&&!a.shiftKey&&this.selection[d])return void(this._doDeselect=!0);this._doDeselect=!1,this.userSelect(b,c,a.shiftKey)}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,e.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return 2&a.compareDocumentPosition(b)?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var d=doc.createRange();return d.setStartBefore(b),c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser")},userSelect:function(a,b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){var d,e,f=this._compareNodes(this.anchor.rowNode,a.rowNode),g=this.anchor;f<0?(d=g,e=a):(d=a,e=g);for(var h=[];d!=e;)h.push(d),d=this.tree._getNext(d);h.push(e),this.setSelection(h)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||c.global;for(var d in this.selection)a.call(b,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(a,b,c,d,e,f){return b("dijit.tree._dndContainer",null,{constructor:function(b,g){this.tree=b,this.node=b.domNode,d.mixin(this,g),this.containerState="",c.add(this.node,"dojoDndContainer"),this.events=[e(this.node,f.enter,d.hitch(this,"onOverEvent")),e(this.node,f.leave,d.hitch(this,"onOutEvent")),a.after(this.tree,"_onNodeMouseEnter",d.hitch(this,"onMouseOver"),!0),a.after(this.tree,"_onNodeMouseLeave",d.hitch(this,"onMouseOut"),!0),e(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,b){var d="dojoDnd"+a,e=a.toLowerCase()+"State";c.replace(this.node,d+b,d+this[e]),this[e]=b},_addItemClass:function(a,b){c.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){c.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(a,b,c,d){var e=b("dijit.WidgetSet",null,{constructor:function(){this._hash={},this.length=0},add:function(a){if(this._hash[a.id])throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered");this._hash[a.id]=a,this.length++},remove:function(a){this._hash[a]&&(delete this._hash[a],this.length--)},forEach:function(a,b){b=b||c.global;var d,e=0;for(d in this._hash)a.call(b,this._hash[d],e++,this._hash);return this},filter:function(a,b){b=b||c.global;var d,f=new e,g=0;for(d in this._hash){var h=this._hash[d];a.call(b,h,g++,this._hash)&&f.add(h)}return f},byId:function(a){return this._hash[a]},byClass:function(a){var b,c,d=new e;for(b in this._hash)c=this._hash[b],c.declaredClass==a&&d.add(c);return d},toArray:function(){var a=[];for(var b in this._hash)a.push(this._hash[b]);return a},map:function(b,c){return a.map(this.toArray(),b,c)},every:function(a,b){b=b||c.global;var d,e=0;for(d in this._hash)if(!a.call(b,this._hash[d],e++,this._hash))return!1;return!0},some:function(a,b){b=b||c.global;var d,e=0;for(d in this._hash)if(a.call(b,this._hash[d],e++,this._hash))return!0;return!1}});return a.forEach(["forEach","filter","byClass","map","every","some"],function(a){d[a]=e.prototype[a]}),e})},"dijit/_base":function(){define(["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(a){return a._base})},"dijit/_base/focus":function(){define(["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../selection","../main"],function(a,b,c,d,e,f,g,h){var i={_curFocus:null,_prevFocus:null,isCollapsed:function(){return h.getBookmark().isCollapsed},getBookmark:function(){return(e.global==window?g:new g.SelectionManager(e.global)).getBookmark()},moveToBookmark:function(a){return(e.global==window?g:new g.SelectionManager(e.global)).moveToBookmark(a)},getFocus:function(a,c){var d=!f.curNode||a&&b.isDescendant(f.curNode,a.domNode)?h._prevFocus:f.curNode;return{node:d,bookmark:d&&d==f.curNode&&e.withGlobal(c||e.global,h.getBookmark),openedForWindow:c}},_activeStack:[],registerIframe:function(a){return f.registerIframe(a)},unregisterIframe:function(a){a&&a.remove()},registerWin:function(a,b){return f.registerWin(a,b)},unregisterWin:function(a){a&&a.remove()}};return f.focus=function(a){if(a){var b="node"in a?a.node:a,c=a.bookmark,d=a.openedForWindow,g=!!c&&c.isCollapsed;if(b){var i="iframe"==b.tagName.toLowerCase()?b.contentWindow:b;if(i&&i.focus)try{i.focus()}catch(a){}f._onFocusNode(b)}if(c&&e.withGlobal(d||e.global,h.isCollapsed)&&!g){d&&d.focus();try{
e.withGlobal(d||e.global,h.moveToBookmark,null,[c])}catch(a){}}}},f.watch("curNode",function(a,b,c){h._curFocus=c,h._prevFocus=b,c&&d.publish("focusNode",c)}),f.watch("activeStack",function(a,b,c){h._activeStack=c}),f.on("widget-blur",function(a,b){d.publish("widgetBlur",a,b)}),f.on("widget-focus",function(a,b){d.publish("widgetFocus",a,b)}),c.mixin(h,i),h})},"dijit/selection":function(){define(["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","dijit/focus"],function(a,b,c,d,e,f){var g=function(g){var h=g.document;this.getType=function(){if(h.getSelection){var a,b="text";try{a=g.getSelection()}catch(a){}if(a&&1==a.rangeCount){var c=a.getRangeAt(0);c.startContainer==c.endContainer&&c.endOffset-c.startOffset==1&&3!=c.startContainer.nodeType&&(b="control")}return b}return h.selection.type.toLowerCase()},this.getSelectedText=function(){if(h.getSelection){var a=g.getSelection();return a?a.toString():""}return"control"==this.getType()?null:h.selection.createRange().text},this.getSelectedHtml=function(){if(h.getSelection){var a=g.getSelection();if(a&&a.rangeCount){var b,c="";for(b=0;b<a.rangeCount;b++){var d=a.getRangeAt(b).cloneContents(),e=h.createElement("div");e.appendChild(d),c+=e.innerHTML}return c}return null}return"control"==this.getType()?null:h.selection.createRange().htmlText},this.getSelectedElement=function(){if("control"==this.getType()){if(h.getSelection){var a=g.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}var b=h.selection.createRange();if(b&&b.item)return h.selection.createRange().item(0)}return null},this.getParentElement=function(){if("control"==this.getType()){var a=this.getSelectedElement();if(a)return a.parentNode}else{if(!h.getSelection){var b=h.selection.createRange();return b.collapse(!0),b.parentElement()}var c=h.getSelection();if(c){for(var d=c.anchorNode;d&&1!=d.nodeType;)d=d.parentNode;return d}}return null},this.hasAncestorElement=function(a){return null!=this.getAncestorElement.apply(this,arguments)},this.getAncestorElement=function(a){var b=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)},this.isTag=function(a,b){if(a&&a.tagName)for(var c=a.tagName.toLowerCase(),d=0;d<b.length;d++){var e=String(b[d]).toLowerCase();if(c==e)return e}return""},this.getParentOfType=function(a,b){for(;a;){if(this.isTag(a,b).length)return a;a=a.parentNode}return null},this.collapse=function(a){if(h.getSelection){var b=g.getSelection();b.removeAllRanges?a?b.collapseToStart():b.collapseToEnd():b.collapse(a)}else{var c=h.selection.createRange();c.collapse(a),c.select()}},this.remove=function(){var a=h.selection;return h.getSelection?(a=g.getSelection(),a.deleteFromDocument(),a):("none"!=a.type.toLowerCase()&&a.clear(),a)},this.selectElementChildren=function(a,c){var e;if(a=b.byId(a),h.getSelection){var f=g.getSelection();d("opera")?(e=f.rangeCount?f.getRangeAt(0):h.createRange(),e.setStart(a,0),e.setEnd(a,3==a.nodeType?a.length:a.childNodes.length),f.addRange(e)):f.selectAllChildren(a)}else if(e=a.ownerDocument.body.createTextRange(),e.moveToElementText(a),!c)try{e.select()}catch(a){}},this.selectElement=function(a,c){var f;if(a=b.byId(a),h.getSelection){var g=h.getSelection();f=h.createRange(),g.removeAllRanges&&(d("opera")&&g.getRangeAt(0)&&(f=g.getRangeAt(0)),f.selectNode(a),g.removeAllRanges(),g.addRange(f))}else try{var i=a.tagName?a.tagName.toLowerCase():"";f="img"===i||"table"===i?e.body(h).createControlRange():e.body(h).createRange(),f.addElement(a),c||f.select()}catch(b){this.selectElementChildren(a,c)}},this.inSelection=function(a){if(a){var b,c;if(h.getSelection){var d=g.getSelection();if(d&&d.rangeCount>0&&(c=d.getRangeAt(0)),c&&c.compareBoundaryPoints&&h.createRange)try{if(b=h.createRange(),b.setStart(a,0),1===c.compareBoundaryPoints(c.START_TO_END,b))return!0}catch(a){}}else{c=h.selection.createRange();try{b=a.ownerDocument.body.createTextRange(),b.moveToElementText(a)}catch(a){}if(c&&b&&1===c.compareEndPoints("EndToStart",b))return!0}}return!1},this.getBookmark=function(){var a,b,c,d=h.selection,e=f.curNode;if(h.getSelection){if(d=g.getSelection())if(d.isCollapsed){if((c=e?e.tagName:"")&&("textarea"==(c=c.toLowerCase())||"input"==c&&(!e.type||"text"==e.type.toLowerCase())))return d={start:e.selectionStart,end:e.selectionEnd,node:e,pRange:!0},{isCollapsed:d.end<=d.start,mark:d};a={isCollapsed:!0},d.rangeCount&&(a.mark=d.getRangeAt(0).cloneRange())}else b=d.getRangeAt(0),a={isCollapsed:!1,mark:b.cloneRange()}}else if(d){if(c=e?e.tagName:"",c=c.toLowerCase(),e&&c&&("button"==c||"textarea"==c||"input"==c))return d.type&&"none"==d.type.toLowerCase()?{isCollapsed:!0,mark:null}:(b=d.createRange(),{isCollapsed:!b.text||!b.text.length,mark:{range:b,pRange:!0}});a={};try{b=d.createRange(),a.isCollapsed=!("Text"==d.type?b.htmlText.length:b.length)}catch(b){return a.isCollapsed=!0,a}if("CONTROL"==d.type.toUpperCase())if(b.length){a.mark=[];for(var i=0,j=b.length;i<j;)a.mark.push(b.item(i++))}else a.isCollapsed=!0,a.mark=null;else a.mark=b.getBookmark()}return a},this.moveToBookmark=function(b){var d=b.mark;if(d)if(h.getSelection){var e=g.getSelection();if(e&&e.removeAllRanges)if(d.pRange){var f=d.node;f.selectionStart=d.start,f.selectionEnd=d.end}else e.removeAllRanges(),e.addRange(d)}else if(h.selection&&d){var i;d.pRange?i=d.range:c.isArray(d)?(i=h.body.createControlRange(),a.forEach(d,function(a){i.addElement(a)})):(i=h.body.createTextRange(),i.moveToBookmark(d)),i.select()}},this.isCollapsed=function(){return this.getBookmark().isCollapsed}},h=new g(window);return h.SelectionManager=g,h})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(a,b,c,d,e){var f={};return f.getViewport=function(){return c.getBox()},f.placeOnScreen=d.at,f.placeOnScreenAroundElement=function(a,c,e,f){var g;if(b.isArray(e))g=e;else{g=[];for(var h in e)g.push({aroundCorner:h,corner:e[h]})}return d.around(a,c,g,!0,f)},f.placeOnScreenAroundNode=f.placeOnScreenAroundElement,f.placeOnScreenAroundRectangle=f.placeOnScreenAroundElement,f.getPopupAroundAlignment=function(b,c){var d={};return a.forEach(b,function(a){var b=c;switch(a){case"after":d[c?"BR":"BL"]=c?"BL":"BR";break;case"before":d[c?"BL":"BR"]=c?"BR":"BL";break;case"below-alt":b=!b;case"below":d[b?"BL":"BR"]=b?"TL":"TR",d[b?"BR":"BL"]=b?"TR":"TL";break;case"above-alt":b=!b;case"above":default:d[b?"TL":"TR"]=b?"BL":"BR",d[b?"TR":"TL"]=b?"BR":"BL"}}),d},b.mixin(e,f),e})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(a,b){b.scrollIntoView=function(b,c){a.scrollIntoView(b,c)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/typematic":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(a,b,c,d,e,f){var g=f.typematic={_fireEventAndReload:function(){this._timer=null,this._callback(++this._count,this._node,this._evt),this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay),this._timer=setTimeout(c.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,d,e,f,g,h,i){if(f!=this._obj){this.stop(),this._initialDelay=h||500,this._subsequentDelay=g||.9,this._minDelay=i||10,this._obj=f,this._node=d,this._currentTimeout=-1,this._count=-1,this._callback=c.hitch(b,e),this._evt={faux:!0};for(var j in a)if("layerX"!=j&&"layerY"!=j){var k=a[j];"function"!=typeof k&&void 0!==k&&(this._evt[j]=k)}this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(e,f,h,i,j,k,l){var m="keyCode"in f?"keydown":"charCode"in f?"keypress":b._keypress,n="keyCode"in f?"keyCode":"charCode"in f?"charCode":"charOrCode",o=[d(e,m,c.hitch(this,function(a){a[n]!=f[n]||void 0!==f.ctrlKey&&f.ctrlKey!=a.ctrlKey||void 0!==f.altKey&&f.altKey!=a.altKey||void 0!==f.metaKey&&f.metaKey!=(a.metaKey||!1)||void 0!==f.shiftKey&&f.shiftKey!=a.shiftKey?g._obj==f&&g.stop():(a.stopPropagation(),a.preventDefault(),g.trigger(a,h,e,i,f,j,k,l))})),d(e,"keyup",c.hitch(this,function(){g._obj==f&&g.stop()}))];return{remove:function(){a.forEach(o,function(a){a.remove()})}}},addMouseListener:function(b,f,h,i,j,k){var l=[d(b,"mousedown",c.hitch(this,function(a){a.preventDefault(),g.trigger(a,f,b,h,b,i,j,k)})),d(b,"mouseup",c.hitch(this,function(a){this._obj&&a.preventDefault(),g.stop()})),d(b,"mouseout",c.hitch(this,function(a){this._obj&&a.preventDefault(),g.stop()})),d(b,"dblclick",c.hitch(this,function(a){a.preventDefault(),e("ie")<9&&(g.trigger(a,f,b,h,b,i,j,k),setTimeout(c.hitch(this,g.stop),50))}))];return{remove:function(){a.forEach(l,function(a){a.remove()})}}},addListener:function(b,c,d,e,f,g,h,i){var j=[this.addKeyListener(c,d,e,f,g,h,i),this.addMouseListener(b,e,f,g,h,i)];return{remove:function(){a.forEach(j,function(a){a.remove()})}}}};return g})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(a,b,c){var d={hasWaiRole:function(a,b){var c=this.getWaiRole(a);return b?c.indexOf(b)>-1:c.length>0},getWaiRole:function(c){return b.trim((a.get(c,"role")||"").replace("wairole:",""))},setWaiRole:function(b,c){a.set(b,"role",c)},removeWaiRole:function(c,d){var e=a.get(c,"role");if(e)if(d){var f=b.trim((" "+e+" ").replace(" "+d+" "," "));a.set(c,"role",f)}else c.removeAttribute("role")},hasWaiState:function(a,b){return a.hasAttribute?a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)},getWaiState:function(a,b){return a.getAttribute("aria-"+b)||""},setWaiState:function(a,b,c){a.setAttribute("aria-"+b,c)},removeWaiState:function(a,b){a.removeAttribute("aria-"+b)}};return b.mixin(c,d),c})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(a,b){b.getDocumentWindow=function(b){return a.get(b)}})},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(a,b,c,d,e){return a("dijit.form.ComboButton",d,{templateString:e,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(a){a.keyCode==b[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(c.focus(this._popupStateNode),a.stopPropagation(),a.preventDefault())},_onArrowKeyDown:function(a){a.keyCode==b[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(c.focus(this.titleNode),a.stopPropagation(),a.preventDefault())},focus:function(a){this.disabled||c.focus("start"==a?this.titleNode:this._popupStateNode)}})})},"dijit/layout/BorderContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=c("dijit.layout._Splitter",[m,n],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region),this._factor=/top|left/.test(this.region)?1:-1,this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){if(this.inherited(arguments),d.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")),this.container.persist){var a=b(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var b=this.horizontal?"h":"w",c=f.getMarginBox(this.child.domNode)[b],d=a.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],e=f.getContentBox(d.domNode)[b]-10;return Math.min(this.child.maxSize,c+e)},_startDrag:function(a){this.cover||(this.cover=e.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after")),d.add(this.cover,"dijitSplitterCoverActive"),this.fake&&e.destroy(this.fake),(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),d.add(this.domNode,"dijitSplitterShadow"),e.place(this.fake,this.domNode,"after")),d.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active"),this.fake&&d.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var c=this._factor,h=this.horizontal,l=h?"pageY":"pageX",m=a[l],n=this.domNode.style,o=h?"h":"w",p=g.getComputedStyle(this.child.domNode),q=f.getMarginBox(this.child.domNode,p)[o],r=this._computeMaxSize(),s=Math.max(this.child.minSize,f.getPadBorderExtents(this.child.domNode,p)[o]+10),t=this.region,u="top"==t||"bottom"==t?"top":"left",v=parseInt(n[u],10),w=this._resize,x=i.hitch(this.container,"_layoutChildren",this.child.id),y=this.ownerDocument,z=s;this._handlers=this._handlers.concat([j(y,k.move,this._drag=function(a,d){if(this.child&&"0px"===this.child.domNode.style[this.horizontal?"height":"width"]&&this.container&&this.container.persist){var e=b(this._cookieName);e&&(s=e.replace("px",""))}else s=z;var f=a[l]-m,g=c*f+q,h=Math.max(Math.min(g,r),s);(w||d)&&x(h),n[u]=f+v+c*(h-g)+"px"}),j(y,"dragstart",function(a){a.stopPropagation(),a.preventDefault()}),j(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation(),a.preventDefault()}),j(y,k.release,i.hitch(this,"_stopDrag"))]),a.stopPropagation(),a.preventDefault()},_onMouse:function(a){var b="mouseover"==a.type||"mouseenter"==a.type;d.toggle(this.domNode,"dijitSplitterHover",b),d.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",b)},_stopDrag:function(a){try{this.cover&&d.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&e.destroy(this.fake),d.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&b(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var b=this.horizontal,c=1;switch(a.keyCode){case b?h.UP_ARROW:h.LEFT_ARROW:c*=-1;case b?h.DOWN_ARROW:h.RIGHT_ARROW:break;default:return}var d=f.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*c;this.container._layoutChildren(this.child.id,Math.max(Math.min(d,this._computeMaxSize()),this.child.minSize)),a.stopPropagation(),a.preventDefault()},destroy:function(){this._cleanupHandlers(),delete this.child,delete this.container,delete this.cover,delete this.fake,this.inherited(arguments)}}),r=c("dijit.layout._Gutter",[m,n],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments),d.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),s=c("dijit.layout.BorderContainer",o,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:q,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter"),this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,c=a.isLeftToRight();if("leading"==b&&(b=c?"left":"right"),"trailing"==b&&(b=c?"right":"left"),b&&"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget){var d=a.splitter?this._splitterClass:r;i.isString(d)&&(d=i.getObject(d));var f=new d({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters});f.isSplitter=!0,a._splitterWidget=f;var g="bottom"==b||b==(this.isLeftToRight()?"right":"left");e.place(f.domNode,a.domNode,g?"before":"after"),f.startup()}},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget),this.inherited(arguments)},getChildren:function(){return a.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(b){return a.filter(this.getChildren(),function(a){return a.region==b})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var c=this.domNode;this.cs=g.getComputedStyle(c),this.pe=f.getPadExtents(c,this.cs),this.pe.r=g.toPixelValue(c,this.cs.paddingRight),this.pe.b=g.toPixelValue(c,this.cs.paddingBottom),g.set(c,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(b,c){if(this._borderBox&&this._borderBox.h){var d=[];a.forEach(this._getOrderedChildren(),function(a){d.push(a),a._splitterWidget&&d.push(a._splitterWidget)});var e={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};p.layoutChildren(this.domNode,e,d,b,c)}},destroyRecursive:function(){a.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy(),delete a._splitterWidget}),this.inherited(arguments)}});return s.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:1/0},i.mixin(s.ChildWidgetProperties,o.ChildWidgetProperties),i.extend(l,s.ChildWidgetProperties),s._Splitter=q,s._Gutter=r,s})},"dijit/layout/LayoutContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/_base/lang","../_WidgetBase","./_LayoutWidget","./utils"],function(a,b,c,d,e,f,g,h){var i=b("dijit.layout.LayoutContainer",g,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(a.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(a){this.inherited(arguments),a.region&&c.add(a.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=a.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?1/0:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);return b.sort(function(a,b){for(var c=a.weight,d=b.weight,e=0;e<c.length;e++)if(c[e]!=d[e])return c[e]-d[e];return 0}),a.map(b,function(a){return a.pane})},layout:function(){h.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(a,b){this.inherited(arguments),this._started&&this.layout()},removeChild:function(a){this.inherited(arguments),this._started&&this.layout(),c.remove(a.domNode,this.baseClass+"Pane"),d.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"}),d.set(a.domNode,/top|bottom/.test(a.region)?"width":"height","auto")}});return i.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0},e.extend(f,i.ChildWidgetProperties),i})},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(a,b,c,d,e,f,g,h,i){return f("dijit.layout._LayoutWidget",[b,c,d],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments),g.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(e.on("resize",a.hitch(this,"resize"))))}},resize:function(b,c){var d=this.domNode;b&&h.setMarginBox(d,b);var e=c||{};a.mixin(e,b||{}),"h"in e&&"w"in e||(e=a.mixin(h.getMarginBox(d),e));var f=i.getComputedStyle(d),g=h.getMarginExtents(d,f),j=h.getBorderExtents(d,f),k=this._borderBox={w:e.w-(g.w+j.w),h:e.h-(g.h+j.h)},l=h.getPadExtents(d,f);this._contentBox={l:i.toPixelValue(d,f.paddingLeft),t:i.toPixelValue(d,f.paddingTop),w:k.w-l.w,h:k.h-l.h},this.layout()},layout:function(){},_setupChild:function(a){var b=this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:"");g.add(a.domNode,b)},addChild:function(a,b){this.inherited(arguments),this._started&&this._setupChild(a)},removeChild:function(a){var b=this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:"");g.remove(a.domNode,b),this.inherited(arguments)}})})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(a,b,c,d,e){return b("dijit.layout.TabContainer",c,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(b){var c=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new("string"==typeof this.controllerWidget?a.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,class:c,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},b)},postMixInProperties:function(){this.inherited(arguments),this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?d:e)}})})},"dijit/layout/_TabContainerBase":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","./StackContainer","./utils","../registry","../_TemplatedMixin","dojo/text!./templates/TabContainer.html"],function(a,b,c,d,e,f,g,h,i){return a("dijit.layout._TabContainerBase",[e,h],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:i,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,""),this.srcNodeRef&&d.set(this.srcNodeRef,"visibility","hidden"),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.tablist=this._makeController(this.tablistNode),this.doLayout||b.add(this.domNode,"dijitTabContainerNoLayout"),this.nested?(b.add(this.domNode,"dijitTabContainerNested"),b.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),b.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),b.add(this.containerNode,"dijitTabPaneWrapperNested")):b.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){b.add(a.domNode,"dijitTabPane"),this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&void 0!==this._contentBox.l){var a=this.selectedChildWidget;if(this.doLayout){var b=this.tabPosition.replace(/-h/,"");this.tablist.region=b;var d=[this.tablist,{domNode:this.tablistSpacer,region:b},{domNode:this.containerNode,region:"center"}];f.layoutChildren(this.domNode,this._contentBox,d),this._containerContentBox=f.marginBox2contentBox(this.containerNode,d[2]),a&&a.resize&&a.resize(this._containerContentBox)}else{if(this.tablist.resize){var e=this.tablist.domNode.style;e.width="0";var g=c.getContentBox(this.domNode).w;e.width="",this.tablist.resize({w:g})}a&&a.resize&&a.resize()}}},destroy:function(a){this.tablist&&this.tablist.destroy(a),this.inherited(arguments)},selectChild:function(a,b){return this._focused&&(a=g.byId(a),this.tablist.pane2button(a.id).focus()),this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){f("dijit-legacy-requires")&&i(0,function(){var a=["dijit/layout/StackController"];require(a)});var o=c("dijit.layout.StackContainer",n,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments),d.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments),this.own(h(this.domNode,"keydown",g.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var c=this.getChildren();a.forEach(c,this._setupChild,this),this.persist?this.selectedChildWidget=l.byId(b(this.id+"_selectedChild")):a.some(c,function(a){return a.selected&&(this.selectedChildWidget=a),a.selected},this);var d=this.selectedChildWidget;!d&&c[0]&&(d=this.selectedChildWidget=c[0],d.selected=!0),j.publish(this.id+"-startup",{children:c,selected:d,textDir:this.textDir}),this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=e.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",a.domNode,"replace"),d=a["aria-label"]||a.title||a.label;d&&c.setAttribute("aria-label",d),e.place(b,c),a._wrapper=c,this.inherited(arguments),"none"==b.style.display&&(b.style.display="block"),a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments),this._started&&(j.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(b){var c=a.indexOf(this.getChildren(),b);if(this.inherited(arguments),e.destroy(b._wrapper),delete b._wrapper,this._started&&j.publish(this.id+"-removeChild",b),!this._descendantsBeingDestroyed){if(this.selectedChildWidget===b&&(this.selectedChildWidget=void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(c-1,0)])}this._started&&this.layout()}},selectChild:function(a,c){var d;return a=l.byId(a),this.selectedChildWidget!=a&&(d=this._transition(a,this.selectedChildWidget,c),this._set("selectedChildWidget",a),j.publish(this.id+"-selectChild",a),this.persist&&b(this.id+"_selectedChild",this.selectedChildWidget.id)),k(d||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);return a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize()),c},_adjacent:function(b){var c=this.getChildren(),d=a.indexOf(c,this.selectedChildWidget);return d+=b?1:c.length-1,c[d%c.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){j.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();return a.isFirstChild=a==b[0],a.isLastChild=a==b[b.length-1],a._set("selected",!0),a._wrapper&&d.replace(a._wrapper,"dijitVisible","dijitHidden"),a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1),a._wrapper&&d.replace(a._wrapper,"dijitHidden","dijitVisible"),a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(b){this._descendantsBeingDestroyed=!0,this.selectedChildWidget=void 0,a.forEach(this.getChildren(),function(a){b||this.removeChild(a),a.destroyRecursive(b)},this),this._descendantsBeingDestroyed=!1}});return o.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0},g.extend(m,o.ChildWidgetProperties),o})},"dijit/layout/TabController":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/has","dojo/i18n","dojo/_base/lang","./StackController","../registry","../Menu","../MenuItem","dojo/text!./templates/_TabButton.html","dojo/i18n!../nls/common"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a("dijit.layout._TabButton"+(e("dojo-bidi")?"_NoBidi":""),h.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:l,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments),b.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var a=this.domNode;this.defer(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){if(this._set("closeButton",a),d.toggle(this.domNode,"dijitClosable",a),this.closeNode.style.display=a?"":"none",a){var b=f.getLocalization("dijit","common");this.closeNode&&c.set(this.closeNode,"title",b.itemClose)}},_setDisabledAttr:function(a){if(this.inherited(arguments),this.closeNode)if(a)c.remove(this.closeNode,"title");else{var b=f.getLocalization("dijit","common");c.set(this.closeNode,"title",b.itemClose)}},_setLabelAttr:function(a){this.inherited(arguments),this.showLabel||this.params.title||(this.iconNode.alt=g.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});e("dojo-bidi")&&(m=a("dijit.layout._TabButton",m,{_setLabelAttr:function(a){this.inherited(arguments),this.applyTextDir(this.iconNode,this.iconNode.alt)}}));var n=a("dijit.layout.TabController",h,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:m,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var a=new j({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return d.contains(a,"dijitClosable")&&!d.contains(a,"dijitTabDisabled")}});this.own(a);var b=f.getLocalization("dijit","common"),c=this;a.addChild(new k({label:b.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){var b=i.byNode(this.getParent().currentTarget);c.onCloseButtonClick(b.page)}}))}});return n.TabButton=m,n})},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=b("dijit.layout._StackButton",n,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments),(this.focusNode||this.domNode).setAttribute("role","tab")}}),p=b("dijit.layout.StackController",[k,l,m],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:o,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return j.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments),this.own(h.subscribe(this.containerId+"-startup",f.hitch(this,"onStartup")),h.subscribe(this.containerId+"-addChild",f.hitch(this,"onAddChild")),h.subscribe(this.containerId+"-removeChild",f.hitch(this,"onRemoveChild")),h.subscribe(this.containerId+"-selectChild",f.hitch(this,"onSelectChild")),h.subscribe(this.containerId+"-containerKeyDown",f.hitch(this,"onContainerKeyDown"))),this.containerNode.dojoClick=!0,this.own(g(this.containerNode,"click",f.hitch(this,function(a){var b=j.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(var d=a.target;d!==this.containerNode;d=d.parentNode){if(c.contains(d,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);break}if(d==b.domNode){this.onButtonClick(b.page);break}}})))},onStartup:function(b){this.textDir=b.textDir,a.forEach(b.children,this.onAddChild,this),b.selected&&this.onSelectChild(b.selected);var c=j.byId(this.containerId).containerNode,d=f.hitch(this,"pane2button"),e={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"},h=function(a,b){return g(c,"attrmodified-"+a,function(a){
var c=d(a.detail&&a.detail.widget&&a.detail.widget.id);c&&c.set(b,a.detail.newValue)})};for(var i in e)this.own(h(i,e[i]))},destroy:function(a){this.destroyDescendants(a),this.inherited(arguments)},onAddChild:function(a,b){var c=f.isString(this.buttonWidget)?f.getObject(this.buttonWidget):this.buttonWidget,d=new c({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip,page:a});this.addChild(d,b),a.controlButton=d,this._currentChild||this.onSelectChild(a);var e=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+d.id:d.id;a._wrapper.removeAttribute("aria-label"),a._wrapper.setAttribute("aria-labelledby",e)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy()),delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button(this._currentChild.id);b.set("checked",!1),b.focusNode.setAttribute("tabIndex","-1")}var c=this.pane2button(a.id);c.set("checked",!0),this._currentChild=a,c.focusNode.setAttribute("tabIndex","0");j.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);i.focus(b.focusNode),this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0),j.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){if(j.byId(this.containerId).closeChild(a),this._currentChild){var b=this.pane2button(this._currentChild.id);b&&i.focus(b.focusNode||b.domNode)}},adjacent:function(b){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(b=!b);var c,d=this.getChildren(),e=a.indexOf(d,this.pane2button(this._currentChild.id)),f=d[e];do{e=(e+(b?1:d.length-1))%d.length,c=d[e]}while(c.disabled&&c!=f);return c},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case e.LEFT_ARROW:case e.UP_ARROW:a._djpage||(c=!1);break;case e.PAGE_UP:a.ctrlKey&&(c=!1);break;case e.RIGHT_ARROW:case e.DOWN_ARROW:a._djpage||(c=!0);break;case e.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case e.HOME:for(var d=this.getChildren(),f=0;f<d.length;f++){var g=d[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation(),a.preventDefault();break;case e.END:for(var d=this.getChildren(),f=d.length-1;f>=0;f--){var g=d[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation(),a.preventDefault();break;case e.DELETE:case"W".charCodeAt(0):this._currentChild.closable&&(a.keyCode==e.DELETE||a.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault());break;case e.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page,this.onkeydown(a.e)}});return p.StackButton=o,p})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(a,b,c,d){return a("dijit.form.ToggleButton",[c,d],{baseClass:"dijitToggleButton",setChecked:function(a){b.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+a+") instead.","","2.0"),this.set("checked",a)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(a,b){return a("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(a){var b=this.checked;this._set("checked",!b);var c=this.inherited(arguments);return this.set("checked",c?this.checked:b),c},_setCheckedAttr:function(a,c){this._set("checked",a);var d=this.focusNode||this.domNode;this._created&&b.get(d,"checked")!=!!a&&b.set(d,"checked",!!a),d.setAttribute(this._aria_attr,String(a)),this._handleOnChange(a,c)},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.checked&&a.setAttribute("checked","checked"),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})})},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return k("dijit-legacy-requires")&&p(0,function(){a(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])}),c("dijit.Menu",o,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):b.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(a){return m.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=d.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var c=a,f=this._iframeContentWindow(c);b=l.body(f.document)}else b=a==l.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var g={node:a,iframe:c};e.set(a,"_dijitMenu"+this.id,this._bindings.push(g));var k=i.hitch(this,function(a){var b=this.selector,d=b?function(a){return j.selector(b,a)}:function(a){return a},e=this;return[j(a,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation(),a.preventDefault(),(new Date).getTime()<this._lastKeyDown+500||e._scheduleOpen(this,c,{x:a.pageX,y:a.pageY},a.target)}),j(a,d("keydown"),function(a){(93==a.keyCode||a.shiftKey&&a.keyCode==h.F10||this.leftClickToOpen&&a.keyCode==h.SPACE)&&(a.stopPropagation(),a.preventDefault(),e._scheduleOpen(this,c,null,a.target),this._lastKeyDown=(new Date).getTime())})]});g.connects=b?k(b):[],c&&(g.onloadHandler=i.hitch(this,function(){var a=this._iframeContentWindow(c),b=l.body(a.document);g.connects=k(b)}),c.addEventListener?c.addEventListener("load",g.onloadHandler,!1):c.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var b;try{b=d.byId(a,this.ownerDocument)}catch(a){return}var c="_dijitMenu"+this.id;if(b&&e.has(b,c)){for(var f,g=e.get(b,c)-1,h=this._bindings[g];f=h.connects.pop();)f.remove();var i=h.iframe;i&&(i.removeEventListener?i.removeEventListener("load",h.onloadHandler,!1):i.detachEvent("onload",h.onloadHandler)),e.remove(b,c),delete this._bindings[g]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function b(){s.refocus&&v&&v.focus(),n.close(s)}var c=a.target,e=a.iframe,h=a.coords,i=!h;if(this.currentTarget=a.delegatedTarget,h){if(e){var j=f.position(e,!0),l=this._iframeContentWindow(e),m=f.docScroll(l.document),o=g.getComputedStyle(e),p=g.toPixelValue,q=(k("ie")&&k("quirks")?0:p(e,o.paddingLeft))+(k("ie")&&k("quirks")?p(e,o.borderLeftWidth):0),r=(k("ie")&&k("quirks")?0:p(e,o.paddingTop))+(k("ie")&&k("quirks")?p(e,o.borderTopWidth):0);h.x+=j.x+q-m.x,h.y+=j.y+r-m.y}}else h=f.position(c,!0),h.x+=10,h.y+=10;var s=this,t=this._focusManager.get("prevNode"),u=this._focusManager.get("curNode"),v=!u||d.isDescendant(u,this.domNode)?t:u;n.open({popup:this,x:h.x,y:h.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"}),this.focus(),i||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),n.close(this)}},destroy:function(){b.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this),this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(a,b,c,d){return a("dijit.DropDownMenu",d,{templateString:c,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a),a.stopPropagation(),a.preventDefault()},_onLeftArrow:function(a){this.parentMenu?this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(!1):(a.stopPropagation(),a.preventDefault())}})})},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return b("dijit._MenuBase",[l,o,n,m],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){e.toggle(this.domNode,"dijitMenuActive",a),e.toggle(this.domNode,"dijitMenuPassive",!a),this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:1/0,autoFocus:!1,childSelector:function(a){var b=k.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,b="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(h(this.containerNode,h.selector(b,g.enter),function(){a.onItemHover(k.byNode(this))}),h(this.containerNode,h.selector(b,g.leave),function(){a.onItemUnhover(k.byNode(this))}),h(this.containerNode,h.selector(b,j),function(b){a.onItemClick(k.byNode(this),b),b.stopPropagation()}),h(this.containerNode,h.selector(b,"focusin"),function(){a._onItemFocus(k.byNode(this))})),this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments),a&&(-1==d||a.popup&&1==d)&&this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else{var b=this._getTopMenu();b&&b._isMenuBar&&b.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem),this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):this.passivePopupDelay<1/0&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay)),this._hoveredChild=a,a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer(),this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null,this.currentPopupItem=null,a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null),this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null),a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){if(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.focusChild(a),a.disabled)return!1;if(a.popup){this.set("selected",a),this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup()),this._stopPopupTimer();var c=a.popup;c.parentMenu=this,this.own(this._mouseoverHandle=h.once(c.domNode,"mouseover",f.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&d.focusChild(a),d._cleanUp()},onExecute:f.hitch(this,"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},b),this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0,this.set("activated",!0)},onClose:function(){this.set("activated",!1),this.set("selected",null),this.isShowingNow=!1,this.parentMenu=null},_closeChild:function(){this._stopPopupTimer(),this.currentPopupItem&&(this.focused&&(d.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){this._hoveredChild&&this._hoveredChild!=a&&this.onItemUnhover(this._hoveredChild),this.set("selected",a)},_onBlur:function(){this._cleanUp(!0),this.inherited(arguments)},_cleanUp:function(a){this._closeChild(),void 0===this.isShowingNow&&this.set("activated",!1),a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(a,b,c,d,e,f,g,h,i,j){return b("dijit._KeyNavContainer",[i,j,h],{connectKeyNavHandlers:function(b,c){var d=this._keyNavCodes={},g=f.hitch(this,"focusPrev"),h=f.hitch(this,"focusNext");a.forEach(b,function(a){d[a]=g}),a.forEach(c,function(a){d[a]=h}),d[e.HOME]=f.hitch(this,"focusFirstChild"),d[e.END]=f.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){d.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments),a.forEach(this.getChildren(),f.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments),this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){var a=g.byNode(a);return a&&a.getParent()==this}})})},"dijit/layout/ScrollingTabController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/_base/lang","dojo/on","dojo/query","dojo/sniff","../registry","dojo/text!./templates/ScrollingTabController.html","dojo/text!./templates/_ScrollingTabControllerButton.html","./TabController","./utils","../_WidgetsInTemplateMixin","../Menu","../MenuItem","../form/Button","../_HasDropDown","dojo/NodeList-dom","../a11yclick"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=b("dijit.layout.ScrollingTabController",[n,p],{baseClass:"dijitTabController dijitScrollingTabController",templateString:l,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper,this._initButtons(),this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None",c.add(a,"tabStrip-disabled")),c.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments),e.set(this.domNode,"visibility",""),this._postStartup=!0,this.own(h(this.containerNode,"attrmodified-label, attrmodified-iconclass",g.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments),e.set(this.containerNode,"width",e.get(this.containerNode,"width")+200+"px")},onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null),this.inherited(arguments)},_initButtons:function(){this._btnWidth=0,this._buttons=i("> .tabStripButton",this.domNode).filter(function(a){return this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode)?(this._btnWidth+=d.getMarginSize(a).w,!0):(e.set(a,"display","none"),!1)},this)},_getTabsWidth:function(){var a=this.getChildren();if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,c=a[this.isLeftToRight()?a.length-1:0].domNode;return c.offsetLeft+c.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();return a=a||e.get(this.scrollNode,"width"),b>0&&a<b},resize:function(a){this._dim=a,this.scrollNode.style.height="auto";var b=this._contentBox=o.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight,d.setContentSize(this.domNode,b);var c=this._enableBtn(this._contentBox.w);return this._buttons.style("display",c?"":"none"),this._leftBtn.region="left",this._rightBtn.region="right",this._menuBtn.region=this.isLeftToRight()?"right":"left",o.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]),this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab())),this._setButtonClass(this._getScroll()),this._postResize=!0,{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||j("ie")<8||j("ie")&&j("quirks")||j("webkit")?this.scrollNode.scrollLeft:e.get(this.containerNode,"width")-e.get(this.scrollNode,"width")+(j("ie")>=8?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||j("ie")<8||j("ie")&&j("quirks")||j("webkit"))return a;var b=e.get(this.containerNode,"width")-e.get(this.scrollNode,"width");return(j("ie")>=8?-1:1)*(a-b)},onSelectChild:function(a){var b=this.pane2button(a.id);if(b){var c=b.domNode;if(c!=this._selectedTab&&(this._selectedTab=c,this._postResize)){var d=this._getScroll();(d>c.offsetLeft||d+e.get(this.scrollNode,"width")<c.offsetLeft+e.get(c,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=e.get(this.scrollNode,"width"),c=e.get(this.containerNode,"width"),d=c-b,f=this._getTabsWidth();if(a.length&&f>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:d};var g=this.isLeftToRight()?0:d;return{min:g,max:g}},_getScrollForSelectedTab:function(){var a=(this.scrollNode,this._selectedTab),b=e.get(this.scrollNode,"width"),c=this._getScrollBounds(),d=a.offsetLeft+e.get(a,"width")/2-b/2;return d=Math.min(Math.max(d,c.min),c.max)},createSmoothScroll:function(a){if(arguments.length>0){var b=this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var c=this,d=this.scrollNode,e=new f.Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=d.scrollLeft,g=c._convertToScrollLeft(a);e.curve=new f._Line(b,g)},onAnimate:function(a){d.scrollLeft=a}});return this._anim=e,this._setButtonClass(a),e},_getBtnNode:function(a){for(var b=a.target;b&&!c.contains(b,"tabStripButton");)b=b.parentNode;return b},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!c.contains(b,"dijitTabDisabled")){var d=e.get(this.scrollNode,"width"),f=.75*d*a,g=this._getScroll()+f;this._setButtonClass(g),this.createSmoothScroll(g).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min),this._rightBtn.set("disabled",a>=b.max)}}),v=b("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:m,tabIndex:"",isFocusable:function(){return!1}});return b("dijit.layout._ScrollingTabControllerButton",[s,v]),b("dijit.layout._ScrollingTabControllerMenuButton",[s,t,v],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(b){this.dropDown=new q({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var c=k.byId(this.containerId);a.forEach(c.getChildren(),function(a){var b=new r({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||c.textDir,onClick:function(){c.selectChild(a)}});this.dropDown.addChild(b)},this),b()},closeDropDown:function(a){this.inherited(arguments),this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}}),u})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(a,b){return a.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(b){a.mixin(this,b)},getValue:function(b,c,d){if(this._assertIsItem(b),!a.isString(c))throw new Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(b,c)&&d?d:b.i[c]},getValues:function(a,b){this._assertIsItem(a);var c=[];return this.hasAttribute(a,b)&&c.push(a.i[b]),c},getAttributes:function(a){this._assertIsItem(a);var b=[];for(var c in a.i)b.push(c);return b},hasAttribute:function(a,b){return this.isItem(a)&&void 0!==a.i[b]},containsValue:function(a,b,c){for(var d=this.getValues(a,b),e=d.length,f=0;f<e;f++)if(d[f]==c)return!0;return!1},isItem:function(a){return!!a&&(void 0!==a.r&&a.r==this)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(b){b=b||{},b.store||(b.store=this);var c=this,d=function(b,c){if(c.onError){var d=c.scope||a.global;c.onError.call(d,b,c)}},e=function(b,d,e){var f=d.abort||null,g=!1,h=d.start?d.start:0;0==c.doClientPaging&&(h=0);var i=d.count?h+d.count:b.length;d.abort=function(){g=!0,f&&f.call(d)};var j=d.scope||a.global;if(d.store||(d.store=c),d.onBegin&&d.onBegin.call(j,e,d),d.sort&&c.doClientSorting&&b.sort(a.data.util.sorter.createSortFunction(d.sort,c)),d.onItem)for(var k=h;k<b.length&&k<i;++k){var l=b[k];g||d.onItem.call(j,l,d)}if(d.onComplete&&!g){var m=null;d.onItem||(m=b.slice(h,i)),d.onComplete.call(j,m,d)}};return this._fetchItems(b,e,d),b},getFeatures:function(){return this._features},close:function(a){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(b,c,d,e){b=this._filterResponse(b),b.label&&(this._labelAttr=b.label);var f=b.numRows||-1;this._items=[],a.forEach(b.items,function(a){this._items.push({i:a,r:this})},this);var g=b.identifier;if(this._itemsByIdentity={},g){this._identifier=g;var h;for(h=0;h<this._items.length;++h){var i=this._items[h].i,j=i[g];if(this._itemsByIdentity[j])throw new Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+g+"].  Value collided: ["+j+"]");this._itemsByIdentity[j]=i}}else for(this._identifier=Number,h=0;h<this._items.length;++h)this._items[h].n=h;f=this._numRows=-1===f?this._items.length:f,d(this._items,c,f),this._numRows=f},_fetchItems:function(b,c,d){var e=b.serverQuery||b.query||{};if(this.doClientPaging||(e.start=b.start||0,b.count&&(e.count=b.count)),!this.doClientSorting&&b.sort){var f=[];a.forEach(b.sort,function(a){a&&a.attribute&&f.push((a.descending?"-":"")+a.attribute)}),e.sort=f.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&a.toJson(e)==a.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,c(this._items,b,this._numRows);else{var g="post"==this.requestMethod.toLowerCase()?a.xhrPost:a.xhrGet,h=g({url:this.url,handleAs:"json-comment-optional",content:e,failOk:!0});b.abort=function(){h.cancel()},h.addCallback(a.hitch(this,function(a){this._xhrFetchHandler(a,b,c,d)})),h.addErrback(function(a){d(a,b)}),this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2),this._lastServerQuery=a.mixin({},e)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw new Error(this._className+": Invalid item argument.")},_assertIsAttribute:function(a){if("string"!=typeof a)throw new Error(this._className+": Invalid attribute argument ('"+a+"').")},fetchItemByIdentity:function(b){if(this._itemsByIdentity){var c=this._itemsByIdentity[b.identity];if(void 0!==c){if(b.onItem){var d=b.scope?b.scope:a.global;b.onItem.call(d,{i:c,r:this})}return}}var e=function(c,d){var e=b.scope?b.scope:a.global;b.onError&&b.onError.call(e,c)},f=function(c,d){var e=b.scope?b.scope:a.global;try{var f=null;c&&1==c.length&&(f=c[0]),b.onItem&&b.onItem.call(e,f)}catch(a){b.onError&&b.onError.call(e,a)}},g={serverQuery:{id:b.identity}};this._fetchItems(g,f,e)},getIdentity:function(a){return this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(a){return[this._identifier]}})})},"dojox/grid/EnhancedGrid":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-geometry","./DataGrid","./DataSelection","./enhanced/_PluginManager","./enhanced/plugins/_SelectionPreserver","dojo/i18n!./enhanced/nls/EnhancedGrid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.experimental("dojox.grid.EnhancedGrid");var n=c("dojox.grid.EnhancedGrid",i,{plugins:null,pluginMgr:null,_pluginMgrClass:k,postMixInProperties:function(){this._nls=m,this.inherited(arguments)},postCreate:function(){this.pluginMgr=new this._pluginMgrClass(this),this.pluginMgr.preInit(),this.inherited(arguments),this.pluginMgr.postInit()},plugin:function(a){return this.pluginMgr.getPlugin(a)},startup:function(){this.inherited(arguments),this.pluginMgr.startup()},createSelection:function(){this.selection=new b.grid.enhanced.DataSelection(this)},canSort:function(a,b){return!0},doKeyEvent:function(a){try{var b=this.focus.focusView;b.content.decorateEvent(a),a.cell||b.header.decorateEvent(a)}catch(a){}this.inherited(arguments)},doApplyCellEdit:function(a,b,c){if(!c)return void(this.invalidated[b]=!0);this.inherited(arguments)},mixin:function(a,b){var c={};for(var e in b)"_inherited"==e||"declaredClass"==e||"constructor"==e||b.privates&&b.privates[e]||(c[e]=b[e]);d.mixin(a,c)},_copyAttr:function(a,b){if(b)return this.inherited(arguments)},_getHeaderHeight:function(){return this.inherited(arguments),h.getMarginBox(this.viewsHeaderNode).h},_fetch:function(a,b){if(this.items)return this.inherited(arguments);if(a=a||0,this.store&&!this._pending_requests[a]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage)),this._pending_requests[a]=!0;try{var c={start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:b,onBegin:d.hitch(this,"_onFetchBegin"),onComplete:d.hitch(this,"_onFetchComplete"),onError:d.hitch(this,"_onFetchError")};this._storeLayerFetch(c)}catch(b){this._onFetchError(b,{start:a,count:this.rowsPerPage})}}return 0},_storeLayerFetch:function(a){this.store.fetch(a)},getCellByField:function(a){return e.filter(this.layout.cells,function(b){return b.field==a})[0]},onMouseUp:function(a){},createView:function(){var a=this.inherited(arguments);if(f("mozilla")){var b=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},c=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},d=a.header.getCellX;a.header.getCellX=function(e){var f=d.call(a.header,e),h=b(e.target,c("th"));return h&&h!==e.target&&g.isDescendant(e.target,h)&&(f+=h.firstChild.offsetLeft),f}}return a},destroy:function(){delete this._nls,this.pluginMgr.destroy(),this.inherited(arguments)}});return c("dojox.grid.enhanced.DataSelection",j,{constructor:function(a){a.keepSelection&&(this.preserver&&this.preserver.destroy(),this.preserver=new l(this))},_range:function(a,b){this.grid._selectingRange=!0,this.inherited(arguments),this.grid._selectingRange=!1,this.onChanged()},deselectAll:function(a){this.grid._selectingRange=!0,this.inherited(arguments),this.grid._selectingRange=!1,this.onChanged()}}),n.markupFactory=function(a,c,e,f){return b.grid._Grid.markupFactory(a,c,e,d.partial(i.cell_markupFactory,f))},n.registerPlugin=function(a,b){k.registerPlugin(a,b)},n})},"dojox/grid/DataGrid":function(){define(["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/sniff","dojo/_base/declare","./_Grid","./DataSelection","dojo/_base/html","dojo/has","dojo/has!dojo-bidi?./bidi/_BidiMixin"],function(a,b,c,d,e,f,g,h,i){var j=f("dojox.grid.DataGrid",g,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[],this._store_connects=[],this._by_idty={},this._by_idx=[],this._cache=[],this._pending_requests={},this._setStore(this.store),this.inherited(arguments)},destroy:function(){this.selection.destroy(),this.inherited(arguments)},createSelection:function(){this.selection=new h(this)},get:function(a,c){if(c&&"_item"==this.field&&!this.fields)return c;if(c&&this.fields){var d=[],e=this.grid.store;return b.forEach(this.fields,function(a){d=d.concat(e.getValues(c,a))}),d}return c||"string"!=typeof a?c?this.field?"_item"==this.field?c:this.grid.store.getValue(c,this.field):this.value:this.defaultValue:this.inherited(arguments)},_checkUpdateStatus:function(){if(this.updateDelay>0){var a=!1;if(this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,a=!0),this.updating||(this.beginUpdate(),a=!0),a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay,b.endUpdate()},this.updateDelay)}}},_onSet:function(a,b,c,d){this._checkUpdateStatus();var e=this.getItemIndex(a);e>-1&&this.updateRow(e)},_createItem:function(a,b){var c=this._hasIdentity?this.store.getIdentity(a):d.toJson(this.query)+":idx:"+b+":sort:"+d.toJson(this.getSortProps());return this._by_idty[c]={idty:c,item:a}},_addItem:function(a,b,c){this._by_idx[b]=this._createItem(a,b),c||this.updateRow(b)},_onNew:function(a,b){this._checkUpdateStatus();var c=this.get("rowCount");this._addingItem=!0,this.updateRowCount(c+1),this._addingItem=!1,this._addItem(a,c),this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();var b=this._getItemIndex(a,!0);if(b>=0){this._pages=[],this._bop=-1,this._eop=-1;var c=this._by_idx[b];this._by_idx.splice(b,1),delete this._by_idty[c.idty],this.updateRowCount(this.get("rowCount")-1),0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(b)&&(this.selection.deselect(b),this.selection.selected.splice(b,1))},_onRevert:function(){this._refresh()},setStore:function(a,b,c){this._requestsPending(0)||(this._setQuery(b,c),this._setStore(a),this._refresh(!0))},setQuery:function(a,b){this._requestsPending(0)||(this._setQuery(a,b),this._refresh(!0))},setItems:function(a){
this.items=a,this._setStore(this.store),this._refresh(!0)},_setQuery:function(a,b){this.query=a,this.queryOptions=b||this.queryOptions},_setStore:function(a){if(this.store&&this._store_connects&&b.forEach(this._store_connects,this.disconnect,this),this.store=a,this.store){var c=this.store.getFeatures(),d=[];this._canEdit=!!c["dojo.data.api.Write"]&&!!c["dojo.data.api.Identity"],this._hasIdentity=!!c["dojo.data.api.Identity"],c["dojo.data.api.Notification"]&&!this.items&&(d.push(this.connect(this.store,"onSet","_onSet")),d.push(this.connect(this.store,"onNew","_onNew")),d.push(this.connect(this.store,"onDelete","_onDelete"))),this._canEdit&&d.push(this.connect(this.store,"revert","_onRevert")),this._store_connects=d}},_onFetchBegin:function(a,b){this.scroller&&(this.rowCount!=a&&(b.isRender?(this.scroller.init(a,this.keepRows,this.rowsPerPage),this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(a)),a?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),this.focus.initFocusView()))},_onFetchComplete:function(a,c){this.scroller&&(a&&a.length>0&&(b.forEach(a,function(a,b){this._addItem(a,c.start+b,!0)},this),this.updateRows(c.start,a.length),c.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),e("ie")&&i.setSelectable(this.domNode,this.selectable)),delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0),this._pending_requests[c.start]=!1)},_onFetchError:function(a,b){delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage)),this._pending_requests[b.start]=!1,this.onFetchError(a,b)},onFetchError:function(a,b){},_fetch:function(a,d){if(a=a||0,this.store&&!this._pending_requests[a]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage)),this._pending_requests[a]=!0;try{if(this.items){var e=this.items,f=this.store;this.rowsPerPage=e.length;var g={start:a,count:this.rowsPerPage,isRender:d};this._onFetchBegin(e.length,g);var h=0;if(b.forEach(e,function(a){f.isItemLoaded(a)||h++}),0===h)this._onFetchComplete(e,g);else{var i=function(a){0===--h&&this._onFetchComplete(e,g)};b.forEach(e,function(a){f.isItemLoaded(a)||f.loadItem({item:a,onItem:i,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:d,onBegin:c.hitch(this,"_onFetchBegin"),onComplete:c.hitch(this,"_onFetchComplete"),onError:c.hitch(this,"_onFetchError")})}catch(b){this._onFetchError(b,{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0),this._by_idty={},this._by_idx=[],this._pages=[],this._bop=this._eop=-1,this._isLoaded=!1,this._isLoading=!1},getItem:function(a){var b=this._by_idx[a];return!b||b&&!b.item?(this._preparePage(a),null):b.item},getItemIndex:function(a){return this._getItemIndex(a,!1)},_getItemIndex:function(a,b){if(!b&&!this.store.isItem(a))return-1;for(var c=this._hasIdentity?this.store.getIdentity(a):null,d=0,e=this._by_idx.length;d<e;d++){var f=this._by_idx[d];if(f&&(c&&f.idty==c||f.item===a))return d}return-1},filter:function(a,b){this.query=a,b&&this._clearData(),this._fetch()},_getItemAttr:function(a,b){var c=this.getItem(a);return c?this.store.getValue(c,b):this.fetchText},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem){var b=this._rowToPage(a);this._needPage(b),this._bop=b*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"))}},_needPage:function(a){this._pages[a]||(this._pages[a]=!0,this._requestPage(a))},_requestPage:function(a){var b=this._pageToRow(a);Math.min(this.rowsPerPage,this.get("rowCount")-b)>0&&(this._requests++,this._requestsPending(b)||setTimeout(c.hitch(this,"_fetch",b,!1),1))},getCellName:function(a){return a.field},_refresh:function(a){this._clearData(),this._fetch(0,a)},sort:function(){this.edit.apply(),this._lastScrollTop=this.scrollTop,this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var b=a.sortDesc,c=!(this.sortInfo>0);return b=void 0===b?c:c?!b:b,[{attribute:a.field,descending:b}]}return this.sortFields?this.sortFields:null},styleRowState:function(a){if(this.store&&this.store.getState){for(var b,c=this.store.getState(a.index),d="",e=0,f=["inflight","error","inserting"];b=f[e];e++)if(c[b]){d=" dojoxGridRow-"+b;break}a.customClasses+=d}},onStyleRow:function(a){this.styleRowState(a),this.inherited(arguments)},canEdit:function(a,b){return this._canEdit},_copyAttr:function(a,b){var c=this.getItem(a);return this.store.getValue(c,b)},doStartEdit:function(a,b){this._cache[b]||(this._cache[b]=this._copyAttr(b,a.field)),this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,d){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:c.hitch(this,function(c){var e=this.store.getValue(c,d);if("number"==typeof e)a=isNaN(a)?a:parseFloat(a);else if("boolean"==typeof e)a="true"==a||"false"!=a&&a;else if(e instanceof Date){var f=new Date(a);a=isNaN(f.getTime())?a:f}this.store.setValue(c,d,a),this.onApplyCellEdit(a,b,d)})})},doCancelEdit:function(a){this._cache[a]&&(this.updateRow(a),delete this._cache[a]),this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a,b){this._cache[a];this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=c.hitch(this,function(a){a.length&&(b.forEach(a,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}});return j.cell_markupFactory=function(a,b,d){var e=c.trim(i.attr(b,"field")||"");e&&(d.field=e),d.field=d.field||d.name;var f=c.trim(i.attr(b,"fields")||"");f&&(d.fields=f.split(",")),a&&a(b,d)},j.markupFactory=function(a,b,d,e){return g.markupFactory(a,b,d,c.partial(j.cell_markupFactory,e))},j})},"dojox/grid/_Grid":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","./_Events","./_Scroller","./_Layout","./_View","./_ViewManager","./_RowManager","./_FocusManager","./_EditManager","./Selection","./_RowSelector","./util","dijit/_Widget","dijit/_TemplatedMixin","dijit/CheckedMenuItem","dojo/text!./resources/_Grid.html","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojox/html/metrics","dojo/_base/html","dojo/query","dojo/dnd/common","dojo/i18n!dijit/nls/loading"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){a.isCopyKey||(a.isCopyKey=a.dnd.getCopyKeyState);var z=c("dojox.grid._Grid",[o,p,d],{templateString:r,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,editable:!1,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:f,buildRendering:function(){this.inherited(arguments),this.domNode.getAttribute("tabIndex")||(this.domNode.tabIndex="0"),this.createScroller(),this.createLayout(),this.createViews(),this.createManagers(),this.createSelection(),this.connect(this.selection,"onSelected","onSelected"),this.connect(this.selection,"onDeselected","onDeselected"),this.connect(this.selection,"onChanged","onSelectionChanged"),w.initOnFontResize(),this.connect(w,"onFontResize","textSizeChanged"),n.funnelEvents(this.domNode,this,"doKeyEvent",n.keyEvents),"none"!=this.selectionMode&&this.domNode.setAttribute("aria-multiselectable","single"==this.selectionMode?"false":"true"),x.addClass(this.domNode,this.classTag),this.isLeftToRight()||x.addClass(this.domNode,this.classTag+"Rtl"),this.rowHeight>0&&x.addClass(this.viewsNode,this.classTag+"FixedRowHeight")},postMixInProperties:function(){this.inherited(arguments);var b=a.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=s.substitute(this.loadingMessage,b),this.errorMessage=s.substitute(this.errorMessage,b),this.srcNodeRef&&this.srcNodeRef.style.height&&(this.height=this.srcNodeRef.style.height),this._setAutoHeightAttr(this.autoHeight,!0),this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[],this._setHeaderMenuAttr(this.headerMenu),this._setStructureAttr(this.structure),this._click=[],this.inherited(arguments),this.domNode&&this.autoWidth&&this.initialWidth&&(this.domNode.style.width=this.initialWidth),this.domNode&&!this.editable&&x.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null,this.domNode.onSizeChange=null,delete this._click,this.scroller&&(this.scroller.destroy(),delete this.scroller),this.edit.destroy(),delete this.edit,this.views.destroyViews(),this.focus&&(this.focus.destroy(),delete this.focus),this.headerMenu&&this._placeholders.length&&(t.forEach(this._placeholders,function(a){a.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode)),this.inherited(arguments)},_setAutoHeightAttr:function(a,b){"string"==typeof a&&(a=!(!a||"false"==a)&&("true"==a||window.parseInt(a,10))),"number"==typeof a&&(isNaN(a)&&(a=!1),a<0?a=!0:0===a&&(a=!1)),this.autoHeight=a,this._autoHeight="boolean"==typeof a?a:"number"==typeof a&&a>=this.get("rowCount"),this._started&&!b&&this.render()},_getRowCountAttr:function(){return this.updating&&this.invalidated&&void 0!=this.invalidated.rowCount?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new i(this),this.focus=new j(this),this.edit=new k(this)},createSelection:function(){this.selection=new l(this)},createScroller:function(){this.scroller=new e,this.scroller.grid=this,this.scroller.renderRow=u.hitch(this,"renderRow"),this.scroller.removeRow=u.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this),this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.update()},onResizeColumn:function(a){},createViews:function(){this.views=new h(this),this.views.createView=u.hitch(this,"createView")},createView:function(a,b){var c=u.getObject(a),d=new c({grid:this,index:b});return this.viewsNode.appendChild(d.domNode),this.viewsHeaderNode.appendChild(d.headerNode),this.views.addView(d),x.attr(this.domNode,"align",this.isLeftToRight()?"left":"right"),d},buildViews:function(){for(var a,c=0;a=this.layout.structure[c];c++)this.createView(a.type||b._scopeName+".grid._View",c).setStructure(a);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(b){var c=b;if(c&&u.isString(c)&&(a.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),c=u.getObject(c)),this.structure=c,!c){if(!this.layout.structure)return;c=this.layout.structure}this.views.destroyViews(),this.focus.focusView=null,c!==this.layout.structure&&this.layout.setStructure(c),this._structureChanged()},setStructure:function(b){a.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0"),this._setStructureAttr(b)},getColumnTogglingItems:function(){var a,b=[];return a=t.map(this.layout.cells,function(a){a.menuItems||(a.menuItems=[]);var c=this,d=new q({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(a){if(c.layout.setColumnVisibility(this._gridCell.index,a)){var b=this._gridCell.menuItems;b.length>1&&t.forEach(b,function(b){b!==this&&b.setAttribute("checked",a)},this),a=t.filter(c.layout.cells,function(a){return a.menuItems.length>1?t.forEach(a.menuItems,"item.set('disabled', false);"):a.menuItems[0].set("disabled",!1),!a.hidden}),1==a.length&&t.forEach(a[0].menuItems,"item.set('disabled', true);")}},destroy:function(){var a=t.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(a,1),delete this._gridCell,q.prototype.destroy.apply(this,arguments)}});return a.menuItems.push(d),a.hidden||b.push(d),d},this),1==b.length&&b[0].set("disabled",!0),a},_setHeaderMenuAttr:function(a){this._placeholders&&this._placeholders.length&&(t.forEach(this._placeholders,function(a){a.unReplace(!0)}),this._placeholders=[]),this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode),this.headerMenu=a,a&&(this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders&&(this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)))},setHeaderMenu:function(b){a.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0"),this._setHeaderMenuAttr(b)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&t.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(!0),a.replace(this.getColumnTogglingItems())},this)},_fetch:function(a){this.setScrollTop(0)},getItem:function(a){return null},showMessage:function(a){a?(this.messagesNode.innerHTML=a,this.messagesNode.style.display=""):(this.messagesNode.innerHTML="",this.messagesNode.style.display="none")},_structureChanged:function(){this.buildViews(),this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a,this._pendingResultSize=b,this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||x._getPadBorderExtents(this.domNode),this._padBorder},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,b="none"==a.display?0:this.views.measureHeader();return a.height=b+"px",this.views.normalizeHeaderNodeHeight(),b},_resize:function(a,b){if(a=a||this._pendingChangeSize,b=b||this._pendingResultSize,delete this._pendingChangeSize,delete this._pendingResultSize,this.domNode){var c=this.domNode.parentNode;if(c&&1==c.nodeType&&this.hasLayout()&&"hidden"!=c.style.visibility&&"none"!=c.style.display){var d,e=this._getPadBorder(),f=void 0;this._autoHeight?this.domNode.style.height="auto":"number"==typeof this.autoHeight?(d=f=this._getHeaderHeight(),d+=this.scroller.averageRowHeight*this.autoHeight,this.domNode.style.height=d+"px"):this.domNode.clientHeight<=e.h&&(c==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent"),b&&(a=b),!this._autoHeight&&a?(x.marginBox(this.domNode,a),this.height=this.domNode.style.height,delete this.fitTo):"parent"==this.fitTo&&(d=this._parentContentBoxHeight=this._parentContentBoxHeight>0?this._parentContentBoxHeight:x._getContentBox(c).h,this.domNode.style.height=Math.max(0,d)+"px");var g=t.some(this.views.views,function(a){return a.flexCells});this._autoHeight||0!==(d||x._getContentBox(this.domNode).h)?(this.viewsHeaderNode.style.display="block",g||void 0!==f||(f=this._getHeaderHeight())):this.viewsHeaderNode.style.display="none",g&&(f=void 0),this.adaptWidth(),this.adaptHeight(f),this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,b=a?0:this.domNode.clientWidth||this.domNode.offsetWidth-this._getPadBorder().w,c=this.views.arrange(1,b);this.views.onEach("adaptWidth"),a&&(this.domNode.style.width=c+"px")},adaptHeight:function(a){var b=void 0===a?this._getHeaderHeight():a,c=this._autoHeight?-1:Math.max(this.domNode.clientHeight-b,0)||0;if(this.views.onEach("setSize",[0,c]),this.views.onEach("adaptHeight"),!this._autoHeight){var d=0,e=0,f=t.filter(this.views.views,function(a){var b=a.hasHScrollbar();return b?d++:e++,!b});d>0&&e>0&&t.forEach(f,function(a){a.adaptHeight(!0)})}!0===this.autoHeight||-1!=c||"number"==typeof this.autoHeight&&this.autoHeight>=this.get("rowCount")?this.scroller.windowHeight=c:this.scroller.windowHeight=Math.max(this.domNode.clientHeight-b,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){if(this.domNode&&this._started){if(!this.hasLayout())return void this.scroller.init(0,this.keepRows,this.rowsPerPage);this.update=this.defaultUpdate,this._render()}},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this.setScrollTop(0),this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows,this.scroller.setKeepInfo(this.keepRows),this.views.render(),this._resize()},postrender:function(){this.postresize(),this.focus.initFocusView(),x.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var a=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=a}},renderRow:function(a,b){this.views.renderRow(a,b,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[],this.updating=!0},endUpdate:function(){this.updating=!1;var a,b=this.invalidated;if(b.all)this.update();else if(void 0!=b.rowCount)this.updateRowCount(b.rowCount);else for(a in b)this.updateRow(Number(a));this.invalidated=[]},defaultUpdate:function(){if(this.domNode){if(this.updating)return void(this.invalidated.all=!0);this.lastScrollTop=this.scrollTop,this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender()}},update:function(){this.render()},updateRow:function(a){a=Number(a),this.updating?this.invalidated[a]=!0:(this.views.updateRow(a),this.scroller.rowHeightChanged(a))},updateRows:function(a,b){a=Number(a),b=Number(b);var c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=!0;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){this.updating?this.invalidated.rowCount=a:(this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this.layout.cells.length&&this.scroller.updateRowCount(a),this._resize(),this.layout.cells.length&&this.setScrollTop(this.scrollTop))},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof m))return this.focus.focusView.rowNodes[a];for(var b,c=0;b=this.views.views[c];c++)if(!(b instanceof m))return b.rowNodes[a];return null},rowHeightChanged:function(a){this.views.renormalizeRow(a),this.scroller.rowHeightChanged(a)},fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:v("ie")?100:50,scrollTo:function(a){if(!this.fastScroll)return void this.setScrollTop(a);var b=Math.abs(this.lastScrollTop-a);if(this.lastScrollTop=a,b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0,this.scrollTop=a,this.views.setScrollTop(a),this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll,c.finishScrollJob()},200)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=!1,this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},_mouseOut:function(a){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){return a=void 0==a?this.sortInfo:a,Boolean(a>0)},getSortIndex:function(a){return a=void 0==a?this.sortInfo:a,Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;void 0!=b?c*=b?1:-1:this.getSortIndex()==a&&(c=-this.sortInfo),this.setSortInfo(c)},setSortInfo:function(a){this.canSort(a)&&(this.sortInfo=a,this.sort(),this.update())},doKeyEvent:function(a){a.dispatch="do"+a.type,this.onKeyEvent(a)},_dispatch:function(a,b){return a in this&&this[a](b)},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){a.cellNode?this.onCellClick(a):this.onRowClick(a)},dodblclick:function(a){a.cellNode?this.onCellDblClick(a):this.onRowDblClick(a)},docontextmenu:function(a){a.cellNode?this.onCellContextMenu(a):this.onRowContextMenu(a)},doheaderclick:function(a){a.cellNode?this.onHeaderCellClick(a):this.onHeaderClick(a)},doheaderdblclick:function(a){a.cellNode?this.onHeaderCellDblClick(a):this.onHeaderDblClick(a)},doheadercontextmenu:function(a){a.cellNode?this.onHeaderCellContextMenu(a):this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length)),this.selection.clear()}});return z.markupFactory=function(a,c,d,e){var f=function(a){var b=x.attr(a,"width")||"auto";return"auto"!=b&&"em"!=b.slice(-2)&&"%"!=b.slice(-1)&&(b=parseInt(b,10)+"px"),b};return a.structure||"table"!=c.nodeName.toLowerCase()||(a.structure=y("> colgroup",c).map(function(a){var b=x.attr(a,"span"),c={noscroll:"true"==x.attr(a,"noscroll"),__span:b?parseInt(b,10):1,cells:[]};return x.hasAttr(a,"width")&&(c.width=f(a)),c}),a.structure.length||a.structure.push({__span:1/0,cells:[]}),y("thead > tr",c).forEach(function(c,d){var g,h=0,i=0,j=null;y("> th",c).map(function(c){if(j){if(h>=g+j.__span){i++,g+=j.__span;j=a.structure[i]}}else g=0,j=a.structure[0];var k={name:u.trim(x.attr(c,"name")||c.innerHTML),colSpan:parseInt(x.attr(c,"colspan")||1,10),type:u.trim(x.attr(c,"cellType")||""),id:u.trim(x.attr(c,"id")||"")};h+=k.colSpan;var l=x.attr(c,"rowspan");l&&(k.rowSpan=l),x.hasAttr(c,"width")&&(k.width=f(c)),x.hasAttr(c,"relWidth")&&(k.relWidth=window.parseInt(x.attr(c,"relWidth"),10)),x.hasAttr(c,"hidden")&&(k.hidden="true"==x.attr(c,"hidden")||!0===x.attr(c,"hidden")),e&&e(c,k),k.type=k.type?u.getObject(k.type):b.grid.cells.Cell,k.type&&k.type.markupFactory&&k.type.markupFactory(c,k),j.cells[d]||(j.cells[d]=[]),j.cells[d].push(k)})})),new d(a,c)},z})},"dojox/grid/_Events":function(){define(["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(a,b,c,d,e){return c("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(a){var b=a;b.customClasses+=(b.odd?" dojoxGridRowOdd":"")+(b.selected?" dojoxGridRowSelected":"")+(b.over?" dojoxGridRowOver":""),this.focus.styleRow(a),this.edit.styleRow(a)},onKeyDown:function(b){if(!b.altKey&&!b.metaKey){var c;switch(b.keyCode){case a.ESCAPE:this.edit.cancel();break;case a.ENTER:if(!this.edit.isEditing()){if((c=this.focus.getHeaderIndex())>=0){this.setSortIndex(c);break}this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(b),b.shiftKey),d.stop(b)}if(!b.shiftKey){var e=this.edit.isEditing();this.edit.apply(),e||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}if(!this.edit.isEditing()){(this.focus.focusView||this.views.views[0]).content.decorateEvent(b),this.onRowClick(b),d.stop(b)}break;case a.SPACE:if(!this.edit.isEditing()){if((c=this.focus.getHeaderIndex())>=0){this.setSortIndex(c);break}this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(b),b.shiftKey),d.stop(b)}break;case a.TAB:this.focus[b.shiftKey?"previousKey":"nextKey"](b);break;case a.LEFT_ARROW:case a.RIGHT_ARROW:if(!this.edit.isEditing()){var f=b.keyCode;if(d.stop(b),(c=this.focus.getHeaderIndex())>=0&&b.shiftKey&&b.ctrlKey)this.focus.colSizeAdjust(b,c,5*(f==a.LEFT_ARROW?-1:1));else{var g=f==a.LEFT_ARROW?1:-1;this.isLeftToRight()&&(g*=-1),this.focus.move(0,g)}}break;case a.UP_ARROW:this.edit.isEditing()||0===this.focus.rowIndex||(d.stop(b),this.focus.move(-1,0));break;case a.DOWN_ARROW:this.edit.isEditing()||this.focus.rowIndex+1==this.rowCount||(d.stop(b),this.focus.move(1,0));break;case a.PAGE_UP:this.edit.isEditing()||0===this.focus.rowIndex||(d.stop(b),this.focus.rowIndex!=this.scroller.firstVisibleRow+1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case a.PAGE_DOWN:this.edit.isEditing()||this.focus.rowIndex+1==this.rowCount||(d.stop(b),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)))}}},onMouseOver:function(a){-1==a.rowIndex?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){-1==a.rowIndex?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){-1==a.rowIndex?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){this.rows.isOver(a.rowIndex)||(this.rows.setOverRow(a.rowIndex),-1==a.rowIndex?this.onHeaderMouseOver(a):this.onRowMouseOver(a))},onMouseOutRow:function(a){this.rows.isOver(-1)?this.onHeaderMouseOut(a):this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(a))},onMouseDownRow:function(a){-1!=a.rowIndex&&this.onRowMouseDown(a)},onCellMouseOver:function(a){a.cellNode&&b.add(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){a.cellNode&&b.remove(a.cellNode,this.cellOverClass)},onCellMouseDown:function(a){},onCellClick:function(a){this._click[0]=this._click[1],this._click[1]=a,this.edit.isEditCell(a.rowIndex,a.cellIndex)||this.focus.setFocusCell(a.cell,a.rowIndex),this._click.length>1&&null==this._click[0]&&this._click.shift(),this.onRowClick(a)},onCellDblClick:function(a){var b;b=this._click.length>1&&e("ie")?this._click[1]:this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex?this._click[0]:a,this.focus.setFocusCell(b.cell,b.rowIndex),this.edit.setEditCell(b.cell,b.rowIndex),this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(a,b){this.edit.cellFocus(a,b)},onRowClick:function(a){this.edit.rowClick(a),this.selection.clickSelectEvent(a)},onRowDblClick:function(a){},onRowMouseOver:function(a){},onRowMouseOut:function(a){},onRowMouseDown:function(a){},onRowContextMenu:function(a){d.stop(a)},onHeaderMouseOver:function(a){},onHeaderMouseOut:function(a){},onHeaderCellMouseOver:function(a){a.cellNode&&b.add(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){a.cellNode&&b.remove(a.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(a){},onHeaderClick:function(a){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index),this.onHeaderClick(a)},onHeaderDblClick:function(a){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){this.headerMenu||d.stop(a)},onStartEdit:function(a,b){},onApplyCellEdit:function(a,b,c){},onCancelEdit:function(a){},onApplyEdit:function(a){},onCanSelect:function(a){return!0},onCanDeselect:function(a){return!0},onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}})})},"dojox/grid/_Scroller":function(){define(["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(a,b,c,d,e){var f=function(a){for(var b,c=0,d=a.parentNode;b=d.childNodes[c++];)if(b==a)return c-1;return-1},g=function(b){b&&dojo.forEach(a.toArray(),function(a){a.domNode&&e.isDescendant(a.domNode,b,!0)&&a.destroy()})},h=function(a){var b=e.byId(a);return b&&b.tagName?b.tagName.toLowerCase():""},i=function(a,b){for(var c,d=[],e=0;c=a.childNodes[e];)e++,h(c)==b&&d.push(c);return d},j=function(a){return i(a,"div")};return b("dojox.grid._Scroller",null,{constructor:function(a){this.setContentNodes(a),this.pageHeights=[],this.pageNodes=[],this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(a,b,d){switch(arguments.length){case 3:this.rowsPerPage=d;case 2:this.keepRows=b;case 1:this.rowCount=a}this.defaultPageHeight=(this.grid.rowHeight>0?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage,this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage),this.setKeepInfo(this.keepRows),this.invalidate(),this.scrollboxNode&&(this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=c.hitch(this,"onscroll"))},_getPageCount:function(a,b){return a?Math.ceil(a/b)||1:0},destroy:function(){this.invalidateNodes(),delete this.contentNodes,delete this.contentNode,delete this.scrollboxNode},setKeepInfo:function(a){this.keepRows=a,this.keepPages=this.keepRows?Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2):this.keepPages},setContentNodes:function(a){this.contentNodes=a,this.colCount=this.contentNodes?this.contentNodes.length:0,this.pageNodes=[];for(var b=0;b<this.colCount;b++)this.pageNodes[b]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0,this.invalidateNodes(),this.pageHeights=[],this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0,this.resize(),this._invalidating=!1},updateRowCount:function(a){this.invalidateNodes(),this.rowCount=a;var b=this.pageCount;if(0===b&&(this.height=1),this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage),this.pageCount<b)for(var c=b-1;c>=this.pageCount;c--)this.height-=this.getPageHeight(c),delete this.pageHeights[c];else this.pageCount>b&&(this.height+=this.defaultPageHeight*(this.pageCount-b-1)+this.calcLastPageHeight());this.resize()},pageExists:function(a){return Boolean(this.getDefaultPageNode(a))},measurePage:function(a){if(this.grid.rowHeight)return((a+1)*this.rowsPerPage>this.rowCount?this.rowCount-a*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight;var b=this.getDefaultPageNode(a);return b&&b.innerHTML?b.offsetHeight:void 0},positionPage:function(a,b){for(var c=0;c<this.colCount;c++)this.pageNodes[c][a].style.top=b+"px"},repositionPages:function(a){for(var b=this.getDefaultNodes(),c=0,d=0;d<this.stack.length;d++)c=Math.max(this.stack[d],c);for(var e=b[a],f=e?this.getPageNodePosition(e)+this.getPageHeight(a):0,g=a+1;g<=c;g++){if(e=b[g]){if(this.getPageNodePosition(e)==f)return;this.positionPage(g,f)}f+=this.getPageHeight(g)}},installPage:function(a){for(var b=0;b<this.colCount;b++)this.contentNodes[b].appendChild(this.pageNodes[b][a])},preparePage:function(a,b){for(var c=b?this.popPage():null,d=0;d<this.colCount;d++){var e=this.pageNodes[d],f=null===c?this.createPageNode():this.invalidatePageNode(c,e);f.pageIndex=a,e[a]=f}},renderPage:function(a){var b,c,d=[];for(b=0;b<this.colCount;b++)d[b]=this.pageNodes[b][a]
;for(b=0,c=a*this.rowsPerPage;b<this.rowsPerPage&&c<this.rowCount;b++,c++)this.renderRow(c,d)},removePage:function(a){for(var b=0,c=a*this.rowsPerPage;b<this.rowsPerPage;b++,c++)this.removeRow(c)},destroyPage:function(a){for(var b=0;b<this.colCount;b++){var c=this.invalidatePageNode(a,this.pageNodes[b]);c&&e.destroy(c)}},pacify:function(a){},pacifying:!1,pacifyTicks:200,setPacifying:function(a){this.pacifying!=a&&(this.pacifying=a,this.pacify(this.pacifying))},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var a=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;return this.setPacifying(!0),this.startPacify(),a},endPacify:function(){this.setPacifying(!1)},resize:function(){this.scrollboxNode&&(this.windowHeight=this.scrollboxNode.clientHeight);for(var a=0;a<this.colCount;a++)d.setStyleHeightPx(this.contentNodes[a],Math.max(1,this.height));var b=!this._invalidating;if(!b){var c=this.grid.get("autoHeight");"number"==typeof c&&c<=Math.min(this.rowsPerPage,this.rowCount)&&(b=!0)}b&&this.needPage(this.page,this.pageTop);var e=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage,f=this.getPageHeight(this.page);this.averageRowHeight=f>0&&e>0?f/e:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var a=this.pageCount-1,b=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[a]=b,b},updateContentHeight:function(a){this.height+=a,this.resize()},updatePageHeight:function(a,b,c){if(this.pageExists(a)){var d=this.getPageHeight(a),e=this.measurePage(a);if(void 0===e&&(e=d),this.pageHeights[a]=e,d!=e){this.updateContentHeight(e-d);var f=this.grid.get("autoHeight");if("number"==typeof f&&f>this.rowCount||!0===f&&!b)if(c){var g=this.grid.viewsNode.style;g.height=parseInt(g.height)+e-d+"px",this.repositionPages(a)}else this.grid.sizeChange();else this.repositionPages(a)}return e}return 0},rowHeightChanged:function(a,b){this.updatePageHeight(Math.floor(a/this.rowsPerPage),!1,b)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var a=document.createElement("div");return e.attr(a,"role","presentation"),a.style.position="absolute",a.style[this.grid.isLeftToRight()?"left":"right"]="0",a},getPageHeight:function(a){var b=this.pageHeights[a];return void 0!==b?b:this.defaultPageHeight},pushPage:function(a){return this.stack.push(a)},popPage:function(){return this.stack.shift()},findPage:function(a){for(var b=0,c=0,d=0;b<this.pageCount&&(d=this.getPageHeight(b),!(c+d>=a));b++,c+=d);this.page=b,this.pageTop=c},buildPage:function(a,b,c){this.preparePage(a,b),this.positionPage(a,c),this.installPage(a),this.renderPage(a),this.pushPage(a)},needPage:function(a,b){var c=this.getPageHeight(a);return this.pageExists(a)?this.positionPage(a,b):(this.buildPage(a,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,b),c=this.updatePageHeight(a,!0)),c},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(a){if(this.grid.scrollTop=a,this.colCount){this.startPacify(),this.findPage(a);for(var b=this.height,c=this.getScrollBottom(a),d=this.page,e=this.pageTop;d<this.pageCount&&(c<0||e<c);d++)e+=this.needPage(d,e);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,a),this.lastVisibleRow=this.getLastVisibleRow(d-1,e,c),b!=this.height&&this.repositionPages(d-1),this.endPacify()}},getScrollBottom:function(a){return this.windowHeight>=0?a+this.windowHeight:-1},processNodeEvent:function(a,b){for(var c=a.target;c&&c!=b&&c.parentNode&&c.parentNode.parentNode!=b;)c=c.parentNode;if(!c||!c.parentNode||c.parentNode.parentNode!=b)return!1;var d=c.parentNode;return a.topRowIndex=d.pageIndex*this.rowsPerPage,a.rowIndex=a.topRowIndex+f(c),a.rowTarget=c,!0},processEvent:function(a){return this.processNodeEvent(a,this.contentNode)},renderRow:function(a,b){},removeRow:function(a){},getDefaultPageNode:function(a){return this.getDefaultNodes()[a]},positionPageNode:function(a,b){},getPageNodePosition:function(a){return a.offsetTop},invalidatePageNode:function(a,b){var c=b[a];return c&&(delete b[a],this.removePage(a,c),g(c),c.innerHTML=""),c},getPageRow:function(a){return a*this.rowsPerPage},getLastPageRow:function(a){return Math.min(this.rowCount,this.getPageRow(a+1))-1},getFirstVisibleRow:function(a,b,c){if(!this.pageExists(a))return 0;for(var d=this.getPageRow(a),e=this.getDefaultNodes(),f=j(e[a]),g=0,h=f.length;g<h&&b<c;g++,d++)b+=f[g].offsetHeight;return d?d-1:d},getLastVisibleRow:function(a,b,c){if(!this.pageExists(a))return 0;for(var d=this.getDefaultNodes(),e=this.getLastPageRow(a),f=j(d[a]),g=f.length-1;g>=0&&b>c;g--,e--)b-=f[g].offsetHeight;return e+1},findTopRow:function(a){for(var b,c=this.getDefaultNodes(),d=j(c[this.page]),e=0,f=d.length,g=this.pageTop;e<f;e++)if(b=d[e].offsetHeight,(g+=b)>=a)return this.offset=b-(g-a),e+this.page*this.rowsPerPage;return-1},findScrollTop:function(a){var b,c,d=Math.floor(a/this.rowsPerPage),e=0;for(b=0;b<d;b++)e+=this.getPageHeight(b);this.pageTop=e,this.page=d,this.needPage(d,this.pageTop);var f=this.getDefaultNodes(),g=j(f[d]),h=a-this.rowsPerPage*d;for(b=0,c=g.length;b<c&&b<h;b++)e+=g[b].offsetHeight;return e},dummy:0})})},"dojox/grid/util":function(){define(["../main","dojo/_base/lang","dojo/dom"],function(a,b,c){var d=b.getObject("grid.util",!0,a);return d.na="...",d.rowIndexTag="gridRowIndex",d.gridViewTag="gridView",d.fire=function(a,b,c){var d=a&&b&&a[b];return d&&(c?d.apply(a,c):a[b]())},d.setStyleHeightPx=function(a,b){if(b>=0){var c=a.style,d=b+"px";a&&c.height!=d&&(c.height=d)}},d.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"],d.keyEvents=["keyup","keydown","keypress"],d.funnelEvents=function(a,b,c,e){for(var f=e||d.mouseEvents.concat(d.keyEvents),g=0,h=f.length;g<h;g++)b.connect(a,"on"+f[g],c)},d.removeNode=function(a){return a=c.byId(a),a&&a.parentNode&&a.parentNode.removeChild(a),a},d.arrayCompare=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]!=b[c])return!1;return a.length==b.length},d.arrayInsert=function(a,b,c){a.length<=b?a[b]=c:a.splice(b,0,c)},d.arrayRemove=function(a,b){a.splice(b,1)},d.arraySwap=function(a,b,c){var d=a[b];a[b]=a[c],a[c]=d},d})},"dojox/grid/_Layout":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-geometry","./cells","./_RowSelector"],function(a,b,c,d,e,f){return c("dojox.grid._Layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(a,b,c,e,f){for(var g,h=this.structure[a].cells[0],i=this.structure[b].cells[0],j=null,k=0,l=0,m=0;g=h[m];m++)if(g.index==c){k=m;break}for(j=h.splice(k,1)[0],j.view=this.grid.views.views[b],m=0,g=null;g=i[m];m++)if(g.index==e){l=m;break}f||(l+=1),i.splice(l,0,j);var n=this.grid.getCell(this.grid.getSortIndex());n&&(n._currentlySorted=this.grid.getSortAsc()),this.cells=[],c=0;var o;for(m=0;o=this.structure[m];m++)for(var p,q=0;p=o.cells[q];q++)for(var r=0;g=p[r];r++){if(g.index=c,this.cells.push(g),"_currentlySorted"in g){var s=c+1;s*=g._currentlySorted?1:-1,this.grid.sortInfo=s,delete g._currentlySorted}c++}d.forEach(this.cells,function(a){var b=a.markup[2].split(" ");parseInt(b[1].substring(5))!=a.index&&(b[1]='idx="'+a.index+'"',a.markup[2]=b.join(" "))}),this.grid.setupHeaderMenu()},setColumnVisibility:function(a,b){var c=this.cells[a];if(c.hidden==b){c.hidden=!b;var d=c.view,e=d.viewWidth;return e&&"auto"!=e&&(d._togglingColumn=f.getMarginBox(c.getHeaderNode()).w||0),d.update(),!0}return!1},addCellDef:function(a,c,d){var f=this,g=function(a){var b=0;return a.colSpan>1?b=0:(b=a.width||f._defaultCellProps.width||f.defaultWidth,isNaN(b)||(b+="em")),b},h={grid:this.grid,subrow:a,layoutIndex:c,index:this.cells.length};if(d&&d instanceof b.grid.cells._Base){var i=e.clone(d);return h.unitWidth=g(i._props),i=e.mixin(i,this._defaultCellProps,d._props,h)}var j=d.type||d.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||b.grid.cells.Cell;return e.isString(j)&&(j=e.getObject(j)),h.unitWidth=g(d),new j(e.mixin({},this._defaultCellProps,d,h))},addRowDef:function(a,b){for(var c,e,f=[],g=0,h=0,i=!0,j=0;c=b[j];j++)if(e=this.addCellDef(a,j,c),f.push(e),this.cells.push(e),i&&e.relWidth)g+=e.relWidth;else if(e.width){var k=e.width;"string"==typeof k&&"%"==k.slice(-1)?h+=window.parseInt(k,10):"auto"==k&&(i=!1)}return g&&i&&d.forEach(f,function(a){a.relWidth&&(a.width=a.unitWidth=a.relWidth/g*(100-h)+"%")}),f},addRowsDef:function(a){var b=[];if(e.isArray(a))if(e.isArray(a[0]))for(var c,d=0;a&&(c=a[d]);d++)b.push(this.addRowDef(d,c));else b.push(this.addRowDef(0,a));return b},addViewDef:function(a){return this._defaultCellProps=a.defaultCell||{},a.width&&"auto"==a.width&&delete a.width,e.mixin({},a,{cells:this.addRowsDef(a.rows||a.cells)})},setStructure:function(a){this.fieldIndex=0,this.cells=[];var c=this.structure=[];if(this.grid.rowSelector){var d={type:b._scopeName+".grid._RowSelector"};if(e.isString(this.grid.rowSelector)){var f=this.grid.rowSelector;"false"==f?d=null:"true"!=f&&(d.width=f)}else this.grid.rowSelector||(d=null);d&&c.push(this.addViewDef(d))}var g=function(a){return"name"in a||"field"in a||"get"in a},h=function(a){return!(!e.isArray(a)||!e.isArray(a[0])&&!g(a[0]))},i=function(a){return null!==a&&e.isObject(a)&&("cells"in a||"rows"in a||"type"in a&&!g(a))};if(e.isArray(a)){for(var j,k=!1,l=0;j=a[l];l++)if(i(j)){k=!0;break}if(k)for(l=0;j=a[l];l++)h(j)?c.push(this.addViewDef({cells:j})):i(j)&&c.push(this.addViewDef(j));else c.push(this.addViewDef({cells:a}))}else i(a)&&c.push(this.addViewDef(a));this.cellCount=this.cells.length,this.grid.setupHeaderMenu()}})})},"dojox/grid/cells":function(){define(["../main","./cells/_base"],function(a){return a.grid.cells})},"dojox/grid/cells/_base":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/_base/connect","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dijit/_Widget","../util"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b("dojox.grid._DeferredTextWidget",k,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(c.hitch(this,function(a){this.domNode&&(this.domNode.innerHTML=a)}))}}),n=function(a){try{l.fire(a,"focus"),l.fire(a,"select")}catch(a){}},o=function(){setTimeout(c.hitch.apply(a,arguments),0)},p=b("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{},c.mixin(this,a),void 0===this.draggable&&(this.draggable=!0)},_defaultFormat:function(a,b){var c=this.grid.formatterScope||this,d=this.formatter;d&&c&&"string"==typeof d&&(d=this.formatter=c[d]);var e=a!=this.defaultValue&&d?d.apply(c,b):a;return void 0===e?this.defaultValue:(e&&e.addBoth&&(e=new m({deferred:e},j.create("span",{innerHTML:this.defaultValue}))),e&&e.declaredClass&&e.startup?"<div class='dojoxGridStubNode' linkWidget='"+e.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>":e)},format:function(a,b){var c=this.grid.edit.info,d=this.get?this.get(a,b):this.value||this.defaultValue;return d=d&&d.replace&&this.grid.escapeHTMLInData?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d,this.editable&&(this.alwaysEditing||c.rowIndex==a&&c.cell==this)?this.formatEditing(c.value?c.value:d,a):this._defaultFormat(d,[d,a,this])},formatEditing:function(a,b){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&"auto"!==a},isFlex:function(){var a=this.unitWidth;return a&&c.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,b){this.getNode(b)&&this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&e.connect(a,"onblur",function(a){setTimeout(c.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(a,b){this._formatPending=!0,o(this,"_formatNode",a,b)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,b){this._formatPending&&(this._formatPending=!1,g("ie")||h.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(b),a,b))},formatNode:function(a,b,c){g("ie")?o(this,"focus",c,a):this.focus(c,a)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,b){var c=this.getEditNode(a);c&&(c[this._valueProp]=b)},focus:function(a,b){n(b||this.getEditNode(a))},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(a){h.setSelectable(this.grid.domNode,!1),this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a),this._finish(a)},cancel:function(a){this.cancelEdit(a),this._finish(a)}});p.markupFactory=function(a,b){var d=c.trim(i.get(a,"formatter")||"");d&&(b.formatter=c.getObject(d)||d);var e=c.trim(i.get(a,"get")||"");e&&(b.get=c.getObject(e));var f=function(b,d,e){var f=c.trim(i.get(a,b)||"");f&&(d[e||b]=!("false"==f.toLowerCase()))};f("sortDesc",b),f("editable",b),f("alwaysEditing",b),f("noresize",b),f("draggable",b);var g=c.trim(i.get(a,"loadingText")||i.get(a,"defaultValue")||"");g&&(b.defaultValue=g);var h=function(b,d,e){var f=c.trim(i.get(a,b)||"")||void 0;f&&(d[e||b]=f)};h("styles",b),h("headerStyles",b),h("cellStyles",b),h("classes",b),h("headerClasses",b),h("cellClasses",b)};var q=p.Cell=b("dojox.grid.cells.Cell",p,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,b){return this.needFormatNode(a,b),'<input class="dojoxGridInput" type="text" value="'+a+'">'},formatNode:function(a,b,c){this.inherited(arguments),this.registerOnBlur(a,c)},doKey:function(a){if(this.keyFilter){-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&d.stop(a)}},_finish:function(a){this.inherited(arguments);var b=this.getEditNode(a);try{l.fire(b,"blur")}catch(a){}}});q.markupFactory=function(a,b){p.markupFactory(a,b);var d=c.trim(i.get(a,"keyFilter")||"");d&&(b.keyFilter=new RegExp(d))},(p.RowIndex=b("dojox.grid.cells.RowIndex",q,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}})).markupFactory=function(a,b){q.markupFactory(a,b)},(p.Select=b("dojox.grid.cells.Select",q,{options:null,values:null,returnIndex:-1,constructor:function(a){this.values=this.values||this.options},formatEditing:function(a,b){this.needFormatNode(a,b);for(var c,d,e=['<select class="dojoxGridSelect">'],f=0;void 0!==(c=this.options[f])&&void 0!==(d=this.values[f]);f++)d=d.replace?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d,c=c.replace?c.replace(/&/g,"&amp;").replace(/</g,"&lt;"):c,e.push("<option",a==d?" selected":"",' value="'+d+'"',">",c,"</option>");return e.push("</select>"),e.join("")},_defaultFormat:function(a,b){var c=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var d=f.indexOf(this.values,c);d>=0&&(c=this.options[d])}return c},getValue:function(a){var b=this.getEditNode(a);if(b){var c=b.selectedIndex,d=b.options[c];return this.returnIndex>-1?c:d.value||d.innerHTML}}})).markupFactory=function(a,b){q.markupFactory(a,b);var d=c.trim(i.get(a,"options")||"");if(d){var e=d.split(",");e[0]!=d&&(b.options=e)}var f=c.trim(i.get(a,"values")||"");if(f){var g=f.split(",");g[0]!=f&&(b.values=g)}};var r=p.AlwaysEdit=b("dojox.grid.cells.AlwaysEdit",q,{alwaysEditing:!0,_formatNode:function(a,b){this.formatNode(this.getEditNode(b),a,b)},applyStaticValue:function(a){var b=this.grid.edit;b.applyCellEdit(this.getValue(a),this,a),b.start(this,a,!0)}});return r.markupFactory=function(a,b){q.markupFactory(a,b)},(p.Bool=b("dojox.grid.cells.Bool",r,{_valueProp:"checked",formatEditing:function(a,b){return'<input class="dojoxGridInput" type="checkbox"'+(a?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}})).markupFactory=function(a,b){r.markupFactory(a,b)},p})},"dojox/grid/_RowSelector":function(){define(["dojo/_base/declare","./_View"],function(a,b){return a("dojox.grid._RowSelector",b,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments),this.scrollboxNode.style.overflow="hidden",this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,b){var c=this.contentWidth||0;b.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+c+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){!("contentWidth"in this)&&this.contentNode&&this.contentNode.offsetWidth>0&&(this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth)},doStyleRowNode:function(a,b){var c=["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(a)&&c.push("dojoxGridRowbarOver"),this.grid.selection.isSelected(a)&&c.push("dojoxGridRowbarSelected"),b.className=c.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){this.isIntraRowEvent(a)||this.grid.onMouseOutRow(a)}})})},"dojox/grid/_View":function(){define(["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=function(a,b){return void 0==a.style.cssText?a.getAttribute("style"):a.style.cssText},v=d("dojox.grid._View",[m,n],{defaultWidth:"18em",viewWidth:"",templateString:k,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:r._HeaderBuilder,_contentBuilderClass:r._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll"),p.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]),p.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]),this.content=new this._contentBuilderClass(this),this.header=new this._headerBuilderClass(this),this.grid.isLeftToRight()||(this.headerNodeContainer.style.width="")},destroy:function(){q.destroy(this.headerNode),delete this.headerNode;for(var a in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[a]),q.destroy(this.rowNodes[a]);this.rowNodes={},this.source&&this.source.destroy(),this.inherited(arguments)},focus:function(){h("ie")||h("webkit")||h("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){var b=this.structure=a;b.width&&!isNaN(b.width)?this.viewWidth=b.width+"em":this.viewWidth=b.width||(b.noscroll?"auto":this.viewWidth),this._onBeforeRow=b.onBeforeRow||function(){},this._onAfterRow=b.onAfterRow||function(){},this.noscroll=b.noscroll,this.noscroll&&(this.scrollboxNode.style.overflow="hidden"),this.simpleStructure=Boolean(1==b.cells.length),this.testFlexCells(),this.updateStructure()},_cleanupRowWidgets:function(a){a&&e.forEach(i("[widgetId]",a).map(b.byNode),function(a){a._destroyOnRemove?(a.destroy(),delete a):a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.removeChild(a.domNode)})},onBeforeRow:function(a,b){this._onBeforeRow(a,b),a>=0&&this._cleanupRowWidgets(this.getRowNode(a))},onAfterRow:function(c,d,f){this._onAfterRow(c,d,f);var g=this.grid;e.forEach(i(".dojoxGridStubNode",f),function(c){if(c&&c.parentNode){var d=c.getAttribute("linkWidget"),e=window.parseInt(q.attr(c,"cellIdx"),10),f=(g.getCell(e),b.byId(d));f?(c.parentNode.replaceChild(f.domNode,c),f._started||f.startup(),a.destroy(c)):c.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var a,b=0;a=this.structure.cells[b];b++)for(var c,d=0;c=a[d];d++)c.view=this,this.flexCells=this.flexCells||c.isFlex();return this.flexCells},updateStructure:function(){this.header.update(),this.content.update()},getScrollbarWidth:function(){var a=this.hasVScrollbar(),b=q.style(this.scrollboxNode,"overflow");return this.noscroll||!b||"hidden"==b?a=!1:"scroll"==b&&(a=!0),a?o.getScrollbar().w:0},getColumnsWidth:function(){var a=this.headerContentNode;return a&&a.firstChild?a.firstChild.offsetWidth||q.style(a.firstChild,"width"):0},setColumnsWidth:function(a){this.headerContentNode.firstChild.style.width=a+"px",this.viewWidth&&(this.viewWidth=a+"px")},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,q._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="",this.renderHeader(),this._togglingColumn>=0&&(this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1);var a=this.grid.layout.cells,b=f.hitch(this,function(b,c){!this.grid.isLeftToRight()&&(c=!c);for(var d=c?-1:1,e=this.header.getCellNodeIndex(b)+d,f=a[e];f&&f.getHeaderNode()&&"none"==f.getHeaderNode().style.display;)e+=d,f=a[e];return f?f.getHeaderNode():null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();var c="dojoxGrid_bottomMarker",d="dojoxGrid_topMarker";this.bottomMarker&&q.destroy(this.bottomMarker),this.bottomMarker=q.byId(c),this.topMarker&&q.destroy(this.topMarker),this.topMarker=q.byId(d),this.bottomMarker||(this.bottomMarker=q.create("div",{id:c,class:"dojoxGridColPlaceBottom"},j.body()),this._hide(this.bottomMarker),this.topMarker=q.create("div",{id:d,class:"dojoxGridColPlaceTop"},j.body()),this._hide(this.topMarker)),this.arrowDim=q.contentBox(this.bottomMarker);var e=q.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new l(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:f.hitch(this,function(a){this.header.decorateEvent(a),(this.header.overRightResizeArea(a)||this.header.overLeftResizeArea(a))&&this.header.canResize(a)&&!this.header.moveable?this.header.beginColumnResize(a):(this.grid.headerMenu&&this.grid.headerMenu.onCancel(!0),a.button===(h("ie")<9?1:0)&&l.prototype.onMouseDown.call(this.source,a))}),onMouseOver:f.hitch(this,function(a){var b=this.source;b._getChildByEvent(a)&&l.prototype.onMouseOver.apply(b,arguments)}),_markTargetAnchor:f.hitch(this,function(a){var c=this.source;if(c.current!=c.targetAnchor||c.before!=a){c.targetAnchor&&b(c.targetAnchor,c.before)&&c._removeItemClass(b(c.targetAnchor,c.before),c.before?"After":"Before"),l.prototype._markTargetAnchor.call(c,a);var d=a?c.targetAnchor:b(c.targetAnchor,c.before),f=0;d||(d=c.targetAnchor,f=q.contentBox(d).w+this.arrowDim.w/2+2);var g=q.position(d,!0),h=Math.floor(g.x-this.arrowDim.w/2+f);q.style(this.bottomMarker,"visibility","visible"),q.style(this.topMarker,"visibility","visible"),q.style(this.bottomMarker,{left:h+"px",top:e+g.y+"px"}),q.style(this.topMarker,{left:h+"px",top:g.y-this.arrowDim.h+"px"}),c.targetAnchor&&b(c.targetAnchor,c.before)&&c._addItemClass(b(c.targetAnchor,c.before),c.before?"After":"Before")}}),_unmarkTargetAnchor:f.hitch(this,function(){var a=this.source;a.targetAnchor&&(a.targetAnchor&&b(a.targetAnchor,a.before)&&a._removeItemClass(b(a.targetAnchor,a.before),a.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),l.prototype._unmarkTargetAnchor.call(a))}),destroy:f.hitch(this,function(){g.disconnect(this._source_conn),g.unsubscribe(this._source_sub),l.prototype.destroy.call(this.source),this.bottomMarker&&(q.destroy(this.bottomMarker),delete this.bottomMarker),this.topMarker&&(q.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:f.hitch(this,function(){l.prototype.onDndCancel.call(this.source),this._hide(this.bottomMarker),this._hide(this.topMarker)})}),this._source_conn=g.connect(this.source,"onDndDrop",this,"_onDndDrop"),this._source_sub=g.subscribe("/dnd/drop/before",this,"_onDndDropBefore"),this.source.startup()}},_hide:function(a){q.style(a,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(a,b,c){if(t.manager().target===this.source){this.source._targetNode=this.source.targetAnchor,this.source._beforeTarget=this.source.before;var d=this.grid.views.views,e=d[a.viewIndex],f=d[this.index];f!=e&&(e.convertColPctToFixed(),f.convertColPctToFixed())}},_onDndDrop:function(a,b,c){if(t.manager().target!==this.source)return void(t.manager().source===this.source&&(this._removingColumn=!0));this._hide(this.bottomMarker),this._hide(this.topMarker);var d=function(a){return a?q.attr(a,"idx"):null},e=q.marginBox(b[0]).w;if(a.viewIndex!==this.index){var f=this.grid.views.views,g=f[a.viewIndex],h=f[this.index];g.viewWidth&&"auto"!=g.viewWidth&&g.setColumnsWidth(g.getColumnsWidth()-e),h.viewWidth&&"auto"!=h.viewWidth&&h.setColumnsWidth(h.getColumnsWidth())}var i=this.source._targetNode,j=this.source._beforeTarget;!this.grid.isLeftToRight()&&(j=!j);var k=this.grid.layout,l=this.index;delete this.source._targetNode,delete this.source._beforeTarget,k.moveColumn(a.viewIndex,l,d(b[0]),d(i),j)},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent),this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth),p.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);/^\s+$/.test(b)&&(b="&nbsp;");var c=['<div class="dojoxGridSortNode'];return a.index!=a.grid.getSortIndex()?c.push('">'):c=c.concat([" ",a.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',a.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']),c=c.concat([b,"</div></div>"]),c.join("")},resize:function(){this.adaptHeight(),this.adaptWidth()},hasHScrollbar:function(a){var b=this._hasHScroll||!1;if(void 0==this._hasHScroll||a)if(this.noscroll)this._hasHScroll=!1;else{var c=q.style(this.scrollboxNode,"overflow");this._hasHScroll="hidden"!=c&&("scroll"==c||this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth)}return b!==this._hasHScroll&&this.grid.update(),this._hasHScroll},hasVScrollbar:function(a){var b=this._hasVScroll||!1;if(void 0==this._hasVScroll||a)if(this.noscroll)this._hasVScroll=!1;else{var c=q.style(this.scrollboxNode,"overflow");this._hasVScroll="hidden"!=c&&("scroll"==c||this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight)}return b!==this._hasVScroll&&this.grid.update(),this._hasVScroll},convertColPctToFixed:function(){var a=!1;this.grid.initialWidth="";var b=i("th",this.headerContentNode),c=e.map(b,function(b,c){var d=b.style.width;if(q.attr(b,"vIdx",c),d&&"%"==d.slice(-1))a=!0;else if(d&&"px"==d.slice(-2))return window.parseInt(d,10);return q.contentBox(b).w});return!!a&&(e.forEach(this.grid.layout.cells,function(a,b){if(a.view==this){var d=a.view.getHeaderCellNode(a.index);if(d&&q.hasAttr(d,"vIdx")){var e=window.parseInt(q.attr(d,"vIdx"));this.setColWidth(b,c[e]),q.removeAttr(d,"vIdx")}}},this),!0)},adaptHeight:function(a){if(!this.grid._autoHeight){var b=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight,c=this,d=function(){for(var a,b=0;b<c.grid.views.views.length;++b)if((a=c.grid.views.views[b])!==c&&a.hasHScrollbar())return!0;return!1};(a||this.noscroll&&d())&&(b-=o.getScrollbar().h),p.setStyleHeightPx(this.scrollboxNode,b)}this.hasVScrollbar(!0)},adaptWidth:function(){this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(a=Math.min(a,this.getColumnsWidth())+"px",this._removingColumn=!1):a=Math.max(a,this.getColumnsWidth())+"px",this.contentNode.style.width=a,this.hasHScrollbar(!0)},setSize:function(a,b){var c=this.domNode.style,d=this.headerNode.style;a&&(c.width=a,d.width=a),c.height=b>=0?b+"px":""},renderRow:function(a){var b=this.createRowNode(a);return this.buildRow(a,b),b},createRowNode:function(a){var b=document.createElement("div");return b.className=this.classTag+"Row",this instanceof c.grid._RowSelector?q.attr(b,"role","presentation"):(q.attr(b,"role","row"),"none"!=this.grid.selectionMode&&b.setAttribute("aria-selected","false")),b[p.gridViewTag]=this.id,b[p.rowIndexTag]=a,this.rowNodes[a]=b,b},buildRow:function(a,b){this.buildRowContent(a,b),this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a),this.flexCells&&this.contentWidth&&(b.firstChild.style.width=this.contentWidth),p.fire(this,"onAfterRow",[a,this.structure.cells,b])},rowRemoved:function(a){a>=0&&this._cleanupRowWidgets(this.getRowNode(a)),this.grid.edit.save(this,a),delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,b){var c=this.getRowNode(a);if(c)return this.content.getCellNode(c,b)},getHeaderCellNode:function(a){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,a)},styleRow:function(a,b){b._style=u(b),this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a){var b=this.getRowNode(a);return b&&(b.style.height="",this.buildRow(a,b)),b},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(a){(h("ff")>=13||h("chrome"))&&(this._nativeScroll=!0);var b=this.grid.isLeftToRight();if(this.firstScroll<2){if(!b&&1==this.firstScroll||b&&0===this.firstScroll){var c=q.marginBox(this.headerNodeContainer);h("ie")?this.headerNodeContainer.style.width=c.w+this.getScrollbarWidth()+"px":h("mozilla")&&(this.headerNodeContainer.style.width=c.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=b?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth)}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var d=this.scrollboxNode.scrollTop;d!==this.lastTop&&this.grid.scrollTo(d),this._nativeScroll=!1},setScrollTop:function(a){return this.lastTop=a,this._nativeScroll||(this.scrollboxNode.scrollTop=a),this.scrollboxNode.scrollTop},doContentEvent:function(a){this.content.decorateEvent(a)&&this.grid.onContentEvent(a)},doHeaderEvent:function(a){this.header.decorateEvent(a)&&this.grid.onHeaderEvent(a)},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){if(this.domNode){this.content.update(),this.grid.update();var a=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=a,this.headerNode.scrollLeft=a}}}),w=d("dojox.grid._GridAvatar",s,{construct:function(){var a=j.doc,b=a.createElement("table");b.cellPadding=b.cellSpacing="0",b.className="dojoxGridDndAvatar",b.style.position="absolute",b.style.zIndex=1999,b.style.margin="0px";var c=a.createElement("tbody"),d=a.createElement("tr"),e=a.createElement("td"),f=a.createElement("td")
;d.className="dojoxGridDndAvatarItem",f.className="dojoxGridDndAvatarItemImage",f.style.width="16px";var g,h=this.manager.source;if(h.creator)g=h._normalizedCreator(h.getItem(this.manager.nodes[0].id).data,"avatar").node;else{g=this.manager.nodes[0].cloneNode(!0);var i,k;if("tr"==g.tagName.toLowerCase())i=a.createElement("table"),k=a.createElement("tbody"),k.appendChild(g),i.appendChild(k),g=i;else if("th"==g.tagName.toLowerCase()){i=a.createElement("table"),k=a.createElement("tbody");var l=a.createElement("tr");i.cellPadding=i.cellSpacing="0",l.appendChild(g),k.appendChild(l),i.appendChild(k),g=i}}g.id="",e.appendChild(g),d.appendChild(f),d.appendChild(e),q.style(d,"opacity",.9),c.appendChild(d),b.appendChild(c),this.node=b;var m=t.manager();this.oldOffsetY=m.OFFSET_Y,m.OFFSET_Y=1},destroy:function(){t.manager().OFFSET_Y=this.oldOffsetY,this.inherited(arguments)}}),x=t.manager().makeAvatar;return t.manager().makeAvatar=function(){return void 0===this.source.viewIndex||q.hasClass(j.body(),"dijit_a11y")?x.call(t.manager()):new w(this)},v})},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(a,b,c,d,e,f,g){var h=b.getObject("dojox.html.metrics",!0),i=b.getObject("dojox");h.getFontMeasurements=function(){var a,b={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};c("ie")&&((a=f.doc.documentElement.style.fontSize||"")||(f.doc.documentElement.style.fontSize="100%"));var d=f.doc.createElement("div"),e=d.style;e.position="absolute",e.left="-100px",e.top="0",e.width="30px",e.height="1000em",e.borderWidth="0",e.margin="0",e.padding="0",e.outline="0",e.lineHeight="1",e.overflow="hidden",f.body().appendChild(d);for(var g in b)e.fontSize=g,b[g]=16*Math.round(12*d.offsetHeight/16)/12/1e3;return c("ie")&&(f.doc.documentElement.style.fontSize=a),f.body().removeChild(d),d=null,b};var j=null;h.getCachedFontMeasurements=function(a){return!a&&j||(j=h.getFontMeasurements()),j};var k=null,l={};h.getTextBox=function(a,b,c){var d,e;if(k)d=k;else{d=k=f.doc.createElement("div");var h=f.doc.createElement("div");h.appendChild(d),e=h.style,e.overflow="scroll",e.position="absolute",e.left="0px",e.top="-10000px",e.width="1px",e.height="1px",e.visibility="hidden",e.borderWidth="0",e.margin="0",e.padding="0",e.outline="0",f.body().appendChild(h)}if(d.className="",e=d.style,e.borderWidth="0",e.margin="0",e.padding="0",e.outline="0",arguments.length>1&&b)for(var i in b)i in l||(e[i]=b[i]);arguments.length>2&&c&&(d.className=c),d.innerHTML=a;var j=g.position(d);return j.w=d.parentNode.scrollWidth,j};var m={w:16,h:16};return h.getScrollbar=function(){return{w:m.w,h:m.h}},h._fontResizeNode=null,h.initOnFontResize=function(a){var b=h._fontResizeNode=f.doc.createElement("iframe"),d=b.style;d.position="absolute",d.width="5em",d.height="10em",d.top="-10000px",d.display="none",c("ie")?b.onreadystatechange=function(){"complete"==b.contentWindow.document.readyState&&(b.onresize=b.contentWindow.parent[i._scopeName].html.metrics._fontresize)}:b.onload=function(){b.contentWindow.onresize=b.contentWindow.parent[i._scopeName].html.metrics._fontresize},b.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'"),f.body().appendChild(b),h.initOnFontResize=function(){}},h.onFontResize=function(){},h._fontresize=function(){h.onFontResize()},e.addOnUnload(function(){var a=h._fontResizeNode;a&&(c("ie")&&a.onresize?a.onresize=null:a.contentWindow&&a.contentWindow.onresize&&(a.contentWindow.onresize=null),h._fontResizeNode=null)}),d(function(){try{var b=f.doc.createElement("div");b.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;",f.body().appendChild(b),m.w=b.offsetWidth-b.clientWidth,m.h=b.offsetHeight-b.clientHeight,f.body().removeChild(b),delete b}catch(a){}"fontSizeWatch"in a.config&&a.config.fontSizeWatch&&h.initOnFontResize()}),h})},"dojox/grid/_Builder":function(){define(["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/window","dojo/_base/event","dojo/_base/sniff","dojo/_base/connect","dojo/dnd/Moveable","dojox/html/metrics","./util","dojo/_base/html","dojo/dom-geometry"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a.grid,n=function(a){return a.cellIndex>=0?a.cellIndex:b.indexOf(a.parentNode.cells,a)},o=function(a){return a.rowIndex>=0?a.rowIndex:b.indexOf(a.parentNode.childNodes,a)},p=function(a,b){return a&&((a.rows||0)[b]||a.childNodes[b])},q=function(a){for(var b=a;b&&"TABLE"!=b.tagName;b=b.parentNode);return b},r=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},s=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},t=j.rowIndexTag,u=j.gridViewTag,v=m._Builder=c.extend(function(a){a&&(this.view=a,this.grid=a.grid)},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var a=[this._table];return this.view.viewWidth&&a.push([' style="width:',this.view.viewWidth,';"'].join("")),a.push(">"),a},generateCellMarkup:function(a,b,c,d){var e,f=[];if(d){var g=a.index!=a.grid.getSortIndex()?"":a.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';a.id||(a.id=this.grid.id+"Hdr"+a.index),e=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',g,' id="',a.id,'"']}else{e=['<td tabIndex="-1" role="gridcell"',this.grid.editable&&!a.editable?'aria-readonly="true"':""]}return a.colSpan&&e.push(' colspan="',a.colSpan,'"'),a.rowSpan&&e.push(' rowspan="',a.rowSpan,'"'),e.push(' class="dojoxGridCell '),a.classes&&e.push(a.classes," "),c&&e.push(c," "),f.push(e.join("")),f.push(""),e=['" idx="',a.index,'" style="'],b&&";"!=b[b.length-1]&&(b+=";"),e.push(a.styles,b||"",a.hidden?"display:none;":""),a.unitWidth&&e.push("width:",a.unitWidth,";"),f.push(e.join("")),f.push(""),e=['"'],a.attrs&&e.push(" ",a.attrs),e.push(">"),f.push(e.join("")),f.push(""),f.push(d?"</th>":"</td>"),f},isCellNode:function(a){return Boolean(a&&a!=d.doc&&k.attr(a,"idx"))},getCellNodeIndex:function(a){return a?Number(k.attr(a,"idx")):-1},getCellNode:function(a,b){for(var c,d=0;(c=p(a.firstChild,d))&&c.cells;d++)for(var e,f=0;e=c.cells[f];f++)if(this.getCellNodeIndex(e)==b)return e;return null},findCellTarget:function(a,b){for(var c=a;c&&(!this.isCellNode(c)||c.offsetParent&&u in c.offsetParent.parentNode&&c.offsetParent.parentNode[u]!=this.view.id)&&c!=b;)c=c.parentNode;return c!=b?c:null},baseDecorateEvent:function(a){a.dispatch="do"+a.type,a.grid=this.grid,a.sourceView=this.view,a.cellNode=this.findCellTarget(a.target,a.rowNode),a.cellIndex=this.getCellNodeIndex(a.cellNode),a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null},findTarget:function(a,b){for(var c=a;c&&c!=this.domNode&&(!(b in c)||u in c&&c[u]!=this.view.id);)c=c.parentNode;return c!=this.domNode?c:null},findRowTarget:function(a){return this.findTarget(a,t)},isIntraNodeEvent:function(a){try{return a.cellNode&&a.relatedTarget&&k.isDescendant(a.relatedTarget,a.cellNode)}catch(a){return!1}},isIntraRowEvent:function(a){try{var b=a.relatedTarget&&this.findRowTarget(a.relatedTarget);return!b&&-1==a.rowIndex||b&&a.rowIndex==b.gridRowIndex}catch(a){return!1}},dispatchEvent:function(a){return a.dispatch in this&&this[a.dispatch](a)},domouseover:function(a){a.cellNode&&a.cellNode!=this.lastOverCellNode&&(this.lastOverCellNode=a.cellNode,this.grid.onMouseOver(a)),this.grid.onMouseOverRow(a)},domouseout:function(a){a.cellNode&&a.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(a,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(a),this.isIntraRowEvent(a)||this.grid.onMouseOutRow(a))},domousedown:function(a){a.cellNode&&this.grid.onMouseDown(a),this.grid.onMouseDownRow(a)},_getTextDirStyle:function(a,b,c){return""}}),w=m._ContentBuilder=c.extend(function(a){v.call(this,a)},v.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a,b=this.grid.get,c=this.view.structure.cells,d=0;a=c[d];d++)for(var e,f=0;e=a[f];f++)e.get=e.get||void 0==e.value&&b,e.markup=this.generateCellMarkup(e,e.cellStyles,e.cellClasses,!1),!this.grid.editable&&e.editable&&(this.grid.editable=!0)},generateHtml:function(a,b){var c,d=this.getTableArray(),e=this.view,f=e.structure.cells,g=this.grid.getItem(b);j.fire(this.view,"onBeforeRow",[b,f]);for(var h,i=0;h=f[i];i++)if(!h.hidden&&!h.header){d.push(h.invisible?'<tr class="dojoxGridInvisible">':"<tr>");for(var k,l,m,n,o=0;k=h[o];o++)l=k.markup,m=k.customClasses=[],n=k.customStyles=[],l[5]=k.format(b,g),l[1]=m.join(" "),l[3]=n.join(";"),c=k.textDir||this.grid.textDir,c&&(l[3]+=this._getTextDirStyle(c,k,b)),d.push.apply(d,l);d.push("</tr>")}return d.push("</table>"),d.join("")},decorateEvent:function(a){return a.rowNode=this.findRowTarget(a.target),!!a.rowNode&&(a.rowIndex=a.rowNode[t],this.baseDecorateEvent(a),a.cell=this.grid.getCell(a.cellIndex),!0)}}),x=m._HeaderBuilder=c.extend(function(a){this.moveable=null,v.call(this,a)},v.prototype,{_skipBogusClicks:!1,overResizeWidth:4,minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):this.tableMap=new m._TableMap(this.view.structure.cells)},generateHtml:function(a,b){var c,d=this.getTableArray(),e=this.view.structure.cells;j.fire(this.view,"onBeforeRow",[-1,e]);for(var f,g=0;f=e[g];g++)if(!f.hidden){d.push(f.invisible?'<tr class="dojoxGridInvisible">':"<tr>");for(var h,i,k=0;h=f[k];k++)h.customClasses=[],h.customStyles=[],this.view.simpleStructure&&(h.draggable&&(h.headerClasses?-1==h.headerClasses.indexOf("dojoDndItem")&&(h.headerClasses+=" dojoDndItem"):h.headerClasses="dojoDndItem"),h.attrs?-1==h.attrs.indexOf("dndType='gridColumn_")&&(h.attrs+=" dndType='gridColumn_"+this.grid.id+"'"):h.attrs="dndType='gridColumn_"+this.grid.id+"'"),i=this.generateCellMarkup(h,h.headerStyles,h.headerClasses,!0),i[5]=void 0!=b?b:a(h),i[3]=h.customStyles.join(";"),c=h.textDir||this.grid.textDir,c&&(i[3]+=this._getTextDirStyle(c,h,b)),i[1]=h.customClasses.join(" "),d.push(i.join(""));d.push("</tr>")}return d.push("</table>"),d.join("")},getCellX:function(a){var b,c=a.layerX;if(f("mozilla")||f("ie")>=9){b=r(a.target,s("th")),c-=b&&b.offsetLeft||0;a.sourceView.getScrollbarWidth();this.grid.isLeftToRight()||(table=r(b,s("table")),c-=table&&table.offsetLeft||0)}return b=r(a.target,function(){return!(!b||b==a.cellNode)&&(c+=b.offsetLeft<0?0:b.offsetLeft,!0)}),c},decorateEvent:function(a){return this.baseDecorateEvent(a),a.rowIndex=-1,a.cellX=this.getCellX(a),!0},prepareResize:function(a,b){do{var c=a.cellIndex;a.cellNode=c?a.cellNode.parentNode.cells[c+b]:null,a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1}while(a.cellNode&&"none"==a.cellNode.style.display);return Boolean(a.cellNode)},canResize:function(a){if(!a.cellNode||a.cellNode.colSpan>1)return!1;var b=this.grid.getCell(a.cellIndex);return!b.noresize&&b.canResize()},overLeftResizeArea:function(a){if(k.hasClass(d.body(),"dojoDndMove"))return!1;if(f("ie")){var b=a.target;if(k.hasClass(b,"dojoxGridArrowButtonNode")||k.hasClass(b,"dojoxGridArrowButtonChar")||k.hasClass(b,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellIndex>0&&a.cellX>0&&a.cellX<this.overResizeWidth&&this.prepareResize(a,-1):a.cellNode&&a.cellX>0&&a.cellX<this.overResizeWidth},overRightResizeArea:function(a){if(k.hasClass(d.body(),"dojoDndMove"))return!1;if(f("ie")){var b=a.target;if(k.hasClass(b,"dojoxGridArrowButtonNode")||k.hasClass(b,"dojoxGridArrowButtonChar")||k.hasClass(b,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth:a.cellIndex>0&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(a,-1)},domousemove:function(a){if(!this.moveable){var b=this.overRightResizeArea(a)?"dojoxGridColResize":this.overLeftResizeArea(a)?"dojoxGridColResize":"";b&&!this.canResize(a)&&(b="dojoxGridColNoResize"),k.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize","dojoxGridColNoResize"==b),k.toggleClass(a.sourceView.headerNode,"dojoxGridColResize","dojoxGridColResize"==b),b&&e.stop(a)}},domousedown:function(a){this.moveable||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):(this.grid.onMouseDown(a),this.grid.onMouseOverRow(a)))},doclick:function(a){return!!this._skipBogusClicks&&(e.stop(a),!0)},colResizeSetup:function(a,b){var c=k.contentBox(a.sourceView.headerNode);if(b){this.lineDiv=document.createElement("div");var e=k.position(a.sourceView.headerNode,!0),g=k.contentBox(a.sourceView.domNode),h=a.pageX;!this.grid.isLeftToRight()&&f("ie")<8&&(h-=i.getScrollbar().w),k.style(this.lineDiv,{top:e.y+"px",left:h+"px",height:g.h+c.h+"px"}),k.addClass(this.lineDiv,"dojoxGridResizeColLine"),this.lineDiv._origLeft=h,d.body().appendChild(this.lineDiv)}for(var j,l=[],m=this.tableMap.findOverlappingNodes(a.cellNode),n=0;j=m[n];n++)l.push({node:j,index:this.getCellNodeIndex(j),width:j.offsetWidth});for(var o,p=a.sourceView,q=this.grid.isLeftToRight()?1:-1,r=a.grid.views.views,s=[],t=p.idx+q;o=r[t];t+=q)s.push({node:o.headerNode,left:window.parseInt(o.headerNode.style.left)});var u=p.headerContentNode.firstChild;return{scrollLeft:a.sourceView.headerNode.scrollLeft,view:p,node:a.cellNode,index:a.cellIndex,w:k.contentBox(a.cellNode).w,vw:c.w,table:u,tw:k.contentBox(u).w,spanners:l,followers:s}},beginColumnResize:function(a){this.moverDiv=document.createElement("div"),k.style(this.moverDiv,{position:"absolute",left:0}),d.body().appendChild(this.moverDiv),k.addClass(this.grid.domNode,"dojoxGridColumnResizing");var b=this.moveable=new h(this.moverDiv),e=this.colResizeSetup(a,!0);b.onMove=c.hitch(this,"doResizeColumn",e),g.connect(b,"onMoveStop",c.hitch(this,function(){this.endResizeColumn(e),e.node.releaseCapture&&e.node.releaseCapture(),this.moveable.destroy(),delete this.moveable,this.moveable=null,k.removeClass(this.grid.domNode,"dojoxGridColumnResizing")})),a.cellNode.setCapture&&a.cellNode.setCapture(),b.onMouseDown(a)},doResizeColumn:function(a,b,c){var d=c.l,e={deltaX:d,w:a.w+(this.grid.isLeftToRight()?d:-d),vw:a.vw+d,tw:a.tw+d};this.dragRecord={inDrag:a,mover:b,leftTop:c},e.w>=this.minColWidth&&(b?k.style(this.lineDiv,"left",this.lineDiv._origLeft+e.deltaX+"px"):this.doResizeNow(a,e))},endResizeColumn:function(a){if(this.dragRecord){var b=this.dragRecord.leftTop,c=this.grid.isLeftToRight()?b.l:-b.l;c+=Math.max(a.w+c,this.minColWidth)-(a.w+c),f("webkit")&&a.spanners.length&&(c+=k._getPadBorderExtents(a.spanners[0].node).w);var d={deltaX:c,w:a.w+c,vw:a.vw+c,tw:a.tw+c};this.doResizeNow(a,d),delete this.dragRecord}k.destroy(this.lineDiv),k.destroy(this.moverDiv),k.destroy(this.moverDiv),delete this.moverDiv,this._skipBogusClicks=!0,a.view.update(),this._skipBogusClicks=!1,this.grid.onResizeColumn(a.index)},doResizeNow:function(a,b){if(a.view.convertColPctToFixed(),a.view.flexCells&&!a.view.testFlexCells()){var c=q(a.node);c&&(c.style.width="")}var d,e,g,h,i;for(d=0;e=a.spanners[d];d++)(g=e.width+b.deltaX)>0&&(e.node.style.width=g+"px",a.view.setColWidth(e.index,g));if(this.grid.isLeftToRight()||!f("ie"))for(d=0;h=a.followers[d];d++)i=h.left+b.deltaX,h.node.style.left=i+"px";a.node.style.width=b.w+"px",a.view.setColWidth(a.index,b.w),a.view.headerNode.style.width=b.vw+"px",a.view.setColumnsWidth(b.tw),this.grid.isLeftToRight()||(a.view.headerNode.scrollLeft=a.scrollLeft+b.deltaX)}});return m._TableMap=c.extend(function(a){this.mapRows(a)},{map:null,mapRows:function(a){if(a.length){this.map=[];for(var b,c=0;b=a[c];c++)this.map[c]=[];for(var d=0;b=a[d];d++)for(var e,f,g,h=0,i=0;e=b[h];h++){for(;this.map[d][i];)i++;this.map[d][i]={c:h,r:d},g=e.rowSpan||1,f=e.colSpan||1;for(var j=0;j<g;j++)for(var k=0;k<f;k++)this.map[d+j][i+k]=this.map[d][i];i+=f}}},dumpMap:function(){for(var a,b=0,c="";a=this.map[b];b++,c="")for(var d,e=0;d=a[e];e++)c+=d.r+","+d.c+"   "},getMapCoords:function(a,b){for(var c,d=0;c=this.map[d];d++)for(var e,f=0;e=c[f];f++)if(e.c==b&&e.r==a)return{j:d,i:f};return{j:-1,i:-1}},getNode:function(a,b,c){var d=a&&a.rows[b];return d&&d.cells[c]},_findOverlappingNodes:function(a,b,c){for(var d,e=[],f=this.getMapCoords(b,c),g=0;d=this.map[g];g++)if(g!=f.j){var h=d[f.i],i=h?this.getNode(a,h.r,h.c):null;i&&e.push(i)}return e},findOverlappingNodes:function(a){return this._findOverlappingNodes(q(a),o(a.parentNode),n(a))}}),{_Builder:v,_HeaderBuilder:x,_ContentBuilder:w}})},"dojox/grid/_ViewManager":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(a,b,c){return a("dojox.grid._ViewManager",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length,this.views.push(a)},destroyViews:function(){for(var a,b=0;a=this.views[b];b++)a.destroy();this.views=[]},getContentNodes:function(){for(var a,b=[],c=0;a=this.views[c];c++)b.push(a.contentNode);return b},forEach:function(a){for(var b,c=0;b=this.views[c];c++)a(b,c)},onEach:function(a,b){b=b||[];for(var c,d=0;c=this.views[d];d++)a in c&&c[a].apply(c,b)},normalizeHeaderNodeHeight:function(){for(var a,b=[],c=0;a=this.views[c];c++)a.headerContentNode.firstChild&&b.push(a.headerContentNode);this.normalizeRowNodeHeights(b)},normalizeRowNodeHeights:function(a){var d=0,e=[];if(this.grid.rowHeight)d=this.grid.rowHeight;else{if(a.length<=1)return;for(var f,g=0;f=a[g];g++)c.contains(f,"dojoxGridNonNormalizedCell")||(e[g]=f.firstChild.offsetHeight,d=Math.max(d,e[g]));d=d>=0?d:0,(b("mozilla")||b("ie")>8)&&d&&d++}for(g=0;f=a[g];g++)e[g]!=d&&(f.firstChild.style.height=d+"px")},resetHeaderNodeHeight:function(){for(var a,b,c=0;a=this.views[c];c++)(b=a.headerContentNode.firstChild)&&(b.style.height="")},renormalizeRow:function(a){for(var b,c,d=[],e=0;(b=this.views[e])&&(c=b.getRowNode(a));e++)c.firstChild.style.height="",d.push(c);this.normalizeRowNodeHeights(d)},getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight(),this.forEach(function(a){a.headerContentNode.style.height=""});var a=0;return this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)}),a},measureContent:function(){var a=0;return this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)}),a},findClient:function(a){var b=this.grid.elasticView||-1;if(b<0)for(var c,d=1;c=this.views[d];d++)if(c.viewWidth){for(d=1;c=this.views[d];d++)if(!c.viewWidth){b=d;break}break}return b<0&&(b=Math.floor(this.views.length/2)),b},arrange:function(a,c){var d,e,f,g=this.views.length,h=this,i=c<=0?g:this.findClient(),j=function(a,c){var d=a.domNode.style,e=a.headerNode.style;h.grid.isLeftToRight()?(d.left=c+"px",e.left=c+"px"):(d.right=c+"px",b("ff")<4?e.right=c+a.getScrollbarWidth()+"px":e.right=c+"px",b("webkit")||"auto"==e.width||(e.width=parseInt(e.width,10)-a.getScrollbarWidth()+"px")),d.top="0px",e.top=0};for(d=0;(e=this.views[d])&&d<i;d++)f=this.getViewWidth(d),e.setSize(f,0),j(e,a),f=e.headerContentNode&&e.headerContentNode.firstChild?e.getColumnsWidth()+e.getScrollbarWidth():e.domNode.offsetWidth,a+=f;d++;for(var k=c,l=g-1;(e=this.views[l])&&d<=l;l--)f=this.getViewWidth(l),e.setSize(f,0),f=e.domNode.offsetWidth,k-=f,j(e,k);return i<g&&(e=this.views[i],f=Math.max(1,k-a),e.setSize(f+"px",0),j(e,a)),a},renderRow:function(a,b,c){for(var d,e,f,g=[],h=0;(d=this.views[h])&&(e=b[h]);h++)f=d.renderRow(a),e.appendChild(f),g.push(f);c||this.normalizeRowNodeHeights(g)},rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(a,b){for(var c,d=0;c=this.views[d];d++)c.updateRow(a);b||this.renormalizeRow(a)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(a){for(var c,d=a,e=0;c=this.views[e];e++)d=c.setScrollTop(a),b("ie")&&c.headerNode&&c.scrollboxNode&&(c.headerNode.scrollLeft=c.scrollboxNode.scrollLeft);return d},getFirstScrollingView:function(){for(var a,b=0;a=this.views[b];b++)if(a.hasHScrollbar()||a.hasVScrollbar())return a;return null}})})},"dojox/grid/_RowManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(a,b,c){var d=function(a,b){void 0==a.style.cssText?a.setAttribute("style",b):a.style.cssText=b};return a("dojox.grid._RowManager",null,{constructor:function(a){this.grid=a},linesToEms:2,overRow:-2,prepareStylingRow:function(a,b){return{index:a,node:b,odd:Boolean(1&a),selected:!!this.grid.selection.isSelected(a),over:this.isOver(a),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(a,b){var c=this.prepareStylingRow(a,b);this.grid.onStyleRow(c),this.applyStyles(c)},applyStyles:function(a){var b=a;b.node.className=b.customClasses;var c=b.node.style.height;d(b.node,b.customStyles+";"+(b.node._style||"")),b.node.style.height=c},updateStyles:function(a){this.grid.updateRowStyles(a)},setOverRow:function(a){var c=this.overRow;this.overRow=a,c!=this.overRow&&(b.isString(c)||c>=0)&&this.updateStyles(c),this.updateStyles(this.overRow)},isOver:function(a){return this.overRow==a&&!c.contains(this.grid.domNode,"dojoxGridColumnResizing")}})})},"dojox/grid/_FocusManager":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/query","./util","dojo/_base/html"],function(a,b,c,d,e,f,g,h,i){return c("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a,this.cell=null,this.rowIndex=-1,this._connects=[],this._headerConnects=[],this.headerMenu=this.grid.headerMenu,this._connects.push(d.connect(this.grid.domNode,"onfocus",this,"doFocus")),this._connects.push(d.connect(this.grid.domNode,"onblur",this,"doBlur")),this._connects.push(d.connect(this.grid.domNode,"mousedown",this,"_mouseDown")),this._connects.push(d.connect(this.grid.domNode,"mouseup",this,"_mouseUp")),this._connects.push(d.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu")),this._connects.push(d.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus")),this._connects.push(d.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur")),this._connects.push(d.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus")),this._connects.push(d.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){a.forEach(this._connects,d.disconnect),a.forEach(this._headerConnects,d.disconnect),delete this.grid,delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0],this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){return!!this.cell&&(this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1)},isFirstFocusCell:function(){return!!this.cell&&(0===this.rowIndex&&0===this.cell.index)},isNoFocusCell:function(){return this.rowIndex<0||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?a.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b&&(i.toggleClass(b,this.focusClass,a),a)){var c=this.scrollIntoView();try{!f("webkit")&&this.grid.edit.isEditing()||(h.fire(b,"focus"),c&&(this.cell.view.scrollboxNode.scrollLeft=c))}catch(a){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid.focused){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{this.grid.edit.isEditing()||(i.toggleClass(a,this.focusClass,!0),this._colHeadNode&&this.blurHeader(),h.fire(a,"focus"))}catch(a){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&this.focusHeader()},_initColumnHeaders:function(){a.forEach(this._headerConnects,d.disconnect),this._headerConnects=[];for(var b=this._findHeaderCells(),c=0;c<b.length;c++)this._headerConnects.push(d.connect(b[c],"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(d.connect(b[c],"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var a=g("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var d=a[c],e=i.hasAttr(d,"tabIndex"),f=i.attr(d,"tabIndex");e&&f<0&&b.push(d)}return b},_setActiveColHeader:function(a,b,c){this.grid.domNode.setAttribute("aria-activedescendant",a.id),null!=c&&c>=0&&c!=b&&i.toggleClass(this._findHeaderCells()[c],this.focusClass,!1),i.toggleClass(a,this.focusClass,!0),this._colHeadNode=a,this._colHeadFocusIdx=b,this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);return a.n&&a.sr&&(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w?a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w:a.n.offsetLeft<a.sr.l&&(a.s.scrollLeft=a.n.offsetLeft)),a.r&&a.sr&&(b+a.r.offsetHeight>a.sr.t+a.sr.h?this.grid.setScrollTop(b+a.r.offsetHeight-a.sr.h):b<a.sr.t&&this.grid.setScrollTop(b)),a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a,d=c.view.scrollboxNode,e={w:d.clientWidth,l:d.scrollLeft,t:d.scrollTop,h:d.clientHeight},f=c.view.getRowNode(this.rowIndex);return{c:c,s:d,sr:e,n:b||a.getNode(this.rowIndex),r:f}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode){var c=this.grid.getCell(a);if(!c)return;b=this._scrollInfo(c,c.getNode(0))}if(b&&b.s&&b.sr&&b.n){var d=b.sr.l+b.sr.w;b.n.offsetLeft+b.n.offsetWidth>d?b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w:b.n.offsetLeft<b.sr.l?b.s.scrollLeft=b.n.offsetLeft:f("ie")<=7&&c&&c.view.headerNode&&(c.view.headerNode.scrollLeft=b.s.scrollLeft)}},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b,c=0;b=this.grid.views.views[c];c++)if(b.headerNode){a=b;break}return a&&"none"==i.getComputedStyle(a.headerNode).display},colSizeAdjust:function(a,b,c){var d=this._findHeaderCells(),e=this.focusView;if(!e||!e.header.tableMap.map)for(var f,g=0;f=this.grid.views.views[g];g++)if(f.header.tableMap.map){e=f;break}var h=d[b];if(e&&(b!=d.length-1||0!==b)&&(e.content.baseDecorateEvent(a),a.cellNode=h,a.cellIndex=e.content.getCellNodeIndex(a.cellNode),a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null,e.header.canResize(a))){var i={l:c},j=e.header.colResizeSetup(a,!1);e.header.doResizeColumn(j,null,i),e.update()}},styleRow:function(a){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,c){a&&!this.isFocusCell(a,c)&&(this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=c,this._focusifyCellNode(!0)),f("opera")?setTimeout(b.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1):this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;if(b>c&&(b=0,a++),a>d&&(b=c,a=d),this.grid.edit.isEditing()){var e=this.grid.getCell(b);if(!this.isLastFocusCell()&&(!e.editable||this.grid.canEdit&&!this.grid.canEdit(e,a)))return this.cell=e,this.rowIndex=a,void this.next()}this.setFocusIndex(a,b)}},previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;if(b<0&&(b=this.grid.layout.cellCount-1,a--),a<0&&(a=0,b=0),this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable)return this.cell=c,this.rowIndex=a,void this.previous()}this.setFocusIndex(a,b)}},move:function(b,c){var d=c<0?-1:1;if(this.isNavHeader()){var e=this._findHeaderCells(),f=currentIdx=a.indexOf(e,this._colHeadNode);for(currentIdx+=c;currentIdx>=0&&currentIdx<e.length&&"none"==e[currentIdx].style.display;)currentIdx+=d;currentIdx>=0&&currentIdx<e.length&&this._setActiveColHeader(e[currentIdx],currentIdx,f)}else if(this.cell){var g=this.grid.scroller,h=this.rowIndex,j=this.grid.rowCount-1,k=Math.min(j,Math.max(0,h+b));b&&(b>0?k>g.getLastPageRow(g.page)&&this.grid.setScrollTop(this.grid.scrollTop+g.findScrollTop(k)-g.findScrollTop(h)):b<0&&k<=g.getPageRow(g.page)&&this.grid.setScrollTop(this.grid.scrollTop-g.findScrollTop(h)-g.findScrollTop(k)));for(var l=this.grid.layout.cellCount-1,m=this.cell.index,n=Math.min(l,Math.max(0,m+c)),o=this.grid.getCell(n);n>=0&&n<l&&o&&!0===o.hidden;)n+=d,o=this.grid.getCell(n);o&&!0!==o.hidden||(n=m);var p=o.getNode(k);if(!p&&b)return void(k+b>=0&&k+b<=j&&this.move(b>0?++b:--b,c));if((!p||"none"===i.style(p,"display"))&&c)return void(n+c>=0&&n+c<=l&&this.move(b,c>0?++c:--c));this.setFocusIndex(k,n),b&&this.grid.updateRow(h)}},previousKey:function(a){this.grid.edit.isEditing()?(e.stop(a),this.previous()):this.isNavHeader()||this._isHeaderHidden()?(this.tabOut(this.grid.domNode),null!=this._colHeadFocusIdx&&(i.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,!1),this._colHeadFocusIdx=null),this._focusifyCellNode(!1)):(this.grid.domNode.focus(),e.stop(a))},nextKey:function(a){this.grid.rowCount;a.target===this.grid.domNode&&null==this._colHeadFocusIdx?(this.focusHeader(),e.stop(a)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),this._colHeadNode=this._colHeadFocusIdx=null):this.grid.edit.isEditing()?(e.stop(a),this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=!0,a.focus()},focusGridView:function(){h.fire(this.focusView,"focus")},focusGrid:function(a){this.focusGridView(),this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var a=!0,b=0===this.grid.rowCount;if(this.isNoFocusCell()&&!b){var c=0;this.grid.getCell(c).hidden&&(c=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,c)}else this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex),this.focusGrid()):a=!1;return this._colHeadNode=this._colHeadFocusIdx=null,a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;for(this._isHeaderHidden()?this.findAndFocusGridCell():this._colHeadFocusIdx||(this.isNoFocusCell()?this._colHeadFocusIdx=0:this._colHeadFocusIdx=this.cell.index),this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<a.length&&"none"==this._colHeadNode.style.display;)this._colHeadFocusIdx++,this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&"none"!=this._colHeadNode.style.display?(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode&&(this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode),this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b),this._scrollHeader(this._colHeadFocusIdx),this._focusifyCellNode(!1)):this.findAndFocusGridCell()},blurHeader:function(){if(i.removeClass(this._colHeadNode,this.focusClass),i.removeAttr(this.grid.domNode,"aria-activedescendant"),this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode),this.headerMenu.bindDomNode(a),this._contextMenuBindNode=a}},doFocus:function(a){if(a&&a.target!=a.currentTarget)return void e.stop(a);this._clickFocus||(this.tabbingOut||this.focusHeader(),this.tabbingOut=!1,e.stop(a))},doBlur:function(a){e.stop(a)},doContextMenu:function(a){this.headerMenu||e.stop(a)},doLastNodeFocus:function(a){this.tabbingOut?this._focusifyCellNode(!1):this.grid.rowCount>0?(this.isNoFocusCell()&&this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader(),this.tabbingOut=!1,e.stop(a)},doLastNodeBlur:function(a){e.stop(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,i.attr(a.target,"idx"),this._colHeadFocusIdx),this._scrollHeader(this.getHeaderIndex()),e.stop(a)},
doColHeaderBlur:function(a){i.toggleClass(a.target,this.focusClass,!1)},_mouseDown:function(a){this._clickFocus=dojo.some(this.grid.views.views,function(b){return b.scrollboxNode===a.target})},_mouseUp:function(a){this._clickFocus=!1}})})},"dojox/grid/_EditManager":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/sniff","./util"],function(a,b,c,d,e,f){return c("dojox.grid._EditManager",null,{constructor:function(b){this.grid=b,this.connections=e("ie")?[d.connect(document.body,"onfocus",a.hitch(this,"_boomerangFocus"))]:[],this.connections.push(d.connect(this.grid,"onBlur",this,"apply")),this.connections.push(d.connect(this.grid,"prerender",this,"_onPreRender"))},info:{},destroy:function(){b.forEach(this.connections,d.disconnect)},cellFocus:function(a,b){this.grid.singleClickEdit||this.isEditRow(b)?this.setEditCell(a,b):this.apply(),(this.isEditing()||a&&a.editable&&a.alwaysEditing)&&this._focusEditor(a,b)},rowClick:function(a){this.isEditing()&&!this.isEditRow(a.rowIndex)&&this.apply()},styleRow:function(a){a.index==this.info.rowIndex&&(a.customClasses+=" dojoxGridRowEditing")},dispatchEvent:function(a){var b=a.cell,c=b&&b.editable?b:0;return c&&c.dispatchEvent(a.dispatch,a)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(a,b){return this.info.rowIndex===a&&this.info.cell.index==b},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(a,b){!this.isEditCell(b,a.index)&&this.grid.canEdit&&this.grid.canEdit(a,b)&&this.start(a,b,this.isEditRow(b)||a.editable)},_focusEditor:function(a,b){f.fire(a,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){this._shouldCatchBoomerang()&&(this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0)},_doCatchBoomerang:function(){e("ie")&&(this._catchBoomerang=(new Date).getTime()+this._boomerangWindow)},start:function(a,b,c){this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.isEditing()&&!this.isEditRow(b)&&(this.applyRowEdit(),this.grid.updateRow(b)),c?(this.info={cell:a,rowIndex:b},this.grid.doStartEdit(a,b),this.grid.updateRow(b)):this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._focusEditor(a,b),this._doCatchBoomerang())},_editorDo:function(a){var b=this.info.cell;b&&b.editable&&b[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(a,b,c){this.grid.canEdit(b,c)&&this.grid.doApplyCellEdit(a,c,b.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){this.isEditing()&&this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},cancel:function(){this.isEditing()&&(this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},save:function(a,b){var c=this.info.cell;!this.isEditRow(a)||b&&c.view!=b||!c.editable||c.save(c,this.info.rowIndex)},restore:function(a,b){var c=this.info.cell;this.isEditRow(b)&&c.view==a&&c.editable&&c.restore(this.info.rowIndex)},_isValidInput:function(){var a=(this.info.cell||{}).widget;return!a||!a.isValid||(a.focused=!0,a.isValid(!0))},_onPreRender:function(){this.isEditing()&&(this.info.value=this.info.cell.getValue())}})})},"dojox/grid/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(a,b,c,d){return a("dojox.grid.Selection",null,{constructor:function(a){this.grid=a,this.selected=[],this.setMode(a.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(a){this.selected.length&&this.deselectAll(),this.mode="extended"!=a&&"multiple"!=a&&"single"!=a&&"none"!=a?"extended":a},onCanSelect:function(a){return this.grid.onCanSelect(a)},onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(a){},onDeselected:function(a){},onChanging:function(){},onChanged:function(){},isSelected:function(a){return"none"!=this.mode&&this.selected[a]},getFirstSelected:function(){if(!this.selected.length||"none"==this.mode)return-1;for(var a=0,b=this.selected.length;a<b;a++)if(this.selected[a])return a;return-1},getNextSelected:function(a){if("none"==this.mode)return-1;for(var b=a+1,c=this.selected.length;b<c;b++)if(this.selected[b])return b;return-1},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(b);return a},getSelectedCount:function(){for(var a=0,b=0;b<this.selected.length;b++)this.selected[b]&&a++;return a},_beginUpdate:function(){0===this.updating&&this.onChanging(),this.updating++},_endUpdate:function(){0===--this.updating&&this.onChanged()},select:function(a){"none"!=this.mode&&("multiple"!=this.mode?(this.deselectAll(a),this.addToSelection(a)):this.toggleSelect(a))},addToSelection:function(a){if("none"!=this.mode){if(c.isArray(a))return void b.forEach(a,this.addToSelection,this);if(a=Number(a),this.selected[a])this.selectedIndex=a;else if(!1!==this.onCanSelect(a)){this.selectedIndex=a;var e=this.grid.getRowNode(a);e&&d.set(e,"aria-selected","true"),this._beginUpdate(),this.selected[a]=!0,this.onSelected(a),this._endUpdate()}}},deselect:function(a){if("none"!=this.mode){if(c.isArray(a))return void b.forEach(a,this.deselect,this);if(a=Number(a),this.selectedIndex==a&&(this.selectedIndex=-1),this.selected[a]){if(!1===this.onCanDeselect(a))return;var e=this.grid.getRowNode(a);e&&d.set(e,"aria-selected","false"),this._beginUpdate(),delete this.selected[a],this.onDeselected(a),this._endUpdate()}}},setSelected:function(a,b){this[b?"addToSelection":"deselect"](a)},toggleSelect:function(a){if(c.isArray(a))return void b.forEach(a,this.toggleSelect,this);this.setSelected(a,!this.selected[a])},_range:function(a,b,c){var d=a>=0?a:b,e=b;d>e&&(e=d,d=b);for(var f=d;f<=e;f++)c(f)},selectRange:function(a,b){this._range(a,b,c.hitch(this,"addToSelection"))},deselectRange:function(a,b){this._range(a,b,c.hitch(this,"deselect"))},insert:function(a){this.selected.splice(a,0,!1),this.selectedIndex>=a&&this.selectedIndex++},remove:function(a){this.selected.splice(a,1),this.selectedIndex>=a&&this.selectedIndex--},deselectAll:function(a){for(var b in this.selected)b!=a&&!0===this.selected[b]&&this.deselect(b)},clickSelect:function(a,b,c){"none"!=this.mode&&(this._beginUpdate(),"extended"!=this.mode?this.select(a):((!c||this.rangeStartIndex<0)&&(this.rangeStartIndex=a),b||this.deselectAll(a),c?this.selectRange(this.rangeStartIndex,a):b?this.toggleSelect(a):this.addToSelection(a)),this._endUpdate())},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.isCopyKey(a),a.shiftKey)},clear:function(){this._beginUpdate(),this.deselectAll(),this._endUpdate()}})})},"dojox/grid/DataSelection":function(){define(["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(a,b,c){return a("dojox.grid.DataSelection",c,{constructor:function(a){a.keepSelection&&(this.preserver=new b(this))},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var a=c.prototype.getFirstSelected.call(this);return-1==a?null:this.grid.getItem(a)},getNextSelected:function(a){var b=this.grid.getItemIndex(a),d=c.prototype.getNextSelected.call(this,b);return-1==d?null:this.grid.getItem(d)},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(this.grid.getItem(b));return a},addToSelection:function(a){if("none"!=this.mode){var b=null;b="number"==typeof a||"string"==typeof a?a:this.grid.getItemIndex(a),c.prototype.addToSelection.call(this,b)}},deselect:function(a){if("none"!=this.mode){var b=null;b="number"==typeof a||"string"==typeof a?a:this.grid.getItemIndex(a),c.prototype.deselect.call(this,b)}},deselectAll:function(a){var b=null;a||"number"==typeof a?(b="number"==typeof a||"string"==typeof a?a:this.grid.getItemIndex(a),c.prototype.deselectAll.call(this,b)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(a,b,c,d){return a("dojox.grid._SelectionPreserver",null,{constructor:function(a){this.selection=a;var d=this.grid=a.grid;this.reset(),this._connects=[b.connect(d,"_setStore",this,"reset"),b.connect(d,"_addItem",this,"_reSelectById"),b.connect(a,"onSelected",c.hitch(this,"_selectById",!0)),b.connect(a,"onDeselected",c.hitch(this,"_selectById",!1)),b.connect(a,"deselectAll",this,"reset")]},destroy:function(){this.reset(),d.forEach(this._connects,b.disconnect),delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(a,b){a&&this.grid._hasIdentity&&(this.selection.selected[b]=this._selectedById[this.grid.store.getIdentity(a)])},_selectById:function(a,b){if("none"!=this.selection.mode&&this.grid._hasIdentity){var c=b,d=this.grid;if("number"==typeof b||"string"==typeof b){var e=d._by_idx[b];c=e&&e.item}return c&&(this._selectedById[d.store.getIdentity(c)]=!!a),c}}})})},"dojox/grid/enhanced/_PluginManager":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","./_Events","./_FocusManager","../util"],function(a,b,c,d,e,f,g,h){var i=c("dojox.grid.enhanced._PluginManager",null,{_options:null,_plugins:null,_connects:null,constructor:function(a){this.grid=a,this._store=a.store,this._options={},this._plugins=[],this._connects=[],this._parseProps(this.grid.plugins),a.connect(a,"_setStore",b.hitch(this,function(a){this._store!==a&&(this.forEach("onSetStore",[a,this._store]),this._store=a)}))},startup:function(){this.forEach("onStartUp")},preInit:function(){this.grid.focus.destroy(),this.grid.focus=new g(this.grid),new f(this.grid),this._init(!0),this.forEach("onPreInit")},postInit:function(){if(this._init(!1),d.forEach(this.grid.views.views,this._initView,this),this._connects.push(e.connect(this.grid.views,"addView",b.hitch(this,this._initView))),this._plugins.length>0){var a=this.grid.edit;a&&(a.styleRow=function(a){})}this.forEach("onPostInit")},forEach:function(a,b){d.forEach(this._plugins,function(c){c&&c[a]&&c[a].apply(c,b||[])})},_parseProps:function(a){if(a){var c,d={},e=this._options,f=this.grid,g=i.registry;for(c in a)a[c]&&this._normalize(c,a,g,d);e.dnd&&(e.columnReordering=!1),b.mixin(f,e)}},_normalize:function(a,c,e,f){if(!e[a])throw new Error("Plugin "+a+" is required.");if(f[a])throw new Error("Recursive cycle dependency is not supported.");var g=this._options;if(g[a])return g[a];f[a]=!0,g[a]=b.mixin({},e[a],b.isObject(c[a])?c[a]:{});var h=g[a].dependency;return h&&(b.isArray(h)||(h=g[a].dependency=[h]),d.forEach(h,function(a){if(!this._normalize(a,c,e,f))throw new Error("Plugin "+a+" is required.")},this)),delete f[a],g[a]},_init:function(a){var b,c,d=this._options;for(b in d)c=d[b].preInit,(a?c:!c)&&d[b].class&&!this.pluginExisted(b)&&this.loadPlugin(b)},loadPlugin:function(a){var b=this._options[a];if(!b)return null;var c=this.getPlugin(a);if(c)return c;var e=b.dependency;d.forEach(e,function(a){if(!this.loadPlugin(a))throw new Error("Plugin "+a+" is required.")},this);var f=b.class;return delete b.class,c=new this.getPluginClazz(f)(this.grid,b),this._plugins.push(c),c},_initView:function(a){a&&(h.funnelEvents(a.contentNode,a,"doContentEvent",["mouseup","mousemove"]),h.funnelEvents(a.headerNode,a,"doHeaderEvent",["mouseup"]))},pluginExisted:function(a){return!!this.getPlugin(a)},getPlugin:function(a){var b=this._plugins;a=a.toLowerCase();for(var c=0,d=b.length;c<d;c++)if(a==b[c].name.toLowerCase())return b[c];return null},getPluginClazz:function(a){if(b.isFunction(a))return a;var c='Please make sure Plugin "'+a+'" is existed.';try{var d=b.getObject(a);if(!d)throw new Error(c);return d}catch(a){throw new Error(c)}},isFixedCell:function(a){return a&&(a.isRowSelector||a.fixedPos)},destroy:function(){d.forEach(this._connects,e.disconnect),this.forEach("destroy"),this.grid.unwrap&&this.grid.unwrap(),delete this._connects,delete this._plugins,delete this._options}});return i.registerPlugin=function(a,c){if(a){var d=i;d.registry=d.registry||{},d.registry[a.prototype.name]=b.mixin({class:a},c||{})}},i})},"dojox/grid/enhanced/_Events":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/keys","dojo/_base/html","dojo/_base/event","dojox/grid/_Events"],function(a,b,c,d,e,f){return b("dojox.grid.enhanced._Events",null,{_events:null,headerCellActiveClass:"dojoxGridHeaderActive",cellActiveClass:"dojoxGridCellActive",rowActiveClass:"dojoxGridRowActive",constructor:function(a){this._events=new f,a.mixin(a,this)},dokeyup:function(a){this.focus.currentArea().keyup(a)},onKeyDown:function(a){if(!a.altKey&&!a.metaKey){var b=this.focus,e=this.edit.isEditing();switch(a.keyCode){case c.TAB:if(a.ctrlKey)return;b.tab(a.shiftKey?-1:1,a);break;case c.UP_ARROW:case c.DOWN_ARROW:if(e)return;b.currentArea().move(a.keyCode==c.UP_ARROW?-1:1,0,a);break;case c.LEFT_ARROW:case c.RIGHT_ARROW:if(e)return;var f=a.keyCode==c.LEFT_ARROW?1:-1;d._isBodyLtr()&&(f*=-1),b.currentArea().move(0,f,a);break;case c.F10:this.menus&&a.shiftKey&&this.onRowContextMenu(a);break;default:b.currentArea().keydown(a)}}},domouseup:function(a){a.cellNode?this.onMouseUp(a):this.onRowSelectorMouseUp(a)},domousedown:function(a){a.cellNode||this.onRowSelectorMouseDown(a)},onMouseUp:function(a){this[-1==a.rowIndex?"onHeaderCellMouseUp":"onCellMouseUp"](a)},onCellMouseDown:function(a){d.addClass(a.cellNode,this.cellActiveClass),d.addClass(a.rowNode,this.rowActiveClass)},onCellMouseUp:function(a){d.removeClass(a.cellNode,this.cellActiveClass),d.removeClass(a.rowNode,this.rowActiveClass)},onCellClick:function(a){this._events.onCellClick.call(this,a),this.focus.contentMouseEvent(a)},onCellDblClick:function(a){this.pluginMgr.isFixedCell(a.cell)||(!(this._click.length>1)||this._click[0]&&this._click[1]||(this._click[0]=this._click[1]=a),this._events.onCellDblClick.call(this,a))},onRowClick:function(a){this.edit.rowClick(a),a.cell&&this.plugin("indirectSelection")||this.selection.clickSelectEvent(a)},onRowContextMenu:function(a){!this.edit.isEditing()&&this.menus&&this.showMenu(a)},onSelectedRegionContextMenu:function(a){this.selectedRegionMenu&&(this.selectedRegionMenu._openMyself({target:a.target,coords:a.keyCode!==c.F10&&"pageX"in a?{x:a.pageX,y:a.pageY}:null}),e.stop(a))},onHeaderCellMouseOut:function(a){a.cellNode&&(d.removeClass(a.cellNode,this.cellOverClass),d.removeClass(a.cellNode,this.headerCellActiveClass))},onHeaderCellMouseDown:function(a){a.cellNode&&d.addClass(a.cellNode,this.headerCellActiveClass)},onHeaderCellMouseUp:function(a){a.cellNode&&d.removeClass(a.cellNode,this.headerCellActiveClass)},onHeaderCellClick:function(a){this.focus.currentArea("header"),a.cell.isRowSelector||this._events.onHeaderCellClick.call(this,a),this.focus.headerMouseEvent(a)},onRowSelectorMouseDown:function(a){this.focus.focusArea("rowHeader",a)},onRowSelectorMouseUp:function(a){},onMouseUpRow:function(a){-1!=a.rowIndex&&this.onRowMouseUp(a)},onRowMouseUp:function(a){}})})},"dojox/grid/enhanced/_FocusManager":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/_base/html","dojo/keys","dijit/a11y","dijit/focus","../_FocusManager"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=c("dojox.grid.enhanced._FocusArea",null,{constructor:function(a,c){this._fm=c,this._evtStack=[a.name];var d=function(){return!0};a.onFocus=a.onFocus||d,a.onBlur=a.onBlur||d,a.onMove=a.onMove||d,a.onKeyUp=a.onKeyUp||d,a.onKeyDown=a.onKeyDown||d,b.mixin(this,a)},move:function(a,b,c){if(this.name){var d,e=this._evtStack.length;for(d=e-1;d>=0;--d)if(!1===this._fm._areas[this._evtStack[d]].onMove(a,b,c))return!1}return!0},_onKeyEvent:function(a,b){if(this.name){var c,d=this._evtStack.length;for(c=d-1;c>=0;--c)if(!1===this._fm._areas[this._evtStack[c]][b](a,!1))return!1;for(c=0;c<d;++c)if(!1===this._fm._areas[this._evtStack[c]][b](a,!0))return!1}return!0},keydown:function(a){return this._onKeyEvent(a,"onKeyDown")},keyup:function(a){return this._onKeyEvent(a,"onKeyUp")},contentMouseEventPlanner:function(){return 0},headerMouseEventPlanner:function(){return 0}});return c("dojox.grid.enhanced._FocusManager",l,{_stopEvent:function(a){try{a&&a.preventDefault&&f.stop(a)}catch(a){}},constructor:function(a){this.grid=a,this._areas={},this._areaQueue=[],this._contentMouseEventHandlers=[],this._headerMouseEventHandlers=[],this._currentAreaIdx=-1,this._gridBlured=!0,this._connects.push(e.connect(a,"onBlur",this,"_doBlur")),this._connects.push(e.connect(a.scroller,"renderPage",this,"_delayedCellFocus")),this.addArea({name:"header",onFocus:b.hitch(this,this.focusHeader),onBlur:b.hitch(this,this._blurHeader),onMove:b.hitch(this,this._navHeader),getRegions:b.hitch(this,this._findHeaderCells),onRegionFocus:b.hitch(this,this.doColHeaderFocus),onRegionBlur:b.hitch(this,this.doColHeaderBlur),onKeyDown:b.hitch(this,this._onHeaderKeyDown)}),this.addArea({name:"content",onFocus:b.hitch(this,this._focusContent),onBlur:b.hitch(this,this._blurContent),onMove:b.hitch(this,this._navContent),onKeyDown:b.hitch(this,this._onContentKeyDown)}),this.addArea({name:"editableCell",onFocus:b.hitch(this,this._focusEditableCell),onBlur:b.hitch(this,this._blurEditableCell),onKeyDown:b.hitch(this,this._onEditableCellKeyDown),onContentMouseEvent:b.hitch(this,this._onEditableCellMouseEvent),contentMouseEventPlanner:function(a,b){return-1}}),this.placeArea("header"),this.placeArea("content"),this.placeArea("editableCell"),this.placeArea("editableCell","above","content")},destroy:function(){for(var a in this._areas){var b=this._areas[a];d.forEach(b._connects,e.disconnect),b._connects=null,b.uninitialize&&b.uninitialize()}this.inherited(arguments)},addArea:function(a){a.name&&b.isString(a.name)&&(this._areas[a.name]&&d.forEach(a._connects,e.disconnect),this._areas[a.name]=new m(a,this),a.onHeaderMouseEvent&&this._headerMouseEventHandlers.push(a.name),a.onContentMouseEvent&&this._contentMouseEventHandlers.push(a.name))},getArea:function(a){return this._areas[a]},_bindAreaEvents:function(){var a,c,f=this._areas;d.forEach(this._areaQueue,function(g){a=f[g],!a._initialized&&b.isFunction(a.initialize)&&(a.initialize(),a._initialized=!0),a.getRegions&&(a._regions=a.getRegions()||[],d.forEach(a._connects||[],e.disconnect),a._connects=[],d.forEach(a._regions,function(b){a.onRegionFocus&&(c=e.connect(b,"onfocus",a.onRegionFocus),a._connects.push(c)),a.onRegionBlur&&(c=e.connect(b,"onblur",a.onRegionBlur),a._connects.push(c))}))})},removeArea:function(a){var b=this._areas[a];if(b){this.ignoreArea(a);var c=d.indexOf(this._contentMouseEventHandlers,a);c>=0&&this._contentMouseEventHandlers.splice(c,1),c=d.indexOf(this._headerMouseEventHandlers,a),c>=0&&this._headerMouseEventHandlers.splice(c,1),d.forEach(b._connects,e.disconnect),b.uninitialize&&b.uninitialize(),delete this._areas[a]}},currentArea:function(a,c){var e,f=this._currentAreaIdx;return b.isString(a)&&(e=d.indexOf(this._areaQueue,a))>=0?(f!=e&&(this.tabbingOut=!1,c&&f>=0&&f<this._areaQueue.length&&this._areas[this._areaQueue[f]].onBlur(),this._currentAreaIdx=e),null):f<0||f>=this._areaQueue.length?new m({},this):this._areas[this._areaQueue[this._currentAreaIdx]]},placeArea:function(a,b,c){if(this._areas[a]){var e=d.indexOf(this._areaQueue,c);switch(b){case"after":e>=0&&++e;case"before":if(e>=0){this._areaQueue.splice(e,0,a);break}default:this._areaQueue.push(a);break;case"above":var f=!0;case"below":var g=this._areas[c];g&&(f?g._evtStack.push(a):g._evtStack.splice(0,0,a))}}},ignoreArea:function(a){this._areaQueue=d.filter(this._areaQueue,function(b){return b!=a})},focusArea:function(a,c){var e;(e="number"==typeof a?a<0?this._areaQueue.length+a:a:d.indexOf(this._areaQueue,b.isString(a)?a:a&&a.name))<0&&(e=0);var f=e-this._currentAreaIdx;this._gridBlured=!1,f?this.tab(f,c):this.currentArea().onFocus(c,f)},tab:function(a,c){if(this._gridBlured=!1,this.tabbingOut=!1,0!==a){var e=this._currentAreaIdx,f=a>0?1:-1;if(e<0||e>=this._areaQueue.length)e=this._currentAreaIdx+=a;else{var g=this._areas[this._areaQueue[e]].onBlur(c,a);!0===g?e=this._currentAreaIdx+=a:b.isString(g)&&this._areas[g]&&(e=this._currentAreaIdx=d.indexOf(this._areaQueue,g))}for(;e>=0&&e<this._areaQueue.length;e+=f)if(this._currentAreaIdx=e,this._areaQueue[e]&&this._areas[this._areaQueue[e]].onFocus(c,a))return;this.tabbingOut=!0,a<0?(this._currentAreaIdx=-1,k.focus(this.grid.domNode)):(this._currentAreaIdx=this._areaQueue.length,k.focus(this.grid.lastFocusNode))}},_onMouseEvent:function(a,b){for(var c=a.toLowerCase(),e=this["_"+c+"MouseEventHandlers"],f=d.map(e,function(a){return{area:a,idx:this._areas[a][c+"MouseEventPlanner"](b,e)}},this).sort(function(a,b){return b.idx-a.idx}),g=d.map(f,function(a){return f.area}),h=f.length;--h>=0;)if(!1===this._areas[f[h].area]["on"+a+"MouseEvent"](b,g))return},contentMouseEvent:function(a){this._onMouseEvent("Content",a)},headerMouseEvent:function(a){this._onMouseEvent("Header",a)},initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0],this._bindAreaEvents()},isNavHeader:function(){return"header"==this._areaQueue[this._currentAreaIdx]},previousKey:function(a){this.tab(-1,a)},nextKey:function(a){this.tab(1,a)},setFocusCell:function(a,b){a&&(this.currentArea(this.grid.edit.isEditing()?"editableCell":"content",!0),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=b,this._focusifyCellNode(!0)),this.grid.onCellFocus(this.cell,this.rowIndex)},doFocus:function(a){a&&a.target==a.currentTarget&&!this.tabbingOut?this._gridBlured&&(this._gridBlured=!1,this._currentAreaIdx<0||this._currentAreaIdx>=this._areaQueue.length?this.focusArea(0,a):this.focusArea(this._currentAreaIdx,a)):this.tabbingOut=!1,f.stop(a)},_doBlur:function(){this._gridBlured=!0},doLastNodeFocus:function(a){this.tabbingOut?this.tabbingOut=!1:this.focusArea(-1,a)},_delayedHeaderFocus:function(){this.isNavHeader()&&!g("ie")&&this.focusHeader()},_delayedCellFocus:function(){},_changeMenuBindNode:function(a,b){var c=this.grid.headerMenu;c&&this._contextMenuBindNode==a&&(c.unBindDomNode(a),c.bindDomNode(b),this._contextMenuBindNode=b)},focusHeader:function(a,b){var c=!1;return this.inherited(arguments),this._colHeadNode&&"none"!=h.style(this._colHeadNode,"display")&&(k.focus(this._colHeadNode),this._stopEvent(a),c=!0),c},_blurHeader:function(a,b){return this._colHeadNode&&h.removeClass(this._colHeadNode,this.focusClass),h.removeAttr(this.grid.domNode,"aria-activedescendant"),this._changeMenuBindNode(this.grid.domNode,this.grid.viewsHeaderNode),this._colHeadNode=this._colHeadFocusIdx=null,!0},_navHeader:function(a,b,c){var e=b<0?-1:1,f=d.indexOf(this._findHeaderCells(),this._colHeadNode);if(f>=0&&c.shiftKey&&c.ctrlKey)return void this.colSizeAdjust(c,f,5*e);this.move(a,b)},_onHeaderKeyDown:function(a,b){if(b){var c=i;switch(a.keyCode){case c.ENTER:case c.SPACE:var d=this.getHeaderIndex();d>=0&&!this.grid.pluginMgr.isFixedCell(a.cell)&&(this.grid.setSortIndex(d,null,a),f.stop(a))}}return!0},_setActiveColHeader:function(){this.inherited(arguments),k.focus(this._colHeadNode)},findAndFocusGridCell:function(){this._focusContent()},_focusContent:function(a,b){var c=!0,d=0===this.grid.rowCount;if(this.isNoFocusCell()&&!d){for(var e=0,f=this.grid.getCell(0);f&&f.hidden;f=this.grid.getCell(++e));this.setFocusIndex(0,f?e:0)}else this.cell&&!d?this.focusView&&!this.focusView.rowNodes[this.rowIndex]?(this.grid.scrollToRow(this.rowIndex),this.focusGrid()):this.setFocusIndex(this.rowIndex,this.cell.index):c=!1;return c&&this._stopEvent(a),c},_blurContent:function(a,b){return this._focusifyCellNode(!1),!0},_navContent:function(a,b,c){0===this.rowIndex&&a<0||this.rowIndex===this.grid.rowCount-1&&a>0||(this._colHeadNode=null,this.move(a,b,c),c&&f.stop(c))},_onContentKeyDown:function(a,b){if(b){var c=i,d=this.grid.scroller;switch(a.keyCode){case c.ENTER:case c.SPACE:var g=this.grid;if(g.indirectSelection)break;g.selection.clickSelect(this.rowIndex,e.isCopyKey(a),a.shiftKey),g.onRowClick(a),f.stop(a);break;case c.PAGE_UP:0!==this.rowIndex&&(this.rowIndex!=d.firstVisibleRow+1?this._navContent(d.firstVisibleRow-this.rowIndex,0):(this.grid.setScrollTop(d.findScrollTop(this.rowIndex-1)),this._navContent(d.firstVisibleRow-d.lastVisibleRow+1,0)),f.stop(a));break;case c.PAGE_DOWN:this.rowIndex+1!=this.grid.rowCount&&(f.stop(a),this.rowIndex!=d.lastVisibleRow-1?this._navContent(d.lastVisibleRow-this.rowIndex-1,0):(this.grid.setScrollTop(d.findScrollTop(this.rowIndex+1)),this._navContent(d.lastVisibleRow-d.firstVisibleRow-1,0)),f.stop(a))}}return!0},_blurFromEditableCell:!1,_isNavigating:!1,_navElems:null,_focusEditableCell:function(a,b){var c=!1;return this._isNavigating?c=!0:this.grid.edit.isEditing()&&this.cell&&(!this._blurFromEditableCell&&this._blurEditableCell(a,b)||(this.setFocusIndex(this.rowIndex,this.cell.index),c=!0),this._stopEvent(a)),c},_applyEditableCell:function(){try{this.grid.edit.apply()}catch(a){}},_blurEditableCell:function(a,b){if(this._blurFromEditableCell=!1,this._isNavigating){var c=!0;if(a){var d=this._navElems,e=d.lowest||d.first,f=d.last||d.highest||e;c=(g("ie")?a.srcElement:a.target)==(b>0?f:e)}return!!c&&(this._isNavigating=!1,h.setSelectable(this.cell.getNode(this.rowIndex),!1),"content")}if(this.grid.edit.isEditing()&&this.cell){if(!b||"number"!=typeof b)return!1;for(var i,j=b>0?1:-1,k=this.grid.layout.cellCount,l=this.cell.index+j;l>=0&&l<k;l+=j)if(i=this.grid.getCell(l),i.editable)return this.cell=i,this._blurFromEditableCell=!0,!1;if((this.rowIndex>0||1==j)&&(this.rowIndex<this.grid.rowCount||-1==j)){for(this.rowIndex+=j,l=j>0?0:k-1;l>=0&&l<k;l+=j)if(i=this.grid.getCell(l),i.editable){this.cell=i;break}return this._applyEditableCell(),"content"}}return!0},_initNavigatableElems:function(){this._navElems=j._getTabNavigable(this.cell.getNode(this.rowIndex))},_onEditableCellKeyDown:function(a,b){var c=i,d=this.grid,e=d.edit,g=!1,j=!0;switch(a.keyCode){case c.ENTER:b&&e.isEditing()&&(this._applyEditableCell(),g=!0,f.stop(a));case c.SPACE:if(!b&&this._isNavigating){j=!1;break}if(b){if(!this.cell.editable&&this.cell.navigatable){this._initNavigatableElems();var l=this._navElems.lowest||this._navElems.first;if(l){this._isNavigating=!0,h.setSelectable(this.cell.getNode(this.rowIndex),!0),k.focus(l),f.stop(a),this.currentArea("editableCell",!0);break}}g||e.isEditing()||d.pluginMgr.isFixedCell(this.cell)||e.setEditCell(this.cell,this.rowIndex),g?this.currentArea("content",!0):this.cell.editable&&d.canEdit()&&this.currentArea("editableCell",!0)}break;case c.PAGE_UP:case c.PAGE_DOWN:!b&&e.isEditing()&&(j=!1);break;case c.ESCAPE:b||(e.cancel(),this.currentArea("content",!0))}return j},_onEditableCellMouseEvent:function(a){if("click"==a.type){var b=this.cell||a.cell;if(b&&!b.editable&&b.navigatable){if(this._initNavigatableElems(),this._navElems.lowest||this._navElems.first){var c=g("ie")?a.srcElement:a.target;if(c!=b.getNode(a.rowIndex))return this._isNavigating=!0,this.focusArea("editableCell",a),h.setSelectable(b.getNode(a.rowIndex),!0),k.focus(c),!1}}else if(this.grid.singleClickEdit)return this.currentArea("editableCell"),!1}return!0}})})},"dojox/grid/enhanced/plugins/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","../../_SelectionPreserver"],function(a,b,c,d){return a("dojox.grid.enhanced.plugins._SelectionPreserver",d,{constructor:function(a){var d=this.grid;d.onSelectedById=this.onSelectedById,this._oldClearData=d._clearData;var e=this;d._clearData=function(){e._updateMapping(!d._noInternalMapping),e._trustSelection=[],e._oldClearData.apply(d,arguments)},this._connects.push(c.connect(a,"selectRange",b.hitch(this,"_updateMapping",!0,!0,!1)),c.connect(a,"deselectRange",b.hitch(this,"_updateMapping",!0,!1,!1)),c.connect(a,"deselectAll",b.hitch(this,"_updateMapping",!0,!1,!0)))},destroy:function(){this.inherited(arguments),this.grid._clearData=this._oldClearData},reset:function(){this.inherited(arguments),this._idMap=[],this._trustSelection=[],this._defaultSelected=!1},_reSelectById:function(a,b){var c=this.selection,d=this.grid;if(a&&d._hasIdentity){var e=d.store.getIdentity(a);void 0===this._selectedById[e]?this._trustSelection[b]||(c.selected[b]=this._defaultSelected):c.selected[b]=this._selectedById[e],this._idMap.push(e),d.onSelectedById(e,b,c.selected[b])}},_selectById:function(a,b){this.inherited(arguments)||(this._trustSelection[b]=!0)},onSelectedById:function(a,b,c){},_updateMapping:function(a,b,c,d,e){var f,g,h=this.selection,i=this.grid,j=0,k=0;for(f=i.rowCount-1;f>=0;--f)i._by_idx[f]?(g=i._by_idx[f].idty)&&(a||void 0===this._selectedById[g])&&(this._selectedById[g]=!!h.selected[f]):(++k,j+=h.selected[f]?1:-1);if(k&&(this._defaultSelected=j>0),c||void 0===d||void 0===e||(c=!i.usingPagination&&Math.abs(e-d+1)===i.rowCount),c&&(!i.usingPagination||"single"===i.selectionMode))for(f=this._idMap.length-1;f>=0;--f)this._selectedById[this._idMap[f]]=b}})})},"dojox/mdnd/AreaManager":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/window","dojo/_base/array","dojo/_base/sniff","dojo/_base/lang","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-geometry","dojo/dom-construct","dijit/registry","dijit/_Widget","./Moveable"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b("dojox.mdnd.AreaManager",null,{autoRefresh:!0,areaClass:"dojoxDndArea",dragHandleClass:"dojoxDragHandle",constructor:function(){this._areaList=[],this.resizeHandler=c.connect(a.global,"onresize",this,function(){this._dropMode.updateAreas(this._areaList)}),this._oldIndexArea=this._currentIndexArea=this._oldDropIndex=this._currentDropIndex=this._sourceIndexArea=this._sourceDropIndex=-1},init:function(){this.registerByClass()},registerByNode:function(a,b){var d=this._getIndexArea(a);if(a&&-1==d){var f=a.getAttribute("accept"),g=f?f.split(/\s*,\s*/):["text"],h={node:a,items:[],coords:{},margin:null,accept:g,initItems:!1};e.forEach(this._getChildren(a),function(a){this._setMarginArea(h,a),h.items.push(this._addMoveableItem(a))},this),this._areaList=this._dropMode.addArea(this._areaList,h),b||this._dropMode.updateAreas(this._areaList),c.publish("/dojox/mdnd/manager/register",[a])}},registerByClass:function(){h("."+this.areaClass).forEach(function(a){this.registerByNode(a,!0)},this),this._dropMode.updateAreas(this._areaList)},unregister:function(a){var b=this._getIndexArea(a);return-1!=b&&(e.forEach(this._areaList[b].items,function(a){this._deleteMoveableItem(a)},this),this._areaList.splice(b,1),this._dropMode.updateAreas(this._areaList),!0)},_addMoveableItem:function(a){a.setAttribute("tabIndex","0");var b=this._searchDragHandle(a),d=new o({handle:b,skip:!0},a);j.add(b||a,"dragHandle");var e=a.getAttribute("dndType"),f={item:d,type:e?e.split(/\s*,\s*/):["text"],handlers:[c.connect(d,"onDragStart",this,"onDragStart")]};if(m&&m.byNode){var g=m.byNode(a);g&&(f.type=g.dndType?g.dndType.split(/\s*,\s*/):["text"],f.handlers.push(c.connect(g,"uninitialize",this,function(){this.removeDragItem(a.parentNode,d.node)})))}return f},_deleteMoveableItem:function(a){e.forEach(a.handlers,function(a){c.disconnect(a)});var b=a.item.node,d=this._searchDragHandle(b);j.remove(d||b,"dragHandle"),a.item.destroy()},_getIndexArea:function(a){if(a)for(var b=0;b<this._areaList.length;b++)if(this._areaList[b].node===a)return b;return-1},_searchDragHandle:function(a){if(a){var b=this.dragHandleClass.split(" "),c=b.length,d="";return e.forEach(b,function(a,b){d+="."+a,b!=c-1&&(d+=", ")}),h(d,a)[0]}},addDragItem:function(a,b,c,d){var e=!0
;if(d||(e=a&&b&&(null===b.parentNode||b.parentNode&&1!==b.parentNode.nodeType)),e){var f=this._getIndexArea(a);if(-1!==f){var g=this._addMoveableItem(b),h=this._areaList[f].items;if(0<=c&&c<h.length){var i=h.slice(0,c),j=h.slice(c,h.length);i[i.length]=g,this._areaList[f].items=i.concat(j),a.insertBefore(b,h[c].item.node)}else this._areaList[f].items.push(g),a.appendChild(b);return this._setMarginArea(this._areaList[f],b),this._areaList[f].initItems=!1,!0}}return!1},removeDragItem:function(a,b){var c=this._getIndexArea(a);if(a&&-1!==c)for(var d=this._areaList[c].items,e=0;e<d.length;e++)if(d[e].item.node===b)return this._deleteMoveableItem(d[e]),d.splice(e,1),a.removeChild(b);return null},_getChildren:function(a){var b=[];return e.forEach(a.childNodes,function(a){if(1==a.nodeType)if(m&&m.byNode){var c=m.byNode(a);c?c.dragRestriction||b.push(a):b.push(a)}else b.push(a)}),b},_setMarginArea:function(a,b){a&&null===a.margin&&b&&(a.margin=k.getMarginExtents(b))},findCurrentIndexArea:function(a,b){return this._oldIndexArea=this._currentIndexArea,this._currentIndexArea=this._dropMode.getTargetArea(this._areaList,a,this._currentIndexArea),this._currentIndexArea!=this._oldIndexArea&&(-1!=this._oldIndexArea&&this.onDragExit(a,b),-1!=this._currentIndexArea&&this.onDragEnter(a,b)),this._currentIndexArea},_isAccepted:function(a,b){this._accept=!1;for(var c=0;c<b.length;++c)for(var d=0;d<a.length;++d)if(a[d]==b[c]){this._accept=!0;break}},onDragStart:function(b,d,e){this.autoRefresh&&this._dropMode.updateAreas(this._areaList);var h=f("webkit")?a.body():a.body().parentNode;this._cover||(this._cover=l.create("div",{class:"dndCover"}),this._cover2=g.clone(this._cover),j.add(this._cover2,"dndCover2"));var i=h.scrollHeight+"px";this._cover.style.height=this._cover2.style.height=i,a.body().appendChild(this._cover),a.body().appendChild(this._cover2),this._dragStartHandler=c.connect(b.ownerDocument,"ondragstart",a,"stopEvent"),this._sourceIndexArea=this._lastValidIndexArea=this._currentIndexArea=this._getIndexArea(b.parentNode);for(var k=this._areaList[this._sourceIndexArea],m=k.items,n=0;n<m.length;n++)if(m[n].item.node==b){this._dragItem=m[n],this._dragItem.handlers.push(c.connect(this._dragItem.item,"onDrag",this,"onDrag")),this._dragItem.handlers.push(c.connect(this._dragItem.item,"onDragEnd",this,"onDrop")),m.splice(n,1),this._currentDropIndex=this._sourceDropIndex=n;break}var o=null;this._sourceDropIndex!==k.items.length&&(o=k.items[this._sourceDropIndex].item.node),f("ie")>7&&(this._eventsIE7=[c.connect(this._cover,"onmouseover",a,"stopEvent"),c.connect(this._cover,"onmouseout",a,"stopEvent"),c.connect(this._cover,"onmouseenter",a,"stopEvent"),c.connect(this._cover,"onmouseleave",a,"stopEvent")]);var p=b.style;p.left=d.x+"px",p.top=d.y+"px","relative"!=p.position&&""!=p.position||(p.position="absolute"),this._cover.appendChild(b),this._dropIndicator.place(k.node,o,e),j.add(b,"dragNode"),this._accept=!0,c.publish("/dojox/mdnd/drag/start",[b,k,this._sourceDropIndex])},onDragEnter:function(a,b){this._currentIndexArea===this._sourceIndexArea?this._accept=!0:this._isAccepted(this._dragItem.type,this._areaList[this._currentIndexArea].accept)},onDragExit:function(a,b){this._accept=!1},onDrag:function(a,b,c,d){var e=this._dropMode.getDragPoint(b,c,d);this.findCurrentIndexArea(e,c),-1!==this._currentIndexArea&&this._accept&&this.placeDropIndicator(e,c)},placeDropIndicator:function(a,b){this._oldDropIndex=this._currentDropIndex;var c=this._areaList[this._currentIndexArea];return c.initItems||this._dropMode.initItems(c),this._currentDropIndex=this._dropMode.getDropIndex(c,a),this._currentIndexArea===this._oldIndexArea&&this._oldDropIndex===this._currentDropIndex||this._placeDropIndicator(b),this._currentDropIndex},_placeDropIndicator:function(a){var b=this._areaList[this._lastValidIndexArea],c=this._areaList[this._currentIndexArea];this._dropMode.refreshItems(b,this._oldDropIndex,a,!1);var d=null;-1!=this._currentDropIndex&&(d=c.items[this._currentDropIndex].item.node),this._dropIndicator.place(c.node,d),this._lastValidIndexArea=this._currentIndexArea,this._dropMode.refreshItems(c,this._currentDropIndex,a,!0)},onDropCancel:function(){if(!this._accept){var a=this._getIndexArea(this._dropIndicator.node.parentNode);this._currentIndexArea=-1!=a?a:0}},onDrop:function(b){this.onDropCancel();var d=this._areaList[this._currentIndexArea];j.remove(b,"dragNode");var f=b.style;f.position="relative",f.left="0",f.top="0",f.width="auto",d.node==this._dropIndicator.node.parentNode?d.node.insertBefore(b,this._dropIndicator.node):(d.node.appendChild(b),this._currentDropIndex=d.items.length);var g=this._currentDropIndex;-1==g&&(g=d.items.length);var h=d.items,i=h.slice(0,g),k=h.slice(g,h.length);i[i.length]=this._dragItem,d.items=i.concat(k),this._setMarginArea(d,b),e.forEach(this._areaList,function(a){a.initItems=!1}),c.disconnect(this._dragItem.handlers.pop()),c.disconnect(this._dragItem.handlers.pop()),this._resetAfterDrop(),this._cover&&(a.body().removeChild(this._cover),a.body().removeChild(this._cover2)),c.publish("/dojox/mdnd/drop",[b,d,g])},_resetAfterDrop:function(){this._accept=!1,this._dragItem=null,this._currentDropIndex=-1,this._currentIndexArea=-1,this._oldDropIndex=-1,this._sourceIndexArea=-1,this._sourceDropIndex=-1,this._dropIndicator.remove(),this._dragStartHandler&&c.disconnect(this._dragStartHandler),f("ie")>7&&e.forEach(this._eventsIE7,c.disconnect)},destroy:function(){for(;this._areaList.length>0;)if(!this.unregister(this._areaList[0].node))throw new Error("Error while destroying AreaManager");c.disconnect(this.resizeHandler),this._dropIndicator.destroy(),this._dropMode.destroy(),dojox.mdnd.autoScroll&&dojox.mdnd.autoScroll.destroy(),this.refreshListener&&c.unsubscribe(this.refreshListener),this._cover&&(l.destroy(this._cover),l.destroy(this._cover2),delete this._cover,delete this._cover2)}});return n&&g.extend(n,{dndType:"text"}),dojox.mdnd._areaManager=null,dojox.mdnd.areaManager=function(){return dojox.mdnd._areaManager||(dojox.mdnd._areaManager=new dojox.mdnd.AreaManager),dojox.mdnd._areaManager},p})},"dojox/mdnd/Moveable":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/_base/window"],function(a,b,c,d,e,f,g,h,i){return b("dojox.mdnd.Moveable",null,{handle:null,skip:!0,dragDistance:3,constructor:function(a,b){this.node=g.byId(b),this.d=this.node.ownerDocument,a||(a={}),this.handle=a.handle?g.byId(a.handle):null,this.handle||(this.handle=this.node),this.skip=a.skip,this.events=[d.connect(this.handle,"onmousedown",this,"onMouseDown")],dojox.mdnd.autoScroll&&(this.autoScroll=dojox.mdnd.autoScroll)},isFormElement:function(a){var b=a.target;return 3==b.nodeType&&(b=b.parentNode)," a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")>=0},onMouseDown:function(b){if(!this._isDragging){1==(b.which||b.button)&&(this.skip&&this.isFormElement(b)||(this.autoScroll&&(this.autoScroll.setAutoScrollNode(this.node),this.autoScroll.setAutoScrollMaxPage()),this.events.push(d.connect(this.d,"onmouseup",this,"onMouseUp")),this.events.push(d.connect(this.d,"onmousemove",this,"onFirstMove")),this._selectStart=d.connect(a.body(),"onselectstart",e.stop),this._firstX=b.clientX,this._firstY=b.clientY,e.stop(b)))}},onFirstMove:function(a){e.stop(a),(this._firstX-a.clientX)*(this._firstX-a.clientX)+(this._firstY-a.clientY)*(this._firstY-a.clientY)>this.dragDistance*this.dragDistance&&(this._isDragging=!0,d.disconnect(this.events.pop()),i.set(this.node,"width",h.getContentBox(this.node).w+"px"),this.initOffsetDrag(a),this.events.push(d.connect(this.d,"onmousemove",this,"onMove")))},initOffsetDrag:function(a){this.offsetDrag={l:a.pageX,t:a.pageY};var b=(this.node.style,h.position(this.node,!0));this.offsetDrag.l=b.x-this.offsetDrag.l,this.offsetDrag.t=b.y-this.offsetDrag.t;var c={x:b.x,y:b.y};this.size={w:b.w,h:b.h},this.onDragStart(this.node,c,this.size)},onMove:function(a){if(e.stop(a),!(8==f("ie")&&new Date-this.date<20)){this.autoScroll&&this.autoScroll.checkAutoScroll(a);var b={x:this.offsetDrag.l+a.pageX,y:this.offsetDrag.t+a.pageY},c=this.node.style;c.left=b.x+"px",c.top=b.y+"px",this.onDrag(this.node,b,this.size,{x:a.pageX,y:a.pageY}),8==f("ie")&&(this.date=new Date)}},onMouseUp:function(a){this._isDragging&&(e.stop(a),this._isDragging=!1,this.autoScroll&&this.autoScroll.stopAutoScroll(),delete this.onMove,this.onDragEnd(this.node),this.node.focus()),d.disconnect(this.events.pop()),d.disconnect(this.events.pop())},onDragStart:function(a,b,c){},onDragEnd:function(a){},onDrag:function(a,b,c,d){},destroy:function(){c.forEach(this.events,d.disconnect),this.events=this.node=null}})})},"dojox/mdnd/DropIndicator":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","./AreaManager"],function(a,b,c,d){var e=b("dojox.mdnd.DropIndicator",null,{node:null,constructor:function(){var a=document.createElement("div"),b=document.createElement("div");a.appendChild(b),c.add(a,"dropIndicator"),this.node=a},place:function(a,b,c){c&&(this.node.style.height=c.h+"px");try{return b?a.insertBefore(this.node,b):a.appendChild(this.node),this.node}catch(a){return null}},remove:function(){this.node&&(this.node.style.height="",this.node.parentNode&&this.node.parentNode.removeChild(this.node))},destroy:function(){this.node&&(this.node.parentNode&&this.node.parentNode.removeChild(this.node),d.destroy(this.node),delete this.node)}});return dojox.mdnd.areaManager()._dropIndicator=new dojox.mdnd.DropIndicator,e})},"dojox/mdnd/dropMode/DefaultDropMode":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojox/mdnd/AreaManager"],function(a,b,c,d){var e=b("dojox.mdnd.dropMode.DefaultDropMode",null,{_oldXPoint:null,_oldYPoint:null,_oldBehaviour:"up",addArea:function(a,b){var c=a.length,e=d.position(b.node,!0);if(b.coords={x:e.x,y:e.y},0==c)a.push(b);else{for(var f=b.coords.x,g=0;g<c;g++)if(f<a[g].coords.x){for(var h=c-1;h>=g;h--)a[h+1]=a[h];a[g]=b;break}g==c&&a.push(b)}return a},updateAreas:function(a){var b=a.length;if(b>1)for(var c,d,e=0;e<b;e++){var f,g=a[e];g.coords.x1=-1,g.coords.x2=-1,0==e?(f=a[e+1],this._updateArea(g),this._updateArea(f),c=g.coords.x+g.node.offsetWidth,d=f.coords.x,g.coords.x2=c+(d-c)/2):e==b-1?g.coords.x1=a[e-1].coords.x2:(f=a[e+1],this._updateArea(f),c=g.coords.x+g.node.offsetWidth,d=f.coords.x,g.coords.x1=a[e-1].coords.x2,g.coords.x2=c+(d-c)/2)}},_updateArea:function(a){var b=d.position(a.node,!0);a.coords.x=b.x,a.coords.y=b.y},initItems:function(a){c.forEach(a.items,function(a){var b=a.item.node,c=d.position(b,!0),e=c.y+c.h/2;a.y=e}),a.initItems=!0},refreshItems:function(a,b,c,d){if(-1!=b&&a&&c&&c.h){var e=c.h;a.margin&&(e+=a.margin.t);for(var f=a.items.length,g=b;g<f;g++){var h=a.items[g];d?h.y+=e:h.y-=e}}},getDragPoint:function(a,b,c){var d=a.y;return this._oldYPoint&&(d>this._oldYPoint?(this._oldBehaviour="down",d+=b.h):d<=this._oldYPoint&&(this._oldBehaviour="up")),this._oldYPoint=d,{x:a.x+b.w/2,y:d}},getTargetArea:function(a,b,c){var d=0,e=b.x,f=a.length;if(f>1){var g=0,h="right",i=!1;if(-1==c||arguments.length<3?i=!0:this._checkInterval(a,c,e)?d=c:(this._oldXPoint<e?g=c+1:(g=c-1,f=0,h="left"),i=!0),i)if("right"===h){for(var j=g;j<f;j++)if(this._checkInterval(a,j,e)){d=j;break}}else for(var j=g;j>=f;j--)if(this._checkInterval(a,j,e)){d=j;break}}return this._oldXPoint=e,d},_checkInterval:function(a,b,c){var d=a[b].coords;if(-1==d.x1){if(c<=d.x2)return!0}else if(-1==d.x2){if(c>d.x1)return!0}else if(d.x1<c&&c<=d.x2)return!0;return!1},getDropIndex:function(a,b){var c=a.items.length,d=(a.coords,b.y);if(c>0)for(var e=0;e<c;e++){if(d<a.items[e].y)return e;if(e==c-1)return-1}return-1},destroy:function(){}});return dojox.mdnd.areaManager()._dropMode=new dojox.mdnd.dropMode.DefaultDropMode,e})},"dojox/widget/Standby":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a.experimental("dojox.widget.Standby"),b("dojox.widget.Standby",[o,p],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'<div><div style="display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint="_underlayNode"></div><img src="${image}" style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint="_imageNode"><div style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint="_textNode"></div></div>',_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(a){if(!this._started){if("string"==typeof this.target){var b=q.byId(this.target);this.target=b?b.domNode:f.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text),"image"===this.centerIndicator?(this._centerNode=this._imageNode,g.set(this._imageNode,"src",this.image),g.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode,j.set(this._underlayNode,{display:"none",backgroundColor:this.color}),j.set(this._centerNode,"display","none"),this.connect(this._underlayNode,"onclick","_ignore"),this.domNode.parentNode&&this.domNode.parentNode!=l.body()&&l.body().appendChild(this.domNode),7==e("ie")&&(this._ieFixNode=h.create("div"),j.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),l.body().appendChild(this._ieFixNode)),this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){this._displayed&&(this._anim&&(this._anim.stop(),delete this._anim),this._size(),this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null))},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1,this._resizeCheck&&clearInterval(this._resizeCheck),j.set(this._centerNode,"display","none"),j.set(this._underlayNode,"display","none"),7==e("ie")&&this._ieFixNode&&(l.body().removeChild(this._ieFixNode),delete this._ieFixNode),this._anim&&(this._anim.stop(),delete this._anim),this.target=null,this._imageNode=null,this._textNode=null,this._centerNode=null,this.inherited(arguments)},_size:function(){if(this._displayed){var a=g.get(l.body(),"dir");a&&(a=a.toLowerCase());var b,c=this._scrollerWidths(),d=this.target,f=j.get(this._centerNode,"display");j.set(this._centerNode,"display","block");var h=i.position(d,!0);d!==l.body()&&d!==l.doc||(h=k.getBox(),h.x=h.l,h.y=h.t);var m=i.getMarginBox(this._centerNode);j.set(this._centerNode,"display",f),this._ieFixNode&&(b=-this._ieFixNode.offsetTop/1e3,h.x=Math.floor((h.x+.9)/b),h.y=Math.floor((h.y+.9)/b),h.w=Math.floor((h.w+.9)/b),h.h=Math.floor((h.h+.9)/b));var n=j.get(d,"zIndex"),o=n,p=n;if("auto"===this.zIndex)if("auto"!=n)o=parseInt(o,10)+1,p=parseInt(p,10)+2;else{var q=d;if(q&&q!==l.body()&&q!==l.doc){q=d.parentNode;for(var r=-1e5;q&&q!==l.body();)if((n=j.get(q,"zIndex"))&&"auto"!==n){var s=parseInt(n,10);r<s&&(r=s,o=s+1,p=s+2),q=q.parentNode}else q=q.parentNode}}else o=parseInt(this.zIndex,10)+1,p=parseInt(this.zIndex,10)+2;j.set(this._centerNode,"zIndex",p),j.set(this._underlayNode,"zIndex",o);var t=d.parentNode;if(t&&t!==l.body()&&d!==l.body()&&d!==l.doc){var u=h.h,v=h.w,w=i.position(t,!0);this._ieFixNode&&(b=-this._ieFixNode.offsetTop/1e3,w.x=Math.floor((w.x+.9)/b),w.y=Math.floor((w.y+.9)/b),w.w=Math.floor((w.w+.9)/b),w.h=Math.floor((w.h+.9)/b)),w.w-=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0,w.h-=t.scrollWidth>t.clientWidth&&t.clientWidth>0?c.h:0,"rtl"===a&&(e("opera")?(h.x+=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0,w.x+=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0):e("ie")?w.x+=t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.v:0:e("webkit")),w.w<h.w&&(h.w=h.w-w.w),w.h<h.h&&(h.h=h.h-w.h);var x,y=w.y,z=w.y+w.h,A=h.y,B=h.y+u,C=w.x,D=w.x+w.w,E=h.x,F=h.x+v;if(B>y&&A<y){h.y=w.y,x=y-A;var G=u-x;G<w.h?h.h=G:h.h-=2*(t.scrollWidth>t.clientWidth&&t.clientWidth>0?c.h:0)}else A<z&&B>z?h.h=z-A:(B<=y||A>=z)&&(h.h=0);if(F>C&&E<C){h.x=w.x,x=C-E;var H=v-x;H<w.w?h.w=H:h.w-=2*(t.scrollHeight>t.clientHeight&&t.clientHeight>0?c.w:0)}else E<D&&F>D?h.w=D-E:(F<=C||E>=D)&&(h.w=0)}if(h.h>0&&h.w>0){j.set(this._underlayNode,{display:"block",width:h.w+"px",height:h.h+"px",top:h.y+"px",left:h.x+"px"});var I=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];this._cloneStyles(I),e("ie")||(I=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"],this._cloneStyles(I,this));var J=h.h/2-m.h/2,K=h.w/2-m.w/2;h.h>=m.h&&h.w>=m.w?j.set(this._centerNode,{top:J+h.y+"px",left:K+h.x+"px",display:"block"}):j.set(this._centerNode,"display","none")}else j.set(this._underlayNode,"display","none"),j.set(this._centerNode,"display","none");if(null===this._resizeCheck){var L=this;this._resizeCheck=setInterval(function(){L._size()},100)}}},_cloneStyles:function(a){c.forEach(a,function(a){j.set(this._underlayNode,a,j.get(this.target,a))},this)},_fadeIn:function(){var a=this,b=m.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:a.opacity}}}),c=m.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){a.onShow(),delete a._anim}});this._anim=n.combine([b,c]),this._anim.play()},_fadeOut:function(){var a=this,b=m.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:a.opacity,end:0}},onEnd:function(){j.set(this.node,{display:"none",zIndex:"-1000"})}}),c=m.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){j.set(this.node,{display:"none",zIndex:"-1000"}),a.onHide(),a._enableOverflow(),delete a._anim}});this._anim=n.combine([b,c]),this._anim.play()},_ignore:function(a){a&&d.stop(a)},_scrollerWidths:function(){var a=h.create("div");j.set(a,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var b=h.create("div");j.set(b,{width:"200px",height:"10px"}),a.appendChild(b),l.body().appendChild(a);var c=i.getContentBox(a);j.set(a,"overflow","scroll");var d=i.getContentBox(a);return l.body().removeChild(a),{v:c.w-d.w,h:c.h-d.h}},_setTextAttr:function(a){this._textNode.innerHTML=a,this.text=a},_setColorAttr:function(a){j.set(this._underlayNode,"backgroundColor",a),this.color=a},_setImageTextAttr:function(a){g.set(this._imageNode,"alt",a),this.imageText=a},_setImageAttr:function(a){g.set(this._imageNode,"src",a),this.image=a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a,"image"===a?(this._centerNode=this._imageNode,j.set(this._textNode,"display","none")):(this._centerNode=this._textNode,j.set(this._imageNode,"display","none"))},_disableOverflow:function(){if(this.target===l.body()||this.target===l.doc){this._overflowDisabled=!0;var a=l.body();if(a.style&&a.style.overflow?this._oldOverflow=j.get(a,"overflow"):this._oldOverflow="",e("ie")&&!e("quirks")){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=j.get(a.parentNode,"overflow")}catch(a){this._oldBodyParentOverflow="scroll"}j.set(a.parentNode,"overflow","hidden")}j.set(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=l.body();if(e("ie")&&!e("quirks")&&(a.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow),j.set(a,"overflow",this._oldOverflow),e("webkit")){var b=h.create("div",{style:{height:"2px"}});a.appendChild(b),setTimeout(function(){a.removeChild(b)},0)}delete this._oldOverflow}}})})},"dijit/Toolbar":function(){define(["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(a,b,c,d,e,f,g,h){return c("dijit-legacy-requires")&&e(0,function(){a(["dijit/ToolbarSeparator"])}),b("dijit.Toolbar",[f,h,g],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(h.hitch(this,a,b))}}var u=b("dijit.form._SelectMenu",m,{autoFocus:!0,buildRendering:function(){this.inherited(arguments),this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments),this.own(i(this.domNode,"selectstart",function(a){a.preventDefault(),a.stopPropagation()}))},focus:function(){var b=!1,c=this.parentWidget.value;h.isArray(c)&&(c=c[c.length-1]),c&&a.forEach(this.parentWidget._getChildren(),function(a){a.option&&c===a.option.value&&(b=!0,this.focusChild(a,!1))},this),b||this.inherited(arguments)}}),v=b("dijit.form.Select"+(j("dojo-bidi")?"_NoBidi":""),[k,l,q],{baseClass:"dijitSelect dijitValidationTextBox",templateString:s,_buttonInputDisabled:j("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){if(this.inherited(arguments),this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[a>=0?a:0].value)}this.dropDown=new u({id:this.id+"_menu",parentWidget:this}),d.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var b=h.hitch(this,"_setValueAttr",a),c=new n({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):a.label)||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});return c.focusNode.setAttribute("role","option"),c}return new o({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){var a=r.byNode(a);return a&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(b){if(!0===b)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{a.forEach(this._getChildren(),function(a){a.destroyRecursive()});var c=new n({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(c)}else this._updateSelection();this._isLoaded=!1,this._childrenLoaded=!0,this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments),this._refreshState()},_setValueAttr:function(a){this.inherited(arguments),c.set(this.valueNode,"value",this.get("value")),this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(a){this._set("required",a),this.focusNode.setAttribute("aria-required",a),this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1,this._set("options",a)},_setDisplay:function(a){var b=("text"===this.labelType?(a||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+b+"</span>"},validate:function(a){var b=this.disabled||this.isValid(a);this._set("state",b?"":this._hasBeenBlurred?"Error":"Incomplete"),this.focusNode.setAttribute("aria-invalid",b?"false":"true");var c=b?"":this._missingMsg;return c&&this.focused&&this._hasBeenBlurred?p.show(c,this.domNode,this.tooltipPosition,!this.isLeftToRight()):p.hide(this.domNode),this._set("message",c),b},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments),p.hide(this.domNode),this._refreshState()},postMixInProperties:function(){this.inherited(arguments),this._missingMsg=f.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments),this.own(i(this.domNode,"selectstart",function(a){a.preventDefault(),a.stopPropagation()})),this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[g.LEFT_ARROW],delete a[g.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments),d.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0),this._isLoaded=!0,a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown),p.hide(this.domNode),this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){p.hide(this.domNode),this.inherited(arguments),this.validate(!1)}});return j("dojo-bidi")&&(v=b("dijit.form.Select",v,{_setDisplay:function(a){this.inherited(arguments),this.applyTextDir(this.containerNode)}})),v._Menu=u,v.prototype._onContainerKeydown=t("_onContainerKeydown"),v.prototype._onContainerKeypress=t("_onContainerKeypress"),v})},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return e("dijit.form._FormSelectWidget",m,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(b){var c=this.options||[];return null==b?c:i.isArray(b)?a.map(b,"return this.getOptions(item);",this):(i.isString(b)&&(b={value:b}),i.isObject(b)&&(a.some(c,function(a,c){for(var d in b)if(!(d in a)||a[d]!=b[d])return!1;return b=c,!0})||(b=-1)),b>=0&&b<c.length?c[b]:null)},addOption:function(b){a.forEach(i.isArray(b)?b:[b],function(a){a&&i.isObject(a)&&this.options.push(a)},this),this._loadChildren()},removeOption:function(b){var c=this.getOptions(i.isArray(b)?b:[b]);a.forEach(c,function(b){b&&(this.options=a.filter(this.options,function(a){return a.value!==b.value||a.label!==b.label}),this._removeOptionItem(b))},this),this._loadChildren()},updateOption:function(b){a.forEach(i.isArray(b)?b:[b],function(a){var b,c=this.getOptions({value:a.value});if(c)for(b in a)c[b]=a[b]},this),this._loadChildren()},setStore:function(a,b,c){h.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0"),this._deprecatedSetStore(a,b,c)},_deprecatedSetStore:function(e,f,g){var h=this.store;if(g=g||{},h!==e){for(var j;j=this._notifyConnections.pop();)j.remove();e.get||(i.mixin(e,{_oldAPI:!0,get:function(a){var c=new b;return this.fetchItemByIdentity({identity:a,onItem:function(a){c.resolve(a)},onError:function(a){c.reject(a)}}),c.promise},query:function(a,c){var d=new b(function(){e.abort&&e.abort()});d.total=new b;var e=this.fetch(i.mixin({query:a,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},c));return new l(d)}}),e.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[c.after(e,"onNew",i.hitch(this,"_onNewItem"),!0),c.after(e,"onDelete",i.hitch(this,"_onDeleteItem"),!0),c.after(e,"onSet",i.hitch(this,"_onSetItem"),!0)])),this._set("store",e)}return this.options&&this.options.length&&this.removeOption(this.options),this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),g.query&&this._set("query",g.query),g.queryOptions&&this._set("queryOptions",g.queryOptions),e&&e.query&&(this._loadingStore=!0,this.onLoadDeferred=new b,this._queryRes=e.query(this.query,this.queryOptions),k(this._queryRes,i.hitch(this,function(b){if(this.sortByLabel&&!g.sort&&b.length)if(e.getValue)b.sort(d.createSortFunction([{attribute:e.getLabelAttributes(b[0])[0]}],e));else{var c=this.labelAttr;b.sort(function(a,b){return a[c]>b[c]?1:b[c]>a[c]?-1:0})}g.onFetch&&(b=g.onFetch.call(this,b,g)),a.forEach(b,function(a){this._addOptionForItem(a)},this),this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(i.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0)),this._loadingStore=!1,this.set("value","_pendingValue"in this?this._pendingValue:f),delete this._pendingValue,this.loadChildrenOnOpen?this._pseudoLoadChildren(b):this._loadChildren(),this.onLoadDeferred.resolve(!0),this.onSetStore()}),function(a){this.onLoadDeferred.reject(a)})),h},_setValueAttr:function(b,c){if(this._onChangeActive||(c=null),this._loadingStore)return void(this._pendingValue=b);if(null!=b){b=i.isArray(b)?a.map(b,function(a){return i.isObject(a)?a:{value:a}}):i.isObject(b)?[b]:[{value:b}],b=a.filter(this.getOptions(b),function(a){return a&&a.value});var d=this.getOptions()||[];this.multiple||b[0]&&b[0].value||!d.length||(b[0]=d[0]),a.forEach(d,function(c){c.selected=a.some(b,function(a){return a.value===c.value})});var e=a.map(b,function(a){return a.value});if(void 0!==e&&void 0!==e[0]){var f=a.map(b,function(a){return a.label});this._setDisplay(this.multiple?f:f[0]),this.inherited(arguments,[this.multiple?e:e[0],c]),this._updateSelection()}}},_getDisplayedValueAttr:function(){var b=a.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?b:b[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){
this._loadingStore||(a.forEach(this._getChildren(),function(a){a.destroyRecursive()}),a.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null,this._set("value",this._getValueFromOpts());var b=[].concat(this.value);if(b&&b[0]){var c=this;a.forEach(this._getChildren(),function(d){var e=a.some(b,function(a){return d.option&&a===d.option.value});e&&!c.multiple&&(c.focusedChild=d),g.toggle(d.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),e),d.domNode.setAttribute("aria-selected",e?"true":"false")},this)}},_getValueFromOpts:function(){var b=this.getOptions()||[];if(!this.multiple&&b.length){var c=a.filter(b,function(a){return a.selected})[0];return c&&c.value?c.value:(b[0].selected=!0,b[0].value)}return this.multiple?a.map(a.filter(b,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){var b=this.store;this.removeOption({value:b.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;if(b.isItemLoaded&&!b.isItemLoaded(a))return void b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this});var c=this._getOptionObjForItem(a);this.addOption(c)},constructor:function(a){this._oValue=(a||{}).value||null,this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments),f.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?j("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+h._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]),this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments),c.after(this,"onChange",i.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,{query:this.query,queryOptions:this.queryOptions})),this._storeInitialized=!0},startup:function(){this._loadChildren(),this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(a,b,c,d,e,f){var g=function(a){var b,a=a||{},d=c.getLocalization("dojo.cldr","number",c.normalizeLocale(a.locale)),e=a.pattern?a.pattern:d[(a.type||"decimal")+"Format"];return b="number"==typeof a.places?a.places:"string"==typeof a.places&&a.places.length>0?a.places.replace(/.*,/,""):-1!=e.indexOf(".")?e.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:d.decimal,places:b}},h=a("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(b.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:e.format,_regExpGenerator:e.regexp,_decimalInfo:g(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(a){var b="number"==typeof a.places?a.places:0;b&&b++,"number"!=typeof a.max&&(a.max=9*Math.pow(10,15-b)),"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-b)),this.inherited(arguments,[a]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=g(a)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var a=this.get("value");if("number"==typeof a&&!isNaN(a)){var b=this.format(a,this.constraints);void 0!==b&&(this.textbox.value=b)}this.inherited(arguments)}},format:function(a,c){var d=String(a);return"number"!=typeof a?d:isNaN(a)?"":"rangeCheck"in this&&this.rangeCheck(a,c)||!1===c.exponent||!/\de[-+]?\d/i.test(d)?(this.editOptions&&this.focused&&(c=b.mixin({},c,this.editOptions)),this._formatter(a,c)):d},_parser:e.parse,parse:function(a,c){var d=this._parser(a,b.mixin({},c,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(d)&&(d=this._parser(a,c)),d},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){return null==a||"string"==typeof a&&""==a?NaN:("number"!=typeof a||isNaN(a)||0==a||(a=e.round(a,this._decimalInfo.places)),this.inherited(arguments,[a]))},serialize:function(a,b){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=b.hitch(b.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,b,c){void 0!==a&&void 0===c&&(c=String(a),"number"==typeof a?isNaN(a)?c="":("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))&&(c=void 0):a?a=void 0:(c="",a=NaN)),this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);{if(!isNaN(a)||""===this.textbox.value)return a;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+e._realNumberRegexp(b.delegate(this.constraints))+"$").test(this.textbox.value)){var c=Number(this.textbox.value);return isNaN(c)?void 0:c}}},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!(isNaN(b)||!this.rangeCheck(b,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var a="number"==typeof this.constraints.min,b="number"==typeof this.constraints.max,c=this.get("value");if(isNaN(c)||!a&&!b)return this.inherited(arguments);var e=0|c,f=c<0,g=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),h=this.maxLength||20,i=h-this.textbox.value.length,j=g?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",k=g?e+"."+j:e+"",l=d.rep("9",i),m=c,n=c;return f?m=Number(k+l):n=Number(k+l),!(a&&n<this.constraints.min||b&&m>this.constraints.max)}}),i=a("dijit.form.NumberTextBox",[f,h],{baseClass:"dijitTextBox dijitNumberTextBox"});return i.Mixin=h,i})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(a,b,c){return a("dijit.form.DateTextBox",c,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:b,_selector:"date",maxHeight:1/0,value:new Date("")})})},"dojox/layout/TableContainer":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/_base/array","dojo/dom-prop","dojo/dom-style","dijit/_WidgetBase","dijit/layout/_LayoutWidget"],function(a,b,c,d,e,f,g,h,i,j){a.experimental("dojox.layout.TableContainer");var k=c("dojox.layout.TableContainer",j,{cols:1,labelWidth:"100",showLabels:!0,orientation:"horiz",spacing:1,customClass:"",postCreate:function(){this.inherited(arguments),this._children=[],this.connect(this,"set",function(a,b){!b||"orientation"!=a&&"customClass"!=a&&"cols"!=a||this.layout()})},startup:function(){if(!this._started&&(this.inherited(arguments),!this._initialized)){var a=this.getChildren();a.length<1||(this._initialized=!0,d.add(this.domNode,"dijitTableLayout"),f.forEach(a,function(a){a.started||a._started||a.startup()}),this.layout(),this.resize())}},resize:function(){f.forEach(this.getChildren(),function(a){"function"==typeof a.resize&&a.resize()})},layout:function(){function a(a,b,c){if(""!=j.customClass){var e=j.customClass+"-"+(b||a.tagName.toLowerCase());d.add(a,e),arguments.length>2&&d.add(a,e+"-"+c)}}if(this._initialized){var c=this.getChildren(),i={},j=this;f.forEach(this._children,b.hitch(this,function(a){i[a.id]=a})),f.forEach(c,b.hitch(this,function(a,b){i[a.id]||this._children.push(a)}));var k=e.create("table",{width:"100%",class:"tableContainer-table tableContainer-table-"+this.orientation,cellspacing:this.spacing},this.domNode),l=e.create("tbody");k.appendChild(l),a(k,"table",this.orientation);var m=(Math.floor(100/this.cols),e.create("tr",{},l)),n=this.showLabels&&"horiz"!=this.orientation?e.create("tr",{},l):m,o=this.cols*(this.showLabels?2:1),p=0;f.forEach(this._children,b.hitch(this,function(b,c){var d=b.colspan||1;d>1&&(d=this.showLabels?Math.min(o-1,2*d-1):Math.min(o,d)),p+d-1+(this.showLabels?1:0)>=o&&(p=0,m=e.create("tr",{},l),n="horiz"==this.orientation?m:e.create("tr",{},l));var f;if(this.showLabels)if(f=e.create("td",{class:"tableContainer-labelCell"},m),b.spanLabel)g.set(f,"vert"==this.orientation?"rowspan":"colspan",2);else{a(f,"labelCell");var i={for:b.get("id")},j=e.create("label",i,f);(Number(this.labelWidth)>-1||String(this.labelWidth).indexOf("%")>-1)&&h.set(f,"width",String(this.labelWidth).indexOf("%")<0?this.labelWidth+"px":this.labelWidth),j.innerHTML=b.get("label")||b.get("title")}var k;k=b.spanLabel&&f?f:e.create("td",{class:"tableContainer-valueCell"},n),d>1&&g.set(k,"colspan",d),a(k,"valueCell",c),k.appendChild(b.domNode),p+=d+(this.showLabels?1:0)})),this.table&&this.table.parentNode.removeChild(this.table),f.forEach(c,function(a){"function"==typeof a.layout&&a.layout()}),this.table=k,this.resize()}},destroyDescendants:function(a){f.forEach(this._children,function(b){b.destroyRecursive(a)})},_setSpacingAttr:function(a){this.spacing=a,this.table&&(this.table.cellspacing=Number(a))}});return k.ChildWidgetProperties={label:"",title:"",spanLabel:!1,colspan:1},b.extend(i,k.ChildWidgetProperties),k})},"dojox/form/Uploader":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/window","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","dojo/dom-attr","dojo/dom-construct","dojo/dom-form","dijit","dijit/form/Button","./uploader/_Base","./uploader/_HTML5","./uploader/_IFrame","./uploader/_Flash","dojo/i18n!./nls/Uploader","dojo/text!./resources/Uploader.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return b("dojox.form.Uploader",[o,n,p,q,r],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:s.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:t,baseClass:"dijitUploader "+n.prototype.baseClass,postMixInProperties:function(){this._inputs=[],this._cons=[],this.force=this.force.toLowerCase(),this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe",this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),g.set(this.domNode,{overflow:"hidden",position:"relative"}),this._buildDisplay(),j.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=k.create("input",{class:"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b,c=0,d=(a.length,[]);b=a[c++];)b&&b.name&&d.push(b.name);this.displayInput.value=d.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},upload:function(a){a=a||{},a.uploadType=this.uploadType,this.inherited(arguments)},submit:function(a){a=a&&a.tagName?a:this.getForm();var b=l.toObject(a);b.uploadType=this.uploadType,this.upload(b)},reset:function(){delete this._files,this._disconnectButton(),d.forEach(this._inputs,k.destroy),this._inputs=[],this._nameIndex=0,this._createInput()},getFileList:function(){var a=[];return this.supports("multiple")?d.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):d.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this),a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),g.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:g.get(a,"width"),h:g.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15))),this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(g.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=k.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first"),this.supports("multiple")&&this.multiple&&j.set(this.inputNode,"multiple",!0),this._inputs.push(this.inputNode),g.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0}),this._connectButton()},_connectButton:function(){this._cons.push(e.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files,this.onChange(this.getFileList(a)),!this.supports("multiple")&&this.multiple&&this._createInput()})),this.tabIndex>-1&&(this.inputNode.tabIndex=this.tabIndex,this._cons.push(e.connect(this.inputNode,"focus",this,function(){h.add(this.domNode,this.focusedClass)})),this._cons.push(e.connect(this.inputNode,"blur",this,function(){h.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){d.forEach(this._cons,e.disconnect),this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define(["dojo/dom-form","dojo/dom-style","dojo/dom-construct","dojo/dom-attr","dojo/has","dojo/_base/declare","dojo/_base/event","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin"],function(a,b,c,d,e,f,g,h,i,j){return e.add("FormData",function(){return!!window.FormData}),e.add("xhr-sendAsBinary",function(){var a=window.XMLHttpRequest&&new window.XMLHttpRequest;return a&&!!a.sendAsBinary}),e.add("file-multiple",function(){return!!{true:1,false:1}[d.get(document.createElement("input",{type:"file"}),"multiple")]}),f("dojox.form.uploader._Base",[h,i,j],{getForm:function(){if(!this.form)for(var a=this.domNode;a&&a.tagName&&a!==document.body;){if("form"==a.tagName.toLowerCase()){this.form=a;break}a=a.parentNode}return this.form},getUrl:function(){return this.uploadUrl&&(this.url=this.uploadUrl),this.url?this.url:(this.getForm()&&(this.url=this.form.action),this.url)},connectForm:function(){this.url=this.getUrl(),!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(a){g.stop(a),this.submit(this.form)}))},supports:function(a){switch(a){case"multiple":return"flash"!=this.force&&"iframe"!=this.force&&e("file-multiple");case"FormData":return e(a);case"sendAsBinary":return e("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(a){return a.substring(a.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(a){var b=Math.round(a/1024*1e5)/1e5,c=Math.round(a/1048576*1e5)/1e5,d=Math.round(a/1073741824*1e5)/1e5,e=a;return b>1&&(e=b.toFixed(1)+" kb"),c>1&&(e=c.toFixed(1)+" mb"),d>1&&(e=d.toFixed(1)+" gb"),{kb:b,mb:c,gb:d,bytes:a,value:e}}})})},"dojox/form/uploader/_HTML5":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo"],function(a,b,c,d){return a("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments),this.uploadType},postCreate:function(){this.connectForm(),this.inherited(arguments),this.uploadOnSelect&&this.connect(this,"onChange",function(a){this.upload(a[0])})},_drop:function(a){d.stopEvent(a);var b=a.dataTransfer;this._files=b.files,this.onChange(this.getFileList())},upload:function(a){this.onBegin(this.getFileList()),this.uploadWithFormData(a)},addDropTarget:function(a,b){b||(this.connect(a,"dragenter",d.stopEvent),this.connect(a,"dragover",d.stopEvent),this.connect(a,"dragleave",d.stopEvent)),this.connect(a,"drop","_drop")},uploadWithFormData:function(a){if(this.getUrl()){var b=new FormData,d=this._getFileFieldName();if(c.forEach(this._files,function(a,c){b.append(d,a)},this),a){a.uploadType=this.uploadType;for(var e in a)b.append(e,a[e])}this.createXhr().send(b)}},_xhrProgress:function(a){if(a.lengthComputable){var b={bytesLoaded:a.loaded,bytesTotal:a.total,type:a.type,timeStamp:a.timeStamp};"load"==a.type?(b.percent="100%",b.decimal=1):(b.decimal=a.loaded/a.total,b.percent=Math.ceil(a.loaded/a.total*100)+"%"),this.onProgress(b)}},createXhr:function(){var a,c=new XMLHttpRequest;return c.upload.addEventListener("progress",b.hitch(this,"_xhrProgress"),!1),c.addEventListener("load",b.hitch(this,"_xhrProgress"),!1),c.addEventListener("error",b.hitch(this,function(b){this.onError(b),clearInterval(a)}),!1),c.addEventListener("abort",b.hitch(this,function(b){this.onAbort(b),clearInterval(a)}),!1),c.onreadystatechange=b.hitch(this,function(){if(4===c.readyState){clearInterval(a);try{this.onComplete(JSON.parse(c.responseText.replace(/^\{\}&&/,"")))}catch(a){var b="Error parsing server result:";this.onError(b,a)}}}),c.open("POST",this.getUrl()),c.setRequestHeader("Accept","application/json"),a=setInterval(b.hitch(this,function(){try{c.statusText}catch(b){clearInterval(a)}}),250),c}})})},"dojox/form/uploader/_IFrame":function(){define(["dojo/query","dojo/dom-construct","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-form","dojo/request/iframe"],function(a,b,c,d,e,f,g){return c("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments),"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(a){var c,d={},f=(this.getForm(),this.getUrl()),h=this;if(a=a||{},a.uploadType=this.uploadType,c=b.place('<form enctype="multipart/form-data" method="post"></form>',this.domNode),e.forEach(this._inputs,function(a,b){""!==a.value&&(c.appendChild(a),d[a.name]=a.value)},this),a)for(nm in a)void 0===d[nm]&&b.create("input",{name:nm,value:a[nm],type:"hidden"},c);g.post(f,{form:c,handleAs:"json",content:a}).then(function(a){b.destroy(c),a.ERROR||a.error?h.onError(a):h.onComplete(a)},function(a){b.destroy(c),h.onError(a)})}})})},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,c,d){if(l.global[a])return l.global[a];if(l.global.frames[a])return l.global.frames[a];d||(i("config-useXDomain")&&i("config-dojoBlankHtmlUrl"),d=i("config-dojoBlankHtmlUrl")||b.toUrl("dojo/resources/blank.html"));var e=k.place('<iframe id="'+a+'" name="'+a+'" src="'+d+'" onload="'+c+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',l.body());return l.global[a]=e,e}function n(a,b,c){var d=l.global.frames[a.name];d.contentWindow&&(d=d.contentWindow);try{c?d.location.replace(b):d.location=b}catch(a){}}function o(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=l.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(l.doc.frames[b]&&l.doc.frames[b].document)return l.doc.frames[b].document}return null}function p(){return k.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},l.body())}function q(){var a;try{if(v._currentDfd||!v._dfdQueue.length)return;do{a=v._currentDfd=v._dfdQueue.shift()}while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&v._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())return void(v._currentDfd=null);var b,c=a.response,e=c.options,h=a._contentToClean=[],i=j.byId(e.form),m=d.notify,n=e.data||null;if(a._legacy||"POST"!==e.method||i?"GET"===e.method&&i&&c.url.indexOf("?")>-1&&(b=c.url.slice(c.url.indexOf("?")+1),n=f.mixin(g.queryToObject(b),n)):i=a._tmpForm=p(),i){if(!a._legacy){var o=i;do{o=o.parentNode}while(o&&o!==l.doc.documentElement);o||(i.style.position="absolute",i.style.left="-1000px",i.style.top="-1000px",l.body().appendChild(i)),i.name||(i.name=w+"_form")}if(n){var q=function(a,b){k.create("input",{type:"hidden",name:a,value:b},i),h.push(a)};for(var r in n){var s=n[r];if(f.isArray(s)&&s.length>1)for(var t=0;t<s.length;t++)q(r,s[t]);else i[r]?i[r].value=s:q(r,s)}}var u=i.getAttributeNode("action"),x=i.getAttributeNode("method"),y=i.getAttributeNode("target");c.url&&(a._originalAction=u?u.value:null,u?u.value=c.url:i.setAttribute("action",c.url)),a._legacy?x&&x.value||(x?x.value=e.method:i.setAttribute("method",e.method)):(a._originalMethod=x?x.value:null,x?x.value=e.method:i.setAttribute("method",e.method)),a._originalTarget=y?y.value:null,y?y.value=v._iframeName:i.setAttribute("target",v._iframeName),i.target=v._iframeName,m&&m.emit("send",c,a.promise.cancel),v._notifyStart(c),i.submit()}else{var z="";c.options.data&&"string"!=typeof(z=c.options.data)&&(z=g.objectToQuery(z));var A=c.url+(c.url.indexOf("?")>-1?"&":"?")+z;m&&m.emit("send",c,a.promise.cancel),v._notifyStart(c),v.setSrc(v._frame,A,!0)}}catch(b){a.reject(b)}}function r(a){return!this.isFulfilled()}function s(a){return!!this._finished}function t(a,b){if(!b)try{var c=a.options,d=v.doc(v._frame),g=c.handleAs;if("html"!==g){if("xml"===g)if("html"===d.documentElement.tagName.toLowerCase()){h("a",d.documentElement).orphan();var i=d.documentElement.innerText;i=i.replace(/>\s+</g,"><"),a.text=f.trim(i)}else a.data=d;else a.text=d.getElementsByTagName("textarea")[0].value;e(a)}else a.data=d}catch(a){b=a}b?this.reject(b):this._finished?this.resolve(a):this.reject(new Error("Invalid dojo/request/iframe request state"))}function u(a){this._callNext()}function v(a,b,e){var f=d.parseArgs(a,d.deepCreate(y,b),!0);if(a=f.url,b=f.options,"GET"!==b.method&&"POST"!==b.method)throw new Error(b.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,x+"();"));var g=d.deferred(f,null,r,s,t,u);return g._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,v._fireNextRequest())},g._legacy=e,v._dfdQueue.push(g),v._fireNextRequest(),c(g),e?g:g.promise}var w=a.id.replace(/[\/\.\-]/g,"_"),x=w+"_onload";l.global[x]||(l.global[x]=function(){var a=v._currentDfd;if(!a)return void v._fireNextRequest();var b=a.response,c=b.options,d=j.byId(c.form)||a._tmpForm;if(d){for(var e=a._contentToClean,f=0;f<e.length;f++)for(var g=e[f],h=0;h<d.childNodes.length;h++){var i=d.childNodes[h];if(i.name===g){k.destroy(i);break}}a._originalAction&&d.setAttribute("action",a._originalAction),a._originalMethod&&(d.setAttribute("method",a._originalMethod),d.method=a._originalMethod),a._originalTarget&&(d.setAttribute("target",a._originalTarget),d.target=a._originalTarget)}a._tmpForm&&(k.destroy(a._tmpForm),delete a._tmpForm),a._finished=!0});var y={method:"POST"};return v.create=m,v.doc=o,v.setSrc=n,v._iframeName=w+"_IoIframe",v._notifyStart=function(){},v._dfdQueue=[],v._currentDfd=null,v._fireNextRequest=q,d.addCommonMethods(v,["GET","POST"]),v})},"dojox/form/uploader/_Flash":function(){define(["dojo/dom-form","dojo/dom-style","dojo/dom-construct","dojo/dom-attr","dojo/_base/declare","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojox/embed/Flash"],function(a,b,c,d,e,f,g,h,i,j){return e("dojox.form.uploader._Flash",[],{swfPath:f.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,skipServerCheck:!0,serverTimeout:2e3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles"),this.inherited(arguments)},onReady:function(a){},onLoad:function(a){},onFileChange:function(a){},onFileProgress:function(a){},getFlashFileList:function(){return this._files},flashReset:function(){this.flashMovie.reset(),this._files=[],this._fileMap={}},uploadFlash:function(a){this.onBegin(this.getFileList()),a=a||{},a.returnType="F",a.uploadType=this.uploadType,this.flashMovie.doUpload(a)},_change:function(a){this._files=this._files.concat(a),i.forEach(a,function(a){a.bytesLoaded=0,a.bytesTotal=a.size,this._fileMap[a.name+"_"+a.size]=a},this),this.onChange(this._files),this.onFileChange(a)},_complete:function(a){this._getCustomEvent().type="load",this.onComplete(a)},_progress:function(a){this._fileMap[a.name+"_"+a.bytesTotal].bytesLoaded=a.bytesLoaded;var b=this._getCustomEvent();this.onFileProgress(a),this.onProgress(b)},_error:function(a){this.onError(a)},_onFlashBlur:function(a){},_getCustomEvent:function(){var a={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()};for(var b in this._fileMap)a.bytesTotal+=this._fileMap[b].bytesTotal,a.bytesLoaded+=this._fileMap[b].bytesLoaded;return a.decimal=a.bytesLoaded/a.bytesTotal,a.percent=Math.ceil(a.bytesLoaded/a.bytesTotal*100)+"%",a},_connectFlash:function(){this._subs=[],this._cons=[];var a=h.hitch(this,function(a,b){this._subs.push(g.subscribe(this.id+a,this,b))});a("/filesSelected","_change"),a("/filesUploaded","_complete"),a("/filesProgress","_progress"),a("/filesError","_error"),a("/filesCanceled","onCancel"),a("/stageBlur","_onFlashBlur"),this.connect(this.domNode,"focus",function(){this.flashMovie.focus(),this.flashMovie.doFocus()}),this.tabIndex>=0&&d.set(this.domNode,"tabIndex",this.tabIndex)},_createFlashUploader:function(){var a=this.btnSize.w,d=this.btnSize.h;if(!a)return void setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode),this._createFlashUploader()}),200);var e=this.getUrl();if(e&&e.toLowerCase().indexOf("http")<0&&0!=e.indexOf("/")){var f=window.location.href.split("/");f.pop(),f=f.join("/")+"/",e=f+e}this.inputNode=c.create("div",{className:"dojoxFlashNode"},this.domNode,"first"),b.set(this.inputNode,{position:"absolute",top:"-2px",width:a+"px",height:d+"px",opacity:0});var g={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:a,height:d,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:e,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new j(g,this.inputNode),this.flashObject.onError=h.hitch(function(a){}),this.flashObject.onReady=h.hitch(this,function(){this.onReady(this)}),this.flashObject.onLoad=h.hitch(this,function(a){this.flashMovie=a,this.flashReady=!0,this.onLoad(this)}),this._connectFlash()}})})},"dojox/embed/Flash":function(){define(["dojo/_base/lang","dojo/_base/unload","dojo/_base/array","dojo/query","dojo/has","dojo/dom","dojo/on","dojo/window","dojo/string"],function(lang,unload,array,query,has,dom,on,win,stringUtil){function prep(a){return"path"in(a=lang.delegate(_baseKwArgs,a))?("id"in a||(a.id=keyBase+keyCount++),a):null}var fMarkup,fVersion,minimumVersion=9,keyBase="dojox-embed-flash-",keyCount=0,_baseKwArgs={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};has("ie")?(fMarkup=function(a){if(!(a=prep(a)))return null;var b,c=a.path;if(a.vars){var d=[];for(b in a.vars)d.push(encodeURIComponent(b)+"="+encodeURIComponent(a.vars[b]));a.params.FlashVars=d.join("&"),delete a.vars}var e='<object id="'+stringUtil.escape(String(a.id))+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+stringUtil.escape(String(a.width))+'" height="'+stringUtil.escape(String(a.height))+'"'+(a.style?' style="'+stringUtil.escape(String(a.style))+'"':"")+'><param name="movie" value="'+stringUtil.escape(String(c))+'" />';if(a.params)for(b in a.params)e+='<param name="'+stringUtil.escape(b)+'" value="'+stringUtil.escape(String(a.params[b]))+'" />';return e+="</object>",{id:a.id,markup:e}},fVersion=function(){for(var a=10,b=null;!b&&a>7;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(a){}if(b){var c=b.GetVariable("$version").split(" ")[1].split(",");return{major:null!=c[0]?parseInt(c[0]):0,minor:null!=c[1]?parseInt(c[1]):0,rev:null!=c[2]?parseInt(c[2]):0}}return{major:0,minor:0,rev:0}}(),unload.addOnWindowUnload(function(){var a=function(){};query("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(a){}})})):(fMarkup=function(a){if(!(a=prep(a)))return null;var b,c=a.path;if(a.vars){var d=[];for(b in a.vars)d.push(encodeURIComponent(b)+"="+encodeURIComponent(a.vars[b]));a.params.flashVars=d.join("&"),delete a.vars}var e='<embed type="application/x-shockwave-flash" src="'+stringUtil.escape(String(c))+'" id="'+stringUtil.escape(String(a.id))+'" width="'+stringUtil.escape(String(a.width))+'" height="'+stringUtil.escape(String(a.height))+'"'+(a.style?' style="'+stringUtil.escape(String(a.style))+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(a.params)for(b in a.params)e+=" "+stringUtil.escape(b)+'="'+stringUtil.escape(String(a.params[b]))+'"';return e+=" />",{id:a.id,markup:e}},fVersion=function(){var a=navigator.plugins["Shockwave Flash"];if(a&&a.description){var b=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}}return{major:0,minor:0,rev:0}}());var Flash=function(a,b){if(location.href.toLowerCase().indexOf("file://")>-1)throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=fVersion.major,this.minimumVersion=a.minimumVersion||minimumVersion,this.id=null,this.movie=null,this.domNode=null,b&&(b=dom.byId(b)),setTimeout(lang.hitch(this,function(){a.expressInstall||this.available&&this.available>=this.minimumVersion?a&&b?this.init(a,b):this.onError("embed.Flash was not provided with the proper arguments."):this.available?this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion):this.onError("Flash is not installed.")}),100)};return lang.extend(Flash,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){
clearInterval(this._poller),delete this._poller,delete this._pollCount,delete this._pollMax,this.onLoad(this.movie)},init:function(a,b){if(this.destroy(),!(b=dom.byId(b||this.domNode)))throw new Error("dojox.embed.Flash: no domNode reference has been passed.");var c=0;this._poller=null,this._pollCount=0,this._pollMax=15,this.pollTime=100,Flash.initialized&&(this.id=Flash.place(a,b),this.domNode=b,setTimeout(lang.hitch(this,function(){this.movie=this.byId(this.id,a.doc),this.onReady(this.movie),this._poller=setInterval(lang.hitch(this,function(){try{c=this.movie.PercentLoaded()}catch(a){}if(100==c)this._onload();else if(0==c&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),new Error("Building SWF failed.")}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(a){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=lang.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0});for(var b in this)a[b]||delete this[b];this._poller?on(this,"Load",this,"_destroy"):this._destroy()}},byId:function(a,b){return b=b||document,b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}}),lang.mixin(Flash,{minSupported:8,available:fVersion.major,supported:fVersion.major>=fVersion.required,minimumRequired:fVersion.required,version:fVersion,initialized:!1,onInitialize:function(){Flash.initialized=!0},__ie_markup__:function(a){return fMarkup(a)},proxy:function(obj,methods){array.forEach(methods instanceof Array?methods:[methods],function(item){this[item]=lang.hitch(this,function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+item+'" returntype="javascript"><arguments>'+array.map(arguments,function(a){return __flash__toXML(a)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},obj)}}),Flash.place=function(a,b){var c=fMarkup(a);return b=dom.byId(b),b||(b=win.doc.createElement("div"),b.id=c.id+"-container",win.body().appendChild(b)),c?(b.innerHTML=c.markup,c.id):null},Flash.onInitialize(),lang.setObject("dojox.embed.Flash",Flash),Flash})},"dijit/_Templated":function(){define(["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(a,b,c,d,e,f,g){return f.extend(a,{waiRole:"",waiState:""}),e("dijit._Templated",[b,c],{widgetsInTemplate:!1,constructor:function(){g.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(a,b){var c=this.inherited(arguments),e=b(a,"waiRole");e&&a.setAttribute("role",e);var f=b(a,"waiState");return f&&d.forEach(f.split(/\s*,\s*/),function(b){if(-1!=b.indexOf("-")){var c=b.split("-");a.setAttribute("aria-"+c[0],c[1])}}),c}})})},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(a,b,c,d,e,f,g,h,i){return d("dijit-legacy-requires")&&f(0,function(){a(["dijit/form/RadioButton"])}),b("dijit.form.CheckBox",[g,h],{templateString:i,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0),this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments),this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&e("label[for='"+this.id+"']").addClass("dijitFocusedLabel"),this.inherited(arguments)},_onBlur:function(){this.id&&e("label[for='"+this.id+"']").removeClass("dijitFocusedLabel"),this.inherited(arguments)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(a,b){return a("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(a){this._set("readOnly",a),b.set(this.focusNode,"readOnly",a)},_setLabelAttr:void 0,_getSubmitValue:function(a){return null==a||""===a?"on":a},_setValueAttr:function(a){a=this._getSubmitValue(a),this._set("value",a),b.set(this.focusNode,"value",a)},reset:function(){this.inherited(arguments),this._set("value",this._getSubmitValue(this.params.value)),b.set(this.focusNode,"value",this.value)},_onClick:function(a){return this.readOnly?(a.stopPropagation(),a.preventDefault(),!1):this.inherited(arguments)}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(a,b,c,d){return a("dijit.form.SimpleTextarea",d,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),c("ie")&&this.cols&&b.add(this.textbox,"dijitTextAreaCols")},filter:function(a){return a&&(a=a.replace(/\r/g,"")),this.inherited(arguments)},_onInput:function(a){if(this.maxLength){var b=parseInt(this.maxLength),d=this.textbox.value.replace(/\r/g,""),e=d.length-b;if(e>0){var f=this.textbox;if(f.selectionStart){var g=f.selectionStart,h=0;c("opera")&&(h=(this.textbox.value.substring(0,g).match(/\r/g)||[]).length),this.textbox.value=d.substring(0,g-e-h)+d.substring(g-h),f.setSelectionRange(g-e,g-e)}else if(this.ownerDocument.selection){f.focus();var i=this.ownerDocument.selection.createRange();i.moveStart("character",-e),i.text="",i.select()}}}this.inherited(arguments)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(a,b,c,d){return a("dijit.form.Textarea",[d,c],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments),b.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/window","../Viewport"],function(a,b,c,d,e,f,g){return c.add("textarea-needs-help-shrinking",function(){var a=f.body(),c=b.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},a,"last"),d=c.scrollHeight>=c.clientHeight;return a.removeChild(c),d}),a("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments),this.resize()},postCreate:function(){this.inherited(arguments);var a=this.textbox;a.style.overflowY="hidden",this.own(e(a,"focus, resize",d.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments),this.own(g.on("resize",d.hitch(this,"_resizeLater"))),this._resizeLater()},_onInput:function(a){this.inherited(arguments),this.resize()},_estimateHeight:function(){var a=this.textbox;a.rows=(a.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function a(){var a=!1;""===b.value&&(b.value=" ",a=!0);var c=b.scrollHeight;return a&&(b.value=""),c}var b=this.textbox;if("hidden"==b.style.overflowY&&(b.scrollTop=0),!this.busyResizing){if(this.busyResizing=!0,a()||b.offsetHeight){var d=a()+Math.max(b.offsetHeight-b.clientHeight,0),e=d+"px";if(e!=b.style.height&&(b.style.height=e,b.rows=1),c("textarea-needs-help-shrinking")){var f,g=a(),h=g,i=b.style.minHeight,j=4,k=b.scrollTop;for(b.style.minHeight=e,b.style.height="auto";d>0;){b.style.minHeight=Math.max(d-j,4)+"px",f=a();var l=h-f;if(d-=l,l<j)break;h=f,j<<=1}b.style.height=d+"px",b.style.minHeight=i,b.scrollTop=k}b.style.overflowY=a()>b.clientHeight?"auto":"hidden","hidden"==b.style.overflowY&&(b.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(a,b,c){return a("dijit.form.RadioButton",[b,c],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query!css2","../registry"],function(a,b,c,d,e,f){return b("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var a=[];return e("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(d.hitch(this,function(b){if(b.name==this.name&&b.form==this.focusNode.form){var c=f.getEnclosingWidget(b);c&&a.push(c)}})),a},_setCheckedAttr:function(b){this.inherited(arguments),this._created&&b&&a.forEach(this._getRelatedWidgets(),d.hitch(this,function(a){a!=this&&a.checked&&a.set("checked",!1)}))},_getSubmitValue:function(a){return null==a?"on":a},_onClick:function(b){return this.checked||this.disabled?(b.stopPropagation(),b.preventDefault(),!1):this.readOnly?(b.stopPropagation(),b.preventDefault(),a.forEach(this._getRelatedWidgets(),d.hitch(this,function(a){c.set(this.focusNode||this.domNode,"checked",a.checked)})),!1):this.inherited(arguments)}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(a,b,c,d,e){return a("dijit.form.FilteringSelect",[d,e],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,b,c,d){b&&b[this.searchAttr]!==this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery||(a.length?this.set("item",a[0],d):this.set("value","",d||void 0===d&&!this.focused,this.textbox.value,null))},_openResultList:function(a,b,c){b[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(a,d,e,f){if(this._onChangeActive||(d=null),void 0===f){if((null===a||""===a)&&(a="",!b.isString(e)))return void this._setDisplayedValueAttr(e||"",d);var g=this;this._lastQuery=a,c(this.store.get(a),function(a){g._callbackSetLabel(a?[a]:[],void 0,void 0,d)})}else this.valueNode.value=a,this.inherited(arguments,[a,d,e,f])},_setItemAttr:function(a,b,c){this.inherited(arguments),this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(a,d){if(null==a&&(a=""),!this._created){if(!("displayedValue"in this.params))return;d=!1}if(this.store){this.closeDropDown();var e,f=b.clone(this.query),g=this._getDisplayQueryString(a);this.store._oldAPI?e=g:(e=this._patternToRegExp(g),e.toString=function(){return g}),this._lastQuery=f[this.searchAttr]=e,this.textbox.value=a,this._lastDisplayedValue=a,this._set("displayedValue",a);var h=this,i={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};b.mixin(i,this.fetchProperties),this._fetchHandle=this.store.query(f,i),c(this._fetchHandle,function(a){h._fetchHandle=null,h._callbackSetLabel(a||[],f,i,d)},function(a){h._fetchHandle=null,h._cancelingQuery})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(a,b,c,d){var e=function(a){function e(b,d){var e=a[b];e&&(a[b]=function(f){var g;if("put"===b&&(g=a.getIdentity(f)),j)return e.apply(this,arguments);j=!0;try{var h=e.apply(this,arguments);return c(h,function(a){d("object"==typeof a&&a||f,g)}),h}finally{j=!1}})}var f,g=[],h=0;a=b.delegate(a),a.notify=function(a,b){h++;for(var c=g.slice(),d=0,e=c.length;d<e;d++)c[d](a,b)};var i=a.query;a.query=function(e,j){j=j||{};var k=i.apply(this,arguments);if(k&&k.forEach){var l=b.mixin({},j);delete l.start,delete l.count;var m,n=a.queryEngine&&a.queryEngine(e,l),o=h,p=[];k.observe=function(b,e){1==p.push(b)&&g.push(m=function(b,g){c(k,function(c){var i,k,l,m=c.length!=j.count;if(++o!=h)throw new Error("Query is out of date, you must observe() the query prior to any data modifications");var q,r=-1,s=-1;if(g!==f)for(i=0,k=c.length;i<k;i++){var t=c[i];if(a.getIdentity(t)==g){q=t,r=i,!n&&b||c.splice(i,1);break}}if(n){if(b&&(n.matches?n.matches(b):n([b]).length)){var u=r>-1?r:c.length;c.splice(u,0,b),s=d.indexOf(n(c),b),c.splice(u,1),j.start&&0==s||!m&&s==c.length?s=-1:c.splice(s,0,b)}}else b&&(g!==f?s=r:j.start||(s=a.defaultIndex||0,c.splice(s,0,b)));if((r>-1||s>-1)&&(e||!n||r!=s)){var v=p.slice();for(i=0;l=v[i];i++)l(b||q,r,s)}})});var i={};return i.remove=i.cancel=function(){var a=d.indexOf(p,b);a>-1&&(p.splice(a,1),p.length||g.splice(d.indexOf(g,m),1))},i}}return k};var j;return e("put",function(b,c){a.notify(b,c)}),e("add",function(b){a.notify(b)}),e("remove",function(b){a.notify(void 0,b)}),a};return b.setObject("dojo.store.Observable",e),e})},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],function(a,b,c,d,e){return d("dojo.store.JsonRest",null,{constructor:function(a){this.headers={},d.safeMixin(this,a)},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",_getTarget:function(a){var b=this.target;return void 0!==a&&("/"==b.charAt(b.length-1)?b+=a:b+="/"+a),b},get:function(c,d){d=d||{};var e=b.mixin({Accept:this.accepts},this.headers,d.headers||d);return a("GET",{url:this._getTarget(c),handleAs:"json",headers:e})},accepts:"application/javascript, application/json",getIdentity:function(a){return a[this.idProperty]},put:function(d,e){e=e||{};var f="id"in e?e.id:this.getIdentity(d);return a(void 0===f||e.incremental?"POST":"PUT",{url:this._getTarget(f),postData:c.stringify(d),handleAs:"json",headers:b.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===e.overwrite?"*":null,"If-None-Match":!1===e.overwrite?"*":null},this.headers,e.headers)})},add:function(a,b){return b=b||{},b.overwrite=!1,this.put(a,b)},remove:function(c,d){return d=d||{},a("DELETE",{url:this._getTarget(c),headers:b.mixin({},this.headers,d.headers)})},query:function(c,d){d=d||{};var f=b.mixin({Accept:this.accepts},this.headers,d.headers),g=this.target.indexOf("?")>-1;if(c&&"object"==typeof c&&(c=a.objectToQuery(c),c=c?(g?"&":"?")+c:""),(d.start>=0||d.count>=0)&&(f["X-Range"]="items="+(d.start||"0")+"-"+("count"in d&&d.count!=1/0?d.count+(d.start||0)-1:""),this.rangeParam?(c+=(c||g?"&":"?")+this.rangeParam+"="+f["X-Range"],g=!0):f.Range=f["X-Range"]),d&&d.sort){var h=this.sortParam;c+=(c||g?"&":"?")+(h?h+"=":"sort(");for(var i=0;i<d.sort.length;i++){var j=d.sort[i];c+=(i>0?",":"")+(j.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(j.attribute)}h||(c+=")")}var k=a("GET",{url:this.target+(c||""),handleAs:"json",headers:f});return k.total=k.then(function(){var a=k.ioArgs.xhr.getResponseHeader("Content-Range");return a||(a=k.ioArgs.xhr.getResponseHeader("X-Content-Range")),a&&(a=a.match(/\/(.*)/))&&+a[1]}),e(k)}})})},"dijit/form/Form":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/sniff","../_Widget","../_TemplatedMixin","./_FormMixin","../layout/_ContentPaneResizeMixin"],function(a,b,c,d,e,f,g,h){return a("dijit.form.Form",[e,f,g,h],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"",this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){b.set(this.domNode,"encType",a),d("ie")&&(this.domNode.encoding=a),this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){return this.reset(a),a.stopPropagation(),a.preventDefault(),!1},_onSubmit:function(a){var b=this.constructor.prototype;this.execute==b.execute&&this.onExecute==b.onExecute||(c.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues())),!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(a,b,c,d){return a("dijit.ToolbarSeparator",[c,d],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments),b.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"Sage/Link":function(){define(["Sage/UI/Dialogs","Sage/Utility","Sage/Services/ActivityService","Sage/Services/EntityService","dojo/string","Sage/MainView/EntityMgr/EntityWizard/EntityWizardController"],function(a,b,c,d,e,f){return Sage.namespace("Link"),Sage.Link={entityDetail:function(a,c){switch(a.toUpperCase()){case"ACTIVITY":this.editActivity(c);break;case"HISTORY":this.editHistory(c);break;default:if("detail"===b.getModeId()){var d=Sage.Services.getService("ClientEntityContext"),f=d.getContext();if(f.EntityType===a||f.EntityType==="Sage.Entity.Interfaces.I"+a)return void d.navigateSLXGroupEntity(c)}if(b.isEQEnabled()&&"QUOTE"==a.toUpperCase())Sage.Utility.showDetailForm(a,c);else{var g=e.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[a,c]);document.location=g}}},toListView:function(a){var b;if(void 0!==a)b=a+".aspx?modeid=list";else{if(b=document.location.href.replace("#",""),b.indexOf("?")>-1){b=b.split("?")[0]}b+="?modeid=list"}document.location=b},toActivityListView:function(a){if(document.location.href.toLowerCase().indexOf("activitymanager.aspx")<1){var b="ActivityManager.aspx"+(a?"?tabId="+a:"");window.setTimeout(function(){document.location=b},5)}else if(a){var c=Sage.Services.getService("ClientGroupContext");c.setCurrentGroup(a)}},schedule:function(a){if("CompleteActivity"===a)return void Sage.ClientLinkHandler.request({request:"Schedule",type:a});var b=Sage.Services.getService("ActivityService");b||(Sage.Services.addService("ActivityService",new c),b=Sage.Services.getService("ActivityService")),b.scheduleActivity({type:a})},newNote:function(){var a=Sage.Services.getService("ActivityService");a||(Sage.Services.addService("ActivityService",new c),a=Sage.Services.getService("ActivityService")),a.insertNote()},scheduleActivity:function(a){this.schedule(a)},schedulePhoneCall:function(){this.schedule("PhoneCall")},scheduleMeeting:function(){this.schedule("Meeting")},scheduleToDo:function(){this.schedule("ToDo")},schedulePersonalActivity:function(){this.schedule("PersonalActivity")},scheduleCompleteActivity:function(){this.schedule("CompleteActivity")},scheduleEvent:function(a){Sage.Services.getService("ActivityService").scheduleEvent(a)},editEvent:function(a){Sage.Services.getService("ActivityService").editEvent(a)},deleteEvent:function(a){Sage.Services.getService("ActivityService").deleteEvent(a)},editActivity:function(a,b,d){var e=Sage.Services.getService("ActivityService");e||(Sage.Services.addService("ActivityService",new c),e=Sage.Services.getService("ActivityService")),d=d||"",e.editActivity(a,b,d)},editActivityIfConfirmed:function(a,b){Sage.Services.getService("ActivityService").editActivityIfConfirmed(a,b)},editEntityOptions:function(a,b){Sage.Services.getService("EntityService").editEntityOptions(a,b)},editActivityOccurrence:function(a,b){Sage.ClientLinkHandler.request({request:"EditActivityOccurrence",id:a,recurDate:b})},editHistory:function(a,b){var d=Sage.Services.getService("ActivityService");d||(Sage.Services.addService("ActivityService",new c),d=Sage.Services.getService("ActivityService")),d.editHistory(a)},completeActivity:function(a,b){Sage.Services.getService("ActivityService").completeActivity(a,b)},completeNewActivity:function(a,b){Sage.Services.getService("ActivityService").completeNewActivity(a,b)},completeActivityOccurrence:function(a,b){Sage.Services.getService("ActivityService").completeActivityOccurrence(a,b)},deleteActivity:function(a,b){Sage.Services.getService("ActivityService").deleteActivity(a,!1,b)},deleteActivityOccurrence:function(a){Sage.Services.getService("ActivityService").deleteActivity(a)},confirmActivityFor:function(a,b){Sage.Services.getService("ActivityService").confirmActivityFor(a,b)},editConfirmation:function(a){Sage.Services.getService("ActivityService").editConfirmation(a)},acceptConfirmation:function(a){Sage.Services.getService("ActivityService").acceptConfirmation({id:a})},declineConfirmation:function(a){Sage.Services.getService("ActivityService").declineConfirmation(a)},deleteConfirmation:function(a){Sage.Services.getService("ActivityService").deleteConfirmation(a)},scheduleLitRequest:function(){Sage.Services.getService("ActivityService").scheduleLitRequest()},deleteLitRequest:function(a){Sage.Services.getService("ActivityService").deleteLitRequest(a)},goToLitRequest:function(a){Sage.Services.getService("ActivityService").goToLitRequest(a)},goToActivityAssociation:function(a,b){Sage.Services.getService("ActivityService").goToActivityAssociation(a,b)},mergeRecords:function(){var b=dijit.byId("list");if(b){var c=b.getSelectionInfo();if(2===c.selectionCount){Sage.Services.getService("SelectionContextService").setSelectionContext(c.key,c,this.mergeRecordsSelectionInfoCallback),Sage.ClientLinkHandler.request({request:"MergeRecords",selectionInfoKey:c.key})}else a.showInfo(MasterPageLinks.Merge_Account_SelectionError)}},mergeRecordsSelectionInfoCallback:function(){},removeDeletedConfirmation:function(a){Sage.ClientLinkHandler.request({request:"RemoveDeletedConfirmation",id:a})},getHelpUrl:function(a,c){var d;return d=b.getClientContextByKey("WebHelpUrlFmt"),""===d&&(d="help/WebClient_CSH.htm#${0}"),e.substitute(d,[a])},getHelpUrlTarget:function(){var a=b.getClientContextByKey("WebHelpLinkTarget");return""===a?"MCWebHelp":a},editSecurityProfile:function(a,b,c){Sage.ClientLinkHandler.request({request:"Administration",type:"EditSecurityProfile",selectionInfoKey:a+","+b+","+c})},getTeamMemberLink:function(a,b){"user"==a.toLowerCase()?Sage.ClientLinkHandler.request({request:"Administration",type:"RedirectToUser",kind:a,id:b}):window.location.href=a+".aspx?entityId="+b},redirectUrl:function(a,b){var c=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");new Sage.SData.Client.SDataServiceOperationRequest(c).setResourceKind(b).setOperationName(a.businessRuleMethod).execute(a.entry,{success:function(a){window.location.href=a.response.Result},failure:function(a){Sage.UI.Dialogs.showError(a)}})},createNewEntity:function(){(new f).startWizard()},ClearSystemOptionsCache:function(){var a=Sage.Services.getService("SystemOptions");a&&a.clearCache()}},window.Link=Sage.Link,Sage.Link})},"Sage/Services/ActivityService":function(){define(["Sage/UI/Dialogs","Sage/MainView/ActivityMgr/ActivityEditor","Sage/MainView/ActivityMgr/EditEventEditor","Sage/MainView/ActivityMgr/QuickCompleteEditor","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityAction","Sage/MainView/ActivityMgr/HistoryEditor","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Utility","dojo/i18n!./nls/ActivityService","dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=n("Sage.Services.ActivityService",null,{_defaultActivitManagerTabId:null,_activityEditor:!1,_eventEditor:!1,_historyEditor:!1,_editOccSeriesDlg:!1,_deleteOccSeriesDlg:!1,_compOccSeriesDlg:!1,_processor:!1,_actCompleteQueue:!1,_histCompleteQueue:[],activityEditorType:b,eventEditorType:c,historyEditorType:g,constructor:function(){dojo.mixin(this,m)},_ensureEditor:function(){this._activityEditor||(this._activityEditor=new this.activityEditorType({id:"activityEditor"}),this.onActivityEditorCreated(this._activityEditor))},onActivityEditorCreated:function(a){},_ensureEventEditor:function(){this._eventEditor||(this._eventEditor=new this.eventEditorType,this.onEventEditorCreated(this._eventEditor))},onEventEditorCreated:function(a){},_ensureHistoryEditor:function(){this._historyEditor||(this._historyEditor=new this.historyEditorType({id:"historyEditor"}),this.onHistoryEditorCreated(this._historyEditor))},onHistoryEditorCreated:function(a){},_ensureProcessor:function(){this._processor||(this._processor=new e)},_getIdFromGridSelection:function(){var a=this.getSelectedItem();return!!a&&(a.hasCompositeKey?a.entity.Activity.$key:a.id)},_getRecurringFromGridSelection:function(){var a=!1,b=this.getSelectedItem();return b&&b.entity&&(b.entity.hasOwnProperty("Activity")?(a=!0===b.entity.Activity.Recurring)&&b.entity.Activity.RecurIterations<0&&(a=!1):(a=!0===b.entity.Recurring)&&b.entity.RecurIterations<0&&(a=!1)),a},editActivity:function(a,b,c){if(a||(a=this._getIdFromGridSelection(),b=this._getRecurringFromGridSelection()),a)return 12!==a.length||void 0!==b&&null!==b?void(12!==a.length||b?this.editOccurrenceOrSeriesQuery(a,c):(this._ensureEditor(),this._activityEditor.set("mode","Update"),this._activityEditor.set("activityId",a),this._activityEditor.set("activityMemberId",c),this._activityEditor.show())):void this._resolveActivityOccurence(a,c)},_resolveActivityOccurence:function(a,b){var c=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));c.setResourceKind("activities"),c.setQueryArg("select","Recurring"),c.setQueryArg("where",k.substitute("Id eq '${0}'",[a])),c.setQueryArg("precedence","0"),c.read({success:function(c){var d;c.$resources&&c.$resources.length>0&&(d=c.$resources[0].Recurring,d?this.editActivity(a,!0,b):this.editActivity(a,!1,b))},failure:function(){},scope:this})},editOccurrence:function(a,b,c){this._ensureEditor(),this._activityEditor.set("mode","Update"),this._activityEditor.set("activityId",a),this._activityEditor.set("activityMemberId",c),this._activityEditor.show()},editOccurrenceOrSeriesQuery:function(a,b){this._editOccSeriesDlg||(this._editOccSeriesDlg=new h({id:"editOccSeriesQuery",mode:"edit"}),dojo.connect(this._editOccSeriesDlg,"onSelectSeries",this,function(a,b){this.editActivity(a.substring(0,12),!1,b)}),dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(a,b,c){this.editOccurrence(a,b,c)})),this._editOccSeriesDlg.set("activityMemberId",b),this._editOccSeriesDlg.set("activityId",a),this._editOccSeriesDlg.show()},editTempActivity:function(a){this._ensureEditor(),this._activityEditor.set("mode","deleteOnCancel"),this._activityEditor.set("activityId",a),this._activityEditor.show()},completeOccurrenceOrSeriesQuery:function(a){this._compOccSeriesDlg||(this._compOccSeriesDlg=new h({id:"compOccSeriesQuery",mode:"complete"}),dojo.connect(this._compOccSeriesDlg,"onSelectSeries",this,function(a){this.completeActivity(a.substring(0,12),!1)}),dojo.connect(this._compOccSeriesDlg,"onSelectOccurrence",this,this.completeActivityOccurrence)),this._compOccSeriesDlg.set("activityId",a),this._compOccSeriesDlg.show()},scheduleActivity:function(a){var b=a.type||a.Type;if("CompleteActivity"===b)return void this.scheduleCompletedActivity(b,a);this._ensureEditor(),this._activityEditor.set("mode","New "+a.type||"Meeting"),a.hasOwnProperty("preConfigured")?this._activityEditor.show(a.preConfigured):this.getActivityEntityContext(this._activityEditor,function(a,b){a.show(b)})},completeActivityOccurrence:function(a,b){if(this._ensureEditor(),a.indexOf(";")<0){var c=["StartDate"],d=new i({include:[],select:c,resourceKind:"activities",service:j.getSDataService("system")});""!==a&&d.fetch({predicate:'"'+a+'"',onComplete:function(a){if(a){var b=l.Convert.toDateFromString(a.StartDate)/1e3+62135596800,c=a.$key+";"+b;this._activityEditor.set("mode","Complete"),this._activityEditor.set("activityId",c),this._activityEditor.show()}},scope:this})}else this._activityEditor.set("mode","Complete"),this._activityEditor.set("activityId",a),this._activityEditor.show()},completeActivity:function(a,b){var c=this._getSelectionContext(a,this.txtActivity,this.txtActivities);if(c.count>1)this.completeActivitiesInSelectionContext(c);else if(c.id){var d=c.id;if(c.selectionInfo&&c.selectionInfo.selections[0].entity){var e=c.selectionInfo.selections[0].entity;c.selectionInfo.hasCompositeKey&&(d=e.Activity.$key),12===d.length&&(e.hasOwnProperty("Activity")&&(e=e.Activity),(b=!0===e.Recurring)&&e.RecurIterations<0&&(b=!1))}12!==d.length||b?this.completeOccurrenceOrSeriesQuery(d):(this._ensureEditor(),this._activityEditor.set("mode","Complete"),this._activityEditor.set("activityId",d),this._activityEditor.show())}},_quickCompleteConnections:[],completeActivitiesInSelectionContext:function(a){if(!(a.count<1)){this._actCompleteQueue=a;var b={selectionContext:a},c=new d(b);this._quickCompleteConnections.push(dojo.connect(c,"onCompleteIndividually",this,"_completeActivitiesInQueue")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteNow",this,"_completeActivitiesNow")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteAsScheduled",this,"_completeActivitiesAsScheduled")),this._quickCompleteConnections.push(dojo.connect(c,"onCancel",this,function(){this._actCompleteQueue=!1})),this._quickCompleteConnections.push(dojo.connect(c._dialog,"onHide",this,"_quickCompleteHide")),c.show()}},_actEditorHideConnection:null,_quickCompleteHide:function(){this._completingActivitiesIndividually||(this._actCompleteQueue=!1),dojo.forEach(this._quickCompleteConnections,function(a){dojo.disconnect(a)}),this._quickCompleteConnections=[]},_completingActivitiesIndividually:!1,_completeActivitiesInQueue:function(){this._completingActivitiesIndividually=!0,this._ensureEditor(),this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._completeNextActivityInQueue),this._completeNextActivityInQueue()},_completeNextActivityInQueue:function(){var a=this._actCompleteQueue.selectionInfo.selections.pop(),b=a.id,c=!1;if(a.entity){var d=a.entity.hasOwnProperty("Activity")?a.entity.Activity:a.entity;this._actCompleteQueue.selectionInfo.hasCompositeKey&&(b=a.entity.Activity.$key),c=b.length>12||!0===d.Recurring}this.completeActivity(b,c),this._actCompleteQueues.selectionInfo.selections.length<1&&(dojo.disconnect(this._actEditorHideConnection),this._completingActivitiesIndividually=!1)},_completeActivitiesAsScheduled:function(b){var c={selectionInfo:b.selectionContext.selectionInfo,mode:"asScheduled",note:b.note,result:b.result,resultCode:b.resultCode},d=new f;d.set("OperationName","completeActivities"),d.set("PublishMap","/entity/activity/change"),d.set("args",c),d.execute({success:function(a){o.publish("/entity/activity/bulkComplete","true")},failure:function(){a.showError(this.txtErrorActionMsg)}})},_completeActivitiesNow:function(b){var c={selectionInfo:b.selectionContext.selectionInfo,mode:"completeNow",note:b.note,result:b.result,resultCode:b.resultCode},d=new Sage.Services.ActivityAction;d.set("OperationName","completeActivities"),d.set("PublishMap","/entity/activity/change"),d.set("Args",c),d.execute({success:function(a){o.publish("/entity/activity/bulkComplete","true")},failure:function(){
a.showError(this.txtErrorActionMsg)}})},completeHistoriesInList:function(a){if(!(a.length<1)){if(1===a.length)return void this.completeHistory(a[0]);this._histCompleteQueue=a;var b={selectionContext:{count:a.length,selectionInfo:{selectedIds:a}}};this._histCompleteQueue=a;var c=new d(b);this._quickCompleteConnections.push(dojo.connect(c,"onCompleteIndividually",this,"_completeHistoriesInQueue")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteNow",this,"_updateHistoriesFromQuickComplete")),this._quickCompleteConnections.push(dojo.connect(c,"onCompleteAsScheduled",this,"_updateHistoriesFromQuickComplete")),this._quickCompleteConnections.push(dojo.connect(c,"onCancel",this,"_cancelCompleteHistoryQueue")),this._quickCompleteConnections.push(dojo.connect(c._dialog,"onHide",this,"_quickCompleteHide")),c.show()}},completeHistory:function(a){this._ensureHistoryEditor(),this._historyEditor.set("historyId",a),this._historyEditor.set("mode","Complete"),this._historyEditor.show()},_histEditorHideConnection:null,_quickHistoryCompleteHide:function(){dojo.forEach(this._histEditorHideConnection,function(a){dojo.disconnect(a)}),dojo.forEach(this._actEditorHideConnection,function(a){dojo.disconnect(a)}),this._histEditorHideConnection=!1,this._actEditorHideConnection=!1},_completeHistoriesInQueue:function(){this._ensureHistoryEditor(),this._historyEditor._doingFollowup=!1,this._histEditorHideConnection=dojo.connect(this._historyEditor,"onHide",this,this._completeNextHisotryInQueue),this._completeNextHisotryInQueue()},_completeNextHisotryInQueue:function(a){if(this._histCompleteQueue.length<1)return dojo.disconnect(this._histEditorHideConnection),void dojo.disconnect(this._actEditorHideConnection);if(this._historyEditor._doingFollowup)return this._ensureEditor(),this._actEditorHideConnection&&dojo.disconnect(this._actEditorHideConnection),void(this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._followupCompleteNextHistoryInQueue));var b=this._histCompleteQueue.pop();this.completeHistory(b)},_followupCompleteNextHistoryInQueue:function(){this._historyEditor._doingFollowup=!1,this._completeNextHisotryInQueue()},_cancelCompleteHistoryQueue:function(){this._deleteHistoryFromQuickComplete()},_deleteHistoryFromQuickComplete:function(){for(var a=function(a){var b=new i({resourceKind:"history",service:j.getSDataService("dynamic")});b.fetch({predicate:'"'+a+'"',onComplete:function(a){b.deleteEntity(a,this,null,null)},onError:function(){},scope:this})},b=this._histCompleteQueue.length,c=0;c<b;c++)a(this._histCompleteQueue.pop())},_updateHistoriesFromQuickComplete:function(a){for(var b=function(b){var c=new i({resourceKind:"history",select:["LongNotes","Result","ResultCode"],service:j.getSDataService("dynamic")});c.fetch({predicate:'"'+b+'"',onComplete:function(b){b.Result=a.result||b.Result,b.ResultCode=a.resultCode||b.ResultCode,b.LongNotes=b.LongNotes?b.LongNotes+"\n"+a.note:a.note,c.save({scope:this,success:function(a){dojo.publish("/entities/history/create",a)},failure:function(){}})},onError:function(){},scope:this})},c=this._histCompleteQueue.length,d=0;d<c;d++)b(this._histCompleteQueue.pop())},completeNewActivity:function(a,b){this._ensureEditor(),b&&"object"==typeof b||(b={}),b.Type=b.Type||a||"atAppointment",this._activityEditor.set("mode","CompleteUnscheduled"),this._activityEditor.show(b)},deleteActivity:function(a,b,c){var d=this._getSelectionContext(a,this.txtActivity,this.txtActivities);if(a)return void(12===a.length&&!b||a.indexOf("ActivityId")>-1?this.deleteActivitiesInSelectionContext(d,c):this.deleteOccurrenceOrSeriesQuery(a));if(!(d.count<1)){if(d.count>1)this.deleteActivitiesInSelectionContext(d);else{var e=d.selectionInfo.selections[0];d.selectionInfo.hasCompositeKey?e.entity&&(a=e.entity.Activity.$key):a=e.id,b=!1,e.entity&&(b=e.entity.hasOwnProperty("Activity")?!0===e.entity.Activity.Recurring:!0===e.entity.Recurring)}a&&(12!==a.length||b?this.deleteOccurrenceOrSeriesQuery(a):this.deleteActivitiesInSelectionContext(d))}},deleteActivitiesInSelectionContext:function(a,b,c){if(!(a.count<1)){var d=this.txtActionDeleteActivites,e=String.format(this.txtActionDeleteActivitiesQuestion,a.count,a.name),g=new f,h={selectionInfo:a.selectionInfo};if(1===a.count){var i=a.selectionInfo.selections[0];i&&i.id&&i.id.indexOf("ActivityId")>-1?(g.set("PublishMapWithId","/entity/userActivity/delete"),g.set("ActivityId",i.id)):i&&(g.set("PublishMapWithId","/entity/activity/delete/single"),g.set("ActivityId",i.id))}if(g.set("OperationName","deleteActivities"),g.set("PublishMap","/entity/activity/delete"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",h),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",a),b)var j=dojo.connect(this._processor,"onActionComplete",this,function(a){dojo.disconnect(j),b.call(c||this,a)});this._processor.start()}},declineMemberConfirmation:function(a,b){if(a&&b){var c={$name:"DeclineMember",request:{entity:a,memberId:b}};new Sage.SData.Client.SDataServiceOperationRequest(j.getSDataService("dynamic")).setResourceKind("activities").setOperationName("DeclineMember").execute(c,{success:function(c){var d=k.substitute("'ActivityId=${0};UserId=${1}'",[a.$key,b]);o.publish("/entity/userActivity/delete",d)},failure:function(){},scope:this})}},deleteOccurrenceOrSeriesQuery:function(a){this._deleteOccSeriesDlg||(this._deleteOccSeriesDlg=new h({id:"deleteOccSeriesQuery",mode:"delete"}),dojo.connect(this._deleteOccSeriesDlg,"onSelectOccurrence",this,function(a){this.deleteOccurrence(a)}),dojo.connect(this._deleteOccSeriesDlg,"onSelectSeries",this,function(a){this.deleteAllOccurrence(a)})),this._deleteOccSeriesDlg.set("activityId",a),this._deleteOccSeriesDlg.show()},deleteOccurrence:function(a){var b=this._getSelectionContext(a,this.txtActivity,this.txtActivities);this.deleteActivitiesInSelectionContext(b)},deleteAllOccurrence:function(a){var b=this._getSelectionContext(a,this.txtActivity,this.txtActivities);if(!(b.count<1)){var c=this.txtActionDeleteActivites,d=String.format(this.txtActionDeleteActivitiesQuestion,b.count,b.name),e=new f,g={selectionInfo:b.selectionInfo};if(1===b.count){var h=b.selectionInfo.selections[0];h&&(e.set("PublishMapWithId","/entity/activity/delete/recurrence"),e.set("ActivityId",h.id))}e.set("OperationName","deleteAllOccurrence"),e.set("PublishMap","/entity/activity/delete"),e.set("ActionDescription",c),e.set("ActionMessage",d),e.set("Args",g),this._ensureProcessor(),this._processor.set("Action",e),this._processor.set("SelectionContext",b),this._processor.start()}},snooze:function(a,b){var c=this._getSelectionContext(a,this.txtAlarm,this.txtAlarms),d=this.txtActionSnoozeAlarm,e=String.format(this.txtActionSnoozeQuestion,c.count,c.name,b.name),g=new f,h={selectionInfo:c.selectionInfo,interval:b.interval,duration:b.duration};g.set("OperationName","SnoozeAlarms"),g.set("PublishMap","/entity/UserActivity/change"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",h),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",c),this._processor.start()},snoozeAll:function(a){var b=null,c=this._getSelectionContext(b,this.txtAlarm,this.txtAlarms);c.mode="ALL";var d=this.txtActionSnoozeAlarm,e=String.format(this.txtActionSnoozeAllQuestion,c.name,a.name),g=new f,h={selectionInfo:c.selectionInfo,interval:a.interval,duration:a.duration};g.set("OperationName","SnoozeAlarms"),g.set("PublishMap","/entity/UserActivity/change"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",h),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",c),this._processor.start()},dismissAlarm:function(a){var b=this._getSelectionContext(a,this.txtAlarm,this.txtAlarms),c=this.txtActionDismissAlarms,d=String.format(this.txtActionDismissAlarmsQuestion,b.count,b.name),e=new f,g={selectionInfo:b.selectionInfo};e.set("OperationName","DismissAlarms"),e.set("ActionDescription",c),e.set("ActionMessage",d),e.set("PublishMap","/entity/UserActivity/change"),e.set("Args",g),this._ensureProcessor(),this._processor.set("Action",e),this._processor.set("SelectionContext",b),this._processor.start()},scheduleCompletedActivity:function(a){a?(this._ensureHistoryEditor(),this._historyEditor.set("activityType",a),this._historyEditor.set("mode","New"),this._historyEditor.set("historyId",""),this.getActivityEntityContext(this._historyEditor,function(a,b){a.show(b)})):alert("Show Schedule Completed Dialog")},insertNote:function(){this._ensureHistoryEditor(),this._historyEditor.set("activityType","Note"),this._historyEditor.set("mode","New"),this._historyEditor.set("historyId",""),this.getActivityEntityContext(this._historyEditor,function(a,b){a.show(b)})},editHistory:function(a){a||(a=this.getSelectedId()),a&&(this._ensureHistoryEditor(),this._historyEditor.set("mode","Edit"),this._historyEditor.set("historyId",a),this._historyEditor.show())},scheduleEvent:function(a){this._ensureEventEditor(),this._eventEditor.set("mode","New"),this._eventEditor.set("eventId",""),this._eventEditor.show(a)},editEvent:function(a){a||(a=this.getSelectedId()),a&&(this._ensureEventEditor(),this._eventEditor.set("mode","Update"),this._eventEditor.set("eventId",a),this._eventEditor.show())},deleteEvent:function(a){var b=this._getSelectionContext(a,this.txtEvent,this.txtEvents),c=this.txtActionDeleteEvents,d=String.format(this.txtActionDeleteEventsQuestion,b.count,b.name),e={selectionInfo:b.selectionInfo},g=new f;if(1===b.count){var h=b.selectionInfo.selections[0];h&&(g.set("PublishMapWithId","/entity/event/delete/single"),g.set("ActivityId",h.id))}g.set("OperationName","deleteEvents"),g.set("PublishMap","/entity/event/delete"),g.set("ActionDescription",c),g.set("ActionMessage",d),g.set("Args",e),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",b),this._processor.start()},confirmActivityFor:function(a,b,c,d){a&&(a=a.substring(0,12));var e=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));e.setResourceKind("userNotifications"),e.setQueryArg("where",k.substitute("ActivityId eq '${0}' and ToUser.Id eq '${1}'",[a,b])),e.setQueryArg("precedence","0"),e.read({success:function(e){e.$resources&&e.$resources.length>0?c?c.call(d||this,e.$resources[0].$key):this.editConfirmation(e.$resources[0].$key,b):this.editActivity(a,!1)},failure:function(){},scope:this})},editActivityIfConfirmed:function(a,b){a||(a=this._getIdFromGridSelection(),b=this._getRecurringFromGridSelection());var c=l.getClientContextByKey("userID"),d=k.substitute('"${0};${1}"',[a.indexOf(";")>0?a.substring(0,12):a,c]);new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("dynamic")).setResourceKind("userActivities").setResourceSelector(d).read({success:function(d){"asUnconfirmed"===d.Status?this.confirmActivityFor(a,c):this.editActivity(a,b)},failure:function(){this.editActivity(a,b)},scope:this})},editConfirmation:function(a,b){a||(a=this.getSelectedId()),a&&(this._ensureEditor(),this._activityEditor.set("mode","Confirm"),this._activityEditor.set("userNotificationId",a),this._activityEditor.set("activityMemberId",b),this._activityEditor.show())},acceptConfirmation:function(a){var b=!1;if(a)if(a.id)b=a.id;else if(a.notification){a.notes&&(a.notification.Notes=a.notes);var c={$name:"Accept",request:{entity:a.notification,UserNotificationId:a.notification.$key}},d=new Sage.SData.Client.SDataServiceOperationRequest(j.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("accept");return void d.execute(c,{success:a.success||function(){},failure:a.failure||function(){},scope:a.scope||this})}var e=this._getSelectionContext(b,this.txtConfirmation,this.txtConfirmations);if(e.count>1){var g={selectionInfo:e.selectionInfo,mode:"accept",note:""},h=this.txtActionAcceptConfirmations,i=String.format(this.txtActionAcceptConfirmQuestion,e.count,e.name),k=new f;k.set("OperationName","acceptConfirmations"),k.set("PublishMap","/entity/userNotification/change"),k.set("ActionDescription",h),k.set("ActionMessage",i),k.set("Args",g),this._ensureProcessor(),this._processor.set("Action",k),this._processor.set("SelectionContext",e),this._processor.start()}else this.editConfirmation(e.id)},declineConfirmation:function(a){var b=!1;if(a)if(a.id)b=a.id;else if(a.notification){a.notes&&(a.notification.Notes=a.notes);var c={$name:"Decline",request:{entity:a.notification,UserNotificationId:a.notification.$key}},d=new Sage.SData.Client.SDataServiceOperationRequest(j.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("decline");return void d.execute(c,{success:a.success||function(){},failure:a.failure||function(){},scope:a.scope||this})}var e=this._getSelectionContext(b,this.txtConfirmation,this.txtConfirmations);if(e.count>1){var g={selectionInfo:e.selectionInfo,mode:"decline",note:""},h=this.txtDeclineConfirmations,i=String.format(this.txtActionDeclineConfrimQuestion,e.count,e.name),k=new f;k.set("OperationName","declineConfirmations"),k.set("PublishMap","/entity/userNotification/change"),k.set("ActionDescription",h),k.set("ActionMessage",i),k.set("Args",g),this._ensureProcessor(),this._processor.set("Action",k),this._processor.set("SelectionContext",e),this._processor.start()}else this.editConfirmation(e.id)},deleteConfirmation:function(a){var b=this._getSelectionContext(a,this.txtConfirmation,this.txtConfirmations),c={selectionInfo:b.selectionInfo},d=this.txtActionRemoveConfirmations,e=String.format(this.txtActionRemoveConfirmationsQuestion,b.count,b.name),g=new f;g.set("OperationName","deleteConfirmations"),g.set("PublishMap","/entity/userNotification/change"),g.set("ActionDescription",d),g.set("ActionMessage",e),g.set("Args",c),this._ensureProcessor(),this._processor.set("Action",g),this._processor.set("SelectionContext",b),this._processor.start()},goToActivityAssociation:function(a,b){b||(b=this.getSelectedId()),b&&this._getActivityAssociationId(a,b,function(b){var c="";switch(b.Association){case"Account":c=b.AccountId;break;case"Contact":c=b.ContactId;break;case"Opportunity":c=b.OpportunityId;break;case"Lead":c=b.LeadId;break;case"Ticket":c=b.TicketId}c&&Sage.Link.entityDetail(a,c)})},goToLitRequest:function(a){a||(a=this.getSelectedId()),a&&Sage.Link.entityDetail("LitRequest",a)},scheduleLitRequest:function(){document.location.href="Literature.aspx?modeid=Insert"},deleteLitRequest:function(a){var b=this._getSelectionContext(a,this.txtLiteratureRequest,this.txtLiteratureRequests),c=this.txtActionDeleteLiteratureRequests,d=String.format(this.txtActionDeleteLiteratureRequestsQuestion,b.count,b.name),e=new f,g={selectionInfo:b.selectionInfo};e.set("Args",g),e.set("OperationName","deleteLitRequests"),e.set("ActionDescription",c),e.set("ActionMessage",d),e.set("PublishMap","/entity/litRequest/change"),this._ensureProcessor(),this._processor.set("Action",e),this._processor.set("SelectionContext",b),this._processor.start()},getActivityEntityContext:function(a,b){var c=Sage.Services.getService("ClientEntityContext"),d=c.getContext(),e=d.EntityType,f=d.EntityId,g={};if(""===f||"Insert"===f)return void(b&&b(a,g));switch(e){case"Sage.Entity.Interfaces.IAccount":this.getAccountContext(d,a,b);break;case"Sage.Entity.Interfaces.IContact":this.getContactContext(d,a,b);break;case"Sage.Entity.Interfaces.IOpportunity":this.getOpportunityContext(d,a,b);break;case"Sage.Entity.Interfaces.ILead":this.getLeadContext(d,a,b);break;case"Sage.Entity.Interfaces.ITicket":this.getTicketContext(d,a,b);break;case"Sage.Entity.Interfaces.IReturn":this.getReturnContext(d,a,b);break;default:b&&b(a,g)}},getAccountContext:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("accounts");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+a.EntityId+'"',d.uri.setPathSegment(e+1,"Contacts"),d.setQueryArg("select","NameLF,IsPrimary,WorkPhone"),d.setQueryArg("orderby","IsPrimary desc"),d.setQueryArg("count","1"),d.read({success:function(d){var e={AccountId:a.EntityId,AccountName:a.Description,ContactId:"",ContactName:"",PhoneNumber:""},f=d.$resources;if(f.length>0){var g=f[0];e.ContactId=l.getValue(g,"$key"),e.ContactName=l.getValue(g,"NameLF"),e.PhoneNumber=l.getValue(g,"WorkPhone")}c&&c(b,e)},failure:function(){var d={AccountId:a.EntityId,AccountName:a.Description,ContactId:"",ContactName:"",PhoneNumber:""};c&&c(b,d)},scope:this})},getContactContext:function(a,b,c){var d=new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("dynamic"));d.setResourceKind("contacts"),d.setResourceSelector('"'+a.EntityId+'"'),d.setQueryArg("select","NameLF,IsPrimary,WorkPhone,Account,AccountName"),d.read({success:function(d){var e={AccountId:l.getValue(d,"Account.$key"),AccountName:l.getValue(d,"AccountName"),ContactId:a.EntityId,ContactName:l.getValue(d,"NameLF"),PhoneNumber:l.getValue(d,"WorkPhone")};c&&c(b,e)},failure:function(){var d={AccountId:"",AccountName:"",ContactId:a.EntityId,ContactName:a.Description,PhoneNumber:""};c&&c(b,d)},scope:this})},getOpportunityContext:function(a,b,c){new i({include:["Contacts","Account"],select:["Description","Contacts/IsPrimary","Contacts/Contact/NameLF","Contacts/Contact/WorkPhone","Account/Id","Account/AccountName"],resourceKind:"opportunities",service:j.getSDataService("dynamic")}).fetch({predicate:'"'+a.EntityId+'"',onComplete:function(d){for(var e={AccountId:d.Account.$key,AccountName:d.Account.AccountName,ContactId:"",ContactName:"",OpportunityId:a.EntityId,OpportunityName:d.Description,PhoneNumber:""},f=d.Contacts.$resources,g=!0,h=0;h<f.length;h++)(f[h].IsPrimary||g)&&(e.ContactId=f[h].Contact.$key,e.ContactName=f[h].Contact.NameLF,e.PhoneNumber=f[h].Contact.WorkPhone||""),g=!1;c&&c(b,e)},onError:function(){var d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",OpportunityId:a.EntityId,OpportunityName:a.Description,PhoneNumber:""};c&&c(b,d)},scope:this})},getLeadContext:function(a,b,c){new i({include:[],select:["LeadFullName","Company","WorkPhone"],resourceKind:"leads",service:j.getSDataService("dynamic")}).fetch({predicate:'"'+a.EntityId+'"',onComplete:function(d){var e={LeadId:a.EntityId,LeadName:d.LeadFullName,AccountName:d.Company,PhoneNumber:d.WorkPhone};c&&c(b,e)},onError:function(){var d={LeadId:a.EntityId,LeadName:a.Description,AccountName:"",PhoneNumber:""};c&&c(b,d)},scope:this})},getTicketContext:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("tickets");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+a.EntityId+'"',d.setQueryArg("select","Account,Account/AccountName,Contact,Contact/NameLF,Contact/WorkPhone"),d.read({success:function(d){var e={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:a.EntityId,TicketNumber:a.Description,PhoneNumber:""},f=d.$resources;if(f.length>0){var g=f[0];e.AccountId=l.getValue(g,"Account.$key"),e.AccountName=l.getValue(g,"Account.AccountName"),e.ContactId=l.getValue(g,"Contact.$key"),e.ContactName=l.getValue(g,"Contact.NameLF"),e.PhoneNumber=l.getValue(g,"Contact.WorkPhone")}c&&c(b,e)},failure:function(){var d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:a.EntityId,TicketNumber:a.Description,PhoneNumber:""};c&&c(b,d)},scope:this})},getReturnContext:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("returns");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+a.EntityId+'"',d.setQueryArg("select","Account,Account/AccountName,ReturnedBy,ReturnedBy/NameLF,ReturnedBy/WorkPhone,Ticket,Ticket/TicketNumber"),d.read({success:function(a){var d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""},e=a.$resources;if(e.length>0){var f=e[0];d.AccountId=l.getValue(f,"Account.$key"),d.AccountName=l.getValue(f,"Account.AccountName"),d.ContactId=l.getValue(f,"ReturnedBy.$key"),d.ContactName=l.getValue(f,"ReturnedBy.NameLF"),d.PhoneNumber=l.getValue(f,"ReturnedBy.WorkPhone"),d.TicketNumber=l.getValue(f,"Ticket.TicketNumber"),d.TicketId=l.getValue(f,"Ticket.$key")}c&&c(b,d)},failure:function(){var a={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""};c&&c(b,a)},scope:this})},_getActivityAssociationId:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(j.getSDataService("dynamic"));d.setResourceKind("activities");var e=d.uri.pathSegments.length-1;d.uri.getPathSegment(e).predicate='"'+b+'"',d.setQueryArg("select","AccountId,ContactId,OpportunityId,TicketId,LeadId"),d.read({success:function(d){var e={Association:a,ActivityId:b,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""},f=d.$resources;if(f.length>0){var g=f[0];e.AccountId=l.getValue(g,"AccountId"),e.ContactId=l.getValue(g,"ContactId"),e.OpportunityId=l.getValue(g,"OpportunityId"),e.TicketId=l.getValue(g,"TicketId"),e.LeadId=l.getValue(g,"LeadId")}c&&c(e)},failure:function(){var d={Association:a,ActivityId:b,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""};c&&c(d)},scope:this})},getActivityFreeBusyFor:function(a,b,c,d){var e=this;this.getResourceActivitiesFor(e,b,function(f){e.getUserActivitiesFor(e,b,function(b){var d=e._buildFreeBusyData(f,b);c&&c.call(a,d)},function(b){d&&d.call(a,b)})},function(b){d&&d.call(a,b)})},getResourceActivitiesFor:function(a,b,c,d){var e=["Timeless","Type","StartDate","Duration","Description","Resources/Resource"],f=["$descriptors"],g=j.getSDataService("system"),h=l.Convert.toIsoStringFromDate(b.startDate),i=l.Convert.toIsoStringFromDate(b.endDate),k=this,m="(Resources.ResourceId in ("+b.quotedIds.join(",")+"))"+dojo.string.substitute("and (Timeless ne true) and (StartDate between @${0}@ and @${1}@)",[h,i]),n=new Sage.SData.Client.SDataResourceCollectionRequest(g);b.select&&(e=b.select),n.setResourceKind("activities"),n.setQueryArg("select",e.join(",")),n.setQueryArg("where",m),n.setQueryArg("include",f.join(",")),n.uri.queryArgs._expandRecurrences=b.expandRecurrences,n.read({success:function(b){if(c){var d=k._processResourceActivityData(b);c.call(a,d)}},failure:dojo.hitch(a,d)})},getUserActivitiesFor:function(a,b,c,d){var e=["Timeless","Type","StartDate","Duration","Description","Leader","UserActivities/User","UserActivities/Status"],f=["$descriptors"],g=j.getSDataService("system"),h=l.Convert.toIsoStringFromDate(b.startDate),i=l.Convert.toIsoStringFromDate(b.endDate),k=this,m="(UserActivities.UserId in ("+b.quotedIds.join(",")+")) and (Type ne 'atLiterature') and (UserActivities.Status ne 'asDeclned')"+dojo.string.substitute("and (StartDate between @${0}@ and @${1}@)",[h,i]),n=new Sage.SData.Client.SDataResourceCollectionRequest(g);b.timelessOnly?m+=" and (Timeless eq true)":b.includeTimless||(m+=" and (Timeless ne true)"),b.select&&(e=b.select),n.setResourceKind("activities"),n.setQueryArg("select",e.join(",")),n.setQueryArg("where",m),n.setQueryArg("include",f.join(",")),n.uri.queryArgs._expandRecurrences=b.expandRecurrences,n.read({success:function(b){var d=k._processUserActivityData(b);c&&c.call(a,d)},failure:dojo.hitch(a,d)})},_processUserActivityData:function(a){var b=[];b.$resources=[];var c,d,e=a.$resources;if(e)for(var f=e.length,g=0;g<f;g++){var h=!1,i=e[g].$key;if(e[g].UserActivities)for(var j=e[g].UserActivities.$resources,k=j.length,l=0;l<k;l++){var m=e[g].UserActivities.$resources[l].User.$key;c=m+":"+i,h=b[c],h||(d={$Key:c,UserId:e[g].UserActivities.$resources[l].User.$key,ActivityId:i,UserActivity:e[g].UserActivities.$resources[l],Activity:e[g]},b[c]=d,b[c]=c,b.$resources.push(d))}else{var n=e[g].Leader.$key;c=n+":"+i,e[g].UserActivities=[],e[g].UserActivities.$resources=[];var o={};o.$key=n,o.User={$key:n},e[g].UserActivities.$resources.push(o),d={$key:c,UserId:e[g].Leader.$key,ActivityId:i,UserActivity:e[g].UserActivities.$resources,Activity:e[g]},h=b[c],h||(b[c]=c,b.$resources.push(d))}}var p=[];return p.$resources=b.$resources,p},_processResourceActivityData:function(a){var b=[];b.$resources=[];var c=a.$resources;if(c)for(var d=c.length,e=0;e<d;e++){var f=c[e].$key;if(c[e].Resources)for(var g=c[e].Resources.$resources,h=g.length,i=0;i<h;i++){var j=c[e].Resources.$resources[i].Resource.$key,k=j+":"+f;if(b[k]);else{var l={$Key:k,ResourceId:j,ActivityId:f,ResourceActivity:c[e].Resources.$resources[i],Activity:c[e]};b[k]=l,b[k]=k,b.$resources.push(l)}}}var m=[];return m.$resources=b.$resources,m},_buildFreeBusyData:function(a,b){var c,d,e=a.$resources,f=b.$resources,g=[];for(g.$resources=[],c=0;c<f.length;c++)d={id:f[c].$key,activityId:f[c].ActivityId,itemId:f[c].UserId,type:f[c].Activity.Type,startDate:f[c].Activity.StartDate,duration:f[c].Activity.Duration,timless:f[c].Activity.Timeless,description:f[c].Activity.Description},g.$resources.push(d);for(c=0;c<e.length;c++)d={id:e[c].$key,activityId:e[c].ActivityId,itemId:e[c].ResourceId,type:e[c].Activity.Type,startDate:e[c].Activity.StartDate,duration:e[c].Activity.Duration,timless:e[c].Activity.Timeless,description:e[c].Activity.Description},g.$resources.push(d);return g},getDefaultActivityManagerTabId:function(){if(!this._defaultActivitManagerTabId){var a=Sage.Services.getService("UserOptions"),b=this;a&&a.get("DefaultView","ActivityAlarm",function(a){b._defaultActivitManagerTabId=b.getTabIdFromCode(a.value)},null,this,!1)}return this._defaultActivitManagerTabId},setDefaultActivityManagerTabId:function(a){this._defaultActivitManagerTabId=a},getTabIdFromCode:function(a){var b="activities";switch(a){case"0":b="activities";break;case"1":b="allopen";break;case"2":b="pastdue";break;case"3":b="alarms";break;case"4":b="events";break;case"5":b="confirmations";break;case"6":b="literature"}return b},getSelectedId:function(){var a=this.getSelectionInfo(),b="";if(a){if(a.hasCompositeKey){return a.selections[0].entity.Activity.$key}b=(a.selections.length,a.selections[0].id)}return b},getSelectedItem:function(){var a=this.getSelectionInfo(),b={id:!1,hasCompositeKey:!1,entity:!1};return a&&(b.hasCompositeKey=a.hasCompositeKey,b.entity=a.entity,a.selections.length,b.id=a.selections[0].id,b.entity=a.selections[0].entity),b},getSelections:function(){var a=this.getSelectionInfo(),b=null;return a&&(b=a.selections),b},prepareSelections:function(){return this.getSelectionInfo()},getSelectionInfo:function(){var b=!1;try{var c=dijit.byId("list");c&&(b=c.getSelectionInfo(!0))}catch(b){a.alert(this.txtErrorActionMsg||"error getting selectionInfo")}return b},getTotalSelectionCount:function(){var a=0;try{var b=dijit.byId("list");b&&(a=b.getTotalSelectionCount())}catch(a){}return a},verifySelection:function(a){return null!==a&&0!==a.selectionCount},verifySingleSelection:function(a){return null!==a&&1===a.selectionCount},setSelectionCount:function(){try{var a=dijit.byId("list");a&&$("#selectionCount").text(a.getTotalSelectionCount())}catch(a){}},refreshList:function(a){try{var b=dijit.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}},_getSelectionContext:function(a,b,c){var d={id:null,selectionInfo:null,count:0,mode:"select",name:null};if(a){var e=[],f=[];e.push(a),f.push({rn:0,id:a});var g={key:"",mode:"singleSelect",selectionCount:1,recordCount:1,sortDirection:"",sortField:"",keyField:"",hasCompositeKey:a.indexOf("Activity")>-1,ranges:[],selections:f,selectedIds:e};d.selectionInfo=g,d.id=a,d.count=1}else d.selectionInfo=this.getSelectionInfo(),d.count=d.selectionInfo.selectionCount,1===d.count&&(d.id=d.selectionInfo.selectedIds[0]);return d.name=d.count>1?c:b,d},getActivityService:function(){return j.getSDataService("dynamic")}});return Sage.Services.hasService("ActivityService")||Sage.Services.addService("ActivityService",new q),q})},"Sage/MainView/ActivityMgr/ActivityEditor":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/string","Sage/UI/Dialogs","dijit/Tooltip","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Controls/Lookup","dojo/i18n!./nls/ActivityEditor","dojo/text!./templates/ActivityEditor.html","dojo/dom-class","Sage/Utility/UserOptions","dijit/focus","dojo/aspect","Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab","dijit/layout/ContentPane","dojo/dom-style","dojo/on","dojo/dom-geometry","dijit/Toolbar","dijit/layout/TabContainer","dijit/form/Textarea","dojox/layout/TableContainer","dijit/layout/BorderContainer","dijit/form/ComboBox","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","Sage/MainView/ActivityMgr/RecurringEditor","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_Widget,_Templated,declare,SingleEntrySDataStore,BindingsManager,utility,_DialogHelpIconMixin,dojoLang,_DialogLoadingMixin,activityUtility,dojoDate,locale,dString,sageDialogs,tooltip,AttachmentList,sDataServiceRegistry,fileUtility,attachmentUtility,Lookup,activityEditorStrings,template,domClass,userOptionsUtility,focusUtil,aspect,ActivityEditorAttendeesTab,ContentPane,domStyle,on,domGeometry){var activityEditor=declare("Sage.MainView.ActivityMgr.ActivityEditor",[_Widget,_Templated],{activityId:"",activityMemberId:"",_memberSecurityData:[],mode:"",userNotificationId:"",id:"",activityType:"",_options:{},_dialog:!1,_currentUserId:null,_originalLeaderId:!1,_activityService:!1,_activityData:!1,_activityStore:!1,_currentUserActivityData:!1,_tempUAData:!1,_currentUserActivityStore:!1,_notificationData:!1,_notificationStore:!1,_notificationBindingMgr:!1,_historyStore:!1,_deleteAttendeeConnects:[],_attendeesData:[],_newAttendeesData:[],_attendeesForRemoval:[],_userActivitiesRequestCount:0,_resourceRequestCount:0,_resourceDeleteRequestCount:0,_availabilityShowing:!1,_bindingMgr:!1,_uaBindingMgr:!1,_activityChangeConnection:!1,lup_Account:!1,lup_Contact:!1,lup_Opportunity:!1,lup_Ticket:!1,lup_Lead:!1,lup_Leader:!1,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},resourcesLookupConfig:{},_isBinding:!1,_activitySaved:!1,_userActivitiesSaved:!1,_currentUserActivitySaved:!1,_resourcesSaved:!1,_resourcesRemoved:!1,_attachmentsSaved:!1,_completeAfterSaving:!1,_attachmentList:!1,_tempIdForAttachments:!1,confirmationDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_Alarm","sel_AlarmDur","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","ta_Notes","pk_Priority","lup_Leader","pk_Category"],noEditDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","pk_Priority","lup_Leader","pk_Category"],_readOnlyMode:!1,_isProcessing:!1,_DHTMLXLibraryTimePattern:"",eventConnections:[],activityDefaultValues:{},widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){dojoLang.mixin(this,activityEditorStrings),this._preloadActivityOptions(),this._activityService=sDataServiceRegistry.getSDataService("system"),this._setupStore(),this._currentUserId=utility.getClientContextByKey("userID")||"",this._currentUserId=this._currentUserId.trim(),dojo.subscribe("/entity/attachment/create",this,this._updateActivityETag),dojo.subscribe("/entity/attachment/update",this,this._updateActivityETag),dojo.subscribe("/entity/attachment/delete",this,this._updateActivityETag)},destroy:function(){
this._activityChangeConnection&&(dojo.disconnect(this._activityChangeConnection),this._activityChangeConnection=!1),this._bindingMgr&&this._bindingMgr.destroy(),this._uaBindingMgr&&this._uaBindingMgr.destroy();for(var a=0;a<this.eventConnections.length;a++)dojo.disconnect(this.eventConnections[a]);this.lup_Account.destroy(),this.lup_Contact.destroy(),this.lup_Opportunity.destroy(),this.lup_Ticket.destroy(),this.lup_Lead.destroy(),this.lup_Leader.destroy(),this.eventConnections=[],this.inherited(arguments)},postCreate:function(){this._asScheduledTooltip=new tooltip({connectId:[this.btn_asScheduled.id],label:" ",position:["below"]}),dojo.connect(this.dtp_scheduledDate,"onChange",this,function(){this._asScheduledTooltip.set("label",locale.format(this.dtp_scheduledDate.get("value"),{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}))}),this._nowTooltip=new tooltip({connectId:[this.btn_Now.id],label:" ",position:["below"]}),dojo.connect(this.dtp_completedDate,"onChange",this,function(){this._nowTooltip.set("label",locale.format(this.dtp_completedDate.get("value"),{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}))}),dojo.subscribe("/entity/activityAttendee/primaryChanged",this,this.primaryChanged),dojo.subscribe("/entity/activityAttendee/add",this,this._updateActivityAttendeeETag),dojo.subscribe("/entity/activityAttendee/delete",this,this._updateActivityAttendeeETag)},primaryChanged:function(a,b,c){var d=dojoLang.clone(a);d.attendeeTab=!0,d.$descriptor=d.Name,d.$key=d.EntityId,"Contact"==d.EntityType?(d.Account||(d.Account={$key:d.AccountId,AccountName:d.AccountName||d.Company}),d.ContactId=d.EntityId,d.PrimaryChecked?(this.rdo_Contact.set("checked",!0),this.rdo_Lead.set("checked",!1),this.lup_Contact.set("selectedObject",d),this.attendeesTab._uncheckItem=d):this.lup_Contact.set("selectedObject",null)):"Lead"==d.EntityType&&(d.Company=d.AccountName,d.LeadFullName=d.Name,d.LeadId=d.EntityId,d.PrimaryChecked?(this.rdo_Contact.set("checked",!1),this.rdo_Lead.set("checked",!0),this.lup_Lead.set("selectedObject",d),this.attendeesTab._uncheckItem=d):this.lup_Lead.set("selectedObject",null))},isFirstOpen:!0,show:function(a){this._isProcessing=!1,this._dialog.set("refocus",!1),this._dialog.show(),this.isFirstOpen&&(this.isFirstOpen=!1,this._ensureLookupsCreated(),this.connect(this._recurringEditor,"onStartDateChanged",this._recurringStartDateChanged),this.connect(this._recurringEditor,"onRecurPeriodChanged",this._recurringPeriodChanged),this.connect(this._dialog,"onHide",this._cleanOnClose),this._ensureAttachmentList()),this.sel_AlarmDur.resetItems(),this.activityDefaultValues={},"New"===this.mode&&(this.activityDefaultValues=a||{},this._loadData()),"CompleteUnscheduled"!==this.mode||this.historyId||(this.activityDefaultValues=a||{},this._loadHistory()),this._dialog._standby||(dojoLang.mixin(this._dialog,new _DialogLoadingMixin),this._activityData||this._notificationData||this._dialog.showLoading()),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new _DialogHelpIconMixin),this._dialog.createHelpIconByTopic(this._getHelpTopicByMode())),this._availabilityShowing=!1,this.tc_EditActivity.selectChild(this.cp_General),this._dialog.resize()},hide:function(){this._dialog.hide()},_onDlgHide:function(){this.onHide()},onHide:function(){this.attendeesTab._dialogHide(),this._cleanOnClose()},_cleanOnClose:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this.set("activityId",""),this.set("activityMemberId",""),this._activityStore&&this._activityStore.clearCache(),this._historyStore&&this._historyStore.clearCache(),this._hideLookupTooltip(this.lup_Account),this._hideLookupTooltip(this.lup_Contact),this._hideLookupTooltip(this.lup_Opportunity),this._hideLookupTooltip(this.lup_Ticket),this._hideLookupTooltip(this.lup_Lead),this._hideLookupTooltip(this.lup_Leader)},_hideLookupTooltip:function(a){a&&a.hideTooltip()},_controllOnMouseEnter:function(){},_updateActivityETag:function(a){if(a?this._activityData.AttachmentCount++:this._activityData.AttachmentCount--,this._dialog.open&&this.activityId){var b=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));b.setResourceKind("activities"),b.setResourceSelector('"'+this.activityId+'"'),b.setQueryArg("precedence","0"),b.read({success:function(a){this._activityData.$etag=a.$etag},scope:this})}},_updateActivityAttendeeETag:function(a){if(this._dialog.open&&this.activityId){this.AttCount=a;var b=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));b.setResourceKind("activities"),b.setResourceSelector('"'+this.activityId+'"'),b.setQueryArg("precedence","0"),b.setQueryArg("select","details/AttendeeCount"),b.read({success:function(a){this._activityData.$etag=a.$etag,a.Details&&(this._activityData.Details.AttendeeCount=a.Details.AttendeeCount)},scope:this})}},_ensureAttendeesTab:function(){this.attendeesTab&&this.mode==this.attendeesTab.editorMode&&this.activityId===this.attendeesTab._activityId||(this._addAttendeesTab(this.mode),this.userNotificationId=null)},_addAttendeesTab:function(a){this.attendeesTab&&(dijit.byId(this.tc_EditActivity.id).removeChild(dijit.byId("attendeesTabPane")),dijit.byId(this.attendeesTab.lup_Lead.id)&&dijit.byId(this.attendeesTab.lup_Lead.id).destroyRecursive(),dijit.byId(this.attendeesTab.lup_Contact.id)&&dijit.byId(this.attendeesTab.lup_Contact.id).destroyRecursive(),dijit.byId("attendeesTabPane").destroyRecursive(),this.attendeesTab=null);var b={editorMode:a},c=this.attendeesTab=new ActivityEditorAttendeesTab(b),d=new ContentPane({id:"attendeesTabPane",title:this.tabNameParticipants,class:"tabContent remove-padding"},c.domNode);this.tc_EditActivity.addChild(d),c.actEditor=this;var e=!0;("Confirm"===this.mode||this._isOccurence())&&(e=!1),c.startup(!e),on(d,"show",function(){e?c.setToReadOnly(!1):c.setToReadOnly(!0),c._tabShow()})},_getHelpTopicByMode:function(){switch(this.mode){case"Confirm":return"confirmnotifications";case"Complete":case"CompleteUnscheduled":return"completeactivity"}return"activitydetailview"},_showCorrectButtonBar:function(a){"Confirm"===a?(domClass.add(this.add_edit_buttons,"display-none"),domClass.add(this.complete_buttons,"display-none"),domClass.remove(this.confirmation_edit_buttons,"display-none")):"Complete"===a||"CompleteUnscheduled"===a?(domClass.add(this.add_edit_buttons,"display-none"),domClass.add(this.confirmation_edit_buttons,"display-none"),domClass.remove(this.complete_buttons,"display-none")):(domClass.add(this.confirmation_edit_buttons,"display-none"),domClass.add(this.complete_buttons,"display-none"),domClass.remove(this.add_edit_buttons,"display-none"))},_setModeAttr:function(a){var b;if(this.mode=a,this._showCorrectButtonBar(a),"Confirm"===a?(this._ensureLookupsCreated(),this._bulkSetProperty(this,this.confirmationDisableList,"disabled",!0)):this._bulkSetProperty(this,this.confirmationDisableList,"disabled",!1),0===a.indexOf("New")){this.mode="New";switch(a.replace("New ","").toLowerCase()){case"phonecall":case"atphonecall":this.activityType="atPhoneCall";break;case"meeting":case"atappointment":this.activityType="atAppointment";break;case"todo":case"attodo":this.activityType="atToDo";break;case"personalactivity":case"atpersonal":case"personal":this.activityType="atPersonal";break;case"letter":case"atletter":case"doc":case"atdoc":this.activityType="atDoc";break;case"fax":case"atfax":this.activityType="atFax";break;default:this.activityType="atAppointment"}this._activityData=!1,domClass.add(this.btn_Delete.domNode,"display-none"),domClass.add(this.btn_Complete.domNode,"display-none"),this._ensureAttendeesTab()}else domClass.remove(this.btn_Delete.domNode,"display-none"),domClass.remove(this.btn_Complete.domNode,"display-none");if("Complete"===a||"CompleteUnscheduled"===a){domClass.add(this.dateSection_AddEdit.domNode,"display-none"),domClass.remove(this.dateSection_Complete.domNode,"display-none"),domClass.remove(this.resultContainer.domNode,"display-none"),b=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring),b>0&&(this.tc_EditActivity.removeChild(this.cp_Recurring),window.setTimeout(dojo.hitch(this,function(){this._dialog.resize()},10))),this._dialog.open&&(this._setUI(),this._completeModeManualBind());var c=this._options.followUp.defaultFollowUpType,d="None"===c?this.noneText:activityUtility.getActivityTypeName(c);this.sel_Followup.set("value",d),this.ck_coAttachments.set("checked",this._options.followUp.carryOverAttachments),this.ck_coNotes.set("checked",this._options.followUp.carryOverNotes),"CompleteUnscheduled"===a&&this._ensureAttendeesTab()}else if(domClass.add(this.dateSection_Complete.domNode,"display-none"),domClass.remove(this.dateSection_AddEdit.domNode,"display-none"),domClass.add(this.resultContainer.domNode,"display-none"),(b=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring))<0){var e=this.tc_EditActivity.getIndexOfChild(this.cp_Attachments);this.tc_EditActivity.addChild(this.cp_Recurring,e),window.setTimeout(dojo.hitch(this,function(){this._dialog.resize()},10))}this._dialog.helpIcon&&this._dialog.set("helpTopic",this._getHelpTopicByMode())},_setActivityIdAttr:function(a){a=a||"",this.activityId=a,this._activityData=!1,""!==a&&(this.historyId="",this._loadData(),this._ensureAttendeesTab())},_getActivityIdAttr:function(){return this.activityId},_setActivityMemberIdAttr:function(a){a=a||"",this.activityMemberId=a},_getActivityMemberIdAttr:function(){return this.activityMemberId},_setUserNotificationIdAttr:function(a){a=a||"",a!==this.userNotificationId&&(this.userNotificationId=a,this.set("activityId",""),this._notificationData=!1,this._loadNotification()),this._ensureAttendeesTab()},_getUserNotificationId:function(){return this.userNotificationId},_setHistoryIdAttr:function(a){a=a||"",this.historyId!==a&&(this.historyId=a,this._activityData=!1,""!==a&&(this.activityId="",this._loadHistory()))},_getHistoryIdAttr:function(){return this.historyId},_preloadActivityOptions:function(){this._options={atAppointment:{alarmLead:"15",duration:"60",autoRollover:!1,timeless:!1},atPhoneCall:{alarmLead:"15",duration:"15",autoRollover:!1,timeless:!1},atToDo:{alarmLead:"none",duration:"15",autoRollover:!1,timeless:!1},atPersonal:{alarmLead:"none",duration:"5",autoRollover:!1,timeless:!1},followUp:{defaultFollowUpType:"None",carryOverNotes:!1,carryOverAttachments:!1},calendar:{dayStartTime:"9",dayEndTime:"6"}};var a=Sage.Services.getService("UserOptions");a&&a.getByCategories(["ActivityMeetingOptions","ActivityPhoneOptions","ActivityToDoOptions","ActivityPersonalOptions","Calendar"],this._receivedOptions,this)},_receivedOptions:function(a){for(var b={0:"None",1:"atPhoneCall",2:"atAppointment",3:"atToDo"},c=a.$resources,d=0;d<c.length;d++){var e=c[d],f="ActivityMeetingOptions"===e.category?"atAppointment":"ActivityPhoneOptions"===e.category?"atPhoneCall":"ActivityToDoOptions"===e.category?"atToDo":"ActivityPersonalOptions"===e.category&&"atPersonal";if(f&&this._options[f]&&e.value)switch(e.name){case"AlarmLead":this._options[f].alarmLead=parseInt(e.value,10)>0?e.value:"none";break;case"Duration":this._options[f].duration=e.value;break;case"Timeless":var g=e.value.substring(0,1).toUpperCase();this._options[f].timeless="T"===g;break;case"AutoRollover":var h=e.value.substring(0,1).toUpperCase();this._options[f].autoRollover="T"===h}else if("Calendar"===e.category)switch(e.name){case"DayStartTime":this._options.calendar.dayStartTime=userOptionsUtility.getConvertedOptionValue(e.name,e.value);break;case"DayEndTime":this._options.calendar.dayEndTime=userOptionsUtility.getConvertedOptionValue(e.name,e.value);break;case"DefaultFollowUpType":this._options.followUp.defaultFollowUpType=b[e.value]||"None";break;case"CarryOverNotes":var i=e.value.substring(0,1).toUpperCase();this._options.followUp.carryOverNotes="T"===i;break;case"CarryOverAttachments":var j=e.value.substring(0,1).toUpperCase();this._options.followUp.carryOverAttachments="T"===j}}},_setupStore:function(){this._activityStore||(this._activityStore=new SingleEntrySDataStore({include:["$descriptors"],resourceKind:"activities",ignoreETag:!0,service:this._activityService})),this._currentUserActivityStore||(this._currentUserActivityStore=new SingleEntrySDataStore({include:["$descriptors"],select:["Alarm","AlarmTime","Activity/StartDate"],resourceKind:"userActivities",service:this._activityService})),this._historyStore||(this._historyStore=new SingleEntrySDataStore({include:["$descriptors"],resourceKind:"history",service:sDataServiceRegistry.getSDataService("dynamic")}))},_resetDataProps:function(){this._activityData=!1,this._currentUserActivityData=!1,this._tempUAData=!1,this._notificationData=!1,this._attendeesData=[],this._attendeesForRemoval=[],this._newAttendeesData=[],this._userActivitiesRequestCount=0,this._resourceRequestCount=0,this._resourceDeleteRequestCount=0,this._activitySaved=!1,this._userActivitiesSaved=!1,this._currentUserActivitySaved=!1,this._resourcesSaved=!1,this._resourcesRemoved=!1,this._attachmentsSaved=!1,this._originalLeaderId=!1,this._attachmentList&&this._attachmentList.clearNewAttachments(),this._availabilityDataDateRange={fromDate:!1,toDate:!1,users:[]}},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._activityStore&&("New"===this.mode?this._activityStore.newItem({onComplete:function(a){Sage.Utility.setValue(a,"Type",this.activityType),this._receivedActivity(a)},onError:this._requestFailure,scope:this}):this._activityStore.fetch({predicate:'"'+this.activityId+'"',onComplete:this._receivedActivity,onError:this._requestFailure,scope:this}))},_receivedActivity:function(a){if(this._activityData=a,this._currentUserActivityStore&&"New"!==this.mode&&"CompleteUnscheduled"!=this.mode){var b=this.activityId||a.$key;b=b.indexOf(";")>0?b.substring(0,12):b;var c=this.activityMemberId||this._currentUserId;this._currentUserActivityStore.fetch({predicate:dString.substitute("'ActivityId=${0};UserId=${1}'",[b,c]),onComplete:this._receivedUserActivity,onError:this._noUserActivity,scope:this})}a.AttachmentCount>0&&(this._activityData.Attachment=!0),this._tempIdForAttachments=!1;var d=Sage.Services.getService("ClientEntityContext"),e=this.historyId?{EntityId:this.historyId,EntityType:"Sage.Entity.Interfaces.IHistory",Description:this._activityData.$descriptor,EntityTableName:"HISTORY"}:{EntityId:this.activityId,EntityType:"Sage.Entity.Interfaces.IActivity",Description:this._activityData.$descriptor,EntityTableName:"ACTIVITY"};d.setTemporaryContext(e),"New"!==this.mode&&"CompleteUnscheduled"!=this.mode?this.activityType=a.Type:this._applyUserOptionsForNewActivity(),this.activityMemberId&&this.activityMemberId!==this._currentUserId&&!this._memberSecurityData[this.activityMemberId]?this._checkSecurityAccess(this._currentUserId,this.activityMemberId,function(b){b&&(this._memberSecurityData[this.activityMemberId]=[],this._memberSecurityData[this.activityMemberId].AllowAdd=b.AllowAdd,this._memberSecurityData[this.activityMemberId].AllowEdit=b.AllowEdit,this._memberSecurityData[this.activityMemberId].AllowDelete=b.AllowDelete),this._setUIForActivityType(a.Type),this._bind()},this):(this._setUIForActivityType(a.Type),this._bind()),this._activityData.Leader?this._originalLeaderId=this._activityData.Leader.$key:this._originalLeaderId=this._activityData.UserId||this._currentUserId,this._dialog._standby&&this._dialog.hideLoading(),this.attendeesTab._activityId=a.$key,a.details&&(this._activityData.AttendeeCount=a.details.AttendeeCount),"Confirm"==this.mode&&this.attendeesTab._grid.refresh()},_receivedUserActivity:function(a){this._dialog._standby&&this._dialog.hideLoading(),this._currentUserActivityData=a,null===a.Alarm&&(a.Alarm=this._activityData.Alarm),null===a.AlarmTime&&(a.AlarmTime=this._activityData.AlarmTime),this._tempUAData={Alarm:a.Alarm,AlarmTime:utility.Convert.toDateFromString(a.AlarmTime)},this._bindUserActivity()},_loadNotification:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._notificationStore||(this._notificationStore=new SingleEntrySDataStore({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:sDataServiceRegistry.getSDataService("system")})),this._notificationStore.fetch({predicate:"'"+this.userNotificationId+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this})},_loadHistory:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._historyStore&&(this.historyId?this._historyStore.fetch({predicate:this.historyId,onComplete:function(a){this._receivedActivity(a),this._formatHeader()},onError:this._requestFailure,scope:this}):this._historyStore.newItem({onComplete:function(a){this._receivedActivity(dojoLang.mixin(a,this.activityDefaultValues)),this._formatHeader()},scope:this}))},_receivedNotification:function(a){this._receivedActivity(a.Activity||this._emptyActivity),this._notificationData=a,this._formatHeader(),this._bindUserNotification(),"New"===a.Type?this._setUIAsUnConfirmed():(domClass.remove(this.otherConfButtons,"display-none"),domClass.add(this.newConfButtons,"display-none"),"Confirm"===a.Type||"Decline"===a.Type?(this.ta_confirmationResponse.set("disabled",!0),domClass.remove(this.responseLabel,"display-none"),domClass.remove(this.ta_confirmationResponse.domNode,"display-none")):(domClass.add(this.responseLabel,"display-none"),domClass.add(this.ta_confirmationResponse.domNode,"display-none")),"Change"===a.Type&&this._checkUserConfirmationStatus())},_checkUserConfirmationStatus:function(){new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")).setResourceKind("userActivities").setResourceSelector('"'+this._notificationData.Activity.$key+";"+this._notificationData.ToUser.$key+'"').read({success:function(a){"asUnconfirmed"===a.Status&&this._setUIAsUnConfirmed()},failure:function(){},scope:this})},_setUIAsUnConfirmed:function(){domClass.add(this.otherConfButtons,"display-none"),domClass.remove(this.newConfButtons,"display-none"),this.ta_confirmationResponse.set("disabled",!1),domClass.remove(this.responseLabel,"display-none"),domClass.remove(this.ta_confirmationResponse.domNode,"display-none")},_applyUserOptionsForNewActivity:function(){var a=activityUtility.roundDateToNextQuarterHour(new Date),b="15";if(this._options[this.activityType]){var c=this._options[this.activityType];utility.setValue(this._activityData,"Duration",c.duration||"60"),b=c.alarmLead,utility.setValue(this._activityData,"Rollover",c.autoRollover),utility.setValue(this._activityData,"Timeless",c.timeless),this._activityData.Timeless&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,5))}utility.setValue(this._activityData,"StartDate",utility.Convert.toIsoStringFromDate(a)),this._activityData=dojoLang.mixin(this._activityData,this.activityDefaultValues),"none"===b.toLowerCase()?(utility.setValue(this._activityData,"Alarm",!1),b=15):(Sage.Utility.setValue(this._activityData,"Alarm",!0),b=parseInt(b,10));var d=utility.Convert.toDateFromString(utility.getValue(this._activityData,"StartDate")),e=this._getAlarmTime(d,b,this._activityData.Timeless);utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(e)),this.sel_AlarmDur.set("startTime",d),this.sel_AlarmDur.set("timeValue",e);var f={$key:this._currentUserId,$descriptor:utility.getClientContextByKey("userPrettyName")};utility.setValue(this._activityData,"Leader",f),this.activityDefaultValues.hasOwnProperty("carryOverAttachmentsFrom")&&window.setTimeout(dojo.hitch(this,function(){this.doCarryOverAttachments(this.activityDefaultValues.carryOverAttachmentsFrom)},1e3)),this.activityDefaultValues.hasOwnProperty("carryOverParticipantsFrom")&&window.setTimeout(dojo.hitch(this,function(){this._getHistoryAttendees(this.activityDefaultValues.carryOverParticipantsFrom)},1e3))},_noUserActivity:function(){this._bindUserActivity()},_requestFailure:function(a){this._dialog._standby&&this._dialog.hideLoading(),sageDialogs.showError(this.failedLoadingDataMsg),this.hide()},_createBindings:function(){this._bindingMgr&&(this._bindingMgr.destroy(),this._bindingMgr=!1),this._bindingMgr=new BindingsManager({defaultBinding:{boundEntity:this._activityData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.ta_Notes,entityProperty:"LongNotes",onChange:dojo.hitch(this,"_notesChanged")},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.sel_AlarmDur,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.cb_AutoRollover,entityProperty:"Rollover",widgetProperty:"checked"},{boundWidget:this.dtp_scheduledDate,dataType:"date",entityProperty:"StartDate"},{boundWidget:this.sel_DurationComplete,entityProperty:"Duration"},{boundWidget:this.sel_DurationComplete,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.cb_TimelessComplete,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")}]})},_createUABindings:function(){this._uaBindingMgr=new BindingsManager({items:[{boundWidget:this.cb_Alarm,entityProperty:"Alarm",widgetProperty:"checked",onChange:dojo.hitch(this,"_alarmCheckChanged")}]})},_createNotificationBindings:function(){this._notificationBindingMgr=new BindingsManager({items:[{boundWidget:this.ta_confirmationResponse,entityProperty:"Notes",boundEntity:this._notificationData}]})},_bind:function(){this._activityData&&(this._bindingMgr?this._bindingMgr.boundEntity&&this._activityData.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this._activityData):this._createBindings(),"New"!==this.mode&&"CompleteUnscheduled"!==this.mode||this._noUserActivity(),this._manualBind(),this._setUI())},_bindUserNotification:function(){this._notificationBindingMgr?this._notificationBindingMgr.setBoundEntity(this._notificationData):this._createNotificationBindings()},_isNullOrWhitespace:function(a){return!a||""===a.trim()},_manualBind:function(){if(this._activityData){var a,b,c;this._isBinding=!0,a=this._activityData;var d=this._isNullOrWhitespace(a.AccountId)?null:{$key:a.AccountId,$descriptor:a.AccountName};this.lup_Account.set("selectedObject",d),b=this._isNullOrWhitespace(a.ContactId)?null:{$key:a.ContactId,$descriptor:a.ContactName},this.lup_Contact.set("selectedObject",b);var e=this._isNullOrWhitespace(a.OpportunityId)?null:{$key:a.OpportutunityId,$descriptor:a.OpportunityName};this.lup_Opportunity.set("selectedObject",e);var f=this._isNullOrWhitespace(a.TicketId)?null:{$key:a.TicketId,$descriptor:a.TicketNumber};this.lup_Ticket.set("selectedObject",f),c=this._isNullOrWhitespace(a.LeadId)?null:{$key:a.LeadId,$descriptor:a.LeadName},this.lup_Lead.set("selectedObject",c),this.tb_LeadCompanyName.set("value",this._isNullOrWhitespace(a.LeadId)?"":a.AccountName),this._updateLookupSeedValues(a.AccountId),this.lup_Leader.set("selectedObject",a.Leader),"Complete"!==this.mode&&this._recurringEditor.set("activity",a);var g=Sage.Utility.Convert.toDateFromString(this._activityData.AlarmTime);this.sel_AlarmDur.set("timeValue",g),this._completeModeManualBind(),this._isBinding=!1,"New"!=this.mode&&"CompleteUnscheduled"!==this.mode||this._activityData&&(a=this._activityData,b=this._isNullOrWhitespace(a.ContactId)?null:{$key:a.ContactId,$descriptor:a.ContactName},this.attendeesTab._addContactAttendee(b),c=this._isNullOrWhitespace(a.LeadId)?null:{$key:a.LeadId,$descriptor:a.LeadName},this.attendeesTab._addLeadAttendee(c))}},_completeModeManualBind:function(){"Complete"!==this.mode&&"CompleteUnscheduled"!==this.mode||(this.dtp_completedDate.set("value",new Date),this.pl_Result.set("value",this.completeText),"Complete"===this.mode&&this.pl_Result.focus())},_bindUserActivity:function(){this._uaBindingMgr||this._createUABindings(),this.sel_AlarmDur.set("disabled",!1);var a=this._getActivityStartDate();this.sel_AlarmDur.set("startTime",a);var b=this._currentUserActivityData?this._currentUserActivityData:this._activityData,c=utility.Convert.toDateFromString(b.AlarmTime);if(this._currentUserActivityData&&"rstOccurrence"===utility.getValue(this._activityData,"RecurrenceState")){var d=utility.Convert.toDateFromString(this._currentUserActivityData.Activity.StartDate),e=utility.Convert.toDateFromString(this._currentUserActivityData.AlarmTime),f=dojoDate.difference(d,e,"minute");c=dojoDate.add(a,"minute",f)}this._uaBindingMgr.setBoundEntity(b),this.sel_AlarmDur.set("timeValue",c),this.sel_AlarmDur.set("disabled",!b.Alarm||"Confirm"===this.mode)},_getActivityStartDate:function(){if(this._activityData){var a=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate);return this._activityData.Timeless&&activityUtility.isDateFiveSecondRuleTimeless(a)?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5):a}return new Date},_onShowAvailabilityTab:function(){this._availabilityShowing?scheduler.setCurrentView(this._getActivityStartDate(),"timeline"):(this._resetAttendeesList(),this._loadAttendeesData())},_accountChanged:function(a){if(!this._isBinding){var b=a?a.$key:"",c=a?a.$descriptor:"",d=this._activityData,e=this._isNullOrWhitespace(d.ContactId);d.AccountId=b,d.AccountName=c,d.PhoneNumber="",d.LeadId=null,d.LeadName="",this._isBinding=!0,this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._updateLookupSeedValues(b),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),e&&(d.ContactId="",d.ContactName="",this.lup_Contact.set("selectedObject",null),this._setContactToCurrentAccountPrimary()),this._isBinding=!1}},_contactChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.ContactId=null,b.ContactName="",void(b.PhoneNumber="");b.ContactId=a.$key,b.ContactName=a.$descriptor,b.PhoneNumber=Sage.Utility.getValue(a,"WorkPhone"),b.LeadId=null,b.LeadName="";var c=this._isNullOrWhitespace(b.AccountName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}a&&a.$key&&!a.attendeeTab&&("insert"!=this.attendeesTab._grid.mode&&this._isBinding?this.attendeesTab._gridStarted?this.attendeesTab._attendeeExists(a.$key)||this.attendeesTab._addContactAttendee(a):this.attendeesTab.setInitialPrimaryContact(a):this.attendeesTab._addContactAttendee(a))},_opportunityChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.OpportunityId=null,void(b.OpportunityName="");if(b.OpportunityId=a.$key,b.OpportunityName=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId=null,b.LeadName="",this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1,d&&(this.lup_Contact.set("selectedObject",null),this._setContactBasedOnOpportunity())}}},_ticketChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.TicketId=null,void(b.TicketNumber="");if(b.TicketId=a.$key,b.TicketNumber=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId=null,b.LeadName="",this._updateLookupSeedValues(),b.ContactId=Sage.Utility.getValue(a,"Contact.$key"),b.ContactName=Sage.Utility.getValue(a,"Contact.NameLF"),b.PhoneNumber=Sage.Utility.getValue(a,"Contact.WorkPhone"),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),d&&this.lup_Contact.set("selectedObject",{$key:a.Contact.$key,$descriptor:a.Contact.NameLF}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}}},_leadChanged:function(a){if(!this._isBinding){var b=this._activityData;if(!a)return b.LeadId=null,b.LeadName="",b.PhoneNumber="",void this.tb_LeadCompanyName.set("value","");b.ContactId=null,b.ContactName="",b.AccountId=null,b.TicketId=null,b.TicketNumber="",b.OpportunityId=null,b.OpportunityName="",this._updateLookupSeedValues(),this._isBinding=!0,this.lup_Contact.set("selectedObject",null),this.lup_Account.set("selectedObject",null),this.lup_Opportunity.set("selectedObject",null),this.lup_Ticket.set("selectedObject",null),this._isBinding=!1,b.LeadId=a.$key,b.LeadName=a.LeadFullName,b.AccountName=a.Company,b.PhoneNumber=a.WorkPhone,this.tb_LeadCompanyName.set("value",a.Company),this._isBinding||a&&a.$key&&!a.attendeeTab&&this.attendeesTab._addLeadAttendee(a)}},_leaderChanged:function(a){if(!this._isBinding){var b=this._activityData.Leader.$key||this._activityData.UserId;if(a){var c=a.$key.substr(0,12);this._activityData.Leader={$key:c,$descriptor:a.$descriptor||a.Name},this._activityData.LeaderChanged=!0}this._updateUsersListWithNewLeader(b,this._activityData.Leader)}},_setContactBasedOnOpportunity:function(){if(this._isNullOrWhitespace(this._activityData.OpportunityId))return void this._rebindToCurrentContact();var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("opportunities");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._activityData.OpportunityId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._setContactToCurrentAccountPrimary();for(var c,d=!1,e=!1,f=b[0],g=0;g<b.length;g++)b[g]&&(b.IsPrimary&&(d&&!b[g].Contact.IsPrimary||(d=b[g])),!e&&b[g].Contact.IsPrimary&&(e=b[g]));(c=d||e||f)&&(this._activityData.ContactId=Sage.Utility.getValue(c,"Contact.$key"),this._activityData.ContactName=Sage.Utility.getValue(c,"Contact.NameLF"),this._activityData.PhoneNumber=Sage.Utility.getValue(c,"Contact.WorkPhone"),this._rebindToCurrentContact())},failure:function(){this._rebindToCurrentContact()},scope:this})},_setContactToCurrentAccountPrimary:function(){if(this._isNullOrWhitespace(this._activityData.AccountId))return void this._rebindToCurrentContact();var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("accounts");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._activityData.AccountId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","NameLF,IsPrimary,WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.setQueryArg("count","1"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._rebindToCurrentContact();var c=b[0];this._activityData.ContactId=Sage.Utility.getValue(c,"$key"),
this._activityData.ContactName=Sage.Utility.getValue(c,"NameLF"),this._activityData.PhoneNumber=Sage.Utility.getValue(c,"WorkPhone"),this._isBinding=!0,this.lup_Contact.set("selectedObject",c),this._isBinding=!1},failure:function(){this._rebindToCurrentContact()},scope:this})},_rebindToCurrentContact:function(){this._isBinding=!0,this.lup_Contact.set("selectedObject",{$key:this._activityData.ContactId,$descriptor:this._activityData.ContactName}),this._isBinding=!1},_updateLookupSeedValues:function(a){var b=a||this._activityData.AccountId;this.contactLookupConfig.seedValue=b,this.opportunityLookupConfig.seedValue=b,this.ticketLookupConfig.seedValue=b},_setUI:function(){this._formatHeader(),this._setDisabledByTimlessValue(),this._setHasAlarmUI(),this._isNullOrWhitespace(this._activityData.LeadId)?this.rdo_Contact.set("checked",!0):this.rdo_Lead.set("checked",!0),this._setContactLeadVisibility(),this._setScheduledByLabel()},_checkSecurityAccess:function(a,b,c,d){this.accessData=!1,this._accessStore||(this._accessStore=new SingleEntrySDataStore({include:["$descriptors"],resourceKind:"activityresourceviews",service:sDataServiceRegistry.getSDataService("dynamic")})),this._accessStore.fetch({predicate:"'"+b+"-"+a+"'",onComplete:function(a){c.call(d,a)},onError:function(){c.call(d,null)},scope:this})},_setUIForActivityType:function(a){if(this.pk_Regarding.set("pickListName",activityUtility.getActivityPicklistName("Regarding",a)),this.pk_Category.set("pickListName",activityUtility.getActivityPicklistName("Category",a)),this.pl_Result.set("pickListName",activityUtility.getActivityPicklistName("Result",a)),this.btn_Complete.set("disabled",!this._activityData.AllowComplete),"Confirm"!==this.mode){var b=this._activityData.AllowEdit,c=this._activityData.AllowDelete;this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key&&(b=!1,c=!1),this._bulkSetProperty(this,this.noEditDisableList,"disabled",!b),this.ta_Notes.set("readonly",!b),this.activityMemberId&&this._memberSecurityData[this.activityMemberId]&&this._memberSecurityData[this.activityMemberId].AllowEdit||this.activityMemberId===this._currentUserId||this._activityData.UserId===this._currentUserId?this.btn_OK.set("disabled",!1):this.btn_OK.set("disabled",!this._activityData.AllowEdit),this.btn_Delete.set("disabled",!c)}"Complete"===this.mode&&(this.btn_asScheduled.set("disabled",!this._activityData.AllowComplete),this.btn_Now.set("disabled",!this._activityData.AllowComplete)),this.pk_Category.set("disabled","atPersonal"===a||"Confirm"===this.mode||this.pk_Category.get("disabled")),this._canEdit()&&"atPersonal"!==a&&"atToDo"!==a?domClass.remove(this.lup_Resources.domNode,"display-none"):domClass.add(this.lup_Resources.domNode,"display-none")},_setDisabledByTimlessValue:function(){if(this._activityData){var a=this._activityData.Timeless;this._handleAutoRolloverState(),this.dtp_startDate.set("displayTime",!a);var b=this._activityData.AllowEdit;this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key&&(b=!1),this.sel_Duration.set("disabled",a||"Confirm"===this.mode||!b),this.sel_DurationComplete.set("disabled",a),this.dtp_scheduledDate.set("displayTime",!a)}},_handleAutoRolloverState:function(){this._activityData.Timeless&&!this._activityData.Recurring?this.cb_AutoRollover.set("disabled",!1):(this.cb_AutoRollover.set("disabled",!0),this.cb_AutoRollover.set("checked",!1))},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=a[b[e]];f&&f.set(c,d)}},_timelessChange:function(){if(this._setDisabledByTimlessValue(),"Complete"===this.mode||"CompleteUnscheduled"===this.mode){if(this.cb_TimelessComplete.get("checked")){var a=this.dtp_scheduledDate.get("value");a.setHours(0),a.setMinutes(0),a.setSeconds(5),this.dtp_scheduledDate.set("value",a)}}else{var b,c,d=this.dtp_startDate.get("value");if(utility.setValue(this._activityData,"TimelessChanged",!0),this.cb_Timeless.get("checked"))d.setHours(0),d.setMinutes(0),d.setSeconds(5),this.dtp_startDate.set("value",d),b=this._getAlarmLeadTime(),c=this._getAlarmTime(d,b,!0),this.sel_AlarmDur.set("startTime",d),this.sel_AlarmDur.set("timeValue",c);else{var e=activityUtility.roundDateToNextQuarterHour(new Date),f=e.getMinutes(),g=e.getHours(),h=new Date(d.getFullYear(),d.getMonth(),d.getDate(),g,f);this.dtp_startDate.set("value",h),b=this._getAlarmLeadTime(),c=this._getAlarmTime(h,b,!1),this.sel_AlarmDur.set("startTime",h),this.sel_AlarmDur.set("timeValue",c)}}},_alarmCheckChanged:function(a,b,c,d){this._setHasAlarmUI(d)},_descriptionChanged:function(){this._formatHeader()},_notesChanged:function(a,b,c,d){utility.setValue(this._activityData,"Notes",d?d.substr(0,255):d)},_startDateChanged:function(){var a=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",a),this.sel_AlarmDur.set("startTime",a);var b=this._getAlarmLeadTime(),c=this._getAlarmTime(a,b,this.cb_Timeless.get("checked"));this.sel_AlarmDur.set("timeValue",c);var d=this._currentUserActivityData?this._currentUserActivityData:this._activityData;Sage.Utility.setValue(d,"AlarmTime",Sage.Utility.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue"))),this._availabilityShowing&&(scheduler.setCurrentView(a,"timeline"),this._requestAvailability()),this._recurringEditor.set("startDate",a)},_getAlarmTime:function(a,b,c){var d=dojoDate.add(a,"minute",-1*b);return!0===c&&(d=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=dojoDate.add(d,"minute",-1*b)),d},_getAlarmLeadTime:function(){var a="15";if(this._options[this.activityType]){a=this._options[this.activityType].alarmLead}return a="none"===a.toLowerCase()?15:parseInt(a,10)},_setHasAlarmUI:function(a){void 0===a&&(a=Sage.Utility.getValue(this._currentUserActivityData||this._activityData,"Alarm")),this.sel_AlarmDur.set("disabled",!a||"Confirm"===this.mode)},_setContactLeadVisibility:function(){var a=this.rdo_Contact.get("checked");domClass.remove(a?this.contactContainer.domNode:this.leadContainer.domNode,"display-none"),domClass.add(a?this.leadContainer.domNode:this.contactContainer.domNode,"display-none")},_formatHeader:function(){var a="";activityUtility.getActivityTypeName(this._activityData.Type||"atAppointment");switch(this.mode){case"New":a="atAppointment"===this._activityData.Type?this.scheduleMeeting:"atPhoneCall"===this._activityData.Type?this.schedulePhonecall:this.scheduleTodo;break;case"Complete":case"CompleteUnscheduled":a="atAppointment"===this._activityData.Type?this.completeMeeting:"atPhoneCall"===this._activityData.Type?this.completePhonecall:this.completeTodo;break;case"Update":a="atAppointment"===this._activityData.Type?this.updateMeeting:"atPhoneCall"===this._activityData.Type?this.updatePhoneCall:this.updateToDo}if("Confirm"===this.mode){if(!this._notificationData)return;this._getUserInfoFor(this._notificationData.FromUser.$key,function(b){if(this._notificationData){var c=this._notificationData.Type;switch(c){case"Change":a=this.updatedText;break;case"Confirm":a=this.acceptedText;break;case"Deleted":a=this.deletedText;break;case"Leader":a=this.scheduledText;break;case"Decline":a=this.declinedText}var d="New"===c?this.newConfirmationHeaderFormatText:this.otherConfimationHeaderFormatText;this._setHeader(dString.substitute(d,{activityType:"",actionText:a,user:b.UserName||b.$descriptor}))}})}else this._setHeader(dString.substitute(this.dialogHeaderFormatText,{actionText:a,activityType:"",description:utility.htmlEncode(this._activityData.Description)||""}))},_setHeader:function(a){var b=dString.substitute('<div class="Global_Images icon16x16 ${0}" > </div>&nbsp;<span class="activity-dialog-title" style="max-width: 975px; text-overflow: ellipsis;">${1}</span>',[activityUtility.getActivityImageClass(this._activityData.Type||"atAppointment","small"),a]);this._dialog.titleNode.innerHTML=b},_setScheduledByLabel:function(){var a=utility.Convert.toDateFromString(utility.getValue(this._activityData,"CreateDate"));(!a||a.getFullYear()<1e3)&&(a=new Date);var b,c=this._getActivityStartDate(),d=utility.getValue(this._activityData,"CreateUser").trim(),e="Complete"===this.mode||"CompleteUnscheduled"===this.mode?this.completeScheduledByFormatText:this.scheduledByFormatText;if(d&&this._currentUserId!==d){if("PROCESS"!==d&&"ADMIN"!==d)return void this._getUserInfoFor(d,function(d){b=dString.substitute(e,{user:d.$descriptor,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),startDate:locale.format(c,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}),dojo.html.set(this.lbl_ScheduledBy,b),dojo.html.set(this.lbl_ScheduledByComp,b)});d="Administrator"}else d=utility.getClientContextByKey("userPrettyName");b=dString.substitute(e,{user:d,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name}),startDate:locale.format(c,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}),dojo.html.set(this.lbl_ScheduledBy,b),dojo.html.set(this.lbl_ScheduledByComp,b)},_getUserInfoFor:function(a,b){if(a){var c=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",!1,!0,!0));c.setResourceKind("userInfo"),c.setResourceSelector("'"+a+"'"),c.setQueryArg("precedence","0"),c.read({success:b,scope:this,failure:function(){}})}},_showRecurringTab:function(){this._recurringEditor.onTabShow(),this._recurringEditor._setReadOnly(!this._canEdit())},_ensureAttachmentList:function(){on(this.cp_Attachments,"show",dojo.hitch(this,function(){this._createAttachmentList()}))},_completeClick:function(){this._completeAfterSaving=!0,this._saveAndClose()},_deleteClick:function(){this._activityData&&this._activityStore&&sageDialogs.raiseQueryDialogExt({title:"",query:this.areYouSureText,callbackFn:function(a){a&&this._activityStore.deleteEntity(this._activityData,this._successfulActivityDelete,this._failedActivityDelete,this)},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this})},_asScheduledClick:function(){this._updateAttendeesAndComplete(dojoDate.add(this.dtp_scheduledDate.get("value"),"minute",this._activityData.Duration))},_nowClick:function(){this._updateAttendeesAndComplete(this.dtp_completedDate.get("value"))},_updateAttendeesAndComplete:function(a){if("CompleteUnscheduled"===this.mode){var b=this.sel_AlarmDur.get("timeValue");5===b.getSeconds()&&(b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),0)),this._createActivityForNewOrCompleteUnscheduled(b,dojoLang.partial(this._preCompleteActivity,a),this._failedActivitySave,this)}else"Complete"===this.mode?this._preCompleteActivity(a,null):this._completeActivity(a)},_preCompleteActivity:function(a,b){var c=this;b&&(this._activityData=b),this._saveUserActivitiesAndResources(!0),this.attendeesTab._activitySaved(this._activityData).then(function(b){c._completeActivity(a)})},_completeActivity:function(a){if(!this._isProcessing){this._isProcessing=!0;var b={$name:"Complete",request:{entity:this._activityData,userId:this._currentUserId,result:this.pl_Result.get("value"),resultCode:this.pl_Result.get("code"),completeDate:utility.Convert.toIsoStringFromDate(a)}};new Sage.SData.Client.SDataServiceOperationRequest(sDataServiceRegistry.getSDataService("system")).setResourceKind("activities").setOperationName("Complete").execute(b,{success:this._successfulComplete,failure:this._failedComplete,scope:this})}},_okClick:function(){var a=focusUtil.curNode,b=aspect.after(a,"blur",dojoLang.hitch(this,function(){this._saveAndClose(),b.remove()}));a&&a.blur()},_createActivityForNewOrCompleteUnscheduled:function(a,b,c,d){if("New"===this.mode||"CompleteUnscheduled"===this.mode){if(this._attachmentList){this._attachmentList.getNewAttachments().length>0&&(this._activityData.Attachment=!0)}this._currentUserActivitySaved=!0,utility.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked")),utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(a)),""===this._activityData.AccountId&&(this._activityData.AccountId=null),""===this._activityData.ContactId&&(this._activityData.ContactId=null),this._activityStore.saveNewEntity(this._activityData,b,c,d)}},_saveAndClose:function(){if(!this._isProcessing){this._isProcessing=!0;var a=this.sel_AlarmDur.get("timeValue");5===a.getSeconds()&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0)),this._createActivityForNewOrCompleteUnscheduled(a,this._successfulActivitySave,this._failedActivitySave,this),"New"!==this.mode&&"CompleteUnscheduled"!==this.mode&&(this._activityData.Attachment=this._activityData.AttachmentCount>0,this._currentUserActivityData?"rstOccurrence"===utility.getValue(this._activityData,"RecurrenceState")?(utility.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked")),utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(a)),this._currentUserActivitySaved=!0,this._activityData.AllowEdit&&this._saveActivity()):this._tempUAData&&this._tempUAData.Alarm===this._currentUserActivityData.Alarm&&this._tempUAData.AlarmTime.getTime()===a.getTime()?(this._currentUserActivitySaved=!0,this._activityData.AllowEdit&&this._saveActivity()):(delete this._currentUserActivityData.Activity,this._currentUserActivityData.AlarmTime=utility.Convert.toIsoStringFromDate(a),this._saveUserActivity()):(utility.setValue(this._activityData,"AlarmTime",utility.Convert.toIsoStringFromDate(a)),this._currentUserActivitySaved=!0,this._activityData.AllowEdit&&this._saveActivity()),this._ensureActivitySave())}},_saveUserActivity:function(){this._currentUserActivityStore&&this._currentUserActivityStore.save({scope:this,success:this._successfulCurrentUserActivitySave,failure:this._failedUserActivitySave})},_saveActivity:function(){this._activityStore&&this._activityStore.save({scope:this,success:this._successfulActivitySave,failure:this._failedActivitySave})},_ensureActivitySave:function(){this._activityData.AllowEdit||(this._activitySaved=!0,this._userActivitiesSaved=!0,this._resourcesSaved=!0,this._resourcesRemoved=!0,this._attachmentsSaved=!0,this._hideIfComplete())},_successfulActivitySave:function(a){this.attendeesTab._activitySaved(a).then(dojo.hitch(this,function(b){this._successfulActivityAttendeeSave(a)}))},_successfulActivityAttendeeSave:function(a){this._activityData.LeaderChanged&&(a.LeaderChanged=!0),this._activityData.TimelessChanged&&(a.TimelessChanged=!0),this._activityData=a,this._saveUserActivitiesAndResources(),this._activitySaved=!0,this._ensureActivitySave(),this._hideIfComplete()},_saveUserActivitiesAndResources:function(a){var b=!1,c=!a;Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this.activityId||(b=!0),this.activityId=this._activityData.$key;for(var d=!1,e=!1,f=this._activityData.Leader.$key,g=0;g<this._newAttendeesData.length;g++)d=d||"User"===this._newAttendeesData[g].Type&&this._newAttendeesData[g].$key!==f,e=e||"Resource"===this._newAttendeesData[g].Type;if(d){var h=new Sage.SData.Client.SDataTemplateResourceRequest(sDataServiceRegistry.getSDataService("system"));h.setResourceKind("userActivities"),h.read({async:!1,success:dojoLang.partial(this._onGetUserActivityTemplate),failure:this._failedUserActivitySave,scope:this})}else this._userActivitiesSaved=!0;if(e){var i=new Sage.SData.Client.SDataTemplateResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));i.setResourceKind("resourceSchedules"),i.read({async:!1,success:this._onGetResourceScheduleTemplate,failure:this._failedUserActivitySave,scope:this})}else this._resourcesSaved=!0;if(this._attachmentsSaved=!0,this._attachmentList){var j=this._attachmentList.getNewAttachments();j.length>0&&"New"===this.mode&&(this._saveAttachments(j),this._attachmentsSaved=!1)}this._attendeesForRemoval.length>0?this._removeResources():this._resourcesRemoved=!0,b&&c&&dojo.publish("/entity/activity/create",[this._activityData,this]),this._completeAfterSaving||b||dojo.publish("/entity/activity/change",[this._activityData,this])},_saveAttachments:function(a,b){this._attachmentRequests=a.length;for(var c=0;c<a.length;c++){var d=a[c],e=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));e.setResourceKind("attachments"),e.setResourceSelector("'"+d.$key+"'"),b?d.historyId=b:d.activityId=this.activityId;for(var f in this._activityData)if("Id"===f.substring(f.length-2)&&"UserId"!==f){var g=f.substring(0,1).toLowerCase()+f.substring(1);d[g]=this._activityData[f]}e.update(d,{ignoreETag:!0,success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this})}},_removeAttachments:function(){if(this._attachmentList)for(var a=this._attachmentList.getNewAttachments(),b=0;b<a.length;b++){var c=a[b],d=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));d.setResourceKind("attachments"),d.setResourceSelector("'"+c.$key+"'"),d.delete(c,{success:function(){},failure:function(){},scope:this})}},getRelationshipsForAttachments:function(){var a={};for(var b in this._activityData)if("Id"===b.substring(b.length-2)&&"UserId"!==b){var c=b.substring(0,1).toLowerCase()+b.substring(1);a[c]=this._activityData[b]}return"New"!==this.mode||fileUtility.supportsHTML5File||slx.desktop||(this._tempIdForAttachments=this._makeTempID(),a.activityId=this._tempIdForAttachments),a},doCarryOverAttachments:function(a){attachmentUtility.getAttachmentTemplate(function(b){this._getHistoryAttachments(a,b)},this)},_createAttachmentList:function(){var a=!1;this._attachmentList||(a=!0,this._attachmentList=new AttachmentList({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"activityId"}),this._attachmentList.startup(dojo.hitch(this,function(){this.cp_Attachments.resize()}))),this._attachmentList.setToReadOnly(!this._canEdit()),(a||"New"!=this.mode)&&window.setTimeout(this._attachmentList.resetEntityContext(),100)},_getHistoryAttachments:function(a,b){var c=new Sage.SData.Client.SDataResourceCollectionRequest(sDataServiceRegistry.getSDataService("system"));c.setResourceKind("attachments"),c.setQueryArg("where","historyId eq '"+a+"'"),c.read({success:function(a){var c=a.$resources,d={activityId:this._makeTempID(),historyId:null},e=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));if(e.setResourceKind("attachments"),c&&c.length){for(var f=c.length,g=0;g<f;g++){var h=dojoLang.mixin(c[g],d),i=dojoLang.mixin(b,h);delete i.createDate,delete i.modifyDate,delete i.createUser,delete i.modifyUser,delete i.$key,delete i.$etag,i.fileName=i.physicalFileName,i.attachDate=utility.Convert.toIsoStringFromDate(new Date),e.create(i,{success:function(a){dojo.publish("/entity/attachment/create",[a])},failure:function(){},scope:this})}this._createAttachmentList()}},failure:function(){},scope:this})},_getHistoryAttendees:function(a){var b=new Sage.SData.Client.SDataResourceCollectionRequest(sDataServiceRegistry.getSDataService("dynamic"));b.setResourceKind("historyAttendees"),b.setQueryArg("where","HistoryId eq '"+a+"'"),b.read({success:function(a){for(var b=a.$resources,c=[],d=0;d<b.length;d++)if("User"!=b[d].EntityType){var e={$key:b[d].EntityId,$descriptor:b[d].Name,general:!1},f=dojoLang.mixin(b[d],e);c.push(f)}this.attendeesTab._addAttendeesToStore(c)},failure:function(){},scope:this})},_makeTempID:function(){if(!this._tempIdForAttachments){var a=this._currentUserId,b=utility.Convert.toIsoStringFromDate(this.dtp_startDate.get("value"));b=b.replace(/[T:-]/g,"").substr(6,6),this._tempIdForAttachments="NE"+a.substr(a.length-4,4)+b}return this._tempIdForAttachments},_attachmentRequests:0,_successfulAttachmentSave:function(a){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_failedAttachmentSave:function(){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_successfulCurrentUserActivitySave:function(a){this._currentUserActivitySaved=!0,this._activityData.AllowEdit?this._saveActivity():dojo.publish("/entity/userActivity/change",[a,this]),this._hideIfComplete()},_successfulActivityDelete:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),dojo.publish("/entity/activity/delete",[this._activityData.$key,this]),this._activityData.Timeless&&dojo.publish("/entity/activity/timeless/delete",[this._activityData.$key,this]),this.hide()},_successfulComplete:function(a){if("CompleteUnscheduled"===this.mode){var b=this;this.attendeesTab._historySaved(a).then(function(c){b._successfulAttendeesComplete(a)})}else this._successfulAttendeesComplete(a)},_successfulAttendeesComplete:function(a){Sage.Services.getService("ClientEntityContext").clearTemporaryContext();var b=a;"Complete"!==this.mode&&"CompleteUnscheduled"!==this.mode||(a.Response&&(b=a.Response),dojo.publish("/entity/activity/delete",[this._activityData.$key,this]),this._activityData.Timeless&&dojo.publish("/entity/activity/timeless/delete",[this._activityData.$key,this])),dojo.publish("/entity/history/create",[b,this]);var c=null;if("Complete"===this.mode||"CompleteUnscheduled"===this.mode?a.Response&&(c=a.Response.HistoryId):c=b.$key,this._attachmentList){var d=this._attachmentList.getNewAttachments();d.length>0&&(this._activityData.Attachment=!0,this._saveAttachments(d,c))}var e=this.sel_Followup.get("value");switch(e){case this.noneText:return void this.hide();case activityUtility.getActivityTypeName("atPhoneCall"):e="atPhoneCall";break;case activityUtility.getActivityTypeName("atAppointment"):e="atAppointment";break;case activityUtility.getActivityTypeName("atToDo"):e="atToDo"}if(void 0===c||null===c)return this.hide(),void sageDialogs.showError(this.scheduleFollowUpErrorText);var f=this._getFollowUpActivityData(c);this.hide(),window.setTimeout(function(){var a=Sage.Services.getService("ActivityService");a&&a.scheduleActivity({type:e,preConfigured:f})},250)},_getFollowUpActivityData:function(a){var b=this._activityData,c={AccountId:b.AccountId,AccountName:b.AccountName,ContactId:b.ContactId,ContactName:b.ContactName,Description:b.Description,LeadId:b.LeadId,LeadName:b.LeadName,OpportunityId:b.OpportunityId,OpportunityName:b.OpportunityName,TicketId:b.TicketId,TicketNumber:b.TicketNumber};return this.ck_coNotes.get("checked")&&(c.LongNotes=b.LongNotes,c.Notes=b.Notes),this.ck_coAttachments.get("checked")&&(c.carryOverAttachmentsFrom=a),c.carryOverParticipantsFrom=a,c},_failedActivitySave:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotSaveErrorText);sageDialogs.showError(b),this._completeAfterSaving=!1},_failedActivityDelete:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotDeleteErrorText);sageDialogs.showError(b),this._completeAfterSaving=!1},_failedUserActivitySave:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotSaveErrorText);sageDialogs.showError(b)},_failedResourceSave:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotSaveErrorText);sageDialogs.showError(b)},_failedComplete:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotCompleteErrorText);sageDialogs.showError(b)},_onGetUserActivityTemplate:function(a){this._userActivitiesRequestCount=0;var b=this.lup_Leader.get("selectedObject");b=b.$key.substr(0,12);for(var c=this._activityData,d=utility.Convert.toDateFromString(c.AlarmTime),e=0;e<this._newAttendeesData.length;e++){var f=this._newAttendeesData[e];if("User"===f.Type&&f.$key!==b){var g=dojo.mixin({},a),h={User:{$key:f.$key},ActivityId:this.activityId,Activity:{$key:this.activityId},Alarm:c.Alarm,AlarmTime:utility.Convert.toIsoStringFromDate(d),Status:"asUnconfirmed"};g=dojoLang.mixin(g,h);var i=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));i.setResourceKind("userActivities"),this._userActivitiesRequestCount++,i.create(g,{async:!1,success:function(a){this._userActivitiesRequestCount--,dojo.publish("/entity/userActivity/create",[a,this]),this._userActivitiesRequestCount<1&&(this._userActivitiesSaved=!0,this._hideIfComplete())},failure:this._failedUserActivitySave,scope:this})}}this._userActivitiesRequestCount<1&&(this._userActivitiesSaved=!0,c.Timeless&&dojo.publish("/entity/userActivities/timeless/saved",[c,this]),this._hideIfComplete())},_onGetResourceScheduleTemplate:function(a){this._resourceRequestCount=0;for(var b=0;b<this._newAttendeesData.length;b++){var c=this._newAttendeesData[b];if("Resource"===c.Type){var d=dojoLang.mixin({},a),e=this._activityData,f=Sage.Utility.Convert.toDateFromString(e.StartDate),g=dojoDate.add(f,"minute",e.Duration),h={ResourceId:c.$key,ActivityId:this.activityId,Description:c.Name,StartDate:e.StartDate,EndDate:Sage.Utility.Convert.toIsoStringFromDate(g),UserId:e.Leader.$key};d=dojoLang.mixin(d,h);var i=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));i.setResourceKind("resourceSchedules"),this._resourceRequestCount++,i.create(d,{success:function(a){--this._resourceRequestCount<1&&(this._resourcesSaved=!0,this._hideIfComplete())},failure:this._failedResourceSave,scope:this})}}},_removeResources:function(){this._resourceDeleteRequestCount=0;for(var a=0;a<this._attendeesForRemoval.length;a++){var b,c,d,e=this._attendeesForRemoval[a];"user"===e.type?(b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")),b.setResourceKind("userActivities"),c=dString.substitute("'ActivityId=${0};UserId=${1}'",[this.activityId,e.id]),d="/entity/userActivity/delete"):(b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")),b.setResourceKind("resourceSchedules"),c="'"+e.rsid+"'",d="/entity/resourceSchedule/delete"),b.setResourceSelector(c),this._resourceDeleteRequestCount++;var f={notify:function(){dojo.publish(this.evt,[this.predicate]),--this.editor._resourceDeleteRequestCount<1&&(this.editor._resourcesRemoved=!0,this.editor._hideIfComplete())},evt:d,predicate:c,editor:this},g={success:f.notify,aborted:function(){},failure:this._failedResourceSave,scope:f};b.delete({$key:c},g)}},_cancelClick:function(){"New"===this.mode&&this._removeAttachments(),this.hide()},_hideIfComplete:function(){if(this._activitySaved&&this._userActivitiesSaved&&this._currentUserActivitySaved&&this._resourcesSaved&&this._resourcesRemoved&&this._attachmentsSaved){var a=this.activityId;if(this._completeAfterSaving){this._completeAfterSaving=!1;var b=Sage.Services.getService("ActivityService");b&&b.completeActivity(a)}else this.hide()}},_acceptConfClick:function(){Sage.Services.getService("ActivityService").acceptConfirmation({notification:this._notificationData,success:this._successfulAcceptConfirmation,failure:this._failedAcceptDecline,scope:this})},_declineClick:function(){Sage.Services.getService("ActivityService").declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this})},_deleteConfClick:function(){this._notificationData&&this._notificationStore&&this._notificationStore.deleteEntity(this._notificationData,this._successfulNotificationDelete,this._failedActivityDelete,this)},_getActivityDataFromNotificationData:function(){var a=null,b=null;return this._notificationData&&(this._notificationData.Activity&&(a=this._notificationData.Activity.$key),this._notificationData.ToUser&&(b=this._notificationData.ToUser.$key)),{activityId:a,userId:b}},_successfulAcceptConfirmation:function(){dojo.publish("/entity/activity/confirm",[this._getActivityDataFromNotificationData(),null]),this._successfulNotificationDelete()},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]),this._successfulNotificationDelete()},_successfulNotificationDelete:function(){dojo.publish("/entity/userNotification/delete",[this._notificationData.$key,this]),this.hide()},_ensureLookupsCreated:function(){this.lup_Account||(this.createAccountLookup(),this.createContactLookup(),this.createOpportunityLookup(),this.createTicketLookup(),this.createLeadLookup(),this.createLeaderlookup(),this.createResourcesLookup());var a=this;dojo.byId("lu_lead_btnClearResult")&&dojo.connect(dojo.byId("lu_lead_btnClearResult"),"onclick",null,function(){a.attendeesTab.unCheckPrimary()},!0),dojo.byId("lu_contact_btnClearResult")&&dojo.connect(dojo.byId("lu_contact_btnClearResult"),"onclick",null,function(){a.attendeesTab.unCheckPrimary()},!0)},createAccountLookup:function(){this.createAccountLookupConfig(),this.lup_Account=new Lookup({id:"lu_account",allowClearingResult:!0,showEntityInfoToolTip:!0,readonly:!0,config:this.accountLookupConfig}),this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged")),dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only")},createAccountLookupConfig:function(){return this.accountLookupConfig={id:"_activityAcc",structure:[{label:this.accountText,field:"AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.mainPhoneText,field:"MainPhone"},{label:this.typeText,field:"Type"},{label:this.subTypeText,field:"SubType"},{label:this.statusText,field:"Status"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:!0,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!1,initializeLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.accountLookupConfig},createContactLookupConfig:function(){return this.contactLookupConfig={id:"_activityContact",structure:[{label:this.nameText,field:"NameLF"},{label:this.accountText,field:"Account.AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.workphoneText,field:"WorkPhone"},{label:this.emailText,field:"Email"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"contacts",select:["Address/Timezone"],sort:[{attribute:"NameLF"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupContactText,dialogButtonText:this.okText},this.contactLookupConfig},createContactLookup:function(){this.createContactLookupConfig(),this.lup_Contact=new Lookup({id:"lu_contact",allowClearingResult:!0,config:this.contactLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged")),dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only")},createOpportunityLookupConfig:function(){return this.opportunityLookupConfig={id:"_activityOpp",structure:[{label:this.descriptionText,field:"Description"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.accountText,field:"Account.AccountName"},{label:this.stageText,field:"Stage"},{label:this.statusText,field:"Status"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText},this.opportunityLookupConfig},createOpportunityLookup:function(){this.createOpportunityLookupConfig(),this.lup_Opportunity=new Lookup({id:"lu_opportunity",allowClearingResult:!0,config:this.opportunityLookupConfig,readonly:!0,
showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged")),dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only")},createTicketLookupConfig:function(){return this.ticketLookupConfig={id:"_activityTicket",structure:[{label:this.ticketNumberText,field:"TicketNumber"},{label:this.accountText,field:"Account.AccountName"},{label:this.nameText,field:"Contact.NameLF"},{label:this.phoneText,field:"Contact.WorkPhone"},{label:this.statusText,field:"StatusCode",pickListName:"Ticket Status",propertyType:"SalesLogix.PickList",type:"Sage.UI.Columns.PickList"},{label:this.urgencyText,field:"Urgency.Description"},{label:this.areaText,field:"Area"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText},this.ticketLookupConfig},createTicketLookup:function(){this.createTicketLookupConfig(),this.lup_Ticket=new Lookup({id:"lu_ticket",allowClearingResult:!0,config:this.ticketLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged")),dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only")},createLeadLookupConfig:function(){return this.leadLookupConfig={id:"_activityLead",structure:[{label:this.leadFullNameText,field:"LeadFullName"},{label:this.companyText,field:"Company"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.postalText,field:"Address.PostalCode"},{label:this.statusText,field:"Status"},{label:this.workphoneText,field:"WorkPhone"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"leads",select:["Address/Timezone"],sort:[{attribute:"LeadFullName"}]},isModal:!0,initialLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText},this.leadLookupConfig},createLeadLookup:function(){this.createLeadLookupConfig(),this.lup_Lead=new Lookup({id:"lu_lead",allowClearingResult:!0,config:this.leadLookupConfig,readonly:!0,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged")),dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only")},createLeaderLookupConfig:function(){return this.leaderLookupConfig={id:"_activityLeader",structure:[{label:this.nameText,field:"Name",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"AllowAdd AND (AccessId eq '"+utility.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'"},contextualShow:"",selectionMode:"single",columnResizing:!0},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText},this.leaderLookupConfig},createLeaderlookup:function(){this.createLeaderLookupConfig(),this.lup_Leader=new Lookup({id:"lu_leader",readonly:!0,config:this.leaderLookupConfig}),this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged")),dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only")},createResourcesLookupConfig:function(){return this.resourcesLookupConfig={id:"_activityResources",btnToolTip:this.lookupResourcesText,structure:[{label:this.nameText,field:"Name"},{label:this.typeText,field:"Type",width:"100px"},{label:this.locationText,field:"IsLocation",propertyType:"System.Boolean",format:function(a,b){var c=utility.getValue(b,"Type");return c?"User"===c?"":null===b.IsLocation||"false"===b.IsLocation?this.noText:this.yesText:this.defaultValue}},{label:this.descriptionText,field:"Subtype",width:"200px"}],gridOptions:{columnResizing:!0},displayMode:5,storeOptions:{resourceKind:"activityresourceviews",select:["AccessId","ResourceId","AllowAdd","AllowEdit","AllowDelete"],sort:[{attribute:"Type"},{attribute:"Name"}]},isModal:!0,initialLookup:!1,preFilters:[],query:{conditions:"AllowAdd AND (AccessId eq '"+this._currentUserId+"' OR AccessId eq 'EVERYONE')"},dialogTitle:this.lookupResourcesText,dialogButtonText:this.addResourceText,doSelected:function(a){var b=dijit.byId("activityEditor");b&&b.addMembers(a),this.lookupDialog.hide()}},this.resourcesLookupConfig},createResourcesLookup:function(){this.createResourcesLookupConfig(),this.lup_Resources=new Sage.UI.SDataLookup(this.resourcesLookupConfig),this.lup_Resources.cancelText=this.lup_Resources.closeText,dojo.place(this.lup_Resources.domNode,this.container_ResourcesLup.domNode,"only")},_schedulerInitialized:!1,_resetAttendeesList:function(){if(!this._schedulerInitialized){scheduler.showLightbox=function(){return!1},scheduler.config.timelineStep=30,scheduler.config.timelineStart=2*this._options.calendar.dayStartTime,scheduler.config.timelineSize=2*(this._options.calendar.dayEndTime-this._options.calendar.dayStartTime),this._setTimePatternForDHTMLXLibrary(),scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:this._DHTMLXLibraryTimePattern,x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:[],y_property:"section_id",render:"bar",section_autoheight:!1,dx:100,dy:30}),scheduler.init("scheduler_here",new Date,"timeline"),scheduler.attachEvent("onBeforeDrag",function(){return!1}),scheduler.config.dblclick_create=!1,scheduler.templates.day_date=function(a){return activityUtility.formatLongDate(a)};var a=this;dojo.query(".dhx_cal_prev_timeline_button").connect("onclick",function(){0==!scheduler.config.timelineStart&&a.reRenderTimeline("left")}),dojo.query(".dhx_cal_next_timeline_button").connect("onclick",function(){scheduler.config.timelineStart+scheduler.config.timelineSize<48&&a.reRenderTimeline("right")}),this._schedulerInitialized=!0}scheduler.clearAll()},_loadAttendeesData:function(){if(this._availabilityShowing=!0,"New"===this.mode||"CompleteUnscheduled"===this.mode){var a=this.lup_Leader.get("selectedObject"),b=a.$descriptor,c=a.$key.substr(0,12);return void this.addMembers([{$descriptor:b,$key:c,IsLocation:!1,Name:b,Subtype:"",Type:"User"}])}var d=this.activityId;if(!d&&this._activityData&&(d=this._activityData.$key),d){var e=d.substr(0,12),f=new Sage.SData.Client.SDataNamedQueryRequest(Sage.Data.SDataServiceRegistry.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetMembers").setQueryArg("_activityId",e);f.uri.setCollectionPredicate("'ActivityFreeBusy'"),f.read({success:dojo.hitch(this,this._onReceiveAttendees),failure:dojo.hitch(this,this._availabilityFailed)})}},_attendeesTemplate:new Simplate(['<table class="attendee-item">',"<tr>",'<td class="attendee-name">{%= $.name %}</td>',"{% if (($.isNotLeader) && ($.allowDelete)) { %}",'<td class="remove-attendee" id="{%= $.id %}"><img src="images/icons/Delete_16x16.png" alt="{%= $.removeText %}" title="{%= $.removeText %}" onclick="{%= $.deleteCode %}" /></td>',"{% } %}",'<td class="attendee-status"><img src="{%= $.img %}" alt="{%= $.imgToolTipText %}" title="{%= $.imgToolTipText %}"/></td>',"</tr>","</table>"]),_onReceiveAttendees:function(a){if(this._attendeesData=a.$resources,this._originalLeaderId&&this._originalLeaderId!==this._activityData.Leader.$key)for(var b=this._attendeesData.length,c=0;c<b;c++)if(this._attendeesData[c].id===this._originalLeaderId){this._attendeesData.splice(c,1);break}this._rebuildTimeLine(),this._requestAvailability()},_rebuildTimeLine:function(a){var b;for(b=0;b<this._deleteAttendeeConnects.length;b++)dojo.disconnect(this._deleteAttendeeConnects[b]);this._deleteAttendeeConnects=[];var c=[],d={},e=[],f=[],g=this._activityData.Leader.$key.trim(),h="Sage.Utility.Activity.removeMember('${0}','${1}');";for(b=0;b<this._attendeesData.length;b++){var i=this._blankGif,j="",k=this._attendeesData[b].status||0;1===k||"asAccepted"===k?(i="images/icons/Accept.png",j=this.acceptedText):2!==k&&"asDeclned"!==k||(i="images/icons/Decline.png",j=this.declinedText);var l={key:this._attendeesData[b].id,label:this._attendeesTemplate.apply({name:this._attendeesData[b].name,img:i,imgToolTipText:j,id:this._attendeesData[b].id,isNotLeader:this._attendeesData[b].id.trim()!==g,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(h,[this.id,this._attendeesData[b].id])})};this._attendeesData[b].id.trim()===g?d=l:"user"===this._attendeesData[b].type?e.push(l):f.push(l)}for(c=d.key?[d].concat(e.concat(f)):e.concat(f),b=0;b<this._newAttendeesData.length;b++)c.push({key:this._newAttendeesData[b].$key,label:this._attendeesTemplate.apply({name:this._newAttendeesData[b].Name,img:this._blankGif,id:this._newAttendeesData[b].$key,isNotLeader:this._newAttendeesData[b].$key.trim()!==g,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(h,[this.id,this._newAttendeesData[b].$key])})});if("left"==a)scheduler.config.timelineStart-scheduler.config.timelineSize>0?scheduler.config.timelineStart=scheduler.config.timelineStart-scheduler.config.timelineSize:scheduler.config.timelineStart=0;else if("right"==a){var m=scheduler.config.timelineSize+scheduler.config.timelineStart;m>48-scheduler.config.timelineSize?scheduler.config.timelineStart=48-scheduler.config.timelineSize:scheduler.config.timelineStart=m}this._setTimePatternForDHTMLXLibrary(),scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:this._DHTMLXLibraryTimePattern,x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:c,y_property:"section_id",render:"bar",section_autoheight:!1,dx:100,dy:30}),scheduler.setCurrentView(this._getActivityStartDate(),"timeline")},_updateLocation:function(a,b){var c=this._activityData.Location;if(c&&""!==c){for(var d=c.split("; "),e=[],f=!1,g=0;g<d.length;g++){if(d[g]===a){if(!b)continue;f=!0}e.push(d[g])}!f&&b&&e.push(a),c=e.join("; ")}else b&&(c=a);Sage.Utility.setValue(this._activityData,"Location",c),this.tb_Location.set("value",c)},_removeMember:function(a){var b,c=a.memberId,d=[];for(b=0;b<this._attendeesData.length;b++)this._attendeesData[b].id===c?("resource"===this._attendeesData[b].type&&this._attendeesData[b].IsLocation&&this._updateLocation(this._attendeesData[b].name,!1),this._attendeesForRemoval.push(this._attendeesData[b])):d.push(this._attendeesData[b]);for(this._attendeesData=d,d=[],b=0;b<this._newAttendeesData.length;b++)this._newAttendeesData[b].$key===c?"Resource"===this._newAttendeesData[b].Type&&!0===this._newAttendeesData[b].IsLocation&&this._updateLocation(this._newAttendeesData[b].Name,!1):d.push(this._newAttendeesData[b]);this._newAttendeesData=d,this._rebuildTimeLine(),a.attendeesTab||this.attendeesTab._removeAssociatedContact(a.memberId)},addMembers:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.$key.length>12&&(d.$key=d.$key.substr(0,12)),this._isMember(d)||(d.ResourceId&&(d.$key=d.ResourceId),"Resource"===d.Type&&!0===d.IsLocation&&this._updateLocation(d.Name,!0),b.push(d.$key),this._newAttendeesData.push(d))}this._availabilityShowing&&(this._rebuildTimeLine(),this._requestAvailability()),this.attendeesTab._addContactAttendees(b)},_isMember:function(a){var b,c=this._attendeesData.length;for(b=0;b<c;b++)if(this._attendeesData[b].id===a.$key)return!0;for(c=this._newAttendeesData.length,b=0;b<c;b++)if(this._newAttendeesData[b].$key===a.$key)return!0;return!1},_updateUsersListWithNewLeader:function(a,b){var c,d=this._attendeesData.length;for(c=0;c<d;c++)if(this._attendeesData[c].id===a){this._attendeesData.splice(c,1);break}for(d=this._newAttendeesData.length,c=0;c<d;c++)if(this._newAttendeesData[c].$key===a){this._newAttendeesData.splice(c,1);break}this.addMembers([{$descriptor:b.$descriptor,$key:b.$key,IsLocation:!1,Name:b.$descriptor,Subtype:"",Type:"User"}])},_requestAvailability:function(){if(!(this._attendeesData.length<1&&this._newAttendeesData.length<1)){for(var a=[],b=0;b<this._attendeesData.length;b++)a.push("'"+this._attendeesData[b].id+"'");for(b=0;b<this._newAttendeesData.length;b++)a.push("'"+this._newAttendeesData[b].$key+"'");if(this._availabilityDataDateRange.fromDate){var c=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate);if(c>this._availabilityDataDateRange.fromDate&&c<this._availabilityDataDateRange.toDate&&a.join("")===this._availabilityDataDateRange.users.join(""))return}this._requestAvailabilityFor(a)}},_availabilityDataDateRange:{fromDate:!1,toDate:!1,users:[]},_requestAvailabilityFor:function(a){var b=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate),c=dojoDate.add(b,"day",-7),d=dojoDate.add(b,"day",7);this._availabilityDataDateRange.fromDate=c,this._availabilityDataDateRange.toDate=d,this._availabilityDataDateRange.users=a;var e=Sage.Services.getService("ActivityService");if(e){var f={quotedIds:a,startDate:c,endDate:d,expandRecurrences:!0,includeTimless:!1,timelessOnly:!1};e.getActivityFreeBusyFor(this,f,this._onReceiveAvailability,this._availabilityFailed)}},_onReceiveAvailability:function(a){this._availabilityData=a.$resources,this._applyAvailability()},_applyAvailability:function(){scheduler.clearAll();for(var a=0;a<this._availabilityData.length;a++){var b=this._availabilityData[a];262162===b.type&&b.itemId!==this._currentUserId&&(b.description=activityUtility.getActivityTypeName("atPersonal"));var c=b.activityId==this.activityId,d=Sage.Utility.Convert.toDateFromString(b.startDate),e=dojoDate.add(d,"minute",b.duration);scheduler.addEvent(d,e,b.description,null,{section_id:b.itemId,activity_Id:b.activityId,current_event:c})}},reRenderTimeline:function(a){this._rebuildTimeLine(a),this._applyAvailability()},_availabilityFailed:function(a,b){},_recurringStartDateChanged:function(a){var b=this.dtp_startDate.get("value");if(a.getMonth()!==b.getMonth()||a.getDate()!==b.getDate()||a.getFullYear()!==b.getFullYear()){if(this._activityData.StartDate){var c=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getHours(),d=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getMinutes();a.setHours(c),a.setMinutes(d)}this._activityData.StartDate=a.getFullYear?utility.Convert.toIsoStringFromDate(a):a,this.dtp_startDate.set("value",a),this._startDateChanged()}},_recurringPeriodChanged:function(a){this._handleAutoRolloverState()},_isOccurence:function(){return this.activityId.length>12},_canEdit:function(){return!("Confirm"===this.mode||!this._activityData.AllowEdit||this._isOccurence())},_setTimePatternForDHTMLXLibrary:function(){var a=Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortTimePattern,b=-1!==a.indexOf("H");this._DHTMLXLibraryTimePattern=b?"%G:%i":"%g:%i %a"},_emptyActivity:{$key:"",AccountId:null,AccountName:"",ActivityBasedOn:null,Alarm:!1,AlarmTime:utility.Convert.toIsoStringFromDate(new Date),Attachment:!1,Category:null,ContactId:null,ContactName:"",CreateDate:"",CreateUser:"",Description:"",Duration:15,ForeignId1:null,ForeignId2:null,ForeignId3:null,ForeignId4:null,LeadId:null,LeadName:"",LongNotes:null,Notes:null,OpportunityId:null,OpportunityName:null,OriginalDate:"",PhoneNumber:"",Priority:null,ProcessId:null,ProcessNode:null,ProjectId:null,RecurIterations:0,RecurPeriod:0,RecurPeriodSpec:0,Recurring:!1,RecurSkip:"",Rollover:!1,StartDate:utility.Convert.toIsoStringFromDate(new Date),TicketId:null,TicketNumber:null,Timeless:!1,Type:"atAppointment",UserDef1:null,UserDef2:null,UserDef3:null,AttachmentCount:null,Location:null,EndDate:"",Resources:{},Leader:{$key:""},UserActivities:{},UserNotifications:{}}});return activityEditor})},"Sage/_Templated":function(){define(["dojo/dom-construct","dojo/_base/declare","dojo/query","dojo/parser","dojo/_base/array","dojo/_base/lang","dijit/registry","dijit/_base/wai"],function(a,b,c,d,e,f,g,h){return b("Sage._Templated",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){var b,e;if(this.widgetTemplate&&this.contentTemplate)throw new Error('Both "widgetTemplate" and "contentTemplate" cannot be specified at the same time.');if(this.contentTemplate)this.inherited(arguments),e=["<div>",this.contentTemplate.apply(this),"</div>"].join(""),b=a.toDom(e),this._attachTemplateNodes(b);else{if(!this.widgetTemplate)return;if(e=this.widgetTemplate.apply(this),b=a.toDom(e),1!==b.nodeType)throw new Error("Invalid template.");this.domNode=b,this._attachTemplateNodes(b)}if(this.widgetsInTemplate){var f=d.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"});this._startupWidgets=this._startupWidgets||[],this._startupWidgets=this._startupWidgets.concat(f),this._supportingWidgets=this._supportingWidgets||[],this._supportingWidgets=this._supportingWidgets.concat(g.findWidgets(b)),this._attachTemplateNodes(f,function(a,b){return a[b]})}this.contentTemplate?c("> *",b).place(this.domNode):this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b,c,d;if(b=this.containerNode,c=document.createDocumentFragment(),d=!1,a&&b){for(;a.hasChildNodes();)c.appendChild(a.firstChild),d=!0;d&&b.appendChild(c)}},_attachTemplateNodes:function(a,b){b=b||function(a,b){return a.getAttribute(b)};for(var c=a instanceof Array?a:a.all||a.getElementsByTagName("*"),d=a instanceof Array?0:-1;d<c.length;d++){var g=-1==d?a:c[d];if(!this.widgetsInTemplate||!b(g,"dojoType")&&!b(g,"data-dojo-type")){var i=b(g,"dojoAttachPoint")||b(g,"data-dojo-attach-point");if(i)for(var j,k=i.split(/\s*,\s*/);j=k.shift();)this[j]instanceof Array?this[j].push(g):this[j]=g,this._attachPoints.push(j);var l=b(g,"dojoAttachEvent")||b(g,"data-dojo-attach-event");if(l)for(var m,n=l.split(/\s*,\s*/),o=f.trim;m=n.shift();)if(m){var p=null;if(-1!=m.indexOf(":")){var q=m.split(":");m=o(q[0]),p=o(q[1])}else m=o(m);p||(p=m),this._attachEvents.push(this.connect(g,m,p))}var r=b(g,"waiRole");r&&h.setWaiRole(g,r);var s=b(g,"waiState");s&&e.forEach(s.split(/\s*,\s*/),function(a){if(-1!=a.indexOf("-")){var b=a.split("-");h.setWaiState(g,b[0],b[1])}})}}},startup:function(){e.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()}),this.inherited(arguments)},destroyRendering:function(){e.forEach(this._attachPoints,function(a){delete this[a]},this),this._attachPoints=[],e.forEach(this._attachEvents,this.disconnect,this),this._attachEvents=[],this.inherited(arguments)}})})},"Sage/Data/SingleEntrySDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare"],function(a,b,c){return c("Sage.Data.SingleEntrySDataStore",a,{_entity:!1,_request:!1,_okToCache:!0,postMixInProperties:function(){},getFeed:function(a){},fetch:function(a){if(a.queryOptions&&a.queryOptions.currentEntity&&this._entity)return void this.returnCollectionProperty(a,a.queryOptions.property);this.verifyService();var b=this._getRequest();if(a.predicate){if(this._entity&&a.predicate===this._entity.$key&&this._okToCache&&a.onComplete)return void a.onComplete.call(a.scope||this,this._entity,a);b.setResourceSelector(a.predicate)}this.select&&this.select.length>0&&b.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&b.setQueryArg("include",this.include.join(",")),this.predicate&&this.predicate.length>0&&b.setResourceSelector(this.predicate),a.beforeRequest&&a.beforeRequest.call(a.scope||this,b),b.read({success:dojo.hitch(this,this.onSuccess,a),failure:dojo.hitch(this,this.onFailure,a)})},save:function(a){this._request&&this._entity&&(a.ignoreETag=b.isTrue(a.ignoreETag)?a.ignoreETag:this.ignoreETag,this._okToCache=!1,this._request.update(this._entity,a))},setValue:function(a,c,d){var e=a||this._entity;if(e){var f=this.getValue(e,c,"");b.setValue(e,c,d),this.onSet(e,c,f,d)}},getCurrentEntity:function(){return this._entity},newItem:function(a){var b=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);b.setResourceKind(this.resourceKind),b.read({success:function(b){this._entity=b,a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:function(b){a.onError&&a.onError.call(a.scope||this,b)},scope:this})},saveNewEntity:function(a,b,c,d,e){a||(a=this._entity);var f=new Sage.SData.Client.SDataSingleResourceRequest(this.service);f.setResourceKind(this.resourceKind),e&&e.call(d||this,f,a),f.create(a,{success:b||function(a){},failure:c||function(a,b){},scope:d||this})},deleteEntity:function(a,b,c,d){if(a=a||this._entity){var e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);e.setResourceKind(this.resourceKind),e.setResourceSelector("'"+a.$key+"'"),e.delete(a,{success:b||function(a){},failure:c||function(a){},scope:d||this})}},clearCache:function(){this._entity=!1},_getRequest:function(){if(!this._request){var a=new Sage.SData.Client.SDataSingleResourceRequest(this.service);a.setResourceKind(this.resourceKind),this._request=a}return this._request},returnCollectionProperty:function(a,b){if(this._entity&&this._entity.hasOwnProperty(b)){var c=this._entity[b].$resources;"unknown"!=typeof c&&(a.onBegin&&a.onBegin.call(a.scope||this,c.length,a),a.onComplete&&a.onComplete.call(a.scope||this,c,a))}},onSuccess:function(a,b){b?(this._okToCache=!0,this._entity=b,a.onComplete&&a.onComplete.call(a.scope||this,b,a)):a.onError&&a.onError.call(a.scope||this,"invalid feed",a)},onFailure:function(a,b,c){this._entity=!1,a.onError&&a.onError.call(a.scope||this,b.responseText,a)},onSet:function(a,b,c,d){}})})},"Sage/MainView/BindingsManager":function(){define(["dijit/_Widget","dojo/_base/declare","Sage/Utility/Activity"],function(a,b,c){var d=b("Sage.MainView.DataBinding",a,{boundEntity:!1,boundWidget:!1,widgetEvent:"onChange",widgetProperty:"value",entityProperty:!1,defaultValue:"",twoWay:!0,_connection:!1,bind:function(){this.boundWidget&&this.boundEntity&&this.entityProperty&&(this.boundWidget.set(this.widgetProperty,this._formatValueFromEntity(Sage.Utility.getValue(this.boundEntity,this.entityProperty,this.defaultValue))),this.twoWay&&!this._connection&&(this._connection=dojo.connect(this.boundWidget,this.widgetEvent,dojo.hitch(this,"applyWidgetChange",this.boundWidget))))},_formatValueFromEntity:function(a){return a},applyWidgetChange:function(a,b){b||(b=a.get(this.widgetProperty));var c=Sage.Utility.getValue(this.boundEntity,this.entityProperty),d=this._formatValueFromControl(b);c!=d&&(Sage.Utility.setValue(this.boundEntity,this.entityProperty,d),this.onChange(this.boundEntity,this.entityProperty,c,b))},_formatValueFromControl:function(a){return a},_setBoundEntityAttr:function(a){this.boundEntity=a,this.bind()},destroy:function(){dojo.disconnect(this._connection),this.inherited(arguments)},onChange:function(a,b,c,d){}}),e=b("Sage.MainView.DateDataBinding",d,{_formatValueFromEntity:function(a){var b=Sage.Utility.Convert.toDateFromString(a);return b&&c.isDateFiveSecondRuleTimeless(b)&&(b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,5)),b},_formatValueFromControl:function(a){return a&&a.getUTCFullYear||(a=this.boundWidget.get(this.widgetProperty))&&a.getUTCFullYear?Sage.Utility.Convert.toIsoStringFromDate(a):""}});return b("Sage.MainView.BindingsManager",null,{constructor:function(a){this._bindings=[],this._connections=[],this.boundEntity=!1,this._defaultBindingOptions={boundEntity:!1,boundWidget:!1,widgetEvent:"onChange",widgetProperty:"value",entityProperty:!1,defaultValue:"",twoWay:!0,dataType:"string"};for(var b=a||{},c=dojo.mixin(this._defaultBindingOptions,b.defaultBinding||{}),d=b.items||[],e=0;e<d.length;e++)this._addNew(dojo.mixin({},c,d[e]))},add:function(a){a instanceof Sage.MainView.DataBinding&&(this._connections.push(dojo.connect(a,"onChange",this,"onChange")),this._bindings.push(a))},_addNew:function(a){"date"===a.dataType?this.add(new e(a)):this.add(new d(a))},addBindings:function(a){if(dojo.isArray(a))for(var b=0;b<a.length;b++)this._addNew(dojo.mixin(this._defaultBindingOptions,a[b]));else this._addNew(dojo.mixin(this._defaultBindingOptions,a))},bind:function(){for(var a=0;a<this._bindings.length;a++)this._bindings[a]instanceof Sage.MainView.DataBinding&&this._bindings[a].bind()},setBoundEntity:function(a){this._entity=a;for(var b=0;b<this._bindings.length;b++)this._bindings[b]instanceof Sage.MainView.DataBinding&&this._bindings[b].set("boundEntity",a)},destroy:function(){var a,b=this._connections.length;for(a=0;a<b;a++)dojo.disconnect(this._connections[a]);for(this._connections=[],b=this._bindings.length,a=0;a<b;a++){this._bindings.pop().destroy()}this._bindings=[]},onChange:function(a,b,c,d){}})})},"Sage/Utility/Activity":function(){define(["dojo/date/locale","dojox/grid/cells/_base","Sage/Utility","dojo/string","dojo/i18n!./nls/Activity","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore"],function(dateLocale,cell,utility,dstring,nlsStrings,declare,sDataServiceRegistry,SingleEntrySDataStore){var isValidId=function(a){var b=!1;return a&&""!==a.trim()&&(b=!0),b},typeCell=declare("Sage.Utility.Activity.TypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="";c="number"==typeof a?this.get(a,b):a;var d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,e=utility.getValue(d,"$key"),f=!!b.hasOwnProperty("Status")&&b.Status,g='<span onclick="${0}" class="activity-type-link" ><div class="Global_Images icon16x16 ${1}" title="${2}"></div>&nbsp;${2}</span>',h=(Sage.Utility.getValue(d,"RecurrenceState"),Sage.Utility.Activity._getReccurenceFlag(d)),i="javascript:Sage.Link.editActivity('"+e+"', "+h+")";if(f){var j=utility.getClientContextByKey("userID"),k=b.hasOwnProperty.User?b.User.$key:j;"asUnconfirmed"===f&&j===k&&(i="javascript:Sage.Link.confirmActivityFor('"+e+"', '"+j+"')")}else i="javascript:Sage.Link.editActivityIfConfirmed('"+e+"', "+h+")";return dstring.substitute(g,[i,Sage.Utility.Activity.getActivityImageClass(c,"small"),Sage.Utility.Activity.getActivityTypeName(c)])}}),historyTypeCell=declare("Sage.Utility.Activity.HistoryTypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=utility.getValue(b,"$key"),d=utility.getValue(b,"Type"),e="",f="";return"at"===d.toString().substring(0,2)?(e=Sage.Utility.Activity.getActivityTypeName(d),f=d):(e=Sage.Utility.Activity.getActivityTypeNameFromEnumValue(d),f=Sage.Utility.Activity.getActivityTypeCodeFromEnumValue(d)),dstring.substitute('<span onclick="javascript:Sage.Link.editHistory(\'${0}\')" class="activity-type-link"><div class="Global_Images icon16x16 ${1} title="${2}"></div>&nbsp;${2}</span>',[c,Sage.Utility.Activity.getActivityImageClass(f,"small"),e])}}),alarmCell=declare("Sage.Utility.Activity.AlarmCell",cell,{formatter:function(a,b){return a?"<img src='images/icons/Alarm_16x16.gif'/>":"<div><div>"}}),recurCell=declare("Sage.Utility.Activity.RecurCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="",d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,e=utility.getValue(d,"Recurring"),f=utility.getValue(d,"RecurrenceState");return(e||f&&"rstOccurrence"===f)&&(c='<div class="Global_Images icon16x16 icon_recurring"></div>'),c}}),attachCell=declare("Sage.Utility.Activity.AttachCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="<div><div>",d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b;return utility.getValue(d,"Attachment")&&(c='<div class="Global_Images icon16x16 icon_attach_to_16"></div>'),c}}),confrimStatusCell=declare("Sage.Utility.Activity.ConfrimStatusCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="<div><div>";return"asUnconfirmed"===utility.getValue(b,"Status")&&(c='<div class="Global_Images icon16x16 icon_unconfirmedActivity16x16"></div>'),c}}),durationCell=declare("Sage.Utility.Activity.DurationCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c="",d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,e=utility.getValue(d,"Duration");if(e){var f=utility.getValue(d,"Timeless");c=Sage.Utility.Activity.formatDuration(e,f)}return c}}),nameCell=declare("Sage.Utility.Activity.NameCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,d=utility.getValue(c,"ContactName"),e=utility.getValue(c,"ContactId");if(isValidId(e))return'<a href="Contact.aspx?entityid='+e+'" >'+d+"</a>";var f=utility.getValue(c,"LeadName"),g=utility.getValue(c,"LeadId");return isValidId(g)?'<a href="Lead.aspx?entityid='+g+'" >'+f+"</a>":"<div></div> "}}),nameTypeCell=declare("Sage.Utility.Activity.NameTypeCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,d=utility.getValue(c,"ContactId");if(isValidId(d))return nlsStrings.Contact;var e=utility.getValue(c,"LeadId");return isValidId(e)?nlsStrings.Lead:""}}),accountCell=declare("Sage.Utility.Activity.AccountCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b,d=utility.getValue(c,"AccountName"),e=utility.getValue(c,"AccountId"),f="";isValidId(e)&&(f='<a href="Account.aspx?entityid='+e+'" >'+d+"</a>");var g=utility.getValue(c,"LeadId");return isValidId(g)&&(f='<a href="Lead.aspx?entityid='+g+'" >'+d+"</a>"),f}}),leaderCell=declare("Sage.Utility.Activity.LeaderCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c,d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:null;return c=d?utility.getValue(d,"Leader"):b.hasOwnProperty("Leader")&&"object"==typeof b.Leader?b.Leader:b,utility.getValue(c,"$descriptor")}}),completeCell=declare("Sage.Utility.Activity.CompleteCell",dojox.grid.cells.Cell,{format:function(a,b){if(!b)return this.defaultValue;var c=utility.getValue(b,"$key");if(isValidId(c)){var d=b.hasOwnProperty("Activity")&&"object"==typeof b.Activity?b.Activity:b;return dstring.substitute('<span onclick="javascript:Sage.Link.completeActivity(\'${0}\', ${1})" class="activity-type-link">${2}</span>',[c,utility.getValue(d,"Recurring"),nlsStrings.Complete])}return""}});return Sage.namespace("Utility.Activity"),Sage.Utility.Activity={timelessText:nlsStrings.timelessText,_imageMap:{small:{atNote:"images/icons/note_16x16.gif",atPhoneCall:"images/icons/Call_16x16.gif",atToDo:"images/icons/To_Do_16x16.gif",atAppointment:"images/icons/Meeting_16x16.gif",atPersonal:"images/icons/Personal_16x16.gif",atLiterature:"images/icons/Literature_16x16.png",atDoc:"images/icons/mailletter_16x16.png",atFax:"images/icons/fax_16x16.gif",atEmail:"images/icons/mailletter_16x16.png"},medium:{atNote:"images/icons/Note_24x24.gif",atPhoneCall:"images/icons/Call_24x24.gif",atToDo:"images/icons/To_Do_24x24.gif",atAppointment:"images/icons/Meeting_24x24.gif",atPersonal:"images/icons/Personal_24x24.gif",atLiterature:"images/icons/Literature_24x24.png",atDoc:"images/icons/mailletter_24x24.gif",atFax:"images/icons/fax_24x24.gif",atEmail:"images/icons/mailletter_24x24.gif"},large:{atNote:"images/icons/Note_24x24.gif",atPhoneCall:"images/icons/Call_32x32.gif",atToDo:"images/icons/To_Do_32x32.gif",atAppointment:"images/icons/Meeting_32x32.gif",atPersonal:"images/icons/Personal_32x32.gif",atLiterature:"images/icons/Literature_32x32.png",atDoc:"images/icons/mailletter_32x32.gif",atFax:"images/icons/fax_32x32.gif",atEmail:"images/icons/mailletter_32x32.gif"}},_iconClassMap:{small:{
atNote:"icon_note_16x16",atPhoneCall:"icon_Call_16x16",atToDo:"icon_To_Do_16x16",atAppointment:"icon_Meeting_16x16",atPersonal:"icon_Personal_16x16",atLiterature:"icon_Literature_16x16",atDoc:"icon_mailletter_16x16",atFax:"icon_fax_16x16",atEMail:"icon_mailletter_16x16"},medium:{atNote:"icon_Note_24x24",atPhoneCall:"icon_Call_24x24",atToDo:"icon_To_Do_24x24",atAppointment:"icon_Meeting_24x24",atPersonal:"icon_Personal_24x24",atLiterature:"icon_Literature_24x24",atDoc:"icon_mailletter_24x24",atFax:"icon_fax_24x24",atEmail:"icon_mailletter_24x24"},large:{atNote:"icon_Note_24x24",atPhoneCall:"icon_Call_32x32",atToDo:"icon_To_Do_32x32",atAppointment:"icon_Meeting_32x32",atPersonal:"icon_Personal_32x32",atLiterature:"icon_Literature_32x32",atDoc:"icon_mailletter_32x32",atFax:"icon_fax_32x32",atEmail:"icon_mailletter_32x32"}},_picklistMap:{Regarding:{atNote:"Note Regarding",atPhoneCall:"Phone Call Regarding",atToDo:"To Do Regarding",atAppointment:"Meeting Regarding",atEmail:"To Do Regarding",atPersonal:"Personal Activity Regarding",atLiterature:"To Do Regarding"},Category:{atNote:"Note Category Codes",atPhoneCall:"Phone Call Category Codes",atToDo:"To Do Category Codes",atAppointment:"Meeting Category Codes",atEmail:"To Do Category Codes",atPersonal:"",atLiterature:"To Do Category Codes"},Result:{atNote:"Meeting Result Codes",atPhoneCall:"Phone Call Result Codes",atToDo:"To Do Result Codes",atAppointment:"Meeting Result Codes",atEmail:"To Do Result Codes",atPersonal:"Personal Activity Result Codes",atLiterature:"To Do Result Codes"}},_notMyPersonalActivityMixin:{AccountId:"",AccountName:"",Category:nlsStrings.Personal,ContactId:"",ContactName:"",Description:nlsStrings.Personal,LeadId:"",LeadName:"",LongNotes:"",Notes:"",OpportunityId:"",OpportunityName:"",PhoneNumber:"",Priority:"",TicketId:"",TicketNumber:"",Location:""},secureActivityData:function(a){if(262162==a.Type||"atPersonal"==a.Type){var b,c=Sage.Services.getService("ClientContextService");if(c&&c.containsKey("userID")&&(b=c.getValue("userID")),b===a.UserId)return;if(a.Leader&&b===a.Leader.$key)return;dojo.mixin(a,Sage.Utility.Activity._notMyPersonalActivityMixin)}},getActivityImage:function(a,b){return b=Sage.Utility.Activity._verifySize(b),a=a||"atAppointment",Sage.Utility.Activity._imageMap[b][a]||Sage.Utility.Activity._imageMap[b].atAppointment},_verifySize:function(a){return a=a||"small",a=a.toLowerCase(),"small"!==a&&"medium"!==a&&"large"!==a&&(a="small"),a},getActivityImageClass:function(a,b){return b=Sage.Utility.Activity._verifySize(b),a=a||"atAppointment",Sage.Utility.Activity._iconClassMap[b][a]||Sage.Utility.Activity._iconClassMap[b].atAppointment},getActivityTypeName:function(a){switch(a){case"atPhoneCall":return nlsStrings.PhoneCall||"Phone Call";case"atToDo":return nlsStrings.ToDo||"To Do";case"atAppointment":return nlsStrings.Meeting||"Meeting";case"atPersonal":return nlsStrings.Personal||"Personal Activity";case"atLiterature":return nlsStrings.Literature||"Literature";case"atFax":return nlsStrings.Fax||"Fax";case"atLetter":return nlsStrings.Letter||"Letter";case"atNote":return nlsStrings.Note||"Note";case"atEMail":return nlsStrings.Email||"E-mail";case"atDoc":return nlsStrings.Document||"Document";case"atDatabaseChange":return nlsStrings.DatabaseChange||"Database Change";case"atInternal":return nlsStrings.Event||"Event";case"atSchedule":return nlsStrings.ScheduledEvent||"Scheduled Event";default:return a}},getActivityTypeNameFromEnumValue:function(a){switch(a){case 262146:return nlsStrings.PhoneCall||"Phone Call";case 262147:return nlsStrings.ToDo||"To Do";case 262145:return nlsStrings.Meeting||"Meeting";case 262162:return nlsStrings.Personal||"Personal Activity";case 262163:return nlsStrings.Literature||"Literature";case 262155:return nlsStrings.Fax||"Fax";case 262148:return nlsStrings.Note||"Note";case 262154:return nlsStrings.Email||"E-mail";case 262153:return nlsStrings.Document||"Document";case 262156:return nlsStrings.DatabaseChange||"Database Change";case 0:return nlsStrings.Event||"Event";case 1:return nlsStrings.ScheduledEvent||"Scheduled Event";default:return a}},getActivityTypeCodeFromEnumValue:function(a){switch(a){case 262146:return"atPhoneCall";case 262147:return"atToDo";case 262145:return"atAppointment";case 262162:return"atPersonal";case 262163:return"atLiterature";case 262155:return"atFax";case 262148:return"atNote";case 262154:return"atEMail";case 262153:return"atDoc";case 262156:return"atDatabaseChange";case 0:return"atInternal";case 1:return"atSchedule";default:return a}},getActivityTypeEnumValue:function(a){switch(a){case"atPhoneCall":return"262146";case"atToDo":return"262147";case"atAppointment":return"262145";case"atPersonal":return"262162";case"atLiterature":return"262163";case"atFax":return"262155";case"atNote":return"262148";case"atEMail":return"262154";case"atDoc":return"262153";case"atDatabaseChange":return"262156";case"atSchedule":return"1";case"atInternal":return"0";default:return a}},getActivityTypeEnumCode:function(a){switch(a){case 262146:return"atPhoneCall";case 262147:return"atToDo";case"atAppointment":case 262145:return"atAppointment";case 262162:return"atPersonal";case"atLiterature":return"atLiterature";case"atFax":return"atFax";case"atLetter":return"atLetter";case"atNote":return"atNote";case"atEMail":return"atEMail";default:return a}},getConfirmationTypeEnumCode:function(a){switch(a){case 0:return"New";case 1:return"Change";case 2:return"Deleted";case 3:return"Confirm";case 4:return"Decline";case 5:return"Unknown";case 6:return"Leader";default:return a}},getConfirmationDisplayName:function(a){switch(a){case"New":return nlsStrings.New||"New";case"Change":return nlsStrings.Change||"Change";case"Deleted":return nlsStrings.Deleted||"Deleted";case"Confirm":return nlsStrings.Confirm||"Confirm";case"Decline":return nlsStrings.Decline||"Decline";case"Unknown":return nlsStrings.Unknown||"Unknown";case"Leader":return nlsStrings.Leader||"Leader";default:return a}},getActivityPicklistName:function(a,b){return a=a||"Regarding",Sage.Utility.Activity._picklistMap.hasOwnProperty(a)||(a="Regarding"),Sage.Utility.Activity._picklistMap[a][b]||Sage.Utility.Activity._picklistMap[a].atToDo},formatActivityStartDate:function(a,b){if(!a)return"";if(Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a)),void 0===b&&(b=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(a)),b){var c=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate());return dateLocale.format(c,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})+" "+this.timelessText}return dateLocale.format(a,{selector:"datetime",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},getActivityEndDate:function(a,b,c){return!!a&&(Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a)),void 0===c&&(c=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(a)),c?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5):dojo.date.add(a,"minute",b))},formatActivityStartDateForCalendar:function(a,b,c){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return c&&(d=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,5)),b?dateLocale.format(d,{selector:"date",datePattern:b,locale:Sys.CultureInfo.CurrentCulture.name}):dateLocale.format(d,{selector:"date",datePattern:"MM/d/yy H:mm",locale:Sys.CultureInfo.CurrentCulture.name})},formatActivityEndDateForCalendar:function(a,b){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()),d=dojo.date.add(c,"minute",b);return dojo.date.compare(d,c,"date")>0?dateLocale.format(c,{selector:"date",datePattern:"MM/d/yy 24:00",locale:Sys.CultureInfo.CurrentCulture.name}):dateLocale.format(d,{selector:"date",datePattern:"MM/d/yy H:mm",locale:Sys.CultureInfo.CurrentCulture.name})},formatEventDateForCalendar:function(a,b){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return b?dateLocale.format(c,{selector:"date",datePattern:b,locale:Sys.CultureInfo.CurrentCulture.name}):dateLocale.format(c,{selector:"date",datePattern:"MM/d/yy H:mm",locale:Sys.CultureInfo.CurrentCulture.name})},formatEventDate:function(a){return a?(Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a)),dateLocale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})):""},formatDateAdd:function(a,b,c){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return d=dojo.date.add(d,b,c),dateLocale.format(d,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},formatShortDate:function(a){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return dateLocale.format(b,{selector:"date",formatLength:"short",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},formatLongDate:function(a){if(!a)return"";Sage.Utility.Convert.isDateString(a)&&(a=Sage.Utility.Convert.toDateFromString(a));var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());return dateLocale.format(b,{selector:"date",formatLength:"long",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})},roundDateToNextQuarterHour:function(a){a.setSeconds(0);var b=a.getMinutes();return b<15?a.setMinutes(15):b<30?a.setMinutes(30):b<45?a.setMinutes(45):(a.setMinutes(0),a=dojo.date.add(a,"hour",1)),a},isDateFiveSecondRuleTimeless:function(a){return!!a&&(0===a.getUTCHours()&&0===a.getUTCMinutes()&&5===a.getUTCSeconds())},formatDuration:function(a,b){if(b)return"";if(!a)return"0"+nlsStrings.m;if(a<60)return a+nlsStrings.m;if(a>60){var c=String(a/60).split("."),d=a%60;return c[0]+nlsStrings.h+" "+d+nlsStrings.m}return"1"+nlsStrings.hr},formatTimelessStartDate:function(a){if(!a)return"";var b=function(a){return a<10?"0"+a:a};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T00:00:00Z"},formatTimelessEndDate:function(a,b,c){if(!a)return"";var d=new Date(a.getFullYear(),a.getMonth(),a.getDate());b&&c&&(d=dojo.date.add(d,b,c));var e=function(a){return a<10?"0"+a:a},f=d.getUTCFullYear(),g=d.getUTCMonth()+1,h=d.getUTCDate();return f+"-"+e(g)+"-"+e(h)+"T23:59:59Z"},formatRawTimelessStartDate:function(a){if(!a)return"";var b=function(a){return a<10?"0"+a:a};return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T00:00:00Z"},formatRawTimelessEndDate:function(a,b,c){if(!a)return"";var d=new Date(a.getFullYear(),a.getMonth(),a.getDate());b&&c&&(d=dojo.date.add(d,b,c));var e=function(a){return a<10?"0"+a:a},f=d.getFullYear(),g=d.getMonth()+1,h=d.getDate();return f+"-"+e(g)+"-"+e(h)+"T23:59:59Z"},getNthWeekOfMonth:function(a){for(var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getMonth(),d=1;d<7;d++)if(b=dojo.date.add(b,"week",-1),c!==b.getMonth())return d;return 1},setDateToNthWeekDay:function(a,b,c){var d,e=new Date(a.getFullYear(),a.getMonth(),a.getDate());if(5===b)for(e.setDate(dojo.date.getDaysInMonth(e)),d=0;d<7&&e.getDay()!==c;d++)e=dojo.date.add(e,"day",-1);else{for(e.setDate(1),d=0;d<7&&e.getDay()!==c;d++)e=dojo.date.add(e,"day",1);e=dojo.date.add(e,"week",b-1)}return e},isValidId:function(a){var b=!1;return a&&""!==a.trim()&&(b=!0),b},getConfirmStatusName:function(a){if(!a)return nlsStrings.Unknown||"Unknown";switch(a.toUpperCase().trim()){case"CHANGE":return nlsStrings.confirmTypeChanged||"Changed";case"CONFIRM":return nlsStrings.confirmTypeConfirmed||"Confirmed";case"DELETED":return nlsStrings.confirmTypeDeleted||"Deleted";case"LEADER":return nlsStrings.Leader||"Leader";case"NEW":return nlsStrings.New||"New";default:return a}},isReocurringId:function(a){return";"===a.charAt(12)},findFailedRequestMessage:function(request,def){if(request.responseText){var rsp=eval(request.responseText);if(dojo.isArray(rsp)&&rsp[0])return rsp[0].message||def}return def},removeMember:function(a,b){var c=dijit.byId(a);if(c){var d={memberId:b};c._removeMember(d)}},getActivityEditLink:function(a){var b=a.id,c=Sage.Utility.Activity._getReccurenceFlag(a),d=a.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(a.Type)),e="javascript:Sage.Link.editActivity('"+b+"', "+c+")";return dstring.substitute('<span onclick="${0}" class="activity-type-link">${1}</span>',[e,d])},getActivitySummaryHeader:function(a){var b=a.id,c='<span onclick="${0}" class="activity-type-link">${1}</span>',d="";a.Alarm&&(d+='<div class="Global_Images icon24x24 icon_Alarm_24x24" > </div>&nbsp;'),(Sage.Utility.Activity.isReocurringId(a.id)||a.Recurring)&&(d+='<div class="Global_Images icon16x16 icon_recurring" > </div>&nbsp;'),d+='<div class="Global_Images icon24x24 '+Sage.Utility.Activity.getActivityImageClass(a.Type,"medium")+'"> </div>&nbsp;';var e=Sage.Utility.Activity._getReccurenceFlag(a),f=a.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(a.Type)),g="javascript:Sage.Link.editActivity('"+b+"', "+e+")";return d+=dstring.substitute(c,[g,f])},getUserActivitySummaryHeader:function(a){var b=a.Activity,c="";"asUnconfirmed"===a.Status&&(c+='<div class="Global_Images icon16x16 icon_unconfirmedActivity16x16" > </div>'),b.Alarm&&(c+='<div class="Global_Images icon24x24 icon_Alarm_24x24" > </div>&nbsp;'),(Sage.Utility.Activity.isReocurringId(b.$key)||b.Recurring)&&(c+='<div class="Global_Images icon16x16 icon_recurring" > </div>&nbsp;'),c+='<div class="Global_Images icon24x24 '+Sage.Utility.Activity.getActivityImageClass(b.Type,"medium")+'"> </div>&nbsp;';var d=Sage.Utility.Activity._getReccurenceFlag(b),e=b.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(b.Type)),f="javascript:Sage.Link.editActivity('"+b.$key+"', "+d+")";return"asUnconfirmed"===a.Status&&(f="javascript:Sage.Link.confirmActivityFor('"+b.$key+"', "+a.User.$key+")"),c+=dstring.substitute('<span onclick="${0}" class="activity-type-link">${1}</span>',[f,e])},getActivityCompleteHref:function(a){return"javascript:Sage.Link.completeActivity('"+a.$key+"', "+Sage.Utility.Activity._getReccurenceFlag(a)+")"},_getReccurenceFlag:function(a){return a.RecurrenceState?(!0!==a.Recurring||"rstMaster"!==a.RecurrenceState)&&(!(!0===a.Recurring&&a.RecurIterations<0)&&"rstOccurrence"===a.RecurrenceState):!0===a.Recurring&&!(a.RecurIterations<0)},getCurrentActivityId:function(){var a=Sage.Services.getService("ClientEntityContext"),b=a.getContext(),c=null;return b&&"ACTIVITY"==b.EntityTableName&&(c=b.EntityId),c},_getContactData:function(a,b,c){this._contactStore||(this._contactStore=new SingleEntrySDataStore({include:["$descriptors","Address"],resourceKind:"contacts",service:sDataServiceRegistry.getSDataService("dynamic")})),this._contactStore.fetch({predicate:"'"+a+"'",onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this})},_getLeadData:function(a,b,c){this._leadStore||(this._leadStore=new SingleEntrySDataStore({include:["$descriptors","Address"],resourceKind:"leads",service:sDataServiceRegistry.getSDataService("dynamic")})),this._leadStore.fetch({predicate:"'"+a+"'",onComplete:function(a){b.call(c,a)},onError:function(){b.call(c,null)},scope:this})},activityTypeCell:typeCell,activityAlarmCell:alarmCell,activityRecurringCell:recurCell,activityAttachCell:attachCell,activityConfirmStatusCell:confrimStatusCell,activityDurationCell:durationCell,activityNameCell:nameCell,activityNameTypeCell:nameTypeCell,activityAccountCell:accountCell,activityCompleteCell:completeCell,historyTypeCell:historyTypeCell,activityLeaderCell:leaderCell},Sage.Utility.Activity})},"Sage/UI/_DialogLoadingMixin":function(){define(["dojo/_base/declare","dojox/widget/Standby"],function(a,b){return a("Sage.UI._DialogLoadingMixin",null,{_standby:!1,showLoading:function(){if(!this._standby&&this.domNode){var a=this.domNode;this.containerNode&&(a=this.containerNode),this._standby=new b({target:a,color:"white",image:"images/loader_lg.gif",duration:50}),document.body.appendChild(this._standby.domNode),this._standby.startup()}var c=this;window.setTimeout(function(){c._standby.show()},0)},hideLoading:function(){var a=this;window.setTimeout(function(){a._standby&&a._standby.hide()},1)}})})},"Sage/UI/AttachmentList":function(){define(["dijit/_Widget","Sage/UI/EditableGrid","Sage/Data/SDataServiceRegistry","dojo/string","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/Utility","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Dialogs","Sage/Utility/File/AttachmentPropertiesEditForm","Sage/Utility/File/FallbackFilePicker","Sage/Utility/File/AddURLAttachment","Sage/Utility/File/GoogleDocPicker","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/_base/connect","dojo/i18n!./nls/AttachmentList","Sage/Utility","Sage/Utility/Workspace","Sage/UI/GridView","dojo/string","dojo/store/Memory","Sage/Store/SData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return p("Sage.UI.AttachmentList",[a],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",fileInputBtn:!1,_fileInputOnChange:null,_attachmentEditor:!1,_newAttachmentsCache:[],subscriptions:[],_grid:null,_store:{},constructor:function(){r.mixin(this,t),this.subscriptions=[]},startup:function(a){this._newAttachmentsCache=[],this._checkDbType(a)},_checkDbType:function(a){Sage.Services.getService("SystemOptions").get("DbType",function(b){this._buildGrid("2"===b||"3"===b),"function"==typeof a&&a(this)},function(){this._buildGrid(!1),"function"==typeof a&&a(this)},this)},_buildGrid:function(a){var b=[{field:"$key",editable:!1,hidden:!0,unhidable:!0,id:"id",formatter:function(a,b){return["<div id=",a," >",a,"</ div>"].join("")}},{field:"description",label:t.attachmentText,formatter:function(a,b){if(!b)return this.defaultValue;if(u.encodeObjectStrings(b),b.url){var c=b.url||"";return c=c.indexOf("http")<0?"http://"+c:c,d.substitute('<a href="${0}" target="_blank" title="${1}">${2}</a>',[c,b.url,b.$descriptor])}return b.fileExists?d.substitute('<a href="javascript: Sage.Utility.File.Attachment.getAttachment(\'${0}\');" title="${1}">${1}</a>',[b.$key,b.$descriptor]):b.$descriptor},filterConfig:{widgetType:o},width:"300px"},{field:"user",label:t.userText,formatter:function(a,b){if(!b)return"";var c=b.hasOwnProperty("user")&&"object"==typeof b.user?b.user:null;return c&&c.$descriptor?c.$descriptor:""},width:"120px"},{field:"attachDate",label:t.modDateText,type:e,filterConfig:{widgetType:n,label:t.dateRangeText},width:"175px"},{field:"fileSize",label:t.sizeText,formatter:function(a){return g.formatFileSize(a)},width:"120px"},{field:"fileName",label:t.extensionText,formatter:function(a,b){return a?a.substr(a.lastIndexOf(".")):"."},sortable:!1}],c=[{id:this.id+"_btnBrowse",imageClass:"icon_Add_File_16x16",handler:this.browseForFiles,title:t.addFileText,alternateText:t.addFileText,appliedSecurity:"",scope:this},{id:this.id+"_btnAddUrl",imageClass:"icon_Internet_Service_Add_16x16",handler:this.addUrlAttachment,title:t.addUrlText,appliedSecurity:"",alternateText:t.addUrlText,scope:this},{id:this.id+"_btnEditAttachProps",imageClass:"icon_Edit_Item_16x16",handler:this.editSelectedAttachment,title:t.editText,appliedSecurity:"",alternateText:t.editText,scope:this},{id:this.id+"_btnDeleteAttachment",imageClass:"icon_Delete_16x16",title:t.deleteText,handler:this.deleteSelectedAttachment,appliedSecurity:"",alternateText:t.deleteText,scope:this},{id:this.id+"_btnHelp",imageClass:"icon_Help_16x16",handler:function(){f.openHelp("attachmentstab")},title:t.helpText,alternateText:t.helpText,appliedSecurity:""}];if(a){var h={field:"remoteStatus",name:"&nbsp;",width:"300px",format:function(a,b){if(!b)return this.defaultValue;var c=b.remoteStatus?b.remoteStatus:b.fileExists?"Delivered":"Available";b.dataType||(c="X");var e=d.substitute("<a href=\"javascript:Sage.Utility.File.Attachment.remoteRequestAttachment('${0}')\">${1}</a>",[b.$key,t.request]);switch(c){case"Available":return t.available+" - "+e;case"Requested":return t.requested;case"Delivered":return t.delivered+" - "+e;default:return" "}}};b.splice(2,0,h)}var i=Sage.Services.getService("ClientEntityContext"),j=i.getContext();this.contextEntityType=j.EntityType;var k=f.getCurrentEntityId();this._createLiveStore();this.mode=k?"":"insert";var l={columns:b,gridLabel:"Attachments",tools:c,store:new y({data:[]}),sort:[{attribute:"attachDate",descending:!0}],id:this.id+"_attachments",minRowsPerPage:25,placeHolder:this.placeHolder,mode:this.mode,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"extended",rowSelection:!0,slxContext:{workspace:this.workspace,tabId:this.tabId}};this.onBeforeCreateGrid(l);var m=this._grid=new w(l);m.createGridView(),dojo.connect(m,"destroy",this,this.destroy),this.fileInputBtn=dojo.doc.createElement("INPUT"),dojo.attr(this.fileInputBtn,{type:"file",multiple:"true",accept:"*/*",class:"display-none"}),dojo.place(this.fileInputBtn,this.domNode,"last"),this._fileInputOnChange=s.connect(this.fileInputBtn,"onchange",this,this.handleFiles),this.subscriptions.push(dojo.subscribe("/entity/attachment/create",this,this.onNewAttachmentEntity)),this.subscriptions.push(dojo.subscribe("/entity/attachment/update",this,this.onAttachmentUpdated)),a&&this.subscriptions.push(dojo.subscribe("/entity/attachment/requested",this,this.onAttachmentUpdated)),this.resetEntityContext()},_createLiveStore:function(){var a=this.parentRelationshipName,b=f.getCurrentEntityId();"activityId"===a&&(b=b.substr(0,12)),this._store=new z({service:c.getSDataService("system"),contractName:"system",resourceKind:"attachments",resourcePredicate:null,include:["$descriptors"],select:["description","user","attachDate","fileSize","fileName","url","fileExists","remoteStatus","dataType"],where:x.substitute((a||"'A'")+' eq "${0}"',[b]),scope:this})},resetEntityContext:function(){var a=this.parentRelationshipName,b=f.getCurrentEntityId();"activityId"===a&&(b=b.substr(0,12));var c=(a||"'A'")+" eq '"+b+"'";(!b&&"insert"!==this.mode||b&&"insert"===this.mode)&&(this.mode=b?"":"insert"),this._grid&&("insert"===this.mode?this._grid.grid.setStore(new y({data:[]})):(this._store.where=c,this._grid.grid.setStore(this._store)))},destroy:function(){for(var a=this.subscriptions.length,b=0;b<a;b++)dojo.unsubscribe(this.subscriptions.pop())},handleFiles:function(a){var b=this.fileInputBtn.files;this._createAttachments(b)},handleGearsDesktopFileSelect:function(a){a.length>0&&h.createAttachments(a)},_createAttachments:function(a){a.length>0&&h.createAttachments(a)},onNewAttachmentEntity:function(a){var b=Sage.Services.getService("ClientEntityContext"),c=b.getContext();if(this.contextEntityType===c.EntityType)return a?(this._newAttachmentsCache.push(a),void("insert"===this.mode?(this._grid.grid.addItem(a),this._grid.refresh()):this._grid.grid.store.put(a).then(r.hitch(this,function(a){this._grid.refresh()})))):void this._getFallBackPickerAttachment()},_getFallBackPickerAttachment:function(){var a=dijit.byId("activityEditor"),b="activityId";a&&a._tempIdForAttachments||(a=dijit.byId("historyEditor")||{},b="historyId");var d=a._tempIdForAttachments;if(d){new Sage.SData.Client.SDataResourceCollectionRequest(c.getSDataService("system")).setResourceKind("attachments").setQueryArg("select",["description","userId","attachDate","fileSize","fileName","url","fileExists"].join(",")).setQueryArg("where",b+" eq '"+d+"'").setStartIndex(1).setCount(50).read({success:this._receivedFallBackPickerAttachments,failure:function(){},scope:this})}},_receivedFallBackPickerAttachments:function(a){var b=a.$resources;this.clearNewAttachments();for(var c=0;c<b.length;c++){var d=b[c];this._newAttachmentsCache.push(d),this._grid.store.put(d).then(r.hitch(this,function(a){this._grid.grid.addItem(d)}))}this._grid.refresh()},onAttachmentUpdated:function(a){var b=Sage.Services.getService("ClientEntityContext"),c=b.getContext();if(this.contextEntityType===c.EntityType){if("insert"===this.mode)for(var d=this._newAttachmentsCache,e=0;e<d.length;e++)d[e].$key===a.$key&&r.mixin(d[e],a);this._grid.refresh()}},getNewAttachments:function(){return this._newAttachmentsCache},clearNewAttachments:function(){this._newAttachmentsCache=[],this._grid&&this._grid.grid.setStore(new y({data:[]}))},_editAttachmentInfo:function(a){this._attachmentEditor||(this._attachmentEditor=new j),this._attachmentEditor.set("attachmentId",a),this._attachmentEditor.show()},browseForFiles:function(a){if(g.supportsHTML5File){var b=this.fileInputBtn.cloneNode();q.destroy(this.fileInputBtn),q.place(b,this.domNode,"last"),this.fileInputBtn=b,s.disconnect(this._fileInputOnChange),this._fileInputOnChange=s.connect(this.fileInputBtn,"onchange",this,this.handleFiles),this.fileInputBtn.click()}else{var c=dijit.byId("fallbackFilePicker");c||(c=new k({id:"fallbackFilePicker"})),c.show()}},addUrlAttachment:function(a){var b=dijit.byId("urlAttachmentEditor");b||(b=new l({id:"urlAttachmentEditor"})),b.set("attachmentId",""),b.show()},editSelectedAttachment:function(){var a=this._grid.getSelectedRowData();if(!(a.length<1)){var b=a[0];this._editAttachmentInfo(b.$key)}},deleteSelectedAttachment:function(){this._grid.deleteSelected(),dojo.publish("/entity/attachment/delete")},addGoogle:function(){var a=dijit.byId("googleDocumentPicker");a||(a=new m({id:"googleDocumentPicker"}),dojo.connect(a,"onDocumentSelected",this,"_handleGoogleDocPicked")),a.pick()},_handleGoogleDocPicked:function(a,b){var d=new Sage.SData.Client.SDataTemplateResourceRequest(c.getSDataService("system"));d.setResourceKind("attachments"),d.read({success:function(c){c.description=dojo.isArray(a)?a[0]:a,c.url=dojo.isArray(b)?b[0]:b,this._addRelationshipsToGoogleDocAttachment(c)},failure:function(a){},scope:this})},_addRelationshipsToGoogleDocAttachment:function(a){h.getKnownRelationships(function(b){var d=r.mixin(a,b);d.user={$key:f.getClientContextByKey("userID")||""},d.attachDate=f.Convert.toIsoStringFromDate(new Date),new Sage.SData.Client.SDataSingleResourceRequest(c.getSDataService("system")).setResourceKind("attachments").create(d,{success:function(a){dojo.publish("/entity/attachment/create",a)},failure:function(a){},scope:this})},this)},onBeforeCreateGrid:function(a){},setToReadOnly:function(a){var b=[this.id+"_btnBrowse",this.id+"_btnAddUrl",this.id+"_btnEditAttachProps",this.id+"_btnDeleteAttachment"];this._bulkSetProperty(this,b,"disabled",a)},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=dijit.byId(b[e]);f&&f.set(c,d)}}})})},"Sage/UI/EditableGrid":function(){define(["dojox/grid/DataGrid","dijit/Toolbar","dijit/form/Button","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/WritableStore","Sage/UI/SDataLookup","dojo/i18n","dojo/_base/lang","Sage/Utility","Sage/UI/ImageButton","Sage/UI/Dialogs","Sage/Utility/_LocalStorageMixin","dojo/i18n!./nls/EditableGrid","Sage/UI/ToolBarLabel","dojo/parser","dojo/dom-construct","dojo/_base/declare","dojo/_base/array"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return r("Sage.UI.EditableGrid",[a,m],{recordCountLabel:null,STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_SORT:"_SORT_INFO_",lookupControl:null,mode:"",region:"center",_dataChangeConnections:[],_registeredWidgets:null,constructor:function(a){this.mode=j.getModeId(),a.storeOptions&&a.storeOptions.isInsertMode&&(this.mode="insert"),this._dataChangeConnections=[],this._registeredWidgets=[]},_setModeAttr:function(a){if(this.mode!==a){if(this.mode=a,!this.store)return;("insert"===a&&"Sage.Data.WritableStore"!==this.store.declaredClass||"insert"!==a&&"Sage.Data.WritableSDataStore"!=this.store.declaredClass)&&this._replaceStore()}},_getModeAttr:function(){return this.mode},onBlur:function(){this.edit&&this.edit.isEditing()&&this.edit.apply()},postMixInProperties:function(){function a(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return;b.push(a)}dojo.mixin(this,n),dojo.mixin(this,h.getLocalization("dijit","common")),this.setEditable(),this.storeOptions||(this.storeOptions={}),this.ensureValue(this.storeOptions,"pagesize",this.rowsPerPage||20),this.ensureValue(this,"singleClickEdit",!0),"function"==typeof this.contextualCondition?this.query={fn:this.contextualCondition,scope:this}:"object"==typeof this.contextualCondition&&this.contextualCondition.fn&&(this.ensureValue(this.contextualCondition,"scope",this),this.query=this.contextualCondition),this.structure=[{defaultCell:i.mixin({defaultValue:""},this.columnDefaults),cells:this.columns}],this.tabId&&""!==this.tabId?(this.addToolsToWorkspaceToolbar(),this.currentEntityId=j.getCurrentEntityId()):this.createOwnToolbar(),this._setUserPrefColumnWidths();var b,c,d,e,f,g,k,l=this.columns;if(this.store){for(b=this.store.select=this.store.select||[],e=this.store.include=this.store.include||[],c=0;c<b.length;c++)b[c]=b[c].replace(/\./g,"/");for(c=0;c<l.length;c++)if(l[c].field&&(k=l[c].field,a(k.replace(/\./g,"/"),b)),l[c].field.indexOf(".")>0)for(f=l[c].field.split("."),g="",d=0;d<f.length-1;d++)g+=f[d],a(g,e),g+="/"}else{for(b=this.storeOptions.select||[],c=0;c<b.length;c++)b[c]=b[c].replace(/\./g,"/");for(e=this.storeOptions.include||[],c=0;c<l.length;c++)if(l[c].field&&(k=l[c].field,a(k.replace(/\./g,"/"),b)),l[c].field.indexOf(".")>0)for(f=l[c].field.split("."),g="",d=0;d<f.length-1;d++)g+=f[d],a(g,e),g+="/";this.store=this.getStore(),this.markClean()}this._setSortInfo(),this.inherited(arguments)},postCreate:function(){dojo.connect(this,"onKeyDown",this.customKeyDown),dojo.connect(this,"onResizeColumn",this._onResizeColumn),dojo.subscribe("Sage/events/TabWorkspace/MIDDLE_AREA_DROP",this,this._setMiddleAreaHeight),this.connect(this,"_onNew",this.showLoading),this.connect(this.scroller,"scroll",this._onScroll),dojo.connect(this,"onResizeColumn",this._onScroll),this.setupHeader(),this.inherited(arguments)},showLoading:function(){this.showMessage(this.loadingMessage),this._clearData(),this.markClean()},headerTemplate:new Simplate(["<div>",'<div id="{%= $.id %}_HeaderBar"  data-dojo-type="dijit.layout.ContentPane" gutters="false"  region="top" ','style="{%= $.headerStyle %}" class="editable-grid-hbar">','<div class="editable-grid-hbar-left"></div>','<div class="editable-grid-hbar-center"></div>','<div class="editable-grid-hbar-right"><div id="{%= $.gridNodeId %}_recordCountLabel"></div></div>',"</div>","</div>"]),setupHeader:function(){this.recordCountLabel=new o,this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()));var a=this.headerTemplate.apply(this);a=dojo.toDom(a),this.headerContentPane=p.parse(a),dijit.byId(this.gridNodeId).addChild(this.headerContentPane[0]),dojo.place(this.recordCountLabel.domNode,this.gridNodeId+"_recordCountLabel","replace")},resetContextualCondition:function(a){"function"==typeof a?this.query={fn:a,scope:this}:"object"==typeof a&&a.fn&&(this.ensureValue(a,"scope",this),this.query=a),this.contextualCondition=a},_getRecordCount:function(){var a,b,c,d;return a=this.scroller,d=a.rowCount,d<=0?(b=0,c=0,d=0):(b=0===a.firstVisibleRow?1:a.firstVisibleRow+1,c=a.lastVisibleRow>=a.rowCount?a.rowCount:a.lastVisibleRow),[b,c,d]},_onScroll:function(a){this.recordCountLabel&&this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()))},_setMiddleAreaHeight:function(a){var b=["#",a.tab.ElementId," #",this.id].join("");if(dojo.query(b)[0]){
var c=["#",a.tab.ElementId," .tws-tab-view-body"].join(""),d=dojo.query(c)[0];dojo.style(d,"height","10px"),TabControl.setViewBodyHeight()}},_setUserPrefColumnWidths:function(){var a=this;dojo.forEach(this.columns,function(b){if(b&&b.field){var c=a._getColumnSizeKey(b),d=a.getFromLocalStorage(c,a.STORE_NS);d&&(b.width=d)}})},_getColumnSizeKey:function(a){var b=a.field.replace(/[\.\$]/g,"_");return[this.id,"_",this.STORE_KEY_COLUMN_SIZE,b].join("")},_onResizeColumn:function(a){var b=this.getCell(a),c=b.unitWidth,d=this._getColumnSizeKey(b);this.saveToLocalStorage(d,c,this.STORE_NS)},listenForPageSave:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.addListener(a.ON_SAVE,this.saveChanges,this)},removePageSaveListener:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.removeListener(a.ON_SAVE,this.saveChanges)},setEditable:function(){var a,b=!0;if(this.appliedSecurity){var c=Sage.Services.getService("RoleSecurityService");c&&(b=c.hasAccess(this.appliedSecurity))}if(this.readOnly&&(b=!1),b){for(a=0;a<this.columns.length;a++)if(this.columns[a].editable){this.editable=!0;break}}else{for(a=0;a<this.columns.length;a++)this.columns[a].editable&&(this.columns[a].editable=!1);this.editable=!1}},onHeaderCellClick:function(a){var b=!0;if(this.store.dirtyDataCache.isDirty){var c=Sage.Services.getService("ClientBindingManagerService");b=confirm(c._PageExitWarningMessage)}if(!1!==this.columns[a.cell.index].sortable&&b&&"insert"!==this.mode){this.inherited(arguments);var d=this.getSortProps();if(d&&d.length>0){var e=d[0];e.cellIndex=a.cell.index,this.saveToLocalStorage(this.STORE_KEY_SORT+this.id,e,this.STORE_NS)}}else dojo.stopEvent(a)},_setSortInfo:function(){var a=this.STORE_KEY_SORT+this.id,b=this.getFromLocalStorage(a,this.STORE_NS);b&&(b.descending?this.sortInfo=-1*(b.cellIndex+1):this.sortInfo=b.cellIndex+1)},ensureValue:function(a,b,c){a[b]=a[b]||c},amIInATab:function(){return!(!this.context||!this.context.workspace)&&this.context.workspace.indexOf("TabWorkspace")>-1},isMyTabVisible:function(){return!this.amIInATab()||!window.TabControl||window.TabControl.getState().isTabVisible(this.tabId)},startup:function(){if(!this._started){if(this.inherited(arguments),"insert"!==this.mode&&this.listenForPageSave(),this.context&&this.context.workspace&&this.context.workspace.indexOf("TabWorkspace")<=-1){dojo.style(dojo.byId(this.id+"_Container"),"height","300px");dijit.byId(this.gridNodeId).resize()}if(this.amIInATab()&&this.isMyTabVisible()){var a=["#","element_",this.tabId," .formtable"].join("");if(dojo.query(a)[0]){var b=dojo.byId(this.id+"_Container");b||(b=dijit.byId(this.id).getParent(),b=b.domNode),dojo.style(b,"height","300px")}}}},destroy:function(){this.lookupControl&&this.lookupControl.destroy(!1),this.toolbar&&this.toolbar.destroy(!1),this.grid&&this.grid.destroy(!1),this.store&&this.store.destroy&&this.store.destroy(!1),this._registeredWidgets&&(s.forEach(this._registeredWidgets,function(a){a.destroy(!1)}),this._registeredWidgets=null),this.removePageSaveListener(),this.inherited(arguments)},_replaceStore:function(){dojo.forEach(this._dataChangeConnections,function(a){dojo.disconnect(a)}),this.store&&this.store.destroy&&this.store.destroy(!1),this.store=!1,this.store=this.getStore()},getStore:function(){if(this.store)return this.store;this.storeOptions.isInsertMode="insert"===this.mode;var a="insert"!==this.mode?new e(this.storeOptions):new f(this.storeOptions);return this.onDataChange&&this._dataChangeConnections.push(dojo.connect(a,"onSet",this.onDataChange)),a.onDataChange&&(this._dataChangeConnections.push(dojo.connect(a,"setValue",a.onDataChange)),this._dataChangeConnections.push(dojo.connect(a,"saveNewEntity",a.onDataChange)),this._dataChangeConnections.push(dojo.connect(a,"deleteItem",a.onDataChange)),this._dataChangeConnections.push(dojo.connect(a,"createItem",a.onDataChange))),this._dataChangeConnections.push(dojo.connect(a,"onSet",this,function(a,b,c,d){"insert"!==this.mode&&d&&(this.edit.info.cell&&this.edit.info.cell.widget&&!0===this.edit.info.cell.widget.returnObject?c.$key!==d.$key&&this.markDirty():c!==d&&this.markDirty())})),a},customKeyDown:function(a){this.applyEditOnEnter(a),this.navigateOnKeyDown(a)},navigateOnKeyDown:function(a){},applyEditOnEnter:function(a){13!=a.charOrCode&&13!=a.keyCode||(this.doApplyEdit(),this.edit.apply(),dojo.stopEvent(a))},createOwnToolbar:function(){var a=Sage.Services.getService("RoleSecurityService"),c=dijit.byId(this.gridNodeId);this.toolbar=new b({class:"right-tools",region:"top"}),c.addChild(this.toolbar);for(var d=0;d<this.tools.length;d++){var e=this.tools[d];if(!e.appliedSecurity||""===e.appliedSecurity||!a||a.hasAccess(e.appliedSecurity)){var f=!1;if("string"==typeof e)switch(e){case"add":f=new k({imageClass:"icon_plus_16x16",tooltip:this.addText,id:this.id+"_addBtn",onClick:i.hitch(this,function(){this.addNew()})});break;case"delete":f=new k({imageClass:"icon_Delete_16x16",tooltip:this.deleteText,id:this.id+"_delBtn",onClick:i.hitch(this,function(){this.deleteSelected()})});break;case"save":f=new k({imageClass:"icon_Save_16x16",tooltip:this.saveText,id:this.id+"_saveBtn",onClick:i.hitch(this,function(){this.saveChanges()})});break;case"cancel":f=new k({imageClass:"icon_Reset_16x16",tooltip:this.cancelText,id:this.id+"_cancelBtn",onClick:i.hitch(this,function(){this.cancelChanges()})})}else if(e.type&&"Sage.UI.SDataLookup"===e.type){var h=e.controlConfig||e;f=new g(h),this.lookupControl=f}else f=new k({icon:e.icon||"",imageClass:e.imageClass||"",id:e.id,onClick:i.hitch(e.scope||this,e.handler),tooltip:e.alternateText||e.tooltip});f&&(this.toolbar.addChild(f),f=!1)}}this.toolbar.startup()},addToolsToWorkspaceToolbar:function(){if(!this.readOnly){this.dirtyDataMsgID=this.tabId+"_dirtydatamsg";var a,b,c=q.create("span",{class:"grid-unsaveddata-msg",id:this.dirtyDataMsgID,style:"display:none;",content:this.editable?this.unsavedDataText:""});switch(this.context.workspace){case"Sage.Platform.WebPortal.Workspaces.Tab.TabWorkspace":if("insert"!==this.mode){var d=dojo.query("#element_"+this.tabId+" td.tws-tab-view-title");d.length>0&&dojo.place(c,d[0])}b=["element_",this.tabId].join(""),a=dojo.query(["#",b," td.tws-tab-view-tools-right"].join(""));break;case"Sage.Platform.WebPortal.Workspaces.MainContentWorkspace":"insert"!==this.mode&&dojo.place(c,dojo.query("#"+this.tabId+" span.mainContentHeaderTitle")[0]),b=this.tabId,a=dojo.query("#"+b+" td.mainContentHeaderToolsRight");break;case"Sage.Platform.WebPortal.Workspaces.DialogWorkspace":a=dojo.query("td.dialog-tools-right")}for(var e,f,h=Sage.Services.getService("RoleSecurityService"),j=0,l=0;l<this.tools.length;l++){e="";var m=this.tools[l];if(void 0!==m.mergeControlId&&0!==m.mergeControlId.length&&(f=dojo.query("[id$="+m.mergeControlId+"]",dojo.byId("element_"+this.tabId))[0],e=m.mergePosition.toLowerCase()),f||(f=a[0],e=""),("insert"!==this.mode||m.displayInInsert)&&(!m.appliedSecurity||""===m.appliedSecurity||!h||h.hasAccess(m.appliedSecurity))){if("string"==typeof m)switch(m){case"add":var n=this.id+"_addBtn",o=new k({id:n,imageClass:"icon_plus_16x16",onClick:i.hitch(this,this.addNew),tooltip:this.addText});this._registeredWidgets.push(o),dojo.place(o.domNode,a[0],j);break;case"delete":var p=this.id+"_delBtn",r=new k({id:p,tooltip:this.deleteText,imageClass:"icon_Delete_16x16",onClick:i.hitch(this,this.deleteSelected)});this._registeredWidgets.push(r),dojo.place(r.domNode,a[0],j);break;case"save":var s=this.id+"_saveBtn",t=new k({id:s,tooltip:this.saveText,imageClass:"icon_Save_16x16",onClick:i.hitch(this,this.saveChanges)});this._registeredWidgets.push(t),dojo.place(t.domNode,a[0],j);break;case"cancel":var u=this.id+"_cancelBtn",v=new k({id:u,tooltip:this.cancelText,imageClass:"icon_Reset_16x16",onClick:i.hitch(this,this.cancelChanges)});this._registeredWidgets.push(v),dojo.place(v.domNode,a[0],j)}else if(m.type&&"Sage.UI.SDataLookup"===m.type){var w=m.controlConfig||m,x=new g(w);dojo.place(x.domNode,f,j),this.lookupControl=x}else{var y=new k({id:m.id,icon:m.icon||"",imageClass:m.imageClass||"",onClick:i.hitch(m.scope||this,m.handler),tooltip:m.alternateText||m.tooltip});this._registeredWidgets.push(y),dojo.place(y.domNode,f,e.length>0?e:j)}j++}}}},addNew:function(a){this.store&&this.store.newItem(a)},addAssociatedItems:function(a,b,c,d){var e=this;"insert"!==j.getModeId()&&this.store.dirtyDataCache.isDirty?l.raiseQueryDialog("Infor CRM",this.dirtyDataMessage,function(f){f&&e.addSelectedItems(a,b,c,d)},this.okText,this.cancelText):e.addSelectedItems(a,b,c,d)},addSelectedItems:function(a,b,c,d){for(var e=[],f=this,g=0;g<a.length;g++){var h=!1;for(var i in f.store.dataCache){var k=f.store.dataCache[i];k[c]&&k[c].$key==a[g].$key&&(h=!0)}if(!h){var l={};"insert"!==j.getModeId()&&(l[b]={$key:j.getCurrentEntityId()}),l[c]={},j.extend(l[c],a[g]),delete l.$key,delete l.$name,delete l.$url,e.push(l)}}e.length>0&&f.createItems(e,function(){"insert"!==j.getModeId()&&__doPostBack("MainContent","")}),d&&d.lookupDialog.hide()},createItems:function(a,b){if(dojo.isArray(a))for(var c=this.store,d=a.length,e=function(a){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&(a&&void 0!==a&&a.getResponseHeader||a&&void 0!==a&&a.$httpStatus),this.currentCount===this.totalCount&&(this.grid.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(this.grid))},f={grid:this,totalCount:d,currentCount:0,onResponse:e,onComplete:b||null},g=0;g<a.length;g++)c.createItem(a[g],f);else l.showError(this.createItemsInvalidArrayText)},deleteSelected:function(a){var b=this.selection.getSelected();if(b.length<1)return void l.showError(this.noSelectionsText);if("insert"===this.mode||this.store._checkPageExitWarningMessage()){var c=this,d={title:"Infor CRM",query:dojo.string.substitute(this.confirmDeleteFmtTxt,[b.length]),callbackFn:function(d){c.deleteCallback(d,a,b)},yesText:this.buttonOk,noText:this.buttonCancel};l.raiseQueryDialogExt(d)}},deleteCallback:function(a,b,c){if(a){for(var d=this,e=this.store,f=0,g=0;g<c.length;g++)this.store.isItem(c[g])&&f++;d.selection.clear(),this.showLoading();var h=function(a,b){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&a&&void 0!==a&&a.getResponseHeader,this.currentCount===this.totalCount&&(d.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(d))},i={grid:d,totalCount:f,currentCount:0,onResponse:h,onComplete:b||null};for(g=0;g<c.length;g++)e.isItem(c[g])&&e.deleteItem(c[g],i);this.storeOptions.hasOwnProperty("clearStoreCacheOnDelete")&&!0!==this.storeOptions.clearStoreCacheOnDelete||e.clearCache()}},cancelChanges:function(){this.store&&this.store.revert&&(this.store.revert(),this.markClean(),this.refresh())},saveChanges:function(a){if(this.onBlur(),this.store.save){var b=0;for(var c in this.store.dirtyDataCache)if("isDirty"!==c){var d=this.store.dirtyDataCache[c];this.store.isItem(d)&&b++}var e=function(a,b){this.currentCount=this.currentCount+1,"undefined"!=typeof console&&(a&&void 0!==a&&a.getResponseHeader||a&&void 0!==a&&a.$httpStatus),this.currentCount===this.totalCount&&(this.grid.markClean(),this.grid.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(this.grid))},f={grid:this,totalCount:b,currentCount:0,onResponse:e,onComplete:a||null};this.store.save(f)}},markClean:function(){if(this.dirtyDataMsgID){dojo.byId(this.dirtyDataMsgID)&&dojo.style(dojo.byId(this.dirtyDataMsgID),"display","none");var a=Sage.Services.getService("ClientBindingManagerService");a&&a.clearDirtyAjaxItem(this.id)}},markDirty:function(){var a=dojo.byId(this.dirtyDataMsgID);a&&dojo.style(a,"display","inline");var b=Sage.Services.getService("ClientBindingManagerService");b&&b.addDirtyAjaxItem(this.id)},refresh:function(){this.scroller&&(this._refresh(),this.onRefresh())},onRefresh:function(){}})})},"Sage/Data/WritableStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Data.WritableStore",a,{isInsertMode:!1,constructor:function(a){d.mixin(this,a),this.features["dojo.data.api.Write"]=!0,this.features["dojo.data.api.Notification"]=!0,this.identityAttributes=["$cacheID"],this.dirtyDataCache={isDirty:!1},this.singleResourceRequest=null,a.hasOwnProperty("isInsertMode")||(this.isInsertMode="insert"===b.getModeId())},entry:"",fetch:function(a){var b={};if(b.$resources=[],a.isRender&&this.dataCarrierId){var c=dojo.query([".",this.dataCarrierId].join(""));if(c[0].value.length>0){var e=dojo.fromJson(c[0].value);this.addItemsToCache(a,e.$resources)}}for(var f in this.dataCache)this.dataCache.hasOwnProperty(f)&&"query"!==f&&b.$resources.push(this.dataCache[f]);if(this.setContext(a),this.verifyService(),this.isInsertMode){var g=this;return void window.setTimeout(function(){g.onSuccess(a,b)},5)}var h=new Sage.SData.Client.SDataResourceCollectionRequest(this.service).setResourceKind(this.resourceKind).setStartIndex(a.start+1).setCount(a.count),i="";this.query&&(a.query||(a.query={}),d.mixin(a.query,this.query)),a.query&&("function"==typeof a.query?i=a.query():"string"==typeof a.query?i=a.query:"object"==typeof a.query&&(a.query.hasOwnProperty("fn")&&(i=a.query.fn.call(a.query.scope||this)),a.query.hasOwnProperty("conditions")&&"string"==typeof a.query.conditions&&(i+=i.length>0?" and "+a.query.conditions:a.query.conditions))),a.evaluatedQuery=i||"",i&&""!==i&&h.setQueryArg("where",i),this.select&&this.select.length>0&&h.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&h.setQueryArg("include",this.include.join(","));var j=h.read({success:d.hitch(this,this.onSuccess,a),failure:d.hitch(this,this.onFailure,a)});return{abort:d.hitch(this,this.abortRequest,j)}},onSuccess:function(a,b){""===this.entry&&(this.entry=b),a.onBegin&&a.onBegin.call(a.scope||this,b.$resources.length,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a)},addToCache:function(a,b,c){var d;c=void 0===c?11*Math.random():c,this.isInsertMode&&(b.$cacheID=(new Date).getTime()+c),d=this.getIdentity(b),this.dataCache[d]=b},addItemsToCache:function(a,b){for(var c=0;c<b.length;c++)this.addToCache(a,b[c],c)},clearCache:function(){this.inherited(arguments),this.clearDirtyDataCache()},clearDirtyDataCache:function(){for(var a in this.dirtyDataCache)"isDirty"!==a&&delete this.dirtyDataCache[a];this.dirtyDataCache.isDirty=!1},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.dataCache.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},hasAttribute:function(a,b){return!(!this.isItem(a)||"string"!=typeof b)&&b in a},close:function(){this.clearCache()},deleteItem:function(a,b){var c=this.getIdentity(a);c&&""!==c&&delete this.dataCache[c];var d={};d.scope=b||this;var e=function(){"function"==typeof this.onResponse&&this.onResponse.call(this)};d.success=e,d.success.call(d.scope)},isDirty:function(a){if(a){var b=this.getIdentity(a);if(b&&""!==b)return this.dirtyDataCache.hasOwnPropery(b)}return this.dirtyDataCache.isDirty},newItem:function(a){var b=this.createTemplateRequest();b&&b.read({success:function(b){a&&a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:this.requestTemplateFailure,scope:this})},createTemplateRequest:function(){var a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);return this.resourceKind&&""!==this.resourceKind&&a.setResourceKind(this.resourceKind),a},requestTemplateFailure:function(){},saveNewEntity:function(a,b,c,d){this.addToCache(d,a),b()},createItem:function(a,b){var c={};c.scope=b||this,c.scope.store=this;var d=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};c.success=d,this.addToCache(b,a),c.success.call(c.scope,a)},revert:function(){this.clearDirtyDataCache(),this.onDataReset()},setValue:function(a,c,d){var e=this.getValue(a,c,"");return b.setValue(a,c,d),this.onSet(a,c,e,d),!0},setValues:function(a,b,c){alert("not implemented - setValues")},unsetAttribute:function(a,b){alert("not implemented - unsetAttribute")},dataCacheToArray:function(){var a=[];for(var b in this.dataCache)this.dataCache.hasOwnProperty(b)&&"query"!==b&&a.push(this.dataCache[b]);return a},onDataChange:function(){this.clearDirtyDataCache();var a=dojo.query([".",this.dataCarrierId].join(""));a[0]&&(this.entry.$resources=this.dataCacheToArray(),a[0].value=JSON.stringify(this.entry))},onSet:function(a,b,c,d){},onNew:function(a,b){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/UI/SDataLookup":function(){define(["dojo/_base/html","dijit/Dialog","dijit/form/Button","Sage/UI/ComboBox","Sage/Data/SDataServiceRegistry","Sage/UI/ConditionManager","Sage/Utility","Sage/_Templated","Sage/UI/Controls/GridParts/Columns/DateTime","Sage/UI/Controls/GridParts/Columns/Phone","Sage/UI/Controls/GridParts/Columns/PickList","dijit/_Widget","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/i18n!./nls/SDataLookup","dojo/_base/declare","Sage/UI/Controls/Grid","Sage/Store/SData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(){g||Sage.namespace("Utility"),g.addToListUnique=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return;b.push(a)},g.SDataLookupChildObjectFormatter=function(a){var b,c,d=a;if(!d||!d[a.childentity]||0===d[a.childentity].$resources.length)return dojo.string.substitute('<div style="text-indent:16px">${0}</div>',[a.value||"&nbsp;"]);for(a.value=a.value||"&nbsp;",b=[],a.includeButton&&b.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[a.value,a.rowIdx])),b.push(dojo.string.substitute('${0}<div class=SOProw${1} style="display:none">',[a.value,a.rowIdx])),c=0;c<d[a.childentity].$resources.length;c++)b.push(dojo.string.substitute('<div style="text-indent:2em">${0}</div>',[d[a.childentity].$resources[c][a.fieldName]||"&nbsp;"]));return b.push("</div>"),b.join("")}}(),p("Sage.UI.SDataLookup",[l,h],{config:null,grid:null,sdataStore:null,conditionMgr:null,structure:null,displayMode:5,lookupDialog:null,dialogTitle:"",dialogWidth:675,dialogHeight:500,seedOnRowEntity:!1,seedOnRelatedEntity:"",seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!1,preFilters:null,initializeLookup:!0,rowEntityId:"",relatedEntityId:"",returnObject:!0,addEmptyListItem:!1,fields:null,query:null,callerId:null,widgetsInTemplate:!0,storeOptions:null,gridOptions:null,sortColumn:"",newlyAddedItems:null,displayModes:{DropDownList:0,Dialog:1,HyperText:2,Text:3,ButtonOnly:4,ButtonOnlyClient:5},btnIcon:"images/icons/plus_16x16.gif",isModal:!1,_addCondHandle:null,_removeCondHandle:null,_originalQueryConditions:"",id:"lookupControl",dialogContent:new Simplate(["<div >",'<div style="padding:5px;" id="{%= $.id %}-Condition-container"></div>','<div id="{%= $.id %}-Grid-container" style="width:auto;height:{%= $.gridHeight %}px;"></div>','<div class="lookupButtonWrapper">',"{% if($.dialogButtonText){ %}",'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-GridSelectButton" ',"onClick=\"dijit.byId('{%= $.id %}').getGridSelections(); \">","{%= $.dialogButtonText %} </button>","{% } %}",'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-CloseButton" ',"onClick=\"dijit.byId('{%= $.id %}').doOnClose();\">{%= $.hideText %}</button>","</div>","</div> "]),constructor:function(){this.gridOptions={},this.storeOptions={rowsPerPage:20,include:[],select:["Id"],sort:[]},this.preFilters=[],this.newlyAddedItems=[],this.query={},this.config={},this.fields=[],this.structure=[],this.grid=[],this.sdataStore=[]},postMixInProperties:function(){var a,b;this._initialized=!1,n.mixin(this,dojo.i18n.getLocalization("Sage.UI","SDataLookup")),"string"==typeof this.displayMode&&(this.displayMode=this.displayModes[this.displayMode]),a={rowsPerPage:20,include:[],sort:[],select:["Id"]},0===this.displayMode?(this.initSDataStore(),this.buildSDataStoreQueryConditions()):("function"==typeof this.gridOptions.contextualCondition?(this.query={fn:this.gridOptions.contextualCondition,scope:this},this.query.conditions=this.query.fn()):"object"==typeof this.gridOptions.contextualCondition&&this.gridOptions.contextualCondition.fn&&(this.ensureValue(this.gridOptions.contextualCondition,"scope",this),this.query=this.gridOptions.contextualCondition,this.query.conditions=this.gridOptions.contextualCondition.fn()),this.buildSDataStoreQueryForSeeding()),b={rowsPerPage:20,loadingMessage:this.loadingText,noDataMessage:this.noDataText,where:this.query,selectionMode:this.selectionMode,columnHiding:!0,columnResizing:!0,columnReordering:!1,rowSelection:!0,setUserPreferences:!1,showHiderIcon:!1},this._originalQueryConditions=this.query.conditions,this.storeOptions=g.extend(!0,a,this.storeOptions),this.gridOptions=g.extend(!1,b,this.gridOptions),this.widgetTemplate=new Simplate(this.setTemplate(this.displayMode))},setTemplate:function(a){var b=['<div id="{%= $.id %}" style="width:inherit;" > ','<select style="width:inherit;"  id="{%= $.id %}_select" searchAttr="{%= $.field %}" labelAttr="{%= $.field %}" ',' dojoAttachPoint="focusNode" autoComplete="true" required="{%= $.required %}" data-dojo-type="Sage.UI.ComboBox" value="{%= $.setSelectedValue() %}" ',' store="dijit.byId(\'{%= $.id %}\').sdataStore" name="{%= $.field %}">',"</select>","</div>"],c=['<img style="cursor: pointer; margin: 4px;" '," onclick=\"dijit.byId('{%= $.id %}').showLookup();\" ",'src="{%= $.btnIcon %}" alt="{%= $.btnToolTip %}" title="{%= $.btnToolTip %}" >'];switch(a){case 0:return b;case 5:default:return c}},initDialog:function(){this.initConditionManager(),this.initSDataStore(),this._setQueryForLoad(),this.initGrid(this.initializeLookup),this.lookupDialog.onCancel=this.closeCrossBtnEvent},_setQueryForLoad:function(){var a=this.conditionMgr.getConditionsAsUrlWhereString(),b=this._originalQueryConditions,c="",d=[];d.push(a),d.push(b),d=dojo.filter(d,function(a,b,c){return a&&""!==a}),(c=d.join(" and "))&&(this.gridOptions.where.conditions=c)},_setQueryForSearch:function(){var a=this.conditionMgr.getConditionsAsUrlWhereString(),b=this._originalQueryConditions,c="",d=[];return this.isSeeded()&&!1===this.overrideSeedValueOnSearch?(d.push(a),d.push(b)):this.isSeeded()?d.push(a):(d.push(a),d.push(b)),d=dojo.filter(d,function(a,b,c){return a&&""!==a}),c=d.join(" and "),this.gridOptions.where.conditions=c,c},doLookup:function(){this.grid.destroy(!1),this._setQueryForSearch(),this.initGrid(!0)},setSelectedValue:function(){var a,b,c,d=null!==this.value?this.value:"";if(this.returnObject&&null!==this.value){for(a=this.field.split("."),b=this.value,c=0;c<a.length;c++)b&&(b=b[a[c]]);d=b}return d},getGridSelections:function(){var a=this.grid.getSelectedRowData();if(0!==a.length){if(a.length>0)for(var b=0;b<a.length;b++)this.newlyAddedItems.push(a[b]);this.doSelected(a),this.grid.clearSelection()}},closeCrossBtnEvent:function(){var a=this.id.split("-");dijit.byId(a[0]).doOnClose()},onClose:function(a){},doOnClose:function(){var a=this.newlyAddedItems;this.onClose(a),this.lookupDialog.hide()},initConditionManager:function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r;if(!this.conditionMgr){for(a=function(a,b,c,d,e,f){var g;for(g=0;g<f.length;g++)if(a===f[g].fieldname)return;f.push({fieldName:a,displayName:b,propertyType:c,pickListName:d,pickListStorageMode:e})},b=this.structure,c=this.fields,i=0;i<b.length;i++)!0!==b[i].excludeFromFilters&&b[i].field&&(j=b[i],d=j.field,g=j.propertyType,e=j.displayField||j.label,h=j.pickListName,r=j.pickListStorageMode,a(d,e,g,h,r,c));for(k={fields:c,fieldNameProperty:"fieldName",fieldDisplayNameProperty:"displayName",fieldTypeProperty:"propertyType",id:this.id+"-ConditionManager"},this.conditionMgr=new f(k),this,this.preFilters.length>0&&this.conditionMgr.setFirstConditionValue("","=",""),l=0;l<this.preFilters.length;l++)m=this.preFilters[l],n=m.propertyName.trim(),o=m.conditionOperator.trim(),p=m.filterValue.trim(),q=m.visible,this.conditionMgr.addCondition(n,o,p,q);dojo.place(this.conditionMgr.domNode,dojo.byId(this.id+"-Condition-container"),"only"),this._doSearchConnection=dojo.connect(this.conditionMgr,"onDoSearch",this,"doLookup")}},onDoubleClick:function(a){this.getGridSelections()},_formatStructure:function(){var a,b;if(this.structure){for(a=this.structure,b=0;b<a.length;b++){if(a[b]&&a[b].type&&"string"==typeof a[b].type)switch(a[b].type){case"Sage.UI.Columns.DateTime":a[b].type=i;break;case"Sage.UI.Columns.Phone":a[b].type=j;break;case"Sage.UI.Columns.PickList":a[b].type=k;break;default:delete a[b].type}!0===a[b].hidden&&(a[b].unhidable=!0)}this.structure=a}},initGrid:function(a){this._formatStructure();var b=n.clone(this.structure),c=dijit.byId([this.id,"-Grid"].join(""));if(c)this.query.conditions!==c.store.where?(c.destroy(),this.initGrid(a)):this.grid=c;else{if(this.sdataStore.sort&&this.sdataStore.sort.length>0){var d=[];d.push(this.sdataStore.sort[0]),this.gridOptions.sort=d}a?"string"==typeof this.gridOptions.where?this.sdataStore.where=this.gridOptions.where:"object"==typeof this.gridOptions.where&&(void 0!==this.gridOptions.where.conditions?this.sdataStore.where=this.gridOptions.where.conditions:"function"==typeof this.gridOptions.where.fn&&(this.sdataStore.where=this.gridOptions.where.fn())):this.sdataStore.where="Id like '_hack_'",this.gridOptions.store=new r(this.sdataStore),this.gridOptions.columns=b,this.gridOptions.id=[this.id,"-Grid"].join(""),this.gridOptions.placeHolder=[this.id,"-Grid-container"].join(""),this.grid=new q(this.gridOptions),this.grid.resize(),this.grid.onRowDblClick=n.hitch(this,function(a){this.onDoubleClick(a.id,a.data)})}},resetGrid:function(){var a=dijit.byId([this.id,"-Grid"].join(""));a&&a.destroy()},initSDataStore:function(){var a,b,c,d,f,h=this.structure,i=this.storeOptions.select||[],j=this.storeOptions.include||[];for(b=0;b<h.length;b++)if(h[b].field&&(a=h[b].field,h[b].displayField&&(a=a+"."+h[b].displayField),g.addToListUnique(a.replace(/\./g,"/"),i),h[b].field.indexOf(".")>0))for(c=h[b].field.split("."),d="",f=0;f<c.length-1;f++)d+=c[f],g.addToListUnique(d,j),d+="/";this.storeOptions.include=j,this.storeOptions.select=i,this.storeOptions.service=e.getSDataService("dynamic"),this.sdataStore=this.storeOptions},isSeeded:function(){return"string"==typeof this.seedValue&&""!==this.seedValue&&""!==this.seedProperty},buildSDataStoreQueryForSeeding:function(){var a,b,c;this.isSeeded()&&(b=dojo.string.substitute('${0} eq "${1}"',[this.seedProperty,this.seedValue]),c=this.query.conditions,a=c&&""!==c?c+" and "+b:b,this.sdataStore.where=a,this.query.conditions=a)},buildSDataStoreQueryConditions:function(){var a;this.seedOnRowEntity&&(this.sdataStore.where=dojo.string.substitute('Id eq "${0}"',[this.rowEntityId])),""!==this.seedOnRelatedEntity&&(this.sdataStore.where=dojo.string.substitute(' ${0}.Id eq "${1}" ',[this.seedOnRelatedEntity,this.relatedEntityId])),"function"==typeof this.gridOptions.contextualCondition&&(a={fn:this.gridOptions.contextualCondition,scope:this},this.sdataStore.where=g.extend(!0,this.sdataStore.directQuery,a))},render:function(){dojo.place(this.domNode,this.renderTo)},canShowLookup:function(){return"function"==typeof this.gridOptions.contextualShow?this.gridOptions.contextualShow():{result:!0,reason:""}},showLookup:function(){var a,c,d="The lookup cannot be displayed because one or more conditions have not been met.",e=this.canShowLookup(),f=this,g="";if("object"!=typeof e)return void Sage.UI.Dialogs.showError("The call to the function canShowLookup() returned an invalid result.");"boolean"==typeof e.result&&e.result?(a=f.dialogHeight>0?f.dialogHeight:450,c=f.dialogWidth>0?f.dialogWidth:700,f.lookupDialog=dijit.byId([f.id,"-Dialog"].join("")),f.lookupDialog?(f.dialogHeight=a,dojo.style([f.id,"-Dialog"].join(""),"height",a+"px")):(f.lookupDialog=new b({title:f.dialogTitle,id:[f.id,"-Dialog"].join(""),style:["height:",a,"px;width:",c,"px;"].join(""),refreshOnShow:!1,_onKey:this._onKey}),f.dialogHeight=a,f.dialogWidth=c,g=f.isModal?f.cancelText:f.closeText,f.lookupDialog.set("content",f.dialogContent.apply({hideText:g,dialogButtonText:f.dialogButtonText,id:f.id,gridHeight:a-150})),n.mixin(f.lookupDialog,new m),f.lookupDialog.createHelpIconByTopic("findlookup")),f.lookupDialog.show(),this.isModal||dojo.destroy([f.id,"-Dialog_underlay"].join("")),dojo.style([f.id,"-Dialog"].join(""),"top","60px"),dojo.style([f.id,"-Dialog"].join(""),"left","300px"),f.initDialog()):("string"==typeof e.reason&&0!==e.reason.length&&(d=e.reason),Sage.UI.Dialogs.showError(d))},doSelected:function(a){},_onKey:function(a){var b=this,c=arguments;dojo.query("*",this.domNode).forEach(function(d,e,f){d===a.target&&b.inherited(c)})},destroy:function(){var a=dijit.byId([this.id,"-Dialog"].join(""));this.btnIcon&&dojo.destroy(this.btnIcon),dojo.disconnect(this._doSearchConnection),dojo.unsubscribe(this._addCondHandle),dojo.unsubscribe(this._removeCondHandle),this.conditionMgr&&this.conditionMgr.destroy(!1),a&&a.uninitialize(),this.inherited(arguments)}})})},"Sage/UI/ComboBox":function(){define(["dijit/form/ComboBox","dojo/currency","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.ComboBox",[a],{_hClickBody:!1,maxHeight:dojo.isIE?160:170,shouldPublishMarkDirty:!0,autoPostBack:!1,_onKeyPress:function(a){dojo.stopEvent(a)},postCreate:function(){this.connect(this,"onChange",this.onChanged),this.inherited(arguments)},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.id,"")}})})},"Sage/UI/ConditionManager":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/Select","dijit/form/Button","Sage/UI/ImageButton","Sage/UI/SearchConditionWidget","Sage/Utility","dojo/i18n!./nls/ConditionManager","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.UI.ConditionManager",[b,a],{widgetsInTemplate:!0,srchBtnCaption:"Search",addrowlabel:"Lookup by:",hiderowlabel:"And:",hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",hideimgalttext:"Remove Condition",addimgalttext:"Add Condition",errorOperatorRequiresValue:"The operator requires a value",operators:null,fields:null,fieldsHash:null,fieldNameProperty:"fieldname",fieldDisplayNameProperty:"displayname",fieldTypeProperty:"propertyType",fieldPickListNameProperty:"pickListName",conditionWidgets:null,widgetConnects:null,widgetTemplate:new Simplate(['<div id="{%= $.id %}" class="lookup-condition-manager">','<table cellspacing="0" cellpadding="3">','<tr><td><div dojoAttachPoint="conditions"></div></td></tr>',"</table>",'<div class="lookup-condition-actions">','<button id="{%= $.id %}-Search" data-dojo-type="dijit.form.Button" type="button" dojoAttachPoint="searchButton" dojoAttachEvent="onClick:_doSearch">{%= $.srchBtnCaption %}</button>',"</div>","</div>"]),isSettingValues:!1,id:"",defaultOperator:null,defaultField:null,defaultValue:null,constructor:function(){this.conditionWidgets={},this.operators={},this.fieldsHash={},this.fields=[],this.widgetConnects=[]},destroy:function(){var a,b;for(b=0;b<this.widgetConnects.length;b++)dojo.disconnect(this.widgetConnects[b])
;for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&this.conditionWidgets[a].destroy&&this.conditionWidgets[a].destroy();this.inherited(arguments)},postMixInProperties:function(){dojo.mixin(this,h),this.inherited(arguments)},getOperatorsByField:function(a){var b,c,d,e,f;return b=[{value:"eq",label:this.equalTo,selected:!1,disabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1}],c=[{value:"sw",label:this.startingWith,selected:!1,disabled:!1},{value:"like",label:this.contains,selected:!1,diabled:!1},{value:"eq",label:this.equalTo,selected:!1,diabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1},{value:"le",label:this.equalOrLessThan,selected:!1,diabled:!1},{value:"ge",label:this.equalOrGreaterThan,selected:!1,diabled:!1},{value:"lt",label:this.lessThan,selected:!1,diabled:!1},{value:"gt",label:this.greaterThan,selected:!1,diabled:!1}],d=[{value:"eq",label:this.equalTo,selected:!1,diabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1},{value:"le",label:this.equalOrLessThan,selected:!1,diabled:!1},{value:"ge",label:this.equalOrGreaterThan,selected:!1,diabled:!1},{value:"lt",label:this.lessThan,selected:!1,diabled:!1},{value:"gt",label:this.greaterThan,selected:!1,diabled:!1}],e=[{value:"eq",label:this.equalTo,selected:!1,diabled:!1},{value:"ne",label:this.notEqualTo,selected:!1,diabled:!1}],f={"System.Boolean":{options:b},Boolean:{options:b},"System.String":{options:c},"SalesLogix.PickList":{options:e},"Sage.Entity.Interfaces.UserType":{options:d},"Sage.Entity.Interfaces.OwnerType":{options:d},"System.DateTime":{options:d},DateTime:{options:d},Phone:{options:c},User:{options:c},Owner:{options:c},"System.Double":{options:d},"System.Int32":{options:d},"System.Int16":{options:d},"System.Decimal":{options:d},Fixed:{options:d},Decimal:{options:d},Integer:{options:d},"Positive Integer":{options:d},Currency:{options:d},Percent:{options:d},defaultOperators:{options:c},None:{options:c}},a.hasOwnProperty(this.fieldTypeProperty)&&f.hasOwnProperty(a[this.fieldTypeProperty])?f[a[this.fieldTypeProperty]].options:f.defaultOperators&&f.defaultOperators.options},getConditionsAsUrlWhereString:function(){var a,b,c,d,e,f,h,i=this.getConditions(),j=[],k=null;for(a=0;a<i.length;a++){if(k=i[a].val,"string"==typeof k&&(k=k.replace(/%/g,"")),k.constructor===Date){if("eq"===i[a].operator||"ne"===i[a].operator){c=k,d=k,c.setHours(0),c.setMinutes(0),c.setSeconds(0),e=g.Convert.toIsoStringFromDate(c),d.setHours(23),d.setMinutes(59),d.setSeconds(59),f=g.Convert.toIsoStringFromDate(d),h={field:i[a].fieldname,leftOp:"gt",leftVal:e,rightOp:"lt",rightVal:f,join:"and"},"ne"===i[a].operator&&(h.leftOp="lt",h.rightOp="gt",h.join="or"),j.push(dojo.string.substitute("(${field} ${leftOp} '${leftVal}' ${join} ${field} ${rightOp} '${rightVal}')",h));continue}"le"===i[a].operator||"gt"===i[a].operator?(k.setHours(23),k.setMinutes(59),k.setSeconds(59)):"ge"!==i[a].operator&&"lt"!==i[a].operator||(k.setHours(0),k.setMinutes(0),k.setSeconds(0)),k=g.Convert.toIsoStringFromDate(k)}b={field:i[a].fieldname,op:i[a].operator,val:k};var l=this.getField(i[a].fieldname);l&&"SalesLogix.PickList"===l.propertyType&&"object"==typeof k&&k[0]&&(b.val=k[0]),"like"===b.op?b.val=["%",b.val,"%"].join(""):"sw"===b.op&&(b.op="like",b.val+="%"),"string"==typeof b.val&&(b.val=['"',b.val.toUpperCase(),'"'].join(""),b.field=["upper(",b.field,")"].join("")),j.push([b.field," ",b.op," ",b.val].join(""))}return j.join(" and ")},getField:function(a){return!(!this.fieldsHash||!this.fieldsHash.hasOwnProperty(a))&&this.fieldsHash[a]},getConditionsJSON:function(){var a,b,c,d=this.getConditions(),e=d.length;for(a=0;a<e;a++){if(c=d[a],b=d[a].val,b.constructor===Date){b="D"===this.getField(c.fieldname).dateTimeType?g.Convert.toIsoStringFromDateNonUTC(b):g.Convert.toIsoStringFromDate(b)}d[a].val=b}return Sys.Serialization.JavaScriptSerializer.serialize(d)},getConditions:function(){var a,b,c=[];for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&this.conditionWidgets[a].getCondition&&(b=this.conditionWidgets[a].getCondition())&&("$key"===b.fieldname&&(b.fieldname="id"),c.push(b));return c},resetConditions:function(){var a,b;for(b=0;b<this.widgetConnects.length;b++)dojo.disconnect(this.widgetConnects[b]);for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&this.conditionWidgets[a].getCondition&&this._removeCondition(this.conditionWidgets[a]);this._setInitialCondition()},_doSearch:function(){this.onDoSearch(this.getConditions())},_setFieldsAttr:function(a){var b;for(this.fields=a,this.fieldsHash={},b=0;b<a.length;b++)this.fieldsHash[a[b][this.fieldNameProperty]]=a[b];this.resetConditions()},setFirstConditionValue:function(a,b,c){var d,e;this.defaultOperator=b,this.defaultField=a,this.defaultValue=c;for(d in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(d)&&(e=this.conditionWidgets[d],e.isFirstCondition&&(e.defaultOperator=b,e.defaultField=a,e.defaultValue=c,e.refreshDefaults()))},addCondition:function(a,b,c,d){var e=this._conditionCount(),g=new f({conditionManager:this,label:this.hiderowlabel,isFirstCondition:!1,defaultField:a,defaultOperator:b,defaultValue:c,id:this.id+"-SearchCondition"+e,visible:d});this.widgetConnects.push(dojo.connect(g,"onRemoveLookupCondition",this,"_removeCondition")),dojo.place(g.domNode,this.conditions),g.startup(),this.conditionWidgets[g.id]=g},_setInitialCondition:function(){var a=this,b=new f({conditionManager:a,label:a.addrowlabel,isFirstCondition:!0,id:a.id+"-SearchCondition0",visible:!0});this.widgetConnects.push(dojo.connect(b,"onAddLookupCondition",a,"_addCondition")),a.conditionWidgets[b.id]=b,dojo.place(b.domNode,a.conditions),b.startup()},_addCondition:function(){var a=this._conditionCount(),b=new f({conditionManager:this,label:this.hiderowlabel,isFirstCondition:!1,id:this.id+"-SearchCondition"+a,visible:!0});this.defaultField&&(b.defaultField=this.defaultField),this.defaultOperator&&(b.defaultOperator=this.defaultOperator),this.defaultValue&&(b.defaultValue=this.defaultValue),b.refreshDefaults(),this.widgetConnects.push(dojo.connect(b,"onRemoveLookupCondition",this,"_removeCondition")),this.conditionWidgets[b.id]=b,dojo.place(b.domNode,this.conditions),b.startup()},_removeCondition:function(a){var b=a.id;a.destroyRecursive(),delete this.conditionWidgets[b]},_conditionCount:function(){var a,b=0;for(a in this.conditionWidgets)this.conditionWidgets.hasOwnProperty(a)&&(b+=1);return b},onDoSearch:function(a){}})})},"Sage/UI/ImageButton":function(){define(["dijit/form/Button","dijit/_Widget","dojo/text","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/ImageButton.html"],function(a,b,c,d,e,f){return e("Sage.UI.ImageButton",a,{hoverText:"",templateString:f,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},tooltip:"",_setTooltipAttr:{node:"titleNode",type:"attribute",attribute:"title"},alt:"",_setAltAttr:{node:"valueNode",type:"attribute",attribute:"title"},postMixInProperties:function(){this.hasImageClass()&&this.hasIcon()?this.icon=this._blankGif:this.icon=this.icon||this._blankGif,this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.hasImageClass()?(this.set("icon",this._blankGif),d.set(this.iconNode,"display","none")):d.set(this.iconNodeSprite,"display","none")},hasImageClass:function(){return!(!this.imageClass||"noIcon"===this.imageClass)},hasIcon:function(){return!(!this.icon||this.icon===this._blankGif)},_onButtonClick:function(a){}})})},"Sage/UI/SearchConditionWidget":function(){define("Sage/UI/SearchConditionWidget",["dojo/parser","dojo/i18n","dojo/_base/lang","dojo/has","dojo/_base/array","dijit/_Widget","dijit/form/Button","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/DateTextBox","Sage/_Templated","Sage/UI/ImageButton","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/Phone","dojo/i18n!./nls/SearchConditionWidget","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return r("Sage.UI.SearchConditionWidget",[f,l],{widgetsInTemplate:!0,isFirstCondition:!1,conditionManager:!1,label:"",defaultOperator:null,defaultField:null,defaultValue:null,id:"",_valueBox:null,visible:!0,_loaded:!1,trueText:"true",falseText:"false",networkText:"Network",remoteText:"Remote",webText:"Web",webViewerText:"Web Viewer",concurrentText:"Concurrent",retiredText:"Retired",templateText:"Template",addonText:"Addon",adminText:"Admin",userText:"User",teamText:"Team",departmentText:"Department",systemText:"System",propertyTypeHandler:{},widgetTemplate:new Simplate(['<div id="{%= $.id %}" class="lookup-condition-row" dojoAttachPoint="_conditionRow">','<label class="slxlabel lookupLabel">',"{%= $.label %}","</label>",'<select id="{%= $.id %}_fieldName" name="{%= $.id %}_fieldName" dojoAttachPoint="_fieldNameSelect" data-dojo-type="dijit.form.Select" style="width:150px">',"{% for (var i=0; i < $.conditionManager.fields.length;i++) { %}",'<option id="{%= $.id %}_fieldOption{%= i %}" value="{%= $.conditionManager.fields[i][$.conditionManager.fieldNameProperty] %}">{%= $.conditionManager.fields[i][$.conditionManager.fieldDisplayNameProperty] %}</option>',"{% } %}","</select>",'<select id="{%= $.id %}_operators" name="{%= $.id %}_operators" dojoAttachPoint="_operatorSelect" data-dojo-type="dijit.form.Select" style="width:130px">',"</select>",'<div style="display: inline;" class="searchConditionInput" dojoAttachPoint="_inputWidgetPlaceHolder"></div>','<div class="conditionButton">',"{% if ( $.isFirstCondition ) { %}",'<div id="{%= $.id %}-AddImageButton" data-dojo-type="Sage.UI.ImageButton" icon="{%= $.conditionManager.addimgurl %}" tooltip="{%= $.conditionManager.addimgalttext %}" dojoAttachPoint="_addConditionButton" dojoAttachEvent="onClick:_addLookupCondition"></div>',"{% } else { %}",'<div id="{%= $.id %}-RemoveImageButton" data-dojo-type="Sage.UI.ImageButton" icon="{%= $.conditionManager.hideimgurl %}" tooltip="{%= $.conditionManager.hideimgalttext %}" dojoAttachPoint="_removeConditionButton" dojoAttachEvent="onClick:_removeLookupCondition"></div>',"{% } %}","</div>","</div>"]),constructor:function(a){q&&(this.trueText=q.trueText,this.falseText=q.falseText,this.networkText=q.networkText,this.remoteText=q.remoteText,this.webText=q.webText,this.webViewerText=q.webViewerText,this.concurrentText=q.concurrentText,this.retiredText=q.retiredText,this.templateText=q.templateText,this.addonText=q.addonText,this.adminText=q.adminText,this.userText=q.userText,this.teamText=q.teamText,this.departmentText=q.departmentText,this.systemText=q.systemText),this.registerTypeHandlers()},registerTypeHandlers:function(){this.propertyTypeHandler.default={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<input id="{%= $.id %}-TextValue" data-dojo-type="dijit.form.TextBox" dojoAttachPoint="_valueBox" />']}},this.propertyTypeHandler["System.Boolean"]={getValue:function(){return"true"===this._valueBox.value},getTemplate:function(){return['<select id="{%= $.id %}-SelectValue" class="dijitDropDown" data-dojo-type="dijit.form.Select" dojoAttachPoint="_valueBox">','<option id="{%= $.id %}-BooleanOptionTrue" value="true">{%= $.trueText %}</option>','<option id="{%= $.id %}-BooleanOptionFalse" value="false">{%= $.falseText %}</option>',"</select>"]}},this.propertyTypeHandler.Boolean={getValue:function(){return"true"===this._valueBox.value?"T":"F"},getTemplate:function(){return c.hitch(this,this.propertyTypeHandler["System.Boolean"].getTemplate)()}},this.propertyTypeHandler["SalesLogix.PickList"]={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<select id="{%= $.id %}-PickValue" class="dijitDropDown" ','data-dojo-type="Sage.UI.Controls.DropDownSelectPickList" ','dojoAttachPoint="_valueBox" ','pickListName="{%= $.pickListName %}" ','storeMode="{%= $.pickListStorageMode %}" ','style="display: inline-block"',"/>"]}},this.propertyTypeHandler["System.DateTime"]={getValue:function(){var a=this._valueBox.value;return isNaN(Date.parse(a))?null:a},getTemplate:function(){return['<input data-dojo-type="dijit.form.DateTextBox" id="{%= $.id %}-Date" dojoAttachPoint="_valueBox" constraints="{locale:Sys.CultureInfo.CurrentCulture.name}"',"/>"]}},this.propertyTypeHandler.DateTime=this.propertyTypeHandler["System.DateTime"],this.propertyTypeHandler.Fixed={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<input id="{%= $.id %}-NumericValue" data-dojo-type="dijit.form.NumberTextBox" data-dojo-attach-point="_valueBox" constraints="{ type: \'decimal\' }" value="0" name="{%= $.id %}-NumberValue" />']}},this.propertyTypeHandler.Integer=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["Positive Integer"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler.Percent=this.propertyTypeHandler.Fixed,this.propertyTypeHandler.Currency=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Int32"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Double"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Decimal"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler["System.Int16"]=this.propertyTypeHandler.Fixed,this.propertyTypeHandler.Phone={getValue:function(){return this._valueBox.get("unformattedValue")},getTemplate:function(){return['<input id="{%= $.id %}-PhoneValue" data-dojo-type="Sage.UI.Controls.Phone" shouldPublishMarkDirty="false" dojoAttachPoint="_valueBox" />']}},this.propertyTypeHandler.User={getValue:function(){return this._valueBox.get("value")},getTemplate:function(){return['<select id="{%= $.id %}-UserValue" ','data-dojo-type="Sage.UI.Controls.DropDownSelectUser" ','dojoAttachPoint="_valueBox" ','style="display: inline-block;" ',"></select>"]}},this.propertyTypeHandler["Sage.Entity.Interfaces.UserType"]={getValue:function(){return parseInt(this._valueBox.get("value"),10)},getTemplate:function(){return['<select id="{%= $.id %}-UserTypeValue" class="dijitDropDown" data-dojo-type="dijit.form.Select" dojoAttachPoint="_valueBox">','<option id="{%= $.id %}-UserTypeOption0" value="0">{%= $.networkText %}</option>','<option id="{%= $.id %}-UserTypeOption1" value="1">{%= $.remoteText %}</option>','<option id="{%= $.id %}-UserTypeOption2" value="2">{%= $.webText %}</option>','<option id="{%= $.id %}-UserTypeOption3" value="3">{%= $.webViewerText %}</option>','<option id="{%= $.id %}-UserTypeOption4" value="4">{%= $.concurrentText %}</option>','<option id="{%= $.id %}-UserTypeOption5" value="5">{%= $.retiredText %}</option>','<option id="{%= $.id %}-UserTypeOption6" value="6">{%= $.templateText %}</option>','<option id="{%= $.id %}-UserTypeOption7" value="7">{%= $.addonText %}</option>','<option id="{%= $.id %}-UserTypeOption8" value="8">{%= $.adminText %}</option>',"</select>"]}},this.propertyTypeHandler["Sage.Entity.Interfaces.OwnerType"]={getValue:function(){return parseInt(this._valueBox.get("value"),10)},getTemplate:function(){return['<select id="{%= $.id %}-OwnerTypeValue" class="dijitDropDown" data-dojo-type="dijit.form.Select" dojoAttachPoint="_valueBox">','<option id="{%= $.id %}-OwnerTypeOption0" value="1">{%= $.userText %}</option>','<option id="{%= $.id %}-OwnerTypeOption1" value="2">{%= $.teamText %}</option>','<option id="{%= $.id %}-OwnerTypeOption2" value="3">{%= $.departmentText %}</option>','<option id="{%= $.id %}-OwnerTypeOption3" value="0">{%= $.systemText %}</option>',"</select>"]}},this.propertyTypeHandler.Owner=this.propertyTypeHandler.default,this.propertyTypeHandler.None=this.propertyTypeHandler.default,this.propertyTypeHandler["System.String"]=this.propertyTypeHandler.default,this.propertyTypeHandler.defaultOperators=this.propertyTypeHandler.default},postCreate:function(){this.refreshDefaults(),this.visible||dojo.style(this._conditionRow,"display","none"),this._fieldNameSelect.on("change",c.hitch(this,this._fieldChanged)),this.inherited(arguments)},getCondition:function(){var a=!1;return this.isValidCondition()&&(a={fieldname:this._fieldNameSelect.get("value"),operator:this._operatorSelect.get("value"),val:this._getFieldValue()}),a},isValidCondition:function(){var a=this._getFieldValue();return"string"==typeof a?""!==a.trim():null!==a&&void 0!==a},_getFieldValue:function(){var a,b,d,e=this._fieldNameSelect.get("value"),f=(this._operatorSelect.get("value"),this._getField(e));return f&&(b=this._getFieldPropertyTypeValue(f),d=this.propertyTypeHandler[b],void 0===d&&(d=this.propertyTypeHandler.default),a=c.hitch(this,d.getValue)()),a},_renderFieldTemplates:function(){var b,d,e,f,g,h,i=this._fieldNameSelect.get("value"),j=this._getField(i);j&&(f=this._getFieldPropertyTypeValue(j),h=this.propertyTypeHandler[f],void 0===h&&(h=this.propertyTypeHandler.default),b=c.hitch(this,h.getTemplate)(),d=new Simplate(b),g={},dojo.mixin(g,this),dojo.mixin(g,{pickListName:j.pickListName}),dojo.mixin(g,{pickListStorageMode:j.pickListStorageMode}),(e=d.apply(g))&&(dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(a){a.destroy()},this),this._inputWidgetPlaceHolder.innerHTML="",dojo.place(e,this._inputWidgetPlaceHolder),a.parse(this._inputWidgetPlaceHolder),dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(a){a.startup(),this._valueBox=a,dojo.connect(this._valueBox,"onKeyDown",this,"_onKeyDown")},this)))},uninitialize:function(){this._inputWidgetPlaceHolder&&dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(a){a.destroy()},this),this.inherited(arguments)},_fieldChanged:function(a){var b,c,d,e,f=this._fieldNameSelect.get("value"),g=this._getField(f);if(g){if(this._renderFieldTemplates(),b=this.conditionManager.getOperatorsByField(g)){for(c=this._operatorSelect,d=c.options.length,e=d-1;e>=0;e--)c.removeOption(e);for(e=0;e<b.length;e++)b[e].selected=!1;c.addOption(b)}this._setToDefaultOperator(),this._setToDefaultValue()}},_onKeyDown:function(a){if(13===a.keyCode){var b=this._fieldNameSelect.get("value"),c=this._getField(b);c&&c.format&&"Phone"===c.format&&this._valueBox.onChange(this._valueBox.displayedValue),this.conditionManager._doSearch()}},_getField:function(a){return!!this.conditionManager.fieldsHash.hasOwnProperty(a)&&this.conditionManager.fieldsHash[a]},_getFieldPropertyTypeValue:function(a){return a&&a.hasOwnProperty(this.conditionManager.fieldTypeProperty)?a[this.conditionManager.fieldTypeProperty]:null},_addLookupCondition:function(){this.onAddLookupCondition(),dojo.publish("onAddLookupCondition",this)},onAddLookupCondition:function(){},_removeLookupCondition:function(){this.onRemoveLookupCondition(this),dojo.publish("onRemoveLookupCondition",this)},onRemoveLookupCondition:function(a){},_setToDefaultValue:function(){this._isOnDefaultField()&&this.defaultValue&&this._valueBox.set("value",this.defaultValue)},_setToDefaultField:function(){var a,b;if(this.defaultField)for(b=this._fieldNameSelect.getOptions(),a=0;a<b.length;a++)if(b[a].value===this.defaultField){this._fieldNameSelect.set("value",b[a].value);break}},_setToDefaultOperator:function(){var a,b;if(this._isOnDefaultField()&&this.defaultOperator&&"string"==typeof this.defaultOperator)for(a=this._operatorSelect.getOptions(),b=0;b<a.length;b++)if(a[b].label===this.defaultOperator||a[b].value===this.defaultOperator){this._operatorSelect.set("value",a[b].value);break}},_isOnDefaultField:function(){var a,b=!1;return this.defaultField?(a=this._fieldNameSelect.get("value"),b=a===this.defaultField):b=!0,b},refreshDefaults:function(){this._setToDefaultField(),this._fieldChanged()}})})},"Sage/UI/Controls/DropDownSelectPickList":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/UI/Controls/PickList","dojo/_base/array","dojo/text!./templates/DropDownSelectPickList.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.UI.Controls.DropDownSelectPickList",[f,c,a,b],{constructor:function(a){a.clientId&&(this.id=a.clientId+"-DropDownSelectPickList"),this.lastValidValue=a.value,this.inherited(arguments)},postCreate:function(){this.inherited(arguments)},_onChange:function(a){if(this.storeData){var b=this.comboBox.get("value");if(b!=this.initialValue){if(this.get("itemMustExist")){var c=dojo.some(this.storeData.items,function(b){return b.text==a||""==a},this);if(c&&(this.lastValidValue=a),!c&&"undefined"!==this.lastValidValue&&null!==this.lastValidValue)return void this.comboBox.set("value",this.lastValidValue)}if(this.comboBox.isValid()){var d="",e="";dojo.forEach(this.storeData.items,function(a){a.text==b&&(d=a.code,e=a.id)},this),this.setASPNETInputs(b,d,e)}}}this.onChange(this.lastValidValue)},_loadData:function(){if(!this.nodataload){var a=new dojo.Deferred;this.getPickListData(a),a.then(dojo.hitch(this,this.setItems),function(a){})}},setItems:function(a){"string"==typeof a&&(this.initialValue=a,this.comboBox.set("value",a));for(var b=[],c=0;c<a.items.$resources.length;c++){var d=a.items.$resources[c];b.push({id:d.$key,code:d.code,number:d.number,text:d.text})}this.storeData={identifier:"id",label:"text",items:b};var f=new e({data:this.storeData});this.comboBox.set("store",f),this.comboBox.set("searchAttr","text")},uninitialize:function(){this.inherited(arguments)},_getValueAttr:function(){var a=this.comboBox.get("value");return"id"===this.storeMode&&g.forEach(this.storeData.items,function(b){a==b.text&&(a=b.id)},this),a},_setPickListNameAttr:function(){this.inherited(arguments),this._loadData()},value:"",templateString:h,widgetsInTemplate:!0,storeData:null,lastValidValue:"",onChange:function(a){}})})},"Sage/UI/Controls/PickList":function(){define(["dojo/topic","dojo/_base/declare","dijit/_Widget","dijit/Tooltip","Sage/Utility","dijit/Tooltip","dojo/i18n!./nls/PickList","dojo/string","dojo/_base/lang","Sage/Services/PickListService"],function(a,b,c,d,e,f,g,h,i,j){return b("Sage.UI.Controls.PickList",[c],{dataStore:null,storeOptions:null,pickListName:"",filter:"",defaultLanguage:"",canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:"text",boundLanguage:"",filterByLanguage:!1,sort:!0,displayMode:"AsControl",clientId:"",required:!1,tabIndex:0,placeInNodeId:"",autoPostBack:!1,controlTooltip:"",buttonTooltip:"",shouldPublishMarkDirty:!0,renderAsHyperlink:!1,_textId:"",_codeId:"",_picklistId:"",_defaultValueId:"",_defaultCodeId:"",_defaultPicklistId:"",_storageNameSpace:"PickListData",okText:"",missingPickListText:"",pickListServiceOptions:{},_pickListService:null,asyncDataLoading:!0,defaultUseCache:!0,constructor:function(a){this.storeOptions=a.storeOptions,this.dataStore=a.dataStore,this.filterByLanguage=a.filterByLanguage||this.filterByLanguage,this.boundLanguage=a.boundLanguage||null,this.asyncDataLoading=this.async,this.clientId=a.clientId||"";var b=this.clientId;this._textId=b+"_Text",this._codeId=b+"_Code",this._picklistId=b+"_PicklistId",this._defaultValueId=b+"_DefaultValue",this._defaultCodeId=b+"_DefaultCode",this._defaultPicklistId=b+"_DefaultPicklistId",this._pickListService=Sage.Services.getService("PickList"),g&&(this.okText=g.okText,this.missingPickListText=g.missingPickListText)},postCreate:function(){var a=dojo.byId(this.placeInNodeId);a&&(this._setDefaultFields(),dojo.place(this.domNode,a,"first")),this.inherited(arguments)},uninitialize:function(){this.inherited(arguments)},_setStore:function(a,b){a&&(this.pickListServiceOptions.storageMode=a),b&&(this.pickListServiceOptions.filter=b)},_setDefaultFields:function(){if(this.required){var a=dojo.byId(this._textId);if(a&&""===a.value){var b=dojo.byId(this._codeId),c=dojo.byId(this._picklistId),d=dojo.byId(this._defaultValueId),e=dojo.byId(this._defaultCodeId),f=dojo.byId(this._defaultPicklistId);a.value=d.value,b.value=e.value,c.value=f.value}}},_setupTooltips:function(a,b){if(this.controlTooltip&&""!==this.controlTooltip&&b){new f({connectId:[b],label:this.controlTooltip,position:["below"]})}if(this.buttonTooltip&&""!==this.buttonTooltip&&a){new f({connectId:[a],label:this.buttonTooltip,position:["below"]})}},getPickListData:function(a){var b=i.mixin(this,{language:this.boundLanguage,async:this.asyncDataLoading,context:[this.boundLanguage||"_",this.filter||"_",this.filterByLanguageBoundLanguage||"_",this.filterByLanguage||"_",this.storeMode||"_"].join("-"),pickListServiceOptions:{filterByLanguage:this.filterByLanguage,storageMode:this.storeMode}});if(b.context=b.context.replace(/\s/g,"_"),b.useCache=null!==b.usecache&&void 0!==b.usecach?b.usecache:null!==b.useCache&&void 0!==b.useCache?b.useCache:b.defaultUseCache,b.useCache="string"==typeof b.useCache?"true"===b.useCache:b.useCache,b.useCache=null===b.useCache||"boolean"!=typeof b.useCache||b.useCache,this.pickListName){var c=this._pickListService.getFirstByName(this.pickListName,i.hitch(this,this._getItemSuccess,a),i.hitch(this,this._getItemsFail,a),b);this._pickListService.read(c)}},_getItemsFail:function(a,b){a.errback(b)},_getItemSuccess:function(a,b){var c=this.filter;if(b&&b.items&&b.items.$resources&&b.items.$resources.length>0){var d=b.items.$resources;this.sort&&b.alphaSorted&&(b.items.$resources=d.sort(function(a,b){return a.text<b.text?-1:a.text>b.text?1:0})),c&&(b.items.$resources=this.filterPickListItemsByFilter(b.items.$resources))}this.setPicklistAttributes(b),a.callback(b)},filterPickListItemsByFilter:function(a){return this.filterPickListItems(a,"filter")},filterPickListItems:function(a,b){var c=this[b],d=b;"object"==typeof b&&(b.field&&(d=b.field),(b.value||"boolean"==typeof b.value)&&(c=b.value));var e=[];if(c)for(var f=0;f<a.length;f++){var g=a[f];this._doesPropertyValueAlreadyExistInList(e,g,"code")||g[d]!==c||e.push(g)}return e},_doesPropertyValueAlreadyExistInList:function(a,b,c){var d,e=!1;for(d=0;d<a.length&&!e;d++)e=a[d][c]===b[c];return e},setPicklistAttributes:function(a){a.valueMustExist&&this._setItemMustExistAttr(a.valueMustExist)},setASPNETInputs:function(a,b,c){if(this._textId&&this._codeId&&this._picklistId){var d=dojo.byId(this._textId),e=dojo.byId(this._codeId),f=dojo.byId(this._picklistId);d&&e&&f&&(d.value=a,f.value=c,e.value=b,this.invokeChangeEvent())}},invokeChangeEvent:function(){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.clientId,"")},_getCanEditTextAttr:function(){return this.canEditText},_setCanEditTextAttr:function(a){this.canEditText=a},_getItemMustExistAttr:function(){return this.itemMustExist},_setItemMustExistAttr:function(a){this.itemMustExist=a},_getMaxLengthAttr:function(){return this.maxLength},_setMaxLengthAttr:function(a){this.maxLength=a},_getStoreModeAttr:function(){return this.storeMode},_setStoreModeAttr:function(a){this.storeMode=a,this._setStore(a,this.filter)},_getPickListNameAttr:function(){return this.pickListName},_setPickListNameAttr:function(a){this.pickListName=a,this._setStore(this.storeMode,this.filter)},_setPickListFilterAttr:function(a){this.filter=a,this._setStore(this.storeMode,a)},_getPickListFilterAttr:function(){return this.filter},statics:{},clearCache:function(a,b){null===this._pickListService&&(this._pickListService=Sage.Services.getService("PickList")),this._pickListService.clearCache(a,b)}})})},"Sage/UI/Controls/DropDownSelectUser":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/ComboBox","dojo/text!./templates/DropDownSelectUser.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.Controls.DropDownSelectUser",[c,a,b],{dataStore:null,storeOptions:null,storeData:null,templateString:i,widgetsInTemplate:!0,_position:0,_pageSize:100,_queryResults:null,constructor:function(a){this.storeOptions=a.storeOptions||{include:["UserInfo"],select:["Id","UserName","UserInfo/FirstName","UserInfo/LastName","Type"],sort:[{attribute:"UserInfo.LastName",descending:!1}],service:g.getSDataService("dynamic",!1,!0,!0),resourceKind:"users"},this.dataStore=new f(this.storeOptions),this.inherited(arguments)},postCreate:function(){var a=new dojo.Deferred;this._position=0,this._queryResults=null,this.getUserData(a),a.then(dojo.hitch(this,function(a){if(a){for(var b=[],c=a.length,d=null,f=0;f<c;f++)d=a[f],"Template"!==d.Type&&b.push({id:d.$key,text:[d.UserInfo.FirstName,d.UserInfo.LastName].join(" ")});this.storeData={identifier:"id",label:"text",items:b};var g=new e({data:this.storeData});this.comboBox.set("store",g),this.comboBox.set("searchAttr","text")}}),function(a){}),this.inherited(arguments)},getUserData:function(a){this.dataStore.fetch({count:this._pageSize,start:this._position,onComplete:function(b){b.length===this._pageSize?(this._position+=this._pageSize,null===this._queryResults?this._queryResults=b:this._queryResults.push.apply(this._queryResults,b),this.getUserData(a)):(null===this._queryResults?this._queryResults=b:this._queryResults.push.apply(this._queryResults,b),a.callback(this._queryResults))},onError:function(b){a.errback(b)},scope:this})},_getValueAttr:function(){return this.comboBox.get("value")}})})},"Sage/UI/Controls/Phone":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.Phone",c,{slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},shouldPublishMarkDirty:!0,autoPostBack:!1,postCreate:function(){this.inherited(arguments),this.unformattedValue=this.unformatNumber(this.get("value"))},unformattedValue:"",formatPhoneChange:function(a){this.unformattedValue=this.unformatNumber(this.get("value"));var b=this.formatNumberForDisplay(a,this.unformattedValue);this.set("value",b)},formatters:[{test:/^\+.*/,format:"{0}"},{test:/^(\d{3})(\d{3,4})$/,format:"{3}-{4}"},{test:/^(\d{3})(\d{3})(\d{2,4})$/,format:"({3}) {4}-{5}"},{test:/^(\d{3})(\d{3})(\d{2,4})([^0-9]{1,}.*)$/,format:"({3}) {4}-{5}{6}"},{test:/^(\d{11,})(.*)$/,format:"{1}"}],unformatNumber:function(a){var b=a;return b&&b.length&&("+"===b[0]||"0"===b[0])?b:b=b.replace(/[^0-9x]/gi,"")},formatNumberForDisplay:function(a,b){var c=a;if(/^\+/.test(c))return c;void 0===b&&(b=c);for(var d=0;d<this.formatters.length;d++){var e,f=this.formatters[d];if(e=f.test.exec(b))return String.format.apply(String,[f.format,c,b].concat(e))}return c},onChange:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.formatPhoneChange(a)}})})},"Sage/UI/Controls/TextBox":function(){define(["dijit/form/ValidationTextBox","dojo/dom-class","dojo/query","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls.TextBox",[a],{maxLength:"",textWithIcons:!1,shouldPublishMarkDirty:!0,autoPostBack:!1,hotKey:"",_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},postCreate:function(){this.connect(this,"onChange",this.onChanged),this.inherited(arguments)},startup:function(a){if(this.textWithIcons){var d=this;dojo.ready(function(){if(c("#"+d.id)[0]){var a=c("#"+d.id)[0];b.add(a.parentNode,"textcontainer-with-icons")}})}this.inherited(arguments)},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&__doPostBack(this.id,"")},setAttribute:function(a,b){this.set(a,b)}})})},"Sage/UI/Controls/GridParts/Columns/DateTime":function(){define(["dojo/date/locale","Sage/Utility","Sage/Utility/Activity","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){var f=d("Sage.UI.Controls.GridParts.Columns.DateTime",null,{timelessField:"",timelessText:"",dateOnly:!1,utc:!1,useFiveSecondRuleToDetermineTimeless:!1,constructor:function(a){e.mixin(this,a)},format:function(a,b){
var c=this.formattedDate(a,b);if(this.abbreviationLength){c=Sage.Format.abbreviationFormatter(this.abbreviationLength)(c)}return c},formattedDate:function(d,e){if(!e)return"";var f=d||this.defaultValue;if(this.dateOnly=void 0===this.dateTimeType?this.dateOnly:"D"===this.dateTimeType.toUpperCase(),!f)return"";if(!(f=g.toDateFromString(f,!0))||f.constructor!==Date)return"";var h=!1;if(this.timelessField&&""!==this.timelessField&&(h=g.toBoolean(b.getValue(e,this.timelessField,"F"))),this.useFiveSecondRuleToDetermineTimeless&&(h=c.isDateFiveSecondRuleTimeless(f)),this.dateOnly||this.datePattern){if(this.datePattern)return this.dateOnly&&(f=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate())),f.format(this.datePattern,{locale:Sys.CultureInfo.CurrentCulture.name});if(this.utc){var i=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate());return a.format(i,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return dojo.date.locale.format(f,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}if(h){var j=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,5);return dojo.date.locale.format(j,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})+this.timelessText}return a.format(f,{selector:this.formatType||"date/time",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}}),g=b.Convert;return f})},"Sage/UI/Controls/GridParts/Columns/Phone":function(){define(["Sage/Format","Sage/UI/Controls/Phone","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.UI.Controls.GridParts.Columns.Phone",null,{defaultValue:"",widgetClass:b,constructor:function(a){d.mixin(this,a)},format:function(b,c){return'<a href="tel:'+b+'">'+a.phone(b,c)+"</a>"}})})},"Sage/Format":function(){define(["Sage/Utility","dojo/string"],function(a,b){return Sage.Format={phone:function(c,d){return c?10!==c.length?a.htmlEncode(c):b.substitute("(${0}) ${1}-${2}",[c.substring(0,3),c.substring(3,6),c.substring(6)]):""},email:function(a,b){if(!a)return"";var c=a;return this.icon&&""!==this.icon&&(c=!0===this.icon||"true"===this.icon?'<img src="images/icons/Send_Write_email_16x16.png" />':'<img src="'+this.icon+'" />'),dojo.string.substitute('<a href="mailto:${0}">${1}</a>',[a,c])},stringFromArray:function(a,b){switch(b.length){case 1:return String.format(a,b[0]);case 2:return String.format(a,b[0],b[1]);case 3:return String.format(a,b[0],b[1],b[2]);case 4:return String.format(a,b[0],b[1],b[2],b[3]);case 5:return String.format(a,b[0],b[1],b[2],b[3],b[4]);case 6:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return String.format(a,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);default:return a}},abbreviationFormatter:function(a){return function(b,c){if(null===b)return"";if("string"!=typeof b||b.length<=a)return b;b=b.substring(0,a);var d=b.lastIndexOf(" ");return d>0&&d>.75*b.length&&(b=b.substring(0,d)),b+"..."}},Address:{formatAddress:function(a,b){var c="\r\n",d="",e=this.GetAddressLines(a),f=this.GetCity(a),g=this.GetState(a),h=this.GetZipCode(a),i=this.GetCounty(a),j=this.GetCountry(a);return d=b.replace(/%A/g,e),d=d.replace(/%D/g,i),d=d.replace(/%C/g,f),d=d.replace(/%Z/g,h),d=d.replace(/%S/g,g),-1===b.indexOf("%A")&&(d+=""===b?""===e?"":e:""===e?"":c+e),-1===b.indexOf("%C")&&(d+=""===f?"":c+f),-1===b.indexOf("%S")&&(d+=""===g?"":c+g),-1===b.indexOf("%Z")&&(d+=""===h?"":c+h),d=this.RemoveUnnecessaryChars(d),d+=j,d=d.replace(/\^/g,""),""===e&&""===f&&""===i&&""===g&&""===h&&""===j&&(d=""),d},RemoveUnnecessaryChars:function(a){for(var b="",c="\r\n",d=a.split("%n"),e=0;e<d.length;e++){var f=d[e];f=f.replace(/^\,|\,$/g,""),f=f.replace(/^\ |\ $/g,""),f=f.replace(/^\ - |\ - $/g,""),f=f.replace(/^\-|\-$/g,""),f=f.replace(/\/$/g,""),""!==f&&(b+=f+c)}return b},GetAddressLines:function(a){var b="\r\n",c=this.GetValueByObjectName(a,"addr1"),d=this.GetValueByObjectName(a,"addr2"),e=this.GetValueByObjectName(a,"addr3"),f=this.GetValueByObjectName(a,"addr4"),g=this.GetValueByObjectName(a,"addr5"),h=this.GetValueByObjectName(a,"addr6"),i=""!==c?c:"";return i+=""!==d?b+d:"",i+=""!==e?b+e:"",i+=""!==f?b+f:"",i+=""!==g?b+g:"",i+=""!==h?b+h:""},GetCounty:function(a){return this.GetValueByObjectName(a,"county")},GetCity:function(a){return this.GetValueByObjectName(a,"city")},GetZipCode:function(a){return this.GetValueByObjectName(a,"postalCode")},GetState:function(a){return this.GetValueByObjectName(a,"state")},GetCountry:function(a){return this.GetValueByObjectName(a,"country")},GetValueByObjectName:function(a,b){var c="",d=a.filter(function(a){return a.name===b});return d.length>0&&""!==d[0].value&&(c=d[0].value),c}}},Sage.Format})},"Sage/UI/Controls/GridParts/Columns/PickList":function(){define(["Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","Sage/Data/BaseSDataStore","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e,f){return d("Sage.UI.Controls.GridParts.Columns.PickList",null,{widgetClass:b,storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(a){f.mixin(this,a),this.inherited(arguments),"id"!==this.storageMode&&"code"!==this.storageMode||this.pickListName&&null===this.storeData&&this._loadPickList()},format:function(a,b){return"id"===this.storageMode&&(a=this.getStoreTextById(a)),"code"===this.storageMode&&(a=this.getStoreTextByCode(a)),void 0!==a?a:""},_loadPickList:function(){var b=new dojo.Deferred,c={pickListName:this.pickListName,canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:this.storageMode,sort:!1,displayMode:this.displayMode,async:!1};this.pickList=new a(c),this.pickList.getPickListData(b),b.then(f.hitch(this,this._loadData),function(a){})},getStoreTextById:function(a){var b=a;return this.storeData&&e.some(this.storeData.items,function(c){c.id===a&&(b=c.text)},this),b},getStoreTextByCode:function(a){var b=a;return this.storeData&&e.some(this.storeData.items,function(c){c.code===a&&(b=c.text)},this),b},_loadData:function(a){for(var b=[],c=0;c<a.items.$resources.length;c++){var d=a.items.$resources[c];b.push({id:d.$key,code:d.code,number:d.number,text:d.text})}this.storeData={identifier:"id",label:"text",items:b}}})})},"Sage/UI/ToolBarLabel":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.ToolBarLabel",[a,b],{label:"label",region:"leading",templateString:'<span class="dijitToolbarLabel"><span class="dijitReset dijitInline " dojoAttachPoint="containerNode"></span></span>',attributeMap:{label:{node:"containerNode",type:"innerHTML"}},_append:function(a){this.containerNode.innerHTML+=a},_setLabelAttr:function(a){this.containerNode.innerHTML=this.label=a}})})},"Sage/Utility/File":function(){define(["Sage/UI/Dialogs","dojo/number","dojo/_base/lang","dojo/i18n!./nls/File"],function(a,b,c,d){return Sage.namespace("Utility.File"),Sage.Utility.File={fileType:{ftAttachment:0,ftLibraryDocs:1},supportsHTML5File:window.File&&window.FileReader&&window.FileList&&window.Blob,fileUploadOptions:{maxFileSize:4e6},init:function(a){a&&(this.fileUploadOptions=a)},isFileSizeAllowed:function(b){for(var c=0,e=Sage.Utility.File.fileUploadOptions.maxFileSize,f=d.largeFileWarningTitle,g=d.largeFileWarningText,h=0;h<b.length;h++)0===b[h].size||(c+=b[h].size||b[h].blob.length);return!(c>e)||(a.showError(g,f),!1)},uploadFile:function(a,b,c,d,e,f,g){Sage.Utility.File.isFileSizeAllowed([a])&&(Sage.gears?this._uploadFileGears(a,b,c,d,e,f,g):this.supportsHTML5File?window.FileReader.prototype.readAsBinaryString||window.FileReader.prototype.readAsArrayBuffer?this._uploadFileHTML5_asBinary(a,b,c,d,e,f,g):this._uploadFileHTML5(a,b,c,d,e,f,g):this._showUnableToUploadError())},uploadFileHTML5:function(a,b,c,d,e,f,g){Sage.Utility.File.isFileSizeAllowed([a])&&(this.supportsHTML5File?window.FileReader.prototype.readAsBinaryString||window.FileReader.prototype.readAsArrayBuffer?this._uploadFileHTML5_asBinary(a,b,c,d,e,f,g):this._uploadFileHTML5(a,b,c,d,e,f,g):this._showUnableToUploadError())},_uploadFileGears:function(a,b,c,d,e,f,g){if(!window.Sage&&!Sage.gears)return void this._showUnableToUploadError();c&&c.call(f,null),b||(b="slxdata.ashx/slx/system/-/attachments/file?format=json");var h=Sage.gears.factory.create("beta.httprequest");h.open(g?"PUT":"POST",b);var i="---------------------------"+(new Date).getTime(),j="--",k="\r\n",l=Sage.gears.factory.create("beta.blobbuilder");l.append(j),l.append(i),l.append(k),l.append('Content-Disposition: attachment; name="file_"'),a.name&&l.append('; filename*="'+encodeURIComponent(a.name)+'"'),l.append(k),l.append("Content-Type: application/octet-stream"),l.append(k),l.append(k),l.append(a.blob),l.append(k),l.append(j),l.append(i),l.append(j),l.append(k),"function"==typeof d&&(h.onreadystatechange=function(){4===h.readyState&&(2!==Math.floor(h.status/100)?"function"==typeof e&&e.call(f||this,h):d.call(f||this,h))}),"function"==typeof c&&(h.upload.onprogress=function(a){c.call(f||this,a)}),h.setRequestHeader("Content-Type","multipart/attachment; boundary="+i);var m=l.getAsBlob();h.send(m)},_uploadFileHTML5:function(a,b,c,d,e,f,g){if(!this.supportsHTML5File||!window.FormData)return void this._showUnableToUploadError();c&&c.call(f,null),b||(b="slxdata.ashx/slx/system/-/attachments/file");var h=new FormData;h.append("file_",a,a.name);var i=new XMLHttpRequest;i.open(g?"PUT":"POST",b),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),d&&(i.onreadystatechange=function(){4===i.readyState&&(2!==Math.floor(i.status/100)?e&&e.call(f||this,i):d.call(f||this,i))}),c&&i.upload.addEventListener("progress",function(a){c.call(f||this,a)}),i.send(h)},_uploadFileHTML5_asBinary:function(a,b,d,e,f,g,h){if(!this.supportsHTML5File)return void this._showUnableToUploadError();d&&d.call(g,null),window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,b||(b="slxdata.ashx/slx/system/-/attachments/file");var i=new XMLHttpRequest;i.open(h?"PUT":"POST",b),i.setRequestHeader("X-Requested-With","XMLHttpRequest");var j=new FileReader;j.onload=c.hitch(this,function(b){var c,h,j,k,l,m,n,o;n=new FileReader;try{new Blob,l=[]}catch(a){l=new window.BlobBuilder,m=!0}var p=a.name.split("\\"),q=p[p.length-1];c=b.target.result,h="---------------------------"+(new Date).getTime(),j="--",k="\r\n",this._append(l,j+h+k),this._append(l,"Content-Disposition: attachment; "),this._append(l,'name="file_"; '),this._append(l,'filename*="'+encodeURIComponent(q)+'" '),this._append(l,k),this._append(l,"Content-Type: "+a.type),this._append(l,k+k),this._append(l,c),this._append(l,k),this._append(l,j+h+j+k),e&&(i.onreadystatechange=function(){4===i.readyState&&(2!==Math.floor(i.status/100)?f&&f.call(g||this,i):e.call(g||this,i))}),d&&i.upload.addEventListener("progress",function(a){d.call(g||this,a)}),i.setRequestHeader("Content-Type","multipart/attachment; boundary="+h),o=m?l.getBlob(a.type):new Blob(l),n.onload=function(a){i.send(a.target.result)};try{i.send(o)}catch(a){n.readAsArrayBuffer(o)}});try{j.readAsArrayBuffer(a)}catch(b){var k;if(void 0!==a.blob)if(a.blob.constructor==Array)k=new Blob([new Uint8Array(a.blob)],{type:"application/binary"}),j.readAsArrayBuffer(k);else if("undefined"!=typeof VBArray){var l=a.blob,m=new VBArray(l.getAsArray()).toArray();k=new Blob([new Uint8Array(m)],{type:"application/binary"}),j.readAsArrayBuffer(k)}}},_append:function(a,b){a&&a.constructor===Array?a.push(b):a.append(b)},_showUnableToUploadError:function(){a.showError(d.unableToUploadText)},formatFileSize:function(a){return a=parseInt(a,10),0===a?"0 KB":!a||a<0?d.unknownSizeText:a<1024?"1 KB":b.format(Math.round(a/1024),{locale:Sys.CultureInfo.CurrentCulture.name})+" KB"}},Sage.Utility.File})},"Sage/Utility/File/Attachment":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/File/DescriptionsForm","dojo/i18n","dojo/i18n!./nls/Attachment"],function(a,b,c,d,e,f,g,h,i){return Sage.namespace("Utility.File.Attachment"),Sage.Utility.File.Attachment={uploadingAttachments:"Uploading attachments",uploadCompleted:"Completed",uploadingPleaseWait:"Uploading, please wait...",uploadFailed:"Upload failed.",_store:!1,_totalProgress:0,_attachmentTemplate:!1,_mixinsByName:{},_files:[],_fileCount:0,_filesUploadedCount:0,_isUploading:!1,_descriptionsForm:!1,_uploadUrl:"slxdata.ashx/slx/system/-/attachments/file",createAttachments:function(a){var b="";if(Sage.Services.hasService("ClientEntityContext")){b=Sage.Services.getService("ClientEntityContext").getContext().Description||""}this._ensureDescriptionsForm(),this._descriptionsForm.set("entityDesc",b),this._descriptionsForm.set("files",a),this._descriptionsForm.show()},createAttachmentSilent:function(a,b){var c=a.name.split("\\"),d=c[c.length-1];b.hasOwnProperty("description")||(b.description=this.getDefaultDescription(d)),this._mixinsByName[d]=e.mixin(b,{attachDate:g.Convert.toIsoStringFromDate(new Date),dataType:"R"}),this._files.push(a),this._attachmentTemplate?this.uploadFiles():this.getAttachmentTemplate(this.uploadFiles,this)},handleDescriptions:function(a,b){this.getKnownRelationships(function(c){for(var d=e.mixin(c,{attachDate:g.Convert.toIsoStringFromDate(new Date),dataType:"R",user:{$key:g.getClientContextByKey("userID")||""}}),f=0;f<b.length;f++)b[f][""]="",this._mixinsByName[b[f].fileName]=e.mixin(b[f],d);for(f=0;f<a.length;f++)this._files.push(a[f]);this._attachmentTemplate?this.uploadFiles():this.getAttachmentTemplate(this.uploadFiles,this)},this)},uploadFiles:function(a){for(this._isUploading=!0,this._fileCount=this._files.length,a&&!this._attachmentTemplate&&(this._attachmentTemplate=a);this._files.length>0;){var b=this._files.pop();Sage.Utility.File.uploadFile(b,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this)}},_successUpload:function(c){var d=c.getResponseHeader("Location"),f=/\'\w+\'/g,g=d.match(f);if(g){var h=g[0].replace(/\'/g,""),i=new a({resourceKind:"attachments",service:b.getSDataService("system")});i.fetch({predicate:'"'+h+'"',onComplete:function(a){var b=this._mixinsByName[a.fileName];b&&(a=e.mixin(a,b),i.save({scope:this,success:this._successAddEntity,failure:this._failAdd})),delete this._mixinsByName[a.fileName]},beforeRequest:function(a){a.setQueryArg("_includeFile","false")},onError:this._failAdd,scope:this})}this._filesUploadedCount=this._filesUploadedCount+1,this._updateProgress(this._fileCount<1?100:this._filesUploadedCount/this._fileCount*100)},_successAddEntity:function(a){dojo.publish("/entity/attachment/create",a)},getAttachment:function(a){a&&12===a.length&&window.open("slxdata.ashx/slx/system/-/attachments('"+a+"')/file","file")},getAttachmentTemplate:function(a,b){c.Attachment._createStore(),c.Attachment._store.newItem({onComplete:a,scope:b||this})},getDefaultDescription:function(a){return this._ensureDescriptionsForm(),this._descriptionsForm.getDefaultDescription(a)},_createStore:function(){c.Attachment._store||(c.Attachment._store=new a({resourceKind:"attachments",service:b.getSDataService("system")}))},_updateProgress:function(a){var b=this._totalProgress;if(a&&a.lengthComputable){var c=a.loaded/a.total*100;b+=Math.round(c/this._fileCount)}else a&&(b=a);this._totalProgress=b,b<99?d.showProgressBar({pct:b,title:this.uploadingAttachments,message:this.uploadingPleaseWait,showmessage:!0}):(d.showProgressBar({pct:b,message:this.uploadCompleted,showmessage:!0}),this,window.setTimeout(function(){d.closeProgressBar()},1e3),this._resetCounts())},_resetCounts:function(){this._fileCount=0,this._filesUploadedCount=0,this._isUploading=!1,this._totalProgress=0},_failAdd:function(a){d.showProgressBar({title:this.uploadingAttachments,message:this.uploadFailed,showmessage:!0})},_successUpdate:function(a){dojo.publish("/entity/attachment/update",a)},_ensureDescriptionsForm:function(){this._descriptionsForm||(this._descriptionsForm=new h({entityDesc:"",files:this._files||[]}),dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions"))},getKnownRelationships:function(a,b,c){var d={};if(Sage.Services.hasService("ClientEntityContext")){var e=Sage.Services.getService("ClientEntityContext"),f=e.getContext(),g=f.EntityType.split("."),h=g[g.length-1];if(""!==f.EntityId){var i=f.EntityId;switch(h){case"IContact":return void this._getContactRelationships(i,a,b);case"IOpportunity":return void this._getOpportunityRelationships(i,a,b);case"ITicket":return void this._getTicketRelationships(i,a,b);case"ISalesOrder":return void this._getSalesOrderRelationships(i,a,b);case"IActivity":return void this._getActivityRelationships(i,a,b);case"IHistory":return void this._getHistoryRelationships(i,a,b);case"IContract":return void this._getContractRelationships(i,a,b);case"IReturn":return void this._getReturnRelationships(i,a,b)}return d[f.EntityTableName.toLowerCase()+"Id"]=i,void a.call(b||this,d)}if("IActivity"===h&&c)return void this._getInsertActivityRelationships(a,b);if("IHistory"===h&&c)return void this._getInsertHistoryRelationships(a,b)}a.call(b||this,{})},_getRequest:function(a,c){var d=new Sage.SData.Client.SDataSingleResourceRequest(b.getSDataService("dynamic"));return d.setResourceKind(a),d.setResourceSelector('"'+c+'"'),d.setQueryArg("precedence","0"),d},_getContactRelationships:function(a,b,c){var d=this._getRequest("contacts",a);d.setQueryArg("include","Account"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),contactId:a.$key};b.call(c||this,d)},failure:function(){b.call(c||this,{contactId:a})},scope:this})},_getOpportunityRelationships:function(a,b,c){var d=this._getRequest("opportunities",a);d.setQueryArg("include","Account,Contacts"),d.setQueryArg("select","Contacts/IsPrimary,Account/Id"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),opportunityId:a.$key},e="",f=a.Contacts.$resources;f.length>0&&(e=f[0].$key);for(var h=0;h<f.length;h++)f[h].IsPrimary&&(e=f[h].$key);d.contactId=e,b.call(c||this,d)},failure:function(){b.call(c||this,{opportunityId:a})},scope:this})},_getSalesOrderRelationships:function(a,b,c){var d=this._getRequest("salesorders",a);d.setQueryArg("include","Account"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),salesOrderId:a.$key};b.call(c||this,d)},failure:function(){b.call(c||this,{salesOrderId:a})},scope:this})},_getTicketRelationships:function(a,b,c){var d=this._getRequest("tickets",a);d.setQueryArg("include","Account,Contact"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),ticketId:a.$key,contactId:g.getValue(a,"Contact.$key")};b.call(c||this,d)},failure:function(){b.call(c||this,{ticketId:a})},scope:this})},_getReturnRelationships:function(a,b,c){var d=this._getRequest("returns",a);d.setQueryArg("include","Account,Contact,Ticket"),d.read({success:function(a){var d={returnId:a.$key,accountId:g.getValue(a,"Account.$key"),ticketId:g.getValue(a,"Ticket.$key"),contactId:g.getValue(a,"Contact.$key")};b.call(c||this,d)},failure:function(){b.call(c||this,{returnId:a})},scope:this})},_getActivityRelationships:function(a,b,c){var d=this._getRequest("activities",a);d.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId"),d.read({success:function(a){var d={accountId:g.getValue(a,"AccountId"),activityId:a.$key,contactId:g.getValue(a,"ContactId"),leadId:g.getValue(a,"LeadId"),opportunityId:g.getValue(a,"OpportunityId"),ticketId:g.getValue(a,"TicketId")};b.call(c||this,d)},failure:function(){b.call(c||this,{activityId:a})},scope:this})},_getInsertActivityRelationships:function(a,b){var c=dijit.byId("activityEditor");if(c){var d=c.getRelationshipsForAttachments();return void a.call(b||this,d)}a.call(b||this,{activityId:""})},_getHistoryRelationships:function(a,b,c){var d=this._getRequest("history",a);d.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId"),d.read({success:function(a){var d={accountId:g.getValue(a,"AccountId"),historyId:a.$key,contactId:g.getValue(a,"ContactId"),leadId:g.getValue(a,"LeadId"),opportunityId:g.getValue(a,"OpportunityId"),ticketId:g.getValue(a,"TicketId")};b.call(c||this,d)},failure:function(){b.call(c||this,{historyId:a})},scope:this})},_getInsertHistoryRelationships:function(a,b){var c=dijit.byId("historyEditor");if(c){var d=c.getRelationshipsForAttachments();return void a.call(b||this,d)}a.call(b||this,{historyId:""})},_getContractRelationships:function(a,b,c){var d=this._getRequest("contracts",a);d.setQueryArg("include","Account,Contact"),d.read({success:function(a){var d={accountId:g.getValue(a,"Account.$key"),contractId:a.$key,contactId:g.getValue(a,"Contact.$key")};b.call(c||this,d)},failure:function(){b.call(c||this,{ticketId:a})},scope:this})},remoteRequestAttachment:function(a){var c={$name:"RequestAttachment",request:{entity:{$key:a},AttachmentId:a}};new Sage.SData.Client.SDataServiceOperationRequest(b.getSDataService("system")).setResourceKind("attachments").setOperationName("RequestAttachment").execute(c,{success:function(a){dojo.publish("/entity/attachment/requested",a)}})}},Sage.Utility.File.Attachment=dojo.mixin(Sage.Utility.File.Attachment,i.getLocalization("Sage.Utility.File","Attachment")),Sage.Utility.File.Attachment})},"Sage/Utility/File/DescriptionsForm":function(){define(["Sage/Utility/File","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dijit/Dialog","dojo/i18n","dojo/i18n!./nls/DescriptionsForm","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i){return i("Sage.Utility.File.DescriptionsForm",[b,c],{fileType:a.fileType.ftAttachment,titleFmt:"Add Attachment(s) for ${0}",titleLibraryDoc:"Add Library Document(s)",fileNameText:"File name and size: ",descText:"Description:",okText:"OK",cancelText:"Cancel",entityDesc:"",_formParts:[],files:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" id="dlgFileDescriptions" title="" dojoAttachPoint="_dialog">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="3" style="width:580px">','<div dojoType="dijit.layout.ContentPane" label="" style="width:212px;"><label>{%= $.fileNameText %}</label></div>','<div dojoType="dijit.layout.ContentPane" label="" style="width:250px;"><label>{%= $.descText %}</label></div>',"</div>",'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="5" dojoAttachPoint="contentNode" style="min-height:150px;width:580px;max-height:250px;overflow:auto" >',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnOK" name="_btnOK" dojoAttachPoint="_btnOK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnCancel" name="_btnCancel" dojoAttachPoint="_btnCancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>',"</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,h),this.inherited(arguments)},show:function(){this.fileType!==a.fileType.ftLibraryDocs?this._dialog.set("title",e.substitute(this.titleFmt,[this.entityDesc])):this._dialog.set("title",this.titleLibraryDoc),this._dialog.show(),this._addFormParts()},_setEntityDescAttr:function(a){this.entityDesc=a},_getEntityDescAttr:function(){return this.entityDesc},_setFilesAttr:function(a){this.files=a},_getFilesAttr:function(){return this.files},_addFormParts:function(){for(var a=0;a<this.files.length;a++){var b=this.files[a],c=0;c=0===b.size?0:b.size||b.blob.length,0===c?c+="0 Bytes":c&&(c>1024?c=c>1048576?Math.round(c/1048576)+" MB":Math.round(c/1024)+" KB":c+=" Bytes");var d=new dijit.form.TextBox({id:"filename_"+a,value:b.name+"  ("+c+")",style:"min-width:250px;margin:0 0 5px 15px;",disabled:!0}),e=new dijit.form.TextBox({id:"desc_"+a,value:this.getDefaultDescription(b.name),style:"min-width:250px;margin:0 0 5px 20px;",maxLength:128,relFileName:b.name});this._formParts.push(d),this._formParts.push(e),this.contentNode.addChild(d),this.contentNode.addChild(e)}},_clearForm:function(){for(var a=this._formParts.length,b=a-1;b>-1;b--){var c=this._formParts[b];this.contentNode.removeChild(c),c.destroyRecursive(!1)}this._formParts=[]},_okClick:function(){for(var a=[],b=0;b<this._formParts.length;b++){var c=this._formParts[b];c.params.relFileName&&a.push({description:c.get("value")||this.getDefaultDescription(c.params.relFileName),fileName:c.params.relFileName})}this._clearForm(),this.onDescriptionsEntered(this.files,a),this._dialog.hide()},_cancelClick:function(){this._clearForm(),this._dialog.hide()},getDefaultDescription:function(a){var b=a.lastIndexOf(".");return-1!=b?a.substr(0,b):a},onDescriptionsEntered:function(a,b){}})})},"Sage/Utility/File/AttachmentPropertiesEditForm":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/UI/Dialogs","dojox/layout/TableContainer","Sage/UI/Controls/DateTimePicker","dijit/form/TextBox","dijit/form/Button","dojox/form/Uploader","dojo/i18n","dojo/i18n!./nls/AttachmentPropertiesEditForm","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return t("Sage.Utility.File.AttachmentPropertiesEditForm",[a,b],{attachmentId:"",widgetsInTemplate:!0,attachment:!1,_bindingMgr:!1,_store:!1,_tempFile:!1,_iframe:null,_showing:!1,_iframeId:"attachmentRePostIFrame",_uploadUrlFmt:"slxdata.ashx/slx/system/-/attachments('${0}')/file",widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" title="{%= $.editText %}" dojoAttachPoint="_dialog">','<iframe src="about:blank" style="width:0px;height:0px;border-width:0px;" name="{%= $._iframeId %}" id="{%= $._iframeId %}" dojoAttachPoint="_iframe" dojoAttachEvent="onload:_iframeLoad"></iframe>','<form method="post" enctype="multipart/form-data" action="{%= $._buildPostUrl() %}" target="{%= $._iframeId %}" dojoAttachPoint="_postForm", class="attachment-properties-form">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" dojoAttachPoint="_urlContainer">','<div dojoType="dijit.form.TextBox" label="{%= $.urlText %}" id="{%= $.id %}_tb_Url" dojoAttachPoint="tb_Url" ></div>',"</div>",'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" dojoAttachPoint="_fileNameContainer" >','<div dojoType="dijit.form.TextBox" label="{%= $.fileText %}" id="{%= $.id %}_tb_File" dojoAttachPoint="tb_File" ></div>',"</div>",'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" >','<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="128" ></div>','<div dojoType="dijit.form.TextBox" label="{%= $.sizeText %}" id="{%= $.id %}_tb_size" dojoAttachPoint="tb_size" disabled="true" shouldPublishMarkDirty="false"></div>','<div dojoType="Sage.UI.Controls.DateTimePicker" label="{%= $.attachDateText %}" id="{%= $.id %}_dtp_AttachDate" dojoAttachPoint="dtp_attachDate" displayDate="true" displayTime="true" disabled="true" shouldPublishMarkDirty="false"></div>','<div dojoType="dijit.form.TextBox" label="{%= $.attachedByText %}" id="{%= $.id %}_tb_attachedBy" dojoAttachPoint="tb_attachedBy" disabled="true" shouldPublishMarkDirty="false"></div>',"</div>",'<div class="general-dialog-actions">','<input dojoType="dojox.form.Uploader" multiple="false" label="{%= $.uploadFileText %}" type="file" name="file" dojoAttachEvent="onChange:_onNewFile" dojoAttachPoint="btn_FileSelect" class="uploadButton" ></input>',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnOK" name="_btnOK" dojoAttachPoint="_btnOK" dojoAttachEvent="onClick:_okClick" >{%= $.okText %}</div>','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnCancel" name="_btnCancel" dojoAttachPoint="_btnCancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>',"</div>",'<input type="hidden" name="X-HTTP-Method-Override" value="PUT" />',"</form>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,r.getLocalization("Sage.Utility.File","AttachmentPropertiesEditForm")),this.inherited(arguments)},show:function(){this._dialog.show(),this._dialog._standby||f.mixin(this._dialog,new e),this._showing=!0,this.attachment||this._dialog.showLoading()},hide:function(){this.attachmentId="",this.attachment=!1,this._tempFile=!1,this._dialog._standby&&this._dialog.hideLoading(),this._dialog.hide(),this._showing=!1},_buildPostUrl:function(){var a=[];return a.push(/https/i.test(window.location.protocol)?"https":"http"),a.push("://"),a.push(window.location.hostname),window.location.port&&80!==window.location.port&&a.push(":",window.location.port),a.push("/"),a.push(k.getVirtualDirectoryName()),a.push("/slxdata.ashx/slx/system/-/attachments"),this.attachment&&a.push('("'+this.attachment.$key+'")'),a.push("/file"),a.join("")},_iframeLoad:function(a){this._iframe.contentDocument&&this._iframe.contentDocument.URL.indexOf("attachments")>0&&(dojo.publish("/entity/attachment/update",""),this.hide())},_setAttachmentIdAttr:function(a){this.attachmentId=a,this.attachmentId&&""!==this.attachmentId&&this._loadData()},_getAttachmentIdAttr:function(){return this.attachmentId},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._store||(this._store=new g({include:["$descriptors"],resourceKind:"attachments",service:h.getSDataService("system")})),""!==this.attachmentId?(this._store.clearCache(),this._store.fetch({predicate:'"'+this.attachmentId+'"',onComplete:this._receiveAttachment,beforeRequest:function(a){a.setQueryArg("_includeFile","false")},onError:this._requestFail,scope:this})):l.showError("No attachment to edit")},_receiveAttachment:function(a){this._dialog._standby&&this._dialog.hideLoading(),this.attachment=a,this._ensureBindings(),this._bind(),this.attachment.url?(dojo.removeClass(this._urlContainer.domNode,"display-none"),dojo.addClass(this.btn_FileSelect.domNode,"display-none"),dojo.addClass(this._fileNameContainer.domNode,"display-none")):(dojo.addClass(this._urlContainer.domNode,"display-none"),dojo.removeClass(this.btn_FileSelect.domNode,"display-none"),dojo.removeClass(this._fileNameContainer.domNode,"display-none"))},_ensureBindings:function(){this._bindingMgr||(this._bindingMgr=new i({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_File,entityProperty:"fileName"},{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_size,entityProperty:"fileSize",_formatValueFromEntity:function(a){return Sage.Utility.File.formatFileSize(a)},twoWay:!1},{boundWidget:this.dtp_attachDate,entityProperty:"attachDate",dataType:"date",twoWay:!1},{boundWidget:this.tb_Url,entityProperty:"url"},{boundWidget:this.tb_attachedBy,entityProperty:"user.$descriptor",twoWay:!1}]}))},_bind:function(){this._bindingMgr.boundEntity&&this.attachment.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this.attachment)},_onNewFile:function(){var a=this.btn_FileSelect._files;a&&a.length>0&&(this.tb_File.set("value",a[0].name),this._tempFile=a[0]),this.tb_Description.focus()},_uploadNewFile:function(a){if(a){var b=c.substitute(this._uploadUrlFmt,[this.attachment.$key]);j.uploadFileHTML5(a,b,!1,this._newFileUploaded,this._requestFail,this,!0)}},_newFileUploaded:function(){this._tempFile=!1,dojo.publish("/entity/attachment/update",this.attachment),this.hide()},_okClick:function(){this._dialog._standby&&this._dialog.showLoading(),this._saveAndHide()},_saveAndHide:function(){
this._dialog._standby&&this._dialog.showLoading();var a=this;if(!j.supportsHTML5File&&!Sage.gears&&this._tempFile)return this._store._okToCache=!1,this._postForm.action=this._buildPostUrl(),this._postForm.submit(),void window.setTimeout(function(){a._showing&&(dojo.publish("/entity/attachment/update",""),a.hide())},5e3);window.setTimeout(function(){a._saveAttachment()},10)},_saveAttachment:function(){this._store.save({scope:this,success:function(a){this._tempFile||(dojo.publish("/entity/attachment/update",a),this._dialog.hide())},failure:this._requestFail}),this._tempFile&&this._uploadNewFile(this._tempFile)},_cancelClick:function(){this.hide()},_requestFail:function(a){l.showError(this.requestFailedMsg),this.hide()}})})},"Sage/Utility/File/FallbackFilePicker":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Dialog","require","dojo/string","Sage/UI/Dialogs","Sage/Utility","Sage/Utility/ErrorHandler","Sage/Utility/File","Sage/Utility/File/Attachment","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","dojo/i18n","dojo/i18n!./nls/FallbackFilePicker","dojo/text!./templates/FallbackFilePicker_Attachment.html","dojo/text!./templates/FallbackFilePicker_LibraryDoc.html","dojo/_base/array","dojo/_base/declare","dojo/has"],function(_Widget,_Templated,Dialog,require,dString,Dialogs,sageUtility,ErrorHandler,File,attachmentUtility,dojoLang,_DialogLoadingMixin,i18n,nlsBundle,attachmentTemplate,libraryDocTemplate,array,declare,has){var filePicker=declare("Sage.Utility.File.FallbackFilePicker",[_Widget,_Templated],{addLibraryFileText:"Add Library File",attachFileText:"Attach File",descriptionText:"Description",uploadFileText:"Select File",okText:"OK",cancelText:"Cancel",_iframeId:"attachmentPostIFrame",_hiddenFields:["_attachDate","_accountId","_activityId","_contactId","_contractId","_defectId","_historyId","_leadId","_opportunityId","_productId","_returnId","_salesOrderId","_ticketId","_userId"],_showing:!1,fileType:File.fileType.ftAttachment,widgetsInTemplate:!0,id:"fallbackFilePicker",widgetTemplate:null,constructor:function(a){this.inherited(arguments),a&&"object"==typeof a&&dojo.mixin(this,a)},destroy:function(){this._dialog&&this._dialog.destroyRecursive(),this.inherited(arguments)},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","FallbackFilePicker")),this.inherited(arguments),this.fileType!=File.fileType.ftLibraryDocs?this.widgetTemplate=new Simplate(eval(attachmentTemplate)):this.widgetTemplate=new Simplate(eval(libraryDocTemplate))},show:function(){this._postForm&&this._postForm.reset(),this._dialog.show(),this.fileType!=File.fileType.ftLibraryDocs&&attachmentUtility.getKnownRelationships(this._receiveRelationships,this,!0),has("ie")<9&&(this._iframe.attachEvent("onload",this._iframeLoad),window.FallbackFilePicker=this),this._showing=!0},hide:function(){this._dialog.hide()},_onHide:function(){if(this._dialog._standby&&this._dialog.hideLoading(),this.fileType!=File.fileType.ftLibraryDocs)for(var a=0;a<this._hiddenFields.length;a++)this._hiddenFields[a]&&(this[this._hiddenFields[a]].value="");this.tb_Description.set("value",""),this.tb_realFileName.set("value",""),this._showing=!1},_receiveRelationships:function(a){if(this.fileType!=File.fileType.ftLibraryDocs){for(var b in a)this["_"+b]?this["_"+b].value=a[b]:b&&(this["_"+b]=dojo.create("input",{type:"hidden",name:b,value:a[b]},this._postForm),this._hiddenFields.push("_"+b));this._userId.value=sageUtility.getClientContextByKey("userID")||"",this._attachDate.value=sageUtility.Convert.toIsoStringFromDate(new Date)}},_buildPostUrl:function(){var a=[];if(a.push(/https/i.test(window.location.protocol)?"https":"http"),a.push("://"),a.push(window.location.hostname),window.location.port&&80!==window.location.port&&a.push(":",window.location.port),a.push("/"),a.push(sageUtility.getVirtualDirectoryName()),this.fileType!=File.fileType.ftLibraryDocs)a.push("/slxdata.ashx/slx/system/-/attachments/file?iframe=true&format=xml");else{if(!Sage.Library||!Sage.Library.Manager||!Sage.Library.FileHandler)return Dialogs.showError(this.invalidContext),null;var b=Sage.Library.FileHandler.findDirectoryId(),c=dString.substitute("/slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file?iframe=true&format=xml",[b]);a.push(c)}return a.join("")},_iframeLoad:function(a){var b;b=has("ie")<9?window.FallbackFilePicker:this;var c=b._iframe;if(c.contentDocument.body&&c.contentDocument.body.innerText&&"RuntimeErrorPostTooLarge"==c.contentDocument.body.innerText)return b.hide(),void Dialogs.showError(b.fileTooLargeError);try{var d=function(a){if(a&&a.hasOwnProperty("message")){var c=a.message;if(a.hasOwnProperty("applicationCode")&&ErrorHandler.isSDataExceptionDiagnoses(a.applicationCode)){var d=function(){var b={},c=a.applicationCode.split("; ");return array.forEach(c,function(a){if(a&&dojo.isString(a)&&-1!==a.indexOf("=")){var c=a.split("="),d=c[0].trim(),e=c[1].trim();b[d]=e}}),b},e=d();e&&e.hasOwnProperty("slxErrorId")&&(c+="<br /><br />",c+=b.slxErrorIdInfo+e.slxErrorId)}Dialogs.showError(c)}};if(has("ie")){var e={};if(has("ie")<9){var f=c.contentDocument.body?c.contentDocument.body.innerText:null;if(f&&dojo.isString(f)){f=f.trim();var g=f.split("\n");dojo.isArray(g)&&(array.forEach(g,function(a,b){var c=a.indexOf("- ");0===c?g[b]=a.replace("- ",""):0===(c=a.indexOf("  "))&&(g[b]=a.replace("  ",""))}),f=g.join(""),e=ErrorHandler.getSDataDiagnosis(f,!0),d(e))}}else if(c.contentDocument.documentElement&&c.contentDocument.documentElement.childNodes.length>=2&&"sdata:diagnosis"===c.contentDocument.documentElement.childNodes[1].tagName){for(var h=c.contentDocument.documentElement.childNodes[1],i=0;i<h.childNodes.length;i++){var j=h.childNodes[i];0===j.nodeName.indexOf("sdata:")&&(e[j.nodeName.replace("sdata:","")]=j.textContent)}d(e)}}}catch(a){}c.contentDocument.URL&&void 0!==c.contentDocument.URL&&(b.fileType!=File.fileType.ftLibraryDocs?c.contentDocument.URL.indexOf("attachments")>0&&(dojo.publish("/entity/attachment/create",""),b.hide()):c.contentDocument.URL.indexOf("/documents/file")>0&&(dojo.publish("/sage/library/manager/libraryDocuments/refresh",null),b.hide()))},_onNewFile:function(a){if(a.srcElement&&a.srcElement.value.length>0&&a.srcElement.value){var b=a.srcElement.value.replace(/^.*[\\\/]/,"");if(""===this.tb_Description.get("value")){var c=b.split("."),d="";if(c.length<=2)d=c[0];else for(var e=0;e<c.length-1;e++)e>0&&(d+="."),d+=c[e];this.tb_Description.set("value",d)}this.tb_realFileName.set("value",b)}},_okClick:function(){if(""===this.tb_realFileName.get("value"))return void Dialogs.showInfo(this.pleaseSelectFile);this.fileType===File.fileType.ftLibraryDocs&&(this._postForm.action=this._buildPostUrl()),this._postForm.submit(),this._dialog._standby||dojoLang.mixin(this._dialog,new _DialogLoadingMixin),this._dialog.showLoading()},_cancelClick:function(){this.hide()}});return filePicker})},"Sage/Utility/File/AddURLAttachment":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/Dialogs","dojo/i18n","dojo/i18n!./nls/AddURLAttachment","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return p("Sage.Utility.File.AddURLAttachment",[a,b],{descriptionText:"Description",urlText:"URL",titleText:"Add URL Attachment",okText:"OK",cancelText:"Cancel",requestFailedMsg:"The requested operation could not be completed, please try again later.",urlBlankMsg:"The URL or description property cannot be blank.",attachmentId:"",attachment:!1,widgetsInTemplate:!0,_bindingMgr:!1,_store:!1,id:"",widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" id="addUrlAttachDialog" title="{%= $.titleText %}" dojoAttachPoint="_dialog">','<div  class="attachment-properties-form">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" >','<div dojoType="dijit.form.TextBox" label="{%= $.urlText %}" id="{%= $.id %}_tb_Url" dojoAttachPoint="tb_Url" ></div>','<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="128" ></div>',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnOK" name="_btnOK" dojoAttachPoint="_btnOK" dojoAttachEvent="onClick:_okClick" >{%= $.okText %}</div>','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnCancel" name="_btnCancel" dojoAttachPoint="_btnCancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>',"</div>","</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,n.getLocalization("Sage.Utility.File","AddURLAttachment")),this.inherited(arguments)},show:function(){this._dialog.show(),this._dialog._standby||f.mixin(this._dialog,new e),this._loadData()},hide:function(){this.attachmentId="",this.attachment=!1,this._dialog._standby&&this._dialog.hideLoading(),this._dialog.hide()},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._store||(this._store=new g({include:[],resourceKind:"attachments",service:h.getService("system")})),this._store.newItem({onComplete:this._receiveAttachment,onError:this._requestFail,scope:this})},_receiveAttachment:function(a){this._dialog._standby&&this._dialog.hideLoading(),this.attachment=a,l.getKnownRelationships(this._receiveRelationships,this)},_ensureBindings:function(){this._bindingMgr||(this._bindingMgr=new i({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_Url,entityProperty:"url",onChange:dojo.hitch(this,this._urlChange)}]}))},_bind:function(){this._bindingMgr.boundEntity&&this.attachment.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this.attachment),this._dialog._standby&&this._dialog.hideLoading()},_receiveRelationships:function(a){this.attachment=f.mixin(this.attachment,a),this.attachment.user={$key:k.getClientContextByKey("userID")||""},this.attachment.attachDate=k.Convert.toIsoStringFromDate(new Date),this._ensureBindings(),this._bind()},_urlChange:function(){if(!this.tb_Description.get("value")){var a=this.tb_Url.get("value");if(a){var b=new RegExp(/\.([\w]*)/),c=b.exec(a);c.length>1&&this.tb_Description.set("value",c[1])}}},_cancelClick:function(){this.hide()},_okClick:function(){return this._dialog._standby&&this._dialog.showLoading(),null===this.attachment.url||""===this.attachment.url.trim()?void m.showError(this.urlBlankMsg):null===this.attachment.description||""===this.attachment.description.trim()?void m.showError(this.urlBlankMsg):void this._saveAndHide()},_saveAndHide:function(){this._dialog._standby&&this._dialog.showLoading();var a=this;window.setTimeout(function(){var b=a.attachment;a._store.saveNewEntity(b,function(a){dojo.publish("/entity/attachment/create",a),this.hide()},a._requestFail,a)},10)},_requestFail:function(a){m.showError(this.requestFailedMsg),this.hide()}})})},"Sage/Utility/File/GoogleDocPicker":function(){define(["dijit/_Widget","dijit/tree/TreeStoreModel","dijit/Dialog","dijit/Tree","dojo/window","dojo/data/ItemFileReadStore","dojo/i18n!./nls/GoogleDocPicker","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){var i=h("Sage.Utility.File.GoogleAuthModule",null,{couldNotOpenWindowMsg:"Could not open authentication window - please check your popup blocker settings.",scope:"",authUrl:"",constructor:function(a){this.scope=a.authUrl,dojo.mixin(this,a),dojo.mixin(this,g)},login:function(){var a=this;this._loadGoogleLibrary(function(){google.load("gdata","2.0",{callback:function(){if(google.gdata.onLoad(),google.accounts.user.checkLogin(a.authUrl))a.onLoggedIn();else{window.googleAuthModule=a;var b=window.open("GoogleAuth.aspx","_blank");setTimeout(function(){var c=!1;void 0===b?c=!0:b&&b.closed?c=!1:b&&!b.outerHeight&&(c=!0),c&&alert(a.couldNotOpenWindowMsg)},3e3)}}})})},logout:function(){google.accounts.user.checkLogin(this.authUrl)&&google.accounts.user.logout()},onLoggedIn:function(){},_loadGoogleLibrary:function(a){if("undefined"!=typeof google)a();else{var b="googleCallback_"+String(Math.random()).replace(/^0\./,"");window[b]=a;var c=document.createElement("script");c.src="https://www.google.com/jsapi?callback="+b,c.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(c)}}});return h("Sage.Utility.File.GoogleDocPicker",a,{id:"",googleDocumentsTitle:"Google Documents",pick:function(){var a=new i({authUrl:"https://docs.google.com/feeds"});dojo.connect(a,"onLoggedIn",this,this._onLoggedInHandler),a.login()},_onLoggedInHandler:function(){new google.gdata.client.GoogleService("writely","mytest").getFeed("https://docs.google.com/feeds/documents/private/full?showfolders=true",dojo.hitch(this,"_displayFeed"),function(a){},void 0,!0)},_displayFeed:function(a){var e=this._parseFeed(a);dojo.ready(dojo.hitch(this,function(){var a=new f({data:{items:[{children:e,title:"Root",root:!0}]}}),h=new b({store:a,childrenAttrs:["children"],labelAttr:"title",query:{}}),i=new d({model:h,showRoot:!1,openOnDblClick:!0});dojo.connect(i,"onDblClick",dojo.hitch(this,function(a,b,c){this.onDocumentSelected(a.title,a.url)})),dojo.connect(i,"onLoad",dojo.hitch(this,function(){var a=new c({title:g.googleDocumentsTitle,content:i});a.startup(),a.containerNode.style.maxHeight=dojo.window.getBox().h/3+"px",a.containerNode.style.minWidth="200px",a.containerNode.style.overflow="auto",a.show()}))}))},_parseFeed:function(a){var b=[],c=a.feed.entry;if(c)for(var d=0;d<c.length;d++){var e=c[d],f={id:e.id.$t,title:e.title.$t,feedentry:e};dojo.some(e.category,function(a){if("http://schemas.google.com/g/2005#kind"==a.scheme)return f.type=a.label,!0}),b.push(f)}b.sort(function(a,b){return a.title>b.title?1:a.title<b.title?-1:0});var g=b.slice(0),h=0;return dojo.forEach(b,function(a,c){var d=!1;dojo.forEach(a.feedentry.link,function(c){"http://schemas.google.com/docs/2007#parent"==c.rel&&dojo.some(b,function(b){c.href==b.id&&(d=!0,b.children||(b.children=[]),b.children.push(a))}),"alternate"==c.rel&&(a.url=c.href)}),d&&(g.splice(c-h,1),h++)}),g},onDocumentSelected:function(a,b){}})})},"Sage/UI/SLXPreviewGrid/Filter/DateRange":function(){define(["dijit/form/DateTextBox","dijit/_Widget","dijit/_Templated","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.SLXPreviewGrid.Filter.DateRange",[b,c,d],{templateString:"<div><input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteFrom'> - <input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteTo'></div>",widgetsInTemplate:!0,getQuery:function(){var a=function(a,b){if(!a)return"";a.constructor!==Date&&(a=Date.parse(a)),b&&a.setUTCDate(a.getUTCDate()+1);var c=function(a){return a<10?"0"+a:a};return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"},b=a(this.dteFrom.get("value")),c=a(this.dteTo.get("value"),!0),d="";if(b&&(d=this.field+" ge '"+b+"'"),c&&(d&&(d+=" and "),d+=this.field+" lt '"+c+"'"),this.params.getTimeless&&d){var e=!1;d="(("+d+" and not Timeless) or (";var f=Sage.Utility.Activity.formatTimelessStartDate(this.dteFrom.get("value")),g=Sage.Utility.Activity.formatTimelessEndDate(this.dteTo.get("value"));f&&(d+=this.field+" gt '"+f+"'",e=!0),g&&(e&&(d+=" and "),d+=this.field+" lt '"+g+"'"),d+=" and Timeless))"}return d},reset:function(){this.dteFrom.set("value",0),this.dteTo.set("value",0)},getState:function(){return{dFrom:this.dteFrom.get("value"),dTo:this.dteTo.get("value")}},applyState:function(a){a&&(a.dFrom&&this.dteFrom.set("value",a.dFrom),a.dTo&&this.dteTo.set("value",a.dTo))}})})},"Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin":function(){define(["dojo/_base/declare"],function(a){return a("Sage.UI.SLXPreviewGrid.Filter._previewGridFilterMixin",null,{getQuery:function(){var a=this.get("value");return a?"upper("+this.field+") like '%"+a.replace("'","''").toUpperCase()+"%'":""},reset:function(){this.set("value","")},getState:function(){return{value:this.get("value")}},applyState:function(a){a&&this.set("value",a.value||"")}})})},"Sage/UI/SLXPreviewGrid/Filter/Text":function(){define(["dijit/form/TextBox","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(a,b,c){return c("Sage.UI.SLXPreviewGrid.Filter.Text",[a,b],{postMixInProperties:function(){this.type="text",this.style="width: 200px",this.inherited(arguments)},reset:function(){this.set("displayedValue",""),this.set("value","")}})})},"Sage/Utility/Workspace":function(){define(["dojo/_base/declare","dijit/registry"],function(a,b){var c=a("Sage.Utility.Workspace",[],{});return c.getDetailTabWorkspaceContainer=function(){var a=b.byId("tabContent");return a||b.byId("mainContentDetails")},c})},"Sage/UI/GridView":function(){require({cache:{"url:Sage/UI/templates/GridView.html":'[\r\n\'<div data-dojo-type="dijit.layout.ContentPane" class="HundredPercentHeight abstractGrid" >\',\r\n    \'<div data-dojo-attach-point="headerNode" class="list-panel-tbar" role="toolbar">\',\r\n        \'<span dojoattachpoint="labelSection"></span>\',\r\n        \'<span dojoattachpoint="abstractGrid_toolBar" class="right-tools"></span>\',\r\n    \'</div>\',\r\n    \'<div dojoattachpoint="abstractGrid_filters"></div>\',\r\n    \'<div dojoattachpoint="abstractGrid_grid" class="gridcontainer"></div>\',\r\n\'</div>\'\r\n]'}}),define(["dijit/_Widget","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom","dojo/string","dojo/on","dojo/text!./templates/GridView.html","Sage/UI/ImageButton","dojo/i18n!./nls/GridView","Sage/UI/Dialogs","Sage/_Templated","Sage/Utility","Sage/UI/SDataLookup","Sage/UI/ComboBox","Sage/UI/Controls/Grid","put-selector/put","dojo/mouse","dojo/dom-class","dojo/query","dojo/dom-style","dojo/aspect","Sage/UI/Controls/GridParts/Columns/CheckBox","Sage/UI/SLXPreviewGrid/FilterPanel","Sage/Store/SData","dojo/store/Memory","Sage/Store/WritableStore","dojo/_base/connect","dojo/_base/event","dojo/dom-attr","dijit/registry"],function(_Widget,declare,lang,array,domConstruct,dom,dojoString,on,template,ImageButton,nlsResource,dialogs,_Templated,Utility,SDataLookup,ComboBox,Grid,put,mouse,domClass,query,domStyle,aspect,CheckBox,FilterPanel,SDataObjectStore,Memory,WritableStore,connect,event,domAttr,registry){var widget=declare("Sage.UI.GridView",[_Widget,_Templated],{widgetsInTemplate:!0,store:!1,mode:"",grid:!1,rowCount:0,show_ToolBar:!0,help_keyword:!1,help_location:!1,tools:[],gridLabel:"",query:"",showRecordCount:!1,mixins:[],widgetTemplate:new Simplate(eval(template)),_filter:null,filterText:"Filter",region:"center",_applyFilters:!1,_dataChangeConnections:[],constructor:function(a){lang.mixin(this,nlsResource),this.mode=Utility.getModeId(),a.storeOptions&&a.storeOptions.isInsertMode&&(this.mode="insert"),"insert"!==this.mode&&this.listenForPageSave(),this.populateUserOptions(),connect.connect(this,"onKeyDown",this.customKeyDown)},listenForPageSave:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.addListener(a.ON_SAVE,this.saveChanges,this)},removePageSaveListener:function(){var a=Sage.Services.getService("ClientBindingManagerService");a&&a.removeListener(a.ON_SAVE,this.saveChanges)},applyEditOnEnter:function(a){13!=a.charOrCode&&13!=a.keyCode||(this.doApplyEdit(),this.edit.apply(),event.stop(a))},customKeyDown:function(a){this.applyEditOnEnter(a)},saveChanges:function(a){this.grid.save().then(lang.hitch(this,function(a){this.markClean(),this.refresh()})).then(function(b){a&&a(b)})},cancelChanges:function(){this.markClean(),this.grid.revert()},createGridView:function(){if(this.slxContext&&(this.context=this.slxContext,this.tabId=this.slxContext.tabId),!0!==this.hideHeaderView?this._createGridHeader():domClass.add(this.headerNode,"display-none"),this._filter){var a=this._filter?this._filter.getQuery():null;this.query=a?this.query+" "+a:""}var b={query:this.query,placeHolder:this.abstractGrid_grid};this.columns&&(b.columns=this.columns),this._setEditable(),b.store=this.store=this.getStore(),this.storeOptions&&(b.storeOptions=this.storeOptions),this.mode&&(b.mode=this.mode),this.data&&(b.data=this.data),this.rowsPerPage&&(b.rowsPerPage=this.rowsPerPage),this.selectionMode&&(b.selectionMode=this.selectionMode),this.columnHiding&&(b.columnHiding=this.columnHiding),this.columnReordering&&(b.columnReordering=this.columnReordering),this.columnResizing&&(b.columnResizing=this.columnResizing),this.rowSelection&&(b.rowSelection=this.rowSelection),this.dijitRegistry&&(b.dijitRegistry=this.dijitRegistry),this.pagination&&(b.pagination=this.pagination),this.sort&&(b.sort=this.sort),this.indirectSelection&&(b.indirectSelection=this.indirectSelection),this.previewField&&(b.previewField=this.previewField),this.fullNoteField&&(b.fullNoteField=this.fullNoteField),this.keyboardNavigation&&(b.keyboardNavigation=this.keyboardNavigation),this.minRowsPerPage&&(b.minRowsPerPage=this.minRowsPerPage),this.maxRowsPerPage&&(b.maxRowsPerPage=this.maxRowsPerPage),this.rowsPerPage&&(b.rowsPerPage=this.rowsPerPage),this.keepScrollPosition&&(b.keepScrollPosition=this.keepScrollPosition),this.farOffRemoval&&(b.farOffRemoval=this.farOffRemoval),this.pagingDelay&&(b.pagingDelay=this.pagingDelay);var c=Sage.Services.getService("ClientEntityContext"),d=c.getContext(),e=d&&d.DisplayName?d.DisplayName+"_":"";b.id=e+(this.id?this.id:"")+"_gridView";var f=this.grid=new Grid(b);this.onDataChange&&(this.grid.onDataChange=lang.hitch(this,function(a){a.cell.row.data[a.cell.column.field]=a.value;var b=lang.clone(a.cell.row.data),c=a.cell.row.data,d=a.cell.column.field,e=a.oldValue,f=a.value;this.onDataChange(c,d,e,f,a,this);for(var g in b)c.hasOwnProperty(g)&&("insert"===this.mode?(a.grid.updateDirty(a.rowId,g,b[g]),this.store.setValue(c,g,c[g])):"object"!=typeof c[g]&&b[g]!=c[g]&&a.grid.updateDirty(a.rowId,g,c[g]));this.update(a)})),aspect.after(this.grid,"_onDataChange",lang.hitch(this,function(a,b){var c=b[0];"insert"!==this.mode&&!1!==this.shouldPublishMarkDirty&&(c.cell&&c.cell.widget&&!0===c.cell.widget.returnObject?c.oldValue.$key!==c.value.$key&&this.markDirty():c.oldValue!==c.value&&this.markDirty())})),aspect.after(this.grid,"_onLoadComplete",lang.hitch(this,function(a,b){this.labelSection.innerHTML=dojoString.substitute(this.totalRecordCountLabel,[this.grid.totalRecords]),this.rowCount=this.grid.totalRecords})),this.dirtyDataMsgID=this.tabId+"_dirtydatamsg",domConstruct.empty(this.placeHolder),domConstruct.place(this.domNode,this.placeHolder),this.classNames&&domClass.add(this.abstractGrid_grid,this.classNames),f.resize(),connect.publish("/ui/gridView/created",this)},update:function(a){var b=this.grid.reRenderRow(a.cell.row.data);domConstruct.place(b.childNodes[0],a.cell.row.element.childNodes[0],"replace");for(var c=this.grid._grid._editorsPendingStartup,d=c.length;d--;)this.startupEditor.apply(null,c[d])},startupEditor:function(a,b,c,d){var e=b.grid;a.domNode&&(a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",d),setTimeout(function(){a._dgridIgnoreChange=!1},0)),a._dgridLastValue=d,e._activeCell&&(e._activeValue=d,on.emit(c,"dgrid-editor-show",{grid:e,cell:e.cell(c),column:b,editor:a,bubbles:!0,cancelable:!1}))},_getToolbarPlaceHolder:function(){var a,b=domConstruct.create("span",{class:"grid-unsaveddata-msg",id:this.dirtyDataMsgID,style:"display:none;",content:this.editable?this.unsavedDataText:""}),c=this.abstractGrid_toolBar;if(this.context&&this.context.workspace)switch(this.context.workspace){case"Sage.Platform.WebPortal.Workspaces.Tab.TabWorkspace":if("insert"!==this.mode){var d=query("#element_"+this.tabId+" td.tws-tab-view-title");d.length>0&&domConstruct.place(b,d[0])}a=["element_",this.tabId].join(""),c=query(["#",a," td.tws-tab-view-tools-right"].join(""));break;case"Sage.Platform.WebPortal.Workspaces.MainContentWorkspace":"insert"!==this.mode&&domConstruct.place(b,query("#"+this.tabId+" span.mainContentHeaderTitle")[0]),a=this.tabId,c=query("#"+a+" td.mainContentHeaderToolsRight");break;case"Sage.Platform.WebPortal.Workspaces.DialogWorkspace":c=query("td.dialog-tools-right")}return c.length>0?c[0]:c},_createOwnToolbar:function(a){for(var b=Sage.Services.getService("RoleSecurityService"),c=(this.abstractGrid_toolBar,0);c<this.tools.length;c++){var d=this.tools[c];if(!d.appliedSecurity||""===d.appliedSecurity||!b||b.hasAccess(d.appliedSecurity)){var e=!1;if("string"==typeof d)e=this._createDefaultBtns(d,1);else if(d.type){var f=null;"Sage.UI.SDataLookup"===d.type&&(f=d.controlConfig||d,e=new SDataLookup(f),this.lookupControl=e),"Sage.UI.ComboBox"===d.type&&(f=d.controlConfig||d,e=new ComboBox(f),this.lookupControl=e)}else e=new ImageButton({icon:d.icon||"",imageClass:d.imageClass||"",id:d.id,onClick:lang.hitch(d.scope||this,d.handler),tooltip:d.alternateText||d.tooltip});e&&this._addToolBarItem(e,c+1,a)}}},_createGridHeader:function(){this.previewField&&this.tools.unshift({id:"TogglePrvRows_"+(this.tabId?this.tabId:""),imageClass:"fa fa-bars",tooltip:nlsResource.toggleRows,handler:this.togglePreviewRows,scope:this}),"insert"!==this.mode&&(this._filter=this._buildFilter());var a=this._getToolbarPlaceHolder();this.tabId&&""!==this.tabId?(this._addToolsToWorkspaceToolbar(a),this.currentEntityId=Utility.getCurrentEntityId()):this._createOwnToolbar(a)},_addToolsToWorkspaceToolbar:function(a){if(!this.readOnly)for(var b,c,d=Sage.Services.getService("RoleSecurityService"),e=0;e<this.tools.length;e++){b="";var f=this.tools[e];if(void 0!==f.mergeControlId&&0!==f.mergeControlId.length&&(c=dojo.query("[id$="+f.mergeControlId+"]",dojo.byId("element_"+this.tabId))[0],b=f.mergePosition.toLowerCase()),c||(c=a,b=""),("insert"!==this.mode||f.displayInInsert)&&(!f.appliedSecurity||""===f.appliedSecurity||!d||d.hasAccess(f.appliedSecurity))){var g=!1;if("string"==typeof f)g=this._createDefaultBtns(f);else if(f.type&&"Sage.UI.SDataLookup"===f.type){var h=f.controlConfig||f;g=new SDataLookup(h),this.lookupControl=g}else g=new ImageButton({icon:f.icon||"",imageClass:f.imageClass||"",id:f.id,onClick:lang.hitch(f.scope||this,f.handler),tooltip:f.alternateText||f.tooltip});g&&this._addToolBarItem(g,b.length>0?b:e+1,c)}}},_addToolBarItem:function(a,b,c){a.domNode?b?domConstruct.place(a.domNode,c,b):domConstruct.place(a.domNode,c):b?domConstruct.place(a,c,b):domConstruct.place(a,c)},getSelectedRowData:function(){return this.grid.getSelectedRowData()},getSelectedRowId:function(){return this.grid.getSelectedRowId()},showHelp:function(a,b){Utility.openHelp(a,b)},refresh:function(){this.markClean(),this.grid.refresh()},populateUserOptions:function(){if(!this.indirectSelection){var a=Sage.Services.getService("UserOptions");a&&a.get&&a.get("GroupCheckboxEnabled","GroupGridView",lang.hitch(this,function(a){var b=a&&a.value;this.indirectSelection="True"===b||"T"===b}),null,this,!1)}},_buildFilter:function(){for(var a=[],b=0;b<this.columns.length;b++){var c=this.columns[b];if(c.filterConfig){var d=lang.mixin(lang.clone(c),c.filterConfig);d.label||(d.label=c.name),a.push(d)}}if(0===a.length)return this._filtersApplied=!1,null;var e=new FilterPanel({id:this.id+"_filterpanel",region:"top",filterConfig:a,style:"display: none"});return this.tools.unshift({id:this.id+"_Filter",imageClass:"icon_Filter_16x16",tooltip:this.filterText,handler:lang.hitch(this,function(){this._filter.toggle()})}),domConstruct.place(e.domNode,this.abstractGrid_filters),e.onFilterApply=lang.hitch(this,function(a){this.grid.setFilter(a)}),e},_createDefaultBtns:function(a,b){var c;switch(a){case"add":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=plus_16x16",tooltip:nlsResource.addText,id:this.id+"_addBtn",onClick:lang.hitch(this,function(){this.addItem?this.addItem():this.addNew&&this.addNew()})});break;case"delete":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Delete_16x16",tooltip:nlsResource.deleteText,id:this.id+"_delBtn",onClick:lang.hitch(this,function(){this.removeItem?this.removeItem():this.deleteSelected&&this.deleteSelected()})});break;case"save":c=new ImageButton({imageClass:"icon_Save_16x16",tooltip:nlsResource.saveText,id:this.id+"_saveBtn",onClick:lang.hitch(this,function(){this.saveChanges()})});break;case"cancel":c=new ImageButton({imageClass:"icon_Reset_16x16",tooltip:nlsResource.cancelText,id:this.id+"_cancelBtn",onClick:lang.hitch(this,function(){this.cancelChanges()})});break;case"edit":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Edit_Item_16x16",tooltip:nlsResource.editText,id:this.id+"_editBtn",onClick:lang.partial(this.editItem,this)});break;case"help":c=new ImageButton({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Help_16x16",tooltip:nlsResource.helpText,id:this.id+"_helpBtn",onClick:this.showHelp})}return c},markClean:function(){if(this.isDirty=!1,this.dirtyDataMsgID){dom.byId(this.dirtyDataMsgID)&&domStyle.set(dom.byId(this.dirtyDataMsgID),"display","none");var a=Sage.Services.getService("ClientBindingManagerService");a&&a.clearDirtyAjaxItem(this.id)}},markDirty:function(){this.isDirty=!0;var a=dom.byId(this.dirtyDataMsgID);a&&domStyle.set(a,"display","inline");var b=Sage.Services.getService("ClientBindingManagerService");b&&b.addDirtyAjaxItem(this.id)},getStore:function(){if(this.store)return this.store;if(!this.storeOptions)throw"Grid configuration is missing store";this.storeOptions.isInsertMode="insert"===this.mode,this._storePrepareQuery();var a="insert"!==this.mode?new SDataObjectStore(this.storeOptions):new WritableStore(this.storeOptions);return a.onDataChange&&(this._dataChangeConnections.push(connect.connect(a,"setValue",a.onDataChange)),this._dataChangeConnections.push(connect.connect(a,"saveNewEntity",a.onDataChange)),this._dataChangeConnections.push(connect.connect(a,"deleteItem",a.onDataChange)),this._dataChangeConnections.push(connect.connect(a,"createItem",a.onDataChange))),a},_addToListUnique:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return;b.push(a)},_storePrepareQuery:function(){var a,b,c,d,e,f,g,h=this.columns;for(this.store?(a=this.store.select=this.store.select||[],d=this.store.include=this.store.include||[]):(a=this.storeOptions.select||[],d=this.storeOptions.include||[]),this.storeOptions.select.push("Id"),this.previewField&&this.storeOptions.select.push(this.previewField),b=0;b<a.length;b++)a[b]=a[b].replace(/\./g,"/");for(b=0;b<h.length;b++){if(h[b].field&&(g=h[b].field,this._addToListUnique(g.replace(/\./g,"/"),a),h[b].editorArgs&&h[b].editorArgs.lookupOptions&&h[b].editorArgs.lookupOptions.field)){var i=g===h[b].editorArgs.lookupOptions.field?h[b].editorArgs.lookupOptions.field:dojoString.substitute("${0}/${1}",[g,h[b].editorArgs.lookupOptions.field]);this._addToListUnique(i.replace(/\./g,"/"),a)}if(h[b].field.indexOf(".")>0)for(e=h[b].field.split("."),f="",c=0;c<e.length-1;c++)f+=e[c],this._addToListUnique(f,d),f+="/"}},addAssociatedItems:function(a,b,c,d){var e=this;"insert"!==Utility.getModeId()&&this.isDirty?dialogs.raiseQueryDialog("Infor CRM",this.dirtyDataMessage,function(f){f&&e.addSelectedItems(a,b,c,d)},this.okText,this.cancelText):e.addSelectedItems(a,b,c,d)},addSelectedItems:function(a,b,c,d){for(var e=[],f=this,g=0;g<a.length;g++){var h=!1;for(var i in f.store.data){var j=f.store.data[i];j[c]&&j[c].$key==a[g].$key&&(h=!0)}if(!h){var k={};"insert"!==Utility.getModeId()&&(k[b]={$key:Utility.getCurrentEntityId()}),k[c]={},Utility.extend(k[c],a[g]),delete k.$key,delete k.$name,delete k.$url,e.push(k)}}e.length>0&&f.createItems(e,function(){"insert"!==Utility.getModeId()&&__doPostBack("MainContent","")}),d&&d.lookupDialog.hide()},createItems:function(a,b){if(lang.isArray(a))for(var c=this.grid.store,d=a.length,e=function(a){
this.currentCount=this.currentCount+1,"undefined"!=typeof console&&(a&&void 0!==a&&a.getResponseHeader||a&&void 0!==a&&a.$httpStatus),this.currentCount===this.totalCount&&(this.grid.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(this.grid))},f={grid:this,totalCount:d,currentCount:0,onResponse:e,onComplete:b||null},g=0;g<a.length;g++)c.createItem(a[g],f);else dialogs.showError(this.createItemsInvalidArrayText)},destroy:function(){array.forEach(this._dataChangeConnections,function(a){connect.disconnect(a)}),this.lookupControl&&this.lookupControl.destroy(!1),this.grid&&this.grid.destroy(!1),this.store&&this.store.destroy&&this.store.destroy(!1),this._registeredWidgets&&(array.forEach(this._registeredWidgets,function(a){a.destroy(!1)}),this._registeredWidgets=null),this.removePageSaveListener(),this.inherited(arguments)},deleteSelected:function(a){var b=this.grid.getSelectedRowData();if(0===b.length)return void dialogs.showInfo(nlsResource.noSelectionsText);if("insert"===this.mode||this._checkPageExitWarningMessage()){var c=this,d={title:"Infor CRM",query:dojoString.substitute(this.confirmDeleteFmtTxt,[b.length]),callbackFn:function(d){c.deleteCallback(d,a,b)},yesText:this.yesText,noText:this.noText};dialogs.raiseQueryDialogExt(d)}},deleteCallback:function(a,b,c){if(a){var d=this.grid,e=d.store;d.clearSelection();var f=function(a,b){a&&a.length&&dialogs.showError(a),d.refresh(),"function"==typeof this.onComplete&&this.onComplete.call(d)},g={grid:d,onResponse:f,onResponseExceptionMsg:"",onComplete:b||null};if(e.deleteItem)e.deleteItem(c,g);else if(e.data){for(var h=0;h<c.length;h++)e.remove(c[h].id);d.refresh()}}},_setEditable:function(){var a,b=!0;if(this.appliedSecurity){var c=Sage.Services.getService("RoleSecurityService");c&&(b=c.hasAccess(this.appliedSecurity))}if(this.readOnly&&(b=!1),b){for(a=0;a<this.columns.length;a++)if(this.columns[a].editable){this.editable=!0;break}}else{for(a=0;a<this.columns.length;a++)this.columns[a].editable&&(this.columns[a].editable=!1);this.editable=!1}},_checkPageExitWarningMessage:function(){var a=!0;if(this.isDirty){var b=Sage.Services.getService("ClientBindingManagerService");a=confirm(b._PageExitWarningMessage)}return a},togglePreviewRows:function(){this.grid.togglePreviewRows()},resize:function(){this.grid.resize()},_refresh:function(){this.refresh()},onRefresh:function(){},addNew:function(a){this.grid.addItem(a)},showLoading:function(){},setupHeader:function(){this._createGridHeader()},_getRecordCount:function(){return this.rowCount}});return widget})},"Sage/UI/Controls/GridParts/Columns/CheckBox":function(){define(["dojo/_base/declare","dijit/form/CheckBox"],function(a,b){return a("Sage.UI.Controls.GridParts.Columns.CheckBox",b,{_getValueAttr:function(){return this.checked}})})},"Sage/UI/SLXPreviewGrid/FilterPanel":function(){define(["dijit/form/Button","dijit/_Widget","Sage/Utility/_LocalStorageMixin","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.SLXPreviewGrid.FilterPanel",[b,c],{_filters:null,_state:{},STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_FILTERINFO:"_FILTER_INFO_",applyText:"Apply",resetText:"Reset",constructor:function(){this._filters=[]},postMixInProperties:function(){dojo.mixin(this,d),this._loadState(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.domNode.className="filterPanel";var b=document.createElement("div");b.style.styleFloat=b.style.cssFloat="left",b.style.width="39%";var c=document.createElement("div");c.style.styleFloat=c.style.cssFloat="left",c.style.width="39%";var d=this._state.filterStates||{},e=b;dojo.forEach(this.filterConfig,function(a,f,g){e===b&&f+1>g.length/2&&(e=c);var h=document.createElement("div");h.className="filterItem";var i=this._createFilter(a);if(d[a.field]&&i.applyState&&i.applyState(d[a.field]),this._filters.push(i),a.label){var j=document.createElement("label");j.appendChild(document.createTextNode(a.label+":")),j.className="filterPanelLabel",j.htmlFor=i.domNode.id,h.appendChild(j)}h.appendChild(i.domNode),e.appendChild(h)},this);var f=document.createElement("div");f.style.styleFloat=f.style.cssFloat="left",f.style.width="20%",f.className="filterButtonPanel";var g=new a({label:this.applyText});f.appendChild(g.domNode),dojo.connect(g,"onClick",this,"_applyFilter");var h=new a({label:this.resetText});f.appendChild(h.domNode),dojo.connect(h,"onClick",this,"_resetFilter"),dojo.connect(this.domNode,"keydown",this,function(a){13===a.keyCode&&this._applyFilter()}),this.domNode.appendChild(b),this.domNode.appendChild(c),this.domNode.appendChild(f)},startup:function(){this.inherited(arguments),dojo.forEach(this._filters,function(a){a.startup()}),this._state.visible&&!0===this._state.visible&&this.toggle()},destroy:function(){dojo.forEach(this._filters,function(a){a.destroy(!1)}),dojo.forEach(dijit.findWidgets(this.domNode),function(a){a.destroy(!1)}),this.inherited(arguments)},getQuery:function(){var a=[];return dojo.forEach(this._filters,function(b){var c=b.getQuery();c&&a.push(c)}),a.length>0?a.join(" and "):null},toggle:function(){"none"===this.domNode.style.display?(this.domNode.style.display="block",this._state.visible=!0):(this.domNode.style.display="none",this._state.visible=!1),this._saveState()},onFilterApply:function(a){},_createFilter:function(a){return new(0,a.widgetType)({field:a.field,lookupGridOptions:a.lookupGridOptions,lookupStoreOptions:a.lookupStoreOptions,lookupStructure:a.lookupStructure,name:a.label})},_applyFilter:function(){for(var a={},b=0;b<this._filters.length;b++){var c=this._filters[b];c.getState&&(a[c.field]=c.getState())}this._state.filterStates=a,this._saveState(),this.onFilterApply(this.getQuery())},_resetFilter:function(){dojo.forEach(this._filters,function(a){a.reset()}),this._applyFilter()},_saveState:function(){var a=this.STORE_KEY_FILTERINFO+this.id;this.saveToLocalStorage(a,this._state,this.STORE_NS)},_loadState:function(){var a=this.STORE_KEY_FILTERINFO+this.id;this._state=this.getFromLocalStorage(a,this.STORE_NS)||{}}})})},"Sage/Store/WritableStore":function(){define(["Sage/Store/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Store.WritableStore",a,{isInsertMode:!1,_isPostback:!1,constructor:function(a){d.mixin(this,a),this.features["dojo.data.api.Write"]=!0,this.features["dojo.data.api.Notification"]=!0,this.identityAttributes=["$cacheID"],this.dirtyDataCache={isDirty:!1},this.singleResourceRequest=null,a.hasOwnProperty("isInsertMode")||(this.isInsertMode="insert"===b.getModeId())},entry:"",query:function(a,c){var d={};d.$resources=[];var e=null;if(!this._isPostback&&this.dataCarrierId){var f=dojo.query([".",this.dataCarrierId].join(""));if(f[0].value.length>0){var g=dojo.fromJson(f[0].value),h=g.$resources.sort(b.dynamicSort(c.sort[0].attribute,c.sort[0].descending));this.addItemsToCache(a,h)}}for(e in this.data)this.data.hasOwnProperty(e)&&"query"!==e&&d.$resources.push(this.data[e]);if(this.setContext(a),this.verifyService(),this._isPostback=!0,this.isInsertMode){var i=this;return window.setTimeout(function(){i.onSuccess(a,d)},5),d.$resources}},onSuccess:function(a,b){""===this.entry&&(this.entry=b),a.onBegin&&a.onBegin.call(a.scope||this,b.$resources.length,a),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a)},addToCache:function(a,b,c){var d;c=void 0===c?11*Math.random():c,this.isInsertMode&&(b.$cacheID=(new Date).getTime()+c),d=this.getIdentity(b),this.data[d]=b},addItemsToCache:function(a,b){for(var c=0;c<b.length;c++)this.addToCache(a,b[c],c)},clearCache:function(){this.inherited(arguments),this.clearDirtyDataCache()},clearDirtyDataCache:function(){for(var a in this.dirtyDataCache)"isDirty"!==a&&delete this.dirtyDataCache[a];this.dirtyDataCache.isDirty=!1},isItem:function(a){var b=this.getIdentity(a);return!(!b||""===b)&&this.data.hasOwnProperty(b)},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(!this.isItem(a.item))throw new Error("Unable to load "+a.item)},getValues:function(a,b){return this.isItem(a)&&"string"==typeof b?(a[b]||[]).slice(0):[]},hasAttribute:function(a,b){return!(!this.isItem(a)||"string"!=typeof b)&&b in a},close:function(){this.clearCache()},deleteItem:function(a,b){var c=this.getIdentity(a);c&&""!==c&&delete this.data[c];var d={};d.scope=b||this;var e=function(){"function"==typeof this.onResponse&&this.onResponse.call(this)};d.success=e,d.success.call(d.scope)},isDirty:function(a){if(a){var b=this.getIdentity(a);if(b&&""!==b)return this.dirtyDataCache.hasOwnPropery(b)}return this.dirtyDataCache.isDirty},newItem:function(a){var b=this.createTemplateRequest();b&&b.read({success:function(b){a&&a.onComplete&&"function"==typeof a.onComplete&&a.onComplete.call(a.scope||this,b)},failure:this.requestTemplateFailure,scope:this})},createTemplateRequest:function(){var a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);return this.resourceKind&&""!==this.resourceKind&&a.setResourceKind(this.resourceKind),a},requestTemplateFailure:function(){},saveNewEntity:function(a,b,c,d){this.addToCache(d,a),b()},createItem:function(a,b){var c={};c.scope=b||this,c.scope.store=this;var d=function(a){"function"==typeof this.onResponse&&this.onResponse.call(this,a)};c.success=d,this.addToCache(b,a),c.success.call(c.scope,a)},revert:function(){this.clearDirtyDataCache(),this.onDataReset()},setValue:function(a,c,d){var e=this.getValue(a,c,"");return b.setValue(a,c,d),this.onSet(a,c,e,d),!0},setValues:function(a,b,c){alert("not implemented - setValues")},unsetAttribute:function(a,b){alert("not implemented - unsetAttribute")},dataCacheToArray:function(){var a=[];for(var b in this.data)this.data.hasOwnProperty(b)&&"query"!==b&&a.push(this.data[b]);return a},onDataChange:function(){this.clearDirtyDataCache();var a=dojo.query([".",this.dataCarrierId].join(""));a[0]&&(this.entry.$resources=this.dataCacheToArray(),a[0].value=JSON.stringify(this.entry))},onSet:function(a,b,c,d){},onNew:function(a,b){},onDelete:function(a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(a,b){},onItemNotSaved:function(a,b){}})})},"Sage/Store/BaseSDataStore":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d){return c("Sage.Store.BaseSDataStore",null,{queryName:null,constructor:function(a){d.mixin(this,a),this.features={"dojo.data.api.Read":!0},this.identityAttributes||(this.identityAttributes=[this.identityAttribute||"$key"]),this.labelAttributes||(this.labelAttributes=["$descriptor"]),this.features["dojo.data.api.Identity"]=!0,this.data={query:""}},fetch:function(a){if(!this.isNewContext(a)&&this.feed)return void this.onSuccess(a,this.feed);this.setContext(a),a.count===1/0&&(a.count=500);var b=(a.count-0||this.pageSize,a.start-0||1);b>1&&(b+=1),this.verifyService();var c=this.getCollectionRequestObj(a);if(!c)return void(a.onError&&a.onError.call(a.scope||this,"Invalid data url",a));c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,isNaN(b)?1:b);var e="";if(this.query&&"function"!=typeof this.query&&(this.directQuery||(this.directQuery=this.query)),this.directQuery&&(a.query||(a.query={}),d.mixin(a.query,this.directQuery)),a.query)if("function"==typeof a.query)e=a.query();else if("string"==typeof a.query)e=a.query;else if("object"==typeof a.query)for(var f in a.query)if("fn"===f)e=a.query.fn.call(a.query.scope||this);else if("conditions"===f)"string"==typeof a.query.conditions&&""!==a.query.conditions&&(e+=e&&e.length>0?" and "+a.query.conditions:a.query.conditions);else if("scope"!==f&&a.query.hasOwnProperty(f)){var g=[f," like ","'",a.query[f].replace("*","%"),"'"].join("");e+=e.length>0?" and "+g:g}if(a.evaluatedQuery=e||"",e&&""!==e&&c.setQueryArg("where",e),this.select&&this.select.length>0&&c.setQueryArg("select",this.select.join(",")),this.include&&this.include.length>0&&c.setQueryArg("include",this.include.join(",")),this.sort&&(a.sort=a.sort||[],dojo.forEach(this.sort,function(b){0===dojo.filter(a.sort,function(a){return b.attribute==a.attribute}).length&&a.sort.push(b)})),void 0!==a.resourcePredicate&&c.getUri().setCollectionPredicate(a.resourcePredicate),this._setQueryArgsOnRequest(a.queryArgs,c),a.sort&&a.sort.length>0){var h=[];dojo.forEach(a.sort,function(a){a.descending?this.push(a.attribute+" desc"):this.push(a.attribute)},h),c.setQueryArg("orderBy",h.join(","))}this.beforeRequest&&"function"==typeof this.beforeRequest&&this.beforeRequest.call(a.scope||this,c);var i=c.read({success:d.hitch(this,this.onSuccess,a),failure:d.hitch(this,this.onFailure,a)});return{abort:d.hitch(this,this.abortRequest,i)}},getCollectionRequestObj:function(a){var b=this.queryName?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(this.queryName):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);return b.setResourceKind(this.resourceKind),b.setStartIndex(a.start+1),this.resourcePredicate&&"''"!==this.resourcePredicate&&b.getUri().setCollectionPredicate(this.resourcePredicate),this._setQueryArgsOnRequest(this.queryArgs,b),!a.count&&this.count&&(a.count=this.count),b.setCount(a.count),b},_setQueryArgsOnRequest:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b.setQueryArg(c,a[c])},abortRequest:function(a){this.service.abortRequest(a)},onSuccess:function(a,b){a.onBegin&&(void 0===b.$totalResults&&(b.$totalResults=b.$itemsPerPage+b.$startIndex),a.onBegin.call(a.scope||this,b.$totalResults,a)),a.onComplete&&a.onComplete.call(a.scope||this,b.$resources,a),this.addToCache(a,b)},onFailure:function(a,b,c){var d="An unknown exception occurred obtaining data.";if(b.responseText){var e=Sys.Serialization.JavaScriptSerializer.deserialize(b.responseText);d=dojo.isArray(e)?e[0].message:b.responseText}a&&a.onError?a.onError.call(a.scope||this,d,a):"string"==typeof d&&"undefined"!=typeof console&&b&&b.status&&(d+=" (HTTP status = %o; statusText = %o)")},setContext:function(a){this.context={start:a.start,count:a.count,query:a.query,queryOptions:a.queryOptions,sort:a.sort}},addToCache:function(a,b){var c,d,e;if(a.evaluatedQuery!==this.data.query&&(this.clearCache(),this.data.query=a.evaluatedQuery),b.$resources)for(c=0;c<b.$resources.length;c++)d=b.$resources[c],e=this.getIdentity(d),this.data[e]=d},clearCache:function(){for(var a in this.data)"query"!==a&&delete this.data[a];this.data.query=""},isNewContext:function(a){return"object"!=typeof this.context||(this.context.start!==a.start||this.context.count!==a.count)},verifyService:function(a){this.service||(this.service=b.getSDataService(a||"dynamic"))},getValue:function(b,c,d){return a.getValue(b,c)},getFeatures:function(){return this.features},getLabel:function(a){for(var b=[],c=0;c<this.labelAttributes.length;c++)a.hasOwnProperty(this.labelAttributes[c])&&b.push(a[this.labelAttributes[c]]);return b.join(" ")},getLabelAttributes:function(a){return this.labelAttributes},getIdentity:function(a){var b;if(a){var c=[];if("[object Array]"===Object.prototype.toString.call(a))for(var d=0;d<a.length;d++)for(b=0;b<this.identityAttributes.length;b++)a[d].hasOwnProperty(this.identityAttributes[b])&&c.push(a[d][this.identityAttributes[b]]);else for(b=0;b<this.identityAttributes.length;b++)a.hasOwnProperty(this.identityAttributes[b])&&c.push(a[this.identityAttributes[b]]);return c.join("")}},getIdentityAttributes:function(a){return this.identityAttributes},fetchItemByIdentity:function(a){if(this.data.hasOwnProperty(a.identity))a.onItem.call(a.scope||this,this.data[a.identity]);else{var b="Item with that key does not exist in the data cache: "+a.identity;a.onError&&a.onError.call(a.scope||this,{error:b})}},containsValue:function(b,c,d){return""!==a.getValue(b,c)}})})},"Sage/UI/Controls/Lookup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","Sage/UI/ConditionManager","Sage/UI/SDataLookup","dojo/dom-attr","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n!./nls/Lookup","dojo/text!./templates/Lookup.html","dojo/_base/declare"],function(a,b,c,d,e,f,g,h,i,j){return j("Sage.UI.Controls.Lookup",[c,a,b],{id:"lookup",config:null,selectedObject:null,showEntityInfoToolTip:!1,disabled:!1,required:!1,allowClearingResult:!1,buttonToolTip:"Find",closeButtonToolTip:"Remove",_tooltip:!1,_setSelectedObjectAttr:function(a){this.textbox.value=a?a.$descriptor:"",this.selectedObject=a,this._onChange(a)},_getSelectedObjectAttr:function(){return this.selectedObject},_setShowEntityInfoToolTipAttr:function(a){this.showEntityInfoToolTip=a,this.domNode&&(this._tooltip=!!a&&this._createToolTip())},_getShowEntityInfoToolTipAttr:function(){return this.showEntityInfoToolTip},_createToolTip:function(){return new g({connectId:[this.domNode],position:["below"],entityName:this.config.storeOptions.resourceKind,entityId:this.selectedObject&&this.selectedObject.$key?this.selectedObject.$key:""})},_setAllowClearingResultAttr:function(a){this.allowClearingResult=a,a?dojo.removeClass(this.clearButton,"display-none"):dojo.addClass(this.clearButton,"display-none")},_getAllowClearingResultAttr:function(){return this.allowClearingResult},_setDisabledAttr:function(a){this.disabled=a,f.set(this.focusNode,"disabled",a),this.focusNode.setAttribute("aria-disabled",a),a?(dojo.style(this.clearButton,"visibility","hidden"),dojo.style(this.clearButton,"display","none"),dojo.style(this.lookupButton,"visibility","hidden"),dojo.style(this.lookupButton,"display","none")):(dojo.style(this.clearButton,"visibility",""),dojo.style(this.clearButton,"display",""),dojo.style(this.lookupButton,"visibility",""),dojo.style(this.lookupButton,"display",""))},_getDisabledAttr:function(){return this.disabled},_onChange:function(a){this._tooltip&&this._tooltip.set("entityId",a&&a.$key?a.$key:""),this.onChange(a)},onChange:function(a){},templateString:i,widgetsInTemplate:!1,constructor:function(a){this.inherited(arguments),dojo.mixin(this,h)},hideTooltip:function(){this._tooltip&&this._tooltip.close()},postCreate:function(){var a=this;dojo.connect(this.lookupButton,"onclick",this.lookupButton,function(){if(!a.get("disabled")){var b=new e(a.config);b.doSelected=function(c){a.set("selectedObject",c[0]),b.lookupDialog.hide()},b.showLookup();var c=dojo.connect(b.lookupDialog,"onHide",b,function(){dojo.disconnect(c),this.destroy()})}},!0),dojo.connect(this.clearButton,"onclick",null,function(){a.get("disabled")||(a.textbox.value="",a.set("selectedObject",null))},!0)}})})},"Sage/UI/Controls/EntityInfoToolTip":function(){define(["dijit/Tooltip","Sage/Data/SingleEntrySDataStore","Sage/Utility","dojo/string","dojo/html","dojo/i18n!./nls/EntityInfoToolTip","dojo/_base/lang","dojo/_base/declare"],function(a,b,c,d,e,f,g,h){return h("Sage.UI.Controls.EntityInfoToolTip",a,{entityName:"",entityId:"",dataProps:[],include:[],_store:null,_storeOptions:null,constructor:function(a){g.mixin(this,f),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.label="Loading..."},onShow:function(a){if(this.entityId&&""!==this.entityId.trim()){if(!this._store){if(this.dataProps.length<1&&(this.dataProps=this._findPredefined(this.entityName)),this.dataProps.length<1)return void this.set("label",this.errorText);this._setupStore(),this._fetchData(a)}}else this.set("label",this.noInfoText);this.inherited(arguments)},_setDataPropsAttr:function(a){this._store=!1,this.set("label",this.loadingText),this.dataProps=a},_getDataPropsAttr:function(){return this.dataProps},_setEntityIdAttr:function(a){this._store=!1,this.set("label",""===a?this.noInfoText:this.loadingText),this.entityId=a},_getEntityIdAttr:function(){return this.entityId},_setupStore:function(){for(var a=[],c="",d=[],e={},f=0;f<this.dataProps.length;f++){if(c=this.dataProps[f].property,c.indexOf(".")>0){for(var g=c.split("."),h="",i=0;i<g.length-1;i++)h+=g[i],e[h]||(d.push(h),e[h]=!0),h+="/";c=c.replace(/\./g,"/")}a.push(c)}var j=this,k={include:dojo.isArray(this.include)?this.include:[],select:a,resourceKind:j.entityName};d.length>0&&(k.include=d);var l=new b(k);j._storeOptions=k,j._store=l},_fetchData:function(a){var b=a;this._store.fetch({predicate:'"'+this.entityId+'"',onComplete:function(a){this.displayResults(a,b)},onError:function(a){this.set("label",this.errorText)},scope:this})},displayResults:function(a,b){for(var e='<table class="propertyTip">',f=0;f<this.dataProps.length;f++){var g=this.dataProps[f],h=c.getValue(a,g.property);h&&(e+=d.substitute('<tr><td class="caption">${0}</td><td class="value">${1}</td></tr>',[g.label,h]))}e+="</table>",this.set("label",e),this.close(),this.open(b)},_findPredefined:function(a){switch(a){case"accounts":return[{label:this.mainText||"Main Phone:",property:"MainPhone"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.tollFreeText||"Toll Free",property:"TollFree"},{label:this.urlText||"Web URL",property:"WebAddress"}];case"contacts":case"leads":return[{label:this.workText||"Work:",property:"WorkPhone"},{label:this.mobileText||"Mobile:",property:"Mobile"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.emailText||"Email:",property:"Email"}];case"tickets":return[{label:this.contactNameText||"Contact:",property:"Contact.Name"},{label:this.phoneText||"Phone:",property:"Contact.WorkPhone"},{label:this.emailText||"Email:",property:"Contact.Email"}];case"opportunities":return[{label:this.accountText||"Account:",property:"Account.AccountName"},{label:this.mainText||"Main Phone:",property:"Account.MainPhone"}]}return[]}})})},"Sage/Utility/UserOptions":function(){define(["Sage/Utility"],function(a){return Sage.namespace("Utility.UserOptions"),Sage.Utility.UserOptions={getConvertedOptionValue:function(a,b){b=b.toLowerCase();var c=b;switch(a.toUpperCase()){case"DEFAULTCALENDARVIEW":var d=/^(month|2)$/i,e=/^(week|1)$/i,f=/^(workweek|3)$/i,g=/^(day|0)$/i;c=d.test(b)?"month":e.test(b)?"week":f.test(b)?"workweek":(g.test(b),"day");break;case"WORKWEEKSUN":case"WORKWEEKMON":case"WORKWEEKTUE":case"WORKWEEKWED":case"WORKWEEKTHU":case"WORKWEEKFRI":case"WORKWEEKSAT":case"REMEMBERUSERS":case"SHOWONOPPORTUNITIES":case"SHOWONREGARDING":case"SHOWONPHONENUMBER":case"SHOWONTIME":c=/^(true|yes|T|1)$/i.test(b);break;case"LOADHISTORYONSTART":c=/^(true|yes|T|Y|0)$/i.test(b);break;case"DAYSTARTTIME":c=this.getHourPart(b),c>24&&(c=9);break;case"DAYENDTIME":c=this.getHourPart(b),c>24&&(c=17);break;case"NUMEVENTS":case"DEFAULTINTERVAL":c=parseInt(b,10);break;default:c=b}return c},getHourPart:function(a){var b,c,d=a.split(" ");return d.length>1&&a.indexOf("-")>0?(b=d[1])&&(c=b.split(":")[0]):c=a.split(":")[0],(a.indexOf("pm")>0||a.indexOf("PM")>0)&&(c=parseInt(c,10)+12),parseInt(c,10)},getDay:function(a){var b=a;if(a.length>1){var c=[];c.SUNDAY=0,c.MONDAY=1,c.TUESDAY=2,c.WEDNESDAY=3,c.THURSDAY=4,c.FRIDAY=5,c.SATURDAY=6,b=c[a.toUpperCase()]}return b||(b=1),b},arraySort:function(a,b){return a-b}},Sage.Utility.UserOptions})},"Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab":function(){define("Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab",["dojo","dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Utility","Sage/Utility/Activity","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","dijit/layout/ContentPane","dojo/_base/lang","dojo/DeferredList","dojo/on","dojo/_base/array","dojo/topic","dojo/string","dojo/_base/Deferred","Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup","Sage/UI/Controls/SingleSelectPickList","dojo/i18n!./nls/ActivityEditorAttendeesTab","dojox/grid/cells/_base","Sage/Extensions/UI/Columns/Radio","Sage/Extensions/UI/Columns/CheckBox","Sage/Extensions/UI/Columns/PickListSelect","Sage/MainView/ActivityMgr/AttendeeLookup/LookupService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){return d("Sage.MainView.ActivityMgr.ActivityEditorAttendeesTab",[b,c],{actEditor:null,lup_Contact:null,lup_Lead:null,self:null,widgetsInTemplate:!0,currentPrimaryEntityId:null,userContactAttendees:[],editorMode:null,resourceKind:"activityAttendees",serviceName:"dynamic",_activityId:null,_addedAttendees:null,_uncheckItem:null,_initialPrimaryContact:!1,_gridStarted:!1,_timeZones:[],_clearPrimary:!1,constructor:function(a){m.mixin(this,a),m.mixin(this,v);var b=this;0===this._timeZones.length&&Sage.Utility.getTimeZones(function(a){b._timeZones=a})},widgetTemplate:new Simplate(["<div>",'<div id="{%= $.id %}_attendeesGridPlaceholder" dojoAttachPoint="_attendeesGridPlaceholder" style="width:100%;height:100%;min-height:225px"></div>',"</div>"]),userContactList:[],_newItems:[],startup:function(b){if(this._newItems=[],this._addedAttendees=[],this.actEditor){this._activityId=h.getCurrentEntityId(),this._buildGrid(b),a.subscribe("/entity/activity/create",this,this._activitySaved),a.subscribe("/entity/activity/change",this,this._activitySaved),this.createLookups(),this.self=this}},primaryClicked:function(b){b.attendeeTab=!0,b.PrimaryChecked=b.checked,b.checked&&(this._uncheckItem=b),b.AccountId||"Contact"!=b.EntityType?b.AccountId||"Lead"!=b.EntityType?a.publish("/entity/activityAttendee/primaryChanged",[b,this]):i._getLeadData(b.EntityId,function(c){c.Account&&c.Account.$key&&(b.AccountId=c.Account.$key),a.publish("/entity/activityAttendee/primaryChanged",[b,this])},this):i._getContactData(b.EntityId,function(c){c.Account&&c.Account.$key&&(b.AccountId=c.Account.$key),a.publish("/entity/activityAttendee/primaryChanged",[b,this])},this)},_primaryUnChecked:function(a){this.currentPrimaryEntityId,entityId},_getTimeZoneDisplayName:function(a){var b=a;if(this._timeZones&&this._timeZones.length>0){var c=this._timeZones.filter(function(b){return b.Keyname===a});c&&c[0]&&(b=c[0].Displayname)}return b},createToolsConfig:function(){return[{id:"attendeeSpeedSearch",imageClass:"icon_plus_16x16",handler:this.speedSearch,tooltip:this.tooltip_speedSearch,scope:this},{id:"attendeeAddContact",imageClass:"icon_Contact_Lookup_16x23",handler:this.lookupContacts,tooltip:this.tooltip_AddContact,scope:this},{id:"attendeeeAddLead",imageClass:"icon_Lead_Lookup_16x23",handler:this.lookupLeads,tooltip:this.tooltip_AddLead,scope:this},{id:"attendeeDelete",imageClass:"icon_Delete_16x16",handler:this.deleteAttendees,tooltip:this.tooltip_Delete,scope:this}]},createColumnConfig:function(a){var b,c,d;return a?(b={field:"IsPrimary",name:this.header_Primary,width:"40px",type:Sage.Extensions.Activity.primaryContactCheckBox1},c={field:"RoleName",name:this.header_RoleName},d={field:"IsAttendee",name:this.header_Attendee,width:"70px",type:Sage.Extensions.Activity.isAttendeeCheckBox1}):(b={field:"IsPrimary",name:this.header_Primary,width:"40px",editable:!0,radioType:"group",type:Sage.Extensions.UI.Columns.CheckBox,checkBoxClicked:this.primaryClicked},c={field:"RoleName",name:this.header_RoleName,pickListName:"Attendee Role",width:"130px",type:Sage.Extensions.UI.Columns.PickListSelect,options:["Decision Maker","Gate Keeper","Other"],editable:!0},d={field:"IsAttendee",name:this.header_Attendee,width:"70px",editable:!0,radioType:"group",type:dojox.grid.cells.Bool}),[{field:"Name",name:this.header_Name,width:"150px",editable:!1},{field:"AccountName",name:this.header_AccountName,width:"150px",editable:!1},{field:"EntityType",name:this.header_Type,width:"60px",editable:!1},b,c,d,{field:"PhoneNumber",name:this.header_Phone,width:"100px",editable:!1},{field:"Email",name:this.header_Email,width:"150px",editable:!1},{field:"TimeZone",name:this.header_TimeZone,width:"150px",editable:!1}]},getSelect:function(){return["EntityType","EntityId","IsPrimary","Name","Description","Notes","AccountId","AccountName"]},getSort:function(){return[{attribute:"Name"}]},contextualCondition:function(){var a=this._activityId;return a&&a.length>12&&(a=a.substr(0,12)),"Activity.id eq '"+a+"'"},getStoreOptions:function(a){var b={readOnly:a,columns:this.createColumnConfig(a),tools:this.createToolsConfig(a),storeOptions:{service:e.getSDataService(this.serviceName),resourceKind:this.resourceKind,select:this.getSelect(),sort:this.getSort(),onDataChange:m.hitch(this,this.onGridDataChange),onComplete:m.hitch(this,this.onGridComplete),clearStoreCacheOnDelete:!1},slxContext:{workspace:"",tabId:""},contextualCondition:m.hitch(this,this.contextualCondition),id:this.id+"_attendees",rowsPerPage:40,singleClickEdit:!1,enableCheckBoxSelection:!1,selectionMode:"single"};return 0!==this.editorMode.indexOf("New")&&"CompleteUnscheduled"!==this.editorMode||(b.storeOptions.isInsertMode=!0),b},onGridComplete:function(a,b){var c=this;p.forEach(a,function(a,b){a.IsPrimary&&(this.currentPrimaryEntityId=a.EntityId),a.TimeZone&&(a.TimeZone=c._getTimeZoneDisplayName(a.TimeZone)),c._grid&&"insert"!==c._grid.mode&&c._grid.store&&c._grid.store.dirtyDataCache.isDirty&&c._grid.store.dirtyDataCache[a.$key]&&(a.RoleName=c._grid.store.dirtyDataCache[a.$key].RoleName,a.IsPrimary=c._grid.store.dirtyDataCache[a.$key].IsPrimary,a.IsAttendee=c._grid.store.dirtyDataCache[a.$key].IsAttendee)})},onGridDataChange:function(a,b,c){},onGridBlur:function(){},onGridMarkClean:function(){if(this.dirtyDataMsgID){a.byId(this.dirtyDataMsgID)&&a.style(a.byId(this.dirtyDataMsgID),"display","none")}var b=Sage.Services.getService("ClientBindingManagerService");b&&b.clearDirtyAjaxItem(this.id)},onGridMarkDirty:function(){},onGridFetchComplete:function(){"insert"!=this._grid.mode&&this._uncheckItem,this._initialPrimaryContact&&this._gridStarted&&(this._addPrimaryContact(),this._clearPrimary&&(this.clearPrimary(this._grid,"IsPrimary"),this._clearPrimary=!1))},decalreCustomGridCell:function(){d("Sage.Extensions.Activity.primaryContactCheckBox1",dojox.grid.cells.Bool,{format:function(a,b){var c=Sage.Utility.getValue(b,"IsPrimary"),d='<input type="checkbox" disabled="disabled" />';return c&&(d='<input type="checkbox" checked="checked" disabled="disabled" />'),d}}),d("Sage.Extensions.Activity.isAttendeeCheckBox1",dojox.grid.cells.Bool,{format:function(a,b){var c=Sage.Utility.getValue(b,"IsAttendee"),d='<input type="checkbox" disabled="disabled" />';return c&&(d='<input type="checkbox" checked="checked" disabled="disabled" />'),d}})},_buildGrid:function(b){this.decalreCustomGridCell();var c=i.getCurrentActivityId();this._activityId=this._activityId||c;var d=this.getStoreOptions(b),e=new j.Grid(d,this._attendeesGridPlaceholder);e.setSortColumn("Name"),this._grid=e._grid,a.connect(this._grid,"onBlur",this,this.onGridBlur),e.startup(),this._grid.markClean=this.onGridMarkClean,this._grid.markDirty=this.onGridMarkDirty,a.connect(this._grid,"_onFetchComplete",this,this.onGridFetchComplete)},_addMemberToAvailabilityTab:function(a){var b=[];b.push(a),this.actEditor.addMembers(b)},disableGrid:function(){this._grid.readOnly=!0,this._grid.refresh()},saveGridChanges:function(a){"insert"!==this._grid.mode?this._grid.saveChanges(m.hitch(this,a)):a()},speedSearch:function(){var a=this;this._speedSearchLookup=new t,this._speedSearchLookup.showLookup(),this._speedSearchLookup.doSelected=function(b){a._processLookupResults(b)}},lookupContacts:function(){this.lup_Contact.seedProperty="Account.Id",this.lup_Contact.seedValue=this.actEditor._activityData.AccountId,this.lup_Contact.query.conditions="",this.lup_Contact.buildSDataStoreQueryForSeeding(),this.lup_Contact._originalQueryConditions=this.lup_Contact.query.conditions,this.lup_Contact.cancelText=this.lup_Contact.closeText,this.lup_Contact.overrideSeedValueOnSearch=!0,this.lup_Contact.showLookup();var b=a.connect(this.lup_Contact.lookupDialog,"onHide",this.lup_Contact,function(){a.disconnect(b),this.seedValue&&this.resetGrid()})},lookupLeads:function(){this.lup_Lead.query.conditions="",this.lup_Lead.buildSDataStoreQueryForSeeding(),this.lup_Lead._originalQueryConditions=this.lup_Lead.query.conditions,this.lup_Lead.cancelText=this.lup_Lead.closeText,this.lup_Lead.showLookup()},deleteAttendees:function(){var b=this._grid.selection.getSelected(),c=this;this._grid.deleteSelected(function(){if(b)for(var d=0;d<b.length;d++){var e=b[d];if(e.IsPrimary&&(e.attendeeTab=!0,
e.PrimaryChecked=!1,a.publish("/entity/activityAttendee/primaryChanged",[e,this])),"Contact"==b[d].EntityType){var f=c._checkUserContactAssociation(b[d].EntityId);if(f){var g={memberId:f,attendeesTab:!0};c.actEditor._removeMember(g)}}d==b.length-1&&a.publish("/entity/activityAttendee/delete",[null,this])}})},_attendeeExists:function(a){var b=this._grid.rowCount;0===b&&void 0!==this._grid.store.dataCacheToArray&&b!==this._grid.store.dataCacheToArray().length&&this._grid.store.deleteItem(this._grid.store.dataCacheToArray()[0]);for(var c=0;c<b;c++){if(this._grid.getItem(c).EntityId===a)return!0}return!1},resetPrimary:function(a){for(var b=this._grid.rowCount,c=0;c<b;c++){var d=this._grid.getItem(c);d.EntityId!==a&&(d.IsPrimary=!1)}},unCheckPrimary:function(){if("insert"==this._grid.mode)this.resetPrimary();else{if(!this._gridStarted)return void(this._clearPrimary=!0);for(var b=this._grid.rowCount,c=0;c<b;c++){var d=this._grid.getItem(c);d.IsPrimary&&(this._uncheckItem=d,a.publish("/entity/activityAttendee/primaryChanged",[d,this]))}this.clearPrimary(this._grid,"IsPrimary")}},clearPrimary:function(b,c){for(var d=b.rowCount,e=0;e<d;e++){var f=b.getItem(e),g="chk_"+c+"_"+f.EntityId;a.byId(g).checked=!1,b.store.setValue(f,c,!1)}},resetRows:function(b,c,d,e){for(var f=b.rowCount,g="",h=0;h<f;h++){var i=b.getItem(h);i&&i.EntityId!==e.EntityId?(g="chk_"+this.field+"_"+i.EntityId,a.byId(g).checked=!1,b.store.setValue(i,d,!1)):i&&i.EntityId===e.EntityId&&(g="chk_"+this.field+"_"+i.EntityId,b.store.setValue(i,d,!0))}},resetEntityContext:function(){var a=this.parentRelationshipName,b=h.getCurrentEntityId();"activityId"===a&&(b=b.substr(0,12));var c=function(){return(a||"'A'")+" eq '"+b+"'"};this._previewGrid.resetContextualCondition(c),this.refresh()},_processLookupResults:function(a){for(var b=[],c=0;c<a.length;c++)this._attendeeExists(a[c].$key)||(b.push(this._setAttendeeEntity(a[c])),"Contact"==a[c].type&&this._getSlxAssociation("Contact",a[c].$key,null,function(a){a&&a.length>0&&a[0].UserId&&(this._updateUserContactList(a[0].UserId,a[0].ContactId),this._getResourceData(h.getClientContextByKey("userID"),a[0].UserId,this._addMemberToAvailabilityTab,this))},this));b.length>0&&this._addAttendeesToStore(b)},_processContactLookupResults:function(a){for(var b=[],c=0;c<a.length;c++)if(!this._attendeeExists(a[c].$key)){a[c].EntityType="Contact";var d=this._setAttendeeEntityFromContactLead("Contact",a[c]);d.IsAttendee=!0,b.push(d),a[c].New=!0}b.length>0&&this._addAttendeesToStore(b);for(var c=0;c<a.length;c++)a[c].New&&a[c].ContactUser&&a[c].ContactUser.$resources&&a[c].ContactUser.$resources.length>0&&(this._updateUserContactList(a[c].ContactUser.$resources[0].UserId,a[c].$key),this._getResourceData(h.getClientContextByKey("userID"),a[c].ContactUser.$resources[0].UserId,this._addMemberToAvailabilityTab,this))},_processLeadLookupResults:function(a){for(var b=[],c=0;c<a.length;c++)if(!this._attendeeExists(a[c].$key)){a[c].EntityType="Lead";var d=this._setAttendeeEntityFromContactLead("Lead",a[c]);d.IsAttendee=!0,b.push(d)}b.length>0&&this._addAttendeesToStore(b)},getFieldValue:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.fieldName==b)return d.fieldValue}return""},_setAttendeeEntity:function(a){var b={};return b.EntityType=a.type,b.EntityId=a.$key,b.IsPrimary=!1,b.Name=a.$descriptor,b.AccountName=this.getFieldValue(a.fields,"account"),b.Email=this.getFieldValue(a.fields,"email"),b.Description="",b.Notes="",b.TimeZone="",b.PhoneNumber=this.getFieldValue(a.fields,"phone"),b.RoleName="",b.general=!1,b.IsAttendee=!0,b},_setAttendeeEntityFromContactLead:function(a,b){var c=!1;return b&&b.$key&&(c={},c.EntityType=a,c.EntityId=b.$key,c.$key=b.$key,c.IsPrimary=!1,c.Name=b.$descriptor,c.$descriptor=b.$descriptor,c.Account=b.Account,c.AccountName=b.AccountName||b.Company,"Lead"==a&&(c.Company=b.Company,c.LeadFullName=b.$descriptor),c.Company=b.Company,c.Email=b.Email,c.Description="",c.Notes="",b.Address&&(c.TimeZone=b.Address.TimeZone,c.TimeZone&&(c.TimeZone=this._getTimeZoneDisplayName(c.TimeZone))),c.PhoneNumber=b.WorkPhone,c.RoleName="",c.general=!1),c},_getResourceData:function(a,b,c,d){this.accessData=!1,this._accessStore||(this._accessStore=new f({include:["$descriptors"],resourceKind:"activityresourceviews",service:e.getSDataService("dynamic")})),this._accessStore.fetch({predicate:"'"+b+"-"+a+"'",onComplete:function(a){c.call(d,a)},onError:function(){c.call(d,null)},scope:this})},_getSlxAssociation:function(a,b,c,d,f){this.accessData=!1,this._associationStore||(this._associationStore=new g({include:["$descriptors"],resourceKind:"contactusers",select:["UserId","ContactId","Contact/Name","Contact/Email","Contact/WorkPhone","Contact/AccountName","User/Name"],service:e.getSDataService("dynamic")}));var h="";"Contact"==a?h=r.substitute("ContactId eq '${0}' ",[b]):"User"==a&&(h=r.substitute("UserId eq '${0}' ",[b])),this._associationStore.fetch({query:h,onComplete:function(a){d.call(f,a,c)},onError:function(){d.call(f,null)},scope:this})},_updateUserContactList:function(a,b){this.userContactList[a]||(this.userContactList[a]={UserId:a,ContactId:b})},_checkUserContactAssociation:function(a){var b=!1;if(this.userContactList)for(var c in this.userContactList)if(this.userContactList[c].ContactId==a){b=this.userContactList[c].UserId;break}return b},_addContactAttendees:function(a){for(var b=[],c=a.length,d=this,e=0;e<c;e++)b.push(this._getAssociationData(a[e]));new n(b).then(function(a){for(var b=0;b<a.length;b++)a[b][1]&&d.userContactAttendees.push(a[b][1]);d._addAttendeesToStore(d.userContactAttendees),d.userContactAttendees=[]})},_getAssociationData:function(a){var b=new s,c={last:!1};return this._getSlxAssociation("User",a,c,function(a,c){if(a&&a.length>0){var d=null;a[0].Contact&&(this._updateUserContactList(a[0].UserId,a[0].ContactId),d=this._setAttendeeEntityFromContactLead("Contact",a[0].Contact)),b.resolve(d)}},this),b},_addPrimaryContact:function(a){this._initialPrimaryContact&&(this._attendeeExists(this._initialPrimaryContact.$key)||this._addContactAttendee(this._initialPrimaryContact)),this._initialPrimaryContact=!1},_addContactAttendee:function(a){var b=[],c=null;a&&(this.resetPrimary(a.$key),this._grid.mode,a.Account?(a.AccountName=a.Account.AccountName,c=this._setAttendeeEntityFromContactLead("Contact",a),c.IsPrimary=!0,c.general=!0,b.push(c),this._addAttendeesToStore(b,!0)):i._getContactData(a.$key,function(a){a&&(c=this._setAttendeeEntityFromContactLead("Contact",a),c.IsPrimary=!0,c.general=!0,b.push(c),this._addAttendeesToStore(b,!0))},this))},_addLeadAttendee:function(a){var b=[],c=null;a&&(this.resetPrimary(a.$key),a.Email||a.WorkPhone?(c=this._setAttendeeEntityFromContactLead("Lead",a),c.general=!0,c.IsPrimary=!0,b.push(c),this._addAttendeesToStore(b,!0)):(this._removeLeadAttendee(),i._getLeadData(a.$key,function(a){a&&(c=this._setAttendeeEntityFromContactLead("Lead",a),c.general=!0,c.IsPrimary=!0,b.push(c),this._addAttendeesToStore(b,!0))},this)))},_removeAssociatedContact:function(b){if(this.userContactList[b])for(var c=this,d=this.userContactList[b].ContactId,e=this._grid.rowCount,f=0;f<e;f++){var g=this._grid.getItem(f);if(g.EntityId===d){c._grid.store.deleteItem(g),g.IsPrimary&&(g.attendeeTab=!0,g.PrimaryChecked=!1,a.publish("/entity/activityAttendee/primaryChanged",[g,this]));break}}},checkStoreItem:function(b){var c=new s;return this._grid.store.fetch({onComplete:function(d){var e=!1;a.forEach(d,function(a,c){a&&a.EntityId==b&&(e=!0)}),c.resolve(e)}}),c},_removeContactAttendee:function(){var b=this;this._grid.store.fetch({onComplete:function(c){a.forEach(c,function(a,c){a&&a.general&&"Contact"==a.EntityType&&b._grid.store.deleteItem(a)})}})},_removeLeadAttendee:function(){var b=this;this._grid.store.fetch({onComplete:function(c){a.forEach(c,function(a,c){a&&a.general&&"Lead"==a.EntityType&&b._grid.store.deleteItem(a)})}})},_addLeadAttendees:function(b){var c=this._grid,d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=function(){var e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("activities").setOperationName("AddLeadAttendees"),f=h.getCurrentEntityId(),g={$name:"AddLeadAttendees",request:{ActivityId:f,leadIds:b.join()}};e.execute(g,{success:function(a){c.refresh()},failure:function(b){Sage.UI.Dialogs.showError(a.string.substitute("Error adding lead attendees",[b])),c.refresh()}})};b.length>0&&(c.showLoading(),e())},_getNewContactAttendees:function(){return this._newItems},setInitialPrimaryContact:function(a){this._initialPrimaryContact=a},refreshGrid:function(){this._grid.saveChanges(),this._grid.refresh()},_addAttendeesToStore:function(b,c){var d=h.getCurrentEntityId();if("insert"!==this._grid.mode&&d){for(var e=[],f=0;f<b.length;f++){var g=b[f];g.Account=null,this._attendeeExists(g.EntityId)||(this._newItems.push(g),g.Activity={$key:d},e.push(this._saveGridActivityAttendee(g)))}new n(e).then(function(d){a.publish("/entity/activityAttendee/add",[d.length,this]),c&&b&&b.length})}else{for(var i=[],f=0;f<b.length;f++){var g=b[f];if(!this._attendeeExists(g.EntityId)){for(var j=-1,k=0,l=this._newItems.length;k<l;k++)if(this._newItems[k].$key===g.EntityId){j=k;break}-1===j&&this._newItems.push(g),i.push(g)}}this._grid.store.addItemsToCache(this,i)}this._grid.refresh()},_saveGridActivityAttendee:function(a){var b=new s;return this._grid.store.saveNewEntity(a,function(){b.resolve("success")},function(){b.resolve("success")},this),b},_addAdhocAttendee:function(){this._grid.store.newItem({onComplete:function(a){var b=h.getCurrentEntityId();b||(b=this.actEditor._makeTempID()),a.Activity={$key:b},this._newItems.push(association),"insert"===this._grid.mode?this._grid.store.addToCache(this,a,1):this._grid.store.saveNewEntity(a),this._grid.refresh()},scope:this})},_activitySaved:function(a){var b=new s;if("insert"===this._grid.mode){for(var c=a.$key,d=[],e=[],f=null,g=0;g<this._newItems.length;g++){g;var h=this._newItems[g];h.Account=null,h.Activity={$key:c},h.IsPrimary?f=h:e.push(h)}if(e.length>0&&d.push(this._saveActivityAttendees(e)),this._newItems=[],f){var i=this._updatePrimaryAttendee(f,a);d.push(i)}new n(d,!1).then(function(a){b.resolve({success:!0})})}else this._grid.saveChanges(),b.resolve({success:!0}),this._newItems=[],this._uncheckItem=null;return b},_updatePrimaryAttendee:function(a,b){var c=new s,d=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),e=new Sage.SData.Client.SDataServiceOperationRequest(d).setResourceKind("activities").setOperationName("UpdatePrimaryActivityAttendee"),f={$name:"UpdatePrimaryActivityAttendee",request:{entity:b,entityId:a.EntityId,isAttendee:a.IsAttendee,roleName:a.RoleName}};return e.execute(f,{success:function(a){c.resolve({success:!0})},failure:function(a){},scope:this}),c},_historySaved:function(a){var b=new s;if("insert"===this._grid.mode){for(var c=a.$key,d=[],e="",f=0;f<this._newItems.length;f++){f;var g=this._newItems[f];g.Account=null,g.History={$key:c},e!==g.EntityId&&(d.push(this._saveHistoryAttendee(g)),e=g.EntityId)}this._newItems=[];new n(d).then(function(a){b.resolve({success:!0})})}return b},_saveActivityAttendee:function(a){var b=new s;new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic")).setResourceKind("activityAttendees").create(a,{success:function(){b.resolve("success")},failure:function(){},scope:this});return b},_saveActivityAttendees:function(a){var b=new s,c=new Sage.SData.Client.SDataBatchRequest(e.getSDataService("dynamic"));return c.setResourceKind("activityAttendees"),c.using(m.hitch(this,function(){for(var b=0;b<a.length;b++){var c=new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic"));c.setResourceKind("activityAttendees"),c.create(a[b],{scope:this,ignoreETag:!0})}})),c.commit({scope:this,ignoreETag:!0,success:function(a){b.resolve("success")},failure:function(a){}}),b},_saveHistoryAttendee:function(a){var b=new s;new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic")).setResourceKind("historyAttendees").create(a,{success:function(){b.resolve("success")},failure:function(){},scope:this});return b},_dialogHide:function(){this._newItems=[],this._grid.store.clearCache(),this._grid._clearData(),this._grid.markClean(),this._uncheckItem=null,this._gridStarted=!1},destroy:function(){this.lup_Contact.destroy(),this.lup_Lead.destroy(),this._gridStarted=!1,this.inherited(arguments)},_tabShow:function(){if(this._grid){this._grid.get("mode");0!=this.editorMode.indexOf("New")&&this._activityId?this._grid.set("mode",""):this._grid.set("mode","insert"),this._grid.refresh(),this.lup_Contact&&(this.lup_Contact.resetGrid(),this.lup_Contact.destroy()),this.lup_Lead&&(this.lup_Lead.resetGrid(),this.lup_Lead.destroy()),this.createLookups(),this._gridStarted=!0}},createLookups:function(){var a=Sage.Services.getService("LookupService");if(a){var b=this,c=a.getLookupInstance("Contact","activityContactAttendee");c&&(this.lup_Contact=c,this.lup_Contact.doSelected=function(a){b._processContactLookupResults(a)});var d=a.getLookupInstance("Lead","activityLeadAttendee");d&&(this.lup_Lead=d,d.doSelected=function(a){b._processLeadLookupResults(a)})}},setToReadOnly:function(a){var b=["attendeeSpeedSearch","attendeeAddContact","attendeeeAddLead","attendeeDelete"];this._bulkSetProperty(this,b,"disabled",a)},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=dijit.byId(b[e]);f&&f.set(c,d)}}})})},"Sage/UI/SLXPreviewGrid":function(){define(["./SLXPreviewGrid/Grid","./SLXPreviewGrid/FilterPanel","./SLXPreviewGrid/Filter/DateRange","./SLXPreviewGrid/Filter/Text"],function(a,b,c,d){return{Grid:a,FilterPanel:b,Filter:{DateRange:c,Text:d}}})},"Sage/UI/SLXPreviewGrid/Grid":function(){define(["Sage/UI/EditableGrid","dijit/layout/BorderContainer","dijit/form/SimpleTextarea","dijit/_Widget","dijit/_Templated","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.UI.SLXPreviewGrid.Grid",[d,b],{filterText:"Filter",previewField:"",columns:null,tools:null,slxContext:null,dblClickAction:null,contextualConditionFunction:null,liveSplitters:!0,gutters:!1,gridNodeId:"",_filter:null,_grid:null,_preview:null,constructor:function(){this.connections=[]},amIInATab:function(){return!(!this.slxContext||!this.slxContext.workspace)&&this.slxContext.workspace.indexOf("TabWorkspace")>-1},isMyTabVisible:function(){return!this.amIInATab()||!TabControl||TabControl.getState().isTabVisible(this.slxContext.tabId)},postMixInProperties:function(){dojo.mixin(this,f),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.previewField&&(this._preview=this._buildPreview()),this._filter=this._buildFilter(),this._grid=this._buildGrid()},startup:function(){if(!this._started&&(this.inherited(arguments),this.domNode.style.visibility="visible",this._preview)){var a=this.getSplitter("right");this.connections.push(dojo.connect(a,"_stopDrag",this,function(){this._setPref("previewSize",this._preview.domNode.style.width),this.layout()}))}},getSelectedRecords:function(a){var b=this._grid.selection.getSelected();return dojo.map(b,function(b){var c={};return dojo.forEach(a,function(a){c[a]=this._grid.store.getValue(b,a)},this),c},this)},refresh:function(){this._grid.refresh()},setSortIndex:function(a,b){this._grid.setSortIndex(a,b)},setSortColumn:function(a,b){for(var c=0,d=0;d<this.columns.length;d++)a===this.columns[d].field&&(c=d);this._grid.setSortIndex(c,b)},addAssociatedItems:function(){this._grid.addAssociatedItems.apply(this._grid,arguments)},onSelected:function(){},_buildPreview:function(){var a=new c({style:"height:100%; overflow: auto; width: "+this._getPref("previewSize","150px"),region:"right",splitter:!0,readOnly:!0});return this.addChild(a),dojo.addClass(a.domNode,"preview-grid-text"),a},_buildGrid:function(){var b=[];this._filter&&b.push({id:this.id+"_Filter",imageClass:"icon_Filter_16x16",tooltip:this.filterText,handler:dojo.hitch(this,function(){this._filter.toggle(),this.layout()})}),this.tools&&dojo.forEach(this.tools,function(a){b.push(a)});var c={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};if(!this.storeOptions)throw"SLXPreviewGrid configuration is missing storeOptions";this.storeOptions.select=this.storeOptions.select||[],this.storeOptions.select.push("Id"),this.storeOptions.select.push(this.previewField);var d=new a({id:this.domNode.id+"_grid",gridNodeId:this.id,tabId:this.slxContext.tabId,context:this.slxContext,region:"center",columnDefaults:{editable:!1},columns:this.columns,tools:b,contextualCondition:c,storeOptions:this.storeOptions,keepSelection:!0});return this.connections.push(dojo.connect(d,"onSelected",this,this._updatePreviewText)),this.connections.push(dojo.connect(d.store,"onSuccess",this,this._updatePreviewText)),this.dblClickAction&&dojo.connect(d,"onRowDblClick",this,function(a){var b=d.getItem(a.rowIndex),c=d.store.getValue(b,"$key");this.dblClickAction(c,b)}),this._filter&&dojo.connect(this._filter,"onFilterApply",this,function(a){c.conditions=this._filter.getQuery(),d.refresh()}),this.addChild(d),d},destroy:function(){for(var a=this.connections.length,b=0;b<a;b++)dojo.disconnect(this.connections.pop());this.inherited(arguments)},resetContextualCondition:function(a){this.contextualConditionFunction=a;var b={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};this._grid.resetContextualCondition(b)},_updatePreviewText:function(){if(this.previewField){var a=this._grid.selection.getSelected(),b="";a.length>0&&a[0]&&(b=a[0][this.previewField]||this._grid.store.getValue(a[0],this.previewField)),this._preview.set("value",b)}},_buildFilter:function(){var a=[];if(dojo.forEach(this.columns,function(b){if(b.filterConfig){var c=dojo.mixin(dojo.clone(b),b.filterConfig);c.label||(c.label=b.name),a.push(c)}}),0===a.length)return null;var b=new Sage.UI.SLXPreviewGrid.FilterPanel({id:this.id+"_filterpanel",region:"top",filterConfig:a,style:"display: none"});return this.addChild(b),b},_getPref:function(a,b){var c=window.localStorage,d=this.id+a;return c&&c[d]?c[d]:b},_setPref:function(a,b){var c=window.localStorage;c&&(c[this.id+a]=b)}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup":function(){define("Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup",["dojo/_base/html","Sage/Data/SDataServiceRegistry","dijit/Dialog","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dojo/_base/array","dijit/registry","dojo/text!./templates/SpeedSearchLookup.html","dojo/_base/declare","Sage/UI/Controls/Grid","dojo/i18n!./nls/SpeedSearchLookup","Sage/Store/SData"],function(html,sDataServiceRegistry,Dialog,_Widget,_Templated,lang,string,array,registry,template,declare,Grid,nlsStrings,SDataObjectStore){var widget=declare("Sage.MainView.ActivityMgr.AttendeeLookup.SpeedSearchLookup",[_Widget,_Templated],{id:"speedSearchLookup",btnIcon:"images/icons/plus_16x16.gif",btnToolTip:"Lookup",dialogTitle:"Contact/Lead Look up",closeText:"Close",loadingText:"Loading...",_initialized:!1,_started:!1,dialogButtonText:"Search",widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),srchBtnCaption:"Search",_store:null,_grid:null,currentPage:0,pageSize:100,_storeOptions:null,_entry:null,indexes:[{indexName:"Contact",indexType:1,isSecure:!0},{indexName:"Lead",indexType:1,isSecure:!0}],types:["Contact","Lead"],iconPathsByType:{Account:"content/images/icons/Company_24.png",Activity:"content/images/icons/To_Do_24x24.png",Contact:"content/images/icons/Contacts_24x24.png",History:"content/images/icons/journal_24.png",Lead:"content/images/icons/Leads_24x24.png",Opportunity:"content/images/icons/opportunity_24.png",Ticket:"content/images/icons/Ticket_24x24.png"},constructor:function(){lang.mixin(this,nlsStrings)},postMixInProperties:function(){},startup:function(){this._buildGrid()},extractTypeFromItem:function(a){for(var b=0;b<this.types.length;b++)if(-1!==a.source.indexOf(this.types[b]))return this.types[b];return null},extractDescriptorFromItem:function(a,b){var c="";switch(b){case"Contact":case"Lead":c=string.substitute("${lastname}, ${firstname}",this.getFieldValues(a.fields,["firstname","lastname"]))}return c},extractKeyFromItem:function(a){var b,c;return(b=a.displayName)?(c=b.length,b.substring(c-12)):""},getFieldValue:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.fieldName==b)return d.fieldValue}return""},getFieldValues:function(a,b){var c={};return array.forEach(b,function(a){c[a]=""}),array.forEach(a,function(a){array.forEach(b,function(b,d){a.fieldName===b&&(c[b]=a.fieldValue)})}),c},showLookup:function(a){this._dialog.set("title",this.dialogTitle),this.eventDefaultValues=a||{},this._dialog.show(),this._initialized||this._initializeList(),this._dialog.set("refocus",!1),this.connect(this._dialog,"onHide",this.destroy)},_initializeList:function(){this._started=!1;var a=[{field:"$descriptor",label:this.colName,width:"20%",sortable:!1},{field:"type",label:this.colType,width:"10%",sortable:!1},{field:"accountName",label:this.colAccount,width:"30%",sortable:!1},{field:"title",label:this.colTitle,width:"10%",sortable:!1},{field:"email",label:this.colEmail,width:"30%",sortable:!1},{field:"phone",label:this.colWorkPhone,width:"30%",sortable:!1}];this._entry={request:{docTextItem:-1,searchText:"",searchType:1,noiseFile:"PMINoise.dat",includeStemming:!1,includeThesaurus:!1,includePhonic:!1,useFrequentFilter:!1,indexes:this.indexes,whichPage:this.currentPage,itemsPerPage:this.pageSize,filters:null},response:null};var b=this,c=function(a,c){this._initialized=!0,array.forEach(a,function(a,c){a.type=b.extractTypeFromItem(a),a.$descriptor=a.$descriptor||b.extractDescriptorFromItem(a,a.type),a.$key=b.extractKeyFromItem(a),a.accountName=b.getFieldValue(a.fields,"account"),a.title=b.getFieldValue(a.fields,"title"),a.email=b.getFieldValue(a.fields,"email"),a.phone=b.getFieldValue(a.fields,"phone")})};this._storeOptions={service:sDataServiceRegistry.getSDataService("system"),contractName:"system",operationName:"executeSearch",entry:this._entry,queryArgs:{count:100},onComplete:c,operationSDataStore:"Sage.SData.Client.SDataServiceOperationRequest",itemsProperty:"response.items",totalCountProperty:"response.totalCount"};var d=this._store=new SDataObjectStore(this._storeOptions);if(!this._grid){var e=this._grid=new Grid({id:"speedSearchGrid",store:d,columns:a,minRowsPerPage:100,placeHolder:dojo.byId(this._speedSearchGrid),selectionMode:"extended",columnHiding:!0,columnResizing:!0,columnReordering:!0,rowSelection:!0});e.onRowDblClick=lang.hitch(this,function(a){this.onDoubleClick()}),e.resize()}},onDoubleClick:function(){this.getGridSelections()},uninitialize:function(){this.contentNode&&(array.forEach(this.mainHandles,function(a){a.remove()}),this._destroyContent(),this.inherited(arguments))},_destroyContent:function(){this.contentNode&&(array.forEach(registry.findWidgets(this.contentNode),function(a){a.destroy(!1)}),array.forEach(this.handles,function(a){a.remove()}),this.handles=[],this.contentNode.innerHTML="")},initDialog:function(){},_onKey:function(a){var b=this,c=arguments;dojo.query("*",this.domNode).forEach(function(d,e,f){d===a.target&&b.inherited(c)})},getGridSelections:function(){var a=this._grid.getSelectedRowData();this._grid.clearSelection(),this.doSelected(a)},doSelected:function(a){},_cancelClick:function(){this.hide()},hide:function(){this._dialog.hide(),this._started=!1},_doSearch:function(){this._valueBox.value&&(this._entry.request.searchText=this._valueBox.value,this._store.entry=this._entry,this._grid.refresh())},_onKeyPress:function(a){13!=a.keyCode&&10!=a.keyCode||(this._valueBox.blur(),this._doSearch())},destroy:function(){var a=dijit.byId([this.id,"-Dialog"].join(""));this.btnIcon&&dojo.destroy(this.btnIcon),dojo.disconnect(this._doSearchConnection),dojo.unsubscribe(this._addCondHandle),dojo.unsubscribe(this._removeCondHandle),this.conditionMgr&&this.conditionMgr.destroy(!1),a&&a.uninitialize(),a.destroyRecursive(),this.inherited(arguments)}});return widget})},"Sage/UI/Controls/SingleSelectPickList":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/ComboBox","Sage/UI/Controls/PickList","dojo/text!./templates/SingleSelectPickList.html","dojo/string","dojo/_base/declare","dojo/keys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return l("Sage.UI.Controls.SingleSelectPickList",[i,a,b,c],{store:null,cssClass:"",constructor:function(a){a.clientId&&(this.id=a.clientId+"-SingleSelectPickList"),a.cssClass&&(this.cssClass=a.cssClass),this.inherited(arguments)},postCreate:function(){this._setupTooltips(this.comboBox._buttonNode,this.comboBox.textbox),this._setupRenderAsHyperlink(),this._setupTooltips(),this.inherited(arguments);var a=dojo.byId(this._textId);a&&a.value&&this.comboBox.value!==a.value&&this.comboBox.set("value",a.value),this.cssClass&&this.cssClass.length>0&&(this.comboBox.domNode.className=this.cssClass+" "+this.comboBox.domNode.className)},_setupTooltips:function(){this.controlTooltip&&""!==this.controlTooltip&&this.comboBox.set("title",this.controlTooltip),this.buttonTooltip&&""!==this.buttonTooltip&&this.comboBox._buttonNode&&(this.comboBox._buttonNode.title=this.buttonTooltip)},_setupRenderAsHyperlink:function(){this.renderAsHyperlink&&(dojo.addClass(this.comboBox.domNode,"comboAsHyperlink"),dojo.connect(this.comboBox.domNode,"onclick",this,function(){this.comboBox.loadDropDown()}))},_loadData:function(){var a=new dojo.Deferred;this.getPickListData(a),a.then(dojo.hitch(this,function(a){"string"==typeof a&&this.comboBox.set("value",a);for(var b,c=[],d=0;d<a.items.$resources.length;d++)if(this.filter===a.items.$resources[d].filter||""===this.filter){var f=a.items.$resources[d];c.push({id:f.$key,code:f.code,number:f.number,text:f.text,filter:f.filter})}this.storeData={identifier:"id",label:"text",items:c},this.store=new e({data:this.storeData}),this.comboBox.set("store",this.store),this.comboBox.set("searchAttr","text"),this.store._forceLoad();var g=dojo.byId(this._textId),h=dojo.byId(this._picklistId),i=dojo.byId(this._codeId);if(c[0])if(g&&g.value)this.lastValidValue=g.value,this.initialValue=this.lastValidValue,this.comboBox.set("value",this.lastValidValue);else if(h&&h.value)(b=this.getStoreItemById(h.value))&&(this.lastValidValue=this.store.getValue(b,"text"),this.initialValue=this.lastValidValue,this.comboBox.set("value",this.lastValidValue));else if(i&&i.value)(b=this.getStoreItemByCode(i.value))&&(this.lastValidValue=this.store.getValue(b,"text"),this.initialValue=this.lastValidValue,this.comboBox.set("value",this.lastValidValue));else{var j=this.comboBox.get("value");j||""===j?this.lastValidValue=j:(this.lastValidValue=c[0].text,this.comboBox.set("value",this.lastValidValue))}else this.comboBox.set("value","")}),function(a){}),!1===this.get("canEditText")&&(this.comboBox.textbox.readOnly=!0);var b=this.get("maxLength");b>0&&this.comboBox.set("maxLength",b)},uninitialize:function(){this.inherited(arguments)},getStoreItemById:function(a){var b,c=null;return this.store&&this.storeData&&dojo.forEach(this.storeData.items,function(d,e,f){if(d.id&&(b=this.store.getValue(d,"id"))===a)return c=d},this),c},getStoreItemByCode:function(a){var b,c=null;return this.store&&this.storeData&&dojo.forEach(this.storeData.items,function(d,e,f){if(d.code&&(b=this.store.getValue(d,"code"),b&&(b=k.trim(b),b=b.toUpperCase()),a=k.trim(a),a=a.toUpperCase(),b===a))return c=d},this),c},getStoreItemByValue:function(a){var b,c=null;return a&&this.store&&dojo.forEach(this.storeData.items,function(d,e,f){if(d.text&&(b=this.store.getValue(d,"text"),b&&(b=k.trim(b),b=b.toUpperCase()),a=k.trim(a),a=a.toUpperCase(),b===a))return c=d},this),c},_onChange:function(a){this.onChange(a)},_setPickListNameAttr:function(a){this.inherited(arguments),this._loadData()},_setValueAttr:function(a){this.inherited(arguments),this.comboBox.set("value",a)},_getValueAttr:function(){return this.comboBox.get("value")},_getCodeAttr:function(){var a,b,c;return b="",c=this._getValueAttr(),a=this.getStoreItemByValue(c),a&&(b=this.store.getValue(a,"code")),b},_getIdAttr:function(){var a,b;return b="",a=this.getStoreItemByValue(this._getValueAttr()),a&&(b=this.store.getValue(a,"id")),b},templateString:j,widgetsInTemplate:!0,storeData:null,lastValidValue:"",initialValue:"",disabled:!1,_setDisabledAttr:function(a){this.disabled=a,this.comboBox.set("disabled",a)},_getDisabledAttr:function(){return this.disabled=this.comboBox.get("disabled"),this.disabled},focus:function(){this.comboBox.focus()},_onKeyDown:function(a){a.keyCode===m.ENTER&&this.onChange(this._getValueAttr())},onChange:function(a){if(this.storeData){var b=this.comboBox.get("value");if(b!=this.initialValue){if(this.get("itemMustExist")){var c=dojo.some(this.storeData.items,function(b){return b.text==a||""==a},this);if(c&&(this.lastValidValue=a),!c&&"undefined"!==this.lastValidValue&&null!==this.lastValidValue)return void this.comboBox.set("value",this.lastValidValue)}if(this.comboBox.isValid()){var d="",e="";dojo.forEach(this.storeData.items,function(a,c,f){a.text==b&&(d=a.code,e=a.id)},this),this.setASPNETInputs(b,d,e)}}}}})})},"Sage/Extensions/UI/Columns/Radio":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(a,b){return a("Sage.Extensions.UI.Columns.Radio",dojox.grid.cells.Bool,{formatEditing:function(a,b){var c="group"==this.radioType?"rdo_"+this.field:"rdo_"+this.field+"_"+b;return'<input type="radio" '+(a?"checked":"")+' name="'+c+'"  style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&(this.resetRows(a.grid,a.rowIndex,this.field),this.applyStaticValue(a.rowIndex))},resetRows:function(a,b,c){this.currentRow=b;var d=this;a.store.fetch({onComplete:function(b){dojo.forEach(b,function(b,e){e!=d.currentRow&&a.store.setValue(b,c,!1)})}})}})})},"Sage/Extensions/UI/Columns/CheckBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/query"],function(a,b,c){return a("Sage.Extensions.UI.Columns.CheckBox",dojox.grid.cells.Bool,{checkBoxIds:null,constructor:function(a){this.checkBoxIds=[]},formatEditing:function(a,b){var c="chk_"+this.field+"_"+b;this.checkBoxIds[c]||this.checkBoxIds.push(c);var d="",e=this.grid.getItem(b);e&&(d=e.EntityId);var f="chk_"+this.field+"_"+d;return!0===a||1===a?'<input type="checkbox" class="attendeeGridIsPrimary" id="'+f+'" name="'+c+'" checked="checked" />':'<input type="checkbox" class="attendeeGridIsPrimary" id="'+f+'" name="'+c+'" />'},doclick:function(a){if("INPUT"==a.target.tagName){var b=a.grid.getItem(a.rowIndex);a.target.checked?b.checked=!0:b.checked=!1,this.checkBoxClicked&&"function"==typeof this.checkBoxClicked&&this.checkBoxClicked.call(this,b),this.resetRows(a.grid,a.rowIndex,this.field,b),"insert"==a.grid.mode&&this.applyStaticValue(a.rowIndex)}},resetRows:function(a,b,c,d){for(var e,f=a.rowCount,g=0;g<f;g++){var h=a.getItem(g);h&&h.EntityId!==d.EntityId?(e="chk_"+this.field+"_"+h.EntityId,dojo.byId(e).checked=!1,a.store.setValue(h,c,!1)):h&&h.EntityId===d.EntityId&&(e="chk_"+this.field+"_"+h.EntityId,"insert"==a.mode?a.store.setValue(h,c,!0):"insert"!==a.mode&&h.IsPrimary?a.store.setValue(h,c,!1):"insert"===a.mode||h.IsPrimary||a.store.setValue(h,c,!0))}},resetCheckBoxes:function(a){for(var b=0;b<this.checkBoxIds.length;b++)a!=b&&(dojo.byId(this.checkBoxIds[b]).checked=!1);c(".attendeeGridIsPrimary").forEach(function(a,b,c){})}})})},"Sage/Extensions/UI/Columns/PickListSelect":function(){define(["dojo/_base/declare","dojox/grid/cells/_base","Sage/UI/Controls/PickList"],function(a,b,c){return a("Sage.Extensions.UI.Columns.PickListSelect",dojox.grid.cells.Select,{storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(a){this.inherited(arguments),"id"===this.storageMode&&"AsText"===this.displayMode&&this.pickListName&&this._loadPickList()},
_loadPickList:function(){var a=new dojo.Deferred,b={pickListName:this.pickListName,canEditText:!1,itemMustExist:!0,maxLength:-1,storeMode:this.storageMode,sort:!1,displayMode:this.displayMode};this.pickList=new c(b),this.pickList.getPickListData(a),a.then(dojo.hitch(this,this._loadData),function(a){})},_loadData:function(a){for(var b=[],c=[],d=0;d<a.items.$resources.length;d++){var e=a.items.$resources[d];c.push(e.text),e.code?b.push(e.code):b.push(e.text)}this.options=c,this.values=b.length>0?b:c}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/LookupService":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/ContactLookupConfig","Sage/MainView/ActivityMgr/AttendeeLookup/LeadLookupConfig","dojo/_base/declare"],function(a,b,c){var d=c("Sage.MainView.ActivityMgr.AttendeeLookup.LookupService",null,{_lookupConfigs:null,constructor:function(){},_initLookupConfigs:function(){this._lookupConfigs=[{lookupName:"Contact",lookupDisplayName:"Contact",configProviderType:a,instance:!1},{lookupName:"Lead",lookupDisplayName:"Lead Loookup",configProviderType:b,instance:!1}]},getLookupConfigs:function(){return this._lookupConfigs?this._lookupConfigs:(this._initLookupConfigs(),this._lookupConfigs)},getLookupConfig:function(a){for(var b=this.getLookupConfigs(),c=0;c<b.length;c++)if(b[c].lookupName.toUpperCase()===a.toUpperCase())return b[c];return null},AddLookupConfig:function(a){var b=this.getLookupConfig(a.lookupName);if(b)b.configuration=a;else{var c={lookupName:a.lookupName,lookupDisplayName:a.lookupDisplayName,configProviderType:a,instance:!1};this.getLookupConfigs().push(c)}},RemoveLookupConfig:function(a){},getLookupConfigInstance:function(a){var b=this.getLookupConfig(a);if(b)return b.instance?(b.instance.rebuild(),b.instance):(b.instance=new b.configProviderType,b.instance)},getLookupInstance:function(a,b){var c=this.getLookupConfigInstance(a),d=null;return c&&(d=c.getLookupInstance(b)),d}});if(Sage.Services.hasService("LookupService")){Sage.Services.getService("LookupService");"Sage.MainView.ActivityMgr.AttendeeLookup.LookupService"!==actSvc.declaredClass&&(Sage.Services.removeService("LookupService"),Sage.Services.addService("LookupService",(new d)()))}else Sage.Services.addService("LookupService",new d);return d()})},"Sage/MainView/ActivityMgr/AttendeeLookup/ContactLookupConfig":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig","Sage/UI/SDataLookup","dojo/i18n!./nls/ContactLookupConfig","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){return d("Sage.MainView.ActivityMgr.AttendeeLookup.ContactLookupConfig",[a],{constructor:function(){e.mixin(this,c),this.lookupType=b,this._initConfig()},_initConfig:function(){this.id="_contactLookup",this.lookupName="Contact",this.lookupDisplayName="Contact Lookup",this.entityName="Contact",this.dialogTitle=this.dialogTitleText,this.cells=null,this.cells=this.getCells(),this.defaultCell={sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1,pickListName:null,defaultValue:""},this.storeOptions={resourceKind:"contacts",select:["LastName","FirstName","Title","Type","Account/$key","Account/AccountName","ContactUser/Userid","Address/Timezone"],sort:[{attribute:"LastName"}]},this.preFilters=[],this.gridOptions={},this.query={},this.displayMode=5,this.isModal=!0,this.initialLookup=!1,this.seedValue="X",this.seedProperty="Account.Id"},getCells:function(){return this.cells?this.cells:(this.cells=[{label:this.colFirstName,field:"FirstName"},{label:this.colLastName,field:"LastName"},{label:this.colTitle,field:"Title"},{label:this.colAccount,field:"AccountName"},{label:this.colWorkPhone,field:"WorkPhone"},{label:this.colEmail,field:"Email"}],this.cells)},doSelected:function(a){alert("override the doSelect method")},getConfig:function(a){return{id:this.id+"_base_"+a,btnToolTip:"",structure:this.cells,gridOptions:this.gridOptions,displayMode:this.displayMode,storeOptions:this.storeOptions,isModal:this.isModal,initialLookup:this.initialLookup,preFilters:this.preFilters,query:this.query,seedValue:this.seedValue,seedProperty:this.seedProperty,overrideSeedValueOnSearch:!0,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:this.doSelected,cancelText:this.cancelText}},getLookupInstance:function(a){var b=this.getConfig(a);return new this.lookupType(b)}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig":function(){define(["Sage/UI/Controls/Lookup","dojo/_base/declare"],function(a,b){return b("Sage.MainView.ActivityMgr.AttendeeLookup.BaseLookupConfig",null,{lookupName:"LookupName",lookupDisplayName:"Lookup Display Name",lookupType:a,entityName:"entityName",id:!1,cells:[],defaultCell:{sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1,picklistName:null,defaultValue:""},gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"someEntity",sort:[{attribute:"SortField"}]},displayMode:0,isModal:!0,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],query:{},dialogTitle:"Lookup",dialogButtonText:"Ok",allowClearingResult:!0,readonly:!0,showEntityInfoToolTip:!1,_nlsResources:{},constructor:function(){},rebuild:function(){this._lookup=null},getLookupInstance:function(a){var b=this.getConfig(a);return new this.lookupType(b)},addCell:function(a,b){},removeCell:function(a){},getCells:function(){return this.cells},getConfig:function(a){var b={id:this.id+"_base_"+a,structure:this.cells,gridOptions:this.gridOptions,storeOptions:this.storeOptions,isModal:this.isModal,displayMode:this.displayMode,initialLookup:this.initialLookup,preFilters:this.preFilters,returnPrimaryKey:this.returnPrimaryKey,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:function(){alert("override the doSelect method")}};return{id:this.id+"_"+a,allowClearingResult:this.allowClearingResult,readonly:this.readonly,showEntityInfoToolTip:this.showEntityInfoToolTip,config:b}}})})},"Sage/MainView/ActivityMgr/AttendeeLookup/LeadLookupConfig":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig","Sage/UI/SDataLookup","dojo/i18n!./nls/LeadLookupConfig","dojo/_base/declare","dojo/_base/lang"],function(a,b,c,d,e){return d("Sage.MainView.ActivityMgr.AttendeeLookup.LeadLookupConfig",[a],{constructor:function(){e.mixin(this,c),this.lookupType=b,this._initConfig()},_initConfig:function(){this.id="_leadLookup",this.lookupName="Lead",this.lookupDisplayName="Lead Lookup",this.entityName="Lead",this.dialogTitle=this.dialogTitleText,this.cells=null,this.cells=this.getCells(),this.defaultCell={sortable:!0,width:"150px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,useAsResult:!1,pickListName:null,defaultValue:""},this.storeOptions={resourceKind:"leads",select:["LastName","FirstName","Title","Type","Company","Address/Timezone"],sort:[{attribute:"LastName"}]},this.preFilters=[],this.gridOptions={},this.query={},this.isModal=!0,this.displayMode=5,this.initialLookup=!1},getCells:function(){return this.cells?this.cells:(this.cells=[{label:this.colFirstName,field:"FirstName"},{label:this.colLastName,field:"LastName"},{label:this.colTitle,field:"Title"},{label:this.colCompany,field:"Company"},{label:this.colWorkPhone,field:"WorkPhone"},{label:this.colEmail,field:"Email"}],this.cells)},getConfig:function(a){return{id:this.id+"_base_"+a,btnToolTip:"",structure:this.cells,gridOptions:this.gridOptions,displayMode:this.displayMode,storeOptions:this.storeOptions,isModal:this.isModal,initialLookup:this.initialLookup,preFilters:this.preFilters,query:this.query,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:function(){alert("override the doSelect method")},cancelText:this.cancelText}},getLookupInstance:function(a){var b=this.getConfig(a);return new this.lookupType(b)}})})},"Sage/Services/UserOptions":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(a,b){var c=b("Sage.Services.UserOptions",null,{constructor:function(b){this.inherited(arguments),dojo.mixin(this,b),b&&b.service||(this.service=a.getSDataService("system",!1,!0,!0))},get:function(a,b,c,d,e,f){var g=this._createRequest(a,b);void 0===f&&(f=!0),g&&g.read({success:c,failure:function(a){"function"==typeof d&&d(a)},scope:e||this,async:f})},set:function(b,c,d,e,f,g){var h=this._createRequest(b,c);f=f||function(a){},h&&h.read({success:dojo.hitch(h,function(b){b.value=d,a._removeFromLocalStorage("userOptions"),this.update(b,{success:e,scope:this})}),failure:f,scope:g||this})},getByCategory:function(a,b,c,d){var e=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);e.setResourceKind("userOptions"),e.setQueryArg("where","category eq '"+a+"'"),e.read({success:b,failure:function(a){"function"==typeof d&&d(a)},scope:c||this})},getByCategories:function(a,b,c){for(var d=new Sage.SData.Client.SDataResourceCollectionRequest(this.service),e="",f=",",g=0;g<a.length;g++)g==a.length-1&&(f=""),e+='"'+a[g]+'"'+f;d.setResourceKind("userOptions"),d.setQueryArg("where","category in ("+e+")"),d.setQueryArg("count","500"),d.read({success:b,failure:function(a){},scope:c||this})},_formatPredicate:function(a,b){return dojo.string.substitute("category eq '${0}' and name eq '${1}'",[b,a])},_createRequest:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(this.service);return c.setResourceSelector(this._formatPredicate(a,b)),c.setResourceKind("userOptions"),c},_virtuald:function(){var a=/^\/([^\/]+)\//.exec(location.pathname);return a?a[1]:""}});return Sage.Services.addService("UserOptions",new Sage.Services.UserOptions),Sage.UserOptionsService={getCommonOption:function(a,b,c){var d=c,e=Sage.Services.getService("UserOptions");e&&e.get(a,b,function(a){var b={category:a.category,option:a.name,optionValue:a.value};d&&d.call(window,b)})},setCommonOption:function(a,b,c,d){var e=Sage.Services.getService("UserOptions");e&&e.set(a,b,c,d)}},c})},"Sage/MainView/ActivityMgr/RecurringEditor":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","Sage/Utility/Activity","dijit/form/RadioButton","Sage/UI/Controls/Numeric","dijit/layout/StackContainer","dijit/layout/ContentPane","Sage/UI/NumberTextBox","dijit/form/CheckBox","dijit/form/Select","Sage/UI/Controls/DateTimePicker","dojo/date","dojo/i18n!./nls/RecurringEditor","dojo/text!./templates/RecurringEditor.html"],function(_Widget,_Templated,declare,lang,domClass,activityUtility,RadioButton,Numeric,StackContainer,ContentPane,NumberTextBox,CheckBox,Select,DateTimePicker,dDate,recurringEditorStrings,template){var _recurringCalculator=declare("Sage.MainView.ActivityMgr._RecurringCalculator",null,{startDate:new Date,initialStartDate:new Date,endDate:new Date,interval:1,occurances:1,activityRecurPeriodCode:0,recurPeriod:!1,editor:!1,constructor:function(a){lang.mixin(this,a)},calculateEndDate:function(){return isNaN(this.interval)||isNaN(this.occurances)||!this.recurPeriod||(this.endDate=dDate.add(this.startDate,this.recurPeriod,this.interval*this.occurances-this.interval)),this.endDate||this.startDate},calculateNumberOfOccurances:function(){var a=dDate.difference(this.startDate,this.endDate,this.recurPeriod),b=a/this.interval+1;return b=Math.floor(b)},set:function(a,b){switch(a.toLowerCase()){case"enddate":this.endDate=b,this.endDate.setHours(0),this.endDate.setMinutes(0);break;case"interval":this.interval=b;break;case"occurances":this.occurances=b;break;case"startdate":this.startDate=b,this.startDate.setHours(0),this.startDate.setMinutes(0);break;case"initialstartdate":this.initialStartDate=b,this.initialStartDate.setHours(0),this.initialStartDate.setMinutes(0);break;case"editor":this.editor=b;break;case"activityrecurperiodcode":this.activityRecurPeriodCode=b}},get:function(a){switch(a.toLowerCase()){case"enddate":return this.endDate;case"interval":return this.interval;case"occurances":return this.occurances;case"startdate":return this.startDate;case"editor":return this.editor;case"activityRecurPeriodCode":return this.activityRecurPeriodCode}return!1},_getTempStartDate:function(){return new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate())}}),dailyRecurringCalculator=declare("Sage.MainView.ActivityMgr.DailyRecurringCalculator",_recurringCalculator,{recurPeriod:"day"}),weeklyRecurringCalculator=declare("Sage.MainView.ActivityMgr.WeeklyRecurringCalculator",_recurringCalculator,{recurPeriod:"week",_checkedCount:0,_checkedDays:{},calculateEndDate:function(){if(this.editor){if(this.editor.countCheckedDays()<2)return isNaN(this.interval)||isNaN(this.occurances)||!this.recurPeriod||(this.endDate=dDate.add(this.startDate,this.recurPeriod,this.interval*this.occurances-this.interval)),this.endDate||this.startDate;for(var a=this.editor.getCheckedDays(),b=this._getTempStartDate(),c=this.occurances-1;c>0;)b=dDate.add(b,"day",1),c-=a[b.getDay()];return b}return this.endDate||this.startDate},calculateNumberOfOccurances:function(){var a=this.inherited(arguments),b=this.editor.countCheckedDays();if(b>1){var c=dDate.difference(this.startDate,this.endDate,"day"),d=dDate.difference(this.startDate,this.endDate,this.recurPeriod),e=0;if(7*d<=c){a=d*b;for(var f=c%7*-1,g=dDate.add(this.endDate,"day",f),h=this.editor.getCheckedDays();dDate.compare(this.endDate,g,"date")>=0;)h[g.getDay()]&&e++,g=dDate.add(g,"day",1)}a+=e}return a}}),monthlyRecurringCalculator=declare("Sage.MainView.ActivityMgr.MonthlyRecurringCalculator",_recurringCalculator,{recurPeriod:"month",calculateStartDate:function(){var a,b=lang.clone(this.initialStartDate),c=parseInt(this.editor._datesSelect.get("value"),10),d=parseInt(this.editor._weekdaySelect.get("value"),10),e=parseInt(this.editor._weeksSelect.get("value"),10);if(this.editor._rdoMonthlyOn.get("checked"))a=this.getNthDayOfMonth(this.initialStartDate,c),b=a;else if(this.editor._rdoMonthlyOnThe.get("checked")){a=activityUtility.setDateToNthWeekDay(this.initialStartDate,e,d),a.setHours(this.initialStartDate.getHours()),a.setMinutes(this.initialStartDate.getMinutes());var f=dojo.date.compare(this.initialStartDate,a,"date");0!=f&&(b=f>0?this.calculateFirstOccurrance(this.initialStartDate,a,e,d):a)}return b},calculateEndDate:function(){var a=this.inherited(arguments);if(5===this.activityRecurPeriodCode){var b=activityUtility.getNthWeekOfMonth(this.startDate),c=this.startDate.getDay();a=activityUtility.setDateToNthWeekDay(a,b,c)}return a},getNthDayOfMonth:function(a,b){var c=lang.clone(a);return a.getDate()>b&&(c=dojo.date.add(a,"month",1)),c.setDate(b),c},calculateFirstOccurrance:function(a,b,c,d){for(var e=b;dojo.date.compare(this.initialStartDate,e,"date")>0;)e=activityUtility.setDateToNthWeekDay(dojo.date.add(e,"month",1),c,d);return e}}),yearlyRecurringCalculator=declare("Sage.MainView.ActivityMgr.YearlyRecurringCalculator",_recurringCalculator,{recurPeriod:"year",calculateEndDate:function(){var a=this.inherited(arguments);if(8===this.activityRecurPeriodCode){var b=activityUtility.getNthWeekOfMonth(this.startDate),c=this.startDate.getDay();a.setMonth(this.startDate.getMonth()),a=activityUtility.setDateToNthWeekDay(a,b,c)}return a}}),recurringEditor=declare("Sage.MainView.ActivityMgr.RecurringEditor",[_Widget,_Templated],{activity:{},id:"",labelWidth:"80",startDate:new Date,initialStartDate:new Date,startDateChangedFromParent:!1,occurances:2,interval:1,activityRecurPeriodCode:0,recurringPeriods:{once:"once",daily:"daily",weekly:"weekly",monthly:"monthly",yearly:"yearly"},currentPeriod:"once",endCalculators:!1,_applyingActivityData:!1,widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){lang.mixin(this,recurringEditorStrings)},postMixInProperties:function(){if(!this.endCalculators){this.endCalculators={};var a={startDate:this.startDate,endDate:this.endDate,interval:1,occurances:1,editor:this};this.endCalculators[this.recurringPeriods.daily]=new dailyRecurringCalculator(a),this.endCalculators[this.recurringPeriods.weekly]=new weeklyRecurringCalculator(a),this.endCalculators[this.recurringPeriods.monthly]=new monthlyRecurringCalculator(a),this.endCalculators[this.recurringPeriods.yearly]=new yearlyRecurringCalculator(a)}},_setStartDateAttr:function(a){a.getMonth()===this.startDate.getMonth()&&a.getDate()===this.startDate.getDate()&&a.getFullYear()===this.startDate.getFullYear()||(this.startDateChangedFromParent=!0,this._applyingActivityData=!0,this.startDate=a,this.initialStartDate=a,this.dtp_startRecur.set("value",a),this._weeklySyncToStartDate(),this._monthlySyncToStartDate(),this._yearlySyncToStartDate(),this._calculateEnd(),this._applyingActivityData=!1,this.startDateChangedFromParent=!1)},_getStartDateAttr:function(){return this.startDate},_setOccurancesAttr:function(a){this.occurances=a,this.num_Occurances.set("value",a)},_getOccurancesAttr:function(){return this.occurances},_setActivityAttr:function(a){this.activity=a,this._setUI(),this._applyActivityData()},_getActivityAttr:function(){return this.activity},onTabShow:function(){this._panelContainer.resize()},_setUI:function(){var a=[];if(this._datesSelect.getOptions().length<1){for(var b=1;b<32;b++)a.push({value:b.toString(),label:b.toString()});this._datesSelect.addOption(a),this._yearDatesSelect.addOption(a)}this._monthNamesSelect.getOptions().length<1&&(a=[{value:"1",label:this.janText},{value:"2",label:this.febText},{value:"3",label:this.marText},{value:"4",label:this.aprText},{value:"5",label:this.mayText},{value:"6",label:this.junText},{value:"7",label:this.julText},{value:"8",label:this.augText},{value:"9",label:this.sepText},{value:"10",label:this.octText},{value:"11",label:this.novText},{value:"12",label:this.decText}],this._monthNamesSelect.addOption(a),this._yearMonthNamesSelect.addOption(a)),this._weeksSelect.getOptions().length<1&&(a=[{value:"1",label:this.firstText},{value:"2",label:this.secondText},{value:"3",label:this.thirdText},{value:"4",label:this.fourthText},{value:"5",label:this.lastText}],this._weeksSelect.addOption(a),this._yearWeeksSelect.addOption(a)),this._weekdaySelect.getOptions().length<1&&(a=[{value:"1",label:this.monText},{value:"2",label:this.tueText},{value:"3",label:this.wedText},{value:"4",label:this.thurText},{value:"5",label:this.friText},{value:"6",label:this.satText},{value:"0",label:this.sunText}],this._weekdaySelect.addOption(a),this._yearWeekdaySelect.addOption(a))},_onceChanged:function(a){this._setUI(),a&&(this._panelContainer.selectChild(this._oncePanel),this.interval=1,this._updateRecurringPeriod(this.recurringPeriods.once))},_dailyChanged:function(a){a&&(this._panelContainer.selectChild(this._dailyPanel),this._dailyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.daily),this._toggleEndCalculatorVisibility(this._rdoDailyEvery.get("checked")))},_dailyUpdateInterval:function(){this.interval=this._rdoDailyEvery.get("checked")?this._dailyEveryText.get("value"):this._dailyEveryAfterText.get("value"),isNaN(this.interval)&&(this.interval=1)},_weeklyChanged:function(a){a&&(this._panelContainer.selectChild(this._weeklyPanel),this._weeklyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.weekly),this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked")))},_weeklySyncToStartDate:function(){this._clearCheckedWeekdays(),this._enforceWeekdayChecked()},_weeklyUpdateInterval:function(){this._enforceWeekdayChecked(),this.interval=this._rdoWeeklyEvery.get("checked")?this._weeklyEveryText.get("value"):this._weeklyEveryAfterText.get("value"),isNaN(this.interval)&&(this.interval=1)},_monthlyChanged:function(a){a&&(this._panelContainer.selectChild(this._monthlyPanel),this._monthlyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.monthly),this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked")))},_monthlyUpdateInterval:function(){this.interval=this._rdoMonthlyOn.get("checked")?this._monthlyEveryText.get("value"):this._rdoMonthlyOnThe.get("checked")?this._monthlyOnTheText.get("value"):this._monthlyAfterText.get("value"),isNaN(this.interval)&&(this.interval=1)},_monthlySyncToStartDate:function(){this._datesSelect.set("value",this.startDate.getDate().toString()),this._weekdaySelect.set("value",this.startDate.getDay().toString()),this._weeksSelect.set("value",activityUtility.getNthWeekOfMonth(this.startDate).toString())},_yearlyChanged:function(a){a&&(this._panelContainer.selectChild(this._yearlyPanel),this._yearlyUpdateInterval(),this._updateRecurringPeriod(this.recurringPeriods.yearly),this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked")))},_yearlyUpdateInterval:function(){this.interval=this._rdoYearlyOn.get("checked")?this._yearlyEveryText.get("value"):this._rdoYearlyEveryAfter.get("checked")?this._yearlyEveryAfterText.get("value"):1},_yearlySyncToStartDate:function(){this._monthNamesSelect.set("value",(this.startDate.getMonth()+1).toString()),this._yearDatesSelect.set("value",this.startDate.getDate().toString()),this._yearWeeksSelect.set("value",activityUtility.getNthWeekOfMonth(this.startDate).toString()),this._yearWeekdaySelect.set("value",this.startDate.getDay().toString()),this._yearMonthNamesSelect.set("value",(this.startDate.getMonth()+1).toString())},_updateRecurringPeriod:function(a){this._toggleEndCalculatorVisibility(a!==this.recurringPeriods.once),this.currentPeriod=a,this._calculateEnd(),this.onRecurPeriodChanged(a)},_toggleEndCalculatorVisibility:function(a){a?domClass.remove(this._startEndCalculator,"display-none"):domClass.add(this._startEndCalculator,"display-none")},_applyActivityData:function(){if(this._applyingActivityData=!0,this.activity&&this.activity.hasOwnProperty("Recurring")){if(this.startDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate),this.initialStartDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate),(this.activity.Timeless||activityUtility.isDateFiveSecondRuleTimeless(this.startDate))&&(this.startDate=new Date(this.startDate.getUTCFullYear(),this.startDate.getUTCMonth(),this.startDate.getUTCDate(),0,0,5)),this.activityRecurPeriodCode=this.activity.RecurPeriod,this.dtp_startRecur.set("value",this.startDate),!this.activity.Recurring)return this.rdo_Once.set("checked",!0),this._toggleEndCalculatorVisibility(!1),this._resetInterval(),this._weeklySyncToStartDate(),this._monthlySyncToStartDate(),this._yearlySyncToStartDate(),void(this._applyingActivityData=!1);switch(this._toggleEndCalculatorVisibility(!0),this.activity.RecurPeriod){case 0:case 1:this._applyDailyRecurringValues();break;case 2:case 3:this._applyWeeklyRecurringValues();break;case 4:case 5:case 6:this._applyMonthlyRecurringValues();break;case 7:case 8:case 9:this._applyYearlyRecurringValues();break;default:this.rdo_Once.set("checked",!0)}this._applyingActivityData=!1}},_applyEndCalculatorValues:function(){this.dtp_startRecur.set("value",this.startDate),this._rdoEndAfter.set("checked",!0),this.num_Occurances.set("value",this.activity.RecurIterations),this._calculateEnd()},_applyDailyRecurringValues:function(){this.rdo_Daily.set("checked",!0),this._toggleEndCalculatorVisibility(0===this.activity.RecurPeriod),this.interval=this.activity.RecurPeriodSpec,0===this.activity.RecurPeriod?(this._rdoDailyEvery.set("checked",!0),this._dailyEveryText.set("value",this.activity.RecurPeriodSpec),this._applyEndCalculatorValues()):1===this.activity.RecurPeriod&&(this._rdoDailyEveryAfter.set("checked",!0),this._dailyEveryAfterText.set("value",this.activity.RecurPeriodSpec))},_weekDayValues:{sun:131072,mon:262144,tue:524288,wed:1048576,thu:2097152,fri:4194304,sat:8388608},_resetInterval:function(){this._rdoDailyEvery.set("checked",!0),this._dailyEveryText.set("value","1"),this._dailyEveryAfterText.set("value","1"),this._rdoWeeklyEvery.set("checked",!0),this._weeklyEveryText.set("value","1"),this._weeklyEveryAfterText.set("value","1"),this._rdoMonthlyOn.set("checked",!0),this._monthlyEveryText.set("value","1"),this._monthlyOnTheText.set("value","1"),this._monthlyAfterText.set("value","1"),this._rdoYearlyOn.set("checked",!0),this._yearlyEveryText.set("value","1"),this._yearlyEveryAfterText.set("value","1"),this.num_Occurances.set("value","2"),this.occurances=2,this._intervalChanged(2)},_clearCheckedWeekdays:function(){this._chkSaturday.set("checked",!1),this._chkFriday.set("checked",!1),this._chkThursday.set("checked",!1),this._chkThursday.set("checked",!1),this._chkWednesday.set("checked",!1),this._chkTuesday.set("checked",!1),this._chkMonday.set("checked",!1),this._chkSunday.set("checked",!1)},_applyWeeklyRecurringValues:function(){this.rdo_Weekly.set("checked",!0),this._toggleEndCalculatorVisibility(2===this.activity.RecurPeriod),this._clearCheckedWeekdays(),this.interval=this._evalRecurperiodspec(this.activity.RecurPeriodSpec,this.activity.RecurPeriod),2===this.activity.RecurPeriod?(this._rdoWeeklyEvery.set("checked",!0),this._weeklyEveryText.set("value",this.interval),this._enforceWeekdayChecked(),this._applyEndCalculatorValues()):3===this.activity.RecurPeriod&&(this._rdoWeeklyEveryAfter.set("checked",!0),this._weeklyEveryAfterText.set("value",this.interval))},_evalRecurperiodspec:function(a,b){return a>this._weekDayValues.sat&&(a-=this._weekDayValues.sat,2===b&&this._chkSaturday.set("checked",!0)),a>this._weekDayValues.fri&&(a-=this._weekDayValues.fri,2===b&&this._chkFriday.set("checked",!0)),a>this._weekDayValues.thu&&(a-=this._weekDayValues.thu,2===b&&this._chkThursday.set("checked",!0)),a>this._weekDayValues.wed&&(a-=this._weekDayValues.wed,2===b&&this._chkWednesday.set("checked",!0)),a>this._weekDayValues.tue&&(a-=this._weekDayValues.tue,2===b&&this._chkTuesday.set("checked",!0)),a>this._weekDayValues.mon&&(a-=this._weekDayValues.mon,2===b&&this._chkMonday.set("checked",!0)),a>this._weekDayValues.sun&&(a-=this._weekDayValues.sun,2===b&&this._chkSunday.set("checked",!0)),a},_applyMonthlyRecurringValues:function(){this.rdo_Monthly.set("checked",!0);var a=this.activity.RecurPeriodSpec;if(4===this.activity.RecurPeriod)this._rdoMonthlyOn.set("checked",!0),a=this._evalRecurperiodspec(a,this.activity.RecurPeriod),a>65e3&&(a%=65536),this._monthlyEveryText.set("value",a),this._datesSelect.set("value",this.startDate.getDate().toString()),this._applyEndCalculatorValues();else if(5===this.activity.RecurPeriod){this._rdoMonthlyOnThe.set("checked",!0);var b=Math.floor(a/524288)-1;a%=524288;var c=Math.floor(a/65536);a%=65536,c++,this._weeksSelect.set("value",c.toString()),this._weekdaySelect.set("value",b.toString()),this._monthlyOnTheText.set("value",a),this._applyEndCalculatorValues()}else 6===this.activity.RecurPeriod&&(this._rdoMonthlyAfter.set("checked",!0),a>1048576&&(a-=1048576)>1e3&&(a%=65536),this._monthlyAfterText.set("value",a));this.interval=a,this._toggleEndCalculatorVisibility(6!==this.activity.RecurPeriod)},_applyYearlyRecurringValues:function(){var mon;this.rdo_Yearly.set("checked",!0);var recspec=this.activity.RecurPeriodSpec;if(7===this.activity.RecurPeriod){this._rdoYearlyOn.set("checked",!0),recspec=recspec>38797312?eval(recspec)-38797312:eval(recspec)-17825792,recspec>1e3&&(recspec=this._evalRecurperiodspec(recspec,this.activity.RecurPeriod),recspec%=65536),this._yearlyEveryText.set("value",recspec),mon=this.startDate.getMonth(),mon++,this._monthNamesSelect.set("value",mon.toString());var d=this.startDate.getDate();this._yearDatesSelect.set("value",d.toString()),this._applyEndCalculatorValues()}else if(8===this.activity.RecurPeriod){this._rdoYearlyOnThe.set("checked",!0),mon=Math.floor(recspec/4194304),recspec%=4194304;var wDay=Math.floor(recspec/524288)-1;recspec%=524288;var mWeek=Math.floor(recspec/65536);mWeek++,recspec%=65536,this._yearWeeksSelect.set("value",mWeek.toString()),this._yearWeekdaySelect.set("value",wDay.toString()),this._yearMonthNamesSelect.set("value",mon.toString()),this._applyEndCalculatorValues()}else 9===this.activity.RecurPeriod&&(this._rdoYearlyEveryAfter.set("checked",!0),recspec>38797312&&(recspec-=38797312)>1e3&&(recspec=this._evalRecurperiodspec(recspec,this.activity.RecurPeriod),recspec%=65536),this._yearlyEveryAfterText.set("value",recspec));this.interval=recspec,this._toggleEndCalculatorVisibility(9!==this.activity.RecurPeriod)},_dailyEveryChanged:function(){this._setDailyUI(),this._applyChangesToActivity()},_setDailyUI:function(){var a=this._rdoDailyEvery.get("checked");this._dailyEveryText.set("disabled",!a),this._dailyEveryAfterText.set("disabled",a),this._dailyUpdateInterval(),this.activityRecurPeriodCode=this._rdoDailyEvery.get("checked")?0:1,this._toggleEndCalculatorVisibility(a)},_weeklyEveryChanged:function(){this._setWeeklyUI(),this._applyChangesToActivity()},_setWeeklyUI:function(){var a=!this._rdoWeeklyEvery.get("checked");this._weeklyEveryText.set("disabled",a),this._chkMonday.set("disabled",a),this._chkTuesday.set("disabled",a),this._chkWednesday.set("disabled",a),this._chkThursday.set("disabled",a),this._chkFriday.set("disabled",a),this._chkSaturday.set("disabled",a),this._chkSunday.set("disabled",a),this._weeklyEveryAfterText.set("disabled",!this._rdoWeeklyEveryAfter.get("checked")),this._enforceWeekdayChecked(),this._weeklyUpdateInterval(),this.activityRecurPeriodCode=this._rdoWeeklyEvery.get("checked")?2:3,this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked"))},_dayChecked:function(){this._enforceWeekdayChecked(),this._calculateEnd()},_enforceWeekdayChecked:function(){var a=this.countCheckedDays();if(a<1){switch(this.startDate.getDay()){case 0:this._chkSunday.set("checked",!0);break;case 1:this._chkMonday.set("checked",!0);break;case 2:this._chkTuesday.set("checked",!0);break;case 3:this._chkWednesday.set("checked",!0);break;case 4:this._chkThursday.set("checked",!0);break;case 5:this._chkFriday.set("checked",!0);break;case 6:this._chkSaturday.set("checked",!0)}}a>this.occurances&&this._setOccurancesAttr(a)},getCheckedDays:function(){return[this._chkSunday.get("checked")?1:0,this._chkMonday.get("checked")?1:0,this._chkTuesday.get("checked")?1:0,this._chkWednesday.get("checked")?1:0,this._chkThursday.get("checked")?1:0,this._chkFriday.get("checked")?1:0,this._chkSaturday.get("checked")?1:0]},countCheckedDays:function(){for(var a=0,b=this.getCheckedDays(),c=0;c<b.length;c++)a+=Number(b[c]);return a},_monthlyOnChanged:function(){this._setMonthlyUI(),this._rdoMonthlyAfter.get("checked")&&this._applyChangesToActivity()},_setMonthlyUI:function(){var a=!this._rdoMonthlyOn.get("checked");this._monthlyEveryText.set("disabled",a),this._datesSelect.set("disabled",a),a=!this._rdoMonthlyOnThe.get("checked"),this._monthlyOnTheText.set("disabled",a),this._weeksSelect.set("disabled",a),this._weekdaySelect.set("disabled",a),this._monthlyAfterText.set("disabled",!this._rdoMonthlyAfter.get("checked")),this._monthlyUpdateInterval(),this.activityRecurPeriodCode=this._rdoMonthlyOn.get("checked")?4:this._rdoMonthlyOnThe.get("checked")?5:6,this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked")),this.activityRecurPeriodCode<6&&this._calculateEnd()},_monthlyValidateEndDate:function(){if(this.rdo_Monthly.get("checked")){var a=this.dtp_endRecur.get("value");if(this._rdoMonthlyOn.get("checked")){var b=parseInt(this._datesSelect.get("value"),10);if(a.getDate()!==b)return a.setDate(b),this.dtp_endRecur.set("value",a),!1}else if(this._rdoMonthlyOnThe.get("checked")){var c=parseInt(this._weekdaySelect.get("value"),10),d=parseInt(this._weeksSelect.get("value"),10);if(activityUtility.getNthWeekOfMonth(a)!==d||a.getDay()!==c)return a=activityUtility.setDateToNthWeekDay(a,d,c),this.dtp_endRecur.set("value",a),!1}}return!0},_yearlyOnChanged:function(){this._setYearlyUI(),this._applyChangesToActivity()},_setYearlyUI:function(){var a=!this._rdoYearlyOn.get("checked");this._yearlyEveryText.set("disabled",a),this._monthNamesSelect.set("disabled",a),this._yearDatesSelect.set("disabled",a),a=!this._rdoYearlyOnThe.get("checked"),this._yearWeeksSelect.set("disabled",a),
this._yearWeekdaySelect.set("disabled",a),this._yearMonthNamesSelect.set("disabled",a),this._yearlyEveryAfterText.set("disabled",!this._rdoYearlyEveryAfter.get("checked")),this._yearlyUpdateInterval(),this.activityRecurPeriodCode=this._rdoYearlyOn.get("checked")?7:this._rdoYearlyOnThe.get("checked")?8:9,this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked"))},_yearlyValidateEndDate:function(){var a=!0;if(this.rdo_Yearly.get("checked")){var b=this.dtp_endRecur.get("value"),c=this.startDate.getMonth();if(b.getMonth()!==c&&(a=!1,b.setMonth(c)),this._rdoYearlyOn.get("checked")){var d=this.startDate.getDate();b.getDate!==d&&(a=!1,b.setDate(d))}else if(this._rdoYearlyOnThe.get("checked")){var e=parseInt(this._yearWeekdaySelect.get("value"),10),f=parseInt(this._yearWeeksSelect.get("value"),10);activityUtility.getNthWeekOfMonth(b)===f&&b.getDay()===e||(a=!1,b=activityUtility.setDateToNthWeekDay(b,f,e))}a||this.dtp_endRecur.set("value",b)}return a},_yearlyRecurDateChanged:function(){if(!this._applyingActivityData){var a,b=!1,c=new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());if(this._rdoYearlyOn.get("checked")){a=parseInt(this._monthNamesSelect.get("value"),10)-1;var d=parseInt(this._yearDatesSelect.get("value"),10);c.getMonth()!==a&&(c.setMonth(a),b=!0),c.getDate()!==d&&(c.setDate(d),b=!0)}else if(this._rdoYearlyOnThe.get("checked")){a=parseInt(this._yearMonthNamesSelect.get("value"),10)-1,c.getMonth()!==a&&(c.setMonth(a),b=!0);var e=parseInt(this._weekdaySelect.get("value"),10),f=parseInt(this._weeksSelect.get("value"),10),g=activityUtility.setDateToNthWeekDay(c,f,e);c.getDate()!==g.getDate()&&(g<new Date&&(g=dDate.add(g,"year",1),g=activityUtility.setDateToNthWeekDay(g,f,e)),c=g,b=!0)}b&&(c<new Date&&(c=dDate.add(c,"year",1)),this.startDateChangedFromParent||this.onStartDateChanged(c))}},_intervalChanged:function(a){this.interval=a,this._calculateEnd()},_recurringStartDateChanged:function(a){this.startDateChangedFromParent||this.onStartDateChanged(a)},_endCalcModeChanged:function(){},_numOccurancesChanged:function(a){this.occurances=a,this._calculateEndDate()},_endRecurChanged:function(a){this._rdoEndOn.get("checked")&&this._monthlyValidateEndDate()&&this._yearlyValidateEndDate()&&this._calculateOccurances()},_calculateEnd:function(){if("once"===this.currentPeriod)return void this._applyChangesToActivity();this._rdoEndAfter.get("checked")?(this.rdo_Monthly.get("checked")&&!this.startDateChangedFromParent&&this._calculateStartDate(),this._calculateEndDate()):this._calculateOccurances()},_calculateStartDate:function(){var a=this.endCalculators[this.currentPeriod];if(a&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(a),a.set("occurances",this.occurances);var b=a.calculateStartDate();this.startDate=b,this.dtp_startRecur.set("value",b),this.startDateChangedFromParent||this.onStartDateChanged(b)}},_calculateEndDate:function(){var a=this.endCalculators[this.currentPeriod];if(a&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(a),a.set("occurances",this.occurances);var b=a.calculateEndDate();this.dtp_endRecur.set("value",b),this._applyChangesToActivity()}},_applyCurrentValuesToCalculator:function(a){a.set("startDate",this.startDate),a.set("initialStartDate",this.initialStartDate),a.set("interval",this.interval),a.set("activityRecurPeriodCode",this.activityRecurPeriodCode)},_calculateOccurances:function(){var a=this.endCalculators[this.currentPeriod];if(a&&this._rdoEndOn.get("checked")){this._applyCurrentValuesToCalculator(a),a.set("endDate",this.dtp_endRecur.get("value"));var b=1;a.endDate<a.startDate?this.dtp_endRecur.set("value",this.startDate):b=a.calculateNumberOfOccurances(),this.occurances=b,this.num_Occurances.set("value",b),this._applyChangesToActivity()}},_applyChangesToActivity:function(){if(!this._applyingActivityData){if(this.rdo_Once.get("checked"))return this.activity.RecurIterations=0,this.activity.RecurPeriod=0,this.activity.RecurPeriodSpec=0,void(this.activity.Recurring=!1);var a=this._getCurrentRecperiod();this.activity.RecurPeriod=a;var b=0,c=this.num_Occurances.get("value");switch(a){case 0:case 1:this._dailyUpdateInterval(),1===a&&(c=-1);break;case 2:b=this._sumWeekDays(),this._weeklyUpdateInterval();break;case 3:b=1048576,this._weeklyUpdateInterval(),c=-1;break;case 4:b=1048576,this._monthlyUpdateInterval();break;case 5:b=this._sumMonthly(),this._monthlyUpdateInterval();break;case 6:b=1048576,this._monthlyUpdateInterval(),c=-1;break;case 7:b=38797312,this._yearlyUpdateInterval();break;case 8:b=this._sumYearly(),this.interval=1;break;case 9:b=38797312,this._yearlyUpdateInterval(),c=-1}this.activity.RecurIterations=c,this.activity.RecurPeriodSpec=b+this.interval,this.activity.Recurring=!0}},_getCurrentRecperiod:function(){return this.rdo_Daily.get("checked")?this._rdoDailyEvery.get("checked")?0:1:this.rdo_Weekly.get("checked")?this._rdoWeeklyEvery.get("checked")?2:3:this.rdo_Monthly.get("checked")?this._rdoMonthlyOn.get("checked")?4:this._rdoMonthlyOnThe.get("checked")?5:6:this.rdo_Yearly.get("checked")?this._rdoYearlyOn.get("checked")?7:this._rdoYearlyOnThe.get("checked")?8:9:0},_sumWeekDays:function(){var a=0;return this._chkSaturday.get("checked")&&(a+=this._weekDayValues.sat),this._chkFriday.get("checked")&&(a+=this._weekDayValues.fri),this._chkThursday.get("checked")&&(a+=this._weekDayValues.thu),this._chkWednesday.get("checked")&&(a+=this._weekDayValues.wed),this._chkTuesday.get("checked")&&(a+=this._weekDayValues.tue),this._chkMonday.get("checked")&&(a+=this._weekDayValues.mon),this._chkSunday.get("checked")&&(a+=this._weekDayValues.sun),a},_getNthOccurenceOfWeekDay:function(){for(var a=parseInt(this._weekdaySelect.get("value"),10),b=parseInt(this._weeksSelect.get("value"),10),c=new Date,d=0;d<7;d++){var e=new Date(c.getFullYear(),c.getMonth(),d+1);if(e.getDay()==a)return dojo.date.add(e,"day",7*(b-1))}},_sumMonthly:function(){return 524288*(parseInt(this._weekdaySelect.get("value"),10)+1)+65536*(parseInt(this._weeksSelect.get("value"),10)-1)},_sumYearly:function(){var a=parseInt(this._yearWeekdaySelect.get("value"),10)+1;return 4194304*parseInt(this._yearMonthNamesSelect.get("value"),10)+524288*a+65536*(parseInt(this._yearWeeksSelect.get("value"),10)-1)},_setReadOnly:function(a){var b=["rdo_Once","rdo_Daily","rdo_Weekly","rdo_Monthly","rdo_Yearly","_rdoDailyEvery","_dailyEveryText","_rdoDailyEveryAfter","_dailyEveryAfterText","_rdoWeeklyEvery","_weeklyEveryText","_chkMonday","_chkTuesday","_chkWednesday","_chkThursday","_chkFriday","_chkSaturday","_chkSunday","_rdoWeeklyEveryAfter","_weeklyEveryAfterText","_rdoMonthlyOn","_monthlyEveryText","_datesSelect","_rdoMonthlyOnThe","_monthlyOnTheText","_weeksSelect","_weekdaySelect","_rdoMonthlyAfter","_monthlyAfterText","_rdoYearlyOn","_yearlyEveryText","_monthNamesSelect","_yearDatesSelect","_rdoYearlyOnThe","_yearWeeksSelect","_yearWeekdaySelect","_yearMonthNamesSelect","_rdoYearlyEveryAfter","_yearlyEveryAfterText","dtp_startRecur","_rdoEndAfter","num_Occurances","_rdoEndOn","dtp_endRecur"];a?this._bulkSetProperty(this,b,"disabled",!0):(this._bulkSetProperty(this,b,"disabled",!1),this._setUI(),this._applyActivityData())},_bulkSetProperty:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=a[b[e]];f&&f.set(c,d)}},onStartDateChanged:function(a){},onRecurPeriodChanged:function(a){}});return recurringEditor})},"Sage/UI/Controls/Numeric":function(){define(["dojo/_base/html","dijit/_Widget","Sage/_Templated","Sage/UI/NumberTextBox","dojo/currency","dojo/_base/declare","dojo/_base/sniff","dojo/has"],function(a,b,c,d,e,f,g,h){return dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"}),f("Sage.UI.Controls.Numeric",[b,c],{displayModes:{AsHyperlink:0,AsControl:1,AsText:2},modeTemplates:{AsHyperlink:new Simplate(['<div data-dojo-type="dijit.form.Button" showLabel="true">ONE</div>']),AsControl:new Simplate(['<input  data-dojo-type="Sage.UI.NumberTextBox" ','dojoAttachEvent="onChange:onChanged" ','constraints="{ {%= $.constraintsToString() %} }" ','formatType="{%= $.formatType %}" ','ignorechange="true" ','required="{%= $.required %}" ','id="{%= $.id %}_NumberTextBox" ','style="width:inherit;" ','textAlign="{%= $.textAlign %}" ','hotKey="{%= $.hotKey %}" ','{% if($.disabled === "disabled") { %} ','disabled="disabled" ',"{% } %}",'{% if($.readonly === "readonly") { %} ','readonly="readonly" ',"{% } %}",'name="{%= $.name %}" type="text" ','value="{%= $.value %}" required="{%= $.required %}" dojoAttachPoint="focusNode" ','maxLength="{%= $.maxLength %}">']),AsText:new Simplate(['<div data-dojo-type="dijit.form.Button" showLabel="true">{%= $.formattedText() %}</div>'])},postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.domNode.parentNode&&"SPAN"==this.domNode.parentNode.tagName&&(this.domNode.parentNode.tabIndex=-1),this.class&&this.class.length>0&&this.domNode.firstChild&&(this.domNode.firstChild.className=this.class+" "+this.domNode.firstChild.className)},constructor:function(a){this.constraints={},this.inherited(arguments)},widgetTemplate:new Simplate(['<div style="width:inherit;" slxcompositecontrol="true" id="{%= $.id %}" >',"{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),value:0,autoPostBack:!1,width:15,maxLength:128,style:"",enabled:!0,visible:!0,readonly:"",disabled:"",hotKey:"",tabIndex:0,required:!1,displayMode:"AsControl",widgetsInTemplate:!0,styles:"text-align: right;",constraints:null,name:"",formattedText:function(){return this.value},formatType:"",constraintsToString:function(){var a,b=[];for(a in this.constraints)if(this.constraints.hasOwnProperty(a)){var c=this.constraints[a];"string"==typeof c&&(c="'"+c+"'"),b.push(a+":"+c)}return b.join(",")},onChanged:function(a){this.autoPostBack&&!h("ie")&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null)}})})},"Sage/UI/NumberTextBox":function(){define(["dijit/form/NumberTextBox","dijit/form/ValidationTextBox","dojo/number","Sage/Utility","dojo/_base/declare"],function(a,b,c,d,e){return e("Sage.UI.NumberTextBox",a,{shouldPublishMarkDirty:!0,autoPostBack:!1,hotKey:"",maxLength:"",formatType:"",attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"},maxLength:{node:"textbox",type:"attribute",attribute:"maxLength"}},textAlign:"",_getValueAttr:function(){var a=this.inherited(arguments);return void 0!==a&&!isNaN(a)||""===this.textbox.value||(a=this.getTextBoxValue()),a},_setValueAttr:function(a){this.constraints.locale=Sys.CultureInfo.CurrentCulture.name,this.inherited(arguments)},_onFocus:function(){if(this.onFocusFiring=!0,this.inherited(arguments),"percent"===this.constraints.type||"Percent"===this.formatType){var a=1e4*this.value/100;this.textbox.value=c.format(a,{places:this.constraints.places,locale:Sys.CultureInfo.CurrentCulture.name})}this.onFocusFiring=!1},_onBlur:function(){if(this.onBlurFiring=!0,("Percent"===this.formatType||"percent"===this.constraints.type)&&-1===this.textbox.value.indexOf(Sys.CultureInfo.CurrentCulture.numberFormat.PercentSymbol)){var a=this.getTextBoxValue(),b=a/100;"number"==typeof this.constraints.places?this.set("displayedValue",c.format(b,{places:this.constraints.places+2,locale:Sys.CultureInfo.CurrentCulture.name})):"string"==typeof this.constraints.places&&this.constraints.places.indexOf(",")>0&&this.constraints.places[2]?this.set("displayedValue",c.format(b,{places:Math.floor(this.constraints.places[2])+2,locale:Sys.CultureInfo.CurrentCulture.name})):this.set("displayedValue",c.format(b,{locale:Sys.CultureInfo.CurrentCulture.name}))}this.onBlurFiring=!1,this.inherited(arguments)},_sageUINumberTextBox_IsValid:function(){if("Percent"!==this.formatType||"percent"!==this.constraints.type)if(dojo.isIE){if(this.oldValue!==this.textbox.value){var a=this._restrictDD();a!==this.textbox.value&&(this.textbox.value=a)}this.oldValue=this.textbox.value}else this.textbox.value=this._restrictDD();this.inherited(arguments)},_restrictDD:function(){var a=this.textbox.value;return this.onBlurFiring||this.onFocusFiring?a:(this.constraints.places&&(a=d.restrictDecimalDigit(this.textbox.value,this.constraints.places)),a)},_sageUINumberTextBox_KeyPress:function(a){var b=void 0===this.constraints.type?this.formatType:null;d.restrictToNumberOnKeyPress(a,b)||dojo.stopEvent(a)},_sageUINumberTextBox_OnFocus:function(a){dojo.setSelectable(this.domNode,!0)},startup:function(){this.inherited(arguments);var a=this;dojo.style(a.focusNode,"textAlign",a.textAlign),a.value=a.value||0,a.onBlurFiring=!1,a.onFocusFiring=!1,this.connect(a,"isValid",a._sageUINumberTextBox_IsValid),this.connect(a,"onKeyPress",a._sageUINumberTextBox_KeyPress,!0),this.connect(a,"onFocus",a._sageUINumberTextBox_OnFocus,!0),this.ignorechange||this.connect(a,"onChange",a.valueChanged)},valueChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null)},getTextBoxValue:function(){var a=0,b=this.textbox.value;return""!==b&&null!==b||(b="0"),b.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)===b.length-1&&(b=b.slice(0,b.length-1)),a=c.parse(b,{locale:Sys.CultureInfo.CurrentCulture.name}),isNaN(a)&&(a=this.value),a}})})},"Sage/UI/Controls/DurationSelect":function(){define(["Sage/UI/Controls/_customSelectMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DurationSelect","dojo/_base/declare"],function(a,b,c,d,e,f,g){return g("Sage.UI.Controls.DurationSelect",a,{id:"",startTime:new Date,timeValue:new Date,valuesAreAfterStart:!0,_store:null,_storeData:{},labelFmt:"${amount} ${interval} (${endTime})",splitAmoutLabelFmt:"${amount1} ${interval1}, ${amount2} ${interval2} (${endTime})",minuteText:"minute",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days",timeIncrements:[0,5,10,15,30,60,120,240],items:[],itemsByDur:{},constructor:function(){dojo.mixin(this,f)},resetItems:function(){this.items=[],this.itemsByDur={}},_fillSelect:function(){if(this._select){this.resetItems();for(var a=!1,b=0;b<this.timeIncrements.length;b++){var c=this.timeIncrements[b];this.items.push(this._createItem(c)),a=a||this.value===c}!a&&this.value&&this.items.push(this._createItem(this.value)),this._storeData={identifier:"value",label:"label",items:this.items},this._store=new e({data:this._storeData}),this._select.set("store",this._store),this._select.set("searchAttr","label"),(this.value||0===this.value)&&this.set("value",this.value)}},_createItem:function(a){var b=this.startTime;0===b.getHours()&&0===b.getMinutes&&5===b.getSeconds()&&(b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0));var d;d=c.add(b,"minute",this.valuesAreAfterStart?a:-1*a);var e={value:a,dateValue:d,label:this._formatLabel(a,d)};return this.itemsByDur[a]=e,e},_formatLabel:function(a,b){var c,e={amount:a,interval:1===a?this.minuteText:this.minutesText,endTime:d.format(b,{selector:"time",locale:Sys.CultureInfo.CurrentCulture.name})},f=this.labelFmt;if(a>59){var g=a%60;if(c=Math.floor(a/60),0===g?(e.amount=c,e.interval=1===c?this.hourText:this.hoursText):(e.amount1=c,e.interval1=1===c?this.hourText:this.hoursText,e.amount2=g,e.interval2=1===g?this.minuteText:this.minutesText,f=this.splitAmoutLabelFmt),c>23){var h=Math.round(c/24);e.amount=h,e.interval=1===h?this.dayText:this.daysText,e.endTime=d.format(b,{selector:"datetime",locale:Sys.CultureInfo.CurrentCulture.name})}}return dojo.string.substitute(f,e)},_handleValueNotInStore:function(a){var b=this.text,c=/\(([\s\S]*)\)/,e=c.exec(a),f=c.exec(b);if(e&&f)if(e[1]===f[1])a=a.replace(e[0],"");else{var g=d.parse(e[1],{selector:"time"});if(g)return g.setFullYear(this.startTime.getFullYear()),g.setMonth(this.startTime.getMonth()),g.setDate(this.startTime.getDate()),this._setTimeValueAttr(g),this.value}var h=0;if("number"==typeof a)h=a;else if(a.indexOf(",")>0)for(var i=a.split(","),j=0;j<i.length;j++){var k=this._getMinutesFromStringPart(i[j]);k&&(h+=k)}else h=this._getMinutesFromStringPart(a);if(!h)return this._select.set("value",this.text),this.value;var l=this._createItem(h);return this.value=l.value,this.text=l.label,this._select.set("displayedValue",l.label),l.value},_setValueAttr:function(a){this._removeOldValueFromStore(),this.text=a,this.value=a,this._store&&this._store.fetchItemByIdentity({identity:a,onItem:function(b){b?(this._select.set("value",this._store.getValue(b,this._storeData.label)),this.value=this._store.getValue(b,this._storeData.identifier),this.text=this._store.getValue(b,this._storeData.label)):this._handleValueNotInStore(a)},onError:function(){},scope:this})},_removeOldValueFromStore:function(){for(var a=0;a<this.timeIncrements.length;a++)if(this.value===this.timeIncrements[a])return;delete this.itemsByDur[this.value];var b=this.items.length;for(a=0;a<b;a++)if(this.items[a].value===this.value||this.items[a].value[0]===this.value)return void this.items.splice(a,1)},_getMinutesFromStringPart:function(a){var b=a.trim().split(" "),c=parseInt(b[0],10);return!isNaN(c)&&(b.length>1&&this.hoursText.indexOf(b[1])>-1&&(c*=60),c)},_setStartTimeAttr:function(a){0!==c.compare(this.startTime,a,"datetime")&&(this.startTime=a,this._fillSelect())},_setValuesAreAfterStartAttr:function(a){this.valuesAreAfterStart!==a&&(this.valuesAreAfterStart=a,this._fillSelect())},_getTimeValueAttr:function(){if(this.itemsByDur.hasOwnProperty(this.value)){var a=this.itemsByDur[this.value].dateValue;return dojo.isArray(a)?a[0]:a}if(this.value&&this.startTime){var b=c.add(this.startTime,"minute",this.valuesAreAfterStart?this.value:-1*this.value);return this.dateValue=b,this.dateValue}return null},_setTimeValueAttr:function(a){if(a){this.items.length<1&&this._fillSelect();var b=this.startTime;0===b.getHours()&&0===b.getMinutes&&5===b.getSeconds()&&(a=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds()));for(var d in this.itemsByDur)if(d&&this.itemsByDur[d].dateValue){var e=dojo.isArray(this.itemsByDur[d].dateValue)?this.itemsByDur[d].dateValue[0]:this.itemsByDur[d].dateValue;if(0===c.compare(e,a,"datetime"))return this.set("value",this.itemsByDur[d].value),this.text=this.itemsByDur[d].label,void this._select.set("displayedValue",this.itemsByDur[d].label)}var f=c.difference(this.startTime,a,"minute");f<0&&(f*=-1);var g={value:f,dateValue:a,label:this._formatLabel(f,a)};this.set("value",f),this.text=g.label,this.itemsByDur[f]=g,this._select.set("displayedValue",g.label)}},_setTimeIncrementsAttr:function(a){this.timeIncrements!==a&&(this.timeIncrements=a,this._fillSelect())}})})},"Sage/UI/Controls/_customSelectMixin":function(){define(["dijit/_Widget","Sage/_Templated","dijit/form/ComboBox","dojo/_base/declare"],function(a,b,c,d){return d("Sage.UI.Controls._customSelectMixin",[a,b],{widgetsInTemplate:!0,disabled:!1,value:"",text:"",widgetTemplate:new Simplate(["<div>",'<select dojoType="dijit.form.ComboBox" id="{%= $.id %}_select" labelAttr="label" dojoAttachPoint="_select" dojoAttachEvent="onChange:_onChange"></select>',"</div>"]),postCreate:function(){this.inherited(arguments),this._fillSelect()},_fillSelect:function(){},_setValueAttr:function(a){this.text=a,this.value=a,this._store&&this._store.fetchItemByIdentity({identity:a,onItem:function(b){b?(this._select.set("value",this._store.getValue(b,this._storeData.label)),this.value=this._store.getValue(b,this._storeData.identifier),this.text=this._store.getValue(b,this._storeData.label)):this._handleValueNotInStore(a)},onError:function(){},scope:this})},_getValueAttr:function(){return this._select.item&&this._store&&(this.value=this._store.getValue(this._select.item,this._storeData.identifier)),this.value},_onChange:function(a){if(this.value!==a&&this.text!==a){if(this._select.item){var b=this._select.item;this.value=this._store.getValue(b,this._storeData.identifier),this.text=this._store.getValue(b,this._storeData.label)}else this.value=this._handleValueNotInStore(a);this.onChange(this.value)}},_handleValueNotInStore:function(a){return this.text=a,this.value=a,a},_getTextAttr:function(){return this.text},_setTextAttr:function(a){this.text=a,this._select.set("displayedValue",a)},_setDisabledAttr:function(a){this.disabled=a,this._select.set("disabled",a)},_getDisabledAttr:function(){return this.disabled=this._select.get("disabled"),this.disabled},onChange:function(){}})})},"Sage/Services/CalendarSecurityService":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/_base/declare"],function(a,b,c){var d=c("Sage.Services.CalendarSecurityService",null,{_rawList:[],_accessList:{},_dataAvailable:!1,constructor:function(a){this._dataAvailable=!1,this._loading=!1},_waiting:[],hasAccess:function(a,b,c,d){if(this._dataAvailable){var e=this._accessList[a],f=!1;e&&(f=e[b]),c&&c.call(d||this,f)}else this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.hasAccess(a,b,c,d)})),this._loading||this._loadData()},getListByAccessLevel:function(a,b,c,d,e){var f=d||"userid",g=e||"name";if(this._dataAvailable){for(var h=[],i=0;i<this._rawList.length;i++){var j=this._rawList[i];if("view"===a||j[a]){var k={};k[f]=j.accessUserId,k[g]=j.accessUserName,h.push(k)}}b.call(c||this,h)}else this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.getListByAccessLevel(a,b,c,d,e)})),this._loading||this._loadData()},_loadData:function(c,d,e){this._loading=!0;var f=a.getSDataService("mashups",!1,!0,!0),g=b.getClientContextByKey("userID")||"";d=d||100,c=c||1;var h=this,i=new Sage.SData.Client.SDataNamedQueryRequest(f);i.setApplicationName("$app"),i.setResourceKind("mashups"),i.uri.setCollectionPredicate("'UserCalendarQueries'"),i.setQueryName("execute"),i.setQueryArg("_resultName","UserHasAccessToTheseCalendars"),i.setQueryArg("_userId",g),i.setQueryArg("startIndex",c),i.setQueryArg("count",d),i.read({success:function(a){var b=a.$totalResults;b>100&&b>c+d?(c=1==c?c+d-1:c+d,h._loadData(c,b-c,a.$resources)):e?(e.push.apply(e,a.$resources),h._dataReceived(e)):h._dataReceived(a.$resources)},failure:function(){},scope:this})},_dataReceived:function(a){this._rawList=a;var b;for(b=0;b<this._rawList.length;b++){var c=this._rawList[b];this._accessList[c.accessUserId]={name:c.accessUserName,userid:c.accessUserId,allowAdd:c.allowAdd,allowDelete:c.allowDelete,allowEdit:c.allowEdit,allowSync:c.allowSync}}for(this._dataAvailable=!0,this._loading=!1,this.onDataAvailable(),b=0;b<this._waiting.length;b++)dojo.disconnect(this._waiting[b]);this._waiting=[]},onDataAvailable:function(){}});Sage.Services.addService("CalendarSecurityService",new d)})},"Sage/MainView/ActivityMgr/EditEventEditor":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Toolbar","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Textarea","dijit/form/ComboBox","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","dijit/Dialog","Sage/UI/Dialogs","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/EditEventEditor","dijit/focus","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return t("Sage.MainView.ActivityMgr.EditEventEditor",[a,b],{eventId:null,mode:!1,_dialog:!1,_currentUserId:null,_eventService:!1,_eventData:!1,_eventStore:!1,_bindingMgr:!1,_eventChangeConnection:!1,lup_User:!1,eventDefaultValues:{},eventConnections:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="eventDialog" title="" dojoAttachPoint="_dialog" >','<div class="event-dialog">','<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_event" title="" dojoAttachPoint="cp_Event" class="tabContent">','<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="140">','<div data-dojo-type="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" label="{%= $.lblStartDateText %}" id="{%= $.id%}_tb_StartDate" name="tb_StartDateName" dojoAttachPoint="tb_StartDate" displayDate="true" displayTime="false"  ></div>','<div data-dojo-type="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" label="{%= $.lblEndDateText %}" id="{%= $.id%}_tb_EndDate" name="tb_EndDateName" dojoAttachPoint="tb_EndDate" displayDate="true" displayTime="false" ></div>','<select  dojoAttachPoint="tb_DayType" data-dojo-type="dijit.form.ComboBox" required="false" name="tb_DayType"  label="{%= $.lblDayTypeText %}" id="{%= $.id%}_tb_DayType" >','<option value="Active" >{%=$.eventTypeActiveText %}</option>','<option value="Business Trip" >{%=$.eventTypeBusinessTripText %}</option>','<option value="Conference" >{%=$.eventTypeConferenceText%}</option>','<option value="Holiday" selected="selected" >{%=$.eventTypeHolidayText%}</option>','<option value="Off" >{%=$.eventTypeOffText%}</option>','<option value="Trade Show" >{%=$.eventTypeTradeShowText%}</option>','<option value="Unavailable" >{%=$.eventTypeUnavailableText%}</option>','<option value="Vacation" >{%=$.eventTypeVacationText%}</option>',"</select>",'<input data-dojo-type="dijit.form.TextBox" id="{%= $.id %}_tb_Location" label="{%= $.lblLocationText %}" dojoAttachPoint="tb_Location" maxLength="255" />','<textarea data-dojo-type="dijit.form.SimpleTextarea" label="{%= $.lblDescriptionText %}" id="{%= $.id%}_tb_Description" name="tb_Description" dojoAttachPoint="tb_Description" rows="4" cols="1"  maxLength="128"  ></textarea>','<div class="event-dialog remove-padding">','<div dojoType="dijit.layout.ContentPane" label="{%= $.lblUserText %}" dojoAttachPoint="container_UserLup" class="remove-padding lookup-container"></div>',"</div>","</div>","</div>",'<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.btnOkayText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCancelText %}</div>',"</div>","</div>","</div>","</div>"]),constructor:function(){dojo.mixin(this,u),this._eventService=q.getSDataService("dynamic"),this._setEventStore(),this._currentUserId=p.getClientContextByKey("userID")||""},destroy:function(){this._eventChangeConnection&&(dojo.disconnect(this._eventChangeConnection),this._eventChangeConnection=!1),this._bindingMgr&&this._bindingMgr.destroy(),this.lup_User&&this.lup_User.destroy(),this.inherited(arguments)},show:function(a){this.lup_User||this._createUserLookup(),"New"===this.mode?this._dialog.set("title",this.titleScheduleText):this._dialog.set("title",this.titleEditText),this.eventDefaultValues=a||{},this._loadData(),this._dialog.set("refocus",!1),this._dialog.show(),this._dialog.helpIcon||(s.mixin(this._dialog,new r),this._dialog.createHelpIconByTopic("addevent"))},hide:function(){this._dialog.hide()},resize:function(){},_setModeAttr:function(a){this.mode=a,0===a.indexOf("New")&&(this.mode="New",this._eventData=!1)},_setEventIdAttr:function(a){this.eventId!==a&&(this.eventId=a,this._eventData=!1)},_getEventIdAttr:function(){return this.eventId},_setEventStore:function(){this._eventStore||(this._eventStore=new l({include:[],select:["StartDate","EndDate","Description","Type","Location","UserId"],resourceKind:"events",service:this._eventService}))},onChange:function(a,b,c,d){},setMode:function(a){this._mode=a},_loadData:function(){this._eventData=!1,this._eventStore&&("New"!==this.mode?this._eventStore.fetch({predicate:"'"+this.eventId+"'",onComplete:this._receivedEvent,onError:this._requestFailure,scope:this}):this._eventStore.newItem({onComplete:function(a){p.setValue(a,"UserId",this._currentUserId),this._receivedEvent(a)},scope:this}))},_receivedEvent:function(a){"New"===this.mode?this._eventData=dojo.mixin(a,this.eventDefaultValues):this._eventData=a,this._bind()},_requestFailure:function(a,b,c){},_bind:function(){this._eventData&&(this._bindingMgr?this._bindingMgr.boundEntity&&this._eventData.$key===this._bindingMgr.boundEntity.$key?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this._eventData):(this._bindingMgr=new m({defaultBinding:{boundEntity:this._eventData},items:[{boundWidget:this.tb_StartDate,entityProperty:"StartDate",dataType:"date"},{boundWidget:this.tb_EndDate,entityProperty:"EndDate",dataType:"date"},{boundWidget:this.tb_DayType,entityProperty:"Type"},{boundWidget:this.tb_Description,entityProperty:"Description"},{boundWidget:this.tb_Location,entityProperty:"Location"}]}),this._eventChangeConnection=dojo.connect(this._bindingMgr,"onChange",this,"onChange")),this._bindUserLookup())},_bindUserLookup:function(){if(this._eventData.UserId)if(this._eventData.UserId===this._currentUserId){var a={$key:this._currentUserId,$descriptor:p.getClientContextByKey("userPrettyName")};this.lup_User.set("selectedObject",a)}else this._getUserInfoFor(this._eventData.UserId,function(a){this.lup_User.set("selectedObject",a)});else this.lup_User.set("selectedObject",null)},_getUserInfoFor:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(q.getSDataService("dynamic",!1,!0,!0));c.setResourceKind("userInfo"),c.setResourceSelector("'"+a+"'"),c.setQueryArg("precedence","0"),c.read({success:b,scope:this,failure:function(){}})},_createUserLookup:function(){var a={id:"_eventUser",structure:[{label:this.nameText,field:"Name",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"AllowAdd AND (AccessId eq '"+p.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupUserText,dialogButtonText:this.btnOkayText};this.lup_User=new Sage.UI.Controls.Lookup({id:"event_lu_user",config:a}),this.eventConnections.push(dojo.connect(this.lup_User,"onChange",this,"_userChanged")),dojo.place(this.lup_User.domNode,this.container_UserLup.domNode,"only")},_userChanged:function(a){p.setValue(this._eventData,"UserId",a?a.$key.substr(0,12):"")},datesValid:function(){var a=this.tb_StartDate.value,b=this.tb_EndDate.value;return b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0),this._eventData.EndDate=new Date(b.getFullYear(),b.getMonth(),b.getDate(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),this._eventData.StartDate=new Date(a.getFullYear(),a.getMonth(),a.getDate(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),!((a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0))>b)||(o.showError(this.invaildDatesText),!1)},_okClick:function(){var a=v.curNode;a&&a.blur(),setTimeout(w.hitch(this,function(){this.datesValid()&&("New"===this.mode?this._eventStore.saveNewEntity(this._eventData,this._successEventCreated,this._failedEventCreated,this):this._eventStore.save({scope:this,success:this._successEventUpdated,failure:this._failedEventUpdated}))}),1)},_cancelClick:function(){this.hide()},_successEventCreated:function(a){dojo.publish("/entity/event/create",[a,this]),this.hide()},_failedEventCreated:function(a){o.showError(this.errorText)},_successEventUpdated:function(a){dojo.publish("/entity/event/change",[a,this]),this.hide()},_failedEventUpdated:function(a){o.showError(this.errorText)}})})},"Sage/UI/TextBox":function(){define(["dijit/form/TextBox","dojo/_base/declare"],function(a,b){return b("Sage.UI.TextBox",a,{postCreate:function(){this.inherited(arguments),this._val=this.get("value"),""===this.get("value")&&this._val&&this.set("value",this._val),this.set("class","txt-ss-watermark")},
onFocus:function(){this.set("value",""),this.set("class","txt-ss")},forceFocus:function(a){this.set("value",a),this.set("class","txt-ss-watermark")},onBlur:function(){""===this.get("value")&&(this.set("class","txt-ss-watermark"),this.set("value",this._val))}})})},"Sage/MainView/ActivityMgr/QuickCompleteEditor":function(){define(["dijit/_Widget","Sage/_Templated","dijit/layout/ContentPane","dijit/form/Textarea","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","dijit/form/FilteringSelect","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/UI/Controls/SingleSelectPickList","dijit/Dialog","dojo/_base/declare","dojo/i18n!./nls/QuickCompleteEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return l("Sage.MainView.ActivityMgr.QuickCompleteEditor",[a,b],{_currentUserId:null,_individuallyHandler:!1,_nowHandler:!1,_asScheduledHandler:!1,_selectionContext:!1,lblcmdMessageText:"",lblInfoMessageText:"",lblResultText:"Result:",lblNoteText:"Note (append to all items):",btnCompleteIndividuallyText:"Individually",btnAsScheduledText:"As Scheduled",btnCompleteNowText:"Now",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",resultCompletedText:"Complete",titleText:"Quick Complete",widgetsInTemplate:!0,selectionContext:null,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="{%= $.id%}_qucikCompleteDialog" title="Quick Complete" dojoAttachPoint="_dialog" >','<div class="quickComplete-dialog">','<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_General" title="" dojoAttachPoint="cp_General">','<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="1" class="controlPropForm" labelWidth="140">','<div id="{%= $.id%}_div_actionMessage"  name="div_actionMessage" dojoAttachPoint="div_actionMessage"></div>',"<br>",'<select label="{%= $. lblResultText %}" id="{%= $.id%}_pk_Result" data-dojo-type="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Result" canEditText="true" itemMustExist="false" pickListName="To Do Result Codes" ></select>','<div data-dojo-type="dijit.form.SimpleTextarea"" label="{%= $.lblNoteText %}" id="{%= $.id%}_ta_Note" name="tb_Note" dojoAttachPoint="ta_Note"></div>',"</div>","<br>",'<div id="{%= $.id%}_div_cmdMessage"  name="div_cmdMessage" dojoAttachPoint="div_cmdMessage" style="font-weight:bold"></div>',"<br>",'<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_CompleteIndividually" name="btn_CompleteIndividually" dojoAttachPoint="btn_CompleteIndividually" dojoAttachEvent="onClick:_onCompleteIndividually" style="align:left" >{%= $.btnCompleteIndividuallyText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_btnAsScheduled" name="btn_AsScheduled" dojoAttachPoint="btn_AsScheduled" dojoAttachEvent="onClick:_onAsScheduled">{%= $.btnAsScheduledText %}</div>','<div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_CompleteNow" name="btn_CompleteNow" dojoAttachPoint="btn_CompleteNow" dojoAttachEvent="onClick:_onCompleteNow">{%= $.btnCompleteNowText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCancelText %}</div>',"</div>","</div>",'<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_processing" title="" dojoAttachPoint="cp_processing">','<div id="{%= $.id%}_div_processingMessage"  name="div_processingMessage" dojoAttachPoint="div_processingMessage"></div>','<div class="button-bar alignright">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Close" name="btn_Close" dojoAttachPoint="btn_Close" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCloseText %}</div>',"</div>","</div>","</div>","</div>","</div>"]),constructor:function(a){dojo.mixin(this,m),this._currentUserId=Sage.Utility.getClientContextByKey("userID")||""},destroy:function(){this._dialog.destroyRecursive(),this.destroyRecursive()},show:function(){this.selectionContext&&(this.div_actionMessage.innerHTML=this.actionMessage,this.div_cmdMessage.innerHTML=String.format(this.completeMessage,this.selectionContext.count),this._dialog.set("title",this.titleText)),dojo.style(this.cp_processing.domNode,"display","none"),this._dialog.show()},hide:function(){this.destroy()},resize:function(){},_showProcessing:function(){dojo.style(this.cp_General.domNode,"display","none"),dojo.style(this.cp_processing.domNode,"display","block"),this.div_processingMessage.innerHTML=String.format(this.processingMessage,this._selectionContext.count)},_onCompleteIndividually:function(){this.onCompleteIndividually(),this._dialog.hide()},_onCompleteNow:function(){this._showProcessing();var a={selectionContext:this.selectionContext,note:this.ta_Note.value,result:this.pk_Result.get("value"),resultCode:""};this.onCompleteNow(a),this._dialog.hide()},_onAsScheduled:function(){this._showProcessing();var a={selectionContext:this.selectionContext,note:this.ta_Note.value,result:this.pk_Result.get("value"),resultCode:""};this.onCompleteAsScheduled(a),this._dialog.hide()},_cancelClick:function(){this.onCancel(),this._dialog.hide()},onCompleteIndividually:function(){},onCompleteNow:function(a){},onCompleteAsScheduled:function(a){},onCancel:function(){}})})},"Sage/Services/ActivityActionProcessor":function(){define(["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","Sage/_Templated","dojo/i18n!./nls/ActivityActionProcessor","dojo/_base/declare"],function(a,b,c,d,e,f){return f("Sage.Services.ActivityActionProcessor",[c,d],{_dialog:!1,_currentUserId:null,_action:!1,_processing:!1,_selectionContext:!1,btnOkayText:"OK",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",processingText:"Processing request please wait...",failureText:"I'm sorry, the action was not successful an error occurred.",titleText:"Process",widgetsInTemplate:!0,widgetTemplate:new Simplate(["<div>",'<div data-dojo-type="dijit.Dialog" id="activityProcessActionDialog" title="{%= $.titleText%}" dojoAttachPoint="_dialog" style="width:400px">','<div class="activityProcess-dialog">','<div data-dojo-type="dijit.layout.ContentPane" id="{%= $.id%}_cp_envet_General" title="" dojoAttachPoint="cp_General">','<div data-dojo-type="dojox.layout.TableContainer" orientation="horiz" cols="1" class="controlPropForm" labelWidth="140">','<div id="{%= $.id%}_div_actionMessage"  name="div_actionMessage" dojoAttachPoint="div_actionMessage"></div>',"</div>","</div>",'<table class="button-bar"><tr><td class="alignright valignbottom">','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.btnOkayText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. btnCancelText %}</div>','<div data-dojo-type="dijit.form.Button"  id="{%= $.id%}_btn_Close" name="btn_Close" dojoAttachPoint="btn_Close" dojoAttachEvent="onClick:_closeClick">{%= $. btnCloseText %}</div>',"</td><tr></table>","</div>","</div>","</div>"]),constructor:function(){this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"",dojo.mixin(this,e)},destroy:function(){this.inherited(arguments)},start:function(a){this._processing=!1,this._selectionContext.count<1||(a?this._execute():(this._setDisplay(),this.show()))},show:function(){this._dialog.show()},hide:function(){this._action=null,this._dialog.hide()},resize:function(){},_setDisplay:function(){dojo.style(this.btn_Close.domNode,"visibility","hidden"),dojo.style(this.btn_OK.domNode,"visibility","visible"),dojo.style(this.btn_Cancel.domNode,"visibility","visible"),this._selectionContext&&(this.div_actionMessage.innerHTML=this._action.message,this._dialog.set("title",this._action.description))},_setActionAttr:function(a){this._action=a},_getActionAttr:function(){return this._action},_setSelectionContextAttr:function(a){this._selectionContext=a},_getSelectionContextAttr:function(){return this._selectionContextInfo},_execute:function(){if(!this._processing){var a=this;this.div_actionMessage.innerHTML=this.processingText,this._processing=!0,dojo.style(this.btn_Close.domNode,"visibility","visible"),dojo.style(this.btn_OK.domNode,"visibility","hidden"),dojo.style(this.btn_Cancel.domNode,"visibility","hidden"),this._action&&this._action.execute({scope:this,success:function(a,b){b.hide(),b.onActionComplete(a)},failure:function(b,c){c.onActionComplete(b),Sage.UI.Dialogs.showError(a.failureText)}})}},_okClick:function(){this._execute()},_cancelClick:function(){this.hide()},_closeClick:function(){this.hide()},onActionComplete:function(a){}})})},"Sage/Services/ActivityAction":function(){define(["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","dojo/_base/declare"],function(a,b,c,d){return d("Sage.Services.ActivityAction",[c],{_service:!1,_contract:"activities",_resourceKind:"service",_operationName:!1,_payLoad:!1,_selectionContext:!1,_publishMap:!1,_publishMapWithId:!1,_activityId:!1,_configuration:!1,_args:{},message:"Are you sure you want to continue?",description:"",constructor:function(){},execute:function(a){var b=this._publishMap,c=this._publishMapWithId,d=this._activityId,e=String.format("slxdata.ashx/slx/crm/-/{0}/{1}/{2}",this._contract,this._resourceKind,this._operationName);$.ajax({type:"POST",url:e,contentType:"application/json",data:dojo.toJson(this._args),processData:!1,success:function(e){b&&dojo.publish(b,[e,this]),c&&d&&dojo.publish(c,[d,this]),a&&a.success(e,a.scope)},failure:function(b){a&&a.failure(b,a.scope)}})},_setConfigurationAttr:function(a){this._configuration=a},_getConfigurationAttr:function(){return this._configuration},_setServiceAttr:function(a){this._service=a},_getServiceAttr:function(){return this._service},_setSelectionInfoAttr:function(a){this._selectionInfo=a},_getSelectionInfoAttr:function(){return this._selectionInfo},_setOperationNameAttr:function(a){this._operationName=a},_getOperationNameAttr:function(){return this._operationName},_setResourceKindAttr:function(a){this._resourceKind=a},_getResourceKindAttr:function(){return this._resourceKind},_setArgsAttr:function(a){this._args=a},_getArgsAttr:function(){return this._args},_setActionDescriptionAttr:function(a){this.description=a},_getActionDescriptionAttr:function(){return this.description},_setActionMessageAttr:function(a){this.message=a},_getActionMessageAttr:function(){return this.message},_setPublishMapAttr:function(a){this._publishMap=a},_setPublishMapWithIdAttr:function(a){this._publishMapWithId=a},_setActivityIdAttr:function(a){this._activityId=a}})})},"Sage/MainView/ActivityMgr/HistoryEditor":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/string","dojo/date/locale","Sage/Utility/Activity","Sage/Utility/File","dojo/_base/declare","dojo/i18n!./nls/HistoryEditor","dojo/text!./templates/HistoryEditor.html","dojo/dom-class","Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab","dijit/layout/ContentPane","dojo/dom-style","dojo/on","dojo/dom-geometry","dijit/Toolbar","dijit/layout/TabContainer","dijit/form/Textarea","dojox/layout/TableContainer","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_Widget,_Templated,SingleEntrySDataStore,BindingsManager,utility,_DialogHelpIconMixin,dojoLang,_DialogLoadingMixin,AttachmentList,sDataServiceRegistry,SageDialogs,dstring,locale,activityUtility,fileUtility,declare,historyEditorStrings,template,domClass,HistoryAttendeesTab,ContentPane,domStyle,on,domGeometry){dojo.requireLocalization("Sage.MainView.ActivityMgr","HistoryEditor");var historyEditor=declare("Sage.MainView.ActivityMgr.HistoryEditor",[_Widget,_Templated],{historyId:"",mode:"",id:"",activityType:"",_dialog:!1,_currentUserId:null,_activityService:!1,_historyData:!1,_historyStore:!1,_bindingMgr:!1,lup_Account:!1,lup_Contact:!1,lup_Opportunity:!1,lup_Ticket:!1,lup_Lead:!1,lup_Leader:!1,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},_isBinding:!1,_historySaved:!1,notnullfields:["ContactId","AccountId","OpportunityId","TicketId","LeadId"],historyDefaultValues:{},_doingFollowup:!1,_attachmentsSaved:!1,_attachmentList:!1,_tempIdForAttachments:!1,_hasAccess:!0,eventConnections:[],widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),constructor:function(){dojo.mixin(this,historyEditorStrings),this._historyService=Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),this._setupStore(),this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"",dojo.subscribe("/entity/attachment/create",this,this._updateHistoryETag),dojo.subscribe("/entity/attachment/update",this,this._updateHistoryETag),dojo.subscribe("/entity/attachment/delete",this,this._updateHistoryETag)},destroy:function(){this._historyChangeConnection&&(dojo.disconnect(this._historyChangeConnection),this._historyChangeConnection=!1),this._bindingMgr&&this._bindingMgr.destroy();for(var a=0;a<this.eventConnections.length;a++)dojo.disconnect(this.eventConnections[a]);this.lup_Account.destroy(),this.lup_Contact.destroy(),this.lup_Opportunity.destroy(),this.lup_Ticket.destroy(),this.lup_Lead.destroy(),this.lup_Leader.destroy(),this.eventConnections=[],this.inherited(arguments)},isFirstOpen:!0,show:function(a){this._dialog.set("refocus",!1),this.isFirstOpen&&(this.isFirstOpen=!1,this.connect(this._dialog,"onHide",this._cleanOnClose)),this.lup_Account||(this.createAccountLookup(),this.createContactLookup(),this.createOpportunityLookup(),this.createTicketLookup(),this.createLeadLookup(),this.createLeaderLookup()),this.historyDefaultValues={},"New"===this.mode&&(this.historyDefaultValues=a||{},this._loadData()),this.mode,"Complete"===this.mode?domClass.add(this.btn_Delete.domNode,"display-none"):domClass.remove(this.btn_Delete.domNode,"display-none"),"atNote"===this.activityType&&"New"===this.mode?dojo.addClass(this.result_Section.domNode,"display-none"):dojo.removeClass(this.result_Section.domNode,"display-none"),this._dialog.show(),this._dialog._standby||(dojoLang.mixin(this._dialog,new _DialogLoadingMixin),this._historyData||this._dialog.showLoading()),this._dialog.helpIcon||(dojoLang.mixin(this._dialog,new _DialogHelpIconMixin),this._dialog.createHelpIconByTopic("View_Edit_Details_of_a_History_Item")),"atNote"===this.activityType?this._dialog.set("helpTopic","addnote"):this._dialog.set("helpTopic","View_Edit_Details_of_a_History_Item"),this.tc_EditHistory.selectChild(this.cp_General),this._doingFollowup=!1},hide:function(a){this._dialog.hide(a),this.set("historyId","")},onHide:function(){},_onDlgHide:function(){this.onHide()},_cleanOnClose:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this.set("historyId",""),this._hideLookupTooltip(this.lup_Account),this._hideLookupTooltip(this.lup_Contact),this._hideLookupTooltip(this.lup_Opportunity),this._hideLookupTooltip(this.lup_Ticket),this._hideLookupTooltip(this.lup_Lead),this._hideLookupTooltip(this.lup_Leader)},_hideLookupTooltip:function(a){a&&a.hideTooltip()},_showAttachmentsTab:function(){var a=this;window.setTimeout(function(){a._ensureAttachmentList()},100)},_ensureAttachmentList:function(){var a=!1;if(!this._attachmentList){a=!0,this._attachmentList=new AttachmentList({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"historyId"});var b=this;this._attachmentList.startup(function(){b.cp_Attachments&&b.cp_Attachments.resize()})}(a||"New"!=this.mode)&&this._attachmentList.resetEntityContext()},_updateHistoryETag:function(a){if(this._dialog.open&&this.historyId){var b=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("dynamic"));b.setResourceKind("history"),b.setResourceSelector('"'+this.historyId+'"'),b.setQueryArg("precedence","0"),b.read({success:function(a){this._historyData.$etag=a.$etag},scope:this})}},_setModeAttr:function(a){this.mode=a;var b=this.tc_EditHistory.getIndexOfChild(dijit.byId("histAttendeesTabPane"));if(0===a.indexOf("New")){if(this._historyData=!1,b>0){this.tc_EditHistory.removeChild(dijit.byId("histAttendeesTabPane")),dijit.byId("histAttendeesTabPane").destroy();var c=this;window.setTimeout(function(){c._dialog.resize()},100)}}else if(b<0){this._addAttendeesTab();var c=this;window.setTimeout(function(){c._dialog.resize()},100)}},_setActivityTypeAttr:function(a){switch(a){case"PhoneCall":case"atPhoneCall":this.activityType="atPhoneCall";break;case"Meeting":case"atAppointment":this.activityType="atAppointment";break;case"ToDo":case"atToDo":this.activityType="atToDo";break;case"PersonalActivity":case"atPersonal":case"Personal":this.activityType="atPersonal";break;case"atNote":case"Note":default:this.activityType="atNote"}},_setHistoryIdAttr:function(a){this.historyId!==a&&(this.historyId=a,this._historyData=!1,""!==a&&this._loadData())},_getHistoryIdAttr:function(){return this.historyId},_setupStore:function(){this._historyStore||(this._historyStore=new SingleEntrySDataStore({include:[],resourceKind:"history",service:this._historyService}))},_loadData:function(){this._dialog._standby&&this._dialog.showLoading(),this._resetDataProps(),this._historyStore&&("New"!==this.mode?this._historyStore.fetch({predicate:'"'+this.historyId+'"',onComplete:this._receivedHistory,onError:this._requestFailure,scope:this}):this._historyStore.newItem({onComplete:function(a){Sage.Utility.setValue(a,"Type",this.activityType),this._receivedHistory(dojo.mixin(a,this.historyDefaultValues))},scope:this}))},_resetDataProps:function(){this._historyData=!1,this._historySaved=!1,this._attachmentList&&this._attachmentList.clearNewAttachments(),"atNote"===this.activityType&&"New"===this.mode&&Sage.Utility.setValue(this.historyDefaultValues,"Result",this.resultComplete)},_receivedHistory:function(a){this._historyData=a,this._tempIdForAttachments=!1;var b=Sage.Services.getService("ClientEntityContext"),c={EntityId:this._historyData.$key||"",EntityType:"Sage.Entity.Interfaces.IHistory",Description:this._historyData.$descriptor,EntityTableName:"HISTORY"};b.setTemporaryContext(c),this._ensureIdsNotNull(),"New"!==this.mode?this.activityType=a.Type:this._applyUserOptionsForNewHistory(),this._setUIForActivityType(a.Type),this._bind(),"atNote"===this.activityType&&"New"===this.mode||a.UserId!==this._currentUserId&&"ADMIN"!==this._currentUserId.trim()?dojo.addClass(this.btn_Delete.domNode,"display-none"):dojo.removeClass(this.btn_Delete.domNode,"display-none"),this._dialog._standby&&this._dialog.hideLoading()},_ensureIdsNotNull:function(){for(var a=0;a<this.notnullfields.length;a++)null===this._historyData[this.notnullfields[a]]&&(this._historyData[this.notnullfields[a]]="")},_applyUserOptionsForNewHistory:function(){var a=new Date;a.setSeconds(5),a.setMinutes(0),a.setHours(0),Sage.Utility.setValue(this._historyData,"Timeless",!0),Sage.Utility.setValue(this._historyData,"StartDate",Sage.Utility.Convert.toIsoStringFromDate(a)),Sage.Utility.setValue(this._historyData,"Duration","60")},_requestFailure:function(a,b,c){},_createBindings:function(){this._bindingMgr&&(this._bindingMgr.destroy(),this._bindingMgr=!1),this._bindingMgr=new BindingsManager({defaultBinding:{boundEntity:this._historyData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Result,entityProperty:"Result"},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.dtp_completedDate,dataType:"date",entityProperty:"CompletedDate"},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:!1},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.ta_Notes,entityProperty:"LongNotes"}]})},_bind:function(){this._historyData&&(this._bindingMgr?this._bindingMgr.boundEntity&&this._historyData.HistoryId===this._bindingMgr.boundEntity.HistoryId?this._bindingMgr.bind():this._bindingMgr.setBoundEntity(this._historyData):this._createBindings(),this._manualBind(),this._setUI())},_isNullOrWhitespace:function(a){return!a||""===a.trim()},_manualBind:function(){if(this._historyData){this._isBinding=!0;var a=this._historyData,b=this._isNullOrWhitespace(a.AccountId)?null:{$key:a.AccountId,$descriptor:a.AccountName};this.lup_Account.set("selectedObject",b);var c=this._isNullOrWhitespace(a.ContactId)?null:{$key:a.ContactId,$descriptor:a.ContactName};this.lup_Contact.set("selectedObject",c);var d=this._isNullOrWhitespace(a.OpportunityId)?null:{$key:a.OpportutunityId,$descriptor:a.OpportunityName};this.lup_Opportunity.set("selectedObject",d);var e=this._isNullOrWhitespace(a.TicketId)?null:{$key:a.TicketId,$descriptor:a.TicketNumber};this.lup_Ticket.set("selectedObject",e);var f=this._isNullOrWhitespace(a.LeadId)?null:{$key:a.LeadId,$descriptor:a.LeadName},g=this._isNullOrWhitespace(a.UserId)?null:{$key:a.UserId,$descriptor:a.UserName};this.lup_Leader.set("selectedObject",g),this.lup_Lead.set("selectedObject",f),this.tb_LeadCompanyName.set("value",this._isNullOrWhitespace(a.LeadId)?"":a.AccountName),this._updateLookupSeedValues(a.AccountId),this._isBinding=!1}},_accountChanged:function(a){if(!this._isBinding){var b=a?a.$key:"",c=a?a.$descriptor:"",d=this._historyData,e=this._isNullOrWhitespace(d.ContactId);d.AccountId=b,d.AccountName=c,d.PhoneNumber="",d.LeadId="",d.LeadName="",this._isBinding=!0,this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._updateLookupSeedValues(b),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),e&&(d.ContactId="",d.ContactName="",this.lup_Contact.set("selectedObject",null),this._setContactToCurrentAccountPrimary()),this._isBinding=!1}},_contactChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.ContactId="",b.ContactName="",void(b.PhoneNumber="");b.ContactId=a.$key,b.ContactName=a.$descriptor,b.PhoneNumber=Sage.Utility.getValue(a,"WorkPhone"),b.LeadId="",b.LeadName="";var c=this._isNullOrWhitespace(b.AccountName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}},_opportunityChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.OpportunityId="",void(b.OpportunityName="");if(b.OpportunityId=a.$key,b.OpportunityName=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId="",b.LeadName="",this._updateLookupSeedValues(a.Account.$key),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1,d&&(this.lup_Contact.set("selectedObject",null),this._setContactBasedOnOpportunity())}}},_ticketChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.TicketId="",void(b.TicketNumber="");if(b.TicketId=a.$key,b.TicketNumber=a.$descriptor,this._isNullOrWhitespace(b.AccountId)||b.AccountId!==a.Account.$key){var c=this._isNullOrWhitespace(b.AccountName),d=this._isNullOrWhitespace(b.ContactName);b.AccountId=a.Account.$key,b.AccountName=a.Account.AccountName,b.LeadId="",b.LeadName="",this._updateLookupSeedValues(),b.ContactId=Sage.Utility.getValue(a,"Contact.$key"),b.ContactName=Sage.Utility.getValue(a,"Contact.NameLF"),b.PhoneNumber=Sage.Utility.getValue(a,"Contact.WorkPhone"),this._isBinding=!0,c&&this.lup_Account.set("selectedObject",{$key:a.Account.$key,$descriptor:a.Account.AccountName}),d&&this.lup_Contact.set("selectedObject",{$key:a.Contact.$key,$descriptor:a.Contact.NameLF}),this.lup_Lead.set("selectedObject",null),this.tb_LeadCompanyName.set("value",""),this._isBinding=!1}}},_leadChanged:function(a){if(!this._isBinding){var b=this._historyData;if(!a)return b.LeadId="",b.LeadName="",b.PhoneNumber="",void this.tb_LeadCompanyName.set("value","");b.LeadId=a.$key,b.LeadName=a.$descriptor,b.AccountName=a.Company,b.PhoneNumber=a.WorkPhone,this.tb_LeadCompanyName.set("value",a.Company),b.ContactId="",b.ContactName="",b.AccountId="",b.AccountName="",b.TicketId="",b.TicketNumber="",b.OpportunityId="",b.OpportunityName="",this._updateLookupSeedValues(),this._isBinding=!0,this.lup_Contact.set("selectedObject",null),this.lup_Account.set("selectedObject",null),this.lup_Opportunity.set("selectedObject",null),this.lup_Ticket.set("selectedObject",null),this._isBinding=!1}},_leaderChanged:function(a){this._isBinding||(this._historyData.UserId=a.$key.substr(0,12),this._historyData.UserName=a.$descriptor)},_setContactBasedOnOpportunity:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("opportunities");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._historyData.OpportunityId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._setContactToCurrentAccountPrimary();for(var c,d=!1,e=!1,f=b[0],g=0;g<b.length;g++)b[g].IsPrimary&&(d&&!b[g].Contact.IsPrimary||(d=b[g])),!e&&b[g].Contact.IsPrimary&&(e=b[g]);(c=d||e||f)&&(this._historyData.ContactId=Sage.Utility.getValue(c,"Contact.$key"),this._historyData.ContactName=Sage.Utility.getValue(c,"Contact.NameLF"),this._historyData.PhoneNumber=Sage.Utility.getValue(c,"Contact.WorkPhone"),this._rebindToCurrentContact())},failure:function(){this._rebindToCurrentContact()},scope:this})},_setContactToCurrentAccountPrimary:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));a.setResourceKind("accounts");var b=a.uri.pathSegments.length-1;a.uri.getPathSegment(b).predicate='"'+this._historyData.AccountId+'"',a.uri.setPathSegment(b+1,"Contacts"),a.setQueryArg("select","NameLF,IsPrimary,WorkPhone"),a.setQueryArg("orderby","IsPrimary desc"),a.setQueryArg("count","1"),a.read({success:function(a){var b=a.$resources;if(b.length<1)return void this._rebindToCurrentContact();var c=b[0];this._historyData.ContactId=Sage.Utility.getValue(c,"$key"),this._historyData.ContactName=Sage.Utility.getValue(c,"NameLF"),this._historyData.PhoneNumber=Sage.Utility.getValue(c,"WorkPhone"),this._isBinding=!0,this.lup_Contact.set("selectedObject",c),this._isBinding=!1},failure:function(){this._rebindToCurrentContact()},scope:this})},_rebindToCurrentContact:function(){this._isBinding=!0,this.lup_Contact.set("selectedObject",{$key:this._historyData.ContactId,$descriptor:this._historyData.ContactName}),this._isBinding=!1},_updateLookupSeedValues:function(a){var b=a||this._historyData.AccountId;this.contactLookupConfig.seedValue=b,this.opportunityLookupConfig.seedValue=b,this.ticketLookupConfig.seedValue=b},_setUI:function(){this._formatHeader(),this._setDisabledByTimlessValue(),this._isNullOrWhitespace(this._historyData.LeadId)?this.rdo_Contact.set("checked",!0):this.rdo_Lead.set("checked",!0),this._setContactLeadVisibility(),this._setScheduledByLabel(),this._applySecurity()},_applySecurity:function(){if("New"===this.mode)this._setAccessToUI(!0);else if("Complete"===this.mode)this._setAccessToUI(!0);else{var a=Sage.Services.getService("CalendarSecurityService");if(a){var b=utility.getClientContextByKey("userID").trim(),c=this._historyData.UserId||b;b!==c?a.hasAccess(c,"allowEdit",function(a){this._setAccessToUI(a)},this):this._setAccessToUI(!0)}}},_setAccessToUI:function(a){this._hasAccess=a,"New"===this.mode||"Complete"===this.mode?(this.rdo_Lead.set("disabled",!a),this.tb_Location.set("disabled",!a),this.pk_Regarding.set("disabled",!a),this.pk_Category.set("disabled",!a),this.pk_Priority.set("disabled",!a),this.dtp_startDate.set("disabled",!a),this.dtp_completedDate.set("disabled",!a),a||this.sel_Duration.set("disabled",!0),this.cb_Timeless.set("disabled",!a),this.ta_Notes.set("disabled",!a),this.lup_Leader.set("disabled",!a),this.lup_Account.set("disabled",!a),this.lup_Contact.set("disabled",!a),this.lup_Lead.set("disabled",!a),this.lup_Ticket.set("disabled",!a),this.lup_Opportunity.set("disabled",!a),this.tb_LeadCompanyName.set("disabled",!a),this.btn_OK.set("disabled",!a)):(this.rdo_Lead.set("disabled",!0),this.tb_Location.set("disabled",!a),this.pk_Regarding.set("disabled",!a),this.pk_Category.set("disabled",!a),this.pk_Priority.set("disabled",!0),this.dtp_startDate.set("disabled",!0),this.dtp_completedDate.set("disabled",!0),this.sel_Duration.set("disabled",!0),this.cb_Timeless.set("disabled",!0),this.ta_Notes.set("disabled",!a),this.lup_Leader.set("disabled",!0),this.lup_Account.set("disabled",!0),this.lup_Contact.set("disabled",!0),this.lup_Lead.set("disabled",!0),this.lup_Ticket.set("disabled",!0),this.lup_Opportunity.set("disabled",!0),this.tb_LeadCompanyName.set("disabled",!0),this.btn_OK.set("disabled",!a))},_setUIForActivityType:function(a){this.pk_Regarding.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Regarding",a)),this.pk_Category.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Category",a)),this.pk_Result.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Result",a));var b=Sage.Services.getService("CalendarSecurityService");if(this.btn_OK.set("disabled",!1),b&&"New"!==this.mode){var c=utility.getClientContextByKey("userID").trim(),d=this._historyData.UserId||c;c!==d&&b.hasAccess(d,"allowEdit",function(a){this.btn_OK.set("disabled",!a)},this)}},_setDisabledByTimlessValue:function(){if(this._historyData){var a=this._historyData.Timeless;this.dtp_startDate.set("displayTime",!a),this.sel_Duration.set("disabled",a||!this._hasAccess)}},_timelessChange:function(){this._setDisabledByTimlessValue()},_descriptionChanged:function(){this._formatHeader()},_startDateChanged:function(){var a=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",a)},_setContactLeadVisibility:function(){var a=this.rdo_Contact.get("checked");dojo.removeClass(a?this.contactContainer.domNode:this.leadContainer.domNode,"display-none"),dojo.addClass(a?this.leadContainer.domNode:this.contactContainer.domNode,"display-none")},_formatHeader:function(){var a,b,c,d;b=Sage.Utility.Activity.getActivityImageClass(this._historyData.Type||"atAppointment","small"),a=Sage.Utility.Activity.getActivityTypeName(this._historyData.Type||"atAppointment"),c="New"===this.mode?this.insertText:"",a===this.noteText&&"New"===this.mode&&(c=this.insertNoteText,a=""),d=this._historyData.Description||"",""!==d&&(d=" - "+d),this._dialog.set("title",dojo.string.substitute('<div class="Global_Images icon16x16 ${0}" > </div>&nbsp;<span class="activity-dialog-title" style="max-width: 975px; text-overflow: ellipsis;">${1} ${2} ${3}</span>',[b,c,a,d]))},_setScheduledByLabel:function(){
var a=Sage.Utility.Convert.toDateFromString(Sage.Utility.getValue(this._historyData,"CreateDate"));a.getFullYear()<1e3&&(a=new Date);var b=Sage.Utility.getValue(this._historyData,"CreateUser").trim();if(b&&utility.getClientContextByKey("userID")!==b){if("PROCESS"!==b&&"ADMIN"!==b)return void this._getUserInfoFor(b,function(b){dojo.html.set(this.lbl_ScheduledBy,dstring.substitute(this.scheduledByFormatText,{user:b.$descriptor,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}))});b="Administrator"}else b=utility.getClientContextByKey("userPrettyName");var c=dstring.substitute(this.scheduledByFormatText,{user:b,date:locale.format(a,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})});dojo.html.set(this.lbl_ScheduledBy,c)},_getUserInfoFor:function(a,b){var c=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",!1,!0,!0));c.setResourceKind("userInfo"),c.setResourceSelector("'"+a+"'"),c.setQueryArg("precedence","0"),c.read({success:b,scope:this,failure:function(){}})},_okClick:function(){delete this._historyData.Notes,delete this._historyData.UserName,this.rdo_Lead.checked?(delete this._historyData.ContactId,delete this._historyData.ContactName,delete this._historyData.AccountId,delete this._historyData.AccountName,delete this._historyData.LeadName):delete this._historyData.LeadId,"New"===this.mode?(this._currentUserActivitySaved=!0,this._historyStore.saveNewEntity(this._historyData,this._successfulHistorySave,this._failedHistorySave,this)):this._historyStore.save({scope:this,ignoreETag:!0,success:this._successfulHistorySave,failure:this._failedAHistorySave})},_successfulHistorySave:function(a){var b=!1;if(this._historyData=a,this.historyId=a.$key,Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),this._attachmentsSaved=!0,this._attachmentList){var c=this._attachmentList.getNewAttachments();c.length>0&&"New"===this.mode&&(this._needsFollowUp()&&(b=!0),this._saveAttachments(c),this._attachmentsSaved=!1)}"New"===this.mode&&this.attendeesTab._addHistoryAttendee(a),dojo.publish("/entity/history/change",[a,this]),this._historySaved=!0,b||this._hideIfComplete()},_failedHistorySave:function(a){Sage.UI.Dialogs.showError(this.couldNotSaveErrorText)},_cancelClick:function(){"Complete"===this.mode?this._deleteClick():this.hide()},_hideIfComplete:function(){this._historySaved&&("New"!==this._mode?this._doFollowup():this.hide())},_deleteClick:function(){this._historyData&&this._historyStore&&Sage.UI.Dialogs.raiseQueryDialogExt({title:this.deleteTitle,query:this.deleteMessage,callbackFn:function(a){a&&this._historyStore.deleteEntity(this._historyData,this._successfulHistoryDelete,this._failedHistoryDelete,this)},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this})},_successfulHistoryDelete:function(){Sage.Services.getService("ClientEntityContext").clearTemporaryContext(),dojo.publish("/entity/history/delete",[this._historyData.$key,this]),this.hide()},_failedHistoryDelete:function(a){var b=activityUtility.findFailedRequestMessage(a,this.couldNotDeleteErrorText);SageDialogs.showError(b)},_saveAttachments:function(a){this._attachmentRequests=a.length;for(var b=0;b<a.length;b++){var c=a[b],d=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));d.setResourceKind("attachments"),d.setResourceSelector("'"+c.$key+"'"),c.historyId=this.historyId;for(var e in this._historyData)if("Id"===e.substring(e.length-2)&&"UserId"!==e){var f=e.substring(0,1).toLowerCase()+e.substring(1);c[f]=this._historyData[e]}d.update(c,{success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this})}},_removeAttachments:function(){if(this._attachmentList)for(var a=this._attachmentList.getNewAttachments(),b=0;b<a.length;b++){var c=a[b],d=new Sage.SData.Client.SDataSingleResourceRequest(sDataServiceRegistry.getSDataService("system"));d.setResourceKind("attachments"),d.setResourceSelector("'"+c.$key+"'"),d.delete(c,{success:function(){},failure:function(){},scope:this})}},getRelationshipsForAttachments:function(){var a={};for(var b in this._activityData)if("Id"===b.substring(b.length-2)&&"UserId"!==b){var c=b.substring(0,1).toLowerCase()+b.substring(1);a[c]=this._activityData[b]}return"New"!==this.mode||fileUtility.supportsHTML5File||slx.desktop||(this._tempIdForAttachments=this._makeTempID(),a.historyId=this._tempIdForAttachments),a},_makeTempID:function(){if(!this._tempIdForAttachments){var a=this._currentUserId,b=utility.Convert.toIsoStringFromDate(this.dtp_completedDate.get("value"));b=b.replace(/[T:-]/g,"").substr(6,6),this._tempIdForAttachments="NE"+a.substr(a.length-4,4)+b}return this._tempIdForAttachments},_attachmentRequests:0,_successfulAttachmentSave:function(a){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_failedAttachmentSave:function(){--this._attachmentRequests<1&&(this._attachmentsSaved=!0,this._hideIfComplete())},_needsFollowUp:function(){return this.sel_Followup.get("value")!=this.noneText},_doFollowup:function(){var a=this.sel_Followup.get("value");switch(a){case this.noneText:return void this.hide();case activityUtility.getActivityTypeName("atPhoneCall"):a="atPhoneCall";break;case activityUtility.getActivityTypeName("atAppointment"):a="atAppointment";break;case activityUtility.getActivityTypeName("atToDo"):a="atToDo"}var b=this._getFollowUpActivityData();this._doingFollowup=!0,this.hide("followup"),window.setTimeout(function(){var c=Sage.Services.getService("ActivityService");c&&c.scheduleActivity({type:a,preConfigured:b})},250)},_getFollowUpActivityData:function(){var a=this._historyData,b={AccountId:a.AccountId,AccountName:a.AccountName,ContactId:a.ContactId,ContactName:a.ContactName,Description:a.Description,LeadId:a.LeadId,LeadName:a.LeadName,OpportunityId:a.OpportunityId,OpportunityName:a.OpportunityName,TicketId:a.TicketId,TicketNumber:a.TicketNumber};return this.ck_coNotes.get("checked")&&(b.LongNotes=a.LongNotes,b.Notes=a.Notes),this.ck_coAttachments.get("checked")&&(b.carryOverAttachmentsFrom=a.$key),b},createAccountLookupConfig:function(){return this.accountLookupConfig={id:"_historyAcc",structure:[{label:this.accountText,field:"AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.mainPhoneText,field:"MainPhone"},{label:this.typeText,field:"Type"},{label:this.subTypeText,field:"SubType"},{label:this.statusText,field:"Status"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:!0,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:!1,initializeLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.accountLookupConfig},createAccountLookup:function(){this.createAccountLookupConfig(),this.lup_Account=new Sage.UI.Controls.Lookup({id:"history_lu_account",allowClearingResult:!0,config:this.accountLookupConfig,readonly:!0}),this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged")),dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only")},createContactLookupConfig:function(){return this.contactLookupConfig={id:"_histoyContact",structure:[{label:this.nameText,field:"NameLF"},{label:this.accountText,field:"Account.AccountName"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.workphoneText,field:"WorkPhone"},{label:this.emailText,field:"Email"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"NameLF"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupContactText,dialogButtonText:this.okText},this.contactLookupConfig},createContactLookup:function(){this.createContactLookupConfig(),this.lup_Contact=new Sage.UI.Controls.Lookup({id:"history_lu_contact",allowClearingResult:!0,readonly:!0,config:this.contactLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged")),dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only")},createOpportunityLookupConfig:function(){return this.opportunityLookupConfig={id:"_historyOpp",structure:[{label:this.descriptionText,field:"Description"},{label:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{label:this.accountText,field:"Account.AccountName"},{label:this.stageText,field:"Stage"},{label:this.statusText,field:"Status"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText},this.opportunityLookupConfig},createOpportunityLookup:function(){this.createOpportunityLookupConfig(),this.lup_Opportunity=new Sage.UI.Controls.Lookup({id:"history_lu_opportunity",allowClearingResult:!0,readonly:!0,config:this.opportunityLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged")),dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only")},createTicketLookupConfig:function(){return this.ticketLookupConfig={id:"_historyTicket",structure:[{label:this.ticketNumberText,field:"TicketNumber"},{label:this.accountText,field:"Account.AccountName"},{label:this.nameText,field:"Contact.NameLF"},{label:this.phoneText,field:"Contact.WorkPhone"},{label:this.statusText,field:"StatusCode",pickListName:"",propertyType:"SalesLogix.PickList"},{label:this.urgencyText,field:"Urgency.Description"},{label:this.areaText,field:"Area"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:!0,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:!0,initialLookup:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText},this.ticketLookupConfig},createTicketLookup:function(){this.createTicketLookupConfig(),this.lup_Ticket=new Sage.UI.Controls.Lookup({id:"history_lu_ticket",allowClearingResult:!0,readonly:!0,config:this.ticketLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged")),dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only")},createLeadLookupConfig:function(){return this.leadLookupConfig={id:"_historyLead",structure:[{label:this.nameText,field:"LeadFullName"},{label:this.companyText,field:"Company"},{label:this.cityText,field:"Address.City"},{label:this.stateText,field:"Address.State"},{label:this.postalText,field:"Address.PostalCode"},{label:this.statusText,field:"Status"},{label:this.workphoneText,field:"WorkPhone"},{label:this.ownerText,field:"Owner.OwnerDescription"}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"leads",sort:[{attribute:"LeadFullName"}]},isModal:!0,initialLookup:!1,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText},this.leadLookupConfig},createLeadLookup:function(){this.createLeadLookupConfig(),this.lup_Lead=new Sage.UI.Controls.Lookup({id:"history_lu_lead",allowClearingResult:!0,readonly:!0,config:this.leadLookupConfig,showEntityInfoToolTip:!0}),this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged")),dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only")},createLeaderLookupConfig:function(){return this.leaderLookupConfig={id:"_historyLeader",structure:[{label:this.nameText,field:"Name",sortable:!0,width:"400px",editable:!1,propertyType:"System.String",excludeFromFilters:!1,defaultValue:""}],gridOptions:{contextualCondition:function(){return"AllowAdd AND (AccessId eq '"+utility.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'"},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:!0,preFilters:[],returnPrimaryKey:!0,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText},this.leaderLookupConfig},createLeaderLookup:function(){this.createLeaderLookupConfig(),this.lup_Leader=new Sage.UI.Controls.Lookup({id:"history_lu_leader",readonly:!0,config:this.leaderLookupConfig}),this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged")),dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only")},_updateLocation:function(a,b){var c=this._historyData.Location;if(c&&""!==c){for(var d=c.split("; "),e=[],f=!1,g=0;g<d.length;g++){if(d[g]===a){if(!b)continue;f=!0}e.push(d[g])}!f&&b&&e.push(a),c=e.join("; ")}else b&&(c=a);Sage.Utility.setValue(this._historyData,"Location",c),this.tb_Location.set("value",c)},_formatDateForQuery:function(a){return["'",a.getUTCFullYear(),"-",a.getUTCMonth()+1,"-",a.getUTCDate(),"'"].join("")},postCreate:function(){this.inherited(arguments),this._addAttendeesTab()},_addAttendeesTab:function(){var a=this.attendeesTab=new HistoryAttendeesTab,b=new ContentPane({id:"histAttendeesTabPane",title:this.tabNameParticipants,class:"tabContent remove-padding"},a.domNode);this.tc_EditHistory.addChild(b),a.histEditor=this,a.startup(),on(b,"show",function(){a._tabShow()})},_successfulComplete:function(a){var b=this,c=arguments;this.attendeesTab._historySaved(a).then(function(a){b.inherited(c)})}});return historyEditor})},"Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab":function(){define("Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab",["dojo","dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Utility","Sage/Utility/Activity","dojo/_base/array","dojo/_base/lang","dojo/i18n!./nls/HistoryEditorAttendeesTab","Sage/UI/GridView","Sage/UI/Controls/GridParts/Columns/CheckBox","dojo/store/Memory","dojo/data/ObjectStore","dijit/form/Select"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return d("Sage.MainView.ActivityMgr.HistoryEditorAttendeesTab",[b,c],{histEditor:null,lup_Contact:null,lup_ContactConfig:null,lup_Lead:null,lup_LeadConfig:null,widgetsInTemplate:!0,_timeZones:[],constructor:function(){i.mixin(this,j);var a=this;0==this._timeZones.length&&Sage.Utility.getTimeZones(function(b){a._timeZones=b})},widgetTemplate:new Simplate(["<div>",'<div id="{%= $.id %}_hisAttendeesGridPlaceholder" dojoAttachPoint="_histAttendeesGridPlaceholder" style="width:100%;height:100%"></div>',"</div>"]),_newItems:[],startup:function(){this._newItems=[],this.histEditor&&(this._buildGrid(),a.subscribe("/entity/history/create",this,this._historySaved),a.subscribe("/entity/history/change",this,this._historySaved))},_getTimeZoneDisplayName:function(a){var b=a;if(this._timeZones&&this._timeZones.length>0){var c=this._timeZones.filter(function(b){return b.Keyname===a});c&&c[0]&&(b=c[0].Displayname)}return b},_buildGrid:function(){var b=this,c=function(a,c){h.forEach(a,function(a,c){a.TimeZone&&(a.TimeZone=b._getTimeZoneDisplayName(a.TimeZone))})},d=new n({objectStore:new m({idProperty:"name",data:[{name:"Attended",id:"T"},{name:"Not Attended",id:"F"},{name:"Declined",id:"D"}]}),labelProperty:"name"}),g=[{field:"Name",label:this.header_Name,width:"180px"},{field:"AccountName",label:this.header_AccountName,width:"180px"},{field:"EntityType",label:this.header_Type,width:"60px"},{field:"IsPrimary",label:this.header_Primary,width:"40px",editor:l,editorArgs:{disabled:!0}},{field:"IsAttendee",label:this.header_Attendee,width:"40px",editor:l,editorArgs:{disabled:!0}},{field:"Status",label:this.header_Status,width:"100px",get:function(a){for(var b=0;b<d.objectStore.data.length;b++)if(d.objectStore.data[b].id==a[this.field])return d.objectStore.data[b].name},set:function(a){for(var b=0;b<d.objectStore.data.length;b++)if(d.objectStore.data[b].name==a[this.field])return d.objectStore.data[b].id},editor:o,editorArgs:{store:d},editOn:"click"},{field:"RoleName",label:this.header_RoleName},{field:"PhoneNumber",label:this.header_Phone,width:"80px"},{field:"Email",name:this.header_Email,width:"150px"},{field:"TimeZone",label:this.header_TimeZone,width:"150px"}],i={columns:g,storeOptions:{service:e.getSDataService("dynamic"),resourceKind:"historyAttendees",select:["EntityType","EntityId","IsPrimary","IsAttendee","Name","Description","Notes","Status"],newItemParentReferenceProperty:"History",onComplete:c,where:function(){return"(HistoryId eq '"+f.getCurrentEntityId()+"' and (SLXUserAssociationId eq null or SLXUserAssociationId eq ''))"},scope:this},slxContext:{workspace:"",tabId:""},sort:[{attribute:"Name"}],minRowsPerPage:40,placeHolder:this._histAttendeesGridPlaceholder,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,keyboardNavigation:!1};(this._grid=new k(i)).createGridView(),a.connect(this._grid,"markDirty",function(){a.byId(this.dirtyDataMsgID)&&a.style(a.byId(this.dirtyDataMsgID),"display","none");var b=Sage.Services.getService("ClientBindingManagerService");b&&b.clearDirtyAjaxItem(this.id)})},_tabfShow:function(){this._grid&&!this.gridRefreshed&&(this._grid.refresh(),this.gridRefreshed=!0)},_tabShowdd:function(){if(this._grid&&!this.gridRefreshed){var a=this._grid.get("mode"),b=f.getCurrentEntityId();(!b&&"insert"!==a||b&&"insert"===a)&&this._grid.set("mode",b?"":"insert"),this._grid.refresh(),this.gridRefreshed=!0}},_tabShow:function(){if(this._grid){var a=this._grid.get("mode"),b=f.getCurrentEntityId();(!b&&"insert"!==a||b&&"insert"===a)&&this._grid.set("mode",b?"":"insert"),this._grid.refresh(),this._grid.grid.resize()}},_historySaved:function(a){this._grid.grid._grid.save()},_addHistoryAttendee:function(a){if(a.ContactId||a.LeadId){var b=null;a.ContactId?g._getContactData(a.ContactId,function(c){c&&(b=this._setHistoryAttendeeEntityFromContactLead("Contact",c),b.History={$key:a.$key},this._saveHistoryAttendee(b))},this):a.LeadId&&g._getLeadData(a.LeadId,function(c){c&&(b=this._setHistoryAttendeeEntityFromContactLead("Lead",c),b.History={$key:a.$key},this._saveHistoryAttendee(b))},this)}},_saveHistoryAttendee:function(a){new Sage.SData.Client.SDataSingleResourceRequest(e.getSDataService("dynamic")).setResourceKind("historyAttendees").create(a,{success:function(){},failure:function(){},scope:this})},_setHistoryAttendeeEntityFromContactLead:function(a,b){var c=!1;return b&&b.$key&&(c={},c.EntityType=a,c.EntityId=b.$key,c.$key=b.$key,c.IsPrimary=!0,c.Name=b.$descriptor,c.$descriptor=b.$descriptor,c.Account=null,c.AccountName=b.AccountName||b.Company,"Lead"==a&&(c.Company=b.Company,c.LeadFullName=b.$descriptor),c.Company=b.Company,c.Email=b.Email,c.Description="",c.Notes="",b.Address&&(c.TimeZone=b.Address.TimeZone),c.PhoneNumber=b.WorkPhone,c.RoleName="",c.general=!1),c}})})},"Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility","Sage/Utility/Activity","Sage/UI/Dialogs","dijit/form/RadioButton","dojo/_base/declare","dojo/i18n!./nls/OccurrenceOrSeriesQueryDlg"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return n("Sage.MainView.ActivityMgr.OccurrenceOrSeriesQueryDlg",[a,b],{activityId:"",activityMemberId:"",activity:!1,store:!1,mode:"edit",widgetsInTemplate:!0,disableSeriesOption:"",widgetTemplate:new Simplate(["<div>",'<div dojoType="dijit.Dialog" title="" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onDlgHide">','<div class="recur-activity-dialog">','<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160" >','<div dojoType="dijit.layout.ContentPane" label="{%= $.actDateText %}" dojoAttachPoint="container_actDate"></div>','<div dojoType="dijit.layout.ContentPane" label="{%= $.accountText %}" dojoAttachPoint="container_account"></div>','<div dojoType="dijit.layout.ContentPane" label="{%= $.contactText %}" dojoAttachPoint="container_contact"></div>','<div dojoType="dijit.layout.ContentPane" label="{%= $.opportunityText %}" dojoAttachPoint="container_opportunity"></div>',"</div>",'<div class="dijitContentPane">&nbsp;</div>','<div class="dijitContentPane">','<input type="radio" dojoType="dijit.form.RadioButton" name="editType" id="{%= $.id %}_thisOccurrence" checked="true" dojoAttachPoint="_thisOccurRadio" />&nbsp;','<label for="{%= $.id %}_thisOccurrence">{%= ($.mode === "edit") ? $.editOneText : (($.mode === "delete")? $.deleteOneText : $.completeOneText) %}</label>','</div><div class="dijitContentPane">','<input type="radio" dojoType="dijit.form.RadioButton" name="editType" id="{%= $.id %}_Series" dojoAttachPoint="_seriesRadio" {%=$.disableSeriesOption%} />&nbsp;','<label for="{%= $.id %}_Series">{%= ($.mode === "edit") ? $.editAllText : (($.mode === "delete")? $.deleteAllText : $.completeAllText) %}</label>',"</div>",'<div class="general-dialog-actions">','<div dojoType="dijit.form.Button" id="{%= $.id %}_btnContinue" name="_btnContinue" dojoAttachPoint="_btnContinue" dojoAttachEvent="onClick:_continueClick" >{%= $.continueText %}</div>',"</div>","</div>","</div>","</div>"]),constructor:function(){f.mixin(this,o)},show:function(){this._dialog.show(),this._dialog._standby||(f.mixin(this._dialog,new e),this.activity||this._dialog.showLoading()),this._thisOccurRadio.set("checked",!0)},_setModeAttr:function(a){this.mode=a},_getModeAttr:function(){return this.mode},hide:function(){this._dialog.hide()},_onDlgHide:function(){this.activity=!1,this.activityId=""},_setActivityIdAttr:function(a){this.activityId=a,this.activityId&&""!==this.activityId&&this._loadData()},_getActivityIdAttr:function(){return this.activityId},_setActivityMemebrIdAttr:function(a){this.activityMemberId=a},_getActivityMemberIdAttr:function(){return this.activityMemberId},_loadData:function(){this._dialog._standby&&this._dialog.showLoading();var a=["Description","AccountName","ContactName","OpportunityName","StartDate","Type","Timeless","Recurring","RecurrenceState"];this.store||(this.store=new g({include:[],select:a,resourceKind:"activities",service:h.getSDataService("system")})),""!==this.activityId&&this.store.fetch({predicate:'"'+this.activityId+'"',onComplete:this._receiveActivity,onError:this._failLoad,scope:this})},_receiveActivity:function(a){this._dialog._standby&&this._dialog.hideLoading(),this.activity=a,this._bind()},_receiveActivities:function(a){this._dialog._standby&&this._dialog.hideLoading();var b=a.$resources;b.length<1&&this._failLoad(),this.activity=b[0],this.activityId=this.activity.$key,this._bind()},_bind:function(){var a=this.activity,b=a.Description;b||(b=""),b.length>30&&(b=b.substring(0,26)+"..."),this._dialog.set("title",c.substitute(this.titleFmt,{type:k.getActivityTypeName(a.Type),description:b})),this.container_actDate.set("content",k.formatActivityStartDate(j.Convert.toDateFromString(a.StartDate,a.Timeless))),this.container_account.set("content",a.AccountName||"&nbsp;"),this.container_contact.set("content",a.ContactName||"&nbsp;"),this.container_opportunity.set("content",a.OpportunityName||"&nbsp;")},_failLoad:function(){this._dialog._standby&&this._dialog.hideLoading(),l.showWarning(this.failedToLoadMsg),this._dialog.hide()},_continueClick:function(a){if(this.hide(),this._thisOccurRadio.get("checked")){if(this.activityId.length<=12){var b=j.Convert.toDateFromString(this.activity.StartDate).getTime()/1e3+62135596800;this.activityId=this.activityId+";"+b}this.onSelectOccurrence(this.activityId,j.Convert.toDateFromString(this.activity.StartDate),this.activityMemberId)}else this.onSelectSeries(this.activityId,this.activityMemberId)},onSelectSeries:function(a){},onSelectOccurrence:function(a,b){}})})},"Sage/Services/EntityService":function(){define(["Sage/UI/Dialogs","Sage/MainView/EntityMgr/EditEntityOptionsDlg","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Utility","dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(a,b,c,d,e,f,g,h,i){var j=g("Sage.Services.EntityService",null,{_entityDetailsDialog:!1,constructor:function(){},editEntityOptions:function(a,b){this.editEntityValues(a,b)},editEntityValues:function(a,c){var d=Sage.Services.getService("RoleSecurityService");d&&d.hasAccess("Administration/EntityManager/Entities/Edit")&&(this._entityDetailsDialog||(this._entityDetailsDialog=new b),this._entityDetailsDialog.set("entityId",a),this._entityDetailsDialog.show())},getSelectedId:function(){var a=this.getSelectionInfo(),b="";if(a){if(a.hasCompositeKey){return a.selections[0].entity.Entity.$key}b=(a.selections.length,a.selections[0].id)}return b},getSelectedItem:function(){var a=this.getSelectionInfo(),b={id:!1,hasCompositeKey:!1,entity:!1};return a&&(b.hasCompositeKey=a.hasCompositeKey,b.entity=a.entity,a.selections.length,b.id=a.selections[0].id,b.entity=a.selections[0].entity),b},getSelections:function(){var a=this.getSelectionInfo(),b=null;return a&&(b=a.selections),b},prepareSelections:function(){return this.getSelectionInfo()},getSelectionInfo:function(){var b=!1;try{var c=dijit.byId("list");c&&(b=c.getSelectionInfo(!0))}catch(b){a.alert(this.txtErrorActionMsg||"error getting selectionInfo")}return b},getTotalSelectionCount:function(){var a=0;try{var b=dijit.byId("list");b&&(a=b.getTotalSelectionCount())}catch(a){}return a},verifySelection:function(a){return null!==a&&0!==a.selectionCount},verifySingleSelection:function(a){return null!==a&&1===a.selectionCount},setSelectionCount:function(){try{var a=dijit.byId("list");a&&$("#selectionCount").text(a.getTotalSelectionCount())}catch(a){}},refreshList:function(a){try{var b=dijit.byId("list");if(b){var c=Sage.Services.getService("ClientGroupContext");if(c){a===c.getContext().CurrentGroupID&&b.refreshView(a)}}}catch(a){}}});return Sage.Services.hasService("EntityService")||Sage.Services.addService("EntityService",new j),j})},"Sage/MainView/EntityMgr/EditEntityOptionsDlg":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Dialogs","dijit/form/RadioButton","dojo/_base/declare","dojo/i18n!./nls/_BaseEntityDetailContent","dojo/text!./templates/EditEntityOptionsDlg.html","dojo/store/Memory","dojo/dom-construct","Sage/UI/FilteringSelect","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return m("Sage.MainView.EntityMgr.EditEntityOptionsDlg",[a,b],{entityName:"",mode:"edit",widgetsInTemplate:!0,typeDropDowns:!1,propertiesDP:!1,entityStore:!1,propertyStore:!1,widgetTemplate:j.makeTemplateFromString(o),nlsResource:n,constructor:function(){},postCreate:function(){this.lblName.innerHTML=this.nlsResource.propertyName,this.lblDisplayName.innerHTML=this.nlsResource.lblDisplayName,this.lblPluralName.innerHTML=this.nlsResource.lblPluralName,this.lblTitle.innerHTML=this.nlsResource.lblTitle,this.lblExtension.innerHTML=this.nlsResource.IsExtension,this.lblAdvancedOptions.innerHTML=this.nlsResource.AdvOptions,this.lblPluralName.innerHTML=this.nlsResource.lblPluralName,this.lblImport.innerHTML=this.nlsResource.lblImport,this.lblMatch.innerHTML=this.nlsResource.lblMatch,this.lblBulkUpdate.innerHTML=this.nlsResource.lblBulkUpdate,this.lblAudited.innerHTML=this.nlsResource.lblAudited,this.lblCanPut.innerHTML=this.nlsResource.lblPut,this.lblCanPost.innerHTML=this.nlsResource.lblPost,this.lblCanDelete.innerHTML=this.nlsResource.lblDelete,this.lblHistory.innerHTML=this.nlsResource.lblHistory,dojo.mixin(this._dialog,new e),t.mixin(this._dialog,new u),this._dialog.createHelpIconByTopic("EditEntity"),this.entityStore=new p,this.propertyStore=new p,this.typeDropDowns=new r({name:"value",value:0,store:this.entityStore,searchAttr:"name"}),q.place(this.typeDropDowns.domNode,this.entityDP,"only"),this.propetiesDP=new r({name:"value",value:0,store:this.propertyStore,searchAttr:"name",required:!1}),q.place(this.propetiesDP.domNode,this.viewTitle,"only");var a=this;this.IsExtension.on("change",function(b){b?a.typeDropDowns.set("disabled",!1):(a.typeDropDowns.set("value",""),a.typeDropDowns.set("disabled",!0))},!0)},_okClick:function(){this._dialog.showLoading();var a=this;this.entity.displayName=a.DisplayName.textbox.value,this.entity.displayNamePlural=a.PluralName.textbox.value,!1===this.IsExtension.get("value")?this.entity.isExtension=!1:(this.entity.isExtension=!0,this.entity.extendedEntity={$key:a.typeDropDowns.value},this.entity.extendedEntityPropertyName=a.typeDropDowns.value),this.entity.audited=!1!==this.Audited.get("value"),this.entity.bulkAction.canBulkUpdate=!1!==this.BulkUpdate.get("value"),this.entity.import.canMatch=!1!==this.CanMatch.get("value"),this.entity.import.canImport=!1!==this.CanImport.get("value"),this.entity.sdata.canPost=!1!==this.CanPost.get("value"),this.entity.sdata.canPut=!1!==this.CanPut.get("value"),this.entity.sdata.canDelete=!1!==this.CanDelete.get("value"),this.entity.StringExpression="${"+a.propetiesDP.value+"}";var b=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata"));b.setResourceKind("entities('"+this.entityName+"')"),b.update(this.entity,{isSecurityManager:!0,scope:a,ignoreETag:!1,success:function(){a._dialog.hideLoading(),this.hide()},failure:function(b,c){a._dialog.hideLoading(),this.hide()}})},_cancelClick:function(){this.hide()},destroy:function(){this.inherited(arguments)},show:function(){this._dialog.show(),this._dialog._standby||f.mixin(this._dialog,new e)},_setModeAttr:function(a){this.mode=a},_getModeAttr:function(){return this.mode},hide:function(){this._dialog.hide()},_onDlgHide:function(){this.entityName=""},_setEntityIdAttr:function(a){this.entityName=a,this.entityName&&""!==this.entityName&&this._loadData()},_getEntityIdAttr:function(){return this.entityName},_loadData:function(){this._dialog.showLoading(),this._dialog.set("title",this.entityName);var a=this;0===a.entityStore.data.length&&new Sage.SData.Client.SDataResourceCollectionRequest(s.getSDataService("metadata")).setResourceKind("entities").setQueryArg("select","id,displayName,name").setQueryArg("Count","500").setQueryArg("orderBy","name").setQueryArg("format","json").read({success:function(b){for(var c=b.$resources,d=0;d<=c.length-1;d++){var e=c[d].displayName?c[d].displayName:c[d].name;e&&a.entityStore.add({id:c[d].name,name:e})}},failure:function(a){}});var b=new Sage.SData.Client.SDataResourceCollectionRequest(s.getSDataService("metadata"));b.setResourceKind("entities('"+this.entityName+"')"),b.setQueryArg("include","sdata,bulkAction,import"),b.read({success:function(b){if(void 0!==b&&void 0!==b.$resources&&1==b.$resources.length){a.entity=b.$resources[0];var c=b.$resources[0];if(a.Name.textbox.value=c.name,a.DisplayName.textbox.value=c.displayName,a.PluralName.textbox.value=c.displayNamePlural,a.Audited.set("value",c.audited),a.BulkUpdate.set("value",c.bulkAction.canBulkUpdate),a.CanMatch.set("value",c.import.canMatch),a.CanImport.set("value",c.import.canImport),a.CanPost.set("value",c.sdata.canPost),a.CanPut.set("value",c.sdata.canPut),a.CanDelete.set("value",c.sdata.canDelete),a.History.textbox.value=c.historyEntityName,
a.IsExtension.set("value",c.isExtension),c.isExtension){a.typeDropDowns.set("disabled",!1);var d=a.entityStore.get(c.extendedEntity.$key);a.typeDropDowns.set("item",d)}else a.typeDropDowns.set("value",""),a.typeDropDowns.set("disabled",!0);for(var e=c.properties.$resources,f=a.propertyStore.data.length,g=0;g<f;g++)a.propertyStore.remove(a.propertyStore.data[0].id);for(g=0;g<=e.length-1;g++)if("f750817f-73ad-4bf3-b2de-bd0f5cc47dfd"==e[g].dataTypeId||"ccc0f01d-7ba5-408e-8526-a3f942354b3a"==e[g].dataTypeId){var h=e[g].displayName?e[g].displayName:e[g].propertyName;h&&a.propertyStore.add({id:e[g].propertyName,name:h})}if(c.stringExpression){var i=c.stringExpression;"${"===i.substring(0,2)&&(i=i.substring(2,i.length-1));var j=a.propertyStore.get(i);a.propetiesDP.set("item",j)}else a.propetiesDP.set("item",null)}a._dialog.hideLoading()},failure:function(b){a._dialog.hideLoading()}})}})})},"Sage/UI/FilteringSelect":function(){define(["dijit/form/FilteringSelect","dojo/_base/declare"],function(a,b){return b("Sage.UI.FilteringSelect",a,{valueAttr:!1,_getValueField:function(){return this.valueAttr||"value"}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityWizardController":function(){define(["dojo/_base/declare","dojo/string","dojo/_base/array","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/MainView/EntityMgr/EntityWizard/SelectEntityType","Sage/MainView/EntityMgr/EntityWizard/EntityDetails","Sage/MainView/EntityMgr/EntityWizard/Relationship","Sage/MainView/EntityMgr/EntityWizard/EntityProperties","Sage/MainView/EntityMgr/EntityWizard/AddEditEntity","Sage/MainView/EntityMgr/EntityWizard/Status","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j,k,l){return a("Sage.MainView.EntityMgr.EntityWizard.EntityWizardController",[d],{wizardOptions:null,constructor:function(a,b){this.wizardOptions=this.wizardOptions?this.wizardOptions:this._getDefaultWizardOptions(),this.subscriptions.push(l.subscribe("/entityController/entityWizard/nextStep",dojo.hitch(this,function(a){this._nextStep(a)}))),this.subscriptions.push(l.subscribe("/entityController/entityWizard/previousStep",dojo.hitch(this,function(a){this._previousStep(a)}))),this.subscriptions.push(l.subscribe("/entityController/entityWizard/cancel",dojo.hitch(this,function(){this._cancel()})))},startWizard:function(){this._goToStep(e.entityWizardStep.EntityDetails,null),this.entityDetails.ownerId||e.getOwnerEntityInfo(this)},_nextStep:function(a){var b=this._getNextStep(a);this._goToStep(b)},_previousStep:function(a){var b=this._getPreviousStep(a);this._goToStep(b)},_cancel:function(){setTimeout(dojo.hitch(this,function(){this._destroyObjects()}),dijit.defaultDuration+100)},_getDefaultWizardOptions:function(){return{hiddenSteps:[e.entityWizardStep.AddActions]}},_isStepVisible:function(a){var b=!0;return this.wizardOptions&&this.wizardOptions.hiddenSteps&&c.some(this.wizardOptions.hiddenSteps,function(c,d){if(a===c)return b=!1,!0}),!!b},_getNextStep:function(a){for(var b in e.entityWizardStep){var c=e.entityWizardStep[b];if(c>a&&this._isStepVisible(c))return c}return null},_getPreviousStep:function(a){var b=[];for(var d in e.entityWizardStep)b.unshift(e.entityWizardStep[d]);var f=null;return c.some(b,dojo.hitch(this,function(b){if(b<a&&this._isStepVisible(b))return f=b,!0})),f},_goToStep:function(a){var b,c=this._getNextStep(a),d=null===c||c===e.entityWizardStep.EntityProperties,l=this._getPreviousStep(a),m=null===l||l===e.entityWizardStep.SelectEntityType,n={isLastStep:d,isFirstStep:m,currentStep:null};switch(a){case e.entityWizardStep.SelectEntityType:b=dijit.byId("dlgSelectEntityType"),b||(n.currentStep=e.entityWizardStep.SelectEntityType,b=new f(n),b.startup()),b.show();break;case e.entityWizardStep.EntityDetails:b=dijit.byId("dlgEntityDetails"),b||(n.currentStep=e.entityWizardStep.EntityDetails,b=new g(n)),b.show();break;case e.entityWizardStep.Relationship:b=dijit.byId("dlgRelationship"),b||(n.currentStep=e.entityWizardStep.Relationship,b=new h(n),b.startup()),b.show();break;case e.entityWizardStep.EntityProperties:b=dijit.byId("dlgEntityProperties"),b||(n.currentStep=e.entityWizardStep.EntityProperties,b=new i(n),b.startup()),b.show();break;case e.entityWizardStep.AddEditEntity:b=dijit.byId("dlgAddEditEntity"),b||(n.currentStep=e.entityWizardStep.AddEditEntity,b=new j(n),b.startup()),b.show();break;case e.entityWizardStep.Status:b=dijit.byId("dlgStatus"),b||(n.currentStep=e.entityWizardStep.Status,b=new k(n),b.startup()),b.show()}}})})},"Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/store/Memory","dijit/_Widget","Sage/_Templated","dojo/store/Observable","dojo/store/Memory","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/MainView/EntityMgr/EntityDetailUtility","dojo/i18n!./nls/_EntityWizardDialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a("Sage.MainView.EntityMgr.EntityWizard._EntityWizardDialogBase",[f,g],{_dialog:null,_currentStep:null,_isFirstStep:!1,_isLastStep:!1,_helpIconTopic:"EntityWizard",widgetsInTemplate:!0,subscriptions:[],_dialogIds:["dlgSelectEntityType","dlgEntityDetails","dlgRelationship","dlgEntityProperties","dlgAddEditEntity","dlgStatus"],entityDetails:{},_nlsResources:l,constructor:function(){this.subscriptions=[]},show:function(){this._dialog.show(),this._helpIconTopic&&(this._dialog.helpIcon||(d.mixin(this._dialog,new o),this._dialog.createHelpIconByTopic(this._helpIconTopic),this._dialog.helpIcon.tabIndex="-1"))},startup:function(){this.inherited(arguments),n.mixin(this._dialog,new m)},isValid:function(){return!0},_dialog_OnCancel:function(){this._btnCancel_OnClick()},_btnBack_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/entityController/entityWizard/previousStep",this._currentStep)},_btnNext_OnClick:function(){this.isValid()&&(this._checkCurrentStep(),this._dialog.hide(),c.publish("/entityController/entityWizard/nextStep",this._currentStep))},_btnCancel_OnClick:function(){this._checkCurrentStep(),this._dialog.hide(),c.publish("/entityController/entityWizard/cancel",null)},_checkCurrentStep:function(){this._currentStep},finishWizard:function(){this._destroyObjects()},_destroyObjects:function(){b.forEach(this._dialogIds,function(a){var b=dijit.byId(a);b&&b.destroyRecursive()}),b.forEach(this.subscriptions,function(a){a.remove()})}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility":function(){define(["dojo/_base/xhr","dojo/string","dojo/date/locale","dojo/dom-class","dojo/_base/lang","Sage/Data/SDataServiceRegistry","Sage/Utility"],function(a,b,c,d,e,f,g){return Sage.namespace("Sage.MainView.EntityMgr.EntityWizard.EntityWizardUtility"),e.mixin(Sage.MainView.EntityMgr.EntityWizard.EntityWizardUtility,{entityWizardStep:{SelectEntityType:0,EntityDetails:1,Relationship:2,EntityProperties:3,AddEditEntity:4,Status:5},getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var a=Sage.Services.getService("ClientEntityContext");if(a)return a.getContext()}return null},setDomNodeVisible:function(a,b){a&&b?d.remove(a,"display-none"):a&&d.add(a,"display-none")},formatDate:function(a){if(g.Convert.isDateString(a)){var b=g.Convert.toDateFromString(a);return c.format(b,{selector:"date",fullYear:!0,locale:Sys.CultureInfo.CurrentCulture.name})}return""},getOwnerEntityInfo:function(a){var b=a;new Sage.SData.Client.SDataResourceCollectionRequest(f.getSDataService("metadata")).setQueryArg("where","isKey eq true").setResourceKind("entities('Owner')/properties").setQueryArg("select","id,propertyName").setQueryArg("count",1).setQueryArg("format","json").read({async:!0,success:function(a){var c=a.$resources;b.entityDetails.ownerId=c[0].id},failure:function(a){}})}}),Sage.MainView.EntityMgr.EntityWizard.EntityWizardUtility})},"Sage/MainView/EntityMgr/EntityDetailUtility":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/query","dojo/_base/array","dojo/_base/connect","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/AddEditEntityDetail/DistinctDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/RangeDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/AMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/ADDMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/UserLookupDetailsView","dojo/dom-class","Sage/Utility","Sage/Utility/Filters","Sage/UI/Controls/PropertyStore","Sage/UI/Controls/TextBox","Sage/Utility/GeneralSchemaReader","dojo/request/xhr"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a("Sage.MainView.EntityMgr.EntityDetailUtility",null,{filterTypeDataLoad:!1,aggregation:!1,operation:!1,propertyNameDataLoad:!1,propertyIdDataLoad:!1,rangeFilterGridCol:!1,specialCharacters:!1,typeStore:null,propertyStore:null,propertyInformation:null,service:!1,_nlsResource:!1,specialDates:Object.getOwnPropertyNames(n.specialDates),picklistSchemaData:null,propertySchemaData:null,filterSchemaData:null,constructor:function(){this.service=Sage.Data.SDataServiceRegistry.getSDataService("metadata"),this.propertyIdDataLoad=new b,this.propertyNameDataLoad=new b,this.filterTypeDataLoad=new b,this.aggregation=new b,this.operation=new b,this.rangeFilterGridCol=new b,this.specialCharacters=new b,this.propertyInformation=new b,this._nlsResource=g,this._populateFromSDataMetaDataHelper()},_populateFromSDataMetaDataHelper:function(){var a=new r("system");a.getSchemaInformationFromSData(),this.picklistSchemaData=a.picklistResourceNodes,a=new r("metadata"),a.getSchemaInformationFromSData(),this.propertySchemaData=a.propertyResourceNodes,this.filterSchemaData=a.filterResourceNodes},refreshPropertyStore:function(a,b,c){this.propertyStore=new p(a,b,c),this.typeStore=this.propertyStore.fStore.typeStore},getPropertiesAssociatedWithFilters:function(a){this._grabEntityProperties(this,a,0,100)},_grabEntityProperties:function(a,b,c,d){d=d||100,c=c||0;var e=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);e.setResourceKind("entities('"+b.name+"')/properties"),e.setQueryArg("startIndex",c),e.setQueryArg("count",d),e.setQueryArg("where","isIncluded ne False"),e.read({success:function(b){for(var e=b.$resources,f=0;f<=e.length-1;f++){var g=e[f].propertyName,h=e[f].id,i=void 0===a.propertyNameDataLoad.index;(i||void 0===a.propertyNameDataLoad.index[g])&&a.propertyNameDataLoad.add({id:g,name:e[f].propertyName,type:o.resolveDataType(e[f].dataTypeId)}),(i||void 0===a.propertyIdDataLoad.index[h])&&a.propertyIdDataLoad.add({id:h,name:e[f].propertyName,type:o.resolveDataType(e[f].dataTypeId)})}var j=b.$totalResults,k=c+d,l=j-k;l>0&&(l>=100?a.grabEntityProperties(a,!1,k,100):a.grabEntityProperties(a,!1,k,l))},failure:function(){}})},getSpecialValues:function(){var a=Object.getOwnPropertyNames(this.specialDates);if(void 0===a||void 0!==a.length&&0===a.length)return this.specialDates;for(var b=0;b<a.length;b++)this.specialCharacters.get(a[b])||this.specialCharacters.add({name:a[b],id:a[b],property:a[b]})},getSchemasInformationFromSData:function(a){void 0===a&&(a=!0);var b=this;s("slxdata.ashx/slx/metadata/-/$schema",{handleAs:"xml",preventCache:!0,sync:!a}).then(function(a){var c=n.parseXMLNode(a,{});c&&b._gSIFSSuccess(c)},function(a){return b._onError("Download",a),a})},_gSIFSSuccess:function(a){var b=this,c="",d=a["xs:schema"],g=d["xs:simpleType"],h=d["xs:complexType"];e.forEach(g,function(a){c=a.name;var d=a["xs:restriction"];"OrmAnalyticsMetricAggregation--enum"===c&&b._populateAggregationList(d["xs:enumeration"]),"ComparisonValidatorOperator--enum"===c&&b._populateOperationList(d["xs:enumeration"])}),e.forEach(h,function(d){c=d.name;var e=d["xs:all"],f=d["xs:choice"];"details--choice"===c&&b._populateFilterTypesList(f["xs:element"]),"range--type"===c&&b._createRangefilterCols(e["xs:element"]),"property--type"===c&&b._populateProperties(e["xs:element"],a)}),f.publish("Sage/EntityManager/FilterUtilityDone")},_populateProperties:function(a,c){var d=this;e.forEach(a,function(a){var b=a["sme:isMandatory"]||!1;d.propertyInformation.add({name:a.name,label:a["sme:label"],type:a.type,manadtory:b,collection:null,sub:null,value:null})});for(var f=c["xs:schema"],g=f["xs:simpleType"],h=f["xs:complexType"],i=this.propertyInformation.data,j=0;j<i.length;j++){var k=i[j],l=k.type;if("xs:"!==l.substring(0,3)&&("--enum"===l.substring(l.length-6,l.length)&&e.forEach(g,function(a){var c=a["xs:restriction"];a.name===l&&(d.propertyInformation.data[j].collection=new b({data:c["xs:enumeration"]}))}),"--type"===l.substring(l.length-6,l.length))){var m=new b;e.forEach(h,function(a){var b=a["xs:all"];if(a.name===l){var c=b["xs:element"];if("object"==typeof c)if(c instanceof Array)e.forEach(c,function(a){var b=a["sme:isMandatory"]||!1;m.add({name:a.name,label:a["sme:label"],type:a.type,manadtory:b,collection:null,sub:null})});else{var d=c["sme:isMandatory"]||!1;m.add({name:c.name,label:c["sme:label"],type:c.type,manadtory:d,collection:null,sub:null})}}}),this.propertyInformation.data[j].sub=m}}},_populateFilterTypesList:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.name;this.filterTypeDataLoad.add(this._initialformatDetails(d))}},_populateAggregationList:function(a){for(var b=0;b<a.length;b++){var c=a[b];this.aggregation.add({id:c.value,name:this._nlsResource[c.value]})}},_populateOperationList:function(a){for(var b=0;b<a.length;b++){var c=a[b];this.operation.add({id:c.value,name:this._nlsResource[c.value]})}this.operation.add({id:"Contains",name:this._nlsResource.Contains}),this.operation.add({id:"StartsWith",name:this._nlsResource.StartsWith}),this.operation.add({id:"EndsWith",name:this._nlsResource.EndsWith})},_createRangefilterCols:function(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e=!1;b=d.name,e="rangeName"===b?{label:this._nlsResource[b],field:b,editOn:"",autoSave:"rangeId"!==b,editable:"rangeId"!==b,hidden:"rangeId"===b||"customSql"===b,unhidable:"displayName"!==b,id:"AA"+b,editor:q,editorArgs:{shouldPublishMarkDirty:!1,required:!0,placeHolder:this._nlsResource.defaultRangeRowValue},width:150}:{label:this._nlsResource[b],field:b,editOn:"",autoSave:"rangeId"!==b,editable:"rangeId"!==b,hidden:"rangeId"===b||"customSql"===b,unhidable:"displayName"!==b,id:b,editor:q,editorArgs:{shouldPublishMarkDirty:!1},width:150},this.rangeFilterGridCol.add(e)}},getStringFormatDetails:function(a){return this.formatDetails(a,!1,"").detailsLocalizedName},_initialformatDetails:function(a){var b="",c="";switch(a){case"distinctFilter":b=this._nlsResource.FilterGridDetailsDistinctFilter,c="filter";break;case"dateDiffMetricFilter":b=this._nlsResource.FilterGridDetailsDateDiffMetricFilter,c="metric";break;case"rangeFilter":b=this._nlsResource.FilterGridDetailsRangeFilter,c="filter";break;case"metricFilter":b=this._nlsResource.FilterGridDetailsMetricFilter,c="metric";break;case"userLookupFilter":case"lookupFilter":b=this._nlsResource.FilterGridDetailsLookupFilter,c="filter";break;default:b=this._nlsResource.FilterGridDetailsCustom,c="filter"}return{id:a,name:b,type:c}},formatDetails:function(a,b,c){return void 0!==a&&(void 0!==a.distinctFilter?{detailsKey:"distinctFilter",detailsObject:!!b&&new h({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDistinctFilter}:void 0!==a.dateDiffMetricFilter?{detailsKey:"dateDiffMetricFilter",detailsObject:!!b&&new k({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDateDiffMetricFilter}:void 0!==a.rangeFilter?{detailsKey:"rangeFilter",detailsObject:!!b&&new i({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsRangeFilter}:void 0!==a.metricFilter?{detailsKey:"metricFilter",detailsObject:!!b&&new j({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsMetricFilter}:void 0!==a.userLookupFilter?{detailsKey:"userLookupFilter",detailsObject:!!b&&new l({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter}:void 0!==a.lookupFilter?{detailsKey:"lookupFilter",detailsObject:!!b&&new l({detailUtility:this,details:a,entityName:c}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter}:{detailsKey:"custom",detailsObject:!1,detailsLocalizedName:this._nlsResource.FilterGridDetailsCustom})},getDetailsSection:function(a,b){var c=a._title==this._nlsResource.FilterGridDetailsMetricFilter?"metricFilter":"distinctFilter",d=!1;if(a._EditData&&(d=!0),b&&d&&a._EditData.details)return this.formatDetails(a._EditData.details,!0,a.entityName);a.typeDropDowns&&a.typeDropDowns.item&&a.typeDropDowns.item.id&&(c=a.typeDropDowns.item.id);var e=!1;switch(d&&(e=a._EditData.details),c){case"dateDiffMetricFilter":return{detailsKey:"dateDiffMetricFilter",detailsObject:new k({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDateDiffMetricFilter};case"metricFilter":return{detailsKey:"metricFilter",detailsObject:new j({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsMetricFilter};case"distinctFilter":return{detailsKey:"distinctFilter",detailsObject:new h({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDistinctFilter};case"rangeFilter":return{detailsKey:"rangeFilter",detailsObject:new i({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsRangeFilter};case"userLookupFilter":return{detailsKey:"userLookupFilter",detailsObject:new l({detailUtility:this,details:e,entityName:a.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter};default:return!1}},colonizeLabels:function(a){return c.substitute("${0}:",[a])},grabReaderFriendlyVersionOfAggregationGivenId:function(a){for(var b=0;b<this.aggregation.data.length;b++)if(this.aggregation.data[b].id==a)return this.aggregation.data[b].name;return""},grabItemOfAggregationGivenId:function(a){for(var b=0;b<this.aggregation.data.length;b++)if(this.aggregation.data[b].id==a)return this.aggregation.data[b];return""},grabIdOfAggregationGivenName:function(a){for(var b=0;b<this.aggregation.data.length;b++)if(this.aggregation.data[b].name==a)return this.aggregation.data[b].id;return""}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/DistinctDetailsView":function(){define(["dojo/_base/declare","dojo/_base/event","dojo/text!./templates/DistinctDetailsView.html","Sage/Utility","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/Controls/TextBox"],function(declare,dojoEvent,template,utility,_DetailsAddEditDialogBase,crmTextBox){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.DistinctDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,charactersTextBox:!1,constructor:function(){this.hasProperties=!0,this.isMetric=!1},postCreate:function(){this._createCharacterController(),this.startup()},_createCharacterController:function(){this.lblEntityFiltersDetailsContains.innerHTML=this._nlsResources.lblCharacter;var a=this;this.charactersTextBox=new crmTextBox({shouldPublishMarkDirty:!1,regExp:"^[0-9]+$",validator:function(b,c){var d=new RegExp("^0+","g");return b=b.replace(d,""),0===b.length&&(b=0),b>99&&(b=99),b<0&&(b=0),null!==a.DojoString.substitute("${0}",[b]).match(this.regExp,"g")&&(this.textbox.value=b,!0)},invalidMessage:this._nlsResources.FieldMustBeANumber,required:!0}),this.DomConstruct.place(this.charactersTextBox.domNode,this.txtEntityFiltersDetailsContains,"only"),this.charactersTextBox.textbox.value=0,void 0!==this.details.distinctFilter&&(this.charactersTextBox.textbox.value=this.details.distinctFilter.characters),void 0!==this.details.rangeFilter&&(this.charactersTextBox.textbox.value=this.details.rangeFilter.characters),this.DojoConnect.connect(this.charactersTextBox,"onKeyPress",this._onKeyPress,!0)},_onKeyPress:function(a){utility.restrictToNumberOnKeyPress(a,"number")||dojoEvent.stopEvent(a)},startup:function(){this.inherited(arguments)},getDetails:function(a){return a?this.charactersTextBox.textbox.value:{distinctFilter:{characters:this.charactersTextBox.textbox.value}}},isValid:function(){var a=this.charactersTextBox.isValid(!0);return this.charactersTextBox.onChanged(),a}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase":function(){define(["dijit/_Widget","dijit/registry","dojo/dom-construct","dojo/query","dojo/dom-class","dojo/dom-style","dojo/string","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/AddEditDialog","Sage/_Templated","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return i("Sage.MainView.EntityMgr.AddEditEntityDetail._DetailsAddEditDialogBase",[a,l],{widgetTemplate:new Simplate("<div>Not implemented</div>"),_nlsResources:k,Dialog:m,DojoString:g,DojoStyle:f,DojoConnect:h,DomClass:e,DomConstruct:c,Lang:j,Query:d,Registry:b,detailUtility:!1,hasProperties:!1,isMetric:!1,editing:!1,details:!1,embedded:!1,entityName:"",constructor:function(){var a=arguments;if(a[0]){var b=a[0];b.detailUtility&&(this.detailUtility=b.detailUtility),b.isMetric&&(this.isMetric=b.isMetric),b.details&&(this.details=b.details,this.editing=b.details&&!0),b.hasProperties&&(this.hasProperties=b.hasProperties)}},postCreate:function(){},startup:function(){this.inherited(arguments)},getDetails:function(){},isValid:function(){return!0}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/RangeDetailsView":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/text!./templates/RangeDetailsView.html","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/MainView/EntityMgr/AddEditEntityDetail/DistinctDetailsView","Sage/UI/GridView","Sage/UI/Controls/TextBox","Sage/Utility"],function(declare,Memory,template,_DetailsAddEditDialogBase,distinct,GridView,crmTextBox,utility){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.RangeDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,character:!1,rangeGridsObj:!1,lastSelectedRange:!1,addBtnId:"rangeGrid_addBtn",rmvBtnId:"rangeGrid_removeBtn",gridId:"RangeDetailsView_grid",tmpRwId:0,constructor:function(a){this.hasProperties=!0,this.isMetric=!1,this.Registry.byId(this.addBtnId)&&this.Registry.byId(this.addBtnId).destroy(),this.Registry.byId(this.rmvBtnId)&&this.Registry.byId(this.rmvBtnId).destroy(),this.Registry.byId(this.gridId)&&this.Registry.byId(this.gridId).destroy()},postCreate:function(){this._createCharacter(),this._createRangeGrid(),this.startup()},_addItemToGrid:function(a){a.rangeGridsObj.grid.addItem({rangeId:a.tmpRwId,rangeName:"",upper:"",lower:"",displayName:null,customSQL:null}),a.tmpRwId++,a.rangeGridsObj.refresh()},_removeItemFromGrid:function(a){var b=a.rangeGridsObj.getSelectedRowData(),c=void 0===b||null===b||0===b.length,d=this.store.idProperty;if(c)return void a.Dialog.showWarning(a._nlsResources.SelectAnItem,"Infor CRM");for(var e=!1,f=0;f<b.length;f++){var g=b[f],h=g[d],i=this.store.data.length;void 0!==h&&(this.store.remove(h),i>this.store.data.length&&(e=!0,f--,!0)),h=g.id,i=this.store.data.length,void 0!==h&&(this.store.remove(h),i>this.store.data.length&&(e=!0,f--,!0))}e?this.grid.refresh():a.Dialog.showWarning(a._nlsResources.SelectAnItem,"Infor CRM")},_createRangeGrid:function(){var a=new Memory({data:[]});this.details&&this.details.rangeFilter&&this.details.rangeFilter.ranges&&(a=Memory({idProperty:"rangeId",data:this.details.rangeFilter.ranges}));var b=this.detailUtility.rangeFilterGridCol.data.sort(function(a,b){var c=a.id,d=b.id;return c<d?-1:c>d?1:0}),c=this.rangeGridsObj=new GridView({tools:["add","delete"],store:a,columns:b,addNew:this.Lang.partial(this._addItemToGrid,this),deleteSelected:this.Lang.partial(this._removeItemFromGrid,this),placeHolder:this.rangegridwhole,columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,minRowsPerPage:a.data.length,maxRowsPerPage:a.data.length,id:this.gridI,shouldPublishMarkDirty:!1});c.createGridView(),c.innerHTML=this._nlsResources.lblRange,c.grid.onLoadComplete=function(){c.grid.resize()}},_createCharacter:function(){this.character=new distinct({embedded:!0,isMetric:!1,hasProperty:this.hasProperty,details:this.details,detailUtility:this.detailUtility}),this.DomConstruct.place(this.character.domNode,this.characterContainer,"only")},startup:function(){this.inherited(arguments)},getDetails:function(){for(var a={rangeFilter:{characters:this.character.getDetails(!0),ranges:[]}},b=this.rangeGridsObj.store.data,c=0;c<b.length;c++){var d={range:b[c]};d.range.rangeId=this._stripoutNonRangeIds(d),""===d.range.rangeId&&delete d.range.rangeId,null===d.range.displayName&&delete d.range.displayName,null===d.range.upper&&delete d.range.upper,null===d.range.lower&&delete d.range.lower,null===d.range.rangeName&&delete d.range.rangeName,null===d.range.customSQL&&delete d.range.customSQL,a.rangeFilter.ranges.push(d.range)}return a},_stripoutNonRangeIds:function(a){var b="[A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+",c=b.match(a.range.rangeId,"g");return c&&this.Lang.isArray(c)&&c[0].length==a.range.rangeId.length?a.range.rangeId:""},isValid:function(){for(var a=this.Query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-AArangeName",this.rangeGridsObj.grid.bodyNode),b=this.Query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-lower",this.rangeGridsObj.grid.bodyNode),c=this.Query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-upper",this.rangeGridsObj.grid.bodyNode),d=this.character.isValid(),e=!0,f=0;f<a.length;f++){a[f].widget.isValid(!0),a[f].widget.onChanged();var g="Error"!==a[f].widget.state&&!("Incomplete"===a[f].widget.state&&a[f].widget.required);g||a[f].widget.set("state","Error");var h=b[f].widget.value,i=c[f].widget.value;if(isNaN(h)||isNaN(i)){h.startsWith(":")&&!utility.specialDates.hasOwnProperty(h)&&(this._setErrorStateWithMsg(c[f].widget,this._nlsResources.InvalidSpecialDateValue,"Error"),g=!1),i.startsWith(":")&&!utility.specialDates.hasOwnProperty(i)&&(this._setErrorStateWithMsg(c[f].widget,this._nlsResources.InvalidSpecialDateValue,"Error"),g=!1);var j,k,l,m;g&&(h.startsWith(":")&&i.startsWith(":")?(j=utility.specialDates[h](new Date),k=utility.specialDates[i](new Date),j>k&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1)):h.startsWith(":")&&!isNaN(i)?(j=utility.specialDates[h](new Date),l=parseInt(""+j.getFullYear()+("0"+(j.getMonth()+1)).slice(-2)+("0"+j.getDate()).slice(-2),10),m=parseInt(i,10),l>m&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1)):i.startsWith(":")&&!isNaN(h)?(j=utility.specialDates[i](new Date),m=parseInt(""+j.getFullYear()+("0"+(j.getMonth()+1)).slice(-2)+("0"+j.getDate()).slice(-2),10),(l=parseInt(h,10))>m&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1)):h>i&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1))}else h>i&&(this._setErrorStateWithMsg(b[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),this._setErrorStateWithMsg(c[f].widget,this._nlsResources.LowerMustBeLessThanUpper,"Error"),g=!1);e=e&&g}return e&&d},_setErrorStateWithMsg:function(a,b,c){a&&"function"==typeof a.set&&(b&&a.set("message",b),c&&a.set("state",c))}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/AMDDetailsView":function(){define(["dijit/registry","dojo/_base/declare","dojo/text!./templates/AMDDetailsView.html","dojo/store/Memory","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/FilteringSelect"],function(registry,declare,template,memory,_DetailsAddEditDialogBase,crmDropdown){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.AMDDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,aggregations:null,propertyValues:null,aggregationDropDown:!1,_idForAggregtDropDown:"aggregationDpItems",constructor:function(a){this.embedded||(this.hasProperties=!0,this.isMetric=!0),this.Registry.byId(this._idForAggregtDropDown)&&this.destroy(this.Registry.byId(this._idForAggregtDropDown))},destroy:function(a){a.destroy()},postCreate:function(){this._createAggregateController(),this.startup()},_populateDefaultAggregate:function(){var a="";this.details&&(this.details.metricFilter&&this.details.metricFilter.aggregation&&(a=this.details.metricFilter.aggregation),this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.aggregation&&(a=this.details.dateDiffMetricFilter.aggregation),this.details.aggregation&&(a=this.details.aggregation)),this.aggregation&&(a=this.aggregation);var b={context:this,idValue:a};if(this.DojoConnect.subscribe("Sage/EntityManager/detailUtilityDone",b,function(){this.Registry.byId(this.context._idForAggregtDropDown).item=this.context.detailUtility.grabItemOfAggregationGivenId(this.idValue),this.Registry.byId(this.context._idForAggregtDropDown).focusNode.value=this.Registry.byId(this.context._idForAggregtDropDown).item.name||""}),this.editing){var c=this.details.propertyInfo.propertyLookup(),d=c[0];return{value:a,aggs:this._setAggregations(d.dataType.aggregate)}}return{value:a,aggs:this.detailUtility.aggregation}},_createAggregateController:function(){this.lblEntityFiltersDetailsAggregation.innerHTML=this._nlsResources.lblAggregation;var a=this._populateDefaultAggregate();this.aggregationDropDown=new crmDropdown({id:this._idForAggregtDropDown,name:"aggregations",value:a.value,store:a.aggs,searchAttr:"name",fetchProperties:{sort:[{attribute:"name",descending:!1}]}},this._idForAggregtDropDown),this.DojoConnect.subscribe("Sage/UI/Controls/PropertDropDown",this,function(a){this._setAggregations(a)}),this.DomConstruct.place(this.aggregationDropDown.domNode,this.dpEntityFiltersDetailsAggregation,"only")},_setAggregations:function(a){var b=this.detailUtility.aggregation;if(b=b.query(function(b){return void 0!==a.dataType&&null!==a.dataType&&""!==a.dataType?a.dataType.aggregate.indexOf(b.id.toLowerCase())>=0:a.indexOf(b.id.toLowerCase())>=0}),!this.aggregationDropDown)return new memory({data:b});this.aggregationDropDown.store=new memory({data:b}),this.aggregationDropDown.store.index[this.aggregationDropDown.value]>=0||this.aggregationDropDown.set("value",this.aggregationDropDown.store.data[0].id)},startup:function(){this.inherited(arguments)},getDetails:function(a){var b=this.aggregationDropDown.displayedValue;return this.aggregationDropDown.item&&this.aggregationDropDown.item.id&&(b=this.aggregationDropDown.item.id),a?b:{metricFilter:{aggregation:b}}},isValid:function(){var a=this.aggregationDropDown.isValid(!0);return a?this.aggregationDropDown.set("state",""):this.aggregationDropDown.set("state","Error"),a}});return widget})},"Sage/MainView/EntityMgr/AddEditEntityDetail/ADDMDDetailsView":function(){define(["dojo/_base/declare","dojo/text!./templates/ADDMDDetailsView.html","Sage/MainView/EntityMgr/AddEditEntityDetail/AMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/Controls/PropertyDropDown"],function(declare,template,aggregate,_DetailsAddEditDialogBase,PropertyDropDown){
var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.ADDMDDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,aggregation:!1,PropertyTextBoxFrom:null,PropertyTextBoxTo:null,constructor:function(a){this.hasProperties=!1,this.isMetric=!0,this.entityName=a.entityName},postCreate:function(){this._createAggregation(),this._createFromFS(),this._createToFS(),this.startup()},_createFromFS:function(){this.PropertyTextBoxFrom=new PropertyDropDown({entityName:this.entityName,superType:"DateTime"}),this.DomConstruct.place(this.PropertyTextBoxFrom.domNode,this.fieldsContainerFrom,"replace"),this.lblMetricRangeFrom.innerHTML=this._nlsResources.lblFrom;var a="";this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.fromPropertyName&&(a=this.details.dateDiffMetricFilter.fromPropertyName),this.PropertyTextBoxFrom.entitySelected.textbox.value=a},_createToFS:function(){this.PropertyTextBoxTo=new PropertyDropDown({entityName:this.entityName,superType:"DateTime"}),this.DomConstruct.place(this.PropertyTextBoxTo.domNode,this.fieldsContainerTo,"replace"),this.lblMetricRangeTo.innerHTML=this._nlsResources.lblTo;var a="";this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.toPropertyName&&(a=this.details.dateDiffMetricFilter.toPropertyName),this.PropertyTextBoxTo.entitySelected.textbox.value=a},_createAggregation:function(){this.aggregation=new aggregate({embedded:!0,isMetric:!0,hasProperty:this.hasProperty,details:this.details,detailUtility:this.detailUtility}),this.DomConstruct.place(this.aggregation.domNode,this.aggregate,"only")},startup:function(){this.inherited(arguments)},getDetails:function(){return{dateDiffMetricFilter:{aggregation:this.aggregation.getDetails(!0),fromPropertyName:this.PropertyTextBoxFrom.entitySelected.textbox.value,toPropertyName:this.PropertyTextBoxTo.entitySelected.textbox.value}}},isValid:function(){var a=this.aggregation.isValid();if(!0===a){var b=this.PropertyTextBoxFrom.entitySelected.isValid(!0);return":now"===this.PropertyTextBoxFrom.entitySelected.textbox.value&&(b=!1,this.PropertyTextBoxFrom.entitySelected.set("state","Error")),this.PropertyTextBoxFrom.entitySelected.onChange(),b=b&&this.PropertyTextBoxTo.entitySelected.isValid(!0),":now"===this.PropertyTextBoxTo.entitySelected.textbox.value&&(b=b&&!1,this.PropertyTextBoxTo.entitySelected.set("state","Error")),this.PropertyTextBoxTo.entitySelected.onChange(),b}return a}});return widget})},"Sage/UI/Controls/PropertyDropDown":function(){define(["Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/PropertyDropDown.html","dijit/Tree","Sage/UI/Controls/PropertyStore","Sage/Utility","dojo/string","dijit/TooltipDialog","dojo/dom-style","dojo/dom-class"],function(_DetailsAddEditDialogBase,declare,template,Tree,PropertyStore,utility,dojoString,TooltipDialog,dojoStyle,domClass){var widget=declare("Sage.UI.Controls.PropertyDropDown",[_DetailsAddEditDialogBase],{widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(template)),entityName:null,byTypeId:null,bySuperType:null,byKeywords:null,allMatch:!1,tree:null,eleTextBox:null,maxLevels:-1,_required:!0,constructor:function(a){this.entityName=a.entityName,void 0!==a.type&&(this.byTypeId=a.typeId),void 0!==a.superType&&(this.bySuperType=a.superType),void 0!==a.Keywords&&(this.byKeywords=a.Keywords),void 0!==a.allMatch&&(this.allMatch=a.allMatch),void 0!==a.maxLevels&&(this.maxLevels=a.maxLevels),void 0!==a.onlyProperties&&(this.onlyProperties=a.onlyProperties),void 0!==a.required&&(this._required=a.required)},postCreate:function(){this._createTree(),void 0!==this._required&&(this.entitySelected.required=this._required),this.startup()},startup:function(){this.inherited(arguments)},propertyLookup:function(a,b){return void 0!==a&&null!==a||(a=this.entityName),void 0!==b&&null!==b||(b=this.entitySelected.textbox.value),(new PropertyStore).lookup(a,b)},_createTree:function(){var a=this,b=null;b=this.byKeywords?new PropertyStore(this.entityName,{Keywords:this.byKeywords,allMatch:this.allMatch,maxLevels:this.maxLevels,onlyProperties:this.onlyProperties}):new PropertyStore(this.entityName,{typeId:this.byTypeId,superType:this.bySuperType,maxLevels:this.maxLevels,onlyProperties:this.onlyProperties}),this.tree=new Tree({model:b.store,showRoot:!1,onClick:function(b){a.entitySelected.set("value",b.property),dijit.popup.close(),dojo.publish("Sage/UI/Controls/PropertDropDown",b)}}),domClass.add(this.tree.domNode,"height250");var c=" ";this._EditData&&this._EditData.propertyName&&(c=this._EditData.propertyName,this.entitySelected.set("value",c)),this.eleTextBox=this.entitySelected.domNode},showDDTree:function(){var a=dojoStyle.getComputedStyle(this.eleTextBox).width,b=new TooltipDialog({style:dojoString.substitute("width:${0};",[a]),content:this.tree});domClass.add(b.domNode,"propertyDialog"),dijit.popup.open({popup:b,around:this.eleTextBox})}});return widget})},"Sage/UI/Controls/PropertyStore":function(){define(["dojo/string","dojo/_base/declare","dojo/store/Memory","Sage/Data/SDataServiceRegistry","dojo/store/JsonRest","dojo/json","dojo/_base/Deferred","dojo/DeferredList","dojo/request","dojo/i18n!./nls/PropertyStore","Sage/UI/Controls/FieldStore"],function(a,b,c,d,e,f,g,h,i,j,k){return b("Sage.UI.Controls.PropertyStore",null,{_nlsResource:null,fStore:null,constructor:function(a,b,c){this._nlsResource=j,this.store.selectedEntity=a,this.store.addins=c,this.fStore=new k,this.store.allTypes=this.fStore.typeStore,void 0!==b&&void 0!==b.Keywords?b.allMatch?this.store.types=this.fStore.queryByKeyWordsAllMatch(b.Keywords):this.store.types=this.fStore.queryByKeywordsOneMatchMatch(b.Keywords):this.store.types=this.fStore.query(b),this.store.filterByType=this.store.types.data.length,void 0!==b&&(void 0!==b.onlyProperties&&(this.store.onlyProperties=b.onlyProperties),void 0!==b.maxLevels&&(this.store.maxLevel=b.maxLevels))},lookup:function(b,c){var e=[];return new Sage.SData.Client.SDataSingleResourceRequest(d.getSDataService("metadata")).setResourceKind(a.substitute('entities("${0}")/properties',[b])).setQueryArg("format","json").setQueryArg("where",a.substitute("${0} eq '${1}'",["propertyName",c])).read({async:!1,scope:this,success:function(a){var b=this.store.dataTypeIdToTypeName(a.dataTypeId);void 0===b&&(b=this.fStore.blankTemplate),e.push({id:a.id,name:a.propertyName,property:a.propertyName,dataType:b})},failure:function(a){}}),e},store:new e({target:"",selectedEntity:"",types:null,filterByType:!1,onlyProperties:!1,allTypes:null,baseTemplate:"${0}:${1}${2}",relationTemplate:"${0}${1}${2}.${3}!",maxLevel:-1,addins:!1,dataTypeIdToTypeName:function(a){var b=this.types.index[a];return this.types.data[b]},getChildren:function(b,d){var e,j,k,l,m=new c,n=this.baseTemplate,o=this.relationTemplate,p=this.types,q=this.filterByType,r=this.allTypes;"rootNode"==b.name?(e=this.selectedEntity,j="",k="",l=e):(e=b.relatedEntity,j=b.property+".",k=b.oldrelationPath?b.oldrelationPath:"",l=b.base);var s=b.Level+1;new g;var t=[];if(e.length>0){var u=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setResourceSelector('"'+e+'"').setQueryArg("select","properties/*").setQueryArg("format","json").setQueryArg("Count","500")).then(function(b){for(var c=f.parse(b),d=c.properties.$resources,e=0;e<=d.length-1;e++){var g=d[e];if(!0===g.isIncluded)if(q){var h=p.index[g.dataTypeId];if(h>=0){var i=p.data[h];m.add({id:g.id,display:g.displayName,columName:j+g.columnName,name:g.propertyName,property:j+g.propertyName,dataType:i,Level:s,legacyPath:a.substitute(n,[l,k,g.columnName])})}}else{var o=r.index[g.dataTypeId];if(o>=0){var t=r.data[o];m.add({id:g.id,display:g.displayName,columName:j+g.columnName,name:g.propertyName,property:j+g.propertyName,dataType:t,Level:s,legacyPath:a.substitute(n,[l,k,g.columnName])})}}}});if(t.push(u),!this.onlyProperties){var v=a.substitute('(parentEntity.name eq "${0}") or (childEntity.name eq "${0}")',[e]);q<26&&(v=a.substitute('(parentEntity.name eq "${0}" and cardinality eq "M:1") or (childEntity.name eq "${0}" and cardinality eq "1:M")',[e]));var w=i(new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("relationships").setQueryArg("select","isDynamic,cardinality,parentEntity/*,childEntity/*,parentProperty/*,childProperty/*,columns/*").setQueryArg("where",v).setQueryArg("format","json").setQueryArg("Count","500")).then(function(b){for(var c=f.parse(b),d=c.$resources,g=0;g<=d.length-1;g++){var h=d[g],i=h.childEntity.properties.$resources.filter(function(a){return a.id===h.columns.$resources[0].childPropertyId});i[0]&&i[0].columnName&&(i=i[0].columnName);var n=h.parentEntity.properties.$resources.filter(function(a){return a.id===h.columns.$resources[0].parentPropertyId});n[0]&&n[0].columnName&&(n=n[0].columnName),e==h.parentEntity.$key&&h.parentProperty.isIncluded?m.add({name:h.parentProperty.propertyName,id:h.parentProperty.id,relatedEntity:h.childEntity.$key,children:"test",property:j+h.parentProperty.propertyName,base:l,dataType:"",Level:s,parentTable:h.parentEntity.tableName,childTable:h.childEntity.tableName,parentKey:n,childKey:i,oldrelationPath:k+a.substitute(o,[n,"=",i,h.childEntity.tableName])}):e==h.childEntity.$key&&h.childProperty.isIncluded&&m.add({name:h.childProperty.propertyName,id:h.childProperty.id,children:"test",property:j+h.childProperty.propertyName,base:l,relatedEntity:h.parentEntity.$key,dataType:"",Level:s,parentTable:h.parentEntity.tableName,childTable:h.childEntity.tableName,parentKey:n,childKey:i,oldrelationPath:k+a.substitute(o,[i,"=",n,h.parentEntity.tableName])})}});t.push(w);var x=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setQueryArg("where",a.substitute('extendedEntity.name eq "${0}"',[e])).setQueryArg("select","extendedEntityPropertyName").setQueryArg("format","json").setQueryArg("Count","500")).then(function(a){for(var b=f.parse(a),c=b.$resources,d=0;d<=c.length-1;d++){var e=c[d];m.add({name:e.$key,id:e.$key,children:"test",property:j+e.$key,base:l,relatedEntity:e.$key,dataType:"",Level:s})}this.currentLevel++});t.push(x)}}else{var y=i(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setQueryArg("select","extendedEntityPropertyName").setQueryArg("format","json").setQueryArg("Count","500")).then(function(a){for(var b=f.parse(a),c=b.$resources,d=0;d<=c.length-1;d++){var e=c[d];m.add({name:e.$key,id:e.$key,children:"test",property:j+e.$key,base:l,relatedEntity:e.$key,dataType:"",Level:s})}});t.push(y)}new h(t).then(function(a){var b="name";m.data.sort(function(a,c){var d=a[b],e=c[b];return d<e?-1:d>e?1:0}),d(m.data)})},getRoot:function(a){a({name:"rootNode",id:"root",Level:0})},mayHaveChildren:function(a){return"children"in a&&(this.maxLevel>=0&&a.Level<this.maxLevel||this.maxLevel<0)},getLabel:function(a){return a.name}})})})},"Sage/UI/Controls/FieldStore":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/store/Memory","dojo/i18n!./nls/PropertyStore","Sage/UI/Controls/FieldPropertyObject"],function(a,b,c,d,e,f){return b("Sage.UI.Controls.FieldStore",null,{typeStore:null,_nlsResource:null,isUnicode:!1,blankTemplate:null,constructor:function(a){this._nlsResource=e,this.populateSystemOptions(),this.blankTemplate=new f("","",this.isUnicode),this.typeStore=new d({data:[new f("47f90249-e4c8-4564-9ae6-e1fa9904f8b8",this._nlsResource.integer,this.isUnicode,!0),new f("f37c635c-9fbf-40d8-98d5-750a54a3cca1",this._nlsResource.double,this.isUnicode,!0),new f("a6bf2690-3477-4a18-9849-56abf8693934",this._nlsResource.single,this.isUnicode,!0),new f("2596d57d-89d6-4b72-9036-b18c64c5324c",this._nlsResource.decimal,this.isUnicode,!0),new f("6b0b3d51-0728-4b67-9473-52836a81da53",this._nlsResource.short,this.isUnicode,!0),new f("30053f5a-8d40-4db1-b185-1e4128eb26cc",this._nlsResource.standardId,this.isUnicode,!0),new f("92432b4d-8206-4a96-ba7b-e4cbd374f148",this._nlsResource.trueFalse,this.isUnicode,!0),new f("95ca9d52-6f0b-4a96-bd40-43583f41faf8",this._nlsResource.yesNo,this.isUnicode,!0),new f("3edc7c52-e711-431d-b150-969d88ebabf4",this._nlsResource.boolean,this.isUnicode,!0),new f("1f08f2eb-87c8-443b-a7c2-a51f590923f5",this._nlsResource.dateTime,this.isUnicode,!0),new f("31e8638d-4232-4c61-8827-d94132a33887",this._nlsResource.email,this.isUnicode,!0),new f("85f2bba5-1fb7-4ecf-941a-d98d4739c305",this._nlsResource.phone,this.isUnicode),new f("b71918bf-fac1-4b62-9ed5-0b0294bc9900",this._nlsResource.pickList,this.isUnicode,!0),new f("17541523-fc31-4269-ac97-df63290d0e31",this._nlsResource.owner,this.isUnicode,!0),new f("a3b52518-801b-44be-96bf-fdca3de84f7f",this._nlsResource.lookup,this.isUnicode,!1),new f("517d5e69-9efa-4d0a-8e7a-1c7691f921ba",this._nlsResource.dependencyLookup,this.isUnicode,!1),new f("189a1a4e-396c-4146-95c0-93b5d9e7d160",this._nlsResource.char,this.isUnicode,!0),new f("8edd8fce-2be5-4d3d-bedd-ea667e78a8af",this._nlsResource.enum_,this.isUnicode,!1),new f("3ca925e1-4b76-4621-a39c-a0d4cb7327d5",this._nlsResource.guid,this.isUnicode,!0),new f("68e04249-f7e2-4b63-90be-55fbb1f4aa77",this._nlsResource.byte,this.isUnicode,!0),new f("07370ef3-ad24-409f-86a8-ff2db5ee6d69",this._nlsResource.binary,this.isUnicode,!0),new f("5685161e-5f0a-4a36-83fe-89e8e462e9e7",this._nlsResource.url,this.isUnicode,!0),new f("f750817f-73ad-4bf3-b2de-bd0f5cc47dfd",this._nlsResource.calcSF,this.isUnicode,!0),new f("44bc190a-99f3-4fa9-98a3-d5b2336d6e7c",this._nlsResource.calcNF,this.isUnicode,!0),new f("76c537a8-8b08-4b35-84cf-fa95c6c133b0",this._nlsResource.text,this.isUnicode,this.isUnicode),new f("b2ed309e-ea89-4eef-8051-6244987953a4",this._nlsResource.memo,this.isUnicode,this.isUnicode),new f("ccc0f01d-7ba5-408e-8526-a3f942354b3a",this._nlsResource.text,this.isUnicode,!this.isUnicode),new f("f4ca6023-9f5f-4e41-8571-50ba94e8f233",this._nlsResource.memo,this.isUnicode,!this.isUnicode)]})},_addSystemIfNeeded:function(b){return b.indexOf("System")<0&&(b=a.substitute("System.${0}",[b])),b},query:function(a){var b=null,e=null;if(void 0!==a){if(void 0!==a.superType&&null!==a.superType)if(e=a.superType,c.isArray(e))for(var f=0;f<e.length;f++)e[f]=this._addSystemIfNeeded(e[f]);else e=this._addSystemIfNeeded(e);void 0!==a.typeId&&null!==a.typeId&&(b=a.typeId)}var g=this.typeStore.query(function(a){var c=!0,d=!1;return null!==e&&(d=e.indexOf(a.ClrDataType)>=0,c=d),null!==b&&(d=d||e.indexOf(a.id)>=0,c=d),c});return new d({data:g})},queryByKeyWordsAllMatch:function(a){var b=this.typeStore.query(function(b){for(var c=!1,d=0;d<a.length;d++){var e=a[d],f=!1;b[e.name]===e.value&&(f=!0,0===d&&(c=!0)),c=c&&f}return c});return new d({data:b})},queryByKeywordsOneMatchMatch:function(a){var b=this.typeStore.query(function(b){for(var c=0;c<a.length;c++){var d=a[c];if(b[d.name]===d.value)return!0}return!1});return new d({data:b})},populateSystemOptions:function(){var a=this._receivedUnicode,b=this,c=Sage.Services.getService("SystemOptions");c&&c.get("Unicode",function(c){a(c,b)})},_receivedUnicode:function(a,b){b.isUnicode=!!a&&"true"===a.toLowerCase()}})})},"Sage/UI/Controls/FieldPropertyObject":function(){define(["dojo/string","dojo/_base/declare","dojo/store/Memory","dojo/i18n!./nls/PropertyStore","dojo/_base/lang"],function(a,b,c,d,e){var f={ClrDataType:"",SqlType:"",ThisObj:"",number:!1,calculated:!1,idType:!1,bitType:!1,complex:!1,isBoolean:!1,dateTime:!1,initializeBaseData:function(){switch(this.id){case"a6bf2690-3477-4a18-9849-56abf8693934":this.ClrDataType="System.Single",this.SqlType="Single",this.ThisObj="Single",this.number=!0;break;case"6b0b3d51-0728-4b67-9473-52836a81da53":this.ClrDataType="System.Int16",this.SqlType="Int16",this.ThisObj="Short Integer",this.number=!0;break;case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":this.ClrDataType="System.Int32",this.SqlType="Int32",this.ThisObj="Integer",this.number=!0;break;case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":this.ClrDataType="System.Boolean",this.SqlType="AnsiStringFixesLength",this.ThisObj="Yes/No",this.isBoolean=!0;break;case"3edc7c52-e711-431d-b150-969d88ebabf4":this.ClrDataType="System.Boolean",this.SqlType="Boolean",this.ThisObj="Boolean",this.isBoolean=!0;break;case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":this.ClrDataType="System.DateTime",this.SqlType="DateTime",this.ThisObj="DateTime",this.dateTime=!0;break;case"189a1a4e-396c-4146-95c0-93b5d9e7d160":this.ClrDataType="System.Char",this.SqlType="AnsiString(Length=1)",this.ThisObj="Char";break;case"68e04249-f7e2-4b63-90be-55fbb1f4aa77":this.ClrDataType="System.Byte",this.SqlType="Byte",this.ThisObj="Byte",this.bitType=!0;break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Text";break;case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Memo";break;case"31e8638d-4232-4c61-8827-d94132a33887":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Email";break;case"07370ef3-ad24-409f-86a8-ff2db5ee6d69":this.ClrDataType="System.Byte[]",this.SqlType="Binary",this.ThisObj="Binary",this.bitType=!0;break;case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":this.ClrDataType="System.String",this.SqlType="String",this.ThisObj="Unicode Text";break;case"b2ed309e-ea89-4eef-8051-6244987953a4":this.ClrDataType="System.String",this.SqlType="String",this.ThisObj="Unicode Memo";break;case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Calculated String field",this.calculated=!0;break;case"5685161e-5f0a-4a36-83fe-89e8e462e9e7":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="URL";break;case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Phone Number";break;case"2596d57d-89d6-4b72-9036-b18c64c5324c":this.ClrDataType="System.Decimal",this.SqlType="Decimal",this.ThisObj="Decimal",this.number=!0;break;case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":this.ClrDataType="System.Double",this.SqlType="Double",this.ThisObj="Double",this.number=!0;break;case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":this.ClrDataType="System.Double",this.SqlType="Double",this.ThisObj="Calculated Numeric Field",this.number=!0,this.calculated=!0;break;case"30053f5a-8d40-4db1-b185-1e4128eb26cc":this.ClrDataType="System.String",this.SqlType="AnsiStringFixedLength",this.ThisObj="Standard Id",this.idType=!0;break;case"17541523-fc31-4269-ac97-df63290d0e31":this.ClrDataType="System.String",this.SqlType="AnsiStringFixedLength",this.ThisObj="owner";break;case"92432b4d-8206-4a96-ba7b-e4cbd374f148":this.ClrDataType="System.Boolean",this.SqlType="AnsiStringFixedLength",this.ThisObj="True/False",this.isBoolean=!0;break;case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="PickList",this.complex=!0;break;case"a3b52518-801b-44be-96bf-fdca3de84f7f":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Lookup",this.complex=!0;break;case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":this.ClrDataType="System.String",this.SqlType="AnsiString",this.ThisObj="Dependency Lookup",this.complex=!0;break;case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":this.ClrDataType="System.Enum",this.SqlType="AnsiString(Length=255)",this.ThisObj="Enum",this.complex=!0;break;case"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":this.ClrDataType="System.Guid",this.SqlType="Guid",this.ThisObj="Guid",this.idType=!0}}},g={Length:0,initializeLengthData:function(){switch(this.id){case"a6bf2690-3477-4a18-9849-56abf8693934":this.Length=64,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":this.Length=1,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":this.Length=2147483647,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"31e8638d-4232-4c61-8827-d94132a33887":this.Length=128,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"07370ef3-ad24-409f-86a8-ff2db5ee6d69":this.Length=8e3,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"b2ed309e-ea89-4eef-8051-6244987953a4":this.Length=2147483647,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"5685161e-5f0a-4a36-83fe-89e8e462e9e7":this.Length=150,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":this.Length=255,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"30053f5a-8d40-4db1-b185-1e4128eb26cc":case"17541523-fc31-4269-ac97-df63290d0e31":this.Length=12,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"92432b4d-8206-4a96-ba7b-e4cbd374f148":this.Length=1,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length]);break;case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":case"a3b52518-801b-44be-96bf-fdca3de84f7f":case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":this.Length=64,this.SqlType=a.substitute("${0}(Length=${1})",[this.SqlType,this.Length])}}},h={IsEncrypted:!1},i={Precision:17,Scale:4,initializePrecisionScaleData:function(){this.SqlType=a.substitute("${0}(Precision=${1},Scale=${2})",[this.SqlType,this.Precision,this.Scale])}},j={IsPercentage:!1},k={Display:"",Storage:"",StorageOptions:[],DisplayOptions:[],initializeStorageData:function(){switch(this.Display="",this.Storage="",this.StorageOptions=[],this.DisplayOptions=[],this.id){case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":this.StorageOptions=[{id:"Id",name:d.id},{id:"Number",name:d.number}],this.DisplayOptions=[{id:"Id",name:d.id},{id:"Number",name:d.number},{id:"Text",name:d.text},{id:"Code",name:d.code}],this.Display="Text",this.unicode?(this.Storage="TextUnicode",this.StorageOptions.push({id:"TextUnicode",name:d.text}),this.StorageOptions.push({id:"CodeUnicode",name:d.code})):(this.Storage="Text",this.StorageOptions.push({id:"Text",name:d.text}),this.StorageOptions.push({id:"Code",name:d.code}));break;case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":this.StorageOptions=[{id:"Value",name:d.value}],this.unicode?(this.Storage="NameUnicode",this.StorageOptions.push({id:"NameUnicode",name:d.name}),this.StorageOptions.push({id:"CodeUnicode",name:d.code})):(this.Storage="Name",this.StorageOptions.push({id:"Name",name:d.name}),this.StorageOptions.push({id:"Code",name:d.code}));break;case"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":this.unicode?(this.Storage="StringUnicode",this.StorageOptions.push({id:"StringUnicode",name:d.string})):(this.Storage="String",this.StorageOptions.push({id:"String",name:d.string}))}}},l={Items:[],MultiSelect:!1,OverriddenName:""},m={LookupEntityName:"",LookupGroup:1,ParentProperty:""},n={EnableHyperLinking:!1,LookupEntityName:"",LookupPreFilters:[],LookupProperties:[],ReturnPrimaryKey:!0},o={PickListId:"",PickListName:"",AllowMultiples:!1,AlphaSort:!1,MustExistInList:!0,NoneEditable:!1,PickListFilter:"",ValueStoredAsText:!0},p={DisplayName:"",Description:"",Template:"",type:-1,oldTemplate:""};return b("Sage.UI.Controls.FieldPropertyObject",null,{id:"",name:"",aggregate:[],show:[],unicode:!1,supported:!0,numbers:["Int16","Int32","Double","Float","Decimal","Single","DateTime","Date","Time"],hidden:[],constructor:function(a,b,c,d){var q=["sum","count","avg","min","max"],r=["count","min","max"];switch(null!==d&&void 0!==d&&(this.supported=d),null!==c&&void 0!==c&&(this.unicode=c),this.id=a,this.name=b,e.mixin(this,f),this.initializeBaseData(),this.numbers.indexOf(this.SqlType)>=0||""===this.SqlType||void 0===this.SqlType?this.aggregate=q:this.aggregate=r,this.id){case"a6bf2690-3477-4a18-9849-56abf8693934":case"6b0b3d51-0728-4b67-9473-52836a81da53":case"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case"95ca9d52-6f0b-4a96-bd40-43583f41faf8":case"3edc7c52-e711-431d-b150-969d88ebabf4":case"1f08f2eb-87c8-443b-a7c2-a51f590923f5":case"189a1a4e-396c-4146-95c0-93b5d9e7d160":case"68e04249-f7e2-4b63-90be-55fbb1f4aa77":case"30053f5a-8d40-4db1-b185-1e4128eb26cc":case"17541523-fc31-4269-ac97-df63290d0e31":case"92432b4d-8206-4a96-ba7b-e4cbd374f148":break;case"ccc0f01d-7ba5-408e-8526-a3f942354b3a":case"f4ca6023-9f5f-4e41-8571-50ba94e8f233":case"31e8638d-4232-4c61-8827-d94132a33887":case"76c537a8-8b08-4b35-84cf-fa95c6c133b0":case"b2ed309e-ea89-4eef-8051-6244987953a4":case"5685161e-5f0a-4a36-83fe-89e8e462e9e7":case"85f2bba5-1fb7-4ecf-941a-d98d4739c305":case"07370ef3-ad24-409f-86a8-ff2db5ee6d69":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,h),this.show=["Length","IsEncrypted"];break;case"2596d57d-89d6-4b72-9036-b18c64c5324c":e.mixin(this,i),this.initializePrecisionScaleData(),this.show=["Precision","Scale"];break;case"f37c635c-9fbf-40d8-98d5-750a54a3cca1":e.mixin(this,j),this.show=["IsPercentage"];break;case"b71918bf-fac1-4b62-9ed5-0b0294bc9900":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,k),this.initializeStorageData(),e.mixin(this,o),this.show=["Length","Display","Storage","PickListName","AllowMultiples","AlphaSort","MustExistInList","NoneEditable","ValueStoredAsText"];break;case"a3b52518-801b-44be-96bf-fdca3de84f7f":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,k),this.initializeStorageData(),e.mixin(this,n),this.show=["Length","LookupEntityName","EnableHyperLinking","ReturnPrimaryKey","LookupProperties","LookupPreFilters"];break;case"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":e.mixin(this,g),this.initializeLengthData(),e.mixin(this,m),this.show=["Length","LookupEntityName","LookupGroup","ParentProperty"];break;case"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":e.mixin(this,k),this.initializeStorageData(),e.mixin(this,l),this.show=["Storage","MultiSelect","Items","OverriddenName"];break;case"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":e.mixin(this,k),this.initializeStorageData(),this.show=["Storage"];break;case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":e.mixin(this,p),this.type=0,this.show=["Description","Template"],this.hidden=["oldTemplate"];break;case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":e.mixin(this,p),this.type=1,this.show=["Description","Template"],this.hidden=["oldTemplate"]}}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/UserLookupDetailsView":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/text!./templates/UserLookupDetailsView.html","Sage/MainView/EntityMgr/AddEditEntityDetail/_DetailsAddEditDialogBase","Sage/UI/Controls/Grid","Sage/UI/Controls/CheckBox"],function(declare,memory,template,_DetailsAddEditDialogBase,Grid,crmCheckBox){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.UserLookupDetailsView",[_DetailsAddEditDialogBase],{widgetTemplate:new Simplate(eval(template)),constructor:function(){this.hasProperties=!0,this.isMetric=!1},postCreate:function(){this._createOperationsGrid(),this.startup()},_createCustomCheckBox:function(){return declare("Sage.MainView.EntityMgr.AddEditEntityFilter.customChkBx",Sage.UI.Controls.CheckBox,{shouldPublishMarkDirty:!1,constructor:function(){},postCreate:function(){""!==this.hotKey&&(this.focusNode.accessKey=this.hotKey),this.connect(this,"onChange",this.onChanged)}})},_createDataForList:function(){for(var a=this.detailUtility.operation.data,b=new memory,c=0;c<a.length;c++){var d=!1;this.details&&this.details.userLookupFilter&&this.details.userLookupFilter.operators&&a[c].id&&(d=this.details.userLookupFilter.operators.indexOf(a[c].id)>=0),b.add({id:a[c].id,data:d,label:a[c].name})}return b},_createOperationsGrid:function(){var a=this._createDataForList(),b=new Grid({gridLabel:this._nlsResources.lblOperators,store:a,sort:[{attribute:"label",descending:!1}],columns:[{label:"",field:"data",autoSave:!0,editable:!0,editor:this._createCustomCheckBox(),id:"col1",width:250},{label:"",field:"label",autoSave:!0,editable:!1,id:"col2",width:250}],placeHolder:this.rangegridwhole,columnResizing:!0,selectionMode:"single",rowSelection:!0,minRowsPerPage:a.data.length,maxRowsPerPage:a.data.length});this.rangeGridsObj=b,this.lookupGridLabel.innerHTML=this._nlsResources.lblOperators,b._grid.onLoadComplete=function(){b._grid.resize()}},startup:function(){this.inherited(arguments)},getDetails:function(){for(var a=this.rangeGridsObj.store.data,b=[],c=0;c<a.length;c++){var d=a[c];void 0!==d&&void 0!==d.data&&d.data&&b.push(d.id)}return{userLookupFilter:{operators:b}}}});return widget})},"Sage/UI/Controls/CheckBox":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(a,b){return b("Sage.UI.Controls.CheckBox",a,{hotKey:"",autoPostBack:!1,labelText:"",labelPlacement:"",shouldPublishMarkDirty:!0,constructor:function(){},postCreate:function(){""!==this.hotKey&&(this.focusNode.accessKey=this.hotKey),this.connect(this,"onChange",this.onChanged),this._insertLabel(),this.inherited(arguments)},_insertLabel:function(){var a="before",b=null;"right"===this.labelPlacement&&(a="after"),"none"!==this.labelPlacement&&(b=dojo.create("label",{for:this.id,innerHTML:this.labelText},this.domNode,a),"top"===this.labelPlacement&&dojo.create("br",null,b,"after"))},onChanged:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.autoPostBack&&Sys&&Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,"")}})})},"Sage/Utility/GeneralSchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility","Sage/Utility/PropertySchemaReader","Sage/Utility/FilterSchemaReader","Sage/Utility/PickListSchemaReader","dojo/request/xhr"],function(a,b,c,d,e,f,g,h,i){return a("Sage.Utility.GeneralSchemaReader",[f,g,h],{service:null,endpointBase:"metadata",constructor:function(a){this.changeService(a)},changeService:function(a){this.endpointBase=a,this.service=Sage.Data.SDataServiceRegistry.getSDataService(this.endpointBase)},getSchemaInformationFromSData:function(){var a=this;i(c.substitute("slxdata.ashx/slx/${0}/-/$schema",[this.endpointBase]),{handleAs:"xml",preventCache:!0,sync:!0}).then(function(b){var c=e.parseXMLNode(b,{});c&&a.sDataSuccessful(c)},function(b){return a._onError("Download",b),b})},sDataSuccessful:function(a){var b=a["xs:schema"];switch(this.endpointBase.toLocaleLowerCase()){case"system":this._getPickListSchemaInformation(b);break;default:this._getPropertySchemaInformation(b),this._getFilterSchemaInformation(b)}}})})},"Sage/Utility/PropertySchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility/_SchemaReaderHelper"],function(a,b,c,d,e){return a("Sage.Utility.PropertySchemaReader",[e],{propertyResourceNodes:null,property_object:null,constructor:function(){this.resetPropertySchemaInformation()},resetPropertySchemaInformation:function(){this.propertyResourceNodes=new b},_getPropertySchemaInformation:function(a){var b="property";this._findAndAdd(a,b),this.propertyResourceNodes=this._gatherNodesFromQueue(b),this.propertyResourceNodes.data.length>0&&(this.property_object=this._buildObjectFromNodeList(this.propertyResourceNodes.data[0]))}})})},"Sage/Utility/_SchemaReaderHelper":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","dojo/_base/lang"],function(a,b,c,d,e){return a("Sage.Utility._SchemaReaderHelper",null,{xsct:"xs:complexType",xsst:"xs:simpleType",xse:"xs:element",
xsn:"xs:enumeration",xsr:"xs:restriction",xsa:"xs:all",xsy:"xs:anyAttribute",xss:"xs:sequence",xsc:"xs:choice",ddEnum:"${0}--enum",ddType:"${0}--type",ddList:"${0}--list",ddChoice:"${0}--choice",fieldNameSearch:"name",fieldTypeSearch:"type",fieldRelationshipSearch:"relationship",fieldIsCollectionSearch:"isCollection",nodeList:null,__populationQueue:null,constructor:function(){this.nodeList=new b,this.__populationQueue=[]},__getHeaderNodeByNameReturnAllElements:function(a,b,c){var d=this.__getHeaderNodeByNameReturnObject(a,b,c);return null!==d?this.__determineCorrectPathToTake(d):null},__getHeaderNodeByNameReturnObject:function(a,b,c){var d=a[b].filter(function(a){return a.name===c});return void 0!==d&&null!==d&&d.length>0?d[0]:null},__addToNodeList:function(a,b,c){var e=this;dojo.isArray(a)?d.forEach(a,function(a){e.__addOrUpdateSingleNodeToNodeList(a,b,c,null)}):e.__addOrUpdateSingleNodeToNodeList(a,b,c,null)},__addOrUpdateSingleNodeToNodeList:function(a,b,c,d){var e=null===d,f=this.__populateNodeListItem(a,b,c,e);e||(this.__populationQueue[d]=f)},__truthy:function(a){var b=null;return"string"==typeof a?(a=a.toLowerCase(),"true"!==a&&"1"!==a&&"t"!==a&&"yes"!==a&&"y"!==a||(b=!0),"false"!==a&&"0"!==a&&"f"!==a&&"no"!==a&&"n"!==a||(b=!1)):(!0!==a&&1!==a||(b=!0),!1!==a&&0!==a||(b=!1)),b},__createNodeItem:function(a){var b=void 0!==a["sme:isMandatory"]&&a["sme:isMandatory"],c=void 0===a["sme:maxLength"]?null:a["sme:maxLength"],d="undefined"===a.name?"":a.name,e=void 0===a["sme:label"]?"undefined"===a.label?"":a.label:a["sme:label"],f=void 0===a.type?"xs:string":a.type,g=void 0===a["sme:relationship"]?null:a["sme:relationship"],h=void 0!==a["sme:isCollection"]&&a["sme:isCollection"],i=void 0===a.sub?null:a.sub,j=void 0===a.collection?null:a.collection,k=void 0===a.value?null:a.value;h=this.__truthy(h);var l={name:d,label:e,type:f,maxLength:c,manadtory:b,relationship:g,isCollection:h,collection:j,sub:i,value:null,nameValue:k};return null!==a.superParentNodeName&&void 0!==a.superParentNodeName&&(l.superParentNodeName=a.superParentNodeName),null!==a.pathFromParent&&void 0!==a.pathFromParent&&(l.pathFromParent=a.pathFromParent),this.__addToQueue(l),l},__inQueue:function(a,b){var c=this.__populationQueue.filter(function(c){return c[a]===b});return null!==c&&c.length>0},__addToQueue:function(a){return!(void 0===a||null===a||void 0===a[this.fieldNameSearch]||null===a[this.fieldNameSearch]||this.__inQueue(this.fieldNameSearch,a[this.fieldNameSearch])||(this.__populationQueue.push(a),0))},__populateNodeListItem:function(a,b,c,e){var f=this,g={};return null!==b&&void 0!==b&&(a.sub=[],dojo.isArray(b)?d.forEach(b,function(b){g=f.__createNodeItem(b),a.sub.push(g)}):(g=this.__createNodeItem(b),a.sub.push(g))),g={},null!==c&&void 0!==c&&(a.collection=[],dojo.isArray(c)?d.forEach(c,function(b){g=f.__createNodeItem(b),a.collection.push(g)}):(g=this.__createNodeItem(c),a.collection.push(g))),e&&(a=this.__createNodeItem(a)),a},_findAndAdd:function(a,b){var d=c.substitute(this.ddList,[b]),e=this.__getHeaderNodeByNameReturnAllElements(a,this.xsct,d),f=0;if(this.__populationQueue=[],null!==e)for(this.__addToNodeList(e),f=0;f<this.__populationQueue.length;f++){var g=this.__populationQueue[f];g.relationship,g.isCollection;d=g.type,e=this.__getHeaderNodeByNameReturnAllElements(a,this.xsct,d),null!==e&&this.__complexTypeHandler(g,e,f),e=this.__getHeaderNodeByNameReturnAllElements(a,this.xsst,d),null!==e&&this.__complexTypeHandler(g,e,f)}},__complexTypeHandler:function(a,b,c){var d=a.type;switch(d.substring(d.lastIndexOf("--")+2).toLowerCase()){case"list":this.__addOrUpdateSingleNodeToNodeList(a,b,a.collection,c);break;case"enum":case"choice":this.__addOrUpdateSingleNodeToNodeList(a,a.sub,b,c);break;case"type":this.__addOrUpdateSingleNodeToNodeList(a,b,a.collection,c)}},_gatherNodesFromQueue:function(a){var d=["--type","--list","--choice"],e=new b({idProperty:"name"}),f=this,g=this.__populationQueue.filter(function(b){return void 0!==b.pathFromParent&&b.superParentNodeName===c.substitute(f.ddList,[a])});g.length>0&&e.add(g[0]);for(var h=0;h<e.data.length;h++){var i=e.data[h];if(i.sub)for(var j=i.sub.filter(function(a){for(var b=0;b<d.length;b++){var c=d[b],e=c.length;if(a.type.indexOf(c)+e==a.type.length)return!0}return!1}),k=0;k<j.length;k++)e.index[j[k].name]&&e.add(j[k])}return e},_buildObjectFromNodeList:function(a){var b,d=[],e={},f=0,g={};g[a.name]={},d.push({path:a.name,sub:a.sub,item:g});do{var h=d[f];g=e;for(var i=h.path.split("."),j=0;j<i.length;j++){i[j]in g?g=g[i[j]]:g[i[j]]={}}if(g[i[i.length-1]]=h.item[i[i.length-1]],dojo.isArray(h.sub))for(b=0;b<h.sub.length;b++){var k=h.sub[b],l={};l[k.name]={},d.push({path:c.substitute("${0}.${1}",[h.path,k.name]),sub:k.sub,item:l})}f++}while(f<d.length);return e},__determineCorrectPathToTake:function(a){var b=a.name.substring(a.name.lastIndexOf("--")+2).toLowerCase(),d={},e="",f={};switch(b){case"list":d=a[this.xss],e=this.xss;break;case"enum":d=a[this.xsr],e=this.xsr;break;case"choice":d=a[this.xsc],e=this.xsc;break;case"type":d=a[this.xsa],null!==d&&void 0!==d?e=this.xsa:null!==(d=a[this.xsy])&&void 0!==d&&(e=this.xsy)}if(d){switch(b){case"list":case"choice":case"type":f=d[this.xse],null!==f&&void 0!==f&&(e=c.substitute("${0}///${1}",[e,this.xse]),d=d[this.xse]);break;case"enum":f=d[this.xsn],null!==f&&void 0!==f&&(e=c.substitute("${0}///${1}",[e,this.xsn]),d=d[this.xsn])}return d.superParentNodeName=a.name,d.pathFromParent=e,d}return null}})})},"Sage/Utility/FilterSchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility/_SchemaReaderHelper"],function(a,b,c,d,e){return a("Sage.Utility.FilterSchemaReader",[e],{filterResourceNodes:null,filter_object:null,constructor:function(){this.resetFilterSchemaInformation()},resetFilterSchemaInformation:function(){this.filterResourceNodes=new b},_getFilterSchemaInformation:function(a){var b="filter";this._findAndAdd(a,b),this.filterResourceNodes=this._gatherNodesFromQueue(b),this.filterResourceNodes.data.length>0&&(this.filter_object=this._buildObjectFromNodeList(this.filterResourceNodes.data[0]))}})})},"Sage/Utility/PickListSchemaReader":function(){define(["dojo/_base/declare","dojo/store/Memory","dojo/string","dojo/_base/array","Sage/Utility/_SchemaReaderHelper"],function(a,b,c,d,e){return a("Sage.Utility.PickListSchemaReader",[e],{picklistResourceNodes:null,picklist_object:null,constructor:function(){this.picklist_object={},this.resetPickListSchemaInformation()},resetPickListSchemaInformation:function(){this.picklistResourceNodes=new b},_getPickListSchemaInformation:function(a){var b="pickList";this._findAndAdd(a,b),this.picklistResourceNodes=this._gatherNodesFromQueue(b),this.picklistResourceNodes.data.length>0&&(this.picklist_object=this._buildObjectFromNodeList(this.picklistResourceNodes.data[0]))},cleanupPicklistObject:function(){var a=this.picklist_object.pickList;return a.items=a.items.pickListItem,a}})})},"Sage/MainView/EntityMgr/EntityWizard/SelectEntityType":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/SelectEntityType.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment"],function(a,b,c,d,e,f,g,h,i){return a("Sage.MainView.EntityMgr.EntityWizard.SelectEntityType",[e],{id:"dlgSelectEntityType",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.SelectEntityType,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},isValid:function(){return!0},destroy:function(){this.inherited(arguments)}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityDetails":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityDetails.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblCreateEntity">Create Entity</label>\r\n                <p><label data-dojo-attach-point="lblCreateEntityFromTable">Create a new entity from a table</label></p>\r\n                <hr />\r\n            </div>\r\n            \r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_displayNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                Display Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="displayName">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblEntityName">\r\n                                Entity Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="Name">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div class="lbl alignright">\r\n                            <label style="line-height:32px !important;">\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline"  data-dojo-attach-point="" style="color:red">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="divValidationMessage">\r\n                            </label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                \x3c!--<div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">Back</div>--\x3e\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/EntityDetails.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment","dojo/topic","Sage/UI/Controls/TextBox","dojo/dom-construct","Sage/UI/FilteringSelect","dojo/store/Memory","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","dijit/form/Form","Sage/MainView/EntityMgr/EntityDetailUtility"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a("Sage.MainView.EntityMgr.EntityWizard.EntityDetails",[e],{id:"dlgEntityDetails",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.EntityDetails,_fileInputOnChange:null,nameTextBox:null,displayNameTextBox:null,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblCreateEntity.innerHTML=this._nlsResources.lblCreateEntity,this.lblCreateEntityFromTable.innerHTML=this._nlsResources.lblCreateEntityFromTable,this.lblDisplayName.innerHTML=this._nlsResources.lblDisplayName,this.lblEntityName.innerHTML=this._nlsResources.lblEntityName,this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel),this._dialog._standby||q.mixin(this._dialog,new p),this._createTextboxControls(),dojo.connect(this.displayNameTextBox,"onChange",this,function(a){var b=a.replace(/[^A-Za-z0-9]/g,"");this.nameTextBox.set("value",this._capitalizeFirstLetter(b.replace(/\s/g,"")))})},_capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},_createTextboxControls:function(){this.nameTextBox=new k({shouldPublishMarkDirty:!1,required:!0,validator:this._NameValidator,invalidMessage:this._nlsResources.lblInvalidEntry}),l.place(this.nameTextBox.domNode,this.Name,"only"),this.displayNameTextBox=new k({shouldPublishMarkDirty:!1,required:!0,invalidMessage:"Required"}),l.place(this.displayNameTextBox.domNode,this.displayName,"only")},_NameValidator:function(a,b){var c="^[A-Z][A-Za-z0-9]*$",d=a.match(c,"g");return!!d&&(q.isArray(d),d[0].length==a.length)},_validateUniqueName:function(){this._dialog.showLoading();var a=new Sage.SData.Client.SDataResourceCollectionRequest(o.getSDataService("metadata"));a.setResourceKind(d.substitute("entities")),a.setQueryArg("count",1),a.setQueryArg("where",d.substitute("name like '${0}'",[this.nameTextBox.value.toLowerCase()]));var b=this,c=!0;return a.read({async:!1,success:function(a){void 0!==a&&void 0!==a.$resources&&1==a.$resources.length?(b.divValidationMessage.innerHTML=b._nlsResources.lblEntityUsed,c=!1):c=!0,b._dialog.hideLoading()},failure:function(a){b._dialog.hideLoading(),c=!1}}),c},isValid:function(){var a=this.Form,b=a.validate();return b&&(b=this._validateUniqueName()),b},destroy:function(){this.inherited(arguments)},_btnNext_OnClick:function(){this._dialog.showLoading();var a=this;setTimeout(function(){a.divValidationMessage.innerHTML="",a.entityDetails.entityName=a.nameTextBox.value,a.entityDetails.entityDisplayName=a.displayNameTextBox.value,a.entityDetails.status="ok",a.isValid()?(a._dialog.hideLoading(),a._checkCurrentStep(),a._dialog.hide(),j.publish("/entityController/entityWizard/nextStep",a._currentStep)):a._dialog.hideLoading()},1e3)}})})},"Sage/MainView/EntityMgr/EntityWizard/Relationship":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/Relationship.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblRelationship">Primary Relationship</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblSelectEntity">Choose wheather this entity has a primary relationship to another entity</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblExistingEntity">\r\n                                Relate to an existing Entity\r\n                            </label>\r\n                        </div>\r\n                        <div style="padding-top:6px;">\r\n                            <input type="checkbox" data-dojo-attach-point="IsExtension"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelatedEntity">\r\n                                Related Entity\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typePkg"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelationType">\r\n                                Relation Type\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typeRel"></div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/Relationship.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/UI/Controls/CheckBox","Sage/Utility/File/Attachment","dojo/topic","Sage/UI/Controls/TextBox","dojo/dom-construct","Sage/UI/FilteringSelect","dojo/store/Memory","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","dijit/registry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a("Sage.MainView.EntityMgr.EntityWizard.Relationship",[e],{id:"dlgRelationship",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.Relationship,_fileInputOnChange:null,typeDropDowns:!1,typeDropDownsRel:!1,checkBox:!1,_pkgType:"",chkItem:"chk",_dialog:null,entityInfo:!1,constructor:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblRelationship.innerHTML=this._nlsResources.lblRelationship,this.lblSelectEntity.innerHTML=this._nlsResources.lblSelectEntity,this.lblExistingEntity.innerHTML=this._nlsResources.lblExistingEntity,this.lblRelatedEntity.innerHTML=this._nlsResources.lblRelatedEntity,this.lblRelationType.innerHTML=this._nlsResources.lblRelationType,this.btnBack.set("label","< "+this._nlsResources.lblBack),this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel),this._dialog._standby||r.mixin(this._dialog,new q),this._createTextboxControls()},_createTextboxControls:function(){var a=new Sage.SData.Client.SDataResourceCollectionRequest(p.getSDataService("metadata")).setResourceKind("entities").setQueryArg("Count","1000").setQueryArg("select","id,displayName,name").setQueryArg("orderBy","name").setQueryArg("format","json"),b=this;this.entityStore=new o,a.read({scope:this,success:function(a){var c=a.$resources;this.entityInfo=c;for(var d=0;d<=c.length-1;d++){var e=c[d].displayName?c[d].displayName:c[d].name;c[d].name&&b.entityStore.add({id:c[d].name,name:e})}b._dialog.hideLoading()},failure:function(a){b._dialog.hideLoading()}}),this.typeDropDowns=new n({id:this._pkgType,name:"value",store:this.entityStore,searchAttr:"name"},this._pkgType),m.place(this.typeDropDowns.domNode,this.typePkg,"only"),this.typeDropDowns.set("disabled",!0);var c=new o({data:[{id:"1:1",name:this._nlsResources.ExtensionEntity},{id:"1:M",name:this._nlsResources.ChildEntity}]});this.typeDropDownsRel=new n({name:"value",store:c,searchAttr:"name"}),m.place(this.typeDropDownsRel.domNode,this.typeRel,"only"),this.typeDropDownsRel.set("disabled",!0),this.IsExtension.on("change",function(a){a?(b.entityStore.data.length,b.typeDropDowns.set("disabled",!1),b.typeDropDownsRel.set("disabled",!1)):(b.typeDropDowns.set("value",""),b.typeDropDowns.set("disabled",!0),b.typeDropDownsRel.set("value",""),b.typeDropDownsRel.set("disabled",!0))},!0)},isValid:function(){return this.Form.validate()},destroy:function(){this.inherited(arguments)},_btnNext_OnClick:function(){this._dialog.showLoading();var a=this;if(this.isValid())if(this.entityDetails.relatedEntity=this.typeDropDowns.value,this.entityDetails.relatedEntityDispName=this.typeDropDowns.displayedValue,this.entityDetails.relationType=this.typeDropDownsRel.value,this.entityDetails.relatedProperty=!1,this.IsExtension.checked&&"1:M"===this.typeDropDownsRel.value){var b=new Sage.SData.Client.SDataResourceCollectionRequest(p.getSDataService("metadata")).setQueryArg("where","isKey eq true").setResourceKind("entities('"+this.entityDetails.relatedEntity+"')/properties").setQueryArg("select","id,dataTypeId,displayName,propertyName").setQueryArg("count",1).setQueryArg("format","json");b.read({async:!1,success:function(b){var c=b.$resources;a.entityDetails.relatedPropertyId=c[0].id,a._dialog.hideLoading(),a._checkCurrentStep(),a._dialog.hide(),k.publish("/entityController/entityWizard/nextStep",a._currentStep)},failure:function(a){this._dialog.hideLoading()}})}else this._dialog.hideLoading(),this._checkCurrentStep(),this._dialog.hide(),k.publish("/entityController/entityWizard/nextStep",this._currentStep);else this._dialog.hideLoading()}})})},"Sage/MainView/EntityMgr/EntityWizard/EntityProperties":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityProperties.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div style="padding-bottom:30px;">\r\n            <label style="font-weight:bold;" data-dojo-attach-point="lblEnterProperties">Enter Fields</label>\r\n            <p><label data-dojo-attach-point="lblAddNewProperty">Click the add(+) button to add new fields to the entity</label></p>\r\n            <hr />\r\n        </div>\r\n        <div data-dojo-type="dijit.form.Form"  style="height:400px !important;" class="mainContentContent DialogMainForm">\r\n            <div style="width:100%;" class="fld dijitInline" data-dojo-attach-point="placeGrid"></div>\r\n        </div>\r\n        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n        </div>\r\n        <div class="lookupButtonWrapper">\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/EntityProperties.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/GridView","dojo/dom-construct","dojo/_base/lang","dojo/_base/connect","dojo/store/Memory","dojo/store/Observable","Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditPropertiesDialog","Sage/MainView/EntityMgr/EntityDetailUtility","dojo/topic","Sage/UI/Controls/FieldStore","dojo/_base/array","Sage/UI/Controls/GridParts/Columns/CheckBox","Sage/UI/Dialogs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return a("Sage.MainView.EntityMgr.EntityWizard.EntityProperties",[e],{id:"dlgEntityProperties",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.EntityProperties,_fileInputOnChange:null,fStore:null,propGrid:null,sysProps:[],dataStore:o(new n({idProperty:"propertyName",data:[]})),constructor:function(){this.inherited(arguments),this.fStore=new s},startup:function(){this.inherited(arguments),this._createPropsGrid()},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblEnterProperties.innerHTML=this._nlsResources.lblEnterProperties,this.lblAddNewProperty.innerHTML=this._nlsResources.lblAddNewProperty,this.btnBack.set("label","< "+this._nlsResources.lblBack),this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel)},isValid:function(){return!0},destroy:function(){this.inherited(arguments)},populateDefaultProps:function(){for(var a=this.dataStore.data.length,b=0;b<a;b++)this.dataStore.remove(this.dataStore.data[0].propertyName);var c,d=this.entityDetails.entityName,e=(this.entityDetails.relatedProperty,this.entityDetails.relatedEntity);this.sysProps=["CreateUser","CreateDate","ModifyUser","ModifyDate","SeccodeId"],"1:1"===this.entityDetails.relationType?(c={propertyName:e+"Id",displayName:e+" Id",isKey:!0,isNullable:!1,columnName:e.toUpperCase()+"ID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"},this.dataStore.put(c),this.sysProps.push(e+"Id")):(c={propertyName:d+"Id",displayName:d+" Id",isKey:!0,isNullable:!1,columnName:d.toUpperCase()+"ID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"},this.dataStore.put(c),this.sysProps.push(d+"Id")),"1:M"===this.entityDetails.relationType&&(e=this.entityDetails.relatedEntity,c={propertyName:e+"Id",displayName:e+" Id",isKey:!1,isNullable:!1,columnName:e.toUpperCase()+"ID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"},this.dataStore.put(c),this.sysProps.push(d+e+"Id")),this.dataStore.put({propertyName:"CreateUser",displayName:this._nlsResources.CreateUser,isKey:!1,isNullable:!0,columnName:"CREATEUSER",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"}),this.dataStore.put({propertyName:"CreateDate",displayName:this._nlsResources.CreateDate,isKey:!1,isNullable:!0,columnName:"CREATEDATE",DataType:"Date Time",length:0,dataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5"}),this.dataStore.put({propertyName:"ModifyUser",displayName:this._nlsResources.ModifyUser,isKey:!1,isNullable:!0,columnName:"MODIFYUSER",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"}),this.dataStore.put({propertyName:"ModifyDate",displayName:this._nlsResources.ModifyDate,isKey:!1,isNullable:!0,columnName:"MODIFYDATE",DataType:"Date Time",length:0,dataTypeId:"1f08f2eb-87c8-443b-a7c2-a51f590923f5"}),this.dataStore.put({propertyName:"SeccodeId",displayName:"Seccode Id",isKey:!1,isNullable:!1,columnName:"SECCODEID",DataType:"Standard Id",length:12,dataTypeId:"30053f5a-8d40-4db1-b185-1e4128eb26cc"})},_createPropsGrid:function(){var a=this;this.populateDefaultProps();var b=[{field:"displayName",label:this._nlsResources.lblDisplayName},{field:"propertyName",label:this._nlsResources.lblPropertyName},{field:"dataTypeId",label:this._nlsResources.lblDataType,formatter:function(b){var c=a.fStore.typeStore.index[b];return c>=0?a.fStore.typeStore.data[c].name:""}},{field:"length",className:"alignright",label:this._nlsResources.lblLength},{field:"isNullable",label:this._nlsResources.lblNullable,renderCell:function(a,b,c,d){var e=new u({shouldPublishMarkDirty:!1,readonly:!0,disabled:!0}),f=!1;b&&(f=b),e.setChecked(f),e.placeAt(c)}}],c=new j({tools:["add","edit","delete"],store:this.dataStore,columns:b,placeHolder:this.placeGrid,addItem:l.partial(this.addItem,this),removeItem:l.partial(this.removeItem,this),editItem:l.partial(this.editItem,this),columnHiding:!0,columnResizing:!0,columnReordering:!0,selectionMode:"single",rowSelection:!0,classNames:"dgrid-autoheight",minRowsPerPage:this.dataStore.data.length,maxRowsPerPage:this.dataStore.data.length});this.propGrid=c,c.createGridView()},addItem:function(a){void 0===a.entityDetails.detailUtility?(a._dialog.showLoading(),setTimeout(function(){a.entityDetails.detailUtility=new q,a.entityDetails.detailUtility.getSchemasInformationFromSData(!1),a.entityDetails.detailUtility.getSpecialValues(),a.showAddEditPropsDialog(a)},1e3)):a.showAddEditPropsDialog(a)},showAddEditPropsDialog:function(a){var b=new p("",a._nlsResources.addFieldDialogTitle,a.entityDetails.detailUtility,!1,null,!0,a.dataStore);a._dialog.hideLoading(),b.show(),m.connect(b._dialog,"hide",l.partial(a.onReset,a))},editItem:function(a){var b=a.propGrid.grid.getSelectedRowData();if(0===b.length)return void v.showInfo(a._nlsResources.NoRecordsSelected);if(-1!==t.indexOf(a.sysProps,b[0].propertyName))return void v.showInfo(a._nlsResources.noEditSysProps);if(b[0]){var c=new p("",a._nlsResources.editFieldDialogTitle,a.entityDetails.detailUtility,!1,b[0],!0,a.dataStore);c.show(),m.connect(c._dialog,"hide",l.partial(a.onReset,a))}},onReset:function(a){a.propGrid.grid.refresh()},removeItem:function(a){var b=a.propGrid.grid.getSelectedRowData();if(0===b.length)return void v.showInfo(a._nlsResources.NoRecordsSelected);if(-1!==t.indexOf(a.sysProps,b[0].propertyName))return void v.showInfo(a._nlsResources.noDeleteSysProps);var c=b[0].propertyName;c&&(a.dataStore.remove(c),a.propGrid.grid.refresh())},_btnNext_OnClick:function(){this.entityDetails.data=this.dataStore.data,this.isValid()&&(this._checkCurrentStep(),this._dialog.hide(),r.publish("/entityController/entityWizard/nextStep",this._currentStep))}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/AddEditPropertiesDialog":function(){
define(["dijit/_Widget","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/json","dojo/on","dojo/query","dojo/string","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/text!./templates/AddEditPropertiesDialog.html","dojo/i18n!./nls/AddEditDialog","dojo/store/Memory","Sage/_Templated","Sage/UI/Dialogs","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","Sage/UI/FilteringSelect","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/CheckBox","Sage/UI/Controls/FieldAttributeControlFactory","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/TextBox","Sage/MainView/EntityMgr/AddEditEntityDetail/DisplayName"],function(_Widget,domConstruct,domClass,dojoStyle,json,dojoOn,query,dojoString,dojoConnect,declare,lang,template,nlsResources,memory,_Templated,crmDialogue,SDataServiceRegistry,_DialogLoadingMixin,crmDropDowns,_DialogHelpIconMixin,crmCheckBox,FieldAttributeController,PropertyDropDown,crmTextBox,displayNameCNTRL){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.AddEditPropertiesDialog",[_Widget,_Templated],{_dialog:null,widgetTemplate:new Simplate(eval(template)),_nlsResources:nlsResources,widgetsInTemplate:!0,_EditData:!1,entityName:!1,detailUtility:!1,service:!1,_title:!1,details:null,_inEditMode:!1,justWidget:!1,showTypeAttributes:!1,dataTypeData:null,typeAttributeObj:null,activeControllers:null,isNewEntity:!1,dataStore:null,newProperty:null,rowTemplate:['<tr data-dojo-attach-point="_{%= $.name %}Section" name="_{%= $.name %}Section">','<td class="FManagerDialogFieldLabel {%= $.display %}">','<div style="padding:0 !important;" class="lbl alignright">','<label style="line-height:32px !important;">',"{%= $.label %}","</label>","</div>",'<div class="fld  dijitInline" data-dojo-attach-point="{%= $.name %}"></div>',"</td>","</tr>"],constructor:function(a,b,c,d,e,f,g){if(null===c){var h={name:a};c=new Sage.MainView.EntityMgr.EntityDetailUtility,c.getSchemasInformationFromSData(!1),c.getPropertiesAssociatedWithFilters(h),c.getSpecialValues(),c.refreshPropertyStore(h.name),this.service||(this.service=c.service)}if(c&&(this.detailUtility=c,this.detailUtility.refreshPropertyStore()),this._EditData=e,this.entityName=a,null===b){var i=this._EditData?nlsResources.editDialogTitle:nlsResources.dialogTitleAddField;this._title=dojoString.substitute(i,[this.entityName])}else this._title=b;this.justWidget=d,this.isNewEntity=!1,this._EditData&&(this._inEditMode=!0,this.dataTypeData=JSON.parse(this._EditData.dataTypeData)),f&&(this.isNewEntity=f,this.dataStore=g),this._createDynamicFieldProperties()},destroy:function(a){a.destroy(),dijit.popup.close()},postCreate:function(){for(var a=this.activeControllers.data,b=0;b<a.length;b++)this._moveActiveControlFromBackGroundToPage(a[b]);this.cmdSave.containerNode.innerHTML=this._nlsResources.lblSaveButton,this.cmdCancel.containerNode.innerHTML=this._nlsResources.lblCancelButton,lang.mixin(this._dialog,new _DialogHelpIconMixin({titleBar:this._dialog.titleBar})),this._dialog.createHelpIconByTopic("Adding_Editing_Properties"),lang.mixin(this._dialog,new _DialogLoadingMixin),this.hideControlsBasedOffSelectedFieldType(),dojoOn(this._dialog,"onCancel",lang.partial(this._cmdCancel_OnClick,this)),this.startup(),query(".dijitDialog").on("click",function(a){"button"!==(a.target||a.srcElement).type&&dijit.popup.close()}),dojoConnect.subscribe("/form/addEditProperty/showLoad",this,function(){this._dialog.showLoading()}),dojoConnect.subscribe("/form/addEditProperty/hideLoad",this,function(){this._dialog.hideLoading()})},_moveActiveControlFromBackGroundToPage:function(a){var b,c,d;a&&("propertyName"!==a.name?(b=new Simplate(this.rowTemplate),c=b.apply(a),d=domConstruct.toDom(c),domConstruct.place(a.control.domNode,d.lastElementChild.lastElementChild,"only"),a.control.domNode.className.indexOf("dijitCheckBox")>=0&&domClass.add(a.control.domNode.parentNode,"checkbox"),this._DynamicSection.appendChild(d)):(d=a.control.domNode,this._DisplayName.appendChild(d)))},_createDisplayNameController:function(){var a="",b="";return this._EditData&&this._EditData.displayName&&(a=this._EditData.displayName),this._EditData&&this._EditData.propertyName&&(b=this._EditData.propertyName),new displayNameCNTRL({dUtility:this.detailUtility,editMode:this._inEditMode&&!this.isNewEntity,dataStore:this.dataStore,query:{entityName:this.entityName,resourceKind:dojoString.substitute('entities("${0}")/properties',[this.entityName]),name:"propertyName",displayName:"displayName"},values:{display:{data:a,mapDisplayToName:this._nameToDisplayMap},name:{data:b,validation:this._NameValidator,disabled:this._inEditMode&&!this.isNewEntity,invalidMessage:this._nlsResources.validNameMsg}}})},_NameValidator:function(a,b){var c="^[A-Z][A-Za-z0-9_]*$",d=a.match(c,"g");return!!d&&(lang.isArray(d),d[0].length==a.length)},_nameToDisplayMap:function(a){var b=new RegExp(/\w*/gm),c=a.match(b);if(c){if(!lang.isArray(c))return c;if(a=c.join(""),b=new RegExp(/[A-Za-z]/gm),(c=b.exec(a))&&c.length>0)return a=a.substring(c.index),a&&a.length>0?a.charAt(0).toUpperCase()+a.slice(1):""}return""},_addToListofControls:function(a,b,c,d,e){var f=this._assignControlBasedOffType(a,b.substring(3),d,e),g=this._setDisplayString(f,a),h=void 0===this._nlsResources[a]||null===this._nlsResources[a]?c:this._nlsResources[a];this.activeControllers.add({control:f,label:h,name:a,display:g})},_displayControl:function(a,b){var c=["dataTypeData"],d=!0;return void 0!==b&&null!==b&&(d=c.indexOf(b)>=0),!d||void 0!==a.activeControls&&null!==a.activeControls&&a.activeControls.length>0},_setDisplayString:function(a,b){return this._displayControl(a,b)?"display":"display-none"},_setParentDisplayClass:function(a,b){this._displayControl(a)?(domClass.remove(b,"display-none"),domClass.add(b,"display")):(domClass.remove(b,"display"),domClass.add(b,"display-none"))},_createDynamicFieldProperties:function(){var a=this.detailUtility.propertyInformation.data;this.activeControllers=new memory({idProperty:"name"});var b=["id","displayName","columnName","isDynamic","length","isReadOnly","scale","precision","displayCategory","isKey"];this.isNewEntity||b.push("isNullable");for(var c=0;c<a.length;c++){var d=a[c],e=d.type,f=d.name,g=!this._inEditMode&&"isIncluded"===f;if(!(b.indexOf(f)>=0||g))if("xs:"===e.substring(0,3)){var h=null;this._inEditMode&&void 0!==this._EditData[f]&&null!==this._EditData[f]&&(h=this._EditData[f]),this._addToListofControls(f,e,d.label,h,null)}else{var i=e.length;if("--type"===e.substring(i-6,i)){var j=d.sub.data;if(null!==j)for(var k=0;k<j.length;k++){var l=j[k],m=l.name,n=l.type,o=!this._inEditMode&&"sdata"===f&&"generate"===m;if(!o&&"xs:"===n.substring(0,3)){var p=null;this._inEditMode&&void 0!==this._EditData[d.name][m]&&null!==this._EditData[d.name][m]&&(p=this._EditData[d.name][m]),this._addToListofControls(m,n,l,p,null)}}}else if("--enum"===e.substring(i-6,i)){var q=d.collection,r=null;this._inEditMode&&void 0!==this._EditData[f]&&null!==this._EditData[f]&&(r=this._EditData[f]),null!==q&&(q=new memory({idProperty:"@value",data:q.data}),this._addToListofControls(f,"xs:enum",d,r,{text:"@sme:label",id:"@value",data:q}))}}}},_assignControlBasedOffType:function(a,b,c,d){var e=null;if("dataTypeId"===a){var f=this;e=new crmDropDowns({shouldPublishMarkDirty:!1,required:!0,value:c,store:this.detailUtility.typeStore,searchAttr:"name",idAttr:"id",maxHeight:175,query:{supported:!0},fetchProperties:{sort:[{attribute:"name",descending:!1}]},invalidMessage:this._nlsResources.InvalidFilterName,disabled:this._inEditMode&&!this.isNewEntity,onChange:function(a){f._setTypeAttribute()}}),this.typeDropDown=e,void 0!==c?(this._setTypeAttribute(),this.showTypeAttributes=!0):this.typeAttribute.containerNode.innerHTML=this._nlsResources.lblMore}else if("dataTypeData"===a)e=this.typeAttributeObj;else if("propertyName"===a)e=this._createDisplayNameController();else switch(b){case"string":case"int":case"byte":case"date":e=new crmTextBox({shouldPublishMarkDirty:!1,disabled:this._inEditMode&&!this._EditData.isDynamic&&"displayName"!==a&&!this.isNewEntity}),void 0!==c&&null!==c&&(e.textbox.value=c);break;case"boolean":e=new crmCheckBox({shouldPublishMarkDirty:!1}),void 0!==c&&null!==c?e.setChecked(c):"isNullable"===a&&e.setChecked(!0);break;case"picklist":case"enum":e=new crmDropDowns({value:c,store:d.data,idProperty:d.id,searchAttr:d.text,shouldPublishMarkDirty:!1,disabled:this._inEditMode&&!this._EditData.isDynamic&&"displayName"!==a&&!this.isNewEntity,required:!1})}return domClass.remove(e.domNode,"dijitInline"),e},_setTypeAttribute:function(){var a=this.detailUtility.typeStore.index[this.typeDropDown.value];this._EditData&&void 0!==this._EditData&&("2596d57d-89d6-4b72-9036-b18c64c5324c"===this.typeDropDown.value&&lang.mixin(this.dataTypeData,{Precision:this._EditData.precision,Scale:this._EditData.scale}),void 0===this._EditData.length&&null===this._EditData.length||lang.mixin(this.dataTypeData,{Length:this._EditData.length}));var b=!(!this._inEditMode||this._EditData.isDynamic);this.isNewEntity&&(b=!1);for(var c=["IsEncrypted","IsPercentage","ValueStoredAsText","AllowMultiples","EnableHyperLinking","MultiSelect","NoneEditable","ReturnPrimaryKey","AlphaSort","MustExistInList","NoneEditable","ReturnPrimaryKey","IsNullable"],d=0;d<c.length;d++){var e=c[d];this._adjustForValuesMatchingBooleanDefaultsMissing(this.detailUtility.typeStore.data[a],e)}this.typeAttributeObj=new FieldAttributeController({viewOnly:b,formData:lang.mixin(this.detailUtility.typeStore.data[a],this.dataTypeData),entity:this.entityName,editMode:this._inEditMode,picklistSchema:this.detailUtility.picklistSchemaData});var f=this._findControllerDom("dataTypeData");null!==f&&(this._setParentDisplayClass(this.typeAttributeObj,f.parentNode),domConstruct.place(this.typeAttributeObj.domNode,f,"only")),void 0!==this._DynamicSection&&this.hideControlsBasedOffSelectedFieldType()},hideControlsBasedOffSelectedFieldType:function(){for(var a=this.activeControllers.data,b="_${0}Section",c=0;c<a.length;c++){var d=a[c];d&&d.name&&this.findDomAndShowDom(dojoString.substitute(b,[d.name]))}var e=[],f=!1,g=this.typeDropDown.value;switch(void 0===g&&null===g&&(g=this._EditData.dataTypeId),g){case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":e.push("audited","canBulkUpdate","canImport","canMatch"),f=!0}!this._EditData||this._EditData.isDynamic||f||e.push("audited","isIncluded");for(var h=0;h<e.length;h++){var i=e[h];this.findDomAndHideDom(dojoString.substitute(b,[i]))}},findDomAndHideDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display-none"),domClass.remove(b,"display"))},findDomAndShowDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display"),domClass.remove(b,"display-none"))},_findControllerDom:function(a,b){var c="div.fld[data-dojo-attach-point='${0}']";b&&(c="tr[data-dojo-attach-point='${0}']");var d=dojoString.substitute(c,[a]);if(this._DynamicSection){var e=query(d,this._DynamicSection);if(void 0!==e&&null!==e&&void 0!==e.length&&null!==e.length&&e.length>0)return e[0]}return null},_adjustForValuesMatchingBooleanDefaultsMissing:function(a,b){void 0!==a&&void 0!==a[b]&&null!==this.dataTypeData&&void 0===this.dataTypeData[b]&&(this.dataTypeData[b]=!1)},startup:function(){this.inherited(arguments)},show:function(){this._EditData,this._dialog.titleNode.innerHTML=this._title,this._dialog.show(),this.inherited(arguments)},_cmdSave_OnClick:function(){this.isNewEntity?this._addItemToStore():this._saveExistingEntity()},_addItemToStore:function(){this._dialog.showLoading();var a=this._generalPropertyValueAdjustments(!1,!0),b=a.property;if(this.newProperty=b,!this.isValid())return void this._dialog.hideLoading();this._EditData&&this.dataStore.remove(this._EditData.propertyName),this.dataStore.put(b),this._dialog.hideLoading(),this._dialog.hide()},_generalPropertyValueAdjustments:function(a,b){var c=this.typeAttributeObj.getActiveValues();if(!a||!1!==this.addEditFiltersForm.validate()){var d=this._populdateSDataObject();return d.displayName||(d.displayName=d.propertyName),"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c"!==this.typeDropDown.value&&"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd"!==this.typeDropDown.value||(c.DisplayName=d.displayName,c.isReadOnly=!0),d.dataTypeData=json.stringify(c),b&&(d=this._createPropertyValueAdjustments(d,c)),{property:d,activity:c}}},_createPropertyValueAdjustments:function(a,b){switch(a.columnName=a.propertyName.toUpperCase(),a.isIncluded=!0,void 0===a.sdata||null===a.sdata?a.sdata={generate:!0}:a.sdata.generate=!0,this.typeDropDown.value){case"2596d57d-89d6-4b72-9036-b18c64c5324c":a.precision=b.Precision,a.scale=b.Scale;break;case"44bc190a-99f3-4fa9-98a3-d5b2336d6e7c":case"f750817f-73ad-4bf3-b2de-bd0f5cc47dfd":a.isReadOnly=!0}return void 0!==b.Length&&null!==b.Length&&(a.length=b.Length),a},_saveExistingEntity:function(){var a=new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceKind(dojoString.substitute('entities("${0}")/properties',[this.entityName]));if(a.setQueryArg("language",cookie.getCookie("SLXLanguageSetting")),this._dialog.showLoading(),!this.isValid())return void this._dialog.hideLoading();var b=!this._inEditMode,c=this._generalPropertyValueAdjustments(!0,b),d=c.property,e=c.activity;b?a.create(d,{success:function(a){this._onSaveSuccess(a)},failure:function(a){this._dialog.hide()},scope:this}):(lang.mixin(this._EditData,d),"2596d57d-89d6-4b72-9036-b18c64c5324c"===this.typeDropDown.value&&(this._EditData.precision=e.Precision,this._EditData.scale=e.Scale),void 0!==e.Length&&null!==e.Length&&(this._EditData.length=e.Length),a.setResourceSelector(dojoString.substitute("'${0}'",[this._EditData.$key])),a.update(this._EditData,{isSecurityManager:!0,scope:this,ignoreETag:!1,success:function(a){this._onSaveSuccess(a)},failure:function(a){this._dialog.hide()}}))},onSaveSuccess:function(a){},_onSaveSuccess:function(a){SDataServiceRegistry._removeFromLocalStorage(this.entityName),this._dialog.hideLoading(),this._dialog.hide(),this.onSaveSuccess(a)},_cmdCancel_OnClick:function(a){this._dialog?(this._dialog.hideLoading(),this._dialog.hide()):a._dialog&&(a._dialog.hideLoading(),a._dialog.hide()),dojoConnect.publish("Sage/EntityManager/FieldCanceled")},isValid:function(){this.divValidationMessage.innerHTML="";for(var a=this.addEditFiltersForm.validate(),b=0;b<this.activeControllers.data.length;b++){var c=this.activeControllers.data[b];if(void 0!==c.control.disabled&&!0!==c.control.disabled){var d=!0,e=!1;switch(c.name){case"propertyName":d=c.control.isValid(!this._inEditMode),"object"==typeof d&&(d=d.value),e=!0;break;case"dataTypeId":var f=this.detailUtility.typeStore.query({supported:!0});f=new memory({data:f}),d=!(null===c.control.item||!c.control.item.id)&&f.query({id:c.control.item.id}).length>0,e=!0}e||"function"!=typeof c.control.isValid||c.control.isValid(!0),"function"==typeof c.control.onChanged&&c.control.onChanged(),void 0!==c.control.state&&void 0!==c.control.required&&(d=d&&"Error"!==c.control.state&&!("Incomplete"===c.control.state&&c.control.required)),d||c.control.set("state","Error"),a=a&&d}}return a=a&&this.typeAttributeObj.isValid()},_populdateSDataObject:function(){for(var a={},b=this.detailUtility.propertyInformation.data,c=0;c<b.length;c++){var d=b[c],e={};if(null!==d.sub){for(var f=0;f<d.sub.data.length;f++){var g=d.sub.data[f],h=this.activeControllers.index[g.name];if(h>0){var i=this.activeControllers.data[h],j=this._getValue(i);null!==j&&(e[g.name]=j)}}a[d.name]=e}else{var k=this.activeControllers.index[d.name];if(k>=0){var l=this.activeControllers.data[k],m=this._getValue(l);"object"==typeof m?lang.mixin(a,m):null!==m&&(a[d.name]=m)}}}return a},_getValue:function(a){var b=a.control.declaredClass;return b.indexOf("TextBox")>=0?a.control.value:b.indexOf("DisplayName")>=0?a.control.getDetails():b.indexOf("CheckBox")>=0?a.control.checked:b.indexOf("FilteringSelect")>=0?a.control.value:null}});return widget})},"Sage/UI/Controls/FieldAttributeControlFactory":function(){define(["Sage/UI/Forms/FormFromSData","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/string","dojo/query","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","Sage/UI/Controls/SimpleTextarea","Sage/UI/Dialogs","Sage/UI/FilteringSelect","Sage/UI/ComboBox","dojo/store/Memory","Sage/UI/Controls/PropertyDropDown","dojo/aspect","dojo/string","dojo/data/ObjectStore","dojo/store/Observable","dojo/i18n!./nls/FieldAttributeControlFactory","dojo/dom-construct","Sage/UI/Controls/DndSortList","dijit/form/Button","dijit/form/ValidationTextBox","Sage/UI/Forms/PickListManagerForm"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return c("Sage.UI.Controls.FieldAttributeControlFactory",[a],{store:null,defaultEntity:null,pickList:null,viewOnly:!1,activeControls:null,hiddenValues:null,calculatedMapDotToLegacyPath:null,picklistManagerForm:y,pickListManagerFormDiv:null,picklistSchema:null,domConstruct:u,domClass:e,query:g,pickListLoading:!1,formStatus:0,_createCustomTextBox:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customTextBox",Sage.UI.Controls.TextBox,{shouldPublishMarkDirty:!1})},_createCustomCheckBox:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customCheckBox",Sage.UI.Controls.CheckBox,{shouldPublishMarkDirty:!1})},_createCustomFilteringSelect:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customFilteringSelect",Sage.UI.FilteringSelect,{shouldPublishMarkDirty:!1,required:!1})},_createCustomCombBox:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customComboBox",Sage.UI.ComboBox,{shouldPublishMarkDirty:!1,required:!1})},_createCustomTextArea:function(){return c("Sage.UI.Controls.FieldAttributeControlFactory.customCustomTextArea",[Sage.UI.Controls.SimpleTextarea,x],{shouldPublishMarkDirty:!1,required:!0,baseClass:"dijitReset dijitInline dijitLeft dijitTextArea dijitValidationContainer",templateString:"<div><div class='dijitReset dijitValidationContainer'><input class='dijitReset dijitInputField dijitValidationIcon dijitValidationInner' value='\u03a7' type='text' tabindex='-1' readonly='readonly' role='presentation'/></div><div class='dijitReset dijitInputField dijitInputContainer'><textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='on'></textarea></div></div>",width:"100%"})},_FormSpecificFields:function(a){this.pickList=[],this.activeControls=[],this.hiddenValues=[],this.pickListManagerFormDiv={},this.calculatedMapDotToLegacyPath=new s(new n({idProperty:"dot"})),void 0!==a&&null!==a&&(void 0!==a.formData&&null!==a.formData&&(this.store=a.formData),void 0!==a.viewOnly&&null!==a.viewOnly&&(this.viewOnly=a.viewOnly),void 0!==a.entity&&null!==a.entity&&(this.defaultEntity=a.entity),void 0!==a.picklistSchema&&null!==a.picklistSchema&&(this.picklistSchema=a.picklistSchema))},_createForm:function(){var a=!1;if(void 0!==this.store.ClrDataType&&this.store.show&&this.store.show.indexOf("ClrDataType")>=0&&this.createAttributeEditor("ClrDataType",this._createCustomTextBox(),this.store.ClrDataType,this.viewOnly),void 0!==this.store.IsEncrypted&&this.store.show&&this.store.show.indexOf("IsEncrypted")>=0&&this.createAttributeEditor("IsEncrypted",this._createCustomCheckBox(),this.store.IsEncrypted,this.viewOnly),void 0!==this.store.Length&&this.store.show&&this.store.show.indexOf("Length")>=0&&this.createAttributeEditor("Length",this._createCustomTextBox(),this.store.Length,this.viewOnly),void 0!==this.store.SqlType&&this.store.show&&this.store.show.indexOf("SqlType")>=0&&this.createAttributeEditor("SqlType",this._createCustomTextBox(),this.store.SqlType,this.viewOnly),void 0!==this.store.This&&this.store.show&&this.store.show.indexOf("This")>=0&&this.createAttributeEditor("this",this._createCustomTextBox(),this.store.This,this.viewOnly),void 0!==this.store.Precision&&this.store.show&&this.store.show.indexOf("Precision")>=0&&this.createAttributeEditor("Precision",this._createCustomTextBox(),this.store.Precision,this.viewOnly),void 0!==this.store.Scale&&this.store.show&&this.store.show.indexOf("Scale")>=0&&this.createAttributeEditor("Scale",this._createCustomTextBox(),this.store.Scale,this.viewOnly),void 0!==this.store.IsPercentage&&this.store.show&&this.store.show.indexOf("IsPercentage")>=0&&this.createAttributeEditor("IsPercentage",this._createCustomCheckBox(),this.store.IsPercentage,this.viewOnly),void 0!==this.store.MultiSelect&&this.store.show&&this.store.show.indexOf("MultiSelect")>=0&&this.createAttributeEditor("MultiSelect",this._createCustomCheckBox(),this.store.MultiSelect,this.viewOnly),void 0!==this.store.OverriddenName&&this.store.show&&this.store.show.indexOf("OverriddenName")>=0&&this.createAttributeEditor("OverriddenName",this._createCustomTextBox(),this.store.OverriddenName,this.viewOnly),void 0!==this.store.StorageOptions&&this.store.show&&this.store.show.indexOf("Storage")>=0&&(a=void 0!==this.store.ClrDataType&&this.store.ClrDataType.indexOf("Guid")>=0,a?this.hiddenValues.push({Storage:this.store.Storage}):this.createAttributeStorage("Storage",this._createCustomFilteringSelect(),this.store.Storage,this.store.StorageOptions,this.viewOnly||this.editMode,!1)),void 0!==this.store.StorageOptions&&this.store.show&&this.store.show.indexOf("Display")>=0){var c=this.store.show.indexOf("Storage")>=0;this.createAttributeStorage("Display",this._createCustomFilteringSelect(),this.store.Display,this.store.DisplayOptions,c,c)}void 0!==this.store.EnableHyperLinking&&this.store.show&&this.store.show.indexOf("EnableHyperLinking")>=0&&this.createAttributeEditor("EnableHyperLinking",this._createCustomCheckBox(),this.store.EnableHyperLinking,this.viewOnly),void 0!==this.store.ReturnPrimaryKey&&this.store.show&&this.store.show.indexOf("ReturnPrimaryKey")>=0&&this.createAttributeEditor("ReturnPrimaryKey",this._createCustomCheckBox(),this.store.ReturnPrimaryKey,this.viewOnly),void 0!==this.store.PickListName&&this.store.show&&this.store.show.indexOf("PickListName")>=0&&(this._grabPickList(),this.createAttributeStorage("PickListName",this._createCustomCombBox(),this.store.PickListName,this.pickList,this.viewOnly,!1),b.subscribe("Sage/picklist/form/reload",d.hitch(this,this.reloadPickListForm))),void 0!==this.store.AllowMultiples&&this.store.show&&this.store.show.indexOf("AllowMultiples")>=0&&this.createAttributeEditor("AllowMultiples",this._createCustomCheckBox(),this.store.AllowMultiples,this.viewOnly),void 0!==this.store.AlphaSort&&this.store.show&&this.store.show.indexOf("AlphaSort")>=0&&this.createAttributeEditor("AlphaSort",this._createCustomCheckBox(),this.store.AlphaSort,this.viewOnly),void 0!==this.store.MustExistInList&&this.store.show&&this.store.show.indexOf("MustExistInList")>=0&&this.createAttributeEditor("MustExistInList",this._createCustomCheckBox(),this.store.MustExistInList,this.viewOnly),void 0!==this.store.NoneEditable&&this.store.show&&this.store.show.indexOf("NoneEditable")>=0&&this.createAttributeEditor("NoneEditable",this._createCustomCheckBox(),this.store.NoneEditable,this.viewOnly),void 0!==this.store.PickListFilter&&this.store.show&&this.store.show.indexOf("PickListFilter")>=0&&this.createAttributeEditor("PickListFilter",this._createCustomTextBox(),this.store.PickListFilter,this.viewOnly),void 0!==this.store.ValueStoredAsText&&this.store.show&&this.store.show.indexOf("ValueStoredAsText")>=0&&this.createAttributeEditor("ValueStoredAsText",this._createCustomCheckBox(),this.store.ValueStoredAsText,this.viewOnly||this.editMode),void 0!==this.store.DisplayName&&this.store.show&&this.store.show.indexOf("DisplayName")>=0&&(a=void 0!==this.store.ThisObj&&this.store.ThisObj.indexOf("Calculated String field")>=0,a?this.hiddenValues.push({DisplayName:this.store.DisplayName}):this.createAttributeEditor("Display",this._createCustomTextBox(),this.store.DisplayName,this.viewOnly)),void 0!==this.store.Description&&this.store.show&&this.store.show.indexOf("Description")>=0&&this.createAttributeEditor("Description",this._createCustomTextBox(),this.store.Description,this.viewOnly&&this.store.show.indexOf("Template")<0),void 0!==this.store.Template&&this.store.show&&this.store.show.indexOf("Template")>=0&&this._createDropDownSelectorWithDisplayTextField("Template",this.store.Template,this.viewOnly,!0)},_createDropDownSelectorWithDisplayTextField:function(a,b,c,d){var e=this,g=this._createCustomTextArea(),h=[{name:"calculated",value:!1}];0!==this.store.type&&h.push({name:"number",value:!0}),b&&""!==b&&this._buildDotPathFromLegacy(b),b=this._convertLegacyToDot(b);var i={PropertyDropDown:new o({entityName:this.defaultEntity,Keywords:h,allMatch:!0,required:!1}),TextBox:new g({value:b,shouldPublishMarkDirty:!1,autoComplete:!0,isValid:function(){var a=""!==this.textbox.value.replace(/\s+$/g);if(a||(this.textbox.validity.badInput=!0,this.textbox.validity.tooShort=!0,this.textbox.validity.valueMissing=!0,this.textbox.validity.valid=!1),0!==e.store.type){for(var b,c=new RegExp("({.*?}|[0-9]|[+]|[*]|[/]|[(]|[)]|[-])","gm"),d=this.textbox.value,f="";null!==(b=c.exec(d));)b.index===c.lastIndex&&c.lastIndex++,f+=b[0];a=a&&f.length===this.textbox.value.length,a?(this.textbox.validity.badInput=!1,this.textbox.validity.valid=!0):(this.textbox.validity.badInput=!0,this.textbox.validity.valid=!1)}return a}})};if(0!==this.store.type){i.TextBox.invalidMessage=t.CalculatedNumberInputError;for(var j=[{l:"+",t:t.add},{l:"-",t:t.substract},{l:"*",t:t.multiply},{l:"/",t:t.divide},{l:"(",t:t.openParens},{l:")",t:t.closeParens}],k=this.domConstruct.toDom(this.buttonListTemplate.apply()),l=0;l<j.length;l++){var m=new w({label:j[l].l,title:j[l].t,onClick:function(){i.TextBox.textbox.value=f.substitute("${0}${1}",[i.TextBox.textbox.value,this.label])}});this.domClass.add(m.domNode,"calcuNumberButton"),k.appendChild(m.domNode)}i.ButtonList=k}return this.domClass.remove(i.PropertyDropDown.domNode,"dijitInline"),this.domClass.remove(i.TextBox.domNode,"dijitInline"),i.PropertyDropDown.entitySelected.onChange=function(){var a=i.PropertyDropDown.tree.selectedItem;if(a){var b=a.columName;void 0!==b&&""!==b&&(e.calculatedMapDotToLegacyPath.put({dot:b,legacy:a.legacyPath}),i.TextBox.set("value",f.substitute("${0}{${1}}",[i.TextBox.get("value"),b])))}},this.activeControls.push({label:t[a],name:a,control:null,isDom:!1,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"}),this.activeControls.push({label:t.AddField,name:a,control:i.PropertyDropDown,isDom:!1,template:"rowTemplate",display:"display",Include:!1,fieldClassAppendix:"typeattributedetails"}),i.ButtonList&&this.activeControls.push({label:"",name:a,control:i.ButtonList,isDom:!0,template:"rowTemplate",display:"display",Include:!1,fieldClassAppendix:"typeattributedetails"}),this.activeControls.push({label:"",name:a,control:i.TextBox,isDom:!1,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"}),i},_grabEntityPropertyNamesFromString:function(a){for(var b=new RegExp(/([{].+?[}])/gm),c=a.match(b),d=new n,e=0;null!==c&&e<c.length;e++){var f=c[e];f=f.replace("{",""),f=f.replace("}",""),f=f.replace(" ",""),(void 0===d.index[f]||d.index[f]<0)&&""!==f&&d.add({id:f,name:f})}return d},_buildDotPathFromLegacy:function(a){for(var b=this._grabEntityPropertyNamesFromString(a),c=0;c<b.data.length;c++){var d=b.data[c].name,e="",f=new RegExp(/([.].*?!)/gm),g=d.match(f);if(null!==g&&g)for(var h=0;h<g.length;h++){var i=g[h].replace(".","").replace("!","");e=q.substitute("${0}${1}${2}",[e,0===h?"":".",i])}var j=d.lastIndexOf("!");j<0&&(j=-1),e=q.substitute("${0}${1}${2}",[e,0===e.length?"":".",d.substring(j+1)]),this.calculatedMapDotToLegacyPath.put({dot:e,legacy:d})}},_convertDotToLegacy:function(a){return this._propertyPathConverter(a,"dot","legacy")},_convertLegacyToDot:function(a){return this._propertyPathConverter(a,"legacy","dot")},_propertyPathConverter:function(a,b,c){for(var d=a,e=new RegExp(/(.*?|[+|\\|\/|*|-]?)([{].*?[}])(.*?|[+|\\|\/|*|-]?)/gm),f=a.match(e),g=[],h=0;null!==f&&h<f.length;h++){var i=f[h],j={from:i,to:{}},k=i.indexOf("{")+1,l=i.indexOf("}")-k;if(k>=0&&l>0&&l-k<=i.length){var m=i.substr(k,l),o=this.calculatedMapDotToLegacyPath.query(function(a){return a[b]===m}),p=new n({data:o});if(1===p.data.length){var r=q.substitute("${0}:",[this.defaultEntity]),s=p.data[0][c].replace(r,"");i=i.replace(p.data[0][b],s)}j.to=i,g.push(j)}}for(h=0;h<g.length;h++)d=d.replace(g[h].from,g[h].to);return d},createAttributeEditor:function(a,b,c,d){var e=new b({value:c,shouldPublishMarkDirty:!1,disabled:d});b.prototype.declaredClass.indexOf("CheckBox")>=0&&e.setChecked(c),this.domClass.remove(e.domNode,"dijitInline"),this.activeControls.push({label:t[a],name:a,control:e,isDom:!1,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"})},createAttributeStorage:function(a,b,c,e,f,g){var h=null,i=this;"PickListName"===a?(h=new n({data:e,idProperty:"name"}),a="PickList"):h=new n({data:e});var j=new b({shouldPublishMarkDirty:!1,disabled:f,name:a,searchAttr:"name",store:h,fetchProperties:{sort:[{attribute:"name",descending:!1}]}}),k=c;if("PickList"===a&&(p.before(j,"loadAndOpenDropDown",d.partial(this._startPKListLoad,j,this)),j.onChange=function(){i._pickListOnChange(i,this.value,this.item)}),"Storage"===a||"Display"===a){switch(c){case"Text":case"TextUnicode":k=e.filter(function(a){return"Text"===a.id||"TextUnicode"===a.id});break;case"Code":case"CodeUnicode":k=e.filter(function(a){return"Code"===a.id||"CodeUnicode"===a.id})}k&&k.length>0&&(k=k[0].id)}"Storage"===a&&this.store.show.indexOf("Display")>=0&&(j.onChange=function(){var a=$(this.domNode.offsetParent.offsetParent).find("[name='Display']");if(!this.viewOnly&&!this.editMode&&null!==a&&null!==a[0]){var b=a[0];b&&(b.value=this.value),b=b.previousSibling,b&&(b.value=this.value)}}),j.set("value",k),this.domClass.remove(j.domNode,"dijitInline"),this.activeControls.push({label:t[a],name:a,control:j,isDom:!1,template:"rowTemplate",display:g?"display-none":"display",Include:!0,fieldClassAppendix:"typeattributedetails"})},_pickListOnChange:function(a,b,c){var g=f.substitute("--- ${0} ---",[t.newPickList]),h={defaultLanguage:"",name:b||g,allowMultiples:!1,valueMustExist:!1,required:!1,alphaSorted:!1,noneEditable:!1,items:[]},i=["AllowMultiples","AlphaSort","MustExistInList","NoneEditable"],j=Sage.Data.SDataServiceRegistry.getSDataService("system",!1,!0,!1);if(void 0===c||null===c){var k=new Sage.SData.Client.SDataResourceCollectionRequest(j);k.setResourceKind("picklists").setQueryArg("select","*").setQueryArg("format","json").setQueryArg("where",f.substitute("lower(name) eq '${0}'",[b.toLowerCase()])),k.setQueryArg("count",1),this.pickList=[],this.pickListLoading=!0,k.read({async:!1,scope:this,success:function(a){a.$resources&&a.$resources.length>0&&(c=a.$resources[0],c.id=c.$key,c.defaultLanguage&&(h.defaultLanguage=c.defaultLanguage))},failure:this._pkListLoadFailure})}var l=null!==c&&"000new"!==c.id,m=a._getIndexFromActivityListFromName("PickListForm"),n=m>-1,o=this._getIndexFromActivityListFromName("PickList"),p=null;if(o>-1&&(p=this.activeControls[o]),l){h.$key=c.id;var q=new Sage.SData.Client.SDataResourceCollectionRequest(j);q.setResourceKind(f.substitute("picklists('${0}')",[h.$key])).setQueryArg("select","*,items/*").setQueryArg("format","json"),q.setQueryArg("count",1),this.pickList=[],this.pickListLoading=!0,q.read({async:!1,scope:this,success:function(a){a.$resources&&a.$resources.length>0&&(a=a.$resources[0]),a.defaultLanguage&&(h.defaultLanguage=a.defaultLanguage),a.items&&a.items.$resources?h.items=a.items.$resources:h.items=[],!1===this.editMode&&(this.setControlValue("AllowMultiples",a.allowMultiples),this.setControlValue("AlphaSort",a.alphaSorted),this.setControlValue("MustExistInList",a.valueMustExist),this.setControlValue("NoneEditable",a.noneEditable))},failure:this._pkListLoadFailure}),null!==p&&(p=p.control,p.focusNode.value=b)
}else b&&b!==g?(h.name=d.clone(b),null!==p&&(p=p.control,p.focusNode.value=g)):h.name="";if(a._showHideElementsByNames(a,i,!l,"grandparent"),n){var r=this.activeControls[m].control.domNode;e.add(r,"display-hidden"),a.domConstruct.destroy(r),a.activeControls.splice(m,1)}a._createPickListManagerForm(a,h,l,n)},_createPickListManagerForm:function(a,b,c,d){var e=["createuser","createdate","modifydate","modifyuser"];c?(e.push("valuestoredastext"),e.push("allowmultiples"),e.push("valuemustexist"),e.push("alphasorted"),e.push("required"),e.push("noneeditable"),e.push("name")):e.push("defaultlanguage");var f={schemaReader:a.picklistSchema,suppressFields:e,excludeOnNew:[],formData:b,displayFormButtons:["ok"],editMode:c},g=new a.picklistManagerForm(f),h="after",i=a.attributeContainer;if(d){h="replace";var j=a.attributeContainer.parentNode.children[1];void 0!==j?i=j:h="after"}a.domConstruct.place(g.domNode.firstChild,i,h),a.activeControls.push({label:"",name:"PickListForm",control:g,isDom:!0,template:"rowTemplate",display:"display",Include:!0,fieldClassAppendix:"typeattributedetails"})},reloadPickListForm:function(a){this._grabPickList(!1);var b=this._getIndexFromActivityListFromName("PickList"),c=this.activeControls[b].control;c.displayedValue===a.name&&c.set("value","--- "+t.newPickList+" ---"),this.formStatus=1,p.after(c,"onChange",d.hitch(this,function(){1===this.formStatus&&(this.formStatus=0,a.id=a.$key,a&&this._pickListOnChange(this,a.name,a))})),c.set("value",a.name)},_grabPickList:function(a,b){var c=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("system",!1,!0,!1));void 0!==b&&null!==b||(b=500),c.setResourceKind("picklists").setQueryArg("select","*").setQueryArg("orderby","name").setQueryArg("format","json"),c.setQueryArg("count",b),this.pickList=[],void 0!==a&&null!==a||(a=!0),this.pickListLoading=!0;c.read({async:a,scope:this,success:this._pkListLoadSuccess,failure:this._pkListLoadFailure})},_startPKListLoad:function(a,b){var c=a.domNode,d=new dojox.widget.Standby({target:c,color:"white",image:"css/themes/inforSoHoXi/images/loadingAnimation.gif"});c.appendChild(d.domNode),b.pickListLoading&&(d.startup(),d.show());var e=function(){d.hide()};p.before(a,"closeDropDown",e)},_pkListLoadSuccess:function(a){this.pickListLoading=!1;for(var b=a.$resources,c=0;c<=b.length-1;c++)this.pickList.push({id:b[c].$key,name:b[c].$descriptor,use:b[c].name,items:b[c].items});Sage.Services.getService("RoleSecurityService").hasAccess("Administrator/Picklist/add")&&this.pickList.push({id:"000new",name:"--- "+t.newPickList+" ---",use:"--- "+t.newPickList+" ---",items:null});var d=this._getIndexFromActivityListFromName("PickList"),e=null;d>-1&&(e=this.activeControls[d]),null!==e&&e.control&&e.control.set("store",new n({data:this.pickList,idProperty:"name"}))},_pkListLoadFailure:function(a){this.pickListLoading=!1},customValidation:function(a){if("function"==typeof a.control.isValid){if(a.Include&&"Template"===a.name||"PickListForm"===a.name){var b=a.control.isValid(!0);return"PickListForm"===a.name&&b?(this._grabPickList(),b):null}return a.control.isValid(!0)}return null},_getActiveValuesAdjustments:function(){var a={},b=this.activeControls.filter(function(a){return"picklistform"===a.name.toLowerCase()});if("object"==typeof b&&b.length&&b.length>0){b=b[0].control;for(var c=b.getActiveValues(),d=[{name:"alphasort",key:"alphaSorted"},{name:"mustexistinlist",key:"valueMustExist"}],e=[b.activeControls,d],f=0;f<e.length;f++)for(var g=e[f],h=0;h<g.length;h++){var i=g[h],j=this.activeControls.filter(function(a){return a.name.toLowerCase()===i.name.toLowerCase()});if("object"==typeof j&&j.length&&j.length>0){var k=c[i.name];void 0===k&&i.key&&void 0!==c[i.key]&&(k=c[i.key]),void 0!==k&&(a[j[0].name]=k)}}var l=c.name;void 0!==l&&(a.PickListName=l)}return a},_changeObjectPathParameters:function(a,b,c,d,e){return{propName:"PickList"===c?"PickListName":c,path:"PickList"===a?"PickListName":a,builtUpPath:f.substitute('"${0}":${1}',["PickList"===c?"PickListName":c,JSON.stringify(b)]),skip:d,stringify:e,lineEscape:""}}})})},"Sage/UI/Forms/FormFromSData":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/string","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","Sage/UI/Controls/SimpleTextarea","Sage/UI/FilteringSelect","Sage/UI/Controls/DndSortList","Sage/UI/Controls/PropertyDropDown","Sage/UI/Controls/DateTimePicker","Sage/UI/GridView","dojo/aspect","dojo/store/Memory","dojo/data/ObjectStore","dojo/store/Observable","dojo/dom-construct","dojo/_base/connect","dijit/form/Button","dijit/form/ValidationTextBox","dojo/i18n!./../nls/GridView","dojo/i18n!./nls/FormFromSData","dojo/query"],function(_Widget,_Templated,dojoConnect,declare,lang,domClass,dString,TextBox,CheckBox,SimpleTextarea,FilteringSelect,DndSortList,PropertyDropDown,DateTimePicker,GridView,dojoAspect,memory,ObjectStore,Observable,domConstruct,connect,dijitButton,ValidationTextBox,gridNLS,formNLS,query){var widget=declare("Sage.UI.Forms.FormFromSData",[_Widget,_Templated],{widgetsInTemplate:!0,widgetTemplate:new Simplate(eval(["<div>","<table style='overflow-y:show;' class='detailTableContainer formtable' dojoattachpoint='attributeContainer' />","</div>"])),rowTemplate:['<tr data-dojo-attach-point="_{%= $.name %}Section" name="_{%= $.name %}Section">','<td class="FManagerDialogFieldLabel {%= $.display %}">','<div style="padding:0 !important;" class="lbl alignright">','<label style="line-height:32px !important;">',"{%= $.label %}","</label>","</div>",'<div class="fld  dijitInline {%= $.fieldClassAppendix %}" data-dojo-attach-point="{%= $.name %}"></div>',"</td>","</tr>"],validationAndButtonRowTemplate:["<div>",'<div data-dojo-attach-point="divValidationMessage" class="errorText">','<span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>',"</div>",'<div class="lookupButtonWrapper" data-dojo-attach-point="btnController">',"</div>","</div>"],formIssueTemplate:['<div style="padding:0 !important;" class="lbl alignright">','<label style="line-height:32px !important;">',"{%= $.label %}","</label>","</div>"],buttonListTemplate:new Simplate(["<div class='ButtonActionList'></div>"]),activeControls:null,editMode:!1,dumbDTControlCounterForId:0,excludeOnNew:[],listOfSupressFields:[],useDisplayNameControl:!0,formData:{},_oformData:{},gridNlsResource:gridNLS,formNlsResource:formNLS,formButtonControl:[],displayFormButtons:["ok","cancel"],_dialogue:null,_embedded:!1,schema:[],permittedActions:[],allowViaAddRule:"",allowViaEditRule:"",allowViaViewRule:"",allowViaDeleteRule:"",formBase:"main",duplicateCheck:[],saveIfValid:{update:!1,insert:!1},constructor:function(a){this.formButtonControl=[{label:formNLS.okText,dojoattachpoint:"ok",onClick:"save"},{label:formNLS.cancelText,dojoattachpoint:"cancel",onClick:"cancel"}],this.dumbDTControlCounterForId=0;var b={};this.schema=[],this.permittedActions=[],this.activeControls=[],a.schemaReader&&(b=a.schemaReader),a.suppressFields&&(this.listOfSupressFields=a.suppressFields),a.excludeOnNew&&(this.excludeOnNew=a.excludeOnNew),null!==a.formData&&"object"==typeof a.formData&&(this.formData=a.formData,this._oformData=lang.clone(a.formData),this.editMode=!0),"boolean"==typeof a.editMode&&(this.editMode=a.editMode),"boolean"==typeof a.embedded&&(this._embedded=a.embedded),this._FormSpecificFields(a),this.securityRules(),this._createForm(b)},postCreate:function(){var a=this.activeControls;this._embedded?(domClass.remove(this.attributeContainer,"mainContentContent"),domClass.remove(this.attributeContainer,"DialogMainForm")):(domClass.add(this.attributeContainer,"mainContentContent"),domClass.add(this.attributeContainer,"DialogMainForm"));for(var b=0;b<a.length;b++)this._moveActiveControlFromBackGroundToPage(a[b]);var c=new Simplate(this.validationAndButtonRowTemplate),d=c.apply(),e=domConstruct.toDom(d);if(this.permittedActions.indexOf("add")>=0)for(b=0;b<this.formButtonControl.length;b++){var f=this.formButtonControl[b];if(this.displayFormButtons.indexOf(f.dojoattachpoint)>-1){var g=new dijitButton;g.containerNode.innerHTML=f.label,connect.connect(g.domNode,"onclick",this,this[f.onClick]),e.lastElementChild.appendChild(g.domNode)}}this.attributeContainer.appendChild(e)},_CustomDisplay:function(){return null},customValidation:function(a){return null},_createGridControl:function(a,b,c,d){return null},assignControlBasedOffOfName:function(a,b,c,d){return null},_FormSpecificFields:function(){},_changeObjectPathParameters:function(a,b,c,d,e){return null},_save:function(a){},_getActiveValuesAdjustments:function(){return{}},securityRules:function(){var a=Sage.Services.getService("RoleSecurityService");""!==this.allowViaAddRule&&a.hasAccess(this.allowViaAddRule)&&this.permittedActions.push("add"),""!==this.allowViaDeleteRule&&a.hasAccess(this.allowViaDeleteRule)&&this.permittedActions.push("delete"),""!==this.allowViaEditRule&&a.hasAccess(this.allowViaEditRule)&&this.permittedActions.push("edit"),""!==this.allowViaViewRule&&a.hasAccess(this.allowViaViewRule)&&this.permittedActions.push("view")},save:function(a){dojoConnect.publish("/form/addEditProperty/showLoad"),this._save(a),dojoConnect.publish("/form/addEditProperty/hideLoad")},_createForm:function(a){a&&this._createFormFromSDataReader(a)},_createFormFromSDataReader:function(a){if(this.permittedActions.indexOf("view")<0)return void this.activeControls.push({name:"error",label:this.formNlsResource.permissionsToView,control:null,template:"formIssueTemplate"});var b=0,c=a.data?a.data:a,d={},e=this;for(b=0;b<c.length;b++)d=c[b],this.schema.push(d);for(b=0;b<this.schema.length;b++){d=this.schema[b];var f=d.type,g=d.name,h=dString.substitute('"${0}":""',[g]),i=g.toLowerCase(),j=this._getProvidedData(g),k=!this.editMode&&this.excludeOnNew.indexOf(i)>=0,l=this.listOfSupressFields.indexOf(i)>=0||k;if(null,!l){void 0===d.sdataPath&&(d.sdataPath=h,d.sdataPathInDot=g);var m=f.lastIndexOf("--");if(m<0)this._addToListofControls(g,f,d.label,j,null,{path:d.sdataPath,dot:d.sdataPathInDot});else{var n=f.substring(m+2).toLowerCase(),o={};switch(n){case"choice":case"enum":o=d.collection;for(var p=0;p<o.length;p++){var q=this._onBlankValue(o[p].name,o[p].nameValue);q=this._onBlankValue(q,"item "+p),o[p].label=this._onBlankValue(o[p].label,q)}null!==o&&(o=o.filter(function(a){var b=a.name;if(void 0!==b){b=b.toLowerCase();var c=!e.editMode&&e.excludeOnNew.indexOf(b)>=0;return!(e.listOfSupressFields.indexOf(b)>=0||c)}return!0}),this._addToListofControls(g,"xs:enum",d.label,j,{text:"label",id:"value",data:o},{path:d.sdataPath,dot:d.sdataPathInDot}));break;case"list":case"type":if(null!==d.sub&&(o=d.sub.data?d.sub.data:d.sub),d.isCollection&&"child"===d.relationship)null!==o&&o.length>0&&o[0].sub&&(o=o[0].sub.filter(function(a){var b=a.name.toLowerCase(),c=!e.editMode&&e.excludeOnNew.indexOf(b)>=0;return!(e.listOfSupressFields.indexOf(b)>=0||c)}),o=new memory({idProperty:"value",data:o}),void 0===s.sdataPath&&(d.sdataPath=h),this._addToListofControls(g,"xs:grid","",j,{text:"label",id:"value",data:o},{path:d.sdataPath,dot:d.sdataPathInDot}));else for(var r=0;r<o.length;r++){var s=o[r],t=dString.substitute('"${0}":""',[s.name]);d.sdataPath?t="{"+t+"}":s.sdataPath=h,s.sdataPath=d.sdataPath.replace('""',t),s.sdataPathInDot=d.sdataPathInDot+"."+s.name,this.schema.push(s)}}}}}},_getProvidedData:function(a){var b=null;return void 0!==this.formData[a]&&null!==this.formData[a]&&(b=this.formData[a]),b},_addToListofControls:function(a,b,c,d,e,f){var g=this._assignControlBasedOffType(a,b.substring(3),d,e),h=this._setDisplayString(g,a),i=void 0===this.formNlsResource[a]||null===this.formNlsResource[a]?c:this.formNlsResource[a];i=void 0!==i&&null!==i?i:a;var j=this.saveIfValid;g.saveIfValid&&(j=g.saveIfValid),this.activeControls.push({control:g,label:i,name:a,display:h,Include:!0,sdataPath:f,template:"rowTemplate",isDom:!1,fieldClassAppendix:"",saveIfValid:j})},_setDisplayString:function(a,b){return this._displayControl(a,b)?"display":"display-none"},_displayControl:function(a,b){var c=["dataTypeData"],d=!0;return void 0!==b&&null!==b&&(d=c.indexOf(b)>=0),!d||void 0!==a.activeControls&&null!==a.activeControls&&a.activeControls.length>0},_blankString:function(a){return null===a||void 0===a||""===a.trim()},_onBlankValue:function(a,b){return this._blankString(a)?b:a},_assignControlBasedOffType:function(a,b,c,d){var e=this.permittedActions.indexOf("add")>=0;this.editMode&&(e=this.permittedActions.indexOf("edit")>=0);var f=this.permittedActions.indexOf("view")>=0&&!e,g=this.assignControlBasedOffOfName(a,b,c,d,f);if(null===g)switch(b.toLowerCase()){case"string":case"int":case"byte":case"date":g=new TextBox({shouldPublishMarkDirty:!1,disabled:f}),void 0!==c&&null!==c&&(g.textbox.value=c);break;case"boolean":g=new CheckBox({shouldPublishMarkDirty:!1,disabled:f}),void 0!==c&&null!==c&&g.setChecked(c);break;case"datetime":g=new DateTimePicker({id:"SDataForm_DateTimePicker_"+this.dumbDTControlCounterForId,displayDate:!0,displayTime:!0,shouldPublishMarkDirty:!1,disabled:f}),this.dumbDTControlCounterForId++;break;case"picklist":case"enum":g=new FilteringSelect({value:c,store:new memory({idProperty:d.id,data:d.data}),idProperty:d.id,searchAttr:d.text,shouldPublishMarkDirty:!1,required:!1,disabled:f});break;case"grid":g=this._createGridControl(a,b,c,d,f)}return g&&g.domNode&&domClass.remove(g.domNode,"dijitInline"),g},reLoadData:function(a){for(var b=0;b<this.activeControls.length;b++){var c=this.activeControls[b];if(null!==c.control){var d=c.name,e=c.control.declaredClass,f=this._getValueFromData(a,d);e.indexOf("DndSortList"),e.indexOf("TextBox")>=0&&(c.control.textbox.value=f),e.indexOf("TextArea"),e.indexOf("CheckBox")>=0&&(c.control.checked=f),e.indexOf("FilteringSelect"),e.indexOf("PropertyDropDown"),e.indexOf("_AbstractGrid")>=0&&(c.control.grid._setStore(dojo.data.ObjectStore(dojo.store.Memory({idProperty:"$key",data:this.formData[name]}))),c.control.grid.refresh(),c.control.grid.startup(),c.control.grid.onLoadComplete=function(){c.control.grid.resize()})}}},_getValueFromData:function(a,b){var c=a[b];switch(typeof c){case"object":return c;case"undefined":default:return null}},_moveActiveControlFromBackGroundToPage:function(a){var b,c,d;if(a&&null===(d=this._CustomDisplay(a)))if(a.label=this._onBlankValue(a.label,"<br>"),b=new Simplate(this[a.template]),c=b.apply(a),d=domConstruct.toDom(c),this.attributeContainer.appendChild(d),a.control)if(a.control.type&&"Grid"===a.control.type){if(a.control&&a.control.type&&"Grid"===a.control.type){var e=this._findControllerDom("items");null!==e&&(lang.mixin(a.control.options,{placeHolder:e}),a.control=new GridView(a.control.options),dojoConnect.publish("sdata/form/setGrid",[a.control]),a.control.createGridView(),a.control.grid.onLoadComplete=function(){a.control.grid.resize()})}}else a.isDom?(domConstruct.place(a.control,d.lastElementChild.lastElementChild,"only"),a.control.className.indexOf("dijitCheckBox")>=0&&domClass.add(a.control.parentNode,"checkbox")):(domConstruct.place(a.control.domNode,d.lastElementChild.lastElementChild,"only"),a.control.domNode.className.indexOf("dijitCheckBox")>=0&&domClass.add(a.control.domNode.parentNode,"checkbox")),a.control.startup&&a.control.startup();else domConstruct.place("<br>",d.lastElementChild.lastElementChild,"only")},isValid:function(){for(var a=!0,b=0;b<this.activeControls.length;b++){var c=this.activeControls[b],d=c.control,e=null;if(null!==d){if(null===(e=this.customValidation(c))){var f=!0;"function"==typeof d.isValid&&d.isValid(!0),"function"==typeof d.onChanged&&d.onChanged(),void 0!==d.state&&void 0!==d.required&&(f=f&&"Error"!==d.state&&!("Incomplete"===d.state&&d.required)),f||d.set("state","Error"),a=a&&f}else a=a&&e;a&&d.saveIfValid&&null!==d.editMode&&void 0!==d.editMode&&(d.editMode&&d.saveIfValid.update||!d.editMode&&d.saveIfValid.insert)&&d.save(this.formBase)}}return a},cancel:function(a){var b=null;this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.offsetParent&&this.domNode.parentNode.offsetParent.id.indexOf("Dialog")>=0?b=this.domNode.parentNode.offsetParent.id:a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.offsetParent&&a.domNode.parentNode.offsetParent.id.indexOf("Dialog")>=0&&(b=a.domNode.parentNode.offsetParent.id),null!==b&&(dijit.byId(b).hideLoading&&dijit.byId(b).hideLoading(),dijit.byId(b).hide())},_grabCorrectElementAndPlace:function(a,b){for(var c=document.getElementsByName(b),d=c[0],e=!1,f=0;f<c.length&&!e;f++){var g=c[f].getBoundingClientRect();g.bottom+g.height+g.left+g.right+g.top+g.width>0&&(d=c[f],e=!0)}domConstruct.place(a.domNode,d,"only")},findDomAndHideDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display-none"),domClass.remove(b,"display"))},findDomAndShowDom:function(a){var b=this._findControllerDom(a,!0);b&&(domClass.add(b,"display"),domClass.remove(b,"display-none"))},_findControllerDom:function(a,b){var c="div.fld[data-dojo-attach-point='${0}']";b&&(c="tr[data-dojo-attach-point='${0}']");var d=dString.substitute(c,[a]),e=null;this._DynamicSection?e=this._DynamicSection:this.domNode&&(e=this.domNode);var f=null;return f=e?query(d,e):query(d),void 0!==f&&null!==f&&void 0!==f.length&&null!==f.length&&f.length>0?f[0]:null},_showHideElementsByNames:function(a,b,c,d){if(lang.isArray(b))for(var e=0;e<b.length;e++){var f=b[e];a._showHideElementsByNamesHelper(a,f,c,d)}else a._showHideElementsByNamesHelper(a,b,c,d)},_showHideElementsByNamesHelper:function(a,b,c,d){var e=a._getIndexFromActivityListFromName(b);if(e>-1){var f=a.activeControls[e].control;if(a.activeControls[e].isDom||(f=f.domNode),null!==d&&void 0!==d)switch(d.toLowerCase()){case"parent":f=f.parentNode;break;case"grandparent":f=f.parentNode.parentNode}c?(a.domClass.add(f,"display-none"),a.domClass.remove(f,"display")):(a.domClass.add(f,"display"),a.domClass.remove(f,"display-none"))}},_adjustForValuesMatchingBooleanDefaultsMissing:function(a,b){void 0!==a&&void 0!==a[b]&&null!==this.dataTypeData&&void 0===this.dataTypeData[b]&&(this.dataTypeData[b]=!1)},_setParentDisplayClass:function(a,b){this._displayControl(a)?(domClass.remove(b,"display-none"),domClass.add(b,"display")):(domClass.remove(b,"display"),domClass.add(b,"display-none"))},getActiveValues:function(){for(var a={},b=0;b<this.activeControls.length;b++)lang.mixin(a,this._getActiveValue(this.activeControls[b]));if(lang.mixin(a,this._getActiveValuesAdjustments()),"object"==typeof this.hiddenValues)for(var c=0;c<this.hiddenValues.length;c++){var d=this.hiddenValues[c];lang.mixin(a,d)}return a},_getActiveValue:function(a){var b={};if(a.Include&&null!==a.control){var c=a.name,d=a.control.declaredClass;if(d.indexOf("DndSortList")>=0){var e=a.control.getSource(0);e&&(b=a.control.getASourcesContentsInString(e))}if(d.indexOf("TextBox")>=0&&(null!==(b=a.control.getValue())&&void 0!==b||(b="")),d.indexOf("TextArea")>=0&&(b="Template"===c?this._convertDotToLegacy(a.control.textbox.value):a.control.value),d.indexOf("DisplayName")>=0&&(b=a.control.getDetails()),d.indexOf("CheckBox")>=0&&(b=a.control.checked),d.indexOf("FilteringSelect")>=0&&(b=null===a.control.value?"":a.control.value),d.indexOf("ComboBox")>=0&&(b=null===a.control.value?"":a.control.value,"PickList"===c&&"000new"!==a.control.store.query(function(a){return a.name===b}).id&&(c="PickListName")),d.indexOf("PropertyDropDown")>=0){var f=a.control.entitySelected.displayedValue,g=f.split("."),h=g[g.length-1],i=g[g.length-2];void 0!==h&&(b=h),void 0!==i&&(b=i)}if(d.indexOf("GridView")>=0){var j=[],k={};if(k=a.control.getStore(),k.data){k=k.data;for(var l=0;l<k.length;l++){var m=k[l];if(void 0!==m){void 0!==m.undefined&&delete m.undefined;var n=this._oformData[c].filter(function(a){return a.$key===m.$key});void 0!==m.$key&&n.length<=0&&delete m.$key,void 0!==m.filter&&null===m.filter&&delete m.filter,void 0!==m.$updated&&delete m.$updated,void 0!==m.$httpStatus&&delete m.$httpStatus,void 0!==m.$etag&&delete m.$etag,void 0!==m.$descriptor&&delete m.$descriptor,j.push(m)}}}b=j}var o=[c];return a.sdataPath&&a.sdataPath.dot&&(o=a.sdataPath.dot.split(".")),this._setToObjectPath(o,b,c,1,!1)}return null},_setToObjectPath:function(a,b,c,d,e){var f,g='"${0}":${1}',h=d,i="",j={propName:c,path:a,builtUpPath:JSON.stringify(b),skip:1,stringify:e,lineEscape:""},k=this._changeObjectPathParameters(a,b,c,d,e);null!==k&&(j=lang.mixin(j,k),j.stringify&&(g="${0}:${1}"));for(var l=j.path.length-j.skip;l>=h;l--)f=j.path[l],i=j.stringify?Array(l).join("\\\\"):"",void 0!==f&&(0!==j.builtUpPath.indexOf("{")&&l!==j.path.length-j.skip&&(j.builtUpPath="{"+j.builtUpPath+"}"),j.stringify&&(f=dString.substitute("${0}${1}${2}${0}${1}",[i,j.lineEscape,f]),l==h&&(j.builtUpPath=dString.substitute("${0}${1}${2}${0}${1}",[i,j.lineEscape,j.builtUpPath]))),j.builtUpPath=dString.substitute(g,[f,j.builtUpPath]));return 0!==j.builtUpPath.indexOf("{")&&0!==j.builtUpPath.indexOf("[")&&(j.builtUpPath="{"+j.builtUpPath+"}"),JSON.parse(j.builtUpPath)},_getIndexFromActivityListFromName:function(a){for(var b=-1,c=0;c<this.activeControls.length;c++){if(this.activeControls[c].name===a)return c}return b},_checkIfDuplicate:function(a,b,c){var d=!1,e=new Sage.SData.Client.SDataResourceCollectionRequest(a);if(void 0!==c&&null!==c||(c=b.name),this.formBase){e.setResourceKind(this.formBase);for(var f=this.duplicateCheck.filter(function(a){return a.field===c}),g=0;f.length&&g<f.length;g++){var h=f[g],i=this._getActiveValue(b);void 0!==i&&null!==i&&i!=={}&&(e.setQueryArg("where",dString.substitute(h.where,[h.ignoreCase?i[c].toLowerCase():i[c]])),e.setQueryArg("startIndex",0),e.setQueryArg("count",1),e.read({async:!1,scope:this,success:function(a){void 0!==a&&void 0!==a.$resources&&1==a.$resources.length?(d=!0,b.control.invalidMessage=dString.substitute(this.formNlsResource.picklistAlreadyExists,[a.$resources[0].name]),b.control.set("state","Error")):d=!1},failure:function(a){d=!0,b.control.invalidMessage=dString.substitute("Error: ${0}",["Picklist Name:"]),b.control.set("state","Error")}}))}}return d},setControlValue:function(a,b){var c=this.activeControls.filter(function(b){return b.name===a}),d=null;c.length>0&&(d=c[0]),null!==d&&d.control.set("value",b)}});return widget})},"Sage/UI/Controls/SimpleTextarea":function(){define(["dijit/form/SimpleTextarea","dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/json","dojo/date/locale","dojo/has"],function(a,b,c,d,e,f,g){return b("Sage.UI.Controls.SimpleTextarea",[a],{baseClass:"dijitTextBox dijitTextArea sageTextArea",templateString:"<div><textarea ${!nameAttrSetting} class='none' dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea></div>",hotKey:"",defaultValue:"",multiLineMaxLength:"",shouldPublishMarkDirty:!0,_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},constructor:function(a){this.maxLength=a.multiLineMaxLength,this.userDateStamp=!(!a.userdatestamp||"true"!==a.userdatestamp);var b="";a.textareaclass?b=a.class?a.class+" "+a.textareaclass:a.textareaclass:a.class&&(b=a.class,a.class=""),this.templateString=this.templateString.replace("class='none'",b.length>0?"class='"+b+"'":""),this.connect(this,"onFocus",this.onFocus)},postMixInProperties:function(){this.inherited(arguments),!this.defaultValue&&this.srcNodeRef&&(this.defaultValue=this.srcNodeRef.value)},buildRendering:function(){if(this.inherited(arguments),(g("ie")||g("trident"))&&this.domNode&&this.domNode.childElementCount>0)for(var a=0;a<this.domNode.childElementCount;a++){var b=this.domNode.childNodes[a];b&&b instanceof HTMLTextAreaElement&&(b.defaultValue||(b.defaultValue=this.defaultValue))}},onFocus:function(a){if(""===this.getValue("value")&&this.userDateStamp){var b=Sage.Services.getService("UserOptions");if(b){var d="EGL_USER_OPTION_UserDateTimeStamp",e=this._getFromSessionStorage(d),f=!1;null!==e&&void 0!==e?this._assignUserDateTimeStamp(e):b.get("UserDateTime","CustomerService",c.hitch(this,function(a){a&&a.value&&(f="T"===a.value,this._assignUserDateTimeStamp(f),this._addToSessionStorage(d,f))}),null,null,!0)}}},onChange:function(a){this.shouldPublishMarkDirty&&dojo.publish("Sage/events/markDirty"),this.inherited(arguments)},_getFromSessionStorage:function(a){var b,c=sessionStorage.getItem(a);return null!==c&&void 0!==c&&(b=e.parse(c)),b},_addToSessionStorage:function(a,b){sessionStorage.setItem(a,e.stringify(b))},_assignUserDateTimeStamp:function(a){if(a){var b=Sage.Services.getService("ClientContextService"),c=b.containsKey("userPrettyName")?b.getValue("userPrettyName"):b.getValue("userID"),e=b.containsKey("userTimeZoneKey")?b.getValue("userTimeZoneKey"):"",g=b.containsKey("userDateFmtStr")?b.getValue("userDateFmtStr"):Sys.CultureInfo.CurrentCulture.dateTimeFormat.FullDateTimePattern,h=f.format(new Date,{datePattern:d.substitute("${0}",[g])});this.setValue(d.substitute("${0} ${1} (${2})",[c,h,e]))}}})})},"Sage/UI/Controls/DndSortList":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/dnd/Source","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/store/Observable","dojo/store/Memory","dojo/string"],function(_Widget,_Templated,declare,source,lang,domClass,domConstruct,observable,memory,dojoString){var widget=declare("Sage.UI.Controls.DndSortList",[_Widget,_Templated],{widgetsInTemplate:!0,ListNamesIds:[],ListOfItems:null,horizontal:!1,widgetTemplate:new Simplate(eval(["<div><div dojoattachpoint='DndSortList' /></div>"])),headerTemplate:new Simplate(["<div dojoattachpoint='{%= $.id %}_ListContainer'><div>{%= $.name %}</div><ul dojoattachpoint='{%= $.id %}_List' style='min-height:50px'></div>"]),listBulletTemplate:new Simplate(["<li class='dojoDndItem'>{%= $.Item.name %}</li>"]),sortList:[],constructor:function(a){a.ListNamesIds&&(this.ListNamesIds=a.ListNamesIds),a.ListOfItems?this.ListOfItems=new observable(new memory({data:a.ListOfItems})):this.ListOfItems=new observable(new memory),a.horizontal&&(this.horizontal=a.horizontal)},postCreate:function(){this.sortList=[];for(var a=0;a<this.ListNamesIds.length;a++){for(var b=this.ListNamesIds[a],c=this.headerTemplate.apply(b),d=domConstruct.toDom(c),e=d.children[1],f=new source(e,{horizontal:this.horizontal,simpleSelection:!0}),g=this.ListOfItems.filter(function(a){return a.list===b.id}),h=[],i=0;i<g.length;i++){var j=g[i];h.push({data:j.Item.name.trim()})}f.insertNodes(!1,h),this.sortList.push({list:b.id,data:f}),this.DndSortList.appendChild(d)}},updateListOfItems:function(a,b){for(var c=0;c<this.sortList.length;c++){for(var d=this.sortList[c],e=a.filter(function(a){return!1===a.assigned}),f=d.data.getAllNodes().map(function(a){return d.data.getItem(a.id).data}),g=[],h=0;h<e.length;h++){for(var i=e[h],j=!1,k=this._exists(i),l=0;l<f.length;l++){var m=f[l];m===i.Item.name&&!k&&b&&(a[i.id].assigned=!0,g.push({data:m.trim()}),j=!0)}j||d.list!==i.list||k&&!b||(a[i.id].assigned=!0,i.Item.name=i.Item.name.trim(),g.push({data:i.Item.name}),k||this.ListOfItems.push(i))}b&&d.data.selectAll().deleteSelectedNodes(),d.data.insertNodes(!1,g)}},_exists:function(a){for(var b=0;b<this.ListOfItems.length;b++){if(this.ListOfItems[b].Item.name.trim()===a.Item.name.trim())return!0}return!1},getASourcesContentsInList:function(a){return a.getAllNodes().map(function(b){return a.getItem(b.id).data})},getASourcesContentsInString:function(a){for(var b="",c="",d=this.getASourcesContentsInList(a),e=0;e<d.length;e++)b=dojoString.substitute("${0}${1}${2}",[b,c,d[e]]),c=", ";return b},getSource:function(a){for(var b=0;b<this.sortList.length;b++){var c=this.sortList[b];if(a===c.list)return c.data}}});return widget})},"Sage/UI/Forms/PickListManagerForm":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/aspect","dojo/string","dojo/store/Memory","Sage/UI/Dialogs","Sage/UI/Forms/FormFromSData","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","Sage/Utility/_LocalStorageMixin","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/i18n!./nls/FormFromSData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return b("Sage.UI.Forms.PickListManagerForm",[i,l],{excludeOnNew:[],listOfSupressFields:["createuser","createdate","modifydate","modifyuser"],dialogs:h,_itemsGrid:null,allowViaAddRule:"Administration/Picklist/Add",allowViaEditRule:"Administration/Picklist/Edit",allowViaViewRule:"Administration/Picklist/View",allowViaDeleteRule:"Administration/Picklist/Delete",formBase:"picklists",duplicateCheck:[{field:"name",where:"lower(name) eq '${0}'",ignoreCase:!0}],saveIfValid:{update:!0,insert:!0},_cachedListOfActiveLanguages:"PickList_ActiveLanguages",_storageNameSpace:"PickListData",assignControlBasedOffOfName:function(a,b,c,d,e){var f=null;switch(a.toLowerCase()){case"name":f=new j({shouldPublishMarkDirty:!1,required:!0,disabled:e}),void 0!==c&&null!==c&&(f.textbox.value=c);break;case"defaultlanguage":f=new j({shouldPublishMarkDirty:!1,disabled:this.editMode}),void 0!==c&&null!==c&&(f.textbox.value=c)}return f},_createGridControl:function(b,d,e,f,g){var h=null;switch(b.toLowerCase()){case"items":for(var i=[],k=[],l=0;l<f.data.data.length;l++){var m=f.data.data[l],n=null,p={},q=this;switch(m.type.toLowerCase()){case"xs:boolean":this.editMode&&(n={editor:"radio",editorArgs:{disabled:g,shouldPublishMarkDirty:!1,name:m.name,onchange:function(a){a.preventDefault();var b=q._getRowIdFromCell(this);if(b){q.formData.items.forEach(function(a){a.isDefault=!1});q.formData.items.find(function(a){return a.$key===b.innerText}).isDefault=!0;var c=q._getGrid(q);if(c){var d=c.store.data;d.forEach(function(a){a.isDefault=!1});d.find(function(a){return a.$key===b.innerText}).isDefault=!0}}}},width:150});break;default:n="languageCode"===m.name?this.formData.defaultLanguage?{editor:j,editorArgs:{disabled:!0,shouldPublishMarkDirty:!1,name:m.name},width:150}:null:"code"===m.name?{editor:j,editorArgs:{isValid:this.formData.defaultLanguage?function(){return!0}:function(a){if(""===this.value.trim())return this.set("message",o.PickListItemCodeRequiredeException),this.set("state","Error"),!1;var b=q._getGrid(q);q._getRowIdFromCell(this.domNode);return!(b.store.query({code:this.value}).length>1&&(this.set("message",this.invalidMessage),this.set("state","Error"),1))},invalidMessage:o.PickListItemCodeUniqueException,disabled:g,shouldPublishMarkDirty:!1,name:m.name},width:150}:{editor:j,editorArgs:{disabled:g,shouldPublishMarkDirty:!1,name:m.name},width:150}}null!==n&&(p={field:m.name,label:"number"===m.name?this.formNlsResource[m.name]:m.label,editable:!g&&"languageCode"!==m.name,hidden:!1,unhidable:!1,editOn:"",autoSave:!0,id:m.name,width:150},c.mixin(p,n),i.push(p),k.push(m.name))}i.push({label:"",field:"$key",unhidable:!0,editable:!1,hidden:!0,id:"$key"});var r={store:dojo.data.ObjectStore(dojo.store.Memory({data:[]}))};this.formData[b]&&(r={store:dojo.data.ObjectStore(dojo.store.Memory({idProperty:"$key",data:this.formData[b]}))});var s=f.label?f.label:this.formNlsResource[b],t=[];g||(t.push("add"),t.push("delete")),h={type:"Grid",options:{tools:t,gridLabel:s,editable:!0,selectionMode:"single",rowSelection:!0,columnHiding:!0,showRecordCount:!0,addNew:c.partial(this._addItemToGrid,this),deleteSelected:c.partial(this._removeItemFromGrid,this),parent:this,shouldPublishMarkDirty:!1,columns:i,classNames:"items"}};var u=this.formData.defaultLanguage||"";this.setControlValue("defaultLanguage",u),"string"==typeof u&&""!==u.trim()&&r.store.setData(r.store.query({languageCode:u})),h.options=c.mixin(h.options,r),a.subscribe("sdata/form/setGrid",this,this._setItemsGrid)}return h},_getRowIdFromCell:function(a){var b=a.closest?a.closest("tr"):a.parentElement.parentElement;return b&&"tr"===b.tagName.toLowerCase()?($(".field--key",b)||{})[0]||null:null},_regenerateCellId:function(a,b,c){return"#"+a.id+"-row-"+b+" td.field-"+c},_getGrid:function(a){var b=((a.activeControls||[]).filter(function(a){return"items"===a.name})[0]||{}).control;if(b){if(b.store)return b;var c=b.grid;if(c)return c}return null},
_getItemFromGridsStore:function(a,b){var c=a.store;if(c){var d=c[b];if(d&&d>=0&&c[d])return c[d]}return null},_setItemsGrid:function(a){"items"===a.className&&(this._itemsGrid=a)},_addItemToGrid:function(a){for(var b=-1,c=0;c<this.store.data.length;c++){var d=this.store.data[c];d.number>b&&(b=d.number)}b=Number(b)+1;for(var e={},f=0;f<this.columns.length;f++){var g=this.columns[f];switch(g.field){case"number":case"$key":e[g.field]=b;break;case"isDefault":e[g.field]=!1;break;default:"languageCode"===g.field?e[g.field]=a.formData.defaultLanguage||"":e[g.field]=""}}this.store.add(e),this.refresh()},_removeItemFromGrid:function(a){var b,c,d=this.getSelectedRowData(),e=void 0===d||null===d||0===d.length,f=this.store.idProperty;if(e)return void a.dialogs.showWarning(a.gridNlsResource.noSelectionsText,"Infor CRM");for(var g=!1,h=!1,i=0;i<d.length;i++){var j=d[i];c=this.store.data.length,j?void 0!==(b=j[f])&&(this.store.remove(b),c>this.store.data.length&&(g=!0,i--)):h=!0}if(h)for(var k=0;k<this.store.data.length;k++){var l=this.store.data[k];b=l[f],c=this.store.data.length,b&&!0===this.grid._grid.selection[b]&&(this.store.remove(b),c>this.store.data.length&&(g=!0,i--))}g?this.refresh():a.dialogs.showWarning(a.gridNlsResource.noSelectionsText,"Infor CRM")},_changeObjectPathParameters:function(a,b,c,d,e){"items"===c&&"$resources"!==a[a.length-1]&&a.push("$resources");for(var f=a[a.length-1],g=a.length-2;g>0;g--)"$resources"===f&&f===a[g]&&a.splice(g,1);return{propName:c,path:a,builtUpPath:JSON.stringify(b),skip:d,stringify:e,lineEscape:"items"===c?'"':""}},_save:function(b){b&&b.type&&"click"===b.type&&(b=null);var d={},e=!1;if(this.isValid()){d=c.mixin(this.formData,this.getActiveValues()),d.items&&(d.items.$resources=c.mixin(this._oformData.items,d.items.$resources),d.items.$deleteMissing=!0);var g=Sage.Data.SDataServiceRegistry.getSDataService("system"),h=new Sage.SData.Client.SDataSingleResourceRequest(g).setResourceKind("picklists");h.setQueryArg("language",cookie.getCookie("SLXLanguageSetting"));var i={isSecurityManager:!0,scope:this,format:"json",ignoreETag:!this.editMode,async:!1,success:function(c){if(e=!0,void 0===b||null===b||this.formBase===b){a.publish("Sage/picklist/form/reload",c);var d=f.substitute(this.formNlsResource.messageOnSave,[c.name]);this.dialogs.showWarning(d,"Infor CRM")}},failure:function(a,b){var c=JSON.parse(a.response),d=f.substitute("${0}(${1})",[a.statusText,a.status]);c.length>0&&void 0!==c[0].message&&(d=f.substitute("${0}: {${1}",[d,c[0].message])),e=!1}},j="create";this.editMode&&(h.setResourceSelector(f.substitute("'${0}'",[d.$key])),j="update"),h[j](d,i)}return e},customValidation:function(a){var b=null,c="";switch(void 0!==a.name&&(c=a.name.toLowerCase()),c){case"":b=!1;break;case"items":var d=this._getGrid(this);if(d)for(var e=$(".dgrid-row .field-code .dijitTextBox.dijitValidationTextBox",d.domNode),f=0;f<e.length;f++){var g=dijit.registry.byNode(e[f]);if(g){var h=!0;if("function"==typeof g.isValid&&(h=g.isValid(!0)),"function"==typeof g.onChanged&&g.onChanged(),"boolean"==typeof h&&!1===h)return!1}}return!0;case"name":this.editMode||""!==a.control.value.trim()&&(b=!this._checkIfDuplicate(Sage.Data.SDataServiceRegistry.getSDataService("system"),a))}return b}})})},"Sage/MainView/EntityMgr/AddEditEntityDetail/DisplayName":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dojo/_base/lang","dojo/_base/declare","dojo/text!./templates/DisplayName.html","dojo/i18n!./nls/AddEditDialog","Sage/UI/Controls/TextBox","dojo/dom-class","dojo/dom-construct"],function(_Widget,_Templated,dojoString,lang,declare,template,nlsResources,crmTextBox,domClass,domConstruct){var widget=declare("Sage.MainView.EntityMgr.AddEditEntityDetail.DisplayName",[_Widget,_Templated],{widgetTemplate:new Simplate(eval(template)),widgetsInTemplate:!0,_nlsResources:nlsResources,_detailUtility:null,_nameField:null,_displayField:null,_grdField:null,_trigger:null,_GetLocalsQuery:null,_baseLanguage:"en-us",_updateFromGrid:!1,_editMode:!1,display:null,name:null,_dataStore:null,constructor:function(a){this._baseLanguage=cookie.getCookie("SLXLanguageSetting"),a.editMode&&(this._editMode=a.editMode),a.dataStore&&(this._dataStore=a.dataStore),a.query&&(this._GetLocalsQuery=a.query),a.dUtility&&(this._detailUtility=a.dUtility),a.values&&(a.values.display&&(this.display=a.values.display),a.values.name&&(this.name=a.values.name)),this.display&&this._createDisplayController(this.display),this.name&&this._createNameController(this.name)},postCreate:function(){this.lblDisplayName.innerHTML=this._nlsResources.lblDisplay,this.displayNameTxtCntrl.appendChild(this._displayField.domNode),domClass.add(this._TriggerSection,"display-none"),this.lblName.innerHTML=this._nlsResources.lblName,this.NameCntrl.appendChild(this._nameField.domNode)},_createDisplayController:function(a){var b=a.data,c=a.validation,d=a.disabled,e=a.invalidMessage;"function"==typeof a.mapDisplayToName&&(this.mapDisplayToName=a.mapDisplayToName),"function"!=typeof c&&(c=this._displayNameValidator),"string"!=typeof e&&(e=""),"boolean"!=typeof d&&(d=!1);var f=this;this._displayField=new crmTextBox({shouldPublishMarkDirty:!1,validator:c,invalidMessage:e,disabled:d,onChange:function(){""===f._nameField.textbox.value&&(f._nameField.textbox.value=f.mapDisplayToName(this.value,f),f._nameField.isValid(!0),f._nameField.onChange())}});var g="";b&&(g=b),this._displayField.textbox.value=g},_displayNameValidator:function(a,b){return!0},_createNameController:function(a){var b=a.data,c=a.validation,d=a.disabled,e=a.invalidMessage;"function"!=typeof c&&(c=this._nameValidator),"string"!=typeof e&&(e=""),"boolean"!=typeof d&&(d=!1);this._nameField=new crmTextBox({shouldPublishMarkDirty:!1,required:!0,validator:c,invalidMessage:e,disabled:d});var f="";b&&(f=b),this._nameField.textbox.value=f},_nameValidator:function(a,b){var c="^([a-z]|[A-Z]|_)(\\w)*",d=a.match(c,"g");return!!d&&(lang.isArray(d),d[0].length==a.length)},_trimWhiteSpace:function(a){return a.replace(/\s+/g,"")},_cmdTrigger:function(a){this._updateFromGrid=!0,this.checked?(this.innerHTML=a._nlsResources.hideTranslations,domClass.add(a.displayNameTxtCntrl,"display-none"),domClass.remove(a.displayNameTxtCntrl,"display"),domClass.add(a.displayNameGrdCntrl,"display"),domClass.remove(a.displayNameGrdCntrl,"display-none"),a._shrinkGridAsNeeded(),a._grdField.grid.resize()):(this.innerHTML=a._nlsResources.showTranslations,domClass.add(a.displayNameTxtCntrl,"display"),domClass.remove(a.displayNameTxtCntrl,"display-none"),domClass.add(a.displayNameGrdCntrl,"display-none"),domClass.remove(a.displayNameGrdCntrl,"display")),this.checked=!this.checked},_createCustomValidationTextBox:function(){var a=this;return declare("Sage.MainView.EntityMgr.AddEditEntityFilter.customValTxtBx",Sage.UI.Controls.TextBox,{shouldPublishMarkDirty:!1,placeHolder:"Enter Value",disabled:!0,onChange:function(b){var c=!0,d=a._grdField.grid.store.index[this.domNode.parentNode.parentNode.children[1].innerHTML];d<0&&(d=a._grdField.grid.store.index[a._baseLanguage],c=!1),a._grdField.grid.store.data[d].display=this.value,c&&a._grdField.grid.store.data[d].code===a._baseLanguage&&(a._displayField.textbox.value=a._grdField.grid.store.data[d].display)}})},_createRequest:function(a,b,c){var d=new Sage.SData.Client.SDataResourceCollectionRequest(this._detailUtility.service);return d.setResourceKind(this._GetLocalsQuery.resourceKind),d.setQueryArg("where",dojoString.substitute("lower(${0}) eq '${1}'",[this._GetLocalsQuery.name,a])),null!==b&&d.setQueryArg("select",b),c&&d.setQueryArg("language",c),d.setQueryArg("startIndex",0),d.setQueryArg("count",1),d},isValid:function(a){var b=!1;if(!this._nameField.disabled){var c=!this._nameField.isValid(!0);b=b||c,void 0!==this._nameField.state&&void 0!==this._nameField.required&&(c=c||"Error"===this._nameField.state||"Incomplete"===this._nameField.state&&this._nameField.required,b=b||c),c&&this._nameField.set("state","Error"),this._nameField.onChanged()}if(!this._displayField.disabled){var d=!this._displayField.isValid(!0);b=b||d,this._displayField.onChanged(),void 0!==this._displayField.state&&void 0!==this._displayField.required&&(d=d||"Error"===this._displayField.state||"Incomplete"===this._displayField.state&&this._displayField.required,b=b||d),d&&this._displayField.set("state","Error"),this._displayField.onChanged()}if(!b){var e=this;if(this._editMode||void 0===this.dataStore||null===this.dataStore){this._createRequest(this._nameField.textbox.value.toLowerCase(),null,this._baseLanguage).read({async:!1,scope:this,success:function(c){a&&void 0!==c&&void 0!==c.$resources&&1==c.$resources.length?(b=!0,this._nameField.invalidMessage=dojoString.substitute("${0} ${1} ${2}",[e.lblName.innerHTML,e._nlsResources.notUniqueFor,e._GetLocalsQuery.entityName]),this._nameField.set("state","Error")):b=!1},failure:function(a){b=!0,this._nameField.invalidMessage=dojoString.substitute("${0} ${1} ${2}",[e.lblName.innerHTML,e._nlsResources.notUniqueFor,e._GetLocalsQuery.entityName]),this._nameField.set("state","Error")}})}else for(var f=this.dataStore.query(),g=0;g<f.length;g++)if(this._nameField.value===f[g].propertyName){this._nameField.invalidMessage=dojoString.substitute("${0} ${1}",[e.lblName.innerHTML,e._nlsResources.notUnique]),this._nameField.set("state","Error"),b=!0;break}}return!b},getDetails:function(){var a={};return a[this._GetLocalsQuery.displayName]=this._displayField.textbox.value,a[this._GetLocalsQuery.name]=this._nameField.textbox.value,a}});return widget})},"Sage/MainView/EntityMgr/EntityWizard/AddEditEntity":function(){require({cache:{"url:Sage/MainView/EntityMgr/EntityWizard/templates/AddEditEntity.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblSure">Are you sure ?</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblThisStepCreateEntity">Completing this step will create the entities and necessary schema</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table style="padding-left:20px; padding-top:20px;">\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold; text-align: right;" data-dojo-attach-point="lblEntity">Entity : </label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="createEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="vertical-align:top; padding-top:15px;text-align: right;">\r\n                        <span><label style="font-weight:bold;" data-dojo-attach-point="lblProperties">Properties : </label></span>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <ul class="properties" style="padding-left:0;"></ul>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelatedEntity"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relatedEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelationType"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relationType"></label>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}}),define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/AddEditEntity.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment","Sage/Data/SDataServiceRegistry","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","dijit/registry","dojo/topic"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return a("Sage.MainView.EntityMgr.EntityWizard.AddEditEntity",[e],{_dialog:null,id:"dlgAddEditEntity",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.AddEditEntity,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this.createEntity.innerHTML=" "+this.entityDetails.entityName,this.entityDetails.relatedEntity&&(this.lblRelatedEntity.innerHTML=this._nlsResources.lblRelatedEntity,this.lblRelationType.innerHTML=this._nlsResources.lblRelationType,this.relatedEntity.innerHTML=" "+this.entityDetails.relatedEntity,this.relationType.innerHTML=" "+this.entityDetails.relationType),this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblSure.innerHTML=this._nlsResources.lblSure,this.lblThisStepCreateEntity.innerHTML=this._nlsResources.lblThisStepCreateEntity,this.lblEntity.innerHTML=this._nlsResources.lblEntity,this.lblProperties.innerHTML=this._nlsResources.lblProperties,this.btnBack.set("label","< "+this._nlsResources.lblBack),this.btnNext.set("label",this._nlsResources.lblNext+" >"),this.btnCancel.set("label",this._nlsResources.lblCancel),l.mixin(this._dialog,new k);for(var a=$(".properties"),b=0;b<this.entityDetails.data.length;b++)$("<li>"+this.entityDetails.data[b].displayName+"</li>").appendTo(a)},isValid:function(){return this.Form.validate()},_btnBack_OnClick:function(){var a=dijit.byId("dlgAddEditEntity");this._dialog.hide(),a.destroyRecursive(),n.publish("/entityController/entityWizard/previousStep",this._currentStep)},createOwnerRelation:function(a,b){var c={};c.cardinality="M:1",c.cascadeOption="SaveUpdate",c.parentEntity={$key:this.entityDetails.entityName},c.childEntity={$key:"Owner"},c.parentProperty={propertyName:"Owner",displayName:"Owner",isIncluded:!0},c.childProperty={propertyName:this.entityDetails.entityName,displayName:this.entityDetails.entityDisplayName,isIncluded:!1};for(var e,f=0;f<a.length;f++)if("SeccodeId"===a[f].propertyName){e=a[f].id;break}c.columns={$resources:[{parentPropertyId:e,childPropertyId:this.entityDetails.ownerId}]},new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("metadata")).setResourceKind(d.substitute("relationships")).create(c,{async:!1,success:function(a){},failure:function(a){b.entityDetails.ownerStatus=b._nlsResources.lblErrorRelation+" Owner !"}})},_btnNext_OnClick:function(){var a=this,b=h.pluralize(this.entityDetails.entityName),c=h.pluralize(this.entityDetails.entityDisplayName),e=new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("metadata")).setResourceKind(d.substitute("entities")),f={name:this.entityDetails.entityName,tableName:this.entityDetails.entityName.toUpperCase(),displayName:this.entityDetails.entityDisplayName,displayNamePlural:c,isDynamic:!0,properties:{$resources:this.entityDetails.data},package:{$key:"SalesLogix Application Entities"},sdata:{pathName:h.pluralize(this.entityDetails.entityName.toLowerCase())},stringExpression:"${"+this.entityDetails.entityName+"Id}"};"1:1"==this.entityDetails.relationType?(f.isExtension=!0,f.extendedEntity={$key:this.entityDetails.relatedEntity}):f.isExtension=!1,this._dialog.showLoading(),e.create(f,{success:function(e){this.entityDetails.status=a._nlsResources.lblSuccessMsg;var f=e.properties.$resources;if("1:1"!==a.entityDetails.relationType&&this.createOwnerRelation(f,a),"1:M"===a.entityDetails.relationType){var g={};g.cardinality="1:M",g.cascadeOption="SaveUpdate",g.parentEntity={$key:a.entityDetails.relatedEntity},g.childEntity={$key:a.entityDetails.entityName},g.parentProperty={propertyName:b,displayName:c,isIncluded:!0},g.childProperty={propertyName:a.entityDetails.relatedEntity,displayName:this.entityDetails.relatedEntityDispName,isIncluded:!0};for(var h,i=0;i<f.length;i++)if(f[i].propertyName===a.entityDetails.relatedEntity+"Id"){h=f[i].id;break}g.columns={$resources:[{parentPropertyId:a.entityDetails.relatedPropertyId,childPropertyId:h}]},new Sage.SData.Client.SDataSingleResourceRequest(j.getSDataService("metadata")).setResourceKind(d.substitute("relationships")).create(g,{success:function(b){a._dialog.hideLoading(),a._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep)},failure:function(b){a.entityDetails.selectedRelStatus=a._nlsResources.lblErrorRelation+" "+a.entityDetails.relatedEntity+" !",a._dialog.hideLoading(),a._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep)},scope:a})}else a._dialog.hideLoading(),a._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep);var k=m.byId("list");k&&k._listGrid._refresh()},failure:function(b){this.entityDetails.status=a._nlsResources.lblErrorMsg,this._dialog.hideLoading(),this._dialog.hide(),n.publish("/entityController/entityWizard/nextStep",this._currentStep)},scope:this})}})})},"Sage/MainView/EntityMgr/EntityWizard/Status":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/EntityMgr/EntityWizard/_EntityWizardDialogBase","dojo/text!./templates/Status.html","Sage/MainView/EntityMgr/EntityWizard/EntityWizardUtility","Sage/Utility","Sage/Utility/File/Attachment"],function(a,b,c,d,e,f,g,h,i){return a("Sage.MainView.EntityMgr.EntityWizard.Status",[e],{id:"dlgStatus",widgetTemplate:h.makeTemplateFromString(f),_currentStep:g.entityWizardStep.EntityDetails,_fileInputOnChange:null,constructor:function(){this.inherited(arguments)},startup:function(){this.statusLabel.innerHTML=this.entityDetails.status,this.entityDetails.selectedRelStatus&&(this.selectedRelStatus.innerHTML=this.entityDetails.selectedRelStatus),this.entityDetails.ownerStatus&&(this.ownerStatus.innerHTML=this.entityDetails.ownerStatus),this.inherited(arguments)},postCreate:function(){this._dialog.set("title",this._nlsResources.lblNewEntityWizard),this.lblCreateEntity.innerHTML=this._nlsResources.lblCreateEntity,this.lblStatus.innerHTML=this._nlsResources.lblStatus,this.btnFinish.set("label",this._nlsResources.lblFinish)},_btnFinish_OnClick:function(){this._dialog.hide(),this.finishWizard()},isValid:function(){return this.Form.validate()},destroy:function(){this.inherited(arguments)}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\r\n\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\tdata-dojo-attach-event="onclick:_onClick"\r\n\t\ttabIndex="-1" role="presentation" aria-hidden="true" data-dojo-attach-point="valueNode"\r\n/></span>\r\n',"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\r\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\r\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\r\n\t\t\t\trole="heading" level="1"></span>\r\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="-1">\r\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\r\n\t\t</span>\r\n\t</div>\r\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\r\n\t${!actionBarTemplate}\r\n</div>\r\n\r\n',"url:dijit/templates/ProgressBar.html":'<div class="dijitProgressBar dijitProgressBarEmpty" role="progressbar"\r\n\t><div  data-dojo-attach-point="internalProgress" class="dijitProgressBarFull"\r\n\t\t><div class="dijitProgressBarTile" role="presentation"></div\r\n\t\t><span style="visibility:hidden">&#160;</span\r\n\t></div\r\n\t><div data-dojo-attach-point="labelNode" class="dijitProgressBarLabel" id="${id}_label"></div\r\n\t><span data-dojo-attach-point="indeterminateHighContrastImage"\r\n\t\t   class="dijitInline dijitProgressBarIndeterminateHighContrastImage"></span\r\n></div>\r\n',"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n',"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip" data-dojo-attach-event="mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\r\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\r\n></div>\r\n',"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\r\n\tid="widget_${id}" role="presentation"\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n',"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\r\n\t<thead>\r\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\r\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\r\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\r\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\r\n\t\t\t\t<div data-dojo-attach-point="monthNode">\r\n\t\t\t\t</div>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\r\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\r\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t\t<tr role="row">\r\n\t\t\t${!dayCellsHtml}\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\r\n\t\t\t${!dateRowsHtml}\r\n\t</tbody>\r\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\r\n\t\t<tr>\r\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\r\n\t\t\t\t<div class="dijitCalendarYearLabel">\r\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\r\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\r\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tfoot>\r\n</table>\r\n',"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\r\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point="iconNode"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\r\n\t\tdata-dojo-attach-event="onclick:_onClick"\r\n\t\tdata-dojo-attach-point="valueNode" role="presentation" aria-hidden="true"\r\n/></span>\r\n',"url:dgrid/css/dgrid.css":{cssText:'.dgrid{position:relative;overflow:hidden;border:1px solid #ddd;height:30em;display:block;}.dgrid-header{background-color:#eee;}.dgrid-header-row{position:absolute;right:17px;left:0;}.dgrid-header-scroll{position:absolute;top:0;right:0;}.dgrid-footer{position:absolute;bottom:0;width:100%;}.dgrid-header-hidden,html.has-quirks .dgrid-header-hidden .dgrid-cell{font-size:0;height:0 !important;border-top:none !important;border-bottom:none !important;margin-top:0 !important;margin-bottom:0 !important;padding-top:0 !important;padding-bottom:0 !important;}.dgrid-footer-hidden{display:none;}.dgrid-sortable{cursor:pointer;}.dgrid-header, .dgrid-header-row, .dgrid-footer{overflow:hidden;background-color:#eee;}.dgrid-row-table{border-collapse:collapse;border:none;table-layout:fixed;empty-cells:show;width:100%;height:100%;}.dgrid-cell{padding:0px;text-align:left;overflow:hidden;vertical-align:top;border:1px solid #ddd;border-top-style:none;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;}.dgrid-cell-padding{padding:3px;}.dgrid-content{position:relative;height:99%;}.dgrid-scroller{overflow-x:auto;overflow-y:scroll;position:absolute;top:0px;margin-top:25px;bottom:0px;width:100%;}.dgrid-preload{font-size:0;line-height:0;}.dgrid-loading{position:relative;height:100%;}.dgrid-above{position:absolute;bottom:0;}.ui-icon{width:16px;height:16px;background-image:url("images/ui-icons_222222_256x240.png");}.ui-icon-triangle-1-e{background-position:-32px -16px;}.ui-icon-triangle-1-se{background-position:-48px -16px;}.dgrid-expando-icon{width:16px;height:16px;}.dgrid-tree-container{-webkit-transition-duration:0.3s;-moz-transition-duration:0.3s;-ms-transition-duration:0.3s;-o-transition-duration:0.3s;transition-duration:0.3s;overflow:hidden;}.dgrid-tree-container.dgrid-tree-resetting{-webkit-transition-duration:0;-moz-transition-duration:0;-ms-transition-duration:0;-o-transition-duration:0;transition-duration:0;}.dgrid-sort-arrow{background-position:-64px -16px;display:block;float:right;margin:0 4px 0 5px;height:12px;}.dgrid-sort-up .dgrid-sort-arrow{background-position:0px -16px;}.dgrid-selected{background-color:#bfd6eb;}.dgrid-input{width:99%;}html.has-mozilla .dgrid *:focus, html.has-opera .dgrid *:focusundefined{outline:1px dotted;}html.has-ie-6-7.has-no-quirks .dgrid-row-table{width:auto;}html.has-quirks .dgrid-row-table, html.has-ie-6 .dgrid-row-table{height:auto;}html.has-quirks .dgrid-header-scroll,html.has-ie-6 .dgrid-header-scroll{font-size:0;}html.has-mozilla .dgrid-focus{outline-offset:-1px;}.dgrid-scrollbar-measure{width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;}.dgrid-autoheight{height:auto;}.dgrid-autoheight .dgrid-scroller{position:relative;overflow-y:hidden;}.dgrid-autoheight .dgrid-header-scroll{display:none;}.dgrid-autoheight .dgrid-header{right:0;}#dgrid-css-dgrid-loaded{display:none;}',xCss:'html.has-mozilla .dgrid *:{/27};{/17background-image:url("images/ui-icons_222222_256x240.png");}'},"url:dgrid/css/extensions/ColumnHider.css":".dgrid-hider-toggle{background-position:0 -192px;background-color:transparent;border:none;cursor:pointer;position:absolute;right:0;top:0;}.dgrid-rtl-swap .dgrid-hider-toggle{right:auto;left:0;}.dgrid-hider-menu{position:absolute;top:0;right:17px;width:184px;background-color:#fff;border:1px solid black;z-index:99999;padding:4px;overflow-x:hidden;overflow-y:auto;}.dgrid-rtl-swap .dgrid-hider-menu{right:auto;left:17px;}.dgrid-hider-menu-row{position:relative;padding:2px;}.dgrid-hider-menu-check{position:absolute;top:2px;left:2px;padding:0;}.dgrid-hider-menu-label{display:block;padding-left:20px;}html.has-quirks .dgrid-hider-menu-check,html.has-ie-6-7 .dgrid-hider-menu-check{top:0;left:0;}#dgrid-css-extensions-ColumnHider-loaded{display:none;}","url:dgrid/css/extensions/ColumnReorder.css":".dgrid-header .dojoDndTarget .dgrid-cell{display:table-cell;}.dgrid-header .dojoDndItemBefore{border-left:2px dotted #000 !important;}.dgrid-header .dojoDndItemAfter{border-right:2px dotted #000 !important;}#dgrid-css-extensions-ColumnReorder-loaded{display:none;}","url:dgrid/css/extensions/ColumnResizer.css":{cssText:".dgrid-column-resizer{position:absolute;width:2px;background-color:#666;z-index:1000;}.dgrid-resize-handle{height:100px;width:0;position:absolute;right:-4px;top:-4px;cursor:col-resize;z-index:999;border-left:5px solid transparent;outline:none;}html.has-ie-6 .dgrid-resize-handle{border-color:pink;filter:chroma(color=pink);}html.has-mozilla .dgrid .dgrid-resize-handle:focus,html.has-opera .dgrid .dgrid-resize-handle:focusundefined{outline:none;}.dgrid-resize-header-container{height:100%;}html.has-touch .dgrid-resize-handle{border-left:20px solid transparent;}html.has-touch .dgrid-column-resizer{width:2px;}html.has-no-quirks .dgrid-resize-header-container{position:relative;}html.has-ie-6 .dgrid-resize-header-container{position:static;}.dgrid-header .dgrid-cell-padding{overflow:hidden;}html.has-ie-6 .dgrid-header .dgrid-cell-padding{margin-right:4px;}html.has-ie-6 .dgrid-header .dgrid-sort-arrow{margin-right:0;}html.has-quirks .dgrid-header .dgrid-cell-padding, html.has-ie-6 .dgrid-header .dgrid-cell{position:relative;}#dgrid-css-extensions-ColumnResizer-loaded{display:none;}",xCss:"html.has-mozilla .dgrid .dgrid-resize-handle:{/3};{/2filter:chroma(color=pink);}"},
"url:dgrid/css/extensions/Pagination.css":".dgrid-status{padding:2px;}.dgrid-pagination .dgrid-status{float:left;}.dgrid-pagination .dgrid-navigation, .dgrid-pagination .dgrid-page-size{float:right;}.dgrid-navigation .dgrid-page-link{cursor:pointer;font-weight:bold;text-decoration:none;color:inherit;padding:0 4px;}.dgrid-first, .dgrid-last, .dgrid-next, .dgrid-previous{font-size:130%;}.dgrid-pagination .dgrid-page-disabled,.has-ie-6-7 .dgrid-navigation .dgrid-page-disabled,.has-ie.has-quirks .dgrid-navigation .dgrid-page-disabled{color:#aaa;cursor:default;}.dgrid-page-input{margin-top:1px;width:2em;text-align:center;}.dgrid-page-size{margin:1px 4px 0 4px;}#dgrid-css-extensions-Pagination-loaded{display:none;}","url:dojo/resources/dnd.css":{cssText:".dojoDndAvatar{font-size:75%;color:black;}.dojoDndAvatarHeader td{padding-left:20px;padding-right:4px;height:16px;}.dojoDndAvatarHeader{background:#ccc;}.dojoDndAvatarItem{background:#eee;}.dojoDndMove .dojoDndAvatarHeader{background-image:url(images/dndNoMove.png);background-repeat:no-repeat;}.dojoDndCopy .dojoDndAvatarHeader{background-image:url(images/dndNoCopy.png);background-repeat:no-repeat;}.dojoDndMove .dojoDndAvatarCanDrop .dojoDndAvatarHeader{background-image:url(images/dndMove.png);background-repeat:no-repeat;}.dojoDndCopy .dojoDndAvatarCanDrop .dojoDndAvatarHeader{background-image:url(images/dndCopy.png);background-repeat:no-repeat;}.dojoDndHandle{cursor:move;}.dojoDndIgnore{cursor:default;}.dj_a11y .dojoDndAvatar{font-size:1em;font-weight:bold;}.dj_a11y .dojoDndAvatarHeader td{padding-left:2px !important;}.dj_a11y .dojoDndAvatarHeader td span{padding-right:5px;}",xCss:"{/4background-image:url(images/dndNoMove.png);}{/5background-image:url(images/dndNoCopy.png);}{/6background-image:url(images/dndMove.png);}{/7background-image:url(images/dndCopy.png);}"},"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\r\n\tid="widget_${id}"\r\n\trole="combobox"\r\n\taria-haspopup="true"\r\n\tdata-dojo-attach-point="_popupStateNode"\r\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\r\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/></div\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\r\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\r\n\t/></div\r\n></div>\r\n',"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\r\n\t<div class="dijitTooltipContainer" role="presentation">\r\n\t\t<div data-dojo-attach-point="contentsNode" class="dijitTooltipContents dijitTooltipFocusNode">\r\n\t\t\t<div data-dojo-attach-point="containerNode"></div>\r\n\t\t\t${!actionBarTemplate}\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/DateTimePicker.html":'<div class="dateTimePicker">\r\n        <div dojoAttachPoint="tooltipContainer">\r\n        \r\n            <div dojoAttachPoint="dateContainer" class="dateTimePicker-dateContainer">\r\n               \r\n                    <input id="${id}-Calendar" data-dojo-type="Sage.UI.Calendar"\r\n                        style="width:inherit;"\r\n                        textAlign="${textAlign}"\r\n                           type="text" \r\n                           tabindex="0"\r\n                           displayMode="popup"\r\n                           dojoAttachPoint="dateNode"\r\n                           dojoAttachEvent="onValueSelected:_onValueSelected,onBlur:_onCalendarBlur">\r\n               \r\n            </div>\r\n            \r\n            <div dojoAttachPoint="timeZoneContainer" class="dateTimePicker-timeZoneContainer">\r\n               \r\n                    <label for="${id}-TimeStart">${timeStartText}</label><br />\r\n                    <input id="${id}-TimeTextBox" data-dojo-type="dijit.form.TimeTextBox" \r\n                           style="width:16em;"\r\n                           textAlign="${textAlign}"\r\n                           tabindex="0"\r\n                           type="text" dojoAttachPoint="timeNode"\r\n                           constraints="{locale:Sys.CultureInfo.CurrentCulture.name,timePattern:Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortTimePattern.replace(\'tt\', \'a\').replace(\'t\', \'a\')}">\r\n                    <br /><br/>\r\n                    <label for="${id}-TzCalculator">${timeZoneCalculatorText}</label>\r\n                    <div id="timeZoneCalucaltor" class="dateTimePicker-timeZoneCalculator">\r\n                       <p style="width:auto;margin-top:auto">\r\n                            <label for="${id}-TzSelectSource">${timeZoneSourceText}</label><br />\r\n                            <select id="${id}-TzSelectSource" data-dojo-type="dijit.form.ComboBox"  dojoAttachPoint="timeZoneSourceComboNode" style="width:15em;">\r\n                            </select>\r\n                            <br />\r\n                            <label for="${id}-TzSelectDest">${timeZoneDestText}</label><br />\r\n                           <select id="${id}-TzSelectDest" data-dojo-type="dijit.form.ComboBox"  dojoAttachPoint="timeZoneDestComboNode" style="width:15em;">\r\n                           </select>\r\n                           <br/>\r\n                            <span id="${id}-ConvertResults" dojoAttachPoint="convertResultsNode" style="float:left;padding-top:5px;">\r\n                        </span>\r\n                        </p><br/>\r\n                        <button id="${id}-Convert" data-dojo-type="dijit.form.Button" dojoAttachPoint="timeZoneConvertButtonNode" type="button" style="float:right" dojoAttachEvent="onClick:_convertClicked">\r\n                            ${convertText}\r\n                        </button>\r\n                       \r\n                        \r\n                    </div>\r\n               \r\n                <div class="button-bar alignright" style="clear: both">\r\n                    <button id="${id}-OKButton" tabindex="0" data-dojo-type="dijit.form.Button" dojoAttachPoint="OKButtonNode" type="button" dojoAttachEvent="onClick:_okClicked">\r\n                        ${okText}\r\n                    </button>\r\n                    <button id="${id}-CancelButton" tabindex="0" data-dojo-type="dijit.form.Button" dojoAttachPoint="CancelButtonNode" type="button" dojoAttachEvent="onClick:_cancelClicked">\r\n                        ${cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    \r\n</div>\r\n\r\n',"url:dijit/templates/MenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\r\n\t\trole="presentation"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\r\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</span>\r\n\t</td>\r\n</tr>\r\n',"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>\r\n\t\t<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${!checkedChar}</span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\r\n</tr>\r\n',"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\r\n\t<td class="dijitMenuSeparatorIconCell">\r\n\t\t<div class="dijitMenuSeparatorTop"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\r\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n</tr>\r\n',"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\r\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow" role="presentation"\r\n\t\t><span data-dojo-attach-point="expandoNode" class="dijitInline dijitTreeExpando" role="presentation"></span\r\n\t\t><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"></span\r\n\t\t><span data-dojo-attach-point="contentNode"\r\n\t\t\tclass="dijitTreeContent" role="presentation">\r\n\t\t\t<span role="presentation" class="dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point="iconNode"></span\r\n\t\t\t><span data-dojo-attach-point="labelNode,focusNode" class="dijitTreeLabel" role="treeitem"\r\n\t\t\t\t   tabindex="-1" aria-selected="false" id="${id}_label"></span>\r\n\t\t</span\r\n\t></div>\r\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeNodeContainer" role="presentation"\r\n\t\t style="display: none;" aria-labelledby="${id}_label"></div>\r\n</div>\r\n',"url:dijit/templates/Tree.html":'<div role="tree">\r\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\r\n\t<div class="dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point="rootLoadingIndicator"></div>\r\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation">\r\n\t</div>\r\n</div>\r\n',"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\r\n\t><tbody role="presentation"><tr role="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitInline dijitButtonText circleLayout circleTheme" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\r\n\t\t></div\r\n\t\t></td\r\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event="onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle="${optionsTitle}"\r\n\t\t\trole="button" aria-haspopup="true"\r\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\r\n\t\t></td\r\n\t\t><td style="display:none !important;"\r\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode"\r\n\t\t\t\tclass="dijitOffScreen"\r\n\t\t\t\trole="presentation" aria-hidden="true"\r\n\t\t\t\tdata-dojo-attach-event="onclick:_onClick"\r\n\t\t/></td></tr></tbody\r\n></table>\r\n',"url:dijit/layout/templates/TabContainer.html":'<div class="dijitTabContainer">\r\n\t<div class="dijitTabListWrapper" data-dojo-attach-point="tablistNode"></div>\r\n\t<div data-dojo-attach-point="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\r\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point="containerNode"></div>\r\n</div>\r\n',"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\r\n\t   cellspacing="0">\r\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\r\n</table>\r\n',"url:dijit/layout/templates/_TabButton.html":'<div role="presentation" data-dojo-attach-point="titleNode,innerDiv,tabContent" class="dijitTabInner dijitTabContent">\r\n\t<span role="presentation" class="dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point="iconNode"></span>\r\n\t<span data-dojo-attach-point=\'containerNode,focusNode\' class=\'tabLabel\'></span>\r\n\t<span class="dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point=\'closeNode\'\r\n\t\t  role="presentation">\r\n\t\t<span data-dojo-attach-point=\'closeText\' class=\'dijitTabCloseText\'>[x]</span\r\n\t\t\t\t></span>\r\n</div>\r\n',"url:dijit/layout/templates/ScrollingTabController.html":'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_menuBtn"\r\n\t\t data-dojo-props="containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point="_menuBtn" showLabel="false" title="">&#9660;</div>\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_leftBtn"\r\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point="_leftBtn" data-dojo-attach-event="onClick: doSlideLeft">&#9664;</div>\r\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\r\n\t\t class="tabStripButton-${tabPosition}"\r\n\t\t id="${id}_rightBtn"\r\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point="_rightBtn" data-dojo-attach-event="onClick: doSlideRight">&#9654;</div>\r\n\t<div class=\'dijitTabListWrapper\' data-dojo-attach-point=\'tablistWrapper\'>\r\n\t\t<div role=\'tablist\' data-dojo-attach-event=\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point=\'containerNode\' class=\'nowrapTabStrip\'></div>\r\n\t</div>\r\n</div>',"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'<div data-dojo-attach-event="ondijitclick:_onClick" class="dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point="focusNode" role="button">\r\n\t<span role="presentation" class="dijitInline dijitTabStripIcon" data-dojo-attach-point="iconNode"></span>\r\n\t<span data-dojo-attach-point="containerNode,titleNode" class="dijitButtonText"></span>\r\n</div>',"url:dojox/grid/resources/View.html":'<div class="dojoxGridView" role="presentation">\r\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\r\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\r\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\r\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\r\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\r\n\t</div>\r\n</div>\r\n',"url:dojox/grid/resources/_Grid.html":'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut">\r\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\r\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation"></div>\r\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\r\n\trole="listbox" aria-haspopup="true"\r\n\t><tbody role="presentation"><tr role="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\r\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,textDirNode" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitValidationContainer"\r\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t\t/></div\r\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\r\n\t\t/></td\r\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\r\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/></td\r\n\t></tr></tbody\r\n></table>\r\n',"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\r\n\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event="ondijitclick:_onClick"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t> \r\n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1" data-dojo-attach-point="valueNode" />\r\n</span>\r\n',"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\r\n\t><input\r\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\r\n\t\tclass="dijitReset dijitCheckBoxInput"\r\n\t\tdata-dojo-attach-point="focusNode"\r\n\t \tdata-dojo-attach-event="ondijitclick:_onClick"\r\n/></div>\r\n',"url:Sage/templates/ImageButton.html":'<span id="${id}" class="dijit dijitReset dijitInline" role="presentation">\r\n<span class="dijitReset dijitInline dijitButtonNode imageButtonNode" data-dojo-attach-event="ondijitclick:_onClick" role="presentation">\r\n        <span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon">\r\n                <img alt="" src="" data-dojo-attach-point="iconNode"/>\r\n                <div class="dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}" data-dojo-attach-point="iconNodeSprite"></div>\r\n            </span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText circleLayout circleTheme"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdata-dojo-attach-point="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\r/></span>\r\r\n',"url:Sage/UI/Controls/templates/DropDownSelectPickList.html":'<div>\r\n    <select id="${id}-Select" data-dojo-type="Sage.UI.ComboBox" shouldPublishMarkDirty="false" dojoAttachPoint="comboBox" value="${value}" dojoAttachEvent="onBlur: _onBlur,onChange:_onChange">\r\n    </select>\r\n</div>\r\n',"url:Sage/UI/Controls/templates/DropDownSelectUser.html":'<div>\r\n    <select data-dojo-type="Sage.UI.ComboBox" shouldPublishMarkDirty="false" dojoAttachPoint="comboBox" dojoAttachEvent="onBlur: _onBlur">\r\n    </select>\r\n</div>\r\n',"url:Sage/Utility/File/templates/FallbackFilePicker_Attachment.html":'[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="uploadFileDialog" title="{%= $.attachFileText %}" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onHide">\',\r\n        \'<iframe src="about:blank" style="width:0px;height:0px;border-width:0px;" name="{%= $._iframeId %}" id="{%= $._iframeId %}" dojoAttachPoint="_iframe" dojoAttachEvent="onload:_iframeLoad"></iframe>\',\r\n        \'<form method="post" enctype="multipart/form-data" action="{%= $._buildPostUrl() %}" target="{%= $._iframeId %}" dojoAttachPoint="_postForm" class="attachment-properties-form">\',\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160">\',\r\n                \'<div data-dojo-type="dijit.layout.ContentPane" label="{%= $.uploadFileText %}" >\',\r\n                    \'<input name="file" multiple="false" type="file" dojoAttachEvent="onchange:_onNewFile" dojoAttachPoint="btn_FileSelect" class="uploadButton" />\',\r\n                \'</div>\',\r\n                 \'<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="128" ></div>\',\r\n                 \'<input type="hidden" dojoType="dijit.form.TextBox" name="fileName" id="{%= $.id %}_tb_realFileName" dojoAttachPoint="tb_realFileName" maxlength="255" />\',\r\n            \'</div>\',\r\n            \'<div class="general-dialog-actions" align="right">\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                \'<span>&nbsp;&nbsp</span>\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n            \'</div>\',\r\n            \'<input type="hidden" name="dataType" value="R" />\',\r\n            \'<input type="hidden" name="attachDate" dojoAttachPoint="_attachDate"/>\',\r\n            \'<input type="hidden" name="accountId" dojoAttachPoint="_accountId"/>\',\r\n            \'<input type="hidden" name="activityId" dojoAttachPoint="_activityId" />\',\r\n            \'<input type="hidden" name="contactId" dojoAttachPoint="_contactId" />\',\r\n            \'<input type="hidden" name="contractId" dojoAttachPoint="_contractId" />\',\r\n            \'<input type="hidden" name="defectId" dojoAttachPoint="_defectId" />\',\r\n            \'<input type="hidden" name="historyId" dojoAttachPoint="_historyId" />\',\r\n            \'<input type="hidden" name="leadId" dojoAttachPoint="_leadId" />\',\r\n            \'<input type="hidden" name="opportunityId" dojoAttachPoint="_opportunityId" />\',\r\n            \'<input type="hidden" name="productId" dojoAttachPoint="_productId" />\',\r\n            \'<input type="hidden" name="returnId" dojoAttachPoint="_returnId" />\',\r\n            \'<input type="hidden" name="salesOrderId" dojoAttachPoint="_salesOrderId" />\',\r\n            \'<input type="hidden" name="ticketId" dojoAttachPoint="_ticketId" />\',\r\n            \'<input type="hidden" name="userId" dojoAttachPoint="_userId" />\',\r\n        \'</form>\',\r\n    \'</div>\',\r\n\'</div>\'\r\n]',"url:Sage/Utility/File/templates/FallbackFilePicker_LibraryDoc.html":'[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="uploadFileDialog" title="{%= $.addLibraryFileText %}" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onHide">\',\r\n        \'<iframe src="about:blank" style="width:0px;height:0px;border-width:0px;" name="{%= $._iframeId %}" id="{%= $._iframeId %}" dojoAttachPoint="_iframe" dojoAttachEvent="onload:_iframeLoad"></iframe>\',\r\n        \'<form method="post" enctype="multipart/form-data" action="" target="{%= $._iframeId %}" dojoAttachPoint="_postForm" class="attachment-properties-form">\',\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="160">\',\r\n                 \'<div data-dojo-type="dijit.layout.ContentPane" label="{%= $.uploadFileText %}" >\',\r\n                    \'<input name="file" multiple="false" type="file" dojoAttachEvent="onchange:_onNewFile" dojoAttachPoint="btn_FileSelect" class="uploadButton" />\',\r\n                 \'</div>\',\r\n                 \'<div dojoType="dijit.form.TextBox" label="{%= $.descriptionText %}" name="description" id="{%= $.id %}_tb_Description" dojoAttachPoint="tb_Description" maxlength="255" ></div>\',\r\n                 \'<input type="hidden" dojoType="dijit.form.TextBox" name="fileName" id="{%= $.id %}_tb_realFileName" dojoAttachPoint="tb_realFileName" maxlength="255" />\',\r\n            \'</div>\',\r\n            \'<div class="general-dialog-actions" align="right">\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                \'<span>&nbsp;&nbsp</span>\',\r\n                \'<div data-dojo-type="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n            \'</div>\',\r\n        \'</form>\',\r\n    \'</div>\',\r\n\'</div>\'\r\n]',"url:Sage/UI/templates/GridView.html":'[\r\n\'<div data-dojo-type="dijit.layout.ContentPane" class="HundredPercentHeight abstractGrid" >\',\r\n    \'<div data-dojo-attach-point="headerNode" class="list-panel-tbar" role="toolbar">\',\r\n        \'<span dojoattachpoint="labelSection"></span>\',\r\n        \'<span dojoattachpoint="abstractGrid_toolBar" class="right-tools"></span>\',\r\n    \'</div>\',\r\n    \'<div dojoattachpoint="abstractGrid_filters"></div>\',\r\n    \'<div dojoattachpoint="abstractGrid_grid" class="gridcontainer"></div>\',\r\n\'</div>\'\r\n]',"url:Sage/UI/Controls/templates/Lookup.html":'<div class="textcontrol lookup">\r\n    <span id="${id}" class="lookup">\r\n        <input id="${id}_LookupText" class="text-with-icons" required="${required}" type="text" dojoAttachPoint="textbox,focusNode" />\r\n        <a href="#">\r\n            <img id="${id}_LookupBtn" src="images/icons/Find_16x16.png" dojoAttachPoint="lookupButton" alt="${buttonToolTip}" title="${buttonToolTip}" />\r\n        </a>\r\n        \r\n        <img id="${id}_btnClearResult" src="images/icons/Delete_16x16.png" dojoAttachPoint="clearButton" class="display-none" alt="${closeButtonToolTip}" title="${closeButtonToolTip}"/>\r\n    </span>\r\n</div>',
"url:Sage/MainView/ActivityMgr/templates/ActivityEditor.html":'[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="activityDialog" title="" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onDlgHide">\',\r\n        \'<div class="activity-dialog">\',  //body\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="regardingContainer">\',\r\n                \'<select id="pk_Regarding" label="{%= $.regardingText %}" id="{%= $.id %}_pk_Regarding" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Regarding" canEditText="true" itemMustExist="false" maxLength="255"></select>\',          \r\n    \'<div dojoType="dijit.form.TextBox" label="{%= $.locationText %}" id="{%= $.id %}_tb_Location" dojoAttachPoint="tb_Location" maxLength="255" ></div>\',\r\n            \'</div>\', //first tablecontainer 1 col\r\n        //Dates section for add/edit mode..................\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="dateSection_AddEdit">\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" id="{%= $.id %}_dtp_startDate" dojoAttachPoint="dtp_startDate" displayDate="true" displayTime="true" label="{%= $.startTimeText %}"></div>\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DurationSelect" label="{%= $.durationText %}" id="{%= $.id %}_sel_Duration" dojoAttachPoint="sel_Duration" includeDisablingCheckbox="false" valuesAreAfterStart="true"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="{%= $.timeLessText %}" id="{%= $.id %}_cb_Timeless" dojoAttachPoint="cb_Timeless" ></div>\',\r\n                    \'<label class="checkbox-label" for="{%= $.id %}_cb_Timeless">{%= $.timeLessText %}</label>\',\r\n                \'</div>\',\r\n                \'<div dojoType="dojox.layout.TableContainer" label="{%= $.alarmText %}" cols="2" showLabels="false" class="removeExtraSpace" dojoAttachPoint="alarmContainer">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" id="{%= $.id %}_cb_Alarm" dojoAttachPoint="cb_Alarm" ></div>\',\r\n                    \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DurationSelect" id="{%= $.id %}_sel_AlarmDur" dojoAttachPoint="sel_AlarmDur" valuesAreAfterStart="false" ></div>\',\r\n                \'</div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="" id="{%= $.id %}_cb_AutoRollover" dojoAttachPoint="cb_AutoRollover"></div>\',\r\n                    \'<label class="checkbox-label" for="{%= $.id %}_cb_AutoRollover">{%= $.rolloverText %}</label>\',\r\n                \'</div>\',\r\n            \'</div>\',\r\n        //Dates section for complete mode...................\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="dateSection_Complete">\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" id="{%= $.id %}_dtp_completedDate" dojoAttachPoint="dtp_completedDate" displayDate="true" displayTime="true" label="{%= $.completedText %}"></div>\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DateTimePicker" id="{%= $.id %}_dtp_scheduledDate" dojoAttachPoint="dtp_scheduledDate" displayDate="true" displayTime="true" label="{%= $.scheduledText %}"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="{%= $.timeLessText %}" id="{%= $.id %}_cb_TimelessComplete" dojoAttachPoint="cb_TimelessComplete" ></div>\',\r\n                    \'<label class="checkbox-label" for="{%= $.id %}_cb_TimelessComplete">{%= $.timeLessText %}</label>\',\r\n                \'</div>\',\r\n                \'<div shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.DurationSelect" label="{%= $.durationText %}" id="{%= $.id %}_sel_DurationComplete" dojoAttachPoint="sel_DurationComplete" includeDisablingCheckbox="false" valuesAreAfterStart="true"></div>\',\r\n            \'</div>\',\r\n\r\n            \'<div dojoType="dijit.layout.TabContainer" id="{%= $.id %}_tc_EditActivity"  dojoAttachPoint="tc_EditActivity" class="tab-container" doLayout="false">\',\r\n/*  General Tab   */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_General" title="{%= $.tabNameGeneralText %}" class="tabContent remove-padding" dojoAttachPoint="cp_General">\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="resultContainer" class="bottom-border-section add-padding">\', \r\n                        \'<select shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" label="{%= $.resultText %}" id="{%= $.id %}_pl_Result"  name="pl_Result" dojoAttachPoint="pl_Result" canEditText="true" itemMustExist="false" maxLength="64"></select>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="4" labelWidth="70" baseClass="contact-lead-radios" >\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.contactText %}" value="contact" id="{%= $.id %}_rdo_Contact" dojoAttachPoint="rdo_Contact" dojoAttachEvent="onChange:_setContactLeadVisibility" checked="true" />\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.leadText %}" value="lead" id="{%= $.id %}_rdo_Lead" dojoAttachPoint="rdo_Lead" />\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="contactContainer" baseClass="bottom-border-section">\',\r\n\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_ContactLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.opportunityText %}" dojoAttachPoint="container_OppLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.accountText %}" dojoAttachPoint="container_AccountLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.ticketText %}" dojoAttachPoint="container_TicketLup"  class="remove-padding lookup-container"></div>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="leadContainer"  baseClass="bottom-border-section" class="display-none">\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_LeadLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<input dojoType="dijit.form.TextBox" id="{%= $.id %}_tb_LeadCompanyName" label="{%= $.companyText %}" dojoAttachPoint="tb_LeadCompanyName" readonly="true" />\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" class="bottom-border-section" dojoAttachPoint="categoryContainer" >\',\r\n                        \'<select label="{%= $.priorityText %}" id="{%= $.id %}_pk_Priority" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Priority" canEditText="true" itemMustExist="false" pickListName="Priorities" sort="false" maxLength="64" style="width: {%= 472 - $.labelWidth %}px;" ></select>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.leaderText %}" dojoAttachPoint="container_LeaderLup" class="remove-padding lookup-container" style="width: {%= 472 - $.labelWidth %}px;"></div>\',\r\n                        \'<select label="{%= $.categoryText %}" id="{%= $.id %}_pk_Category" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Category" canEditText="true" itemMustExist="false" maxLength="64" style="width: {%= 472 - $.labelWidth %}px;"></select>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="&nbsp;" class="dijitTextBox" style="border-width:0px">&nbsp;</div>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" class="valigntop" dojoAttachPoint="notesContainer">\',\r\n                        \'<textarea dojoType="dijit.form.SimpleTextarea" id="{%= $.id %}_ta_Notes" label="{%= $.notesText %}" dojoAttachPoint="ta_Notes" class="notes-text"></textarea>\',\r\n                    \'</div>\',\r\n                \'</div>\',  // end general tab\r\n/* Availability Tab   */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Availability" title="{%= $.tabNameAvailabilityText %}" class="tabContent remove-padding" dojoAttachPoint="cp_Availability" dojoAttachEvent="onShow:_onShowAvailabilityTab">\',\r\n                    \'<div dojoType="dijit.Toolbar" region="top" splitter="false" class="right-tools" >\',  // list-panel-tbar\r\n                        \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="container_ResourcesLup" class="remove-padding"></div>\',\r\n                    \'</div>\',\r\n/* Scheduler ........... */\r\n                    \'<div id="scheduler_here" class="dhx_cal_container" style="width:100%;height:230px;">\',\r\n                        \'<div class="dhx_cal_navline">\',\r\n                            \'<div class="dhx_cal_prev_timeline_button" style="right:50px;">&nbsp;</div>\',\r\n\t\t\t                \'<div class="dhx_cal_next_timeline_button" style="right:19px;">&nbsp;</div>\',\r\n//\'<div class="dhx_cal_today_button"></div>\',\r\n\t\t\t                \'<div class="dhx_cal_date"></div>\',\r\n//\'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>\',\r\n//\'<div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>\',\r\n                            \'<div class="dhx_cal_tab" name="timeline_tab" style="right:280px;"></div>\',\r\n//\'<div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>\',\r\n\t\t                \'</div>\',\r\n\t\t                \'<div class="dhx_cal_header"></div>\',\r\n\t\t                \'<div class="dhx_cal_data"></div>\',\r\n                    \'</div>\',\r\n                \'</div>\',\r\n/* Recurring Tab  */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Recurring" title="{%= $.recurringText %}" class="tabContent" dojoAttachPoint="cp_Recurring" dojoAttachEvent="onShow:_showRecurringTab">\',\r\n                    \'<div shouldPublishMarkDirty="false" dojoType="Sage.MainView.ActivityMgr.RecurringEditor" id="{%= $.id %}_recEd" labelWidth="{%= $.labelWidth - 20 %}" dojoAttachPoint="_recurringEditor"></div>\',\r\n                \'</div>\',\r\n/* Attachments Tab  */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Attachments" title="{%= $.tabNameAttachmentsText %}" class="tabContent remove-padding" dojoAttachPoint="cp_Attachments">\',\r\n                    \'<div id="{%= $.id %}_attachmentsGridPlaceholder" dojoAttachPoint="_attachmentGridPlaceholder" style="width:100%;height:100%;" ></div>\',\r\n                \'</div>\',  //end attachments tab\r\n            \'</div>\',  //tab container\r\n/* Buttons       */\r\n        // Add/edit activity buttons\r\n            \'<table class="activity-dialog-followup" id="add_edit_buttons" dojoAttachPoint="add_edit_buttons">\',\r\n                \'<tr>\',\r\n                    \'<td class="alignleft">\',\r\n                        \'<div class="scheduled-by-label" dojoAttachPoint="lbl_ScheduledBy"></div>\',\r\n                    \'</td><td class="alignright">\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Complete" name="btn_Complete" dojoAttachPoint="btn_Complete" dojoAttachEvent="onClick:_completeClick">{%= $.completeBtnText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Delete" name="btn_Delete" dojoAttachPoint="btn_Delete" dojoAttachEvent="onClick:_deleteClick">{%= $.deleteText %}</div>\',\r\n                        \'<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n\r\n\r\n        //complete activity buttons\r\n            \'<table class="activity-dialog-followup display-none" id="complete_buttons" dojoAttachPoint="complete_buttons">\',\r\n                \'<tr>\',\r\n                    \'<col width="50%" /><col width="50%" />\',\r\n                    \'<td class="alignleft">\',\r\n                        \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" >\',\r\n                            \'<select label="{%= $.followupText %}" id="sel_Followup" dojoType="dijit.form.ComboBox" dojoAttachPoint="sel_Followup">\',\r\n                                \'<option value="none" selected="selected">{%= $.noneText %}</option>\',\r\n                                \'<option value="phone">{%= Sage.Utility.Activity.getActivityTypeName("atPhoneCall") %}</option>\',\r\n                                \'<option value="meeting">{%= Sage.Utility.Activity.getActivityTypeName("atAppointment") %}</option>\',\r\n                                \'<option value="todo">{%= Sage.Utility.Activity.getActivityTypeName("atToDo") %}</option>\',\r\n                            \'</select>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="ck_coAttachments" dojoAttachPoint="ck_coAttachments" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coAttachments">{%= $.carryOverAttachmentsText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="ck_coNotes" dojoAttachPoint="ck_coNotes" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coNotes">{%= $.carryOverNotesText %}</label>\',\r\n                            \'</div>\',\r\n                        \'</div>\',\r\n                    \'</td><td class="alignright valignbottom" rowspan="2">\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_asScheduled" name="btn_asScheduled" dojoAttachPoint="btn_asScheduled" dojoAttachEvent="onClick:_asScheduledClick">{%= $.asScheduledText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Now" name="btn_Now" dojoAttachPoint="btn_Now" dojoAttachEvent="onClick:_nowClick">{%= $.nowText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_CancelComplete" name="btn_Cancel" dojoAttachPoint="btn_CancelComplete" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n                    \'</td>\',\r\n                \'</tr><tr>\',\r\n                    \'<td class="alignleft" >\',\r\n                        \'<div class="scheduled-by-label" dojoAttachPoint="lbl_ScheduledByComp"></div>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n\r\n\r\n\r\n        //Confirmations button bar...\r\n            \'<table class="button-bar display-none" id="confirmation_edit_buttons" dojoAttachPoint="confirmation_edit_buttons">\',\r\n                \'<tr>\',\r\n                    \'<td class="alignleft" style="width:{%= $.labelWidth %}px;">\',\r\n                        \'<label for="{%= $.id %}_ta_confirmationResponse" id="responseLabel" dojoAttachPoint="responseLabel">{%= $.responseText %}</label>\',\r\n                    \'</td>\',\r\n                    \'<td class="alignleft">\',\r\n                        \'<textarea dojoType="dijit.form.SimpleTextarea" id="{%= $.id %}_ta_confirmationResponse" dojoAttachPoint="ta_confirmationResponse" class="notes-text dijitTextBox" maxLength="128" ></textarea>\',\r\n                    \'</td><td class="alignright valignbottom">\',\r\n                        \'<span id="newConfButtons" dojoAttachPoint="newConfButtons">\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_accept" name="btn_accept" dojoAttachPoint="btn_accept" dojoAttachEvent="onClick:_acceptConfClick">{%= $.acceptText %}</div>\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_decline" name="btn_decline" dojoAttachPoint="btn_decline" dojoAttachEvent="onClick:_declineClick">{%= $.declineText %}</div>\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_cancelConf" name="btn_cancelConf" dojoAttachPoint="btn_cancelConf" dojoAttachEvent="onClick:_cancelClick">{%= $.cancelText %}</div>\',\r\n                        \'</span>\',\r\n                        \'<span id="otherConfButtons" dojoAttachPoint="otherConfButtons" class="display-none">\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_deleteConf" name="btn_deleteConf" dojoAttachPoint="btn_deleteConf" dojoAttachEvent="onClick:_deleteConfClick">{%= $.deleteConfText %}</div>\',\r\n                            \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_closeConf" name="btn_closeConf" dojoAttachPoint="btn_closeConf" dojoAttachEvent="onClick:_cancelClick">{%= $.closeText %}</div>\',\r\n                        \'</span>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n        \'</div>\', //body\r\n    \'</div>\',  //dialog\r\n\'</div>\' //root node\r\n]\r\n',"url:Sage/MainView/ActivityMgr/AttendeeLookup/templates/SpeedSearchLookup.html":'[\r\n\'<div>\',\r\n    \'<div data-dojo-type="dijit.Dialog" id="{%= $.id %}-Dialog" title="" dojoAttachPoint="_dialog" >\', //dialog\r\n         \'<div class="event-dialog">\',\r\n        \'<div style="padding:5px;" id="{%= $.id %}-Condition-container">\',\r\n            \'<input id="Text1" type="text" style="width:85%;"  data-dojo-attach-point="_valueBox" data-dojo-attach-event="onkeypress:_onKeyPress"/>\',     \r\n            \'<button id="{%= $.id %}-Search" data-dojo-type="dijit.form.Button" type="button" dojoAttachPoint="searchButton" dojoAttachEvent="onClick:_doSearch">{%= $.srchBtnCaption %}</button>\',\r\n          \r\n        \'</div>\',    \r\n        \'<div data-dojo-attach-point="contentNode">\',  \r\n        \'<div id="{%= $.id %}-Grid-container" dojoAttachPoint="_speedSearchGrid"  style="width:auto;height:400px;"></div>\',\r\n        \'</div>\',\r\n            \'<div class="lookupButtonWrapper">\',           \r\n                \'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-GridSelectButton" \',\r\n                    \'onClick="dijit.byId(\\\'{%= $.id %}\\\').getGridSelections(); ">{%= $.okText %}\',\r\n                   \'</button>\',            \r\n                \'<button data-dojo-type="dijit.form.Button" type="button" id="{%= $.id %}-CloseButton" \',\r\n                    \'onClick="dijit.byId(\\\'{%= $.id %}-Dialog\\\').hide();">{%= $.cancelText %}</button>\',\r\n            \'</div>\',\r\n             \'</div>\',\r\n     \'</div> \', //dialog   \r\n\'</div>\'\r\n]',"url:Sage/UI/Controls/templates/SingleSelectPickList.html":'<div>\r\n    <select id="${id}-Combo" data-dojo-type="Sage.UI.ComboBox" shouldPublishMarkDirty="false" required="${required}" dojoAttachPoint="comboBox" dojoAttachEvent="onChange:_onChange,onKeyDown:_onKeyDown"  tabindex="${tabIndex}">\r\n    </select>\r\n</div>\r\n',
"url:Sage/MainView/ActivityMgr/templates/RecurringEditor.html":'\r\n[\'<div>\',\r\n    \'<table style="width:100%">\',\r\n        \'<tr>\',\r\n            \'<td class="recurring-selectors">\',  //radio buttons...\r\n                \'<div>{%= $.activityOccurrsText %}</div>\',\r\n                \'<div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="None" id="{%= $.id %}_rdo_Once" dojoAttachPoint="rdo_Once" checked="true" dojoAttachEvent="onChange:_onceChanged" />\',  //  \r\n                    \'<label for="{%= $.id %}_rdo_Once">&nbsp;{%= $.onceText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="daily" id="{%= $.id %}_rdo_Daily" dojoAttachPoint="rdo_Daily" dojoAttachEvent="onChange:_dailyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Daily">&nbsp;{%= $.dailyText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="weekly" id="{%= $.id %}_rdo_Weekly" dojoAttachPoint="rdo_Weekly" dojoAttachEvent="onChange:_weeklyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Weekly">&nbsp;{%= $.weeklyText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="monthly" id="{%= $.id %}_rdo_Monthly" dojoAttachPoint="rdo_Monthly" dojoAttachEvent="onChange:_monthlyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Monthly">&nbsp;{%= $.monthlyText %}</label>\',\r\n                \'</div><div>\',\r\n                    \'<input dojoType="dijit.form.RadioButton" type="radio" name="recurPeriod" value="yearly" id="{%= $.id %}_rdo_Yearly" dojoAttachPoint="rdo_Yearly" dojoAttachEvent="onChange:_yearlyChanged" />\',\r\n                    \'<label for="{%= $.id %}_rdo_Yearly">&nbsp;{%= $.yearlyText %}</label>\',\r\n                \'</div>\',\r\n            \'</td>\',\r\n            \'<td>\',  //panel for each different recurring type...\r\n                \'<div dojoType="dijit.layout.StackContainer" dojoAttachPoint="_panelContainer" class="recurring-body" >\',\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_oncePanel" class="recurring-panel"  >\',\r\n                        \'{%= $.occursOnceText %}\',\r\n                    \'</div>\',\r\n//daily panel...............................\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_dailyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="dailyEvery" value="days" id="{%= $.id %}_rdoDailyEvery" checked="true" dojoAttachPoint="_rdoDailyEvery" dojoAttachEvent="onChange:_dailyEveryChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoDailyEvery" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_dailyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.daysText %}</span>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="dailyEvery" value="daysAfter" id="{%= $.id %}_rdoDailyEveryAfter" dojoAttachPoint="_rdoDailyEveryAfter" />\',\r\n                                \'<label for="{%= $.id %}_rdoDailyEveryAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_dailyEveryAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.daysAfterText %}</span>\',\r\n                            \'</div>\',\r\n                    \'</div>\',\r\n//weekly panel............................\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_weeklyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="weeklyEvery" value="weeksOn" id="{%= $.id %}_rdoWeeklyEvery" checked="true" dojoAttachPoint="_rdoWeeklyEvery" dojoAttachEvent="onChange:_weeklyEveryChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoWeeklyEvery" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_weeklyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.weeksOnText %}</span>\',\r\n                        \'</div>\',\r\n                        \'<div style="white-space:normal;padding-bottom:10px;margin:5px 0 0 20px;">\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkMonday" value="mon" id="{%= $.id %}_chkMonday" dojoAttachPoint="_chkMonday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkMonday" class="padded-inline-label">{%= $.monText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkTuesday" value="tue" id="{%= $.id %}_chkTuesday" dojoAttachPoint="_chkTuesday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkTuesday" class="padded-inline-label">{%= $.tueText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkWednesday" value="wed" id="{%= $.id %}_chkWednesday" dojoAttachPoint="_chkWednesday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkWednesday" class="padded-inline-label">{%= $.wedText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkThursday" value="thu" id="{%= $.id %}_chkThursday" dojoAttachPoint="_chkThursday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkThursday" class="padded-inline-label">{%= $.thurText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkFriday" value="fri" id="{%= $.id %}_chkFriday" dojoAttachPoint="_chkFriday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkFriday" class="padded-inline-label">{%= $.friText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkSaturday" value="sat" id="{%= $.id %}_chkSaturday" dojoAttachPoint="_chkSaturday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkSaturday" class="padded-inline-label">{%= $.satText %}</label>\',\r\n                            \'</span>\',\r\n                            \'<span class="no-wrap">\',\r\n                                \'<input dojoType="dijit.form.CheckBox" type="checkbox" name="chkSunday" value="sun" id="{%= $.id %}_chkSunday" dojoAttachPoint="_chkSunday" dojoAttachEvent="onClick:_dayChecked" />\',\r\n                                \'<label for="{%= $.id %}_chkSunday" class="padded-inline-label">{%= $.sunText %}</label>\',\r\n                            \'</span>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="weeklyEvery" value="weeksAfter" id="{%= $.id %}_rdoWeeklyEveryAfter" dojoAttachPoint="_rdoWeeklyEveryAfter" />\',\r\n                                \'<label for="{%= $.id %}_rdoWeeklyEveryAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_weeklyEveryAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_calculateEnd" />\',\r\n                            \'<span class="padded-inline-label">{%= $.weeksAfterText %}</span>\',\r\n                        \'</div>\',\r\n                    \'</div>\',\r\n//monthly panel.........................................................\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_monthlyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="monthlyOn" value="monthyOn" id="{%= $.id %}_rdoMonthlyOn" checked="true" dojoAttachPoint="_rdoMonthlyOn" dojoAttachEvent="onChange:_monthlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoMonthlyOn" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_monthlyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.monthsOnText %}</span>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_datesSelect" dojoAttachEvent="onChange:_calculateEnd" maxHeight="300"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="monthlyOn" value="monthyOnThe" id="{%= $.id %}_rdoMonthlyOnThe" dojoAttachPoint="_rdoMonthlyOnThe" />\', // dojoAttachEvent="onChange:_monthlyOnChanged"\r\n                                \'<label for="{%= $.id %}_rdoMonthlyOnThe" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_monthlyOnTheText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.monthsOnTheText %}</span>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_weeksSelect" disabled="true" dojoAttachEvent="onChange:_calculateEnd"></select>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_weekdaySelect" disabled="true" dojoAttachEvent="onChange:_calculateEnd"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="monthlyOn" value="monthyAfter" id="{%= $.id %}_rdoMonthlyAfter" dojoAttachPoint="_rdoMonthlyAfter" dojoAttachEvent="onChange:_monthlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoMonthlyAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_monthlyAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_calculateEnd" />\',\r\n                            \'<span class="padded-inline-label">{%= $.monthsAfterText %}</span>\',\r\n                        \'</div>\',\r\n                    \'</div>\',\r\n// yearly panel..............\r\n                    \'<div dojoType="dijit.layout.ContentPane" dojoAttachPoint="_yearlyPanel" class="recurring-panel"  >\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="yearlyOn" value="yearlyOn" id="{%= $.id %}_rdoYearlyOn" checked="true" dojoAttachPoint="_rdoYearlyOn" dojoAttachEvent="onChange:_yearlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoYearlyOn" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_yearlyEveryText" class="small-inline-textbox" dojoAttachEvent="onChange:_intervalChanged" />\',\r\n                            \'<span class="padded-inline-label">{%= $.yearsOnText %}</span>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_monthNamesSelect" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                            \'<select dojoType="dijit.form.Select" maxHeight="300" dojoAttachPoint="_yearDatesSelect" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth  %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="yearlyOn" value="yearlyOnThe" id="{%= $.id %}_rdoYearlyOnThe" dojoAttachPoint="_rdoYearlyOnThe" />\',\r\n                                \'<label for="{%= $.id %}_rdoYearlyOnThe" class="padded-inline-label">{%= $.theText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_yearWeeksSelect" disabled="true" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_yearWeekdaySelect" disabled="true" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                            \'<label class="padded-inline-label">{%= $.inText %}</label>\',\r\n                            \'<select dojoType="dijit.form.Select" dojoAttachPoint="_yearMonthNamesSelect" disabled="true" dojoAttachEvent="onChange:_yearlyRecurDateChanged"></select>\',\r\n                        \'</div>\',\r\n                        \'<div>\',\r\n                            \'<div class="recurring-radio-label" style="min-width:{%= $.labelWidth %}px;">\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="yearlyOn" value="yearlyEveryAfter" id="{%= $.id %}_rdoYearlyEveryAfter" dojoAttachPoint="_rdoYearlyEveryAfter" dojoAttachEvent="onChange:_yearlyOnChanged" />\',\r\n                                \'<label for="{%= $.id %}_rdoYearlyEveryAfter" class="padded-inline-label">{%= $.everyText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="1" constraints="{places: 0, type: \\\'decimal\\\'}" dojoAttachPoint="_yearlyEveryAfterText" disabled="true" class="small-inline-textbox" dojoAttachEvent="onChange:_calculateEnd" />\',\r\n                            \'<span class="padded-inline-label">{%= $.yearsAfterText %}</span>\',\r\n                            \'</div>\',\r\n                    \'</div>\',\r\n                \'</div>\', //stack container\r\n// End date calculator section.........................................\r\n                \'<div dojoAttachPoint="_startEndCalculator" class="display-none">\',\r\n                    \'<hr />\',\r\n                    \'<table>\',\r\n                        \'<tr>\',\r\n                            \'<td>{%= $.startRecurringText %}</td>\',\r\n                            \'<td>\',\r\n                                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_StartRecur" value="{%= $.startDate %}" dojoAttachPoint="dtp_startRecur" displayDate="true" displayTime="false" dojoAttachEvent="onChange:_recurringStartDateChanged" readOnly="true" ></div>\',\r\n                            \'</td>\',\r\n                        \'</tr>\',\r\n                        \'<tr>\',\r\n                            \'<td>\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="endRecur" value="endAfterNum" id="{%= $.id %}_rdoEndAfterNum" dojoAttachPoint="_rdoEndAfter" dojoAttachEvent="onChange:_endCalcModeChanged" checked="true" />\',\r\n                                \'<label for="{%= $.id %}_rdoEndAfterNum" class="padded-inline-label">{%= $.endAfterText  %}</label>\',\r\n                            \'</td><td>\',\r\n                                \'<input dojoType="Sage.UI.NumberTextBox" shouldPublishMarkDirty="false" value="2" constraints="{places: 0, type: \\\'decimal\\\', max: 999, min: 1}" maxlength="3" id="{%= $.id %}_num_Occurances" dojoAttachPoint="num_Occurances" class="small-inline-textbox" dojoAttachEvent="onChange:_numOccurancesChanged" />\',\r\n                                \'<span class="padded-inline-label">{%= $.occurrencesText %}</span>\',\r\n                            \'</td>\',\r\n                        \'</tr><tr>\',\r\n                            \'<td>\',\r\n                                \'<input dojoType="dijit.form.RadioButton" type="radio" name="endRecur" value="endOn" id="{%= $.id %}_rdoEndOn" dojoAttachPoint="_rdoEndOn" />\',\r\n                                \'<label for="{%= $.id %}_rdoEndOn" class="padded-inline-label">{%= $.endOnText %}</label>\',\r\n                            \'</td>\',\r\n                            \'<td>\',\r\n                                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_EndRecur" dojoAttachPoint="dtp_endRecur" displayDate="true" displayTime="false" dojoAttachEvent="onChange:_endRecurChanged" ></div>\',\r\n                            \'</td>\',\r\n                        \'</tr>\',\r\n                    \'</table>\',\r\n                \'</div>\',\r\n            \'</td>\',\r\n        \'</tr>\',\r\n    \'</table>\',\r\n\'</div>\']',"url:Sage/MainView/ActivityMgr/templates/HistoryEditor.html":'\ufeff\r\n[\r\n\'<div>\',\r\n    \'<div dojoType="dijit.Dialog" id="historyDialog" title="" dojoAttachPoint="_dialog" dojoAttachEvent="onHide:_onDlgHide">\',\r\n        \'<div class="activity-dialog">\',  //body\r\n            \'<div class="activity-dialog-content">\',\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="regardingContainer">\',\r\n                \'<select label="{%= $.regardingText %}" shouldPublishMarkDirty="false" id="{%= $.id %}_pk_Regarding" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Regarding" canEditText="true" itemMustExist="false" maxLength="255"></select>\',\r\n                \'<div dojoType="Sage.UI.Controls.TextBox" shouldPublishMarkDirty="false" label="{%= $.locationText %}" id="{%= $.id %}_tb_Location" dojoAttachPoint="tb_Location" maxLength="255" ></div>\',\r\n            \'</div>\', //first tablecontainer 1 col\r\n            \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="dateSection_AddEdit">\',\r\n                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_CompletetdDate" dojoAttachPoint="dtp_completedDate" displayDate="true" displayTime="true" label="{%= $.completedDateText %}"></div>\',\r\n                \'<div dojoType="Sage.UI.Controls.DateTimePicker" shouldPublishMarkDirty="false" id="{%= $.id %}_dtp_StartDate" dojoAttachPoint="dtp_startDate" displayDate="true" displayTime="true" label="{%= $.startTimeText %}"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                    \'<div dojoType="dijit.form.CheckBox" label="{%= $.timeLessText %}" id="{%= $.id %}_cb_Timeless" dojoAttachPoint="cb_Timeless" ></div>\',\r\n                    \'<label class="checkbox-label" for="cb_Timeless">{%= $.timeLessText %}</label>\',\r\n                \'</div>\',\r\n                 \'<div dojoType="Sage.UI.Controls.DurationSelect" shouldPublishMarkDirty="false" label="{%= $.durationText %}" id="{%= $.id %}_sel_Duration" dojoAttachPoint="sel_Duration" includeDisablingCheckbox="false" valuesAreAfterStart="true"></div>\',\r\n                \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                \'</div>\',\r\n            \'</div>\', //second tablecontainer 2 col\r\n\r\n            \'<div dojoType="dijit.layout.TabContainer" id="{%= $.id %}_tc_EditHistory"  dojoAttachPoint="tc_EditHistory" class="tab-container" doLayout="false">\',\r\n/*  General Tab   */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_General" title="{%= $.tabNameGeneralText %}" class="tabContent remove-padding" dojoAttachPoint="cp_General">\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="result_Section" class="bottom-border-section add-padding">\',\r\n                        \'<select label="{%= $.resultText %}" id="{%= $.id %}_tb_Result" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Result" canEditText="true" itemMustExist="false" maxLength="64"></select>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="4" labelWidth="70" baseClass="contact-lead-radios" >\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.contactText %}" value="contact" id="{%= $.id %}_rdo_Contact" dojoAttachPoint="rdo_Contact" dojoAttachEvent="onChange:_setContactLeadVisibility" checked="true" />\',\r\n                        \'<input dojoType="dijit.form.RadioButton" type="radio" name="contactOrLead" label="{%= $.leadText %}" value="lead" id="{%= $.id %}_rdo_Lead" dojoAttachPoint="rdo_Lead" />\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="contactContainer" baseClass="bottom-border-section">\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_ContactLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.opportunityText %}" dojoAttachPoint="container_OppLup" class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.accountText %}" dojoAttachPoint="container_AccountLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.ticketText %}" dojoAttachPoint="container_TicketLup"  class="remove-padding lookup-container"></div>\',\r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="leadContainer"  baseClass="bottom-border-section" class="display-none">\',\r\n                        \'<div dojoType="dijit.layout.ContentPane" label="{%= $.nameText %}" dojoAttachPoint="container_LeadLup"  class="remove-padding lookup-container"></div>\',\r\n                        \'<input dojoType="dijit.form.TextBox" id="{%= $.id %}_tb_LeadCompanyName" label="{%= $.companyText %}" dojoAttachPoint="tb_LeadCompanyName" readonly="true" />\',\r\n                    \'</div>\',                       \r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="2" labelWidth="{%= $.labelWidth %}"  class="bottom-border-section" dojoAttachPoint="categoryContainer">\',\r\n                        \'<select label="{%= $.categoryText %}" id="{%= $.id %}_pk_Category" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Category" canEditText="true" itemMustExist="false" maxLength="64"  style="width: {%= 472 - $.labelWidth %}px;" ></select>\', \r\n                         \'<div dojoType="dijit.layout.ContentPane" label="{%= $.leaderText %}" dojoAttachPoint="container_LeaderLup" class="remove-padding lookup-container" style="width: {%= 472 - $.labelWidth %}px;"></div>\',\r\n                         \'<select label="{%= $.priorityText %}" id="{%= $.id %}_pk_Priority" shouldPublishMarkDirty="false" dojoType="Sage.UI.Controls.SingleSelectPickList" dojoAttachPoint="pk_Priority" canEditText="true" itemMustExist="false" pickListName="Priorities" sort="false" maxLength="64" style="width: {%= 472 - $.labelWidth %}px;"></select>\',                          \r\n                    \'</div>\',\r\n                    \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}"  class="valigntop" dojoAttachPoint="notesContainer">\',\r\n                        \'<textarea dojoType="dijit.form.SimpleTextarea" id="{%= $.id %}_ta_Notes" label="{%= $.notesText %}" dojoAttachPoint="ta_Notes" class="notes-text" ></textarea>\',\r\n                    \'</div>\',\r\n                \'</div>\',  // end general tab\r\n\r\n              /* Attachments Tab  */\r\n                \'<div dojoType="dijit.layout.ContentPane" id="{%= $.id %}_cp_Attachments" title="{%= $.tabNameAttachmentsText %}" class="tabContent" dojoAttachPoint="cp_Attachments" dojoAttachEvent="onShow:_showAttachmentsTab">\',\r\n                    \'<div id="{%= $.id %}_attachmentsGridPlaceholder" dojoAttachPoint="_attachmentGridPlaceholder" style="width:100%;height:100%;" ></div>\',\r\n                \'</div>\',  //end attachments tab\r\n            \'</div>\', //end tab container\r\n            \'</div>\',\r\n            \'<table class="activity-dialog-followup">\',\r\n                \'<col width="50%" /><col width="50%" />\',\r\n                 \'<tr>\',\r\n                    \'<td class="alignleft">\',\r\n                        //followUp section\r\n                        \'<div dojoType="dojox.layout.TableContainer" orientation="horiz" cols="1" labelWidth="{%= $.labelWidth %}" dojoAttachPoint="followUp_Section" >\',\r\n                            \'<select label="{%= $.followupText %}" id="{%= $.id %}_followUpSelect" dojoType="dijit.form.ComboBox" dojoAttachPoint="sel_Followup">\',\r\n                                \'<option value="none" selected="selected">{%= $.noneText %}</option>\',\r\n                                \'<option value="atPhoneCall">{%= Sage.Utility.Activity.getActivityTypeName("atPhoneCall") %}</option>\',\r\n                                \'<option value="atAppointment">{%= Sage.Utility.Activity.getActivityTypeName("atAppointment") %}</option>\',\r\n                                \'<option value="atToDo">{%= Sage.Utility.Activity.getActivityTypeName("atToDo") %}</option>\',\r\n                            \'</select>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="{%= $.id %}_ck_coAttachments" dojoAttachPoint="ck_coAttachments" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coAttachments">{%= $.carryOverAttachmentsText %}</label>\',\r\n                            \'</div>\',\r\n                            \'<div dojoType="dijit.layout.ContentPane" label="" class="remove-padding">\',\r\n                                \'<div dojoType="dijit.form.CheckBox" label="" id="{%= $.id %}_ck_coNotes" dojoAttachPoint="ck_coNotes" ></div>\',\r\n                                \'<label class="checkbox-label" for="{%= $.id %}_ck_coNotes">{%= $.carryOverNotesText %}</label>\',\r\n                            \'</div>\',\r\n                        \'</div>\',//end followUp section\r\n                    \'</td>\',\r\n                    \'<td class="alignright valignbottom" rowspan="2" ojoAttachPoint="add_edit_buttons" >\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btnDelete" name="btn_Delete" dojoAttachPoint="btn_Delete" dojoAttachEvent="onClick:_deleteClick">{%= $.deleteText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_OK" name="btn_OK" dojoAttachPoint="btn_OK" dojoAttachEvent="onClick:_okClick">{%= $.okText %}</div>\',\r\n                        \'<div dojoType="dijit.form.Button" id="{%= $.id %}_btn_Cancel" name="btn_Cancel" dojoAttachPoint="btn_Cancel" dojoAttachEvent="onClick:_cancelClick">{%= $. cancelText %}</div>\',\r\n                    \'</td>\',\r\n                \'</tr>\',\r\n                \'<tr>\',\r\n                   \'<td class="alignleft">\',\r\n                      \'<div class="scheduled-by-label" dojoAttachPoint="lbl_ScheduledBy"></div>\',\r\n                   \'</td>\',\r\n                \'</tr>\',\r\n            \'</table>\',\r\n        \'</div>\', //body\r\n    \'</div>\',  //dialog\r\n\'</div>\' //root node\r\n]\r\n',
"url:Sage/MainView/EntityMgr/templates/EditEntityOptionsDlg.html":'<div>\r\n    <div dojotype="dijit.Dialog" title="" dojoattachpoint="_dialog" dojoattachevent="onHide:_onDlgHide" style="width:60%;">\r\n        <div class="recur-activity-dialog">\r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblName">\r\n                                Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                            <input disabled data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="Name" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                Display Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                            <input data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="DisplayName" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblPluralName">\r\n                                Display Plural Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="displayName">\r\n                            <input data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required: true" data-dojo-attach-point="PluralName" style="" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="" class="lbl alignright">\r\n                            <label data-dojo-attach-point="lblTitle">Title (String Expression)</label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="viewTitle"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="" class="lbl alignright">\r\n                            <label data-dojo-attach-point="lblExtension" for="IsExtension">Is Extension</label>\r\n                            <input type="checkbox" data-dojo-attach-point="IsExtension"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="entityDP">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblHistory">\r\n                                Track History To\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="filterName">\r\n                            <input disabled data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="History" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="width:248px;" class="lbl alignright">\r\n                            <label data-dojo-attach-point="lblAdvancedOptions" for="">Advanced Options</label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="BulkUpdateVal" style="padding-top:4px; outline:1px solid #999999">\r\n                            <label data-dojo-attach-point="lblImport" style="display:inline-block; width: 100px; text-align:right;">Import</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanImport"\r\n                                   data-dojo-type="dijit/form/CheckBox"/>\r\n                            <label data-dojo-attach-point="lblCanPut" style="display:inline-block; width: 100px; text-align:right;">Put</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanPut"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                            <br />\r\n                            <label data-dojo-attach-point="lblMatch" style="display:inline-block; width: 100px; text-align:right;" for="">Match</label>\r\n                            <input style="margin-top: 4px;" type="checkbox" data-dojo-attach-point="CanMatch"\r\n                                   data-dojo-type="dijit/form/CheckBox"/>\r\n                            <label data-dojo-attach-point="lblCanPost" style="display:inline-block; width: 100px; text-align:right;">Post</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanPost"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                            <br />\r\n                            <label data-dojo-attach-point="lblBulkUpdate" style="display:inline-block; width: 100px; text-align:right;" for="">Bulk Update</label>\r\n                            <input style="margin-top: 4px;" type="checkbox" data-dojo-attach-point="BulkUpdate"\r\n                                   data-dojo-type="dijit/form/CheckBox"/>\r\n                            <label data-dojo-attach-point="lblCanDelete" style="display:inline-block; width: 100px; text-align:right;">Delete</label>\r\n                            <input type="checkbox" data-dojo-attach-point="CanDelete"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                            <br />\r\n                            <label data-dojo-attach-point="lblAudited" style="display:inline-block; width: 100px; text-align:right;" for="Audited">Audited</label>\r\n                            <input style="margin-top:4px;" type="checkbox" data-dojo-attach-point="Audited"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div class="button-bar alignright">\r\n                <div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_OK" name="btn_OK" dojoattachpoint="btn_OK" dojoattachevent="onClick:_okClick">OK</div>\r\n                <div data-dojo-type="dijit.form.Button" id="{%= $.id%}_btn_Cancel" name="btn_Cancel" dojoattachpoint="btn_Cancel" dojoattachevent="onClick:_cancelClick">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/DistinctDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer formtable HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_filterDetailsSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblEntityFiltersDetailsContains\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld dijitInline\" data-dojo-attach-point=\"txtEntityFiltersDetailsContains\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n ]","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/RangeDetailsView.html":"[\r\n'<div>',\r\n     '<div data-dojo-attach-point=\"characterContainer\" >',\r\n     '</div>',\t\r\n     '<table  class=\"detailTableContainer HundredPercentWidth\">',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label  data-dojo-attach-point=\"rangeGridLabel\">',\r\n                    '</label>',\r\n                '</div>',\r\n                 '<div class=\"fld  dijitInline\">&nbsp</div>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright dijitInline\">&nbsp</div>',\r\n                '<div class=\"fld dijitInline\" data-dojo-attach-point=\"rangegridwhole\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/AMDDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer  formtable HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_filterDetailsSection\">',\r\n            '<td  class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                        '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblEntityFiltersDetailsAggregation\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld  dijitInline\" data-dojo-attach-point=\"dpEntityFiltersDetailsAggregation\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]","url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/ADDMDDetailsView.html":"[\r\n'<div>',    \r\n    '<div data-dojo-attach-point=\"aggregate\">',\r\n    '</div>',\t\t\r\n    '<table class=\"detailTableContainer HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_MetricsFromSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n    \t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblMetricRangeFrom\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                 '<div data-dojo-attach-point=\"fieldsContainerFrom\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr data-dojo-attach-point=\"_MetricsToSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblMetricRangeTo\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                 '<div data-dojo-attach-point=\"fieldsContainerTo\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/UI/Controls/templates/PropertyDropDown.html":'[\r\n\'<div class="fld propertyDiv dijitInline">\',\r\n    \'<input data-dojo-type="dijit.form.ValidationTextBox" dojoattachpoint="entitySelected"/>\',\r\n    \'<div data-dojo-type="dijit.form.Button" iconclass="myIcon" dojoattachevent="onClick:showDDTree" class="transparentDropDown" dojoattachpoint="transparentDropDown" />\',\r\n\'</div>\'\r\n]',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/UserLookupDetailsView.html":"[\r\n'<div>',\r\n    '<table  class=\"detailTableContainer HundredPercentWidth\">',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label  data-dojo-attach-point=\"lookupGridLabel\">',\r\n                    '</label>',\r\n                '</div>',\r\n                 '<div class=\"fld  dijitInline\">&nbsp</div>',\r\n            '</td>',\r\n\r\n       '</tr>',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright dijitInline\">&nbsp</div>',\r\n                '<div class=\"fld dijitInline rangegridwhole\" data-dojo-attach-point=\"rangegridwhole\"></div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/EntityWizard/templates/SelectEntityType.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;">\r\n            <div>\r\n                <label style="font-size:16px; font-weight:bold;">Welcome to the New Entity Wizard</label>\r\n                <p>This Wizard takes you through the steps for creating a new entity.</p>\r\n\r\n                <div style="margin-top:40px;margin-left:40px;">\r\n                    <input data-dojo-type="dijit/form/RadioButton" name="EntityType" value="existing" /> <label style="font-weight:bold;">Create a business entity from an existing table</label> <br />\r\n                    <ul>\r\n                        <li><p>The schema can be modified using the Saleslogix DB Manager within the legacy Architect or Administrator</p></li>\r\n                    </ul>\r\n                </div>\r\n                <div style="margin-top:20px;margin-left:40px;">\r\n                    <input data-dojo-type="dijit/form/RadioButton" checked name="EntityType" value="New" /> <label style="font-weight:bold;">Create a business entity and a new table</label> <br />\r\n                    <ul>\r\n                        <li><p>The table will automatically be created based on the definition of the entity</p></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityDetails.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblCreateEntity">Create Entity</label>\r\n                <p><label data-dojo-attach-point="lblCreateEntityFromTable">Create a new entity from a table</label></p>\r\n                <hr />\r\n            </div>\r\n            \r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_displayNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblDisplayName">\r\n                                Display Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="displayName">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblEntityName">\r\n                                Entity Name\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline" data-dojo-attach-point="Name">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_filterNameSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div class="lbl alignright">\r\n                            <label style="line-height:32px !important;">\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld  dijitInline"  data-dojo-attach-point="" style="color:red">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="divValidationMessage">\r\n                            </label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                \x3c!--<div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">Back</div>--\x3e\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/EntityWizard/templates/Relationship.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="padding-bottom:30px;">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblRelationship">Primary Relationship</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblSelectEntity">Choose wheather this entity has a primary relationship to another entity</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table class="detailTableContainer formtable HundredPercentWidth">\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblExistingEntity">\r\n                                Relate to an existing Entity\r\n                            </label>\r\n                        </div>\r\n                        <div style="padding-top:6px;">\r\n                            <input type="checkbox" data-dojo-attach-point="IsExtension"\r\n                                   data-dojo-type="dijit/form/CheckBox" />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelatedEntity">\r\n                                Related Entity\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typePkg"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point="_TypeDropDownSection">\r\n                    <td class="FManagerDialogFieldLabel">\r\n                        <div style="padding:0 !important;" class="lbl alignright">\r\n                            <label style="line-height:32px !important;" data-dojo-attach-point="lblRelationType">\r\n                                Relation Type\r\n                            </label>\r\n                        </div>\r\n                        <div class="fld dijitInline" data-dojo-attach-point="typeRel"></div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <br />\r\n            <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n                <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n            </div>\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/EntityWizard/templates/EntityProperties.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div style="padding-bottom:30px;">\r\n            <label style="font-weight:bold;" data-dojo-attach-point="lblEnterProperties">Enter Fields</label>\r\n            <p><label data-dojo-attach-point="lblAddNewProperty">Click the add(+) button to add new fields to the entity</label></p>\r\n            <hr />\r\n        </div>\r\n        <div data-dojo-type="dijit.form.Form"  style="height:400px !important;" class="mainContentContent DialogMainForm">\r\n            <div style="width:100%;" class="fld dijitInline" data-dojo-attach-point="placeGrid"></div>\r\n        </div>\r\n        <div data-dojo-attach-point="divValidationMessage" style="color:red">\r\n            <span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\r\n        </div>\r\n        <div class="lookupButtonWrapper">\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n            <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n        </div>\r\n    </div>\r\n</div>',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/AddEditPropertiesDialog.html":'[\r\n\'<div>\',\r\n\t\'<div data-dojo-type="dijit.Dialog" class="OverrideDialogOverflowToHidden FullPageDialogue" data-dojo-attach-point="_dialog">\',\r\n        \'<div data-dojo-type="dijit.form.Form" data-dojo-attach-point="addEditFiltersForm" class="FManagerDialogForm" >\',\r\n            \'<div class="mainContentContent DialogMainForm">\',                 \r\n                \'<div data-dojo-attach-point="_DisplayName"></div>\',\r\n                \'<table data-dojo-attach-point="_DynamicSection" style="overflow-y:auto!important;" class="detailTableContainer formtable HundredPercentWidth">\',\r\n                \'</table>\',\r\n                \'<div data-dojo-attach-point="_DetailsSection"></div>\',\r\n            \'</div>\',\r\n            \'<div>\',\r\n                \'<div data-dojo-attach-point="divValidationMessage" class="errorText">\',\r\n                     \'<span data-dojo-attach-point="spanValidationMessage">&nbsp;</span>\',\r\n                 \'</div>\',\r\n                \'<div class="lookupButtonWrapper">\',                    \r\n                    \'<span data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdSave" data-dojo-attach-event="onClick:_cmdSave_OnClick"></span>\',\r\n                    \'<span data-dojo-type="dijit.form.Button" data-dojo-attach-point="cmdCancel" data-dojo-attach-event="onClick:_cmdCancel_OnClick"></span>\',\r\n                \'</div>\',\r\n            \'</div>\',\r\n        \'</div>\',\r\n\t\'</div>\',\r\n\'</div>\'\r\n ]',"url:Sage/MainView/EntityMgr/AddEditEntityDetail/templates/DisplayName.html":"\r\n[\r\n'<div>',\r\n    '<table class=\"detailTableContainer formtable HundredPercentWidth\">',\r\n        '<tr data-dojo-attach-point=\"_DisplaySection\">',\r\n\t\t    '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblDisplayName\"/>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"fld dijitInline\" data-dojo-attach-point=\"displayNameTxtCntrl\"></div>',\r\n            '</td>',\r\n\t    '</tr>',\r\n        '<tr data-dojo-attach-point=\"_TriggerSection\">',\r\n\t\t    '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblTriggerName\"></label>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"fld dijitInline\" data-dojo-attach-point=\"triggerCntrl\">',\r\n                    '<a data-dojo-attach-point=\"triggerCntrlLink\"></a>',\r\n                '</div>',\r\n            '</td>',\r\n\t    '</tr>',\r\n        '<tr data-dojo-attach-point=\"_LineSection\">',\r\n\t\t    '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright\">',\r\n                    '<label style=\"line-height:32px !important;\" data-dojo-attach-point=\"lblName\"/>',\r\n\t\t\t\t '</div>',\r\n\t\t\t     '<div class=\"fld  dijitInline\" data-dojo-attach-point=\"NameCntrl\"/>',\r\n\t\t    '</td>',\r\n\t    '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]","url:Sage/MainView/EntityMgr/EntityWizard/templates/AddEditEntity.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n            <div style="">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblSure">Are you sure ?</label>\r\n                <p>\r\n                    <label data-dojo-attach-point="lblThisStepCreateEntity">Completing this step will create the entities and necessary schema</label>\r\n                </p>\r\n                <hr />\r\n            </div>\r\n\r\n            <table style="padding-left:20px; padding-top:20px;">\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold; text-align: right;" data-dojo-attach-point="lblEntity">Entity : </label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="createEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="vertical-align:top; padding-top:15px;text-align: right;">\r\n                        <span><label style="font-weight:bold;" data-dojo-attach-point="lblProperties">Properties : </label></span>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <ul class="properties" style="padding-left:0;"></ul>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelatedEntity"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relatedEntity"></label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="text-align: right;">\r\n                        <label style="font-weight:bold;" data-dojo-attach-point="lblRelationType"></label>\r\n                    </td>\r\n                    <td style="padding-left: 10px;">\r\n                        <label data-dojo-attach-point="relationType"></label>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnBack" data-dojo-attach-event="onClick:_btnBack_OnClick">< Back</div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnNext" data-dojo-attach-event="onClick:_btnNext_OnClick">Next ></div>\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnCancel" data-dojo-attach-event="onClick:_btnCancel_OnClick" style="margin-left:5px;">Cancel</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',
"url:Sage/MainView/EntityMgr/EntityWizard/templates/Status.html":'<div>\r\n    <div data-dojo-type="dijit.Dialog" title="New Entity Wizard" data-dojo-attach-point="_dialog" data-dojo-attach-event="onCancel:_btnCancel_OnClick" style="position:absolute;width: 625px;height:625px;">\r\n        <div data-dojo-type="dijit.form.Form" style="height:600px !important;" dojoattachpoint="Form">\r\n\r\n            <div style="">\r\n                <label style="font-weight:bold;" data-dojo-attach-point="lblCreateEntity">Create Entity</label>\r\n                <p><label data-dojo-attach-point="lblStatus">Status</label></p>\r\n                <hr />\r\n            </div>\r\n\r\n            <div style="padding-bottom: 30px;">\r\n                <p><label data-dojo-attach-point="statusLabel" style="font-weight: bold;"></label>\r\n                </p>\r\n                <p>\r\n                    <label data-dojo-attach-point="selectedRelStatus" style="font-weight: bold;"></label>\r\n                </p>\r\n                <p>\r\n                    <label data-dojo-attach-point="ownerStatus" style="font-weight: bold;"></label>\r\n                </p>\r\n            </div>\r\n\r\n\r\n            <div align="right" style="position:absolute;bottom:30px;width:90%;">\r\n                <div data-dojo-type="dijit.form.Button" data-dojo-attach-point="btnFinish" data-dojo-attach-event="onClick:_btnFinish_OnClick" style="margin-left:5px;">Finish</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"*now":function(a){a(['dojo/i18n!*preload*Sage/nls/Dialog*["ar","ca","cs","da","de-de","el","en-au","en-ca","en-gb","en-us","es-es","fi","fr-ch","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh","zh-cn","zh-hant","zh-hans","zh-hk","zh-tw","af-za","sq-al","gsw-fr","am-et","ar-dz","ar-bh","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ae","ar-ye","hy-am","as-in","az-cyrl-az","az-latn-az","bn-bd","bn-in","ba-ru","eu-es","be-by","bs-cyrl-ba","bs-latn-ba","br-fr","bg-bg","ca-es","zh-cn","zh-sg","zh-hk","zh-mo","zh-tw","co-fr","crm-en-us-de-ch","hr-hr","hr-ba","cs-cz","da-dk","prs-af","dv-mv","nl-be","nl-nl","en-au","en-bz","en-ca","en-029","en-in","en-ie","en-jm","en-my","en-nz","en-ph","en-sg","en-za","en-tt","en-gb","en-us","en-fr","en-kz","en-kg","en-mx","en-ch","en-ye","en-zw","et-ee","fo-fo","fil-ph","fi-fi","fr-be","fr-ca","fr-fr","fr-lu","fr-mc","fr-ch","fy-nl","gl-es","ka-ge","de-at","de-de","de-li","de-lu","de-ch","el-gr","kl-gl","gu-in","ha-latn-ng","he-il","hi-in","hu-hu","is-is","ig-ng","id-id","iu-latn-ca","iu-cans-ca","ga-ie","xh-za","zu-za","it-it","it-ch","ja-jp","kn-in","kk-kz","km-kh","qut-gt","rw-rw","sw-ke","kok-in","ko-kr","ky-kg","lo-la","lv-lv","lt-lt","dsb-de","lb-lu","mk-mk","ms-bn","ms-my","ml-in","mt-mt","mi-nz","arn-cl","mr-in","moh-ca","mn-mn","mn-mong-cn","ne-np","nb-no","nn-no","oc-fr","or-in","ps-af","fa-ir","pl-pl","pt-br","pt-pt","pa-in","quz-bo","quz-ec","quz-pe","ro-ro","rm-ch","ru-ru","sah-ru","smn-fi","smj-no","smj-se","se-fi","se-no","se-se","sms-fi","sma-no","sma-se","sa-in","gd-gb","sr-cyrl-ba","sr-cyrl-me","sr-cyrl-cs","sr-cyrl-rs","sr-latn-ba","sr-latn-me","sr-latn-cs","sr-latn-rs","nso-za","tn-za","si-lk","sk-sk","sl-si","es-ar","es-ve","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-sv","es-gt","es-hn","es-mx","es-ni","es-pa","es-py","es-pe","es-pr","es-es","es-us","es-uy","sv-fi","sv-se","syr-sy","tg-cyrl-tj","tzm-latn-dz","ta-in","tt-ru","te-in","th-th","bo-cn","tr-tr","tk-tm","uk-ua","hsb-de","ur-pk","ug-cn","uz-cyrl-uz","uz-latn-uz","vi-vn","cy-gb","wo-sn","ii-cn","yo-ng","ROOT"]'])}}}),define("Sage/Dialog",[],1),window.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},window.parseUri=function(a){for(var b=window.parseUri.options,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d},window.parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},window.Sage=function(){var a=function(a,b,c){if(a&&c)for(var d in c)a[d]=c[d];if(a&&b)for(var d in b)a[d]=b[d];return a},b=function(a,b){for(var c=a.split("."),d=b||("Sage"!==c[0]?this:window),e=0;e<c.length;e++)d=d[c[e]]=d[c[e]]||{__namespace:!0};return d},c=function(a,b,c){if(d(a))for(var e=a.length,f=0;f<e;f++)b.call(c||a[f],f,a[f]);else for(var g in a)a.hasOwnProperty(g)&&b.call(c||a[g],g,a[g])},d=function(a){return"[object Array]"==Object.prototype.toString.call(a)};return{config:{win:window||{},doc:document},apply:a,namespace:b,each:c,isArray:d,__namespace:!0}}(),window.Sage&&function(a){var b=!1,c=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/;a.Class=function(){},a.Class.define=function a(d){function e(){!b&&this.constructor&&this.constructor.apply(this,arguments)}var f=this.prototype;b=!0;var g=new this;b=!1;var h,i=function(a,b){return function(){var c=this.base;this.base=f[a];var d=b.apply(this,arguments);return this.base=c,d}},j=["constructor"],k=0;for(h in d)g[h]="function"==typeof d[h]&&"function"==typeof f[h]&&c.test(d[h])?i(h,d[h]):d[h];for(;h=j[k++];)d[h]!=f[h]&&(g[h]="function"==typeof d[h]&&"function"==typeof f[h]&&c.test(d[h])?i(h,d[h]):d[h]);return e.prototype=g,e.constructor=e,e.define=a,e.extend=e.define,e}}(window.Sage),window.Sage&&function(a){a.namespace("Utility"),a.Utility.Deferred=function(a,b,c){var d,e=this,f=function(){clearInterval(d),d=null,a.apply(c,b||[])};e.delay=function(a){e.cancel(),d=setInterval(f,a)},e.cancel=function(){d&&(clearInterval(d),d=null)}}}(window.Sage),window.Sage&&function(a){var b=Array.prototype.slice,c=!0,d=!1,e=a.config.win,f=function(a,c,d){return function(){c.target===arguments[0]&&a.apply(d,b.call(arguments,0))}},g=function(c,d,e,f){return e.task=new a.Utility.Deferred,function(){e.task.delay(d.buffer,c,f,b.call(arguments,0))}},h=function(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}},i=function(c,d,e,f){return function(){var g=new a.Utility.Deferred;e.tasks||(e.tasks=[]),e.tasks.push(g),g.delay(d.delay||10,c,f,b.call(arguments,0))}};a.namespace("Utility"),a.Utility.Event=Sage.Class.define({constructor:function(a,b){this.name=b,this.obj=a,this.listeners=[]},addListener:function(a,b,c){var d,e=this;b=b||e.obj,e.isListening(a,b)||(d=e.createListener(a,b,c),e.firing&&(e.listeners=e.listeners.slice(0)),e.listeners.push(d))},createListener:function(a,b,c){c=c||{},b=b||this.obj;var d={fn:a,scope:b,options:c},e=a;return c.target&&(e=f(e,c,b)),c.delay&&(e=i(e,c,d,b)),c.single&&(e=h(e,this,a,b)),c.buffer&&(e=g(e,c,d,b)),d.fireFn=e,d},findListener:function(a,b){var c,d=this.listeners,e=d.length;for(b=b||this.obj;e--;)if((c=d[e])&&c.fn===a&&c.scope===b)return e;return-1},isListening:function(a,b){return-1!==this.findListener(a,b)},removeListener:function(a,b){var e,f,g,h=this,i=d;if(-1!==(e=h.findListener(a,b))){if(h.firing&&(h.listeners=h.listeners.slice(0)),f=h.listeners[e],f.task&&(f.task.cancel(),delete f.task),g=f.tasks&&f.tasks.length){for(;g--;)f.tasks[g].cancel();delete f.tasks}h.listeners.splice(e,1),i=c}return i},clearListeners:function(){for(var a=this,b=a.listeners,c=b.length;c--;)a.removeListener(b[c].fn,b[c].scope)},fire:function(){var a,f,g=this,h=g.listeners,i=h.length,j=0;if(i>0)for(g.firing=c,f=b.call(arguments,0);j<i;j++)if((a=h[j])&&a.fireFn.apply(a.scope||g.obj||e,f)===d)return g.firing=d;return g.firing=d,c}})}(window.Sage),window.Sage&&function(a){var b=Array.prototype.slice,c=!0,d=!1,e=/^(?:scope|delay|buffer|single)$/,f=a.each;a.Evented=a.Class.define({constructor:function(a){var b=this,c=b.events;a&&a.listeners&&b.addListener(a.listeners),b.events=c||{}},fireEvent:function(){var a,e,f=this,g=b.call(arguments,0),h=g[0].toLowerCase(),i=c,j=this.events[h],k=f.eventQueue||[];if(f.eventsSuspended===c&&k.push(g),"object"==typeof j)if(j.bubble){if(j.fire.apply(j,g.slice(1))===d)return d;if((a=f.getBubbleTarget&&f.getBubbleTarget())&&a.enableBubble)return e=a.events[h],e&&"object"==typeof e&&e.bubble||a.enableBubble(h),a.fireEvent.apply(a,g)}else g.shift(),i=j.fire.apply(j,g);return i},addListener:function(b,d,f,g){var h,i,j,k=this;if("object"==typeof b){g=b;for(h in g)i=g[h],e.test(h)||k.addListener(h,i.fn||i,i.scope||g.scope,i.fn?i:g)}else b=b.toLowerCase(),j=k.events[b]||c,"boolean"==typeof j&&(k.events[b]=j=new a.Utility.Event(k,b)),j.addListener(d,f,"object"==typeof g?g:{})},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];"object"==typeof d&&d.removeListener(b,c)},purgeListeners:function(){var a,b,c=this.events;for(b in c)"object"==typeof(a=c[b])&&a.clearListeners()},addEvents:function(a){var b,d,e=this;if(e.events=e.events||{},"string"==typeof a)for(b=arguments,d=b.length;d--;)e.events[b[d]]=e.events[b[d]]||c;else Sage.apply(e.events,a)},hasListener:function(a){var b=this.events[a.toLowerCase()];return"object"==typeof b&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=c,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue||[];a.eventsSuspended=d,delete a.eventQueue,f(b,function(b){a.fireEvent.apply(a,b)})}}),a.Evented.prototype.on=a.Evented.prototype.addListener,a.Evented.prototype.un=a.Evented.prototype.removeListener}(window.Sage),window.Sage=window.Sage||{},window.Sage.__namespace=!0,Sage.apply=function(a,b,c){var d,e;if(a&&c)for(d in c)a[d]=c[d];if(a&&b)for(e in b)a[e]=b[e];return a},Sage.count=1,Sage.guid=function(a){return this.stringBuild(a,this.count++)},Sage.stringBuild=function(){return Array.prototype.slice.call(arguments,0).join("")},Sage.ns=Sage.namespace=function(a){if(!a||!a.length)return null;for(var b=a.split("."),c=Sage,d="Sage"==b[0]?1:0;d<b.length;++d)c[b[d]]=c[b[d]]||{},c=c[b[d]];return c},Sage.createNamespace=function(a){if(!a||!a.length)return null;var b=a.split(".");window[b[0]]=window[b[0]]||{};for(var c=window[b[0]],d=1;d<b.length;++d)c[b[d]]=c[b[d]]||{},c=c[b[d]];return c},Sage.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)},function(a){var b=!1,c=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/;a.Class=function(){},a.Class.define=function(a){function d(){!b&&this.constructor&&this.constructor.apply(this,arguments)}var e=this.prototype;b=!0;var f=new this;b=!1;var g,h=function(a,b){return function(){var c=this.base;this.base=e[a];var d=b.apply(this,arguments);return this.base=c,d}},i=["constructor"],j=0;for(g in a)f[g]="function"==typeof a[g]&&"function"==typeof e[g]&&c.test(a[g])?h(g,a[g]):a[g];for(;g=i[j++];)a[g]!=e[g]&&(f[g]="function"==typeof a[g]&&"function"==typeof e[g]&&c.test(a[g])?h(g,a[g]):a[g]);return d.prototype=f,d.constructor=d,d.define=arguments.callee,d.extend=d.define,d};var d=Array.prototype.slice,e=!0,f=!1,g=window,h=/^(?:scope|delay|buffer|single)$/,i=a.each;TARGETED=function(a,b,c){return function(){b.target===arguments[0]&&a.apply(c,d.call(arguments,0))}},BUFFERED=function(b,c,e,f){return e.task=new a.Utility.Deferred,function(){e.task.delay(c.buffer,b,f,d.call(arguments,0))}},SINGLE=function(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}},DELAYED=function(b,c,e,f){return function(){var g=new a.Utility.Deferred;e.tasks||(e.tasks=[]),e.tasks.push(g),g.delay(c.delay||10,b,f,d.call(arguments,0))}},a.namespace("Utility"),a.Utility.Event=Sage.Class.define({constructor:function(a,b){this.name=b,this.obj=a,this.listeners=[]},addListener:function(a,b,c){var d,e=this;b=b||e.obj,e.isListening(a,b)||(d=e.createListener(a,b,c),e.firing&&(e.listeners=e.listeners.slice(0)),e.listeners.push(d))},createListener:function(a,b,c){c=c||{},b=b||this.obj;var d={fn:a,scope:b,options:c},e=a;return c.target&&(e=TARGETED(e,c,b)),c.delay&&(e=DELAYED(e,c,d,b)),c.single&&(e=SINGLE(e,this,a,b)),c.buffer&&(e=BUFFERED(e,c,d,b)),d.fireFn=e,d},findListener:function(a,b){var c,d=this.listeners,e=d.length;for(b=b||this.obj;e--;)if((c=d[e])&&c.fn===a&&c.scope===b)return e;return-1},isListening:function(a,b){return-1!==this.findListener(a,b)},removeListener:function(a,b){var c,d,g,h=this,i=f;if(-1!==(c=h.findListener(a,b))){if(h.firing&&(h.listeners=h.listeners.slice(0)),d=h.listeners[c],d.task&&(d.task.cancel(),delete d.task),g=d.tasks&&d.tasks.length){for(;g--;)d.tasks[g].cancel();delete d.tasks}h.listeners.splice(c,1),i=e}return i},clearListeners:function(){for(var a=this,b=a.listeners,c=b.length;c--;)a.removeListener(b[c].fn,b[c].scope)},fire:function(){var a,b,c=this,h=c.listeners,i=h.length,j=0;if(i>0)for(c.firing=e,b=d.call(arguments,0);j<i;j++)if((a=h[j])&&a.fireFn.apply(a.scope||c.obj||g,b)===f)return c.firing=f;return c.firing=f,e}}),a.Evented=a.Class.define({constructor:function(a){var b=this,c=b.events;a&&a.listeners&&b.addListener(a.listeners),b.events=c||{}},fireEvent:function(){var a,b,c=this,g=d.call(arguments,0),h=g[0].toLowerCase(),i=e,j=this.events[h],k=c.eventQueue||[];if(c.eventsSuspended===e&&k.push(g),"object"==typeof j)if(j.bubble){if(j.fire.apply(j,g.slice(1))===f)return f;if((a=c.getBubbleTarget&&c.getBubbleTarget())&&a.enableBubble)return b=a.events[h],b&&"object"==typeof b&&b.bubble||a.enableBubble(h),a.fireEvent.apply(a,g)}else g.shift(),i=j.fire.apply(j,g);return i},addListener:function(b,c,d,f){var g,i,j,k=this;if("object"==typeof b){f=b;for(g in f)i=f[g],h.test(g)||k.addListener(g,i.fn||i,i.scope||f.scope,i.fn?i:f)}else b=b.toLowerCase(),j=k.events[b]||e,"boolean"==typeof j&&(k.events[b]=j=new a.Utility.Event(k,b)),j.addListener(c,d,"object"==typeof f?f:{})},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];"object"==typeof d&&d.removeListener(b,c)},purgeListeners:function(){var a,b,c=this.events;for(b in c)"object"==typeof(a=c[b])&&a.clearListeners()},addEvents:function(a){var b,c,d=this;if(d.events=d.events||{},"string"==typeof a)for(b=arguments,c=b.length;c--;)d.events[b[c]]=d.events[b[c]]||e;else Sage.apply(d.events,a)},hasListener:function(a){var b=this.events[a.toLowerCase()];return"object"==typeof b&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=e,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue||[];a.eventsSuspended=f,delete a.eventQueue,i(b,function(b){a.fireEvent.apply(a,b)})}}),a.Evented.prototype.on=a.Evented.prototype.addListener,a.Evented.prototype.un=a.Evented.prototype.removeListener,a.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}}(Sage),Sage.ServiceContainer=function(){this._services=[]},Sage.ServiceContainer.prototype={addService:function(a,b){if(a&&b){if(this.hasService(a))throw"Service already exists: "+a;var c={};return c.key=a,c.service=b,this._services.push(c),b}return!1},removeService:function(a){for(var b=0;b<this._services.length;b++)this._services[b].key===a&&this._services.splice(b,1)},getService:function(a){if(a)for(var b=0;b<this._services.length;b++)if(this._services[b].key===a)return this._services[b].service;return null},hasService:function(a){if(a)for(var b=0;b<this._services.length;b++)if(this._services[b].key===a)return!0;return!1}},Sage.Services=new Sage.ServiceContainer,document.onkeypress=function(a){a=a||(event||null);var b=a.target?a.target:a.srcElement?a.srcElement:null;return 13!==a.keyCode||"text"!==b.type},require(["dojo/dom"],function(a){Sage.ContentPane=function(b,c,d){this.contentArea=c,this.toggleButton=b,this.state="open",this.minText=d.minText,this.maxText=d.maxText,this.minClass=d.minClass,this.maxClass=d.maxClass,this.baseClass="Global_Images icon16x16";var e=a.byId(b);if(e){var f=Sage.Services.getService("ObjectConnectionService");if(f.disconnect(b),f.add(dojo.connect(e,"onclick",this,function(){this.toggle(),dojo.publish(["Sage/events/mainContentDetails/toggleSplitter"].join(""),this)},!0),b),dojo.subscribe(["Sage/events/mainContentDetails/splitterToggled"].join(""),this,"toggle"),dojo.subscribe(["Sage/events/mainContentDetails/splitterMinSize"].join(""),this,function(){this.setState("closed");var a=document.getElementById(this.toggleButton);a&&(a.className=this.baseClass+" "+this.maxClass,a.title=this.maxText)}),dojo.subscribe(["Sage/events/mainContentDetails/splitterMovedNotMin"].join(""),this,function(){this.setState("open");var a=document.getElementById(this.toggleButton);a&&(a.className=this.baseClass+" "+this.minClass,a.title=this.minText)}),dojo.style(b,"cursor","pointer"),"undefined"!=typeof cookie){var g=cookie.getCookieParm(this.contentArea,"MainContentState");g&&"closed"==g&&this.close()}}},Sage.ContentPane.prototype.setState=function(a){this.state=a,"undefined"!=typeof cookie&&cookie.setCookieParm(this.state,this.contentArea,"MainContentState")},Sage.ContentPane.prototype.toggle=function(){"open"==this.state?this.close():this.open(),setTimeout(function(){var a=dijit.byId("tabContent");a&&a.resize()},1)},Sage.ContentPane.prototype.close=function(){var a=dijit.byId("mainContentDetails");a&&a.splitter||dojo.style(this.contentArea+"_inner","display","none"),this.setState("closed");var b=document.getElementById(this.toggleButton);b&&(b.className=this.baseClass+" "+this.maxClass,b.title=this.maxText)},Sage.ContentPane.prototype.open=function(){var a=dijit.byId("mainContentDetails");a&&a.splitter||dojo.style(this.contentArea+"_inner","display","block"),this.setState("open");var b=document.getElementById(this.toggleButton);b&&(b.className=this.baseClass+" "+this.minClass,b.title=this.minText)},Sage.ContentPaneAttr=function(){this.minText="",this.maxText="",this.minClass="",this.maxClass=""}}),Sage.ObjectConnectionService=function(){this.objectConnections={},this.add=function(a,b){this.objectConnections[b]=a},this.remove=function(a){delete this.objectConnections[a]},this.disconnect=function(a){dojo.disconnect(this.objectConnections[a])},this.disconnectAll=function(){for(var a in this.objectConnections)dojo.disconnect(this.objectConnections[a])},this.removeAll=function(){for(var a in this.objectConnections)delete this.objectConnections[a]}},Sage.Services.addService("ObjectConnectionService",new Sage.ObjectConnectionService);var XML=window.XML;void 0===XML&&(XML=function(){}),XML.ObjTree=function(){return this},XML.ObjTree.VERSION="0.10",XML.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',XML.ObjTree.prototype.attr_prefix="-",XML.ObjTree.prototype.overrideMimeType="text/xml",XML.ObjTree.prototype.parseXML=function(a){return{}},XML.ObjTree.prototype.parseHTTP=function(a,b,c){},XML.ObjTree.prototype.parseDOM=function(a){},XML.ObjTree.prototype.parseElement=function(a){},XML.ObjTree.prototype.addNode=function(a,b,c,d){},XML.ObjTree.prototype.writeXML=function(a){return{}},XML.ObjTree.prototype.hash_to_xml=function(a,b){},XML.ObjTree.prototype.array_to_xml=function(a,b){},XML.ObjTree.prototype.scalar_to_xml=function(a,b){},XML.ObjTree.prototype.xml_escape=function(a){},function(){var a=window.Sage,b=a,c=(a.namespace("Sage.SData.Client.Ajax"),function(a){return a>=200&&a<300||304===a}),d=function(a,b){if(4==a.readyState)if(c(a.status))b.success&&b.success.call(b.scope||this,a,b);else if(0===a.status){var d=!1;try{d=""===a.statusText}catch(a){d=!0}if(d){var e=b.aborted||b.failure;e&&e.call(b.scope||this,a,b)}else b.failure&&b.failure.call(b.scope||this,a,b)}else b.failure&&b.failure.call(b.scope||this,a,b)},e=function(a,b){var c=b.timeout||b.failure;c&&c.call(b.scope||this,a,b)},f=function(a,b){a.ontimeout=function(){e.call(a,a,b)}},g=function(a,b){a.onreadystatechange=function(){d.call(a,a,b)}},h=function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};a.apply(a.SData.Client.Ajax,{request:function(a){a=b.apply({},a),a.params=b.apply({},a.params),a.headers=b.apply({},a.headers),!0!==a.cache&&(a.params[a.cacheParam||"_t"]=(new Date).getTime()),a.method=a.method||"GET";var c=h(a.params);c&&(a.url=a.url+(/\?/.test(a.url)?"&":"?")+c);var e=new XMLHttpRequest;a.user?e.open(a.method,a.url,!1!==a.async,a.user,a.password):e.open(a.method,a.url,!1!==a.async),a.withCredentials&&(e.withCredentials=!0);try{e.setRequestHeader("Accept",a.accept||"*/*"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.contentType&&e.setRequestHeader("Content-Type",a.contentType);for(var i in a.headers)e.setRequestHeader(i,a.headers[i]);var j=a.etagCache;a.cache&&j&&j.etag&&e.setRequestHeader("If-None-Match",j.etag)}catch(a){}return!1!==a.async?("number"==typeof a.requestTimeout&&a.requestTimeout>=0&&"number"==typeof e.timeout&&(e.timeout=a.requestTimeout,f(e,a)),g(e,a),e.send(a.body||null)):(e.send(a.body||null),d(e,a)),e},cancel:function(a){a.abort()}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataBaseRequest=a.Class.define({service:null,uri:null,completeHeaders:null,extendedHeaders:null,constructor:function(b){this.base.apply(this,arguments),this.service=b,this.completeHeaders={},this.extendedHeaders={},this.uri=new a.SData.Client.SDataUri;var c,d;this.service&&(this.uri.setVersion(this.service.getVersion()),c=this.service.getIncludeContent(),void 0!==c&&this.uri.setIncludeContent(c),this.uri.setServer(this.service.getVirtualDirectory()?this.service.getVirtualDirectory():"sdata"),this.uri.setScheme(this.service.getProtocol()),this.uri.setHost(this.service.getServerName()),this.uri.setPort(this.service.getPort()),void 0!==(d=this.service.getCompact())&&this.uri.setCompact(d))},clone:function(){return new a.SData.Client.SDataBaseRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},setRequestHeader:function(a,b){this.completeHeaders[a]=b},extendRequestHeader:function(a,b){this.extendedHeaders[a]=b},clearRequestHeader:function(a){delete this.completeHeaders[a],delete this.extendedHeaders[a]},getAccept:function(){return this.extendedHeaders.Accept},setAccept:function(a){return this.extendRequestHeader("Accept",a),this},getService:function(){return this.service},getUri:function(){return this.uri},setUri:function(a){return this.uri=a,this},getServerName:function(){return this.uri.getHost()},setServerName:function(a){return this.uri.setHost(a),this},getVirtualDirectory:function(){return this.uri.getServer()},setVirtualDirectory:function(a){return this.uri.setServer(a),this},getProtocol:function(){return this.uri.getScheme()},setProtocol:function(a){return this.uri.setScheme(a),this},getPort:function(){return this.uri.getPort()},setPort:function(a){return this.uri.setPort(a),this},getQueryArgs:function(){return this.uri.getQueryArgs()},setQueryArgs:function(a,b){return this.uri.setQueryArgs(a,b),this},getQueryArg:function(a){return this.uri.getQueryArg(a)},setQueryArg:function(a,b){return this.uri.setQueryArg(a,b),this},build:function(a){return this.uri.build(a)},toString:function(a){return this.build(a)}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataApplicationRequest=a.SData.Client.SDataBaseRequest.extend({constructor:function(){this.base.apply(this,arguments),this.service&&(this.uri.setProduct(this.service.getApplicationName()?this.service.getApplicationName():"-"),this.uri.setContract(this.service.getContractName()?this.service.getContractName():"-"),this.uri.setCompanyDataset(this.service.getDataSet()?this.service.getDataSet():"-"))},clone:function(){return new a.SData.Client.SDataApplicationRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getApplicationName:function(){return this.uri.getProduct()},setApplicationName:function(a){return this.uri.setProduct(a),this},getContractName:function(){return this.uri.getContract()},setContractName:function(a){return this.uri.setContract(a),this},getDataSet:function(){return this.uri.getCompanyDataset()},setDataSet:function(a){return this.uri.setCompanyDataset(a),this},getResourceKind:function(){return this.uri.getCollectionType()},setResourceKind:function(a){return this.uri.setCollectionType(a),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataResourceCollectionRequest=a.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new a.SData.Client.SDataResourceCollectionRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getCount:function(){return this.uri.getCount()},setCount:function(a){return this.uri.setCount(a),this},getStartIndex:function(){return this.uri.getStartIndex()},setStartIndex:function(a){return this.uri.setStartIndex(a),this},read:function(a){return this.service.readFeed(this,a)}})}(),function(){var a=window.Sage,b=a.namespace("Sage.SData.Client");a.SData.Client.SDataNamedQueryRequest=a.SData.Client.SDataResourceCollectionRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex,b.SDataUri.NamedQuerySegment)},clone:function(){return new a.SData.Client.SDataNamedQueryRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getQueryName:function(){return this.uri.getPathSegment(b.SDataUri.ResourcePropertyIndex+1)},setQueryName:function(a){return this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex+1,a),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataSingleResourceRequest=a.SData.Client.SDataApplicationRequest.extend({key:"",constructor:function(){this.base.apply(this,arguments)},clone:function(){return new a.SData.Client.SDataSingleResourceRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},read:function(a){return this.service.readEntry(this,a)},update:function(a,b){return this.service.updateEntry(this,a,b)},create:function(a,b){return this.service.createEntry(this,a,b)},delete:function(a,b){return this.service.deleteEntry(this,a,b)},getResourceSelector:function(){return this.uri.getCollectionPredicate()},setResourceSelector:function(a){return this.uri.setCollectionPredicate(a),this},setResourceKey:function(a){return this.key=a,this.setResourceSelector('"'+this.key+'"'),this},getResourceKey:function(){return this.key}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataResourcePropertyRequest=a.SData.Client.SDataSingleResourceRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new a.SData.Client.SDataResourcePropertyRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},readFeed:function(a){return this.service.readFeed(this,a)},getResourceProperty:function(){return this.uri.getPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex)},setResourceProperty:function(b){return this.uri.setPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex,b),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataSystemRequest=a.SData.Client.SDataBaseRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(a.SData.Client.SDataUri.ProductPathIndex,a.SData.Client.SDataUri.SystemSegment)},clone:function(){return new a.SData.Client.SDataSystemRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},getCategory:function(){this.uri.getPathSegment(a.SData.Client.SDataUri.ContractTypePathIndex)},setCategory:function(b){return this.uri.setPathSegment(a.SData.Client.SDataUri.ContractTypePathIndex,b),this},read:function(a){return this.service.readFeed(this,a)}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataTemplateResourceRequest=a.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex,a.SData.Client.SDataUri.TemplateSegment)},clone:function(){return new a.SData.Client.SDataTemplateResourceRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},read:function(a){return this.service.readEntry(this,a)}})}(),function(){var a=window.Sage,b=a.namespace("Sage.SData.Client");a.SData.Client.SDataServiceOperationRequest=a.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments),this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex,b.SDataUri.ServiceMethodSegment)},clone:function(){return new a.SData.Client.SDataServiceOperationRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri))},execute:function(a,b){return this.service.executeServiceOperation(this,a,b)},getOperationName:function(){return this.uri.getPathSegment(b.SDataUri.ResourcePropertyIndex+1)},setOperationName:function(a){return this.uri.setPathSegment(b.SDataUri.ResourcePropertyIndex+1,a),this}})}(),function(){var a=window.Sage;a.namespace("Sage.SData.Client");a.SData.Client.SDataBatchRequest=a.SData.Client.SDataApplicationRequest.extend({items:null,constructor:function(){this.base.apply(this,arguments),this.items=[],this.uri.setPathSegment(a.SData.Client.SDataUri.ResourcePropertyIndex,a.SData.Client.SDataUri.BatchSegment)},clone:function(){return new a.SData.Client.SDataBatchRequest(this.service).setUri(new a.SData.Client.SDataUri(this.uri)).setItems(this.items.slice(0))},getItems:function(){return this.items},setItems:function(a){return this.items=a,this},using:function(a,b){if(!this.service)throw"A service must be associated with the batch request.";this.service.registerBatchScope(this);try{a.call(b||this,this)}catch(a){throw this.service.clearBatchScope(this),a}return this.service.clearBatchScope(this),this},add:function(a){this.items.push(a)},commit:function(a){this.service.commitBatch(this,a)}})}(),function(){var a=window.Sage,b=a,c=a.namespace("Sage.SData.Client"),d=/^true$/i;a.SData.Client.SDataUri=a.Class.define({scheme:"http",host:"",server:"",port:-1,version:null,queryArgs:null,pathSegments:null,constructor:function(a){this.base.apply(this,arguments),b.apply(this,a),this.queryArgs=b.apply({},a&&a.queryArgs),this.pathSegments=a&&a.pathSegments&&a.pathSegments.slice(0)||[],this.version=a&&a.version&&b.apply({},a.version)||{major:1,minor:0
}},clone:function(){return new a.SData.Client.SDataUri(this)},getVersion:function(){return this.version},setVersion:function(a){return this.version=b.apply({major:0,minor:0},a),this},getScheme:function(){return this.scheme},setScheme:function(a){return this.scheme=a,this},getHost:function(){return this.host},setHost:function(a){return this.host=a,this},getPort:function(){return this.port},setPort:function(a){return this.port=a,this},getServer:function(){return this.server},setServer:function(a){return this.server=a,this},getQueryArgs:function(){return this.queryArgs},setQueryArgs:function(a,c){return this.queryArgs=c?a:b.apply(this.queryArgs,a),this},getQueryArg:function(a){return this.queryArgs[a]},setQueryArg:function(a,b){return this.queryArgs[a]=b,this},getPathSegments:function(){return this.pathSegments},setPathSegments:function(a){return this.pathSegments=a,this},getPathSegment:function(a){return this.pathSegments.length>a&&this.pathSegments[a]},setPathSegment:function(a,c,d){if(c||d)if("object"==typeof c)this.pathSegments[a]=b.apply({},c,this.pathSegments[a]);else{var e={};c&&(e.text=c),d&&(e.predicate=d),this.pathSegments[a]=b.apply({},e,this.pathSegments[a])}else this.pathSegments[a]=null;return this},getStartIndex:function(){return this.queryArgs[c.SDataUri.QueryArgNames.StartIndex]?parseInt(this.queryArgs[c.SDataUri.QueryArgNames.StartIndex]):-1},setStartIndex:function(a){return this.queryArgs[c.SDataUri.QueryArgNames.StartIndex]=a,this},getCount:function(){return this.queryArgs[c.SDataUri.QueryArgNames.Count]?parseInt(this.queryArgs[c.SDataUri.QueryArgNames.Count]):-1},setCount:function(a){return this.queryArgs[c.SDataUri.QueryArgNames.Count]=a,this},getIncludeContent:function(){var a,b;return a=this.version.major>=1?c.SDataUri.QueryArgNames.IncludeContent:c.SDataUri.QueryArgNames.LegacyIncludeContent,b=this.queryArgs[a],void 0!==b?d.test(b):b},setCompact:function(a){return this.queryArgs[c.SDataUri.QueryArgNames.Compact]=a,this},getCompact:function(){return this.queryArgs[c.SDataUri.QueryArgNames.Compact]},setIncludeContent:function(a){var b=this.version.major>=1?c.SDataUri.QueryArgNames.IncludeContent:c.SDataUri.QueryArgNames.LegacyIncludeContent;return this.queryArgs[b]=""+a,this},appendPath:function(a){var b="string"==typeof a?{text:a}:a;return this.pathSegments.push(b),this},toString:function(a){return this.build(a)},build:function(a){var b=[];b.push(this.getScheme()||c.SDataUri.Http),b.push(c.SDataUri.SchemeSuffix),b.push(c.SDataUri.PathSegmentPrefix),b.push(c.SDataUri.PathSegmentPrefix),b.push(this.getHost()),this.getPort()>0&&b.push(c.SDataUri.PortPrefix,this.getPort()),b.push(c.SDataUri.PathSegmentPrefix);var d=this.getPathSegments(),e=[],f=this.getServer();f&&f.length>0&&(e=e.concat(f.split("/")));for(var g=0;g<d.length;g++){var h=d[g];h&&h.text&&(h.predicate?e.push(encodeURIComponent(h.text+"("+h.predicate+")")):e.push(encodeURIComponent(h.text)))}if(b.push(e.join(c.SDataUri.PathSegmentPrefix)),a)return b.join("");var i=this.getQueryArgs(),j=[];for(var k in i)j.push(encodeURIComponent(k)+c.SDataUri.QueryArgValuePrefix+encodeURIComponent(i[k]));return j.length>0&&(b.push(c.SDataUri.QueryPrefix),b.push(j.join(c.SDataUri.QueryArgPrefix))),b.join("")},getProduct:function(){return this.getPathSegment(c.SDataUri.ProductPathIndex)},setProduct:function(a){return this.setPathSegment(c.SDataUri.ProductPathIndex,a)},getContract:function(){return this.getPathSegment(c.SDataUri.ContractTypePathIndex)},setContract:function(a){return this.setPathSegment(c.SDataUri.ContractTypePathIndex,a)},getCompanyDataset:function(){return this.getPathSegment(c.SDataUri.CompanyDatasetPathIndex)},setCompanyDataset:function(a){return this.setPathSegment(c.SDataUri.CompanyDatasetPathIndex,a)},getCollectionType:function(){return this.getPathSegment(c.SDataUri.CollectionTypePathIndex)},setCollectionType:function(a){return this.setPathSegment(c.SDataUri.CollectionTypePathIndex,a)},getCollectionPredicate:function(){var a=this.getPathSegment(c.SDataUri.CollectionTypePathIndex);return a&&a.predicate||!1},setCollectionPredicate:function(a){return this.setPathSegment(c.SDataUri.CollectionTypePathIndex,{predicate:a})}}),a.apply(a.SData.Client.SDataUri,{Http:"http",Https:"https",PathSegmentPrefix:"/",PortPrefix:":",QueryArgPrefix:"&",QueryArgValuePrefix:"=",QueryPrefix:"?",SchemeSuffix:":",UnspecifiedPort:-1,UriName:"uri",QueryArgNames:{Compact:"_compact",Count:"count",Exclude:"exclude",Format:"format",Include:"include",IncludeContent:"_includeContent",LegacyIncludeContent:"includeContent",IncludeSchema:"includeSchema",Language:"language",OrderBy:"orderby",Precedence:"precedence",ReturnDelta:"returnDelta",Search:"search",Select:"select",StartIndex:"startIndex",Thumbnail:"thumbnail",TrackingID:"trackingID",Where:"where"},ProductPathIndex:0,ContractTypePathIndex:1,CompanyDatasetPathIndex:2,CollectionTypePathIndex:3,ResourcePropertyIndex:4,ServiceMethodSegment:"$service",TemplateSegment:"$template",SystemSegment:"$system",NamedQuerySegment:"$queries",BatchSegment:"$batch"})}(),function(){var a=window.Sage,b=a,c=a.namespace("Sage.SData.Client"),d=function(a){return void 0!==a},e=function(a){return a&&a["#text"]?a["#text"]:a},f=/^(.+?):(.*)$/;a.SData.Client.SDataService=a.Evented.extend({uri:null,useCredentialedRequest:!1,useCrossDomainCookies:!1,userAgent:"Sage",userName:!1,password:"",batchScope:null,timeout:0,cache:!1,cacheParam:"_t",_etags:{},maxGetUriLength:2e3,constructor:function(a,b,c){this.base.call(this,a),this.setUri(a),d(a.includeContent)&&this.uri.setIncludeContent(a.includeContent),d(a.version)&&this.uri.setVersion(a.version),d(a.cache)&&(this.cache=a.cache),d(a.cacheParam)&&(this.cacheParam=a.cacheParam),d(a.compact)&&this.uri.setCompact(a.compact),d(a.userName)&&(this.userName=a.userName),d(a.password)&&(this.password=a.password),d(b)&&(this.userName=b),d(c)&&(this.password=c),d(a.json)&&(this.json=a.json),d(a.maxGetUriLength)&&(this.maxGetUriLength=a.maxGetUriLength),d(a.timeout)&&(this.timeout=a.timeout),d(a.useCredentialedRequest)&&(this.useCredentialedRequest=a.useCredentialedRequest),d(a.useCrossDomainCookies)&&(this.useCrossDomainCookies=a.useCrossDomainCookies),this.addEvents("beforerequest","requestcomplete","requestexception","requestaborted","requesttimeout")},setUri:function(b){if(d(b.uri))this.uri=new a.SData.Client.SDataUri(b.uri);else{this.uri=new a.SData.Client.SDataUri;var c=this.parseUri(b);d(c.serverName)&&this.uri.setHost(c.serverName),d(c.virtualDirectory)&&this.uri.setServer(c.virtualDirectory),d(c.applicationName)&&this.uri.setProduct(c.applicationName),d(c.contractName)&&this.uri.setContract(c.contractName),d(c.dataSet)&&this.uri.setCompanyDataset(c.dataSet),d(c.port)&&this.uri.setPort(c.port),d(c.protocol)&&this.uri.setScheme(c.protocol)}return this},parseUri:function(a){var c={},d="object"==typeof a?a.url:a,e="function"==typeof window.parseUri&&window.parseUri(d);if(e){e.host&&(c.serverName=e.host);var f=e.path.split("/").slice(1);f[0]&&(c.virtualDirectory=f[0]),f[1]&&(c.applicationName=f[1]),f[2]&&(c.contractName=f[2]),f[3]&&(c.dataSet=f[3]),e.port&&(c.port=parseInt(e.port)),e.protocol&&(c.protocol=e.protocol)}return"object"==typeof a&&b.apply(c,a),c},isJsonEnabled:function(){return this.json},enableJson:function(){return this.json=!0,this},disableJson:function(){return this.json=!1,this},getVersion:function(){return this.uri.getVersion()},setVersion:function(a){return this.uri.setVersion(a),this},getUri:function(){return this.uri},getUserName:function(){return this.userName},setUserName:function(a){return this.userName=a,this},getPassword:function(){return this.password},setPassword:function(a){return this.password=a,this},getProtocol:function(){return this.uri.getScheme()},setProtocol:function(a){return this.uri.setScheme(a),this},getServerName:function(){return this.uri.getHost()},setServerName:function(a){return this.uri.setHost(a),this},getPort:function(){return this.uri.getPort()},setPort:function(a){return this.uri.setPort(a),this},getVirtualDirectory:function(){return this.uri.getServer()},setVirtualDirectory:function(a){return this.uri.setServer(a),this},getApplicationName:function(){return this.uri.getProduct()},setApplicationName:function(a){return this.uri.setProduct(a),this},getContractName:function(){return this.uri.getContract()},setContractName:function(a){return this.uri.setContract(a),this},getDataSet:function(){return this.uri.getCompanyDataset()},setDataSet:function(a){return this.uri.setCompanyDataset(a),this},getIncludeContent:function(){return this.uri.getIncludeContent()},setIncludeContent:function(a){return this.uri.setIncludeContent(a),this},getCompact:function(){return this.uri.getCompact()},setCompact:function(a){return this.uri.setCompact(a),this},setMaxGetUriLength:function(a){return this.maxGetUriLength=a,this},getMaxGetUriLength:function(){return this.maxGetUriLength},getUserAgent:function(){return this.userAgent},setUserAgent:function(a){return this.userAgent=a,this},registerBatchScope:function(a){this.batchScope=a},clearBatchScope:function(a){this.batchScope=null},createBasicAuthToken:function(){return"Basic "+Base64.encode(this.userName+":"+this.password)},createHeadersForRequest:function(a){var b={"X-Authorization-Mode":"no-challenge"};return this.userName&&!this.useCredentialedRequest&&(b.Authorization=b["X-Authorization"]=this.createBasicAuthToken()),b},extendAcceptRequestHeader:function(a,b){return a?a.split(/\s*,\s*/).join(";"+b+",")+";"+b:a},executeRequest:function(a,d,e){this.json&&a.setQueryArg("format","json");var f=a.build(),g=b.apply({async:d.async,headers:{},method:"GET",url:f,cache:d.cache||this.cache,cacheParam:d.cacheParam||this.cacheParam,etagCache:this._etags[f]},{scope:this,success:function(b,c){var e=b.responseText;304===b.status&&(e=this._etags[f].responseText);var g=b.getResponseHeader&&b.getResponseHeader("Content-Type"),h=this.processFeed(e,g),i=b.getResponseHeader&&b.getResponseHeader("etag");this._etags[f]={etag:i,responseText:e},this.fireEvent("requestcomplete",a,c,h),d.success&&d.success.call(d.scope||this,h)},failure:function(b,c){this.fireEvent("requestexception",a,c,b),d.failure&&d.failure.call(d.scope||this,b,c)},aborted:function(b,c){this.fireEvent("requestaborted",a,c,b),d.aborted&&d.aborted.call(d.scope||this,b,c)},timeout:function(b,c){this.fireEvent("requesttimeout",a,c,b),d.timeout&&d.timeout.call(d.scope||this,b,c)}},e);return b.apply(g.headers,this.createHeadersForRequest(a),a.completeHeaders),"number"==typeof this.timeout&&(g.requestTimeout=this.timeout),a.extendedHeaders.Accept&&(g.headers.Accept=this.extendAcceptRequestHeader(g.headers.Accept,a.extendedHeaders.Accept)),(this.useCredentialedRequest||this.useCrossDomainCookies)&&(g.withCredentials=!0),this.useCredentialedRequest&&this.userName&&(g.user=this.userName,g.password=this.password),this.fireEvent("beforerequest",a,g),void 0!==g.result?void(d.success&&d.success.call(d.scope||this,g.result)):c.Ajax.request(g)},abortRequest:function(a){c.Ajax.cancel(a)},readFeed:function(a,b){if(b=b||{},this.batchScope)return void this.batchScope.add({url:a.build(),method:"GET"});var c={headers:{Accept:this.json?"application/json,*/*":"application/atom+xml;type=feed,*/*"}},d=a.build();return(b.httpMethodOverride||"string"==typeof d&&d.length>this.maxGetUriLength)&&(this.json&&a.setQueryArg("format","json"),c.headers["X-HTTP-Method-Override"]="GET",c.method="POST",c.body=a.build(),c.url=a.build(!0)),this.executeRequest(a,b,c)},readEntry:function(a,c){if(c=c||{},this.batchScope){var d={url:a.build(),method:"GET"},e=a.getResourceKey();return"string"==typeof e&&e.length>0&&(d.key=e),void this.batchScope.add(d)}var f=b.apply({},{success:function(a){var b=a.$resources[0]||!1;c.success&&c.success.call(c.scope||this,b)}},c);return this.executeRequest(a,f,{headers:{Accept:this.json?"application/json,*/*":"application/atom+xml;type=entry,*/*"}})},createEntry:function(a,c,d){if(d=d||{},this.batchScope)return void this.batchScope.add({url:a.build(),entry:c,method:"POST"});var e=b.apply({},{success:function(a){var b=a.$resources[0]||!1;d.success&&d.success.call(d.scope||this,b)}},d),f=b.apply({},{method:"POST"});if(this.isJsonEnabled())b.apply(f,{body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});else{var g=new XML.ObjTree;g.attr_prefix="@",b.apply(f,{body:g.writeXML(this.formatEntry(c)),headers:{"Content-Type":"application/atom+xml;type=entry",Accept:"application/atom+xml;type=entry,*/*"}})}return this.executeRequest(a,e,f)},updateEntry:function(a,c,d){if(d=d||{},this.batchScope)return void this.batchScope.add({url:a.build(),entry:c,method:"PUT",etag:c.$etag});var e=b.apply({},{success:function(a){var b=a.$resources[0]||!1;d.success&&d.success.call(d.scope||this,b)}},d),f={},g={method:"PUT",headers:f};if(!c.$etag||d&&d.ignoreETag||(f["If-Match"]=c.$etag),this.isJsonEnabled())f["Content-Type"]="application/json",g.body=JSON.stringify(c);else{var h=new XML.ObjTree;h.attr_prefix="@",f["Content-Type"]="application/atom+xml;type=entry",f.Accept="application/atom+xml;type=entry,*/*",g.body=h.writeXML(this.formatEntry(c))}return this.executeRequest(a,e,g)},deleteEntry:function(a,b,c){if(c=c||{},this.batchScope)return void this.batchScope.add({url:a.build(),method:"DELETE",etag:!(c&&c.ignoreETag)&&b.$etag});var d={},e={method:"DELETE",headers:d};return!b.$etag||c&&c.ignoreETag||(d["If-Match"]=b.$etag),this.executeRequest(a,c,e)},executeServiceOperation:function(a,c,d){var e=b.apply({},{success:function(a){var b=a.$resources[0]||!1,c=b&&b.response,e=c&&c.$resources,f=e&&e[0];f&&f.$name&&(b.response={},b.response[f.$name]=f),d.success&&d.success.call(d.scope||this,b)}},d),f=b.apply({},{method:"POST"});if(this.isJsonEnabled())b.apply(f,{body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});else{var g=new XML.ObjTree;g.attr_prefix="@",b.apply(f,{body:g.writeXML(this.formatEntry(c)),headers:{"Content-Type":"application/atom+xml;type=entry",Accept:"application/atom+xml;type=entry,*/*"}})}return this.executeRequest(a,e,f)},commitBatch:function(a,c){c=c||{};for(var d,e,f=a.getItems(),g={$resources:[]},h=0;h<f.length;h++)d=f[h],e=b.apply({},d.entry),d.url&&(e.$url=d.url),d.key&&(e.$key=d.key),d.etag&&(e.$ifMatch=d.etag),d.method&&(e.$httpMethod=d.method),delete e.$etag,g.$resources.push(e);var i=b.apply({},{method:"POST"});if(this.isJsonEnabled())b.apply(i,{body:JSON.stringify(g),headers:{"Content-Type":"application/json"}});else{var j=new XML.ObjTree;j.attr_prefix="@",b.apply(i,{body:j.writeXML(this.formatFeed(g)),headers:{"Content-Type":"application/atom+xml;type=feed",Accept:"application/atom+xml;type=feed,*/*"}})}return this.executeRequest(a,c,i)},parseFeedXml:function(a){var b=new XML.ObjTree;return b.attr_prefix="@",b.parseXML(a)},isIncludedReference:function(a,b,c){return c&&c.hasOwnProperty("@sdata:key")},isIncludedCollection:function(a,c,d){if(d.hasOwnProperty("@sdata:key"))return!1;if(d.hasOwnProperty("@sdata:uri")||d.hasOwnProperty("@sdata:url"))return!0;var e,f;for(var g in d)if("@"!==g.charAt(0)){e=d[g];break}return!!(e&&(f=b.isArray(e)?e[0]:e)&&f.hasOwnProperty("@sdata:key"))},convertEntity:function(a,b,c,d){d=d||{},d.$name=b,d.$key=c["@sdata:key"],d.$url=c["@sdata:uri"],d.$uuid=c["@sdata:uuid"];for(var e in c)if("@"!==e.charAt(0)){var g=f.exec(e),h=!!g&&g[1],i=g?g[2]:e,j=null,k=c[e];"object"==typeof k&&(j=k.hasOwnProperty("@xsi:nil")?null:this.isIncludedReference(h,i,k)?this.convertEntity(h,i,k):this.isIncludedCollection(h,i,k)?this.convertEntityCollection(h,i,k):this.convertCustomEntityProperty(h,i,k),k=j),d[i]=k}return d},convertEntityCollection:function(a,c,d){for(var e in d)if("@"!==e.charAt(0)){var g=f.exec(e),h=(!!g&&g[1],g?g[2]:e),i=d[e];if(b.isArray(i)){for(var j=[],k=0;k<i.length;k++)j.push(this.convertEntity(a,h,i[k]));return{$resources:j}}return{$resources:[this.convertEntity(a,h,i)]}}return null},convertCustomEntityProperty:function(a,b,c){return c},formatEntity:function(a,b,c){c=c||{},b.$key&&(c["@sdata:key"]=b.$key);for(var d in b)if("$"!==d.charAt(0)){var e=b[d];null==e?e={"@xsi:nil":"true"}:"object"==typeof e&&e.hasOwnProperty("$resources")?e=this.formatEntityCollection(a,e):"object"==typeof e&&(e=this.formatEntity(a,e)),c[d]=e}return c},formatEntityCollection:function(a,b){for(var c={},d=0;d<b.$resources.length;d++){var e=b.$resources[d],f=e.$name;(c[f]=c[f]||[]).push(this.formatEntity(a,b.$resources[d]))}return c},convertEntry:function(a){var b={};b.$descriptor=a.title,b.$etag=a["http:etag"],b.$httpStatus=a["http:httpStatus"];var c=a["sdata:payload"];for(var d in c)if("@"!==d.charAt(0)&&0!=c.hasOwnProperty(d)){var e,f,g=d.split(":"),h=c[d];if(2==g.length)e=g[0],f=g[1];else{if(!(g.length<2))continue;e=!1,f=d}this.convertEntity(e,f,h,b)}return b},formatEntry:function(a,b){var c={};return b||(c["@xmlns:sdata"]="http://schemas.sage.com/sdata/2008/1",c["@xmlns:xsi"]="http://www.w3.org/2001/XMLSchema-instance",c["@xmlns:http"]="http://schemas.sage.com/sdata/http/2008/1",c["@xmlns"]="http://www.w3.org/2005/Atom"),a.$httpMethod&&(c["http:httpMethod"]=a.$httpMethod),a.$ifMatch&&(c["http:ifMatch"]=a.$ifMatch),a.$etag&&(c["http:etag"]=a.$etag),a.$url&&(c.id=a.$url),c["sdata:payload"]={},c["sdata:payload"][a.$name]={"@xmlns":"http://schemas.sage.com/dynamic/2007"},this.formatEntity(!1,a,c["sdata:payload"][a.$name]),{entry:c}},convertFeed:function(a){var c,d={};if(a["opensearch:totalResults"]&&(d.$totalResults=parseInt(e(a["opensearch:totalResults"]))),a["opensearch:startIndex"]&&(d.$startIndex=parseInt(e(a["opensearch:startIndex"]))),a["opensearch:itemsPerPage"]&&(d.$itemsPerPage=parseInt(e(a["opensearch:itemsPerPage"]))),a.link){for(d.$link={},c=0;c<a.link.length;c++)d.$link[a.link[c]["@rel"]]=a.link[c]["@href"];d.$link.self&&(d.$url=d.$link.self)}if(d.$resources=[],b.isArray(a.entry))for(c=0;c<a.entry.length;c++)d.$resources.push(this.convertEntry(a.entry[c]));else"object"==typeof a.entry&&d.$resources.push(this.convertEntry(a.entry));return d},formatFeed:function(a){var b={};b["@xmlns:sdata"]="http://schemas.sage.com/sdata/2008/1",b["@xmlns:xsi"]="http://www.w3.org/2001/XMLSchema-instance",b["@xmlns:http"]="http://schemas.sage.com/sdata/http/2008/1",b["@xmlns"]="http://www.w3.org/2005/Atom",a.$url&&(b.id=a.$url),b.entry=[];for(var c=0;c<a.$resources.length;c++)b.entry.push(this.formatEntry(a.$resources[c],!0).entry);return{feed:b}},processFeed:function(a,b){if(!a)return null;var c;return/application\/json/i.test(b)||!b&&this.isJsonEnabled()?(c=JSON.parse(a),c.hasOwnProperty("$resources")?c:{$resources:[c]}):(c=this.parseFeedXml(a),c.hasOwnProperty("feed")?this.convertFeed(c.feed):c.hasOwnProperty("entry")?{$resources:[this.convertEntry(c.entry)]}:c)}})}(),function(){var a=/^\s+|\s+$/g,b=/(,)/,c=/'/g,d=/\n/g,e=/&/g,f=/</g,g=/>/g,h=/"/g,i={},j={},k=3!="is,ie".split(b).length,l={cacheMarkup:!0,tags:{begin:"{%",end:"%}"},allowWith:!1},m=this,n=function(a,b,c){if(c)for(var d in c)a[d]=c[d];if(b)for(var e in b)a[e]=b[e];return a},o=function(a){return"string"!=typeof a?a:a.replace(e,"&amp;").replace(f,"&lt;").replace(g,"&gt;").replace(h,"&quot;")},p=function(a){return a.replace(c,"\\'").replace(d,"\\n")},q=function(b){return b.replace(a,"")},r=function(a,b){var c=b.tags.begin,d=b.tags.end,e=[],f=0;if(!k){var g=c+d,h=j[g]||(j[g]=new RegExp(c+"(.*?)"+d));return e=a.split(h)}for(var i=0,l=0,m=[];-1!=(i=a.indexOf(c,l))&&-1!=(l=a.indexOf(d,i));)m[m.length]=i,m[m.length]=l;for(var n=0;n<m.length;n++)e[e.length]=a.substr(f,m[n]-f),f=m[n]+(n%2?d.length:c.length);return e.push(a.substr(f)),e},s=function(a,b){i[a]=b},t=function(a){return i[a]},u=function(a,b){var c,d,e,f,g,h,j;if(c=n({},b,l),a.join&&(a=a.join("")),c.cacheMarkup&&i[a])return i[a];for(d=r(a,c),e=1;e<d.length;e+=2)if(d[e].length>0)switch(g=d[e].charAt(0),h=d[e].substr(1),g){case"=":d[e]="__results.push("+h+");";break;case":":d[e]="__results.push(__simplate.encode("+h+"));";break;case"!":d[e]="__results.push("+q(h)+".apply(__data, __container));"}for(f=0;f<d.length;f+=2)d[f]="__results.push('"+p(d[f])+"');";d.unshift("var __results = [], $ = __data, $$ = __container, __simplate = Simplate;",c.allowWith?"with ($ || {}) {":""),d.push(c.allowWith?"}":"","return __results.join('');");try{j=new Function("__data, __container",d.join(""))}catch(a){j=function(b){return a.message}}return c.cacheMarkup?(i[a]=j,i[a]):j},v=function(a,b){this.fn=u(a,b)};n(v,{options:l,encode:o,make:u,setCache:s,getCache:t}),n(v.prototype,{apply:function(a,b){return this.fn.call(b||this,a,b||a)}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),m.Simplate=exports.Simplate=v):"function"==typeof define&&define.amd&&define("Simplate",[],function(){return v}),m.Simplate=v}();
//# sourceMappingURL=Dialog-Combined.js.map
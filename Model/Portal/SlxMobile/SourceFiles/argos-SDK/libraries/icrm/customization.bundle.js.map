{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c761ba9353f2de45f5cc","webpack:///./src/index.js","webpack:///external {\"commonjs\":\"@infor/icrm-js-common\",\"commonjs2\":\"@infor/icrm-js-common\",\"amd\":\"@infor/icrm-js-common\",\"root\":\"ICRMCommonSDK\"}","webpack:///./index.js"],"names":["normalizeCustomizationSet","getCustomizationSetKey","createCustomizedLayout","compileCustomizedLayout","expand","expression","args","apply","customizationSet","customizationSubSet","id","key","layout","customizations","length","parent","customizationCount","layoutCount","applied","output","Array","isArray","i","row","name","property","insertRowsBefore","insertRowsAfter","j","customization","stop","at","type","value","Object","assign","insertRowsTarget","where","expandedValue","push","children","as","k","or","call"],"mappings":"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","file":"customization.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@infor/icrm-js-common\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@infor/icrm-js-common\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ICRMCustomizationSDK\"] = factory(require(\"@infor/icrm-js-common\"));\n\telse\n\t\troot[\"ICRMCustomizationSDK\"] = factory(root[\"ICRMCommonSDK\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c761ba9353f2de45f5cc","import { utility } from '@infor/icrm-js-common';\n\n/**\n * @function CustomizationMixin\n * Customization Mixin is a general purpose Customization Engine. It takes a customization object and\n * a layout object and applies the customization defined to the layout.\n *\n * A customization object has the following properties:\n *\n * * `at`: `function(item)` - passes the current item in the list, the function should return true if this is the item being modified (or is at where you want to insert something).\n * * `at`: `{Number}` - May optionally define the index of the item instead of a function.\n * * `type`: `{String}` - enum of `insert`, `modify`, `replace` or `remove` that indicates the type of customization.\n * * `where`: `{String}` - enum of `before` or `after` only needed when type is `insert`.\n * * `value`: `{Object}` - the entire object to create (insert or replace) or the values to overwrite (modify), not needed for remove.\n * * `value`: `{Object[]}` - if inserting you may pass an array of items to create.\n *\n * @alternateClassName _CustomizationMixin\n */\nfunction expand(expression, ...args) {\n  if (typeof expression === 'function') {\n    return expression.apply(this, args);\n  }\n\n  return expression;\n}\n\nexport function normalizeCustomizationSet(customizationSet, customizationSubSet) {\n  if (customizationSubSet) {\n    return `${customizationSet}/${customizationSubSet}`;\n  }\n\n  return customizationSet;\n}\n\nexport function getCustomizationSetKey(customizationSet, id, customizationSubSet) {\n  customizationSet = normalizeCustomizationSet(customizationSet, customizationSubSet);\n  const key = `${customizationSet}#${id}`;\n  return key;\n}\n\nexport function createCustomizedLayout(layout, customizations, customizationSet, id, customizationSubSet) {\n  customizationSet = normalizeCustomizationSet(customizationSet, customizationSubSet);\n\n  if (customizations && customizations.length > 0) {\n    return compileCustomizedLayout(customizations, layout, null);//eslint-disable-line\n  }\n\n  return layout;\n}\n\nexport function compileCustomizedLayout(customizations, layout, parent) {\n  const customizationCount = customizations.length;\n  const layoutCount = layout.length;\n  const applied = {};\n  let output;\n\n  if (Array.isArray(layout)) {\n    output = [];\n    for (let i = 0; i < layoutCount; i++) {\n      let row = layout[i];\n\n      /* for compatibility */\n      // will modify the underlying row\n      if (typeof row.name === 'undefined' && typeof row.property === 'string') {\n        row.name = row.property;\n      }\n\n      const insertRowsBefore = [];\n      const insertRowsAfter = [];\n\n      for (let j = 0; j < customizationCount; j++) {\n        if (applied[j]) {\n          continue; // todo: allow a customization to be applied to a layout more than once?\n        }\n\n        const customization = customizations[j];\n        let stop = false;\n\n        if (expand(customization.at, row, parent, i, layoutCount, customization)) {\n          switch (customization.type) {//eslint-disable-line\n            case 'remove':\n              // full stop\n              stop = true;\n              row = null;\n              break;\n            case 'replace':\n              // full stop\n              stop = true;\n              row = expand(customization.value, row);\n              break;\n            case 'modify':\n              // make a shallow copy if we haven't already\n              if (row === layout[i]) {\n                row = Object.assign({}, row);\n              }\n\n              row = Object.assign(row, expand(customization.value, row));\n              break;\n            case 'insert'://eslint-disable-line\n              const insertRowsTarget = (customization.where !== 'before') ? insertRowsAfter : insertRowsBefore;\n              const expandedValue = expand(customization.value, row);\n\n              if (Array.isArray(expandedValue)) {\n                insertRowsTarget.push.apply(insertRowsTarget, expandedValue); //eslint-disable-line\n              } else {\n                insertRowsTarget.push(expandedValue);\n              }\n\n              break;\n          }\n\n          applied[j] = true;\n        }\n\n        if (stop) {\n          break;\n        }\n      }\n\n      output.push.apply(output, insertRowsBefore);//eslint-disable-line\n\n      if (row) {\n        const children = (row.children && 'children') || (row.as && 'as');\n        if (children) {\n          // make a shallow copy if we haven't already\n          if (row === layout[i]) {\n            row = Object.assign({}, row);\n          }\n\n          row[children] = compileCustomizedLayout(customizations, row[children], row);\n        }\n\n        output.push(row);\n      }\n      output.push.apply(output, insertRowsAfter);//eslint-disable-line\n    }\n    /*\n     for any non-applied, insert only, customizations, if they have an `or` property that expands into a true expression\n     the value is applied at the end of the parent group that the `or` property (ideally) matches.\n    */\n    for (let k = 0; k < customizationCount; k++) {\n      if (applied[k]) {\n        continue;\n      }\n\n      const customization = customizations[k];\n\n      if (customization.type === 'insert' && (expand(customization.or, parent, customization) || (customization.at === true))) {\n        output.push(expand(customization.value, null));\n      }\n    }\n  } else if (typeof layout === 'function') {\n    return compileCustomizedLayout(customizations, layout.call(this), name);\n  } else if (typeof layout === 'object' && layout !== null) {\n    output = {};\n\n    for (const name in layout) {\n      if (Array.isArray(layout[name])) {\n        output[name] = compileCustomizedLayout(customizations, layout[name], name);\n      } else {\n        output[name] = layout[name];\n      }\n    }\n  }\n\n  return output;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"@infor/icrm-js-common\",\"commonjs2\":\"@infor/icrm-js-common\",\"amd\":\"@infor/icrm-js-common\",\"root\":\"ICRMCommonSDK\"}\n// module id = 1\n// module chunks = 0","/**\n * @module\n * @description\n * Customization API\n */\nexport * from './src/index';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}